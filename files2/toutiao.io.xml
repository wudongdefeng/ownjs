<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>bab1402c236be73af82be001abf6f27f</guid>
<title>æ·±å…¥æµ…å‡ºæ“ä½œç³»ç»Ÿçš„é›¶æ‹·è´</title>
<link>https://toutiao.io/k/x5izhz0</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;p&gt;åœ¨ kafkaã€netty è¿™äº›æŠ€æœ¯ä¸­ï¼Œé›¶æ‹·è´éƒ½æ˜¯ä¸€ä¸ªé‡è¦çš„è€ƒç‚¹ã€‚ä½†æ˜¯é›¶æ‹·è´ä¸è¿™äº›å…·ä½“çš„æŠ€æœ¯æ— å…³ï¼Œå…³é”®ç‚¹æ˜¯æ•°æ®ä¼ è¾“ã€‚å°±åƒå†°ç³–è‘«èŠ¦é‡Œçš„å±±æ¥‚ï¼šå†°ç³–è‘«èŠ¦é‡Œé‡è¦çš„ç»„æˆå¯ä»¥æœ‰å±±æ¥‚ã€‚ä½†æ˜¯å±±æ¥‚å¹¶ä¸æ˜¯å†°ç³–è‘«èŠ¦ç‰¹æœ‰çš„ï¼Œç¾Šç¾¹é‡Œä¹Ÿå¯ä»¥æœ‰ã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.75&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/2tk5ianItRl8GqAQMn8Y0C5nrqGc1D7FnicbvW3UgjOW5xoYENoPkXiba2k3M3zsz99v98u5XsmPeLldmhWibnOvNQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;800&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ª MQ çš„åŸºæœ¬æµç¨‹ã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.423828125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRl8GqAQMn8Y0C5nrqGc1D7FnzBRLMO0rIibRMVnic13B0eArj9BJBXkKm6bp41vxRIcRB2owhhNsia46A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;512&quot;/&gt;&lt;/p&gt;&lt;p&gt;å¦‚æœé‡‡ç”¨ä¼ ç»Ÿæ–¹æ³•è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œæ¶ˆæ¯ä»å­˜å‚¨ç³»ç»Ÿåˆ°è¾¾æ¶ˆè´¹è€…éœ€è¦ç»è¿‡4æ¬¡æ‹·è´ã€‚å¦‚æœä½¿ç”¨é›¶æ‹·è´æŠ€æœ¯ï¼Œæƒ…å†µä¼šæ€æ ·å‘¢ï¼Ÿ&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;vote_area&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;ä¼ ç»Ÿæ¨¡å¼ä¸‹çš„æ•°æ®æ‹·è´è¿‡ç¨‹&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;è¿‡ç¨‹è§£é‡Š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¼ ç»Ÿæ¨¡å¼ä¸‹ï¼Œä¸Šå›¾çº¢æ¡†ä¸­ç»è¿‡äº†ä»æ–‡ä»¶è¯»æ•°æ®å’Œä» socket è¿›è¡Œæ•°æ®å‘é€ä¸¤ä¸ªè¿‡ç¨‹ã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.2544529262086514&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRl8GqAQMn8Y0C5nrqGc1D7FnGy9b6oxfCdkYpKCDvWgicFRXibaVMY8jw9pgllDicricDPKviakhaO01ECw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;393&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å†…éƒ¨æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.4351535836177474&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRl8GqAQMn8Y0C5nrqGc1D7FnL9YDXohTtY8biaUwoFy8h2F2zSEQ0hWEwsgde19AyibH45vbeNz3jFtA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;586&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ç”¨æˆ·è¿›ç¨‹å¦‚ Java ç¨‹åºæƒ³è¿›è¡Œ File.read ï¼Œéœ€è¦å°†æ•°æ®è¿›è¡Œ DMA æ‹·è´è¯»å–åˆ°åˆ°æ–‡ä»¶è¯»å–ç¼“å†²åŒºã€‚è¿˜è®°å¾—&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247486487&amp;amp;idx=1&amp;amp;sn=0cff83eead864825e415811ddc215420&amp;amp;chksm=fafde6b9cd8a6fafb71bef95e6a8c6dc870c89f2e9b487064078d89e23215c8e2a948acfc634&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ã€Šæ—¶åˆ»æŒæ¡ç³»ç»Ÿè¿è¡ŒçŠ¶æ€-æ·±åº¦ç†è§£topå‘½ä»¤ã€‹&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;ã€Š&lt;span&gt;æ—¶åˆ»æŒæ¡ç³»ç»Ÿè¿è¡ŒçŠ¶æ€-æ·±åº¦ç†è§£topå‘½ä»¤ã€‹&lt;/span&gt;&lt;/a&gt;&lt;span&gt;é‡Œçš„Â &lt;/span&gt;&lt;span&gt;buffers/cached ç©ºé—´&lt;/span&gt;å—ï¼Ÿæ–‡ä»¶è¯»å–ç¼“å†²åŒºå ç”¨çš„å°±æ˜¯è¿™ä¸ªç©ºé—´ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ–‡ä»¶è¯»å–ç¼“å†²åŒºä»ç„¶æ˜¯å†…æ ¸ç©ºé—´ï¼Œç”¨æˆ·è¿›ç¨‹è¦ä½¿ç”¨è¿˜éœ€è¦è¿›è¡Œä¸€æ¬¡ CPU æ‹·è´å°†æ•°æ®æ‹·è´åˆ°åº”ç”¨è¿›ç¨‹ç¼“å†²åŒºã€‚è¿™æ—¶å€™ç”¨æˆ·è¿›ç¨‹æ¯”å¦‚ Java ç¨‹åºå°±å¯ä»¥å¯¹æ•°æ®è¿›è¡Œæ’åºã€è¿‡æ»¤ç­‰æ“ä½œäº†ã€‚è¿™ä¸ªè¿‡ç¨‹å°±å®Œæˆäº† File.readã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å¦‚æœæ•°æ®æƒ³å‘é€åˆ°ç½‘å¡ï¼Œä¹Ÿå°±æ˜¯ Socket.sendã€‚è¿˜éœ€è¦å†è¿›è¡Œä¸€æ¬¡ CPU æ‹·è´å‘é€åˆ°å¥—æ¥å­—å‘é€ç¼“å†²åŒºè¿›è¡Œä¸­è½¬ï¼Œè¿™ä¸ªåœ°æ–¹ä¹Ÿæ˜¯è¦å ç”¨Â &lt;span&gt;buffers/cached ç©ºé—´&lt;/span&gt;çš„ã€‚ä¸­è½¬è¿™ä¸ªè¿‡ç¨‹å¾ˆå¿«ï¼Œæ‰€ä»¥Â &lt;span&gt;buffers/cached ç©ºé—´&lt;/span&gt;å¯ä»¥å¾ˆå¿«è¢«é‡Šæ”¾ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ•°æ®ä»ä¸­è½¬ç«™è¿˜è¦è¿›è¡Œä¸€æ¬¡ DMA æ‹·è´ï¼Œå°†æ•°æ®è¿é€åˆ°ç½‘ç»œè®¾å¤‡ç¼“å†²åŒºï¼Œæœ€ç»ˆå‘é€åˆ°ç½‘ç»œä¸Šã€‚è¿™ä¸ªè¿‡ç¨‹å°±å®Œæˆäº† Socket.sendã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¿™ä¸ªè¿‡ç¨‹è¦è¿›è¡Œå‡ æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢å‘¢ï¼ŸFile.read è¿™ä¸ªå‡½æ•°éœ€è¦å…ˆè°ƒç”¨å‘èµ·å†…æ ¸è¯·æ±‚ï¼Œè¿›å…¥åˆ°å†…æ ¸ç©ºé—´æ“ä½œï¼Œè¿™æ˜¯ä¸€æ¬¡å†…æ ¸åˆ‡æ¢ã€‚å†…æ ¸æ“ä½œå®Œæˆè¿”å›å†…æ ¸çš„ç»“æœï¼Œè¿™æ˜¯ç¬¬äºŒæ¬¡å†…æ ¸åˆ‡æ¢ã€‚åŒç†ï¼Œ Socket.send ä¹Ÿéœ€è¦ä¸¤æ¬¡å†…æ ¸åˆ‡æ¢ã€‚è¿™é‡Œçš„ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„åˆ‡æ¢å°±æ˜¯ä¸Šä¸‹æ–‡åˆ‡æ¢ã€‚æ€»å…±æ˜¯4æ¬¡ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;æ€§èƒ½æµ‹è¯•&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¿™ç§æ–¹å¼æ€§èƒ½å¦‚ä½•å‘¢ï¼Ÿå’±ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å†™ä¸ªç¨‹åºä»æœ¬åœ°ç”µè„‘ä¸­è¯»å–è‡ªå·±çš„ä¸€å¼ ç…§ç‰‡ï¼Œè¿™å¼ ç…§ç‰‡5Må¤šå¤§ï¼Œå‘é€åˆ°æœåŠ¡ç«¯ã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.533457249070632&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRl8GqAQMn8Y0C5nrqGc1D7FnpcjoFhiaZt86UTKfxMwrDsDAwo2ONibhd3M5n7ZslbjH2L2YXQFKawgA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;538&quot;/&gt;&lt;/p&gt;&lt;p&gt;æœåŠ¡ç«¯åªè¦èƒ½æ¥æ”¶å®¢æˆ·ç«¯æ•°æ®å°±å¯ä»¥ï¼Œæˆ‘éšä¾¿å†™äº†ä¸€ä¸ªï¼š&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;java&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    public static void server() throws Exception {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        ServerSocket serverSocket = new ServerSocket(520);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        int i = 1;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        while (true) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            Socket socket = serverSocket.accept();&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            int left = 0;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            while (left &amp;gt;= 0) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                InputStream io = socket.getInputStream();&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                byte[] bytes = new byte[1024];&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                left = io.read(bytes);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å®¢æˆ·ç«¯è¯»å–æ•°æ®å¹¶å‘é€åˆ°ç½‘ç»œï¼š&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;java&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__meta&quot;&gt;@GetMapping&lt;/span&gt;(pathÂ =Â &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;hi&quot;&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;public&lt;/span&gt; String &lt;span class=&quot;code-snippet__title&quot;&gt;hi&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;throws&lt;/span&gt; Exception &lt;/span&gt;{&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    client();&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;end&quot;&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;public&lt;/span&gt;Â &lt;span class=&quot;code-snippet__keyword&quot;&gt;void&lt;/span&gt;Â &lt;span class=&quot;code-snippet__title&quot;&gt;client&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;()&lt;/span&gt;Â &lt;span class=&quot;code-snippet__keyword&quot;&gt;throws&lt;/span&gt;Â ExceptionÂ &lt;/span&gt;{&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    Socket socket = &lt;span class=&quot;code-snippet__keyword&quot;&gt;new&lt;/span&gt; Socket(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;127.0.0.1&quot;&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;520&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    OutputStream netOut = socket.getOutputStream();&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    InputStream io = &lt;span class=&quot;code-snippet__keyword&quot;&gt;new&lt;/span&gt; FileInputStream(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;D:\\photo\\ç¼–ç¨‹ä¸€ç”Ÿ.JPG&quot;&lt;/span&gt;);    &lt;span class=&quot;code-snippet__keyword&quot;&gt;long&lt;/span&gt; begin = System.currentTimeMillis();&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;byte&lt;/span&gt;[] bytes = &lt;span class=&quot;code-snippet__keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;byte&lt;/span&gt;[&lt;span class=&quot;code-snippet__number&quot;&gt;1024&lt;/span&gt;];&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;while&lt;/span&gt; (io.read(bytes) &amp;gt;= &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        netOut.write(bytes);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    System.out.println(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;è€—æ—¶ä¸º&quot;&lt;/span&gt; + (System.currentTimeMillis() - begin) + &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;ms&quot;&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    netOut.close();&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    io.close();&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    socket.close();&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æœåŠ¡å¯åŠ¨åï¼šhttp://localhost:8080/hi è®¿é—®5æ¬¡ï¼Œç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;è€—æ—¶ä¸º450ms&lt;/p&gt;&lt;p&gt;è€—æ—¶ä¸º437ms&lt;/p&gt;&lt;p&gt;è€—æ—¶ä¸º424ms&lt;/p&gt;&lt;p&gt;è€—æ—¶ä¸º423ms&lt;/p&gt;&lt;p&gt;è€—æ—¶ä¸º420ms&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ç»“è®ºï¼šä½¿ç”¨ä¼ ç»Ÿæ–¹å¼ï¼Œ5Må¤šçš„æ•°æ®è¯»å–åˆ°å‘é€éœ€è¦400å¤šæ¯«ç§’ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;é›¶æ‹·è´&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;è¿‡ç¨‹&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;è¿‡ç¨‹è§£é‡Š&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;linuxæ“ä½œç³»ç»Ÿä¸­æœ‰ä¸ª sendFile æ–¹æ³•å¯ä»¥ä¸é€šè¿‡ç”¨æˆ·è¿›è¡Œï¼Œç›´æ¥å°†æ•°æ®ä»ç£ç›˜å‘é€åˆ°ç½‘ç»œè®¾å¤‡ç¼“å†²åŒºã€‚åœ¨ linux2.1 ç‰ˆæœ¬çš„ sendFile è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.4826989619377163&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRl8GqAQMn8Y0C5nrqGc1D7FnY0BT2d5ibicC0Qvt9qaJc9zXbLdqkmMtZicvKmCDf2q1hkqZJvsuxaLkA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong/&gt;&lt;/p&gt;&lt;p&gt;åˆ°äº† linux2.4 ï¼Œlinux çš„ sendFile è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå®ç°äº†å®Œå…¨æ²¡æœ‰ CPU æ‹·è´å®ç°æ•°æ®ä¼ è¾“ã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.4826989619377163&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRl8GqAQMn8Y0C5nrqGc1D7FnWxWsVyhY0lMice0ctnZMJf4bXoE8Yg7zbweobPKYa8VM9B4aLcKO2pw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸ç®¡æ˜¯ linux2.1 è¿˜æ˜¯ linux2.4 ï¼Œéƒ½æ˜¯ linux è‡ªèº«å®ç°çš„ï¼Œå‡½æ•°éƒ½å¯¹åº”çš„æ˜¯ sendFile ã€‚ä¸Šå±‚æ¯”å¦‚ Java å¯ä»¥ä½¿ç”¨ transferTo å’Œ transferFrom ä½¿ç”¨ sendFile æ–¹æ³•ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯ netty å®ç°çš„é‡è¦å·¥å…·ï¼Œä¸€ä¸ªæ˜¯å‘é€æ•°æ®ç”¨ï¼Œä¸€ä¸ªæ˜¯æ¥æ”¶æ•°æ®ç”¨ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;æ€§èƒ½æµ‹è¯•&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¿™ç§æ–¹å¼æ€§èƒ½å¦‚ä½•å‘¢ï¼Ÿå’±ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æœåŠ¡ç«¯ä¸å˜ï¼Œå®¢æˆ·ç«¯ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cs&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;@GetMapping(pathÂ =Â &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;hi&quot;&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;public&lt;/span&gt; String &lt;span class=&quot;code-snippet__title&quot;&gt;hi&lt;/span&gt;(&lt;span class=&quot;code-snippet__params&quot;/&gt;) throws Exception&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    client();&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;end&quot;&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;client&lt;/span&gt;(&lt;span class=&quot;code-snippet__params&quot;/&gt;) throws Exception&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      SocketChannel socket = SocketChannel.open();&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      socket.connect(&lt;span class=&quot;code-snippet__keyword&quot;&gt;new&lt;/span&gt; InetSocketAddress(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;127.0.0.1&quot;&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;520&lt;/span&gt;));&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      FileChannel io = &lt;span class=&quot;code-snippet__keyword&quot;&gt;new&lt;/span&gt; FileInputStream(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;D:\\photo\\ç¼–ç¨‹ä¸€ç”Ÿ.JPG&quot;&lt;/span&gt;).getChannel();&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      &lt;span class=&quot;code-snippet__keyword&quot;&gt;long&lt;/span&gt; begin = System.currentTimeMillis();&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      io.transferTo(&lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;, io.size(), socket);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      System.&lt;span class=&quot;code-snippet__keyword&quot;&gt;out&lt;/span&gt;.println(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;è€—æ—¶ä¸º&quot;&lt;/span&gt; + (System.currentTimeMillis() - begin) + &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;ms&quot;&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      io.close();&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      socket.close();&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æœåŠ¡å¯åŠ¨åï¼šhttp://localhost:8080/hi è®¿é—®5æ¬¡ï¼Œç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;è€—æ—¶ä¸º44ms&lt;/p&gt;&lt;p&gt;è€—æ—¶ä¸º33ms&lt;/p&gt;&lt;p&gt;è€—æ—¶ä¸º43ms&lt;/p&gt;&lt;p&gt;è€—æ—¶ä¸º46ms&lt;/p&gt;&lt;p&gt;è€—æ—¶ä¸º35ms&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ç»“è®ºï¼šä½¿ç”¨é›¶æ‹·è´æ–¹å¼ï¼Œ5Må¤šçš„æ•°æ®è¯»å–åˆ°å‘é€éœ€è¦40å¤šæ¯«ç§’ã€‚ä¸ä¼ ç»Ÿæ–¹å¼ç›¸æ¯”ï¼Œæ€§èƒ½æé«˜10å€ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å†…å­˜æ˜ å°„æ¨¡å¼&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;ä¸é›¶æ‹·è´&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;linux ç³»ç»Ÿæœ‰é›¶æ‹·è´ï¼Œwindows ä¹Ÿå¸Œæœ›å‡å°‘æ‹·è´å’Œä¸‹ä¸Šä¸‹åˆ‡æ¢ï¼Œå®ƒä¾é å†…å­˜æ˜ å°„(MMAP)ã€‚å½“ç„¶ï¼Œlinux ä¹Ÿæ”¯æŒå†…å­˜æ˜ å°„ï¼Œå¹¶ä¸”åœ¨ RocketMQ ç­‰çš„å®ç°ä¸Šå‘æŒ¥ç€å·¨å¤§ä½œç”¨ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.549165120593692&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRl8GqAQMn8Y0C5nrqGc1D7FnFaMf6lZtKWqIHSL2AwhXE4wl7l5wJaNOBZqFhNuu8xia1ebzbNhczjg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;539&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;é€šè¿‡ä¸ä¸Šé¢ä¼ ç»Ÿæ–¹å¼æ¯”è¾ƒï¼Œå¯çœ‹åˆ°ç”±äºå†…å­˜æ˜ å°„å‘æŒ¥ä½œç”¨ï¼Œåœ¨æ–‡ä»¶è¯»å–æ—¶å‡å°‘äº†ä¸€æ¬¡ CPU æ‹·è´ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åœ¨ Java ä¸­å¯ä»¥é€šè¿‡ä¸‹é¢æ–¹æ³•è¿›è¡Œå†…å­˜æ˜ å°„ï¼š&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cpp&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; RandomAccessFile raf = new RandomAccessFile(file, &quot;rw&quot;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;Â MappedByteBufferÂ mmapÂ =Â raf.getChannel().map(FileChannel.MapMode.READ_WRITE,Â 0,Â 500);Â Â Â &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åœ¨ MQ çš„å®ç°ä¸Šï¼Œå†…å­˜æ˜ å°„(MMAP)å’Œ sendFile é›¶æ‹·è´æ˜¯æå‡æ€§èƒ½çš„åˆ©å™¨ã€‚ä¸‹é¢åšä¸€ä¸ªæ¯”è¾ƒï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.22661396574440051&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRl8GqAQMn8Y0C5nrqGc1D7FnOzdyavNMjv8l0ONCNr2Z8GiaNZ4iaU9cWRgUhGf7M56Aqx9iazxcJpuicg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;759&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸Šé¢å¯ä»¥çœ‹åˆ° RocketMQ ç”±äºä½¿ç”¨äº†å†…å­˜æ˜ å°„ååé‡è¿œé«˜äº ActiveMQ å’Œ RabbitMQ ï¼ŒKafka ç”±äºä½¿ç”¨äº†é›¶æ‹·è´åˆæ¯” RocketMQ æé«˜äº†ä¸€ä¸ªæ•°é‡çº§ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å®é™…ä¸Š RabbitMQ çš„å®ç°å¤§é‡å€Ÿé‰´äº† Kafka ï¼Œé‚£ RabbitMQ ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨ Kafka çš„é›¶æ‹·è´æé«˜æ€§èƒ½å‘¢ï¼Ÿå› ä¸º RabbitMQ ä¸ä»…ä»…æ˜¯å°†æ•°æ®ä»ç£ç›˜å‘é€å‡ºå»ï¼Œè¿˜éœ€è¦åœ¨å†…å­˜ä¸­åšä¸€äº›æ’åºã€è¿‡æ»¤ç­‰é«˜çº§æ“ä½œã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æœ€åå¤§å®¶å†æ¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šé›¶æ‹·è´å’Œå†…å­˜æ˜ å°„ä¸¤ç§æ¨¡å¼ä¸‹ï¼Œå„éœ€è¦å‡ æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Ÿ&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>94d7b5c498b55b534606c66c5403d0b4</guid>
<title>ç‹å¿—å‹‡ï¼šè´å£³CVRè½¬åŒ–ç‡é¢„ä¼°æ¨¡å‹å®è·µ</title>
<link>https://toutiao.io/k/aebtffz</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;section data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;img class=&quot;rich_pages wxw-img __bg_gif&quot; data-backh=&quot;161&quot; data-backw=&quot;578&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;161&quot; data-fileid=&quot;100072688&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.2777777777777778&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPhDSCuNtgeHcaia7HWP4ISl866SibSKCKRu08ibHymOc5OPhAPrNZqiazr5gVPUbWLibiciaVT1Rfsj1gF4A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;900&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;256&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.44265734265734263&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPiap3CJcDalVlgur4aHNib0P27S1ziayLU0iaicPUhFP3Sz8EFzKicQqjwQxibXH4nTje7haLVNicr9VyCYMQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1430&quot;/&gt;&lt;/p&gt;&lt;section data-width=&quot;100%&quot; data-darkmode-bgcolor-16008590572276=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16008590572276=&quot;rgb(255, 255, 255)&quot;&gt;&lt;section data-darkmode-bgcolor-16008590572276=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16008590572276=&quot;rgb(255, 255, 255)&quot; data-style=&quot;margin-bottom: -10px; margin-left: -8px; max-width: 100%; width: 18px; height: 18px; border-top: 8px solid rgb(54, 65, 173); border-left: 8px solid rgb(54, 65, 173); box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible;&quot;&gt;&lt;br data-darkmode-bgcolor-16008590572276=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16008590572276=&quot;rgb(255, 255, 255)&quot;/&gt;&lt;/section&gt;&lt;section data-bgopacity=&quot;50%&quot; data-darkmode-bgcolor-16008590572276=&quot;rgb(33, 33, 33)&quot; data-darkmode-original-bgcolor-16008590572276=&quot;rgb(247, 247, 247)&quot; data-style=&quot;max-width: 100%; width: 543.333px; background: rgb(247, 247, 247); box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible;&quot;&gt;&lt;section data-darkmode-bgcolor-16008590572276=&quot;rgb(33, 33, 33)&quot; data-darkmode-original-bgcolor-16008590572276=&quot;rgb(247, 247, 247)&quot;&gt;&lt;p data-darkmode-bgcolor-16008590572276=&quot;rgb(33, 33, 33)&quot; data-darkmode-original-bgcolor-16008590572276=&quot;rgb(247, 247, 247)&quot;&gt;&lt;span&gt;åˆ†äº«å˜‰å®¾&lt;/span&gt;&lt;span&gt;ï¼šç‹å¿—å‹‡ è´å£³ æ¶æ„å¸ˆ&lt;/span&gt;&lt;/p&gt;&lt;p data-darkmode-bgcolor-16008590572276=&quot;rgb(33, 33, 33)&quot; data-darkmode-original-bgcolor-16008590572276=&quot;rgb(247, 247, 247)&quot;&gt;&lt;span&gt;ç¼–&lt;/span&gt;&lt;span&gt;è¾‘æ•´ç†ï¼šæˆ´ç¨šæ™– é™†é‡‘&lt;/span&gt;&lt;span&gt;æ‰€&lt;/span&gt;&lt;/p&gt;&lt;p data-darkmode-bgcolor-16008590572276=&quot;rgb(33, 33, 33)&quot; data-darkmode-original-bgcolor-16008590572276=&quot;rgb(247, 247, 247)&quot;&gt;&lt;span&gt;å‡ºå“å¹³å°ï¼šDataFunTalk&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-width=&quot;100%&quot; data-darkmode-bgcolor-16008590572276=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16008590572276=&quot;rgb(255, 255, 255)&quot;&gt;&lt;section data-darkmode-bgcolor-16008590572276=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16008590572276=&quot;rgb(255, 255, 255)&quot; data-style=&quot;max-width: 100%; width: 18px; height: 18px; border-bottom: 8px solid rgb(54, 65, 173); border-right: 8px solid rgb(54, 65, 173); box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible;&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å¯¼è¯»ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;è´å£³ä»æˆ¿äº§é¢†åŸŸçš„äº§ä¸šäº’è”ç½‘è§’åº¦ä»‹ç»æ™ºèƒ½å¹¿å‘ŠæŠ•æ”¾çš„æŒ‘æˆ˜ã€å®è·µå’Œæ€è€ƒã€‚&lt;/span&gt;&lt;span&gt;æˆ¿äº§äº’è”ç½‘æ˜¯å…¸å‹çš„é«˜ä»·å€¼ã€é•¿å‘¨æœŸè½¬åŒ–é¢†åŸŸï¼Œæœ¬æ¬¡åˆ†äº«é‡ç‚¹ä»‹ç»äº†è´å£³&lt;/span&gt;&lt;span&gt;CVRè½¬åŒ–ç‡é¢„ä¼°æ¨¡å‹åœ¨å»¶æ—¶åé¦ˆé—®é¢˜ä¸Šçš„å®æˆ˜ç»éªŒï¼›&lt;/span&gt;&lt;span&gt;è´å£³è®¾è®¡äº†ä¸€å¥—å®éªŒæœºåˆ¶è¯„ä¼°RTAç­–ç•¥ç®—æ³•å¸¦æ¥çš„å¢é‡ä»·å€¼ï¼Œé€šè¿‡ä¼˜åŒ–å‡ºä»·ç³»æ•°é¢„ä¼°æ¨¡å‹ï¼Œè½¬åŒ–ç‡ç›¸å¯¹ç›´æŠ•æå‡&lt;/span&gt;&lt;span&gt;10%+&lt;/span&gt;&lt;span&gt;ï¼Œäº§ä¸šäº’è”ç½‘å¹¿å‘Šä¸»å¯ä»¥å€Ÿé‰´ç›¸å…³ç»éªŒã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;span&gt;æœ¬æ–‡å°†å›´ç»•&lt;/span&gt;&lt;span&gt;ä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢&lt;/span&gt;&lt;span&gt;å±•å¼€ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;è´å£³å¹¿å‘ŠæŠ•æ”¾ä¸šåŠ¡ä»‹ç»å’Œç—›ç‚¹åˆ†æ&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æ™ºèƒ½æŠ•æ”¾å…³é”®æŠ€æœ¯&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æ™ºèƒ½é¢„ç®—åˆ†é…å…³é”®æŠ€æœ¯&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;01&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;è´å£³æ•ˆæœå¹¿å‘Š&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1. è´å£³å¹¿å‘Šä¸šåŠ¡èƒŒæ™¯ä»‹ç»&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ•ˆæœå¹¿å‘Šçš„ç›®æ ‡æ˜¯æœ€å¤§åŒ–ä¸šåŠ¡ç›®æ ‡æ•ˆæœï¼Œå¦‚æœˆæ´»MAUã€æ€»é”€é‡GMVã€çº¿ä¸Šæˆäº¤è½¬åŒ–ç‡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è´å£³æ„å»ºäº†å…¨åŸŸæ™ºèƒ½é‡‡ä¹°å¹³å°ï¼ˆæ³›DSPå¹³å°ï¼‰ï¼Œä»æµé‡å¹³å°å¦‚å­—èŠ‚è·³åŠ¨å·¨é‡å¼•æ“ã€è…¾è®¯å¹¿ç‚¹é€šç­‰æ¥å…¥æµé‡ï¼ŒDSPä¸šåŠ¡æ–¹å‘æ¶‰åŠæ‹‰æ–°å’Œæ‹‰æ´»ï¼Œæ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬æ™ºèƒ½å‡ºä»·ã€å¢é‡ä»·å€¼é¢„ä¼°ã€ä¼˜åŒ–ç”¨æˆ·å®šå‘ï¼ˆç”¨æˆ·åˆ†å±‚å’Œç”¨æˆ·åå¥½åˆ†æï¼‰ã€RTAç­–ç•¥ä¼˜åŒ–ï¼Œé€šè¿‡æ•°æ®é‡‡ä¹°å’Œåª’ä½“åˆä½œæ–¹å¼å®ç°æ•°æ®å…±äº«æ¥æå‡å¹¿å‘Šæ•ˆæœã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è´å£³ä¹Ÿæœ‰åª’ä½“ç›´æŠ•ä¸šåŠ¡ï¼Œå»ºè®¾çš„çµçŠ€ç³»ç»Ÿæä¾›äº†ä¸€ç³»åˆ—ç›´æŠ•å·¥å…·ï¼ŒåŒ…æ‹¬DPAã€oCPXå½’å› ã€æ•°æ®å›ä¼ ç­‰ã€‚DPAæ˜¯Dynamic Products Adsç®€ç§°ï¼ŒåŠ¨æ€åƒäººåƒé¢çš„å•†å“å¹¿å‘Šï¼Œä¸»è¦åŸç†æ˜¯åŸºäºç”¨æˆ·ä¹‹å‰ä¸å•†å“çš„äº’åŠ¨è¡Œä¸ºï¼Œé’ˆå¯¹è¯¥ç”¨æˆ·å±•å¼€è¯¥å•†å“çš„å†è¥é”€ã€‚oCPXï¼ŒåŒ…æ‹¬oCPCã€oCPMç­‰ï¼Œä»¥ä¼˜åŒ–å¹¿å‘Šä¸»çš„è½¬åŒ–ç›®æ ‡ä¸ºç›®çš„ï¼Œé€šè¿‡é¢„ä¼°è½¬åŒ–ç‡æ¥è°ƒæ•´å‡ºä»·ï¼Œä¸ºå¹¿å‘Šä¸»é€‰æ‹©è½¬åŒ–ç‡æ›´é«˜çš„æµé‡ï¼Œå¸®åŠ©å¹¿å‘Šä¸»æ§åˆ¶æˆæœ¬ã€‚oCPCå‡ºä»·æ¨¡å¼ä¸»è¦åˆ†ä¸¤ä¸ªé˜¶æ®µï¼Œç¬¬ä¸€é˜¶æ®µä¸ºCPCæŠ•æ”¾-æ•°æ®ç§¯ç´¯é˜¶æ®µï¼›ç¬¬äºŒé˜¶æ®µä¸ºæ™ºèƒ½æŠ•æ”¾ï¼Œå½“è½¬åŒ–é‡ç§¯ç´¯åˆ°ä¸€å®šæ•°å€¼æ—¶ç³»ç»Ÿæ ¹æ®è½¬åŒ–ç‡åŠ¨æ€è°ƒæ•´å‡ºä»·ï¼Œæ§åˆ¶è½¬åŒ–æˆæœ¬æ¥è¿‘ç›®æ ‡æˆæœ¬ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;325&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPiap3CJcDalVlgur4aHNib0P2ia5m8p1PBn9TwSA90uibXv18FUDybfa9m9bv8Fz2fIcvowAicFYEEuvRA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è´å£³å¹¿å‘Šä¸šåŠ¡çš„æ ¸å¿ƒèƒŒæ™¯ç‰¹ç‚¹å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;2.Â è´å£³æ•ˆæœå¹¿å‘Š--å½¢æ€å’Œé“¾è·¯&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸‹å›¾æ˜¯è´å£³å¹¿å‘Šçš„ä¸€ä¸ªäº‹ä¾‹ï¼Œé€šè¿‡å„ä¸ªåª’ä½“ï¼ŒåŒ…æ‹¬ä¿¡æ¯æµã€åº”ç”¨å•†åº—ã€æœç´¢å¼•æ“ä¼˜åŒ–SEMç­‰æ–¹å¼æŠ•æ”¾è´å£³çš„å¹¿å‘Šã€‚åœ¨æ‹‰æ–°è¿‡ç¨‹ä¸­ï¼Œä¼šæ¶‰åŠæ³¨å†ŒAppçš„è¿‡ç¨‹ï¼›åœ¨æ‹‰æ´»æ—¶ï¼Œé€šè¿‡å¹¿å‘Šå”¤èµ·è´å£³appã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;325&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPiap3CJcDalVlgur4aHNib0P23N4icu7BOHj16ibibkHDz90OvaTRxw65I0E3XdCgkUNhnNeyt5ibPxyxdQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;3. è´å£³æ•ˆæœå¹¿å‘Š--ä¸šåŠ¡ç—›ç‚¹&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¹¿å‘Šæ•ˆæœè¥æ”¶å¯åˆ†è§£ä¸ºä¸‰å¤§é‡è¦å› å­ï¼Œä¸€æ˜¯å¹¿å‘Šé¢„ç®—é¢åº¦ï¼ŒäºŒæ˜¯é¢„ç®—åˆ†é…ï¼Œä¸‰æ˜¯è½¬åŒ–ç‡ã€‚ä¸‰å¤§éƒ¨åˆ†å„è‡ªçš„ç‰¹ç‚¹å’Œç—›ç‚¹è¯´æ˜å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æ ¸å¿ƒé‡ç‚¹å…³æ³¨çš„æ˜¯è½¬åŒ–ç‡æŒ‡æ ‡ï¼šå¹¿å‘Šæ¸ é“ä¼—å¤šåˆ†æ•£ï¼Œæ¸ é“ä¹‹é—´å·®å¼‚å¾ˆå¤§ï¼Œå¦‚æœä»…ä»…å¯¹å•æ¸ é“è¿›è¡Œä¼˜åŒ–ï¼Œè¾¾ä¸åˆ°å…¨å±€ä¼˜åŒ–çš„æ•ˆæœï¼Œéœ€è¦æ•´ä½“ä¸Šè¿›è¡Œä¼˜åŒ–ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;é¢„ç®—åˆ†é…é—®é¢˜ï¼šåˆ†é…æ¶‰åŠå¾ˆå¤šç»´åº¦ï¼ŒåŒ…æ‹¬æ¸ é“ç»´åº¦ã€è®¡åˆ’ç»´åº¦ã€æ¨å¹¿å•å…ƒç»´åº¦ï¼Œè¿˜éœ€è¦è€ƒè™‘åˆ†é…çš„è°ƒæ•´é¢‘æ¬¡å’Œç²’åº¦ã€‚ç›¸å¯¹ä¼ ç»Ÿå‡­å€Ÿå¸‚åœºç»éªŒåˆ¤æ–­çš„æ–¹å¼ï¼Œæ™ºèƒ½è‡ªåŠ¨åŒ–è®¡ç®—åˆ†é…æœ‰å¾ˆå¤§æå‡ç©ºé—´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;é¢„ç®—ç”³è¯·é¢„ä¼°å’Œæ•ˆæœè¯„ä¼°ï¼šä¸šåŠ¡è¿è¥ä¼šä»è·å®¢æˆæœ¬å’Œæ–°å®¢æ•°é‡ç­‰è§’åº¦è¯„ä¼°ï¼Œç¡®è®¤é¢„ç®—ç”³è¯·é¢åº¦ï¼Œè¯„ä¼°å¹¿å‘ŠæŠ•æ”¾å¸¦æ¥çš„æ•ˆæœæ”¶ç›Šã€‚é™¤äº†è·å®¢æ•°é‡ï¼Œçº¿ä¸Šå¹¿å‘ŠæŠ•æ”¾éœ€è¦èƒ½ä¸ºç»çºªäººäº§ç”Ÿå•†æœºï¼Œä¸ºç»çºªäººæ´¾å‘å•†æœºï¼Œæ‰€ä»¥éœ€è¦å¯¹å•†æœºçš„æˆæœ¬ã€å•†æœºæ•°é‡ã€å•†æœºè½¬åŒ–å¸¦æ¥çš„æ”¶å…¥æå‰è¿›è¡Œè¯„ä¼°å’Œé¢„æµ‹ï¼Œç¡®ä¿æŠ•æ”¾ROIè¾¾åˆ°ä¸šåŠ¡ç›®æ ‡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;255&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.44184002343978906&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPiap3CJcDalVlgur4aHNib0P2ulbfZz6LwIA7jdFykvHg1oxEZba6g7XR2ibiaACBOdPZBcb4RcJsCGsw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;3413&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;02&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;æ™ºèƒ½æŠ•æ”¾å…³é”®æŠ€æœ¯&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1. æ™ºèƒ½æŠ•æ”¾æµé‡æ¼æ–—å’Œæ ¸å¿ƒæŠ€æœ¯æ¦‚è§ˆ&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬å…ˆæ¥çœ‹æ™ºèƒ½æŠ•æ”¾çš„7å±‚æµé‡æ¼æ–—ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç¬¬1å±‚æ˜¯æ¥è‡ªæµé‡åª’ä½“çš„è¯·æ±‚ï¼Œåœ¨ç”¨æˆ·è®¿é—®åª’ä½“æ—¶ï¼Œå°†å¯¹åº”çš„è¯·æ±‚å‘ç»™DSPã€‚ç¬¬2å±‚æ˜¯å‚ä¸ç«ä»·ï¼ŒDSPéœ€è¦è¯„ä¼°æ˜¯å¦å‚ä¸ç«ä»·ä»¥åŠå‡ºä»·ä»·æ ¼ã€‚åé¢5å±‚åˆ†åˆ«æ˜¯ç«ä»·æˆåŠŸã€æ›å…‰å±•ç¤ºã€ç‚¹å‡»ã€è°ƒèµ·appã€æˆäº¤è½¬åŒ–ã€‚è¿™äº›ç¯èŠ‚çš„è½¬åŒ–ç‡éƒ½éœ€è¦æå‰é¢„ä¼°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™7å±‚æ¼æ–—æ¶‰åŠå“ªäº›æŠ€æœ¯å‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å‚ç«ç‡æ¶‰åŠåˆ°çš„å…³é”®æŠ€æœ¯æ˜¯ç”¨æˆ·å®šå‘ï¼Œä¾‹å¦‚ï¼Œå¯¹äºåŸå¸‚å®šå‘ï¼Œå“ªäº›åŸå¸‚çš„ç‰¹å®šç”»åƒäººç¾¤ä¼šå¯¹è´å£³è¿™ä¸ªå¹³å°äº§ç”Ÿå¤§çš„å¢é‡ä»·å€¼ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å‚ä¸ç«ä»·éœ€è¦å¯¹å„å±‚è½¬åŒ–ç‡è¿›è¡Œé¢„ä¼°ã€‚è€ƒè™‘åˆ°æ¼æ–—å„ä¸ªç¯èŠ‚ä¹‹é—´ä¸æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œæ¥è‡ªä¸åŒæ¸ é“çš„æµé‡æ¼æ–—è½¬åŒ–ä¹Ÿä¸ä¸€æ ·ï¼Œé«˜ç‚¹å‡»ç‡çš„å®¢æˆ·è°ƒèµ·ç‡å¯èƒ½å¾ˆä½ï¼Œé«˜è°ƒèµ·ç‡çš„å®¢æˆ·å¯èƒ½å•†æœºç‡å’Œä»·å€¼å¾ˆä½ï¼Œæ‰€ä»¥ä¸ºæ¯å±‚è½¬åŒ–ç‡å•ç‹¬è®­ç»ƒæ¨¡å‹å­¦ä¹ æ•ˆæœä¸å¤Ÿå¥½ï¼Œåœ¨å»ºæ¨¡çš„æ—¶å€™é‡‡å–å¤šä»»åŠ¡ä¼˜åŒ–è”åˆå»ºæ¨¡ã€‚æ™ºèƒ½å‡ºä»·é¢„ä¼°å…¬å¼ï¼šeCPM=CPO*CVR*CTDTR*1000ï¼Œæ¶‰åŠpCTDTRé¢„ä¼°ï¼ˆç‚¹å‡»ç‡å’Œè°ƒèµ·ç‡è”åˆé¢„ä¼°ï¼‰ã€pCVRé¢„ä¼°ï¼ˆç™»å½•æˆäº¤è½¬åŒ–ç‡é¢„ä¼°ï¼‰ã€‚å…¶ä¸­ï¼ŒpCTDTRé€šè¿‡é‡‡å–MMoEï¼ˆGoogleå›¢é˜Ÿå‘è¡¨çš„Multi-gate Mixture-of-Expertsï¼‰å¤šä»»åŠ¡å­¦ä¹ æ¨¡å‹è¿›è¡Œè”åˆä¼˜åŒ–å»ºæ¨¡ï¼›pCVRé¢„ä¼°é‡‡ç”¨DFMï¼ˆDelayed feedback modelï¼‰æ¨¡å‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é™¤äº†è½¬åŒ–ç‡é¢„ä¼°ï¼Œè´å£³è¿˜è®¾è®¡äº†é¢„ç®—å¹³æ»‘æœºåˆ¶ï¼Œå¯¹æ¯å¤©çš„å¹¿å‘ŠæŠ•æ”¾é¢„ç®—è¿›è¡Œæœ‰æ•ˆçš„æµé‡é¢„ä¼°å’Œæ§åˆ¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;325&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPiap3CJcDalVlgur4aHNib0P2huWsrwgiammriaaicFwUfXJtjHiaCw2Lic8ahbbt2gR9FYr29T3mTz4bUxw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;2.Â ç”¨æˆ·å®šå‘ä¹‹GEOåŸå¸‚å®šå‘&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸ºäº†æ‰©å±•ç”¨æˆ·å®šå‘èƒ½åŠ›ï¼Œè´å£³å°†å†…å¤–éƒ¨æ•°æ®ã€è·¨æ¸ é“è·¨ç«™ç‚¹è¿›è¡Œæ•°æ®èåˆï¼Œæ„å»ºæ›´å…¨é¢çš„ç”¨æˆ·ç”»åƒã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™é‡Œç‰¹åˆ«åˆ†äº«ä¸‹åœ°ç†ä½ç½®å®šå‘ã€‚æœ‰å¾ˆå¤šç”¨æˆ·åœ¨åª’ä½“è¯·æ±‚å±‚ï¼Œæœªæ‰“å¼€ä½ç½®ä¿¡æ¯ï¼Œå¦‚æœä»…ä»…é‡‡ç”¨ipè¿›è¡Œä½ç½®å®šä½ï¼Œä¸åˆ©ç”¨è·¨æ¸ é“æ•°æ®èåˆï¼Œå‡†ç¡®ç‡ä¸é«˜ã€‚è´å£³æˆ¿äº§ä¸šåŠ¡æœ‰ä¸°å¯Œçš„æ¥¼å®‡å­—å…¸æ•°æ®ï¼Œç»“åˆç›´æŠ•ã€DMPã€DSPçš„ç¦»çº¿GEOä¿¡æ¯ï¼Œåˆ†æç”¨æˆ·çš„åœ°ç†ä½ç½®åå¥½ï¼Œè¿›è¡Œæ›´å‡†ç¡®çš„äººç¾¤å’Œä½ç½®å®šä½ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;325&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPiap3CJcDalVlgur4aHNib0P2ScwFDvbtXskvI53lIYiamClS82XBNOWnLibwsLRRlGibpVNuiaBWpSEg0Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;3.Â å•†æœºè½¬åŒ–ç‡-åé¦ˆå»¶æ—¶å»ºæ¨¡&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;äº’è”ç½‘ç”µå•†çš„è½¬åŒ–å‘¨æœŸå¾ˆçŸ­ï¼Œä½†è½¬åŒ–å‘¨æœŸé•¿åœ¨è´å£³æ˜¯ä¸ªå¾ˆå¤§çš„ç‰¹ç‚¹ï¼Œå¯¹æ¨¡å‹é¢„ä¼°ä¹Ÿæ˜¯ä¸ªå¤§çš„æŒ‘æˆ˜ã€‚éœ€è¦å¯¹æ¨¡å‹çš„æ–°é²œåº¦å’Œå‡†ç¡®ç‡åšä¸ªå¹³è¡¡ï¼Œæ¨¡å‹æ¯å¤©æ›´æ–°ï¼Œä½†è¿˜åœ¨è€ƒè™‘ä¸­çš„æ½œåœ¨ç”¨æˆ·æ²¡æœ‰å®Œæˆè½¬åŒ–ï¼Œä¼šå¯¼è‡´å»ºæ¨¡çš„labelæ²¡æœ‰æ›´æ–°ï¼Œè¿™æ ·é¢„ä¼°æ˜¯åä½çš„ã€‚è¿™ç§å»¶æ—¶labelæ›´æ–°çš„é—®é¢˜åœ¨æ¨èåœºæ™¯å½±å“ç›¸å¯¹å°ä¸€äº›ï¼Œå› ä¸ºæ¨èç³»ç»Ÿæ ¸å¿ƒå…³æ³¨çš„æ˜¯æ’åºé—®é¢˜ï¼Œä½†è¿™ä¸ªé—®é¢˜å¯¹å¹¿å‘Šæ•ˆæœå½±å“æ˜¯éå¸¸å¤§çš„ï¼Œå› ä¸ºå¹¿å‘Šé¢„ä¼°ä¸ä»…å…³æ³¨æ’åºè€Œä¸”å…³æ³¨è½¬åŒ–ç‡çš„çœŸå®å€¼ï¼Œé¢„ä¼°ç»“æœä¼šç›´æ¥å½±å“å‡ºä»·ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸‹å›¾å³ä¾§æ¨¡å‹æ˜¯ä¸€ä¸ªåé¦ˆå»¶æ—¶æ¨¡å‹ï¼ˆdfmï¼‰ï¼ŒæŠŠè½¬åŒ–ç‡å’Œè½¬åŒ–å‘¨æœŸé¢„æµ‹è¿›è¡Œè”åˆè®­ç»ƒï¼Œåœ¨é¢„æµ‹è½¬åŒ–ç‡çš„åŒæ—¶ï¼Œæ¨¡æ‹Ÿè½¬åŒ–ç‡åœ¨æ—¶é—´ä¸Šçš„åˆ†å¸ƒã€‚å‡è®¾è½¬åŒ–å‘¨æœŸåˆ†å¸ƒæ˜¯æŒ‡æ•°åˆ†å¸ƒï¼Œé€šè¿‡è®¾ç½®ä¸åŒçš„å½’å› çª—å£è¿›è¡Œå°è¯•ï¼Œæœ€åé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„å½’å› çª—å£ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;325&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPiap3CJcDalVlgur4aHNib0P2EXibReYq991CsAJPk93Cq95vweQqo6AEykGUL17G6t1mqibuX7PBbBww/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è½¬åŒ–ç‡çš„è¡°å‡åˆ†å¸ƒè™½ç„¶å’ŒæŒ‡æ•°åˆ†å¸ƒæœ‰å¾ˆå¤§çš„ç›¸å…³æ€§ï¼Œä½†åœ¨å®é™…è½¬åŒ–ä¸­è¿˜æ˜¯æœ‰å·®å¼‚çš„ã€‚å› æ­¤æˆ‘ä»¬åšäº†ä¸€äº›å…¶ä»–å°è¯•ï¼Œä»æ—¶é—´æ–¹é¢å»å»ºæ¨¡ï¼Œå‡å°‘è§‚æµ‹æ ·æœ¬å’ŒçœŸå®æ ·æœ¬çš„åå·®ï¼Œå®æ—¶æ›´æ–°æˆ‘ä»¬çš„çœŸå®æ ·æœ¬åé¦ˆåˆ°è®­ç»ƒæ ·æœ¬ä¸­ã€‚é‡‡å–é‡‡æ ·çº åçš„æ–¹å¼ï¼Œç±»ä¼¼äºçƒ­ç‚¹æœºåˆ¶è¿›è¡Œæ ¡å‡†ï¼Œè¿™ç±»æŠ€æœ¯å¯¹æ ·æœ¬é‡è§„æ¨¡è¦æ±‚å¾ˆå¤§ï¼Œè€Œä¸”è¦èƒ½å¿«é€Ÿå®æ—¶å›ä¼ æ­£æ ·æœ¬ã€‚åœ¨è´å£³ï¼Œè¿™ç§æ–¹å¼ä¸å¤ªå®ç”¨ï¼ŒåŸå› æ˜¯ç”¨æˆ·äº¤äº’çš„æ•°æ®é‡ä¸å¤Ÿå¤§ï¼Œåé¦ˆä¹Ÿä¸å¤Ÿå®æ—¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è´å£³å‚è€ƒäº†è°·æ­Œåœ¨å»¶æ—¶åé¦ˆã€ä¸€ä¸ªç‚¹å‡»å¤šæ¬¡æˆäº¤è½¬åŒ–åœºæ™¯ä¸Šçš„åº”ç”¨ç®—æ³•ï¼Œæ ¸å¿ƒæ˜¯åœ¨æ—¶é—´ç»´åº¦ä¸Šï¼ŒæŠŠlabelæ‹†æˆäº†ä¸åŒçš„å»¶æ—¶æ¡¶(æ¯”å¦‚ï¼ŒMä¸ª)ï¼Œä¸åŒå¤©çš„è½¬åŒ–å¯¹åº”ä¸åŒçš„æ¡¶ï¼Œæ ¹æ®æœªå®Œå…¨è½¬åŒ–çš„æ ·æœ¬å¯¹åº”å»¶æ—¶æ¡¶ï¼Œä¾æ¬¡è®­ç»ƒå¯ä»¥ç¡®å®šæ ·æœ¬labelçš„æ¨¡å‹ï¼›ç„¶åå°†è¯¥æ¨¡å‹çš„é¢„æµ‹å€¼å’Œåç»­æ¨¡å‹çš„å·²è½¬åŒ–label é›†æˆï¼Œä½œä¸ºåç»­æ¨¡å‹çš„labelè®­ç»ƒï¼Œä½¿åç»­æ¨¡å‹èƒ½åˆ©ç”¨æ›´æ–°é²œçš„æ ·æœ¬æ•°æ®(å»¶æ—¶ä»Må¤©é™ä½åˆ°1å¤©)ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;325&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPiap3CJcDalVlgur4aHNib0P2IHjvohWpAr7WOETspSFIAGjEaic99Vc9B6gbhRXcrYCWAWspZoGQfaQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;4. å•†æœºè½¬åŒ–ç‡-æ ¡å‡†&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;çœŸå®è½¬åŒ–ç‡çš„æ³¢åŠ¨å¾ˆå¤§ï¼Œå¯¹å‡ºä»·é¢„ä¼°æœ‰å¾ˆå¤§çš„å½±å“ï¼Œéœ€è¦å¢åŠ ä¸€ä¸ªå¹³æ»‘æ ¡å‡†æ¨¡å—ã€‚æ ¡å‡†çš„ä½œç”¨æ˜¯å°†CTRé¢„ä¼°æ¨¡å‹å’Œç«ä»·ç­–ç•¥è¿›è¡Œè§£è€¦éš”ç¦»ã€‚labelçš„å»¶è¿Ÿï¼Œé€šè¿‡ä¸€äº›åŠè½¬åŒ–è¡Œä¸ºè¿›è¡Œå»ºæ¨¡æ ¡å‡†ã€‚åœ¨çœŸæ­£äº§ç”Ÿäº¤æ˜“çš„å•†æœºå‰ï¼Œç”¨æˆ·æœ‰å¾ˆå¤šè¡Œä¸ºæ•°æ®ï¼Œå¦‚æœç´¢ã€è¯¦æƒ…é¡µç‚¹å‡»ï¼Œé€šè¿‡ç»Ÿè®¡è§„åˆ™ï¼Œå¯ä»¥æ„å»ºåŠè½¬åŒ–æ¨¡å‹åˆ¤æ–­ç”¨æˆ·åœ¨æŸäº›è¡Œä¸ºåäº§ç”Ÿå•†æœºè½¬åŒ–çš„æ¦‚ç‡ï¼Œè¿™éƒ¨åˆ†çš„æ ¡å‡†èƒ½æå‡å¯¹æ•ˆæœè¯„ä¼°çš„å‡†ç¡®æ€§å’Œæ—¶æ•ˆæ€§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;325&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPiap3CJcDalVlgur4aHNib0P2NPGWd012Ml2HiabtLRlnViaO6arhI0CVsKNn9Y7JLibANtlkcSwBZUopQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;5. RTAåº”ç”¨å’Œä»·å€¼&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æœ€åä»‹ç»RTAçš„åº”ç”¨ï¼ŒRTAå‡ºä»·ä¸ç›´æ¥èµ·ä½œç”¨ï¼Œåª’ä½“ä¼šå¯¹ç”¨æˆ·ä»·å€¼è¿›è¡Œé¢„ä¼°ï¼Œå¹¿å‘Šä¸»æ™ºèƒ½é‡‡ç”¨ç«ä»·æ‰°åŠ¨å’Œè°ƒæ•´å‡ºä»·ç³»æ•°è¿›è¡Œæ•ˆæœä¼˜åŒ–ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è´å£³è®¾è®¡äº†ä¸€ä¸ªå®éªŒæœºåˆ¶æ¥è¯„ä¼°RTAç®—æ³•çš„å¢é‡ä»·å€¼ï¼Œé™¤äº†å¯¹æ¯”æŠ•ä¸ä¸æŠ•ï¼Œè¿˜ä¼šå¯¹æ¯”ç©ºæŠ•ã€é‡‡å–åª’ä½“ç›´æŠ•ã€ä»¥åŠè´å£³è‡ªå·±è®¾è®¡çš„ä¸åŒRTAç­–ç•¥ï¼Œå¯¹æ¯”ä¸åŒåˆ†æµç»„çš„æ•ˆæœï¼Œé€‰å‡ºæœ€ä¼˜ç­–ç•¥ï¼›åŒæ—¶ä¹Ÿå°†å‰è¿°çš„å•†æœºè½¬åŒ–æ¨¡å‹(CVR)å’Œå‡ºä»·ç­–ç•¥è”åˆè¿›è¡ŒåŸºäºå‡ºä»·ç³»æ•°çš„æ™ºèƒ½å‡ºä»·ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;325&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPiap3CJcDalVlgur4aHNib0P2UTsOz46mVRiafzQJF3f2dlq4icHEZDwtfgp0d8sxDCg28mQr2bKUOicFA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;03&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;æ™ºèƒ½é¢„ç®—åˆ†é…&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1. ç”¨æˆ·å’Œå•†æœºä»·å€¼&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬å…³æ³¨æ‹‰æ–°æ‹‰æ´»ä¸­æ¼æ–—çš„è½¬åŒ–ç‡ï¼Œåœ¨ç°å®åº”ç”¨ä¸­ï¼Œæ”¿ç­–æ³•è§„ã€ä¾›éœ€è¡Œæƒ…å’Œå„ç±»çº¿ä¸Šçº¿ä¸‹è¿è¥ç­–ç•¥ï¼Œå¯¹è½¬åŒ–ç‡æœ‰å¾ˆå¤§çš„å½±å“ã€‚åœ¨åšé¢„ç®—ç”³è¯·ã€åˆ†é…æ—¶ï¼Œä¾èµ–å•†æœºä»·å€¼å’Œæˆæœ¬è¯„ä¼°ï¼Œæœ€å¤§åŒ–ROIã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;325&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPiap3CJcDalVlgur4aHNib0P233z83MVtKCJPTqvxgpqYkM3lGjt9vI0XMr4P7Wm4zUIALqpicQY0AfQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;2. åŸºäºROIçš„é¢„ç®—åˆ†é…&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åŸºäºROIçš„é¢„ç®—åˆ†é…ï¼Œæ˜¯ä»¥æœ€å¤§åŒ–æ”¶å…¥ä¸ºä¼˜åŒ–ç›®æ ‡ï¼Œæ‹Ÿåˆçš„æ›²çº¿æ˜¯å­˜åœ¨è¾¹é™…æ•ˆåº”é€’å‡çš„ä¸šåŠ¡å‡è®¾ï¼Œå•è°ƒé€’å¢ä¸”è¾¹é™…é€’å‡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;325&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPiap3CJcDalVlgur4aHNib0P2nSjcfl78lmPr73iax3mCJVDjWLicNSnrsMlxqewl2E1FB9xMRQyTdBFw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å•è°ƒé€’å¢çš„ä¸šåŠ¡å‡è®¾æ˜¯ï¼šèŠ±è´¹è¶Šå¤šï¼Œå•†æœºé‡è¶Šå¤§ï¼›è¾¹é™…é€’å‡çš„ä¸šåŠ¡å‡è®¾æ˜¯ï¼šèŠ±è´¹è¶Šå¤šï¼Œå•†æœºæˆæœ¬è¶Šé«˜ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;325&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPiap3CJcDalVlgur4aHNib0P2kQo13dqBffGcWImgkLaTAuWoTxAlesPb105s7zhuCRWaTicbXubplxg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é€šè¿‡åœ¨å¸‚åœºä¸Šè¿›è¡Œä¸€å®šçš„æŠ•æ”¾ã€æ”¶é›†æ•°æ®ã€‚å—åˆ°å¸‚åœºè¡Œæƒ…ã€å®šå‘ç­–ç•¥ä»¥åŠå„ç§ä¸Šä¸‹æ–‡å½±å“ï¼Œä¸åŒæ¸ é“ä¸Šç›¸åŒçš„èŠ±è´¹äº§ç”Ÿçš„æ•ˆæœä¸åŒã€‚é’ˆå¯¹å…¨æ¸ é“è®­ç»ƒå…¨å±€æ¨¡å‹æ‹‰é½å„æ¸ é“åœ¨ä¸åŒä¸Šä¸‹æ–‡ç¯å¢ƒä¸‹çš„æ”¶ç›Šï¼Œç”Ÿæˆä¸é¢„æµ‹æœŸç›¸åŒä¸Šä¸‹æ–‡çš„å¢å¼ºæ ·æœ¬ï¼›ç„¶åç»“åˆå„ç‰¹å®šæ¸ é“çš„æ ·æœ¬ï¼Œåˆ†åˆ«æ‹Ÿåˆè¯¥æ¸ é“çš„æœ€ä¼˜â€œæ”¶ç›Š-æ¶ˆè€—â€å¼¹æ€§æ›²çº¿ï¼›æ¥ä¸‹æ¥å°±å¯ä»¥åˆ©ç”¨è¿™ç»„å¼¹æ€§æ›²çº¿è¿›è¡ŒåŸºäºå…¨å±€ROIæœ€å¤§åŒ–çš„æ¸ é“é—´é¢„ç®—åˆ†é…ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;325&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPiap3CJcDalVlgur4aHNib0P2kbe5icgoPRAboibn5h1SkA0U2viaph1Tic8YY1WFJna8aAqzP5Db8HwWQA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬å¾ˆå®¹æ˜“çœ‹åˆ°è¿™é‡Œè¿˜å­˜åœ¨å¤–æ¨å’Œå†·å¯åŠ¨çš„æŒ‘æˆ˜ï¼šæŠ•æ”¾é‡å°‘æ²¡æœ‰è¾¾åˆ°ä¸€å®šè¾¹ç•Œæ—¶ï¼Œé¢„ä¼°çš„å‡†ç¡®ç‡æ˜¯ä¸å¤Ÿçš„ã€‚éœ€è¦åšç›¸åº”çš„å¤–æ¨ï¼Œé€šè¿‡è¯„ä¼°æ¯ä¸€æ¡æ›²çº¿çš„å¤§æ¦‚ç½®ä¿¡åº¦ï¼Œåœ¨ç½®ä¿¡åº¦ç©ºé—´å†…ï¼Œé‡‡ç”¨åŸºäºThompsoné‡‡æ ·çš„Banditæœºåˆ¶åšä¸€äº›å¤–æ¨ï¼Œæ¥æ¢å¯»å¯èƒ½å­˜åœ¨çš„æœ€å¤§åŒ–ç©ºé—´ï¼Œé€šè¿‡ä¸æ–­è¿­ä»£ï¼Œæœ€åå¾—åˆ°å„ä¸ªæ¸ é“çš„çœŸå®æ•ˆæœã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;ä»Šå¤©çš„åˆ†äº«å°±åˆ°è¿™é‡Œï¼Œè°¢è°¢å¤§å®¶ã€‚&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;span&gt;åœ¨æ–‡æœ«åˆ†äº«ã€ç‚¹èµã€åœ¨çœ‹ï¼Œç»™ä¸ª3è¿å‡»å‘—~&lt;/span&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;åˆ†äº«å˜‰å®¾ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;289&quot; data-backw=&quot;578&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;289&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPiap3CJcDalVlgur4aHNib0P2ib8zjDjDicheZANPcVQnR2RqNiar56uztEmeBW48SVnFT6pgH7iaYajaZQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1000&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;å…³äºæˆ‘ä»¬ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;DataFunï¼š&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ä¸“æ³¨äºå¤§æ•°æ®ã€äººå·¥æ™ºèƒ½æŠ€æœ¯åº”ç”¨çš„åˆ†äº«ä¸äº¤æµã€‚å‘èµ·äº2017å¹´ï¼Œåœ¨åŒ—äº¬ã€ä¸Šæµ·ã€æ·±åœ³ã€æ­å·ç­‰åŸå¸‚ä¸¾åŠè¶…è¿‡100+çº¿ä¸‹å’Œ100+çº¿ä¸Šæ²™é¾™ã€è®ºå›åŠå³°ä¼šï¼Œå·²é‚€è¯·è¿‘1000ä½ä¸“å®¶å’Œå­¦è€…å‚ä¸åˆ†äº«ã€‚å…¶å…¬ä¼—å· DataFunTalk ç´¯è®¡ç”Ÿäº§åŸåˆ›æ–‡ç« 500+ï¼Œç™¾ä¸‡+é˜…è¯»ï¼Œ13ä¸‡+ç²¾å‡†ç²‰ä¸ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzU1NTMyOTI4Mw==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPh87SyjsEtoRFs9iaLyPXYh9ls0BcsiaPDnFkg72xgLsvku13ZRYibyq93DgRoCaTaTkbJj7Hia4dvI1w/0?wx_fmt=png&quot; data-nickname=&quot;DataFunTalk&quot; data-alias=&quot;datafuntalk&quot; data-signature=&quot;ä¸“æ³¨äºå¤§æ•°æ®ã€äººå·¥æ™ºèƒ½æŠ€æœ¯åº”ç”¨çš„åˆ†äº«ä¸äº¤æµã€‚è‡´åŠ›äºæˆå°±ç™¾ä¸‡æ•°æ®ç§‘å­¦å®¶ã€‚å®šæœŸç»„ç»‡æŠ€æœ¯åˆ†äº«ç›´æ’­ï¼Œå¹¶æ•´ç†å¤§æ•°æ®ã€æ¨è/æœç´¢ç®—æ³•ã€å¹¿å‘Šç®—æ³•ã€NLP è‡ªç„¶è¯­è¨€å¤„ç†ç®—æ³•ã€æ™ºèƒ½é£æ§ã€è‡ªåŠ¨é©¾é©¶ã€æœºå™¨å­¦ä¹ /æ·±åº¦å­¦ä¹ ç­‰æŠ€æœ¯åº”ç”¨æ–‡ç« ã€‚&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;ğŸ§&lt;strong&gt;åˆ†äº«ã€ç‚¹èµã€åœ¨çœ‹&lt;/strong&gt;ï¼Œç»™ä¸ª&lt;strong&gt;3è¿å‡»&lt;/strong&gt;å‘—ï¼&lt;strong&gt;ğŸ‘‡&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>9a0296b5f4bef45bf5618e11d8383d9a</guid>
<title>Spark on Kubernetes ä¸ Spark on Yarn ä¸å®Œå…¨å¯¹æ¯”åˆ†æ</title>
<link>https://toutiao.io/k/s0etrjq</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;p data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1.2142857142857142&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/CzXmD0LHvdj3nVY9EDHLhpH4VvJeiaia0BjslvVI4lWY8dcyW3FMvredibDW5kTgOSp10IDoUmoS4yNgZpNRmQFoQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;28&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1.0434782608695652&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ibl6u6nJ01g9icia42icDbWWvO2ObicnIUHjwVZt9x505utkfDbtc8ea4QIia3icQWibzwwYbPKwNDb83Jlk6bYGcQ2zaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;46&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot; mpa-is-content=&quot;t&quot;&gt;å‰è¨€&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot; mpa-is-content=&quot;t&quot;&gt;&lt;span&gt;Apache Spark æ˜¯ç›®å‰åº”ç”¨æœ€å¹¿æ³›çš„å¤§æ•°æ®åˆ†æè®¡ç®—å·¥å…·ä¹‹ä¸€ã€‚å®ƒæ“…é•¿äºæ‰¹å¤„ç†å’Œå®æ—¶æµå¤„ç†ï¼Œå¹¶æ”¯æŒæœºå™¨å­¦ä¹ ã€äººå·¥æ™ºèƒ½ã€è‡ªç„¶è¯­è¨€å¤„ç†å’Œæ•°æ®åˆ†æåº”ç”¨ã€‚éšç€ Spark è¶Šæ¥è¶Šå—æ¬¢è¿ï¼Œä½¿ç”¨é‡è¶Šæ¥è¶Šå¤§ï¼Œç‹­ä¹‰ä¸Šçš„ Hadoop (MR) æŠ€æœ¯æ ˆæ­£åœ¨æ”¶ç¼©ã€‚å¦å¤–ï¼Œæ™®éçš„è§‚ç‚¹å’Œå®è·µç»éªŒè¯æ˜ï¼Œé™¤äº†å¤§æ•°æ®ç›¸å…³çš„å·¥ä½œè´Ÿè½½ï¼ŒHadoop (YARN) ä¸å…·å¤‡ç›¸åº”çš„çµæ´»æ€§å»è·Ÿæ›´å¹¿æ³›çš„ä¼ä¸šæŠ€æœ¯æ ˆèåˆä¸é›†æˆã€‚æ¯”å¦‚å»æ‰¿è½½ä¸€äº›åœ¨çº¿ä¸šåŠ¡ï¼Œè€Œè¿™æ­£æ˜¯ Kubernetesï¼ˆK8s) æ‰€æ“…é•¿çš„é¢†åŸŸã€‚äº‹å®ä¸Šï¼ŒKubernetes çš„å‡ºç°ä¸º Spark çš„æ”¹è¿›æ‰“å¼€äº†ä¸€ä¸ªæ–°ä¸–ç•Œçš„å¤§é—¨ï¼Œåˆ›é€ äº†æ›´å¤šæœºé‡ã€‚å¦‚æœèƒ½ç”¨ç»Ÿä¸€çš„ä¸€å¥—é›†ç¾¤å»è¿è¡Œæ‰€æœ‰åœ¨çº¿å’Œç¦»çº¿çš„ä½œä¸šï¼Œä¹Ÿæ˜¯ååˆ†å¸å¼•äººçš„äº‹æƒ…ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot; mpa-is-content=&quot;t&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot; mpa-is-content=&quot;t&quot;&gt;&lt;span&gt;Spark on Kubernetes äº Spark 2.3 [1] ç‰ˆæœ¬å¼•å…¥å¼€å§‹ï¼Œåˆ° Spark 3.1 [2] ç¤¾åŒºæ ‡è®° GAï¼ŒåŸºæœ¬ä¸Šå·²ç»å…·å¤‡äº†åœ¨ç”Ÿäº§ç¯å¢ƒå¤§è§„æ¨¡ä½¿ç”¨çš„æ¡ä»¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-mid=&quot;&quot; mpa-is-content=&quot;t&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;DnLa&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4222222222222222&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/u61OjQroUM3yWtGlvK19F4jKrHFTIibvltP2Sa0UMU5EJIfJRuiaK6bPHSrmjpfiaebkgnXiaCA0tltzpRr2Qwhfnw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;900&quot;/&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;MXuD&quot; ql-global=&quot;true&quot;&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot; mpa-is-content=&quot;t&quot;&gt;&lt;span&gt;åœ¨ä¸šå†…ï¼Œè‹¹æœ[3], å¾®è½¯[4], è°·æ­Œï¼Œç½‘æ˜“ï¼Œåä¸ºã€æ»´æ»´ï¼Œäº¬ä¸œç­‰å…¬å¸éƒ½å·²ç»æœ‰å†…éƒ¨å¤§è§„æ¨¡è½åœ°æˆ–è€…å¯¹å¤–æœåŠ¡çš„ç»å…¸æˆåŠŸæ¡ˆä¾‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;Ymwp&quot; ql-global=&quot;true&quot;&gt;&lt;/p&gt;&lt;h2 data-foldable-wrapper=&quot;&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1.2142857142857142&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/CzXmD0LHvdj3nVY9EDHLhpH4VvJeiaia0BjslvVI4lWY8dcyW3FMvredibDW5kTgOSp10IDoUmoS4yNgZpNRmQFoQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;28&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1.0434782608695652&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ibl6u6nJ01g9icia42icDbWWvO2ObicnIUHjwVZt9x505utkfDbtc8ea4QIia3icQWibzwwYbPKwNDb83Jlk6bYGcQ2zaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;46&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot; mpa-is-content=&quot;t&quot;&gt;Spark on Kubernetes åº”ç”¨æ¶æ„&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/h2&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;1ZFZ&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;ifB6&quot;&gt;&lt;span&gt;ä» Spark æ•´ä½“è®¡ç®—æ¡†æ¶å±‚é¢æ¥çœ‹ï¼Œåªæ˜¯åœ¨èµ„æºç®¡ç†å±‚é¢å¤šæ”¯æŒäº†ä¸€ç§è°ƒåº¦å™¨ï¼Œå…¶ä»–æ¥å£éƒ½å¯ä»¥å®Œå…¨å¤ç”¨ã€‚ä¸€æ–¹é¢ Kubernetes çš„å¼•å…¥å’Œ Spark Standaloneã€YARNã€ Mesos åŠ Local ç­‰ç»„ä»¶å½¢æˆäº†ä¸€ä¸ªæ›´ä¸ºä¸°å¯Œçš„èµ„æºç®¡ç†ä½“ç³»ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;zV1J&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;Brvs&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.48005698005698005&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/u61OjQroUM3yWtGlvK19F4jKrHFTIibvl25pTBsnbuAbSQeIvIgYC93qCSj1mEbBt1vqfaGte2syaaEb4iaQbbdg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;702&quot;/&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;TgKp&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;IYOz&quot;&gt;&lt;span&gt;å¦ä¸€æ–¹é¢ï¼ŒSpark ç¤¾åŒºåœ¨æ”¯æŒ Kubernetes ç‰¹æ€§çš„åŒæ—¶ï¼Œå¯¹ç”¨æˆ· API çš„å…¼å®¹åº¦ä¹Ÿå¾—åˆ°äº†æœ€å¤§åŒ–çš„ä¿ç•™ï¼Œæå¤§ç¨‹åº¦ä¸Šæ–¹ä¾¿äº†ç”¨æˆ·ä»»åŠ¡çš„è¿ç§»ã€‚æ¯”å¦‚å¯¹äºä¸€ä¸ªä¼ ç»Ÿçš„ Spark ä½œä¸šè€Œè¨€ï¼Œæˆ‘ä»¬é€šè¿‡ç®€å•çš„æŒ‡å®š --master å‚æ•°ä¸º yarn æˆ–è€… k8s://xxxï¼Œå³å¯å®Œæˆä¸¤ä¸ªè°ƒåº¦å¹³å°çš„è¿è¡Œæ—¶åˆ‡æ¢ã€‚å…¶ä»–å‚æ•°è¯¸å¦‚é•œåƒã€é˜Ÿåˆ—ã€Shuffle æœ¬åœ°ç›˜ç­‰é…ç½®ï¼Œ yarn å’Œ k8s ä¹‹é—´éƒ½æ˜¯éš”ç¦»çš„ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿åœ°ç»Ÿä¸€åœ¨é…ç½®æ–‡ä»¶ä¸­ç»Ÿä¸€ç»´æŠ¤ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;tPzJ&quot;&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;tPzJ&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5245202558635395&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/u61OjQroUM3yWtGlvK19F4jKrHFTIibvl767ZE9GbE6geLTV5sL0t8qE2Xs7X7GATJbAk0LGFqoQBQYCP934Nvg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;938&quot;/&gt;&lt;/p&gt;&lt;h2 data-foldable-wrapper=&quot;&quot;/&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;h2 data-foldable-wrapper=&quot;&quot;/&gt;&lt;p&gt;&lt;span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1.2142857142857142&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/CzXmD0LHvdj3nVY9EDHLhpH4VvJeiaia0BjslvVI4lWY8dcyW3FMvredibDW5kTgOSp10IDoUmoS4yNgZpNRmQFoQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;28&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1.0434782608695652&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ibl6u6nJ01g9icia42icDbWWvO2ObicnIUHjwVZt9x505utkfDbtc8ea4QIia3icQWibzwwYbPKwNDb83Jlk6bYGcQ2zaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;46&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot; mpa-is-content=&quot;t&quot;&gt;Spark on Kubernetes vs Spark on YARN&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;h3 data-foldable-wrapper=&quot;&quot;/&gt;&lt;p&gt;&lt;span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.1666666666666667&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jkpRFozzRU6wSGcvLr4mBmDzYNoWZ1J3BibfoABBzYeM9bhLk3okITVpqLn3jrjIdC2Xgl8o9dRBDI133ZXujicQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;36&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1.125&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/s4NNO8erqh93tkgNuf52MaBWaFacs3B7RIQqvsjPalmia3NKoz8KAtjW0k9fXQXr6TCzoprVVNt5FlbwkC0luMA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;32&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot; mpa-is-content=&quot;t&quot;&gt;æ˜“ç”¨æ€§åˆ†æ&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;h4 data-foldable-wrapper=&quot;&quot;/&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Spark Native API&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;bQ5e&quot;&gt;&lt;span&gt;ä»¥ spark-submit è¿™ç§ä¼ ç»Ÿæäº¤ä½œä¸šçš„æ–¹å¼æ¥è¯´ï¼Œå¦‚å‰æ–‡ä¸­æåˆ°çš„é€šè¿‡é…ç½®éš”ç¦»çš„æ–¹å¼ï¼Œç”¨æˆ·å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æäº¤åˆ° k8s æˆ–è€… YARN é›†ç¾¤ä¸Šè¿è¡Œï¼ŒåŸºæœ¬ä¸Šä¸€æ ·çš„ç®€å•å’Œæ˜“ç”¨ã€‚è¿™ç§æ–¹å¼å¯¹äºç†Ÿæ‚‰ Spark API åŠç”Ÿæ€çš„ç”¨æˆ·è€Œè¨€æ˜¯ååˆ†å‹å¥½çš„ï¼ŒåŸºæœ¬ä¸Šæ²¡æœ‰å¯¹ k8s æŠ€æœ¯æ ˆçš„ç¡¬æ€§è¦æ±‚ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;4YKu&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;h2 data-foldable-wrapper=&quot;&quot;/&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5333333333333333&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/u61OjQroUM3yWtGlvK19F4jKrHFTIibvlKDhpUANBxZCgxDAM9u3BsLY8UHsiaNOCR7R61hBfAuPT3cAWZNd9iaUQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;765&quot;/&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;K6SY&quot;&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;K6SY&quot;&gt;&lt;span&gt;å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœæˆ‘ä»¬å¿½ç•¥ K8s æˆ–è€… YARN çš„åº•å±‚ç»†èŠ‚ï¼ŒåŸºæœ¬ä¸Šè¿˜æ˜¯ç†Ÿæ‚‰çš„é…æ–¹ç†Ÿæ‚‰çš„å‘³é“ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;xQkx&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;h4 data-foldable-wrapper=&quot;&quot;/&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Spark Operator&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;BcF4&quot;&gt;&lt;span&gt;å¦å¤–ï¼Œé™¤äº†è¿™ç§æ–¹å¼ï¼Œ Kubernetes åœ¨ API ä¸Šæ›´åŠ ä¸°å¯Œã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ Spark Operator[6] çš„çš„æ–¹å¼ï¼Œ å¦‚ kubectl apply -f &amp;lt;YAML file path&amp;gt;æ¥åˆ›å»ºå’Œç®¡ç† Spark on k8s åº”ç”¨ã€‚è¿™ç§æ–¹å¼å¯¹äº Kubernetes é›†ç¾¤æœ¬èº«åŠç”¨æˆ·è€Œè¨€æ— ç–‘æ˜¯æœ€ä¼˜é›…çš„ï¼Œè€Œå¯¹æ²¡æœ‰ Kubernetes ç»éªŒçš„è¿™éƒ¨åˆ† Spark ç”¨æˆ·è€Œè¨€ï¼Œæœ‰ä¸€å®šçš„å­¦ä¹ æˆæœ¬ã€‚è¿™ç§æ–¹å¼å¦ä¸€ä¸ªå¥½å¤„æ˜¯ï¼ŒSpark çš„ç›¸å…³ lib éƒ½å¯ä»¥é€šè¿‡ Docker ä»“åº“æ¥ Deployï¼Œä¸éœ€è¦å•ç‹¬çš„ Spark Client ç¯å¢ƒæ¥æäº¤ä½œä¸šã€‚å•ç‹¬çš„ Client ç¯å¢ƒï¼Œå®¹æ˜“é€ æˆç‰ˆæœ¬å’Œ Docker ä¸ä¸€è‡´ï¼Œå¢åŠ è¿ç»´æˆæœ¬ï¼Œä¹Ÿä¼šåŸ‹ä¸‹å¼•å‘ä¸€äº›ä¸å¿…è¦çš„çº¿ä¸Šé—®é¢˜çš„éšæ‚£ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;jlvt&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;h4 data-foldable-wrapper=&quot;&quot;/&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Serverless SQL&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;gBJW&quot;&gt;&lt;span&gt;å½“ç„¶ï¼Œæ— è®ºæ˜¯ Spark åŸç”Ÿçš„è¿˜æ˜¯ Operator çš„æ–¹å¼ï¼Œå¯¹å¤§éƒ¨åˆ†ç”¨æˆ·æ¥è¯´è¿˜æ˜¯å¤ªåŸå§‹äº†ï¼Œä¸å¯é¿å…çš„éœ€è¦å»æ„ŸçŸ¥ä¸€äº›åº•å±‚çš„ç»†èŠ‚ã€‚åœ¨ Datalake/Lakehouse åœºæ™¯ä¸‹ï¼Œæ•°æ®å˜å¾—æ°‘ä¸»ï¼Œæ•°æ®åº”ç”¨å˜å¾—å¤šæ ·ï¼Œå¾ˆéš¾å»å¤§èŒƒå›´åœ°æ¨å¹¿ã€‚åœ¨æ˜“ç”¨æ€§ä¸Šæƒ³æ›´è¿›ä¸€æ­¥ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ Apache Kyuubi (Incubating) [7] æ¥æ„å»º Serverless Spark/SQL æœåŠ¡ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œç”¨æˆ·éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ BI å·¥å…·æˆ–è€… SQL æ¥ç›´æ¥æ“ä½œæ•°æ®å³å¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;a2YR&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;bSev&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4005208333333333&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/u61OjQroUM3yWtGlvK19F4jKrHFTIibvlORXm664szoXM4yxJWQOXiaqISOdqKBTSGxYrHpxib7icBD2NcW8MLQVTA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1920&quot;/&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;e7Vm&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;0NKj&quot;&gt;&lt;span&gt;ä¸€èˆ¬è€Œè¨€ï¼Œå¤§éƒ¨åˆ†ä¼ä¸šéƒ½ä¼šæœ‰å¾ˆå¤šç¦»çº¿çš„ Hive æˆ–è€… Spark ä»»åŠ¡è·‘åœ¨ YARN é›†ç¾¤ä¸Šï¼Œå¦‚ä½•å°†å¤§é‡çš„å†å²ä»»åŠ¡å¹³æ»‘åœ°è¿ç§»åˆ° Kubernetes ä¸Šä¹Ÿæ˜¯è®©äººå¤´ç–¼çš„é—®é¢˜ã€‚Kyuubi çš„æœåŠ¡åŒ–æ–¹æ¡ˆï¼Œå¯ä»¥é€šè¿‡æœåŠ¡å‘ç°æœºåˆ¶ï¼Œæä¾›è´Ÿè½½å‡è¡¡èŠ‚ç‚¹ï¼Œåœ¨æœåŠ¡é«˜å¯ç”¨çš„åŸºç¡€ä¸Šï¼Œæ¥å¹³æ»‘åœ°è¿‡æ¸¡ã€‚å¯¹äºä¸ªåˆ«å¼‚å¸¸è¿ç§»ä»»åŠ¡ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ–¹ä¾¿åœ° Rollback åˆ° è€é›†ç¾¤ä¸Šä¿éšœæ‰§è¡Œï¼Œä¹Ÿç•™ç»™æˆ‘ä»¬å®šä½é—®é¢˜çš„æ—¶é—´å’Œç©ºé—´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;9Hbx&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;VEmL&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8056460369163952&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/u61OjQroUM3yWtGlvK19F4jKrHFTIibvlhvjsicW3uq5Ogc9vSF18dD8jZBqN4h4ibo1qfab3taKjFtmbBM5ec1fg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1842&quot;/&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;Vtot&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;h3 data-foldable-wrapper=&quot;&quot;/&gt;&lt;p&gt;&lt;span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.1666666666666667&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jkpRFozzRU6wSGcvLr4mBmDzYNoWZ1J3BibfoABBzYeM9bhLk3okITVpqLn3jrjIdC2Xgl8o9dRBDI133ZXujicQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;36&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1.125&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/s4NNO8erqh93tkgNuf52MaBWaFacs3B7RIQqvsjPalmia3NKoz8KAtjW0k9fXQXr6TCzoprVVNt5FlbwkC0luMA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;32&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot; mpa-is-content=&quot;t&quot;&gt;æ€§èƒ½å¯¹æ¯”&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;6zQz&quot;&gt;&lt;span&gt;ä»åŸç†ä¸Šï¼Œæ— è®ºæ˜¯ Kubernetes å’Œ YARN éƒ½åªèµ·èµ„æºè°ƒåº¦çš„ä½œç”¨ï¼Œä¸æ¶‰åŠè®¡ç®—æ¨¡å‹å’Œä»»åŠ¡è°ƒåº¦çš„å˜åŒ–ï¼Œæ‰€ä»¥åœ¨æ€§èƒ½ä¸Šçš„å·®å¼‚åº”è¯¥æ˜¯ä¸æ˜¾è‘—çš„ã€‚ä»éƒ¨ç½²æ¶æ„ä¸Šï¼ŒSpark on Kubernetes ä¸€èˆ¬é€‰æ‹©å­˜ç®—åˆ†ç¦»çš„æ¶æ„ï¼Œè€Œ YARN é›†ç¾¤ä¸€èˆ¬å’Œ HDFS è€¦åˆåœ¨ä¸€èµ·ï¼Œå‰è€…ä¼šåœ¨è¯»å†™ HDFS æ—¶ä¸§å¤±â€œæ•°æ®æœ¬åœ°æ€§â€ï¼Œè¿™ä¸ªç”±äºç½‘ç»œå¸¦å®½å› ç´ å½±å“å¯èƒ½ä¼šå½±å“æ€§èƒ½ã€‚ä»å­˜ç®—è€¦åˆæ¶æ„è¯ç”Ÿä¹‹åˆç»è¿‡10å¹´å·¦å³çš„å‘å±•ï¼Œéšç€ç½‘ç»œçš„æ€§èƒ½å¢é•¿ï¼Œå„ç§é«˜æ•ˆçš„åˆ—å¼å­˜å‚¨æ ¼å¼åŠå‹ç¼©ç®—æ³•çš„åŠ æŒï¼Œè¿™ç‚¹å½±å“å¾®ä¹å…¶å¾®ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;RsY4&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;h4 data-foldable-wrapper=&quot;&quot;/&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Terasort åŸºå‡†æµ‹è¯• (By Myself)&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;H2OJ&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;MAez&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.38672768878718533&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/u61OjQroUM3yWtGlvK19F4jKrHFTIibvlQxNz4I5WPDMuelNpa1gyvtoVzqmhtv6ficcWFmu4hsSgshxPNGGu5vQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1748&quot;/&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;OaOF&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;EXW7&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;h4 data-foldable-wrapper=&quot;&quot;/&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;TPC-DS åŸºå‡†æµ‹è¯•ï¼ˆBy Data mechanicsï¼‰&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;k3fn&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6009070294784581&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/u61OjQroUM3yWtGlvK19F4jKrHFTIibvlIlxs1YjpVibibSKXUhIyVeZAGens89o5v2vibMXkhMoM8lsHOsG6SAKLw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;441&quot;/&gt;&lt;/p&gt;&lt;h4 data-foldable-wrapper=&quot;&quot;/&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;TPC-DS åŸºå‡†æµ‹è¯•ï¼ˆBy Â AWSï¼‰&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;MWXj&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;wRhP&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.46153846153846156&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/u61OjQroUM3yWtGlvK19F4jKrHFTIibvl441FDqGydv3sDd3okcXpJCt7moTJP2KxibMeVscbiaNNyVGDatIwIqVg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;650&quot;/&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;BKwq&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;cQWI&quot;&gt;&lt;span&gt;è™½ç„¶è¿™äº›æµ‹è¯•ç»“æœéƒ½ä¸æ˜¯æ¥è‡ª TPC-DS ç»„ç»‡è®¤è¯çš„å®˜æ–¹æ•°æ®ï¼Œä½†ä»æµ‹è¯•ç»“æœæ¥è‡ªä¸åŒçš„æœºæ„è¿™ä¸ªå› ç´ ä¸Šä¹Ÿæœ‰è¶³å¤Ÿçš„è¯´æœåŠ›ã€‚æˆ‘ä»¬å±è”½ä¸€äº›éƒ¨ç½²æ¶æ„ä¸Šçš„å½±å“ï¼Œä¸¤è€…çš„æ€§èƒ½å·®è·å¯ä»¥è¯´æ˜¯åŸºæœ¬ä¸å­˜åœ¨çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;f3hT&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;h3 data-foldable-wrapper=&quot;&quot;/&gt;&lt;p&gt;&lt;span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1.1666666666666667&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jkpRFozzRU6wSGcvLr4mBmDzYNoWZ1J3BibfoABBzYeM9bhLk3okITVpqLn3jrjIdC2Xgl8o9dRBDI133ZXujicQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;36&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1.125&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/s4NNO8erqh93tkgNuf52MaBWaFacs3B7RIQqvsjPalmia3NKoz8KAtjW0k9fXQXr6TCzoprVVNt5FlbwkC0luMA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;32&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot; mpa-is-content=&quot;t&quot;&gt;æˆæœ¬å¯¹æ¯”&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å°† Spark ä½œä¸šè¿ç§»è‡³ Kubernetes é›†ç¾¤ä¸Šï¼Œå¯ä»¥å®ç°ç¦»çº¿å’Œåœ¨çº¿ä¸šåŠ¡çš„æ··åˆéƒ¨ç½²ï¼Œåˆ©ç”¨ä¸¤ç§ä¸šåŠ¡ç‰¹å¾çš„å¯¹è®¡ç®—èµ„æºæ½®æ±é”™å³°æ•ˆåº”ï¼Œæè‡´çš„æƒ…å†µä¸‹å…‰é â€œç¦»/åœ¨æ··éƒ¨â€å°±å¯å®ç° IT æ€»æœ‰ç”¨æˆæœ¬ï¼ˆTCOï¼‰çš„ 50%çš„èŠ‚çœã€‚&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;34PX&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;nqiR&quot;&gt;&lt;span&gt;å¦ä¸€æ–¹é¢ï¼Œä¼ä¸šæ•°æ®å¹³å°åœ¨&lt;span&gt;ä¸åŒçš„å‘å±•æ—¶æœŸï¼Œé›†ç¾¤æ‰€è§„åˆ’çš„å­˜å‚¨ç®—åŠ›æ¯”ä¸åŒï¼Œå¯¼è‡´æœåŠ¡å™¨é€‰å‹å›°éš¾ï¼Œè€Œ&lt;/span&gt;ä»å­˜ç®—åˆ†ç¦»çš„çš„è§’åº¦ï¼Œè®¡ç®—é›†ç¾¤å’Œå­˜å‚¨é›†ç¾¤åˆ†å¼€æ‰©å®¹ï¼Œä¹Ÿå¯ä»¥æ›´åŠ åˆç†åœ°æ§åˆ¶ IT æˆæœ¬ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;Jags&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;9Fj6&quot;&gt;&lt;span&gt;æ­¤å¤–ï¼ŒSpark on Kubernetes é€šè¿‡ Pod åˆ†é… Executor æ¨¡å¼ï¼Œæ‰§è¡Œçº¿ç¨‹æ•°ï¼ˆspark.executor.coresï¼‰å’Œ Pod çš„ request cpu æ˜¯åˆ†ç¦»çš„ï¼Œå¯ä»¥æ›´åŠ ç»†ç²’åº¦çš„åœ¨ä½œä¸šçº§åˆ«å¯¹æ§åˆ¶ï¼Œæ¥æå‡è®¡ç®—èµ„æºçš„ä½¿ç”¨æ•ˆç‡ã€‚åœ¨æˆ‘ä»¬ç½‘æ˜“çš„å®é™…å®è·µä¸­ï¼Œåœ¨ä¸å½±å“æ•´ä½“è®¡ç®—æ€§èƒ½çš„æ¡ä»¶ä¸‹ï¼ŒSpark on Kubernetes ä½œä¸šæ•´ä½“ä¸Š cpu å¯ä»¥è¾¾åˆ°è¶… 200%çš„è¶…å”®æ¯”ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;UrGI&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;B5UM&quot;&gt;&lt;span&gt;å½“ç„¶ï¼ŒSpark on Kubernetes åœ¨åŠ¨æ€èµ„æºåˆ†é…ï¼ˆDynamic Resource Allocationï¼‰è¿™ä¸ªç‰¹æ€§ä¸Šçš„ç¼ºå¤±æˆ–è€…ä¸å®Œå–„ï¼Œå¯èƒ½ä¼šé€ æˆ Spark å ç€èµ„æºä¸ä½¿ç”¨çš„æƒ…å†µã€‚ç”±äºè¿™ä¸ªç‰¹æ€§ç›´æ¥ä¾èµ–å¤–ç½®çš„ Shuffle Service æœåŠ¡æ¥å®ç°ï¼Œè¿™æ—¶å€™å¯èƒ½å°±éœ€è¦è‡ªè¡Œå»æ­å»º Remote/External Shuffle Service æœåŠ¡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;hQQA&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;u107&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5185185185185185&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/u61OjQroUM3yWtGlvK19F4jKrHFTIibvlEcpibDAgbDEWjDUB4Vc5tDnzBUoHMGzPyWicqChITk4836uKbKMIsORw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;891&quot;/&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;fnv6&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;P14y&quot;&gt;&lt;span&gt;åœ¨ Spark on Kubernetes åœºæ™¯ä¸‹ï¼ŒåŸºäº RSS/ESSnå¯å®ç°ä¸´æ—¶å­˜å‚¨ä¸è®¡ç®—è¿‡ç¨‹ç›¸äº’è§£è€¦ã€‚ç¬¬ä¸€ï¼Œæ¶ˆé™¤æœ¬åœ°å­˜å‚¨ä¾èµ–ï¼Œä½¿å¾—è®¡ç®—èŠ‚ç‚¹å¯åœ¨å¼‚æ„èŠ‚ç‚¹ä¸ŠåŠ¨æ€ä¼¸ç¼©ï¼Œåœ¨é¢å¯¹å¤æ‚ç‰©ç†æˆ–è€…è™šæ‹Ÿç¯å¢ƒæ—¶æ›´åŠ çµæ´»çš„åŠ¨æ€æ‰©å±•ã€‚ç¬¬äºŒï¼Œç¦»æ•£å¼æœ¬åœ°å­˜å‚¨ä¼˜åŒ–ä¸ºé›†ä¸­å¼æœåŠ¡åŒ–å­˜å‚¨ï¼Œå­˜å‚¨å®¹é‡æ‰€æœ‰è®¡ç®—èŠ‚ç‚¹å…±äº«ï¼Œæé«˜å­˜å‚¨èµ„æºåˆ©ç”¨ç‡ã€‚ç¬¬ä¸‰ï¼Œé™ä½ç£ç›˜æ•…éšœç‡ï¼ŒåŠ¨æ€åœ°å‡å°‘æ ‡è®°ä¸ºä¸å¯ç”¨è®¡ç®—èŠ‚ç‚¹ï¼Œæå‡è®¡ç®—é›†ç¾¤æ•´ä½“èµ„æºåˆ©ç”¨ç‡ã€‚æœ€åï¼Œè½¬ç§»ä¸´æ—¶å­˜å‚¨çš„è¡€ç¼˜å…³ç³»ï¼Œä½¿å…¶ä¸å†ç”± Executor Pod è®¡ç®—èŠ‚ç‚¹ç»´æŠ¤ï¼Œä½¿å¾—é—²ç½® Executor Pod å¯ä»¥è¢«åŠæ—¶åœ°é‡Šæ”¾å›èµ„æºæ± ï¼Œæå‡é›†ç¾¤èµ„æºåˆ©ç”¨ç‡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;xCH6&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;h3 data-foldable-wrapper=&quot;&quot;/&gt;&lt;p&gt;&lt;span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1.1666666666666667&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jkpRFozzRU6wSGcvLr4mBmDzYNoWZ1J3BibfoABBzYeM9bhLk3okITVpqLn3jrjIdC2Xgl8o9dRBDI133ZXujicQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;36&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1.125&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/s4NNO8erqh93tkgNuf52MaBWaFacs3B7RIQqvsjPalmia3NKoz8KAtjW0k9fXQXr6TCzoprVVNt5FlbwkC0luMA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;32&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot; mpa-is-content=&quot;t&quot;&gt;å…¶ä»–å¯¹æ¯”&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td guid=&quot;paOV&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;0&quot; col=&quot;0&quot;&gt;&lt;br/&gt;&lt;/td&gt;&lt;td guid=&quot;YROA&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;0&quot; col=&quot;1&quot;&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;&lt;span&gt;Spark on k8s&lt;/span&gt;&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;IkSQ&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;0&quot; col=&quot;2&quot;&gt;&lt;p&gt;&lt;em&gt;&lt;strong&gt;&lt;span&gt;Spark on yarn&lt;/span&gt;&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td guid=&quot;KS0O&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;1&quot; col=&quot;0&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;ä½•æ—¶æ”¯æŒ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;1bZo&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;1&quot; col=&quot;1&quot;&gt;&lt;p&gt;&lt;span&gt;Spark 2.3.0&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;NEPo&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;1&quot; col=&quot;2&quot;&gt;&lt;p&gt;&lt;span&gt;Spark 0.6.0&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td guid=&quot;Cjd0&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;2&quot; col=&quot;0&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;å¤§è§„æ¨¡ç”Ÿäº§&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;IRDl&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;2&quot; col=&quot;1&quot;&gt;&lt;p&gt;&lt;span&gt;è¾ƒå°‘&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;s2EO&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;2&quot; col=&quot;2&quot;&gt;&lt;p&gt;&lt;span&gt;ä¸»æµ&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td guid=&quot;hJyr&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;3&quot; col=&quot;0&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;è°ƒåº¦å™¨æ¶æ„&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;2xqd&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;3&quot; col=&quot;1&quot;&gt;&lt;p&gt;&lt;span&gt;å…±äº«çŠ¶æ€è°ƒåº¦æ¶æ„&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;1X5y&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;3&quot; col=&quot;2&quot;&gt;&lt;p&gt;&lt;span&gt;é›†ä¸­å¼è°ƒåº¦å™¨&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td guid=&quot;xbCb&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;4&quot; col=&quot;0&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;ç¤¾åŒºæ´»è·ƒåº¦&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;jkqV&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;4&quot; col=&quot;1&quot;&gt;&lt;p&gt;&lt;span&gt;æ´»è·ƒ&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;KpsU&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;4&quot; col=&quot;2&quot;&gt;&lt;p&gt;&lt;span&gt;ä¸æ´»è·ƒ&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td guid=&quot;HdTJ&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;5&quot; col=&quot;0&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;æœ€å°è°ƒåº¦å•ä½&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;qInH&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;5&quot; col=&quot;1&quot;&gt;&lt;p&gt;&lt;span&gt;Pod&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;CvRS&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;5&quot; col=&quot;2&quot;&gt;&lt;p&gt;&lt;span&gt;Container&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td guid=&quot;u9eh&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;6&quot; col=&quot;0&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;æ—¥å¿—èšåˆ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;2t2l&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;6&quot; col=&quot;1&quot;&gt;&lt;p&gt;&lt;span&gt;æ— &lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;lDRq&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;6&quot; col=&quot;2&quot;&gt;&lt;p&gt;&lt;span&gt;æœ‰&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td guid=&quot;XltZ&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;7&quot; col=&quot;0&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Spark Web UI&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;Br1t&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;7&quot; col=&quot;1&quot;&gt;&lt;p&gt;&lt;span&gt;port-forward&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;pESi&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;7&quot; col=&quot;2&quot;&gt;&lt;p&gt;&lt;span&gt;proxy&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td guid=&quot;55AT&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;8&quot; col=&quot;0&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;å¤šç§Ÿæˆ·&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;ZEDq&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;8&quot; col=&quot;1&quot;&gt;&lt;p&gt;&lt;span&gt;Namespace&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;QBOF&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;8&quot; col=&quot;2&quot;&gt;&lt;p&gt;&lt;span&gt;queue&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td guid=&quot;0JUh&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;9&quot; col=&quot;0&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;æ•°æ®æœ¬åœ°æ€§&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;RbaF&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;9&quot; col=&quot;1&quot;&gt;&lt;p&gt;&lt;span&gt;HDFS è¯»å†™ - å·®&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Shuffle è¯»å†™ â€“ å¥½&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;u4Ii&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;9&quot; col=&quot;2&quot;&gt;&lt;p&gt;&lt;span&gt;HDFS è¯»å†™ â€“ ç†è®ºä¸Šå¥½ï¼Œç”Ÿäº§ä¸Šä¸€èˆ¬&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Shuffle è¯»å†™ - å¥½&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td guid=&quot;94cX&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;10&quot; col=&quot;0&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;HDFSé›†æˆæµç•…åº¦&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;m6DF&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;10&quot; col=&quot;1&quot;&gt;&lt;p&gt;&lt;span&gt;Spark 3.0åŠä»¥ä¸Š&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td guid=&quot;dvqP&quot; autocorrect=&quot;off&quot; autocomplete=&quot;off&quot; spellcheck=&quot;false&quot; row=&quot;10&quot; col=&quot;2&quot;&gt;&lt;p&gt;&lt;span&gt;å®Œå¤‡&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;yaxN&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;h2 data-foldable-wrapper=&quot;&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1.2142857142857142&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/CzXmD0LHvdj3nVY9EDHLhpH4VvJeiaia0BjslvVI4lWY8dcyW3FMvredibDW5kTgOSp10IDoUmoS4yNgZpNRmQFoQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;28&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1.0434782608695652&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ibl6u6nJ01g9icia42icDbWWvO2ObicnIUHjwVZt9x505utkfDbtc8ea4QIia3icQWibzwwYbPKwNDb83Jlk6bYGcQ2zaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;46&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot; mpa-is-content=&quot;t&quot;&gt;æ€»ç»“&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/h2&gt;&lt;p&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;LOGT&quot;&gt;&lt;span&gt;Spark on Kubernetes è‡ª 2018å¹´åˆéš 2.3.0 ç‰ˆæœ¬å‘å¸ƒä»¥æ¥ï¼Œä¸çŸ¥ä¸è§‰å·²ç»æœ‰å››ä¸ªå¹´å¤´äº†ï¼Œè€Œåˆ°ç°åœ¨çš„ 3.2 ç‰ˆæœ¬ï¼Œä¹Ÿå·²ç»å†ç» 5 ä¸ªå¤§ç‰ˆæœ¬äº†ã€‚åœ¨ç¤¾åŒºå’Œç”¨æˆ·çš„ä¸æ–­æ‰“ç£¨ä¸‹å·²ç»æˆä¸ºäº†éå¸¸æˆç†Ÿçš„ç‰¹æ€§äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;WeZz&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;JhOY&quot;&gt;&lt;span&gt;éšç€ Apache Spark å¼€æºç”Ÿæ€ä¸æ–­å‘å±•ï¼Œå¦‚ Apache Kyuubi ç­‰ï¼Œæ— è®ºæ˜¯å“ªä¸ªè°ƒåº¦æ¡†æ¶ï¼Œæ˜“ç”¨æ€§ä¸Šéƒ½å¾—åˆ°å¤§å¹…æå‡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;YsiJ&quot; ql-global=&quot;true&quot;&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;laDi&quot;&gt;&lt;span&gt;IT åŸºç¡€è®¾æ–½çš„æ€»æ‹¥æœ‰æˆæœ¬ï¼ˆTotal Cost of Ownership, TCOï¼‰ é€å¹´ä¸Šæ¶¨ï¼Œä¸€ç›´æ˜¯å›°æ‰°å¾ˆå¤šä¼ä¸šçš„éš¾é¢˜ã€‚Spark + Kubernetes çš„ç»„åˆçš„çµæ´»æ€§å’Œè¶…é«˜æ€§ä»·æ¯”ï¼Œç»™äº†æˆ‘ä»¬æ›´å¤šæƒ³è±¡çš„ç©ºé—´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p ql-global-para=&quot;true&quot; line=&quot;rToV&quot; ql-global=&quot;true&quot;&gt;&lt;/p&gt;&lt;h2 data-foldable-wrapper=&quot;&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.2142857142857142&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/CzXmD0LHvdj3nVY9EDHLhpH4VvJeiaia0BjslvVI4lWY8dcyW3FMvredibDW5kTgOSp10IDoUmoS4yNgZpNRmQFoQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;28&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1.0434782608695652&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ibl6u6nJ01g9icia42icDbWWvO2ObicnIUHjwVZt9x505utkfDbtc8ea4QIia3icQWibzwwYbPKwNDb83Jlk6bYGcQ2zaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;46&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot; mpa-is-content=&quot;t&quot;&gt;å‚è€ƒèµ„æ–™&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/h2&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;https://issues.apache.org/jira/browse/SPARK-18278&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;https://issues.apache.org/jira/browse/SPARK-33005&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;https://www.youtube.com/watch?v=xX2z8ndp_zg&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;https://www.youtube.com/watch?v=hcGdW_6xTKo&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;https://ieeexplore.ieee.org/document/9384578&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;https://github.com/GoogleCloudPlatform/spark-on-k8s-operator&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;https://github.com/apache/incubator-kyuubi&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;https://aws.amazon.com/cn/blogs/containers/optimizing-spark-performance-on-kubernetes/&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>c2a3b21bfeda3915e1edc0c17d812a55</guid>
<title>ä¸€æ–‡å½»åº•ææ‡‚å‰ç«¯æ²™ç®±</title>
<link>https://toutiao.io/k/5p2gbvz</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;h1&gt;ä»€ä¹ˆæ˜¯â€œæ²™ç®±â€&lt;/h1&gt;&lt;blockquote&gt;&lt;p&gt;&lt;span&gt;æ²™ç®±ï¼ˆSandboxï¼‰&lt;sup&gt;[1]&lt;/sup&gt;&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;ä¹Ÿç§°ä½œï¼šâ€œæ²™ç®±/æ²™ç›’/æ²™ç›˜â€ã€‚æ²™ç®±æ˜¯ä¸€ç§å®‰å…¨æœºåˆ¶ï¼Œä¸ºè¿è¡Œä¸­çš„ç¨‹åºæä¾›éš”ç¦»ç¯å¢ƒã€‚é€šå¸¸æ˜¯ä½œä¸ºä¸€äº›æ¥æºä¸å¯ä¿¡ã€å…·ç ´ååŠ›æˆ–æ— æ³•åˆ¤å®šç¨‹åºæ„å›¾çš„ç¨‹åºæä¾›å®éªŒä¹‹ç”¨ã€‚æ²™ç®±èƒ½å¤Ÿå®‰å…¨çš„æ‰§è¡Œä¸å—ä¿¡ä»»çš„ä»£ç ï¼Œä¸”ä¸å½±å“å¤–éƒ¨å®é™…ä»£ç å½±å“çš„ç‹¬ç«‹ç¯å¢ƒã€‚&lt;/p&gt;&lt;h1&gt;æœ‰å“ªäº›åŠ¨æ€æ‰§è¡Œè„šæœ¬çš„åœºæ™¯ï¼Ÿ&lt;/h1&gt;&lt;p&gt;åœ¨ä¸€äº›åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›ç»™ç”¨æˆ·æä¾›æ’å…¥è‡ªå®šä¹‰é€»è¾‘çš„èƒ½åŠ›ï¼Œæ¯”å¦‚ Microsoft çš„ Office ä¸­çš„ VBAï¼Œæ¯”å¦‚ä¸€äº›æ¸¸æˆä¸­çš„ lua è„šæœ¬ï¼ŒFireFox çš„ã€Œæ²¹çŒ´è„šæœ¬ã€ï¼Œèƒ½å¤Ÿè®©ç”¨æˆ·å‘åœ¨å¯æ§çš„èŒƒå›´å’Œæƒé™å†…å‘æŒ¥æƒ³è±¡åšä¸€äº›å¥½ç©ã€æœ‰ç”¨çš„äº‹æƒ…ï¼Œæ‰©å±•äº†èƒ½åŠ›ï¼Œæ»¡è¶³ç”¨æˆ·çš„ä¸ªæ€§åŒ–éœ€æ±‚ã€‚&lt;/p&gt;&lt;p&gt;å¤§å¤šæ•°éƒ½æ˜¯ä¸€äº›å®¢æˆ·ç«¯ç¨‹åºï¼Œåœ¨ä¸€äº›åœ¨çº¿çš„ç³»ç»Ÿå’Œäº§å“ä¸­ä¹Ÿå¸¸å¸¸ä¹Ÿæœ‰ç±»ä¼¼çš„éœ€æ±‚ï¼Œäº‹å®ä¸Šï¼Œåœ¨çº¿çš„åº”ç”¨ä¸­ä¹Ÿæœ‰ä¸å°‘æä¾›äº†è‡ªå®šä¹‰è„šæœ¬çš„èƒ½åŠ›ï¼Œæ¯”å¦‚ Google Docs ä¸­çš„ Apps Scriptï¼Œå®ƒå¯ä»¥è®©ä½ ä½¿ç”¨ JavaScript åšä¸€äº›éå¸¸æœ‰ç”¨çš„äº‹æƒ…ï¼Œæ¯”å¦‚è¿è¡Œä»£ç æ¥å“åº”æ–‡æ¡£æ‰“å¼€äº‹ä»¶æˆ–å•å…ƒæ ¼æ›´æ”¹äº‹ä»¶ï¼Œä¸ºå…¬å¼åˆ¶ä½œè‡ªå®šä¹‰ç”µå­è¡¨æ ¼å‡½æ•°ç­‰ç­‰ã€‚&lt;/p&gt;&lt;p&gt;ä¸è¿è¡Œåœ¨ã€Œç”¨æˆ·ç”µè„‘ä¸­ã€çš„å®¢æˆ·ç«¯åº”ç”¨ä¸åŒï¼Œç”¨æˆ·çš„è‡ªå®šä¹‰è„šæœ¬é€šå¸¸åªèƒ½å½±å“ç”¨æˆ·è‡ªå·²ï¼Œè€Œå¯¹äºåœ¨çº¿çš„åº”ç”¨æˆ–æœåŠ¡æ¥è®²ï¼Œæœ‰ä¸€äº›æƒ…å†µå°±å˜å¾—æ›´ä¸ºé‡è¦ï¼Œæ¯”å¦‚ã€Œå®‰å…¨ã€ï¼Œç”¨æˆ·çš„ã€Œè‡ªå®šä¹‰è„šæœ¬ã€å¿…é¡»ä¸¥æ ¼å—åˆ°é™åˆ¶å’Œéš”ç¦»ï¼Œå³ä¸èƒ½å½±å“åˆ°å®¿ä¸»ç¨‹åºï¼Œä¹Ÿä¸èƒ½å½±å“åˆ°å…¶å®ƒç”¨æˆ·ã€‚&lt;/p&gt;&lt;p&gt;å¦å¤–ï¼Œæœ‰ä¸€äº›ç‰µæ‰¯ã€Œæ¨¡æ¿åŒ–ã€çš„å‰ç«¯æ¡†æ¶ï¼Œå¦‚Vue.jsã€Venom.jsç­‰éƒ½ä¼šç”¨åˆ°åŠ¨æ€ä»£ç æ‰§è¡Œã€‚&lt;/p&gt;&lt;h1&gt;JavaScriptä¸­çš„æ²™ç®±å®ç°&lt;/h1&gt;&lt;h2&gt;é›¶ã€å‡ ä¸ªåŸºç¡€çŸ¥è¯†&lt;/h2&gt;&lt;h3&gt;ä»€ä¹ˆæ˜¯constructor&lt;/h3&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;JavaScriptä¸­constructorå±æ€§æŒ‡å‘åˆ›å»ºå½“å‰å¯¹è±¡çš„æ„é€ å‡½æ•°ï¼Œè¯¥å±æ€§æ˜¯å­˜åœ¨åŸå‹é‡Œçš„ï¼Œä¸”æ˜¯ä¸å¯é çš„Â &lt;span&gt;JavaScriptä¸­constructorå±æ€§&lt;sup&gt;[2]&lt;/sup&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;test&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span/&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â objÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;test&lt;/span&gt;&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;obj&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;hasOwnProperty&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;constructor&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;));&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â false&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;obj&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;__proto__&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;hasOwnProperty&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;constructor&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;));&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â true&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;obj&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;__proto__&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â test&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;prototype&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â true&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;test&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;prototype&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;hasOwnProperty&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;constructor&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;));&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â true&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;/**Â constructoræ˜¯ä¸å¯é çš„Â */&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Foo&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span/&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;Foo&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;prototype&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{};&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â fooÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Foo&lt;/span&gt;&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;foo&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;constructor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â trueï¼Œå¯ä»¥çœ‹å‡ºä¸æ˜¯Fooäº†&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;constructorä¹Ÿæ˜¯ä¸€ç§ç”¨äºåˆ›å»ºå’Œåˆå§‹åŒ–&lt;span&gt;class&lt;sup&gt;[3]&lt;/sup&gt;&lt;/span&gt;åˆ›å»ºçš„å¯¹è±¡çš„ç‰¹æ®Šæ–¹æ³•Â &lt;span&gt;Classæ„é€ æ–¹æ³•&lt;sup&gt;[4]&lt;/sup&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å‡ ä¸ªå…¸å‹çš„constructorï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;async&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span/&gt;&lt;span&gt;){})().&lt;/span&gt;&lt;span&gt;&lt;span&gt;constructor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Promise&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;//Â æµè§ˆå™¨ç¯å¢ƒä¸‹&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;constructor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;constructor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Function&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;constructor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;constructor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Function&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;//Â nodeç¯å¢ƒä¸‹&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;constructor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;constructor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Function&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;global&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;constructor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;constructor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Function&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3&gt;&lt;strong&gt;JS Proxy getPrototypeOf()&lt;/strong&gt;&lt;/h3&gt;&lt;p&gt;&lt;code&gt;handler.getPrototypeOf()&lt;/code&gt;æ˜¯ä¸€ä¸ªä»£ç†æ–¹æ³•ï¼Œå½“è¯»å–ä»£ç†å¯¹è±¡çš„åŸå‹æ—¶ï¼Œè¯¥æ–¹æ³•å°±ä¼šè¢«è°ƒç”¨ã€‚è¯­æ³•ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â pÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Proxy&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;obj&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;getPrototypeOf&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;target&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;// target è¢«ä»£ç†çš„ç›®æ ‡å¯¹è±¡ã€‚&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;...&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å½“ getPrototypeOf æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œthis æŒ‡å‘çš„æ˜¯å®ƒæ‰€å±çš„å¤„ç†å™¨å¯¹è±¡ï¼ŒgetPrototypeOf æ–¹æ³•çš„è¿”å›å€¼å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–è€… nullã€‚&lt;/p&gt;&lt;p&gt;åœ¨ JavaScript ä¸­ï¼Œæœ‰ä¸‹é¢è¿™äº”ç§æ“ä½œï¼ˆæ–¹æ³•/å±æ€§/è¿ç®—ç¬¦ï¼‰å¯ä»¥è§¦å‘ JS å¼•æ“è¯»å–ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥è§¦å‘ getPrototypeOf() ä»£ç†æ–¹æ³•çš„è¿è¡Œï¼š&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;&lt;span&gt;Object.getPrototypeOf()&lt;sup&gt;[5]&lt;/sup&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;&lt;span&gt;Reflect.getPrototypeOf()&lt;sup&gt;[6]&lt;/sup&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;&lt;span&gt;&lt;strong&gt;proto&lt;/strong&gt;&lt;sup&gt;[7]&lt;/sup&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;&lt;span&gt;Object.prototype.isPrototypeOf()&lt;sup&gt;[8]&lt;/sup&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;&lt;span&gt;instanceof&lt;sup&gt;[9]&lt;/sup&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å¦‚æœé‡åˆ°äº†ä¸‹é¢ä¸¤ç§æƒ…å†µï¼ŒJS å¼•æ“ä¼šæŠ›å‡ºÂ &lt;span&gt;TypeError&lt;sup&gt;[10]&lt;/sup&gt;&lt;/span&gt;Â å¼‚å¸¸ï¼š&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;getPrototypeOf() æ–¹æ³•è¿”å›çš„ä¸æ˜¯å¯¹è±¡ä¹Ÿä¸æ˜¯ nullã€‚&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;ç›®æ ‡å¯¹è±¡æ˜¯ä¸å¯æ‰©å±•çš„ï¼Œä¸” getPrototypeOf() æ–¹æ³•è¿”å›çš„åŸå‹ä¸æ˜¯&lt;strong&gt;ç›®æ ‡å¯¹è±¡æœ¬èº«çš„åŸå‹&lt;/strong&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åŸºæœ¬ç”¨æ³•ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â objÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{};&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â protoÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{};&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â handlerÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;getPrototypeOf&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;target&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;targetÂ &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â obj&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â true&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â handler&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â true&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â proto&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;};&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;var&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â pÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Proxy&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;obj&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â handler&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â objæ˜¯è¢«ä»£ç†çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯handler.getPrototypeOfçš„targetå‚æ•°&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;getPrototypeOf&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â proto&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â true&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;br/&gt;5 ç§è§¦å‘ getPrototypeOf ä»£ç†æ–¹æ³•çš„æ–¹å¼ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â objÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{};&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â pÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Proxy&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;obj&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;getPrototypeOf&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;target&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Array&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;prototype&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;});&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;getPrototypeOf&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Array&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;prototype&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â true&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Reflect&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;getPrototypeOf&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Array&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;prototype&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â true&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â p&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;__proto__&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Array&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;prototype&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â true&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Array&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;prototype&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;isPrototypeOf&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;),&lt;/span&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â true&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â pÂ &lt;/span&gt;&lt;span&gt;&lt;span&gt;instanceof&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Array&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â true&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;br/&gt;ä¸¤ç§å¼‚å¸¸çš„æƒ…å†µï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;//Â getPrototypeOf()Â æ–¹æ³•è¿”å›çš„ä¸æ˜¯å¯¹è±¡ä¹Ÿä¸æ˜¯Â null&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â objÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{};&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â pÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Proxy&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;obj&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;getPrototypeOf&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;target&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;foo&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;});&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;getPrototypeOf&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â TypeError:Â &quot;foo&quot;Â isÂ notÂ anÂ objectÂ orÂ null&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;//Â ç›®æ ‡å¯¹è±¡æ˜¯ä¸å¯æ‰©å±•çš„ï¼Œä¸”Â getPrototypeOf()Â æ–¹æ³•è¿”å›çš„åŸå‹ä¸æ˜¯ç›®æ ‡å¯¹è±¡æœ¬èº«çš„åŸå‹&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â objÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;preventExtensions&lt;/span&gt;&lt;/span&gt;&lt;span&gt;({});&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â objä¸å¯æ‰©å±•&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â pÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Proxy&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;obj&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;getPrototypeOf&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;target&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{};&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;});&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;getPrototypeOf&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â TypeError:Â expectedÂ sameÂ prototypeÂ value&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;//Â å¦‚æœå¯¹ä¸Šé¢çš„ä»£ç åšå¦‚ä¸‹çš„æ”¹é€ å°±æ²¡é—®é¢˜&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â objÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;preventExtensions&lt;/span&gt;&lt;/span&gt;&lt;span&gt;({});&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â objä¸å¯æ‰©å±•&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â pÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Proxy&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;obj&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;getPrototypeOf&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;target&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â targetå°±æ˜¯ä¸Šé¢çš„obj&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â obj&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;__proto__&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â è¿”å›çš„æ˜¯ç›®æ ‡å¯¹è±¡æœ¬èº«çš„åŸå‹&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;});&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;getPrototypeOf&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â ä¸æŠ¥é”™&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2&gt;ä¸€ã€è·Ÿæµè§ˆå™¨å®¿ä¸»ç¯å¢ƒä¸€è‡´çš„æ²™ç®±å®ç°&lt;/h2&gt;&lt;h3&gt;æ„å»ºé—­åŒ…ç¯å¢ƒ&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬çŸ¥é“åœ¨ JavaScript ä¸­çš„ä½œç”¨åŸŸï¼ˆscopeï¼‰åªæœ‰&lt;strong&gt;å…¨å±€ä½œç”¨åŸŸ&lt;/strong&gt;ï¼ˆglobal scopeï¼‰ã€&lt;strong&gt;å‡½æ•°ä½œç”¨åŸŸ&lt;/strong&gt;ï¼ˆfunction scopeï¼‰ä»¥åŠä» ES6 å¼€å§‹æ‰æœ‰çš„&lt;strong&gt;å—çº§ä½œç”¨åŸŸ&lt;/strong&gt;ï¼ˆblock scopeï¼‰ã€‚å¦‚æœè¦å°†ä¸€æ®µä»£ç ä¸­çš„å˜é‡ã€å‡½æ•°ç­‰çš„å®šä¹‰éš”ç¦»å‡ºæ¥ï¼Œå—é™äº JavaScript å¯¹ä½œç”¨åŸŸçš„æ§åˆ¶ï¼Œåªèƒ½å°†è¿™æ®µä»£ç å°è£…åˆ°ä¸€ä¸ª Function ä¸­ï¼Œé€šè¿‡ä½¿ç”¨ function scope æ¥è¾¾åˆ°ä½œç”¨åŸŸéš”ç¦»çš„ç›®çš„ã€‚ä¹Ÿå› ä¸ºéœ€è¦è¿™ç§ä½¿ç”¨å‡½æ•°æ¥è¾¾åˆ°ä½œç”¨åŸŸéš”ç¦»çš„ç›®çš„æ–¹å¼ï¼Œäºæ˜¯å°±æœ‰ IIFEï¼ˆç«‹å³è°ƒç”¨å‡½æ•°è¡¨è¾¾å¼ï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªè¢«ç§°ä¸ºâ€œè‡ªæ‰§è¡ŒåŒ¿åå‡½æ•°â€çš„è®¾è®¡æ¨¡å¼ã€‚&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;foo&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span/&gt;&lt;span&gt;){&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â aÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;})();&lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â æ— æ³•ä»å¤–éƒ¨è®¿é—®å˜é‡Â &lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â æŠ›å‡ºé”™è¯¯ï¼š&quot;Uncaught ReferenceError: a is not defined&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“å‡½æ•°å˜æˆç«‹å³æ‰§è¡Œçš„å‡½æ•°è¡¨è¾¾å¼æ—¶ï¼Œè¡¨è¾¾å¼ä¸­çš„å˜é‡ä¸èƒ½ä»å¤–éƒ¨è®¿é—®ï¼Œå®ƒæ‹¥æœ‰ç‹¬ç«‹çš„è¯æ³•ä½œç”¨åŸŸã€‚ä¸ä»…é¿å…äº†å¤–ç•Œè®¿é—® IIFE ä¸­çš„å˜é‡ï¼Œè€Œä¸”åˆä¸ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸï¼Œå¼¥è¡¥äº† JavaScript åœ¨ scope æ–¹é¢çš„ç¼ºé™·ã€‚ä¸€èˆ¬å¸¸è§äºå†™æ’ä»¶å’Œç±»åº“æ—¶ï¼Œå¦‚ JQuery å½“ä¸­çš„æ²™ç®±æ¨¡å¼&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;var&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â jQueryÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â context&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â jQuery&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;fn&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;init&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;selector&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â context&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â jQuery&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;fn&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â jQuery&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;prototype&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span/&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//åŸå‹ä¸Šçš„æ–¹æ³•ï¼Œå³æ‰€æœ‰jQueryå¯¹è±¡éƒ½å¯ä»¥å…±äº«çš„æ–¹æ³•å’Œå±æ€§&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â jQuery&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;fn&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;init&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;prototype&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â jQuery&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;fn&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;jQeury&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;$&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â jQuery&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//å¦‚æœéœ€è¦åœ¨å¤–ç•Œæš´éœ²ä¸€äº›å±æ€§æˆ–è€…æ–¹æ³•ï¼Œå¯ä»¥å°†è¿™äº›å±æ€§å’Œæ–¹æ³•åŠ åˆ°windowå…¨å±€å¯¹è±¡ä¸Šå»&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;})(&lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å½“å°† IIFE åˆ†é…ç»™ä¸€ä¸ªå˜é‡ï¼Œä¸æ˜¯å­˜å‚¨ IIFE æœ¬èº«ï¼Œè€Œæ˜¯å­˜å‚¨ IIFE æ‰§è¡Œåè¿”å›çš„ç»“æœã€‚&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â resultÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span/&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â nameÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;å¼ ä¸‰&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â name&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;})();&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;result&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â &quot;å¼ ä¸‰&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3&gt;åŸç”Ÿæµè§ˆå™¨å¯¹è±¡çš„æ¨¡æ‹Ÿ&lt;/h3&gt;&lt;p&gt;æ¨¡æ‹ŸåŸç”Ÿæµè§ˆå™¨å¯¹è±¡çš„ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢é—­åŒ…ç¯å¢ƒï¼Œæ“ä½œåŸç”Ÿå¯¹è±¡ï¼Œç¯¡æ”¹æ±¡æŸ“åŸç”Ÿç¯å¢ƒï¼Œå®Œæˆæ¨¡æ‹Ÿæµè§ˆå™¨å¯¹è±¡ä¹‹å‰æˆ‘ä»¬éœ€è¦å…ˆå…³æ³¨å‡ ä¸ªä¸å¸¸ç”¨çš„ APIã€‚&lt;/p&gt;&lt;h4&gt;eval&lt;/h4&gt;&lt;p&gt;eval å‡½æ•°å¯å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºä»£ç æ‰§è¡Œï¼Œå¹¶è¿”å›ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â bÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;eval&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;({name:&#x27;å¼ ä¸‰&#x27;})&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç”±äº eval æ‰§è¡Œçš„ä»£ç å¯ä»¥è®¿é—®é—­åŒ…å’Œå…¨å±€èŒƒå›´ï¼Œå› æ­¤å°±å¯¼è‡´äº†ä»£ç æ³¨å…¥çš„å®‰å…¨é—®é¢˜ï¼Œå› ä¸ºä»£ç å†…éƒ¨å¯ä»¥æ²¿ç€ä½œç”¨åŸŸé“¾å¾€ä¸Šæ‰¾ï¼Œç¯¡æ”¹å…¨å±€å˜é‡ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸å¸Œæœ›çš„ã€‚&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;eval&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;));&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â trueÂ &lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¡¥å……å‡ ä¸ªç‚¹ï¼š&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;æ€§èƒ½&amp;amp;å®‰å…¨é—®é¢˜ï¼Œä¸€èˆ¬ä¸å»ºè®®åœ¨å®é™…ä¸šåŠ¡ä»£ç ä¸­å¼•å…¥eval&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;è¾…åŠ©å¼‚æ­¥ç¼–ç¨‹æ¡†æ¶çš„windjså¤§é‡é‡‡ç”¨evalçš„å†™æ³•æ¥è¾…åŠ©ç¼–ç¨‹ï¼Œå¼•å‘äº‰è®®Â &lt;span&gt;ä¸“è®¿ Wind.js ä½œè€…è€èµµï¼ˆä¸Šï¼‰ï¼šç¼˜ç”±ã€æ€è·¯åŠå‘å±•&lt;sup&gt;[11]&lt;/sup&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;æµè§ˆå™¨ç¯å¢ƒä¸‹ï¼Œ(0, eval)()æ¯”eval()çš„æ€§èƒ½è¦å¥½ã€Œç›®å‰å·²ç»ä¸æ˜¯äº†ã€&lt;span&gt;(0, eval)(â€˜thisâ€™)&lt;sup&gt;[12]&lt;/sup&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â timesÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;1000&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â time1Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;ç›´æ¥å¼•ç”¨&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â time2Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;é—´æ¥å¼•ç”¨&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;let&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â times1Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â times&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;time&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;time1&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;while&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;times1&lt;/span&gt;&lt;span&gt;--)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;eval&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;`&lt;/span&gt;&lt;span&gt;199&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;200&lt;/span&gt;&lt;span&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;timeEnd&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;time1&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;let&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â times2Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â times&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;time&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;time2&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;while&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;times2&lt;/span&gt;&lt;span&gt;--)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;eval&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)(&lt;/span&gt;&lt;span&gt;&lt;span&gt;`&lt;/span&gt;&lt;span&gt;199&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;200&lt;/span&gt;&lt;span&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;timeEnd&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;time2&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4&gt;new Function&lt;/h4&gt;&lt;p&gt;Functionæ„é€ å‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„ Function å¯¹è±¡ã€‚ç›´æ¥è°ƒç”¨è¿™ä¸ªæ„é€ å‡½æ•°å¯ç”¨äºåŠ¨æ€åˆ›å»ºå‡½æ•°ã€‚&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;([&lt;/span&gt;&lt;span&gt;arg1&lt;/span&gt;&lt;span&gt;[,&lt;/span&gt;&lt;span&gt;Â arg2&lt;/span&gt;&lt;span&gt;[,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;...&lt;/span&gt;&lt;span&gt;argN&lt;/span&gt;&lt;span&gt;]],]&lt;/span&gt;&lt;span&gt;Â functionBody&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;arg1, arg2, ... argN&lt;/strong&gt;Â è¢«å‡½æ•°ä½¿ç”¨çš„å‚æ•°çš„åç§°å¿…é¡»æ˜¯åˆæ³•å‘½åçš„ã€‚å‚æ•°åç§°æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„ JavaScript æ ‡è¯†ç¬¦çš„å­—ç¬¦ä¸²ï¼Œæˆ–è€…ä¸€ä¸ªç”¨é€—å·åˆ†éš”çš„æœ‰æ•ˆå­—ç¬¦ä¸²çš„åˆ—è¡¨ï¼Œä¾‹å¦‚â€œÃ—â€ï¼Œâ€œtheValueâ€ï¼Œæˆ–â€œa,bâ€ã€‚&lt;/p&gt;&lt;p&gt;è¡¥å……å‡ ä¸ªç‚¹ï¼š&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;new Function()æ€§èƒ½ä¸€èˆ¬æ¯”evalè¦å¥½ï¼Œå¾ˆå¤šç”¨åˆ°è¿™å—çš„å‰ç«¯æ¡†æ¶éƒ½æ˜¯ç”¨new Function()å®ç°çš„ï¼Œæ¯”å¦‚ï¼šVue.js&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°åï¼Œnew Function()çš„æ€§èƒ½è¦æ…¢ä¸€å€ä»¥ä¸Š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;functionBody&lt;/strong&gt;&lt;br/&gt;ä¸€ä¸ªå«æœ‰åŒ…æ‹¬å‡½æ•°å®šä¹‰çš„ JavaScript è¯­å¥çš„å­—ç¬¦ä¸²ã€‚&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â sumÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;a&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;b&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;returnÂ aÂ +Â b&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;sum&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/span&gt;&lt;span&gt;));&lt;/span&gt;&lt;span&gt;&lt;span&gt;//3Â &lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åŒæ ·ä¹Ÿä¼šé‡åˆ°å’Œ eval ç±»ä¼¼çš„çš„å®‰å…¨é—®é¢˜å’Œç›¸å¯¹è¾ƒå°çš„æ€§èƒ½é—®é¢˜ã€‚&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;let&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â aÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span/&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;let&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â aÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;returnÂ a;&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â è¿™é‡Œçš„Â aÂ æŒ‡å‘æœ€ä¸Šé¢å…¨å±€ä½œç”¨åŸŸå†…çš„Â 1&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â fÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;f&lt;/span&gt;&lt;/span&gt;&lt;span&gt;());&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸ eval ä¸åŒçš„æ˜¯ Function åˆ›å»ºçš„å‡½æ•°åªèƒ½åœ¨å…¨å±€ä½œç”¨åŸŸä¸­è¿è¡Œï¼Œå®ƒæ— æ³•è®¿é—®å±€éƒ¨é—­åŒ…å˜é‡ï¼Œå®ƒä»¬æ€»æ˜¯è¢«åˆ›å»ºäºå…¨å±€ç¯å¢ƒï¼Œå› æ­¤åœ¨è¿è¡Œæ—¶å®ƒä»¬åªèƒ½è®¿é—®å…¨å±€å˜é‡å’Œè‡ªå·±çš„å±€éƒ¨å˜é‡ï¼Œä¸èƒ½è®¿é—®å®ƒä»¬è¢« Function æ„é€ å™¨åˆ›å»ºæ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸçš„å˜é‡ã€‚new Function()æ˜¯ eval()æ›´å¥½æ›¿ä»£æ–¹æ¡ˆã€‚å®ƒå…·æœ‰å“è¶Šçš„æ€§èƒ½å’Œå®‰å…¨æ€§ï¼Œä½†ä»æ²¡æœ‰è§£å†³è®¿é—®å…¨å±€çš„é—®é¢˜ã€‚&lt;br/&gt;&lt;/p&gt;&lt;h4&gt;with&lt;/h4&gt;&lt;p&gt;with æ˜¯ JavaScript ä¸­ä¸€ä¸ªå…³é”®å­—ï¼Œæ‰©å±•ä¸€ä¸ªè¯­å¥çš„ä½œç”¨åŸŸé“¾ã€‚å®ƒå…è®¸åŠæ²™ç›’æ‰§è¡Œã€‚é‚£ä»€ä¹ˆå«åŠæ²™ç›’ï¼Ÿè¯­å¥å°†æŸä¸ªå¯¹è±¡æ·»åŠ åˆ°ä½œç”¨åŸŸé“¾çš„é¡¶éƒ¨ï¼Œå¦‚æœåœ¨æ²™ç›’ä¸­æœ‰æŸä¸ªæœªä½¿ç”¨å‘½åç©ºé—´çš„å˜é‡ï¼Œè·Ÿä½œç”¨åŸŸé“¾ä¸­çš„æŸä¸ªå±æ€§åŒåï¼Œåˆ™è¿™ä¸ªå˜é‡å°†æŒ‡å‘è¿™ä¸ªå±æ€§å€¼ã€‚å¦‚æœæ²’æœ‰åŒåçš„å±æ€§ï¼Œåˆ™å°†æ‹‹å‡º ReferenceErrorã€‚&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;//Â ä¸¥æ ¼æ¨¡å¼ä¸‹ä»¥ä¸‹ä»£ç è¿è¡Œä¼šæœ‰é—®é¢˜&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;o&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;with&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;o&lt;/span&gt;&lt;span&gt;){&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//a=5;Â &lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â c&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â d&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&lt;span&gt;3&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;c&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;d&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â 0,1,2,3 //æ¯ä¸ªå˜é‡é¦–å…ˆè¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œå¦‚æœå±€éƒ¨å˜é‡ä¸ obj å¯¹è±¡çš„æŸä¸ªå±æ€§åŒåï¼Œåˆ™è¿™ä¸ªå±€éƒ¨å˜é‡ä¼šæŒ‡å‘ obj å¯¹è±¡å±æ€§ã€‚&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â fÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;a&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;b&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;f&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;f&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;c&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;d&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â 2,3Â cã€dè¢«æ³„éœ²åˆ°windowå¯¹è±¡ä¸Š&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç©¶å…¶åŸç†ï¼Œwithåœ¨å†…éƒ¨ä½¿ç”¨inè¿ç®—ç¬¦ã€‚å¯¹äºå—å†…çš„æ¯ä¸ªå˜é‡è®¿é—®ï¼Œå®ƒéƒ½åœ¨æ²™ç›’æ¡ä»¶ä¸‹è®¡ç®—å˜é‡ã€‚å¦‚æœæ¡ä»¶æ˜¯ trueï¼Œå®ƒå°†ä»æ²™ç›’ä¸­æ£€ç´¢å˜é‡ã€‚å¦åˆ™ï¼Œå°±åœ¨å…¨å±€èŒƒå›´å†…æŸ¥æ‰¾å˜é‡ã€‚ä½†æ˜¯ with è¯­å¥ä½¿ç¨‹åºåœ¨æŸ¥æ‰¾å˜é‡å€¼æ—¶ï¼Œéƒ½æ˜¯å…ˆåœ¨æŒ‡å®šçš„å¯¹è±¡ä¸­æŸ¥æ‰¾ã€‚æ‰€ä»¥å¯¹äºé‚£äº›æœ¬æ¥ä¸æ˜¯è¿™ä¸ªå¯¹è±¡çš„å±æ€§çš„å˜é‡ï¼ŒæŸ¥æ‰¾èµ·æ¥ä¼šå¾ˆæ…¢ï¼Œå¯¹äºæœ‰æ€§èƒ½è¦æ±‚çš„ç¨‹åºä¸é€‚åˆï¼ˆJavaScript å¼•æ“ä¼šåœ¨ç¼–è¯‘é˜¶æ®µè¿›è¡Œæ•°é¡¹çš„æ€§èƒ½ä¼˜åŒ–ã€‚å…¶ä¸­æœ‰äº›ä¼˜åŒ–ä¾èµ–äºèƒ½å¤Ÿæ ¹æ®ä»£ç çš„è¯æ³•è¿›è¡Œé™æ€åˆ†æï¼Œå¹¶é¢„å…ˆç¡®å®šæ‰€æœ‰å˜é‡å’Œå‡½æ•°çš„å®šä¹‰ä½ç½®ï¼Œæ‰èƒ½åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¿«é€Ÿæ‰¾åˆ°æ ‡è¯†ç¬¦ï¼‰ã€‚with ä¹Ÿä¼šå¯¼è‡´æ•°æ®æ³„æ¼(åœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œä¼šè‡ªåŠ¨åœ¨å…¨å±€ä½œç”¨åŸŸåˆ›å»ºä¸€ä¸ªå…¨å±€å˜é‡)&lt;/p&gt;&lt;h4&gt;in è¿ç®—ç¬¦&lt;/h4&gt;&lt;p&gt;in è¿ç®—ç¬¦èƒ½å¤Ÿæ£€æµ‹å·¦ä¾§æ“ä½œæ•°æ˜¯å¦ä¸ºå³ä¾§æ“ä½œæ•°çš„æˆå‘˜ã€‚å…¶ä¸­ï¼Œå·¦ä¾§æ“ä½œæ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæˆ–è€…å¯ä»¥è½¬æ¢ä¸ºå­—ç¬¦ä¸²çš„è¡¨è¾¾å¼ï¼Œå³ä¾§æ“ä½œæ•°æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–æ•°ç»„ã€‚&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â oÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â aÂ &lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â bÂ &lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span/&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;};&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;a&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;in&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â o&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//true&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;b&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;in&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â o&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//true&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;c&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;in&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â o&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//false&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;valueOf&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;in&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â o&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//è¿”å›trueï¼Œç»§æ‰¿Objectçš„åŸå‹æ–¹æ³•&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;constructor&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;in&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â o&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//è¿”å›trueï¼Œç»§æ‰¿Objectçš„åŸå‹å±æ€§&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4&gt;with + new Function&lt;/h4&gt;&lt;p&gt;é…åˆ with ç”¨æ³•å¯ä»¥ç¨å¾®é™åˆ¶æ²™ç›’ä½œç”¨åŸŸï¼Œå…ˆä»å½“å‰çš„ with æä¾›å¯¹è±¡æŸ¥æ‰¾ï¼Œä½†æ˜¯å¦‚æœæŸ¥æ‰¾ä¸åˆ°ä¾ç„¶è¿˜èƒ½ä»æ›´ä¸Šé¢çš„ä½œç”¨åŸŸè·å–ï¼Œæ±¡æŸ“æˆ–ç¯¡æ”¹å…¨å±€ç¯å¢ƒã€‚&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â srcÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;withÂ (sandbox)Â {&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;Â srcÂ &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;}&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;sandbox&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â src&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â strÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;`&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â letÂ aÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â window&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;å¼ ä¸‰&quot;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â console&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;//Â æ‰“å°ï¼š1&lt;/span&gt;&lt;br/&gt;&lt;span&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;str&lt;/span&gt;&lt;span&gt;)({});&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;&lt;span&gt;//&#x27;å¼ ä¸‰&#x27;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°ï¼ŒåŸºäºä¸Šé¢çš„æ–¹æ¡ˆéƒ½å¤šå¤šå°‘å°‘å­˜åœ¨ä¸€äº›å®‰å…¨é—®é¢˜ï¼š&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;eval æ˜¯å…¨å±€å¯¹è±¡çš„ä¸€ä¸ªå‡½æ•°å±æ€§ï¼Œæ‰§è¡Œçš„ä»£ç æ‹¥æœ‰ç€å’Œåº”ç”¨ä¸­å…¶å®ƒæ­£å¸¸ä»£ç ä¸€æ ·çš„çš„æƒé™ï¼Œå®ƒèƒ½è®¿é—®ã€Œæ‰§è¡Œä¸Šä¸‹æ–‡ã€ä¸­çš„å±€éƒ¨å˜é‡ï¼Œä¹Ÿèƒ½è®¿é—®æ‰€æœ‰ã€Œå…¨å±€å˜é‡ã€ï¼Œåœ¨è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªéå¸¸å±é™©çš„å‡½æ•°&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;ä½¿ç”¨ Function æ„é€ å™¨ç”Ÿæˆçš„å‡½æ•°ï¼Œå¹¶ä¸ä¼šåœ¨åˆ›å»ºå®ƒçš„ä¸Šä¸‹æ–‡ä¸­åˆ›å»ºé—­åŒ…ï¼Œä¸€èˆ¬åœ¨å…¨å±€ä½œç”¨åŸŸä¸­è¢«åˆ›å»ºã€‚å½“è¿è¡Œå‡½æ•°çš„æ—¶å€™ï¼Œåªèƒ½è®¿é—®è‡ªå·±çš„æœ¬åœ°å˜é‡å’Œå…¨å±€å˜é‡ï¼Œä¸èƒ½è®¿é—® Function æ„é€ å™¨è¢«è°ƒç”¨ç”Ÿæˆçš„ä¸Šä¸‹æ–‡çš„ä½œç”¨åŸŸ&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;with ä¸€æ ·çš„é—®é¢˜ï¼Œå®ƒé¦–å…ˆä¼šåœ¨ä¼ å…¥çš„å¯¹è±¡ä¸­æŸ¥æ‰¾å¯¹åº”çš„å˜é‡ï¼Œå¦‚æœæ‰¾ä¸åˆ°å°±ä¼šå¾€æ›´ä¸Šå±‚çš„å…¨å±€ä½œç”¨åŸŸå»æŸ¥æ‰¾ï¼Œæ‰€ä»¥ä¹Ÿé¿å…ä¸äº†æ±¡æŸ“æˆ–ç¯¡æ”¹å…¨å±€ç¯å¢ƒ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;é‚£æœ‰æ²¡æœ‰æ›´å®‰å…¨ä¸€äº›çš„æ²™ç®±ç¯å¢ƒå®ç°å‘¢ï¼Ÿ&lt;/p&gt;&lt;h4&gt;åŸºäº Proxy å®ç°çš„æ²™ç®±(ProxySandbox)&lt;/h4&gt;&lt;p&gt;ES6 Proxy ç”¨äºä¿®æ”¹æŸäº›æ“ä½œçš„é»˜è®¤è¡Œä¸ºï¼Œç­‰åŒäºåœ¨è¯­è¨€å±‚é¢åšå‡ºä¿®æ”¹ï¼Œå±äºä¸€ç§â€œå…ƒç¼–ç¨‹â€ï¼ˆmeta programmingï¼‰&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;evalute&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;code&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â sandboxÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â sandboxÂ &lt;/span&gt;&lt;span&gt;||&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;create&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;null&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â fnÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;sandbox&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;`&lt;/span&gt;&lt;span&gt;with&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;span&gt;){&lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;code&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)}`&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â proxyÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Proxy&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;has&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;target&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â key&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â è®©åŠ¨æ€æ‰§è¡Œçš„ä»£ç è®¤ä¸ºå±æ€§å·²å­˜åœ¨&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;fn&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;proxy&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;evalute&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;1+2&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â 3&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;evalute&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;console.log(1)&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â CannotÂ readÂ propertyÂ &#x27;log&#x27;Â ofÂ undefined&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬çŸ¥é“æ— è®º eval è¿˜æ˜¯ functionï¼Œæ‰§è¡Œæ—¶éƒ½ä¼šæŠŠä½œç”¨åŸŸä¸€å±‚ä¸€å±‚å‘ä¸ŠæŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°ä¼šä¸€ç›´åˆ° globalï¼Œé‚£ä¹ˆåˆ©ç”¨ Proxy çš„åŸç†å°±æ˜¯ï¼Œè®©æ‰§è¡Œäº†ä»£ç åœ¨ sandobx ä¸­æ‰¾çš„åˆ°ï¼Œä»¥è¾¾åˆ°ã€Œé˜²é€ƒé€¸ã€çš„ç›®çš„ã€‚&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬å‰é¢æåˆ°withåœ¨å†…éƒ¨ä½¿ç”¨inè¿ç®—ç¬¦æ¥è®¡ç®—å˜é‡ï¼Œå¦‚æœæ¡ä»¶æ˜¯ trueï¼Œå®ƒå°†ä»æ²™ç›’ä¸­æ£€ç´¢å˜é‡ã€‚ç†æƒ³çŠ¶æ€ä¸‹æ²¡æœ‰é—®é¢˜ï¼Œä½†ä¹Ÿæ€»æœ‰äº›ç‰¹ä¾‹ç‹¬è¡Œçš„å­˜åœ¨ï¼Œæ¯”å¦‚ Symbol.unscopablesã€‚&lt;/p&gt;&lt;p&gt;Symbol å¯¹è±¡çš„ Symbol.unscopables å±æ€§ï¼ŒæŒ‡å‘ä¸€ä¸ªå¯¹è±¡ã€‚è¯¥å¯¹è±¡æŒ‡å®šäº†ä½¿ç”¨ with å…³é”®å­—æ—¶ï¼Œå“ªäº›å±æ€§ä¼šè¢« with ç¯å¢ƒæ’é™¤ã€‚&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;Array&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;prototype&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;&lt;span&gt;Symbol&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;unscopables&lt;/span&gt;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;//Â {//Â Â Â copyWithin:Â true,//Â Â Â entries:Â true,//Â Â Â fill:Â true,//Â Â Â find:Â true,//Â Â Â findIndex:Â true,//Â Â Â keys:Â true//Â }Object.keys(Array.prototype[Symbol.unscopables])&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;//Â [&#x27;copyWithin&#x27;,Â &#x27;entries&#x27;,Â &#x27;fill&#x27;,Â &#x27;find&#x27;,Â &#x27;findIndex&#x27;,Â &#x27;keys&#x27;]&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;ä¸Šé¢ä»£ç è¯´æ˜ï¼Œæ•°ç»„æœ‰ 6 ä¸ªå±æ€§ï¼Œä¼šè¢« with å‘½ä»¤æ’é™¤ã€‚&lt;/span&gt;&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3087431693989071&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qnAibK5Aia2dXqibZdYwAr4IgHiasg0EGUj32R1GPibdPiaGvzydMRAOpp1zGkWzeiaoXnAqpOSvsGFriaiaIctsyUibrEWA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;732&quot; title=&quot;null&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;br/&gt;&lt;span&gt;ç”±æ­¤æˆ‘ä»¬çš„ä»£ç è¿˜éœ€è¦ä¿®æ”¹å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;code&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â codeÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;withÂ (sandbox)Â {&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;Â codeÂ &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;}&#x27;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â fnÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;sandbox&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â code&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â sandboxProxyÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Proxy&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;has&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;target&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â key&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;},&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;get&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;target&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â key&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;keyÂ &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Symbol&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;unscopables&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;undefined&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â target&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;})&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;fn&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;sandboxProxy&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â testÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;a&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span/&gt;&lt;span&gt;){&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;11111&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â codeÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;log();Â console.log(a)&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â 1111,TypeError:Â CannotÂ readÂ propertyÂ &#x27;log&#x27;Â ofÂ undefinedsandbox(code)(test)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Symbol.unscopables å®šä¹‰å¯¹è±¡çš„ä¸å¯ä½œç”¨å±æ€§ã€‚Unscopeable å±æ€§æ°¸è¿œä¸ä¼šä» with è¯­å¥ä¸­çš„æ²™ç®±å¯¹è±¡ä¸­æ£€ç´¢ï¼Œè€Œæ˜¯ç›´æ¥ä»é—­åŒ…æˆ–å…¨å±€èŒƒå›´ä¸­æ£€ç´¢ã€‚&lt;br/&gt;&lt;/p&gt;&lt;h4&gt;å¿«ç…§æ²™ç®±(SnapshotSandbox)&lt;/h4&gt;&lt;p&gt;å¿«ç…§æ²™ç®±å®ç°æ¥è¯´æ¯”è¾ƒç®€å•ï¼Œä¸»è¦ç”¨äºä¸æ”¯æŒ Proxy çš„ä½ç‰ˆæœ¬æµè§ˆå™¨ï¼ŒåŸç†æ˜¯åŸºäºdiffæ¥å®ç°çš„,åœ¨å­åº”ç”¨æ¿€æ´»æˆ–è€…å¸è½½æ—¶åˆ†åˆ«å»é€šè¿‡å¿«ç…§çš„å½¢å¼è®°å½•æˆ–è¿˜åŸçŠ¶æ€æ¥å®ç°æ²™ç®±ï¼ŒsnapshotSandbox ä¼šæ±¡æŸ“å…¨å±€ windowã€‚&lt;br/&gt;æˆ‘ä»¬çœ‹ä¸‹Â &lt;span&gt;qiankun&lt;sup&gt;[13]&lt;/sup&gt;&lt;/span&gt;Â çš„ snapshotSandbox çš„æºç ï¼Œè¿™é‡Œä¸ºäº†å¸®åŠ©ç†è§£åšéƒ¨åˆ†ç²¾ç®€åŠæ³¨é‡Šã€‚&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;iter&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;obj&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â callbackFn&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;for&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â propÂ &lt;/span&gt;&lt;span&gt;&lt;span&gt;in&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â obj&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;obj&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;hasOwnProperty&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;prop&lt;/span&gt;&lt;span&gt;))&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;callbackFn&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;prop&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â *Â åŸºäºÂ diffÂ æ–¹å¼å®ç°çš„æ²™ç®±ï¼Œç”¨äºä¸æ”¯æŒÂ ProxyÂ çš„ä½ç‰ˆæœ¬æµè§ˆå™¨&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â */&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;class&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;SnapshotSandbox&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;constructor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â name&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;proxy&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;type&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;Snapshot&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;sandboxRunning&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;windowSnapshot&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{};&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;modifyPropsMap&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{};&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;active&lt;/span&gt;&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//æ¿€æ´»&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;active&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span/&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â è®°å½•å½“å‰å¿«ç…§&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;windowSnapshot&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{};&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;iter&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;prop&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;windowSnapshot&lt;/span&gt;&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;prop&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;prop&lt;/span&gt;&lt;span&gt;];&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â æ¢å¤ä¹‹å‰çš„å˜æ›´&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;keys&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;modifyPropsMap&lt;/span&gt;&lt;/span&gt;&lt;span&gt;).&lt;/span&gt;&lt;span&gt;&lt;span&gt;forEach&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;p&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;modifyPropsMap&lt;/span&gt;&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;];&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;sandboxRunning&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//è¿˜åŸ&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;inactive&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span/&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;modifyPropsMap&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{};&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;iter&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;prop&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;prop&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;!==&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;windowSnapshot&lt;/span&gt;&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;prop&lt;/span&gt;&lt;span&gt;])&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â è®°å½•å˜æ›´ï¼Œæ¢å¤ç¯å¢ƒ&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;modifyPropsMap&lt;/span&gt;&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;prop&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;prop&lt;/span&gt;&lt;span&gt;];&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;prop&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;windowSnapshot&lt;/span&gt;&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;prop&lt;/span&gt;&lt;span&gt;];&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;sandboxRunning&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;false&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;let&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â sandboxÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;SnapshotSandbox&lt;/span&gt;&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;//test&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;å¼ ä¸‰&#x27;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;age&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;18&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;age&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â Â Â Â å¼ ä¸‰,18&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â sandbox&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;inactive&lt;/span&gt;&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â Â Â Â è¿˜åŸ&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;age&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â Â Â Â undefined,undefined&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â sandbox&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;active&lt;/span&gt;&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â Â Â Â æ¿€æ´»&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;age&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â Â Â Â å¼ ä¸‰,18&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;})(&lt;/span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;proxy&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4&gt;legacySandBox&lt;/h4&gt;&lt;p&gt;qiankun æ¡†æ¶ singular æ¨¡å¼ä¸‹çš„ proxy æ²™ç®±å®ç°ï¼Œä¸ºäº†ä¾¿äºç†è§£ï¼Œè¿™é‡Œåšäº†éƒ¨åˆ†ä»£ç çš„ç²¾ç®€å’Œæ³¨é‡Šã€‚&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;//legacySandBox&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â callableFnCacheMapÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;WeakMap&lt;/span&gt;&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;isCallable&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;fn&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;callableFnCacheMap&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;has&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt;&lt;span&gt;))&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â naughtySafariÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;typeof&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;document&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;all&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;function&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;typeof&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;document&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;all&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;undefined&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â callableÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â naughtySafariÂ &lt;/span&gt;&lt;span&gt;?&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;typeof&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â fnÂ &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;function&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;typeof&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â fnÂ &lt;/span&gt;&lt;span&gt;!==&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;undefined&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;typeof&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â fnÂ &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;function&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;callable&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â callableFnCacheMap&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;set&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â callable&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â callable&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;};&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;isPropConfigurable&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;target&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â prop&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â descriptorÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;getOwnPropertyDescriptor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;target&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â prop&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â descriptorÂ &lt;/span&gt;&lt;span&gt;?&lt;/span&gt;&lt;span&gt;Â descriptor&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;configurable&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;setWindowProp&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;prop&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â value&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â toDelete&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;valueÂ &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;undefined&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span&gt;Â toDelete&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;delete&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;prop&lt;/span&gt;&lt;span&gt;];&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;else&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;isPropConfigurable&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â prop&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;typeof&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â propÂ &lt;/span&gt;&lt;span&gt;!==&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;symbol&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;defineProperty&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â prop&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;writable&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;configurable&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;prop&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â value&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;getTargetValue&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;target&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â value&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â ä»…ç»‘å®š isCallable &amp;amp;&amp;amp; !isBoundedFunction &amp;amp;&amp;amp; !isConstructable çš„å‡½æ•°å¯¹è±¡ï¼Œå¦‚ window.consoleã€window.atob è¿™ç±»ã€‚ç›®å‰æ²¡æœ‰å®Œç¾çš„æ£€æµ‹æ–¹å¼ï¼Œè¿™é‡Œé€šè¿‡ prototype ä¸­æ˜¯å¦è¿˜æœ‰å¯æšä¸¾çš„æ‹“å±•æ–¹æ³•çš„æ–¹å¼æ¥åˆ¤æ–­&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â @warningÂ è¿™é‡Œä¸è¦éšæ„æ›¿æ¢æˆåˆ«çš„åˆ¤æ–­æ–¹å¼ï¼Œå› ä¸ºå¯èƒ½è§¦å‘ä¸€äº›Â edgeÂ caseï¼ˆæ¯”å¦‚åœ¨Â lodash.isFunctionÂ åœ¨Â iframeÂ ä¸Šä¸‹æ–‡ä¸­å¯èƒ½ç”±äºè°ƒç”¨äº†Â topÂ windowÂ å¯¹è±¡è§¦å‘çš„å®‰å…¨å¼‚å¸¸ï¼‰&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â */&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;isCallable&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt;&lt;span&gt;isBoundedFunction&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt;&lt;span&gt;isConstructable&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;))&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â boundValueÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;prototype&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;bind&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;call&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â target&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;for&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â keyÂ &lt;/span&gt;&lt;span&gt;&lt;span&gt;in&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â value&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â boundValue&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â value&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;];&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;hasOwnProperty&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;prototype&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt;boundValue&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;hasOwnProperty&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;prototype&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;))&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;defineProperty&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;boundValue&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;prototype&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;value&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â value&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;prototype&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;enumerable&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;false&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;writable&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â boundValue&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â value&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â *Â åŸºäºÂ ProxyÂ å®ç°çš„æ²™ç®±&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â */&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;class&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;SingularProxySandbox&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;/**Â æ²™ç®±æœŸé—´æ–°å¢çš„å…¨å±€å˜é‡Â */&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â addedPropsMapInSandboxÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Map&lt;/span&gt;&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;/**Â æ²™ç®±æœŸé—´æ›´æ–°çš„å…¨å±€å˜é‡Â */&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â modifiedPropsOriginalValueMapInSandboxÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Map&lt;/span&gt;&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;/**Â æŒç»­è®°å½•æ›´æ–°çš„(æ–°å¢å’Œä¿®æ”¹çš„)å…¨å±€å˜é‡çš„Â mapï¼Œç”¨äºåœ¨ä»»æ„æ—¶åˆ»åšÂ snapshotÂ */&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â currentUpdatedPropsValueMapÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Map&lt;/span&gt;&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â name&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â proxy&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â typeÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;LegacyProxy&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â sandboxRunningÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â latestSetPropÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;null&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;active&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span/&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(!&lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;sandboxRunning&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;currentUpdatedPropsValueMap&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;forEach&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;v&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â p&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;setWindowProp&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â v&lt;/span&gt;&lt;span&gt;));&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;sandboxRunning&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;inactive&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span/&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â console.log(&#x27;Â this.modifiedPropsOriginalValueMapInSandbox&#x27;,Â this.modifiedPropsOriginalValueMapInSandbox)&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â console.log(&#x27;Â this.addedPropsMapInSandbox&#x27;,Â this.addedPropsMapInSandbox)&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//åˆ é™¤æ·»åŠ çš„å±æ€§ï¼Œä¿®æ”¹å·²æœ‰çš„å±æ€§&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;modifiedPropsOriginalValueMapInSandbox&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;forEach&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;v&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â p&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;setWindowProp&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â v&lt;/span&gt;&lt;span&gt;));&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;addedPropsMapInSandbox&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;forEach&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;_&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â p&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;setWindowProp&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;undefined&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/span&gt;&lt;span&gt;));&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;sandboxRunning&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;false&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;constructor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â name&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â addedPropsMapInSandbox&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â modifiedPropsOriginalValueMapInSandbox&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â currentUpdatedPropsValueMap&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â rawWindowÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Object.create(null)çš„æ–¹å¼ï¼Œä¼ å…¥ä¸€ä¸ªä¸å«æœ‰åŸå‹é“¾çš„å¯¹è±¡&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â fakeWindowÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;create&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;null&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â proxyÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Proxy&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;fakeWindow&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;set&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;_&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â p&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â value&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;sandboxRunning&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(!&lt;/span&gt;&lt;span&gt;rawWindow&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;hasOwnProperty&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;))&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â addedPropsMapInSandbox&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;set&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â value&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;else&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(!&lt;/span&gt;&lt;span&gt;modifiedPropsOriginalValueMapInSandbox&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;has&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;))&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â å¦‚æœå½“å‰Â windowÂ å¯¹è±¡å­˜åœ¨è¯¥å±æ€§ï¼Œä¸”Â recordÂ mapÂ ä¸­æœªè®°å½•è¿‡ï¼Œåˆ™è®°å½•è¯¥å±æ€§åˆå§‹å€¼&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â originalValueÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â rawWindow&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;];&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â modifiedPropsOriginalValueMapInSandbox&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;set&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â originalValue&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â currentUpdatedPropsValueMap&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;set&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â value&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â å¿…é¡»é‡æ–°è®¾ç½®Â windowÂ å¯¹è±¡ä¿è¯ä¸‹æ¬¡Â getÂ æ—¶èƒ½æ‹¿åˆ°å·²æ›´æ–°çš„æ•°æ®&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â rawWindow&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â value&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;latestSetProp&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â p&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â åœ¨Â strict-modeÂ ä¸‹ï¼ŒProxyÂ çš„Â handler.setÂ è¿”å›Â falseÂ ä¼šæŠ›å‡ºÂ TypeErrorï¼Œåœ¨æ²™ç®±å¸è½½çš„æƒ…å†µä¸‹åº”è¯¥å¿½ç•¥é”™è¯¯&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;},&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;get&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;_&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â p&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//é¿å…ä½¿ç”¨Â window.windowÂ æˆ–è€…Â window.selfÂ é€ƒç¦»æ²™ç®±ç¯å¢ƒï¼Œè§¦å‘åˆ°çœŸå®ç¯å¢ƒ&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;pÂ &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;top&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;||&lt;/span&gt;&lt;span&gt;Â pÂ &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;parent&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;||&lt;/span&gt;&lt;span&gt;Â pÂ &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;window&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;||&lt;/span&gt;&lt;span&gt;Â pÂ &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;self&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â proxy&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â valueÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â rawWindow&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;];&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;getTargetValue&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;rawWindow&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â value&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;},&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;has&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;_&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â p&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//è¿”å›boolean&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â pÂ &lt;/span&gt;&lt;span&gt;&lt;span&gt;in&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â rawWindow&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;},&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;getOwnPropertyDescriptor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;_&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â p&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â descriptorÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;getOwnPropertyDescriptor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;rawWindow&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â p&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â å¦‚æœå±æ€§ä¸ä½œä¸ºç›®æ ‡å¯¹è±¡çš„è‡ªèº«å±æ€§å­˜åœ¨ï¼Œåˆ™ä¸èƒ½å°†å…¶è®¾ç½®ä¸ºä¸å¯é…ç½®&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;descriptorÂ &lt;/span&gt;&lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt;descriptor&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;configurable&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â descriptor&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;configurable&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â descriptor&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;},&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;proxy&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â proxy&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;let&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â sandboxÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;SingularProxySandbox&lt;/span&gt;&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;å¼ ä¸‰&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;age&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;18&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;sex&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;ç”·&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;age&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;sex&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â Â Â Â å¼ ä¸‰,18,ç”·&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â sandbox&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;inactive&lt;/span&gt;&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â Â Â Â è¿˜åŸ&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;age&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;sex&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â Â Â Â å¼ ä¸‰,undefined,undefined&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â sandbox&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;active&lt;/span&gt;&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â Â Â Â æ¿€æ´»&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;name&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;age&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&lt;span&gt;window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;sex&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â Â Â Â å¼ ä¸‰,18,ç”·&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;})(&lt;/span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;proxy&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//test&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;legacySandBox è¿˜æ˜¯ä¼šæ“ä½œ window å¯¹è±¡ï¼Œä½†æ˜¯ä»–é€šè¿‡æ¿€æ´»æ²™ç®±æ—¶è¿˜åŸå­åº”ç”¨çš„çŠ¶æ€ï¼Œå¸è½½æ—¶è¿˜åŸä¸»åº”ç”¨çš„çŠ¶æ€æ¥å®ç°æ²™ç®±éš”ç¦»ï¼ŒåŒæ ·ä¼šå¯¹ window é€ æˆæ±¡æŸ“ï¼Œä½†æ˜¯æ€§èƒ½æ¯”å¿«ç…§æ²™ç®±å¥½ï¼Œä¸ç”¨éå† window å¯¹è±¡ã€‚&lt;/p&gt;&lt;h4&gt;proxySandbox(å¤šä¾‹æ²™ç®±)&lt;/h4&gt;&lt;p&gt;åœ¨ qiankun çš„æ²™ç®± proxySandbox æºç é‡Œé¢æ˜¯å¯¹ fakeWindow è¿™ä¸ªå¯¹è±¡è¿›è¡Œäº†ä»£ç†ï¼Œè€Œè¿™ä¸ªå¯¹è±¡æ˜¯é€šè¿‡ createFakeWindow æ–¹æ³•å¾—åˆ°çš„ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯å°† window çš„ documentã€locationã€topã€window ç­‰ç­‰å±æ€§æ‹·è´ä¸€ä»½ï¼Œç»™åˆ° fakeWindowã€‚&lt;/p&gt;&lt;p&gt;æºç å±•ç¤ºï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;createFakeWindow&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;global&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;Window&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â mapÂ alwaysÂ hasÂ theÂ fastestÂ performanceÂ inÂ hasÂ checkÂ scenario&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â seeÂ https://jsperf.com/array-indexof-vs-set-has/23&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â propertiesWithGetterÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Map&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;PropertyKey&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â boolean&lt;/span&gt;&lt;span&gt;&amp;gt;();&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â fakeWindowÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{}&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;as&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;FakeWindow&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â copyÂ theÂ non-configurableÂ propertyÂ ofÂ globalÂ toÂ fakeWindow&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â seeÂ https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/getOwnPropertyDescriptor&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â &amp;gt;Â AÂ propertyÂ cannotÂ beÂ reportedÂ asÂ non-configurable,Â ifÂ itÂ doesÂ notÂ existsÂ asÂ anÂ ownÂ propertyÂ ofÂ theÂ targetÂ objectÂ orÂ ifÂ itÂ existsÂ asÂ aÂ configurableÂ ownÂ propertyÂ ofÂ theÂ targetÂ object.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â */&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;getOwnPropertyNames&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;global&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;filter&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;p&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â descriptorÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;getOwnPropertyDescriptor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;global&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â p&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt;descriptor&lt;/span&gt;&lt;span&gt;?.&lt;/span&gt;&lt;span&gt;&lt;span&gt;configurable&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;})&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;forEach&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;p&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â descriptorÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;getOwnPropertyDescriptor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;global&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â p&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;descriptor&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â hasGetterÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;prototype&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;hasOwnProperty&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;call&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;descriptor&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;get&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â makeÂ top/self/windowÂ propertyÂ configurableÂ andÂ writable,Â otherwiseÂ itÂ willÂ causeÂ TypeErrorÂ whileÂ getÂ trapÂ return.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â seeÂ https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/handler/get&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â &amp;gt;Â TheÂ valueÂ reportedÂ forÂ aÂ propertyÂ mustÂ beÂ theÂ sameÂ asÂ theÂ valueÂ ofÂ theÂ correspondingÂ targetÂ objectÂ propertyÂ ifÂ theÂ targetÂ objectÂ propertyÂ isÂ aÂ non-writable,Â non-configurableÂ dataÂ property.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â */&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â pÂ &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;top&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;||&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â pÂ &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;parent&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;||&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â pÂ &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;self&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;||&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â pÂ &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;window&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;||&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;process&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;env&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;NODE_ENV&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;test&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;pÂ &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;mockTop&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;||&lt;/span&gt;&lt;span&gt;Â pÂ &lt;/span&gt;&lt;span&gt;===&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;mockSafariTop&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;))&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â descriptor&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;configurable&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â TheÂ descriptorÂ ofÂ window.window/window.top/window.selfÂ inÂ Safari/FFÂ areÂ accessorÂ descriptors,Â weÂ needÂ toÂ avoidÂ addingÂ aÂ dataÂ descriptorÂ whileÂ itÂ was&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Example:&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Safari/FF:Â Object.getOwnPropertyDescriptor(window,Â &#x27;top&#x27;)Â -&amp;gt;Â {get:Â function,Â set:Â undefined,Â enumerable:Â true,Â configurable:Â false}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Chrome:Â Object.getOwnPropertyDescriptor(window,Â &#x27;top&#x27;)Â -&amp;gt;Â {value:Â Window,Â writable:Â false,Â enumerable:Â true,Â configurable:Â false}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â */&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(!&lt;/span&gt;&lt;span&gt;hasGetter&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â descriptor&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;writable&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;if&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;hasGetter&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â propertiesWithGetter&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;set&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;true&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â freezeÂ theÂ descriptorÂ toÂ avoidÂ beingÂ modifiedÂ byÂ zone.js&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â seeÂ https://github.com/angular/zone.js/blob/a5fe09b0fac27ac5df1fa746042f96f05ccb6a00/lib/browser/define-property.ts#L71&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;rawObjectDefineProperty&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;fakeWindow&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â p&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;freeze&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;descriptor&lt;/span&gt;&lt;span&gt;));&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â fakeWindow&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â propertiesWithGetter&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;};&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;proxySandbox ç”±äºæ˜¯æ‹·è´å¤åˆ¶äº†ä¸€ä»½ fakeWindowï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€ windowï¼ŒåŒæ—¶æ”¯æŒå¤šä¸ªå­åº”ç”¨åŒæ—¶åŠ è½½ã€‚&lt;br/&gt;è¯¦ç»†æºç è¯·æŸ¥çœ‹&lt;span&gt;ï¼šproxySandbox&lt;sup&gt;[14]&lt;/sup&gt;&lt;/span&gt;&lt;/p&gt;&lt;h2&gt;äºŒã€Node.jsä¸­çš„æ²™ç®±å®ç°&lt;/h2&gt;&lt;h3&gt;VM&lt;/h3&gt;&lt;p&gt;VMæ˜¯ Node.js é»˜è®¤æä¾›çš„ä¸€ä¸ªå†…å»ºæ¨¡å—ï¼ŒVM æ¨¡å—æä¾›äº†ä¸€ç³»åˆ— API ç”¨äºåœ¨ V8 è™šæ‹Ÿæœºç¯å¢ƒä¸­ç¼–è¯‘å’Œè¿è¡Œä»£ç ã€‚JavaScript ä»£ç å¯ä»¥è¢«ç¼–è¯‘å¹¶ç«‹å³è¿è¡Œï¼Œæˆ–ç¼–è¯‘ã€ä¿å­˜ç„¶åå†è¿è¡Œã€‚&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â vmÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;require&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;vm&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â scriptÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â vm&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;Script&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;mÂ +Â n&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â å…ˆnewä¸€ä¸ªè„šæœ¬æ‰§è¡Œçš„å®¹å™¨å®ä¾‹&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â sandboxÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;m&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;n&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;};&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â contextÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â vm&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;createContext&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â å®ä¾‹åŒ–ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â resÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â script&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;runInContext&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;context&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â è¿è¡Œ&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;res&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â æ‰“å°ï¼š3&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰§è¡Œä¸Šè¿™çš„ä»£ç å°±èƒ½æ‹¿åˆ°ç»“æœ 3ï¼ŒåŒæ—¶ï¼Œé€šè¿‡ vm.Script è¿˜èƒ½æŒ‡å®šä»£ç æ‰§è¡Œçš„ã€Œæœ€å¤§æ¯«ç§’æ•°ã€ï¼Œè¶…è¿‡æŒ‡å®šçš„æ—¶é•¿å°†ç»ˆæ­¢æ‰§è¡Œå¹¶æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;try&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â scriptÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â vm&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;Script&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;while(true){}&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,{&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;timeout&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;50&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;....&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;err&lt;/span&gt;&lt;span&gt;){&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â æ‰§è¡Œè¶…è¿‡äº†50msä¼šæ‰“å°è¶…æ—¶çš„Â log&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;err&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;message&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸Šé¢çš„è„šæœ¬æ‰§è¡Œå°†ä¼šå¤±è´¥ï¼Œè¢«æ£€æµ‹åˆ°è¶…æ—¶å¹¶æŠ›å‡ºå¼‚å¸¸ï¼Œç„¶åè¢« Try Cache æ•è·åˆ°å¹¶æ‰“å‡º logï¼Œä½†åŒæ—¶éœ€è¦æ³¨æ„çš„æ˜¯ vm.Script çš„ timeout é€‰é¡¹ã€Œåªé’ˆå¯¹åŒæ­¥ä»£æœ‰æ•ˆã€ï¼Œè€Œä¸åŒ…æ‹¬æ˜¯å¼‚æ­¥è°ƒç”¨çš„æ—¶é—´ï¼Œæ¯”å¦‚&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â scriptÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â vm&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;Script&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;setTimeout(()=&amp;gt;{},2000)&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,{&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;timeout&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;50&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸Šè¿°ä»£ç ï¼Œå¹¶ä¸æ˜¯ä¼šåœ¨ 50ms åæŠ›å‡ºå¼‚å¸¸ï¼Œå› ä¸º 50ms ä¸Šè¾¹çš„ä»£ç åŒæ­¥æ‰§è¡Œè‚¯å®šå®Œäº†ï¼Œè€Œ setTimeout æ‰€ç”¨çš„æ—¶é—´å¹¶ä¸ç®—åœ¨å†…ï¼Œä¹Ÿå°±æ˜¯è¯´ vm æ¨¡å—æ²¡æœ‰åŠæ³•å¯¹å¼‚æ­¥ä»£ç ç›´æ¥é™åˆ¶æ‰§è¡Œæ—¶é—´ã€‚æˆ‘ä»¬ä¹Ÿä¸èƒ½é¢å¤–é€šè¿‡ä¸€ä¸ª timer å»æ£€æŸ¥è¶…æ—¶ï¼Œå› ä¸ºæ£€æŸ¥äº†æ‰§è¡Œä¸­çš„ vm ä¹Ÿæ²¡æœ‰æ–¹æ³•å»ä¸­æ­¢æ‰ã€‚&lt;/p&gt;&lt;p&gt;å¦å¤–ï¼Œåœ¨ Node.js é€šè¿‡ vm.runInContext çœ‹èµ·æ¥ä¼¼ä¹éš”ç¦»äº†ä»£ç æ‰§è¡Œç¯å¢ƒï¼Œä½†å®é™…ä¸Šå´å¾ˆå®¹æ˜“ã€Œé€ƒé€¸ã€å‡ºå»ã€‚æˆ‘ä»¬çœ‹ä¸‹è¿™ä¸ªè¿‡ç¨‹ã€‚&lt;/p&gt;&lt;p&gt;ä½¿ç”¨VMæ¨¡å—æˆ‘ä»¬å¯ä»¥åœ¨ç‹¬ç«‹çš„ç¯å¢ƒä¸­è¿è¡Œä¸å—ä¿¡ä»»çš„ä»£ç ï¼Œè¿™å°±æ„å‘³ç€è¿è¡Œåœ¨æ²™ç®±é‡Œçš„ä»£ç ä¸èƒ½è®¿é—®Nodeè¿›ç¨‹äº†ï¼Œå¯¹å—ï¼Ÿ&lt;/p&gt;&lt;p&gt;åŸºæœ¬çš„ä½¿ç”¨ç¤ºä¾‹ä»£ç ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;&quot;useÂ strict&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â vmÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;require&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;vm&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â xyzÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â vm&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;runInNewContext&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;`&lt;/span&gt;&lt;span&gt;letÂ aÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&quot;welcome!&quot;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;;`&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;xyz&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â a&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç°åœ¨æˆ‘ä»¬å°è¯•è®¿é—®è¿›ç¨‹&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;&quot;useÂ strict&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â vmÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;require&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;vm&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â xyzÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â vm&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;runInNewContext&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;`&lt;/span&gt;&lt;span&gt;process&lt;/span&gt;&lt;span&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;xyz&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.34&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qnAibK5Aia2dXqibZdYwAr4IgHiasg0EGUj3aXRHatOvBcO18dB6JWFETCddlIuVxy4uFCQYTcsUBBlRnURiaZ3hQuQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1500&quot; title=&quot;null&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;br/&gt;&lt;span&gt;â€œprocess is not definedâ€ï¼Œæ‰€ä»¥é»˜è®¤æƒ…å†µä¸‹VMæ¨¡å—ä¸èƒ½è®¿é—®ä¸»è¿›ç¨‹ï¼Œå¦‚æœæƒ³è¦è®¿é—®éœ€è¦æŒ‡å®šæˆæƒã€‚&lt;/span&gt;&lt;br/&gt;&lt;span&gt;çœ‹èµ·æ¥é»˜è®¤ä¸èƒ½è®¿é—®â€œprocessã€requireâ€ç­‰å°±æ»¡è¶³éœ€æ±‚äº†ï¼Œä½†æ˜¯çœŸçš„å°±æ²¡æœ‰åŠæ³•è§¦åŠä¸»è¿›ç¨‹å¹¶æ‰§è¡Œä»£ç äº†ï¼Ÿ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;&quot;useÂ strict&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â vmÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;require&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;vm&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â xyzÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â vm&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;runInNewContext&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;`&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;constructor&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;constructor&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&#x27;returnÂ this.process.env&#x27;&lt;/span&gt;&lt;span&gt;)()`&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;xyz&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;&lt;p&gt;åœ¨javascriptä¸­thisæŒ‡å‘å®ƒæ‰€å±çš„å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨å®ƒæ—¶å°±å·²ç»æŒ‡å‘äº†ä¸€ä¸ªVMä¸Šä¸‹æ–‡ä¹‹å¤–çš„å¯¹è±¡ã€‚é‚£ä¹ˆè®¿é—®thisçš„.constructor å°±è¿”å› Object Constructor ï¼Œè®¿é—® Object Constructor çš„ .constructor è¿”å› Function constructor ã€‚&lt;br/&gt;Function constructor å°±åƒjavascriptæä¾›çš„æœ€é«˜å‡½æ•°ï¼Œä»–å¯ä»¥è®¿é—®å…¨å±€ï¼Œæ‰€ä»¥ä»–èƒ½è¿”å›å…¨å±€äº‹ç‰©ã€‚Function constructorå…è®¸ä»å­—ç¬¦ä¸²ç”Ÿæˆå‡½æ•°ï¼Œä»è€Œæ‰§è¡Œä»»æ„ä»£ç ã€‚&lt;br/&gt;æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Function constructor è¿”å›ä¸»è¿›ç¨‹ã€‚å…³äº Function constructor æ›´å¤šå†…å®¹åœ¨&lt;span&gt;è¿™é‡Œ&lt;sup&gt;[15]&lt;/sup&gt;&lt;/span&gt;å’Œ&lt;span&gt;è¿™é‡Œ&lt;sup&gt;[16]&lt;/sup&gt;&lt;/span&gt;ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å¯ä»¥æ­£å¸¸æ‰“å°ï¼Œä¹Ÿå°±æ˜¯è¯´é¡ºåˆ©æ‹¿åˆ°äº†ä¸»è¿›ç¨‹çš„processï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æ‰€è¯´çš„äº§ç”Ÿäº†ã€Œé€ƒé€¸ã€ã€‚è¿™æ‹›åŒæ ·å¯¹çªç ´AngularåŒæ ·æœ‰æ•ˆ â€”â€”Â &lt;span&gt;AngularJS æ²™ç®±&lt;sup&gt;[17]&lt;/sup&gt;&lt;/span&gt;ã€‚&lt;/p&gt;&lt;p&gt;å†çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â vmÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;require&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;vm&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â sandboxÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{};&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â scriptÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â vm&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;Script&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;this.constructor.constructor(&quot;returnÂ process&quot;)().exit()&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â contextÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â vm&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;createContext&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;runInContext&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;context&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰§è¡Œä¸Šè¾¹çš„ä»£ç ï¼Œå®¿ä¸»ç¨‹åºç«‹å³å°±ä¼šã€Œé€€å‡ºã€ï¼Œsandbox æ˜¯åœ¨ VM ä¹‹å¤–çš„ç¯å¢ƒåˆ›å»ºçš„ï¼Œéœ€ VM ä¸­çš„ä»£ç çš„ this æŒ‡å‘çš„ä¹Ÿæ˜¯ sandboxï¼Œé‚£ä¹ˆ&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;//this.constructorÂ å°±æ˜¯å¤–æ‰€çš„Â ObjectÂ æ„å»ºå‡½æ•°&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;ObjConstructor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;constructor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;//ObjConstructorÂ çš„Â constructorÂ å°±æ˜¯å¤–åŒ…çš„Â Function&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;ObjConstructor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;constructor&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;//åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå¹¶æ‰§è¡Œå®ƒï¼Œè¿”å›å…¨å±€Â processÂ å…¨å±€å¯¹è±¡&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â processÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;returnÂ process&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;))();&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;//é€€å‡ºå½“å‰è¿›ç¨‹&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;process&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ²¡æœ‰äººæ„¿æ„ç”¨æˆ·ä¸€æ®µè„šæœ¬å°±èƒ½è®©åº”ç”¨æŒ‚æ‰å§ã€‚é™¤äº†é€€å‡ºè¿›ç¨‹åºä¹‹å¤–ï¼Œå®é™…ä¸Šè¿˜èƒ½å¹²æ›´å¤šçš„äº‹æƒ…ã€‚&lt;br/&gt;æœ‰ä¸ªç®€å•çš„æ–¹æ³•å°±èƒ½é¿å…é€šè¿‡ this.constructor æ‹¿åˆ° processï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â vmÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;require&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;vm&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;//åˆ›å»ºä¸€å¤–æ— Â protoÂ çš„ç©ºç™½å¯¹è±¡ä½œä¸ºÂ sandbox&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;//Â constÂ sandboxÂ =Â {};Â //Â èƒ½é€šè¿‡this.constructorÂ æ‹¿åˆ°Â process&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â sandboxÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Object&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;create&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;null&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â è¿™æ ·å°±èƒ½é˜²æ­¢this.constructorÂ æ‹¿åˆ°Â process&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â scriptÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â vm&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;Script&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;this.constructor.constructor(&quot;returnÂ process&quot;)()&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â contextÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â vm&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;createContext&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â nodeProcessÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â script&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;runInContext&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;context&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;nodeProcess&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½†è¿˜æ˜¯æœ‰é£é™©çš„ï¼Œç”±äº JavaScript æœ¬èº«çš„åŠ¨æ€çš„ç‰¹ç‚¹ï¼Œå„ç§é»‘é­”æ³•é˜²ä¸èƒœé˜²ã€‚äº‹å® Node.js çš„å®˜æ–¹æ–‡æ¡£ä¸­ä¹Ÿæåˆ°ã€Œ ä¸è¦æŠŠ VM å½“åšä¸€ä¸ªå®‰å…¨çš„æ²™ç®±ï¼Œå»æ‰§è¡Œä»»æ„éä¿¡ä»»çš„ä»£ç ã€ã€‚&lt;/p&gt;&lt;h3&gt;VM2&lt;/h3&gt;&lt;p&gt;åœ¨ç¤¾åŒºä¸­æœ‰ä¸€äº›å¼€æºçš„æ¨¡å—ç”¨äºè¿è¡Œä¸ä¿¡ä»»ä»£ç ï¼Œä¾‹å¦‚ sandboxã€vm2ã€jailed ç­‰ã€‚ç›¸æ¯”è¾ƒè€Œè¨€ vm2 å¯¹å„æ–¹é¢åšäº†æ›´å¤šçš„å®‰å…¨å·¥ä½œï¼Œç›¸å¯¹å®‰å…¨äº›ã€‚ã€Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆimageCooké‡‡ç”¨äº†è¯¥æ²™ç®±æ¨¡å—ã€&lt;/p&gt;&lt;p&gt;ä» vm2 çš„å®˜æ–¹ README ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå®ƒåŸºäº Node.js å†…å»ºçš„ VM æ¨¡å—ï¼Œæ¥å»ºç«‹åŸºç¡€çš„æ²™ç®±ç¯å¢ƒï¼Œç„¶ååŒæ—¶ä½¿ç”¨ä¸Šäº†æ–‡ä»‹ç»è¿‡çš„ ES6 çš„ Proxy æŠ€æœ¯æ¥é˜²æ­¢æ²™ç®±è„šæœ¬é€ƒé€¸ã€‚&lt;/p&gt;&lt;p&gt;ç”¨åŒæ ·çš„æµ‹è¯•ä»£ç æ¥è¯•è¯• vm2ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;VM&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;require&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;vm2&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;VM&lt;/span&gt;&lt;/span&gt;&lt;span&gt;().&lt;/span&gt;&lt;span&gt;&lt;span&gt;run&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;this.constructor.constructor(&quot;returnÂ process&quot;)().exit()&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;å¦‚ä¸Šä»£ç ï¼Œ&lt;/span&gt;&lt;strong&gt;å¹¶æ²¡æœ‰æˆåŠŸç»“æŸæ‰å®¿ä¸»ç¨‹åº&lt;/strong&gt;&lt;span&gt;ï¼Œvm2 å®˜æ–¹ REAME ä¸­è¯´ã€Œvm2 æ˜¯ä¸€ä¸ªæ²™ç›’ï¼Œå¯ä»¥åœ¨ Node.js ä¸­å®‰å…¨çš„æ‰§è¡Œä¸å—ä¿¡ä»»çš„ä»£ç ã€ã€‚&lt;/span&gt;&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.1784675072744908&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qnAibK5Aia2dXqibZdYwAr4IgHiasg0EGUj3N8RXMUft7hhTswOJQSLNYuBE2dZpS09b6rLI6YqOrqKhghKPibggJSg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2062&quot; title=&quot;null&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;br/&gt;&lt;span&gt;ç„¶è€Œï¼Œäº‹å®ä¸Šæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥å¹²ä¸€äº›ã€Œåã€äº‹æƒ…ï¼Œæ¯”å¦‚ï¼š&lt;/span&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;åªè¦èƒ½å¹²åäº‹æƒ…ï¼Œå°±æ˜¯ä¸å®‰å…¨çš„&lt;/p&gt;&lt;/blockquote&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;VM&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;require&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;vm2&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â vmÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;VM&lt;/span&gt;&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;timeout&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;1000&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{}});&lt;/span&gt;&lt;br/&gt;&lt;span&gt;vm&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;run&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;newÂ Promise(()=&amp;gt;{})&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸Šè¾¹çš„ä»£ç å°†&lt;strong&gt;æ°¸è¿œä¸ä¼šæ‰§è¡Œç»“æŸ&lt;/strong&gt;ï¼Œå¦‚åŒ Node.js å†…å»ºæ¨¡å—ä¸€æ ·ï¼Œvm2 çš„ timeout å¯¹å¼‚æ­¥æ“ä½œæ˜¯æ— æ•ˆçš„ã€‚åŒæ—¶ï¼Œvm2 ä¹Ÿä¸èƒ½é¢å¤–é€šè¿‡ä¸€ä¸ª timer å»æ£€æŸ¥è¶…æ—¶ï¼Œå› ä¸ºå®ƒä¹Ÿæ²¡æœ‰åŠæ³•å°†æ‰§è¡Œä¸­çš„ vm ç»ˆæ­¢æ‰ã€‚è¿™ä¼šä¸€ç‚¹ç‚¹è€—è´¹å®ŒæœåŠ¡å™¨çš„èµ„æºï¼Œè®©ä½ çš„åº”ç”¨æŒ‚æ‰ã€‚&lt;/p&gt;&lt;p&gt;é‚£ä¹ˆæˆ–è®¸ä½ ä¼šæƒ³ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½åœ¨ä¸Šè¾¹çš„ sandbox ä¸­æ”¾ä¸€ä¸ªå‡çš„ Promise ä»è€Œç¦æ‰ Promise å‘¢ï¼Ÿç­”æ¡ˆæ˜¯èƒ½æä¾›ä¸€ä¸ªã€Œå‡ã€çš„ Promiseï¼Œä½†å´æ²¡æœ‰åŠæ³•å®Œæˆç¦æ‰ Promiseï¼Œæ¯”å¦‚&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;VM&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;require&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;vm2&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â vmÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;VM&lt;/span&gt;&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;timeout&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;1000&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;sandbox&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Promise&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span/&gt;&lt;span&gt;){}}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;});&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;vm&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;run&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;PromiseÂ =Â (asyncÂ function(){})().constructor;newÂ Promise(()=&amp;gt;{});&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°é€šè¿‡ä¸€è¡Œ Promise = (async function(){})().constructor å°±å¯ä»¥è½»æ¾å†æ¬¡æ‹¿åˆ° Promise äº†ã€‚ä»å¦ä¸€ä¸ªå±‚é¢æ¥çœ‹ï¼Œå†µä¸”æˆ–è®¸æœ‰æ—¶æˆ‘ä»¬è¿˜æƒ³è®©è‡ªå®šä¹‰è„šæœ¬æ”¯æŒå¼‚æ­¥å¤„ç†å‘¢ã€‚&lt;/p&gt;&lt;p&gt;å…³äºVM2è¿˜æœ‰æ›´å¤šæ–°çš„å’Œåˆ›æ–°æ€§çš„ç»•è¿‡ â€”â€”&lt;span&gt;æ›´å¤šé€ƒé€¸&lt;sup&gt;[18]&lt;/sup&gt;&lt;/span&gt;ã€‚&lt;/p&gt;&lt;p&gt;é™¤äº†ä»æ²™ç®±é€ƒé€¸ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ infinite while loop åˆ›å»ºæ— é™å¾ªç¯æ‹’ç»æœåŠ¡ã€‚&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;&lt;span&gt;VM&lt;/span&gt;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;require&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;vm2&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;VM&lt;/span&gt;&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;span&gt;&lt;span&gt;timeout&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/span&gt;&lt;span&gt;}).&lt;/span&gt;&lt;span&gt;&lt;span&gt;run&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;`&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt;Â main&lt;/span&gt;&lt;span&gt;(){&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;){}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;Proxy&lt;/span&gt;&lt;span&gt;({},&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â getPrototypeOf&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;t&lt;/span&gt;&lt;span&gt;){&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â Â Â global&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;main&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;})`&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3&gt;&lt;span&gt;Safeify&lt;sup&gt;[19]&lt;/sup&gt;&lt;/span&gt;ï¼šNode.jsç¯å¢ƒä¸‹å»ºç«‹ä¸€ä¸ªæ›´å®‰å…¨çš„æ²™ç®±&lt;/h3&gt;&lt;p&gt;é€šè¿‡ä¸Šæ–‡çš„æ¢ç©¶ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æ‰¾åˆ°ä¸€ä¸ªå®Œç¾çš„æ–¹æ¡ˆåœ¨ Node.js å»ºç«‹å®‰å…¨çš„éš”ç¦»çš„æ²™ç®±ã€‚å…¶ä¸­ vm2 åšäº†ä¸å°‘å¤„ç†ï¼Œç›¸å¯¹æ¥è®²ç®—æ˜¯è¾ƒå®‰å…¨çš„æ–¹æ¡ˆäº†ï¼Œä½†é—®é¢˜ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œæ¯”å¦‚&lt;strong&gt;å¼‚æ­¥ä¸èƒ½æ£€æŸ¥è¶…æ—¶&lt;/strong&gt;çš„é—®é¢˜ä»¥åŠ&lt;strong&gt;å’Œå®¿ä¸»ç¨‹åºåœ¨ç›¸åŒè¿›ç¨‹&lt;/strong&gt;çš„é—®é¢˜ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ²¡æœ‰è¿›ç¨‹éš”ç¦»æ—¶ï¼Œé€šè¿‡ VM åˆ›å»ºçš„ sanbox å¤§ä½“æ˜¯è¿™æ ·çš„&lt;/span&gt;&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7044534412955465&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qnAibK5Aia2dXqibZdYwAr4IgHiasg0EGUj3NzDTgz6FNGEq9Pl3CoqwB70JKrvMxN5nkUIiaYT6zZq91b8cCnvWV9A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;988&quot; title=&quot;null&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;br/&gt;&lt;span&gt;é‚£ä¹ˆï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥å°è¯•ï¼Œå°†éå—ä¿¡ä»£ç ï¼Œé€šè¿‡ vm2 è¿™ä¸ªæ¨¡å—éš”ç¦»åœ¨ä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ä¸­æ‰§è¡Œå‘¢ï¼Ÿç„¶åï¼Œæ‰§è¡Œè¶…æ—¶æ—¶ï¼Œç›´æ¥å°†éš”ç¦»çš„è¿›ç¨‹å¹²æ‰ï¼Œä½†è¿™é‡Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å¦‚ä¸‹å‡ ä¸ªé—®é¢˜:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;&lt;strong&gt;é€šè¿‡è¿›ç¨‹æ± ç»Ÿä¸€è°ƒåº¦ç®¡ç†æ²™ç®±è¿›ç¨‹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;å¦‚æœæ¥ä¸€ä¸ªæ‰§è¡Œä»»åŠ¡ï¼Œåˆ›å»ºä¸€ä¸ªè¿›ç¨‹ï¼Œç”¨å®Œé”€æ¯ï¼Œä»…å¤„ç†è¿›ç¨‹çš„å¼€é”€å°±å·²ç»ç¨å¤§äº†ï¼Œå¹¶ä¸”ä¹Ÿä¸èƒ½ä¸è®¾é™çš„å¼€æ–°è¿›ç¨‹å’Œå®¿ä¸»åº”ç”¨æŠ¢èµ„æºï¼Œé‚£ä¹ˆï¼Œéœ€è¦å»ºä¸€ä¸ªè¿›ç¨‹æ± ï¼š&lt;br/&gt;å‰æï¼šæ‰€æœ‰ä»»åŠ¡åˆ°æ¥ä¼šåˆ›å»ºä¸€ä¸ª Script å®ä¾‹ï¼Œå…ˆè¿›å…¥ä¸€ä¸ª pending é˜Ÿåˆ—ï¼Œç„¶åç›´æ¥å°† script å®ä¾‹çš„ defer å¯¹è±¡è¿”å›ï¼Œè°ƒç”¨å¤„å°±èƒ½ await æ‰§è¡Œç»“æœäº†&lt;br/&gt;ç„¶åï¼šç”± sandbox master æ ¹æ®å·¥ç¨‹è¿›ç¨‹çš„ç©ºé—²ç¨‹åºæ¥è°ƒåº¦æ‰§è¡Œï¼Œmaster ä¼šå°† script çš„æ‰§è¡Œä¿¡æ¯ï¼ŒåŒ…æ‹¬é‡è¦çš„ ScriptIdï¼Œå‘é€ç»™ç©ºé—²çš„ workerï¼Œworker æ‰§è¡Œå®Œæˆåä¼šå°†ã€Œç»“æœ + script ä¿¡æ¯ã€å›ä¼ ç»™ masterï¼Œmaster é€šè¿‡ ScriptId è¯†åˆ«æ˜¯å“ªä¸ªè„šæœ¬æ‰§è¡Œå®Œæ¯•äº†ï¼Œå°±æ˜¯ç»“æœè¿›è¡Œ resolve æˆ– reject å¤„ç†ã€‚&lt;/p&gt;&lt;p&gt;è¿™æ ·ï¼Œé€šè¿‡ã€Œè¿›ç¨‹æ± ã€æ—¢èƒ½é™ä½ã€Œ&lt;strong&gt;è¿›ç¨‹æ¥å›åˆ›å»ºå’Œé”€æ¯çš„å¼€é”€&lt;/strong&gt;ã€ï¼Œä¹Ÿèƒ½ç¡®ä¿ä¸è¿‡åº¦æŠ¢å å®¿ä¸»èµ„æºï¼›åŒæ—¶ï¼Œåœ¨å¼‚æ­¥æ“ä½œè¶…æ—¶ï¼Œè¿˜èƒ½å°†å·¥ç¨‹è¿›ç¨‹ç›´æ¥æ€æ‰ï¼›åŒæ—¶ï¼Œmaster å°†å‘ç°ä¸€ä¸ªå·¥ç¨‹è¿›ç¨‹æŒ‚æ‰ï¼Œä¼šç«‹å³åˆ›å»ºæ›¿è¡¥è¿›ç¨‹ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;&lt;strong&gt;å¤„ç†çš„æ•°æ®å’Œç»“æœå…¬å¼€ç»™æ²™ç®±çš„æ–¹æ³•&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;è¿›ç¨‹é—´å¦‚ä½•é€šè®¯ï¼Œéœ€è¦ã€ŒåŠ¨æ€ä»£ç ã€æ“ä½œæ•°æ®åå¯ä»¥ç›´æ¥åºåˆ—åŒ–ç„¶åé€šè¿‡ IPC å‘é€ç»™éš”ç¦» Sandbox è¿›ç¨‹ï¼Œæ‰§è¡Œç»“æœä¸€æ ·ç»è¿‡åºåˆ—åŒ–é€šè¿‡ IPC ä¼ è¾“ã€‚&lt;/p&gt;&lt;p&gt;å…¶ä¸­ï¼Œå¦‚æœæƒ³&lt;strong&gt;å…¬å¼€ä¸€ä¸ªæ–¹æ³•ç»™ sandbox&lt;/strong&gt;ï¼Œå› ä¸ºä¸åœ¨ä¸€ä¸ªè¿›ç¨‹ï¼Œå¹¶ä¸èƒ½æ–¹ä¾¿çš„å°†ä¸€ä¸ªæ–¹æ¡ˆçš„å¼•ç”¨ä¼ é€’ç»™ sandboxã€‚æˆ‘ä»¬å¯ä»¥å°†å®¿ä¸»çš„æ–¹æ³•ï¼Œåœ¨ä¼ é€’ç»™ sandbox worker ä¹‹ç±»åšä¸€ä¸‹å¤„ç†ï¼Œè½¬æ¢ä¸ºä¸€ä¸ªã€Œæè¿°å¯¹è±¡ã€ï¼ŒåŒ…æ‹¬äº†å…è®¸ sandbox è°ƒç”¨çš„æ–¹æ³•ä¿¡æ¯ï¼Œç„¶åå°†ä¿¡æ¯ï¼Œå¦‚åŒå…¶å®ƒæ•°æ®ä¸€æ ·å‘é€ç»™ worker è¿›ç¨‹ï¼Œworker æ”¶åˆ°æ•°æ®åï¼Œè¯†åˆ«å‡ºã€Œæ–¹æ³•æè¿°å¯¹è±¡ã€ï¼Œç„¶ååœ¨ worker è¿›ç¨‹ä¸­çš„ sandbox å¯¹è±¡ä¸Šå»ºç«‹ä»£ç†æ–¹æ³•ï¼Œä»£ç†æ–¹æ³•åŒæ ·é€šè¿‡ IPC å’Œ master é€šè®¯ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;&lt;strong&gt;é’ˆå¯¹æ²™ç®±è¿›ç¨‹è¿›è¡Œ CPU å’Œå†…å­˜é…é¢é™åˆ¶&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;åœ¨ Linux å¹³å°ï¼Œé€šè¿‡ CGroups å¯¹æ²™ç®±è¿›ç¨‹è¿›è¡Œæ•´ä½“çš„ CPU å’Œå†…å­˜ç­‰èµ„æºçš„é…é¢é™åˆ¶ï¼ŒCGroups æ˜¯ Control Groups çš„ç¼©å†™ï¼Œæ˜¯ Linux å†…æ ¸æä¾›çš„ä¸€ç§å¯ä»¥é™åˆ¶ã€è®°å½•ã€éš”ç¦»è¿›ç¨‹ç»„ï¼ˆProcess Groupsï¼‰æ‰€ä½¿ç”¨çš„ç‰©ç†èµ„æºï¼ˆå¦‚ï¼šCPUã€Memoryã€IO ç­‰ç­‰ï¼‰çš„æœºåˆ¶ã€‚æœ€åˆç”± Google çš„å·¥ç¨‹å¸ˆæå‡ºï¼Œåæ¥è¢«æ•´åˆè¿› Linux å†…æ ¸ã€‚CGroups ä¹Ÿæ˜¯ LXC ä¸ºå®ç°è™šæ‹ŸåŒ–æ‰€ä½¿ç”¨çš„èµ„æºç®¡ç†æ‰‹æ®µï¼Œå¯ä»¥è¯´æ²¡æœ‰ CGroups å°±æ²¡æœ‰ LXCã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;æœ€ç»ˆï¼Œæˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ªå¤§çº¦è¿™æ ·çš„ã€Œæ²™ç®±ç¯å¢ƒã€&lt;/span&gt;&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.47238372093023256&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qnAibK5Aia2dXqibZdYwAr4IgHiasg0EGUj3SqGicTgZicXJ0gCT3eNjgKvUibTuEickowqCGiabOic0CeOSSeicwWbHa0XAg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1376&quot; title=&quot;null&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;br/&gt;&lt;span&gt;å¦‚æ­¤è¿™èˆ¬å¤„ç†èµ·æ¥æ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆéº»çƒ¦ï¼Ÿä½†æˆ‘ä»¬å°±æœ‰äº†ä¸€ä¸ªæ›´åŠ å®‰å…¨ä¸€äº›çš„æ²™ç®±ç¯å¢ƒäº†ï¼ŒåŸºäºè¿™äº›å¤„ç†è¢«å°è£…ä¸ºä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—Â &lt;/span&gt;&lt;span&gt;Safeify&lt;sup&gt;[20]&lt;/sup&gt;&lt;/span&gt;&lt;span&gt;ï¼Œåœ¨Githubä¸Šå·²ç»å¼€æºã€‚&lt;/span&gt;&lt;br/&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;ç›¸è¾ƒäºå†…å»ºçš„ VM åŠå¸¸è§çš„å‡ ä¸ªæ²™ç®±æ¨¡å—ï¼Œ Safeify å…·æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;ä¸ºå°†è¦æ‰§è¡Œçš„åŠ¨æ€ä»£ç å»ºç«‹ä¸“é—¨çš„è¿›ç¨‹æ± ï¼Œä¸å®¿ä¸»åº”ç”¨ç¨‹åºåˆ†ç¦»åœ¨ä¸åŒçš„è¿›ç¨‹ä¸­æ‰§è¡Œ&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;æ”¯æŒé…ç½®æ²™ç®±è¿›ç¨‹æ± çš„æœ€å¤§è¿›ç¨‹æ•°é‡&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;æ”¯æŒé™å®šåŒæ­¥ä»£ç çš„æœ€å¤§æ‰§è¡Œæ—¶é—´ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒé™å®šåŒ…æ‹¬å¼‚æ­¥ä»£ç åœ¨å†…çš„æ‰§è¡Œæ—¶é—´&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;æ”¯æŒé™å®šæ²™ç®±è¿›ç¨‹æ± çš„æ•´ä½“çš„ CPU èµ„æºé…é¢ï¼ˆå°æ•°ï¼‰&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;æ”¯æŒé™å®šæ²™ç®±è¿›ç¨‹æ± çš„æ•´ä½“çš„æœ€å¤§çš„å†…å­˜é™åˆ¶ï¼ˆå•ä½ mï¼‰&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ç®€å•ä»‹ç»ä¸€ä¸‹ Safeify å¦‚ä½•ä½¿ç”¨ï¼Œé€šè¿‡å¦‚ä¸‹å‘½ä»¤å®‰è£…&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;npmÂ iÂ safeifyÂ &lt;/span&gt;&lt;span&gt;--&lt;/span&gt;&lt;span&gt;save&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨åº”ç”¨ä¸­ä½¿ç”¨ï¼Œè¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå¦‚ä¸‹ä»£ç ï¼ˆTypeScript ä¸­ç±»ä¼¼ï¼‰&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;import&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Safeify&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;from&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;safeify&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â safeVmÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Safeify&lt;/span&gt;&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;timeout&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;50&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤Â 50ms&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;asyncTimeout&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;500&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//åŒ…å«å¼‚æ­¥æ“ä½œçš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤Â 500ms&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;quantity&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;4&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//æ²™ç®±è¿›ç¨‹æ•°é‡ï¼Œé»˜è®¤åŒÂ CPUÂ æ ¸æ•°&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;memoryQuota&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;500&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//æ²™ç®±æœ€å¤§èƒ½ä½¿ç”¨çš„å†…å­˜ï¼ˆå•ä½Â mï¼‰ï¼Œé»˜è®¤Â 500m&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;cpuQuota&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;0.5&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//æ²™ç®±çš„Â cpuÂ èµ„æºé…é¢ï¼ˆç™¾åˆ†æ¯”ï¼‰ï¼Œé»˜è®¤Â 50%&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;});&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â contextÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;a&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;b&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;add&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â b&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â aÂ &lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;Â b&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;};&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â rsÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;await&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â safeVm&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;run&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;`&lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;Â add&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â b&lt;/span&gt;&lt;span&gt;)`&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â context&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;result&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;rs&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…³äºå®‰å…¨çš„é—®é¢˜ï¼Œæ²¡æœ‰æœ€å®‰å…¨ï¼Œåªæœ‰æ›´å®‰å…¨ã€‚Safeify å·²åœ¨éƒ¨åˆ†é¡¹ç›®ä¸­ä½¿ç”¨ï¼Œä½†è‡ªå®šä¹‰è„šæœ¬çš„åŠŸèƒ½æ˜¯å¾€å¾€ä»…é’ˆå¯¹å†…ç½‘ç”¨æˆ·ï¼Œæœ‰ä¸å°‘åŠ¨æ€æ‰§è¡Œä»£ç çš„åœºæ™¯å…¶å®æ˜¯å¯ä»¥é¿å…çš„ï¼Œç»•ä¸å¼€æˆ–å®åœ¨éœ€è¦æä¾›è¿™ä¸ªåŠŸèƒ½æ—¶ï¼Œå¸Œæœ›æœ¬æ–‡æˆ– Safeify èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©å°±è¡Œäº†ã€‚&lt;br/&gt;&lt;/p&gt;&lt;h3&gt;ç»“è®º&lt;/h3&gt;&lt;p&gt;è¿è¡Œä¸ä¿¡ä»»çš„ä»£ç æ˜¯éå¸¸å›°éš¾çš„ï¼Œåªä¾èµ–è½¯ä»¶æ¨¡å—ä½œä¸ºæ²™ç®±æŠ€æœ¯ï¼Œé˜²æ­¢ä¸å—ä¿¡ä»»ä»£ç ç”¨äºéæ­£å½“ç”¨é€”æ˜¯ä¸å¾—å·²çš„å†³å®šã€‚è¿™å¯èƒ½ä¿ƒä½¿äº‘ä¸ŠSAASåº”ç”¨çš„ä¸å®‰å…¨ï¼Œå› ä¸ºé€šè¿‡é€ƒé€¸å‡ºæ²™ç®±è¿›ç¨‹å¤šä¸ªç§Ÿæˆ·é—´çš„æ•°æ®å¯èƒ½è¢«è®¿é—®ï¼ˆä¸»è¿›ç¨‹æ•°æ®è·å–ï¼‰ï¼Œè¿™æ ·ä½ å°±å¯èƒ½å¯ä»¥é€šè¿‡sessionï¼Œsecretç­‰æ¥æ½œå…¥å…¶ä»–ç§Ÿæˆ·ã€‚ä¸€ä¸ªæ›´å®‰å…¨çš„é€‰æ‹©æ˜¯&lt;strong&gt;ä¾èµ–äºç¡¬ä»¶è™šæ‹ŸåŒ–&lt;/strong&gt;ï¼Œæ¯”å¦‚æ¯ä¸ªç§Ÿæˆ·ä»£ç åœ¨ç‹¬ç«‹çš„dockerå®¹å™¨æˆ–AWS Lambada Function ä¸­æ‰§è¡Œä¼šæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚&lt;/p&gt;&lt;p&gt;ä¸‹é¢æ˜¯Auth0å¦‚ä½•å¤„ç†æ²™ç®±é—®é¢˜ï¼š&lt;span&gt;Sandboxing Node.js with CoreOS and Docker&lt;sup&gt;[21]&lt;/sup&gt;&lt;/span&gt;ã€‚ã€Œä¸‹æ¥å¯ä»¥å†è¯¦ç»†ç ”ç©¶ä¸‹å®ç°ã€&lt;/p&gt;&lt;h2&gt;ä¸‰ã€çœ‹ä¸€ä¸ªcase&lt;/h2&gt;&lt;p&gt;&lt;span&gt;imageCookçš„ä½¿ç”¨case&lt;/span&gt;&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.2296983758700696&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qnAibK5Aia2dXqibZdYwAr4IgHiasg0EGUj3kNGH18c8dZiaVTUV4yyAp8POtZeTxQvJicv1OCMEvvnARFOicCR765hsA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2586&quot; title=&quot;null&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;br/&gt;&lt;span&gt;ç›®æ ‡ï¼šæ‹¿åˆ°ç”¨äºå‰ç«¯é¡µé¢æ¸²æŸ“çš„index.js ï¼‹ index.css&lt;/span&gt;&lt;br/&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;åŸºæœ¬æ€è·¯ï¼š&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;æ¨¡æ¿ä»£ç ç”Ÿæˆä»£ç ï¼šhttps://github.com/imgcook-dsl/react-xt-standard/blob/master/src/index.js&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;åŸºäºGroup/ä»“åº“åå¯ä»¥æ‹¿åˆ°æ•´ä¸ª&lt;strong&gt;ä»“åº“çš„æ‰€æœ‰ä»£ç &lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;gitlabçš„ä»£ç æ‹‰å–å®ç°æ–¹å¼å¯ä»¥å‚è€ƒï¼š&lt;span&gt;é’ˆå¯¹å­—èŠ‚ç°çŠ¶å°è£…çš„Gitlab API&lt;sup&gt;[22]&lt;/sup&gt;&lt;/span&gt;Â ã€Œä½¿ç”¨äº†Node.jsçš„æ··åˆæµã€&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;githubçš„ä»£ç æ‹‰å–å¯ä»¥å‚è€ƒï¼šhttps://www.npmjs.com/package/download-git-repo æ›¾è¢«vue-cli &lt;span&gt;2.x&lt;sup&gt;[23]&lt;/sup&gt;&lt;/span&gt;ç‰ˆæœ¬ä½¿ç”¨&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;package.json&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;xxx&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;src/index.js&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;yyy&quot;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;æ‹¿åˆ°æ‰§è¡Œå‡½æ•°å­—ç¬¦ä¸²&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;module&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;exports&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;schema&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â option&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;let&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â imgNumberÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;prettier&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â option&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;...&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;};&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;Node.jsæ²™ç®±æ‰§è¡Œï¼Œå¾—åˆ°ä¸Šé¢å‡½æ•°è¿”å›çš„å­—ç¬¦ä¸²&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;import&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Safeify&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;from&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;safeify&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;import&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;Â getRepoProjectEntriesÂ &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;from&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;byte-gitlab&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â safeVmÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;new&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;Safeify&lt;/span&gt;&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;timeout&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;50&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤Â 50ms&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;asyncTimeout&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;500&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â åŒ…å«å¼‚æ­¥æ“ä½œçš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤Â 500ms&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;quantity&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;4&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â æ²™ç®±è¿›ç¨‹æ•°é‡ï¼Œé»˜è®¤åŒÂ CPUÂ æ ¸æ•°&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;memoryQuota&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;500&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â æ²™ç®±æœ€å¤§èƒ½ä½¿ç”¨çš„å†…å­˜ï¼ˆå•ä½Â mï¼‰ï¼Œé»˜è®¤Â 500m&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;cpuQuota&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;0.5&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;//Â æ²™ç®±çš„Â cpuÂ èµ„æºé…é¢ï¼ˆç™¾åˆ†æ¯”ï¼‰ï¼Œé»˜è®¤Â 50%&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;});&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â contextÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;schema&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{},&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;option&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;};&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;async&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â zipStreamÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;await&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;getRepoProjectEntries&lt;/span&gt;&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;group&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;mordor&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;project&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;lynx-standard&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;branch&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;master&#x27;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â zipStream&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;pipe&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;async&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;contents&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â string&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;path&lt;/span&gt;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;Â string&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;const&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â rsÂ &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;await&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â safeVm&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;run&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;contents&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â context&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&#x27;result&#x27;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â rs&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;return&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â rs&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;})&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;pipe&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;this&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;emitDone&lt;/span&gt;&lt;/span&gt;&lt;span&gt;())&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;once&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;done&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â done&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;once&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;error&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;err&lt;/span&gt;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;=&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;console&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;log&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;æµæ‰§è¡Œå‡ºé”™ç»Ÿä¸€ç›‘æ§ï¼š&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&lt;span&gt;red&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;Â err&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;});&lt;/span&gt;&lt;br/&gt;&lt;span&gt;})();&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;è¿”å›ç»™å®¢æˆ·ç«¯&lt;/span&gt;&lt;/p&gt;&lt;h1&gt;å…³äº CSS éš”ç¦»&lt;/h1&gt;&lt;p&gt;&lt;span&gt;å¸¸è§çš„æœ‰ï¼Œä¸å†èµ˜è¿°ï¼š&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;CSS Module&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;namespace&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;Dynamic StyleSheet&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;css in js&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;Shadow DOM&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;h4&gt;å¼•ç”¨é“¾æ¥&lt;/h4&gt;&lt;p&gt;&lt;code&gt;[1]&lt;/code&gt;Â æ²™ç®±ï¼ˆSandboxï¼‰:Â &lt;em&gt;http://www.arkteam.net/?p=2967&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[2]&lt;/code&gt;Â JavaScriptä¸­constructorå±æ€§:Â &lt;em&gt;https://segmentfault.com/a/1190000013245739&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[3]&lt;/code&gt;Â class:Â &lt;em&gt;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/class&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[4]&lt;/code&gt;Â Classæ„é€ æ–¹æ³•:Â &lt;em&gt;https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Classes/constructor&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[5]&lt;/code&gt;Â Object.getPrototypeOf():Â &lt;em&gt;https://www.axihe.com/api/js-es/ob-object/get-prototype-of.html&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[6]&lt;/code&gt;Â Reflect.getPrototypeOf():Â &lt;em&gt;https://www.axihe.com/api/js-es/ob-reflect/get-prototype-of.html&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[7]&lt;/code&gt;Â &lt;strong&gt;proto&lt;/strong&gt;:Â &lt;em&gt;https://www.axihe.com/api/js-es/ob-object/proto.html&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[8]&lt;/code&gt;Â Object.prototype.isPrototypeOf():Â &lt;em&gt;https://www.axihe.com/api/js-es/ob-object/is-prototype-of.html&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[9]&lt;/code&gt;Â instanceof:Â &lt;em&gt;https://www.axihe.com/api/js-es/ex-relational/instanceof.html&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[10]&lt;/code&gt;Â TypeError:Â &lt;em&gt;https://www.axihe.com/api/js-es/ob-error/type-error.html&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[11]&lt;/code&gt;Â ä¸“è®¿ Wind.js ä½œè€…è€èµµï¼ˆä¸Šï¼‰ï¼šç¼˜ç”±ã€æ€è·¯åŠå‘å±•:Â &lt;em&gt;https://www.infoq.cn/article/interview-jscex-author-part-1&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[12]&lt;/code&gt;Â (0, eval)(â€˜thisâ€™):Â &lt;em&gt;https://www.cnblogs.com/qianlegeqian/p/3950044.html&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[13]&lt;/code&gt;Â qiankun:Â &lt;em&gt;https://qiankun.umijs.org/zh/guide&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[14]&lt;/code&gt;Â ï¼šproxySandbox:Â &lt;em&gt;https://link.segmentfault.com/?enc=Mb%2BNNJjUrmTA7g2uf%2FTgzQ%3D%3D.IHwAeHwf8%2FPDd3WJLo%2F4dCWf2md2lzw7s%2BIEdUcUHmX7xMSccEguXX%2BFQBtpgU8SHiyqxgnCi00SvzmT95eNTRD1XaOHjO5xokQrsy%2BHYtQ%3D&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[15]&lt;/code&gt;Â è¿™é‡Œ:Â &lt;em&gt;https://link.juejin.cn/?target=http%3A%2F%2Fdfkaye.github.io%2F2014%2F03%2F14%2Fjavascript-eval-and-function-constructor%2F&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[16]&lt;/code&gt;Â è¿™é‡Œ:Â &lt;em&gt;https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fi0natan%2Fnodebestpractices%2Fissues%2F211&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[17]&lt;/code&gt;Â AngularJS æ²™ç®±:Â &lt;em&gt;https://link.juejin.cn/?target=https%3A%2F%2Fportswigger.net%2Fresearch%2Fdom-based-angularjs-sandbox-escapes&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[18]&lt;/code&gt;Â æ›´å¤šé€ƒé€¸:Â &lt;em&gt;https://github.com/patriksimek/vm2/issues?q=is%3Aissue+author%3AXmiliaH+is%3Aclosed&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[19]&lt;/code&gt;Â Safeify:Â &lt;em&gt;https://github.com/Houfeng/safeify&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[20]&lt;/code&gt;Â Safeify:Â &lt;em&gt;https://github.com/Houfeng/safeify&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[21]&lt;/code&gt;Â Sandboxing Node.js with CoreOS and Docker:Â &lt;em&gt;https://link.juejin.cn/?target=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3Du81pS05W1JY&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[22]&lt;/code&gt;Â é’ˆå¯¹å­—èŠ‚ç°çŠ¶å°è£…çš„Gitlab API:Â &lt;em&gt;https://code.byted.org/toutiao-fe/logic-monitor-server/blob/dev/init/app/service/gitlab.ts&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[23]&lt;/code&gt;Â 2.x:Â &lt;em&gt;https://github.com/vuejs/vue-cli/blob/v2.9.3/package.json&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>37c651386832f0b64e64519cb3d4c462</guid>
<title>å¾®æœåŠ¡ä»ä»£ç åˆ°k8séƒ¨ç½²åº”æœ‰å°½æœ‰å¤§ç»“å±€ï¼ˆk8séƒ¨ç½²ï¼‰</title>
<link>https://toutiao.io/k/xk3qbvm</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬ç”¨ä¸€ä¸ªç³»åˆ—æ¥è®²è§£ä»éœ€æ±‚åˆ°ä¸Šçº¿ã€ä»ä»£ç åˆ°k8séƒ¨ç½²ã€ä»æ—¥å¿—åˆ°ç›‘æ§ç­‰å„ä¸ªæ–¹é¢çš„å¾®æœåŠ¡å®Œæ•´å®è·µã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ•´ä¸ªé¡¹ç›®ä½¿ç”¨äº†go-zeroå¼€å‘çš„å¾®æœåŠ¡ï¼ŒåŸºæœ¬åŒ…å«äº†go-zeroä»¥åŠç›¸å…³go-zeroä½œè€…å¼€å‘çš„ä¸€äº›ä¸­é—´ä»¶ï¼Œæ‰€ç”¨åˆ°çš„æŠ€æœ¯æ ˆåŸºæœ¬æ˜¯go-zeroé¡¹ç›®ç»„çš„è‡ªç ”ç»„ä»¶ï¼ŒåŸºæœ¬æ˜¯go-zeroå…¨å®¶æ¡¶äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®æˆ˜é¡¹ç›®åœ°å€ï¼šhttps://github.com/Mikaelemmmm/go-zero-looklook&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1ã€æ¦‚è¿°&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¬å·²ç»æŠŠgitlabã€jenkinsã€harborã€k8séƒ½å·²ç»æ­å»ºå¥½äº†ï¼Œè¿™ä¸€èŠ‚æˆ‘ä»¬æ¥ç¼–å†™jenkinsçš„piplineå°†æˆ‘ä»¬çš„æœåŠ¡é€šè¿‡jenkinså®Œæ•´çš„å‘å¸ƒåˆ°k8sä¸­ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2ã€éƒ¨ç½²ä¸­é—´ä»¶&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°†mysqlã€redisã€esç­‰éƒ¨ç½²åˆ°k8sä¹‹å¤– ï¼Œ æ¨¡æ‹Ÿç”¨ä½œçº¿ä¸Šç‹¬ç«‹ç¯å¢ƒï¼ˆè‡³äºçº¿ä¸Šä½ æƒ³æŠŠæŸäº›ä¸­é—´ä»¶éƒ¨ç½²åˆ°k8så†…éƒ¨è¿™ä¸ªè‡ªè¡Œå¤„ç†ï¼Œæœ¬æ¬¡é‡ç‚¹æ˜¯å¦‚ä½•å°†go-zeroå¼€å‘çš„å¾®æœåŠ¡éƒ¨ç½²åˆ°k8sé›†ç¾¤å†…éƒ¨ï¼‰ï¼Œè¿™é‡Œæˆ‘å°±ç›´æ¥ä½¿ç”¨é¡¹ç›®ä¸‹çš„docker-compose-env.yamläº†ï¼ŒæŠŠæ‰€æœ‰ä¾èµ–çš„ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶ç¯å¢ƒç›´æ¥å®‰è£…åœ¨srv-data.com(192.168.1.181)è¿™å°æœåŠ¡å™¨ï¼Œå‰ææ˜¯è¿™å°æœåŠ¡å™¨å·²ç»å®‰è£…å¥½dockerã€docker-composeã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç™»é™†åˆ° 192.168.1.181&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt;Â mkdirÂ dataÂ &amp;amp;&amp;amp;Â &lt;span&gt;cd&lt;/span&gt;Â dataÂ &amp;amp;&amp;amp;Â vimÂ docker-compose.yml&lt;/span&gt;&lt;br/&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt;Â docker-composeÂ upÂ -d&lt;/span&gt;&lt;br/&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt;Â docker-composeÂ psÂ &lt;span&gt;#æŸ¥çœ‹ç¡®è®¤&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3ã€ç‹¬ç«‹é…ç½®&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°†æ¯ä¸ªæœåŠ¡çš„é…ç½®éƒ½ç‹¬ç«‹å‡ºæ¥ï¼Œç»Ÿä¸€æ”¾åœ¨ä¸€ä¸ªgitä»“åº“ï¼Œè¿™æ ·åªç»™ä¸€ä¸ªäººçº¿ä¸Šä»“åº“çš„æƒé™ï¼Œå¦‚æœçº¿ä¸Šé…ç½®æœ‰å˜ç›´æ¥ä¿®æ”¹è¿™ä¸ªä»“åº“çš„æ–‡ä»¶ï¼Œåœ¨jenkinsåšcdçš„æ—¶å€™ï¼Œä¼šå…ˆæ‹‰å–ä»£ç å†æ‹‰å–å¯¹åº”æœåŠ¡çš„é…ç½®è‡ªåŠ¨æ„å»ºï¼Œå…·ä½“å¯ä»¥çœ‹åé¢çš„piplineã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ã€é—®ã€‘ä¸ºä»€ä¹ˆä¸ç”¨é…ç½®ä¸­å¿ƒï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;1ï¼‰ä¿®æ”¹dbã€redisç­‰éœ€è¦é‡å¯æœåŠ¡ï¼Œä½†æ˜¯æœ‰ä¸€äº›é…ç½®åˆä¸éœ€è¦é‡å¯æœåŠ¡ï¼Œè¿ç»´åˆè¦å»è®°ï¼Œè®°æ··äº†æ¯”è¾ƒå®¹æ˜“é€ æˆçº¿ä¸Šäº‹æ•…&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;2ï¼‰æ–¹ä¾¿å›æ»šã€‚æˆ‘ä»¬å‘æ–°ç‰ˆæœ¬åˆ°çº¿ä¸Šï¼Œå¹¶ä¸”åˆæ”¹äº†æ–°ç‰ˆæœ¬é…ç½®ã€‚è¿™æ—¶å€™çº¿ä¸Šç”¨æˆ·åé¦ˆæœ‰é—®é¢˜ï¼Œçº¿ä¸Šéœ€è¦å¿«é€Ÿå›æ»šçš„è¯ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨å°†æ–‡ä»¶æ„å»ºåˆ°é•œåƒä¸­ï¼Œç›´æ¥ä½¿ç”¨k8sä¸€è¡Œå‘½ä»¤å°±å¯ä»¥å°†ä¸Šä¸€ä¸ªç‰ˆæœ¬ä»£ç åŠ é…ç½®ç›´æ¥å›æ»šå›æ¥ã€‚å¦‚æœä½¿ç”¨äº†é…ç½®ä¸­å¿ƒï¼Œå›æ»šäº†ä»£ç ï¼Œè¿˜è¦å°†ä¸Šä¸ªç‰ˆæœ¬çš„é…ç½®å»é…ç½®ä¸­å¿ƒæ”¹å›æ¥ï¼Œå¾ˆéº»çƒ¦ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç‹¬ç«‹çº¿ä¸Šä»“åº“ç›®å½•ç»“æ„å¦‚ä¸‹ï¼ˆè¿™ä¸ªç»“æ„æ˜¯è·Ÿpiplineä¸­å†™æ³•ç›¸å…³çš„ï¼‰&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;1.1406003159557663&quot; data-type=&quot;png&quot; data-w=&quot;1266&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/UyIojWicPOg1lD21MxibvrUhYysDRVboP2pZrprx5s3V8PWprm8LxMAAm9S4eDpGlU1HjlhiaFWCwM6AiaUS1KAJOQ/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»“åº“åœ°å€ ï¼šhttps://github.com/Mikaelemmmm/go-zero-looklook-pro-conf , ç›´æ¥ä¸‹è½½å°±å¥½&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;1ã€ä¿®æ”¹é…ç½®ä¸­çš„ä¸­é—´ä»¶ï¼Œæ•°æ®åº“ã€redisç­‰éƒ½è¦æ”¹æˆ192.168.1.181è¿™å°æœºå™¨ï¼Œæˆ‘ä»¬æŠŠè¿™å°æœºå™¨å½“æˆçº¿ä¸Šç¯å¢ƒçš„ä¸­é—´ä»¶ã€‚&lt;/p&gt;&lt;p&gt;2ã€å¦å¤–ä¸€ä¸ªå°±æ˜¯æˆ‘ä»¬çš„æœåŠ¡å‘ç°ï¼Œçº¿ä¸Šæˆ‘ä»¬éƒ¨ç½²åœ¨k8sä¸­ï¼Œgo-zeroç›´æ¥æ”¯æŒk8sæœåŠ¡å‘ç°ï¼Œæ‰€ä»¥ä¸éœ€è¦etcdç­‰ï¼Œæˆ‘ä»¬åœ¨é…ç½®zrpc clientçš„æ—¶å€™ï¼Œè¦æ”¹æˆtargetï¼Œk8sçš„é…ç½®æ–¹å¼ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;4ã€ç¼–å†™ jenkins çš„ pipline&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;4.1 é…ç½®å‚æ•°&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è®¿é—® http://192.168.1.180:8989/ æ‰“å¼€jenkinsï¼Œè¿›å…¥jenkinsé¦–é¡µï¼Œç‚¹å‡»å·¦ä¾§èœå•&lt;code&gt;æ–°å»ºItem&lt;/code&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬å…ˆåˆ›å»º &lt;code&gt;identity&lt;/code&gt; æˆæƒæœåŠ¡çš„æµæ°´çº¿&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.4755043227665706&quot; data-type=&quot;png&quot; data-w=&quot;3470&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/UyIojWicPOg1lD21MxibvrUhYysDRVboP2pjFSoFJ7bE1S7TGZkYvZCvM9Hv8MqBicbibGrpfOjQxMIrr9OibL4lj1A/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç„¶åç‚¹å‡»â€œGeneralâ€ , é€‰æ‹©â€œThis project is parameterizedâ€ ï¼Œ &quot;æ·»åŠ å‚æ•°&quot;ï¼Œâ€œChoice Parameterâ€ï¼Œå¦‚ä¸‹å›¾&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5449871465295629&quot; data-type=&quot;png&quot; data-w=&quot;2334&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/UyIojWicPOg1lD21MxibvrUhYysDRVboP2UhzpqQRKzarTveuxuzSJictbIMCQuDA0VHTOELBYQZCDZdbVcmZadmQ/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç„¶åç¼–å†™å†…å®¹å¦‚ä¸‹&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.3114323258869908&quot; data-type=&quot;png&quot; data-w=&quot;3044&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/UyIojWicPOg1lD21MxibvrUhYysDRVboP2BngWy5xsXBic8alydWnZiayMUyYl0fIDSRniboZOickJ1ahWbXibCoRu0qw/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›´æ¥ä¿å­˜ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;4.2 ç¼–å†™pipline&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‘ä¸‹æ»‘åŠ¨æ‰¾åˆ°&lt;code&gt;Pipeline script&lt;/code&gt;,å¡«å†™è„šæœ¬å†…å®¹&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;pipeline {&lt;br/&gt;  agent any&lt;br/&gt;  parameters {&lt;br/&gt;      gitParameter name: &#x27;branch&#x27;, &lt;br/&gt;      type: &#x27;PT_BRANCH&#x27;,&lt;br/&gt;      branchFilter: &#x27;origin/(.*)&#x27;,&lt;br/&gt;      defaultValue: &#x27;master&#x27;,&lt;br/&gt;      selectedValue: &#x27;DEFAULT&#x27;,&lt;br/&gt;      sortMode: &#x27;ASCENDING_SMART&#x27;,&lt;br/&gt;      description: &#x27;é€‰æ‹©éœ€è¦æ„å»ºçš„åˆ†æ”¯&#x27;&lt;br/&gt;  }&lt;br/&gt;&lt;br/&gt;  stages {&lt;br/&gt;      stage(&#x27;æœåŠ¡ä¿¡æ¯&#x27;)    {&lt;br/&gt;          steps {&lt;br/&gt;              sh &#x27;echo åˆ†æ”¯ï¼š$branch&#x27;&lt;br/&gt;              sh &#x27;echo æ„å»ºæœåŠ¡ç±»å‹ï¼š${JOB_NAME}-$type&#x27;&lt;br/&gt;          }&lt;br/&gt;      }&lt;br/&gt;&lt;br/&gt;      stage(&#x27;æ‹‰å–ä»£ç &#x27;) {&lt;br/&gt;          steps {&lt;br/&gt;              checkout([$class: &#x27;GitSCM&#x27;, &lt;br/&gt;              branches: [[name: &#x27;$branch&#x27;]],&lt;br/&gt;              doGenerateSubmoduleConfigurations: false, &lt;br/&gt;              extensions: [], &lt;br/&gt;              submoduleCfg: [],&lt;br/&gt;              userRemoteConfigs: [[credentialsId: &#x27;gitlab-cert&#x27;, url: &#x27;ssh://git@192.168.1.180:2222/root/go-zero-looklook.git&#x27;]]])&lt;br/&gt;          }   &lt;br/&gt;      }&lt;br/&gt;&lt;br/&gt;      stage(&#x27;è·å–commit_id&#x27;) {&lt;br/&gt;          steps {&lt;br/&gt;              echo &#x27;è·å–commit_id&#x27;&lt;br/&gt;              git credentialsId: &#x27;gitlab-cert&#x27;, url: &#x27;ssh://git@192.168.1.180:2222/root/go-zero-looklook.git&#x27;&lt;br/&gt;              script {&lt;br/&gt;                  env.commit_id = sh(returnStdout: true, script: &#x27;git rev-parse --short HEAD&#x27;).trim()&lt;br/&gt;              }&lt;br/&gt;          }&lt;br/&gt;      }&lt;br/&gt;&lt;br/&gt;      stage(&#x27;æ‹‰å–é…ç½®æ–‡ä»¶&#x27;) {&lt;br/&gt;              steps {&lt;br/&gt;                  checkout([$class: &#x27;GitSCM&#x27;, &lt;br/&gt;                  branches: [[name: &#x27;$branch&#x27;]],&lt;br/&gt;                  doGenerateSubmoduleConfigurations: false, &lt;br/&gt;                  extensions: [[$class: &#x27;RelativeTargetDirectory&#x27;, relativeTargetDir: &#x27;conf&#x27;]], &lt;br/&gt;                  submoduleCfg: [],&lt;br/&gt;                  userRemoteConfigs: [[credentialsId: &#x27;gitlab-cert&#x27;, url: &#x27;ssh://git@192.168.1.180:2222/root/go-zero-looklook-pro-conf.git&#x27;]]])&lt;br/&gt;              }   &lt;br/&gt;      }&lt;br/&gt;&lt;br/&gt;      stage(&#x27;goctlç‰ˆæœ¬æ£€æµ‹&#x27;) {&lt;br/&gt;          steps{&lt;br/&gt;              sh &#x27;/usr/local/bin/goctl -v&#x27;&lt;br/&gt;          }&lt;br/&gt;      }&lt;br/&gt;      &lt;br/&gt;      stage(&#x27;Dockerfile Build&#x27;) {&lt;br/&gt;          steps{&lt;br/&gt;                 sh &#x27;yes | cp  -rf conf/${JOB_NAME}/${type}/${JOB_NAME}.yaml  app/${JOB_NAME}/cmd/${type}/etc&#x27;   //çº¿ä¸Šé…ç½®æ–‡ä»¶&lt;br/&gt;                 sh &#x27;cd app/${JOB_NAME}/cmd/${type} &amp;amp;&amp;amp; /usr/local/bin/goctl docker -go ${JOB_NAME}.go &amp;amp;&amp;amp; ls -l&#x27;&lt;br/&gt;                 script{&lt;br/&gt;                     env.image = sh(returnStdout: true, script: &#x27;echo ${JOB_NAME}-${type}:${commit_id}&#x27;).trim()&lt;br/&gt;                 }&lt;br/&gt;                 sh &#x27;echo é•œåƒåç§°ï¼š${image} &amp;amp;&amp;amp; cp app/${JOB_NAME}/cmd/${type}/Dockerfile ./  &amp;amp;&amp;amp; ls -l &amp;amp;&amp;amp; docker build  -t ${image} .&#x27;&lt;br/&gt;          }&lt;br/&gt;      }&lt;br/&gt;&lt;br/&gt;      stage(&#x27;ä¸Šä¼ åˆ°é•œåƒä»“åº“&#x27;) {&lt;br/&gt;          steps{&lt;br/&gt;            //docker login è¿™é‡Œè¦æ³¨æ„ï¼Œä¼šæŠŠè´¦å·å¯†ç è¾“å‡ºåˆ°jenkinsé¡µé¢ï¼Œå¯ä»¥é€šè¿‡port.shç±»ä¼¼æ–¹å¼å¤„ç†ï¼Œå®˜ç½‘æ–‡æ¡£æœ‰è¿™é‡Œæˆ‘å°±ä¸è¯¦ç»†å†™äº†&lt;br/&gt;              sh &#x27;docker login --username=${docker_username} --password=${docker_pwd} http://${docker_repo}&#x27; &lt;br/&gt;              sh &#x27;docker tag  ${image} ${docker_repo}/go-zero-looklook/${image}&#x27;&lt;br/&gt;              sh &#x27;docker push ${docker_repo}/go-zero-looklook/${image}&#x27;&lt;br/&gt;          }&lt;br/&gt;      }&lt;br/&gt;&lt;br/&gt;      stage(&#x27;éƒ¨ç½²åˆ°k8s&#x27;) {&lt;br/&gt;          steps{&lt;br/&gt;              script{&lt;br/&gt;                  env.deployYaml = sh(returnStdout: true, script: &#x27;echo ${JOB_NAME}-${type}-deploy.yaml&#x27;).trim()&lt;br/&gt;                  env.port=sh(returnStdout: true, script: &#x27;/root/port.sh ${JOB_NAME}-${type}&#x27;).trim()&lt;br/&gt;              }&lt;br/&gt;&lt;br/&gt;              sh &#x27;echo ${port}&#x27;&lt;br/&gt;&lt;br/&gt;              sh &#x27;rm -f ${deployYaml}&#x27;&lt;br/&gt;              sh &#x27;/usr/local/bin/goctl kube deploy -secret docker-login -replicas 2 -nodePort 3${port} -requestCpu 200 -requestMem 50 -limitCpu 300 -limitMem 100 -name ${JOB_NAME}-${type} -namespace go-zero-looklook -image ${docker_repo}/${image} -o ${deployYaml} -port ${port} --home /root/template&#x27;&lt;br/&gt;              sh &#x27;/usr/local/bin/kubectl apply -f ${deployYaml}&#x27;&lt;br/&gt;          }&lt;br/&gt;      }&lt;br/&gt;&lt;br/&gt;       stage(&#x27;Clean&#x27;) {&lt;br/&gt;           steps{&lt;br/&gt;               sh &#x27;docker rmi -f ${image}&#x27;&lt;br/&gt;               sh &#x27;docker rmi -f ${docker_repo}/${image}&#x27;&lt;br/&gt;               cleanWs notFailBuild: true&lt;br/&gt;           }&lt;br/&gt;       }&lt;br/&gt;  }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;éå¸¸é‡è¦ï¼ï¼ï¼&lt;/p&gt;&lt;/blockquote&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;æ„å»ºä¼˜åŒ–ï¼špiplineä¸­ç”Ÿæˆdockerfileçš„æ—¶å€™ï¼Œæˆ‘ä»¬æ˜¯ä½¿ç”¨k8sæ–¹å¼éƒ¨ç½²ä¸éœ€è¦etcdï¼Œä½†æ˜¯è¿™ç§æ–¹å¼éƒ¨ç½²éœ€è¦æŒ‡å®šè´¦å·ï¼ˆæœ‰å»k8sçš„endpointsä¸­getçš„æƒé™ï¼Œä½¿ç”¨é»˜è®¤defaultå°±å¥½äº†ï¼Œæ¯æ¬¡åˆ›å»ºä¸€ä¸ªæ–°çš„å‘½åç©ºé—´k8sä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»ºå¥½ä¸€ä¸ªdefaultï¼‰ï¼Œä½†æ˜¯ä½¿ç”¨goctl ç”Ÿæˆçš„ k8s ymlæ²¡æœ‰æ·»åŠ æŒ‡å®šè´¦å·é€‰é¡¹ï¼Œè¿™ä¸ªå·²ç»åé¦ˆäº†ï¼Œå¯èƒ½åç»­ç‰ˆæœ¬ä¼šåŠ ä¸Šï¼Œè¿™é‡Œæˆ‘ä»¬ä¹Ÿç”¨æ¨¡ç‰ˆåšäº†ï¼ŒåŒæ ·æ¨¡ç‰ˆæ˜¯åœ¨é¡¹ç›®ç›®å½•ä¸‹https://github.com/Mikaelemmmm/go-zero-looklook/tree/main/deploy/goctlï¼Œpiplineä¸­æ„å»ºæŒ‡å®šè¿™ä¸ªæ¨¡ç‰ˆå³å¯&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;span role=&quot;presentation&quot; data-formula=&quot;{credentialsId}è¦æ›¿æ¢ä¸ºä½ çš„å…·ä½“å‡­æ®å€¼ï¼Œå³ã€æ·»åŠ å‡­æ®ã€‘æ¨¡å—ä¸­çš„ä¸€ä¸²å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬ä¹‹å‰é…ç½®çš„æ˜¯gitlab-certæ‰€ä»¥è¿™é‡Œå°±å¡«å†™gitlab-certï¼Œå¦‚æœä½ ä¸æ˜¯è¿™ä¸ªè‡ªå·±è¦æ›´æ¢ï¼Œ&quot; data-formula-type=&quot;inline-equation&quot;&gt;&lt;embed src=&quot;https://mmbiz.qlogo.cn/mmbiz_svg/eHEMOF2hOektZTKdT8Qbw5qLiaRyrSF0pz5UWqEjoY9T9YibROhBocSqMGviaFvxEJuGmo97CqTTwxfYLWdDaelsG6mRRvXCt8M/0?wx_fmt=svg&quot; data-type=&quot;svg+xml&quot;/&gt;&lt;/span&gt;&lt;/span&gt;{gitUrl}éœ€è¦æ›¿æ¢ä¸ºä½ ä»£ç çš„gitä»“åº“åœ°å€ï¼Œå…¶ä»–çš„${xxx}å½¢å¼çš„å˜é‡æ— éœ€ä¿®æ”¹ï¼Œä¿æŒåŸæ ·å³å¯ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;è¿™é‡Œè·Ÿå®˜æ–¹æ–‡æ¡£æœ‰ä¸€ç‚¹ç‚¹ä¸ä¸€æ ·ï¼Œç”±äºæˆ‘é¡¹ç›®æ–‡ä»¶å¤¹ç›®å½•ä¸åŒï¼Œgoctlç”Ÿæˆçš„dockerfileæ–‡ä»¶æˆ‘æ‰‹åŠ¨åšäº†ç‚¹è°ƒæ•´ï¼Œåœ¨ä¸€ä¸ªæˆ‘ä¸æ˜¯åœ¨æ„å»ºæ—¶å€™ç”Ÿæˆçš„dockerfileï¼Œæ˜¯åœ¨åˆ›å»ºé¡¹ç›®æ—¶å€™å°±æŠŠdockerfileä¸€èµ·æ”¾åœ¨ç›®å½•ä¸‹ï¼Œè¿™æ ·æ„å»ºé•œåƒæ—¶å€™ä¸éœ€è¦goctläº†&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;5ã€é…ç½®k8sæ‹‰å–ç§æœ‰ä»“åº“é•œåƒ&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;k8såœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œåªèƒ½æ‹‰å–harboré•œåƒä»“åº“çš„å…¬æœ‰é•œåƒï¼Œå¦‚æœæ‹‰å–ç§æœ‰ä»“åº“é•œåƒï¼Œåˆ™æ˜¯ä¼šæŠ¥ &lt;code&gt;ErrImagePull&lt;/code&gt; å’Œ &lt;code&gt;ImagePullBackOff&lt;/code&gt; çš„é”™è¯¯&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;1ã€å…ˆåœ¨jenkinså‘å¸ƒæœºå™¨ç™»é™†harbor&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt;Â dockerÂ loginÂ 192.168.1.180:8077&lt;/span&gt;&lt;br/&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt;Â Username:Â admin&lt;/span&gt;&lt;br/&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt;Â Password:&lt;/span&gt;&lt;br/&gt;LoginÂ Succeeded&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;2ã€åœ¨k8sä¸­ç”Ÿæˆç™»é™†harboré…ç½®æ–‡ä»¶&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;æŸ¥çœ‹ä¸Šä¸€æ­¥ç™»é™†harborç”Ÿæˆçš„å‡­è¯&lt;/span&gt;&lt;br/&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt;Â catÂ /root/.docker/config.jsonÂ Â &lt;/span&gt;&lt;br/&gt;{&lt;br/&gt;Â &quot;auths&quot;:Â {&lt;br/&gt;Â Â &quot;192.168.1.180:8077&quot;:Â {&lt;br/&gt;Â Â Â &quot;auth&quot;:Â &quot;YWRtaW46SGFyYm9yMTIzNDU=&quot;&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3ã€å¯¹ç§˜é’¥æ–‡ä»¶è¿›è¡Œbase64åŠ å¯†&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt;Â catÂ /root/.docker/config.jsonÂ Â |Â base64Â -wÂ 0&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;ewoJImF1dGhzIjogewoJCSIxOTIuMTY4LjEuMTgwOjgwNzciOiB7CgkJCSJhdXRoIjogIllXUnRhVzQ2U0dGeVltOXlNVEl6TkRVPSIKCQl9Cgl9Cn0=&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;4ã€åˆ›å»ºdocker-secret.yaml&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;apiVersion:&lt;/span&gt;Â &lt;span&gt;v1&lt;/span&gt;&lt;br/&gt;&lt;span&gt;kind:&lt;/span&gt;Â &lt;span&gt;Secret&lt;/span&gt;&lt;br/&gt;&lt;span&gt;metadata:&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;name:&lt;/span&gt;Â &lt;span&gt;docker-login&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type:&lt;/span&gt;Â &lt;span&gt;kubernetes.io/dockerconfigjson&lt;/span&gt;&lt;br/&gt;&lt;span&gt;data:&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;.dockerconfigjson:&lt;/span&gt;Â &lt;span&gt;ewoJImF1dGhzIjogewoJCSIxOTIuMTY4LjEuMTgwOjgwNzciOiB7CgkJCSJhdXRoIjogIllXUnRhVzQ2U0dGeVltOXlNVEl6TkRVPSIKCQl9Cgl9Cn0=&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt;Â kubectlÂ createÂ -fÂ docker-secret.yamlÂ -nÂ go-zero-looklook&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;secretÂ &quot;docker-login&quot;Â created&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;6ã€æ„å»º&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬è¿›å…¥é¦–é¡µï¼Œç‚¹å‡»idenityè¿›å…¥è¯¦æƒ…é¡µ&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.3606194690265487&quot; data-type=&quot;png&quot; data-w=&quot;2712&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/UyIojWicPOg1lD21MxibvrUhYysDRVboP29o30Ez1waD905PMerib30YUXCAcRxREibMkjibN0GgNicic2Z1ECgd0LdLA/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç„¶åå¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢æˆ‘ä»¬é…ç½®å¥½çš„identityæœåŠ¡ï¼Œå¦‚ä¸‹å›¾ ï¼Œç‚¹å‡»â€œBuild with Parametersâ€ï¼Œ ç„¶åé€‰æ‹©rpc,ç‚¹å‡»â€œå¼€å§‹æ„å»ºâ€&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.4875749785775493&quot; data-type=&quot;png&quot; data-w=&quot;2334&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/UyIojWicPOg1lD21MxibvrUhYysDRVboP2YiardibibRFYdibowADB0Nup3MeX7bsDILLcjwBG3SZ6Lm3UUUdM7ng32A/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ç¬¬ä¸€æ¬¡æ„å»ºåœ¨æ‹‰ä»£ç æ—¶å€™éƒ½ä¼šå¤±è´¥ï¼Œåº”è¯¥æ˜¯åˆå§‹åŒ–å•¥ä¸œè¥¿ï¼Œå†ç‚¹ä¸€æ¬¡å°±å¥½äº†ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;éƒ¨ç½²æˆåŠŸ&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.15276851234156105&quot; data-type=&quot;png&quot; data-w=&quot;2998&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/UyIojWicPOg1lD21MxibvrUhYysDRVboP2iaY7o3S21jyWr9UqiaqRy8aa9YJdXarATa8Gy6ObzvJezcctjicRkbQWQ/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.39063761097659405&quot; data-type=&quot;png&quot; data-w=&quot;2478&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/UyIojWicPOg1lD21MxibvrUhYysDRVboP2MUqlsNlIYDdYBFjl0dvpu6M8SqXROSPMuq5d2z76eFwZsyoHDP3D6A/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.36278735632183906&quot; data-type=&quot;png&quot; data-w=&quot;2784&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/UyIojWicPOg1lD21MxibvrUhYysDRVboP2tByG9TnN1FRFWIWmNGJvW4zib5bvPa51DvyFNGicuTNfTHickUBX2zeyQ/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŒæ ·é“ç†ï¼Œå»æ„å»ºidentity-apiï¼Œå†å»é…ç½®usercenteræœåŠ¡ æ„å»ºusercenter-rpcã€æ„å»ºusercenter-apiï¼Œæ¥ç€é…ç½®å…¶ä»–æœåŠ¡ã€æ„å»ºå³å¯ï¼Œæœ¬æ¬¡æˆ‘ä»¬å…ˆåªæ„å»ºidentity-apiã€identity-rpcã€usercenter-rpcã€usercenter-apiç»™å¤§å®¶æ¼”ç¤ºã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;6ã€æ·»åŠ ç½‘å…³&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å› ä¸ºæˆ‘ä»¬çš„apiæœåŠ¡é€šè¿‡goctlå‘å¸ƒåœ¨k8sä¸­éƒ½ä¼šæš´éœ²nodeportç«¯å£ï¼Œç´¢å¼•æˆ‘ä»¬çœ‹ä¸‹k8sä¸­go-zero-looklookå‘½åç©ºé—´ä¸‹çš„serviceçš„nodeportç«¯å£æœåŠ¡ï¼Œç„¶åå°†nodeporté…ç½®åœ¨nignxå³å¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬æ¬¡æˆ‘ä»¬ç‹¬ç«‹ä¸€å°è™šæ‹Ÿæœºåœ¨k8sä¹‹å¤–ï¼Œå®‰è£…nginxï¼Œå°†k8såç«¯apiæœåŠ¡é€šè¿‡nodeportæ–¹å¼æŠŠç«¯å£æš´éœ²ç»™nginxï¼Œç„¶ånginxåœ¨é…ç½®ä¸­é…ç½®æ­¤apiæœåŠ¡ï¼Œè¿™æ ·nginxå°±å……å½“ç½‘å…³ä½¿ç”¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;nginxçš„å®‰è£…å°±ä¸å†è¿™é‡Œå¤šè¯´äº†ï¼Œè®°å¾—ä¸€å®šè¦æœ‰auth_requestæ¨¡å—ï¼Œæ²¡æœ‰çš„è¯è‡ªå·±å»å®‰è£…ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;nginxçš„é…ç½®&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;server{&lt;br/&gt;    listen 8081;&lt;br/&gt;    access_log /var/log/nginx/looklook.com_access.log;&lt;br/&gt;    error_log /var/log/nginx//looklook.com_error.log;&lt;br/&gt;&lt;br/&gt;    location /auth {&lt;br/&gt;    internal;&lt;br/&gt;      proxy_set_header X-Original-URI $request_uri;&lt;br/&gt;    proxy_pass_request_body off;&lt;br/&gt;    proxy_set_header Content-Length &quot;&quot;;&lt;br/&gt;    proxy_pass http://192.168.1.182:31001/identity/v1/verify/token;&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    location ~ /usercenter/ {&lt;br/&gt;       auth_request /auth;&lt;br/&gt;       auth_request_set $user $upstream_http_x_user;&lt;br/&gt;       proxy_set_header x-user $user;&lt;br/&gt;&lt;br/&gt;       proxy_set_header Host $http_host;&lt;br/&gt;       proxy_set_header X-Real-IP $remote_addr;&lt;br/&gt;       proxy_set_header REMOTE-HOST $remote_addr;&lt;br/&gt;       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;&lt;br/&gt;       proxy_pass http://192.168.1.182:31002;&lt;br/&gt;   }&lt;br/&gt;&lt;br/&gt;   location ~ /travel/ {&lt;br/&gt;       auth_request /auth;&lt;br/&gt;       auth_request_set $user $upstream_http_x_user;&lt;br/&gt;       proxy_set_header x-user $user;&lt;br/&gt;&lt;br/&gt;       proxy_set_header Host $http_host;&lt;br/&gt;       proxy_set_header X-Real-IP $remote_addr;&lt;br/&gt;       proxy_set_header REMOTE-HOST $remote_addr;&lt;br/&gt;       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;&lt;br/&gt;       proxy_pass http://192.168.1.182:31003;&lt;br/&gt;   }&lt;br/&gt;&lt;br/&gt;   location ~ /order/ {&lt;br/&gt;       auth_request /auth;&lt;br/&gt;       auth_request_set $user $upstream_http_x_user;&lt;br/&gt;       proxy_set_header x-user $user;&lt;br/&gt;&lt;br/&gt;       proxy_set_header Host $http_host;&lt;br/&gt;       proxy_set_header X-Real-IP $remote_addr;&lt;br/&gt;       proxy_set_header REMOTE-HOST $remote_addr;&lt;br/&gt;       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;&lt;br/&gt;       proxy_pass http://192.168.1.182:31004;&lt;br/&gt;   }&lt;br/&gt;&lt;br/&gt;   location ~ /payment/ {&lt;br/&gt;       auth_request /auth;&lt;br/&gt;       auth_request_set $user $upstream_http_x_user;&lt;br/&gt;       proxy_set_header x-user $user;&lt;br/&gt;&lt;br/&gt;       proxy_set_header Host $http_host;&lt;br/&gt;       proxy_set_header X-Real-IP $remote_addr;&lt;br/&gt;       proxy_set_header REMOTE-HOST $remote_addr;&lt;br/&gt;       proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;&lt;br/&gt;       proxy_pass http://192.168.1.182:31005;&lt;br/&gt;   }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæ˜¯çº¿ä¸Šçš„è¯ï¼Œåº”è¯¥é…ç½®å¤šå°nignxä¿æŒé«˜å¯ç”¨ï¼Œåœ¨nignxå‰é¢è¿˜ä¼šæœ‰ä¸€ä¸ªslbï¼Œä½ çš„åŸŸååŒ…æ‹¬httpsé…ç½®éƒ½åº”è¯¥è§£æåˆ°slbï¼Œåœ¨slbå‰é¢åœ¨æœ‰é˜²ç«å¢™ç­‰è¿™äº›ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;8ã€ç»“æŸè¯­&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è‡³æ­¤ï¼Œæ•´ä¸ªç³»åˆ—å°±ç»“æŸäº†ï¼Œæ•´ä½“æ¶æ„å›¾åº”è¯¥å¦‚ç¬¬ä¸€ç¯‡æ‰€å±•ç¤ºï¼Œæœ¬ç³»åˆ—å¸Œæœ›èƒ½ç»™ä½ å¸¦æ¥å¸®åŠ©ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;é¡¹ç›®åœ°å€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;https://github.com/zeromicro/go-zero&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¬¢è¿ä½¿ç”¨ &lt;code&gt;go-zero&lt;/code&gt; å¹¶ &lt;strong&gt;star&lt;/strong&gt; æ”¯æŒæˆ‘ä»¬ï¼&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å¾®ä¿¡äº¤æµç¾¤&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…³æ³¨ã€&lt;strong&gt;å¾®æœåŠ¡å®è·µ&lt;/strong&gt;ã€å…¬ä¼—å·å¹¶ç‚¹å‡» &lt;strong&gt;äº¤æµç¾¤&lt;/strong&gt; è·å–ç¤¾åŒºç¾¤äºŒç»´ç ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>