<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>b462a383663daf8a1cf7330deed624c5</guid>
<title>è·¨Mysqlã€Redisã€Mongoçš„åˆ†å¸ƒå¼äº‹åŠ¡</title>
<link>https://toutiao.io/k/246clz1</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                                                                     &quot; id=&quot;js_content&quot;&gt;
            &lt;p&gt;Mysqlã€Redisã€Mongoéƒ½æ˜¯éå¸¸æµè¡Œçš„å­˜å‚¨ï¼Œå¹¶ä¸”å„è‡ªæœ‰è‡ªå·±çš„ä¼˜åŠ¿ã€‚åœ¨å®é™…çš„åº”ç”¨ä¸­ï¼Œå¸¸å¸¸ä¼šåŒæ—¶ä½¿ç”¨å¤šç§å­˜å‚¨ï¼Œä¹Ÿä¼šé‡è§åœ¨å¤šç§å­˜å‚¨ä¸­ä¿è¯æ•°æ®ä¸€è‡´æ€§çš„éœ€æ±‚ï¼Œä¾‹å¦‚ä¿è¯æ•°æ®åº“ä¸­çš„åº“å­˜å’ŒRedisä¸­çš„åº“å­˜ä¸€è‡´ç­‰ã€‚&lt;/p&gt;&lt;p&gt;æœ¬æ–‡åŸºäºåˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ &lt;span&gt;https://github.com/dtm-labs/dtm&lt;/span&gt; ç»™å‡ºäº†ä¸€ä¸ªè·¨Mysqlã€Redisã€Mongoå¤šç§å­˜å‚¨å¼•æ“çš„ä¸€ä¸ªå¯è¿è¡Œçš„åˆ†å¸ƒå¼äº‹åŠ¡å®ä¾‹ï¼Œå¸Œæœ›èƒ½å¤Ÿå¸®åŠ©å¤§å®¶è§£å†³è¿™æ–¹é¢çš„é—®é¢˜ã€‚&lt;/p&gt;&lt;p&gt;è¿™ç§çµæ´»çš„ç»„åˆå¤šä¸ªå­˜å‚¨å¼•æ“å½¢æˆä¸€ä¸ªåˆ†å¸ƒå¼äº‹åŠ¡çš„èƒ½åŠ›ï¼Œä¹Ÿæ˜¯dtmé¦–åˆ›åšåˆ°çš„ï¼Œç›®å‰æœªçœ‹åˆ°å…¶ä»–çš„åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶æœ‰è¿™æ ·çš„èƒ½åŠ›ã€‚&lt;/p&gt;&lt;h2&gt;é—®é¢˜åœºæ™¯&lt;/h2&gt;&lt;p&gt;æˆ‘ä»¬å…ˆæ¥çœ‹é—®é¢˜åœºæ™¯ï¼Œå‡å®šç°åœ¨ç”¨æˆ·å‚åŠ ä¸€æ¬¡æ´»åŠ¨ï¼Œå°†è‡ªå·±çš„ä½™é¢ï¼Œå……å€¼è¯è´¹ï¼ŒåŒæ—¶æ´»åŠ¨ä¼šèµ é€å•†åŸç§¯åˆ†ã€‚å…¶ä¸­ä½™é¢å­˜å‚¨åœ¨Mysqlï¼Œè¯è´¹ä¿å­˜åœ¨Redisï¼Œå•†åŸç§¯åˆ†ä¿å­˜åœ¨Mongoï¼Œå¹¶ä¸”ç”±äºæ´»åŠ¨é™æ—¶ï¼Œå› æ­¤å¯èƒ½å‡ºç°å‚åŠ æ´»åŠ¨å¤±è´¥çš„æƒ…å†µï¼Œæ‰€ä»¥éœ€è¦æ”¯æŒå›æ»šã€‚&lt;/p&gt;&lt;p&gt;å¯¹äºä¸Šè¿°é—®é¢˜åœºæ™¯ï¼Œå¯ä»¥ä½¿ç”¨DTMçš„Sagaäº‹åŠ¡ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥è¯¦ç»†è®²è§£æ–¹æ¡ˆã€‚&lt;/p&gt;&lt;h2&gt;å‡†å¤‡æ•°æ®&lt;/h2&gt;&lt;p&gt;é¦–å…ˆæ˜¯å‡†å¤‡æ•°æ®ï¼Œä¸ºäº†æ–¹ä¾¿ç”¨æˆ·å¿«é€Ÿä¸Šæ‰‹ç›¸å…³çš„ä¾‹å­ï¼Œæˆ‘ä»¬å·²ç»æŠŠç›¸å…³çš„æ•°æ®å‡†å¤‡å¥½äº†ï¼Œåœ°å€åœ¨en.dtm.pubï¼Œé‡Œé¢åŒ…æ‹¬Mysqlã€Redisã€Mongoï¼Œå…·ä½“çš„è¿æ¥ç”¨æˆ·åå¯†ç å¯ä»¥åœ¨&lt;span&gt;https://github.com/dtm-labs/dtm-examples&lt;/span&gt;æ‰¾åˆ°ã€‚&lt;/p&gt;&lt;p&gt;å¦‚æœæ‚¨æƒ³è¦è‡ªå·±åœ¨æœ¬åœ°å‡†å¤‡ç›¸å…³çš„æ•°æ®ç¯å¢ƒï¼Œå¯ä»¥é€šè¿‡Â &lt;span&gt;https://github.com/dtm-labs/dtm/blob/main/helper/compose.store.yml&lt;/span&gt;Â å¯åŠ¨Mysqlã€Redisã€Mongoï¼Œç„¶åé€šè¿‡&lt;span&gt;https://github.com/dtm-labs/dtm/tree/main/sqls&lt;/span&gt;ä¸‹é¢çš„è„šæœ¬å‡†å¤‡æœ¬ä¾‹å­çš„æ•°æ®ï¼Œå…¶ä¸­&lt;code&gt;busi.*&lt;/code&gt;ä¸ºä¸šåŠ¡æ•°æ®ï¼Œ&lt;code&gt;barrier.*&lt;/code&gt;ä¸ºDTMä½¿ç”¨çš„è¾…åŠ©è¡¨&lt;/p&gt;&lt;h2&gt;ç¼–å†™ä¸šåŠ¡ä»£ç &lt;/h2&gt;&lt;p&gt;æˆ‘ä»¬å…ˆçœ‹æœ€ç†Ÿæ‚‰çš„Mysqlçš„ä¸šåŠ¡ä»£ç &lt;/p&gt;&lt;pre&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;SagaAdjustBalance&lt;/span&gt;&lt;span&gt;(db dtmcli.DB, uid &lt;span&gt;int&lt;/span&gt;, amount &lt;span&gt;int&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt; &lt;span&gt;error&lt;/span&gt; {&lt;br/&gt;    _, err := dtmimp.DBExec(db, &lt;span&gt;&quot;update dtm_busi.user_account set balance = balance + ? where user_id = ?&quot;&lt;/span&gt;, amount, uid)&lt;br/&gt;    &lt;span&gt;return&lt;/span&gt; err&lt;br/&gt;}&lt;/pre&gt;&lt;p&gt;è¿™æ®µä»£ç ä¸»è¦æ˜¯è¿›è¡Œæ•°æ®åº“ä¸­ç”¨æˆ·ä½™é¢çš„è°ƒæ•´&lt;/p&gt;&lt;p&gt;å¯¹äºSagaäº‹åŠ¡æ¨¡å¼æ¥è¯´ï¼Œå½“æˆ‘ä»¬å›æ»šæ—¶ï¼Œæˆ‘ä»¬éœ€è¦åå‘è°ƒæ•´ä½™é¢ï¼Œè¿™éƒ¨åˆ†çš„å¤„ç†ï¼Œæˆ‘ä»¬å¯ä»¥ä¾æ—§è°ƒç”¨ä¸Šè¿°çš„&lt;code&gt;SagaAdjustBalance&lt;/code&gt;ï¼Œåªéœ€è¦ä¼ å…¥è´Ÿæ•°çš„é‡‘é¢å³å¯ã€‚&lt;/p&gt;&lt;p&gt;å¯¹äºRediså’ŒMongoï¼Œä¸šåŠ¡ä»£ç çš„å¤„ç†ä¹Ÿæ˜¯ç±»ä¼¼çš„ï¼Œåªéœ€è¦å¯¹ç›¸åº”çš„ä½™é¢è¿›è¡Œå¢å‡å³å¯&lt;/p&gt;&lt;h2&gt;å¦‚ä½•åšå¹‚ç­‰&lt;/h2&gt;&lt;p&gt;å¯¹äºSagaäº‹åŠ¡æ¨¡å¼æ¥è¯´ï¼Œå½“æˆ‘ä»¬çš„å­äº‹åŠ¡æœåŠ¡å‡ºç°ä¸´æ—¶æ•…éšœï¼Œå‡ºç°æ•…éšœå°±ä¼šè¿›è¡Œé‡è¯•ï¼Œè¿™ä¸ªæ•…éšœå¯èƒ½å‡ºç°åœ¨å­äº‹åŠ¡æäº¤å‰ï¼Œä¹Ÿå¯èƒ½å‡ºç°åœ¨å­äº‹åŠ¡æäº¤ä¹‹åï¼Œå› æ­¤å­äº‹åŠ¡æœåŠ¡å°±éœ€è¦åšåˆ°å¹‚ç­‰ã€‚&lt;/p&gt;&lt;p&gt;DTM æä¾›äº†è¾…åŠ©è¡¨å’Œè¾…åŠ©çš„å‡½æ•°ï¼Œç”¨äºå¸®åŠ©ç”¨æˆ·å¿«é€Ÿå®ç°å¹‚ç­‰ã€‚å¯¹äºMysqlï¼Œä»–ä¼šåœ¨ä¸šåŠ¡æ•°æ®åº“ä¸­åˆ›å»ºè¾…åŠ©è¡¨barrierï¼Œå½“ç”¨æˆ·å¼€å¯äº‹åŠ¡è°ƒæ•´ä½™é¢æ—¶ï¼Œä¼šå…ˆåœ¨barrierè¡¨ä¸­å†™å…¥gidï¼Œå¦‚æœè¿™æ˜¯ä¸€ä¸ªé‡å¤è¯·æ±‚ï¼Œé‚£ä¹ˆå†™å…¥gidæ—¶ï¼Œä¼šå‘ç°é‡å¤è€Œå¤±è´¥ï¼Œæ­¤æ—¶è·³è¿‡ç”¨æˆ·ä¸šåŠ¡ä¸Šçš„ä½™é¢è°ƒæ•´ï¼Œä¿è¯å¹‚ç­‰ã€‚è¾…åŠ©å‡½æ•°çš„ä½¿ç”¨ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre&gt;app.POST(BusiAPI+&lt;span&gt;&quot;/SagaBTransIn&quot;&lt;/span&gt;, dtmutil.WrapHandler2(&lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(c *gin.Context)&lt;/span&gt;&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;{} {&lt;br/&gt;    &lt;span&gt;return&lt;/span&gt; MustBarrierFromGin(c).Call(txGet(), &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(tx *sql.Tx)&lt;/span&gt;&lt;/span&gt; &lt;span&gt;error&lt;/span&gt; {&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; SagaAdjustBalance(tx, TransInUID, reqFrom(c).Amount, reqFrom(c).TransInResult)&lt;br/&gt;    })&lt;br/&gt;}))&lt;/pre&gt;&lt;p&gt;Mongoå¤„ç†å¹‚ç­‰çš„åŸç†ä¸Mysqlç›¸è¿‘ï¼Œä¸å†èµ˜è¿°&lt;/p&gt;&lt;p&gt;Rediså¤„ç†å¹‚ç­‰çš„åŸç†ä¸Mysqlä¸åŒï¼Œä¸»è¦æ˜¯å› ä¸ºäº‹åŠ¡çš„åŸç†ä¸åŒã€‚Redisçš„äº‹åŠ¡ä¸»è¦æ˜¯é€šè¿‡luaçš„åŸå­æ‰§è¡Œæ¥ä¿è¯çš„ã€‚DTMçš„è¾…åŠ©å‡½æ•°ä¼šé€šè¿‡luaè„šæœ¬æ¥è°ƒæ•´ä½™é¢ï¼Œè°ƒæ•´ä½™é¢å‰ï¼Œä¼šåœ¨redisä¸­æŸ¥è¯¢gidï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ™è·³è¿‡ä¸šåŠ¡ä¸Šçš„ä½™é¢è°ƒæ•´ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ‰§è¡Œä¸šåŠ¡ä¸Šçš„ä½™é¢è°ƒæ•´ã€‚è¾…åŠ©å‡½æ•°çš„ä½¿ç”¨ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre&gt;app.POST(BusiAPI+&lt;span&gt;&quot;/SagaRedisTransOut&quot;&lt;/span&gt;, dtmutil.WrapHandler2(&lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(c *gin.Context)&lt;/span&gt;&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;{} {&lt;br/&gt;    &lt;span&gt;return&lt;/span&gt; MustBarrierFromGin(c).RedisCheckAdjustAmount(RedisGet(), GetRedisAccountKey(TransOutUID), -reqFrom(c).Amount, &lt;span&gt;7&lt;/span&gt;*&lt;span&gt;86400&lt;/span&gt;)&lt;br/&gt;}))&lt;/pre&gt;&lt;h2&gt;å¦‚ä½•åšè¡¥å¿&lt;/h2&gt;&lt;p&gt;å¯¹äºSagaæ¥è¯´ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¤„ç†è¡¥å¿æ“ä½œï¼Œä½†è¡¥å¿æ“ä½œå¹¶ä¸æ˜¯ç®€å•çš„åå‘è°ƒæ•´ï¼Œä¹Ÿæœ‰å¾ˆå¤šå‘éœ€è¦æ³¨æ„ï¼Œå¦åˆ™å¾ˆå®¹æ˜“è¡¥å¿å‡ºé”™ã€‚&lt;br/&gt;ä¸€æ–¹é¢ï¼Œè¡¥å¿éœ€è¦è€ƒè™‘å¹‚ç­‰ï¼Œå› ä¸ºåœ¨è¡¥å¿è¿‡ç¨‹ä¸­ï¼Œä¹ŸåŒæ ·éœ€è¦è€ƒè™‘æ•…éšœé‡è¯•çš„æƒ…å†µï¼Œä¸å‰ä¸€å°èŠ‚ä¸­çš„å¹‚ç­‰å¤„ç†ä¸€æ ·ã€‚å¦ä¸€æ–¹é¢ï¼Œè¡¥å¿è¿˜éœ€è¦è€ƒè™‘ç©ºè¡¥å¿ï¼Œå› ä¸ºæ­£å‘åˆ†æ”¯è¿”å›å¤±è´¥ï¼Œè¿™ä¸ªå¤±è´¥å¯èƒ½æ˜¯åœ¨æ­£å‘çš„æ•°æ®å·²ç»è°ƒæ•´å®Œæˆæäº¤ä¹‹åçš„å¤±è´¥ï¼Œä¹Ÿå¯èƒ½æ˜¯è¿˜æ²¡æœ‰æäº¤å°±è¿”å›äº†å¤±è´¥ã€‚å¯¹äºæ•°æ®å·²æäº¤çš„å¤±è´¥ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œåå‘æ“ä½œï¼Œå¯¹äºæ•°æ®æœªæäº¤çš„å¤±è´¥ï¼Œæˆ‘ä»¬éœ€è¦è·³è¿‡åå‘æ“ä½œï¼Œå³å¤„ç†ç©ºè¡¥å¿ã€‚&lt;/p&gt;&lt;p&gt;DTM æä¾›çš„è¾…åŠ©è¡¨ä¸è¾…åŠ©å‡½æ•°ä¸­ï¼Œä¸€æ–¹é¢ä¼šæ ¹æ®æ­£å‘æ“ä½œæ’å…¥çš„gidåˆ¤æ–­æ˜¯å¦ä¸ºç©ºè¡¥å¿ï¼Œå¦ä¸€æ–¹é¢è¿˜ä¼šå†æ’å…¥gid+&#x27;compensate&#x27;ï¼Œåˆ¤æ–­è¡¥å¿æ˜¯å¦ä¸ºé‡å¤æ“ä½œã€‚å¦‚æœæ˜¯æ­£å¸¸è¡¥å¿æ“ä½œï¼Œé‚£ä¹ˆä¼šæ‰§è¡Œä¸šåŠ¡ä¸Šçš„è¡¥å¿ï¼Œå¦‚æœæ˜¯ç©ºè¡¥å¿æˆ–è€…é‡å¤è¡¥å¿ï¼Œåˆ™ä¼šè·³è¿‡è¡¥å¿ä¸šåŠ¡ä¸Šçš„è¡¥å¿ã€‚&lt;/p&gt;&lt;p&gt;Mysqlçš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre&gt;app.POST(BusiAPI+&lt;span&gt;&quot;/SagaBTransInCom&quot;&lt;/span&gt;, dtmutil.WrapHandler2(&lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(c *gin.Context)&lt;/span&gt;&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;{} {&lt;br/&gt;    &lt;span&gt;return&lt;/span&gt; MustBarrierFromGin(c).Call(txGet(), &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(tx *sql.Tx)&lt;/span&gt;&lt;/span&gt; &lt;span&gt;error&lt;/span&gt; {&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; SagaAdjustBalance(tx, TransInUID, -reqFrom(c).Amount, &lt;span&gt;&quot;&quot;&lt;/span&gt;)&lt;br/&gt;    })&lt;br/&gt;}))&lt;/pre&gt;&lt;p&gt;Redisçš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre&gt;app.POST(BusiAPI+&lt;span&gt;&quot;/SagaRedisTransOutCom&quot;&lt;/span&gt;, dtmutil.WrapHandler2(&lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(c *gin.Context)&lt;/span&gt;&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;{} {&lt;br/&gt;    &lt;span&gt;return&lt;/span&gt; MustBarrierFromGin(c).RedisCheckAdjustAmount(RedisGet(), GetRedisAccountKey(TransOutUID), reqFrom(c).Amount, &lt;span&gt;7&lt;/span&gt;*&lt;span&gt;86400&lt;/span&gt;)&lt;br/&gt;}))&lt;/pre&gt;&lt;p&gt;è¡¥å¿ä»£ç ä¸å‰é¢çš„æ­£å‘æ“ä½œä»£ç å‡ ä¹ä¸€æ ·ï¼Œä»…ä»…æ˜¯æŠŠé‡‘é¢ä¹˜ä»¥-1ã€‚DTM çš„è¾…åŠ©å‡½æ•°ä¼šåœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨åŒæ—¶åŒ…å«äº†å¹‚ç­‰ä¸è¡¥å¿çš„ç›¸å…³é€»è¾‘&lt;/p&gt;&lt;h2&gt;å…¶ä»–å¼‚å¸¸&lt;/h2&gt;&lt;p&gt;ç¼–å†™å­äº‹åŠ¡ä»¥åŠå­äº‹åŠ¡çš„è¡¥å¿æ—¶ï¼Œå…¶å®è¿˜æœ‰ä¸€ç§å¼‚å¸¸æƒ…å†µæ˜¯æ‚¬æŒ‚ï¼Œå¯èƒ½å‡ºç°åœ¨å…¨å±€äº‹åŠ¡è¶…æ—¶å›æ»šï¼Œæˆ–è€…é‡è¯•åˆ°è¾¾ä¸Šçº¿åå›æ»šï¼Œæ­£å¸¸æƒ…å†µæ˜¯å…ˆæ­£å‘æ“ä½œå†è¡¥å¿ï¼Œä½†æ˜¯æç«¯æƒ…å†µå¯èƒ½å‡ºç°å…ˆè¡¥å¿å†æ­£å‘æ“ä½œï¼Œå› æ­¤æ­£å‘æ“ä½œè¿˜éœ€è¦åˆ¤æ–­è¡¥å¿æ˜¯å¦å·²æ‰§è¡Œï¼Œå·²æ‰§è¡Œçš„æƒ…å†µä¸‹ï¼Œä¹Ÿéœ€è¦è·³è¿‡ä¸šåŠ¡æ“ä½œã€‚&lt;/p&gt;&lt;p&gt;å¯¹äºDTMçš„ç”¨æˆ·è€Œè¨€ï¼Œè¿™äº›å¼‚å¸¸éƒ½å·²ç»è¢«ä¼˜é›…çš„å¦¥å–„å¤„ç†ï¼Œæ‚¨ä½œä¸ºç”¨æˆ·ï¼Œåªéœ€è¦æŒ‰ç…§ä¸Šè¿°çš„&lt;code&gt;MustBarrierFromGin(c).Call&lt;/code&gt;è¿›è¡Œè°ƒç”¨å³å¯ï¼Œå®Œå…¨ä¸å†éœ€è¦å…³å¿ƒè¿™äº›å¼‚å¸¸ã€‚DTM å¤„ç†è¿™äº›å¼‚å¸¸çš„åŸç†åœ¨è¿™é‡Œè¿›è¡Œäº†è¯¦ç»†çš„è®²è¿°ï¼šå¼‚å¸¸ä¸å­äº‹åŠ¡å±éšœ&lt;/p&gt;&lt;h2&gt;å‘èµ·åˆ†å¸ƒå¼äº‹åŠ¡&lt;/h2&gt;&lt;p&gt;å‰é¢ç¼–å†™å®Œäº†å„ä¸ªå­äº‹åŠ¡æœåŠ¡ï¼Œä¸‹é¢è¿™éƒ¨åˆ†ä»£ç å‘èµ·ä¸€ä¸ªSagaå…¨å±€äº‹åŠ¡ï¼š&lt;/p&gt;&lt;pre&gt;saga := dtmcli.NewSaga(dtmutil.DefaultHTTPServer, dtmcli.MustGenGid(dtmutil.DefaultHTTPServer)).&lt;br/&gt;  Add(busi.Busi+&lt;span&gt;&quot;/SagaBTransOut&quot;&lt;/span&gt;, busi.Busi+&lt;span&gt;&quot;/SagaBTransOutCom&quot;&lt;/span&gt;, &amp;amp;busi.TransReq{Amount: &lt;span&gt;50&lt;/span&gt;}).&lt;br/&gt;  Add(busi.Busi+&lt;span&gt;&quot;/SagaMongoTransIn&quot;&lt;/span&gt;, busi.Busi+&lt;span&gt;&quot;/SagaMongoTransInCom&quot;&lt;/span&gt;, &amp;amp;busi.TransReq{Amount: &lt;span&gt;30&lt;/span&gt;}).&lt;br/&gt;  Add(busi.Busi+&lt;span&gt;&quot;/SagaRedisTransIn&quot;&lt;/span&gt;, busi.Busi+&lt;span&gt;&quot;/SagaRedisTransOutIn&quot;&lt;/span&gt;, &amp;amp;busi.TransReq{Amount: &lt;span&gt;20&lt;/span&gt;})&lt;br/&gt;err := saga.Submit()&lt;/pre&gt;&lt;p&gt;åœ¨è¿™éƒ¨åˆ†ä»£ç ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ªSagaå…¨å±€äº‹åŠ¡ï¼Œè¯¥Sagaäº‹åŠ¡åŒ…æ‹¬3ä¸ªå­äº‹åŠ¡ï¼š&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;ä»Mysqlä¸­è½¬å‡º50&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;å‘Mongoä¸­è½¬å…¥30&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;å‘Redisä¸­è½¬å…¥20&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;åœ¨æ•´ä¸ªäº‹åŠ¡è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ‰€æœ‰çš„å­äº‹åŠ¡éƒ½é¡ºåˆ©å®Œæˆï¼Œé‚£ä¹ˆå…¨å±€äº‹åŠ¡æˆåŠŸï¼›å¦‚æœæœ‰ä¸€ä¸ªå­äº‹åŠ¡è¿”å›äº†ä¸šåŠ¡ä¸Šçš„å¤±è´¥ï¼Œé‚£ä¹ˆå…¨å±€äº‹åŠ¡å›æ»šã€‚&lt;/p&gt;&lt;h2&gt;è¿è¡Œ&lt;/h2&gt;&lt;p&gt;å¦‚æœæ‚¨æƒ³è¦å®Œæ•´è¿è¡Œä¸€ä¸ªä¸Šé¢çš„ç¤ºä¾‹ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;è¿è¡Œdtm&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;pre&gt;git &lt;span&gt;clone&lt;/span&gt; https://github.com/dtm-labs/dtm &amp;amp;&amp;amp; &lt;span&gt;cd&lt;/span&gt; dtm&lt;br/&gt;go run main.go&lt;/pre&gt;&lt;ol class=&quot;list-paddingleft-1&quot; start=&quot;2&quot;&gt;&lt;li&gt;&lt;p&gt;è¿è¡ŒæˆåŠŸçš„ä¾‹å­&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;pre&gt;git &lt;span&gt;clone&lt;/span&gt; https://github.com/dtm-labs/dtm-examples &amp;amp;&amp;amp; &lt;span&gt;cd&lt;/span&gt; dtm-examples&lt;br/&gt;go run main.go http_saga_multidb&lt;/pre&gt;&lt;ol class=&quot;list-paddingleft-1&quot; start=&quot;3&quot;&gt;&lt;li&gt;&lt;p&gt;è¿è¡Œå¤±è´¥çš„ä¾‹å­&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;pre&gt;git &lt;span&gt;clone&lt;/span&gt; https://github.com/dtm-labs/dtm-examples &amp;amp;&amp;amp; &lt;span&gt;cd&lt;/span&gt; dtm-examples&lt;br/&gt;go run main.go http_saga_multidb_rollback&lt;/pre&gt;&lt;p&gt;æ‚¨å¯ä»¥å¯¹ä¾‹å­è¿›è¡Œä¿®æ”¹ï¼Œæ¨¡æ‹Ÿå„ç§ä¸´æ—¶çš„æ•…éšœï¼Œç©ºè¡¥å¿çš„æƒ…å†µï¼Œä»¥åŠå…¶ä»–å„ç§å¼‚å¸¸ï¼Œå½“æ•´ä¸ªå…¨å±€äº‹åŠ¡æœ€ç»ˆå®Œæˆæ—¶ï¼Œæ•°æ®æ˜¯ä¸€è‡´çš„ã€‚&lt;/p&gt;&lt;h2&gt;å°ç»“&lt;/h2&gt;&lt;p&gt;æœ¬æ–‡ç»™å‡ºäº†ä¸€ä¸ªè·¨Mysqlã€Redisã€Mongoçš„åˆ†å¸ƒå¼äº‹åŠ¡ä¾‹å­ï¼Œè¯¦ç»†è®²è§£äº†å…¶ä¸­éœ€è¦å¤„ç†çš„é—®é¢˜ï¼Œä»¥åŠè§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;&lt;p&gt;æœ¬æ–‡çš„åŸç†é€‚åˆäºæ‰€æœ‰æ”¯æŒACIDäº‹åŠ¡çš„å­˜å‚¨å¼•æ“ï¼Œæ‚¨å¯ä»¥å°†å®ƒå¿«é€Ÿæ‰©å±•ï¼Œç”¨äºå…¶ä»–å¼•æ“ï¼Œä¾‹å¦‚TiKVç­‰ã€‚&lt;/p&gt;&lt;h2&gt;è”ç³»æˆ‘ä»¬&lt;/h2&gt;&lt;p&gt;é¡¹ç›®åœ°å€ï¼šhttps://github.com/dtm-labs/dtm æ¬¢è¿è®¿é—®ï¼Œå¹¶staræ”¯æŒæˆ‘ä»¬&lt;/p&gt;&lt;p&gt;å…³æ³¨ã€åˆ†å¸ƒå¼äº‹åŠ¡ã€‘å…¬ä¼—å·ï¼Œè·å¾—æ›´å¤šåˆ†å¸ƒå¼äº‹åŠ¡ç›¸å…³çŸ¥è¯†&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzIwNzQ2NzMyNg==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/9m9OfQX94Vv04GUcaMFCzcfHeGnTECibTEibP26ByiaHcdD7qYLNFAyQcDvbVBerQs55hXppwia3XpPjIYF3MKGzVQ/0?wx_fmt=png&quot; data-nickname=&quot;åˆ†å¸ƒå¼äº‹åŠ¡&quot; data-alias=&quot;wangxiyan0901&quot; data-signature=&quot;ä»‹ç»åˆ†å¸ƒå¼äº‹åŠ¡ç›¸å…³ç†è®ºä¸å®è·µçŸ¥è¯†ã€‚ å¼€æºé¡¹ç›®yedf/dtmçš„ç›¸å…³ä¿¡æ¯å‘å¸ƒã€‚&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;
          &lt;/div&gt;

          

          



           
                                
                    
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>7eb2edfa4655815e302f0ef9f5b57bb4</guid>
<title>äº‘æ‰ç½‘ç»œï½œMetaFlowå³å°†å¼€æºï¼5æœˆ11æ—¥â€œè®©è§‚æµ‹æ›´è‡ªåŠ¨ï¼Œè®©å¼€å‘è€…æ›´è‡ªç”±â€</title>
<link>https://toutiao.io/k/djdvbzm</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                                                                     &quot; id=&quot;js_content&quot;&gt;
            &lt;p&gt;&lt;span&gt;åŸºäºåœ¨æ··åˆäº‘ç¯å¢ƒä¸‹çš„å¤šå¹´è€•è€˜ï¼Œäº‘æ‰ç½‘ç»œè‡ªä¸»ç ”å‘çš„äº‘ç›‘æ§æœåŠ¡å¹³å°DeepFlowå·²åœ¨é‡‘èã€ç”µä¿¡ã€èƒ½æºç­‰è¡Œä¸šä¸­çš„æ•°åå®¶ä¸–ç•Œäº”ç™¾å¼ºå®¢æˆ·å¤„å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ã€‚&lt;span&gt;&lt;strong&gt;æˆ‘ä»¬å®£å¸ƒå°†DeepFlowæ ¸å¿ƒçš„å¯è§‚æµ‹æ€§æ•°æ®å¼•æ“MetaFlowæ­£å¼å¼€æºï¼ˆ5æœˆ11æ—¥æ­æ™“ï¼‰&lt;/strong&gt;&lt;/span&gt;ï¼Œæˆ‘ä»¬å¸Œæœ›å°†æ›´å¥½çš„å¯è§‚æµ‹æ€§èƒ½åŠ›ã€è‡ªåŠ¨è¿½è¸ªå’Œè‡ªåŠ¨æ ‡ç­¾èƒ½åŠ›å¼€æ”¾åˆ°æ•´ä¸ªè¡Œä¸šï¼Œå¸®åŠ©ä¼ä¸šå®¢æˆ·æ”¹è¿›äº‘åŸç”Ÿè¿ç»´å·¥ä½œçš„è¿è¡Œæ•ˆç‡ã€ç¨³å®šæ€§å’Œè®¡ç®—æˆæœ¬ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-role=&quot;outer&quot; label=&quot;edit by 135editor&quot;&gt;&lt;section data-role=&quot;title&quot; data-tools=&quot;135ç¼–è¾‘å™¨&quot; data-id=&quot;89460&quot;&gt;&lt;section&gt;&lt;section data-width=&quot;100%&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.832&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/j6qn90Jia7aurmWHcbEACtRNjsTdZ4FHcciaTS9dBmHP2K2hLLjCUuKTpANbOgYeZxkyoK354eZibIr36ohQ9OicLA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;125&quot;/&gt;&lt;p data-brushtype=&quot;text&quot;&gt;&lt;span&gt;&lt;strong&gt;MetaFlowæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;MetaFlowæ˜¯ä¸€ä¸ª&lt;span&gt;&lt;strong&gt;é«˜åº¦è‡ªåŠ¨åŒ–çš„å¯è§‚æµ‹æ€§å¹³å°&lt;/strong&gt;&lt;/span&gt;ï¼Œæ˜¯ä¸ºäº‘åŸç”Ÿåº”ç”¨å¼€å‘è€…å»ºè®¾å¯è§‚æµ‹æ€§è€Œé‡èº«æ‰“é€ çš„å…¨æ ˆã€å…¨é“¾è·¯ã€é«˜æ€§èƒ½æ•°æ®å¼•æ“ã€‚&lt;/span&gt;&lt;span&gt;&lt;strong&gt;MetaFlowçš„AutoTracing&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;èƒ½åŠ›&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;åˆ›æ–°çš„ä½¿ç”¨eBPFå®ç°è‡ªåŠ¨åŒ–çš„åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ª&lt;/span&gt;&lt;span&gt;ï¼Œå¹¶è‡ªåŠ¨å…³è”OpenTelemetryå®ç°çœŸæ­£çš„äº‘åŸç”Ÿç¯å¢ƒ&lt;span&gt;å…¨æ ˆã€&lt;/span&gt;å…¨é“¾è·¯è¿½è¸ªã€‚&lt;/span&gt;&lt;span&gt;&lt;strong&gt;MetaFlowçš„AutoTaggingæœºåˆ¶&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;èƒ½å¤Ÿè‡ªåŠ¨ä¸ºæ‰€æœ‰è§‚æµ‹æ•°æ®æ³¨å…¥ä¸°å¯Œçš„äº‘åŸç”Ÿèµ„æºå±æ€§ã€APIå±æ€§æ ‡ç­¾&lt;/span&gt;&lt;span&gt;ï¼Œæ‰“ç ´æ•°æ®å­¤å²›ï¼Œé‡Šæ”¾æ•°æ®çš„ä¸‹é’»åˆ‡åˆ†èƒ½åŠ›ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;MetaFlowæ‹¥æœ‰å¼€æ”¾çš„æ¶æ„&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ï¼ŒåŸºäºWASMçš„å¯ç¼–ç¨‹åº”ç”¨åè®®è§£æèƒ½åŠ›ã€å¯æ‰©å±•çš„è§‚æµ‹æ•°æ®æºã€æ’ä»¶å¼çš„åˆ†ææ•°æ®åº“æ¥å£ã€ç»Ÿä¸€çš„SQLæŸ¥è¯¢æ¥å£ï¼Œè®©ä½¿ç”¨è€…å¯å°†å…¶å¿«é€Ÿèå…¥è‡ªå·±çš„å¯è§‚æµ‹æ€§å¹³å°ä¸­ã€‚&lt;/span&gt;&lt;span&gt;&lt;strong&gt;MetaFlowæ˜“äºç»´æŠ¤&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ï¼Œä»…ç”±Agentã€Serverä¸¤ä¸ªç»„ä»¶æ„æˆï¼Œæ— éœ€ä¾èµ–ä»»ä½•å…¶ä»–ç»„ä»¶å³å¯å®ç°æ°´å¹³æ‰©å±•ä¸è´Ÿè½½å‡è¡¡ã€‚&lt;/span&gt;&lt;span&gt;&lt;strong&gt;MetaFlowè¿½æ±‚æä½çš„èµ„æºæ¶ˆè€—&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ï¼Œä½¿ç”¨Rustå®ç°é‡‡é›†å™¨ï¼Œé€šè¿‡SmartEncodingå®ç°10å€æ€§èƒ½çš„æ•°æ®æ ‡ç­¾æ³¨å…¥ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-role=&quot;outer&quot; label=&quot;edit by 135editor&quot;&gt;&lt;section data-role=&quot;title&quot; data-tools=&quot;135ç¼–è¾‘å™¨&quot; data-id=&quot;89460&quot;&gt;&lt;section&gt;&lt;section data-width=&quot;100%&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.832&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/j6qn90Jia7aurmWHcbEACtRNjsTdZ4FHcciaTS9dBmHP2K2hLLjCUuKTpANbOgYeZxkyoK354eZibIr36ohQ9OicLA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;125&quot;/&gt;&lt;p data-brushtype=&quot;text&quot;&gt;&lt;span&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆè¦å¼€æºï¼Ÿ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;å»ºè®¾å¯è§‚æµ‹æ€§å·²ç»æˆä¸ºäº‘åŸç”Ÿåº”ç”¨å¼€å‘è€…çš„å¿…è¦å·¥ä½œï¼Œç„¶è€Œç°æœ‰çš„è§£å†³æ–¹æ¡ˆæ­£æ‚„æ— å£°æ¯çš„æ¶ˆè€—ç€å¼€å‘è€…è¶Šæ¥è¶Šå¤šçš„æ—¶é—´ã€‚å¼€å‘è€…éœ€è¦è€ƒè™‘å¦‚ä½•åŸ‹ç‚¹æ’ç ï¼Œå¦‚ä½•ä¼ é€’è¿½è¸ªä¸Šä¸‹æ–‡ï¼Œå¦‚ä½•å…³è”ä¸åŒç±»å‹çš„æ•°æ®ï¼Œå¦‚ä½•æ§åˆ¶æ•°æ®çš„çŒ–ç—å¢é•¿ï¼Œå¦‚ä½•é¿å…é«˜åŸºæ ‡ç­¾ï¼Œå¦‚ä½•ç»´æŠ¤è¶Šæ¥è¶Šå¤æ‚çš„å¹³å°ï¼Œè¿™äº›å·¥ä½œä¸¥é‡æŒ¤å äº†ä¸šåŠ¡å¼€å‘å·¥ä½œçš„æ—¶é—´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;MetaFlowæ‹¥æŠ±å¼€æºç¤¾åŒºï¼Œè®¾è®¡äº†è‰¯å¥½çš„æ•°æ®æºã€å­˜å‚¨ã€å¯è§†åŒ–æ‰©å±•èƒ½åŠ›ã€‚é€šè¿‡MetaFlowï¼Œæˆ‘ä»¬å¸Œæœ›&lt;/span&gt;&lt;span&gt;&lt;strong&gt;è®©è§‚æµ‹æ›´è‡ªåŠ¨ï¼Œè®©å¼€å‘è€…æ›´è‡ªç”±&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/section&gt;&lt;p/&gt;&lt;section&gt;&lt;span/&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å‘å¸ƒå†…å®¹ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;MetaFlowï¼šå¼€æºçš„é«˜åº¦è‡ªåŠ¨åŒ–å¯è§‚æµ‹æ€§å¹³å°&lt;/strong&gt;&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;å‘å¸ƒæ–¹å¼ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;strong&gt;çº¿ä¸Šå¤šå¹³å°ç›´æ’­&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ï¼ˆ&lt;/span&gt;&lt;span&gt;äº‘æ‰ç½‘ç»œè§†é¢‘å·ã€å¼€æºä¸­å›½è§†é¢‘å·ã€äº‘åŸç”Ÿç¤¾åŒºè§†é¢‘å·ã€å¼€æºç¤¾KAIYUANSHEè§†é¢‘å·ã€ç¤ºè¯´å¹³å°ç­‰ï¼‰&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å‘å¸ƒæ—¶é—´ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;2022å¹´5æœˆ11æ—¥ æ™š20:00ï½21:30&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/section&gt;&lt;section class=&quot;channels_iframe_wrp&quot;&gt;&lt;mpvideosnap class=&quot;js_uneditable custom_select_card channels_live_iframe&quot; data-pluginname=&quot;videosnap&quot; data-headimgurl=&quot;https://wx.qlogo.cn/finderhead/zVWR28oR4EQlYWARgp79CfZGRAbn06k1Y6CdErMu5fQ/0&quot; data-username=&quot;v2_060000231003b20faec8c7e08911c0ddc807eb31b077550620f62b06b6e9891cfe048009add4@finder&quot; data-nickname=&quot;äº‘æ‰ç½‘ç»œ&quot; data-desc=&quot;å°†åœ¨05æœˆ11æ—¥ 20:00 ç›´æ’­&quot; data-intro=&quot;ã€ŠMetaFlowï¼šå¼€æºçš„é«˜åº¦è‡ªåŠ¨åŒ–å¯è§‚æµ‹æ€§å¹³å°ã€‹&quot; data-noticeid=&quot;finderlivenotice-v2_060000231003b20faec8c7e08911c0ddc807eb31b077550620f62b06b6e9891cfe048009add4@finder-1651673179224998-570728353&quot; data-type=&quot;live&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;562&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;1217&quot; data-galleryid=&quot;&quot; data-ratio=&quot;2.1658615136876005&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j6qn90Jia7aurmWHcbEACtRNjsTdZ4FHcBXQU1P9My2xicC8SqWqBQUS2liaJW7IpB9zPSbX16D0bhnOibqLmlBZYQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1242&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-role=&quot;outer&quot; label=&quot;edit by 135editor&quot;&gt;&lt;section&gt;&lt;section data-width=&quot;100%&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;p data-brushtype=&quot;text&quot;&gt;&lt;strong&gt;&lt;span&gt;æ¼”è®²ä¸»é¢˜&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;span/&gt;ã€ŠMetaFlowï¼šå¼€æºçš„é«˜åº¦è‡ªåŠ¨åŒ–å¯è§‚æµ‹æ€§å¹³å°ã€‹â€”â€” äº‘æ‰ç½‘ç»œ ç ”å‘VP å‘é˜³&lt;/span&gt;&lt;/p&gt;&lt;section data-role=&quot;outer&quot; label=&quot;edit by 135editor&quot;&gt;&lt;section&gt;&lt;section data-width=&quot;100%&quot;&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-width=&quot;100%&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;p data-brushtype=&quot;text&quot;&gt;&lt;strong&gt;&lt;span&gt;æ¼”è®²å†…å®¹&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;p data-brushtype=&quot;text&quot;&gt;&lt;strong&gt;&lt;span&gt;å¬ä¼—å—ç›Š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;â€œ&lt;/span&gt;&lt;span&gt;&lt;strong&gt;è®©è§‚æµ‹æ›´è‡ªåŠ¨ï¼Œè®©å¼€å‘è€…æ›´è‡ªç”±&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;â€ï¼Œé€šè¿‡æ­¤æ¬¡åˆ†äº«ä½ èƒ½äº†è§£æˆ‘ä»¬å¦‚ä½•ä»ç»†èŠ‚çš„è½¯ä»¶æ¶æ„è®¾è®¡ä¸­ä½“ç°å¯¹è¿™ä¸€ä½¿å‘½çš„è¿½æ±‚ï¼Œè€Œä¸”ä¹Ÿèƒ½çœ‹åˆ°eBPFã€AutoTracingã€AutoTaggingã€SmartEncodingç­‰æ–°æŠ€æœ¯åœ¨å¯è§‚æµ‹æ€§é¢†åŸŸæå¯Œåˆ›æ–°çš„è½åœ°å®è·µã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;æƒ³è¦äº†è§£æ›´å¤šMetaFlowä¿¡æ¯ï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-role=&quot;outer&quot; label=&quot;edit by 135editor&quot;&gt;&lt;section data-id=&quot;103251&quot; data-tools=&quot;135ç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;strong&gt;æ‰«ç äºŒç»´ç &lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;è”ç³»æˆ‘ä»¬&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;60&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;60&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j6qn90Jia7aurmWHcbEACtRNjsTdZ4FHc9JLtKzbRCvvBW6bqF9BH9EpfsH2B4icVOLshA9mttsib1K9vlOuCtXuw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;860&quot; data-width=&quot;100%&quot; title=&quot;æˆ‘çš„ä¼ä¸šå¾®ä¿¡äºŒç»´ç .jpeg&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-width=&quot;100%&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.9913793103448276&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j6qn90Jia7aurmWHcbEACtRNjsTdZ4FHc6UDwfjfCyOoCKLL2RVicYnDvQLhx7X4k253fCJicPNic1ibetWZhtPBpAg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;116&quot; data-width=&quot;100%&quot; title=&quot;MetaFlowäº¤æµç¾¤5.5.jpeg&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-width=&quot;100%&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;å…³æ³¨äº‘æ‰å…¬ä¼—å·Â  Â MetaFlowäº¤æµç¾¤&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å®˜ç½‘é“¾æ¥ï¼šhttps://deepflow.yunshan.net/metaflow.html&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼ˆç‚¹å‡»æ–‡ç« æœ«å°¾ã€&lt;strong&gt;é˜…è¯»åŸæ–‡&lt;/strong&gt;ã€‘å¯ç›´æ¥è·³è½¬ï¼‰&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&amp;gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;p data-brushtype=&quot;text&quot;&gt;&lt;strong&gt;&lt;span&gt;è§‚çœ‹ç›´æ’­èµ¢å¤§å¥–Â &lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;outer&quot; label=&quot;edit by 135editor&quot;&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-role=&quot;outer&quot; label=&quot;edit by 135editor&quot;&gt;&lt;section data-tools=&quot;135ç¼–è¾‘å™¨&quot; data-id=&quot;94621&quot;&gt;&lt;section data-width=&quot;100%&quot;&gt;&lt;section data-width=&quot;50%&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/j6qn90Jia7aurmWHcbEACtRNjsTdZ4FHcHhQKic0UrKsia5SH3UnYOvWW0hrKmtC4K0lbj2GicDAc1qCjugxbZAv8A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;535&quot; data-width=&quot;100%&quot; title=&quot;&quot;/&gt;&lt;/section&gt;&lt;section data-width=&quot;50%&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j6qn90Jia7aurmWHcbEACtRNjsTdZ4FHcI3njjVycVOEJBgSibMWF4XpjPs6gx0BiaUjLX0QLrBskaX8ib2jVy0C6A/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;300&quot; data-width=&quot;100%&quot; title=&quot;äº¬ä¸œå¡æ­£æ–¹å›¾.jpg&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-width=&quot;100%&quot;&gt;&lt;section data-width=&quot;50%&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/j6qn90Jia7aurmWHcbEACtRNjsTdZ4FHcpHNSJcDMtQKoQ6M4NXzCEkHqSfwsYbtplibpH2sTGr7d4rWIosmzeEw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;466&quot; data-width=&quot;100%&quot; title=&quot;&quot;/&gt;&lt;/section&gt;&lt;section data-width=&quot;50%&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j6qn90Jia7aurmWHcbEACtRNjsTdZ4FHcLeCEzJ2S7TD7b1N97micibkAzAb4s0A5qVpPjQIBchP5hJ48rXzbG9Og/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;300&quot; data-width=&quot;100%&quot; title=&quot;é¼ æ ‡å«æ­£æ–¹å›¾.jpg&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-role=&quot;paragraph&quot;&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;5æœˆ11æ—¥&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;â€œ&lt;strong&gt;è®©è§‚æµ‹æ›´è‡ªåŠ¨ï¼Œè®©å¼€å‘è€…æ›´è‡ªç”±&lt;/strong&gt;â€&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;ä¸è§ä¸æ•£&lt;/strong&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;section data-tools=&quot;135ç¼–è¾‘å™¨&quot; data-id=&quot;94089&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section data-width=&quot;25%&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;RECOMMEND&lt;/section&gt;&lt;section data-width=&quot;25%&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;æ¨èé˜…è¯»&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzA3ODM4ODIzNQ==&amp;amp;mid=2650724094&amp;amp;idx=1&amp;amp;sn=47beef2188b52b25d5f0de274df1243e&amp;amp;chksm=8749fb9ab03e728c11ba3f0c6826ed9d46de76c875b69451d7a20907e3fb43b104e1ec0bc061&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;â€â€&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;1&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;&lt;span class=&quot;js_jump_icon h5_image_link&quot; data-positionback=&quot;static&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;562&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;113&quot; data-fileid=&quot;503239848&quot; data-ratio=&quot;0.2&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j6qn90Jia7auJryibpuIN7ubiakfFvbQEZXPZaeickgC93ZG8MicTRtmwtIbfPQ9zNusBOqW8cA8xGxbLbibhYelB4xg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1000&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzA3ODM4ODIzNQ==&amp;amp;mid=2650723832&amp;amp;idx=1&amp;amp;sn=d8e08eaade71d0da21e9c26f5cc020cc&amp;amp;chksm=8749f89cb03e718aac169d5006c3d4f4c11fcdbbfbdb2b58c7e018a815b7a01a500c28620003&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;â€â€&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;1&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;&lt;span class=&quot;js_jump_icon h5_image_link&quot; data-positionback=&quot;static&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;562&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;113&quot; data-fileid=&quot;503239847&quot; data-ratio=&quot;0.2&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j6qn90Jia7auKx6zQH7ICibiaC4CuSYXaic68LibDWRHXsbrsicAhTzM3lFNxN8Y99NaKn18FJDPA6FwbJCvBE7lCrpw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1000&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzA3ODM4ODIzNQ==&amp;amp;mid=2650723892&amp;amp;idx=1&amp;amp;sn=86532f2eba7c95d7720e22d68252871c&amp;amp;chksm=8749fb50b03e724697461bba371a65c54cf915a07a7e331717db6e24c5159f3ad3886644c997&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;â€â€&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;1&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;&lt;span class=&quot;js_jump_icon h5_image_link&quot; data-positionback=&quot;static&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;562&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;113&quot; data-fileid=&quot;503239846&quot; data-ratio=&quot;0.2&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j6qn90Jia7aundLHUlntWzGylymqyNS5icbx6a6TEFLFrpicSwlMshGBFFN5Ex0XMgDua6OUVkY2UQ4ibLrcicFH05Q/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1000&quot;/&gt;&lt;/span&gt;&lt;/a&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;ğŸŒ²&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;562&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;562&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j6qn90Jia7aurmWHcbEACtRNjsTdZ4FHc7v4kEloVptJfia9GT719fUd3VTmqcKpibEq7J6mOb0qZumU0N1WFficVA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;900&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;ã€é˜…è¯»åŸæ–‡ã€‘&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;Â &lt;strong&gt;ç‚¹å‡»å‰å¾€MetaFlowå®˜æ–¹ç½‘ç«™ï¼&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
          &lt;/div&gt;

          

          



           
                                
                    
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>3ca786f3e9ff2e6e2d13a4b5f4bb09f0</guid>
<title>TCP é‡ä¼ ã€æ»‘åŠ¨çª—å£ã€æµé‡æ§åˆ¶ã€æ‹¥å¡æ§å¥½éš¾ï¼Ÿçœ‹å®Œå›¾è§£å°±ä¸æ„äº†ï¼ˆé‡åˆ¶ï¼‰</title>
<link>https://toutiao.io/k/14tz08l</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7619047619047619&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZclQSAM41A1ZnFukibKNKGiapfQQZJOKziaehj1pZzNHTicFkDKBMhTBzjZjys2GHM2nWd3LWt5SA7y0A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1344&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä½œè€…ï¼šå°æ—coding&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å›¾è§£ç½‘ç«™ï¼š&lt;/span&gt;&lt;span&gt;https://xiaolincoding.com/&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å°æ—ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¾ˆæ—©ä¹‹å‰å†™äº†è¿™ç¯‡æ–‡ç« ï¼š&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUxODAzNDg4NQ==&amp;amp;mid=2247484017&amp;amp;idx=1&amp;amp;sn=dc54d43bfd5dc088e48adcfa2e2bc13f&amp;amp;chksm=f98e46dbcef9cfcdab645e79138deb078d68ad843b3e424408974bd8f0ecea620a2502a79230&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ä½ è¿˜åœ¨ä¸º TCP é‡ä¼ ã€æ»‘åŠ¨çª—å£ã€æµé‡æ§åˆ¶ã€æ‹¥å¡æ§åˆ¶å‘æ„å—ï¼Ÿçœ‹å®Œå›¾è§£å°±ä¸æ„äº†&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;ä½ è¿˜åœ¨ä¸º TCP é‡ä¼ ã€æ»‘åŠ¨çª—å£ã€æµé‡æ§åˆ¶ã€æ‹¥å¡æ§åˆ¶å‘æ„å—ï¼Ÿçœ‹å®Œå›¾è§£å°±ä¸æ„äº†&lt;/a&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“æ—¶æœ‰äº›å›¾ç‰‡æœ‰ä¸€äº›å°é”™è¯¯ï¼Œè€Œå…¬ä¼—å·æ–‡ç« åˆæ— æ³•æ›´æ–°å›¾ç‰‡ï¼Œæ‰€ä»¥æˆ‘çº æ­£äº†è¿™äº›å›¾ç‰‡åï¼Œé‡æ–°å‘ä¸€ä¸‹ã€‚&lt;strong&gt;&lt;span&gt;è¿˜æœ‰å¤§å®¶çœ‹æ–‡ç« çš„è¯ï¼Œè¿˜æ˜¯å°½é‡å»ç½‘ç«™ï¼ˆhttps://xiaolincoding.comï¼‰ï¼Œå› ä¸ºç½‘ç«™çš„å†…å®¹ä¼šå®æ—¶æ›´æ–°ã€‚&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯”å¦‚å¿«é€Ÿæ¢å¤çš„å›¾ï¼Œæˆ‘é‡æ–°ç”»äº†ä¸‹ï¼Œä¼šæ¯”è¾ƒå¥½ç†è§£æ–‡å­—ä¸­çš„é€»è¾‘ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.33499288762446655&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREHVKJERVdWXGjAhPUKXSUnxib37vwkekwdXicRC5Mtj40CuichWgPibOibCg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2812&quot;/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ­£æ–‡&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;TCP &lt;strong&gt;å·¨å¤æ‚&lt;/strong&gt;ï¼Œå®ƒä¸ºäº†ä¿è¯å¯é æ€§ï¼Œç”¨äº†å·¨å¤šçš„æœºåˆ¶æ¥ä¿è¯ï¼ŒçœŸæ˜¯ä¸ªã€Œä¼Ÿå¤§ã€çš„åè®®ï¼Œå†™ç€å†™ç€å‘ç°è¿™æ°´å¤ªæ·±äº†ã€‚ã€‚ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬æ–‡çš„å…¨éƒ¨å›¾ç‰‡éƒ½æ˜¯å°æ—ç»˜ç”»çš„ï¼Œéå¸¸çš„è¾›è‹¦ä¸”ç´¯ï¼Œä¸åºŸè¯äº†ï¼Œç›´æ¥è¿›å…¥æ­£æ–‡ï¼ŒGoï¼&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›¸ä¿¡å¤§å®¶éƒ½çŸ¥é“ TCP æ˜¯ä¸€ä¸ªå¯é ä¼ è¾“çš„åè®®ï¼Œé‚£å®ƒæ˜¯å¦‚ä½•ä¿è¯å¯é çš„å‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†å®ç°å¯é æ€§ä¼ è¾“ï¼Œéœ€è¦è€ƒè™‘å¾ˆå¤šäº‹æƒ…ï¼Œä¾‹å¦‚æ•°æ®çš„ç ´åã€ä¸¢åŒ…ã€é‡å¤ä»¥åŠåˆ†ç‰‡é¡ºåºæ··ä¹±ç­‰é—®é¢˜ã€‚å¦‚ä¸èƒ½è§£å†³è¿™äº›é—®é¢˜ï¼Œä¹Ÿå°±æ— ä»è°ˆèµ·å¯é ä¼ è¾“ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£ä¹ˆï¼ŒTCP æ˜¯é€šè¿‡åºåˆ—å·ã€ç¡®è®¤åº”ç­”ã€é‡å‘æ§åˆ¶ã€è¿æ¥ç®¡ç†ä»¥åŠçª—å£æ§åˆ¶ç­‰æœºåˆ¶å®ç°å¯é æ€§ä¼ è¾“çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»Šå¤©ï¼Œå°†é‡ç‚¹ä»‹ç» TCP çš„&lt;strong&gt;é‡ä¼ æœºåˆ¶ã€æ»‘åŠ¨çª—å£ã€æµé‡æ§åˆ¶ã€æ‹¥å¡æ§åˆ¶ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7201166180758017&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREvicJoYPbEZ99mThTev5XWv7IcSfdKlucGCjpz4ZnqQVlovAEibuQZgxw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1029&quot;/&gt;&lt;/figure&gt;&lt;hr data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;é‡ä¼ æœºåˆ¶&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;TCP å®ç°å¯é ä¼ è¾“çš„æ–¹å¼ä¹‹ä¸€ï¼Œæ˜¯é€šè¿‡åºåˆ—å·ä¸ç¡®è®¤åº”ç­”ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ TCP ä¸­ï¼Œå½“å‘é€ç«¯çš„æ•°æ®åˆ°è¾¾æ¥æ”¶ä¸»æœºæ—¶ï¼Œæ¥æ”¶ç«¯ä¸»æœºä¼šè¿”å›ä¸€ä¸ªç¡®è®¤åº”ç­”æ¶ˆæ¯ï¼Œè¡¨ç¤ºå·²æ”¶åˆ°æ¶ˆæ¯ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.6042654028436019&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREMlvkyHZ0bPmN5pBhEdcJrhC42VTT8bA4fQmeYGvucOpgQsry78tflg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;422&quot;/&gt;&lt;figcaption&gt;æ­£å¸¸çš„æ•°æ®ä¼ è¾“&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†åœ¨é”™ç»¼å¤æ‚çš„ç½‘ç»œï¼Œå¹¶ä¸ä¸€å®šèƒ½å¦‚ä¸Šå›¾é‚£ä¹ˆé¡ºåˆ©èƒ½æ­£å¸¸çš„æ•°æ®ä¼ è¾“ï¼Œä¸‡ä¸€æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä¸¢å¤±äº†å‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ TCP é’ˆå¯¹æ•°æ®åŒ…ä¸¢å¤±çš„æƒ…å†µï¼Œä¼šç”¨&lt;strong&gt;é‡ä¼ æœºåˆ¶&lt;/strong&gt;è§£å†³ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥ä¸‹æ¥è¯´è¯´å¸¸è§çš„é‡ä¼ æœºåˆ¶ï¼š&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¶…æ—¶é‡ä¼ &lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‡ä¼ æœºåˆ¶çš„å…¶ä¸­ä¸€ä¸ªæ–¹å¼ï¼Œå°±æ˜¯åœ¨å‘é€æ•°æ®æ—¶ï¼Œè®¾å®šä¸€ä¸ªå®šæ—¶å™¨ï¼Œå½“è¶…è¿‡æŒ‡å®šçš„æ—¶é—´åï¼Œæ²¡æœ‰æ”¶åˆ°å¯¹æ–¹çš„ &lt;code&gt;ACK&lt;/code&gt; ç¡®è®¤åº”ç­”æŠ¥æ–‡ï¼Œå°±ä¼šé‡å‘è¯¥æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„&lt;strong&gt;è¶…æ—¶é‡ä¼ &lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;TCP ä¼šåœ¨ä»¥ä¸‹ä¸¤ç§æƒ…å†µå‘ç”Ÿè¶…æ—¶é‡ä¼ ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7747252747252747&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREzeT61Vib4I3av0pZXAqEfKFbsLMeTdC7ric6eI3ZyiagyvDstv1pxKYNg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1092&quot;/&gt;&lt;figcaption&gt;è¶…æ—¶é‡ä¼ çš„ä¸¤ç§æƒ…å†µ&lt;/figcaption&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;è¶…æ—¶æ—¶é—´åº”è¯¥è®¾ç½®ä¸ºå¤šå°‘å‘¢ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯ &lt;code&gt;RTT&lt;/code&gt;ï¼ˆRound-Trip Time å¾€è¿”æ—¶å»¶ï¼‰ï¼Œä»ä¸‹å›¾æˆ‘ä»¬å°±å¯ä»¥çŸ¥é“ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8465473145780051&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREOJvkH67icJGwDvg3goGP9T7XsvmQNBOVq2REiaWxaGNodia9WBibg2zqQA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;782&quot;/&gt;&lt;figcaption&gt;RTT&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;RTT&lt;/code&gt; æŒ‡çš„æ˜¯&lt;strong&gt;æ•°æ®å‘é€æ—¶åˆ»åˆ°æ¥æ”¶åˆ°ç¡®è®¤çš„æ—¶åˆ»çš„å·®å€¼&lt;/strong&gt;ï¼Œä¹Ÿå°±æ˜¯åŒ…çš„å¾€è¿”æ—¶é—´ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¶…æ—¶é‡ä¼ æ—¶é—´æ˜¯ä»¥ &lt;code&gt;RTO&lt;/code&gt; ï¼ˆRetransmission Timeout è¶…æ—¶é‡ä¼ æ—¶é—´ï¼‰è¡¨ç¤ºã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡è®¾åœ¨é‡ä¼ çš„æƒ…å†µä¸‹ï¼Œè¶…æ—¶æ—¶é—´ &lt;code&gt;RTO&lt;/code&gt; ã€Œè¾ƒé•¿æˆ–è¾ƒçŸ­ã€æ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿ&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5991501416430595&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREjqDa1y01LMHJSyceiaDcFiczBcUbXNuE1mWPULfiaZIwoe3LSZash4jfg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1412&quot;/&gt;&lt;figcaption&gt;è¶…æ—¶æ—¶é—´è¾ƒé•¿ä¸è¾ƒçŸ­&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šå›¾ä¸­æœ‰ä¸¤ç§è¶…æ—¶æ—¶é—´ä¸åŒçš„æƒ…å†µï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å½“è¶…æ—¶æ—¶é—´ &lt;strong&gt;RTO è¾ƒå¤§&lt;/strong&gt;æ—¶ï¼Œé‡å‘å°±æ…¢ï¼Œä¸¢äº†è€åŠå¤©æ‰é‡å‘ï¼Œæ²¡æœ‰æ•ˆç‡ï¼Œæ€§èƒ½å·®ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å½“è¶…æ—¶æ—¶é—´ &lt;strong&gt;RTO è¾ƒå°&lt;/strong&gt;æ—¶ï¼Œä¼šå¯¼è‡´å¯èƒ½å¹¶æ²¡æœ‰ä¸¢å°±é‡å‘ï¼Œäºæ˜¯é‡å‘çš„å°±å¿«ï¼Œä¼šå¢åŠ ç½‘ç»œæ‹¥å¡ï¼Œå¯¼è‡´æ›´å¤šçš„è¶…æ—¶ï¼Œæ›´å¤šçš„è¶…æ—¶å¯¼è‡´æ›´å¤šçš„é‡å‘ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç²¾ç¡®çš„æµ‹é‡è¶…æ—¶æ—¶é—´ &lt;code&gt;RTO&lt;/code&gt; çš„å€¼æ˜¯éå¸¸é‡è¦çš„ï¼Œè¿™å¯è®©æˆ‘ä»¬çš„é‡ä¼ æœºåˆ¶æ›´é«˜æ•ˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ ¹æ®ä¸Šè¿°çš„ä¸¤ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥å¾—çŸ¥ï¼Œ&lt;strong&gt;è¶…æ—¶é‡ä¼ æ—¶é—´ RTO çš„å€¼åº”è¯¥ç•¥å¤§äºæŠ¥æ–‡å¾€è¿” Â RTT çš„å€¼&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7811993517017828&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvRExpxutXReoIywqBf4gdE3V4NjKnZbt9z7g84T8l7M0MaPtJZ1RNhK4g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;617&quot;/&gt;&lt;figcaption&gt;RTO åº”ç•¥å¤§äº RTT&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è‡³æ­¤ï¼Œå¯èƒ½å¤§å®¶è§‰å¾—è¶…æ—¶é‡ä¼ æ—¶é—´ &lt;code&gt;RTO&lt;/code&gt; çš„å€¼è®¡ç®—ï¼Œä¹Ÿä¸æ˜¯å¾ˆå¤æ‚å˜›ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¥½åƒå°±æ˜¯åœ¨å‘é€ç«¯å‘åŒ…æ—¶è®°ä¸‹ &lt;code&gt;t0&lt;/code&gt; ï¼Œç„¶åæ¥æ”¶ç«¯å†æŠŠè¿™ä¸ª &lt;code&gt;ack&lt;/code&gt; å›æ¥æ—¶å†è®°ä¸€ä¸ª &lt;code&gt;t1&lt;/code&gt;ï¼Œäºæ˜¯ &lt;code&gt;RTT = t1 â€“ t0&lt;/code&gt;ã€‚æ²¡é‚£ä¹ˆç®€å•ï¼Œ&lt;strong&gt;è¿™åªæ˜¯ä¸€ä¸ªé‡‡æ ·ï¼Œä¸èƒ½ä»£è¡¨æ™®éæƒ…å†µ&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®é™…ä¸Šã€ŒæŠ¥æ–‡å¾€è¿” RTT çš„å€¼ã€æ˜¯ç»å¸¸å˜åŒ–çš„ï¼Œå› ä¸ºæˆ‘ä»¬çš„ç½‘ç»œä¹Ÿæ˜¯æ—¶å¸¸å˜åŒ–çš„ã€‚ä¹Ÿå°±å› ä¸ºã€ŒæŠ¥æ–‡å¾€è¿” RTT çš„å€¼ã€ æ˜¯ç»å¸¸æ³¢åŠ¨å˜åŒ–çš„ï¼Œæ‰€ä»¥ã€Œè¶…æ—¶é‡ä¼ æ—¶é—´ RTO çš„å€¼ã€åº”è¯¥æ˜¯ä¸€ä¸ª&lt;strong&gt;åŠ¨æ€å˜åŒ–çš„å€¼&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬æ¥çœ‹çœ‹ Linux æ˜¯å¦‚ä½•è®¡ç®— &lt;code&gt;RTO&lt;/code&gt; çš„å‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¼°è®¡å¾€è¿”æ—¶é—´ï¼Œé€šå¸¸éœ€è¦é‡‡æ ·ä»¥ä¸‹ä¸¤ä¸ªï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;éœ€è¦ TCP é€šè¿‡é‡‡æ · RTT çš„æ—¶é—´ï¼Œç„¶åè¿›è¡ŒåŠ æƒå¹³å‡ï¼Œç®—å‡ºä¸€ä¸ªå¹³æ»‘ RTT çš„å€¼ï¼Œè€Œä¸”è¿™ä¸ªå€¼è¿˜æ˜¯è¦ä¸æ–­å˜åŒ–çš„ï¼Œå› ä¸ºç½‘ç»œçŠ¶å†µä¸æ–­åœ°å˜åŒ–ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é™¤äº†é‡‡æ · RTTï¼Œè¿˜è¦é‡‡æ · RTT çš„æ³¢åŠ¨èŒƒå›´ï¼Œè¿™æ ·å°±é¿å…å¦‚æœ RTT æœ‰ä¸€ä¸ªå¤§çš„æ³¢åŠ¨çš„è¯ï¼Œå¾ˆéš¾è¢«å‘ç°çš„æƒ…å†µã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;RFC6289 å»ºè®®ä½¿ç”¨ä»¥ä¸‹çš„å…¬å¼è®¡ç®— RTOï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7668393782383419&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvRE1oHvhHhd3xrl2oicNkMs9D094WrfZMgKYPOaNCPOahiakhDoE1IHQSFg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1158&quot;/&gt;&lt;figcaption&gt;RFC6289 å»ºè®®çš„ RTO è®¡ç®—&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­ &lt;code&gt;SRTT&lt;/code&gt; æ˜¯è®¡ç®—å¹³æ»‘çš„RTT ï¼Œ&lt;code&gt;DevRTR&lt;/code&gt; æ˜¯è®¡ç®—å¹³æ»‘çš„RTT ä¸ æœ€æ–° RTT çš„å·®è·ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ Linux ä¸‹ï¼Œ&lt;strong&gt;Î± = 0.125ï¼ŒÎ² = 0.25ï¼Œ Î¼ = 1ï¼Œâˆ‚ = 4&lt;/strong&gt;ã€‚åˆ«é—®æ€ä¹ˆæ¥çš„ï¼Œé—®å°±æ˜¯å¤§é‡å®éªŒä¸­è°ƒå‡ºæ¥çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœè¶…æ—¶é‡å‘çš„æ•°æ®ï¼Œå†æ¬¡è¶…æ—¶çš„æ—¶å€™ï¼Œåˆéœ€è¦é‡ä¼ çš„æ—¶å€™ï¼ŒTCP çš„ç­–ç•¥æ˜¯&lt;strong&gt;è¶…æ—¶é—´éš”åŠ å€ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¹Ÿå°±æ˜¯&lt;strong&gt;æ¯å½“é‡åˆ°ä¸€æ¬¡è¶…æ—¶é‡ä¼ çš„æ—¶å€™ï¼Œéƒ½ä¼šå°†ä¸‹ä¸€æ¬¡è¶…æ—¶æ—¶é—´é—´éš”è®¾ä¸ºå…ˆå‰å€¼çš„ä¸¤å€ã€‚ä¸¤æ¬¡è¶…æ—¶ï¼Œå°±è¯´æ˜ç½‘ç»œç¯å¢ƒå·®ï¼Œä¸å®œé¢‘ç¹åå¤å‘é€ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¶…æ—¶è§¦å‘é‡ä¼ å­˜åœ¨çš„é—®é¢˜æ˜¯ï¼Œè¶…æ—¶å‘¨æœŸå¯èƒ½ç›¸å¯¹è¾ƒé•¿ã€‚é‚£æ˜¯ä¸æ˜¯å¯ä»¥æœ‰æ›´å¿«çš„æ–¹å¼å‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äºæ˜¯å°±å¯ä»¥ç”¨ã€Œå¿«é€Ÿé‡ä¼ ã€æœºåˆ¶æ¥è§£å†³è¶…æ—¶é‡å‘çš„æ—¶é—´ç­‰å¾…ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å¿«é€Ÿé‡ä¼ &lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;TCP è¿˜æœ‰å¦å¤–ä¸€ç§&lt;strong&gt;å¿«é€Ÿé‡ä¼ ï¼ˆFast Retransmitï¼‰æœºåˆ¶&lt;/strong&gt;ï¼Œå®ƒ&lt;strong&gt;ä¸ä»¥æ—¶é—´ä¸ºé©±åŠ¨ï¼Œè€Œæ˜¯ä»¥æ•°æ®é©±åŠ¨é‡ä¼ &lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¿«é€Ÿé‡ä¼ æœºåˆ¶ï¼Œæ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢ï¼Ÿå…¶å®å¾ˆç®€å•ï¼Œä¸€å›¾èƒœåƒè¨€ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.9304482225656878&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREybzjXrmSZFSNDpjmBrC5fhdCSFsjLOmLl7f86oeabMO5Nu5zNDZoPg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;647&quot;/&gt;&lt;figcaption&gt;å¿«é€Ÿé‡ä¼ æœºåˆ¶&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ä¸Šå›¾ï¼Œå‘é€æ–¹å‘å‡ºäº† 1ï¼Œ2ï¼Œ3ï¼Œ4ï¼Œ5 ä»½æ•°æ®ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ç¬¬ä¸€ä»½ Seq1 å…ˆé€åˆ°äº†ï¼Œäºæ˜¯å°± Ack å› 2ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç»“æœ Seq2 å› ä¸ºæŸäº›åŸå› æ²¡æ”¶åˆ°ï¼ŒSeq3 åˆ°è¾¾äº†ï¼Œäºæ˜¯è¿˜æ˜¯ Ack å› 2ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åé¢çš„ Seq4 å’Œ Seq5 éƒ½åˆ°äº†ï¼Œä½†è¿˜æ˜¯ Ack å› 2ï¼Œå› ä¸º Seq2 è¿˜æ˜¯æ²¡æœ‰æ”¶åˆ°ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;å‘é€ç«¯æ”¶åˆ°äº†ä¸‰ä¸ª Ack = 2 çš„ç¡®è®¤ï¼ŒçŸ¥é“äº† Seq2 è¿˜æ²¡æœ‰æ”¶åˆ°ï¼Œå°±ä¼šåœ¨å®šæ—¶å™¨è¿‡æœŸä¹‹å‰ï¼Œé‡ä¼ ä¸¢å¤±çš„ Seq2ã€‚&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœ€åï¼Œæ”¶åˆ°äº† Seq2ï¼Œæ­¤æ—¶å› ä¸º Seq3ï¼ŒSeq4ï¼ŒSeq5 éƒ½æ”¶åˆ°äº†ï¼Œäºæ˜¯ Ack å› 6 ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ï¼Œå¿«é€Ÿé‡ä¼ çš„å·¥ä½œæ–¹å¼æ˜¯å½“æ”¶åˆ°ä¸‰ä¸ªç›¸åŒçš„ ACK æŠ¥æ–‡æ—¶ï¼Œä¼šåœ¨å®šæ—¶å™¨è¿‡æœŸä¹‹å‰ï¼Œé‡ä¼ ä¸¢å¤±çš„æŠ¥æ–‡æ®µã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¿«é€Ÿé‡ä¼ æœºåˆ¶åªè§£å†³äº†ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯è¶…æ—¶æ—¶é—´çš„é—®é¢˜ï¼Œä½†æ˜¯å®ƒä¾ç„¶é¢ä¸´ç€å¦å¤–ä¸€ä¸ªé—®é¢˜ã€‚å°±æ˜¯&lt;strong&gt;é‡ä¼ çš„æ—¶å€™ï¼Œæ˜¯é‡ä¼ ä¹‹å‰çš„ä¸€ä¸ªï¼Œè¿˜æ˜¯é‡ä¼ æ‰€æœ‰çš„é—®é¢˜ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯”å¦‚å¯¹äºä¸Šé¢çš„ä¾‹å­ï¼Œæ˜¯é‡ä¼  Seq2 å‘¢ï¼Ÿè¿˜æ˜¯é‡ä¼  Seq2ã€Seq3ã€Seq4ã€Seq5 å‘¢ï¼Ÿå› ä¸ºå‘é€ç«¯å¹¶ä¸æ¸…æ¥šè¿™è¿ç»­çš„ä¸‰ä¸ª Ack 2 æ˜¯è°ä¼ å›æ¥çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ ¹æ® TCP ä¸åŒçš„å®ç°ï¼Œä»¥ä¸Šä¸¤ç§æƒ…å†µéƒ½æ˜¯æœ‰å¯èƒ½çš„ã€‚å¯è§ï¼Œè¿™æ˜¯ä¸€æŠŠåŒåˆƒå‰‘ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†è§£å†³ä¸çŸ¥é“è¯¥é‡ä¼ å“ªäº› TCP æŠ¥æ–‡ï¼Œäºæ˜¯å°±æœ‰ &lt;code&gt;SACK&lt;/code&gt; æ–¹æ³•ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;SACK æ–¹æ³•&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿˜æœ‰ä¸€ç§å®ç°é‡ä¼ æœºåˆ¶çš„æ–¹å¼å«ï¼š&lt;code&gt;SACK&lt;/code&gt;ï¼ˆ Selective Acknowledgment é€‰æ‹©æ€§ç¡®è®¤ï¼‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ç§æ–¹å¼éœ€è¦åœ¨ TCP å¤´éƒ¨ã€Œé€‰é¡¹ã€å­—æ®µé‡ŒåŠ ä¸€ä¸ª &lt;code&gt;SACK&lt;/code&gt; çš„ä¸œè¥¿ï¼Œå®ƒ&lt;strong&gt;å¯ä»¥å°†ç¼“å­˜çš„åœ°å›¾å‘é€ç»™å‘é€æ–¹&lt;/strong&gt;ï¼Œè¿™æ ·å‘é€æ–¹å°±å¯ä»¥çŸ¥é“å“ªäº›æ•°æ®æ”¶åˆ°äº†ï¼Œå“ªäº›æ•°æ®æ²¡æ”¶åˆ°ï¼ŒçŸ¥é“äº†è¿™äº›ä¿¡æ¯ï¼Œå°±å¯ä»¥&lt;strong&gt;åªé‡ä¼ ä¸¢å¤±çš„æ•°æ®&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚ä¸‹å›¾ï¼Œå‘é€æ–¹æ”¶åˆ°äº†ä¸‰æ¬¡åŒæ ·çš„ ACK ç¡®è®¤æŠ¥æ–‡ï¼Œäºæ˜¯å°±ä¼šè§¦å‘å¿«é€Ÿé‡å‘æœºåˆ¶ï¼Œé€šè¿‡ &lt;code&gt;SACK&lt;/code&gt; ä¿¡æ¯å‘ç°åªæœ‰ &lt;code&gt;200~299&lt;/code&gt; è¿™æ®µæ•°æ®ä¸¢å¤±ï¼Œåˆ™é‡å‘æ—¶ï¼Œå°±åªé€‰æ‹©äº†è¿™ä¸ª TCP æ®µè¿›è¡Œé‡å¤ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5852795470629866&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREWPfg9Pv9YY7L2cChGwfn8Y0w4CX2gs270uMYCjicbubtxGCHTffiapmw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1413&quot;/&gt;&lt;figcaption&gt;é€‰æ‹©æ€§ç¡®è®¤&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœè¦æ”¯æŒ &lt;code&gt;SACK&lt;/code&gt;ï¼Œå¿…é¡»åŒæ–¹éƒ½è¦æ”¯æŒã€‚åœ¨ Linux ä¸‹ï¼Œå¯ä»¥é€šè¿‡ &lt;code&gt;net.ipv4.tcp_sack&lt;/code&gt; å‚æ•°æ‰“å¼€è¿™ä¸ªåŠŸèƒ½ï¼ˆLinux 2.4 åé»˜è®¤æ‰“å¼€ï¼‰ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;Duplicate SACK&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Duplicate SACK åˆç§° &lt;code&gt;D-SACK&lt;/code&gt;ï¼Œå…¶ä¸»è¦&lt;strong&gt;ä½¿ç”¨äº† SACK æ¥å‘Šè¯‰ã€Œå‘é€æ–¹ã€æœ‰å“ªäº›æ•°æ®è¢«é‡å¤æ¥æ”¶äº†ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢ä¸¾ä¾‹ä¸¤ä¸ªæ —å­ï¼Œæ¥è¯´æ˜ &lt;code&gt;D-SACK&lt;/code&gt; çš„ä½œç”¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;em&gt;æ —å­ä¸€å·ï¼šACK ä¸¢åŒ…&lt;/em&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.6786922209695603&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREqgx7l2xco5SciaaRbpeuOC2HtKLmzgyxcU0licAnpwYQwwib4K6J14m7Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;887&quot;/&gt;&lt;figcaption&gt;ACK ä¸¢åŒ…&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ã€Œæ¥æ”¶æ–¹ã€å‘ç»™ã€Œå‘é€æ–¹ã€çš„ä¸¤ä¸ª ACK ç¡®è®¤åº”ç­”éƒ½ä¸¢å¤±äº†ï¼Œæ‰€ä»¥å‘é€æ–¹è¶…æ—¶åï¼Œé‡ä¼ ç¬¬ä¸€ä¸ªæ•°æ®åŒ…ï¼ˆ3000 ~ 3499ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;äºæ˜¯ã€Œæ¥æ”¶æ–¹ã€å‘ç°æ•°æ®æ˜¯é‡å¤æ”¶åˆ°çš„ï¼Œäºæ˜¯å›äº†ä¸€ä¸ª SACK = 3000~3500&lt;/strong&gt;ï¼Œå‘Šè¯‰ã€Œå‘é€æ–¹ã€ 3000~3500 çš„æ•°æ®æ—©å·²è¢«æ¥æ”¶äº†ï¼Œå› ä¸º ACK éƒ½åˆ°äº† 4000 äº†ï¼Œå·²ç»æ„å‘³ç€ 4000 ä¹‹å‰çš„æ‰€æœ‰æ•°æ®éƒ½å·²æ”¶åˆ°ï¼Œæ‰€ä»¥è¿™ä¸ª SACK å°±ä»£è¡¨ç€ &lt;code&gt;D-SACK&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è¿™æ ·ã€Œå‘é€æ–¹ã€å°±çŸ¥é“äº†ï¼Œæ•°æ®æ²¡æœ‰ä¸¢ï¼Œæ˜¯ã€Œæ¥æ”¶æ–¹ã€çš„ ACK ç¡®è®¤æŠ¥æ–‡ä¸¢äº†ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;em&gt;æ —å­äºŒå·ï¼šç½‘ç»œå»¶æ—¶&lt;/em&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.1247401247401247&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREJwGh4ia0YQ7uC2mjicFK3lAfrVuVqXDMzk5FDtKTNSFw1bZibokVrIkhQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;962&quot;/&gt;&lt;figcaption&gt;ç½‘ç»œå»¶æ—¶&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;æ•°æ®åŒ…ï¼ˆ1000~1499ï¼‰ è¢«ç½‘ç»œå»¶è¿Ÿäº†ï¼Œå¯¼è‡´ã€Œå‘é€æ–¹ã€æ²¡æœ‰æ”¶åˆ° Ack 1500 çš„ç¡®è®¤æŠ¥æ–‡ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è€Œåé¢æŠ¥æ–‡åˆ°è¾¾çš„ä¸‰ä¸ªç›¸åŒçš„ ACK ç¡®è®¤æŠ¥æ–‡ï¼Œå°±è§¦å‘äº†å¿«é€Ÿé‡ä¼ æœºåˆ¶ï¼Œä½†æ˜¯åœ¨é‡ä¼ åï¼Œè¢«å»¶è¿Ÿçš„æ•°æ®åŒ…ï¼ˆ1000~1499ï¼‰åˆåˆ°äº†ã€Œæ¥æ”¶æ–¹ã€ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;æ‰€ä»¥ã€Œæ¥æ”¶æ–¹ã€å›äº†ä¸€ä¸ª SACK=1000~1500ï¼Œå› ä¸º ACK å·²ç»åˆ°äº† 3000ï¼Œæ‰€ä»¥è¿™ä¸ª SACK æ˜¯ D-SACKï¼Œè¡¨ç¤ºæ”¶åˆ°äº†é‡å¤çš„åŒ…ã€‚&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è¿™æ ·å‘é€æ–¹å°±çŸ¥é“å¿«é€Ÿé‡ä¼ è§¦å‘çš„åŸå› ä¸æ˜¯å‘å‡ºå»çš„åŒ…ä¸¢äº†ï¼Œä¹Ÿä¸æ˜¯å› ä¸ºå›åº”çš„ ACK åŒ…ä¸¢äº†ï¼Œè€Œæ˜¯å› ä¸ºç½‘ç»œå»¶è¿Ÿäº†ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯è§ï¼Œ&lt;code&gt;D-SACK&lt;/code&gt; æœ‰è¿™ä¹ˆå‡ ä¸ªå¥½å¤„ï¼š&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å¯ä»¥è®©ã€Œå‘é€æ–¹ã€çŸ¥é“ï¼Œæ˜¯å‘å‡ºå»çš„åŒ…ä¸¢äº†ï¼Œè¿˜æ˜¯æ¥æ”¶æ–¹å›åº”çš„ ACK åŒ…ä¸¢äº†;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¯ä»¥çŸ¥é“æ˜¯ä¸æ˜¯ã€Œå‘é€æ–¹ã€çš„æ•°æ®åŒ…è¢«ç½‘ç»œå»¶è¿Ÿäº†;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¯ä»¥çŸ¥é“ç½‘ç»œä¸­æ˜¯ä¸æ˜¯æŠŠã€Œå‘é€æ–¹ã€çš„æ•°æ®åŒ…ç»™å¤åˆ¶äº†;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ Linux ä¸‹å¯ä»¥é€šè¿‡ &lt;code&gt;net.ipv4.tcp_dsack&lt;/code&gt; å‚æ•°å¼€å¯/å…³é—­è¿™ä¸ªåŠŸèƒ½ï¼ˆLinux 2.4 åé»˜è®¤æ‰“å¼€ï¼‰ã€‚&lt;/p&gt;&lt;hr data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ»‘åŠ¨çª—å£&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å¼•å…¥çª—å£æ¦‚å¿µçš„åŸå› &lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬éƒ½çŸ¥é“ TCP æ˜¯æ¯å‘é€ä¸€ä¸ªæ•°æ®ï¼Œéƒ½è¦è¿›è¡Œä¸€æ¬¡ç¡®è®¤åº”ç­”ã€‚å½“ä¸Šä¸€ä¸ªæ•°æ®åŒ…æ”¶åˆ°äº†åº”ç­”äº†ï¼Œ å†å‘é€ä¸‹ä¸€ä¸ªã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªæ¨¡å¼å°±æœ‰ç‚¹åƒæˆ‘å’Œä½ é¢å¯¹é¢èŠå¤©ï¼Œä½ ä¸€å¥æˆ‘ä¸€å¥ã€‚ä½†è¿™ç§æ–¹å¼çš„ç¼ºç‚¹æ˜¯æ•ˆç‡æ¯”è¾ƒä½çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœä½ è¯´å®Œä¸€å¥è¯ï¼Œæˆ‘åœ¨å¤„ç†å…¶ä»–äº‹æƒ…ï¼Œæ²¡æœ‰åŠæ—¶å›å¤ä½ ï¼Œé‚£ä½ ä¸æ˜¯è¦å¹²ç­‰ç€æˆ‘åšå®Œå…¶ä»–äº‹æƒ…åï¼Œæˆ‘å›å¤ä½ ï¼Œä½ æ‰èƒ½è¯´ä¸‹ä¸€å¥è¯ï¼Œå¾ˆæ˜¾ç„¶è¿™ä¸ç°å®ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.2389558232931728&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREibnoG4h8tC1zwcTbkvJ8II6LtCsPMzGu86Q1QTficBgicTI2TcIEWGjuw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;498&quot;/&gt;&lt;figcaption&gt;æŒ‰æ•°æ®åŒ…è¿›è¡Œç¡®è®¤åº”ç­”&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ï¼Œè¿™æ ·çš„ä¼ è¾“æ–¹å¼æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼šæ•°æ®åŒ…çš„&lt;strong&gt;å¾€è¿”æ—¶é—´è¶Šé•¿ï¼Œé€šä¿¡çš„æ•ˆç‡å°±è¶Šä½&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒTCP å¼•å…¥äº†&lt;strong&gt;çª—å£&lt;/strong&gt;è¿™ä¸ªæ¦‚å¿µã€‚å³ä½¿åœ¨å¾€è¿”æ—¶é—´è¾ƒé•¿çš„æƒ…å†µä¸‹ï¼Œå®ƒä¹Ÿä¸ä¼šé™ä½ç½‘ç»œé€šä¿¡çš„æ•ˆç‡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£ä¹ˆæœ‰äº†çª—å£ï¼Œå°±å¯ä»¥æŒ‡å®šçª—å£å¤§å°ï¼Œçª—å£å¤§å°å°±æ˜¯æŒ‡&lt;strong&gt;æ— éœ€ç­‰å¾…ç¡®è®¤åº”ç­”ï¼Œè€Œå¯ä»¥ç»§ç»­å‘é€æ•°æ®çš„æœ€å¤§å€¼&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çª—å£çš„å®ç°å®é™…ä¸Šæ˜¯æ“ä½œç³»ç»Ÿå¼€è¾Ÿçš„ä¸€ä¸ªç¼“å­˜ç©ºé—´ï¼Œå‘é€æ–¹ä¸»æœºåœ¨ç­‰åˆ°ç¡®è®¤åº”ç­”è¿”å›ä¹‹å‰ï¼Œå¿…é¡»åœ¨ç¼“å†²åŒºä¸­ä¿ç•™å·²å‘é€çš„æ•°æ®ã€‚å¦‚æœæŒ‰æœŸæ”¶åˆ°ç¡®è®¤åº”ç­”ï¼Œæ­¤æ—¶æ•°æ®å°±å¯ä»¥ä»ç¼“å­˜åŒºæ¸…é™¤ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡è®¾çª—å£å¤§å°ä¸º &lt;code&gt;3&lt;/code&gt; ä¸ª TCP æ®µï¼Œé‚£ä¹ˆå‘é€æ–¹å°±å¯ä»¥ã€Œè¿ç»­å‘é€ã€ &lt;code&gt;3&lt;/code&gt; ä¸ª TCP æ®µï¼Œå¹¶ä¸”ä¸­é€”è‹¥æœ‰ ACK ä¸¢å¤±ï¼Œå¯ä»¥é€šè¿‡ã€Œä¸‹ä¸€ä¸ªç¡®è®¤åº”ç­”è¿›è¡Œç¡®è®¤ã€ã€‚å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7024504084014003&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREFfDH7ibtQ3rMiaV5LbHhMiasicVgJDibnGRzsgUicYL1RWRhAPtgv2Z8Rgvg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;857&quot;/&gt;&lt;figcaption&gt;ç”¨æ»‘åŠ¨çª—å£æ–¹å¼å¹¶è¡Œå¤„ç†&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å›¾ä¸­çš„ ACK 600 ç¡®è®¤åº”ç­”æŠ¥æ–‡ä¸¢å¤±ï¼Œä¹Ÿæ²¡å…³ç³»ï¼Œå› ä¸ºå¯ä»¥é€šè¿‡ä¸‹ä¸€ä¸ªç¡®è®¤åº”ç­”è¿›è¡Œç¡®è®¤ï¼Œåªè¦å‘é€æ–¹æ”¶åˆ°äº† ACK 700 ç¡®è®¤åº”ç­”ï¼Œå°±æ„å‘³ç€ 700 ä¹‹å‰çš„æ‰€æœ‰æ•°æ®ã€Œæ¥æ”¶æ–¹ã€éƒ½æ”¶åˆ°äº†ã€‚è¿™ä¸ªæ¨¡å¼å°±å«&lt;strong&gt;ç´¯è®¡ç¡®è®¤&lt;/strong&gt;æˆ–è€…&lt;strong&gt;ç´¯è®¡åº”ç­”&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;çª—å£å¤§å°ç”±å“ªä¸€æ–¹å†³å®šï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;TCP å¤´é‡Œæœ‰ä¸€ä¸ªå­—æ®µå« &lt;code&gt;Window&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯çª—å£å¤§å°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;è¿™ä¸ªå­—æ®µæ˜¯æ¥æ”¶ç«¯å‘Šè¯‰å‘é€ç«¯è‡ªå·±è¿˜æœ‰å¤šå°‘ç¼“å†²åŒºå¯ä»¥æ¥æ”¶æ•°æ®ã€‚äºæ˜¯å‘é€ç«¯å°±å¯ä»¥æ ¹æ®è¿™ä¸ªæ¥æ”¶ç«¯çš„å¤„ç†èƒ½åŠ›æ¥å‘é€æ•°æ®ï¼Œè€Œä¸ä¼šå¯¼è‡´æ¥æ”¶ç«¯å¤„ç†ä¸è¿‡æ¥ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ï¼Œé€šå¸¸çª—å£çš„å¤§å°æ˜¯ç”±æ¥æ”¶æ–¹çš„çª—å£å¤§å°æ¥å†³å®šçš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‘é€æ–¹å‘é€çš„æ•°æ®å¤§å°ä¸èƒ½è¶…è¿‡æ¥æ”¶æ–¹çš„çª—å£å¤§å°ï¼Œå¦åˆ™æ¥æ”¶æ–¹å°±æ— æ³•æ­£å¸¸æ¥æ”¶åˆ°æ•°æ®ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å‘é€æ–¹çš„æ»‘åŠ¨çª—å£&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å‘é€æ–¹çš„çª—å£ï¼Œä¸‹å›¾å°±æ˜¯å‘é€æ–¹ç¼“å­˜çš„æ•°æ®ï¼Œæ ¹æ®å¤„ç†çš„æƒ…å†µåˆ†æˆå››ä¸ªéƒ¨åˆ†ï¼Œå…¶ä¸­æ·±è“è‰²æ–¹æ¡†æ˜¯å‘é€çª—å£ï¼Œç´«è‰²æ–¹æ¡†æ˜¯å¯ç”¨çª—å£ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3382352941176471&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREtGqTVr70mIgE9l8E1BkBGQyGYKUema83m8Pd0GKDj2IYfEC0fDof5w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1428&quot;/&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;#1 æ˜¯å·²å‘é€å¹¶æ”¶åˆ° ACKç¡®è®¤çš„æ•°æ®ï¼š1~31 å­—èŠ‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;#2 æ˜¯å·²å‘é€ä½†æœªæ”¶åˆ° ACKç¡®è®¤çš„æ•°æ®ï¼š32~45 å­—èŠ‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;#3 æ˜¯æœªå‘é€ä½†æ€»å¤§å°åœ¨æ¥æ”¶æ–¹å¤„ç†èŒƒå›´å†…ï¼ˆæ¥æ”¶æ–¹è¿˜æœ‰ç©ºé—´ï¼‰ï¼š46~51å­—èŠ‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;#4 æ˜¯æœªå‘é€ä½†æ€»å¤§å°è¶…è¿‡æ¥æ”¶æ–¹å¤„ç†èŒƒå›´ï¼ˆæ¥æ”¶æ–¹æ²¡æœ‰ç©ºé—´ï¼‰ï¼š52å­—èŠ‚ä»¥å&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ä¸‹å›¾ï¼Œå½“å‘é€æ–¹æŠŠæ•°æ®ã€Œå…¨éƒ¨ã€éƒ½ä¸€ä¸‹å‘é€å‡ºå»åï¼Œå¯ç”¨çª—å£çš„å¤§å°å°±ä¸º 0 äº†ï¼Œè¡¨æ˜å¯ç”¨çª—å£è€—å°½ï¼Œåœ¨æ²¡æ”¶åˆ° ACK ç¡®è®¤ä¹‹å‰æ˜¯æ— æ³•ç»§ç»­å‘é€æ•°æ®äº†ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.27521008403361347&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvRE7yp9no9Xib9EVicibMvicX0pVMetbd7DFrjVcN1I2FvT8VciaNXkKbOdIvA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1428&quot;/&gt;&lt;figcaption&gt;å¯ç”¨çª—å£è€—å°½&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ä¸‹å›¾ï¼Œå½“æ”¶åˆ°ä¹‹å‰å‘é€çš„æ•°æ® &lt;code&gt;32~36&lt;/code&gt; å­—èŠ‚çš„ ACK ç¡®è®¤åº”ç­”åï¼Œå¦‚æœå‘é€çª—å£çš„å¤§å°æ²¡æœ‰å˜åŒ–ï¼Œåˆ™&lt;strong&gt;æ»‘åŠ¨çª—å£å¾€å³è¾¹ç§»åŠ¨ 5 ä¸ªå­—èŠ‚ï¼Œå› ä¸ºæœ‰ 5 ä¸ªå­—èŠ‚çš„æ•°æ®è¢«åº”ç­”ç¡®è®¤&lt;/strong&gt;ï¼Œæ¥ä¸‹æ¥ &lt;code&gt;52~56&lt;/code&gt; å­—èŠ‚åˆå˜æˆäº†å¯ç”¨çª—å£ï¼Œé‚£ä¹ˆåç»­ä¹Ÿå°±å¯ä»¥å‘é€ &lt;code&gt;52~56&lt;/code&gt; è¿™ 5 ä¸ªå­—èŠ‚çš„æ•°æ®äº†ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.2537313432835821&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREoU3LwTicLLnCrH7MKdezgwcZ5JKknztGVKp5ZcOiaL23tQYmKuCUeqjA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1608&quot;/&gt;&lt;figcaption&gt;32 ~ 36 å­—èŠ‚å·²ç¡®è®¤&lt;/figcaption&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ç¨‹åºæ˜¯å¦‚ä½•è¡¨ç¤ºå‘é€æ–¹çš„å››ä¸ªéƒ¨åˆ†çš„å‘¢ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;TCP æ»‘åŠ¨çª—å£æ–¹æ¡ˆä½¿ç”¨ä¸‰ä¸ªæŒ‡é’ˆæ¥è·Ÿè¸ªåœ¨å››ä¸ªä¼ è¾“ç±»åˆ«ä¸­çš„æ¯ä¸€ä¸ªç±»åˆ«ä¸­çš„å­—èŠ‚ã€‚å…¶ä¸­ä¸¤ä¸ªæŒ‡é’ˆæ˜¯ç»å¯¹æŒ‡é’ˆï¼ˆæŒ‡ç‰¹å®šçš„åºåˆ—å·ï¼‰ï¼Œä¸€ä¸ªæ˜¯ç›¸å¯¹æŒ‡é’ˆï¼ˆéœ€è¦åšåç§»ï¼‰ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3592436974789916&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvRE3kCmLRlJnLWIx3jrseprMy9Yok0kreDicTuucdzDSJsO7B4NUIrWE6Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1428&quot;/&gt;&lt;figcaption&gt;SND.WNDã€SND.UNã€SND.NXT&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;SND.WND&lt;/code&gt;ï¼šè¡¨ç¤ºå‘é€çª—å£çš„å¤§å°ï¼ˆå¤§å°æ˜¯ç”±æ¥æ”¶æ–¹æŒ‡å®šçš„ï¼‰ï¼›&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;SND.UNA&lt;/code&gt;ï¼šæ˜¯ä¸€ä¸ªç»å¯¹æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘çš„æ˜¯å·²å‘é€ä½†æœªæ”¶åˆ°ç¡®è®¤çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºåˆ—å·ï¼Œä¹Ÿå°±æ˜¯ #2 çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;SND.NXT&lt;/code&gt;ï¼šä¹Ÿæ˜¯ä¸€ä¸ªç»å¯¹æŒ‡é’ˆï¼Œå®ƒæŒ‡å‘æœªå‘é€ä½†å¯å‘é€èŒƒå›´çš„ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºåˆ—å·ï¼Œä¹Ÿå°±æ˜¯ #3 çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;æŒ‡å‘ #4 çš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯ä¸ªç›¸å¯¹æŒ‡é’ˆï¼Œå®ƒéœ€è¦ &lt;code&gt;SND.UNA&lt;/code&gt; æŒ‡é’ˆåŠ ä¸Š &lt;code&gt;SND.WND&lt;/code&gt; å¤§å°çš„åç§»é‡ï¼Œå°±å¯ä»¥æŒ‡å‘ #4 çš„ç¬¬ä¸€ä¸ªå­—èŠ‚äº†ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£ä¹ˆå¯ç”¨çª—å£å¤§å°çš„è®¡ç®—å°±å¯ä»¥æ˜¯ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;å¯ç”¨çª—å£å¤§ = SND.WND -ï¼ˆSND.NXT - SND.UNAï¼‰&lt;/strong&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;æ¥æ”¶æ–¹çš„æ»‘åŠ¨çª—å£&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹æ¥æ”¶æ–¹çš„çª—å£ï¼Œæ¥æ”¶çª—å£ç›¸å¯¹ç®€å•ä¸€äº›ï¼Œæ ¹æ®å¤„ç†çš„æƒ…å†µåˆ’åˆ†æˆä¸‰ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;#1 + #2 æ˜¯å·²æˆåŠŸæ¥æ”¶å¹¶ç¡®è®¤çš„æ•°æ®ï¼ˆç­‰å¾…åº”ç”¨è¿›ç¨‹è¯»å–ï¼‰ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;#3 æ˜¯æœªæ”¶åˆ°æ•°æ®ä½†å¯ä»¥æ¥æ”¶çš„æ•°æ®ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;#4 æœªæ”¶åˆ°æ•°æ®å¹¶ä¸å¯ä»¥æ¥æ”¶çš„æ•°æ®ï¼›&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.3480392156862745&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREu2CFdn3mltnicJqTkcQMCiakNV28uwc9E2T3IKnI7HFwXoibqQTxBPZQw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1428&quot;/&gt;&lt;figcaption&gt;æ¥æ”¶çª—å£&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­ä¸‰ä¸ªæ¥æ”¶éƒ¨åˆ†ï¼Œä½¿ç”¨ä¸¤ä¸ªæŒ‡é’ˆè¿›è¡Œåˆ’åˆ†:&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;RCV.WND&lt;/code&gt;ï¼šè¡¨ç¤ºæ¥æ”¶çª—å£çš„å¤§å°ï¼Œå®ƒä¼šé€šå‘Šç»™å‘é€æ–¹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;RCV.NXT&lt;/code&gt;ï¼šæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå®ƒæŒ‡å‘æœŸæœ›ä»å‘é€æ–¹å‘é€æ¥çš„ä¸‹ä¸€ä¸ªæ•°æ®å­—èŠ‚çš„åºåˆ—å·ï¼Œä¹Ÿå°±æ˜¯ #3 çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æŒ‡å‘ #4 çš„ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯ä¸ªç›¸å¯¹æŒ‡é’ˆï¼Œå®ƒéœ€è¦ &lt;code&gt;RCV.NXT&lt;/code&gt; æŒ‡é’ˆåŠ ä¸Š &lt;code&gt;RCV.WND&lt;/code&gt; å¤§å°çš„åç§»é‡ï¼Œå°±å¯ä»¥æŒ‡å‘ #4 çš„ç¬¬ä¸€ä¸ªå­—èŠ‚äº†ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;æ¥æ”¶çª—å£å’Œå‘é€çª—å£çš„å¤§å°æ˜¯ç›¸ç­‰çš„å—ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¹¶ä¸æ˜¯å®Œå…¨ç›¸ç­‰ï¼Œæ¥æ”¶çª—å£çš„å¤§å°æ˜¯&lt;strong&gt;çº¦ç­‰äº&lt;/strong&gt;å‘é€çª—å£çš„å¤§å°çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å› ä¸ºæ»‘åŠ¨çª—å£å¹¶ä¸æ˜¯ä¸€æˆä¸å˜çš„ã€‚æ¯”å¦‚ï¼Œå½“æ¥æ”¶æ–¹çš„åº”ç”¨è¿›ç¨‹è¯»å–æ•°æ®çš„é€Ÿåº¦éå¸¸å¿«çš„è¯ï¼Œè¿™æ ·çš„è¯æ¥æ”¶çª—å£å¯ä»¥å¾ˆå¿«çš„å°±ç©ºç¼ºå‡ºæ¥ã€‚é‚£ä¹ˆæ–°çš„æ¥æ”¶çª—å£å¤§å°ï¼Œæ˜¯é€šè¿‡ TCP æŠ¥æ–‡ä¸­çš„ Windows å­—æ®µæ¥å‘Šè¯‰å‘é€æ–¹ã€‚é‚£ä¹ˆè¿™ä¸ªä¼ è¾“è¿‡ç¨‹æ˜¯å­˜åœ¨æ—¶å»¶çš„ï¼Œæ‰€ä»¥æ¥æ”¶çª—å£å’Œå‘é€çª—å£æ˜¯çº¦ç­‰äºçš„å…³ç³»ã€‚&lt;/p&gt;&lt;hr data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æµé‡æ§åˆ¶&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‘é€æ–¹ä¸èƒ½æ— è„‘çš„å‘æ•°æ®ç»™æ¥æ”¶æ–¹ï¼Œè¦è€ƒè™‘æ¥æ”¶æ–¹å¤„ç†èƒ½åŠ›ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœä¸€ç›´æ— è„‘çš„å‘æ•°æ®ç»™å¯¹æ–¹ï¼Œä½†å¯¹æ–¹å¤„ç†ä¸è¿‡æ¥ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´è§¦å‘é‡å‘æœºåˆ¶ï¼Œä»è€Œå¯¼è‡´ç½‘ç»œæµé‡çš„æ— ç«¯çš„æµªè´¹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†è§£å†³è¿™ç§ç°è±¡å‘ç”Ÿï¼Œ&lt;strong&gt;TCP æä¾›ä¸€ç§æœºåˆ¶å¯ä»¥è®©ã€Œå‘é€æ–¹ã€æ ¹æ®ã€Œæ¥æ”¶æ–¹ã€çš„å®é™…æ¥æ”¶èƒ½åŠ›æ§åˆ¶å‘é€çš„æ•°æ®é‡ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„æµé‡æ§åˆ¶ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢ä¸¾ä¸ªæ —å­ï¼Œä¸ºäº†ç®€å•èµ·è§ï¼Œå‡è®¾ä»¥ä¸‹åœºæ™¯ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å®¢æˆ·ç«¯æ˜¯æ¥æ”¶æ–¹ï¼ŒæœåŠ¡ç«¯æ˜¯å‘é€æ–¹&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å‡è®¾æ¥æ”¶çª—å£å’Œå‘é€çª—å£ç›¸åŒï¼Œéƒ½ä¸º &lt;code&gt;200&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å‡è®¾ä¸¤ä¸ªè®¾å¤‡åœ¨æ•´ä¸ªä¼ è¾“è¿‡ç¨‹ä¸­éƒ½ä¿æŒç›¸åŒçš„çª—å£å¤§å°ï¼Œä¸å—å¤–ç•Œå½±å“&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;1.6124082721814543&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREZIiaosKyJGcbtt60ibrMmCkvVASEopib3GTMkeibfxd6zAEWiaxEABu2AKg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1499&quot;/&gt;&lt;figcaption&gt;æµé‡æ§åˆ¶&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ ¹æ®ä¸Šå›¾çš„æµé‡æ§åˆ¶ï¼Œè¯´æ˜ä¸‹æ¯ä¸ªè¿‡ç¨‹ï¼š&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚æ•°æ®æŠ¥æ–‡ã€‚è¿™é‡Œè¦è¯´æ˜ä¸‹ï¼Œæœ¬æ¬¡ä¾‹å­æ˜¯æŠŠæœåŠ¡ç«¯ä½œä¸ºå‘é€æ–¹ï¼Œæ‰€ä»¥æ²¡æœ‰ç”»å‡ºæœåŠ¡ç«¯çš„æ¥æ”¶çª—å£ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœåŠ¡ç«¯æ”¶åˆ°è¯·æ±‚æŠ¥æ–‡åï¼Œå‘é€ç¡®è®¤æŠ¥æ–‡å’Œ 80 å­—èŠ‚çš„æ•°æ®ï¼Œäºæ˜¯å¯ç”¨çª—å£ &lt;code&gt;Usable&lt;/code&gt; å‡å°‘ä¸º 120 å­—èŠ‚ï¼ŒåŒæ—¶ &lt;code&gt;SND.NXT&lt;/code&gt; æŒ‡é’ˆä¹Ÿå‘å³åç§» 80 å­—èŠ‚åï¼ŒæŒ‡å‘ 321ï¼Œ&lt;strong&gt;è¿™æ„å‘³ç€ä¸‹æ¬¡å‘é€æ•°æ®çš„æ—¶å€™ï¼Œåºåˆ—å·æ˜¯ 321ã€‚&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å®¢æˆ·ç«¯æ”¶åˆ° 80 å­—èŠ‚æ•°æ®åï¼Œäºæ˜¯æ¥æ”¶çª—å£å¾€å³ç§»åŠ¨ 80 å­—èŠ‚ï¼Œ&lt;code&gt;RCV.NXT&lt;/code&gt; ä¹Ÿå°±æŒ‡å‘ 321ï¼Œ&lt;strong&gt;è¿™æ„å‘³ç€å®¢æˆ·ç«¯æœŸæœ›çš„ä¸‹ä¸€ä¸ªæŠ¥æ–‡çš„åºåˆ—å·æ˜¯ 321&lt;/strong&gt;ï¼Œæ¥ç€å‘é€ç¡®è®¤æŠ¥æ–‡ç»™æœåŠ¡ç«¯ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœåŠ¡ç«¯å†æ¬¡å‘é€äº† 120 å­—èŠ‚æ•°æ®ï¼Œäºæ˜¯å¯ç”¨çª—å£è€—å°½ä¸º 0ï¼ŒæœåŠ¡ç«¯æ— æ³•å†ç»§ç»­å‘é€æ•°æ®ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å®¢æˆ·ç«¯æ”¶åˆ° 120 å­—èŠ‚çš„æ•°æ®åï¼Œäºæ˜¯æ¥æ”¶çª—å£å¾€å³ç§»åŠ¨ 120 å­—èŠ‚ï¼Œ&lt;code&gt;RCV.NXT&lt;/code&gt; ä¹Ÿå°±æŒ‡å‘ 441ï¼Œæ¥ç€å‘é€ç¡®è®¤æŠ¥æ–‡ç»™æœåŠ¡ç«¯ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœåŠ¡ç«¯æ”¶åˆ°å¯¹ 80 å­—èŠ‚æ•°æ®çš„ç¡®è®¤æŠ¥æ–‡åï¼Œ&lt;code&gt;SND.UNA&lt;/code&gt; æŒ‡é’ˆå¾€å³åç§»åæŒ‡å‘ 321ï¼Œäºæ˜¯å¯ç”¨çª—å£ &lt;code&gt;Usable&lt;/code&gt; å¢å¤§åˆ° 80ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœåŠ¡ç«¯æ”¶åˆ°å¯¹ 120 å­—èŠ‚æ•°æ®çš„ç¡®è®¤æŠ¥æ–‡åï¼Œ&lt;code&gt;SND.UNA&lt;/code&gt; æŒ‡é’ˆå¾€å³åç§»åæŒ‡å‘ 441ï¼Œäºæ˜¯å¯ç”¨çª—å£ &lt;code&gt;Usable&lt;/code&gt; å¢å¤§åˆ° 200ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœåŠ¡ç«¯å¯ä»¥ç»§ç»­å‘é€äº†ï¼Œäºæ˜¯å‘é€äº† 160 å­—èŠ‚çš„æ•°æ®åï¼Œ&lt;code&gt;SND.NXT&lt;/code&gt; æŒ‡å‘ 601ï¼Œäºæ˜¯å¯ç”¨çª—å£ Â &lt;code&gt;Usable&lt;/code&gt; å‡å°‘åˆ° 40ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å®¢æˆ·ç«¯æ”¶åˆ° 160 å­—èŠ‚åï¼Œæ¥æ”¶çª—å£å¾€å³ç§»åŠ¨äº† 160 å­—èŠ‚ï¼Œ&lt;code&gt;RCV.NXT&lt;/code&gt; ä¹Ÿå°±æ˜¯æŒ‡å‘äº† 601ï¼Œæ¥ç€å‘é€ç¡®è®¤æŠ¥æ–‡ç»™æœåŠ¡ç«¯ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœåŠ¡ç«¯æ”¶åˆ°å¯¹ 160 å­—èŠ‚æ•°æ®çš„ç¡®è®¤æŠ¥æ–‡åï¼Œå‘é€çª—å£å¾€å³ç§»åŠ¨äº† 160 å­—èŠ‚ï¼Œäºæ˜¯ &lt;code&gt;SND.UNA&lt;/code&gt; æŒ‡é’ˆåç§»äº† 160 åæŒ‡å‘ 601ï¼Œå¯ç”¨çª—å£ &lt;code&gt;Usable&lt;/code&gt; ä¹Ÿå°±å¢å¤§è‡³äº† 200ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ“ä½œç³»ç»Ÿç¼“å†²åŒºä¸æ»‘åŠ¨çª—å£çš„å…³ç³»&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‰é¢çš„æµé‡æ§åˆ¶ä¾‹å­ï¼Œæˆ‘ä»¬å‡å®šäº†å‘é€çª—å£å’Œæ¥æ”¶çª—å£æ˜¯ä¸å˜çš„ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œå‘é€çª—å£å’Œæ¥æ”¶çª—å£ä¸­æ‰€å­˜æ”¾çš„å­—èŠ‚æ•°ï¼Œéƒ½æ˜¯æ”¾åœ¨æ“ä½œç³»ç»Ÿå†…å­˜ç¼“å†²åŒºä¸­çš„ï¼Œè€Œæ“ä½œç³»ç»Ÿçš„ç¼“å†²åŒºï¼Œä¼š&lt;strong&gt;è¢«æ“ä½œç³»ç»Ÿè°ƒæ•´&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“åº”ç”¨è¿›ç¨‹æ²¡åŠæ³•åŠæ—¶è¯»å–ç¼“å†²åŒºçš„å†…å®¹æ—¶ï¼Œä¹Ÿä¼šå¯¹æˆ‘ä»¬çš„ç¼“å†²åŒºé€ æˆå½±å“ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;é‚£æ“å¿ƒç³»ç»Ÿçš„ç¼“å†²åŒºï¼Œæ˜¯å¦‚ä½•å½±å“å‘é€çª—å£å’Œæ¥æ”¶çª—å£çš„å‘¢ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;em&gt;æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ç¬¬ä¸€ä¸ªä¾‹å­ã€‚&lt;/em&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“åº”ç”¨ç¨‹åºæ²¡æœ‰åŠæ—¶è¯»å–ç¼“å­˜æ—¶ï¼Œå‘é€çª—å£å’Œæ¥æ”¶çª—å£çš„å˜åŒ–ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€ƒè™‘ä»¥ä¸‹åœºæ™¯ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å®¢æˆ·ç«¯ä½œä¸ºå‘é€æ–¹ï¼ŒæœåŠ¡ç«¯ä½œä¸ºæ¥æ”¶æ–¹ï¼Œå‘é€çª—å£å’Œæ¥æ”¶çª—å£åˆå§‹å¤§å°ä¸º &lt;code&gt;360&lt;/code&gt;ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœåŠ¡ç«¯éå¸¸çš„ç¹å¿™ï¼Œå½“æ”¶åˆ°å®¢æˆ·ç«¯çš„æ•°æ®æ—¶ï¼Œåº”ç”¨å±‚ä¸èƒ½åŠæ—¶è¯»å–æ•°æ®ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.5532837670384139&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREBdBpPrONw6d6ruvfMSynOAZFTDdibfN1L5v0kJNsr2c8B0nJBSajtew/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1614&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ ¹æ®ä¸Šå›¾çš„æµé‡æ§åˆ¶ï¼Œè¯´æ˜ä¸‹æ¯ä¸ªè¿‡ç¨‹ï¼š&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å®¢æˆ·ç«¯å‘é€ 140 å­—èŠ‚æ•°æ®åï¼Œå¯ç”¨çª—å£å˜ä¸º 220 ï¼ˆ360 - 140ï¼‰ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœåŠ¡ç«¯æ”¶åˆ° 140 å­—èŠ‚æ•°æ®ï¼Œ&lt;strong&gt;ä½†æ˜¯æœåŠ¡ç«¯éå¸¸ç¹å¿™ï¼Œåº”ç”¨è¿›ç¨‹åªè¯»å–äº† 40 ä¸ªå­—èŠ‚ï¼Œè¿˜æœ‰ 100 å­—èŠ‚å ç”¨ç€ç¼“å†²åŒºï¼Œäºæ˜¯æ¥æ”¶çª—å£æ”¶ç¼©åˆ°äº† 260 ï¼ˆ360 - 100ï¼‰&lt;/strong&gt;ï¼Œæœ€åå‘é€ç¡®è®¤ä¿¡æ¯æ—¶ï¼Œå°†çª—å£å¤§å°é€šå‘Šç»™å®¢æˆ·ç«¯ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å®¢æˆ·ç«¯æ”¶åˆ°ç¡®è®¤å’Œçª—å£é€šå‘ŠæŠ¥æ–‡åï¼Œå‘é€çª—å£å‡å°‘ä¸º 260ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å®¢æˆ·ç«¯å‘é€ 180 å­—èŠ‚æ•°æ®ï¼Œæ­¤æ—¶å¯ç”¨çª—å£å‡å°‘åˆ° 80ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœåŠ¡ç«¯æ”¶åˆ° 180 å­—èŠ‚æ•°æ®ï¼Œ&lt;strong&gt;ä½†æ˜¯åº”ç”¨ç¨‹åºæ²¡æœ‰è¯»å–ä»»ä½•æ•°æ®ï¼Œè¿™ 180 å­—èŠ‚ç›´æ¥å°±ç•™åœ¨äº†ç¼“å†²åŒºï¼Œäºæ˜¯æ¥æ”¶çª—å£æ”¶ç¼©åˆ°äº† 80 ï¼ˆ260 - 180ï¼‰&lt;/strong&gt;ï¼Œå¹¶åœ¨å‘é€ç¡®è®¤ä¿¡æ¯æ—¶ï¼Œé€šè¿‡çª—å£å¤§å°ç»™å®¢æˆ·ç«¯ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å®¢æˆ·ç«¯æ”¶åˆ°ç¡®è®¤å’Œçª—å£é€šå‘ŠæŠ¥æ–‡åï¼Œå‘é€çª—å£å‡å°‘ä¸º 80ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å®¢æˆ·ç«¯å‘é€ 80 å­—èŠ‚æ•°æ®åï¼Œå¯ç”¨çª—å£è€—å°½ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœåŠ¡ç«¯æ”¶åˆ° 80 å­—èŠ‚æ•°æ®ï¼Œ&lt;strong&gt;ä½†æ˜¯åº”ç”¨ç¨‹åºä¾ç„¶æ²¡æœ‰è¯»å–ä»»ä½•æ•°æ®ï¼Œè¿™ 80 å­—èŠ‚ç•™åœ¨äº†ç¼“å†²åŒºï¼Œäºæ˜¯æ¥æ”¶çª—å£æ”¶ç¼©åˆ°äº† 0&lt;/strong&gt;ï¼Œå¹¶åœ¨å‘é€ç¡®è®¤ä¿¡æ¯æ—¶ï¼Œé€šè¿‡çª—å£å¤§å°ç»™å®¢æˆ·ç«¯ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å®¢æˆ·ç«¯æ”¶åˆ°ç¡®è®¤å’Œçª—å£é€šå‘ŠæŠ¥æ–‡åï¼Œå‘é€çª—å£å‡å°‘ä¸º 0ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯è§æœ€åçª—å£éƒ½æ”¶ç¼©ä¸º 0 äº†ï¼Œä¹Ÿå°±æ˜¯å‘ç”Ÿäº†çª—å£å…³é—­ã€‚å½“å‘é€æ–¹å¯ç”¨çª—å£å˜ä¸º 0 æ—¶ï¼Œå‘é€æ–¹å®é™…ä¸Šä¼šå®šæ—¶å‘é€çª—å£æ¢æµ‹æŠ¥æ–‡ï¼Œä»¥ä¾¿çŸ¥é“æ¥æ”¶æ–¹çš„çª—å£æ˜¯å¦å‘ç”Ÿäº†æ”¹å˜ï¼Œè¿™ä¸ªå†…å®¹åé¢ä¼šè¯´ï¼Œè¿™é‡Œå…ˆç®€å•æä¸€ä¸‹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;em&gt;æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ç¬¬äºŒä¸ªä¾‹å­ã€‚&lt;/em&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“æœåŠ¡ç«¯ç³»ç»Ÿèµ„æºéå¸¸ç´§å¼ çš„æ—¶å€™ï¼Œæ“å¿ƒç³»ç»Ÿå¯èƒ½ä¼šç›´æ¥å‡å°‘äº†æ¥æ”¶ç¼“å†²åŒºå¤§å°ï¼Œè¿™æ—¶åº”ç”¨ç¨‹åºåˆæ— æ³•åŠæ—¶è¯»å–ç¼“å­˜æ•°æ®ï¼Œé‚£ä¹ˆè¿™æ—¶å€™å°±æœ‰ä¸¥é‡çš„äº‹æƒ…å‘ç”Ÿäº†ï¼Œä¼šå‡ºç°æ•°æ®åŒ…ä¸¢å¤±çš„ç°è±¡ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.008537279453614&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvRE0L7033r8JgXibsUt7o5msxt1qYIpZ6nMRepEFTfBzFgUsBibeyaRqq6Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1757&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯´æ˜ä¸‹æ¯ä¸ªè¿‡ç¨‹ï¼š&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å®¢æˆ·ç«¯å‘é€ 140 å­—èŠ‚çš„æ•°æ®ï¼Œäºæ˜¯å¯ç”¨çª—å£å‡å°‘åˆ°äº† 220ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;æœåŠ¡ç«¯å› ä¸ºç°åœ¨éå¸¸çš„ç¹å¿™ï¼Œæ“ä½œç³»ç»Ÿäºæ˜¯å°±æŠŠæ¥æ”¶ç¼“å­˜å‡å°‘äº† 120 å­—èŠ‚ï¼Œå½“æ”¶åˆ° 140 å­—èŠ‚æ•°æ®åï¼Œåˆå› ä¸ºåº”ç”¨ç¨‹åºæ²¡æœ‰è¯»å–ä»»ä½•æ•°æ®ï¼Œæ‰€ä»¥ 140 å­—èŠ‚ç•™åœ¨äº†ç¼“å†²åŒºä¸­ï¼Œäºæ˜¯æ¥æ”¶çª—å£å¤§å°ä» 360 æ”¶ç¼©æˆäº† 100&lt;/strong&gt;ï¼Œæœ€åå‘é€ç¡®è®¤ä¿¡æ¯æ—¶ï¼Œé€šå‘Šçª—å£å¤§å°ç»™å¯¹æ–¹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ­¤æ—¶å®¢æˆ·ç«¯å› ä¸ºè¿˜æ²¡æœ‰æ”¶åˆ°æœåŠ¡ç«¯çš„é€šå‘Šçª—å£æŠ¥æ–‡ï¼Œæ‰€ä»¥ä¸çŸ¥é“æ­¤æ—¶æ¥æ”¶çª—å£æ”¶ç¼©æˆäº† 100ï¼Œå®¢æˆ·ç«¯åªä¼šçœ‹è‡ªå·±çš„å¯ç”¨çª—å£è¿˜æœ‰ 220ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯å°±å‘é€äº† 180 å­—èŠ‚æ•°æ®ï¼Œäºæ˜¯å¯ç”¨çª—å£å‡å°‘åˆ° 40ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœåŠ¡ç«¯æ”¶åˆ°äº† 180 å­—èŠ‚æ•°æ®æ—¶ï¼Œ&lt;strong&gt;å‘ç°æ•°æ®å¤§å°è¶…è¿‡äº†æ¥æ”¶çª—å£çš„å¤§å°ï¼Œäºæ˜¯å°±æŠŠæ•°æ®åŒ…ä¸¢å¤±äº†ã€‚&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å®¢æˆ·ç«¯æ”¶åˆ°ç¬¬ 2 æ­¥æ—¶ï¼ŒæœåŠ¡ç«¯å‘é€çš„ç¡®è®¤æŠ¥æ–‡å’Œé€šå‘Šçª—å£æŠ¥æ–‡ï¼Œå°è¯•å‡å°‘å‘é€çª—å£åˆ° 100ï¼ŒæŠŠçª—å£çš„å³ç«¯å‘å·¦æ”¶ç¼©äº† 80ï¼Œæ­¤æ—¶å¯ç”¨çª—å£çš„å¤§å°å°±ä¼šå‡ºç°è¯¡å¼‚çš„è´Ÿå€¼ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ï¼Œå¦‚æœå‘ç”Ÿäº†å…ˆå‡å°‘ç¼“å­˜ï¼Œå†æ”¶ç¼©çª—å£ï¼Œå°±ä¼šå‡ºç°ä¸¢åŒ…çš„ç°è±¡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿï¼ŒTCP è§„å®šæ˜¯ä¸å…è®¸åŒæ—¶å‡å°‘ç¼“å­˜åˆæ”¶ç¼©çª—å£çš„ï¼Œè€Œæ˜¯é‡‡ç”¨å…ˆæ”¶ç¼©çª—å£ï¼Œè¿‡æ®µæ—¶é—´å†å‡å°‘ç¼“å­˜ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…äº†ä¸¢åŒ…æƒ…å†µã€‚&lt;/strong&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;çª—å£å…³é—­&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å‰é¢æˆ‘ä»¬éƒ½çœ‹åˆ°äº†ï¼ŒTCP é€šè¿‡è®©æ¥æ”¶æ–¹æŒ‡æ˜å¸Œæœ›ä»å‘é€æ–¹æ¥æ”¶çš„æ•°æ®å¤§å°ï¼ˆçª—å£å¤§å°ï¼‰æ¥è¿›è¡Œæµé‡æ§åˆ¶ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;å¦‚æœçª—å£å¤§å°ä¸º 0 æ—¶ï¼Œå°±ä¼šé˜»æ­¢å‘é€æ–¹ç»™æ¥æ”¶æ–¹ä¼ é€’æ•°æ®ï¼Œç›´åˆ°çª—å£å˜ä¸ºé 0 ä¸ºæ­¢ï¼Œè¿™å°±æ˜¯çª—å£å…³é—­ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;çª—å£å…³é—­æ½œåœ¨çš„å±é™©&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥æ”¶æ–¹å‘å‘é€æ–¹é€šå‘Šçª—å£å¤§å°æ—¶ï¼Œæ˜¯é€šè¿‡ &lt;code&gt;ACK&lt;/code&gt; æŠ¥æ–‡æ¥é€šå‘Šçš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£ä¹ˆï¼Œå½“å‘ç”Ÿçª—å£å…³é—­æ—¶ï¼Œæ¥æ”¶æ–¹å¤„ç†å®Œæ•°æ®åï¼Œä¼šå‘å‘é€æ–¹é€šå‘Šä¸€ä¸ªçª—å£é 0 çš„ ACK æŠ¥æ–‡ï¼Œå¦‚æœè¿™ä¸ªé€šå‘Šçª—å£çš„ ACK æŠ¥æ–‡åœ¨ç½‘ç»œä¸­ä¸¢å¤±äº†ï¼Œé‚£éº»çƒ¦å°±å¤§äº†ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7490942028985508&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREyYHCHPZqUd9sJcZn1LU07c8GMvl8riaibTJpzUEX3adNFDf9bzERTMDA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1104&quot;/&gt;&lt;figcaption&gt;çª—å£å…³é—­æ½œåœ¨çš„å±é™©&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¼šå¯¼è‡´å‘é€æ–¹ä¸€ç›´ç­‰å¾…æ¥æ”¶æ–¹çš„é 0 çª—å£é€šçŸ¥ï¼Œæ¥æ”¶æ–¹ä¹Ÿä¸€ç›´ç­‰å¾…å‘é€æ–¹çš„æ•°æ®ï¼Œå¦‚ä¸é‡‡å–æªæ–½ï¼Œè¿™ç§ç›¸äº’ç­‰å¾…çš„è¿‡ç¨‹ï¼Œä¼šé€ æˆäº†æ­»é”çš„ç°è±¡ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;TCP æ˜¯å¦‚ä½•è§£å†³çª—å£å…³é—­æ—¶ï¼Œæ½œåœ¨çš„æ­»é”ç°è±¡å‘¢ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒTCP ä¸ºæ¯ä¸ªè¿æ¥è®¾æœ‰ä¸€ä¸ªæŒç»­å®šæ—¶å™¨ï¼Œ&lt;strong&gt;åªè¦ TCP è¿æ¥ä¸€æ–¹æ”¶åˆ°å¯¹æ–¹çš„é›¶çª—å£é€šçŸ¥ï¼Œå°±å¯åŠ¨æŒç»­è®¡æ—¶å™¨ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæŒç»­è®¡æ—¶å™¨è¶…æ—¶ï¼Œå°±ä¼šå‘é€&lt;strong&gt;çª—å£æ¢æµ‹ ( Window
probe ) æŠ¥æ–‡&lt;/strong&gt;ï¼Œè€Œå¯¹æ–¹åœ¨ç¡®è®¤è¿™ä¸ªæ¢æµ‹æŠ¥æ–‡æ—¶ï¼Œç»™å‡ºè‡ªå·±ç°åœ¨çš„æ¥æ”¶çª—å£å¤§å°ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.7491554054054054&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREelkXDGcZdnic9RqfTP7kG41HjrypQofib4QROLnQOmnMLSNffQ3EmBdA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1184&quot;/&gt;&lt;figcaption&gt;çª—å£æ¢æµ‹&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å¦‚æœæ¥æ”¶çª—å£ä»ç„¶ä¸º 0ï¼Œé‚£ä¹ˆæ”¶åˆ°è¿™ä¸ªæŠ¥æ–‡çš„ä¸€æ–¹å°±ä¼šé‡æ–°å¯åŠ¨æŒç»­è®¡æ—¶å™¨ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¦‚æœæ¥æ”¶çª—å£ä¸æ˜¯ 0ï¼Œé‚£ä¹ˆæ­»é”çš„å±€é¢å°±å¯ä»¥è¢«æ‰“ç ´äº†ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çª—å£æ¢æµ‹çš„æ¬¡æ•°ä¸€èˆ¬ä¸º 3 æ¬¡ï¼Œæ¯æ¬¡å¤§çº¦ 30-60 ç§’ï¼ˆä¸åŒçš„å®ç°å¯èƒ½ä¼šä¸ä¸€æ ·ï¼‰ã€‚å¦‚æœ 3 æ¬¡è¿‡åæ¥æ”¶çª—å£è¿˜æ˜¯ 0 çš„è¯ï¼Œæœ‰çš„ TCP å®ç°å°±ä¼šå‘ &lt;code&gt;RST&lt;/code&gt; æŠ¥æ–‡æ¥ä¸­æ–­è¿æ¥ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç³Šæ¶‚çª—å£ç»¼åˆç—‡&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæ¥æ”¶æ–¹å¤ªå¿™äº†ï¼Œæ¥ä¸åŠå–èµ°æ¥æ”¶çª—å£é‡Œçš„æ•°æ®ï¼Œé‚£ä¹ˆå°±ä¼šå¯¼è‡´å‘é€æ–¹çš„å‘é€çª—å£è¶Šæ¥è¶Šå°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ°æœ€åï¼Œ&lt;strong&gt;å¦‚æœæ¥æ”¶æ–¹è…¾å‡ºå‡ ä¸ªå­—èŠ‚å¹¶å‘Šè¯‰å‘é€æ–¹ç°åœ¨æœ‰å‡ ä¸ªå­—èŠ‚çš„çª—å£ï¼Œè€Œå‘é€æ–¹ä¼šä¹‰æ— åé¡¾åœ°å‘é€è¿™å‡ ä¸ªå­—èŠ‚ï¼Œè¿™å°±æ˜¯ç³Šæ¶‚çª—å£ç»¼åˆç—‡&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¦çŸ¥é“ï¼Œæˆ‘ä»¬çš„ &lt;code&gt;TCP + IP&lt;/code&gt; å¤´æœ‰ &lt;code&gt;40&lt;/code&gt; ä¸ªå­—èŠ‚ï¼Œä¸ºäº†ä¼ è¾“é‚£å‡ ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œè¦è¾¾ä¸Šè¿™ä¹ˆå¤§çš„å¼€é”€ï¼Œè¿™å¤ªä¸ç»æµäº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°±å¥½åƒä¸€ä¸ªå¯ä»¥æ‰¿è½½ 50 äººçš„å¤§å·´è½¦ï¼Œæ¯æ¬¡æ¥äº†ä¸€ä¸¤ä¸ªäººï¼Œå°±ç›´æ¥å‘è½¦ã€‚é™¤éå®¶é‡Œæœ‰çŸ¿çš„å¤§å·´å¸æœºï¼Œæ‰æ•¢è¿™æ ·ç©ï¼Œä¸ç„¶è¿Ÿæ—©ç ´äº§ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ä¹Ÿä¸éš¾ï¼Œå¤§å·´å¸æœºç­‰ä¹˜å®¢æ•°é‡è¶…è¿‡äº† 25 ä¸ªï¼Œæ‰è®¤å®šå¯ä»¥å‘è½¦ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç°ä¸¾ä¸ªç³Šæ¶‚çª—å£ç»¼åˆç—‡çš„æ —å­ï¼Œè€ƒè™‘ä»¥ä¸‹åœºæ™¯ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥æ”¶æ–¹çš„çª—å£å¤§å°æ˜¯ 360 å­—èŠ‚ï¼Œä½†æ¥æ”¶æ–¹ç”±äºæŸäº›åŸå› é™·å…¥å›°å¢ƒï¼Œå‡è®¾æ¥æ”¶æ–¹çš„åº”ç”¨å±‚è¯»å–çš„èƒ½åŠ›å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;æ¥æ”¶æ–¹æ¯æ¥æ”¶ 3 ä¸ªå­—èŠ‚ï¼Œåº”ç”¨ç¨‹åºå°±åªèƒ½ä»ç¼“å†²åŒºä¸­è¯»å– 1 ä¸ªå­—èŠ‚çš„æ•°æ®ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åœ¨ä¸‹ä¸€ä¸ªå‘é€æ–¹çš„ TCP æ®µåˆ°è¾¾ä¹‹å‰ï¼Œåº”ç”¨ç¨‹åºè¿˜ä»ç¼“å†²åŒºä¸­è¯»å–äº† 40 ä¸ªé¢å¤–çš„å­—èŠ‚ï¼›&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.9721718088324259&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvRENU4U8vxerdn8EyIkNUoooGrZJuDF39NTSmJptj24ruEZbWuEMVWDWQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1653&quot;/&gt;&lt;figcaption&gt;ç³Šæ¶‚çª—å£ç»¼åˆç—‡&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯ä¸ªè¿‡ç¨‹çš„çª—å£å¤§å°çš„å˜åŒ–ï¼Œåœ¨å›¾ä¸­éƒ½æè¿°çš„å¾ˆæ¸…æ¥šäº†ï¼Œå¯ä»¥å‘ç°çª—å£ä¸æ–­å‡å°‘äº†ï¼Œå¹¶ä¸”å‘é€çš„æ•°æ®éƒ½æ˜¯æ¯”è¾ƒå°çš„äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ï¼Œç³Šæ¶‚çª—å£ç»¼åˆç—‡çš„ç°è±¡æ˜¯å¯ä»¥å‘ç”Ÿåœ¨å‘é€æ–¹å’Œæ¥æ”¶æ–¹ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äºæ˜¯ï¼Œè¦è§£å†³ç³Šæ¶‚çª—å£ç»¼åˆç—‡ï¼Œå°±è§£å†³ä¸Šé¢ä¸¤ä¸ªé—®é¢˜å°±å¯ä»¥äº†&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;è®©æ¥æ”¶æ–¹ä¸é€šå‘Šå°çª—å£ç»™å‘é€æ–¹&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è®©å‘é€æ–¹é¿å…å‘é€å°æ•°æ®&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;æ€ä¹ˆè®©æ¥æ”¶æ–¹ä¸é€šå‘Šå°çª—å£å‘¢ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥æ”¶æ–¹é€šå¸¸çš„ç­–ç•¥å¦‚ä¸‹:&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ã€Œçª—å£å¤§å°ã€å°äº min( MSSï¼Œç¼“å­˜ç©ºé—´/2 ) ï¼Œä¹Ÿå°±æ˜¯å°äº MSS ä¸ 1/2 ç¼“å­˜å¤§å°ä¸­çš„æœ€å°å€¼æ—¶ï¼Œå°±ä¼šå‘å‘é€æ–¹é€šå‘Šçª—å£ä¸º &lt;code&gt;0&lt;/code&gt;ï¼Œä¹Ÿå°±é˜»æ­¢äº†å‘é€æ–¹å†å‘æ•°æ®è¿‡æ¥ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç­‰åˆ°æ¥æ”¶æ–¹å¤„ç†äº†ä¸€äº›æ•°æ®åï¼Œçª—å£å¤§å° &amp;gt;= MSSï¼Œæˆ–è€…æ¥æ”¶æ–¹ç¼“å­˜ç©ºé—´æœ‰ä¸€åŠå¯ä»¥ä½¿ç”¨ï¼Œå°±å¯ä»¥æŠŠçª—å£æ‰“å¼€è®©å‘é€æ–¹å‘é€æ•°æ®è¿‡æ¥ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;æ€ä¹ˆè®©å‘é€æ–¹é¿å…å‘é€å°æ•°æ®å‘¢ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‘é€æ–¹é€šå¸¸çš„ç­–ç•¥:&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨ Nagle ç®—æ³•ï¼Œè¯¥ç®—æ³•çš„æ€è·¯æ˜¯å»¶æ—¶å¤„ç†ï¼Œå®ƒæ»¡è¶³ä»¥ä¸‹ä¸¤ä¸ªæ¡ä»¶ä¸­çš„ä¸€æ¡æ‰å¯ä»¥å‘é€æ•°æ®ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;è¦ç­‰åˆ°çª—å£å¤§å° &amp;gt;= &lt;code&gt;MSS&lt;/code&gt; æˆ–æ˜¯ æ•°æ®å¤§å° &amp;gt;= &lt;code&gt;MSS&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ”¶åˆ°ä¹‹å‰å‘é€æ•°æ®çš„ &lt;code&gt;ack&lt;/code&gt; å›åŒ…&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åªè¦æ²¡æ»¡è¶³ä¸Šé¢æ¡ä»¶ä¸­çš„ä¸€æ¡ï¼Œå‘é€æ–¹ä¸€ç›´åœ¨å›¤ç§¯æ•°æ®ï¼Œç›´åˆ°æ»¡è¶³ä¸Šé¢çš„å‘é€æ¡ä»¶ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦å¤–ï¼ŒNagle ç®—æ³•é»˜è®¤æ˜¯æ‰“å¼€çš„ï¼Œå¦‚æœå¯¹äºä¸€äº›éœ€è¦å°æ•°æ®åŒ…äº¤äº’çš„åœºæ™¯çš„ç¨‹åºï¼Œæ¯”å¦‚ï¼Œtelnet æˆ– ssh è¿™æ ·çš„äº¤äº’æ€§æ¯”è¾ƒå¼ºçš„ç¨‹åºï¼Œåˆ™éœ€è¦å…³é—­ Nagle ç®—æ³•ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥åœ¨ Socket è®¾ç½® &lt;code&gt;TCP_NODELAY&lt;/code&gt; é€‰é¡¹æ¥å…³é—­è¿™ä¸ªç®—æ³•ï¼ˆå…³é—­ Nagle ç®—æ³•æ²¡æœ‰å…¨å±€å‚æ•°ï¼Œéœ€è¦æ ¹æ®æ¯ä¸ªåº”ç”¨è‡ªå·±çš„ç‰¹ç‚¹æ¥å…³é—­ï¼‰&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;setsockopt(sock_fd,Â IPPROTO_TCP,Â TCP_NODELAY,Â (&lt;span&gt;char&lt;/span&gt;Â *)&amp;amp;value,Â &lt;span&gt;sizeof&lt;/span&gt;(&lt;span&gt;int&lt;/span&gt;));&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;hr data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ‹¥å¡æ§åˆ¶&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ä¸ºä»€ä¹ˆè¦æœ‰æ‹¥å¡æ§åˆ¶å‘€ï¼Œä¸æ˜¯æœ‰æµé‡æ§åˆ¶äº†å—ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‰é¢çš„æµé‡æ§åˆ¶æ˜¯é¿å…ã€Œå‘é€æ–¹ã€çš„æ•°æ®å¡«æ»¡ã€Œæ¥æ”¶æ–¹ã€çš„ç¼“å­˜ï¼Œä½†æ˜¯å¹¶ä¸çŸ¥é“ç½‘ç»œçš„ä¸­å‘ç”Ÿäº†ä»€ä¹ˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸€èˆ¬æ¥è¯´ï¼Œè®¡ç®—æœºç½‘ç»œéƒ½å¤„åœ¨ä¸€ä¸ªå…±äº«çš„ç¯å¢ƒã€‚å› æ­¤ä¹Ÿæœ‰å¯èƒ½ä¼šå› ä¸ºå…¶ä»–ä¸»æœºä¹‹é—´çš„é€šä¿¡ä½¿å¾—ç½‘ç»œæ‹¥å µã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;åœ¨ç½‘ç»œå‡ºç°æ‹¥å µæ—¶ï¼Œå¦‚æœç»§ç»­å‘é€å¤§é‡æ•°æ®åŒ…ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®åŒ…æ—¶å»¶ã€ä¸¢å¤±ç­‰ï¼Œè¿™æ—¶ TCP å°±ä¼šé‡ä¼ æ•°æ®ï¼Œä½†æ˜¯ä¸€é‡ä¼ å°±ä¼šå¯¼è‡´ç½‘ç»œçš„è´Ÿæ‹…æ›´é‡ï¼Œäºæ˜¯ä¼šå¯¼è‡´æ›´å¤§çš„å»¶è¿Ÿä»¥åŠæ›´å¤šçš„ä¸¢åŒ…ï¼Œè¿™ä¸ªæƒ…å†µå°±ä¼šè¿›å…¥æ¶æ€§å¾ªç¯è¢«ä¸æ–­åœ°æ”¾å¤§....&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ï¼ŒTCP ä¸èƒ½å¿½ç•¥ç½‘ç»œä¸Šå‘ç”Ÿçš„äº‹ï¼Œå®ƒè¢«è®¾è®¡æˆä¸€ä¸ªæ— ç§çš„åè®®ï¼Œå½“ç½‘ç»œå‘é€æ‹¥å¡æ—¶ï¼ŒTCP ä¼šè‡ªæˆ‘ç‰ºç‰²ï¼Œé™ä½å‘é€çš„æ•°æ®é‡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äºæ˜¯ï¼Œå°±æœ‰äº†&lt;strong&gt;æ‹¥å¡æ§åˆ¶&lt;/strong&gt;ï¼Œæ§åˆ¶çš„ç›®çš„å°±æ˜¯&lt;strong&gt;é¿å…ã€Œå‘é€æ–¹ã€çš„æ•°æ®å¡«æ»¡æ•´ä¸ªç½‘ç»œã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†åœ¨ã€Œå‘é€æ–¹ã€è°ƒèŠ‚æ‰€è¦å‘é€æ•°æ®çš„é‡ï¼Œå®šä¹‰äº†ä¸€ä¸ªå«åšã€Œ&lt;strong&gt;æ‹¥å¡çª—å£&lt;/strong&gt;ã€çš„æ¦‚å¿µã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ä»€ä¹ˆæ˜¯æ‹¥å¡çª—å£ï¼Ÿå’Œå‘é€çª—å£æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æ‹¥å¡çª—å£ cwnd&lt;/strong&gt;æ˜¯å‘é€æ–¹ç»´æŠ¤çš„ä¸€ä¸ªçš„çŠ¶æ€å˜é‡ï¼Œå®ƒä¼šæ ¹æ®&lt;strong&gt;ç½‘ç»œçš„æ‹¥å¡ç¨‹åº¦åŠ¨æ€å˜åŒ–çš„&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬åœ¨å‰é¢æåˆ°è¿‡å‘é€çª—å£ &lt;code&gt;swnd&lt;/code&gt; å’Œæ¥æ”¶çª—å£ &lt;code&gt;rwnd&lt;/code&gt; æ˜¯çº¦ç­‰äºçš„å…³ç³»ï¼Œé‚£ä¹ˆç”±äºåŠ å…¥äº†æ‹¥å¡çª—å£çš„æ¦‚å¿µåï¼Œæ­¤æ—¶å‘é€çª—å£çš„å€¼æ˜¯swnd = min(cwnd, rwnd)ï¼Œä¹Ÿå°±æ˜¯æ‹¥å¡çª—å£å’Œæ¥æ”¶çª—å£ä¸­çš„æœ€å°å€¼ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‹¥å¡çª—å£ &lt;code&gt;cwnd&lt;/code&gt; å˜åŒ–çš„è§„åˆ™ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;åªè¦ç½‘ç»œä¸­æ²¡æœ‰å‡ºç°æ‹¥å¡ï¼Œ&lt;code&gt;cwnd&lt;/code&gt; å°±ä¼šå¢å¤§ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä½†ç½‘ç»œä¸­å‡ºç°äº†æ‹¥å¡ï¼Œ&lt;code&gt;cwnd&lt;/code&gt; å°±å‡å°‘ï¼›&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;é‚£ä¹ˆæ€ä¹ˆçŸ¥é“å½“å‰ç½‘ç»œæ˜¯å¦å‡ºç°äº†æ‹¥å¡å‘¢ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶å®åªè¦ã€Œå‘é€æ–¹ã€æ²¡æœ‰åœ¨è§„å®šæ—¶é—´å†…æ¥æ”¶åˆ° ACK åº”ç­”æŠ¥æ–‡ï¼Œä¹Ÿå°±æ˜¯&lt;strong&gt;å‘ç”Ÿäº†è¶…æ—¶é‡ä¼ ï¼Œå°±ä¼šè®¤ä¸ºç½‘ç»œå‡ºç°äº†ç”¨æ‹¥å¡ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;æ‹¥å¡æ§åˆ¶æœ‰å“ªäº›æ§åˆ¶ç®—æ³•ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‹¥å¡æ§åˆ¶ä¸»è¦æ˜¯å››ä¸ªç®—æ³•ï¼š&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ…¢å¯åŠ¨&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;TCP åœ¨åˆšå»ºç«‹è¿æ¥å®Œæˆåï¼Œé¦–å…ˆæ˜¯æœ‰ä¸ªæ…¢å¯åŠ¨çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªæ…¢å¯åŠ¨çš„æ„æ€å°±æ˜¯ä¸€ç‚¹ä¸€ç‚¹çš„æé«˜å‘é€æ•°æ®åŒ…çš„æ•°é‡ï¼Œå¦‚æœä¸€ä¸Šæ¥å°±å‘å¤§é‡çš„æ•°æ®ï¼Œè¿™ä¸æ˜¯ç»™ç½‘ç»œæ·»å µå—ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ…¢å¯åŠ¨çš„ç®—æ³•è®°ä½ä¸€ä¸ªè§„åˆ™å°±è¡Œï¼š&lt;strong&gt;å½“å‘é€æ–¹æ¯æ”¶åˆ°ä¸€ä¸ª ACKï¼Œæ‹¥å¡çª—å£ cwnd çš„å¤§å°å°±ä¼šåŠ  1ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œå‡å®šæ‹¥å¡çª—å£ &lt;code&gt;cwnd&lt;/code&gt; å’Œå‘é€çª—å£ &lt;code&gt;swnd&lt;/code&gt; ç›¸ç­‰ï¼Œä¸‹é¢ä¸¾ä¸ªæ —å­ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;è¿æ¥å»ºç«‹å®Œæˆåï¼Œä¸€å¼€å§‹åˆå§‹åŒ– &lt;code&gt;cwnd = 1&lt;/code&gt;ï¼Œè¡¨ç¤ºå¯ä»¥ä¼ ä¸€ä¸ª &lt;code&gt;MSS&lt;/code&gt; å¤§å°çš„æ•°æ®ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å½“æ”¶åˆ°ä¸€ä¸ª ACK ç¡®è®¤åº”ç­”åï¼Œcwnd å¢åŠ  1ï¼Œäºæ˜¯ä¸€æ¬¡èƒ½å¤Ÿå‘é€ 2 ä¸ª&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å½“æ”¶åˆ° 2 ä¸ªçš„ ACK ç¡®è®¤åº”ç­”åï¼Œ cwnd å¢åŠ  2ï¼Œäºæ˜¯å°±å¯ä»¥æ¯”ä¹‹å‰å¤šå‘2 ä¸ªï¼Œæ‰€ä»¥è¿™ä¸€æ¬¡èƒ½å¤Ÿå‘é€ 4 ä¸ª&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å½“è¿™ 4 ä¸ªçš„ ACK ç¡®è®¤åˆ°æ¥çš„æ—¶å€™ï¼Œæ¯ä¸ªç¡®è®¤ cwnd å¢åŠ  1ï¼Œ 4 ä¸ªç¡®è®¤ cwnd å¢åŠ  4ï¼Œäºæ˜¯å°±å¯ä»¥æ¯”ä¹‹å‰å¤šå‘ 4 ä¸ªï¼Œæ‰€ä»¥è¿™ä¸€æ¬¡èƒ½å¤Ÿå‘é€ 8 ä¸ªã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6220472440944882&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvRE3LSIgDjT5fEJJEy49oLo8c6yb843aaFdfPwSyNezxIBGxv9M7aLO7w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1016&quot;/&gt;&lt;figcaption&gt;æ…¢å¯åŠ¨ç®—æ³•&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥çœ‹å‡ºæ…¢å¯åŠ¨ç®—æ³•ï¼Œå‘åŒ…çš„ä¸ªæ•°æ˜¯&lt;strong&gt;æŒ‡æ•°æ€§çš„å¢é•¿&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;é‚£æ…¢å¯åŠ¨æ¶¨åˆ°ä»€ä¹ˆæ—¶å€™æ˜¯ä¸ªå¤´å‘¢ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰ä¸€ä¸ªå«æ…¢å¯åŠ¨é—¨é™ Â &lt;code&gt;ssthresh&lt;/code&gt; ï¼ˆslow start thresholdï¼‰çŠ¶æ€å˜é‡ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å½“ &lt;code&gt;cwnd&lt;/code&gt; &amp;lt; Â &lt;code&gt;ssthresh&lt;/code&gt; æ—¶ï¼Œä½¿ç”¨æ…¢å¯åŠ¨ç®—æ³•ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å½“ &lt;code&gt;cwnd&lt;/code&gt; &amp;gt;= &lt;code&gt;ssthresh&lt;/code&gt; æ—¶ï¼Œå°±ä¼šä½¿ç”¨ã€Œæ‹¥å¡é¿å…ç®—æ³•ã€ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ‹¥å¡é¿å…ç®—æ³•&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‰é¢è¯´é“ï¼Œå½“æ‹¥å¡çª—å£ &lt;code&gt;cwnd&lt;/code&gt; ã€Œè¶…è¿‡ã€æ…¢å¯åŠ¨é—¨é™ &lt;code&gt;ssthresh&lt;/code&gt; å°±ä¼šè¿›å…¥æ‹¥å¡é¿å…ç®—æ³•ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸€èˆ¬æ¥è¯´ &lt;code&gt;ssthresh&lt;/code&gt; çš„å¤§å°æ˜¯ &lt;code&gt;65535&lt;/code&gt; å­—èŠ‚ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£ä¹ˆè¿›å…¥æ‹¥å¡é¿å…ç®—æ³•åï¼Œå®ƒçš„è§„åˆ™æ˜¯ï¼š&lt;strong&gt;æ¯å½“æ”¶åˆ°ä¸€ä¸ª ACK æ—¶ï¼Œcwnd å¢åŠ  1/cwndã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥ä¸Šå‰é¢çš„æ…¢å¯åŠ¨çš„æ —å­ï¼Œç°å‡å®š &lt;code&gt;ssthresh&lt;/code&gt; ä¸º &lt;code&gt;8&lt;/code&gt;ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å½“ 8 ä¸ª ACK åº”ç­”ç¡®è®¤åˆ°æ¥æ—¶ï¼Œæ¯ä¸ªç¡®è®¤å¢åŠ  1/8ï¼Œ8 ä¸ª ACK ç¡®è®¤ cwnd ä¸€å…±å¢åŠ  1ï¼Œäºæ˜¯è¿™ä¸€æ¬¡èƒ½å¤Ÿå‘é€ 9 ä¸ª &lt;code&gt;MSS&lt;/code&gt; å¤§å°çš„æ•°æ®ï¼Œå˜æˆäº†&lt;strong&gt;çº¿æ€§å¢é•¿ã€‚&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.838302752293578&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvRE24rKa6myYycvJ54GJJf8RerMFKfZNxyiaicC2LoZvCtLiceTH0KXKP67w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;872&quot;/&gt;&lt;figcaption&gt;æ‹¥å¡é¿å…&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæ‹¥å¡é¿å…ç®—æ³•å°±æ˜¯å°†åŸæœ¬æ…¢å¯åŠ¨ç®—æ³•çš„æŒ‡æ•°å¢é•¿å˜æˆäº†çº¿æ€§å¢é•¿ï¼Œè¿˜æ˜¯å¢é•¿é˜¶æ®µï¼Œä½†æ˜¯å¢é•¿é€Ÿåº¦ç¼“æ…¢äº†ä¸€äº›ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°±è¿™ä¹ˆä¸€ç›´å¢é•¿ç€åï¼Œç½‘ç»œå°±ä¼šæ…¢æ…¢è¿›å…¥äº†æ‹¥å¡çš„çŠ¶å†µäº†ï¼Œäºæ˜¯å°±ä¼šå‡ºç°ä¸¢åŒ…ç°è±¡ï¼Œè¿™æ—¶å°±éœ€è¦å¯¹ä¸¢å¤±çš„æ•°æ®åŒ…è¿›è¡Œé‡ä¼ ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“è§¦å‘äº†é‡ä¼ æœºåˆ¶ï¼Œä¹Ÿå°±è¿›å…¥äº†ã€Œæ‹¥å¡å‘ç”Ÿç®—æ³•ã€ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ‹¥å¡å‘ç”Ÿ&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ç½‘ç»œå‡ºç°æ‹¥å¡ï¼Œä¹Ÿå°±æ˜¯ä¼šå‘ç”Ÿæ•°æ®åŒ…é‡ä¼ ï¼Œé‡ä¼ æœºåˆ¶ä¸»è¦æœ‰ä¸¤ç§ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸¤ç§ä½¿ç”¨çš„æ‹¥å¡å‘é€ç®—æ³•æ˜¯ä¸åŒçš„ï¼Œæ¥ä¸‹æ¥åˆ†åˆ«æ¥è¯´è¯´ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å‘ç”Ÿè¶…æ—¶é‡ä¼ çš„æ‹¥å¡å‘ç”Ÿç®—æ³•&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“å‘ç”Ÿäº†ã€Œè¶…æ—¶é‡ä¼ ã€ï¼Œåˆ™å°±ä¼šä½¿ç”¨æ‹¥å¡å‘ç”Ÿç®—æ³•ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªæ—¶å€™ï¼Œssthresh å’Œ cwnd çš„å€¼ä¼šå‘ç”Ÿå˜åŒ–ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;ssthresh&lt;/code&gt; è®¾ä¸º &lt;code&gt;cwnd/2&lt;/code&gt;ï¼Œ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;cwnd&lt;/code&gt; é‡ç½®ä¸º &lt;code&gt;1&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7644483362521891&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvRExtA2mLaf1XM5W7UUXwMZIbd7HRjBIgkRh1FRq1pvdmibyG1IC7J1dRw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1142&quot;/&gt;&lt;figcaption&gt;æ‹¥å¡å‘é€ â€”â€” è¶…æ—¶é‡ä¼ &lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥ç€ï¼Œå°±é‡æ–°å¼€å§‹æ…¢å¯åŠ¨ï¼Œæ…¢å¯åŠ¨æ˜¯ä¼šçªç„¶å‡å°‘æ•°æ®æµçš„ã€‚è¿™çœŸæ˜¯ä¸€æ—¦ã€Œè¶…æ—¶é‡ä¼ ã€ï¼Œé©¬ä¸Šå›åˆ°è§£æ”¾å‰ã€‚ä½†æ˜¯è¿™ç§æ–¹å¼å¤ªæ¿€è¿›äº†ï¼Œååº”ä¹Ÿå¾ˆå¼ºçƒˆï¼Œä¼šé€ æˆç½‘ç»œå¡é¡¿ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°±å¥½åƒæœ¬æ¥åœ¨ç§‹åå±±é«˜é€Ÿæ¼‚ç§»ç€ï¼Œçªç„¶æ¥ä¸ªç´§æ€¥åˆ¹è½¦ï¼Œè½®èƒå—å¾—äº†å—ã€‚ã€‚ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å‘ç”Ÿå¿«é€Ÿé‡ä¼ çš„æ‹¥å¡å‘ç”Ÿç®—æ³•&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿˜æœ‰æ›´å¥½çš„æ–¹å¼ï¼Œå‰é¢æˆ‘ä»¬è®²è¿‡ã€Œå¿«é€Ÿé‡ä¼ ç®—æ³•ã€ã€‚å½“æ¥æ”¶æ–¹å‘ç°ä¸¢äº†ä¸€ä¸ªä¸­é—´åŒ…çš„æ—¶å€™ï¼Œå‘é€ä¸‰æ¬¡å‰ä¸€ä¸ªåŒ…çš„ ACKï¼Œäºæ˜¯å‘é€ç«¯å°±ä¼šå¿«é€Ÿåœ°é‡ä¼ ï¼Œä¸å¿…ç­‰å¾…è¶…æ—¶å†é‡ä¼ ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;TCP è®¤ä¸ºè¿™ç§æƒ…å†µä¸ä¸¥é‡ï¼Œå› ä¸ºå¤§éƒ¨åˆ†æ²¡ä¸¢ï¼Œåªä¸¢äº†ä¸€å°éƒ¨åˆ†ï¼Œåˆ™ &lt;code&gt;ssthresh&lt;/code&gt; å’Œ &lt;code&gt;cwnd&lt;/code&gt; å˜åŒ–å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;cwnd = cwnd/2&lt;/code&gt; ï¼Œä¹Ÿå°±æ˜¯è®¾ç½®ä¸ºåŸæ¥çš„ä¸€åŠ;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;ssthresh = cwnd&lt;/code&gt;;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è¿›å…¥å¿«é€Ÿæ¢å¤ç®—æ³•&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å¿«é€Ÿæ¢å¤&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤ç®—æ³•ä¸€èˆ¬åŒæ—¶ä½¿ç”¨ï¼Œå¿«é€Ÿæ¢å¤ç®—æ³•æ˜¯è®¤ä¸ºï¼Œä½ è¿˜èƒ½æ”¶åˆ° 3 ä¸ªé‡å¤ ACK è¯´æ˜ç½‘ç»œä¹Ÿä¸é‚£ä¹ˆç³Ÿç³•ï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦åƒ &lt;code&gt;RTO&lt;/code&gt; è¶…æ—¶é‚£ä¹ˆå¼ºçƒˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­£å¦‚å‰é¢æ‰€è¯´ï¼Œè¿›å…¥å¿«é€Ÿæ¢å¤ä¹‹å‰ï¼Œ&lt;code&gt;cwnd&lt;/code&gt; å’Œ &lt;code&gt;ssthresh&lt;/code&gt; å·²è¢«æ›´æ–°äº†ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;cwnd = cwnd/2&lt;/code&gt; ï¼Œä¹Ÿå°±æ˜¯è®¾ç½®ä¸ºåŸæ¥çš„ä¸€åŠ;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;ssthresh = cwnd&lt;/code&gt;;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç„¶åï¼Œè¿›å…¥å¿«é€Ÿæ¢å¤ç®—æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;æ‹¥å¡çª—å£ &lt;code&gt;cwnd = ssthresh + 3&lt;/code&gt; ï¼ˆ 3 çš„æ„æ€æ˜¯ç¡®è®¤æœ‰ 3 ä¸ªæ•°æ®åŒ…è¢«æ”¶åˆ°äº†ï¼‰ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é‡ä¼ ä¸¢å¤±çš„æ•°æ®åŒ…ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¦‚æœå†æ”¶åˆ°é‡å¤çš„ ACKï¼Œé‚£ä¹ˆ cwnd å¢åŠ  1ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¦‚æœæ”¶åˆ°æ–°æ•°æ®çš„ ACK åï¼ŒæŠŠ cwnd è®¾ç½®ä¸ºç¬¬ä¸€æ­¥ä¸­çš„ ssthresh çš„å€¼ï¼ŒåŸå› æ˜¯è¯¥ ACK ç¡®è®¤äº†æ–°çš„æ•°æ®ï¼Œè¯´æ˜ä» duplicated Â ACK æ—¶çš„æ•°æ®éƒ½å·²æ”¶åˆ°ï¼Œè¯¥æ¢å¤è¿‡ç¨‹å·²ç»ç»“æŸï¼Œå¯ä»¥å›åˆ°æ¢å¤ä¹‹å‰çš„çŠ¶æ€äº†ï¼Œä¹Ÿå³å†æ¬¡è¿›å…¥æ‹¥å¡é¿å…çŠ¶æ€ï¼›&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6457100591715976&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREy2lpkJmVLajoOIz5eyzJxU1nOQUmWjmRo7icLAUUHLFstgXNqT3U1sw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1352&quot;/&gt;&lt;figcaption&gt;å¿«é€Ÿé‡ä¼ å’Œå¿«é€Ÿæ¢å¤&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¹Ÿå°±æ˜¯æ²¡æœ‰åƒã€Œè¶…æ—¶é‡ä¼ ã€ä¸€å¤œå›åˆ°è§£æ”¾å‰ï¼Œè€Œæ˜¯è¿˜åœ¨æ¯”è¾ƒé«˜çš„å€¼ï¼Œåç»­å‘ˆçº¿æ€§å¢é•¿ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ‹¥å¡ç®—æ³•ç¤ºæ„å›¾&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¥½äº†ï¼Œä»¥ä¸Šå°±æ˜¯æ‹¥å¡æ§åˆ¶çš„å…¨éƒ¨å†…å®¹äº†ï¼Œçœ‹å®Œåï¼Œä½ å†æ¥çœ‹ä¸‹é¢è¿™å¼ å›¾ç‰‡ï¼Œæ¯ä¸ªè¿‡ç¨‹æˆ‘ç›¸ä¿¡ä½ éƒ½èƒ½æ˜ç™½ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.50875&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/J0g14CUwaZcHKlpxE3Eyibf87WLibypvREU5BJagnDSNS1U5O5kicKFTd8VkMibeD6tSUwSh2X4RDLhP6rz7ZoKIew/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;800&quot;/&gt;&lt;figcaption&gt;TCP æ‹¥å¡æ§åˆ¶&lt;/figcaption&gt;&lt;/figure&gt;&lt;hr data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å‚è€ƒèµ„æ–™ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;[1] è¶£è°ˆç½‘ç»œåè®®ä¸“æ .åˆ˜è¶….æå®¢æ—¶é—´&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;[2] Webåè®®è¯¦è§£ä¸æŠ“åŒ…å®æˆ˜ä¸“æ .é™¶è¾‰.æå®¢æ—¶é—´&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;[3] TCP/IPè¯¦è§£ å·1ï¼šåè®®.èŒƒå»ºå è¯‘.æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;[4] å›¾è§£TCP/IP.ç«¹ä¸‹éš†å².äººæ°‘é‚®ç”µå‡ºç‰ˆç¤¾&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;[5] The TCP/IP Guide.Charles M. Kozierok.&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;[6] TCPé‚£äº›äº‹ï¼ˆä¸Šï¼‰.é™ˆçš“.é…·å£³åšå®¢.
https://coolshell.cn/articles/11564.html&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;[7] TCPé‚£äº›äº‹ï¼ˆä¸‹ï¼‰.é™ˆçš“.é…·å£³åšå®¢.https://coolshell.cn/articles/11609.html&lt;/span&gt;&lt;/p&gt;&lt;hr data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ˜¯å§ï¼ŸTCP å·¨å¤æ‚å§ï¼Ÿçœ‹å®Œå¾ˆç´¯å§ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†è¿™è¿˜åªæ˜¯ TCP å†°å±±ä¸€è„šï¼Œå®ƒçš„æ›´æ·±å¤„å°±ç”±ä½ ä»¬è‡ªå·±å»æ¢ç´¢å•¦ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;å°æ—æ˜¯ä¸“ä¸ºå¤§å®¶å›¾è§£çš„å·¥å…·äººï¼ŒGoodbyeï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§ï¼&lt;/strong&gt;&lt;/p&gt;&lt;section mp-original-font-size=&quot;16&quot; mp-original-line-height=&quot;28&quot;&gt;&lt;span&gt;&lt;strong mp-original-font-size=&quot;16&quot; mp-original-line-height=&quot;28&quot;&gt;å›¾è§£ç³»åˆ—æ–‡ç« ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section mp-original-font-size=&quot;16&quot; mp-original-line-height=&quot;24&quot;&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUxODAzNDg4NQ==&amp;amp;mid=2247507000&amp;amp;idx=1&amp;amp;sn=c045101b45dd70ec37f9b81361b09f14&amp;amp;chksm=f98d9892cefa1184ac8e278e468a8a225cd5a6f4c3dfba83ed223c5da69421041961bfb945cc&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;å°æ—çš„ç½‘ç«™ä¸Šçº¿å•¦ï¼&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; mp-original-font-size=&quot;16&quot; mp-original-line-height=&quot;24&quot; hasload=&quot;1&quot;&gt;å°æ—çš„ç½‘ç«™ä¸Šçº¿å•¦ï¼&lt;/a&gt;&lt;/section&gt;&lt;section mp-original-font-size=&quot;16&quot; mp-original-line-height=&quot;32&quot;&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUxODAzNDg4NQ==&amp;amp;mid=2247492900&amp;amp;idx=1&amp;amp;sn=2c1d06a667b1e17e6d8caabff2bbb85b&amp;amp;chksm=f98da18ecefa28986109f13d28c1a06f304cb4d897eb2e931e79dc82d0b054ef6a9f7e1e4e91&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;å°æ—çš„å›¾è§£ç³»ç»Ÿï¼Œå¤§æ›å…‰ï¼&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot; mp-original-font-size=&quot;16&quot; mp-original-line-height=&quot;32&quot;&gt;å°æ—çš„å›¾è§£ç³»ç»Ÿï¼Œå¤§æ›å…‰ï¼&lt;/a&gt;&lt;br mp-original-font-size=&quot;16&quot; mp-original-line-height=&quot;32&quot;/&gt;&lt;/section&gt;&lt;section mp-original-font-size=&quot;16&quot; mp-original-line-height=&quot;32&quot;&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUxODAzNDg4NQ==&amp;amp;mid=2247491944&amp;amp;idx=1&amp;amp;sn=b90deba780ae3840668e21127e467b83&amp;amp;chksm=f98da5c2cefa2cd456045e9b2ed92837ed10e4a2c650f463b29ef5d7f8f4d01014d92225acad&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ä¸é¸½äº†ï¼Œå°æ—çš„ã€Œå›¾è§£ç½‘ç»œ 3.0 ã€å‘å¸ƒï¼&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot; mp-original-font-size=&quot;16&quot; mp-original-line-height=&quot;32&quot;&gt;&lt;span&gt;ä¸é¸½äº†ï¼Œå°æ—çš„ã€Œå›¾è§£ç½‘ç»œ 3.0 ã€å‘å¸ƒï¼&lt;/span&gt;&lt;/a&gt;&lt;/section&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzUxODAzNDg4NQ==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/J0g14CUwaZfTwwjfpJhXgIrYMgtVcLhQQBVb02clZfKicbxaibSTNJqXe9Zu8ydiavZKJWJAIhKcnD9hBuKU92JZQ/0?wx_fmt=png&quot; data-nickname=&quot;å°æ—coding&quot; data-alias=&quot;CodingLin&quot; data-signature=&quot;ä¸“æ³¨å›¾è§£è®¡ç®—æœºåŸºç¡€ï¼Œè®©å¤©ä¸‹æ²¡æœ‰éš¾æ‡‚çš„å…«è‚¡æ–‡ï¼åˆ·é¢˜ç½‘ç«™ï¼šxiaolincoding.com&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;br/&gt;&lt;/figure&gt;&lt;/section&gt;
          &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>8f13d8f36d794100db2460ee3ee3a96d</guid>
<title>TikTokå†…å¹•ï¼šå¼ ä¸€é¸£çš„å·¨æµªå¾é€”ï¼›Web3é©å‘½ï¼šé€ƒç¦»ã€ä¿¡ä»°ã€å¤§è¿å¾™ï½œç å†œå‘¨åˆŠVIPä¼šå‘˜ä¸“å±é‚®ä»¶å‘¨æŠ¥ Vol.090</title>
<link>https://toutiao.io/k/8hmzq2o</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                                                                     &quot; id=&quot;js_content&quot;&gt;
            &lt;p&gt;&lt;span&gt;æœ¬æ–‡å†…å®¹èŠ‚é€‰è‡ª&lt;strong&gt;ã€Œç å†œå‘¨åˆŠVIPä¼šå‘˜ä¸“å±é‚®ä»¶å‘¨æŠ¥ Vol.090ã€&lt;/strong&gt;ï¼Œæ„Ÿè°¢é˜…è¯»ã€‚&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5MzA0ODkyMA==&amp;amp;mid=2655078432&amp;amp;idx=2&amp;amp;sn=f1ba1fa5fbfbcf98a3e6f610b258cf05&amp;amp;chksm=bd2918178a5e9101b993d9e84d783562c995577cec855adf32ccb5946ff4da21fd6e89ba078e&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;æƒ³é‚®ä»¶è®¢é˜…å‘¨æŠ¥ï¼Ÿæ‰«ç å³åˆ»è®¢é˜…ï¼&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;strong&gt;â†“â†“â†“&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;558&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;307&quot; data-ratio=&quot;0.5493333333333333&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/AjN1jquNavich3VaNkKeiaAwUhz7TQbQmic4fFsr58X9PAYleYzxqc1K1vZjeBoZDMUsmia0xH67EQYINGRvNOtLmA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;750&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æœ¬æœŸï¼Œé¦–å…ˆåˆ†äº«çš„æ˜¯&lt;strong&gt;å‡¯æ–‡Â·å‡¯åˆ©70å²ç”Ÿæ—¥çš„103æ¡äººç”Ÿå»ºè®®&lt;/strong&gt;ï¼Œæ‘˜å½•å‡ æ¡ï¼Œå…±å‹‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;1ï¼‰ä¸è¦ä¸ºé‚£ç§ä½ ä¸æƒ³æˆä¸ºçš„äººå·¥ä½œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2ï¼‰12ä¸ªçˆ±ä½ çš„äººï¼Œæ¯”12,000,000ä¸ªå–œæ¬¢ä½ çš„äººæ›´å€¼å¾—ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;3ï¼‰åˆ«çŠ¯åŒæ ·çš„é”™ï¼Œè¯•ä¸€äº›æ–°é”™ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;4ï¼‰é¢†å¯¼çš„çœŸæ­£å·¥ä½œæ˜¯åŸ¹å…»æ›´å¤šé¢†å¯¼ï¼Œè€Œä¸æ˜¯ç²‰ä¸ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;5ï¼‰ä»˜å‡ºï¼ˆé”»ç‚¼ã€é™ªä¼´ã€å·¥ä½œï¼‰çš„è¿ç»­æ€§æ¯”æ•°é‡æ›´é‡è¦ã€‚æ—¥æ‹±ä¸€å’ï¼Œæ¯”å¶å°”ä¸ºä¹‹æ›´é‡è¦ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;strong&gt;TikTokå†…å¹•ï¼šå¼ ä¸€é¸£çš„å·¨æµªå¾é€”&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;https://mp.weixin.qq.com/s/1Dv17rDRto_1i_LdHEVARA&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;â€œå¦ä¸€æ–¹é¢ï¼Œå¼ ä¸€é¸£ä¸ä¼šæ„Ÿæƒ…ç”¨äº‹ï¼Œå¯¹äººå¯¹äº‹æä¸ºç²¾ç¡®ï¼Œçœ¼ç›å®¹ä¸ä¸‹ç°è‰²å’Œæ²™ç²’ã€‚è¿™è®©ä»–æµéœ²å‡ºä¸€ç§ç‹ ç»ã€‚åœ¨æ—©æœŸï¼Œä»–æŠŠæ‹¿èµ°å…¬å¸ä»£ç çš„äººé€è¿›äº†ç›‘ç‹±ã€‚â€&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;br/&gt;Web3é©å‘½ï¼šé€ƒç¦»ã€ä¿¡ä»°ã€å¤§è¿å¾™&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;https://mp.weixin.qq.com/s/_fZxTDOr2n1IQySjVODB8A&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;äº’è”ç½‘æ­£åœ¨å‘ç”Ÿçš„ä¸€åœºâ€œå¤§è¿å¾™â€&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;strong&gt;Bç«™SREä¸šåŠ¡ç¨³å®šæ€§è¿è¥å®è·µ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;https://toutiao.io/k/vduu1jt&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä»ç¨³å®šæ€§çš„ç›¸å…³ç†è®ºå®šä¹‰å‡ºå‘ï¼Œå›´ç»•ç¨³å®šæ€§çš„æ ¸å¿ƒé¢†åŸŸå±•å¼€æè¿°ï¼Œå¹¶ä»‹ç»Bç«™åœ¨ç›¸å…³é¢†åŸŸæ‰€åšçš„å®è·µæ¢ç´¢ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;strong&gt;æºç¨‹é…’åº—è®¢å•ç¼“å­˜ &amp;amp; å­˜å‚¨ç³»ç»Ÿå‡çº§å®è·µ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;https://toutiao.io/k/h7w6rt4&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸‡å­—é•¿æ–‡è¯¦è§£&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;strong&gt;é˜¿é‡Œå·´å·´å¼€æºçš„é«˜æ€§èƒ½JSONåº“&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;https://github.com/alibaba/fastjson2&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;FASTJSONé¡¹ç›®çš„é‡è¦å‡çº§&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;strong&gt;ä¸€ä¸ªä¸“ä¸º TypeScript è®¾è®¡çš„ RPC æ¡†æ¶&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;https://github.com/k8w/tsrpc&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é€‚ç”¨äº HTTP APIã€WebSocket å®æ—¶åº”ç”¨ã€NodeJS å¾®æœåŠ¡ç­‰åœºæ™¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;strong&gt;å‡ é“é«˜é¢‘çš„JVMé¢è¯•é¢˜&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;https://toutiao.io/k/zgzh3st&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¾›å‚è€ƒ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;strong&gt;9å¼ å›¾è½»æ¾åƒé€Goå†…å­˜ç®¡ç†å•å…ƒ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;https://toutiao.io/k/x03gc99&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å›¾æ–‡å¹¶èŒ‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;strong&gt;Elasticsearch æ•°æ®å»ºæ¨¡æŒ‡å—&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;https://toutiao.io/k/n0gqyj1&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¯¦ç»†ä»‹ç»&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;strong&gt;æˆ‘çš„æœºå™¨å­¦ä¹ ä¹‹è·¯&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;https://toutiao.io/k/y59f508&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å­¦ä¹ æ€»ç»“&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5MzA0ODkyMA==&amp;amp;mid=2655078432&amp;amp;idx=2&amp;amp;sn=f1ba1fa5fbfbcf98a3e6f610b258cf05&amp;amp;chksm=bd2918178a5e9101b993d9e84d783562c995577cec855adf32ccb5946ff4da21fd6e89ba078e&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;æƒ³é‚®ä»¶è®¢é˜…å‘¨æŠ¥ï¼Ÿæ‰«ç å³åˆ»è®¢é˜…ï¼&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;strong&gt;â†“â†“â†“&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;558&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;307&quot; data-ratio=&quot;0.5493333333333333&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/AjN1jquNavich3VaNkKeiaAwUhz7TQbQmic4fFsr58X9PAYleYzxqc1K1vZjeBoZDMUsmia0xH67EQYINGRvNOtLmA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;750&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
          &lt;/div&gt;

          

          



           
                                
                    
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>5bed073e4598eba77728bb8a67318582</guid>
<title>ä¸€æ–‡å¸¦ä½ äº†è§£ Prometheus</title>
<link>https://toutiao.io/k/778gp0x</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.1575&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/j3gficicyOvasIjZpiaTNIPReJVWEJf7UGpmokI3LL4NbQDb8fO48fYROmYPXUhXFN8IdDqPcI1gA6OfSLsQHxB4w/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;400&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½œè€…ï¼škevinkrcaiï¼Œè…¾è®¯ IEG åå°å¼€å‘å·¥ç¨‹å¸ˆ&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;Prometheus æ˜¯ä¸€ä¸ªå¼€æºçš„å®Œæ•´ç›‘æ§è§£å†³æ–¹æ¡ˆï¼Œæœ¬æ–‡å°†ä»æŒ‡æ ‡æŠ“å–åˆ°æŸ¥è¯¢åŠå¯è§†åŒ–å±•ç¤ºï¼Œä»¥åŠæœ€åçš„ç›‘æ§å‘Šè­¦ï¼Œå¯¹ Prometheus åšä¸€ä¸ªåŸºæœ¬çš„è®¤è¯†ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1. ç®€ä»‹&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Prometheus æ˜¯å¤å¸Œè…Šç¥è¯é‡Œæ³°å¦æ—çš„ä¸€åç¥æ˜ï¼Œåå­—çš„æ„æ€æ˜¯&quot;å…ˆè§ä¹‹æ˜&quot;ï¼Œä¸‹å›¾ä¸­æ˜¯ Prometheus è¢«å®™æ–¯æƒ©ç½šï¼Œé¥±å—è‚è„æ—¥é£Ÿå¤œé•¿ä¹‹è‹¦ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6197802197802198&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmC0iaZ8ibvoahdrUZV7mfzxVC3rYy4bZPPQlCBX57t3dpqPsUlMRiaT9icdg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢å°±æ˜¯æˆ‘ä»¬ CRUD Boy æ‰€äº†è§£çš„ Prometheusï¼Œä¸‹é¢æ˜¯å…¶å®˜ç½‘å°é¢å›¾å¼•å¯¼è¯­ï¼šFrom metrics to insightï¼Œä»æŒ‡æ ‡åˆ°æ´å¯ŸåŠ›ï¼Œé€šè¿‡æŒ‡æ ‡å»æ´å¯Ÿä½ çš„ç³»ç»Ÿï¼Œä¸ºæˆ‘ä»¬çš„ç³»ç»Ÿæä¾›æŒ‡æ ‡æ”¶é›†å’Œç›‘æ§çš„å¼€æºè§£å†³æ–¹æ¡ˆã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒPrometheus æ˜¯ä¸€ä¸ªæ•°æ®ç›‘æ§çš„è§£å†³æ–¹æ¡ˆï¼Œè®©æˆ‘ä»¬èƒ½éšæ—¶æŒæ¡ç³»ç»Ÿè¿è¡Œçš„çŠ¶æ€ï¼Œå¿«é€Ÿå®šä½é—®é¢˜å’Œæ’é™¤æ•…éšœã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.2555066079295154&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCeexaurehETBh19V8icRqSLCYaoquLj2suhbIkSGxseuxKcO8tp0nKTA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;454&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Prometheus å‘å±•é€Ÿåº¦å¾ˆå¿«ï¼Œ12 å¹´å¼€å‘å®Œæˆï¼Œ16 å¹´åŠ å…¥ CNCFï¼Œæˆä¸ºç»§ K8s ä¹‹åç¬¬äºŒä¸ª CNCF æ‰˜ç®¡çš„é¡¹ç›®ï¼Œç›®å‰ Github 42k çš„ ğŸŒŸï¼Œè€Œä¸”ç¤¾åŒºå¾ˆæ´»è·ƒï¼Œç»´æŠ¤é¢‘ç‡å¾ˆé«˜ï¼ŒåŸºæœ¬ç¨³å®šåœ¨ 1 ä¸ªæœˆ 1 ä¸ªå°ç‰ˆæœ¬çš„è¿­ä»£é€Ÿåº¦ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.20985401459854014&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCmlpT45ZTw54vlXcCicbjK0nWOmWkU9j8icM23c7RnIq1ibTjlMZ2bhPiaA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1096&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2. æ•´ä½“ç”Ÿæ€&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Prometheus æä¾›äº†ä»æŒ‡æ ‡æš´éœ²ï¼Œåˆ°æŒ‡æ ‡æŠ“å–ã€å­˜å‚¨å’Œå¯è§†åŒ–ï¼Œä»¥åŠæœ€åçš„ç›‘æ§å‘Šè­¦ç­‰ä¸€ç³»åˆ—ç»„ä»¶ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6646706586826348&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmC0cQ1PbOwFqGwczyibr5EFoXZCty2U0CgQaB9xTywuNG7833iaPk9ZliaA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1336&quot;/&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.1 æŒ‡æ ‡æš´éœ²&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯ä¸€ä¸ªè¢« Prometheus ç›‘æ§çš„æœåŠ¡éƒ½æ˜¯ä¸€ä¸ª Jobï¼ŒPrometheus ä¸ºè¿™äº› Job æä¾›äº†å®˜æ–¹çš„ SDK ï¼Œåˆ©ç”¨è¿™ä¸ª SDK å¯ä»¥è‡ªå®šä¹‰å¹¶å¯¼å‡ºè‡ªå·±çš„ä¸šåŠ¡æŒ‡æ ‡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Prometheus å®˜æ–¹æä¾›çš„å„ç§å¸¸ç”¨ç»„ä»¶å’Œä¸­é—´ä»¶çš„ Exporterï¼ˆæ¯”å¦‚å¸¸ç”¨çš„ MySQLï¼ŒConsul ç­‰ç­‰ï¼‰ã€‚å¯¹äºçŸ­æ—¶é—´æ‰§è¡Œçš„è„šæœ¬ä»»åŠ¡æˆ–è€…ä¸å¥½ç›´æ¥ Pull æŒ‡æ ‡çš„æœåŠ¡ï¼ŒPrometheus æä¾›äº† PushGateWay ç½‘å…³ç»™è¿™äº›ä»»åŠ¡å°†æœåŠ¡æŒ‡æ ‡ä¸»åŠ¨æ¨ Push åˆ°ç½‘å…³ï¼ŒPrometheus å†ä»è¿™ä¸ªç½‘å…³é‡Œ Pull æŒ‡æ ‡ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.2 æŒ‡æ ‡æŠ“å–&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šé¢æåˆ°äº† Push å’Œ Pullï¼Œå…¶å®è¿™æ˜¯ä¸¤ç§æŒ‡æ ‡æŠ“å–æ¨¡å‹ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.40375586854460094&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCnVjFACo0UTSNxK2gIJJRgC3BRfY7dpM0lUqghmmyibFfKWkgsZDrgAw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;639&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¢«ç›‘æ§æœåŠ¡ä¸€èˆ¬é€šè¿‡ä¸»åŠ¨æš´éœ² metrics ç«¯å£æˆ–è€…é€šè¿‡ Exporter çš„æ–¹å¼æš´éœ²æŒ‡æ ‡ï¼Œç›‘æ§æœåŠ¡ä¾èµ–æœåŠ¡å‘ç°æ¨¡å—å‘ç°è¢«ç›‘æ§æœåŠ¡ï¼Œä»è€Œå»å®šæœŸçš„æŠ“å–æŒ‡æ ‡ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;Push æ¨¡å‹ï¼šè¢«ç›‘æ§æœåŠ¡ä¸»åŠ¨å°†æŒ‡æ ‡æ¨é€åˆ°ç›‘æ§æœåŠ¡ï¼Œå¯èƒ½éœ€è¦å¯¹æŒ‡æ ‡åšåè®®é€‚é…ï¼Œå¿…é¡»å¾—ç¬¦åˆç›‘æ§æœåŠ¡è¦æ±‚çš„æŒ‡æ ‡æ ¼å¼&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.37254901960784315&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCqjnYUgVwCxAvfibb5iafGEhNTBkCZod7VV8EYePfJyfVqQbCtwnuHFyQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;408&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äº Prometheus ä¸­çš„æŒ‡æ ‡æŠ“å–ï¼Œé‡‡ç”¨çš„æ˜¯ Pull æ¨¡å‹ï¼Œé»˜è®¤æ˜¯ä¸€åˆ†é’Ÿå»æ‹‰å–ä¸€æ¬¡æŒ‡æ ‡ï¼Œé€šè¿‡ Prometheus.yaml é…ç½®æ–‡ä»¶ä¸­çš„ scrape_interval é…ç½®é¡¹é…ç½®ï¼ŒPrometheus å¯¹å¤–éƒ½æ˜¯ç”¨çš„ Pull æ¨¡å‹ï¼Œä¸€ä¸ªæ˜¯ Pull Exporter çš„æš´éœ²çš„æŒ‡æ ‡ï¼Œä¸€ä¸ªæ˜¯ Pull PushGateway æš´éœ²çš„æŒ‡æ ‡ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.3 æŒ‡æ ‡å­˜å‚¨å’ŒæŸ¥è¯¢&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æŒ‡æ ‡æŠ“å–åä¼šå­˜å‚¨åœ¨å†…ç½®çš„æ—¶åºæ•°æ®åº“ä¸­ï¼ŒPrometheus ä¹Ÿæä¾›äº† PromQL æŸ¥è¯¢è¯­è¨€ç»™æˆ‘ä»¬åšæŒ‡æ ‡çš„æŸ¥è¯¢ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ Prometheus çš„ WebUI ä¸Šé€šè¿‡ PromQLï¼Œå¯è§†åŒ–æŸ¥è¯¢æˆ‘ä»¬çš„æŒ‡æ ‡ï¼Œä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿çš„æ¥å…¥ç¬¬ä¸‰æ–¹çš„å¯è§†åŒ–å·¥å…·ï¼Œä¾‹å¦‚ grafanaã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.4 ç›‘æ§å‘Šè­¦&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;prometheus æä¾›äº† alertmanageer åŸºäº promql æ¥åšç³»ç»Ÿçš„ç›‘æ§å‘Šè­¦ï¼Œå½“ promql æŸ¥è¯¢å‡ºæ¥çš„æŒ‡æ ‡è¶…è¿‡æˆ‘ä»¬å®šä¹‰çš„é˜ˆå€¼æ—¶ï¼Œprometheus ä¼šå‘é€ä¸€æ¡å‘Šè­¦ä¿¡æ¯åˆ° alertmanagerï¼Œmanager ä¼šå°†å‘Šè­¦ä¸‹å‘åˆ°é…ç½®å¥½çš„é‚®ç®±æˆ–è€…å¾®ä¿¡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3. å·¥ä½œåŸç†&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Prometheus çš„ä»è¢«ç›‘æ§æœåŠ¡çš„æ³¨å†Œåˆ°æŒ‡æ ‡æŠ“å–åˆ°æŒ‡æ ‡æŸ¥è¯¢çš„æµç¨‹åˆ†ä¸ºäº”ä¸ªæ­¥éª¤ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.34801762114537443&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCefe3d6ZZPc5j7WImNkV8ibR5LQhGstsSPJ3ibACwMtlFw2IXLFVZjvQA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;454&quot;/&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3.1 æœåŠ¡æ³¨å†Œ&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¢«ç›‘æ§æœåŠ¡åœ¨ Prometheus ä¸­æ˜¯ä¸€ä¸ª Job å­˜åœ¨ï¼Œè¢«ç›‘æ§æœåŠ¡çš„æ‰€æœ‰å®ä¾‹åœ¨ Prometheus ä¸­æ˜¯ä¸€ä¸ª target çš„å­˜åœ¨ï¼Œæ‰€ä»¥è¢«ç›‘æ§æœåŠ¡çš„æ³¨å†Œå°±æ˜¯åœ¨ Prometheus ä¸­æ³¨å†Œä¸€ä¸ª Job å’Œå…¶æ‰€æœ‰çš„ targetï¼Œè¿™ä¸ªæ³¨å†Œåˆ†ä¸ºï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;é™æ€æ³¨å†Œï¼šé™æ€çš„å°†æœåŠ¡çš„ IP å’ŒæŠ“å–æŒ‡æ ‡çš„ç«¯å£å·é…ç½®åœ¨ Prometheus yaml æ–‡ä»¶çš„ scrape_configs é…ç½®ä¸‹:&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;scrape_configs:&lt;br/&gt;Â -Â job_name:Â &lt;span&gt;&quot;prometheus&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â static_configs:&lt;br/&gt;Â Â Â -Â targets:Â [&lt;span&gt;&quot;localhost:9090&quot;&lt;/span&gt;]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»¥ä¸Šå°±æ˜¯æ³¨å†Œäº†ä¸€ä¸ªåä¸º prometheus çš„æœåŠ¡ï¼Œè¿™ä¸ªæœåŠ¡ä¸‹æœ‰ä¸€ä¸ªå®ä¾‹ï¼Œæš´éœ²çš„æŠ“å–åœ°å€æ˜¯ localhost:9090ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;åŠ¨æ€æ³¨å†Œï¼šåŠ¨æ€æ³¨å†Œå°±æ˜¯åœ¨ Prometheus yaml æ–‡ä»¶çš„ scrape_configs é…ç½®ä¸‹é…ç½®æœåŠ¡å‘ç°çš„åœ°å€å’ŒæœåŠ¡åï¼ŒPrometheus ä¼šå»è¯¥åœ°å€ï¼Œæ ¹æ®ä½ æä¾›çš„æœåŠ¡ååŠ¨æ€å‘ç°å®ä¾‹åˆ—è¡¨ï¼Œåœ¨ Prometheus ä¸­ï¼Œæ”¯æŒ consulï¼ŒDNSï¼Œæ–‡ä»¶ï¼ŒK8s ç­‰å¤šç§æœåŠ¡å‘ç°æœºåˆ¶ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŸºäº consul çš„æœåŠ¡å‘ç°ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;Â -Â job_name:Â &lt;span&gt;&quot;node_export_consul&quot;&lt;/span&gt;&lt;br/&gt;Â Â metrics_path:Â /node_metrics&lt;br/&gt;Â Â scheme:Â http&lt;br/&gt;Â Â consul_sd_configs:&lt;br/&gt;Â Â Â -Â server:Â localhost:8500&lt;br/&gt;Â Â Â Â Â services:&lt;br/&gt;Â Â Â Â Â -Â node_exporter&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬ consul çš„åœ°å€å°±æ˜¯ï¼šlocalhost:8500ï¼ŒæœåŠ¡åæ˜¯ node_exporterï¼Œåœ¨è¿™ä¸ªæœåŠ¡ä¸‹æœ‰ä¸€ä¸ª exporter å®ä¾‹ï¼šlocalhost:9600ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.2879120879120879&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCkuuRUBEib36SrS3E6ntKQu11gcDsqxXibPvgC8omO0GmOEpCkhxL1K7Q/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ³¨æ„ï¼šå¦‚æœæ˜¯åŠ¨æ€æ³¨å†Œï¼Œæœ€å¥½åŠ ä¸Šè¿™ä¸¤é…ç½®ï¼Œé™æ€æ³¨å†ŒæŒ‡æ ‡æ‹‰å–çš„è·¯å¾„ä¼šé»˜è®¤çš„å¸®æˆ‘ä»¬æŒ‡å®šä¸º metrics_path:/metricsï¼Œæ‰€ä»¥å¦‚æœæš´éœ²çš„æŒ‡æ ‡æŠ“å–è·¯å¾„ä¸åŒæˆ–è€…æ˜¯åŠ¨æ€çš„æœåŠ¡æ³¨å†Œï¼Œæœ€å¥½åŠ ä¸Šè¿™ä¸¤ä¸ªé…ç½®ã€‚ä¸ç„¶ä¼šæŠ¥é”™â€œINVALIDâ€œ is not a valid start tokenï¼Œæ¼”ç¤ºä¸‹ï¼Œç™¾åº¦äº†ä¸€ä¸‹ï¼Œè¿™é‡Œå¯èƒ½æ˜¯æ•°æ®æ ¼å¼ä¸ç»Ÿä¸€å¯¼è‡´ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;metrics_path:Â /node_metrics&lt;br/&gt;scheme:Â http&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æœ€åå¯ä»¥åœ¨ webUI ä¸­æŸ¥çœ‹å‘ç°çš„å®ä¾‹ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.16043956043956045&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCOl4Xz1vFy6FXOiaBmrzemklzLibRbK0mffWYTTSGECibwbMccvV8JFT2A/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›®å‰ï¼ŒPrometheus æ”¯æŒå¤šè¾¾äºŒåå¤šç§æœåŠ¡å‘ç°åè®®ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&amp;lt;azure_sd_config&amp;gt;&lt;br/&gt;&amp;lt;consul_sd_config&amp;gt;&lt;br/&gt;&amp;lt;digitalocean_sd_config&amp;gt;&lt;br/&gt;&amp;lt;docker_sd_config&amp;gt;&lt;br/&gt;&amp;lt;dockerswarm_sd_config&amp;gt;&lt;br/&gt;&amp;lt;dns_sd_config&amp;gt;&lt;br/&gt;&amp;lt;ec2_sd_config&amp;gt;&lt;br/&gt;&amp;lt;openstack_sd_config&amp;gt;&lt;br/&gt;&amp;lt;file_sd_config&amp;gt;&lt;br/&gt;&amp;lt;gce_sd_config&amp;gt;&lt;br/&gt;&amp;lt;hetzner_sd_config&amp;gt;&lt;br/&gt;&amp;lt;http_sd_config&amp;gt;&lt;br/&gt;&amp;lt;kubernetes_sd_config&amp;gt;&lt;br/&gt;&amp;lt;kuma_sd_config&amp;gt;&lt;br/&gt;&amp;lt;lightsail_sd_config&amp;gt;&lt;br/&gt;&amp;lt;linode_sd_config&amp;gt;&lt;br/&gt;&amp;lt;marathon_sd_config&amp;gt;&lt;br/&gt;&amp;lt;nerve_sd_config&amp;gt;&lt;br/&gt;&amp;lt;serverset_sd_config&amp;gt;&lt;br/&gt;&amp;lt;triton_sd_config&amp;gt;&lt;br/&gt;&amp;lt;eureka_sd_config&amp;gt;&lt;br/&gt;&amp;lt;scaleway_sd_config&amp;gt;&lt;br/&gt;&amp;lt;static_config&amp;gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3.2 é…ç½®æ›´æ–°&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æ›´æ–°å®Œ Prometheus çš„é…ç½®æ–‡ä»¶åï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°æˆ‘ä»¬çš„é…ç½®åˆ°ç¨‹åºå†…å­˜é‡Œï¼Œè¿™é‡Œçš„æ›´æ–°æ–¹å¼æœ‰ä¸¤ç§ï¼Œç¬¬ä¸€ç§ç®€å•ç²—æš´ï¼Œå°±æ˜¯é‡å¯ Prometheusï¼Œç¬¬äºŒç§æ˜¯åŠ¨æ€æ›´æ–°çš„æ–¹å¼ã€‚å¦‚ä½•å®ç°åŠ¨æ€çš„æ›´æ–° Prometheus é…ç½®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¬¬ä¸€æ­¥ï¼šé¦–å…ˆè¦ä¿è¯å¯åŠ¨ Prometheus çš„æ—¶å€™å¸¦ä¸Šå¯åŠ¨å‚æ•°ï¼š--web.enable-lifecycle&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;prometheus --config.file=/usr/local/etc/prometheus.yml --web.enable-lifecycle&lt;/code&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¬¬äºŒæ­¥ï¼šå»æ›´æ–°æˆ‘ä»¬çš„ Prometheus é…ç½®:&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¬¬ä¸‰æ­¥ï¼šæ›´æ–°å®Œé…ç½®åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Post è¯·æ±‚çš„æ–¹å¼ï¼ŒåŠ¨æ€æ›´æ–°é…ç½®ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;curl -v --request POST &#x27;http://localhost:9090/-/reload&#x27;&lt;/code&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŸç†ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Prometheus åœ¨ web æ¨¡å—ä¸­ï¼Œæ³¨å†Œäº†ä¸€ä¸ª handlerï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;if&lt;/span&gt;Â o.EnableLifecycleÂ {&lt;br/&gt;Â Â router.Post(&lt;span&gt;&quot;/-/quit&quot;&lt;/span&gt;,Â h.quit)&lt;br/&gt;Â Â router.Put(&lt;span&gt;&quot;/-/quit&quot;&lt;/span&gt;,Â h.quit)&lt;br/&gt;Â Â router.Post(&lt;span&gt;&quot;/-/reload&quot;&lt;/span&gt;,Â h.reload)Â //Â reloadé…ç½®&lt;br/&gt;Â Â router.Put(&lt;span&gt;&quot;/-/reload&quot;&lt;/span&gt;,Â h.reload)&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šè¿‡ h.reload è¿™ä¸ª handler æ–¹æ³•å®ç°ï¼šè¿™ä¸ª handler å°±æ˜¯å¾€ä¸€ä¸ª channle ä¸­å‘é€ä¸€ä¸ªä¿¡å·ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;funcÂ (hÂ *Handler)Â reload(wÂ http.ResponseWriter,Â rÂ *http.Request)Â {&lt;br/&gt;Â Â rcÂ :=Â make(chanÂ error)&lt;br/&gt;Â Â h.reloadChÂ &amp;lt;-Â rcÂ Â //Â å‘é€ä¸€ä¸ªä¿¡å·åˆ°channeäº†ä¸­&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â errÂ :=Â &amp;lt;-rc;Â errÂ !=Â nilÂ {&lt;br/&gt;Â Â Â http.Error(w,Â fmt.Sprintf(&lt;span&gt;&quot;failedÂ toÂ reloadÂ config:Â %s&quot;&lt;/span&gt;,Â err),Â http.StatusInternalServerError)&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ main å‡½æ•°ä¸­ä¼šå»ç›‘å¬è¿™ä¸ª channelï¼Œåªè¦æœ‰ç›‘å¬åˆ°ä¿¡å·ï¼Œå°±ä¼šåšé…ç½®çš„ reloadï¼Œé‡æ–°å°†æ–°é…ç½®åŠ è½½åˆ°å†…å­˜ä¸­ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;case&lt;/span&gt;Â rcÂ :=Â &amp;lt;-webHandler.Reload():&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â errÂ :=Â reloadConfig(cfg.configFile,Â cfg.enableExpandExternalLabels,Â cfg.tsdb.EnableExemplarStorage,Â logger,Â noStepSubqueryInterval,Â reloaders...);Â errÂ !=Â nilÂ {&lt;br/&gt;Â Â Â level.Error(logger).Log(&lt;span&gt;&quot;msg&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;ErrorÂ reloadingÂ config&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;err&quot;&lt;/span&gt;,Â err)&lt;br/&gt;Â Â Â rcÂ &amp;lt;-Â err&lt;br/&gt;Â Â }Â &lt;span&gt;else&lt;/span&gt;Â {&lt;br/&gt;Â Â Â rcÂ &amp;lt;-Â nil&lt;br/&gt;Â Â }&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3.3 æŒ‡æ ‡æŠ“å–å’Œå­˜å‚¨&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Prometheus å¯¹æŒ‡æ ‡çš„æŠ“å–é‡‡å–ä¸»åŠ¨ Pull çš„æ–¹å¼ï¼Œå³å‘¨æœŸæ€§çš„è¯·æ±‚è¢«ç›‘æ§æœåŠ¡æš´éœ²çš„ metrics æ¥å£æˆ–è€…æ˜¯ PushGatewayï¼Œä»è€Œè·å–åˆ° Metrics æŒ‡æ ‡ï¼Œé»˜è®¤æ—¶é—´æ˜¯ 15s æŠ“å–ä¸€æ¬¡ï¼Œé…ç½®é¡¹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;global:&lt;br/&gt;Â scrape_interval:Â 15s&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æŠ“å–åˆ°çš„æŒ‡æ ‡ä¼šè¢«ä»¥æ—¶é—´åºåˆ—çš„å½¢å¼ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œå¹¶ä¸”å®šæ—¶åˆ·åˆ°ç£ç›˜ä¸Šï¼Œé»˜è®¤æ˜¯ä¸¤ä¸ªå°æ—¶å›åˆ·ä¸€æ¬¡ã€‚å¹¶ä¸”ä¸ºäº†é˜²æ­¢ Prometheus å‘ç”Ÿå´©æºƒæˆ–é‡å¯æ—¶èƒ½å¤Ÿæ¢å¤æ•°æ®ï¼ŒPrometheus ä¹Ÿæä¾›äº†ç±»ä¼¼ MySQL ä¸­ binlog ä¸€æ ·çš„é¢„å†™æ—¥å¿—ï¼Œå½“ Prometheus å´©æºƒé‡å¯æ—¶ï¼Œä¼šè¯»è¿™ä¸ªé¢„å†™æ—¥å¿—æ¥æ¢å¤æ•°æ®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;4. Metric æŒ‡æ ‡&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;4.1 æ•°æ®æ¨¡å‹&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.32682926829268294&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmC9UAL58GUia1v8T9FBAfL4DYAZDMy7L5dzx11g5tBSG4ABjFprzctfmw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;2460&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Prometheus é‡‡é›†çš„æ‰€æœ‰æŒ‡æ ‡éƒ½æ˜¯ä»¥æ—¶é—´åºåˆ—çš„å½¢å¼è¿›è¡Œå­˜å‚¨ï¼Œæ¯ä¸€ä¸ªæ—¶é—´åºåˆ—æœ‰ä¸‰éƒ¨åˆ†ç»„æˆï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;æŒ‡æ ‡åå’ŒæŒ‡æ ‡æ ‡ç­¾é›†åˆ&lt;/strong&gt;ï¼šmetric_name{&amp;lt;label1=v1&amp;gt;,&amp;lt;label2=v2&amp;gt;....}ï¼ŒæŒ‡æ ‡åï¼šè¡¨ç¤ºè¿™ä¸ªæŒ‡æ ‡æ˜¯ç›‘æ§å“ªä¸€æ–¹é¢çš„çŠ¶æ€ï¼Œæ¯”å¦‚ http_request_total è¡¨ç¤ºï¼šè¯·æ±‚æ•°é‡ï¼›æŒ‡æ ‡æ ‡ç­¾ï¼Œæè¿°è¿™ä¸ªæŒ‡æ ‡æœ‰å“ªäº›ç»´åº¦ï¼Œæ¯”å¦‚ http_request_total è¿™ä¸ªæŒ‡æ ‡ï¼Œæœ‰è¯·æ±‚çŠ¶æ€ç  code = 200/400/500ï¼Œè¯·æ±‚æ–¹å¼ï¼šmethod = get/post ç­‰ï¼Œå®é™…ä¸ŠæŒ‡æ ‡åç§°å®é™…ä¸Šæ˜¯ä»¥æ ‡ç­¾çš„å½¢å¼ä¿å­˜ï¼Œè¿™ä¸ªæ ‡ç­¾æ˜¯&lt;strong&gt;name&lt;/strong&gt;ï¼Œå³ï¼š&lt;strong&gt;name&lt;/strong&gt;=&lt;metric name=&quot;&quot;&gt;ã€‚&lt;/metric&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;æ—¶é—´æˆ³&lt;/strong&gt;ï¼šæè¿°å½“å‰æ—¶é—´åºåˆ—çš„æ—¶é—´ï¼Œå•ä½ï¼šæ¯«ç§’ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;æ ·æœ¬å€¼&lt;/strong&gt;ï¼šå½“å‰ç›‘æ§æŒ‡æ ‡çš„å…·ä½“æ•°å€¼ï¼Œæ¯”å¦‚ http_request_total çš„å€¼å°±æ˜¯è¯·æ±‚æ•°æ˜¯å¤šå°‘ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥é€šè¿‡æŸ¥çœ‹ Prometheus çš„ metrics æ¥å£æŸ¥çœ‹æ‰€æœ‰ä¸ŠæŠ¥çš„æŒ‡æ ‡ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.39181916038751347&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCrWOS0VeiahibUFYnGCACb2kRl0gfOibNibclibpwXH79veelG1vmTPUNVyg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;929&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€æœ‰çš„æŒ‡æ ‡ä¹Ÿéƒ½æ˜¯é€šè¿‡å¦‚ä¸‹æ‰€ç¤ºçš„æ ¼å¼æ¥æ ‡è¯†çš„ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;# HELP Â // HELPï¼šè¿™é‡Œæè¿°çš„æŒ‡æ ‡çš„ä¿¡æ¯ï¼Œè¡¨ç¤ºè¿™ä¸ªæ˜¯ä¸€ä¸ªä»€ä¹ˆæŒ‡æ ‡ï¼Œç»Ÿè®¡ä»€ä¹ˆçš„&lt;/span&gt;&lt;br/&gt;&lt;span&gt;# TYPE Â // TYPEï¼šè¿™ä¸ªæŒ‡æ ‡æ˜¯ä»€ä¹ˆç±»å‹çš„&lt;/span&gt;&lt;br/&gt;&amp;lt;metricÂ name&amp;gt;{&amp;lt;labelÂ name&amp;gt;=&amp;lt;labelÂ value&amp;gt;,Â ...}Â valueÂ Â //Â æŒ‡æ ‡çš„å…·ä½“æ ¼å¼ï¼Œ&amp;lt;æŒ‡æ ‡å&amp;gt;{æ ‡ç­¾é›†åˆ}Â æŒ‡æ ‡å€¼&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;4.2 æŒ‡æ ‡ç±»å‹&lt;/span&gt;&lt;span/&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Prometheus åº•å±‚å­˜å‚¨ä¸Šå…¶å®å¹¶æ²¡æœ‰å¯¹æŒ‡æ ‡åšç±»å‹çš„åŒºåˆ†ï¼Œéƒ½æ˜¯ä»¥æ—¶é—´åºåˆ—çš„å½¢å¼å­˜å‚¨ï¼Œä½†æ˜¯ä¸ºäº†æ–¹ä¾¿ç”¨æˆ·çš„ä½¿ç”¨å’Œç†è§£ä¸åŒç›‘æ§æŒ‡æ ‡ä¹‹é—´çš„å·®å¼‚ï¼ŒPrometheus å®šä¹‰äº† 4 ç§ä¸åŒçš„æŒ‡æ ‡ç±»å‹ï¼šè®¡æ•°å™¨ counterï¼Œä»ªè¡¨ç›˜ gaugeï¼Œç›´æ–¹å›¾ histogramï¼Œæ‘˜è¦ summaryã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.46813186813186813&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmC9FapbR4BVossBVpsAMiaXw78QNPXC8DzXSzmWM8ib2XVyBibIVqVDtibYQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Counter è®¡æ•°å™¨ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Counter ç±»å‹å’Œ redis çš„è‡ªå¢å‘½ä»¤ä¸€æ ·ï¼Œåªå¢ä¸å‡ï¼Œé€šè¿‡ Counter æŒ‡æ ‡å¯ä»¥ç»Ÿè®¡ Http è¯·æ±‚æ•°é‡ï¼Œè¯·æ±‚é”™è¯¯æ•°ï¼Œæ¥å£è°ƒç”¨æ¬¡æ•°ç­‰å•è°ƒé€’å¢çš„æ•°æ®ã€‚åŒæ—¶å¯ä»¥ç»“åˆ increase å’Œ rate ç­‰å‡½æ•°ç»Ÿè®¡å˜åŒ–é€Ÿç‡ï¼Œåç»­æˆ‘ä»¬ä¼šæåˆ°è¿™äº›å†…ç½®å‡½æ•°ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7824175824175824&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCOZib0OmrSKvruugDspeAmo82aicu1UEmP9XNEg0yqRtXIHjYDXYYOiamw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Gauge ä»ªè¡¨ç›˜ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å’Œ Counter ä¸åŒï¼ŒGauge æ˜¯å¯å¢å¯å‡çš„ï¼Œå¯ä»¥åæ˜ ä¸€äº›åŠ¨æ€å˜åŒ–çš„æ•°æ®ï¼Œä¾‹å¦‚å½“å‰å†…å­˜å ç”¨ï¼ŒCPU åˆ©ç”¨ï¼ŒGc æ¬¡æ•°ç­‰åŠ¨æ€å¯ä¸Šå‡å¯ä¸‹é™çš„æ•°æ®ï¼Œåœ¨ Prometheus ä¸Šé€šè¿‡ Gaugeï¼Œå¯ä»¥ä¸ç”¨ç»è¿‡å†…ç½®å‡½æ•°ç›´è§‚çš„åæ˜ æ•°æ®çš„å˜åŒ–æƒ…å†µï¼Œå¦‚ä¸‹å›¾è¡¨ç¤ºå †å¯åˆ†é…çš„ç©ºé—´å¤§å°ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.46916299559471364&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCERMiaGzEZ4ffPFia7hxYKNAggd6soezOmKrcPcic3ujnZSPuS6o0hltMQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;454&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šé¢ä¸¤ç§æ˜¯æ•°å€¼æŒ‡æ ‡ï¼Œä»£è¡¨æ•°æ®çš„å˜åŒ–æƒ…å†µï¼ŒHistogram å’Œ Summary æ˜¯ç»Ÿè®¡ç±»å‹çš„æŒ‡æ ‡ï¼Œè¡¨ç¤ºæ•°æ®çš„åˆ†å¸ƒæƒ…å†µã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Histogram ç›´æ–¹å›¾ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Histogram æ˜¯ä¸€ç§ç›´æ–¹å›¾ç±»å‹ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°æŒ‡æ ‡åœ¨å„ä¸ªä¸åŒçš„åŒºé—´èŒƒå›´çš„åˆ†å¸ƒæƒ…å†µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼šå¯ä»¥è§‚å¯Ÿåˆ°è¯·æ±‚è€—æ—¶åœ¨å„ä¸ªæ¡¶çš„åˆ†å¸ƒã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4879120879120879&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCQEJQFxOP6UJmjXicmRRpUEib9vjibgyg9qrIEDWickrEbrZLuaHt6XmoRw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰ä¸€ç‚¹è¦æ³¨æ„çš„æ˜¯ï¼ŒHistogram æ˜¯ç´¯è®¡ç›´æ–¹å›¾ï¼Œå³æ¯ä¸€ä¸ªæ¡¶çš„æ˜¯åªæœ‰ä¸ŠåŒºé—´ï¼Œä¾‹å¦‚ä¸‹å›¾è¡¨ç¤ºå°äº 0.1 æ¯«ç§’ï¼ˆle=&quot;0.1&quot;ï¼‰çš„è¯·æ±‚æ•°é‡æ˜¯ 18173 ä¸ªï¼Œå°äº 0.2 æ¯«ç§’ï¼ˆle=&quot;0.2&quot;)çš„è¯·æ±‚æ˜¯ 18182 ä¸ªï¼Œåœ¨ le=&quot;0.2&quot;è¿™ä¸ªæ¡¶ä¸­æ˜¯åŒ…å«äº† le=&quot;0.1&quot;è¿™ä¸ªæ¡¶çš„æ•°æ®ï¼Œå¦‚æœæˆ‘ä»¬è¦æ‹¿åˆ° 0.1 æ¯«ç§’åˆ° 0.2 æ¯«ç§’çš„è¯·æ±‚æ•°é‡ï¼Œå¯ä»¥é€šè¿‡ä¸¤ä¸ªæ¡¶æƒ³å‡å¾—åˆ°ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.29593810444874274&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmC8RX5IL0NHibtabpgFfdtzNFY6D09yBUtBLqzFEpRUR4oZL5nxicFn32w/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1034&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ç›´æ–¹å›¾ä¸­ï¼Œè¿˜å¯ä»¥é€šè¿‡ histogram_quantile å‡½æ•°æ±‚å‡ºç™¾åˆ†ä½æ•°ï¼Œæ¯”å¦‚ P50ï¼ŒP90ï¼ŒP99 ç­‰æ•°æ®&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;Summary æ‘˜è¦&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Summary ä¹Ÿæ˜¯ç”¨æ¥åšç»Ÿè®¡åˆ†æçš„ï¼Œå’Œ Histogram åŒºåˆ«åœ¨äºï¼ŒSummary ç›´æ¥å­˜å‚¨çš„å°±æ˜¯ç™¾åˆ†ä½æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼šå¯ä»¥ç›´è§‚çš„è§‚å¯Ÿåˆ°æ ·æœ¬çš„ä¸­ä½æ•°ï¼ŒP90 å’Œ P99ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.30029154518950435&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCDEfoVn2y6nWLNvc9dQgdyeOicQEv8ic4VW9zM7lXKNjcGjDKB94q74bQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1029&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Summary çš„ç™¾åˆ†ä½æ•°æ˜¯å®¢æˆ·ç«¯è®¡ç®—å¥½ç›´æ¥è®© Prometheus æŠ“å–çš„ï¼Œä¸éœ€è¦ Prometheus è®¡ç®—ï¼Œç›´æ–¹å›¾æ˜¯é€šè¿‡å†…ç½®å‡½æ•° histogram_quantile åœ¨ Prometheus æœåŠ¡ç«¯è®¡ç®—æ±‚å‡ºã€‚&lt;/p&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;4.3 æŒ‡æ ‡å¯¼å‡º&lt;/span&gt;&lt;span/&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æŒ‡æ ‡å¯¼å‡ºæœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ä½¿ç”¨ Prometheus ç¤¾åŒºæä¾›çš„å®šåˆ¶å¥½çš„ Exporter å¯¹ä¸€äº›ç»„ä»¶è¯¸å¦‚ MySQLï¼ŒKafka ç­‰çš„æŒ‡æ ‡ä½œå¯¼å‡ºï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨ç¤¾åŒºæä¾›çš„ Client æ¥è‡ªå®šä¹‰æŒ‡æ ‡å¯¼å‡ºã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;github.com/prometheus/client_golang/prometheus/promhttp&lt;/code&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è‡ªå®šä¹‰ Prometheus exporterï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;packageÂ main&lt;br/&gt;importÂ (&lt;br/&gt;Â Â &lt;span&gt;&quot;net/http&quot;&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;&quot;github.com/prometheus/client_golang/prometheus/promhttp&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;funcÂ &lt;span&gt;&lt;span&gt;main&lt;/span&gt;&lt;/span&gt;()Â {&lt;br/&gt;Â Â http.Handle(&lt;span&gt;&quot;/metrics&quot;&lt;/span&gt;,Â promhttp.Handler())&lt;br/&gt;Â Â http.ListenAndServe(&lt;span&gt;&quot;:8080&quot;&lt;/span&gt;,Â nil)&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è®¿é—®ï¼šhttp://localhost:8080/metricsï¼Œå³å¯çœ‹åˆ°å¯¼å‡ºçš„æŒ‡æ ‡ï¼Œè¿™é‡Œæˆ‘ä»¬æ²¡æœ‰è‡ªå®šä¹‰ä»»ä½•çš„æŒ‡æ ‡ï¼Œä½†æ˜¯èƒ½çœ‹åˆ°ä¸€äº›å†…ç½®çš„Goçš„è¿è¡Œæ—¶æŒ‡æ ‡å’Œpromhttpç›¸å…³çš„æŒ‡æ ‡ï¼Œè¿™ä¸ªClienté»˜è®¤ä¸ºæˆ‘ä»¬æš´éœ²çš„æŒ‡æ ‡ï¼Œgo_&lt;em&gt;ï¼šä»¥ go&lt;/em&gt; ä¸ºå‰ç¼€çš„æŒ‡æ ‡æ˜¯å…³äº Go è¿è¡Œæ—¶ç›¸å…³çš„æŒ‡æ ‡ï¼Œæ¯”å¦‚åƒåœ¾å›æ”¶æ—¶é—´ã€goroutine æ•°é‡ç­‰ï¼Œè¿™äº›éƒ½æ˜¯ Go å®¢æˆ·ç«¯åº“ç‰¹æœ‰çš„ï¼Œå…¶ä»–è¯­è¨€çš„å®¢æˆ·ç«¯åº“å¯èƒ½ä¼šæš´éœ²å„è‡ªè¯­è¨€çš„å…¶ä»–è¿è¡Œæ—¶æŒ‡æ ‡ã€‚promhttp**ï¼šæ¥è‡ª promhttp å·¥å…·åŒ…çš„ç›¸å…³æŒ‡æ ‡ï¼Œç”¨äºè·Ÿè¸ªå¯¹æŒ‡æ ‡è¯·æ±‚çš„å¤„ç†ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.28854625550660795&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCBicaeLESFUEe0UwXuOORzasfuroicYhJfuSL37e5m6tS5wZt0JYaEW9w/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;454&quot;/&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.17582417582417584&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmC8epzE9Y9UXfbahZIrlElPyqbj21dYAibIiaQgNTGxiaPhYrlOy9ibqC2QQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ·»åŠ è‡ªå®šä¹‰æŒ‡æ ‡ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;package main&lt;br/&gt;import (&lt;br/&gt;  &quot;net/http&quot;&lt;br/&gt;&lt;br/&gt;  &quot;github.com/prometheus/client_golang/prometheus&quot;&lt;br/&gt;  &quot;github.com/prometheus/client_golang/prometheus/promhttp&quot;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;func main() {&lt;br/&gt;&lt;br/&gt;  // 1.å®šä¹‰æŒ‡æ ‡ï¼ˆç±»å‹ï¼Œåå­—ï¼Œå¸®åŠ©ä¿¡æ¯ï¼‰&lt;br/&gt;  myCounter := prometheus.NewCounter(prometheus.CounterOpts{&lt;br/&gt;   Name: &quot;my_counter_total&quot;,&lt;br/&gt;   Help: &quot;è‡ªå®šä¹‰counter&quot;,&lt;br/&gt;  })&lt;br/&gt;  // 2.æ³¨å†ŒæŒ‡æ ‡&lt;br/&gt;  prometheus.MustRegister(myCounter)&lt;br/&gt;  // 3.è®¾ç½®æŒ‡æ ‡å€¼&lt;br/&gt;  myCounter.Add(23)&lt;br/&gt;&lt;br/&gt;  http.Handle(&quot;/metrics&quot;, promhttp.Handler())&lt;br/&gt;  http.ListenAndServe(&quot;:8080&quot;, nil)&lt;br/&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿è¡Œï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.26373626373626374&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmC1zW2US7KePqIMwBrmEoGIQIcdOOibxo7jh17IZzick4sUKK2fvmGUvag/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¨¡æ‹Ÿä¸‹åœ¨ä¸šåŠ¡ä¸­ä¸ŠæŠ¥æ¥å£è¯·æ±‚é‡ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;packageÂ main&lt;br/&gt;&lt;br/&gt;importÂ (&lt;br/&gt;Â Â &lt;span&gt;&quot;fmt&quot;&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;&quot;net/http&quot;&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;&quot;github.com/prometheus/client_golang/prometheus&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;varÂ (&lt;br/&gt;Â Â MyCounterÂ prometheus.Counter&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;//Â initÂ æ³¨å†ŒæŒ‡æ ‡&lt;br/&gt;funcÂ &lt;span&gt;&lt;span&gt;init&lt;/span&gt;&lt;/span&gt;()Â {&lt;br/&gt;Â Â //Â 1.å®šä¹‰æŒ‡æ ‡ï¼ˆç±»å‹ï¼Œåå­—ï¼Œå¸®åŠ©ä¿¡æ¯ï¼‰&lt;br/&gt;Â Â MyCounterÂ =Â prometheus.NewCounter(prometheus.CounterOpts{&lt;br/&gt;Â Â Â Name:Â &lt;span&gt;&quot;my_counter_total&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Help:Â &lt;span&gt;&quot;è‡ªå®šä¹‰counter&quot;&lt;/span&gt;,&lt;br/&gt;Â Â })&lt;br/&gt;&lt;br/&gt;Â Â //Â 2.æ³¨å†ŒæŒ‡æ ‡&lt;br/&gt;Â Â prometheus.MustRegister(MyCounter)&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;//Â Sayhello&lt;br/&gt;funcÂ Sayhello(wÂ http.ResponseWriter,Â rÂ *http.Request)Â {&lt;br/&gt;Â Â //Â æ¥å£è¯·æ±‚é‡é€’å¢&lt;br/&gt;Â Â MyCounter.Inc()&lt;br/&gt;Â Â fmt.Fprintf(w,Â &lt;span&gt;&quot;HelloÂ Wrold!&quot;&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;main.goï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;packageÂ main&lt;br/&gt;importÂ (&lt;br/&gt;Â Â &lt;span&gt;&quot;net/http&quot;&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;&quot;github.com/prometheus/client_golang/prometheus/promhttp&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;funcÂ &lt;span&gt;&lt;span&gt;main&lt;/span&gt;&lt;/span&gt;()Â {&lt;br/&gt;Â Â http.Handle(&lt;span&gt;&quot;/metrics&quot;&lt;/span&gt;,Â promhttp.Handler())&lt;br/&gt;Â Â http.HandleFunc(&lt;span&gt;&quot;/counter&quot;&lt;/span&gt;,Sayhello)&lt;br/&gt;Â Â http.ListenAndServe(&lt;span&gt;&quot;:8080&quot;&lt;/span&gt;,Â nil)&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸€å¼€å§‹å¯åŠ¨æ—¶ï¼ŒæŒ‡æ ‡ counter æ˜¯ 0ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.23516483516483516&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmC2hkiaosSSAVEaDDZ7smBxvibJAOJwwzv6hd53G2QFzNiabC2w4VDcZwfg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è°ƒç”¨ï¼š/counter æ¥å£åï¼ŒæŒ‡æ ‡æ•°æ®å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™æ ·å°±å¯ä»¥ç®€å•å®ç°äº†æ¥å£è¯·æ±‚æ•°çš„ç»Ÿè®¡ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.23516483516483516&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCXZ1mLNw0gO1C0s8GP3G39P5ic8426WiavfM6vwyJvxcoOnVDspbIfUKA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äºå…¶ä»–æŒ‡æ ‡å®šä¹‰æ–¹å¼æ˜¯ä¸€æ ·çš„ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;varÂ (&lt;br/&gt;Â Â MyCounterÂ prometheus.Counter&lt;br/&gt;Â Â MyGaugeÂ prometheus.Gauge&lt;br/&gt;Â Â MyHistogramÂ prometheus.Histogram&lt;br/&gt;Â Â MySummaryÂ prometheus.Summary&lt;br/&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;//Â initÂ æ³¨å†ŒæŒ‡æ ‡&lt;br/&gt;funcÂ &lt;span&gt;&lt;span&gt;init&lt;/span&gt;&lt;/span&gt;()Â {&lt;br/&gt;Â Â //Â 1.å®šä¹‰æŒ‡æ ‡ï¼ˆç±»å‹ï¼Œåå­—ï¼Œå¸®åŠ©ä¿¡æ¯ï¼‰&lt;br/&gt;Â Â MyCounterÂ =Â prometheus.NewCounter(prometheus.CounterOpts{&lt;br/&gt;Â Â Â Name:Â &lt;span&gt;&quot;my_counter_total&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Help:Â &lt;span&gt;&quot;è‡ªå®šä¹‰counter&quot;&lt;/span&gt;,&lt;br/&gt;Â Â })&lt;br/&gt;&lt;br/&gt;Â Â //Â å®šä¹‰gaugeç±»å‹æŒ‡æ ‡&lt;br/&gt;Â Â MyGaugeÂ =Â prometheus.NewGauge(prometheus.GaugeOpts{&lt;br/&gt;Â Â Â Name:Â &lt;span&gt;&quot;my_gauge_num&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Help:Â &lt;span&gt;&quot;è‡ªå®šä¹‰gauge&quot;&lt;/span&gt;,&lt;br/&gt;&lt;br/&gt;Â Â })&lt;br/&gt;&lt;br/&gt;Â Â //Â å®šä¹‰histogram&lt;br/&gt;Â Â MyHistogramÂ =Â prometheus.NewHistogram(prometheus.HistogramOpts{&lt;br/&gt;Â Â Â Name:Â &lt;span&gt;&quot;my_histogram_bucket&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Help:Â &lt;span&gt;&quot;è‡ªå®šä¹‰histogram&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Buckets:Â []float64{0.1,0.2,0.3,0.4,0.5},Â Â //Â éœ€è¦æŒ‡å®šæ¡¶&lt;br/&gt;&lt;br/&gt;Â Â })&lt;br/&gt;&lt;br/&gt;Â Â //Â å®šä¹‰Summary&lt;br/&gt;Â Â MySummaryÂ =Â prometheus.NewSummary(prometheus.SummaryOpts{&lt;br/&gt;Â Â Â Name:Â &lt;span&gt;&quot;my_summary_bucket&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Help:Â &lt;span&gt;&quot;è‡ªå®šä¹‰summary&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â //Â è¿™éƒ¨åˆ†å¯ä»¥ç®—å¥½ååœ¨&lt;span&gt;set&lt;/span&gt;&lt;br/&gt;Â Â Â Objectives:Â map[float64]float64{&lt;br/&gt;Â Â Â Â Â 0.5:Â 0.05,&lt;br/&gt;Â Â Â Â Â 0.9:Â 0.01,&lt;br/&gt;Â Â Â Â Â 0.99:Â 0.001,&lt;br/&gt;Â Â Â },&lt;br/&gt;Â Â })&lt;br/&gt;&lt;br/&gt;Â Â //Â 2.æ³¨å†ŒæŒ‡æ ‡&lt;br/&gt;Â Â prometheus.MustRegister(MyCounter)&lt;br/&gt;Â Â prometheus.MustRegister(MyGauge)&lt;br/&gt;Â Â prometheus.MustRegister(MyHistogram)&lt;br/&gt;Â Â prometheus.MustRegister(MySummary)&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4593406593406593&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCkmmiajqaaw71Dpe3ia99xnXicl6NYBGsFc9xcRqbhqicjo14kCVvDWcWUg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šé¢çš„æŒ‡æ ‡éƒ½æ˜¯æ²¡æœ‰è®¾ç½®æ ‡ç­¾çš„ï¼Œæˆ‘ä»¬ä¸€èˆ¬çš„æŒ‡æ ‡éƒ½æ˜¯å¸¦æœ‰æ ‡ç­¾çš„ï¼Œå¦‚ä½•è®¾ç½®æŒ‡æ ‡çš„æ ‡ç­¾å‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæˆ‘è¦è®¾ç½®å¸¦æ ‡ç­¾çš„ counter ç±»å‹æŒ‡æ ‡ï¼Œåªéœ€è¦å°†åŸæ¥çš„ NewCounter æ–¹æ³•æ›¿æ¢ä¸º NewCounterVec æ–¹æ³•å³å¯ï¼Œå¹¶ä¸”ä¼ å…¥æ ‡ç­¾é›†åˆã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;MyCounterÂ *prometheus.CounterVec&lt;br/&gt;//Â 1.å®šä¹‰æŒ‡æ ‡ï¼ˆç±»å‹ï¼Œåå­—ï¼Œå¸®åŠ©ä¿¡æ¯ï¼‰&lt;br/&gt;MyCounterÂ =Â prometheus.NewCounterVec(&lt;br/&gt;Â Â prometheus.CounterOpts{&lt;br/&gt;Â Â Name:Â &lt;span&gt;&quot;my_counter_total&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Help:Â &lt;span&gt;&quot;è‡ªå®šä¹‰counter&quot;&lt;/span&gt;,&lt;br/&gt;Â Â },&lt;br/&gt;Â Â //Â æ ‡ç­¾é›†åˆ&lt;br/&gt;Â Â []string{&lt;span&gt;&quot;label1&quot;&lt;/span&gt;,&lt;span&gt;&quot;label2&quot;&lt;/span&gt;},&lt;br/&gt;)&lt;br/&gt;//Â å¸¦æ ‡ç­¾çš„&lt;span&gt;set&lt;/span&gt;æŒ‡æ ‡å€¼&lt;br/&gt;MyCounter.With(prometheus.Labels{&lt;span&gt;&quot;label1&quot;&lt;/span&gt;:&lt;span&gt;&quot;1&quot;&lt;/span&gt;,&lt;span&gt;&quot;label2&quot;&lt;/span&gt;:&lt;span&gt;&quot;2&quot;&lt;/span&gt;}).Inc()&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.15398886827458255&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCN4zaHSKGX1JyBdbdtAvX66FLH5K07ribIejDdmskbv9ABPHkdoz3ZrA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;539&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä»–åŒç†ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;5. PromQL&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆšåˆšæåˆ°äº† Prometheus ä¸­æŒ‡æ ‡æœ‰å“ªäº›ç±»å‹ä»¥åŠå¦‚ä½•å¯¼å‡ºæˆ‘ä»¬çš„æŒ‡æ ‡ï¼Œç°åœ¨æŒ‡æ ‡å¯¼å‡ºåˆ° Prometheus äº†ï¼Œåˆ©ç”¨å…¶æä¾›çš„ PromQL å¯ä»¥æŸ¥è¯¢æˆ‘ä»¬å¯¼å‡ºçš„æŒ‡æ ‡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;PromQL æ˜¯ Prometheus ä¸ºæˆ‘ä»¬æä¾›çš„å‡½æ•°å¼çš„æŸ¥è¯¢è¯­è¨€ï¼ŒæŸ¥è¯¢è¡¨è¾¾å¼æœ‰å››ç§ç±»å‹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å­—ç¬¦ä¸²ï¼šåªä½œä¸ºæŸäº›å†…ç½®å‡½æ•°çš„å‚æ•°å‡ºç°&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;æ ‡é‡ï¼šå•ä¸€çš„æ•°å­—å€¼ï¼Œå¯ä»¥æ˜¯å‡½æ•°å‚æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯å‡½æ•°çš„è¿”å›ç»“æœ&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ç¬æ—¶å‘é‡ï¼šæŸä¸€æ—¶åˆ»çš„æ—¶åºæ•°æ®&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;åŒºé—´å‘é‡ï¼šæŸä¸€æ—¶é—´åŒºé—´å†…çš„æ—¶åºæ•°æ®é›†åˆ&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;5.1 ç¬æ—¶æŸ¥è¯¢&lt;/span&gt;&lt;span/&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›´æ¥é€šè¿‡æŒ‡æ ‡åå³å¯è¿›è¡ŒæŸ¥è¯¢ï¼ŒæŸ¥è¯¢ç»“æœæ˜¯å½“å‰æŒ‡æ ‡æœ€æ–°çš„æ—¶é—´åºåˆ—ï¼Œæ¯”å¦‚æŸ¥è¯¢ Gc ç´¯ç§¯æ¶ˆè€—çš„æ—¶é—´ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;go_gc_duration_seconds_count&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.43736263736263736&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCU3NdDugibyHibvKCvdHvib3Dpg5mx3zibjvFPTAVkqtdlCUUAcqUJ0xIdQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;figcaption&gt;img&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æŸ¥è¯¢å‡ºæ¥æœ‰å¤šä¸ªåŒåæŒ‡æ ‡ç»“æœï¼Œå¯ä»¥ç”¨{}åšæ ‡ç­¾è¿‡æ»¤æŸ¥è¯¢ï¼šæ¯”å¦‚æˆ‘ä»¬æƒ³æŸ¥æŒ‡å®šå®ä¾‹çš„æŒ‡æ ‡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;go_gc_duration_seconds_count{instance=&quot;127.0.0.1:9600&quot;}&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.23546511627906977&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCmYOHONnUrwsXRCia22kt4T1Dlc2ThFJbict6euyC4l59PALic15mRX4rg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1032&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€Œä¸”ä¹Ÿæ”¯æŒåˆ™è¡¨è¾¾å¼ï¼Œé€šè¿‡=~æŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼šæŸ¥è¯¢æ‰€æœ‰ instance æ˜¯ localhost å¼€å¤´çš„æŒ‡æ ‡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;go_gc_duration_seconds_count{instance=~&quot;localhost.*&quot;}&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.33480176211453744&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCwsDxblLHsEniaia6QN4a7PCNC3iczFO5Lm0TEOsialgvMOYv02yACSlfDA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;454&quot;/&gt;&lt;/figure&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;5.2 èŒƒå›´æŸ¥è¯¢&lt;/span&gt;&lt;span/&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;èŒƒå›´æŸ¥è¯¢çš„ç»“æœé›†å°±æ˜¯åŒºé—´å‘é‡ï¼Œå¯ä»¥é€šè¿‡[]æŒ‡å®šæ—¶é—´æ¥åšèŒƒå›´æŸ¥è¯¢ï¼ŒæŸ¥è¯¢ 5 åˆ†é’Ÿå†…çš„ Gc ç´¯ç§¯æ¶ˆè€—æ—¶é—´ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;go_gc_duration_seconds_count{}[5m]&lt;/code&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ³¨æ„ï¼šè¿™é‡ŒèŒƒå›´æŸ¥è¯¢ç¬¬ä¸€ä¸ªç‚¹å¹¶ä¸ä¸€å®šç²¾ç¡®åˆ°åˆšåˆšå¥½ 5 åˆ†é’Ÿå‰çš„é‚£ä¸ªæ—¶åºæ ·æœ¬ç‚¹ï¼Œä»–æ˜¯ä»¥ 5 åˆ†é’Ÿä½œä¸ºä¸€ä¸ªåŒºé—´ï¼Œå¯»æ‰¾è¿™ä¸ªåŒºé—´çš„ç¬¬ä¸€ä¸ªç‚¹åˆ°æœ€åä¸€ä¸ªæ ·æœ¬ç‚¹ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.545054945054945&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmC4OHtPiaK66xU9Idoia6h80KRVbnWwCEF08Ib3LpyNvDq4IC6zOthbljA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ—¶é—´å•ä½ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4199029126213592&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCxibRgoKPhxYVNHaEMM7kiciaorE1VEYX3lLWLQr5ZsKphbJBPibnkA9sMw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;412&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;dï¼šå¤©ï¼Œhï¼šå°æ—¶ï¼Œmï¼šåˆ†é’Ÿï¼Œmsï¼šæ¯«ç§’ï¼Œsï¼šç§’ï¼Œwï¼šå‘¨ï¼Œyï¼šå¹´&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŒæ ·æ”¯æŒç±»ä¼¼ SQL ä¸­çš„ offset æŸ¥è¯¢ï¼Œå¦‚ä¸‹ï¼šæŸ¥è¯¢ä¸€å¤©å‰å½“å‰ 5 åˆ†é’Ÿå‰çš„æ—¶åºæ•°æ®é›†ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;go_gc_duration_seconds_count{}[5m] offset 1d&lt;/code&gt;&lt;/p&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;5.3 å†…ç½®å‡½æ•°&lt;/span&gt;&lt;span/&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Prometheus å†…ç½®äº†å¾ˆå¤šå‡½æ•°ï¼Œè¿™é‡Œä¸»è¦è®°å½•ä¸‹å¸¸ç”¨çš„å‡ ä¸ªå‡½æ•°çš„ä½¿ç”¨ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;rate å’Œ irate å‡½æ•°ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;rate å‡½æ•°å¯ä»¥ç”¨æ¥æ±‚æŒ‡æ ‡çš„å¹³å‡å˜åŒ–é€Ÿç‡&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;rateå‡½æ•°=æ—¶é—´åŒºé—´å‰åä¸¤ä¸ªç‚¹çš„å·® / æ—¶é—´èŒƒå›´&lt;/code&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸€èˆ¬ rate å‡½æ•°å¯ä»¥ç”¨æ¥æ±‚æŸä¸ªæ—¶é—´åŒºé—´å†…çš„è¯·æ±‚é€Ÿç‡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ QPSï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4767080745341615&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCzgPUg6DHgC7aNtuKRYW9BY84BRR97iaShK26o8DRMoIInicoSqc19mjA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1288&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯ rate å‡½æ•°åªæ˜¯ç®—å‡ºæ¥äº†æŸä¸ªæ—¶é—´åŒºé—´å†…çš„å¹³å‡é€Ÿç‡ï¼Œæ²¡åŠæ³•åæ˜ çªå‘å˜åŒ–ï¼Œå‡è®¾åœ¨ä¸€åˆ†é’Ÿçš„æ—¶é—´åŒºé—´é‡Œï¼Œå‰ 50 ç§’çš„è¯·æ±‚é‡éƒ½æ˜¯ 0 åˆ° 10 å·¦å³ï¼Œä½†æ˜¯æœ€å 10 ç§’çš„è¯·æ±‚é‡æš´å¢åˆ° 100 ä»¥ä¸Šï¼Œè¿™æ—¶å€™ç®—å‡ºæ¥çš„å€¼å¯èƒ½æ— æ³•å¾ˆå¥½çš„åæ˜ è¿™ä¸ªå³°å€¼å˜åŒ–ã€‚è¿™ä¸ªé—®é¢˜å¯ä»¥é€šè¿‡ irate å‡½æ•°è§£å†³ï¼Œirate å‡½æ•°æ±‚å‡ºæ¥çš„å°±æ˜¯ç¬æ—¶å˜åŒ–ç‡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;æ—¶é—´åŒºé—´å†…æœ€åä¸¤ä¸ªæ ·æœ¬ç‚¹çš„å·® / æœ€åä¸¤ä¸ªæ ·æœ¬ç‚¹çš„æ—¶é—´å·®&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4555735056542811&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmC6pNDfwdh1whHsRcQ1iamYygjHH0DEDB1PeDjHA7yvCkKzGngngVwPGg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1238&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;å¯ä»¥é€šè¿‡å›¾åƒçœ‹ä¸‹ä¸¤è€…çš„åŒºåˆ«ï¼širate å‡½æ•°çš„å›¾åƒå³°å€¼å˜åŒ–å¤§ï¼Œrate å‡½æ•°å˜åŒ–è¾ƒä¸ºå¹³ç¼“ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;rate å‡½æ•°ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7248062015503876&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCGvGflP7I9UwibB6WY5wjxTcoOJxzuNSMD7x3sWsNz7XKqOratqye9lA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1032&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;irate å‡½æ•°ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7775590551181102&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCPrLgUEslJYUPMpt5qD2dflGeFfTlZQ5EQbc2mh8YU4uhTCRD0D45BA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1016&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;èšåˆå‡½æ•°ï¼šSum() by() without()&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¹Ÿæ˜¯ä¸Šè¾¹çš„ä¾‹å­ï¼Œæˆ‘ä»¬åœ¨æ±‚æŒ‡å®šæ¥å£çš„ QPS çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šå‡ºç°å¤šä¸ªå®ä¾‹çš„ QPS çš„è®¡ç®—ç»“æœï¼Œå¦‚ä¸‹æ˜¯å­˜åœ¨å¤šä¸ªæ¥å£ï¼Œä¸‰ä¸ªæœåŠ¡çš„ QPSã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;rate(demo_api_request_duration_seconds_count{job=&quot;demo&quot;, method=&quot;GET&quot;, status=&quot;200&quot;}[5m])&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3934065934065934&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmC5plKMtWFBOWibuKG0uHjBwb3XO16kByRA0tIc4DIYurPrSqZYwppEXQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ©ç”¨ sum å‡½æ•°å¯ä»¥å°†ä¸‰ä¸ª QPS èšåˆï¼Œå³å¯å¾—åˆ°æ•´ä¸ªæœåŠ¡è¯¥æ¥å£çš„ QPSï¼šå…¶å® Sum å°±æ˜¯å°†æŒ‡æ ‡å€¼åšç›¸åŠ ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.2967032967032967&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCRW9aHquaV8pX9gpibuYONd829FY5UQzDItIiaiaoQ088DMfOFlqP46GCw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯è¿™æ ·ç›´æ¥çš„ç›¸åŠ å¤ªç¬¼ç»ŸæŠ½è±¡äº†ï¼Œå¯ä»¥é…åˆ by å’Œ without å‡½æ•°åœ¨ sum çš„æ—¶å€™ï¼ŒåŸºäºæŸäº›æ ‡ç­¾åˆ†ç»„ï¼Œç±»ä¼¼ SQL ä¸­çš„ group by&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¾‹å¦‚ï¼Œæˆ‘å¯ä»¥æ ¹æ®è¯·æ±‚æ¥å£æ ‡ç­¾åˆ†ç»„ï¼šè¿™æ ·æ‹¿åˆ°çš„å°±æ˜¯å…·ä½“æ¥å£çš„ QPSï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;sum(rate(demo_api_request_duration_seconds_count{job=&quot;demo&quot;, method=&quot;GET&quot;, status=&quot;200&quot;}[5m])) by(path)&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.2681318681318681&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCesoj9tUe40tEnWpkvickibyw6EiasovFGvYmHOwXgtmY59lQ55SQXAROA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¹Ÿå¯ä»¥ä¸æ ¹æ®æ¥å£è·¯å¾„åˆ†ç»„ï¼šé€šè¿‡ without æŒ‡å®šï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;sum(rate(demo_api_request_duration_seconds_count{job=&quot;demo&quot;, method=&quot;GET&quot;, status=&quot;200&quot;}[5m])) without(path)&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.41318681318681316&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCHsK72AFzVKYnr1H5UyGiblc4pKM8A8BBa0l8mumeic8m3Frict3I9AuDg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;å¯ä»¥é€šè¿‡ histogram_quantile å‡½æ•°åšæ•°æ®ç»Ÿè®¡ï¼šå¯ä»¥ç”¨æ¥ç»Ÿè®¡ç™¾åˆ†ä½æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç™¾åˆ†ä½ï¼Œç¬¬äºŒä¸ª histogram æŒ‡æ ‡ï¼Œè¿™æ ·è®¡ç®—å‡ºæ¥çš„å°±æ˜¯ä¸­ä½æ•°ï¼Œå³ P50&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;histogram_quantile(0.5,go_gc_pauses_seconds_total_bucket)&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.2661795407098121&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCibWLRmbHy9RQhmiaEabg8sXCgmb2T2tgdictI8J6jw43grTsNZJvAPHPA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;958&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ†äº«ä¹‹å‰å’ŒåŒäº‹ä¸€èµ·å‘ç°çš„å‘ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨åˆšåˆšå†™çš„è‡ªå®šä¹‰ exporter ä¸Šæ–°å¢å‡ ä¸ª histogram çš„æ ·æœ¬ç‚¹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;MyHistogram.Observe(0.3)&lt;br/&gt;MyHistogram.Observe(0.4)&lt;br/&gt;MyHistogram.Observe(0.5)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;histogram çš„æ¡¶è®¾ç½®ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;MyHistogramÂ =Â prometheus.NewHistogram(prometheus.HistogramOpts{&lt;br/&gt;Â Â Name:Â &lt;span&gt;&quot;my_histogram_bucket&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Help:Â &lt;span&gt;&quot;è‡ªå®šä¹‰histogram&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Buckets:Â []float64{0,2.5,5,7.5,10},Â Â //Â éœ€è¦æŒ‡å®šæ¡¶&lt;br/&gt;})&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœè¿™æ ·çš„è¯ï¼Œæ‰€æœ‰æŒ‡æ ‡éƒ½ä¼šç›´æ¥è¿›å…¥åˆ°ç¬¬ä¸€ä¸ªæ¡¶ï¼Œå³ 0 åˆ° 2.5 è¿™ä¸ªæ¡¶ï¼Œå¦‚æœæˆ‘è¦è®¡ç®—ä¸­ä½æ•°ï¼Œé‚£ä¹ˆè¿™ä¸ªä¸­ä½æ•°æŒ‰ç…§æ•°å­¦å…¬å¼æ¥ç®—çš„è¯ï¼Œè‚¯å®šæ˜¯åœ¨ 0 åˆ° 2.5 ä¹‹é—´çš„ï¼Œè€Œä¸”è‚¯å®šæ˜¯ 0.3 åˆ° 0.5 ä¹‹é—´ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ç”¨&lt;strong&gt;histogram_quantile å‡½æ•°&lt;/strong&gt;è®¡ç®—ä¸‹ï¼šè®¡ç®—ç»“æœæ˜¯ 1.25ï¼Œå…¶å®å·²ç»ä¸å¯¹äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;histogram_quantile(0.5,my_histogram_bucket_bucket)&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.2967032967032967&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCNRGWhqrPBvJUaejQPia0HvOWXpCNNF4qlyeJbsXibJzibUrp2x5BygjNQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘åœ¨è®¡ç®—ä¸‹ P99ï¼Œç­‰äº 2.475ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;histogram_quantile(0.99,my_histogram_bucket_bucket)&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.2851600387972842&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCvBoDIa3X1ibr1dbOPiaMrRmnC2ZOXN85j47RMXUwicfFsR4KUbVsDy9RQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1031&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘çš„æŒ‡æ ‡éƒ½æ˜¯ä¸å¤§äº 1 çš„ï¼Œä¸ºå•¥ç®—å‡ºæ¥çš„ P50 å’Œ P99 éƒ½è¿™ä¹ˆç¦»è°±å‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ˜¯å› ä¸º Prometheus ä»–æ˜¯ä¸ä¿å­˜ä½ å…·ä½“çš„æŒ‡æ ‡æ•°å€¼çš„ï¼Œä»–ä¼šå¸®ä½ æŠŠæŒ‡æ ‡æ”¾åˆ°å…·ä½“çš„æ¡¶ï¼Œä½†æ˜¯ä»–ä¸ä¼šä¿å­˜ä½ æŒ‡æ ‡çš„å€¼ï¼Œè®¡ç®—çš„åˆ†ä½æ•°æ˜¯ä¸€ä¸ªé¢„ä¼°çš„å€¼ï¼Œæ€ä¹ˆé¢„ä¼°å‘¢ï¼Ÿå°±æ˜¯å‡è®¾æ¯ä¸ªæ¡¶å†…çš„æ ·æœ¬åˆ†å¸ƒæ˜¯å‡åŒ€çš„ï¼Œçº¿æ€§åˆ†å¸ƒæ¥è®¡ç®—çš„ï¼Œæ¯”å¦‚åˆšåˆšçš„ P50ï¼Œå…¶å®å°±æ˜¯ç®—æ’åœ¨ç¬¬ 50%ä½ç½®çš„æ ·æœ¬å€¼ï¼Œå› ä¸ºåˆšåˆšæ‰€æœ‰çš„æ•°æ®éƒ½è½åœ¨äº†ç¬¬ä¸€ä¸ªæ¡¶ï¼Œé‚£ä¹ˆä»–åœ¨è®¡ç®—çš„æ—¶å€™å°±ä¼šå‡å®šè¿™ä¸ª 50%å€¼åœ¨ç¬¬ä¸€ä¸ªæ¡¶çš„ä¸­ç‚¹ï¼Œä»–å°±ä¼šå‡å®šè¿™ä¸ªæ•°å°±æ˜¯ 0.5 _ 2.5ï¼ŒP99 å°±æ˜¯ç¬¬ä¸€ä¸ªæ¡¶çš„ 99%çš„ä½ç½®ï¼Œä»–å°±ä¼šå‡å®šè¿™ä¸ªæ•°å°±æ˜¯ 0.99 _ 2.5ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;å¯¼è‡´è¿™ä¸ªè¯¯å·®è¾ƒå¤§çš„åŸå› å°±æ˜¯æˆ‘ä»¬çš„ bucket è®¾ç½®çš„ä¸åˆç†ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‡æ–°å®šä¹‰æ¡¶ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;//Â å®šä¹‰histogram&lt;br/&gt;MyHistogramÂ =Â prometheus.NewHistogram(prometheus.HistogramOpts{&lt;br/&gt;Â Â Name:Â &lt;span&gt;&quot;my_histogram_bucket&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Help:Â &lt;span&gt;&quot;è‡ªå®šä¹‰histogram&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Buckets:Â []float64{0.1,0.2,0.3,0.4,0.5},Â Â //Â éœ€è¦æŒ‡å®šæ¡¶&lt;br/&gt;})&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ŠæŠ¥æ•°æ®ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;MyHistogram.Observe(0.1)&lt;br/&gt;MyHistogram.Observe(0.3)&lt;br/&gt;MyHistogram.Observe(0.4)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3208791208791209&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmChXqjhZl0EnSU4Yb1jNicLdicocB8TN3QwObrokoMH49BGSsN47wsu2yA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‡æ–°è®¡ç®— P50ï¼ŒP99ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.13656387665198239&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCUX0tQC5JSqEFhJQIMEnnf6jEaeaXHdNtRQRKMP3GsN02HI9hGIVXTQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;454&quot;/&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.12527472527472527&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCDr9ObLPibZRBKHJloWdPea0oM6klODD4FRDd4Gs0UNrCLGH6XOKYNXQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot; class=&quot;rich_pages wxw-img&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æ¡¶è®¾ç½®çš„è¶Šåˆç†ï¼Œè®¡ç®—çš„è¯¯å·®è¶Šå°&lt;/strong&gt;&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;6. Grafana å¯è§†åŒ–&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é™¤äº†å¯ä»¥åˆ©ç”¨ Prometheus æä¾›çš„ webUI å¯è§†åŒ–æˆ‘ä»¬çš„æŒ‡æ ‡å¤–ï¼Œè¿˜å¯ä»¥æ¥å…¥ Grafana æ¥åšæŒ‡æ ‡çš„å¯è§†åŒ–ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¬¬ä¸€æ­¥ï¼Œå¯¹æ¥æ•°æ®æºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.46593406593406594&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCCFfo7KLlL4IyMXTsrtXjuWfqamzhwfJnmsn0fsISGeJLR29wpdxQLQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é…ç½®å¥½ prometheus çš„åœ°å€ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8801775147928994&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCZ6ZBRKic4yHnpEtkMBN6DIWNllZovG4Z4IXhFWMaVEmRU8sibFibh2baQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;676&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¬¬äºŒæ­¥ï¼šåˆ›å»ºä»ªè¡¨ç›˜&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4857142857142857&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCKAOooSsb5ZZCX7PCO80hJ5KayzdQNrV29oHHX8kc15bYqicwYtdP2mA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¼–è¾‘ä»ªè¡¨ç›˜ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7185741088180112&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCso8ZgtT1fia8sibjAia3HN9mvbaibCdPAFs34r0OkH1dowBhwG3rL0N08w/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;533&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ metrics å¤„ç¼–å†™ PromQL å³å¯å®ŒæˆæŸ¥è¯¢å’Œå¯è§†åŒ–ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5022026431718062&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCcYB0Gic0mPEEchRXMGakzS2QhO9facNrOicmNuI4qY2FvCw6SKzLgd3Q/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;454&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»ªè¡¨ç›˜ç¼–è¾‘å®Œåï¼Œå¯ä»¥å¯¼å‡ºå¯¹åº”çš„ json æ–‡ä»¶ï¼Œæ–¹ä¾¿ä¸‹æ¬¡å¯¼å…¥åŒæ ·çš„ä»ªè¡¨ç›˜ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.616822429906542&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCrNX0ibSbSA7Jlibw4VdxtgPicMS3UMWt2LibP5MFcOJWmiaVrkiakNMf53Mg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;642&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»¥ä¸Šæ˜¯æˆ‘ä¹‹å‰æ­å»ºçš„ä»ªè¡¨ç›˜ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6409937888198758&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCJdic1DcL10CWKD5ctMnnFtDcZs7J01fiaQvVbrWPrrGJcR6G3p5ud19Q/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1610&quot;/&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;7. ç›‘æ§å‘Šè­¦&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;AlertManager æ˜¯ prometheus æä¾›çš„å‘Šè­¦ä¿¡æ¯ä¸‹å‘ç»„ä»¶ï¼ŒåŒ…å«äº†å¯¹å‘Šè­¦ä¿¡æ¯çš„åˆ†ç»„ï¼Œä¸‹å‘ï¼Œé™é»˜ç­‰ç­–ç•¥ã€‚é…ç½®å®Œæˆåå¯ä»¥åœ¨ webui ä¸Šçœ‹åˆ°å¯¹åº”çš„å‘Šè­¦ç­–ç•¥ä¿¡æ¯ã€‚å‘Šè­¦è§„åˆ™ä¹Ÿæ˜¯åŸºäº PromQL è¿›è¡Œå®šåˆ¶çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¼–å†™å‘Šè­¦é…ç½®ï¼šå½“ Http_srv è¿™ä¸ªæœåŠ¡æŒ‚äº†ï¼ŒPrometheus é‡‡é›†ä¸åˆ°æŒ‡æ ‡ï¼Œå¹¶ä¸”æŒç»­æ—¶é—´ 1 åˆ†é’Ÿï¼Œå°±ä¼šè§¦å‘å‘Šè­¦&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;groups:&lt;br/&gt;\-Â name:Â simulator-alert-rule&lt;br/&gt;Â rules:&lt;br/&gt;Â \-Â alert:Â HttpSimulatorDown&lt;br/&gt;Â Â expr:Â sum(up{job=&lt;span&gt;&quot;http_srv&quot;&lt;/span&gt;})Â ==Â 0&lt;br/&gt;Â Â &lt;span&gt;for&lt;/span&gt;:Â 1m&lt;br/&gt;Â Â labels:&lt;br/&gt;Â Â Â severity:Â critical&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ prometheus.yml ä¸­é…ç½®å‘Šè­¦é…ç½®æ–‡ä»¶ï¼Œéœ€è¦é…ç½®ä¸Š alertmanager çš„åœ°å€å’Œå‘Šè­¦æ–‡ä»¶çš„åœ°å€&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;\&lt;span&gt;#Â AlertmanagerÂ configuration&lt;/span&gt;&lt;br/&gt;alerting:&lt;br/&gt;Â alertmanagers:&lt;br/&gt;Â \-Â static_configs:&lt;br/&gt;Â Â \-Â targets:Â [&lt;span&gt;&#x27;localhost:9093&#x27;&lt;/span&gt;]&lt;br/&gt;\&lt;span&gt;#Â LoadÂ rulesÂ onceÂ andÂ periodicallyÂ evaluateÂ themÂ accordingÂ toÂ theÂ globalÂ &#x27;evaluation_interval&#x27;.&lt;/span&gt;&lt;br/&gt;rule_files:&lt;br/&gt;Â Â \-Â &lt;span&gt;&quot;alert_rules.yml&quot;&lt;/span&gt;&lt;br/&gt;Â Â \&lt;span&gt;#-Â &quot;first_rules.yml&quot;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é…ç½®å‘Šè­¦ä¿¡æ¯ï¼Œä¾‹å¦‚å‘Šè­¦å‘é€åœ°å€ï¼Œå‘Šè­¦å†…å®¹æ¨¡ç‰ˆï¼Œåˆ†ç»„ç­–ç•¥ç­‰éƒ½åœ¨ alertmanager çš„é…ç½®æ–‡ä»¶ä¸­é…ç½®ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;global:&lt;br/&gt;Â smtp_smarthost:Â &lt;span&gt;&#x27;smtp.qq.com:465&#x27;&lt;/span&gt;&lt;br/&gt;Â smtp_from:Â &lt;span&gt;&#x27;xxxx@qq.com&#x27;&lt;/span&gt;&lt;br/&gt;Â smtp_auth_username:Â &lt;span&gt;&#x27;xxxx@qq.com&#x27;&lt;/span&gt;&lt;br/&gt;Â smtp_auth_password:Â &lt;span&gt;&#x27;xxxx&#x27;&lt;/span&gt;&lt;br/&gt;Â smtp_require_tls:Â &lt;span&gt;false&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;route:&lt;br/&gt;Â group_interval:Â 1m&lt;br/&gt;Â repeat_interval:Â 1m&lt;br/&gt;Â receiver:Â &lt;span&gt;&#x27;mail-receiver&#x27;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â group_byÂ Â Â Â Â Â Â //é‡‡ç”¨å“ªä¸ªæ ‡ç­¾ä½œä¸ºåˆ†ç»„&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â group_waitÂ Â Â Â Â Â //åˆ†ç»„ç­‰å¾…çš„æ—¶é—´ï¼Œæ”¶åˆ°æŠ¥è­¦ä¸æ˜¯ç«‹é©¬å‘é€å‡ºå»ï¼Œè€Œæ˜¯ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œçœ‹çœ‹åŒä¸€ç»„ä¸­æ˜¯å¦æœ‰å…¶ä»–æŠ¥è­¦ï¼Œå¦‚æœæœ‰ä¸€å¹¶å‘é€&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â group_intervalÂ Â Â Â //å‘Šè­¦æ—¶é—´é—´éš”&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â repeat_intervalÂ Â Â //é‡å¤å‘Šè­¦æ—¶é—´é—´éš”ï¼Œå¯ä»¥å‡å°‘å‘é€å‘Šè­¦çš„é¢‘ç‡&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â receiverÂ Â Â Â Â Â Â //æ¥æ”¶è€…æ˜¯è°&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â routesÂ Â Â Â Â Â Â Â //å­è·¯ç”±é…ç½®&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;receivers:&lt;br/&gt;\-Â name:Â &lt;span&gt;&#x27;mail-receiver&#x27;&lt;/span&gt;&lt;br/&gt;Â email_configs:&lt;br/&gt;Â Â \-Â to:Â &lt;span&gt;&#x27;xxxx@qq.com&#x27;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“æˆ‘ kill è¿›ç¨‹ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.18461538461538463&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCS7sg89pUI28zSicsLrsyDdF0Gr9HgVkicGXOvbQBzfFY8fcPK9l3AQMA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;prometheus å·²ç»è§¦å‘å‘Šè­¦ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6247139588100686&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCxt4r5Mp0nXMAiclewTibyvnOS4hSbtZoGWfqhOrnh0U9fcnh7HCnDmTg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;437&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ç­‰å¾… 1 åˆ†é’Ÿï¼Œå¦‚æœæŒç»­è¿˜æ˜¯ç¬¦åˆå‘Šè­¦ç­–ç•¥ï¼Œåˆ™çŠ¶æ€ä¸ºä» pending å˜ä¸º FIRING ä¼šå‘é€é‚®ä»¶åˆ°æˆ‘çš„é‚®ç®±&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6581986143187067&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCPzzsVhaDpcbtECByibwrElibvSSKZIhGI6WFuVn0hsytd5h4YDSGWib2A/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;433&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤æ—¶æˆ‘çš„é‚®ç®±æ”¶åˆ°äº†ä¸€æ¡å‘Šè­¦æ¶ˆæ¯ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6007957559681698&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCTCkFPjKCzMHtECtgwf3L1qpny51b8gUVlIblXiadibsF4tNJMmVicOH1g/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;754&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;alertmanager ä¹Ÿæ”¯æŒå¯¹å‘Šè­¦è¿›è¡Œé™é»˜ï¼Œåœ¨ alertmanager çš„ WEBUI ä¸­é…ç½®å³å¯ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6065934065934065&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmC0jyETt95CPJIdNL3euU0fic3AtMHXxRc0HQa1n8Na6k1kfcwhw59Bpg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é—´éš”äº† 4 åˆ†é’Ÿï¼Œæ²¡æœ‰æ”¶åˆ°å‘Šè­¦ï¼Œé™é»˜ç”Ÿæ•ˆï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.18021978021978022&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCVFZarticNknicOHOguujHbKtfmzQzOTuJURx55bdAAx4r7M3IdibtXCQQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;455&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸€ä¸ªå°æ—¶æ²¡æœ‰æ”¶åˆ°å‘Šè­¦ä¿¡æ¯ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.08782936010037641&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/j3gficicyOvat3N2ReqCCVg7XYsr8ypHmCYpK6lpv2q5EJmThCO57stGJFe8KVZBefGjqowiaNCxr6icb6S8OfMNhw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1594&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;8. å‚è€ƒæ–‡çŒ®&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section class=&quot;channels_iframe_wrp&quot;&gt;&lt;mpvideosnap class=&quot;js_uneditable custom_select_card channels_iframe videosnap_video_iframe&quot; data-pluginname=&quot;videosnap&quot; data-id=&quot;export/UzFfAgtgekIEAQAAAAAAqwsx9nH7UwAAAAstQy6ubaLX4KHWvLEZgBPE_qIsECYjAPmDzNPgMIvxGjb5VTGcXXQMQ54cVaBS&quot; data-url=&quot;https://findermp.video.qq.com/251/20304/stodownload?encfilekey=rjD5jyTuFrIpZ2ibE8T7Ym3K77SEULgkia8l5rw4icduZhC2XYyo6A41r6xiaZIMMruibX6tTpFghC1D1GkLOyUWFSz04eibxkV1yt9IVGQACZ1avsrNnFv1bJCg&amp;amp;adaptivelytrans=0&amp;amp;bizid=1023&amp;amp;dotrans=0&amp;amp;hy=SZ&amp;amp;idx=1&amp;amp;m=&amp;amp;scene=0&amp;amp;token=AxricY7RBHdVgdz60TZiaG9hyQ3cXMasdL3pv3c2Epqfsd9cIO51TiaCWGyVG7HHITVU3s9FGYiclB8&quot; data-headimgurl=&quot;http://wx.qlogo.cn/finderhead/I7awtksbibjQe7RZAy84xESOBAfIZ8xQ9ApXt4uTe8po/0&quot; data-username=&quot;v2_060000231003b20faec8c6e08e1ac1d4cf06ea31b07760a16cba92d83444bd9a5d9d55ffaede@finder&quot; data-nickname=&quot;è…¾è®¯ç¨‹åºå‘˜&quot; data-desc=&quot;4.29æ˜¯ä¸–ç•Œèˆè¹ˆæ—¥ï¼Œé¹…å‚çš„ç¨‹åºå‘˜ä»¬ä¸ä»…ä¼šæ•²ä»£ç ï¼Œèˆä¸€æ ·è·³åœ°6ï¼Œä»–ä»¬éƒ½æ¥è‡ªè…¾è®¯èˆè¹ˆåä¼šã€‚æ²¡äº‹ä¸å¦‚è·³èˆ~&quot; data-nonceid=&quot;14880561591363040734&quot; data-type=&quot;video&quot; data-width=&quot;2048&quot; data-height=&quot;1080&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span/&gt;&lt;/section&gt;&lt;/section&gt;
          &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>