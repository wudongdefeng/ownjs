<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>68301e0d3bec482c6126fb493f19b683</guid>
<title>æœåŠ¡è°ƒä¼˜ç»éªŒæ€»ç»“</title>
<link>https://toutiao.io/k/av28tr1</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;article id=&quot;post-39608&quot; class=&quot;post-content post-39608 post type-post status-publish format-standard hentry category-6 h-entry h-as-article&quot; itemref=&quot;site-publisher&quot;&gt;
&lt;header class=&quot;entry-header&quot;&gt;
 &lt;/header&gt;

&lt;div class=&quot;entry-content e-content&quot; itemprop=&quot;description articleBody&quot;&gt;
&lt;pre&gt;&lt;code class=&quot;&quot;&gt;ç‰ˆæƒå£°æ˜ æœ¬ç«™åŸåˆ›æ–‡ç«  ç”± èŒå” å‘è¡¨
è½¬è½½è¯·æ³¨æ˜ èŒå” | http://vearne.cc
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;å‰è¨€&lt;/h2&gt;
&lt;p&gt;èŒå”å·¥ä½œåå¤šå¹´ï¼Œæœ‰ä¸å°‘æœåŠ¡è°ƒä¼˜çš„ç»éªŒï¼Œåœ¨è¿™é‡Œæ•´ç†ä¸€ä¸‹æ€è·¯ã€‚å¸Œæœ›å¯¹è‡ªå·±å’ŒåŒè¡Œæœ‰æ‰€å¸®åŠ©ã€‚&lt;/p&gt;
&lt;h2&gt;1. å‘ç°é—®é¢˜&lt;/h2&gt;
&lt;h3&gt;1.1 å‘ç°é—®é¢˜æ¯”è§£å†³é—®é¢˜éš¾åº¦æ›´å¤§&lt;/h3&gt;
&lt;p&gt;æ‰¾å‡ºç³»ç»Ÿç“¶é¢ˆå’Œé—®é¢˜éš¾åº¦å¾ˆå¤§ï¼Œä¸€èˆ¬åªè¦èƒ½å¤Ÿæ‰¾å‡ºä¸”èƒ½å¤Ÿç¨³å®šå¤ç°ï¼Œé—®é¢˜éƒ½èƒ½å¤Ÿè¢«è§£å†³ã€‚&lt;/p&gt;
&lt;h3&gt;1.2 å‹æµ‹èƒ½å¤Ÿå¸®æˆ‘ä»¬å‘ç°ç³»ç»Ÿç“¶é¢ˆï¼Œæ‰¾å‡ºé—®é¢˜&lt;/h3&gt;
&lt;p&gt;å‹æµ‹ä¸ä»…å¯ä»¥å¸®åŠ©æˆ‘ä»¬å‘ç°ç³»ç»Ÿç“¶é¢ˆï¼Œè¿˜èƒ½ç”¨äºå‘ç°æ­»é”é—®é¢˜&lt;/p&gt;
&lt;h3&gt;1.3 å°½å¯èƒ½ç»†ç²’åº¦çš„ç›‘æ§æŒ‡æ ‡å¯¹å‘ç°é—®é¢˜å¸®åŠ©å¾ˆå¤§&lt;/h3&gt;
&lt;p&gt;è®²å‡ ä¸ªå®¹æ˜“å¿½ç•¥çš„ç»†èŠ‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨Cacheçš„åœºæ™¯ï¼Œè¦ç•™æ„Cacheçš„å‘½ä¸­ç‡&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨Channelçš„ç»†èŠ‚ï¼Œè¦ç›‘æ§channelçš„é•¿åº¦ï¼Œæ³¨æ„Channelæ˜¯å¦å†™æ»¡ï¼Œé˜»å¡å…¶å®ƒåç¨‹&lt;/li&gt;
&lt;li&gt;å¯¹äºæ¯”è¾ƒå¤æ‚çš„æ¥å£ï¼Œå¦‚æœå»¶è¿Ÿé«˜ï¼Œéœ€è¦æœ‰tracingè®°å½•ï¼Œå…³æ³¨åˆ°åº•æ˜¯é‚£ä¸ªç¯èŠ‚è€—æ—¶è¿‡å¤š&lt;/li&gt;
&lt;li&gt;å¯¹äºMQçš„åœºæ™¯ï¼Œç”šè‡³è¿˜éœ€è¦ç›‘æ§PageCacheçš„å‘½ä¸­ç‡ã€ç£ç›˜IOç­‰ç­‰&lt;/li&gt;
&lt;li&gt;GC çš„è€—æ—¶(ç‰¹åˆ«æ˜¯Javaä¸­Full GC)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;2. å¸¸è§çš„æ€è·¯&lt;/h2&gt;
&lt;h3&gt;2.1 ç»å¤§å¤šæ•°æœåŠ¡çš„ç³»ç»Ÿç“¶é¢ˆæ˜¯IO&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬æ¥è§¦åˆ°çš„ç»å¤§å¤šæ•°æœåŠ¡ï¼Œéƒ½æ˜¯IOå‹æœåŠ¡ï¼Œå½±å“å»¶è¿Ÿçš„ä¸»è¦å› ç´ æ˜¯IOï¼Œç£ç›˜IOã€ç½‘ç»œIOï¼Œå¾®æœåŠ¡çš„å“åº”å»¶è¿Ÿç­‰ç­‰&lt;/p&gt;
&lt;h3&gt;2.2 å¦‚æœCPUæ˜¯ç“¶é¢ˆï¼Œéœ€è¦æœ‰ç«ç„°å›¾ï¼Œå…³æ³¨æ˜¯å“ªä¸ªç¯èŠ‚æ¶ˆè€—çš„CPUè¿‡å¤šï¼Ÿæ¯ä¸ªéƒ¨åˆ†å æ¯”æ˜¯å¦åˆç†ï¼Ÿï¼ˆæ³¨æ„å‹æµ‹ï¼‰&lt;/h3&gt;
&lt;p&gt;æ¯”å¦‚æ˜¯å¦å¤§é‡çš„CPUæ—¶é—´è¢«æ¶ˆè€—åœ¨äº†é”ç«äº‰ã€ä¸Šä¸‹æ–‡åˆ‡æ¢ã€åƒåœ¾å›æ”¶ã€è°ƒåº¦ç­‰ã€‚&lt;br/&gt;
* åœ¨Golangä¸­ï¼Œç”±äºé”ä¸­å«æœ‰è‡ªæ—‹é”ï¼Œå¦‚æœå¯¹é”çš„ç«äº‰æ¿€çƒˆï¼Œä¼šæœ‰å¤§é‡çš„CPUæ—¶é—´è¢«æ¶ˆè€—åœ¨é”ä¸Šã€‚&lt;br/&gt;
* åœ¨Golangä¸­ï¼ŒPè®¾ç½®ä¸åˆç†ä¹Ÿä¼šå¯¼è‡´å¤§é‡çš„ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/p&gt;
&lt;p&gt;è§æ–‡ç« &lt;br/&gt;
&lt;a href=&quot;http://vearne.cc/archives/39195&quot;&gt;GOMAXPROCSä½ è®¾ç½®å¯¹äº†å—ï¼Ÿ&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;2.3 æŸä¸€ç±»å‹çš„æœåŠ¡ï¼Œå¾€å¾€ä¼šæœ‰ä¸€ç»„éœ€è¦é¢å¤–æ³¨æ„çš„æ ¸å¿ƒæŒ‡æ ‡&lt;/h3&gt;
&lt;p&gt;æŸäº›ç‰¹å®šçš„æœåŠ¡å®¹æ˜“å—åˆ°ç‰¹å®šå› ç´ çš„å½±å“ï¼Œæ¯”å¦‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŸºäºæ¨¡å‹çš„åˆ†ç±»å™¨ï¼Œå‹æµ‹æ—¶è¦ç‰¹åˆ«å…³æ³¨å®ƒçš„CPUä½¿ç”¨ç‡æ˜¯å¦èƒ½å¤Ÿè·‘æ»¡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è§æ–‡ç« &lt;br/&gt;
&lt;a href=&quot;http://vearne.cc/archives/39300&quot;&gt;AIé¢„æµ‹æ¨¡å‹å·¥ç¨‹åŒ–æ€§èƒ½è°ƒä¼˜&lt;/a&gt;&lt;br/&gt;
* æ•°æ®åº“æœåŠ¡è¦ç•™æ„ç£ç›˜IO&lt;/p&gt;
&lt;h3&gt;2.4 GC&lt;/h3&gt;
&lt;p&gt;æœ‰GCçš„åœºæ™¯ï¼Œè¿˜è¦ç‰¹åˆ«ç•™æ„GCå¯èƒ½å¸¦æ¥çš„è´Ÿé¢å½±å“&lt;/p&gt;
&lt;h3&gt;2.5 æ—¥å¿—å¯¹æœåŠ¡æ€§èƒ½å½±å“ä¸å°&lt;/h3&gt;
&lt;blockquote&gt;&lt;p&gt;
å†™æ–‡ä»¶å’Œå†™æ§åˆ¶å°çš„æ€§èƒ½å·®ä¸å¤š, æ¯ç§’é’Ÿå·®ä¸å¤š30wæ¡ã€‚å‡å®šä¸€ä¸ªè¯·æ±‚äº§ç”Ÿ30æ¡æ—¥å¿—ï¼Œä¹Ÿå°±æ˜¯è¯´å³ä½¿å¤„ç†è¿™ä¸ªè¯·æ±‚æ²¡æœ‰ä»»ä½•é€»è¾‘ï¼Œå…‰æ˜¯æ‰“æ—¥å¿—ï¼ŒQPSä¹Ÿå°±å·®ä¸å¤š1wå·¦å³ã€‚(è¿™ä¹Ÿæ˜¯å¾ˆå¤šæœåŠ¡å‹æµ‹çš„QPSæ— æ³•è¶…è¿‡1wçš„åŸå› )ã€‚
&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;è§æ–‡ç« &lt;br/&gt;
&lt;a href=&quot;http://vearne.cc/archives/39275&quot;&gt;ç©è½¬é«˜æ€§èƒ½æ—¥å¿—åº“ZAP(5)-å¼‚æ­¥å†™æ—¥å¿—&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å½“ä½ ä¸çŸ¥é“è¯¥æ€ä¹ˆè°ƒä¼˜çš„æ—¶å€™ï¼Œå¯ä»¥è¯•è¯•å…³é—­æ‰€æœ‰æ—¥å¿—çœ‹çœ‹ã€‚ğŸ˜„&lt;/p&gt;
&lt;h2&gt;3. å¸¸è§çš„ä¼˜åŒ–æ‰‹æ®µ&lt;/h2&gt;
&lt;h3&gt;3.1 ä¸²è¡Œå˜å¹¶å‘&lt;/h3&gt;
&lt;p&gt;åœ¨IOå‹æœåŠ¡éå¸¸å¸¸è§&lt;/p&gt;
&lt;h3&gt;3.2 åŒæ­¥å˜å¼‚æ­¥&lt;/h3&gt;
&lt;p&gt;å¸¸è§çš„åœºæ™¯æ˜¯å›å†™æ•°æ®åº“&lt;/p&gt;
&lt;h3&gt;3.3 å•æ¡å˜æ‰¹é‡&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æ¯”å¦‚æ•°æ®éœ€è¦å›å†™æ•°æ®åº“ï¼Œå¯ä»¥åœ¨å†…å­˜ä¸­ç¼“å­˜ä¸€æ‹¨ï¼Œæ‰¹é‡å›å†™æ•°æ®åº“ï¼Œå¯ä»¥å‡å°‘ç½‘ç»œå¼€é”€ï¼Œé™ä½æ•°æ®åº“çš„å¼€é”€&lt;/li&gt;
&lt;li&gt;å¦å¤–åƒå†™æ—¥å¿—æ–‡ä»¶ï¼Œæ‰¹é‡å†™å¯ä»¥å‡å°‘ç³»ç»Ÿè°ƒç”¨ï¼Œæé«˜å†™å…¥æ•ˆç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¬”è€…ä¹‹å‰æ›¾åšè¿‡æµ‹è¯•ï¼Œå°†æ—¥å¿—ä»å•æ¡åŒæ­¥å†™æ”¹ä¸ºå¼‚æ­¥æ‰¹é‡å†™ï¼Œååèƒ½åŠ›æå‡äº†1å€å¤šã€‚&lt;/p&gt;
&lt;p&gt;è§æ–‡ç« &lt;br/&gt;
&lt;a href=&quot;http://vearne.cc/archives/39275&quot;&gt;ç©è½¬é«˜æ€§èƒ½æ—¥å¿—åº“ZAP(5)-å¼‚æ­¥å†™æ—¥å¿—&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;3.4 å–„ç”¨Cache&lt;/h3&gt;
&lt;p&gt;åœ¨å¤šè¯»å°‘å†™çš„æœåŠ¡ä¸­ï¼ŒCacheå¯¹æå‡æœåŠ¡çš„èƒ½åŠ›æ•ˆæœéå¸¸æ˜¾è‘—ã€‚(åˆ«å¿˜äº†ç›‘æ§Cache)&lt;/p&gt;
&lt;h3&gt;3.5 å€Ÿé‰´åŒè¡Œçš„ç»éªŒ&lt;/h3&gt;
&lt;p&gt;æ¯•ç«ŸåŒè¡Œè¸©è¿‡çš„å‘ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¼šå†è¸©ä¸€éçš„ï¼Œå¯ä»¥å¤šç•™æ„githubä¸­çš„issueè®°å½•ã€‚&lt;/p&gt;
&lt;h2&gt;4. å…¶å®ƒ&lt;/h2&gt;
&lt;h3&gt;4.1 è¿‡æ—©ä¼˜åŒ–æ˜¯ä¸‡æ¶ä¹‹æº&lt;/h3&gt;
&lt;p&gt;æ²¡äº‹åˆ«çæŠ˜è…¾&lt;/p&gt;
&lt;h3&gt;4.2 è¶Šæ¥è¿‘ä¸šåŠ¡ä¾§çš„ä¼˜åŒ–ï¼Œæ•ˆæœè¶Šæ˜¾è‘—&lt;/h3&gt;
&lt;h2&gt;5. ç»“å°¾&lt;/h2&gt;
&lt;p&gt;å¥½å¤šä¸œè¥¿ä¸æ•´ç†ä¸€ä¸‹ï¼Œè‡ªå·±éƒ½å¿«å¿˜äº†ã€‚å¸Œæœ›ä¸‹æ¬¡å†æ’æŸ¥é—®é¢˜æˆ–è€…è°ƒä¼˜çš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿèƒ½ä»ä¸­æ”¶ç›Šã€‚&lt;/p&gt;
&lt;hr/&gt;
&lt;h4&gt;è¯·æˆ‘å–ç“¶é¥®æ–™&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;http://static.zybuluo.com/woshiaotian/ohw8kvpn5k7hthgbuol4e4aq/WechatIMG29.jpg&quot; alt=&quot;å¾®ä¿¡æ”¯ä»˜ç &quot; data-pagespeed-url-hash=&quot;2495828515&quot;/&gt;&lt;/p&gt;

&lt;p class=&quot;clear&quot;/&gt;
&lt;/div&gt;
&lt;nav class=&quot;navigation post-navigation&quot; role=&quot;navigation&quot; aria-label=&quot;æ–‡ç« &quot;&gt;
&lt;h2 class=&quot;screen-reader-text&quot;&gt;æ–‡ç« å¯¼èˆª&lt;/h2&gt;

&lt;/nav&gt; &lt;p class=&quot;clear&quot;/&gt;

&lt;/article&gt;
&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>07a3443e3a30d9e403f43cac14d86226</guid>
<title>æ¥ä¸‹æ¥ä¸€æ®µæ—¶é—´ä¼šå¯¹å¤§å®¶è¿›è¡Œç½‘ç»œé€šä¿¡çš„é­”é¬¼è®­ç»ƒï¼šç†è§£ Socket</title>
<link>https://toutiao.io/k/1guurta</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzUzNjAxODg4MQ==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRlic1g1jGjiaBS1uNgC9uX4jDFicf7wBxXh5ic9WicdiaDq0qtNYgXjqOWZtpXqnXVibuZlfn7gzrWPObnEDQ/0?wx_fmt=png&quot; data-nickname=&quot;ç¼–ç¨‹ä¸€ç”Ÿ&quot; data-alias=&quot;cloudrise1986&quot; data-signature=&quot;è‡´åŠ›äºå†™å¤§å®¶éƒ½èƒ½çœ‹æ‡‚çš„ã€æœ‰æ·±åº¦çš„æŠ€æœ¯æ–‡ç« &quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å¼•å­&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;ä¸‹ä¸€ç¯‡æ ‡é¢˜æ˜¯ã€Šæ·±å…¥ç†è§£MQç”Ÿäº§ç«¯çš„åº•å±‚é€šä¿¡è¿‡ç¨‹ã€‹ï¼Œå»ºè®®æ–‡ç« è¯»å®Œä¹‹å‰ã€æˆ–è€…è¯»å®Œä¹‹åï¼Œå†è¯»ä¸€éæˆ‘ä¹‹å‰å†™çš„&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247485843&amp;amp;idx=1&amp;amp;sn=ae07db807669699bc4bec807aa468a5c&amp;amp;chksm=fafde33dcd8a6a2b8a34483bc61771c3cf99a49a7baf46e47e770c58372808e2053f27a203e1&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ã€ŠRabbitMQè®¾è®¡åŸç†è§£æã€‹&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;ã€ŠRabbitMQè®¾è®¡åŸç†è§£æã€‹&lt;/a&gt;ï¼Œç»“åˆç†è§£ä¸€ä¸‹ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘å¤§å­¦æ—¶æµè¡Œè¿‡ä¸€ä¸ªéŸ©å‰§ã€Šå¤§é•¿ä»Šã€‹ï¼Œå¤§å¥³ä¸»é•¿ä»Šæ˜¯ä¸ªå¥³å¨ã€‚å¥¹å‡çº§æ‰“æ€ªçš„è¿‡ç¨‹ä¸­ï¼Œä¸­å›½æ˜æœæ¥äº†ä¸ªå®˜å‘˜ï¼Œæ˜¯ä¸ªåƒè´§ã€‚é‚£æ—¶å€™å¤§æ˜å…«æ–¹æ¥æœï¼Œå¨é£å‡›å‡›ã€‚é‚£å°æœé²œå›½å¯ä¸æ•¢æ€ æ…¢ï¼Œç†è®ºä¸Šåº”è¯¥å¤§é±¼å¤§è‚‰ã€‚äººå®¶é•¿ä»Šå‡­å€Ÿå¥³ä¸»å…‰ç¯ï¼Œç»™å®˜å‘˜ä¸Šäº†ä¸€æ¡Œç´ é¤ã€‚å®˜å‘˜å‹ƒç„¶å¤§æ€’ï¼Œè¦æŠŠé•¿ä»Šæ‹‰å»ç å¤´ã€‚é•¿ä»Šè§£é‡Šè¯´ï¼šå®˜å‘˜è„¾èƒƒå¤±å’Œï¼Œä¸é€‚åˆå¤§é±¼å¤§è‚‰ï¼Œè®©å®˜å‘˜ç»™å¥¹ä¸€æ®µæ—¶é—´ï¼Œå¤©å¤©åƒå¥¹åšçš„èœï¼Œä»–åƒç€åƒç€å°±ä¼šè§‰å¾—ç´ é¤å¥½åƒäº†ã€‚å®˜å‘˜å°±å’Œå¥¹ç­¾äº†å¯¹èµŒåè®®ã€‚åƒäº†ä¸€æ®µæ—¶é—´ç´ é¤ä¹‹åï¼Œå®˜å‘˜å‘é•¿ä»Šé“æ­‰ï¼Œè¯´æ˜çŸ¥é“è‡ªå·±èº«ä½“ä¸é€‚åˆå¤§é±¼å¤§è‚‰ï¼Œä½†æ˜¯ç®¡ä¸ä½å˜´ï¼Œé•¿ä»Šå¸®äº†ä»–å¤§å¿™ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å…¶å®è¦è®²ã€Šæ·±å…¥ç†è§£MQç”Ÿäº§ç«¯çš„åº•å±‚é€šä¿¡è¿‡ç¨‹ã€‹è¿™ä¸€ç¯‡ä¹‹å‰æˆ‘ä¹Ÿåšäº†å¾ˆå¤šçš„é“ºå«ï¼š&lt;/span&gt;ä»&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247485862&amp;amp;idx=1&amp;amp;sn=414f61b537094b14dab2682a343700e9&amp;amp;chksm=fafde308cd8a6a1e993ed8774cef1c8dc1233761a17b27395b89e3d2c74b0908e0971aeedf9a&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ã€Šæ¶æ„å¸ˆä¹‹è·¯-httpsåº•å±‚åŸç†ã€‹&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;ã€Šæ¶æ„å¸ˆä¹‹è·¯-httpsåº•å±‚åŸç†ã€‹&lt;/a&gt;çš„httpsåè®®ï¼Œåˆ°&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247485988&amp;amp;idx=1&amp;amp;sn=efad5a030bc0a933ac5af2ee09f3c6c4&amp;amp;chksm=fafde08acd8a699c198d0d65c413273f05f2796cfd873160c2ba81ed3f33aebfaccb62234cb7&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ã€Šä¸€ä¸ªhttpè¯·æ±‚è¿›æ¥éƒ½ç»è¿‡äº†ä»€ä¹ˆ(2021ç‰ˆ)ã€‹&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;ã€Šä¸€ä¸ªhttpè¯·æ±‚è¿›æ¥éƒ½ç»è¿‡äº†ä»€ä¹ˆ(2021ç‰ˆ)ã€‹&lt;/a&gt;å®é™…ä¸Šç»è¿‡çš„ç‰©ç†é€šé“ï¼Œç„¶åæ·±å…¥ç†è§£ä¸‰æ¬¡æ¡æ‰‹&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247486103&amp;amp;idx=1&amp;amp;sn=943c5b7f3558df78164321806f273c8f&amp;amp;chksm=fafde039cd8a692f86f0ac97b0e1e05ece075de3e4f33e6a5ec90b269c51aed1963ff3107e0e&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ã€Šæ‡‚å¾—ä¸‰å¢ƒç•Œ-ä½¿ç”¨dubboæ—¶è¯·æ±‚è¶…è¿‡é—®é¢˜ã€‹&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;ã€Šæ‡‚å¾—ä¸‰å¢ƒç•Œ-ä½¿ç”¨dubboæ—¶è¯·æ±‚è¶…è¿‡é—®é¢˜ã€‹&lt;/a&gt;ã€‚æœ‰çš„æ–‡ç« è¯»èµ·æ¥æœ‰ç‚¹éš¾åº¦ï¼Œæˆ‘å¸Œæœ›å¤§å®¶èƒ½åƒé‚£ä½ä¸­å›½çš„å®˜å‘˜ä¸€æ ·ï¼Œè™½ç„¶ä¸æƒ…æ„¿ä½†è¿˜æ˜¯åšæŒä¸€æ®µæ—¶é—´ï¼Œç›¸ä¿¡å¯¹äºå¤šæ•°äººæ¥è¨€å¯¹åº•å±‚é€šä¿¡çš„ç†è§£ä¼šæå‡ä¸€ä¸ªå±‚æ¬¡ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ¥ä¸‹æ¥æ˜¯ç½‘ç»œç¼–ç¨‹çš„å¹²è´§æ—¶é—´ï¼Œæ˜¯ä¸‹ä¸€ç¯‡æ–‡ç« çš„é¢„å¤‡çŸ¥è¯†ï¼Œä¸ç”¨æ‹…å¿ƒï¼Œæµ…æ˜¾æ˜“æ‡‚(å¤šè¯»å‡ éçš„è¯)ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;socketç¼–ç¨‹ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;socketçš„æœ¬è´¨&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;socketçš„æœ¬è´¨å°±æ˜¯ä¸€ç§ç±»å‹çš„æ–‡ä»¶ï¼Œæ‰€ä»¥ä¸€ä¸ªsocketåœ¨è¿›è¡Œè¯»å†™æ“ä½œæ—¶ä¼šå¯¹åº”ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦fd(file descriptor)ã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.7784090909090909&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRlicNVdCPHGOs2zB6FvOHyI5Y86OYjOPPScr5606EGbqbljfKGwsAR7lYgGCfsDtWQDvyBht3IXC4lA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;704&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;socketçš„ä½œç”¨&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.41064638783269963&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/2tk5ianItRl8W5MBSAVicGgJ8bmicz4wgcvHYG2usia51HksBatPFTzmkXUjBdwJxmhAqZGROBJhIcficMPVVkfeeqA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1052&quot;/&gt;&lt;/p&gt;&lt;p&gt;ä¸Šå›¾æ˜¯å››å±‚TCP/IPç½‘ç»œæ ‡å‡†ä¸­ï¼ŒTCP/IPåè®®æ—çš„ä¸»è¦æˆå‘˜ã€‚ä»Šå¤©åªçœ‹ä¸Šé¢ä¸¤å±‚ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æœ€ä¸Šå±‚çš„åº”ç”¨å±‚ï¼Œæ¶‰åŠçš„åè®®å°è£…çš„å‘½ä»¤å¹³æ—¶å·¥ä½œä¸­ä¹Ÿå¾ˆå¸¸ç”¨ï¼Œæ¯”å¦‚ï¼špingã€telnetã€‚ä¹Ÿæœ‰ä¸€äº›ä¸æ˜¯é€šè¿‡å‘½ä»¤ä½†ä¹Ÿéå¸¸å¸¸ç”¨ï¼Œæ¯”å¦‚ï¼šhttpã€‚ä¸‹ä¸€å±‚çš„åº”ç”¨å±‚æœ‰å¯é çš„TCPåè®®å’Œä¸å¯é çš„UDPåè®®ã€‚å¹³æ—¶å·¥ä½œä¸­ï¼Œå¸¸è§çš„ä¸­é—´ä»¶å¦‚zookeeperã€redisã€dubboè¿™äº›éƒ½æ˜¯ä½¿ç”¨TCPåè®®ï¼Œå› ä¸ºè¿™ä¸ªå†…éƒ¨å°è£…å®Œå–„ï¼Œä½¿ç”¨æ›´ç®€å•ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¦æ³¨æ„çš„æ˜¯ä¼ è¾“å±‚æ“ä½œæ˜¯åœ¨å†…æ ¸ç©ºé—´å®Œæˆçš„ï¼Œå°±æ˜¯è¯´ä¸æ˜¯é å’±ä»¬å¹³æ—¶çš„åº”ç”¨ç¼–ç å¯ä»¥ç›´æ¥ä»‹å…¥çš„ã€‚å’±ä»¬å¹³æ—¶ç›´æ¥ç”¨çš„å°±æ˜¯åº”ç”¨å±‚åè®®ã€‚æƒ³é€šè¿‡åº”ç”¨å±‚æ“ä½œä¼ è¾“å±‚æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™å°±ç”¨åˆ°äº†socketç¼–ç¨‹ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;socketçš„ç®€å•åŸç†&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.5414746543778801&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/2tk5ianItRl8W5MBSAVicGgJ8bmicz4wgcvxkz8bmFxP5lnV4YxCAwk9IvV8krleveUKia29fficbdhbJtjgaXEpOxw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;434&quot;/&gt;&lt;/p&gt;&lt;p&gt;Socketä½äºTCP/IPä¹‹ä¸Šï¼Œé€šè¿‡Socketå¯ä»¥æ–¹ä¾¿çš„è¿›è¡Œé€šä¿¡è¿æ¥ã€‚å¯¹å¤–å±è”½äº†å¤æ‚çš„TCP/IPã€‚å®ƒæ˜¯ä¸€ç§&quot;æ‰“å¼€â€”è¯»/å†™â€”å…³é—­&quot;æ¨¡å¼çš„å®ç°ï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å„è‡ªç»´æŠ¤ä¸€ä¸ª&quot;æ–‡ä»¶&quot;ï¼ˆæœ‰å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦fdï¼‰ï¼Œåœ¨å»ºç«‹è¿æ¥æ‰“å¼€åï¼Œå¯ä»¥å‘è‡ªå·±æ–‡ä»¶å†™å…¥å†…å®¹ä¾›å¯¹æ–¹è¯»å–æˆ–è€…è¯»å–å¯¹æ–¹å†…å®¹ï¼Œé€šè®¯ç»“æŸæ—¶å…³é—­æ–‡ä»¶ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.39594843462246776&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRl8W5MBSAVicGgJ8bmicz4wgcvTEUzKknD75KyVMxQZWAu0Ar2iaBqyhfHWYy31rpIicowEGJvS0KHb21w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;543&quot;/&gt;&lt;/p&gt;&lt;p&gt;è¦æ³¨æ„çš„æ˜¯ï¼Œæƒ³å»ºç«‹é€šä¿¡è¿æ¥ï¼Œéœ€è¦ä¸€å¯¹socketã€‚ä¸€ä¸ªæ˜¯å®¢æˆ·ç«¯çš„socketï¼Œå¦å¤–ä¸€ä¸ªæ˜¯æœåŠ¡ç«¯çš„socketã€‚æ¯ä¸ªsocketå¯¹åº”ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦fdã€‚è¯»å’Œå†™éƒ½æ˜¯é€šè¿‡è¿™ä¸ªfdå®Œæˆçš„ã€‚ä½†æ˜¯ä¸€ä¸ªsocketå¯¹åº”ä¸¤ä¸ªç¼“å†²åŒºã€‚ä¸€ä¸ªè¯»ç¼“å†²åŒºï¼Œå¯¹åº”æ¥æ”¶ç«¯ï¼›ä¸€ä¸ªå†™ç¼“å†²åŒºï¼Œå¯¹åº”å‘é€ç«¯ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;å†æ¬¡ç†è§£ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.1065830721003134&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/2tk5ianItRl8W5MBSAVicGgJ8bmicz4wgcviciaPLFGAQGggcw638lYSn0v8wJqv6icWXkaREMVl6LoyaL0leoxKKjMQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;638&quot;/&gt;&lt;/p&gt;&lt;p&gt;ä¸Šé¢æ˜¯TCPä¸‹é€šä¿¡è°ƒç”¨Linux Socket APIæµç¨‹ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æœåŠ¡ç«¯ä¸€å¯åŠ¨ï¼Œå°±è¦å…ˆè°ƒç”¨socketå‡½æ•°å»ºç«‹socketï¼Œsocketä¼šè°ƒç”¨bindå‡½æ•°ç»‘å®šå¯¹åº”çš„IPå’Œç«¯å£ã€‚ä¹‹ålistenå‡½æ•°çš„ä½œç”¨å¯èƒ½å’Œå¤§å¤šæ•°äººç†è§£éƒ½ä¸åŒï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯è®¾ç½®ç›‘å¬ä¸Šé™ã€‚å°±æ˜¯å…è®¸å¤šå°‘ä¸ªå®¢æˆ·ç«¯è¿›è¡Œè¿æ¥ã€‚acceptå‡½æ•°æ˜¯ä»¥ç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚çš„ã€‚è°ƒç”¨äº†è¿™ä¸ªå‡½æ•°å°±ç›¸å½“äºå’±ä»¬å¹³æ—¶çš„thriftæœåŠ¡ç«¯å¯åŠ¨äº†ã€‚å…·å¤‡äº†ä¸‰æ¬¡æ¡æ‰‹çš„æ¡ä»¶ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¿™æ—¶å€™å®¢æˆ·ç«¯ä¹Ÿå»ºç«‹ä¸€ä¸ªå¥—æ¥å­—ï¼Œè°ƒç”¨connectå‡½æ•°æ‰§è¡Œä¸‰æ¬¡æ¡æ‰‹ã€‚æˆåŠŸåï¼ŒæœåŠ¡ç«¯è°ƒç”¨acceptå‡½æ•°æ–°å»ºç«‹ä¸€ä¸ªsocketä¸“é—¨ç”¨æ¥å’Œè¿™ä¸ªå®¢æˆ·ç«¯è¿›è¡Œé€šä¿¡ã€‚ä¹‹å‰çš„è€socketç”¨æ¥ç›‘å¬åˆ«çš„è¯·æ±‚ã€‚è¿™é‡Œæ³¨æ„ï¼šå®¢æˆ·ç«¯å¥—æ¥å­—å’ŒæœåŠ¡ç«¯å¥—æ¥å­—æ˜¯æˆå¯¹å‡ºç°ã€‚ä½†æ˜¯è¿™é‡Œä¸€å…±å‡ºç°äº†ä¸‰ä¸ªå¥—æ¥å­—ã€‚å› ä¸ºå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯æ­£å¼æ¡æ‰‹æ—¶ï¼ŒæœåŠ¡ç«¯ä½¿ç”¨çš„æ˜¯æ–°å»ºçš„socketæ¥å¤„ç†è¿™ä¸ªå®¢æˆ·ç«¯çš„é€šä¿¡ã€‚å› ä¸ºè€çš„socketè¿˜éœ€è¦ç›‘å¬æ˜¯å¦æœ‰å…¶ä»–çš„å®¢æˆ·ç«¯ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ¥ä¸‹æ¥çš„sendã€recvå’Œwriteå‡½æ•°éƒ½æ˜¯å¤„ç†æ•°æ®çš„ï¼Œè¿™é‡Œä¸è¿‡å¤šè§£é‡Šã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å®¢æˆ·ç«¯ä½¿ç”¨closeå‡½æ•°è¿›è¡Œå››æ¬¡æŒ¥æ‰‹å…³é—­ä¸æœåŠ¡ç«¯çš„è¿æ¥ã€‚æœåŠ¡ç«¯ä½¿ç”¨recvå‡½æ•°æ¥æ”¶åˆ°äº†å…³é—­è¯·æ±‚æ‰§è¡ŒæŒ¥æ‰‹ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;ç¨‹åºç†è§£&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;Linux Socket APIå¾ˆå¤šè¯­è¨€éƒ½æœ‰å¯¹å®ƒçš„å®ç°ï¼Œå·®ä¸å¤šçš„ã€‚è¿™é‡Œå› ä¸ºæˆ‘æœ¬äººæ›´ç†Ÿæ‚‰Javaï¼Œè¿™é‡Œç”¨Javaåšè¯´æ˜ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;pre&gt;&lt;span&gt;public void &lt;/span&gt;&lt;span&gt;client&lt;/span&gt;() &lt;span&gt;throws &lt;/span&gt;Exception {&lt;br/&gt;    &lt;span&gt;int &lt;/span&gt;i = &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;&lt;br/&gt;    while &lt;/span&gt;(i &amp;lt;= &lt;span&gt;2&lt;/span&gt;) {&lt;br/&gt;        Socket socket = &lt;span&gt;new &lt;/span&gt;Socket(&lt;span&gt;&quot;127.0.0.1&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;520&lt;/span&gt;)&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;å‘æœåŠ¡å™¨ç«¯ç¬¬ä¸€æ¬¡å‘é€å­—ç¬¦ä¸²&lt;br/&gt;               &lt;/span&gt;OutputStream netOut = socket.getOutputStream()&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;InputStream io = socket.getInputStream()&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;String msg = i == &lt;span&gt;1 &lt;/span&gt;? &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;å®¢æˆ·ç«¯ï¼šæˆ‘çŸ¥é“æˆ‘æ˜¯ä»»æ€§å¤ªä»»æ€§ï¼Œä¼¤é€äº†ä½ çš„å¿ƒã€‚æˆ‘æ˜¯è¿½æ¢¦çš„äººï¼Œè¿½ä¸€ç”Ÿçš„ç¼˜åˆ†ã€‚&lt;/span&gt;&lt;span&gt;&quot; &lt;/span&gt;:&lt;br/&gt;                &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;å®¢æˆ·ç«¯ï¼šæˆ‘æ„¿æ„å«ç»™ä½ ï¼Œä½ å´ä¸èƒ½ç­”åº”æˆ‘ã€‚&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;System.&lt;span&gt;out&lt;/span&gt;.println(msg)&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;netOut.write(msg.getBytes())&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;netOut.flush()&lt;span&gt;;&lt;br/&gt;        byte&lt;/span&gt;[] bytes = &lt;span&gt;new byte&lt;/span&gt;[i == &lt;span&gt;1 &lt;/span&gt;? &lt;span&gt;104 &lt;/span&gt;: &lt;span&gt;64&lt;/span&gt;]&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;io.read(bytes)&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;String response = &lt;span&gt;new &lt;/span&gt;String(bytes)&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;System.&lt;span&gt;out&lt;/span&gt;.println(response)&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;netOut.close()&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;io.close()&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;socket.close()&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;i++&lt;span&gt;;&lt;br/&gt;    &lt;/span&gt;}&lt;br/&gt;}&lt;/pre&gt;&lt;p&gt;å¦‚æœä¸å¼€æœåŠ¡ç«¯ï¼Œåªæ‰§è¡Œå®¢æˆ·ç«¯ä»£ç ï¼Œåˆ™æŠ¥å¼‚å¸¸ï¼š&lt;/p&gt;&lt;p&gt;java.net.ConnectException: Connection refused: connect&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å’±ä»¬æ¥çœ‹è¿™ä¸ªä»£ç åšäº†ä»€ä¹ˆï¼šå¯åŠ¨å®¢æˆ·ç«¯ï¼Œä¸æœåŠ¡ç«¯å»ºç«‹è¿æ¥ï¼Œç†è®ºä¸Šè¦è°ƒç”¨linuxçš„socketå’Œconnectä¸¤ä¸ªå‡½æ•°ã€‚è¿™ä¸ªåŠ¨ä½œåœ¨new Socketå®ä¾‹åŒ–çš„æ—¶å€™æ˜¯åšäº†çš„ï¼š&lt;/p&gt;&lt;pre&gt;&lt;span&gt;private &lt;/span&gt;&lt;span&gt;Socket&lt;/span&gt;(SocketAddress address&lt;span&gt;, &lt;/span&gt;SocketAddress localAddr&lt;span&gt;,&lt;br/&gt;               boolean &lt;/span&gt;stream) &lt;span&gt;throws &lt;/span&gt;IOException {&lt;br/&gt;    setImpl()&lt;span&gt;;&lt;br/&gt;    &lt;/span&gt;&lt;span&gt;// backward compatibility&lt;br/&gt;    &lt;/span&gt;&lt;span&gt;if &lt;/span&gt;(address == &lt;span&gt;null&lt;/span&gt;)&lt;br/&gt;        &lt;span&gt;throw new &lt;/span&gt;NullPointerException()&lt;span&gt;;&lt;br/&gt;    try &lt;/span&gt;{&lt;br/&gt;        createImpl(stream)&lt;span&gt;;&lt;br/&gt;        if &lt;/span&gt;(localAddr != &lt;span&gt;null&lt;/span&gt;)&lt;br/&gt;            bind(localAddr)&lt;span&gt;;&lt;br/&gt;&lt;/span&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;            connect(address);&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;} &lt;span&gt;catch &lt;/span&gt;(IOException | IllegalArgumentException | SecurityException e) {&lt;/p&gt;&lt;span&gt;try &lt;/span&gt;{&lt;br/&gt;            close()&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;} &lt;span&gt;catch &lt;/span&gt;(IOException ce) {&lt;br/&gt;            e.addSuppressed(ce)&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;}&lt;br/&gt;        &lt;span&gt;throw &lt;/span&gt;e&lt;span&gt;;&lt;br/&gt;    &lt;/span&gt;}&lt;br/&gt;}&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ç„¶åå’±ä»¬çœ‹æœåŠ¡ç«¯ä»£ç ï¼š&lt;/p&gt;&lt;pre&gt;&lt;span&gt;@Test&lt;br/&gt;&lt;/span&gt;&lt;span&gt;public void &lt;/span&gt;&lt;span&gt;server&lt;/span&gt;() &lt;span&gt;throws &lt;/span&gt;Exception {&lt;br/&gt;    ServerSocket serverSocket = &lt;span&gt;new &lt;/span&gt;ServerSocket(&lt;span&gt;520&lt;/span&gt;)&lt;span&gt;;&lt;br/&gt;    int &lt;/span&gt;i = &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;&lt;br/&gt;    while &lt;/span&gt;(i &amp;lt;= &lt;span&gt;2&lt;/span&gt;) {&lt;br/&gt;        String msg = i == &lt;span&gt;1 &lt;/span&gt;? &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;æœåŠ¡ç«¯ï¼šæˆ‘çŸ¥é“ä½ æ˜¯ä»»æ€§å¤ªä»»æ€§ï¼Œä¼¤é€äº†æˆ‘çš„å¿ƒã€‚åŒæ˜¯è¿½æ¢¦çš„äººï¼Œéš¾èˆéš¾åˆ†ã€‚&lt;/span&gt;&lt;span&gt;&quot; &lt;/span&gt;:&lt;br/&gt;                &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;æœåŠ¡ç«¯ï¼šä½ æ„¿æ„å«ç»™ä½ ï¼Œæˆ‘å´ä¸èƒ½å‘ä½ æ‰¿è¯ºã€‚&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;Socket socket = serverSocket.accept()&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;InputStream io = socket.getInputStream()&lt;span&gt;;&lt;br/&gt;        byte&lt;/span&gt;[] bytes = &lt;span&gt;new byte&lt;/span&gt;[i == &lt;span&gt;1 &lt;/span&gt;? &lt;span&gt;112 &lt;/span&gt;: &lt;span&gt;64&lt;/span&gt;]&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;io.read(bytes)&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;System.&lt;span&gt;out&lt;/span&gt;.println(&lt;span&gt;new &lt;/span&gt;String(bytes))&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;OutputStream os = socket.getOutputStream()&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;System.&lt;span&gt;out&lt;/span&gt;.println(msg)&lt;span&gt;;&lt;br/&gt;        byte&lt;/span&gt;[] outBytes = msg.getBytes()&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;os.write(outBytes)&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;os.flush()&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;os.close()&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;io.close()&lt;span&gt;;&lt;br/&gt;        &lt;/span&gt;i++&lt;span&gt;;&lt;br/&gt;    &lt;/span&gt;}&lt;br/&gt;}&lt;/pre&gt;&lt;p&gt;å¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰å¯åŠ¨ï¼Œåªå¯åŠ¨æœåŠ¡ç«¯ã€‚ä¸Šé¢æåˆ°ä¼šè¿›å…¥ç›‘å¬çŠ¶æ€ï¼Œè¿™é‡Œç¨‹åºç”¨çš„æ˜¯æœ€ç®€å•çš„é˜»å¡å¼ç›‘å¬ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.6846950517836594&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRl8W5MBSAVicGgJ8bmicz4wgcvcG29UPkia2TGzesWvXK80abpW4M57ahDGF0icicx1pQVViaGUhDZQlOgmA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;869&quot;/&gt;&lt;/p&gt;&lt;p&gt;å¦‚ä¸Šæ‰€ç¤ºï¼Œåœ¨æ‰§è¡Œacceptæ–¹æ³•æ—¶ï¼Œserverå¼€å§‹æ‰“åœˆåœˆï¼Œé˜»å¡äº†ã€‚å®¢æˆ·ç«¯å¯åŠ¨åï¼Œserverè¿›è¡Œåˆ°äº†ä¸‹é¢è¯»å–æ•°æ®çš„é˜¶æ®µï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.551094890510949&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRl8W5MBSAVicGgJ8bmicz4wgcvLicTXPJPZibibPp6p0pNibTKDoNXR0fzuUgHznDhJkQvMBVQKn0GK6q5CQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1096&quot;/&gt;&lt;/p&gt;&lt;p&gt;æ‰§è¡Œå®Œåå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éƒ½æ­£å¸¸è¿”å›ç»“æœï¼š&lt;/p&gt;&lt;p&gt;å®¢æˆ·ç«¯ï¼šæˆ‘çŸ¥é“æˆ‘æ˜¯ä»»æ€§å¤ªä»»æ€§ï¼Œä¼¤é€äº†ä½ çš„å¿ƒã€‚æˆ‘æ˜¯è¿½æ¢¦çš„äººï¼Œè¿½ä¸€ç”Ÿçš„ç¼˜åˆ†ã€‚Â  Â Â &lt;/p&gt;&lt;p&gt;æœåŠ¡ç«¯ï¼šæˆ‘çŸ¥é“ä½ æ˜¯ä»»æ€§å¤ªä»»æ€§ï¼Œä¼¤é€äº†æˆ‘çš„å¿ƒã€‚åŒæ˜¯è¿½æ¢¦çš„äººï¼Œéš¾èˆéš¾åˆ†ã€‚&lt;/p&gt;&lt;p&gt;å®¢æˆ·ç«¯ï¼šæˆ‘æ„¿æ„å«ç»™ä½ ï¼Œä½ å´ä¸èƒ½ç­”åº”æˆ‘ã€‚Â  Â  Â  Â &lt;/p&gt;&lt;p&gt;æœåŠ¡ç«¯ï¼šä½ æ„¿æ„å«ç»™ä½ ï¼Œæˆ‘å´ä¸èƒ½å‘ä½ æ‰¿è¯ºã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;pre&gt;&lt;span&gt;/**&lt;br/&gt; * Create a server with the specified port, listen backlog, and&lt;br/&gt; * local IP address to bind to.  The &lt;/span&gt;&lt;span&gt;&amp;lt;i&amp;gt;&lt;/span&gt;&lt;span&gt;bindAddr&lt;/span&gt;&lt;span&gt;&amp;lt;/i&amp;gt; &lt;/span&gt;&lt;span&gt;argument&lt;br/&gt; * can be used on a multi-homed host for a ServerSocket that&lt;br/&gt; * will only accept connect requests to one of its addresses.&lt;br/&gt; * If &lt;/span&gt;&lt;span&gt;&amp;lt;i&amp;gt;&lt;/span&gt;&lt;span&gt;bindAddr&lt;/span&gt;&lt;span&gt;&amp;lt;/i&amp;gt; &lt;/span&gt;&lt;span&gt;is null, it will default accepting&lt;br/&gt; * connections on any/all local addresses.&lt;br/&gt; * The port must be between 0 and 65535, inclusive.&lt;br/&gt; * A port number of {&lt;/span&gt;&lt;span&gt;@code &lt;/span&gt;&lt;span&gt;0} means that the port number is&lt;br/&gt; * automatically allocated, typically from an ephemeral port range.&lt;br/&gt; * This port number can then be retrieved by calling&lt;br/&gt; * {&lt;/span&gt;&lt;span&gt;@link &lt;/span&gt;&lt;span&gt;#getLocalPort getLocalPort}.&lt;br/&gt; *&lt;br/&gt; * &lt;/span&gt;&lt;span&gt;&amp;lt;P&amp;gt;&lt;/span&gt;&lt;span&gt;If there is a security manager, this method&lt;br/&gt; * calls its {&lt;/span&gt;&lt;span&gt;@code &lt;/span&gt;&lt;span&gt;checkListen} method&lt;br/&gt; * with the {&lt;/span&gt;&lt;span&gt;@code &lt;/span&gt;&lt;span&gt;port} argument&lt;br/&gt; * as its argument to ensure the operation is allowed.&lt;br/&gt; * This could result in a SecurityException.&lt;br/&gt; *&lt;br/&gt; * The {&lt;/span&gt;&lt;span&gt;@code &lt;/span&gt;&lt;span&gt;backlog} argument is the requested maximum number of&lt;br/&gt; * pending connections on the socket. Its exact semantics are implementation&lt;br/&gt; * specific. In particular, an implementation may impose a maximum length&lt;br/&gt; * or may choose to ignore the parameter altogther. The value provided&lt;br/&gt; * should be greater than {&lt;/span&gt;&lt;span&gt;@code &lt;/span&gt;&lt;span&gt;0}. If it is less than or equal to&lt;br/&gt; * {&lt;/span&gt;&lt;span&gt;@code &lt;/span&gt;&lt;span&gt;0}, then an implementation specific default will be used.&lt;br/&gt; * &lt;/span&gt;&lt;span&gt;&amp;lt;P&amp;gt;&lt;br/&gt; &lt;/span&gt;&lt;span&gt;* &lt;/span&gt;&lt;span&gt;@param &lt;/span&gt;&lt;span&gt;port  &lt;/span&gt;&lt;span&gt;the port number, or {&lt;/span&gt;&lt;span&gt;@code &lt;/span&gt;&lt;span&gt;0} to use a port&lt;br/&gt; *              number that is automatically allocated.&lt;br/&gt; * &lt;/span&gt;&lt;span&gt;@param &lt;/span&gt;&lt;span&gt;backlog &lt;/span&gt;&lt;span&gt;requested maximum length of the queue of incoming&lt;br/&gt; *                connections.&lt;br/&gt; * &lt;/span&gt;&lt;span&gt;@param &lt;/span&gt;&lt;span&gt;bindAddr &lt;/span&gt;&lt;span&gt;the local InetAddress the server will bind to&lt;br/&gt; *&lt;br/&gt; * &lt;/span&gt;&lt;span&gt;@throws  &lt;/span&gt;&lt;span&gt;SecurityException if a security manager exists and&lt;br/&gt; * its {&lt;/span&gt;&lt;span&gt;@code &lt;/span&gt;&lt;span&gt;checkListen} method doesn&#x27;t allow the operation.&lt;br/&gt; *&lt;br/&gt; * &lt;/span&gt;&lt;span&gt;@throws  &lt;/span&gt;&lt;span&gt;IOException if an I/O error occurs when opening the socket.&lt;br/&gt; * &lt;/span&gt;&lt;span&gt;@exception  &lt;/span&gt;&lt;span&gt;IllegalArgumentException if the port parameter is outside&lt;br/&gt; *             the specified range of valid port values, which is between&lt;br/&gt; *             0 and 65535, inclusive.&lt;br/&gt; *&lt;br/&gt; * &lt;/span&gt;&lt;span&gt;@see &lt;/span&gt;&lt;span&gt;SocketOptions&lt;br/&gt; * &lt;/span&gt;&lt;span&gt;@see &lt;/span&gt;&lt;span&gt;SocketImpl&lt;br/&gt; * &lt;/span&gt;&lt;span&gt;@see &lt;/span&gt;&lt;span&gt;SecurityManager#checkListen&lt;br/&gt; * &lt;/span&gt;&lt;span&gt;@since   &lt;/span&gt;&lt;span&gt;JDK1.1&lt;br/&gt; */&lt;br/&gt;&lt;/span&gt;&lt;span&gt;public &lt;/span&gt;&lt;span&gt;ServerSocket&lt;/span&gt;(&lt;span&gt;int &lt;/span&gt;port&lt;span&gt;, int &lt;/span&gt;backlog&lt;span&gt;, &lt;/span&gt;InetAddress bindAddr) &lt;span&gt;throws &lt;/span&gt;IOException {&lt;br/&gt;    setImpl()&lt;span&gt;;&lt;br/&gt;    if &lt;/span&gt;(port &amp;lt; &lt;span&gt;0 &lt;/span&gt;|| port &amp;gt; &lt;span&gt;0xFFFF&lt;/span&gt;)&lt;br/&gt;        &lt;span&gt;throw new &lt;/span&gt;IllegalArgumentException(&lt;br/&gt;                   &lt;span&gt;&quot;Port value out of range: &quot; &lt;/span&gt;+ port)&lt;span&gt;;&lt;br/&gt;    if &lt;/span&gt;(backlog &amp;lt; &lt;span&gt;1&lt;/span&gt;)&lt;br/&gt;      backlog = &lt;span&gt;50&lt;/span&gt;&lt;span&gt;;&lt;br/&gt;    try &lt;/span&gt;{&lt;br/&gt;        bind(&lt;span&gt;new &lt;/span&gt;InetSocketAddress(bindAddr&lt;span&gt;, &lt;/span&gt;port)&lt;span&gt;, &lt;/span&gt;backlog)&lt;span&gt;;&lt;br/&gt;    &lt;/span&gt;} &lt;span&gt;catch&lt;/span&gt;(SecurityException e) {&lt;br/&gt;        close()&lt;span&gt;;&lt;br/&gt;        throw &lt;/span&gt;e&lt;span&gt;;&lt;br/&gt;    &lt;/span&gt;} &lt;span&gt;catch&lt;/span&gt;(IOException e) {&lt;br/&gt;        close()&lt;span&gt;;&lt;br/&gt;        throw &lt;/span&gt;e&lt;span&gt;;&lt;br/&gt;    &lt;/span&gt;}&lt;br/&gt;}&lt;/pre&gt;&lt;p&gt;è¿™æ˜¯æœåŠ¡ç«¯ServerSocketçš„å®ä¾‹åŒ–è¿‡ç¨‹ï¼Œæ³¨æ„ä¸€ä¸‹backlogè¿™ä¸ªå‚æ•°ï¼Œå°±æ˜¯&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247486103&amp;amp;idx=1&amp;amp;sn=943c5b7f3558df78164321806f273c8f&amp;amp;chksm=fafde039cd8a692f86f0ac97b0e1e05ece075de3e4f33e6a5ec90b269c51aed1963ff3107e0e&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ã€Šæ‡‚å¾—ä¸‰å¢ƒç•Œ-ä½¿ç”¨dubboæ—¶è¯·æ±‚è¶…è¿‡é—®é¢˜ã€‹&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;ã€Šæ‡‚å¾—ä¸‰å¢ƒç•Œ-ä½¿ç”¨dubboæ—¶è¯·æ±‚è¶…è¿‡é—®é¢˜ã€‹&lt;/a&gt;é‡Œäº§ç”Ÿé—®é¢˜çš„ç½ªé­ç¥¸é¦–ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¿™é‡Œæ³¨é‡Šå·²ç»è¯´çš„å¾ˆæ˜ç™½äº†ï¼Œæˆ‘å°±ç›´æ¥ç¿»è¯‘æˆä¸­æ–‡ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åˆ›å»ºä¸€ä¸ªæŒ‡å®šç«¯å£çš„æœåŠ¡ç«¯ï¼Œç›‘å¬backlogå’Œç»‘å®šçš„æœ¬åœ°IPã€‚bindAddrå‚æ•°å¯ä»¥ç”¨äºå¤šä¸ªç½‘ç»œç«¯å£çš„ä¸»æœºã€‚ä½†æ˜¯ä¸€ä¸ªæœåŠ¡ç«¯Socketåªèƒ½è¿æ¥åˆ°å…¶ä¸­ä¸€ä¸ªåœ°å€ã€‚å¦‚æœbindAddrå‚æ•°ä¸ºç©ºï¼Œå®ƒä¼šé»˜è®¤è¿æ¥æœ¬æœºã€‚ç«¯å£å€¼å¿…é¡»ä»‹äº0åˆ°65535ä¹‹é—´ã€‚ç«¯å£å·é€šå¸¸æ˜¯ä»ä¸´æ—¶ç«¯å£æ®µ(1024ä¹‹å)åŠ¨æ€æŒ‡å®šçš„ï¼Œå¯ä»¥é€šè¿‡getLocalPortæ–¹æ³•æŠŠå€¼å–å‡ºæ¥ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å¦‚æœæœ‰å®‰å…¨ç®¡ç†(åœ¨ä¸Šé¢ä»£ç é‡Œçœ‹ä¸åˆ°å®‰å…¨ç®¡ç†æ˜¯å› ä¸ºè¿™æ®µä»£ç åœ¨bindæ–¹æ³•é‡Œé¢)ï¼Œåˆ™ä¼šå¯¹ç«¯å£è¿›è¡Œæƒé™æ£€æŸ¥ï¼Œç¡®ä¿æ“ä½œæ˜¯å…è®¸çš„ã€‚è¿™ä¸€æ­¥å¯èƒ½å¼•å‘å®‰å…¨æ£€æŸ¥å¼‚å¸¸ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;backlogå‚æ•°æ˜¯è¿™ä¸ªsocketç­‰å¾…è¿æ¥çš„æœ€å¤§å…è®¸è¯·æ±‚é‡ã€‚å®ƒçš„ç²¾ç¡®è¯­ä¹‰å’Œå®ç°æœ‰å…³ã€‚éœ€è¦é‡ç‚¹æ¥è¯´çš„æ˜¯ï¼Œè¿™ä¸ªå®ç°å¯ä»¥é€‰æ‹©è‡ªå·±æŒ‡å®šä¸€ä¸ªä¸Šé™åŒæ—¶é€‰æ‹©å¿½ç•¥è¿™ä¸ªå‚æ•°ï¼Œå¹¶ä¸”è¿™ä¸ªè‡ªå·±æŒ‡å®šçš„ä¸Šçº¿è¿˜è¦æ¯”è¿™é‡Œçš„backlogå‚æ•°å€¼å¤§ã€‚å¦‚æœå®ç°é‡Œæ˜¯å°äºç­‰äºè¿™é‡Œçš„backlogå‚æ•°çš„ï¼Œå°±ä¼šç›´æ¥ä½¿ç”¨å®ç°çš„é»˜è®¤å€¼ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;æ€»ç»“&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;å¼ºçƒˆå»ºè®®è¯»å®Œæœ¬æ–‡å†æ¬¡è¯»ä¸€é&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247486103&amp;amp;idx=1&amp;amp;sn=943c5b7f3558df78164321806f273c8f&amp;amp;chksm=fafde039cd8a692f86f0ac97b0e1e05ece075de3e4f33e6a5ec90b269c51aed1963ff3107e0e&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ã€Šæ‡‚å¾—ä¸‰å¢ƒç•Œ-ä½¿ç”¨dubboæ—¶è¯·æ±‚è¶…è¿‡é—®é¢˜ã€‹&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;strong&gt;&lt;span&gt;ã€Šæ‡‚å¾—ä¸‰å¢ƒç•Œ-ä½¿ç”¨dubboæ—¶è¯·æ±‚è¶…è¿‡é—®é¢˜ã€‹&lt;/span&gt;&lt;/strong&gt;&lt;/a&gt;ï¼Œæ·±å…¥ç†è§£backlogé—®é¢˜ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;å†å²æ¨è&lt;/strong&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>5b14428de9374e4e268103f376c80213</guid>
<title>Grafana ä½¿ç”¨è¡¨æ ¼é¢æ¿è¿›è¡Œæ•°æ®å¯è§†åŒ–</title>
<link>https://toutiao.io/k/bwl72c9</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzU4MjQ0MTU4Ng==&amp;amp;mid=2247496372&amp;amp;idx=1&amp;amp;sn=4638066d1d61e08c49f912bbd62c7d71&amp;amp;chksm=fdbafda9cacd74bfc3ac35656ea5b17a1a58a37a03ac2b66d8ce37e7c246cb29707d85fa6a14&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;å‰é¢æˆ‘ä»¬äº†è§£äº†å¦‚ä½•ä½¿ç”¨åŸºäºæ—¶åºæ•°æ®çš„é¢æ¿&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;å‰é¢æˆ‘ä»¬äº†è§£äº†å¦‚ä½•ä½¿ç”¨åŸºäºæ—¶åºæ•°æ®çš„é¢æ¿&lt;/a&gt;ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬äº†è§£å¦å¤–ä¸€ä¸ª&lt;strong&gt;è¡¨æ ¼é¢æ¿&lt;/strong&gt;ï¼Œè¡¨æ ¼é¢æ¿å¯è§†åŒ–éå¸¸çµæ´»ï¼Œæ”¯æŒæ—¶é—´åºåˆ—å’Œè¡¨æ ¼å’ŒåŸå§‹ JSON æ•°æ®çš„å¤šç§æ¨¡å¼ï¼Œæ­¤é¢æ¿è¿˜æä¾›æ—¥æœŸæ ¼å¼ã€å€¼æ ¼å¼å’Œç€è‰²é€‰é¡¹ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100012733&quot; data-ratio=&quot;0.3382157123834887&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6CO5Zy38zWVoZUHGoicMNZTCiaxGwibukhKN0lYJibmpkNSE35vhCUJRwC6A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1502&quot;/&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ·»åŠ è¡¨æ ¼é¢æ¿&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥ä¸‹æ¥æˆ‘ä»¬ä»¥ç»Ÿè®¡æœåŠ¡å™¨èµ„æºä¸ºä¾‹ï¼Œå¯¹è¡¨æ ¼é¢æ¿çš„ä½¿ç”¨è¿›è¡Œè¯´æ˜ã€‚åœ¨ Dashboard ä¸­æ·»åŠ æ·»åŠ ä¸€ä¸ªç©ºçš„ Panel é¢æ¿ï¼Œè¿›å…¥é¢æ¿ç¼–è¾‘å™¨ååœ¨å³ä¾§ä¸Šæ–¹é€‰æ‹© &lt;code&gt;Table&lt;/code&gt; é¢æ¿ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100012734&quot; data-ratio=&quot;1.5665024630541873&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6CzCuqZ3mE56EVm27DmC1GwDvE731dPJiapG8YKOsJC6dDNRj9xN7JMDA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;812&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é¦–å…ˆæˆ‘ä»¬éœ€è¦å±•ç¤ºèŠ‚ç‚¹ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;code&gt;node_uname_info&lt;/code&gt; æŒ‡æ ‡æ¥è·å–ï¼Œåœ¨æŸ¥è¯¢åŒºåŸŸæ·»åŠ å¦‚ä¸‹æ‰€ç¤ºæŸ¥è¯¢è¯­å¥ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100012736&quot; data-ratio=&quot;0.6217798594847775&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6CNEIEonkzfhNNAXmpPcpsnzbNxyfN49tcibAkQIdFyR2E6oOAoYOMCHw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1708&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç„¶åå†æ·»åŠ ä¸€ä¸ªæŸ¥è¯¢æ¥è·å–èŠ‚ç‚¹è¿è¡Œæ—¶é—´çš„ç›¸å…³ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;node_boot_time_seconds&lt;/code&gt; æŒ‡æ ‡æ¥è¿›è¡Œè®¡ç®—ï¼ŒæŸ¥è¯¢è¯­å¥ä¸º &lt;code&gt;sum(time() - node_boot_time_seconds{job=&quot;node-exporter&quot;})by(instance)&lt;/code&gt;ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100012735&quot; data-ratio=&quot;0.570430733410943&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6CeOvw9Vv7NXqBTLLSLajMsJ00ZYSV6MNoiafFwDZG3XcNp2VSmf6mddw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1718&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç„¶åæˆ‘ä»¬å¯¹äºèŠ‚ç‚¹å…¶ä»–èµ„æºç»Ÿè®¡ä¹Ÿéå¸¸å…³å¿ƒï¼Œæ¯”å¦‚èŠ‚ç‚¹æ€»å†…å­˜ã€æ€» CPU æ•°ã€è´Ÿè½½ã€å¸¦å®½ç­‰ç­‰ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥åˆ†åˆ«æ·»åŠ å¦‚ä¸‹æŸ¥è¯¢ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;æ€»å†…å­˜ï¼š&lt;code&gt;node_memory_MemTotal_bytes{job=&quot;node-exporter&quot;}&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;CPU æ ¸æ•°ï¼š&lt;code&gt;count(node_cpu_seconds_total{job=&quot;node-exporter&quot;, mode=&#x27;system&#x27;}) by (instance)&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;5 åˆ†é’Ÿè´Ÿè½½ï¼š&lt;code&gt;node_load5{job=&quot;node-exporter&quot;}&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è¿æ¥æ•°ï¼š&lt;code&gt;node_netstat_Tcp_CurrEstab{job=&quot;node-exporter&quot;}&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸‹è½½å¸¦å®½ï¼š&lt;code&gt;max(rate(node_network_receive_bytes_total{job=&quot;node-exporter&quot;}[$interval])*8) by (instance)&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸Šä¼ å¸¦å®½ï¼š&lt;code&gt;max(rate(node_network_transmit_bytes_total{job=&quot;node-exporter&quot;}[$interval])*8) by (instance)&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚è¿˜æœ‰å…¶ä»–éœ€è¦å±•ç¤ºçš„ä¹Ÿå¯ä»¥ç›´æ¥æ·»åŠ æ–°çš„æŸ¥è¯¢å³å¯ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100012737&quot; data-ratio=&quot;0.6388888888888888&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6Cb1W8JKYe6qMDic5XChLtsC1Vj2gjRJWLbMr5SbZTk1DibaJUJ4HnJXPQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1728&quot;/&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;è¡¨æ ¼è½¬æ¢&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç°åœ¨æˆ‘ä»¬å°†æ‰€æœ‰éœ€è¦å±•ç¤ºçš„ä¿¡æ¯éƒ½é€šè¿‡ &lt;code&gt;Table&lt;/code&gt; å½¢å¼å±•ç¤ºå‡ºæ¥äº†ï¼Œä½†æ˜¯ç°åœ¨æœ‰ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ï¼Œå°±æ˜¯éœ€è¦å¯¹æ¯ä¸€ä¸ªæŸ¥è¯¢åˆ‡æ¢æ˜¾ç¤ºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100012741&quot; data-ratio=&quot;0.6347724620770129&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6C4k3LcL3d4JjrZdGk8NXzHO6S3MBuwY3ia25JgVia3QliaNU1sJIloARxQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1714&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ˜¾ç„¶æ˜¯éå¸¸ä¸å‹å¥½çš„æ˜¾ç¤ºæ–¹å¼ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™äº›è¡¨æ ¼å†…å®¹åˆå¹¶æˆä¸€ä¸ªè¡¨æ ¼è¿›è¡Œå±•ç¤ºï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ° Grafana çš„ &lt;code&gt;Transform&lt;/code&gt; è½¬æ¢åŠŸèƒ½äº†ï¼Œåœ¨ &lt;code&gt;Transform&lt;/code&gt; é€‰é¡¹å¡ä¸­é€‰æ‹© &lt;code&gt;Merge&lt;/code&gt; é€‰é¡¹ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100012738&quot; data-ratio=&quot;0.33993015133876603&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6CxZ8W38FyVRUxxuollia4AJ7zfXnbNULqFz8jfLgvicS5Ppznk2NPyiaibA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1718&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Merge&lt;/code&gt; è½¬æ¢å™¨å¯ä»¥åˆå¹¶å¤šä¸ªåºåˆ—æˆ–è€…å¤šä¸ªè¡¨æ ¼ä¸ºä¸€ä¸ªè¡¨æ ¼ï¼Œå…¶ä¸­å¯åˆå¹¶çš„å€¼å°†åˆå¹¶åˆ°åŒä¸€è¡Œä¸­ï¼Œç”¨äºæ˜¾ç¤ºåœ¨è¡¨æ ¼ä¸­å¯è§†åŒ–çš„å¤šä¸ªåºåˆ—ã€è¡¨æ ¼æˆ–ä¸¤è€…çš„ç»„åˆã€‚å½“æˆ‘ä»¬é€‰æ‹©äº† &lt;code&gt;Merge&lt;/code&gt; è½¬æ¢å™¨è¿‡åå°±ä¼šå°†ä¸Šé¢çš„å¤šä¸ªæŸ¥è¯¢ç»“æœåˆå¹¶æˆä¸€ä¸ªè¡¨æ ¼ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100012739&quot; data-ratio=&quot;0.43037974683544306&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6CLozIpdCgkEXuXiaZBe8NR4NEgKGiaZvROnNBK5uwWTmhq7tQ5nDxiaLFQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1738&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†å…¶å®åˆå¹¶åçš„è¡¨æ ¼æ•°æ®æœ‰ä¸€äº›åœ°æ–¹æ²¡æœ‰æ˜¾ç¤ºï¼Œè¿™æ˜¯å› ä¸ºæˆ‘ä»¬æŸ¥è¯¢çš„ç»“æœå®é™…ä¸Šæ˜¯åŒ…å« &lt;code&gt;__name__&lt;/code&gt; è¿™ä¸ªæ ‡ç­¾çš„ï¼Œåœ¨åˆå¹¶çš„æ—¶å€™ä¼šé€ æˆæ•°æ®ä¸¢å¤±ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰çš„æŸ¥è¯¢è¯­å¥åé¢æ·»åŠ ä¸Šä¸€ä¸ª &lt;code&gt;- 0&lt;/code&gt; æ¥å»æ‰è¿™ä¸ªæ ‡ç­¾ï¼Œè¿™æ ·åˆå¹¶çš„æ—¶å€™å°±ä¸ä¼šä¸¢å¤±æ•°æ®äº†ã€‚æ¯”å¦‚æŸ¥è¯¢ä¸»æœºä¿¡æ¯çš„è¯­å¥å˜æˆ &lt;code&gt;node_uname_info{job=&quot;node-exporter&quot;} - 0&lt;/code&gt;ï¼Œå…¶ä»–çš„è¯­å¥ä¹Ÿéƒ½åŠ ä¸Š &lt;code&gt;- 0&lt;/code&gt; è¿™ä¸ªæ“ä½œã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100012740&quot; data-ratio=&quot;0.5854503464203233&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6CcT0B4micB1rMAcPqvB0kjo44ejmJqsID3KbliciaBZr4ibeg9LMLbQTaeQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1732&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ•°æ®è™½ç„¶æ­£ç¡®äº†ï¼Œä½†æ˜¯è¡¨å¤´å´çœ‹ä¸å‡ºæ¥æ˜¯è¡¨è¾¾çš„ä»€ä¹ˆæ„ä¹‰ï¼Œæœ‰çš„åˆ—è¿˜æ˜¯ä¸éœ€è¦çš„ï¼Œè¿™ä¸ªæ—¶å€™åŒæ ·ä¹Ÿè¦ç”¨åˆ° &lt;code&gt;Transform&lt;/code&gt; è½¬æ¢å™¨äº†ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„æ˜¯ &lt;code&gt;Organize fields&lt;/code&gt; è½¬æ¢å™¨ï¼Œè¯¥è½¬æ¢å™¨å…è®¸ç”¨æˆ·é‡æ–°æ’åºã€éšè—æˆ–é‡å‘½åå­—æ®µæˆ–è€…åˆ—ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100012742&quot; data-ratio=&quot;0.6477404403244496&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6CNLibib1cSIWvuqLztYclBoYaWYZF163OM6micNs3vXzBe25GZYTVRQrsA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1726&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œæˆ‘ä»¬å°†ä¸éœ€è¦çš„ä¸€äº›åˆ—éšè—æ‰äº†ï¼Œå°†è¡¨å¤´è¿›è¡Œäº†é‡å‘½åã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å±æ€§è¦†ç›–&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šé¢æˆ‘ä»¬å°†æŸ¥è¯¢çš„æ•°æ®ç»“æœç”¨ä¸€ä¸ªè¡¨æ ¼å±•ç¤ºå‡ºæ¥äº†ï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬çš„æ•°æ®éƒ½æ˜¯ç›´æ¥çš„ä¸€ä¸ªç»“æœï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œè½¬æ¢åŠ ä¸Šæˆ‘ä»¬çš„å•ä½ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯”å¦‚å¯¹äº&lt;strong&gt;è¿è¡Œæ—¶é—´&lt;/strong&gt;è¿™ä¸€åˆ—ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ è¦†ç›–ï¼Œè®¾ç½®ä¸€ä¸ª &lt;code&gt;seconds (s)&lt;/code&gt; ç±»å‹çš„å•ä½ï¼Œç„¶åä¼šæ ¹æ®æˆ‘ä»¬çš„ç»“æœè¿›è¡Œè‡ªåŠ¨è½¬æ¢ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-fileid=&quot;100012743&quot; data-ratio=&quot;0.4248878923766816&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6CiclT3SXdZAC8D6x8YW3Et3We5fSqDFCRJjyOzoxkyhdkXzCHPW0fnbg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1784&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŒæ ·å¯¹æ€»å†…å­˜è¿™ä¸€åˆ—çš„æ•°æ®ç»“æœè¿›è¡Œè¦†ç›–æ·»åŠ  &lt;code&gt;bytes(IEC)&lt;/code&gt; ç±»å‹çš„å•ä½ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-fileid=&quot;100012745&quot; data-ratio=&quot;0.6506746626686657&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6CicgnuOBgufcoZXt7D2Wb9icxbEatNaaia3X8uVr9l1194hoMvrI65syow/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1334&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤å¤–åœ¨å®šåˆ¶æŸåˆ—æ•°æ®çš„æ˜¾ç¤ºæ•ˆæœçš„æ—¶å€™æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºå…¶é…ç½®èƒŒæ™¯é¢œè‰²ï¼Œåªéœ€è¦è®¾ç½® &lt;code&gt;Cell display mode&lt;/code&gt; è¡¨æ ¼æ¨¡å¼ï¼Œè¯¥å±æ€§å¯ä»¥é…ç½®æ–‡æœ¬é¢œè‰²ã€èƒŒæ™¯ã€æŒ‰ç…§ gauge è¿›è¡Œæ˜¾ç¤ºç­‰æ–¹å¼ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-fileid=&quot;100012747&quot; data-ratio=&quot;0.5464566929133858&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6CGTQ1R2j4k8jlwsibz9jmiaMdNicAH19nNxolrd4Kvf3bsR9jHMbDrTrTw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2540&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯”å¦‚æˆ‘ä»¬å¯ä»¥ä¸º &lt;code&gt;CPUä½¿ç”¨ç‡&lt;/code&gt; ä¸ &lt;code&gt;å†…å­˜ä½¿ç”¨ç‡&lt;/code&gt; é…ç½®æ˜¾ç¤ºæ¨¡å¼ä¸º &lt;code&gt;LCD gauge&lt;/code&gt;ï¼Œæ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100012744&quot; data-ratio=&quot;0.6388888888888888&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6C8mtiaNV6cWiaicnibx5pk65ZjA0MAOF3u3G6RTKWL2dNnEia9FWRLzVxtDw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1440&quot;/&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ·»åŠ æ˜¾ç¤ºè¡Œ&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬è¿˜å¯ä»¥å®šä¹‰ä¸€ä¸ª &lt;code&gt;total&lt;/code&gt; å‚æ•°æ¥è¡¨ç¤ºç›‘æ§çš„ä¸»æœºæ€»æ•°ï¼Œä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œçš„å‚æ•°æˆ‘ä»¬ä¸éœ€è¦å±•ç¤ºï¼Œéœ€è¦é€‰æ‹©éšè—æ–¹å¼ä¸º &lt;code&gt;Variable&lt;/code&gt;ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-fileid=&quot;100012746&quot; data-ratio=&quot;0.5441412520064205&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6CtLONic9VDV5HzG58fCLVJFpdIysv3K8fmg7J01bU8OibiaI7aol0WDF8w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2492&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å†å•ç‹¬å®šä¹‰ä¸€ä¸ªæ˜¾ç¤ºä¸»æœºåçš„å˜é‡ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æŸ¥è¯¢è¯­å¥ä¸º &lt;code&gt;node_uname_info{instance=~&quot;$host&quot;}&lt;/code&gt;ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è¿™é‡Œå…³è”çš„æ˜¯å‰é¢å®šä¹‰çš„ &lt;code&gt;$host&lt;/code&gt; è¿™ä¸ªå˜é‡ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-fileid=&quot;100012750&quot; data-ratio=&quot;0.5187296416938111&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6CwxgMpb28K4Jz6QsFnEXznHgFE529CAV7zicxROetMgNepNdTnia3qJdg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2456&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç„¶åæˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸¤ä¸ªç©ºçš„ &lt;code&gt;Row&lt;/code&gt; è¡Œï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-fileid=&quot;100012749&quot; data-ratio=&quot;0.5151898734177215&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6C3U8WfjJkqibl28RJqWjRdyqJTEMKmOJDUgWxjBXxnTcqEMlhjCjvnIA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1580&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æŠŠæˆ‘ä»¬çš„é¢æ¿æ”¾åˆ°ä¸åŒçš„è¡Œä¸­å»ï¼Œå¹¶ä¸ºæ¯ä¸€è¡Œå®šä¹‰æ˜¾ç¤ºæ ‡é¢˜ï¼Œæ ‡é¢˜é‡Œé¢å°±å¯ä»¥ä½¿ç”¨å‰é¢å®šä¹‰çš„å˜é‡ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100012748&quot; data-ratio=&quot;0.5737704918032787&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6CddAvwmibF7ibpKHaOicbllv5upqloAY6gUHJTV2qtJd6cebLasRIpwE1w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;976&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ°è¿™é‡Œæˆ‘ä»¬çš„èŠ‚ç‚¹ç›‘æ§çš„å®Œæ•´æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100012751&quot; data-ratio=&quot;0.5418295543393276&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7Ytske10LJuQSPIoy5Yu8Q6C2SYc1nPPOG3ia40jlEZmlkTCtbRpfoiaSo2n1Dps2ibzjeQZmxZfiaOPKg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2558&quot;/&gt;&lt;/figure&gt;&lt;/section&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzU4MjQ0MTU4Ng==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/z9BgVMEm7YtTw2oONBkwaiaM9hBxUj6yRLDEw8rSSxR8wWZFLjjXWpmGq5LNDlEAn4v9lSALDiaGfC4MyPZwL95g/0?wx_fmt=png&quot; data-nickname=&quot;k8sæŠ€æœ¯åœˆ&quot; data-alias=&quot;kube100&quot; data-signature=&quot;ä¸“æ³¨å®¹å™¨ã€ä¸“æ³¨ kubernetes æŠ€æœ¯......&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;
                &lt;/div&gt;

                

                



                
                &lt;div class=&quot;reward_qrcode_area reward_area tc&quot; id=&quot;js_reward_qrcode&quot;&gt;
                                &lt;p class=&quot;tips_global&quot; aria-hidden=&quot;true&quot; id=&quot;js_a11y_reward_qr_title&quot;&gt;Long-press QR code to transfer me a reward&lt;/p&gt;
                                                                &lt;p role=&quot;option&quot; aria-labelledby=&quot;js_a11y_reward_qr_word js_a11y_comma js_a11y_reward_qr_title js_a11y_reward_qr_money&quot; aria-describedby=&quot;js_a11y_reward_qr_tips &quot; class=&quot;reward_tips&quot; id=&quot;js_a11y_reward_qr_word&quot;/&gt;
                                &lt;span class=&quot;reward_qrcode_img_wrp&quot;&gt;&lt;img alt=&quot;èµèµäºŒç»´ç &quot; class=&quot;reward_qrcode_img&quot; id=&quot;js_reward_qrcode_img&quot;/&gt;&lt;/span&gt;
                                &lt;p aria-hidden=&quot;true&quot; id=&quot;js_a11y_reward_qr_tips&quot; class=&quot;tips_global&quot;&gt;As required by Apple&#x27;s new policy, the Reward feature has been disabled on Weixin for iOS. You can still reward an Official Account by transferring money via QR code.&lt;/p&gt;
                            &lt;/div&gt;
                                                                            
                              
            &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>1ee902199244f932a50844522590ee84</guid>
<title>å°¤é›¨æºªæ¨èç¥å™¨ ni ï¼Œèƒ½æ›¿ä»£ npm/yarn/pnpm ï¼Ÿç®€å•å¥½ç”¨</title>
<link>https://toutiao.io/k/1whgw03</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;1. å‰è¨€&lt;/span&gt;&lt;br/&gt;&lt;span/&gt;&lt;/h1&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzA5MjQwMzQyNw==&amp;amp;mid=2650756550&amp;amp;idx=1&amp;amp;sn=9acc5e30325963e455f53ec2f64c1fdd&amp;amp;chksm=8866564abf11df5c41307dba3eb84e8e14de900e1b3500aaebe802aff05b0ba2c24e4690516b&amp;amp;token=917686367&amp;amp;lang=zh_CN&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;è‹¥å·&lt;/a&gt;ã€‚æœ€è¿‘ç»„ç»‡äº†&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzA5MjQwMzQyNw==&amp;amp;mid=2650756550&amp;amp;idx=1&amp;amp;sn=9acc5e30325963e455f53ec2f64c1fdd&amp;amp;chksm=8866564abf11df5c41307dba3eb84e8e14de900e1b3500aaebe802aff05b0ba2c24e4690516b&amp;amp;token=917686367&amp;amp;lang=zh_CN&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;strong&gt;æºç å…±è¯»æ´»åŠ¨&lt;/strong&gt;&lt;/a&gt;ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥åŠ æˆ‘å¾®ä¿¡ &lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzA5MjQwMzQyNw==&amp;amp;mid=2650756550&amp;amp;idx=1&amp;amp;sn=9acc5e30325963e455f53ec2f64c1fdd&amp;amp;chksm=8866564abf11df5c41307dba3eb84e8e14de900e1b3500aaebe802aff05b0ba2c24e4690516b&amp;amp;token=917686367&amp;amp;lang=zh_CN&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;ruochuan12&lt;/a&gt; å‚ä¸ï¼Œå·²è¿›è¡Œä¸¤ä¸ªå¤šæœˆï¼Œå¤§å®¶ä¸€èµ·äº¤æµå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æƒ³å­¦æºç ï¼ŒæåŠ›æ¨èä¹‹å‰æˆ‘å†™çš„&lt;a href=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzA5MjQwMzQyNw==&amp;amp;action=getalbum&amp;amp;album_id=1342211915371675650&amp;amp;scene=173&amp;amp;from_msgid=2650746362&amp;amp;from_itemidx=1&amp;amp;count=3&amp;amp;nolastread=1#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;ã€Šå­¦ä¹ æºç æ•´ä½“æ¶æ„ç³»åˆ—ã€‹&lt;/a&gt; åŒ…å«&lt;code&gt;jQuery&lt;/code&gt;ã€&lt;code&gt;underscore&lt;/code&gt;ã€&lt;code&gt;lodash&lt;/code&gt;ã€&lt;code&gt;vuex&lt;/code&gt;ã€&lt;code&gt;sentry&lt;/code&gt;ã€&lt;code&gt;axios&lt;/code&gt;ã€&lt;code&gt;redux&lt;/code&gt;ã€&lt;code&gt;koa&lt;/code&gt;ã€&lt;code&gt;vue-devtools&lt;/code&gt;ã€&lt;code&gt;vuex4&lt;/code&gt;ã€&lt;code&gt;koa-compose&lt;/code&gt;ã€&lt;code&gt;vue-next-release&lt;/code&gt;ã€&lt;code&gt;vue-this&lt;/code&gt;ã€&lt;code&gt;create-vue&lt;/code&gt;ç­‰åä½™ç¯‡æºç æ–‡ç« ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ¬æ–‡ä»“åº“ ni-analysisï¼Œæ±‚ä¸ªstar^_^&lt;/span&gt;&lt;sup&gt;[1]&lt;/sup&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ€è¿‘ç»„ç»‡äº†&lt;a href=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzA5MjQwMzQyNw==&amp;amp;action=getalbum&amp;amp;album_id=1342211915371675650&amp;amp;scene=173&amp;amp;from_msgid=2650746362&amp;amp;from_itemidx=1&amp;amp;count=3&amp;amp;nolastread=1#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;æºç å…±è¯»æ´»åŠ¨&lt;/a&gt;ï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ æºç ã€‚äºæ˜¯æœå¯»å„ç§å€¼å¾—æˆ‘ä»¬å­¦ä¹ ï¼Œä¸”ä»£ç è¡Œæ•°ä¸å¤šçš„æºç ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¹‹å‰å†™äº† &lt;code&gt;Vue3&lt;/code&gt; ç›¸å…³çš„ä¸¤ç¯‡æ–‡ç« ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ–‡ç« é‡Œéƒ½æ˜¯å†™çš„ä½¿ç”¨ &lt;code&gt;yarn&lt;/code&gt; ã€‚å‚åŠ æºç å…±è¯»çš„å°ä¼™ä¼´æŒ‰ç…§æˆ‘çš„æ–‡ç« ï¼Œå´æ‹‰å–çš„æœ€æ–°ä»“åº“ä»£ç ï¼Œå‘ç° &lt;code&gt;yarn install&lt;/code&gt; å®‰è£…ä¸äº†ä¾èµ–ï¼Œå‘æˆ‘åé¦ˆæŠ¥é”™ã€‚äºæ˜¯æˆ‘å» &lt;code&gt;githubä»“åº“&lt;/code&gt; ä¸€çœ‹ï¼Œå‘ç°å°¤é›¨æºªæŠŠ &lt;code&gt;Vue3ä»“åº“&lt;/code&gt; ä» &lt;code&gt;yarn&lt;/code&gt; æ¢æˆäº† &lt;span&gt;`pnpm`&lt;/span&gt;&lt;sup&gt;[2]&lt;/sup&gt;ã€‚&lt;span&gt;è´¡çŒ®æ–‡æ¡£&lt;/span&gt;&lt;sup&gt;[3]&lt;/sup&gt;ä¸­æœ‰ä¸€å¥è¯ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;We also recommend installing &lt;span&gt;ni&lt;/span&gt;&lt;sup&gt;[4]&lt;/sup&gt; to help switching between repos using different package managers. &lt;code&gt;ni&lt;/code&gt; also provides the handy &lt;code&gt;nr&lt;/code&gt; command which running npm scripts easier.&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;æˆ‘ä»¬è¿˜å»ºè®®å®‰è£… &lt;span&gt;ni&lt;/span&gt;&lt;sup&gt;[5]&lt;/sup&gt; ä»¥å¸®åŠ©ä½¿ç”¨ä¸åŒçš„åŒ…ç®¡ç†å™¨åœ¨ repos ä¹‹é—´åˆ‡æ¢ã€‚&lt;code&gt;ni&lt;/code&gt; è¿˜æä¾›äº†æ–¹ä¾¿çš„ &lt;code&gt;nr&lt;/code&gt; å‘½ä»¤ï¼Œå¯ä»¥æ›´è½»æ¾åœ°è¿è¡Œ npm è„šæœ¬ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ª &lt;code&gt;ni&lt;/code&gt; é¡¹ç›®æºç è™½ç„¶æ˜¯ &lt;code&gt;ts&lt;/code&gt;ï¼Œæ²¡ç”¨è¿‡ &lt;code&gt;ts&lt;/code&gt; å°ä¼™ä¼´ä¹Ÿæ˜¯å¾ˆå¥½ç†è§£çš„ï¼Œè€Œä¸”ä¸»æ–‡ä»¶å…¶å®ä¸åˆ° &lt;code&gt;100è¡Œ&lt;/code&gt;ï¼Œéå¸¸é€‚åˆæˆ‘ä»¬å­¦ä¹ ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é˜…è¯»æœ¬æ–‡ï¼Œä½ å°†å­¦åˆ°ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;1.Â å­¦ä¼šÂ niÂ ä½¿ç”¨å’Œç†è§£å…¶åŸç†&lt;br/&gt;2.Â å­¦ä¼šè°ƒè¯•å­¦ä¹ æºç &lt;br/&gt;3.Â å¯ä»¥åœ¨æ—¥å¸¸å·¥ä½œä¸­ä¹Ÿä½¿ç”¨Â ni&lt;br/&gt;4.Â ç­‰ç­‰&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2. åŸç†&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;github ä»“åº“ ni#how&lt;/span&gt;&lt;sup&gt;[6]&lt;/sup&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ni&lt;/strong&gt; å‡è®¾æ‚¨ä½¿ç”¨é”æ–‡ä»¶ï¼ˆå¹¶ä¸”æ‚¨åº”è¯¥ï¼‰&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å®ƒè¿è¡Œä¹‹å‰ï¼Œå®ƒä¼šæ£€æµ‹ä½ çš„ &lt;code&gt;yarn.lock&lt;/code&gt; / &lt;code&gt;pnpm-lock.yaml&lt;/code&gt; / &lt;code&gt;package-lock.json&lt;/code&gt; ä»¥äº†è§£å½“å‰çš„åŒ…ç®¡ç†å™¨ï¼Œå¹¶è¿è¡Œç›¸åº”çš„å‘½ä»¤ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å•ä»è¿™å¥è¯ä¸­å¯èƒ½æœ‰äº›ä¸å¥½ç†è§£ï¼Œè¿˜æ˜¯ä¸çŸ¥é“å®ƒæ˜¯ä¸ªä»€ä¹ˆã€‚æˆ‘è§£é‡Šä¸€ä¸‹ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;ä½¿ç”¨Â `ni`Â åœ¨é¡¹ç›®ä¸­å®‰è£…ä¾èµ–æ—¶ï¼š&lt;br/&gt;Â Â Â å‡è®¾ä½ çš„é¡¹ç›®ä¸­æœ‰é”æ–‡ä»¶Â `yarn.lock`ï¼Œé‚£ä¹ˆå®ƒæœ€ç»ˆä¼šæ‰§è¡ŒÂ `yarn install`Â å‘½ä»¤ã€‚&lt;br/&gt;Â Â Â å‡è®¾ä½ çš„é¡¹ç›®ä¸­æœ‰é”æ–‡ä»¶Â `pnpm-lock.yaml`ï¼Œé‚£ä¹ˆå®ƒæœ€ç»ˆä¼šæ‰§è¡ŒÂ `pnpm i`Â å‘½ä»¤ã€‚&lt;br/&gt;Â Â Â å‡è®¾ä½ çš„é¡¹ç›®ä¸­æœ‰é”æ–‡ä»¶Â `package-lock.json`ï¼Œé‚£ä¹ˆå®ƒæœ€ç»ˆä¼šæ‰§è¡ŒÂ `npm i`Â å‘½ä»¤ã€‚&lt;br/&gt;&lt;br/&gt;ä½¿ç”¨Â `niÂ -gÂ vue-cli`Â å®‰è£…å…¨å±€ä¾èµ–æ—¶&lt;br/&gt;Â Â Â Â é»˜è®¤ä½¿ç”¨Â `npmÂ iÂ -gÂ vue-cli`&lt;br/&gt;&lt;br/&gt;å½“ç„¶ä¸åªæœ‰Â `ni`Â å®‰è£…ä¾èµ–ã€‚&lt;br/&gt;Â Â Â Â è¿˜æœ‰Â `nr`Â -Â run&lt;br/&gt;Â Â Â Â `nx`Â -Â execute&lt;br/&gt;Â Â Â Â `nu`Â -Â upgrade&lt;br/&gt;Â Â Â Â `nci`Â -Â cleanÂ install&lt;br/&gt;Â Â Â Â `nrm`Â -Â remove&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æˆ‘çœ‹æºç å‘ç°ï¼š&lt;code&gt;ni&lt;/code&gt;ç›¸å…³çš„å‘½ä»¤ï¼Œéƒ½å¯ä»¥åœ¨æœ«å°¾è¿½åŠ &lt;code&gt;\?&lt;/code&gt;ï¼Œè¡¨ç¤ºåªæ‰“å°ï¼Œä¸æ˜¯çœŸæ­£æ‰§è¡Œ&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥å…¨å±€å®‰è£… &lt;code&gt;ni&lt;/code&gt; åï¼Œå¯ä»¥å°½æƒ…æµ‹è¯•ï¼Œæ¯”å¦‚ &lt;code&gt;ni \?&lt;/code&gt;ï¼Œ&lt;code&gt;nr dev --port=3000 \?&lt;/code&gt;ï¼Œå› ä¸ºæ‰“å°ï¼Œæ‰€ä»¥å¯ä»¥åœ¨å„ç§ç›®å½•ä¸‹æ‰§è¡Œï¼Œæœ‰åŠ©äºç†è§£ &lt;code&gt;ni&lt;/code&gt; æºç ã€‚æˆ‘æµ‹è¯•äº†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;503274690&quot; data-ratio=&quot;0.5979073243647235&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Mpt86EGjlpt8e6Cm8ibWHkVY5yFFHtJdqY63v42aibMSibibld3OBPvu7Ny2f8bsQ4yUvZlCUosWiclib6iaEPVOtanxw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1338&quot;/&gt;&lt;figcaption&gt;å‘½ä»¤æµ‹è¯•å›¾ç¤º&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡è®¾é¡¹ç›®ç›®å½•ä¸‹æ²¡æœ‰é”æ–‡ä»¶ï¼Œé»˜è®¤å°±ä¼šè®©ç”¨æˆ·ä»&lt;code&gt;npmã€yarnã€pnpm&lt;/code&gt;é€‰æ‹©ï¼Œç„¶åæ‰§è¡Œç›¸åº”çš„å‘½ä»¤ã€‚ä½†å¦‚æœåœ¨&lt;code&gt;~/.nirc&lt;/code&gt;æ–‡ä»¶ä¸­ï¼Œè®¾ç½®äº†å…¨å±€é»˜è®¤çš„é…ç½®ï¼Œåˆ™ä½¿ç”¨é»˜è®¤é…ç½®æ‰§è¡Œå¯¹åº”å‘½ä»¤ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;Config&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;; ~/.nirc&lt;br/&gt;&lt;br/&gt;; fallback when no lock found&lt;br/&gt;defaultAgent=npm # default &quot;prompt&quot;&lt;br/&gt;&lt;br/&gt;; for global installs&lt;br/&gt;globalAgent=npm&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾—çŸ¥è¿™ä¸ªå·¥å…·å¿…ç„¶è¦åšä¸‰ä»¶äº‹&lt;/strong&gt;ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;1.Â æ ¹æ®é”æ–‡ä»¶çŒœæµ‹ç”¨å“ªä¸ªåŒ…ç®¡ç†å™¨Â npm/yarn/pnpmÂ &lt;br/&gt;2.Â æŠ¹å¹³ä¸åŒçš„åŒ…ç®¡ç†å™¨çš„å‘½ä»¤å·®å¼‚&lt;br/&gt;3.Â æœ€ç»ˆè¿è¡Œç›¸åº”çš„è„šæœ¬&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥ç€ç»§ç»­çœ‹çœ‹ &lt;code&gt;README&lt;/code&gt; å…¶ä»–å‘½ä»¤çš„ä½¿ç”¨ï¼Œå°±ä¼šå¥½ç†è§£ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3. ä½¿ç”¨&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çœ‹ &lt;span&gt;ni githubæ–‡æ¡£&lt;/span&gt;&lt;sup&gt;[7]&lt;/sup&gt;ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;span&gt;npm i in a yarn project, again? F**k!&lt;/span&gt;&lt;/p&gt;&lt;p&gt;ni - use the right package manager&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¨å±€å®‰è£…ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;npmÂ iÂ -gÂ @antfu/ni&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœå…¨å±€å®‰è£…é­é‡å†²çªï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸Š &lt;code&gt;--force&lt;/code&gt; å‚æ•°å¼ºåˆ¶å®‰è£…ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸¾å‡ ä¸ªå¸¸ç”¨çš„ä¾‹å­ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;3.1 ni - install&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;ni&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â npmÂ install&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â yarnÂ install&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â pnpmÂ install&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;niÂ axios&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â npmÂ iÂ axios&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â yarnÂ addÂ axios&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â pnpmÂ iÂ axios&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;3.2 nr - run&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;nrÂ devÂ --port=3000&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â npmÂ runÂ devÂ --Â --port=3000&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â yarnÂ runÂ devÂ --port=3000&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â pnpmÂ runÂ devÂ --Â --port=3000&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;nr&lt;br/&gt;&lt;span&gt;#Â äº¤äº’å¼é€‰æ‹©å‘½ä»¤å»æ‰§è¡Œ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â interactivelyÂ selectÂ theÂ scriptÂ toÂ run&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â supportsÂ https://www.npmjs.com/package/npm-scripts-infoÂ convention&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;nrÂ -&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â é‡æ–°æ‰§è¡Œæœ€åä¸€æ¬¡æ‰§è¡Œçš„å‘½ä»¤&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â rerunÂ theÂ lastÂ command&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;3.3 nx - execute&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;nxÂ jest&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â npxÂ jest&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â yarnÂ dlxÂ jest&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â pnpmÂ dlxÂ jest&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;4. é˜…è¯»æºç å‰çš„å‡†å¤‡å·¥ä½œ&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;4.1 å…‹éš†&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#Â æ¨èå…‹éš†æˆ‘çš„ä»“åº“ï¼ˆæˆ‘çš„ä¿è¯å¯¹åº”æ–‡ç« ç‰ˆæœ¬ï¼‰&lt;/span&gt;&lt;br/&gt;gitÂ &lt;span&gt;clone&lt;/span&gt;Â https://github.com/lxchuan12/ni-analysis.git&lt;br/&gt;&lt;span&gt;cd&lt;/span&gt;Â ni-analysis/ni&lt;br/&gt;&lt;span&gt;#Â npmÂ iÂ -gÂ pnpm&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â å®‰è£…ä¾èµ–&lt;/span&gt;&lt;br/&gt;pnpmÂ i&lt;br/&gt;&lt;span&gt;#Â å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ç”¨Â ni&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æˆ–è€…å…‹éš†å®˜æ–¹ä»“åº“&lt;/span&gt;&lt;br/&gt;gitÂ &lt;span&gt;clone&lt;/span&gt;Â https://github.com/vuejs/ni.git&lt;br/&gt;&lt;span&gt;cd&lt;/span&gt;Â ni&lt;br/&gt;&lt;span&gt;#Â npmÂ iÂ -gÂ pnpm&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â å®‰è£…ä¾èµ–&lt;/span&gt;&lt;br/&gt;pnpmÂ i&lt;br/&gt;&lt;span&gt;#Â å½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥ç”¨Â ni&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¼—æ‰€å‘¨çŸ¥ï¼Œçœ‹ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå…ˆä» package.json æ–‡ä»¶å¼€å§‹çœ‹èµ·ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;4.2 package.json æ–‡ä»¶&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;&quot;name&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;@antfu/ni&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â &lt;span&gt;&quot;version&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;0.10.0&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â &lt;span&gt;&quot;description&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;UseÂ theÂ rightÂ packageÂ manager&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æš´éœ²äº†å…­ä¸ªå‘½ä»¤&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&quot;bin&quot;&lt;/span&gt;:Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;&quot;ni&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;bin/ni.js&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;&quot;nci&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;bin/nci.js&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;&quot;nr&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;bin/nr.js&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;&quot;nu&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;bin/nu.js&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;&quot;nx&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;bin/nx.js&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;&quot;nrm&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;bin/nrm.js&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â },&lt;br/&gt;Â Â Â Â &lt;span&gt;&quot;scripts&quot;&lt;/span&gt;:Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//Â çœç•¥äº†å…¶ä»–çš„å‘½ä»¤Â ç”¨Â esnoÂ æ‰§è¡ŒÂ tsÂ æ–‡ä»¶&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//Â å¯ä»¥åŠ ä¸ŠÂ ?Â ä¾¿äºè°ƒè¯•ï¼Œä¹Ÿå¯ä»¥ä¸åŠ &lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//Â æˆ–è€…æ˜¯ç»ˆç«¯Â npmÂ runÂ devÂ \?&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;&quot;dev&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;esnoÂ src/ni.tsÂ ?&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â },&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ ¹æ® &lt;code&gt;dev&lt;/code&gt; å‘½ä»¤ï¼Œæˆ‘ä»¬æ‰¾åˆ°ä¸»å…¥å£æ–‡ä»¶ &lt;code&gt;src/ni.ts&lt;/code&gt;ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;4.3 ä»æºç ä¸»å…¥å£å¼€å§‹è°ƒè¯•&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;//Â ni/src/ni.ts&lt;/span&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â {Â parseNiÂ }Â &lt;span&gt;from&lt;/span&gt;Â &lt;span&gt;&#x27;./commands&#x27;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â {Â runCliÂ }Â &lt;span&gt;from&lt;/span&gt;Â &lt;span&gt;&#x27;./runner&#x27;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;//Â æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œæ–­ç‚¹&lt;/span&gt;&lt;br/&gt;runCli(parseNi)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰¾åˆ° &lt;code&gt;ni/package.json&lt;/code&gt; çš„ &lt;code&gt;scripts&lt;/code&gt;ï¼ŒæŠŠé¼ æ ‡ç§»åŠ¨åˆ° &lt;code&gt;dev&lt;/code&gt; å‘½ä»¤ä¸Šï¼Œä¼šå‡ºç°&lt;code&gt;è¿è¡Œè„šæœ¬&lt;/code&gt;å’Œ&lt;code&gt;è°ƒè¯•è„šæœ¬&lt;/code&gt;å‘½ä»¤ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé€‰æ‹©è°ƒè¯•è„šæœ¬ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;503274692&quot; data-ratio=&quot;0.5432291666666667&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Mpt86EGjlpt8e6Cm8ibWHkVY5yFFHtJdqibPPWlkvExibVt1sLnz52j5kCUibTzP94ADJnQruDfguibWhPI4jcgNRLA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1920&quot;/&gt;&lt;figcaption&gt;VSCode è°ƒè¯•&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;503274691&quot; data-ratio=&quot;0.5331040412725709&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Mpt86EGjlpt8e6Cm8ibWHkVY5yFFHtJdq8sK0nibYB3dib6B76Y7JL54azBuFQKt9qLgo7eKU6ibAZo7SpCic1SXzTA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2326&quot;/&gt;&lt;figcaption&gt;VSCode è°ƒè¯• Node.js è¯´æ˜&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;5. ä¸»æµç¨‹ runner - runCli å‡½æ•°&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªå‡½æ•°å°±æ˜¯å¯¹ç»ˆç«¯ä¼ å…¥çš„å‘½ä»¤è¡Œå‚æ•°åšä¸€æ¬¡è§£æã€‚æœ€ç»ˆè¿˜æ˜¯æ‰§è¡Œçš„ &lt;code&gt;run&lt;/code&gt; å‡½æ•°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äº &lt;code&gt;process&lt;/code&gt; ä¸äº†è§£çš„è¯»è€…ï¼Œå¯ä»¥çœ‹&lt;span&gt;é˜®ä¸€å³°è€å¸ˆå†™çš„ process å¯¹è±¡&lt;/span&gt;&lt;sup&gt;[8]&lt;/sup&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;//Â ni/src/runner.ts&lt;/span&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â &lt;span&gt;async&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;function&lt;/span&gt;Â &lt;span&gt;runCli&lt;/span&gt;(&lt;span&gt;fn:Â Runner,Â options:Â DetectOptionsÂ =Â {}&lt;/span&gt;)Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;// process.argvï¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å½“å‰è¿›ç¨‹çš„æ‰€æœ‰å‘½ä»¤è¡Œå‚æ•°ã€‚&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â å…¶ä¸­ process.argv çš„ç¬¬ä¸€å’Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯Nodeå¯æ‰§è¡Œæ–‡ä»¶å’Œè¢«æ‰§è¡ŒJavaScriptæ–‡ä»¶çš„å®Œå…¨é™å®šçš„æ–‡ä»¶ç³»ç»Ÿè·¯å¾„ï¼Œæ— è®ºä½ æ˜¯å¦è¿™æ ·è¾“å…¥ä»–ä»¬ã€‚&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;const&lt;/span&gt;Â argsÂ =Â process.argv.slice(&lt;span&gt;2&lt;/span&gt;).filter(&lt;span&gt;Boolean&lt;/span&gt;)&lt;br/&gt;Â Â &lt;span&gt;try&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;await&lt;/span&gt;Â run(fn,Â args,Â options)&lt;br/&gt;Â Â }&lt;br/&gt;Â Â &lt;span&gt;catch&lt;/span&gt;Â (error)Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;// process.exitæ–¹æ³•ç”¨æ¥é€€å‡ºå½“å‰è¿›ç¨‹ã€‚å®ƒå¯ä»¥æ¥å—ä¸€ä¸ªæ•°å€¼å‚æ•°ï¼Œå¦‚æœå‚æ•°å¤§äº0ï¼Œè¡¨ç¤ºæ‰§è¡Œå¤±è´¥ï¼›å¦‚æœç­‰äº0è¡¨ç¤ºæ‰§è¡ŒæˆåŠŸã€‚&lt;/span&gt;&lt;br/&gt;Â Â Â Â process.exit(&lt;span&gt;1&lt;/span&gt;)&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬æ¥ç€æ¥çœ‹ï¼Œ&lt;code&gt;run&lt;/code&gt; å‡½æ•°ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;6. ä¸»æµç¨‹ runner - run ä¸»å‡½æ•°&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;è¿™ä¸ªå‡½æ•°ä¸»è¦åšäº†ä¸‰ä»¶äº‹&lt;/strong&gt;ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;1.Â æ ¹æ®é”æ–‡ä»¶çŒœæµ‹ç”¨å“ªä¸ªåŒ…ç®¡ç†å™¨Â npm/yarn/pnpmÂ -Â detectÂ å‡½æ•°&lt;br/&gt;2.Â æŠ¹å¹³ä¸åŒçš„åŒ…ç®¡ç†å™¨çš„å‘½ä»¤å·®å¼‚Â -Â parseNiÂ å‡½æ•°&lt;br/&gt;3.Â æœ€ç»ˆè¿è¡Œç›¸åº”çš„è„šæœ¬Â -Â execaÂ å·¥å…·&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;//Â ni/src/runner.ts&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//Â æºç æœ‰åˆ å‡&lt;/span&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â execaÂ &lt;span&gt;from&lt;/span&gt;Â &lt;span&gt;&#x27;execa&#x27;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;const&lt;/span&gt;Â DEBUG_SIGNÂ =Â &lt;span&gt;&#x27;?&#x27;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â &lt;span&gt;async&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;function&lt;/span&gt;Â &lt;span&gt;run&lt;/span&gt;(&lt;span&gt;fn:Â Runner,Â args:Â &lt;span&gt;string&lt;/span&gt;[],Â options:Â DetectOptionsÂ =Â {}&lt;/span&gt;)Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;//Â å‘½ä»¤å‚æ•°åŒ…å«Â é—®å·?Â åˆ™æ˜¯è°ƒè¯•æ¨¡å¼ï¼Œä¸æ‰§è¡Œè„šæœ¬&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;const&lt;/span&gt;Â debugÂ =Â args.includes(DEBUG_SIGN)&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (debug)&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â è°ƒè¯•æ¨¡å¼ä¸‹ï¼Œåˆ é™¤è¿™ä¸ªé—®å·&lt;/span&gt;&lt;br/&gt;Â Â Â Â remove(args,Â DEBUG_SIGN)&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â cwdÂ æ–¹æ³•è¿”å›è¿›ç¨‹çš„å½“å‰ç›®å½•ï¼ˆç»å¯¹è·¯å¾„ï¼‰&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;let&lt;/span&gt;Â cwdÂ =Â process.cwd()&lt;br/&gt;Â Â &lt;span&gt;let&lt;/span&gt;Â command&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â æ”¯æŒæŒ‡å®šÂ æ–‡ä»¶ç›®å½•&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â niÂ -CÂ packages/fooÂ vite&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â nrÂ -CÂ playgroundÂ dev&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (args[&lt;span&gt;0&lt;/span&gt;]Â ===Â &lt;span&gt;&#x27;-C&#x27;&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â cwdÂ =Â resolve(cwd,Â args[&lt;span&gt;1&lt;/span&gt;])&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â åˆ æ‰è¿™ä¸¤ä¸ªå‚æ•°Â -CÂ packages/foo&lt;/span&gt;&lt;br/&gt;Â Â Â Â args.splice(&lt;span&gt;0&lt;/span&gt;,Â &lt;span&gt;2&lt;/span&gt;)&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â å¦‚æœæ˜¯å…¨å±€å®‰è£…ï¼Œé‚£ä¹ˆå®ç”¨å…¨å±€çš„åŒ…ç®¡ç†å™¨&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;const&lt;/span&gt;Â isGlobalÂ =Â args.includes(&lt;span&gt;&#x27;-g&#x27;&lt;/span&gt;)&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (isGlobal)Â {&lt;br/&gt;Â Â Â Â commandÂ =Â &lt;span&gt;await&lt;/span&gt;Â fn(getGlobalAgent(),Â args)&lt;br/&gt;Â Â }&lt;br/&gt;Â Â &lt;span&gt;else&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;let&lt;/span&gt;Â agentÂ =Â &lt;span&gt;await&lt;/span&gt;Â detect({Â ...options,Â cwdÂ })Â ||Â getDefaultAgent()&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â çŒœæµ‹ä½¿ç”¨å“ªä¸ªåŒ…ç®¡ç†å™¨ï¼Œå¦‚æœæ²¡æœ‰å‘ç°é”æ–‡ä»¶ï¼Œä¼šè¿”å›Â nullï¼Œåˆ™è°ƒç”¨Â getDefaultAgentÂ å‡½æ•°ï¼Œé»˜è®¤è¿”å›æ˜¯è®©ç”¨æˆ·é€‰æ‹©Â prompt&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (agentÂ ===Â &lt;span&gt;&#x27;prompt&#x27;&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â agentÂ =Â (&lt;span&gt;await&lt;/span&gt;Â prompts({&lt;br/&gt;Â Â Â Â Â Â Â Â name:Â &lt;span&gt;&#x27;agent&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;type&lt;/span&gt;:Â &lt;span&gt;&#x27;select&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â message:Â &lt;span&gt;&#x27;ChooseÂ theÂ agent&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â choices:Â agents.map(&lt;span&gt;&lt;span&gt;value&lt;/span&gt;Â =&amp;gt;&lt;/span&gt;Â ({Â title:Â value,Â valueÂ })),&lt;br/&gt;Â Â Â Â Â Â })).agent&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (!agent)&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â è¿™é‡Œçš„Â fnÂ æ˜¯Â ä¼ å…¥è§£æä»£ç çš„å‡½æ•°&lt;/span&gt;&lt;br/&gt;Â Â Â Â commandÂ =Â &lt;span&gt;await&lt;/span&gt;Â fn(agentÂ &lt;span&gt;as&lt;/span&gt;Â Agent,Â args,Â {&lt;br/&gt;Â Â Â Â Â Â hasLock:Â &lt;span&gt;Boolean&lt;/span&gt;(agent),&lt;br/&gt;Â Â Â Â Â Â cwd,&lt;br/&gt;Â Â Â Â })&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â å¦‚æœæ²¡æœ‰å‘½ä»¤ï¼Œç›´æ¥è¿”å›ï¼Œä¸Šä¸€ä¸ªÂ runCliÂ å‡½æ•°æŠ¥é”™ï¼Œé€€å‡ºè¿›ç¨‹&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (!command)&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â å¦‚æœæ˜¯è°ƒè¯•æ¨¡å¼ï¼Œé‚£ä¹ˆç›´æ¥æ‰“å°å‡ºå‘½ä»¤ã€‚è°ƒè¯•éå¸¸æœ‰ç”¨ã€‚&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (debug)Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â eslint-disable-next-lineÂ no-console&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;console&lt;/span&gt;.log(command)&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â æœ€ç»ˆç”¨Â execaÂ æ‰§è¡Œå‘½ä»¤ï¼Œæ¯”å¦‚Â npmÂ i&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â https://github.com/sindresorhus/execa&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â ä»‹ç»ï¼šProcess execution for humans&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;await&lt;/span&gt;Â execa.command(command,Â {Â stdio:Â &lt;span&gt;&#x27;inherit&#x27;&lt;/span&gt;,Â encoding:Â &lt;span&gt;&#x27;utf-8&#x27;&lt;/span&gt;,Â cwdÂ })&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬å­¦ä¹ å®Œä¸»æµç¨‹ï¼Œæ¥ç€æ¥çœ‹ä¸¤ä¸ªé‡è¦çš„å‡½æ•°ï¼š&lt;code&gt;detect&lt;/code&gt; å‡½æ•°ã€&lt;code&gt;parseNi&lt;/code&gt; å‡½æ•°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ ¹æ®å…¥å£æˆ‘ä»¬å¯ä»¥çŸ¥é“ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;runCli(parseNi)&lt;br/&gt;&lt;br/&gt;run(fn)&lt;br/&gt;&lt;br/&gt;è¿™é‡ŒÂ fnÂ åˆ™æ˜¯Â parseNi&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;6.1 æ ¹æ®é”æ–‡ä»¶çŒœæµ‹ç”¨å“ªä¸ªåŒ…ç®¡ç†å™¨ï¼ˆnpm/yarn/pnpmï¼‰ - detect å‡½æ•°&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»£ç ç›¸å¯¹ä¸å¤šï¼Œæˆ‘å°±å…¨éƒ¨æ”¾å‡ºæ¥äº†ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;ä¸»è¦å°±åšäº†ä¸‰ä»¶äº‹æƒ…&lt;br/&gt;&lt;br/&gt;1. æ‰¾åˆ°é¡¹ç›®æ ¹è·¯å¾„ä¸‹çš„é”æ–‡ä»¶ã€‚è¿”å›å¯¹åº”çš„åŒ…ç®¡ç†å™¨Â `npm/yarn/pnpm`ã€‚&lt;br/&gt;2. å¦‚æœæ²¡æ‰¾åˆ°ï¼Œé‚£å°±è¿”å›Â `null`ã€‚&lt;br/&gt;3. å¦‚æœæ‰¾åˆ°äº†ï¼Œä½†æ˜¯ç”¨æˆ·ç”µè„‘æ²¡æœ‰è¿™ä¸ªå‘½ä»¤ï¼Œåˆ™è¯¢é—®ç”¨æˆ·æ˜¯å¦è‡ªåŠ¨å®‰è£…ã€‚&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;//Â ni/src/agents.ts&lt;/span&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â &lt;span&gt;const&lt;/span&gt;Â LOCKS:Â Record&amp;lt;string,Â Agent&amp;gt;Â =Â {&lt;br/&gt;Â Â &lt;span&gt;&#x27;pnpm-lock.yaml&#x27;&lt;/span&gt;:Â &lt;span&gt;&#x27;pnpm&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&#x27;yarn.lock&#x27;&lt;/span&gt;:Â &lt;span&gt;&#x27;yarn&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&#x27;package-lock.json&#x27;&lt;/span&gt;:Â &lt;span&gt;&#x27;npm&#x27;&lt;/span&gt;,&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;//Â ni/src/detect.ts&lt;/span&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â &lt;span&gt;async&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;function&lt;/span&gt;Â &lt;span&gt;detect&lt;/span&gt;(&lt;span&gt;{Â autoInstall,Â cwdÂ }:Â DetectOptions&lt;/span&gt;)Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;const&lt;/span&gt;Â resultÂ =Â &lt;span&gt;await&lt;/span&gt;Â findUp(&lt;span&gt;Object&lt;/span&gt;.keys(LOCKS),Â {Â cwdÂ })&lt;br/&gt;Â Â &lt;span&gt;const&lt;/span&gt;Â agentÂ =Â (resultÂ ?Â LOCKS[path.basename(result)]Â :Â &lt;span&gt;null&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (agentÂ &amp;amp;&amp;amp;Â !cmdExists(agent))Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (!autoInstall)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;console&lt;/span&gt;.warn(&lt;span&gt;`DetectedÂ &lt;span&gt;${agent}&lt;/span&gt;Â butÂ itÂ doesn&#x27;tÂ seemÂ toÂ beÂ installed.\n`&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (process.env.CI)&lt;br/&gt;Â Â Â Â Â Â Â Â process.exit(&lt;span&gt;1&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;const&lt;/span&gt;Â linkÂ =Â terminalLink(agent,Â INSTALL_PAGE[agent])&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;const&lt;/span&gt;Â {Â tryInstallÂ }Â =Â &lt;span&gt;await&lt;/span&gt;Â prompts({&lt;br/&gt;Â Â Â Â Â Â Â Â name:Â &lt;span&gt;&#x27;tryInstall&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;type&lt;/span&gt;:Â &lt;span&gt;&#x27;confirm&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â message:Â &lt;span&gt;`WouldÂ youÂ likeÂ toÂ globallyÂ installÂ &lt;span&gt;${link}&lt;/span&gt;?`&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â })&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (!tryInstall)&lt;br/&gt;Â Â Â Â Â Â Â Â process.exit(&lt;span&gt;1&lt;/span&gt;)&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;await&lt;/span&gt;Â execa.command(&lt;span&gt;`npmÂ iÂ -gÂ &lt;span&gt;${agent}&lt;/span&gt;`&lt;/span&gt;,Â {Â stdio:Â &lt;span&gt;&#x27;inherit&#x27;&lt;/span&gt;,Â cwdÂ })&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â agent&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥ç€æˆ‘ä»¬æ¥çœ‹ &lt;code&gt;parseNi&lt;/code&gt; å‡½æ•°ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;6.2 æŠ¹å¹³ä¸åŒçš„åŒ…ç®¡ç†å™¨çš„å‘½ä»¤å·®å¼‚ - parseNi å‡½æ•°&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;//Â ni/src/commands.ts&lt;/span&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â &lt;span&gt;const&lt;/span&gt;Â parseNiÂ =Â &amp;lt;Runner&amp;gt;&lt;span&gt;(&lt;span&gt;(&lt;span&gt;agent,Â args,Â ctx&lt;/span&gt;)Â =&amp;gt;Â {&lt;br/&gt;Â Â &lt;span&gt;//Â niÂ -vÂ è¾“å‡ºç‰ˆæœ¬å·&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (&lt;span&gt;args.lengthÂ ===Â 1Â &amp;amp;&amp;amp;Â args[0]Â ===Â &#x27;-v&#x27;&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â eslint-disable-next-lineÂ no-console&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;console&lt;/span&gt;.log(&lt;span&gt;`@antfu/niÂ v${version}`&lt;/span&gt;)&lt;br/&gt;Â Â Â Â process.exit(&lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (&lt;span&gt;args.lengthÂ ===Â 0&lt;/span&gt;)&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â getCommand(&lt;span&gt;agent,Â &#x27;install&#x27;&lt;/span&gt;)&lt;br/&gt;Â Â &lt;span&gt;//Â çœç•¥ä¸€äº›ä»£ç &lt;/span&gt;&lt;br/&gt;}&lt;/span&gt;)&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šè¿‡ &lt;code&gt;getCommand&lt;/code&gt; è·å–å‘½ä»¤ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;//Â ni/src/agents.ts&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//Â æœ‰åˆ å‡&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//Â ä¸€ä»½é…ç½®ï¼Œå†™ä¸ªè¿™ä¸‰ç§åŒ…ç®¡ç†å™¨ä¸­çš„å‘½ä»¤ã€‚&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â &lt;span&gt;const&lt;/span&gt;Â AGENTSÂ =Â {&lt;br/&gt;Â Â npm:Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;&#x27;install&#x27;&lt;/span&gt;:Â &lt;span&gt;&#x27;npmÂ i&#x27;&lt;/span&gt;&lt;br/&gt;Â Â },&lt;br/&gt;Â Â yarn:Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;&#x27;install&#x27;&lt;/span&gt;:Â &lt;span&gt;&#x27;yarnÂ install&#x27;&lt;/span&gt;&lt;br/&gt;Â Â },&lt;br/&gt;Â Â pnpm:Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;&#x27;install&#x27;&lt;/span&gt;:Â &lt;span&gt;&#x27;pnpmÂ i&#x27;&lt;/span&gt;&lt;br/&gt;Â Â },&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;//Â ni/src/commands.ts&lt;/span&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;function&lt;/span&gt;Â &lt;span&gt;getCommand&lt;/span&gt;(&lt;span&gt;&lt;br/&gt;Â Â agent:Â Agent,&lt;br/&gt;Â Â command:Â Command,&lt;br/&gt;Â Â args:Â &lt;span&gt;string&lt;/span&gt;[]Â =Â [],&lt;br/&gt;&lt;/span&gt;)Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;//Â åŒ…ç®¡ç†å™¨ä¸åœ¨Â AGENTSÂ ä¸­åˆ™æŠ¥é”™&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â æ¯”å¦‚Â npmÂ ä¸åœ¨&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (!(agentÂ &lt;span&gt;in&lt;/span&gt;Â AGENTS))&lt;br/&gt;Â Â Â Â &lt;span&gt;throw&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â &lt;span&gt;Error&lt;/span&gt;(&lt;span&gt;`UnsupportedÂ agentÂ &quot;&lt;span&gt;${agent}&lt;/span&gt;&quot;`&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â è·å–å‘½ä»¤Â å®‰è£…åˆ™å¯¹åº”Â npmÂ install&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;const&lt;/span&gt;Â cÂ =Â AGENTS[agent][command]&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â å¦‚æœæ˜¯å‡½æ•°ï¼Œåˆ™æ‰§è¡Œå‡½æ•°ã€‚&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (&lt;span&gt;typeof&lt;/span&gt;Â cÂ ===Â &lt;span&gt;&#x27;function&#x27;&lt;/span&gt;)&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â c(args)&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â å‘½ä»¤Â æ²¡æ‰¾åˆ°ï¼Œåˆ™æŠ¥é”™&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (!c)&lt;br/&gt;Â Â Â Â &lt;span&gt;throw&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â &lt;span&gt;Error&lt;/span&gt;(&lt;span&gt;`CommandÂ &quot;&lt;span&gt;${command}&lt;/span&gt;&quot;Â isÂ notÂ supportÂ byÂ agentÂ &quot;&lt;span&gt;${agent}&lt;/span&gt;&quot;`&lt;/span&gt;)&lt;br/&gt;Â Â &lt;span&gt;//Â æœ€ç»ˆæ‹¼æ¥æˆå‘½ä»¤å­—ç¬¦ä¸²&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â c.replace(&lt;span&gt;&#x27;{0}&#x27;&lt;/span&gt;,Â args.join(&lt;span&gt;&#x27;Â &#x27;&lt;/span&gt;)).trim()&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;6.3 æœ€ç»ˆè¿è¡Œç›¸åº”çš„è„šæœ¬&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¾—åˆ°ç›¸åº”çš„å‘½ä»¤ï¼Œæ¯”å¦‚æ˜¯ &lt;code&gt;npm i&lt;/code&gt;ï¼Œæœ€ç»ˆç”¨è¿™ä¸ªå·¥å…· &lt;span&gt;execa&lt;/span&gt;&lt;sup&gt;[9]&lt;/sup&gt; æ‰§è¡Œæœ€ç»ˆå¾—åˆ°çš„ç›¸åº”çš„è„šæœ¬ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;await&lt;/span&gt;Â execa.command(command,Â {Â stdio:Â &lt;span&gt;&#x27;inherit&#x27;&lt;/span&gt;,Â encoding:Â &lt;span&gt;&#x27;utf-8&#x27;&lt;/span&gt;,Â cwdÂ })&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;7. æ€»ç»“&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æˆ‘ä»¬çœ‹å®Œæºç ï¼Œå¯ä»¥çŸ¥é“è¿™ä¸ªç¥å™¨ &lt;code&gt;ni&lt;/code&gt; ä¸»è¦åšäº†ä¸‰ä»¶äº‹&lt;/strong&gt;ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;1.Â æ ¹æ®é”æ–‡ä»¶çŒœæµ‹ç”¨å“ªä¸ªåŒ…ç®¡ç†å™¨Â npm/yarn/pnpmÂ -Â detectÂ å‡½æ•°&lt;br/&gt;2.Â æŠ¹å¹³ä¸åŒçš„åŒ…ç®¡ç†å™¨çš„å‘½ä»¤å·®å¼‚Â -Â parseNiÂ å‡½æ•°&lt;br/&gt;3.Â æœ€ç»ˆè¿è¡Œç›¸åº”çš„è„šæœ¬Â -Â execaÂ å·¥å…·&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬æ—¥å¸¸å¼€å‘ä¸­ï¼Œå¯èƒ½å®¹æ˜“ &lt;code&gt;npm&lt;/code&gt;ã€&lt;code&gt;yarn&lt;/code&gt;ã€&lt;code&gt;pnpm&lt;/code&gt; æ··ç”¨ã€‚æœ‰äº† &lt;code&gt;ni&lt;/code&gt; åï¼Œå¯ä»¥ç”¨äºæ—¥å¸¸å¼€å‘ä½¿ç”¨ã€‚&lt;code&gt;Vue&lt;/code&gt; æ ¸å¿ƒæˆå‘˜ &lt;span&gt;Anthony Fu&lt;/span&gt;&lt;sup&gt;[10]&lt;/sup&gt; å‘ç°é—®é¢˜ï¼Œæœ€ç»ˆå¼€å‘äº†ä¸€ä¸ªå·¥å…· &lt;span&gt;ni&lt;/span&gt;&lt;sup&gt;[11]&lt;/sup&gt; è§£å†³é—®é¢˜ã€‚è€Œè¿™ç§å‘ç°é—®é¢˜ã€è§£å†³é—®é¢˜çš„èƒ½åŠ›æ­£æ˜¯æˆ‘ä»¬å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆæ‰€éœ€è¦çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦å¤–ï¼Œæˆ‘å‘ç° &lt;code&gt;Vue&lt;/code&gt; ç”Ÿæ€å¾ˆå¤šåŸºæœ¬éƒ½åˆ‡æ¢æˆäº†ä½¿ç”¨ &lt;span&gt;pnpm&lt;/span&gt;&lt;sup&gt;[12]&lt;/sup&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å› ä¸ºæ–‡ç« ä¸å®œè¿‡é•¿ï¼Œæ‰€ä»¥æœªå…¨é¢å±•å¼€è®²è¿°æºç ä¸­æ‰€æœ‰ç»†èŠ‚ã€‚éå¸¸å»ºè®®è¯»è€…æœ‹å‹æŒ‰ç…§æ–‡ä¸­æ–¹æ³•ä½¿ç”¨&lt;code&gt;VSCode&lt;/code&gt;è°ƒè¯• &lt;code&gt;ni&lt;/code&gt; æºç ã€‚&lt;strong&gt;å­¦ä¼šè°ƒè¯•æºç åï¼Œæºç å¹¶æ²¡æœ‰æƒ³è±¡ä¸­çš„é‚£ä¹ˆéš¾&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ€åå¯ä»¥æŒç»­å…³æ³¨æˆ‘@è‹¥å·ã€‚æ¬¢è¿åŠ æˆ‘å¾®ä¿¡ &lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzA5MjQwMzQyNw==&amp;amp;mid=2650756550&amp;amp;idx=1&amp;amp;sn=9acc5e30325963e455f53ec2f64c1fdd&amp;amp;chksm=8866564abf11df5c41307dba3eb84e8e14de900e1b3500aaebe802aff05b0ba2c24e4690516b&amp;amp;token=917686367&amp;amp;lang=zh_CN&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;ruochuan12&lt;/a&gt; äº¤æµï¼Œå‚ä¸ &lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzA5MjQwMzQyNw==&amp;amp;mid=2650756550&amp;amp;idx=1&amp;amp;sn=9acc5e30325963e455f53ec2f64c1fdd&amp;amp;chksm=8866564abf11df5c41307dba3eb84e8e14de900e1b3500aaebe802aff05b0ba2c24e4690516b&amp;amp;token=917686367&amp;amp;lang=zh_CN&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;æºç å…±è¯»&lt;/a&gt; æ´»åŠ¨ï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ æºç ï¼Œå…±åŒè¿›æ­¥ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å‚è€ƒèµ„æ–™&lt;/span&gt;&lt;/h3&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;span&gt;[1]&lt;/span&gt;&lt;p&gt;æœ¬æ–‡ä»“åº“ ni-analysisï¼Œæ±‚ä¸ªstar^_^: &lt;span&gt;https://github.com/lxchuan12/ni-analysis.git&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[2]&lt;/span&gt;&lt;p&gt;&lt;code&gt;pnpm&lt;/code&gt;: &lt;span&gt;https://github.com/vuejs/vue-next/pull/4766/files&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[3]&lt;/span&gt;&lt;p&gt;è´¡çŒ®æ–‡æ¡£: &lt;span&gt;https://github.com/vuejs/vue-next/blob/master/.github/contributing.md#development-setup&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[4]&lt;/span&gt;&lt;p&gt;ni: &lt;span&gt;https://github.com/antfu/ni&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[5]&lt;/span&gt;&lt;p&gt;ni: &lt;span&gt;https://github.com/antfu/ni&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[6]&lt;/span&gt;&lt;p&gt;github ä»“åº“ ni#how: &lt;span&gt;https://github.com/antfu/ni#how&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[7]&lt;/span&gt;&lt;p&gt;ni githubæ–‡æ¡£: &lt;span&gt;https://github.com/antfu/ni&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[8]&lt;/span&gt;&lt;p&gt;é˜®ä¸€å³°è€å¸ˆå†™çš„ process å¯¹è±¡: &lt;span&gt;http://javascript.ruanyifeng.com/nodejs/process.html&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[9]&lt;/span&gt;&lt;p&gt;execa: &lt;span&gt;https://github.com/sindresorhus/execa&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[10]&lt;/span&gt;&lt;p&gt;Anthony Fu: &lt;span&gt;https://antfu.me&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[11]&lt;/span&gt;&lt;p&gt;ni: &lt;span&gt;https://github.com/antfu/ni&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[12]&lt;/span&gt;&lt;p&gt;pnpm: &lt;span&gt;https://pnpm.io&lt;/span&gt;&lt;/p&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>f537bd0981d4ecd42d43c880f199c88f</guid>
<title>æ€§èƒ½ä¼˜åŒ–ï¼šé«˜æ•ˆå†…å­˜æ± çš„è®¾è®¡ä¸å®ç°</title>
<link>https://toutiao.io/k/9vo0ly6</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;Mzk0MzI4OTI1Ng==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHhKgtwWvzaYZodgfpphdA6WWKEMXTn6ImCCCuEzlPKicNBcpzBUyjK1XicWwqIwusqLGpwyyOc87JPQ/0?wx_fmt=png&quot; data-nickname=&quot;é«˜æ€§èƒ½æ¶æ„æ¢ç´¢&quot; data-alias=&quot;gaoxingnengjiagouts&quot; data-signature=&quot;85åç¨‹åºå‘˜ï¼Œç°ä»»æŸäº’è”ç½‘å…¬å¸é«˜çº§æŠ€æœ¯ä¸“å®¶ä¸€èŒã€‚åˆ†äº«ä¸€äº›å·¥ä½œä¸­çš„å¿ƒå¾—ï¼Œæ‚è°ˆã€‚èŠèŠæ¶æ„ï¼Œæ‰¯æ‰¯ç®—æ³•ï¼Œå°±é…±ã€‚&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;å¯¹æœ¬æ–‡æœ‰ç–‘é—®çš„ï¼Œå¯ä»¥&lt;span&gt;å…¬ä¼—å·ç•™è¨€ã€ç§ä¿¡ï¼Œ&lt;/span&gt;&lt;span&gt;ä¹Ÿå¯ä»¥&lt;/span&gt;&lt;span&gt;åŠ ç¬”è€…å¾®ä¿¡ç›´æ¥äº¤æµ(æ–‡æœ«ç•™æœ‰å¾®ä¿¡äºŒç»´ç )&lt;/span&gt;ï¼›å¦å¤–è¿˜æœ‰&lt;span&gt;æ‰¹é‡å…è´¹è®¡ç®—æœºç”µå­ä¹¦ï¼Œåå°å›å¤[&lt;/span&gt;&lt;span&gt;pdf&lt;/span&gt;&lt;span&gt;]å…è´¹è·å–&lt;/span&gt;ã€‚&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯é›¨ä¹ï¼&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=Mzk0MzI4OTI1Ng==&amp;amp;mid=2247485953&amp;amp;idx=1&amp;amp;sn=f8cd484607ab07f15247ecde773d2e1c&amp;amp;chksm=c3376cc6f440e5d047f7e648c951fd583df82ab4e3dab5767baeddef9fe7c1270f05b039d8c4&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ä¹‹å‰çš„æ–‡ç« &quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;ä¹‹å‰çš„æ–‡ç« &lt;/a&gt;ä¸­ï¼Œæˆ‘ä»¬åˆ†æäº†glibcå†…å­˜ç®¡ç†ç›¸å…³çš„å†…å®¹ï¼Œé‡Œé¢çš„æ˜¯ä¸æ˜¯é€»è¾‘å¤æ‚ğŸ˜ï¼Œæ¯•ç«Ÿå’±ä»¬ç”¨å‡ åè¡Œä»£ç å®Œæˆçš„åŠŸèƒ½ï¼Œglibcè¦ç”¨ä¸Šç™¾ä¹ƒè‡³ä¸Šåƒè¡Œä»£ç æ¥å®ç°ï¼Œæ¯•ç«Ÿå®ƒçš„å—ä¼—å¤ªå¤šäº†ï¼Œéœ€è¦è€ƒè™‘è·¨å¹³å°ï¼Œå„ç§è¾¹ç•Œæ¡ä»¶ç­‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶å®ï¼Œglibcçš„å†…å­˜åˆ†é…åº“ptmallocä¹Ÿå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªå†…å­˜æ± ï¼Œå‡ºäºæ€§èƒ½è€ƒè™‘ï¼Œæ¯æ¬¡å†…å­˜ç”³è¯·éƒ½æ˜¯å…ˆä»ptmallocä¸­è¿›è¡Œåˆ†é…ï¼Œå¦‚æœæ²¡æœ‰åˆé€‚çš„åˆ™é€šè¿‡ç³»ç»Ÿåˆ†é…å‡½æ•°è¿›è¡Œç”³è¯·ï¼›åœ¨é‡Šæ”¾çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯å°†è¢«é‡Šæ”¾å†…å­˜å…ˆæ–¹å¼å†…å­˜æ± ä¸­ï¼Œå†…å­˜æ± æ ¹æ®ä¸€å®šçš„ç­–ç•¥ï¼Œæ¥å†³å®šæ˜¯å¦è¿›è¡Œshrinkä»¥å½’è¿˜OSã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£ä¹ˆï¼Œç°ä¸€ä¸ªå†…å­˜æ± ï¼Ÿæˆ‘ä»¬è¯¥æ€ä¹ˆå®ç°å‘¢ï¼Ÿä»Šå¤©ï¼Œå€ŸåŠ©è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥è®¾è®¡å’Œå®ç°ä¸€ä¸ªå†…å­˜æ± (æ–‡æœ«é™„æœ‰githubåœ°å€)ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;èƒŒæ™¯&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é¦–å…ˆéœ€è¦è¯´æ˜çš„æ˜¯ï¼Œè¯¥å†…å­˜æ± æ˜¯ç¬”è€…åœ¨10å¹´å‰å®Œæˆçš„ï¼Œä¸‹é¢å…ˆè¯´ä¸‹å½“æ—¶æ­¤é¡¹ç›®çš„èƒŒæ™¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;09å¹´ï¼Œåœ¨æŸæ‰€çš„æ—¶å€™ï¼Œå‚ä¸äº†æŸä¸ªå›½å®¶çº§é¡¹ç›®ï¼Œè¯¥é¡¹ç›®æ˜¯é˜²DDOSæ”»å‡»ç›¸å…³ï¼Œå› æ­¤æ›´å¤šçš„æ˜¯è·ŸIPç›¸å…³ï¼Œæ‰€ä»¥æ¯æ¬¡åˆ†é…å’Œé‡Šæ”¾å†…å­˜éƒ½æ˜¯å›ºå®šå¤§å°ï¼Œç»è¿‡æµ‹è¯•ï¼Œæ€§èƒ½ä¸æ˜¯å¾ˆæ»¡æ„ï¼Œæ‰€ä»¥ï¼Œç»è¿‡ä»£ç åˆ†æä»¥åŠæ€§èƒ½æ”»å‡»åˆ†æï¼Œå‘ç°é‡Œé¢æœ‰å¤§é‡çš„malloc/freeï¼Œæ‰€ä»¥ï¼Œå½“æ—¶å°±å†³å®šæ˜¯å¦ä»malloc/freeå…¥æ‰‹ï¼Œèƒ½å¦ä¼˜åŒ–æ•´ä¸ªé¡¹ç›®çš„æ€§èƒ½ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ï¼Œå†³å®šå®ç°ä¸€ä¸ªMemory Poolï¼Œåœ¨åšäº†è°ƒç ”ä»¥åŠç ”ç©¶äº†ç›¸å…³è®ºæ–‡åï¼Œå†³å®šå®ç°ä¸€ä¸ªå†…å­˜æ± ï¼Œå…ˆè¯•è¯•æ°´ï¼Œæ‰€å¹¸è¿çš„æ˜¯ï¼Œæ€§èƒ½ç¡®å®æ¯”glibcè‡ªå¸¦çš„malloc/freeè¦é«˜ï¼Œæ‰€ä»¥ä¹Ÿå°±åº”ç”¨äºé¡¹ç›®ä¸Šäº†ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;æœ¬æ–‡æ‰€è®²çš„Memory Poolä¸ºCè¯­è¨€å®ç°ï¼Œæ—¨åœ¨è®©å¤§å®¶éƒ½èƒ½çœ‹æ‡‚ï¼Œçœ‹æ˜ç™½(è‡³å°‘èƒ½å¤Ÿå®Œå…¨ç†è§£æœ¬æ–‡æ‰€è®²çš„Memory Poolçš„å®ç°åŸç†)ã€‚&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ¦‚å¿µ&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é¦–å…ˆï¼Œæˆ‘ä»¬ä»‹ç»ä¸‹ä»€ä¹ˆæ˜¯å†…å­˜æ± ï¼Ÿ&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;é¢„å…ˆåœ¨å†…å­˜ä¸­ç”³è¯·ä¸€å®šæ•°é‡çš„å†…å­˜å—ç•™ä½œå¤‡ç”¨ï¼Œå½“æœ‰æ–°çš„å†…å­˜éœ€æ±‚æ—¶ï¼Œå°±å…ˆä»å†…å­˜æ± ä¸­åˆ†é…å†…å­˜è¿”å›ï¼Œåœ¨é‡Šæ”¾çš„æ—¶å€™ï¼Œå°†å†…å­˜è¿”å›ç»™å†…å­˜æ± è€Œä¸æ˜¯OSï¼Œåœ¨ä¸‹æ¬¡ç”³è¯·çš„æ—¶å€™ï¼Œé‡æ–°è¿›è¡Œåˆ†é…&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£ä¹ˆä¸ºä»€ä¹ˆè¦æœ‰å†…å­˜æ± å‘¢ï¼Ÿè¿™å°±éœ€è¦ä»ä¼ ç»Ÿå†…å­˜åˆ†é…çš„ç‰¹ç‚¹æ¥è¿›è¡Œåˆ†æï¼Œä¼ ç»Ÿå†…å­˜åˆ†é…é‡Šæ”¾çš„ä¼˜ç‚¹æ— éå°±æ˜¯ &lt;span&gt;é€šç”¨æ€§å¼ºï¼Œåº”ç”¨å¹¿æ³›&lt;/span&gt;ï¼Œä½†æ˜¯ä¼ ç»Ÿçš„å†…å­˜åˆ†é…ã€é‡Šæ”¾åœ¨æŸäº›ç‰¹å®šçš„é¡¹ç›®ä¸­ï¼Œå…¶ä¸ä¸€å®šæ˜¯æœ€ä¼˜ã€æ•ˆç‡æœ€é«˜çš„æ–¹æ¡ˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¼ ç»Ÿå†…å­˜åˆ†é…ã€é‡Šæ”¾çš„ç¼ºç‚¹æ€»ç»“å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;1ã€è°ƒç”¨malloc/new,ç³»ç»Ÿéœ€è¦æ ¹æ®â€œæœ€å…ˆåŒ¹é…â€ã€â€œæœ€ä¼˜åŒ¹é…â€æˆ–å…¶ä»–ç®—æ³•åœ¨å†…å­˜ç©ºé—²å—è¡¨ä¸­æŸ¥æ‰¾ä¸€å—ç©ºé—²å†…å­˜ï¼Œè°ƒç”¨free/delete,ç³»ç»Ÿå¯èƒ½éœ€è¦åˆå¹¶ç©ºé—²å†…å­˜å—ï¼Œè¿™äº›ä¼šäº§ç”Ÿé¢å¤–å¼€é”€&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;2ã€é¢‘ç¹çš„åœ¨å †ä¸Šç”³è¯·å’Œé‡Šæ”¾å†…å­˜å¿…ç„¶éœ€è¦å¤§é‡æ—¶é—´ï¼Œé™ä½äº†ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚å¯¹äºä¸€ä¸ªéœ€è¦é¢‘ç¹ç”³è¯·å’Œé‡Šæ”¾å†…å­˜çš„ç¨‹åºæ¥è¯´ï¼Œé¢‘ç¹è°ƒç”¨new/mallocç”³è¯·å†…å­˜ï¼Œdelete/freeé‡Šæ”¾å†…å­˜éƒ½éœ€è¦èŠ±è´¹ç³»ç»Ÿæ—¶é—´ï¼Œé¢‘ç¹çš„è°ƒç”¨å¿…ç„¶ä¼šé™ä½ç¨‹åºçš„è¿è¡Œæ•ˆç‡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3ã€ç»å¸¸ç”³è¯·å°å—å†…å­˜ï¼Œä¼šå°†ç‰©ç†å†…å­˜â€œåˆ‡â€å¾—å¾ˆç¢ï¼Œå¯¼è‡´å†…å­˜ç¢ç‰‡ã€‚ç”³è¯·å†…å­˜çš„é¡ºåºå¹¶ä¸æ˜¯é‡Šæ”¾å†…å­˜çš„é¡ºåºï¼Œå› æ­¤é¢‘ç¹ç”³è¯·å°å—å†…å­˜å¿…ç„¶ä¼šå¯¼è‡´å†…å­˜ç¢ç‰‡ï¼Œé€ æˆâ€œæœ‰å†…å­˜ä½†æ˜¯ç”³è¯·ä¸åˆ°å¤§å—å†…å­˜â€çš„ç°è±¡ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8096385542168675&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHiaA3xxTGkIcH0JjQo83fJ8JO8D05L4aeYlws7HC3OMGpm8huUQ0eXc6acbTufVythia0GgnLSuTy5Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;830&quot;/&gt;&lt;figcaption&gt;&lt;span/&gt;å†…å­˜åˆ†é…&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»ä¸Šå›¾ä¸­ï¼Œå¯ä»¥çœ‹å‡ºï¼Œåº”ç”¨ç¨‹åºä¼šè°ƒç”¨glibcè¿è¡Œæ—¶åº“çš„mallocå‡½æ•°è¿›è¡Œå†…å­˜ç”³è¯·ï¼Œè€Œmallocå‡½æ•°åˆ™ä¼šæ ¹æ®å…·ä½“ç”³è¯·çš„å†…å­˜å—å¤§å°ï¼Œæ ¹æ®å®é™…æƒ…å†µæœ€ç»ˆä»sys_brkæˆ–è€…sys_mmap_pgoffç³»ç»Ÿè°ƒç”¨ç”³è¯·å†…å­˜ï¼Œè€Œå¤§å®¶éƒ½çŸ¥é“ï¼Œè·Ÿosæ‰“äº¤é“ï¼Œ_æ€§èƒ½æŸå¤±_æ˜¯æ¯‹åº¸ç½®ç–‘çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶æ¬¡ï¼Œglibcä½œä¸ºé€šç”¨çš„è¿è¡Œæ—¶åº“ï¼Œmalloc/freeéœ€è¦æ»¡è¶³å„ç§åœºæ™¯éœ€æ±‚ï¼Œæ¯”å¦‚ç”³è¯·çš„å­—èŠ‚å¤§å°ä¸ä¸€ï¼Œå¤šçº¿ç¨‹è®¿é—®ç­‰ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5079006772009029&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHiaA3xxTGkIcH0JjQo83fJ8J3ak8tA0ekibT7PGELibVGEcCdMcr6e5hzatx8bsLUBAgI4Gia9cFB4xfw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;886&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ²¡æœ‰æ¯”ä¼ ç»Ÿmalloc/freeæ€§èƒ½æ›´ä¼˜çš„æ–¹æ¡ˆå‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç­”æ¡ˆæ˜¯ï¼šæœ‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ç¨‹åºå¯åŠ¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬é¢„åˆ†é…ç‰¹å®šæ•°é‡çš„å›ºå®šå¤§å°çš„å—ï¼Œè¿™æ ·æ¯æ¬¡ç”³è¯·çš„æ—¶å€™ï¼Œå°±ä»é¢„åˆ†é…çš„å—ä¸­è·å–ï¼Œé‡Šæ”¾çš„æ—¶å€™ï¼Œå°†å…¶æ”¾å…¥é¢„åˆ†é…å—ä¸­ä»¥å¤‡ä¸‹æ¬¡å¤ç”¨ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„_å†…å­˜æ± æŠ€æœ¯_ï¼Œæ¯ä¸ªå†…å­˜æ± å¯¹åº”ç‰¹å®šåœºæ™¯ï¼Œè¿™æ ·çš„è¯ï¼Œè¾ƒä¼ ç»Ÿçš„ä¼ ç»Ÿçš„malloc/freeå°‘äº†å¾ˆå¤šå¤æ‚é€»è¾‘ï¼Œæ€§èƒ½æ˜¾ç„¶ä¼šæå‡ä¸å°‘ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.49324324324324326&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHiaA3xxTGkIcH0JjQo83fJ8JJFQ75CllZgucDqqCBwPtiaDDMNxS3DRMLH8SP7KG7Cyw1Hy5jchoTFw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;888&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»“åˆä¼ ç»Ÿmalloc/freeçš„ç¼ºç‚¹ï¼Œæˆ‘ä»¬æ€»ç»“ä¸‹ä½¿ç”¨å†…å­˜æ± æ–¹æ¡ˆçš„ä¼˜ç‚¹ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;1ã€æ¯”malloc/freeè¿›è¡Œå†…å­˜ç”³è¯·/é‡Šæ”¾çš„æ–¹å¼å¿«&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;2ã€ä¸ä¼šäº§ç”Ÿæˆ–å¾ˆå°‘äº§ç”Ÿå †ç¢ç‰‡&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3ã€å¯é¿å…å†…å­˜æ³„æ¼&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;åˆ†ç±»&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ ¹æ®åˆ†é…å‡ºå»çš„å­—èŠ‚å¤§å°æ˜¯å¦å›ºå®šï¼Œåˆ†ä¸º &lt;span&gt;å›ºå®šå¤§å°å†…å­˜æ± &lt;/span&gt; å’Œ &lt;span&gt;å¯å˜å¤§å°å†…å­˜æ± &lt;/span&gt; ä¸¤ç±»ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€Œå¯å˜å¤§å°å†…å­˜æ± ï¼Œå¯åˆ†é…ä»»æ„å¤§å°çš„å†…å­˜æ± ï¼Œæ¯”å¦‚ptmallocã€jemallocä»¥åŠgoogleçš„tcmallocã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3956386292834891&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHiaA3xxTGkIcH0JjQo83fJ8JMgOiaOiaRKZISI0N96TUKicbH2yCNdpH0mMdKA4foLjibQZRK1gynmvFmw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;642&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å›ºå®šå¤§å°å†…å­˜æ± ï¼Œé¡¾åæ€ä¹‰ï¼Œæ¯æ¬¡ç”³è¯·å’Œé‡Šæ”¾çš„å†…å­˜å¤§å°éƒ½æ˜¯å›ºå®šçš„ã€‚æ¯æ¬¡åˆ†é…å‡ºå»çš„å†…å­˜å—å¤§å°éƒ½æ˜¯ç¨‹åºé¢„å…ˆå®šä¹‰çš„å€¼ï¼Œè€Œåœ¨é‡Šæ”¾å†…å­˜å—æ—¶å€™ï¼Œåˆ™ç®€å•çš„æŒ‚å›å†…å­˜æ± é“¾è¡¨å³å¯ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5538057742782152&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHiaA3xxTGkIcH0JjQo83fJ8JWVUKWDf7b1SYwg2ibAZaGGcf0GzXPDFO9ibt540toKmTFsAtydh8lZVQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;762&quot;/&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;æœ¬æ–‡ä¸»è¦è®²çš„æ˜¯å›ºå®šå¤§å°çš„å†…å­˜æ± ã€‚&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;åŸç†&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å†…å­˜æ± ï¼Œé‡ç‚¹åœ¨â€æ± â€œå­—ä¸Šï¼Œä¹‹æ‰€ä»¥ç§°ä¹‹ä¸ºå†…å­˜æ± ï¼Œæ˜¯åœ¨çœŸæ­£ä½¿ç”¨ä¹‹å‰ï¼Œå…ˆé¢„åˆ†é…ä¸€å®šæ•°é‡ã€å¤§å°é¢„è®¾çš„å—ï¼Œå¦‚æœæœ‰æ–°çš„å†…å­˜éœ€æ±‚æ—¶å€™ï¼Œå°±ä»å†…å­˜æ± ä¸­æ ¹æ®ç”³è¯·çš„å†…å­˜å¤§å°ï¼Œåˆ†é…ä¸€ä¸ªå†…å­˜å—ï¼Œè‹¥å½“å‰å†…å­˜å—å·²ç»è¢«å®Œå…¨åˆ†é…å‡ºå»ï¼Œåˆ™ç»§ç»­ç”³è¯·ä¸€å¤§å—ï¼Œç„¶åè¿›è¡Œåˆ†é…ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“è¿›è¡Œå†…å­˜å—é‡Šæ”¾çš„æ—¶å€™ï¼Œåˆ™å°†å…¶å½’è¿˜å†…å­˜æ± ï¼Œåé¢å¦‚æœå†æœ‰ç”³è¯·çš„è¯ï¼Œåˆ™å°†å…¶é‡æ–°åˆ†é…å‡ºå»ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5896805896805897&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHiaA3xxTGkIcH0JjQo83fJ8JMuGPfRHkzR8jbnJzPria73NIxyWo0qNKS7LmfNTY0m1qBQtkyOhmHpg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;814&quot;/&gt;&lt;figcaption&gt;&lt;span/&gt;å†…å­˜æ± ç»“æ„å›¾&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šå›¾æ˜¯æœ¬æ–‡æ‰€è¦è®¾è®¡çš„ç»“æ„å›¾ï¼Œä¸‹é¢åœ¨å…·ä½“çš„è®¾è®¡ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆè®²ä¸‹æœ¬å†…å­˜æ± çš„åŸç†ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;åˆ›å»ºå¹¶åˆå§‹åŒ–å¤´ç»“ç‚¹MemoryPool&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é€šè¿‡MemoryPoolè¿›è¡Œå†…å­˜åˆ†é…ï¼Œå¦‚æœå‘ç°MemoryPoolæ‰€æŒ‡å‘çš„ç¬¬ä¸€å—MemoryBlockæˆ–è€…ç°æœ‰MemoryPoolæ²¡æœ‰ç©ºé—²å†…å­˜å—ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„MemoryBlockåˆå§‹åŒ–ä¹‹åå°†å…¶æ’å…¥MemoryPoolçš„å¤´&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åœ¨å†…å­˜åˆ†é…çš„æ—¶å€™ï¼Œéå†MemoryPoolä¸­çš„å•é“¾è¡¨MemoryBlockï¼Œæ ¹æ®åœ°å€åˆ¤æ–­æ‰€è¦é‡Šæ”¾çš„å†…å­˜å±äºå“ªä¸ªMemoryBlockï¼Œç„¶åæ ¹æ®åç§»è®¾ç½®MemoryBlockçš„ç¬¬ä¸€å—ç©ºé—²å—ç´¢å¼•ï¼ŒåŒæ—¶å°†ç©ºé—²å—ä¸ªæ•°+1&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šè¿°åªæ˜¯ä¸€ä¸ªç®€å•çš„é€»è¾‘è®²è§£ï¼Œæ¯”è¾ƒå®è§‚ï¼Œä¸‹é¢æˆ‘ä»¬å°†é€šè¿‡å›¾è§£å’Œä»£ç çš„æ–¹å¼æ¥è¿›è¡Œè®²è§£ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;è®¾è®¡&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬ç”»å‡ºäº†å†…å­˜æ± çš„ç»“æ„å›¾ï¼Œä»å›¾ä¸­ï¼Œå¯ä»¥çœ‹å‡ºï¼Œæœ‰ä¸¤ä¸ªç»“æ„å˜é‡ï¼Œåˆ†åˆ«ä¸ºMemoryPoolå’ŒMemoryBlockã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢æˆ‘ä»¬å°†ä»æ•°æ®ç»“æ„å’Œæ¥å£ä¸¤ä¸ªéƒ¨åˆ†å‡ºå‘ï¼Œè¯¦ç»†è®²è§£å†…å­˜æ± çš„è®¾è®¡ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;æ•°æ®ç»“æ„&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;MemoryBlock&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬æ–‡ä¸­æ‰€è®²è¿°çš„å†…å­˜å—çš„åˆ†é…å’Œé‡Šæ”¾éƒ½æ˜¯é€šè¿‡è¯¥ç»“æ„è¿›è¡Œæ“ä½œï¼Œä¸‹é¢æ˜¯MemoryBlockçš„ç¤ºä¾‹å›¾ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.22093023255813954&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHiaA3xxTGkIcH0JjQo83fJ8JtBWdSEkef8bwNjV4Is4jDB1pBNj7N4LeJ5jicbyIYiaiahntlVAVKGuzw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;860&quot;/&gt;&lt;figcaption&gt;&lt;span/&gt;MemoryBlock&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ä¸Šå›¾ä¸­ï¼ŒHeaderå­˜å‚¨è¯¥MemoryBlockçš„å†…å­˜å—æƒ…å†µï¼Œæ¯”å¦‚å¯ç”¨çš„å†…å­˜å—ç´¢å¼•ã€å½“å‰MemoryBlockä¸­å¯ç”¨å†…å­˜å—çš„ä¸ªæ•°ç­‰ç­‰ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.522875816993464&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHiaA3xxTGkIcH0JjQo83fJ8JHl30oOKXEKypXFkv58abzvvbOJiaNywkenAPcIIOoCdTQqfhfXJlGhQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;306&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;MemoryBlock&lt;/span&gt;Â {&lt;/span&gt;&lt;br/&gt;Â &lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â size;&lt;br/&gt;Â &lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â free_size;&lt;br/&gt;Â &lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â first_free;&lt;br/&gt;&lt;br/&gt;Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;MemoryBlock&lt;/span&gt;Â *&lt;span&gt;next&lt;/span&gt;;&lt;/span&gt;&lt;br/&gt;Â &lt;span&gt;char&lt;/span&gt;Â a_data[&lt;span&gt;0&lt;/span&gt;];Â &lt;br/&gt;};&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;sizeä¸ºMemoryBlockä¸‹å†…å­˜å—çš„ä¸ªæ•°&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;free_sizeä¸ºMemoryBlockä¸‹ç©ºé—²å†…å­˜å—çš„ä¸ªæ•°&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;first_freeä¸ºMemoryBlockä¸­ç¬¬ä¸€ä¸ªç©ºé—²å—çš„ç´¢å¼•&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;nextæŒ‡å‘ä¸‹ä¸€ä¸ªMemoryBlock&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;a_dataæ˜¯ä¸€ä¸ªæŸ”æ€§æ•°ç»„&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;æŸ”æ€§æ•°ç»„å³æ•°ç»„å¤§å°å¾…å®šçš„æ•°ç»„ï¼Œ Cè¯­è¨€ä¸­ç»“æ„ä½“çš„æœ€åä¸€ä¸ªå…ƒç´ å¯ä»¥æ˜¯å¤§å°æœªçŸ¥çš„æ•°ç»„ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„0é•¿åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç”¨ç»“æ„ä½“æ¥åˆ›å»ºæŸ”æ€§æ•°ç»„ã€‚&lt;/p&gt;&lt;p&gt;å®ƒçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ºäº†æ»¡è¶³éœ€è¦å˜é•¿åº¦çš„ç»“æ„ä½“ï¼Œä¸ºäº†è§£å†³ä½¿ç”¨æ•°ç»„æ—¶å†…å­˜çš„å†—ä½™å’Œæ•°ç»„çš„è¶Šç•Œé—®é¢˜ã€‚&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;MemoryPool&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;MemoryPoolä¸ºå†…å­˜æ± çš„å¤´ï¼Œé‡Œé¢å®šä¹‰äº†è¯¥å†…å­˜æ± çš„ä¿¡æ¯ï¼Œæ¯”å¦‚æœ¬å†…å­˜æ± åˆ†é…çš„å›ºå®šå¯¹è±¡çš„å¤§å°ï¼Œç¬¬ä¸€ä¸ªMemoryBlockç­‰&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.24&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHiaA3xxTGkIcH0JjQo83fJ8Jxl23r3y9o1XRCJnNILsWDnnQvEQKG7fxhoNWlcZ32le0SUoDNLNaAA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;300&quot;/&gt;&lt;/figure&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;structÂ MemoryPoolÂ {&lt;br/&gt;Â unsignedÂ intÂ obj_size;&lt;br/&gt;Â unsignedÂ intÂ init_size;&lt;br/&gt;Â unsignedÂ intÂ grow_size;&lt;br/&gt;&lt;br/&gt;Â MemoryBlockÂ *first_block;&lt;br/&gt;};&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;obj_sizeä¸ºå†…å­˜æ± åˆ†é…çš„å›ºå®šå†…å­˜å—çš„å¤§å°&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;init_sizeåˆå§‹åŒ–å†…å­˜æ± æ—¶å€™åˆ›å»ºçš„å†…å­˜å—çš„ä¸ªæ•°&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;grow_sizeå½“åˆå§‹åŒ–å†…å­˜å—ä½¿ç”¨å®Œåï¼Œå†æ¬¡ç”³è¯·å†…å­˜å—æ—¶å€™çš„ä¸ªæ•°&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;first_blockæŒ‡å‘ç¬¬ä¸€ä¸ªMemoryBlock&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;æ¥å£&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;memory_pool_create&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;MemoryPoolÂ *&lt;span&gt;memory_pool_create&lt;/span&gt;&lt;span&gt;(&lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â init_size,Â &lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â grow_size,Â &lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â size)&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬å‡½æ•°ç”¨æ¥åˆ›å»ºä¸€ä¸ªMemoryPoolï¼Œå¹¶å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ï¼Œä¸‹é¢æ˜¯å‚æ•°è¯´æ˜ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;init_size è¡¨ç¤ºç¬¬ä¸€ä¸ªMemoryBlockä¸­åˆ›å»ºå—çš„ä¸ªæ•°&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;grow_size è¡¨ç¤ºå½“MemoryPoolä¸­æ²¡æœ‰ç©ºé—²å—å¯ç”¨ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„MemoryBlockæ—¶å…¶å—çš„ä¸ªæ•°&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;size ä¸ºå—çš„å¤§å°(å³æ¯æ¬¡åˆ†é…ç›¸åŒå¤§å°çš„å›ºå®šsize)&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;memory_alloc&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;void&lt;/span&gt;Â *&lt;span&gt;memory_alloc&lt;/span&gt;&lt;span&gt;(MemoryPoolÂ *mp)&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬å‡½æ•°ç”¨äº†ä»mpä¸­ç”³è¯·ä¸€å—å†…å­˜è¿”å›&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;mp ä¸ºMemoryPoolç±»å‹æŒ‡é’ˆï¼Œå³å†…å­˜æ± çš„å¤´&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¦‚æœå†…å­˜åˆ†é…å¤±è´¥ï¼Œåˆ™è¿”å›NULL&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;memory_free&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;Â &lt;span&gt;&lt;span&gt;void&lt;/span&gt;*Â &lt;span&gt;memory_free&lt;/span&gt;&lt;span&gt;(MemoryPoolÂ *mp,Â &lt;span&gt;void&lt;/span&gt;Â *pfree)&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬å‡½æ•°ç”¨æ¥é‡Šæ”¾å†…å­˜&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;mp ä¸ºMemoryPoolç±»å‹æŒ‡é’ˆï¼Œå³å†…å­˜æ± çš„å¤´&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;pfree ä¸ºè¦é‡Šæ”¾çš„å†…å­˜&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;free_memory_pool&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;free_memory_pool&lt;/span&gt;&lt;span&gt;(MemoryPoolÂ *mp)&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬å‡½æ•°ç”¨æ¥é‡Šæ”¾å†…å­˜æ± &lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å®ç°&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨è®²è§£æ•´ä¸ªå®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹å…ˆå†…å­˜æ± çš„è¯¦ç»†ç»“æ„å›¾ã€‚&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3894736842105263&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHiaA3xxTGkIcH0JjQo83fJ8JqTSxIEwSOkPIdwZJ3KrnEN2RibV5GqZVjic5RAEHQiciaxxxCOPA8qs8Yw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1140&quot;/&gt;&lt;/figure&gt;&lt;/section&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;åˆå§‹åŒ–å†…å­˜æ± &lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;MemoryPoolæ˜¯æ•´ä¸ªå†…å­˜æ± çš„å…¥å£ç»“æ„ï¼Œè¯¥å‡½æ•°ä¸»è¦æ˜¯ç”¨æ¥åˆ›å»ºMemoryPoolå¯¹è±¡ï¼Œå¹¶ä½¿ç”¨å‚æ•°å¯¹å…¶å†…éƒ¨çš„æˆå‘˜å˜é‡è¿›è¡Œåˆå§‹åŒ–ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡½æ•°å®šä¹‰å¦‚ä¸‹:&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;MemoryPoolÂ *&lt;span&gt;memory_pool_create&lt;/span&gt;&lt;span&gt;(&lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â init_size,Â &lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â grow_size,Â &lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â size)&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;{&lt;br/&gt;Â MemoryPoolÂ *mp;&lt;br/&gt;Â mpÂ =Â (MemoryPool*)&lt;span&gt;malloc&lt;/span&gt;(&lt;span&gt;sizeof&lt;/span&gt;(MemoryPool));&lt;br/&gt;Â mp-&amp;gt;first_blockÂ =Â &lt;span&gt;NULL&lt;/span&gt;;&lt;br/&gt;Â mp-&amp;gt;init_sizeÂ =Â init_size;&lt;br/&gt;Â mp-&amp;gt;grow_sizeÂ =Â grow_size;&lt;br/&gt;&lt;br/&gt;Â &lt;span&gt;if&lt;/span&gt;(sizeÂ &amp;lt;Â &lt;span&gt;sizeof&lt;/span&gt;(&lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;))&lt;br/&gt;Â Â mp-&amp;gt;obj_sizeÂ =Â &lt;span&gt;sizeof&lt;/span&gt;(&lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;);&lt;br/&gt;Â mp-&amp;gt;obj_sizeÂ =Â (sizeÂ +Â (MEMPOOL_ALIGNMENT&lt;span&gt;-1&lt;/span&gt;))Â &amp;amp;Â ~(MEMPOOL_ALIGNMENT&lt;span&gt;-1&lt;/span&gt;);&lt;br/&gt;&lt;br/&gt;Â &lt;span&gt;return&lt;/span&gt;Â mp;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å†…å­˜åˆ†é…&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;void&lt;/span&gt;Â *&lt;span&gt;memory_alloc&lt;/span&gt;&lt;span&gt;(MemoryPoolÂ *mp)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â &lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â i;&lt;br/&gt;Â &lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â length;&lt;br/&gt;&lt;br/&gt;Â &lt;span&gt;if&lt;/span&gt;(mp-&amp;gt;first_blockÂ ==Â &lt;span&gt;NULL&lt;/span&gt;)Â {&lt;br/&gt;Â Â MemoryBlockÂ *mb;&lt;br/&gt;Â Â lengthÂ =Â (mp-&amp;gt;init_size)*(mp-&amp;gt;obj_size)Â +Â &lt;span&gt;sizeof&lt;/span&gt;(MemoryBlock);&lt;br/&gt;Â Â mbÂ =Â &lt;span&gt;malloc&lt;/span&gt;(length);&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;(mbÂ ==Â &lt;span&gt;NULL&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â perror(&lt;span&gt;&quot;memoryÂ allocateÂ failed!\n&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;NULL&lt;/span&gt;;&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;/*Â initÂ theÂ firstÂ blockÂ */&lt;/span&gt;&lt;br/&gt;Â Â mb-&amp;gt;nextÂ =Â &lt;span&gt;NULL&lt;/span&gt;;&lt;br/&gt;Â Â mb-&amp;gt;free_sizeÂ =Â mp-&amp;gt;init_sizeÂ -Â &lt;span&gt;1&lt;/span&gt;;&lt;br/&gt;Â Â mb-&amp;gt;first_freeÂ =Â &lt;span&gt;1&lt;/span&gt;;&lt;br/&gt;Â Â mb-&amp;gt;sizeÂ =Â mp-&amp;gt;init_size*mp-&amp;gt;obj_size;&lt;br/&gt;&lt;br/&gt;Â Â mp-&amp;gt;first_blockÂ =Â mb;&lt;br/&gt;Â Â &lt;br/&gt;Â Â &lt;span&gt;char&lt;/span&gt;Â *dataÂ =Â mb-&amp;gt;a_data;&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;/*Â setÂ theÂ markÂ */&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;for&lt;/span&gt;(i=&lt;span&gt;1&lt;/span&gt;;Â i&amp;lt;mp-&amp;gt;init_size;Â ++i)Â {&lt;br/&gt;Â Â Â *(&lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;long&lt;/span&gt;Â *)dataÂ =Â i;&lt;br/&gt;Â Â Â dataÂ +=Â mp-&amp;gt;obj_size;&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â (&lt;span&gt;void&lt;/span&gt;Â *)mb-&amp;gt;a_data;&lt;br/&gt;Â }&lt;br/&gt;&lt;br/&gt;Â MemoryBlockÂ *pm_blockÂ =Â mp-&amp;gt;first_block;&lt;br/&gt;&lt;br/&gt;Â &lt;span&gt;while&lt;/span&gt;((pm_blockÂ !=Â &lt;span&gt;NULL&lt;/span&gt;)Â &amp;amp;&amp;amp;Â (pm_block-&amp;gt;free_sizeÂ ==Â &lt;span&gt;0&lt;/span&gt;))Â {&lt;br/&gt;Â Â pm_blockÂ =Â pm_block-&amp;gt;next;&lt;br/&gt;Â }&lt;br/&gt;&lt;br/&gt;Â &lt;span&gt;if&lt;/span&gt;(pm_blockÂ !=Â &lt;span&gt;NULL&lt;/span&gt;)Â {&lt;br/&gt;Â Â &lt;span&gt;char&lt;/span&gt;Â *pfreeÂ =Â pm_block-&amp;gt;a_dataÂ +Â pm_block-&amp;gt;first_freeÂ *Â mp-&amp;gt;obj_size;&lt;br/&gt;&lt;br/&gt;Â Â pm_block-&amp;gt;first_freeÂ =Â *((&lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;long&lt;/span&gt;Â *)pfree);&lt;br/&gt;Â Â pm_block-&amp;gt;free_size--;&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â (&lt;span&gt;void&lt;/span&gt;Â *)pfree;&lt;br/&gt;Â }Â &lt;span&gt;else&lt;/span&gt;Â {&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;(mp-&amp;gt;grow_sizeÂ ==Â &lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;NULL&lt;/span&gt;;&lt;br/&gt;Â Â &lt;br/&gt;Â Â Â Â MemoryBlockÂ *new_blockÂ =Â (MemoryBlockÂ *)&lt;span&gt;malloc&lt;/span&gt;((mp-&amp;gt;grow_size)*(mp-&amp;gt;obj_size)Â +Â &lt;span&gt;sizeof&lt;/span&gt;(MemoryBlock));&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;(new_blockÂ ==Â &lt;span&gt;NULL&lt;/span&gt;)&lt;br/&gt;Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;NULL&lt;/span&gt;;&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;char&lt;/span&gt;Â *dataÂ =Â new_block-&amp;gt;a_data;&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;for&lt;/span&gt;(i=&lt;span&gt;1&lt;/span&gt;;Â i&amp;lt;mp-&amp;gt;grow_size;Â ++i)Â {&lt;br/&gt;Â Â Â *(&lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;long&lt;/span&gt;Â *)dataÂ =Â i;&lt;br/&gt;Â Â Â dataÂ +=Â mp-&amp;gt;obj_size;&lt;br/&gt;Â Â }Â Â &lt;br/&gt;&lt;br/&gt;Â Â new_block-&amp;gt;sizeÂ =Â mp-&amp;gt;grow_size*mp-&amp;gt;obj_size;&lt;br/&gt;Â Â new_block-&amp;gt;free_sizeÂ =Â mp-&amp;gt;grow_size&lt;span&gt;-1&lt;/span&gt;;&lt;br/&gt;Â Â new_block-&amp;gt;first_freeÂ =Â &lt;span&gt;1&lt;/span&gt;;&lt;br/&gt;Â Â new_block-&amp;gt;nextÂ =Â mp-&amp;gt;first_block;&lt;br/&gt;Â Â mp-&amp;gt;first_blockÂ =Â new_block;&lt;br/&gt;Â Â &lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â (&lt;span&gt;void&lt;/span&gt;Â *)new_block-&amp;gt;a_data;&lt;br/&gt;Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å†…å­˜å—ä¸»è¦åœ¨MemoryBlockç»“æ„ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´ç”³è¯·çš„å†…å­˜ï¼Œéƒ½æ˜¯ä»MemoryBlockä¸­è¿›è¡Œè·å–ï¼Œæµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;è·å–MemoryPoolä¸­çš„first_blockæŒ‡é’ˆ&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å¦‚æœè¯¥æŒ‡é’ˆä¸ºç©ºï¼Œåˆ™åˆ›å»ºä¸€ä¸ªMemoryBlockï¼Œfirst_blockæŒ‡å‘æ–°å»ºçš„MemoryBlockï¼Œå¹¶è¿”å›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¦åˆ™ï¼Œä»first_blockè¿›è¡Œå•é“¾è¡¨éå†ï¼ŒæŸ¥æ‰¾ç¬¬ä¸€ä¸ªfree_sizeä¸ä¸º0çš„MemoryBlockï¼Œå¦‚æœæ‰¾åˆ°ï¼Œåˆ™å¯¹è¯¥MemoryBlockçš„ç›¸å…³å‚æ•°è¿›è¡Œè®¾ç½®ï¼Œç„¶åè¿”å›å†…å­˜å—&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¦åˆ™ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„MemoryBlockï¼Œè¿›è¡Œåˆå§‹åŒ–åˆ†é…ä¹‹åï¼Œå°†å…¶æ’å…¥åˆ°é“¾è¡¨çš„å¤´éƒ¨(è¿™æ ·åšçš„ç›®çš„æ˜¯ä¸ºäº†æ–¹ä¾¿ä¸‹æ¬¡åˆ†é…æ•ˆç‡ï¼Œå³å‡å°äº†é“¾è¡¨çš„éå†)&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ç¬¬30-33è¡Œæˆ–è€…67-70è¡Œï¼Œè¿™ä¸¤è¡Œçš„åŠŸèƒ½ä¸€æ ·ï¼Œéƒ½æ˜¯å¯¹æ–°ç”³è¯·çš„å†…å­˜å—è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™å‡ è¡Œçš„æ„æ€ï¼Œæ˜¯è¦å°†ç©ºé—²å—è¿æ¥èµ·æ¥ï¼Œä½†æ˜¯ï¼Œå¹¶æ²¡æœ‰ä½¿ç”¨ä¼ ç»Ÿæ„ä¹‰ä¸Šçš„é“¾è¡¨æ–¹å¼ï¼Œè€Œæ˜¯é€šè¿‡indexæ–¹å¼è¿›è¡Œè¿æ¥ï¼Œå…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.33519553072625696&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHiaA3xxTGkIcH0JjQo83fJ8JjOS2Heu2NuS9eT9fmal7libj8V2s4nJ5jBZjW2u8p7vAwZp514OcrBg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;716&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ä¸Šå›¾ä¸­ï¼Œç¬¬0å—ç©ºé—²å—çš„ä¸‹ä¸€ä¸ªç©ºé—²å—ç´¢å¼•ä¸º1ï¼Œè€Œç¬¬1å—ç©ºé—²å—çš„ç´¢å¼•ä¸º2ï¼Œä¾æ¬¡ç±»æ¨ï¼Œå½¢æˆäº†å¦‚ä¸‹é“¾è¡¨æ–¹å¼&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;1-&amp;gt;2-&amp;gt;3-&amp;gt;4-&amp;gt;5&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å†…å­˜åˆ†é…æµç¨‹å›¾å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.2387755102040816&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHiaA3xxTGkIcH0JjQo83fJ8JZiblxR2ibQxoUwFx0hFZyiag2Ufw8ib53cXKuXvQ3JRibRCvCbW9HcAntibA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;980&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å†…å­˜é‡Šæ”¾&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;void&lt;/span&gt;*Â &lt;span&gt;memory_free&lt;/span&gt;&lt;span&gt;(MemoryPoolÂ *mp,Â &lt;span&gt;void&lt;/span&gt;Â *pfree)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â &lt;span&gt;if&lt;/span&gt;(mp-&amp;gt;first_blockÂ ==Â &lt;span&gt;NULL&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;;&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â MemoryBlockÂ *pm_blockÂ =Â mp-&amp;gt;first_block;&lt;br/&gt;Â MemoryBlockÂ *pm_pre_blockÂ =Â mp-&amp;gt;first_block;&lt;br/&gt;Â &lt;br/&gt;Â &lt;span&gt;/*Â researchÂ theÂ MemoryBlockÂ whichÂ theÂ pfreeÂ inÂ */&lt;/span&gt;&lt;br/&gt;Â &lt;span&gt;while&lt;/span&gt;(pm_blockÂ &amp;amp;&amp;amp;Â ((&lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;long&lt;/span&gt;)pfreeÂ &amp;lt;Â (&lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;long&lt;/span&gt;)pm_block-&amp;gt;a_dataÂ ||Â &lt;br/&gt;Â Â (&lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;long&lt;/span&gt;)pfree&amp;gt;((&lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;long&lt;/span&gt;)pm_block-&amp;gt;a_data+pm_block-&amp;gt;size)))Â {&lt;br/&gt;Â Â &lt;span&gt;//pm_pre_blockÂ =Â pm_block;&lt;/span&gt;&lt;br/&gt;Â Â pm_blockÂ =Â pm_block-&amp;gt;next;&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;(pm_blockÂ ==Â &lt;span&gt;NULL&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â pfree;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â }&lt;br/&gt;&lt;br/&gt;Â &lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â offsetÂ =Â pfreeÂ -(&lt;span&gt;void&lt;/span&gt;*)Â pm_block-&amp;gt;a_data;&lt;br/&gt;&lt;br/&gt;Â &lt;span&gt;if&lt;/span&gt;((offset&amp;amp;(mp-&amp;gt;obj_sizeÂ &lt;span&gt;-1&lt;/span&gt;))Â &amp;gt;Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â pfree;&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â pm_block-&amp;gt;free_size++;&lt;br/&gt;Â *((&lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â *)pfree)Â =Â pm_block-&amp;gt;first_free;&lt;br/&gt;&lt;br/&gt;Â pm_block-&amp;gt;first_free=(&lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;)(offset/mp-&amp;gt;obj_size);&lt;br/&gt;&lt;br/&gt;Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;NULL&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å†…å­˜é‡Šæ”¾è¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;åˆ¤æ–­å½“å‰MemoryPoolçš„first_blockæŒ‡é’ˆæ˜¯å¦ä¸ºç©ºï¼Œå¦‚æœä¸ºç©ºï¼Œåˆ™è¿”å›&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å¦åˆ™ï¼Œéå†MemoryBlocké“¾è¡¨ï¼Œæ ¹æ®æ‰€é‡Šæ”¾çš„æŒ‡é’ˆå‚æ•°åˆ¤æ–­æ˜¯å¦åœ¨æŸä¸€ä¸ªMemoryBlockä¸­&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å¦‚æœæ‰¾åˆ°ï¼Œåˆ™å¯¹MemoryBlockä¸­çš„å„ä¸ªå‚æ•°è¿›è¡Œæ“ä½œï¼Œç„¶åè¿”å›&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å¦åˆ™ï¼Œæ²¡æœ‰åˆé€‚çš„MemoryBlockï¼Œåˆ™è¡¨æ˜è¯¥è¢«é‡Šæ”¾çš„æŒ‡é’ˆä¸åœ¨å†…å­˜æ± ä¸­ï¼Œè¿”å›&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œéœ€è¦æ³¨æ„ç¬¬20-29è¡Œã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ç¬¬20è¡Œï¼Œæ±‚å‡ºè¢«é‡Šæ”¾çš„å†…å­˜å—åœ¨MemoryBlockä¸­çš„åç§»&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¬¬22è¡Œï¼Œåˆ¤æ–­æ˜¯å¦èƒ½è¢«æ•´é™¤ï¼Œå³æ˜¯å¦åœ¨è¿™ä¸ªå†…å­˜å—ä¸­ï¼Œç®—æ˜¯ä¸ªdouble check&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¬¬26è¡Œï¼Œå°†è¯¥MemoryBlockä¸­çš„ç©ºé—²å—ä¸ªæ•°åŠ 1&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¬¬27-29è¡Œï¼Œç±»ä¼¼äºé“¾è¡¨çš„æ’å…¥ï¼Œå°†æ–°é‡Šæ”¾çš„å†…å­˜å—çš„ç´¢å¼•æ”¾å…¥é“¾è¡¨å¤´ï¼Œè€Œå…¶å†…éƒ¨çš„æŒ‡å‘ä¸‹ä¸€ä¸ªå¯ç”¨å†…å­˜å—&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç°åœ¨ä¸¾ä¸ªä¾‹å­ï¼Œä»¥ä¾¿äºç†è§£ï¼Œå‡è®¾åœ¨ä¸€å¼€å§‹æœ‰5ä¸ªç©ºé—²å—ï¼Œå…¶ä¸­å‰ä¸‰ä¸ªç©ºé—²å—éƒ½åˆ†é…å‡ºå»äº†ï¼Œé‚£ä¹ˆæ­¤æ—¶ï¼Œç©ºé—²å—é“¾è¡¨å¦‚ä¸‹:&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;4-&amp;gt;5ï¼Œå…¶ä¸­first_free = 4&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç„¶ååœ¨æŸä¸€ä¸ªæ—¶åˆ»ï¼Œç¬¬1å—é‡Šæ”¾äº†ï¼Œé‚£ä¹ˆé‡Šæ”¾å½’è¿˜ä¹‹åï¼Œå¦‚ä¸‹:&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;1-&amp;gt;4-&amp;gt;5ï¼Œå…¶ä¸­first_free = 1&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å†…å­˜é‡Šæ”¾æµç¨‹å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.24267782426778242&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHiaA3xxTGkIcH0JjQo83fJ8J4yBIuzbEK5AjAZuHJqenicOVEJrUDPG2FuBvtAvpMLLxyAvMFCJlNgw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;956&quot;/&gt;&lt;figcaption&gt;&lt;span/&gt;å†…å­˜é‡Šæ”¾&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;é‡Šæ”¾å†…å­˜æ± &lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;free_memory_pool&lt;/span&gt;&lt;span&gt;(MemoryPoolÂ *mp)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â MemoryBlockÂ *mbÂ =Â mp-&amp;gt;first_block;&lt;br/&gt;&lt;br/&gt;Â &lt;span&gt;if&lt;/span&gt;(mbÂ !=Â &lt;span&gt;NULL&lt;/span&gt;)Â {&lt;br/&gt;Â Â &lt;span&gt;while&lt;/span&gt;(mb-&amp;gt;nextÂ !=Â &lt;span&gt;NULL&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â s_memory_blockÂ *delete_blockÂ =Â mb;&lt;br/&gt;Â Â Â mbÂ =Â mb-&amp;gt;next;&lt;br/&gt;&lt;br/&gt;Â Â Â &lt;span&gt;free&lt;/span&gt;(delete_block);&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;free&lt;/span&gt;(mb);&lt;br/&gt;Â }&lt;br/&gt;Â Â &lt;br/&gt;Â &lt;span&gt;free&lt;/span&gt;(mp);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6286594761171033&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHiaA3xxTGkIcH0JjQo83fJ8JQJdI2lMWZJNicSsvZjSJksaKcsTL2fSQnjcHsOiaJ6IdKEMgdK0Fyv5g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1298&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šå›¾æ˜¯ä¸€ä¸ªå®Œæ•´çš„åˆ†é…å’Œé‡Šæ”¾ç¤ºæ„å›¾ï¼Œä¸‹é¢ï¼Œæˆ‘ç»“åˆä»£ç æ¥åˆ†æï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;(a)æ­¥ï¼Œåˆ›å»ºäº†ä¸€ä¸ªMemoryPoolç»“æ„ä½“&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;obj_size = 4ä»£è¡¨æœ¬å†…å­˜æ± åˆ†é…çš„å†…å­˜å—å¤§å°ä¸º4&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;init_size = 5ä»£è¡¨åˆ›å»ºå†…å­˜æ± çš„æ—¶å€™ï¼Œç¬¬ä¸€å—MemoryBlockçš„ç©ºé—²å†…å­˜å—ä¸ªæ•°ä¸º5&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;grow_size = 5ä»£è¡¨å½“ç”³è¯·å†…å­˜çš„æ—¶å€™ï¼Œå¦‚æœæ²¡æœ‰ç©ºé—²å†…å­˜ï¼Œåˆ™åˆ›å»ºçš„æ–°çš„MemoryBlockçš„ç©ºé—²å†…å­˜å—ä¸ªæ•°ä¸º5&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;(b)æ­¥ï¼Œåˆ†é…å‡ºå»ä¸€å—å†…å­˜&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;æ­¤æ—¶ï¼Œfree_sizeå³è¯¥MemoryBlockä¸­å¯ç”¨ç©ºé—²å—ä¸ªæ•°ä¸º4&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;first_free = 1ï¼Œä»£è¡¨å°†å†…å­˜å—åˆ†é…å‡ºå»ä¹‹åï¼Œä¸‹ä¸€ä¸ªå¯ç”¨çš„å†…å­˜å—çš„indexä¸º1&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;(c)æ­¥ï¼Œåˆ†é…å‡ºå»ä¸€å—å†…å­˜&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;æ­¤æ—¶ï¼Œfree_sizeå³è¯¥MemoryBlockä¸­å¯ç”¨ç©ºé—²å—ä¸ªæ•°ä¸º3&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;first_free = 2ï¼Œä»£è¡¨å°†å†…å­˜å—åˆ†é…å‡ºå»ä¹‹åï¼Œä¸‹ä¸€ä¸ªå¯ç”¨çš„å†…å­˜å—çš„indexä¸º2&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;(d)æ­¥ï¼Œåˆ†é…å‡ºå»ä¸€å—å†…å­˜&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;æ­¤æ—¶ï¼Œfree_sizeå³è¯¥MemoryBlockä¸­å¯ç”¨ç©ºé—²å—ä¸ªæ•°ä¸º2&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;first_free = 3ï¼Œä»£è¡¨å°†å†…å­˜å—åˆ†é…å‡ºå»ä¹‹åï¼Œä¸‹ä¸€ä¸ªå¯ç”¨çš„å†…å­˜å—çš„indexä¸º3&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;(e)æ­¥ï¼Œåˆ†é…å‡ºå»ä¸€å—å†…å­˜&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;æ­¤æ—¶ï¼Œfree_sizeå³è¯¥MemoryBlockä¸­å¯ç”¨ç©ºé—²å—ä¸ªæ•°ä¸º1&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;first_free = 4ï¼Œä»£è¡¨å°†å†…å­˜å—åˆ†é…å‡ºå»ä¹‹åï¼Œä¸‹ä¸€ä¸ªå¯ç”¨çš„å†…å­˜å—çš„indexä¸º4&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;(f)æ­¥ï¼Œé‡Šæ”¾ç¬¬1ä¸ªå†…å­˜å—&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å°†free_sizeè¿›è¡Œ+1æ“ä½œ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;fire_freeå€¼ä¸ºæ­¤æ¬¡é‡Šæ”¾çš„å†…å­˜å—çš„ç´¢å¼•ï¼Œè€Œé‡Šæ”¾çš„å†…å­˜å—çš„ç´¢å¼•é‡Œé¢çš„å€¼åˆ™ä¸ºä¹‹å‰first_freeçš„å€¼(æ­¤å¤„é‡Šæ”¾ç”¨çš„å‰å·®æ³•)&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;(g)æ­¥ï¼Œé‡Šæ”¾ç¬¬3ä¸ªå†…å­˜å—&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å°†free_sizeè¿›è¡Œ+1æ“ä½œ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;fire_freeå€¼ä¸ºæ­¤æ¬¡é‡Šæ”¾çš„å†…å­˜å—çš„ç´¢å¼•ï¼Œè€Œé‡Šæ”¾çš„å†…å­˜å—çš„ç´¢å¼•é‡Œé¢çš„å€¼åˆ™ä¸ºä¹‹å‰first_freeçš„å€¼(æ­¤å¤„é‡Šæ”¾ç”¨çš„å‰å·®æ³•)&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;(h)æ­¥ï¼Œé‡Šæ”¾ç¬¬3ä¸ªå†…å­˜å—&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å°†free_sizeè¿›è¡Œ+1æ“ä½œ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;fire_freeå€¼ä¸ºæ­¤æ¬¡é‡Šæ”¾çš„å†…å­˜å—çš„ç´¢å¼•ï¼Œè€Œé‡Šæ”¾çš„å†…å­˜å—çš„ç´¢å¼•é‡Œé¢çš„å€¼åˆ™ä¸ºä¹‹å‰first_freeçš„å€¼(æ­¤å¤„é‡Šæ”¾ç”¨çš„å‰å·®æ³•)&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æµ‹è¯•&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æµ‹è¯•ä»£ç å¦‚ä¸‹:&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#&lt;span&gt;include&lt;/span&gt;Â &lt;span&gt;&quot;memory_pool.h&quot;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#&lt;span&gt;include&lt;/span&gt;Â &lt;span&gt;&amp;lt;sys/time.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#&lt;span&gt;include&lt;/span&gt;Â &lt;span&gt;&amp;lt;malloc.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#&lt;span&gt;include&lt;/span&gt;Â &lt;span&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â MemoryPoolÂ *mpÂ =Â memory_pool_create(&lt;span&gt;8&lt;/span&gt;);&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;timeval&lt;/span&gt;Â &lt;span&gt;start&lt;/span&gt;;&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;timeval&lt;/span&gt;Â &lt;span&gt;end&lt;/span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;int&lt;/span&gt;Â t[]Â =Â {&lt;span&gt;20000&lt;/span&gt;,Â &lt;span&gt;40000&lt;/span&gt;,Â &lt;span&gt;80000&lt;/span&gt;,Â &lt;span&gt;100000&lt;/span&gt;,Â &lt;span&gt;120000&lt;/span&gt;,Â &lt;span&gt;140000&lt;/span&gt;,Â &lt;span&gt;160000&lt;/span&gt;,Â &lt;span&gt;180000&lt;/span&gt;,Â &lt;span&gt;200000&lt;/span&gt;};&lt;br/&gt;Â Â &lt;span&gt;int&lt;/span&gt;Â sÂ =Â &lt;span&gt;sizeof&lt;/span&gt;(t)/&lt;span&gt;sizeof&lt;/span&gt;(&lt;span&gt;int&lt;/span&gt;);&lt;br/&gt;Â Â &lt;span&gt;for&lt;/span&gt;Â (&lt;span&gt;int&lt;/span&gt;Â iÂ =Â &lt;span&gt;0&lt;/span&gt;;Â iÂ &amp;lt;Â s;Â ++i)Â {&lt;br/&gt;Â Â Â Â gettimeofday(&amp;amp;start,Â &lt;span&gt;NULL&lt;/span&gt;);&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â (&lt;span&gt;int&lt;/span&gt;Â jÂ =Â &lt;span&gt;0&lt;/span&gt;;Â jÂ &amp;lt;Â t[i];Â ++j)Â {&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;void&lt;/span&gt;Â *pÂ =Â memory_alloc(mp);&lt;br/&gt;Â Â Â Â Â Â memory_free(mp,Â p);&lt;br/&gt;Â Â Â Â Â &lt;span&gt;//&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â &lt;span&gt;//voidÂ *pÂ =Â malloc(8);&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â &lt;span&gt;//free(p);&lt;/span&gt;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â gettimeofday(&amp;amp;end,Â &lt;span&gt;NULL&lt;/span&gt;);&lt;br/&gt;Â Â Â Â &lt;span&gt;long&lt;/span&gt;Â costÂ =Â &lt;span&gt;1000000&lt;/span&gt;Â *Â (end.tv_secÂ -Â start.tv_sec)Â +&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â end.tv_usecÂ -Â start.tv_usec;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;printf&lt;/span&gt;(&lt;span&gt;&quot;%ld\n&quot;&lt;/span&gt;,cost);&lt;br/&gt;Â Â }&lt;br/&gt;Â Â &lt;br/&gt;Â Â free_memory_pool(mp);&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ•°æ®å¯¹æ¯”å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5674418604651162&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHiaA3xxTGkIcH0JjQo83fJ8JNa1CjZCCP6ENL3UIk4XRSkB6F3oYMxQsVFbWZtfM9ic4mYicicpVn9icJA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;860&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œpoolçš„åˆ†é…æ•ˆç‡é«˜äºä¼ ç»Ÿçš„mallocæ–¹å¼ï¼Œæ€§èƒ½æé«˜æ¥è¿‘100%&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;æœ¬æµ‹è¯•ç»“æœä»…é’ˆå¯¹å½“æ—¶çš„é¡¹ç›®ï¼Œå¯¹å…¶ä»–æµ‹è¯•caseä¸å…·æœ‰æ™®éæ€§&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ‰©å±•&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æ–‡ç« å‰é¢ï¼Œæˆ‘ä»¬æœ‰æè¿‡æœ¬å†…å­˜æ± æ˜¯_å•çº¿ç¨‹ã€å›ºå®šå¤§å°çš„_ï¼Œä½†æ˜¯å¾€å¾€è¿™ç§è¿˜æ˜¯ä¸èƒ½æ»¡è¶³è¦æ±‚ï¼Œå¦‚ä¸‹å‡ ä¸ªåœºæ™¯&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;å¤šå›ºå®šå¤§å°ï¼ŒæŒ‡çš„æ˜¯æå‰é¢„æ”¯éœ€è¦ç”³è¯·çš„å†…å­˜å¤§å°&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å•çº¿ç¨‹å¤šå›ºå®šå¤§å°: é’ˆå¯¹æ­¤åœºæ™¯ï¼Œç”±äºå·²ç»é¢„çŸ¥äº†æ‰€ç”³è¯·çš„sizeï¼Œæ‰€ä»¥å¯ä»¥é’ˆå¯¹æ¯ä¸ªsizeåˆ›å»ºä¸€ä¸ªå†…å­˜æ± &lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤šçº¿ç¨‹å›ºå®šå¤§å°ï¼šé’ˆå¯¹æ­¤åœºæ™¯ï¼Œæœ‰ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ¡ˆ&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ä½¿ç”¨ThreadLocalCache&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ¯ä¸ªçº¿ç¨‹åˆ›å»ºä¸€ä¸ªå†…å­˜æ± &lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä½¿ç”¨åŠ é”ï¼Œæ“ä½œå…¨å±€å”¯ä¸€å†…å­˜æ± (æ¯æ¬¡åŠ é”è§£é”è€—æ—¶100nså·¦å³)&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤šçº¿ç¨‹å¤šå›ºå®šå¤§å°ï¼šé’ˆå¯¹æ­¤åœºæ™¯ï¼Œå¯ä»¥ç»“åˆä¸Šè¿°ä¸¤ä¸ªæ–¹æ¡ˆï¼Œå³&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ä½¿ç”¨ThreadCacheï¼Œæ¯ä¸ªçº¿ç¨‹å†…åˆ›å»ºå¤šå›ºå®šå¤§å°çš„å†…å­˜æ± &lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ¯ä¸ªçº¿ç¨‹å†…åˆ›å»ºä¸€ä¸ªå¤šå›ºå®šå¤§å°çš„å†…å­˜æ± &lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä½¿ç”¨åŠ é”ï¼Œæ“ä½œå…¨å±€å”¯ä¸€å†…å­˜æ± (æ¯æ¬¡åŠ é”è§£é”è€—æ—¶100nså·¦å³)&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;ä¸Šè¿°å‡ ç§æ–¹æ¡ˆï¼Œä»…ä»…æ˜¯åœ¨ä½¿ç”¨å›ºå®šå¤§å°å†…å­˜æ± åŸºç¡€ä¸Šè¿›è¡Œçš„æ‰©å±•ï¼Œå…·ä½“çš„æ–¹æ¡ˆï¼Œéœ€è¦æ ¹æ®å…·ä½“æƒ…å†µæ¥å…·ä½“åˆ†æ&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç»“è¯­&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬æ–‡ä¸»è¦è®²äº†å›ºå®šå¤§å°å†…å­˜æ± çš„å®ç°æ–¹å¼ï¼Œå› ä¸ºå®ç°æ–¹æ¡ˆçš„å±€é™æ€§ï¼Œæ­¤å†…å­˜æ± è®¾è®¡æ–¹æ¡ˆä»…é€‚ç”¨äºæ¯æ¬¡ç”³è¯·éƒ½æ˜¯ç‰¹å®šå¤§å°çš„åœºæ™¯ã€‚è™½ç„¶åœ¨æ‰©å±•éƒ¨åˆ†åšäº†éƒ¨åˆ†æ€ç»´å‘æ•£ï¼Œä½†å› ä¸ºæœªåšå……åˆ†çš„æ•°æ®å¯¹æ¯”ï¼Œæ‰€ä»¥ä»…é™äºæ€ç»´æ‰©æ•£ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›®å‰ï¼Œå¼€æºçš„å†…å­˜åˆ†é…åº“å¾ˆå¤šï¼Œæ¯”è¾ƒä¼˜ç§€çš„æœ‰è°·æ­Œçš„tcmallocä»¥åŠå¾®è½¯çš„mimallocï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±é¡¹ç›®çš„éœ€æ±‚åœºæ™¯ï¼Œé€‰æ‹©åˆé€‚çš„å†…å­˜åˆ†é…åº“ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»Šå¤©çš„æ–‡ç« å°±åˆ°è¿™é‡Œï¼Œä¸‹æœŸè§ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;æœ¬æ–‡æ‰€è®²çš„å†…å­˜æ± æºç åœ°å€ï¼š&lt;/p&gt;&lt;p&gt;https://github.com/namelij/fixedsize_memorypool&lt;/p&gt;&lt;p&gt;åˆ«å¿˜äº†ç»™ä¸ªstarå“¦ğŸ˜&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>