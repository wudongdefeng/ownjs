<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>1c22add75b0a22ea45854c9ff0193706</guid>
<title>蚂蚁测试用例自动生成工具正式开源，带你一键玩转测试用例自动生成！</title>
<link>https://toutiao.io/k/2fq1e2n</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section&gt;&lt;p&gt;&lt;span/&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.4255555555555556&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/I8SfHxT94hUw7zHOGfWaTCP1MApOPw9PlCuiaEuibibE7gfUdu129cIY6lUdcTEzgRvibmkHcgnboUmaqH2SzLRUyQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1800&quot;/&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;测试用例自动生成是近年来质量与效能的研究热点方向，无论是学术界的相关研究还是工业界的探索实践，我们都可以看到大家对于通过用例自动生成来进行研发提效的期许与探索。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;蚂蚁测试用例自动生成&lt;/span&gt;&lt;/strong&gt;（Auto-Unit-Test-Case-Generator）是由蚂蚁集团技术风险部质量技术团队研发的一款单元测试用例自动生成产品。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;基于学术界现有科研成果，针对实际业务中落地所面临的难点与挑战，Auto-Unit-Test-Case-Generator提出了一系列创新性算法，最终实现了&lt;strong&gt;&lt;span&gt;单测覆盖率&amp;gt;60%&lt;/span&gt;&lt;/strong&gt;、&lt;strong&gt;&lt;span&gt;稳定性&amp;gt;99%&lt;/span&gt;&lt;/strong&gt;的高效自动生成能力。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;目前&lt;span&gt;Auto-Unit-Test-Case-Generator&lt;/span&gt;&lt;strong&gt;&lt;span&gt;已开源至Github，期待大家的使用和共建！&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;（👉复制链接到浏览器访问：&lt;/p&gt;&lt;p&gt;https://github.com/TRaaSStack/auto-unit-test-case-generator）&lt;/p&gt;&lt;p&gt;&lt;span&gt;*点击文末&lt;/span&gt;&lt;span&gt;阅读原文&lt;/span&gt;&lt;span&gt;即可直接跳转&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.1503268&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_gif/I8SfHxT94hUw7zHOGfWaTCP1MApOPw9PMkeSwSsibibbAeSKraSrUOZUr3osEpwl0UkJLKwBp9Gxuca6dLh7Tapw/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;306&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;Auto-Unit-Test-Case-Generator 核心能力&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;使用Auto-Unit-Test-Case-Generator，能够在无人介入的情况下自动生成&lt;span&gt;&lt;strong&gt;高覆盖率、高有效性&lt;/strong&gt;&lt;/span&gt;的单元测试用例集，&lt;span&gt;&lt;strong&gt;智能化提升质量水位、提高研发效能&lt;/strong&gt;&lt;/span&gt;。相较于已有的测试用例生成工具，Auto-Unit-Test-Case-Generator生成的测试用例在覆盖率、有效性、可读性都有提升。 &lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Auto-Unit-Test-Case-Generator的核心能力包括：&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;1&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;适配Spring框架&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;目前业界大量的JAVA工程使用Spring框架，Auto-Unit-Test-Case-Generator能够&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;自动适配Spring工程的结构&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;，对需要隔离的服务进行提前mock，确保生成的用例可以正常运行。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;2&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;复杂业务场景生成&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;在业界的实际系统中，往往需要自动生成的用例能够覆盖复杂业务场景。Auto-Unit-Test-Case-Generator对用例数据生成的算法进行了优化，使得相较于传统的随机搜索算法(Random Search Algorithm)&lt;span&gt;&lt;strong&gt;能够达到更高的分支命中能力&lt;/strong&gt;&lt;/span&gt;。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;3&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;高可读的用例结构&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;我们推荐将自动生成的单测用例合入工程代码库中进行持续CI，因此要求自动生成的用例具备高可读性。Auto-Unit-Test-Case-Generator在进行用例生成过程中结合了最优调用序列算法，使得自动生成的&lt;span&gt;&lt;strong&gt;用例结构合理、语义可读&lt;/strong&gt;&lt;/span&gt;。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;同时，我们在蚂蚁内部同时也在探索实践&lt;span&gt;&lt;strong&gt;自动生成单测用例的问题发现能力&lt;/strong&gt;&lt;/span&gt;，通过生成异常场景用例发现NPE等严重的代码问题。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;内部孵化完成后，后续也会及时开源至Github，欢迎大家关注我们的Github项目！🧐&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;蚂蚁内部实践效果&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;目前，在蚂蚁内部已经有&lt;span&gt;&lt;strong&gt;超过1000个工程&lt;/strong&gt;&lt;/span&gt;在使用Auto-Unit-Test-Case-Generator进行用例生成。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;以下通过某个域的14个系统行覆盖率对比情况，来说明Auto-Unit-Test-Case-Generator生成用例的效果。&lt;/p&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5054705&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/I8SfHxT94hUw7zHOGfWaTCP1MApOPw9P0fNA56OpWXmpk6nMOuOxb0ljscCAOb4JNxt250NdUibxBT5RicaicANbg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;914&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;其中，历史存量手写的覆盖率（橙色）平均覆盖率54%，Auto-Unit-Test-Case-Generator自动生成覆盖率（绿色）平均覆盖率为65%，与历史存量手写用例合并汇总覆盖率（蓝色）达到81%；经过自动生成的单测补充，&lt;strong&gt;&lt;span&gt;覆盖率提升了25%+&lt;/span&gt;&lt;/strong&gt;，提升效果显著。&lt;/p&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;带你一键玩转用例自动生成&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;了解测试用例自动生成的效果后，您是不是也想在自己的工程上尝试一把呢？&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;这里我们提供了IDEA插件的使用方式，&lt;strong&gt;&lt;span&gt;带您在五分钟内完成一次用例生成，体验用例生成带来的效能提升！&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;01&lt;/strong&gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;strong&gt;&lt;span&gt;构建Auto-Unit-Test-Case-Generator&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;在进行IDEA插件操作之前，我们首先需要构建出最新版本的Auto-Unit-Test-Case-Generator。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;构建过程如下：&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;构建完成后，在您本地的mvn仓库内即可发现构建好的用例生成jar包，用例生成jar包的默认路径：${user.home}/.m2/repository/org/smartut/smartut-master/1.1.0/smartut-master-1.1.0.jar。&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;02&lt;/strong&gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;strong&gt;&lt;span&gt;安装IDEA插件&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;构建完成Auto-Unit-Test-Case-Generator后，我们接下来进行IDEA插件的安装。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;安装过程如下：&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;下载IDEA插件安装包，安装包地址：https://github.com/TRaaSStack/auto-unit-test-case-generator/blob/main/tools/smart_ut_intellij_plugin.zip（如下载失败可通过clone代码仓获取）&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;本地解压缩smart_ut_intellij_plugin.zip后得到IDEA插件jar包：smart_ut_intellij.jar&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;打开IntelliJ IDEA -&amp;gt; Preferences -&amp;gt; Plugins -&amp;gt; Install Plugin from Disk。在弹出的选择框中，选择smart_ut_intellij.jar。&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5537037&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/I8SfHxT94hUw7zHOGfWaTCP1MApOPw9P6sKJmsxcLn8ZV4Law49T9wa4zwpW20JYuBIoFicCjTclxat4TxqZicIw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;重启IDEA插件。重启后打开您希望进行用例生成的Java项目，右键单击任意java文件，即可看到用例生成的入口。&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.625&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/I8SfHxT94hUw7zHOGfWaTCP1MApOPw9PdibibAMd4IjYj9fCtTUicuOdjYibw5ib3yicokgv6Hd9vvDiaH7ogNlLqbdug/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;03&lt;/strong&gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;strong&gt;&lt;span&gt;一键生成用例&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;IDEA插件安装完成后，您就可以在您的本地工程中尽情使用用例生成了。在任意待生成的java文件上右键选择&quot;SmartUT用例生成&quot;，即可看到如下图所示的用例生成页面。&lt;/p&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5537037&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/I8SfHxT94hUw7zHOGfWaTCP1MApOPw9PEPPBJg3LYh6BVKHjMHbtWOPYhTf8aBTJCNWrFNWfLsMK3oy7Fw2uyA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;用例生成页面中，只需要填写三项：&lt;span&gt;&lt;strong&gt;用例生成jar包路径、生成结果存放路径、生成时间&lt;/strong&gt;&lt;/span&gt;。&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;填写完成后点击开始，即可开始用例生成！&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5537037&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/I8SfHxT94hUw7zHOGfWaTCP1MApOPw9PqYJBfhbx6Urdj2zwSGxMVNK6JHZS8iaiaB4dqXmNiaCVJt2evDB3HiaGxw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;用例生成完成后，在对应目录下可以找到生成的测试用例文件。&lt;/p&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5537037&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/I8SfHxT94hUw7zHOGfWaTCP1MApOPw9PkhC23Pk6sSN1hO8derJ7crwg8p9dNSFKIRRKqEeY94TKjlMuaVyUnA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;联系我们&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;如果您对测试用例自动生成感兴趣&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;或者在使用插件进行用例自动生成时遇到了任何问题&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;都欢迎随时联系我们~&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;钉钉群号：44961098&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;也可通过扫下方二维码扫码加入&lt;/span&gt;&lt;strong&gt;&lt;span&gt;微信/钉钉群&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;期待您的意见和建议！&lt;/span&gt;&lt;/p&gt;&lt;p&gt;👇👇👇&lt;/p&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.49375&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/I8SfHxT94hUw7zHOGfWaTCP1MApOPw9PkdE9wWqbcfZYo76LDQQRgYlmRvMNruZGcGjJhyGhNWkO7UibiaoeUDKg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;320&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;微信群&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.2890625&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/I8SfHxT94hUw7zHOGfWaTCP1MApOPw9Po7QtP6b42LEIR9Bb1uvC6IGQmayCUds2Nu7ekAvdj35NbXQD7pUBsw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;384&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;钉钉群&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;br/&gt;&lt;mp-common-profile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-weui-theme=&quot;light&quot; data-id=&quot;MzU3NzczMDI4Ng==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/sz_mmbiz_png/I8SfHxT94hU6P7Y4EMhbdHr7WDSMZt9wjEZfR28HDTcOac5u4A8ibiaIR2Miad2cCILq1FCH6NHZesEoOXLeuBopA/0?wx_fmt=png&quot; data-nickname=&quot;蚂蚁研发效能&quot; data-alias=&quot;AntLinkE&quot; data-signature=&quot;蚂蚁集团研发效能部有业界领先的工程和学术造诣，致力于为蚂蚁和多家金融企业提供核电级的全生命周期研发产品。&quot; data-from=&quot;0&quot; data-is_biz_ban=&quot;0&quot;/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>098f9d631836299bc628f284659c7c59</guid>
<title>处理RTC服务中的back-pressure</title>
<link>https://toutiao.io/k/n2rrjyo</link>
<content:encoded>&lt;div&gt;&lt;div&gt;
&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>5de22a189d04eba6140abe0076447928</guid>
<title>gobackup数据备份</title>
<link>https://toutiao.io/k/srsaupn</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;article class=&quot;markdown-body entry-content container-lg&quot; itemprop=&quot;text&quot;&gt;&lt;p align=&quot;center&quot; dir=&quot;auto&quot;&gt;
&lt;a target=&quot;_blank&quot; rel=&quot;noopener noreferrer nofollow&quot; href=&quot;https://user-images.githubusercontent.com/5518/205909959-12b92929-4ac5-4bb5-9111-6f9a3ed76cf6.png&quot;&gt;&lt;img src=&quot;https://user-images.githubusercontent.com/5518/205909959-12b92929-4ac5-4bb5-9111-6f9a3ed76cf6.png&quot;/&gt;&lt;/a&gt;
&lt;/p&gt;&lt;h1 align=&quot;center&quot; dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-gobackup&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#gobackup&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;GoBackup&lt;/h1&gt;
&lt;p align=&quot;center&quot; dir=&quot;auto&quot;&gt;CLI tool for backup your databases, files to FTP / SCP / S3 / GCS and other cloud storages.&lt;/p&gt;
&lt;p align=&quot;center&quot; dir=&quot;auto&quot;&gt;
   &lt;a href=&quot;https://github.com/gobackup/gobackup/actions?query=workflow%3AGo&quot;&gt;&lt;img src=&quot;https://github.com/gobackup/gobackup/workflows/Go/badge.svg&quot; alt=&quot;Build Status&quot;/&gt;&lt;/a&gt;
   &lt;a href=&quot;https://github.com/gobackup/gobackup/releases&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/0602f8a473912d1542c5d240387dd9a2de692c199227767dccffabc533507cf8/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f676f6261636b75702f676f6261636b75703f6c6162656c3d56657273696f6e26636f6c6f723d31&quot; alt=&quot;GitHub release (latest by date)&quot; data-canonical-src=&quot;https://img.shields.io/github/v/release/gobackup/gobackup?label=Version&amp;amp;color=1&quot;/&gt;&lt;/a&gt;
   &lt;a href=&quot;https://hub.docker.com/r/huacnlee/gobackup&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/8320392a5273185f3b42e21c8f8ccc8b7d6bf8330b1e0ae7dc682cccbf477eb1/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f762f687561636e6c65652f676f6261636b75703f6c6162656c3d446f636b657226636f6c6f723d626c7565&quot; alt=&quot;Docker Image Version (latest server)&quot; data-canonical-src=&quot;https://img.shields.io/docker/v/huacnlee/gobackup?label=Docker&amp;amp;color=blue&quot;/&gt;&lt;/a&gt;
   &lt;a href=&quot;https://formulae.brew.sh/formula/gobackup&quot; rel=&quot;nofollow&quot;&gt;&lt;img alt=&quot;homebrew version&quot; src=&quot;https://camo.githubusercontent.com/5b740206b66b98f900f7fdc1e2cf9f15bcba44ed2e75df33a47b83760d3aaa32/68747470733a2f2f696d672e736869656c64732e696f2f686f6d65627265772f762f676f6261636b75703f636f6c6f723d73756363657373266c6162656c3d42726577&quot; data-canonical-src=&quot;https://img.shields.io/homebrew/v/gobackup?color=success&amp;amp;label=Brew&quot;/&gt;&lt;/a&gt;
&lt;/p&gt;
&lt;p dir=&quot;auto&quot;/&gt;
&lt;p dir=&quot;auto&quot;&gt;GoBackup is a fullstack backup tool design for application servers, to backup your databases, files to cloud storages (Local disk, FTP, SCP, S3, GCS, Aliyun OSS ...).&lt;/p&gt;
&lt;blockquote&gt;
&lt;p dir=&quot;auto&quot;&gt;Inspired by &lt;a href=&quot;https://github.com/backup/backup&quot;&gt;backup/backup&lt;/a&gt; and replace it for without Ruby dependency.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p dir=&quot;auto&quot;&gt;&lt;a href=&quot;https://asciinema.org/a/543564&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/dd8f07f44fbfeabdc903f44208e0e0f9cf6eb62a26f8cb7554f26734ca9acbe3/68747470733a2f2f61736369696e656d612e6f72672f612f3534333536342e737667&quot; alt=&quot;asciicast&quot; data-canonical-src=&quot;https://asciinema.org/a/543564.svg&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p dir=&quot;auto&quot;&gt;You can write a config file, run &lt;code&gt;gobackup perform&lt;/code&gt; command by once to dump database as file, archive config files, and then package them into a single file.&lt;/p&gt;
&lt;p dir=&quot;auto&quot;&gt;It&#x27;s allow you store the backup file to local, FTP, SCP, S3 or other cloud storages.&lt;/p&gt;
&lt;p dir=&quot;auto&quot;&gt;GoBackup 是一个类似 &lt;a href=&quot;https://github.com/backup/backup&quot;&gt;backup/backup&lt;/a&gt; 的一站式备份工具，为中小型服务器／个人服务器而设计，配合内置的计划任务，实现定时备份的目的。&lt;/p&gt;
&lt;p dir=&quot;auto&quot;&gt;使用 GoBackup 你可以通过一个简单的配置文件，一次（执行一个命令）将服务器上重要的（数据库、配置文件）东西导出、打包压缩，并备份到指定目的地（如：本地路径、FTP、云存储...）。&lt;/p&gt;
&lt;p dir=&quot;auto&quot;&gt;&lt;a href=&quot;https://gobackup.github.io&quot; rel=&quot;nofollow&quot;&gt;https://gobackup.github.io&lt;/a&gt;&lt;/p&gt;
&lt;h2 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-features&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#features&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Features&lt;/h2&gt;
&lt;ul dir=&quot;auto&quot;&gt;
&lt;li&gt;No dependencies.&lt;/li&gt;
&lt;li&gt;Multiple Databases source support.&lt;/li&gt;
&lt;li&gt;Multiple Storage type support.&lt;/li&gt;
&lt;li&gt;Archive paths or files into a tar.&lt;/li&gt;
&lt;li&gt;Split large backup file into multiple parts.&lt;/li&gt;
&lt;li&gt;Run as daemon to backup in schedully.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-databases&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#databases&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Databases&lt;/h3&gt;
&lt;ul dir=&quot;auto&quot;&gt;
&lt;li&gt;MySQL&lt;/li&gt;
&lt;li&gt;PostgreSQL&lt;/li&gt;
&lt;li&gt;Redis - &lt;code&gt;mode: sync/copy&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;MongoDB&lt;/li&gt;
&lt;li&gt;SQLite&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-storages&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#storages&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Storages&lt;/h3&gt;

&lt;h2 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-notifier&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#notifier&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Notifier&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p dir=&quot;auto&quot;&gt;since: 1.5.0&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p dir=&quot;auto&quot;&gt;Send notification when backup has success or failed.&lt;/p&gt;
&lt;ul dir=&quot;auto&quot;&gt;
&lt;li&gt;Mail (SMTP)&lt;/li&gt;
&lt;li&gt;Webhook&lt;/li&gt;
&lt;li&gt;Discord&lt;/li&gt;
&lt;li&gt;Slack&lt;/li&gt;
&lt;li&gt;Feishu&lt;/li&gt;
&lt;li&gt;DingTalk&lt;/li&gt;
&lt;li&gt;GitHub (Comment on Issue)&lt;/li&gt;
&lt;li&gt;Telegram&lt;/li&gt;
&lt;li&gt;AWS SES&lt;/li&gt;
&lt;li&gt;Postmark&lt;/li&gt;
&lt;li&gt;SendGrid&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-installation&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#installation&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Installation&lt;/h2&gt;
&lt;div class=&quot;highlight highlight-source-shell notranslate position-relative overflow-auto&quot; dir=&quot;auto&quot; data-snippet-clipboard-copy-content=&quot;curl -sSL https://gobackup.github.io/install | sh&quot;&gt;&lt;pre&gt;curl -sSL https://gobackup.github.io/install &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; sh&lt;/pre&gt;&lt;/div&gt;
&lt;p dir=&quot;auto&quot;&gt;after that, you will get &lt;code&gt;/usr/local/bin/gobackup&lt;/code&gt; command.&lt;/p&gt;
&lt;h3 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-install-via-homebrew&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#install-via-homebrew&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Install via Homebrew&lt;/h3&gt;

&lt;div class=&quot;highlight highlight-source-shell notranslate position-relative overflow-auto&quot; dir=&quot;auto&quot; data-snippet-clipboard-copy-content=&quot;$ gobackup -h&amp;#10;NAME:&amp;#10;   gobackup - Backup your databases, files to FTP / SCP / S3 / GCS and other cloud storages.&amp;#10;&amp;#10;USAGE:&amp;#10;   gobackup [global options] command [command options] [arguments...]&amp;#10;&amp;#10;VERSION:&amp;#10;   1.3.0&amp;#10;&amp;#10;COMMANDS:&amp;#10;   perform&amp;#10;   start    Start as daemon&amp;#10;   run      Run GoBackup&amp;#10;   help, h  Shows a list of commands or help for one command&amp;#10;&amp;#10;GLOBAL OPTIONS:&amp;#10;   --help, -h     show help (default: false)&amp;#10;   --version, -v  print the version (default: false)&quot;&gt;&lt;pre&gt;$ gobackup -h
NAME:
   gobackup - Backup your databases, files to FTP / SCP / S3 / GCS and other cloud storages.

USAGE:
   gobackup [global options] &lt;span class=&quot;pl-c1&quot;&gt;command&lt;/span&gt; [command options] [arguments...]

VERSION:
   1.3.0

COMMANDS:
   perform
   start    Start as daemon
   run      Run GoBackup
   help, h  Shows a list of commands or &lt;span class=&quot;pl-c1&quot;&gt;help&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; one &lt;span class=&quot;pl-c1&quot;&gt;command&lt;/span&gt;

GLOBAL OPTIONS:
   --help, -h     show &lt;span class=&quot;pl-c1&quot;&gt;help&lt;/span&gt; (default: false)
   --version, -v  print the version (default: false)&lt;/pre&gt;&lt;/div&gt;
&lt;h2 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-configuration&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#configuration&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Configuration&lt;/h2&gt;
&lt;p dir=&quot;auto&quot;&gt;GoBackup will seek config files in:&lt;/p&gt;
&lt;ul dir=&quot;auto&quot;&gt;
&lt;li&gt;~/.gobackup/gobackup.yml&lt;/li&gt;
&lt;li&gt;/etc/gobackup/gobackup.yml&lt;/li&gt;
&lt;/ul&gt;
&lt;p dir=&quot;auto&quot;&gt;Example config: &lt;a href=&quot;https://github.com/huacnlee/gobackup/blob/master/gobackup_test.yml&quot;&gt;gobackup_test.yml&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-yaml notranslate position-relative overflow-auto&quot; dir=&quot;auto&quot; data-snippet-clipboard-copy-content=&quot;models:&amp;#10;  gitlab:&amp;#10;    compress_with:&amp;#10;      type: tgz&amp;#10;    storages:&amp;#10;      scp1:&amp;#10;        type: scp&amp;#10;        path: ~/backup&amp;#10;        host: your-host.com&amp;#10;        private_key: ~/.ssh/id_rsa&amp;#10;        username: ubuntu&amp;#10;        password: password&amp;#10;        timeout: 300&amp;#10;    databases:&amp;#10;      gitlab:&amp;#10;        type: mysql&amp;#10;        host: localhost&amp;#10;        port: 3306&amp;#10;        database: gitlab_production&amp;#10;        username: root&amp;#10;        password:&amp;#10;        additional_options: --single-transaction --quick&amp;#10;      gitlab_redis:&amp;#10;        type: redis&amp;#10;        mode: sync&amp;#10;        rdb_path: /var/db/redis/dump.rdb&amp;#10;        invoke_save: true&amp;#10;        password:&amp;#10;    archive:&amp;#10;      includes:&amp;#10;        - /home/git/.ssh/&amp;#10;        - /etc/mysql/my.conf&amp;#10;        - /etc/nginx/nginx.conf&amp;#10;        - /etc/nginx/conf.d&amp;#10;        - /etc/redis/redis.conf&amp;#10;        - /etc/logrotate.d/&amp;#10;      excludes:&amp;#10;        - /home/ubuntu/.ssh/known_hosts&amp;#10;        - /etc/logrotate.d/syslog&amp;#10;  gitlab_repos:&amp;#10;    storages:&amp;#10;      local:&amp;#10;        type: local&amp;#10;        path: /data/backups/gitlab-repos/&amp;#10;    archive:&amp;#10;      includes:&amp;#10;        - /home/git/repositories&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-ent&quot;&gt;models&lt;/span&gt;:
  &lt;span class=&quot;pl-ent&quot;&gt;gitlab&lt;/span&gt;:
    &lt;span class=&quot;pl-ent&quot;&gt;compress_with&lt;/span&gt;:
      &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;tgz&lt;/span&gt;
    &lt;span class=&quot;pl-ent&quot;&gt;storages&lt;/span&gt;:
      &lt;span class=&quot;pl-ent&quot;&gt;scp1&lt;/span&gt;:
        &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;scp&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;path&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;~/backup&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;host&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;your-host.com&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;private_key&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;~/.ssh/id_rsa&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;username&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;ubuntu&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;password&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;password&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;timeout&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;300&lt;/span&gt;
    &lt;span class=&quot;pl-ent&quot;&gt;databases&lt;/span&gt;:
      &lt;span class=&quot;pl-ent&quot;&gt;gitlab&lt;/span&gt;:
        &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;mysql&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;host&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;localhost&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;port&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;3306&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;database&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;gitlab_production&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;username&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;root&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;password&lt;/span&gt;:
        &lt;span class=&quot;pl-ent&quot;&gt;additional_options&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;--single-transaction --quick&lt;/span&gt;
      &lt;span class=&quot;pl-ent&quot;&gt;gitlab_redis&lt;/span&gt;:
        &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;redis&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;mode&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;sync&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;rdb_path&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;/var/db/redis/dump.rdb&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;invoke_save&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;password&lt;/span&gt;:
    &lt;span class=&quot;pl-ent&quot;&gt;archive&lt;/span&gt;:
      &lt;span class=&quot;pl-ent&quot;&gt;includes&lt;/span&gt;:
        - &lt;span class=&quot;pl-s&quot;&gt;/home/git/.ssh/&lt;/span&gt;
        - &lt;span class=&quot;pl-s&quot;&gt;/etc/mysql/my.conf&lt;/span&gt;
        - &lt;span class=&quot;pl-s&quot;&gt;/etc/nginx/nginx.conf&lt;/span&gt;
        - &lt;span class=&quot;pl-s&quot;&gt;/etc/nginx/conf.d&lt;/span&gt;
        - &lt;span class=&quot;pl-s&quot;&gt;/etc/redis/redis.conf&lt;/span&gt;
        - &lt;span class=&quot;pl-s&quot;&gt;/etc/logrotate.d/&lt;/span&gt;
      &lt;span class=&quot;pl-ent&quot;&gt;excludes&lt;/span&gt;:
        - &lt;span class=&quot;pl-s&quot;&gt;/home/ubuntu/.ssh/known_hosts&lt;/span&gt;
        - &lt;span class=&quot;pl-s&quot;&gt;/etc/logrotate.d/syslog&lt;/span&gt;
  &lt;span class=&quot;pl-ent&quot;&gt;gitlab_repos&lt;/span&gt;:
    &lt;span class=&quot;pl-ent&quot;&gt;storages&lt;/span&gt;:
      &lt;span class=&quot;pl-ent&quot;&gt;local&lt;/span&gt;:
        &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;local&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;path&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;/data/backups/gitlab-repos/&lt;/span&gt;
    &lt;span class=&quot;pl-ent&quot;&gt;archive&lt;/span&gt;:
      &lt;span class=&quot;pl-ent&quot;&gt;includes&lt;/span&gt;:
        - &lt;span class=&quot;pl-s&quot;&gt;/home/git/repositories&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-usage&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#usage&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Usage&lt;/h2&gt;
&lt;h3 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-perform-backup&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#perform-backup&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Perform backup&lt;/h3&gt;

&lt;h3 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-backup-schedule&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#backup-schedule&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Backup schedule&lt;/h3&gt;
&lt;p dir=&quot;auto&quot;&gt;GoBackup built in a daemon mode, you can use &lt;code&gt;gobackup start&lt;/code&gt; to start it.&lt;/p&gt;
&lt;p dir=&quot;auto&quot;&gt;You can configure the &lt;code&gt;schedule&lt;/code&gt; for each models, it will run backup task at the time you set.&lt;/p&gt;
&lt;h4 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-for-example&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#for-example&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;For example&lt;/h4&gt;
&lt;p dir=&quot;auto&quot;&gt;Configure your schedule in &lt;code&gt;gobackup.yml&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-yaml notranslate position-relative overflow-auto&quot; dir=&quot;auto&quot; data-snippet-clipboard-copy-content=&quot;models:&amp;#10;  my_backup:&amp;#10;    schedule:&amp;#10;      # At 04:05 on Sunday.&amp;#10;      cron: &amp;quot;5 4 * * sun&amp;quot;&amp;#10;    storages:&amp;#10;      local:&amp;#10;        type: local&amp;#10;        path: /path/to/backups&amp;#10;    databases:&amp;#10;      mysql:&amp;#10;        type: mysql&amp;#10;        host: localhost&amp;#10;        port: 3306&amp;#10;        database: my_database&amp;#10;        username: root&amp;#10;        password: password&amp;#10;  other_backup:&amp;#10;    # At 04:05 on every day.&amp;#10;    schedule:&amp;#10;      every: &amp;quot;1day&amp;quot;,&amp;#10;      at: &amp;quot;04:05&amp;quot;&amp;#10;    storages:&amp;#10;      local:&amp;#10;        type: local&amp;#10;        path: /path/to/backups&amp;#10;    databases:&amp;#10;      mysql:&amp;#10;        type: mysql&amp;#10;        host: localhost&amp;#10;        port: 3306&amp;#10;        database: my_database&amp;#10;        username: root&amp;#10;        password: password&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-ent&quot;&gt;models&lt;/span&gt;:
  &lt;span class=&quot;pl-ent&quot;&gt;my_backup&lt;/span&gt;:
    &lt;span class=&quot;pl-ent&quot;&gt;schedule&lt;/span&gt;:
      &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; At 04:05 on Sunday.&lt;/span&gt;
      &lt;span class=&quot;pl-ent&quot;&gt;cron&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;5 4 * * sun&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;pl-ent&quot;&gt;storages&lt;/span&gt;:
      &lt;span class=&quot;pl-ent&quot;&gt;local&lt;/span&gt;:
        &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;local&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;path&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;/path/to/backups&lt;/span&gt;
    &lt;span class=&quot;pl-ent&quot;&gt;databases&lt;/span&gt;:
      &lt;span class=&quot;pl-ent&quot;&gt;mysql&lt;/span&gt;:
        &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;mysql&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;host&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;localhost&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;port&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;3306&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;database&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;my_database&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;username&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;root&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;password&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;password&lt;/span&gt;
  &lt;span class=&quot;pl-ent&quot;&gt;other_backup&lt;/span&gt;:
    &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; At 04:05 on every day.&lt;/span&gt;
    &lt;span class=&quot;pl-ent&quot;&gt;schedule&lt;/span&gt;:
      &lt;span class=&quot;pl-ent&quot;&gt;every&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;1day&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;pl-s&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;pl-ent&quot;&gt;at&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;04:05&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;pl-ent&quot;&gt;storages&lt;/span&gt;:
      &lt;span class=&quot;pl-ent&quot;&gt;local&lt;/span&gt;:
        &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;local&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;path&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;/path/to/backups&lt;/span&gt;
    &lt;span class=&quot;pl-ent&quot;&gt;databases&lt;/span&gt;:
      &lt;span class=&quot;pl-ent&quot;&gt;mysql&lt;/span&gt;:
        &lt;span class=&quot;pl-ent&quot;&gt;type&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;mysql&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;host&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;localhost&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;port&lt;/span&gt;: &lt;span class=&quot;pl-c1&quot;&gt;3306&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;database&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;my_database&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;username&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;root&lt;/span&gt;
        &lt;span class=&quot;pl-ent&quot;&gt;password&lt;/span&gt;: &lt;span class=&quot;pl-s&quot;&gt;password&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-start-daemon&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#start-daemon&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Start daemon&lt;/h3&gt;

&lt;blockquote&gt;
&lt;p dir=&quot;auto&quot;&gt;NOTE: If you wants start without daemon, use &lt;code&gt;gobackup run&lt;/code&gt; instead.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-signal-handling&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#signal-handling&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Signal handling&lt;/h3&gt;
&lt;p dir=&quot;auto&quot;&gt;GoBackup will handle the following signals:&lt;/p&gt;
&lt;ul dir=&quot;auto&quot;&gt;
&lt;li&gt;&lt;code&gt;HUP&lt;/code&gt; - Hot reload configuration.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;QUIT&lt;/code&gt; - Graceful shutdown.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;highlight highlight-source-shell notranslate position-relative overflow-auto&quot; dir=&quot;auto&quot; data-snippet-clipboard-copy-content=&quot;$ ps aux | grep gobackup&amp;#10;jason            20443   0.0  0.1 409232800   8912   ??  Ss    7:47PM   0:00.02 gobackup run&amp;#10;&amp;#10;# Reload configuration&amp;#10;$ kill -HUP 20443&amp;#10;# Exit daemon&amp;#10;$ kill -QUIT 20443&quot;&gt;&lt;pre&gt;$ ps aux &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; grep gobackup
jason            20443   0.0  0.1 409232800   8912   &lt;span class=&quot;pl-k&quot;&gt;??&lt;/span&gt;  Ss    7:47PM   0:00.02 gobackup run

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; Reload configuration&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;kill&lt;/span&gt; -HUP 20443
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; Exit daemon&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;kill&lt;/span&gt; -QUIT 20443&lt;/pre&gt;&lt;/div&gt;
&lt;h2 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-license&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#license&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;License&lt;/h2&gt;
&lt;p dir=&quot;auto&quot;&gt;MIT&lt;/p&gt;
&lt;/article&gt;
          &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>f81305983ad6c47d52877254cf57b320</guid>
<title>非正式全面解析 NebulaGraph 中 Session 管理</title>
<link>https://toutiao.io/k/jfwjzed</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;post&quot; itemprop=&quot;articleBody&quot;&gt;
          &lt;p&gt;&lt;img src=&quot;https://nebula-website-cn.oss-cn-hangzhou.aliyuncs.com/nebula-blog/session-manage-00.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;NebulaGraph 论坛最近有些讨论帖，各种姿势来问 NebulaGraph Session 管理相关的事情，我寻思这也不是一个法子，还是来写一篇文章来讲述下 NebulaGraph 中的 Session 管理。由于本文设定为非正式的 Session 讲解，所以本文主要分为理论和实操部分，在实操部分主要摘录了论坛用户的一些关于 Session 的理解，以及本人对 Session 相关问题的解答。&lt;/p&gt;
&lt;h2&gt;
&lt;a name=&quot;h-1&quot; class=&quot;anchor&quot; href=&quot;#h-1&quot;/&gt;客户端交互流程&lt;/h2&gt;
&lt;p&gt;在之前的源码解读系列的&lt;a href=&quot;https://nebula-graph.com.cn/posts/nebula-graph-source-code-reading-07&quot;&gt;客户端&lt;/a&gt;部分，我们讲过 Session 相关的知识点，这里来回顾下。&lt;/p&gt;
&lt;p&gt;通过下图你能了解客户端和服务端连接时，背后的工作原理：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://nebula-website-cn.oss-cn-hangzhou.aliyuncs.com/nebula-blog/session-overview.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;简单来说，整个 workflow 由 ConnectionPool、Session、Connection 构成，用户通过 Session 和计算引擎进行交互，但真正和计算引擎 graphd 发生数据处理关系的是连接池当中的 Connection。&lt;/p&gt;
&lt;h3&gt;
&lt;a name=&quot;connection-pool-2&quot; class=&quot;anchor&quot; href=&quot;#connection-pool-2&quot;/&gt;Connection Pool&lt;/h3&gt;
&lt;p&gt;在连接池初始化阶段，用户使用 Session 之前需要先创建并初始化一个连接池 ConnectionPool，连接池会在初始化时会对用户指定的 NebulaGraph 服务所在地址建立连接 Connection。如果在用集群部署方式部署了多个 Graph 服务，连接池会&lt;strong&gt;采用轮询的策略来平衡负载&lt;/strong&gt;，对每个地址建立近乎等量的连接。&lt;/p&gt;
&lt;p&gt;连接池如何管理连接 Connection 呢？连接池内维护了两个队列，&lt;strong&gt;空闲连接队列&lt;/strong&gt; idleConnectionQueue 和&lt;strong&gt;使用中的连接队列&lt;/strong&gt; activeConnectionQueue，连接池会定期检测过期空闲的连接并将其关闭。这两个队列在增删元素的时候会&lt;strong&gt;通过读写锁来确保多线程执行的正确性&lt;/strong&gt;。当 Session 向连接池请求连接时，会检查空闲连接队列中是否有可用的连接，如果有则直接返回给 Session 供用户使用；如果没有可用连接并且当前的总连接数没有超过配置中限定的最大连接数 maxConnSize，则新建一个连接给 Session；如果已经到达了最大连接数的限制，返回错误。&lt;/p&gt;
&lt;p&gt;大概流程和下面流程图类似：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://nebula-website-cn.oss-cn-hangzhou.aliyuncs.com/nebula-blog/session-overview-connection-manager.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;一般来说，只有在客户端程序退出时才需要关闭连接池，在关闭时池中所有的连接都会被断开。&lt;/p&gt;
&lt;h3&gt;
&lt;a name=&quot;session-3&quot; class=&quot;anchor&quot; href=&quot;#session-3&quot;/&gt;Session&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://nebula-website-cn.oss-cn-hangzhou.aliyuncs.com/nebula-blog/session-overview-session-workflow.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;客户端会话 Session 通过连接池 ConnectionPool 生成，用户需要提供用户密码进行校验，在校验成功后用户会获得一个 Session 实例，并通过 Session 中的连接与服务端进行通信。最常用的接口是 &lt;code&gt;execute()&lt;/code&gt;，如果在执行时发生错误，客户端会检查错误的类型。如果是网络原因或者和 session 通信的 graph 服务 down 掉，客户端会&lt;strong&gt;自动重连&lt;/strong&gt;，尝试绑定一个可用的连接重发请求。&lt;/p&gt;
&lt;p&gt;需要注意的是，&lt;strong&gt;一个 Session 不支持被多个线程同时使用&lt;/strong&gt;，正确的方式是用多个线程申请多个 Session，每个线程使用一个 Session。Session 被释放时，其持有的连接会被放回到连接池的空闲连接队列 idleConnectionQueue中，以便于之后被其他 Session 复用。&lt;/p&gt;
&lt;h3&gt;
&lt;a name=&quot;connection-4&quot; class=&quot;anchor&quot; href=&quot;#connection-4&quot;/&gt;Connection&lt;/h3&gt;
&lt;p&gt;连接 Connection 每个连接实例都是等价的，可以被任意 Session 持有。&lt;strong&gt;这样设计的目的是这些连接可以被不同的 Session 复用&lt;/strong&gt;，减少反复开关 Transport 的开销。连接会将客户端的请求发送到服务端并将其结果返回给 Session。&lt;/p&gt;
&lt;h2&gt;
&lt;a name=&quot;h-5&quot; class=&quot;anchor&quot; href=&quot;#h-5&quot;/&gt;社区用户实践&lt;/h2&gt;
&lt;p&gt;这里主要收录了用户在使用连接池、Session 遇到的比较有代表性的问题。&lt;/p&gt;
&lt;h3&gt;
&lt;a name=&quot;session-6&quot; class=&quot;anchor&quot; href=&quot;#session-6&quot;/&gt;如何获取多个 Session&lt;/h3&gt;
&lt;p&gt;可通过 &lt;a href=&quot;https://discuss.nebula-graph.com.cn/t/topic/3765&quot;&gt;https://discuss.nebula-graph.com.cn/t/topic/3765&lt;/a&gt; 查看完整的交流对话。&lt;/p&gt;
&lt;p&gt;Sharry2021gu 提问：连接池怎么会有多个 Session 呢？用来测试并发性能。像下面的 pipeline 里怎么才能获取不同的 session？&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://nebula-website-cn.oss-cn-hangzhou.aliyuncs.com/nebula-blog/session-overview-01.jpeg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;答：因为你给 Session 包了一层，你直接用 &lt;a href=&quot;https://github.com/vesoft-inc/nebula-java&quot;&gt;java-client&lt;/a&gt; 的 ConnectionPool 拿 Session 就可以了，ConnectionPool 是支持多线程调用 getSession 的接口。&lt;/p&gt;
&lt;h3&gt;
&lt;a name=&quot;session-7&quot; class=&quot;anchor&quot; href=&quot;#session-7&quot;/&gt;对 Session 管理的理解&lt;/h3&gt;
&lt;p&gt;下面部分收录社区用户 wuyou 对 Session 管理的理解，你可以通过 &lt;a href=&quot;https://discuss.nebula-graph.com.cn/t/topic/8777&quot;&gt;https://discuss.nebula-graph.com.cn/t/topic/8777&lt;/a&gt; 了解全部内容。这块的内容同上面客户端交互流程有所重叠，不过都是需要注意的使用点。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;NebulaPool 的 &lt;code&gt;maxConnSize&lt;/code&gt; 是最大连接数，一个 Session 只能使用一个连接，可以简单地认为 maxConnSize 就是这个 NebulaPool 里面支持的最大 Session 数量，适当调整就行了；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;NebulaPool 使用常规的单例就行，应用程序结束时记得关闭就行了。Session 的话可以在 graph 配置中设置 &lt;code&gt;session_idle_timeout_secs&lt;/code&gt; 让其自动销毁就行了；&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Session 的创建和销毁是有开销的，会有五次 IO 交互：Client 和 Graphd 会有 3 次 IO 交互以及 Graphd 和 Metad 有 2 次 IO 交互。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Client 和 Graphd IO 交互：
&lt;ol&gt;
&lt;li&gt;第一次是检测连接是否是正常的；&lt;/li&gt;
&lt;li&gt;第二次是做一次认证获取 sessionId；&lt;/li&gt;
&lt;li&gt;第三次是 USE SPACE；&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;Graphd 和 Metad IO 交互：
&lt;ol&gt;
&lt;li&gt;第一次是生成 sessionId；&lt;/li&gt;
&lt;li&gt;第二次是获取 space 信息。&lt;br/&gt;
所以，一般情况下不建议每次请求都从 pool getSession，execute 之后再 release，这会有性能开销，而且还会在服务端生成很多只用一次的 Session。&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Session 是线程不安全的，多个线程使用同一 Session 会直接报错。应对多线程可以自己维护一份 Session 列表。如果是多个 space 的话，可以针对每个 space 维护一份 session 列表。这一点目前需要自己实现，暂时没有官方的好的方式。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;
&lt;a name=&quot;session-8&quot; class=&quot;anchor&quot; href=&quot;#session-8&quot;/&gt;自维护 Session&lt;/h3&gt;
&lt;p&gt;wuyou 提问：官方说需要自己维护 Session 是什么意思，感觉 NebulaPool 已经在维护了，应用层只需要每次直接 getSession 就完事儿了，每次执行完 nGQL 之后 session.release 释放掉 Session，让其回到 pool 中就可以。&lt;/p&gt;
&lt;p&gt;答：这里解释下如何理解需要自己维护 Session。NebulaPool 维护的只是 Connection，Connection 是无状态的。Session 的维护是指&lt;strong&gt;多线程使用的情况下复用 Session 做多次查询&lt;/strong&gt;，比如：Session 内部分 sessionInUse 和 idleSession队列，新建的 Session 放 idle 队列，用的时候起一个线程持有这个 Session 并且移到 inUse 队列，用完之后不用释放 Session 放回 idleSession 供下次使用。&lt;/p&gt;
&lt;h3&gt;
&lt;a name=&quot;connection-9&quot; class=&quot;anchor&quot; href=&quot;#connection-9&quot;/&gt;Connection 的释放&lt;/h3&gt;
&lt;p&gt;wuyou 提问：放回连接池的 Connection 什么时候会被释放？&lt;/p&gt;
&lt;p&gt;答：有两种方式来释放 Connection。第一种，手动关闭连接池时里面的连接会被释放。另外一种是，连接池里的对象池通过 &lt;code&gt;setSoftMinEvictableIdleTimeMillis()&lt;/code&gt; 自动定期释放。&lt;/p&gt;
&lt;h3&gt;
&lt;a name=&quot;h-10&quot; class=&quot;anchor&quot; href=&quot;#h-10&quot;/&gt;空闲会话超时设置&lt;/h3&gt;
&lt;p&gt;可通过 &lt;a href=&quot;https://discuss.nebula-graph.com.cn/t/topic/9037&quot;&gt;https://discuss.nebula-graph.com.cn/t/topic/9037&lt;/a&gt; 查看完整的交流对话。&lt;/p&gt;
&lt;p&gt;Ian 提问：设置空闲会话超时时间为 8 小时，是以 SHOW SESSIONS 结果的 update_time 来加 8 小时吗？如果一直在用，就不会过期？&lt;/p&gt;
&lt;p&gt;答：是 udpate_time + 8H。使用过程中 session 的 idle time 会更新，如果你一直在用会话就不会过期。&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;&lt;strong&gt;谢谢你读完本文&lt;/strong&gt; (///▽///)&lt;/p&gt;
&lt;p&gt;要来近距离体验一把图数据库吗？现在可以用用 NebulaGraph Cloud 来搭建自己的图数据系统哟，快来节省大量的部署安装时间来搞定业务吧~ NebulaGraph 阿里云计算巢现 30 天免费使用中，&lt;a href=&quot;http://c.nxw.so/6LPjy&quot;&gt;点击链接&lt;/a&gt;来用用图数据库吧~&lt;/p&gt;
&lt;p&gt;想看源码的小伙伴可以前往 GitHub 阅读、使用、(^з^)-☆ star 它 → &lt;a href=&quot;http://c.nxw.so/8yTlk&quot;&gt;GitHub&lt;/a&gt;；和其他的 NebulaGraph 用户一起交流图数据库技术和应用技能，留下&lt;a href=&quot;http://c.nxw.so/9jvQN&quot;&gt;「你的名片」&lt;/a&gt;一起玩耍呢~&lt;/p&gt;
&lt;hr/&gt;
&lt;small&gt;这是一个从 &lt;a href=&quot;https://nebula-graph.com.cn/posts/informal-analysis-of-session-in-nebulagraph/&quot;&gt;https://nebula-graph.com.cn/posts/informal-analysis-of-session-in-nebulagraph/&lt;/a&gt; 下的原始话题分离的讨论话题&lt;/small&gt;
        &lt;/div&gt;

        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>7dd289d971985b9530ffc235a0c8c5c5</guid>
<title>网络编程与通信原理</title>
<link>https://toutiao.io/k/2y1a1gm</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content js_underline_content             autoTypeSetting24psection&amp;#10;            &quot; id=&quot;js_content&quot;&gt;&lt;blockquote&gt;&lt;p&gt;总感觉这个概念，和研发有点脱节；&lt;/p&gt;&lt;/blockquote&gt;&lt;h1&gt;&lt;span&gt;一、基础概念&lt;/span&gt;&lt;/h1&gt;&lt;p&gt;不同设备之间通过网络进行数据传输，并且基于通用的网络协议作为多种设备的兼容标准，称为网络通信；&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.365625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uUIibyNXbAvAoib7m7G4GlDclV9PadtLGYTgklC6mWwbFicwUGiaTfPyx6Riab7HFe3spkwhx5TdvScchD2jicVQyNYg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;以C/S架构来看，在一次请求当中，客户端和服务端进行数据传输的交互时，在不同阶段和层次中需要遵守的网络通信协议也不一样；&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.29765625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uUIibyNXbAvAoib7m7G4GlDclV9PadtLGYGVV0UX36r9hytECm3b2y8TJtMJqszXu1MRpNF4Ysh0eRIiauUJxm5TQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;应用层：HTTP超文本传输协议，基于TCP/IP通信协议来传递数据；&lt;/p&gt;&lt;p&gt;传输层：TCP传输控制协议，采用三次握手的方式建立连接，形成数据传输通道；&lt;/p&gt;&lt;p&gt;网络层：IP协议，作用是把各种传输的数据包发送给请求的接收方；&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.4015625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uUIibyNXbAvAoib7m7G4GlDclV9PadtLGYc92b765SFrTeU4yaAgZpibeRnpBySJlGwfC8f4bzf7v9D0d97cTF0rw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;通信双方进行交互时，发送方数据在各层传输时，每通过一层就会添加该层的首部信息；接收方与之相反，每通过一次就会删除该层的首部信息；&lt;/p&gt;&lt;h1&gt;&lt;span&gt;二、JDK源码&lt;/span&gt;&lt;span/&gt;&lt;/h1&gt;&lt;p&gt;在&lt;code&gt;java.net&lt;/code&gt;源码包中，提供了与网络编程相关的基础API；&lt;/p&gt;&lt;h2&gt;&lt;span&gt;1、InetAddress&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;封装了对IP地址的相关操作，在使用该API之前可以先查看本机的&lt;code&gt;hosts&lt;/code&gt;的映射，Linux系统中在&lt;code&gt;/etc/hosts&lt;/code&gt;路径下；&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;import&lt;/span&gt; java.net.InetAddress;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;TestInet&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(String[] args)&lt;/span&gt; &lt;span&gt;throws&lt;/span&gt; Exception &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;// 获取本机 InetAddress 对象&lt;/span&gt;&lt;br/&gt;        InetAddress localHost = InetAddress.getLocalHost();&lt;br/&gt;        printInetAddress(localHost);&lt;br/&gt;        &lt;span&gt;// 获取指定域名 InetAddress 对象&lt;/span&gt;&lt;br/&gt;        InetAddress inetAddress = InetAddress.getByName(&lt;span&gt;&quot;www.baidu.com&quot;&lt;/span&gt;);&lt;br/&gt;        printInetAddress(inetAddress);&lt;br/&gt;        &lt;span&gt;// 获取本机配置 InetAddress 对象&lt;/span&gt;&lt;br/&gt;        InetAddress confAddress = InetAddress.getByName(&lt;span&gt;&quot;nacos-service&quot;&lt;/span&gt;);&lt;br/&gt;        printInetAddress(confAddress);&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;printInetAddress&lt;/span&gt; &lt;span&gt;(InetAddress inetAddress)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;InetAddress：&quot;&lt;/span&gt;+inetAddress);&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;主机名：&quot;&lt;/span&gt;+inetAddress.getHostName());&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;IP地址：&quot;&lt;/span&gt;+inetAddress.getHostAddress());&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2&gt;&lt;span&gt;2、URL&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;统一资源定位符，URL一般包括：协议、主机名、端口、路径、查询参数、锚点等，路径+查询参数，也被称为文件；&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.3328125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uUIibyNXbAvAoib7m7G4GlDclV9PadtLGY2an414JAktNEsKx8QVoCWmvaxMKA1yA0koA1bficAlY39iaaKr79ycKg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;import&lt;/span&gt; java.net.URL;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;TestURL&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(String[] args)&lt;/span&gt; &lt;span&gt;throws&lt;/span&gt; Exception &lt;/span&gt;{&lt;br/&gt;        URL url = &lt;span&gt;new&lt;/span&gt; URL(&lt;span&gt;&quot;https://www.baidu.com:80/s?wd=Java#bd&quot;&lt;/span&gt;) ;&lt;br/&gt;        printURL(url);&lt;br/&gt;    }&lt;br/&gt;    &lt;span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;printURL&lt;/span&gt; &lt;span&gt;(URL url)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;协议：&quot;&lt;/span&gt; + url.getProtocol());&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;域名：&quot;&lt;/span&gt; + url.getHost());&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;端口：&quot;&lt;/span&gt; + url.getPort());&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;路径：&quot;&lt;/span&gt; + url.getPath());&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;参数：&quot;&lt;/span&gt; + url.getQuery());&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;文件：&quot;&lt;/span&gt; + url.getFile());&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;锚点：&quot;&lt;/span&gt; + url.getRef());&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2&gt;&lt;span&gt;3、HttpURLConnection&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;作为URLConnection的抽象子类，用来处理针对Http协议的请求，可以设置连接超时、读取超时、以及请求的其他属性，是服务间通信的常用方式；&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;TestHttp&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(String[] args)&lt;/span&gt; &lt;span&gt;throws&lt;/span&gt; Exception &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;// 访问 网址 内容&lt;/span&gt;&lt;br/&gt;        URL url = &lt;span&gt;new&lt;/span&gt; URL(&lt;span&gt;&quot;https://www.jd.com&quot;&lt;/span&gt;);&lt;br/&gt;        HttpURLConnection httpUrlConnection = (HttpURLConnection) url.openConnection();&lt;br/&gt;        printHttp(httpUrlConnection);&lt;br/&gt;&lt;br/&gt;        &lt;span&gt;// 请求 服务 接口&lt;/span&gt;&lt;br/&gt;        URL api = &lt;span&gt;new&lt;/span&gt; URL(&lt;span&gt;&quot;http://localhost:8082/info/99&quot;&lt;/span&gt;);&lt;br/&gt;        HttpURLConnection apiConnection = (HttpURLConnection) api.openConnection();&lt;br/&gt;        apiConnection.setRequestMethod(&lt;span&gt;&quot;GET&quot;&lt;/span&gt;);&lt;br/&gt;        apiConnection.setConnectTimeout(&lt;span&gt;3000&lt;/span&gt;);&lt;br/&gt;        printHttp(apiConnection);&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;printHttp&lt;/span&gt; &lt;span&gt;(HttpURLConnection httpUrlConnection)&lt;/span&gt; &lt;span&gt;throws&lt;/span&gt; Exception&lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;try&lt;/span&gt; (InputStream inputStream = httpUrlConnection.getInputStream()) {&lt;br/&gt;            BufferedReader bufferedReader = &lt;span&gt;new&lt;/span&gt; BufferedReader(&lt;span&gt;new&lt;/span&gt; InputStreamReader(inputStream, StandardCharsets.UTF_8));&lt;br/&gt;            String line ;&lt;br/&gt;            &lt;span&gt;while&lt;/span&gt; ((line = bufferedReader.readLine()) != &lt;span&gt;null&lt;/span&gt;) {&lt;br/&gt;                System.out.println(line);&lt;br/&gt;            }&lt;br/&gt;        }&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h1&gt;&lt;span&gt;三、通信编程&lt;/span&gt;&lt;span/&gt;&lt;/h1&gt;&lt;h2&gt;&lt;span&gt;1、Socket&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;Socket也被称为套接字，是两台设备之间通信的端点，会把网络连接当成流处理，则数据以IO形式传输，这种方式在当前被普遍采用；&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.35703125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uUIibyNXbAvAoib7m7G4GlDclV9PadtLGYhBPGmCLA4HRAqqv7UJpFE7a1UAAQUicAybvASN8FqC2DYbaczgSc6xg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;从网络编程直接跳到Socket套接字，概念上确实有较大跨度，概念过度抽象时，可以看看源码的核心结构，在理解时会轻松很多，在JDK中重点看SocketImpl抽象类；&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;abstract&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;SocketImpl&lt;/span&gt; &lt;span&gt;implements&lt;/span&gt; &lt;span&gt;SocketOptions&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;    &lt;span&gt;// Socket对象，客户端和服务端&lt;/span&gt;&lt;br/&gt;    Socket socket = &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;    ServerSocket serverSocket = &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;    &lt;span&gt;// 套接字的文件描述对象&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;protected&lt;/span&gt; FileDescriptor fd;&lt;br/&gt;    &lt;span&gt;// 套接字的路由IP地址&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;protected&lt;/span&gt; InetAddress address;&lt;br/&gt;    &lt;span&gt;// 套接字连接到的远程主机上的端口号&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; port;&lt;br/&gt;    &lt;span&gt;// 套接字连接到的本地端口号&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; localport;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;套接字的抽象实现类，是实现套接字的所有类的公共超类，可以用于创建客户端和服务器套接字；&lt;/p&gt;&lt;p&gt;所以到底如何理解Socket概念？从抽象类中来看，套接字就是指代网络通讯中系统资源的核心标识，比如通讯方IP地址、端口、状态等；&lt;/p&gt;&lt;h2&gt;&lt;span&gt;2、SocketServer&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;创建Socket服务端，并且在8989端口监听，接收客户端的连接请求和相关信息，并且响应客户端，发送指定的数据；&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;SocketServer&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(String[] args)&lt;/span&gt; &lt;span&gt;throws&lt;/span&gt; Exception &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;// 1、创建Socket服务端&lt;/span&gt;&lt;br/&gt;        ServerSocket serverSocket = &lt;span&gt;new&lt;/span&gt; ServerSocket(&lt;span&gt;8989&lt;/span&gt;);&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;socket-server:8989，waiting connect...&quot;&lt;/span&gt;);&lt;br/&gt;        &lt;span&gt;// 2、方法阻塞等待，直到有客户端连接&lt;/span&gt;&lt;br/&gt;        Socket socket = serverSocket.accept();&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;socket-server:8989，get connect:&quot;&lt;/span&gt;+socket.getPort());&lt;br/&gt;        &lt;span&gt;// 3、输入流，输出流&lt;/span&gt;&lt;br/&gt;        InputStream inStream = socket.getInputStream();&lt;br/&gt;        OutputStream outStream = socket.getOutputStream();&lt;br/&gt;        &lt;span&gt;// 4、数据接收和响应&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;byte&lt;/span&gt;[] buf = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[&lt;span&gt;1024&lt;/span&gt;];&lt;br/&gt;        &lt;span&gt;int&lt;/span&gt; readLen = &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;        &lt;span&gt;while&lt;/span&gt; ((readLen=inStream.read(buf)) != -&lt;span&gt;1&lt;/span&gt;){&lt;br/&gt;            &lt;span&gt;// 接收数据&lt;/span&gt;&lt;br/&gt;            String readVar = &lt;span&gt;new&lt;/span&gt; String(buf, &lt;span&gt;0&lt;/span&gt;, readLen) ;&lt;br/&gt;            &lt;span&gt;if&lt;/span&gt; (&lt;span&gt;&quot;exit&quot;&lt;/span&gt;.equals(readVar)){&lt;br/&gt;                &lt;span&gt;break&lt;/span&gt; ;&lt;br/&gt;            }&lt;br/&gt;            System.out.println(&lt;span&gt;&quot;recv：&quot;&lt;/span&gt;+readVar+&lt;span&gt;&quot;；time：&quot;&lt;/span&gt;+DateTime.now().toString(DatePattern.NORM_DATETIME_PATTERN));&lt;br/&gt;            &lt;span&gt;// 响应数据&lt;/span&gt;&lt;br/&gt;            outStream.write((&lt;span&gt;&quot;resp-time：&quot;&lt;/span&gt;+DateTime.now().toString(DatePattern.NORM_DATETIME_PATTERN)).getBytes());&lt;br/&gt;        }&lt;br/&gt;        &lt;span&gt;// 5、资源关闭&lt;/span&gt;&lt;br/&gt;        outStream.close();&lt;br/&gt;        inStream.close();&lt;br/&gt;        socket.close();&lt;br/&gt;        serverSocket.close();&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;socket-server:8989，exit...&quot;&lt;/span&gt;);&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;需要注意的是步骤2输出的端口号是随机不确定的，结合&lt;code&gt;jps&lt;/code&gt;和&lt;code&gt;lsof -i tcp:port&lt;/code&gt;命令查看进程和端口号的占用情况；&lt;/p&gt;&lt;h2&gt;&lt;span&gt;3、SocketClient&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;创建Socket客户端，并且连接到服务端，读取命令行输入的内容并发送到服务端，并且输出服务端的响应数据；&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;SocketClient&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(String[] args)&lt;/span&gt; &lt;span&gt;throws&lt;/span&gt; Exception &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;// 1、创建Socket客户端&lt;/span&gt;&lt;br/&gt;        Socket socket = &lt;span&gt;new&lt;/span&gt; Socket(InetAddress.getLocalHost(), &lt;span&gt;8989&lt;/span&gt;);&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;server-client，connect to:8989&quot;&lt;/span&gt;);&lt;br/&gt;        &lt;span&gt;// 2、输入流，输出流&lt;/span&gt;&lt;br/&gt;        OutputStream outStream = socket.getOutputStream();&lt;br/&gt;        InputStream inStream = socket.getInputStream();&lt;br/&gt;        &lt;span&gt;// 3、数据发送和响应接收&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;int&lt;/span&gt; readLen = &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;        &lt;span&gt;byte&lt;/span&gt;[] buf = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[&lt;span&gt;1024&lt;/span&gt;];&lt;br/&gt;        &lt;span&gt;while&lt;/span&gt; (&lt;span&gt;true&lt;/span&gt;){&lt;br/&gt;            &lt;span&gt;// 读取命令行输入&lt;/span&gt;&lt;br/&gt;            BufferedReader bufReader = &lt;span&gt;new&lt;/span&gt; BufferedReader(&lt;span&gt;new&lt;/span&gt; InputStreamReader(System.in));&lt;br/&gt;            String iptLine = bufReader.readLine();&lt;br/&gt;            &lt;span&gt;if&lt;/span&gt; (&lt;span&gt;&quot;exit&quot;&lt;/span&gt;.equals(iptLine)){&lt;br/&gt;                &lt;span&gt;break&lt;/span&gt;;&lt;br/&gt;            }&lt;br/&gt;            &lt;span&gt;// 发送数据&lt;/span&gt;&lt;br/&gt;            outStream.write(iptLine.getBytes());&lt;br/&gt;            &lt;span&gt;// 接收数据&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;if&lt;/span&gt; ((readLen = inStream.read(buf)) != -&lt;span&gt;1&lt;/span&gt;) {&lt;br/&gt;                System.out.println(&lt;span&gt;new&lt;/span&gt; String(buf, &lt;span&gt;0&lt;/span&gt;, readLen));&lt;br/&gt;            }&lt;br/&gt;        }&lt;br/&gt;        &lt;span&gt;// 4、资源关闭&lt;/span&gt;&lt;br/&gt;        inStream.close();&lt;br/&gt;        outStream.close();&lt;br/&gt;        socket.close();&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;socket-client，get exit command&quot;&lt;/span&gt;);&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;测试结果：整个流程在没有收到客户端的&lt;code&gt;exit&lt;/code&gt;退出指令前，会保持连接的状态，并且可以基于字节流模式，进行持续的数据传输；&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.34765625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uUIibyNXbAvAoib7m7G4GlDclV9PadtLGYHumg6u4icE7haqLiauHFenaqHYfbeR4aVXbAxu0BG4oyBroJHxia5ObQQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;h2&gt;&lt;span&gt;4、字符流使用&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;基于上述的基础案例，采用字符流的方式进行数据传输，客户端和服务端只进行一次简单的交互；&lt;/p&gt;&lt;pre&gt;&lt;code&gt;-- &lt;span&gt;1&lt;/span&gt;、客户端&lt;br/&gt;BufferedReader bufReader = &lt;span&gt;new&lt;/span&gt; BufferedReader(&lt;span&gt;new&lt;/span&gt; InputStreamReader(inStream));&lt;br/&gt;BufferedWriter bufWriter = &lt;span&gt;new&lt;/span&gt; BufferedWriter(&lt;span&gt;new&lt;/span&gt; OutputStreamWriter(outStream));&lt;br/&gt;&lt;span&gt;// 客户端发送数据&lt;/span&gt;&lt;br/&gt;bufWriter.write(&lt;span&gt;&quot;hello,server&quot;&lt;/span&gt;);&lt;br/&gt;bufWriter.newLine();&lt;br/&gt;bufWriter.flush();&lt;br/&gt;&lt;span&gt;// 客户端接收数据&lt;/span&gt;&lt;br/&gt;System.out.println(&lt;span&gt;&quot;client-read：&quot;&lt;/span&gt;+bufReader.readLine());&lt;br/&gt;&lt;br/&gt;-- &lt;span&gt;2&lt;/span&gt;、服务端&lt;br/&gt;BufferedReader bufReader = &lt;span&gt;new&lt;/span&gt; BufferedReader(&lt;span&gt;new&lt;/span&gt; InputStreamReader(inStream));&lt;br/&gt;BufferedWriter bufWriter = &lt;span&gt;new&lt;/span&gt; BufferedWriter(&lt;span&gt;new&lt;/span&gt; OutputStreamWriter(outStream));&lt;br/&gt;&lt;span&gt;// 服务端接收数据&lt;/span&gt;&lt;br/&gt;System.out.println(&lt;span&gt;&quot;server-read：&quot;&lt;/span&gt;+bufReader.readLine());&lt;br/&gt;&lt;span&gt;// 服务端响应数据&lt;/span&gt;&lt;br/&gt;bufWriter.write(&lt;span&gt;&quot;hello,client&quot;&lt;/span&gt;);&lt;br/&gt;bufWriter.newLine();&lt;br/&gt;bufWriter.flush();&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2&gt;&lt;span&gt;5、文件传输&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;基于上述的基础案例，客户端向服务端发送图片文件，服务端完成文件的读取和保存，在处理完成后给客户端发送结果描述；&lt;/p&gt;&lt;pre&gt;&lt;code&gt;-- &lt;span&gt;1&lt;/span&gt;、客户端&lt;br/&gt;&lt;span&gt;// 客户端发送图片&lt;/span&gt;&lt;br/&gt;FileInputStream fileStream = &lt;span&gt;new&lt;/span&gt; FileInputStream(&lt;span&gt;&quot;Local_File_Path/jvm.png&quot;&lt;/span&gt;);&lt;br/&gt;&lt;span&gt;byte&lt;/span&gt;[] bytes = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[&lt;span&gt;1024&lt;/span&gt;];&lt;br/&gt;&lt;span&gt;int&lt;/span&gt; i = &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;&lt;span&gt;while&lt;/span&gt; ((i = fileStream.read(bytes)) != -&lt;span&gt;1&lt;/span&gt;) {&lt;br/&gt;    outStream.write(bytes);&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;// 写入结束标记，禁用此套接字的输出流，之后再使用输出流会抛异常&lt;/span&gt;&lt;br/&gt;socket.shutdownOutput();&lt;br/&gt;&lt;span&gt;// 接收服务端响应结果&lt;/span&gt;&lt;br/&gt;System.out.println(&lt;span&gt;&quot;server-resp：&quot;&lt;/span&gt;+&lt;span&gt;new&lt;/span&gt; String(bytes,&lt;span&gt;0&lt;/span&gt;,readLen));&lt;br/&gt;&lt;br/&gt;-- &lt;span&gt;2&lt;/span&gt;、服务端&lt;br/&gt;&lt;span&gt;// 接收客户端图片&lt;/span&gt;&lt;br/&gt;FileOutputStream fileOutputStream = &lt;span&gt;new&lt;/span&gt; FileOutputStream(&lt;span&gt;&quot;Local_File_Path/new_jvm.png&quot;&lt;/span&gt;);&lt;br/&gt;&lt;span&gt;byte&lt;/span&gt;[] bytes = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[&lt;span&gt;1024&lt;/span&gt;];&lt;br/&gt;&lt;span&gt;int&lt;/span&gt; i = &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;&lt;span&gt;while&lt;/span&gt; ((i = inStream.read(bytes)) != -&lt;span&gt;1&lt;/span&gt;) {&lt;br/&gt;    fileOutputStream.write(bytes, &lt;span&gt;0&lt;/span&gt;, i);&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;// 响应客户端文件处理结果&lt;/span&gt;&lt;br/&gt;outStream.write(&lt;span&gt;&quot;file-save-success&quot;&lt;/span&gt;.getBytes());&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2&gt;&lt;span&gt;6、TCP协议&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;Socket网络编程是基于TCP协议的，TCP传输控制协议是一种面向连接的、可靠的、基于字节流的传输层通信协议，在上述案例中侧重基于流的数据传输，其中关于连接还涉及两个核心概念：&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.5453125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/uUIibyNXbAvAoib7m7G4GlDclV9PadtLGYN1bbEmrHvpgKHknVEC9q849ic45NA3uH74MTCVZVObgEYkwAf0Hd2UQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;三次握手&lt;/strong&gt;：建立连接的过程，在这个过程中进行了三次网络通信，当连接处于建立的状态，就可以进行正常的通信，即数据传输；&lt;strong&gt;四次挥手&lt;/strong&gt;：关闭连接的过程，调用&lt;code&gt;close&lt;/code&gt;方法，即连接使用结束，在这个过程中进行了四次网络通信；&lt;/p&gt;&lt;h1&gt;&lt;span&gt;四、Http组件&lt;/span&gt;&lt;span/&gt;&lt;/h1&gt;&lt;p&gt;在服务通信时依赖网络，而对于编程来说，更常见的是的Http的组件，在微服务架构中，涉及到Http组件工具有很多，例如Spring框架中的RestTemplate，Feign框架支持ApacheHttp和OkHttp；下面围绕几个常用的组件编写测试案例；&lt;/p&gt;&lt;h2&gt;&lt;span&gt;1、基础接口&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;@RestController&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;BizWeb&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@GetMapping&lt;/span&gt;(&lt;span&gt;&quot;/getApi/{id}&quot;&lt;/span&gt;)&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; Rep&amp;lt;Integer&amp;gt; &lt;span&gt;getApi&lt;/span&gt;&lt;span&gt;(@PathVariable Integer id)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;        log.info(&lt;span&gt;&quot;id={}&quot;&lt;/span&gt;,id);&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; Rep.ok(id) ;&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@GetMapping&lt;/span&gt;(&lt;span&gt;&quot;/getApi_v2/{id}&quot;&lt;/span&gt;)&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; Rep&amp;lt;Integer&amp;gt; &lt;span&gt;getApiV2&lt;/span&gt;&lt;span&gt;(HttpServletRequest request,&lt;br/&gt;                                 @PathVariable Integer id,&lt;br/&gt;                                 @RequestParam(&lt;span&gt;&quot;name&quot;&lt;/span&gt;)&lt;/span&gt; String name)&lt;/span&gt;{&lt;br/&gt;        String token = request.getHeader(&lt;span&gt;&quot;Token&quot;&lt;/span&gt;);&lt;br/&gt;        log.info(&lt;span&gt;&quot;token={},id={},name={}&quot;&lt;/span&gt;,token,id,name);&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; Rep.ok(id) ;&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@PostMapping&lt;/span&gt;(&lt;span&gt;&quot;/postApi&quot;&lt;/span&gt;)&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; Rep&amp;lt;IdKey&amp;gt; &lt;span&gt;postApi&lt;/span&gt;&lt;span&gt;(HttpServletRequest request,@RequestBody IdKey idKey)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;        String token = request.getHeader(&lt;span&gt;&quot;Token&quot;&lt;/span&gt;);&lt;br/&gt;        log.info(&lt;span&gt;&quot;token={},idKey={}&quot;&lt;/span&gt;, token,JSONUtil.toJsonStr(idKey));&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; Rep.ok(idKey) ;&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@PutMapping&lt;/span&gt;(&lt;span&gt;&quot;/putApi&quot;&lt;/span&gt;)&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; Rep&amp;lt;IdKey&amp;gt; &lt;span&gt;putApi&lt;/span&gt;&lt;span&gt;(@RequestBody IdKey idKey)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;        log.info(&lt;span&gt;&quot;idKey={}&quot;&lt;/span&gt;, JSONUtil.toJsonStr(idKey));&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; Rep.ok(idKey) ;&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@DeleteMapping&lt;/span&gt;(&lt;span&gt;&quot;/delApi/{id}&quot;&lt;/span&gt;)&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; Rep&amp;lt;Integer&amp;gt; &lt;span&gt;delApi&lt;/span&gt;&lt;span&gt;(@PathVariable Integer id)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;        log.info(&lt;span&gt;&quot;id={}&quot;&lt;/span&gt;,id);&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; Rep.ok(id) ;&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2&gt;&lt;span&gt;2、ApacheHttp&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;TestApacheHttp&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; String BASE_URL = &lt;span&gt;&quot;http://localhost:8083&quot;&lt;/span&gt; ;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(String[] args)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        BasicHeader header = &lt;span&gt;new&lt;/span&gt; BasicHeader(&lt;span&gt;&quot;Token&quot;&lt;/span&gt;,&lt;span&gt;&quot;ApacheSup&quot;&lt;/span&gt;) ;&lt;br/&gt;&lt;br/&gt;        &lt;span&gt;// 1、发送Get请求&lt;/span&gt;&lt;br/&gt;        Map&amp;lt;String,String&amp;gt; param = &lt;span&gt;new&lt;/span&gt; HashMap&amp;lt;&amp;gt;() ;&lt;br/&gt;        param.put(&lt;span&gt;&quot;name&quot;&lt;/span&gt;,&lt;span&gt;&quot;cicada&quot;&lt;/span&gt;) ;&lt;br/&gt;        Rep getRep = doGet(BASE_URL+&lt;span&gt;&quot;/getApi_v2/3&quot;&lt;/span&gt;,header,param, Rep&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;/span&gt;;&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;get：&quot;&lt;/span&gt;+getRep);&lt;br/&gt;&lt;br/&gt;        &lt;span&gt;// 2、发送Post请求&lt;/span&gt;&lt;br/&gt;        IdKey postBody = &lt;span&gt;new&lt;/span&gt; IdKey(&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;&quot;id-key-我&quot;&lt;/span&gt;) ;&lt;br/&gt;        Rep postRep = doPost (BASE_URL+&lt;span&gt;&quot;/postApi&quot;&lt;/span&gt;, header, postBody, Rep&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;/span&gt;;&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;post：&quot;&lt;/span&gt;+postRep);&lt;br/&gt;    }&lt;br/&gt;    &lt;span&gt;/**&lt;br/&gt;     * 构建HttpClient对象&lt;br/&gt;     */&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; CloseableHttpClient &lt;span&gt;buildHttpClient&lt;/span&gt; &lt;span&gt;()&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;// 请求配置&lt;/span&gt;&lt;br/&gt;        RequestConfig reqConfig = RequestConfig.custom().setConnectTimeout(&lt;span&gt;6000&lt;/span&gt;).build();&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; HttpClients.custom()&lt;br/&gt;                .setDefaultRequestConfig(reqConfig).build();&lt;br/&gt;    }&lt;br/&gt;    &lt;span&gt;/**&lt;br/&gt;     * 执行Get请求&lt;br/&gt;     */&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &amp;lt;T&amp;gt; &lt;span&gt;T &lt;span&gt;doGet&lt;/span&gt; &lt;span&gt;(String url, Header header, Map&amp;lt;String,String&amp;gt; param,&lt;br/&gt;                               Class&amp;lt;T&amp;gt; repClass)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;// 创建Get请求&lt;/span&gt;&lt;br/&gt;        CloseableHttpClient httpClient = buildHttpClient();&lt;br/&gt;        HttpGet httpGet = &lt;span&gt;new&lt;/span&gt; HttpGet();&lt;br/&gt;        httpGet.addHeader(header);&lt;br/&gt;        &lt;span&gt;try&lt;/span&gt; {&lt;br/&gt;            URIBuilder builder = &lt;span&gt;new&lt;/span&gt; URIBuilder(url);&lt;br/&gt;            &lt;span&gt;if&lt;/span&gt; (param != &lt;span&gt;null&lt;/span&gt;) {&lt;br/&gt;                &lt;span&gt;for&lt;/span&gt; (String key : param.keySet()) {&lt;br/&gt;                    builder.addParameter(key, param.get(key));&lt;br/&gt;                }&lt;br/&gt;            }&lt;br/&gt;            httpGet.setURI(builder.build());&lt;br/&gt;            &lt;span&gt;// 请求执行&lt;/span&gt;&lt;br/&gt;            HttpResponse httpResponse = httpClient.execute(httpGet);&lt;br/&gt;            &lt;span&gt;if&lt;/span&gt; (httpResponse.getStatusLine().getStatusCode() == &lt;span&gt;200&lt;/span&gt;) {&lt;br/&gt;                &lt;span&gt;// 结果转换&lt;/span&gt;&lt;br/&gt;                String resp = EntityUtils.toString(httpResponse.getEntity());&lt;br/&gt;                &lt;span&gt;return&lt;/span&gt; JSONUtil.toBean(resp, repClass);&lt;br/&gt;            }&lt;br/&gt;        } &lt;span&gt;catch&lt;/span&gt; (Exception e) {&lt;br/&gt;            e.printStackTrace();&lt;br/&gt;        } &lt;span&gt;finally&lt;/span&gt; {&lt;br/&gt;            IoUtil.close(httpClient);&lt;br/&gt;        }&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;    }&lt;br/&gt;    &lt;span&gt;/**&lt;br/&gt;     * 执行Post请求&lt;br/&gt;     */&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &amp;lt;T&amp;gt; &lt;span&gt;T &lt;span&gt;doPost&lt;/span&gt; &lt;span&gt;(String url, Header header, Object body,Class&amp;lt;T&amp;gt; repClass)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;// 创建Post请求&lt;/span&gt;&lt;br/&gt;        CloseableHttpClient httpClient = buildHttpClient();&lt;br/&gt;        HttpPost httpPost = &lt;span&gt;new&lt;/span&gt; HttpPost(url);&lt;br/&gt;        httpPost.addHeader(header);&lt;br/&gt;        StringEntity conBody = &lt;span&gt;new&lt;/span&gt; StringEntity(JSONUtil.toJsonStr(body),ContentType.APPLICATION_JSON);&lt;br/&gt;        httpPost.setEntity(conBody);&lt;br/&gt;        &lt;span&gt;try&lt;/span&gt; {&lt;br/&gt;            &lt;span&gt;// 请求执行&lt;/span&gt;&lt;br/&gt;            HttpResponse httpResponse = httpClient.execute(httpPost);&lt;br/&gt;            &lt;span&gt;if&lt;/span&gt; (httpResponse.getStatusLine().getStatusCode() == &lt;span&gt;200&lt;/span&gt;) {&lt;br/&gt;                &lt;span&gt;// 结果转换&lt;/span&gt;&lt;br/&gt;                String resp = EntityUtils.toString(httpResponse.getEntity());&lt;br/&gt;                &lt;span&gt;return&lt;/span&gt; JSONUtil.toBean(resp, repClass);&lt;br/&gt;            }&lt;br/&gt;        } &lt;span&gt;catch&lt;/span&gt; (Exception e) {&lt;br/&gt;            e.printStackTrace();&lt;br/&gt;        }&lt;span&gt;finally&lt;/span&gt; {&lt;br/&gt;            IoUtil.close(httpClient);&lt;br/&gt;        }&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2&gt;&lt;span&gt;3、OkHttp&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;TestOkHttp&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; String BASE_URL = &lt;span&gt;&quot;http://localhost:8083&quot;&lt;/span&gt; ;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(String[] args)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        Headers headers = &lt;span&gt;new&lt;/span&gt; Headers.Builder().add(&lt;span&gt;&quot;Token&quot;&lt;/span&gt;,&lt;span&gt;&quot;OkHttpSup&quot;&lt;/span&gt;).build() ;&lt;br/&gt;&lt;br/&gt;        &lt;span&gt;// 1、发送Get请求&lt;/span&gt;&lt;br/&gt;        Rep getRep = execute(BASE_URL+&lt;span&gt;&quot;/getApi/1&quot;&lt;/span&gt;, Method.GET.name(), headers, &lt;span&gt;null&lt;/span&gt;, Rep&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;/span&gt;;&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;get：&quot;&lt;/span&gt;+getRep);&lt;br/&gt;&lt;br/&gt;        &lt;span&gt;// 2、发送Post请求&lt;/span&gt;&lt;br/&gt;        IdKey postBody = &lt;span&gt;new&lt;/span&gt; IdKey(&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;&quot;id-key&quot;&lt;/span&gt;) ;&lt;br/&gt;        Rep postRep = execute(BASE_URL+&lt;span&gt;&quot;/postApi&quot;&lt;/span&gt;, Method.POST.name(), headers, buildBody(postBody), Rep&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;/span&gt;;&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;post：&quot;&lt;/span&gt;+postRep);&lt;br/&gt;&lt;br/&gt;        &lt;span&gt;// 3、发送Put请求&lt;/span&gt;&lt;br/&gt;        IdKey putBody = &lt;span&gt;new&lt;/span&gt; IdKey(&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;&quot;key-id&quot;&lt;/span&gt;) ;&lt;br/&gt;        Rep putRep = execute(BASE_URL+&lt;span&gt;&quot;/putApi&quot;&lt;/span&gt;, Method.PUT.name(), headers, buildBody(putBody), Rep&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;/span&gt;;&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;put：&quot;&lt;/span&gt;+putRep);&lt;br/&gt;&lt;br/&gt;        &lt;span&gt;// 4、发送Delete请求&lt;/span&gt;&lt;br/&gt;        Rep delRep = execute(BASE_URL+&lt;span&gt;&quot;/delApi/2&quot;&lt;/span&gt;, Method.DELETE.name(), headers, &lt;span&gt;null&lt;/span&gt;, Rep&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;/span&gt;;&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;del：&quot;&lt;/span&gt;+delRep);&lt;br/&gt;    }&lt;br/&gt;    &lt;span&gt;/**&lt;br/&gt;     * 构建JSON请求体&lt;br/&gt;     */&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; RequestBody &lt;span&gt;buildBody&lt;/span&gt; &lt;span&gt;(Object body)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;        MediaType mediaType = MediaType.parse(&lt;span&gt;&quot;application/json; charset=utf-8&quot;&lt;/span&gt;);&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; RequestBody.create(mediaType, JSONUtil.toJsonStr(body)) ;&lt;br/&gt;    }&lt;br/&gt;    &lt;span&gt;/**&lt;br/&gt;     * 构建OkHttpClient对象&lt;br/&gt;     */&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; OkHttpClient &lt;span&gt;buildOkHttp&lt;/span&gt; &lt;span&gt;()&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; OkHttpClient.Builder()&lt;br/&gt;                .readTimeout(&lt;span&gt;10&lt;/span&gt;, TimeUnit.SECONDS).connectTimeout(&lt;span&gt;6&lt;/span&gt;, TimeUnit.SECONDS)&lt;br/&gt;                .connectionPool(&lt;span&gt;new&lt;/span&gt; ConnectionPool(&lt;span&gt;15&lt;/span&gt;, &lt;span&gt;5&lt;/span&gt;, TimeUnit.SECONDS))&lt;br/&gt;                .build();&lt;br/&gt;    }&lt;br/&gt;    &lt;span&gt;/**&lt;br/&gt;     * 执行请求&lt;br/&gt;     */&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &amp;lt;T&amp;gt; &lt;span&gt;T &lt;span&gt;execute&lt;/span&gt; &lt;span&gt;(String url, String method,&lt;br/&gt;                                 Headers headers, RequestBody body,&lt;br/&gt;                                 Class&amp;lt;T&amp;gt; repClass)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;// 请求创建&lt;/span&gt;&lt;br/&gt;        OkHttpClient httpClient = buildOkHttp() ;&lt;br/&gt;        Request.Builder requestBuild = &lt;span&gt;new&lt;/span&gt; Request.Builder()&lt;br/&gt;                .url(url).method(method, body);&lt;br/&gt;        &lt;span&gt;if&lt;/span&gt; (headers != &lt;span&gt;null&lt;/span&gt;) {&lt;br/&gt;            requestBuild.headers(headers);&lt;br/&gt;        }&lt;br/&gt;        &lt;span&gt;try&lt;/span&gt;  {&lt;br/&gt;            &lt;span&gt;// 请求执行&lt;/span&gt;&lt;br/&gt;            Response response = httpClient.newCall(requestBuild.build()).execute();&lt;br/&gt;            &lt;span&gt;// 结果转换&lt;/span&gt;&lt;br/&gt;            InputStream inStream = &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;            &lt;span&gt;if&lt;/span&gt; (response.isSuccessful()) {&lt;br/&gt;                ResponseBody responseBody = response.body();&lt;br/&gt;                &lt;span&gt;if&lt;/span&gt; (responseBody != &lt;span&gt;null&lt;/span&gt;) {&lt;br/&gt;                    inStream = responseBody.byteStream();&lt;br/&gt;                }&lt;br/&gt;            }&lt;br/&gt;            &lt;span&gt;if&lt;/span&gt; (inStream != &lt;span&gt;null&lt;/span&gt;) {&lt;br/&gt;                &lt;span&gt;try&lt;/span&gt; {&lt;br/&gt;                    &lt;span&gt;byte&lt;/span&gt;[] respByte = IoUtil.readBytes(inStream);&lt;br/&gt;                    &lt;span&gt;if&lt;/span&gt; (respByte != &lt;span&gt;null&lt;/span&gt;) {&lt;br/&gt;                        &lt;span&gt;return&lt;/span&gt; JSONUtil.toBean(&lt;span&gt;new&lt;/span&gt; String(respByte, Charset.defaultCharset()), repClass);&lt;br/&gt;                    }&lt;br/&gt;                } &lt;span&gt;catch&lt;/span&gt; (Exception e) {&lt;br/&gt;                    e.printStackTrace();&lt;br/&gt;                } &lt;span&gt;finally&lt;/span&gt; {&lt;br/&gt;                    IoUtil.close(inStream);&lt;br/&gt;                }&lt;br/&gt;            }&lt;br/&gt;        } &lt;span&gt;catch&lt;/span&gt; (Exception e) {&lt;br/&gt;            e.printStackTrace();&lt;br/&gt;        }&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2&gt;&lt;span&gt;4、RestTemplate&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;TestRestTemplate&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; String BASE_URL = &lt;span&gt;&quot;http://localhost:8083&quot;&lt;/span&gt; ;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(String[] args)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;        RestTemplate restTemplate = buildRestTemplate() ;&lt;br/&gt;        &lt;span&gt;// 1、发送Get请求&lt;/span&gt;&lt;br/&gt;        Map&amp;lt;String,String&amp;gt; paramMap = &lt;span&gt;new&lt;/span&gt; HashMap&amp;lt;&amp;gt;() ;&lt;br/&gt;        Rep getRep = restTemplate.getForObject(BASE_URL+&lt;span&gt;&quot;/getApi/1&quot;&lt;/span&gt;,Rep&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;,&lt;span&gt;paramMap&lt;/span&gt;)&lt;/span&gt;;&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;get：&quot;&lt;/span&gt;+getRep);&lt;br/&gt;&lt;br/&gt;        &lt;span&gt;// 2、发送Post请求&lt;/span&gt;&lt;br/&gt;        IdKey idKey = &lt;span&gt;new&lt;/span&gt; IdKey(&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;&quot;id-key&quot;&lt;/span&gt;) ;&lt;br/&gt;        Rep postRep = restTemplate.postForObject(BASE_URL+&lt;span&gt;&quot;/postApi&quot;&lt;/span&gt;,idKey,Rep&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;/span&gt;;&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;post：&quot;&lt;/span&gt;+postRep);&lt;br/&gt;&lt;br/&gt;        &lt;span&gt;// 3、发送Put请求&lt;/span&gt;&lt;br/&gt;        IdKey idKey2 = &lt;span&gt;new&lt;/span&gt; IdKey(&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;&quot;key-id&quot;&lt;/span&gt;) ;&lt;br/&gt;        restTemplate.put(BASE_URL+&lt;span&gt;&quot;/putApi&quot;&lt;/span&gt;,idKey2,paramMap);&lt;br/&gt;&lt;br/&gt;        &lt;span&gt;// 4、发送Delete请求&lt;/span&gt;&lt;br/&gt;        restTemplate.delete(BASE_URL+&lt;span&gt;&quot;/delApi/2&quot;&lt;/span&gt;,paramMap);&lt;br/&gt;&lt;br/&gt;        &lt;span&gt;// 5、自定义Header请求&lt;/span&gt;&lt;br/&gt;        HttpHeaders headers = &lt;span&gt;new&lt;/span&gt; HttpHeaders();&lt;br/&gt;        headers.add(&lt;span&gt;&quot;Token&quot;&lt;/span&gt;,&lt;span&gt;&quot;AdminSup&quot;&lt;/span&gt;);&lt;br/&gt;        HttpEntity&amp;lt;IdKey&amp;gt; requestEntity = &lt;span&gt;new&lt;/span&gt; HttpEntity&amp;lt;&amp;gt;(idKey, headers);&lt;br/&gt;        ResponseEntity&amp;lt;Rep&amp;gt; respEntity = restTemplate.exchange(BASE_URL+&lt;span&gt;&quot;/postApi&quot;&lt;/span&gt;,&lt;br/&gt;                                            HttpMethod.POST, requestEntity, Rep&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;/span&gt;;&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;post-header：&quot;&lt;/span&gt;+respEntity.getBody());&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; RestTemplate &lt;span&gt;buildRestTemplate&lt;/span&gt; &lt;span&gt;()&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;// 1、参数配置&lt;/span&gt;&lt;br/&gt;        SimpleClientHttpRequestFactory factory = &lt;span&gt;new&lt;/span&gt; SimpleClientHttpRequestFactory();&lt;br/&gt;        factory.setReadTimeout(&lt;span&gt;3000&lt;/span&gt;);&lt;br/&gt;        factory.setConnectTimeout(&lt;span&gt;6000&lt;/span&gt;);&lt;br/&gt;        &lt;span&gt;// 2、创建对象&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; RestTemplate(factory) ;&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h1&gt;&lt;span&gt;五、参考源码&lt;/span&gt;&lt;span/&gt;&lt;/h1&gt;&lt;pre&gt;&lt;code&gt;编程文档：&lt;br/&gt;https://gitee.com/cicadasmile/butte-java-note&lt;br/&gt;&lt;br/&gt;应用仓库：&lt;br/&gt;https://gitee.com/cicadasmile/butte-flyer-parent&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;section&gt;&lt;mp-common-profile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-weui-theme=&quot;light&quot; data-id=&quot;MzU4Njg0MzYwNw==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/uUIibyNXbAvBj3abVSgCmvm7FIYw55ficInd2se9ia6KSic0ma25AUvrmUtXUwXibjhHmCc7DUawfXBI30QuHBjDnzw/0?wx_fmt=png&quot; data-nickname=&quot;知了一笑&quot; data-alias=&quot;cicada_smile&quot; data-signature=&quot;积累、总结、用心记录。&quot; data-from=&quot;0&quot; data-is_biz_ban=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;mp-style-type data-value=&quot;3&quot;/&gt;&lt;/p&gt;&lt;/div&gt;

          
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>