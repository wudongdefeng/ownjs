<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>95315bb19ed690924320d2ad2bac8254</guid>
<title>ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©</title>
<link>https://toutiao.io/k/laxldpe</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section class=&quot;&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.45233463035019456&quot; data-type=&quot;png&quot; data-w=&quot;1028&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sXFqMxQoVLFvjy33QIm6KV68BdT73EVpamYJia5K0IdYsEzs4ib73MlYSGmeT5wL1iaMXDBNEAqrPWPjhuibaQ0QrQ/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ¥¼ä»”ï¼&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»Šå¤©å†™çš„è¿™ä¸ªä¸»é¢˜å†…å®¹ï¼Œå…¶å®éå¸¸åŸºç¡€ï¼Œä½†æ˜¯&lt;strong&gt;ä½œä¸ºé«˜å¹¶å‘éå¸¸é‡è¦çš„å‡ ä¸ªåœºæ™¯ï¼Œç»å¯¹ç»•ä¸å¼€&lt;/strong&gt;ï¼Œä¼°è®¡å¤§å®¶é¢è¯•æ—¶ï¼Œä¹Ÿç»å¸¸ä¼šé‡åˆ°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªä¸»é¢˜çš„æ–‡ç« ï¼Œç½‘ä¸Šéå¸¸å¤šï¼Œæœ¬æ¥æƒ³ç›´æ¥è½¬è½½ä¸€ç¯‡ï¼Œä½†æ˜¯æ„Ÿè§‰æ²¡æœ‰åˆé€‚çš„ï¼Œè¦ä¹ˆæ–‡ç« ä¸å¤Ÿç²¾ç‚¼ï¼Œè¦ä¹ˆå°±æ˜¯ç²¾ç®€è¿‡å¤´ï¼Œæ‰€ä»¥è¿˜æ˜¯è‡ªå·±å†™ä¸€ç¯‡å§ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å†…å®¹è™½ç„¶åŸºç¡€ï¼Œä½†æˆ‘è¿˜æ˜¯ç§‰æ‰¿ä»¥å¾€çš„å†™ä½œé£æ ¼ï¼Œå‚è€ƒä¼—å¤šä¼˜ç§€çš„åšå®¢åï¼Œæ‰“ç®—å†™ä¸€ç¯‡èƒ½é€šä¿—æ˜“æ‡‚ï¼Œåˆä¸å¤±å…¨é¢çš„æ–‡ç« ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å‰è¨€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æ­£å¸¸æƒ…å†µçš„æŸ¥è¯¢è¿‡ç¨‹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å…ˆæŸ¥è¯¢ Redisï¼Œå¦‚æœæŸ¥è¯¢æˆåŠŸï¼Œç›´æ¥è¿”å›ï¼ŒæŸ¥è¯¢ä¸å­˜åœ¨ï¼Œå»æŸ¥è¯¢ DBï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¦‚æœ DB æŸ¥è¯¢æˆåŠŸï¼Œæ•°æ®å›å†™ Redisï¼ŒæŸ¥è¯¢ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7459379615952733&quot; data-type=&quot;png&quot; data-w=&quot;677&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sXFqMxQoVLFvjy33QIm6KV68BdT73EVp0m8zibaiaPA5VRIfzU1HT95rqCI5TQuPlnwozoXXkAl63DiaDjfhZfquA/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç¼“å­˜ç©¿é€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å®šä¹‰ï¼šå½“æŸ¥è¯¢æ•°æ®åº“å’Œç¼“å­˜éƒ½æ— æ•°æ®æ—¶ï¼Œå› ä¸ºæ•°æ®åº“æŸ¥è¯¢æ— æ•°æ®ï¼Œå‡ºäºå®¹é”™è€ƒè™‘ï¼Œä¸ä¼šå°†ç»“æœä¿å­˜åˆ°ç¼“å­˜ä¸­ï¼Œå› æ­¤&lt;strong&gt;æ¯æ¬¡è¯·æ±‚éƒ½ä¼šå»æŸ¥è¯¢æ•°æ®åº“&lt;/strong&gt;ï¼Œè¿™ç§æƒ…å†µå°±å«åšç¼“å­˜ç©¿é€ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6910112359550562&quot; data-type=&quot;png&quot; data-w=&quot;712&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sXFqMxQoVLFvjy33QIm6KV68BdT73EVpKJ1r7KEiaRzXRyKyoXhz5f71NrPK1m4MiaOZiaxcnQplu9JZWOQCvBalg/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çº¢è‰²çš„çº¿æ¡ï¼Œå°±æ˜¯ç¼“å­˜ç©¿é€çš„åœºæ™¯ï¼Œ&lt;strong&gt;å½“æŸ¥è¯¢çš„ Key åœ¨ç¼“å­˜å’Œ DB ä¸­éƒ½ä¸å­˜åœ¨æ—¶ï¼Œå°±ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œæ¯”å¦‚æœ‰ä¸ªæ¥å£éœ€è¦æŸ¥è¯¢å•†å“ä¿¡æ¯ï¼Œå¦‚æœæœ‰æ¶æ„ç”¨æˆ·æ¨¡æ‹Ÿä¸å­˜åœ¨çš„å•†å“ ID å‘èµ·è¯·æ±‚ï¼Œç¬é—´å¹¶å‘é‡å¾ˆé«˜ï¼Œä¼°è®¡ä½ çš„ DB ä¼šç›´æ¥æŒ‚æ‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯èƒ½å¤§å®¶ç¬¬ä¸€ååº”å°±æ˜¯å¯¹å…¥å‚è¿›è¡Œæ­£åˆ™æ ¡éªŒï¼Œè¿‡æ»¤æ‰æ— æ•ˆè¯·æ±‚ï¼Œå¯¹ï¼è¿™ä¸ªæ²¡é”™ï¼Œé‚£æœ‰æ²¡æœ‰å…¶å®ƒæ›´å¥½çš„æ–¹æ¡ˆå‘¢ï¼Ÿ&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç¼“å­˜ç©ºå€¼&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“æˆ‘ä»¬ä»æ•°æ®åº“ä¸­æŸ¥è¯¢åˆ°ç©ºå€¼æ—¶ï¼Œ&lt;strong&gt;æˆ‘ä»¬å¯ä»¥å‘ç¼“å­˜ä¸­å›ç§ä¸€ä¸ªç©ºå€¼&lt;/strong&gt;ï¼Œä¸ºäº†é¿å…ç¼“å­˜è¢«é•¿æ—¶é—´å ç”¨ï¼Œéœ€è¦ç»™è¿™ä¸ªç©ºå€¼åŠ ä¸€ä¸ªæ¯”è¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´ï¼Œä¾‹å¦‚ 3~5 åˆ†é’Ÿã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7246192893401016&quot; data-type=&quot;png&quot; data-w=&quot;788&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sXFqMxQoVLFvjy33QIm6KV68BdT73EVpauvQ3SVngNmWIBZicTEmqGD4eSNKHdwlSw2sEfLycxjViaXCLyib9WI6w/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸è¿‡è¿™ä¸ªæ–¹æ¡ˆæœ‰ä¸ªé—®é¢˜ï¼Œå½“å¤§é‡æ— æ•ˆè¯·æ±‚ç©¿é€è¿‡æ¥æ—¶ï¼Œç¼“å­˜å†…å°±ä¼šæœ‰æœ‰å¤§é‡çš„ç©ºå€¼ç¼“å­˜ï¼Œå¦‚æœç¼“å­˜ç©ºé—´è¢«å æ»¡äº†ï¼Œè¿˜ä¼šå› å‰”é™¤æ‰ä¸€äº›å·²ç»è¢«ç¼“å­˜çš„ç”¨æˆ·ä¿¡æ¯ï¼Œåè€Œä¼šé€ æˆç¼“å­˜å‘½ä¸­ç‡çš„ä¸‹é™ï¼Œ&lt;strong&gt;æ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆï¼Œéœ€è¦è¯„ä¼°ç¼“å­˜å®¹é‡ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœç¼“å­˜ç©ºå€¼ä¸å¯å–ï¼Œè¿™æ—¶ä½ å¯ä»¥è€ƒè™‘ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å¸ƒéš†è¿‡æ»¤å™¨&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ç”±ä¸€ä¸ªå¯å˜é•¿åº¦ä¸º N çš„äºŒè¿›åˆ¶æ•°ç»„ä¸ä¸€ç»„æ•°é‡å¯å˜ M çš„å“ˆå¸Œå‡½æ•°æ„æˆï¼Œè¯´çš„ç®€å•ç²—æš´ä¸€ç‚¹ï¼Œå°±æ˜¯ä¸€ä¸ª Hash Mapã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŸç†ç›¸å½“ç®€å•ï¼šæ¯”å¦‚å…ƒç´  key=#3ï¼Œå‡å¦‚é€šè¿‡ Hash ç®—æ³•å¾—åˆ°ä¸€ä¸ªä¸º 9 çš„å€¼ï¼Œå°±å­˜åœ¨è¿™ä¸ª Hash Map çš„ç¬¬ 9 ä½å…ƒç´ ä¸­ï¼Œé€šè¿‡æ ‡è®° 1 æ ‡è¯†è¯¥ä½å·²ç»æœ‰æ•°æ®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ0 æ˜¯æ— æ•°æ®ï¼Œ1 æ˜¯æœ‰æ•°æ®ã€‚&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5160680529300568&quot; data-type=&quot;png&quot; data-w=&quot;529&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sXFqMxQoVLFvjy33QIm6KV68BdT73EVpB2jNHfB4ZgvQatxx9DU5MYaPNR6kajmrkVCzrWIlwiaKt2KN8bg9geA/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥é€šè¿‡è¯¥æ–¹æ³•ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªç»“è®ºï¼š&lt;strong&gt;åœ¨ Hash Map ä¸­ï¼Œæ ‡è®°çš„æ•°æ®ï¼Œä¸ä¸€å®šå­˜åœ¨ï¼Œä½†æ˜¯æ²¡æœ‰æ ‡è®°çš„æ•°æ®ï¼Œè‚¯å®šä¸å­˜åœ¨ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºä»€ä¹ˆâ€œæ ‡è®°çš„æ•°æ®ï¼Œä¸ä¸€å®šå­˜åœ¨â€å‘¢ï¼Ÿ&lt;strong&gt;å› ä¸º Hash å†²çªï¼&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯”å¦‚ Hash Map çš„é•¿åº¦ä¸º 100ï¼Œä½†æ˜¯ä½ æœ‰ 101 ä¸ªè¯·æ±‚ï¼Œå‡å¦‚ä½ è¿æ°”å¥½åˆ°çˆ†ï¼Œè¿™ 100 ä¸ªè¯·æ±‚åˆšå¥½å‡åŒ€æ‰“åœ¨é•¿åº¦ä¸º 100 çš„ Hash Map ä¸­ï¼Œæ­¤æ—¶ä½ çš„ Hash Map å·²ç»å…¨éƒ¨æ ‡è®°ä¸º 1ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;å½“ç¬¬ 101 ä¸ªè¯·æ±‚è¿‡æ¥æ—¶ï¼Œå°± 100% å‡ºç° Hash å†²çª&lt;/strong&gt;ï¼Œè™½ç„¶æˆ‘æ²¡æœ‰è¯·æ±‚è¿‡ï¼Œä½†æ˜¯å¾—åˆ°çš„æ ‡è®°å´ä¸º 1ï¼Œå¯¼è‡´å¸ƒéš†è¿‡æ»¤å™¨æ²¡æœ‰æ‹¦æˆªã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœéœ€è¦å‡å°‘è¯¯åˆ¤ï¼Œå¯ä»¥å¢åŠ  Hash Map çš„é•¿åº¦ï¼Œå¹¶é€‰æ‹©å´åˆ†åº¦æ›´é«˜çš„ Hash å‡½æ•°ï¼Œæ¯”å¦‚å¤šæ¬¡å¯¹ key è¿›è¡Œ hashã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é™¤äº† Hash å†²çªï¼Œ&lt;strong&gt;å¸ƒéš†è¿‡æ»¤å™¨å…¶å®ä¼šå¸¦æ¥ä¸€ä¸ªè‡´å‘½çš„é—®é¢˜ï¼šå¸ƒéš†è¿‡æ»¤å™¨æ›´æ–°å¤±è´¥ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯”å¦‚æœ‰ä¸€ä¸ªå•†å“ ID ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼Œå½“ DB ä¸­å­˜åœ¨æ—¶ï¼Œéœ€è¦åœ¨ Hash Map ä¸­æ ‡è®°ä¸€ä¸‹ï¼Œä½†æ˜¯ç”±äºç½‘ç»œåŸå› ï¼Œå¯¼è‡´æ ‡è®°å¤±è´¥ï¼Œé‚£ä¹ˆä¸‹æ¬¡è¿™ä¸ªå•†å“ ID é‡æ–°å‘èµ·è¯·æ±‚æ—¶ï¼Œè¯·æ±‚ä¼šè¢«å¸ƒéš†è¿‡æ»¤å™¨æ‹¦æˆªï¼Œæ¯”å¦‚è¿™ä¸ªæ˜¯åŒ11çš„çˆ†æ¬¾å•†å“åº“å­˜ï¼Œæ˜æ˜æœ‰ 10W ä»¶å•†å“ï¼Œä½ å´æç¤ºåº“å­˜ä¸å­˜åœ¨ï¼Œé¢†å¯¼å¯èƒ½ä¼šè¯´â€œæ˜å¤©ä½ å¯ä»¥ä¸ç”¨æ¥äº†â€ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æ‰€ä»¥å¦‚æœä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼Œåœ¨å¯¹ Hash Map è¿›è¡Œæ•°æ®æ›´æ–°æ—¶ï¼Œéœ€è¦ä¿è¯è¿™ä¸ªæ•°æ®èƒ½ 100% æ›´æ–°æˆåŠŸ&lt;/strong&gt;ï¼Œå¯ä»¥é€šè¿‡å¼‚æ­¥ã€é‡è¯•çš„æ–¹å¼ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆæœ‰ä¸€å®šçš„å®ç°æˆæœ¬å’Œé£é™©ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç¼“å­˜å‡»ç©¿&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å®šä¹‰ï¼š&lt;strong&gt;æŸä¸ªçƒ­ç‚¹ç¼“å­˜åœ¨æŸä¸€æ—¶åˆ»æ°å¥½å¤±æ•ˆ&lt;/strong&gt;ï¼Œç„¶åæ­¤æ—¶åˆšå¥½æœ‰å¤§é‡çš„å¹¶å‘è¯·æ±‚ï¼Œæ­¤æ—¶è¿™äº›è¯·æ±‚å°†ä¼šç»™æ•°æ®åº“é€ æˆå·¨å¤§çš„å‹åŠ›ï¼Œè¿™ç§æƒ…å†µå°±å«åšç¼“å­˜å‡»ç©¿ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªå…¶å®å’Œâ€œç¼“å­˜ç©¿é€â€æµç¨‹å›¾ä¸€æ ·ï¼Œåªæ˜¯è¿™ä¸ªçš„å‡ºå‘ç‚¹æ˜¯â€œæŸä¸ªçƒ­ç‚¹ç¼“å­˜åœ¨æŸä¸€æ—¶åˆ»æ°å¥½å¤±æ•ˆâ€ï¼Œæ¯”å¦‚æŸä¸ªéå¸¸çƒ­é—¨çš„çˆ†æ¬¾å•†å“ï¼Œç¼“å­˜çªç„¶å¤±æ•ˆï¼Œæµé‡ç›´æ¥å…¨éƒ¨æ‰“åˆ° DBï¼Œ&lt;strong&gt;é€ æˆæŸä¸€æ—¶åˆ»æ•°æ®åº“è¯·æ±‚é‡è¿‡å¤§ï¼Œæ›´å¼ºè°ƒç¬æ—¶æ€§ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è§£å†³é—®é¢˜çš„æ–¹æ³•ä¸»è¦æœ‰ 2 ç§ï¼š&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;åˆ†å¸ƒå¼é”&lt;/strong&gt;ï¼šåªæœ‰æ‹¿åˆ°é”çš„ç¬¬ä¸€ä¸ªçº¿ç¨‹å»è¯·æ±‚æ•°æ®åº“ï¼Œç„¶åæ’å…¥ç¼“å­˜ï¼Œå½“ç„¶æ¯æ¬¡æ‹¿åˆ°é”çš„æ—¶å€™éƒ½è¦å»æŸ¥è¯¢ä¸€ä¸‹ç¼“å­˜æœ‰æ²¡æœ‰ï¼Œè¿™ç§åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œä¸ªäººä¸å¤ªå»ºè®®ç”¨åˆ†å¸ƒå¼é”ï¼Œä¼šå½±å“æŸ¥è¯¢æ•ˆç‡ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;è®¾ç½®æ°¸ä¸è¿‡æœŸ&lt;/strong&gt;ï¼šå¯¹äºæŸäº›çƒ­ç‚¹ç¼“å­˜ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®æ°¸ä¸è¿‡æœŸï¼Œè¿™æ ·å°±èƒ½ä¿è¯ç¼“å­˜çš„ç¨³å®šæ€§ï¼Œä½†éœ€è¦æ³¨æ„åœ¨æ•°æ®æ›´æ”¹ä¹‹åï¼Œè¦åŠæ—¶æ›´æ–°æ­¤çƒ­ç‚¹ç¼“å­˜ï¼Œä¸ç„¶å°±ä¼šé€ æˆæŸ¥è¯¢ç»“æœçš„è¯¯å·®ï¼Œæ¯”å¦‚çƒ­é—¨å•†å“ï¼Œéƒ½å…ˆé¢„çƒ­åˆ°æ•°æ®åº“ï¼Œåç»­å†ä¸‹çº¿æ‰ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç½‘ä¸Šè¿˜æœ‰â€œç¼“å­˜ç»­æœŸâ€çš„æ–¹å¼ï¼Œæ¯”å¦‚ç¼“å­˜ 30 åˆ†é’Ÿå¤±æ•ˆï¼Œå¯ä»¥æä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯ 20 åˆ†é’Ÿè·‘ä¸€æ¬¡ï¼Œæ„Ÿè§‰è¿™ç§æ–¹å¼ä¸ä¼¦ä¸ç±»ï¼Œä»…ä¾›å¤§å®¶å‚è€ƒã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç¼“å­˜é›ªå´©&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å®šä¹‰ï¼š&lt;strong&gt;åœ¨çŸ­æ—¶é—´å†…æœ‰å¤§é‡ç¼“å­˜åŒæ—¶è¿‡æœŸï¼Œå¯¼è‡´å¤§é‡çš„è¯·æ±‚ç›´æ¥æŸ¥è¯¢æ•°æ®åº“&lt;/strong&gt;ï¼Œä»è€Œå¯¹æ•°æ®åº“é€ æˆäº†å·¨å¤§çš„å‹åŠ›ï¼Œä¸¥é‡æƒ…å†µä¸‹å¯èƒ½ä¼šå¯¼è‡´æ•°æ®åº“å®•æœºçš„æƒ…å†µå«åšç¼“å­˜é›ªå´©ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœè¯´â€œç¼“å­˜å‡»ç©¿â€æ˜¯å•å…µåæŠ—ï¼Œé‚£â€œç¼“å­˜é›ªå´©â€å°±æ˜¯é›†ä½“èµ·ä¹‰äº†ï¼Œé‚£ä»€ä¹ˆæƒ…å†µä¼šå‡ºç°ç¼“å­˜é›ªå´©å‘¢ï¼Ÿ&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;çŸ­æ—¶é—´å†…æœ‰å¤§é‡ç¼“å­˜åŒæ—¶è¿‡æœŸï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¼“å­˜æœåŠ¡å®•æœºï¼Œå¯¼è‡´æŸä¸€æ—¶åˆ»å‘ç”Ÿå¤§è§„æ¨¡çš„ç¼“å­˜å¤±æ•ˆã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£ä¹ˆæœ‰å“ªäº›è§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿ&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;ç¼“å­˜æ·»åŠ éšæœºæ—¶é—´&lt;/strong&gt;ï¼šå¯åœ¨è®¾ç½®ç¼“å­˜æ—¶æ·»åŠ éšæœºæ—¶é—´ï¼Œæ¯”å¦‚ 0~60sï¼Œè¿™æ ·å°±å¯ä»¥æå¤§çš„é¿å…å¤§é‡çš„ç¼“å­˜åŒæ—¶å¤±æ•ˆï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;åˆ†å¸ƒå¼é”&lt;/strong&gt;ï¼šåŠ ä¸€ä¸ªåˆ†å¸ƒå¼é”ï¼Œç¬¬ä¸€ä¸ªè¯·æ±‚å°†æ•°æ®æŒä¹…åŒ–åˆ°ç¼“å­˜åï¼Œå…¶å®ƒçš„è¯·æ±‚æ‰èƒ½è¿›å…¥ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;é™æµå’Œé™çº§&lt;/strong&gt;ï¼šé€šè¿‡é™æµå’Œé™çº§ç­–ç•¥ï¼Œå‡å°‘è¯·æ±‚çš„æµé‡ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;é›†ç¾¤éƒ¨ç½²&lt;/strong&gt;ï¼šRedis é€šè¿‡é›†ç¾¤éƒ¨ç½²ã€ä¸»ä»ç­–ç•¥ï¼Œä¸»èŠ‚ç‚¹å®•æœºåï¼Œä¼šåˆ‡æ¢åˆ°ä»èŠ‚ç‚¹ï¼Œä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¼“å­˜æ·»åŠ éšæœºæ—¶é—´ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;//Â ç¼“å­˜åŸæœ¬çš„å¤±æ•ˆæ—¶é—´&lt;/span&gt;&lt;br/&gt;&lt;span&gt;int&lt;/span&gt;Â exTimeÂ =Â &lt;span&gt;10&lt;/span&gt;Â *Â &lt;span&gt;60&lt;/span&gt;;&lt;br/&gt;&lt;span&gt;//Â éšæœºæ•°ç”Ÿæˆç±»&lt;/span&gt;&lt;br/&gt;RandomÂ randomÂ =Â &lt;span&gt;new&lt;/span&gt;Â Random();&lt;br/&gt;&lt;span&gt;//Â ç¼“å­˜è®¾ç½®&lt;/span&gt;&lt;br/&gt;jedis.setex(cacheKey,Â exTimeÂ +Â random.nextInt(&lt;span&gt;1000&lt;/span&gt;)Â ,Â value);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ã€Œæ–‡ç« æ±‡æ€»ã€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;æ±‡æ€»ç›®å½•&lt;/strong&gt;ï¼š&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=Mzg3OTU5NzQ1Mw==&amp;amp;mid=2247487713&amp;amp;idx=1&amp;amp;sn=9661f1520e6237d18536ccf496f8793a&amp;amp;chksm=cf035203f874db157eb05a3909725daeadd4625b8702f358abe9d77dd52fefd08c50279ce771&amp;amp;token=1760780777&amp;amp;lang=zh_CN&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;æ¥¼ä»”åŸåˆ›ç²¾é€‰èŸèƒ&lt;/a&gt; ğŸ”¥ğŸ”¥ğŸ”¥&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;æ¨èç†ç”±&lt;/strong&gt;ï¼š&lt;span&gt;ä¸€ç™¾å¤šç¯‡åŸåˆ›å¥½æ–‡ï¼Œè¿‘ 2 å¹´çš„åšæŒï¼Œ&lt;/span&gt;&lt;strong&gt;æ— è®ºä½ æ˜¯å°ç™½ï¼Œè¿˜æ˜¯èµ„æ·±å¤§ä½¬ï¼Œæ€»èƒ½æ‰¾åˆ°å±äºä½ è‡ªå·±çš„æ®µä½ã€‚&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;Mzg3OTU5NzQ1Mw==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/sXFqMxQoVLFTdSvrrpJnCZ0Fp5Z1wKkhKFQBxTaFfxOpib3E2zgUu39BFbsBqqJbEpxicUvz3H6csoL2JQ9EP1yQ/0?wx_fmt=png&quot; data-nickname=&quot;æ¥¼ä»”&quot; data-alias=&quot;&quot; data-signature=&quot;7 å¹´ä¸€çº¿å¤§å‚ç»éªŒï¼ˆç™¾åº¦/å°ç±³/æ»´æ»´ï¼‰ï¼Œå¸¦ä½ è¿›å¤§å‚ï¼Œä¸é™äºJavaã€Goã€é«˜å¹¶å‘ã€æ¶æ„é€‰å‹ã€æ¶ˆæ¯é˜Ÿåˆ—ã€è®¾è®¡æ¨¡å¼ã€MySQLã€Redisã€DDDã€é¡¹ç›®ç®¡ç†ã€è½¯æŠ€èƒ½ç­‰ã€‚&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ã€Œå­¦ä¹ äº¤æµã€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›®å‰æˆ‘ä»¬å·²ç»æˆç«‹å¤šä¸ªæŠ€æœ¯äº¤æµç¾¤ï¼&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é•¿æŒ‰äºŒç»´ç ï¼Œå›å¤ &lt;strong&gt;ã€ŒåŠ ç¾¤ã€&lt;/strong&gt;ï¼Œæ¬¢è¿ä¸€èµ·å­¦ä¹ äº¤æµå“ˆ~~ ğŸ‘ğŸ»ğŸ‘ğŸ»ğŸ‘ğŸ»&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5726210350584308&quot; data-type=&quot;png&quot; data-w=&quot;1198&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sXFqMxQoVLFvjy33QIm6KV68BdT73EVp0ibd3XdurERqIhL1DWS0fhiaZqibDNekibaUlicLiaz60ibGPzZzWxv4PpZgQ/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å°½ä¿¡ä¹¦åˆ™ä¸å¦‚æ— ä¹¦ï¼Œå› ä¸ªäººèƒ½åŠ›æœ‰é™ï¼Œéš¾å…æœ‰ç–æ¼å’Œé”™è¯¯ä¹‹å¤„ï¼Œå¦‚å‘ç° bug æˆ–è€…æœ‰æ›´å¥½çš„å»ºè®®ï¼Œæ¬¢è¿æ‰¹è¯„æŒ‡æ­£ï¼Œä¸åæ„Ÿæ¿€ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>d92f47aaf67be316dca49b3f419d767e</guid>
<title>å›¾è§£Goå†…å­˜ç®¡ç†å™¨</title>
<link>https://toutiao.io/k/k4upoi5</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å…³äºGoçš„å†…å­˜åˆ†é…&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨&lt;code&gt;Go&lt;/code&gt;è¯­è¨€é‡Œï¼Œä»å†…å­˜çš„åˆ†é…åˆ°ä¸å†ä½¿ç”¨åå†…å­˜çš„å›æ”¶ç­‰ç­‰è¿™äº›å†…å­˜ç®¡ç†å·¥ä½œéƒ½æ˜¯ç”±&lt;code&gt;Go&lt;/code&gt;åœ¨åº•å±‚å®Œæˆçš„ã€‚è™½ç„¶å¼€å‘è€…åœ¨å†™ä»£ç æ—¶ä¸å¿…è¿‡åº¦å…³å¿ƒå†…å­˜ä»åˆ†é…åˆ°å›æ”¶è¿™ä¸ªè¿‡ç¨‹ï¼Œä½†æ˜¯&lt;code&gt;Go&lt;/code&gt;çš„å†…å­˜åˆ†é…ç­–ç•¥é‡Œæœ‰ä¸å°‘æœ‰æ„æ€çš„è®¾è®¡ï¼Œé€šè¿‡äº†è§£ä»–ä»¬æœ‰åŠ©äºæˆ‘ä»¬è‡ªèº«çš„æé«˜ï¼Œä¹Ÿè®©æˆ‘ä»¬èƒ½å†™å‡ºæ›´é«˜æ•ˆçš„&lt;code&gt;Go&lt;/code&gt;ç¨‹åºã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Goå†…å­˜ç®¡ç†çš„è®¾è®¡æ—¨åœ¨åœ¨å¹¶å‘ç¯å¢ƒä¸­å¿«é€Ÿè¿è¡Œï¼Œå¹¶ä¸åƒåœ¾å›æ”¶å™¨é›†æˆåœ¨ä¸€èµ·ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;package&lt;/span&gt;Â main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt;Â smallStructÂ &lt;span&gt;struct&lt;/span&gt;Â {&lt;br/&gt;Â Â Â a,Â bÂ &lt;span&gt;int64&lt;/span&gt;&lt;br/&gt;Â Â Â c,Â dÂ &lt;span&gt;float64&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;Â {&lt;br/&gt;Â Â Â smallAllocation()&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;//go:noinline&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt;Â &lt;span&gt;smallAllocation&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â *&lt;span&gt;smallStruct&lt;/span&gt;&lt;/span&gt;Â {&lt;br/&gt;Â Â Â &lt;span&gt;return&lt;/span&gt;Â &amp;amp;smallStruct{}&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡½æ•°ä¸Šé¢çš„æ³¨é‡Š&lt;code&gt;//go:noinline&lt;/code&gt;å°†ç¦æ­¢&lt;code&gt;Go&lt;/code&gt;å¯¹è¯¥å‡½æ•°è¿›è¡Œå†…è”ï¼Œè¿™æ ·&lt;code&gt;main&lt;/code&gt;å‡½æ•°å°±ä¼šä½¿ç”¨&lt;code&gt;smallAllocation&lt;/code&gt;å‡½æ•°è¿”å›çš„æŒ‡é’ˆå˜é‡ï¼Œå› ä¸ºè¢«å¤šä¸ªå‡½æ•°ä½¿ç”¨ï¼Œè¿”å›çš„è¿™ä¸ªå˜é‡å°†è¢«åˆ†é…åˆ°å †ä¸Šã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…³äºå†…è”çš„æ¦‚å¿µä¹‹å‰çš„æ–‡ç« æœ‰è¯´è¿‡ï¼š&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;strong&gt;å†…è”æ˜¯ä¸€ç§æ‰‹åŠ¨æˆ–ç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œç”¨äºå°†ç®€çŸ­å‡½æ•°çš„è°ƒç”¨æ›¿æ¢ä¸ºå‡½æ•°ä½“æœ¬èº«ã€‚è¿™ä¹ˆåšçš„åŸå› æ˜¯å®ƒå¯ä»¥æ¶ˆé™¤å‡½æ•°è°ƒç”¨æœ¬èº«çš„å¼€é”€ï¼Œä¹Ÿä½¿å¾—ç¼–è¯‘å™¨èƒ½æ›´é«˜æ•ˆåœ°æ‰§è¡Œå…¶ä»–çš„ä¼˜åŒ–ç­–ç•¥ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥å¦‚æœä¸Šé¢çš„ä¾‹å­ä¸å¹²é¢„ç¼–è¯‘å™¨çš„è¯ï¼Œç¼–è¯‘å™¨é€šè¿‡å†…è”å°†&lt;code&gt;smallAllocation&lt;/code&gt;å‡½æ•°ä½“é‡Œçš„å†…å®¹ç›´æ¥æ”¾åˆ°&lt;code&gt;main&lt;/code&gt;å‡½æ•°é‡Œï¼Œè¿™æ ·å°±ä¸ä¼šäº§ç”Ÿ&lt;code&gt;smallAllocation&lt;/code&gt;è¿™ä¸ªå‡½æ•°çš„è°ƒç”¨äº†ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½æ˜¯&lt;code&gt;main&lt;/code&gt;å‡½æ•°å†…è¿™ä¸ªèŒƒå›´ä½¿ç”¨çš„ï¼Œä¹Ÿå°±ä¸åœ¨éœ€è¦å°†å˜é‡å¾€å †ä¸Šåˆ†é…äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»§ç»­è¯´ä¸Šé¢é‚£ä¸ªä¾‹å­ï¼Œé€šè¿‡é€ƒé€¸åˆ†æå‘½ä»¤ &lt;strong&gt;go tool compile Â -m main.go&lt;/strong&gt; å¯ä»¥ç¡®è®¤æˆ‘ä»¬ä¸Šé¢çš„åˆ†æï¼Œ&lt;code&gt;&amp;amp;smallStruct{}&lt;/code&gt;ä¼šè¢«åˆ†é…åˆ°å †ä¸Šå»ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;âœÂ goÂ toolÂ compileÂ -mÂ main.go&lt;br/&gt;main.go:12:6:Â canÂ inlineÂ main&lt;br/&gt;main.go:10:9:Â &amp;amp;smallStructÂ literalÂ escapesÂ toÂ heap&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å€ŸåŠ©å‘½ä»¤&lt;strong&gt;go tool compile -S main.go&lt;/strong&gt;ï¼Œå¯ä»¥æ˜¾ç¤ºè¯¥ç¨‹åºçš„æ±‡ç¼–ä»£ç ï¼Œä¹Ÿå¯ä»¥æ˜ç¡®åœ°å‘æˆ‘ä»¬å±•ç¤ºå†…å­˜çš„åˆ†é…ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;0x001dÂ 00029Â (main.go:10)Â Â Â Â Â Â Â LEAQÂ Â Â Â type.&quot;&quot;.smallStruct(SB),Â AX&lt;br/&gt;0x0024Â 00036Â (main.go:10)Â Â Â Â Â Â Â PCDATAÂ Â $2,Â $0&lt;br/&gt;0x0024Â 00036Â (main.go:10)Â Â Â Â Â Â Â MOVQÂ Â Â Â AX,Â (SP)&lt;br/&gt;0x0028Â 00040Â (main.go:10)Â Â Â Â Â Â Â CALLÂ Â Â Â runtime.newobject(SB)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å†…ç½®å‡½æ•°&lt;code&gt;newobject&lt;/code&gt;ä¼šé€šè¿‡è°ƒç”¨å¦å¤–ä¸€ä¸ªå†…ç½®å‡½æ•°&lt;code&gt;mallocgc&lt;/code&gt;åœ¨å †ä¸Šåˆ†é…æ–°å†…å­˜ã€‚åœ¨Goé‡Œé¢æœ‰ä¸¤ç§å†…å­˜åˆ†é…ç­–ç•¥ï¼Œä¸€ç§é€‚ç”¨äºç¨‹åºé‡Œå°å†…å­˜å—çš„ç”³è¯·ï¼Œå¦ä¸€ç§é€‚ç”¨äºå¤§å†…å­˜å—çš„ç”³è¯·ï¼Œå¤§å†…å­˜å—æŒ‡çš„æ˜¯å¤§äº32KBã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢æˆ‘ä»¬æ¥ç»†èŠä¸€ä¸‹è¿™ä¸¤ç§ç­–ç•¥ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å°äº32KBå†…å­˜å—çš„åˆ†é…ç­–ç•¥&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ç¨‹åºé‡Œå‘ç”Ÿäº†&lt;code&gt;32kb&lt;/code&gt;ä»¥ä¸‹çš„å°å—å†…å­˜ç”³è¯·æ—¶ï¼ŒGoä¼šä»ä¸€ä¸ªå«åšçš„&lt;code&gt;mcache&lt;/code&gt;çš„æœ¬åœ°ç¼“å­˜ç»™ç¨‹åºåˆ†é…å†…å­˜ã€‚è¿™ä¸ªæœ¬åœ°ç¼“å­˜&lt;code&gt;mcache&lt;/code&gt;æŒæœ‰ä¸€ç³»åˆ—çš„å¤§å°ä¸º&lt;code&gt;32kb&lt;/code&gt;çš„å†…å­˜å—ï¼Œè¿™æ ·çš„ä¸€ä¸ªå†…å­˜å—é‡Œå«åš&lt;code&gt;mspan&lt;/code&gt;ï¼Œå®ƒæ˜¯è¦ç»™ç¨‹åºåˆ†é…å†…å­˜æ—¶çš„åˆ†é…å•å…ƒã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.687382297551789&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4ibYqZUwMxwOh3sQpHvQowB6XvZYknRxo5dhC3uvlOr0etLAibsgPm56FalO52ZQVdfat8aSUkQDQA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;531&quot;/&gt;&lt;figcaption&gt;ä»mcacheä¸­ç»™ç¨‹åºåˆ†é…å†…å­˜&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨Goçš„è°ƒåº¦å™¨æ¨¡å‹é‡Œï¼Œæ¯ä¸ªçº¿ç¨‹&lt;code&gt;M&lt;/code&gt;ä¼šç»‘å®šç»™ä¸€ä¸ªå¤„ç†å™¨&lt;code&gt;P&lt;/code&gt;ï¼Œåœ¨å•ä¸€ç²’åº¦çš„æ—¶é—´é‡Œåªèƒ½åšå¤šå¤„ç†è¿è¡Œä¸€ä¸ª&lt;code&gt;goroutine&lt;/code&gt;ï¼Œæ¯ä¸ª&lt;code&gt;P&lt;/code&gt;éƒ½ä¼šç»‘å®šä¸€ä¸ªä¸Šé¢è¯´çš„æœ¬åœ°ç¼“å­˜&lt;code&gt;mcache&lt;/code&gt;ã€‚å½“éœ€è¦è¿›è¡Œå†…å­˜åˆ†é…æ—¶ï¼Œå½“å‰è¿è¡Œçš„&lt;code&gt;goroutine&lt;/code&gt;ä¼šä»&lt;code&gt;mcache&lt;/code&gt;ä¸­æŸ¥æ‰¾å¯ç”¨çš„&lt;code&gt;mspan&lt;/code&gt;ã€‚ä»æœ¬åœ°&lt;code&gt;mcache&lt;/code&gt;é‡Œåˆ†é…å†…å­˜æ—¶ä¸éœ€è¦åŠ é”ï¼Œè¿™ç§åˆ†é…ç­–ç•¥æ•ˆç‡æ›´é«˜ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£ä¹ˆæœ‰äººå°±ä¼šé—®äº†ï¼Œæœ‰çš„å˜é‡å¾ˆå°å°±æ˜¯æ•°å­—ï¼Œæœ‰çš„å´æ˜¯ä¸€ä¸ªå¤æ‚çš„ç»“æ„ä½“ï¼Œç”³è¯·å†…å­˜æ—¶éƒ½åˆ†ç»™ä»–ä»¬ä¸€ä¸ª&lt;code&gt;mspan&lt;/code&gt;è¿™æ ·çš„å•å…ƒä¼šä¸ä¼šäº§ç”Ÿæµªè´¹ã€‚å…¶å®&lt;code&gt;mcache&lt;/code&gt;æŒæœ‰çš„è¿™ä¸€ç³»åˆ—çš„&lt;code&gt;mspan&lt;/code&gt;å¹¶ä¸éƒ½æ˜¯ç»Ÿä¸€å¤§å°çš„ï¼Œè€Œæ˜¯æŒ‰ç…§å¤§å°ï¼Œä»8å­—èŠ‚åˆ°32KBåˆ†äº†å¤§æ¦‚70ç±»çš„&lt;code&gt;msapn&lt;/code&gt;ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.9553349875930521&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4ibYqZUwMxwOh3sQpHvQowBgFDzQ6BtMd6o63YmyMYy2CwAOba6xqdpsfnUToEmziaBOvoXJ58KQ6Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;403&quot; class=&quot;rich_pages wxw-img&quot;/&gt;&lt;figcaption&gt;æŒ‰ç…§å¤§å°åˆ†ç±»çš„mspan&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°±æ–‡ç« å¼€å§‹çš„é‚£ä¸ªä¾‹å­æ¥è¯´ï¼Œé‚£ä¸ªç»“æ„ä½“çš„å¤§å°æ˜¯32å­—èŠ‚ï¼Œæ­£å¥½32å­—èŠ‚çš„è¿™ç§&lt;code&gt;mspan&lt;/code&gt;èƒ½æ»¡è¶³éœ€æ±‚ï¼Œé‚£ä¹ˆåˆ†é…å†…å­˜çš„æ—¶å€™å°±ä¼šç»™å®ƒåˆ†é…ä¸€ä¸ª32å­—èŠ‚å¤§å°çš„&lt;code&gt;mspan&lt;/code&gt;ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.687382297551789&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4ibYqZUwMxwOh3sQpHvQowBbImaUer9P3Fy91cNicyno4uIDBcw4scyt0z8lYePgJngA61diaLVF0bg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;531&quot;/&gt;&lt;figcaption&gt;alloc åˆ†é…å†…å­˜&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç°åœ¨ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå¥½å¥‡ï¼Œå¦‚æœåˆ†é…å†…å­˜æ—¶&lt;code&gt;mcachce&lt;/code&gt;é‡Œæ²¡æœ‰ç©ºé—²çš„32å­—èŠ‚çš„&lt;code&gt;mspan&lt;/code&gt;äº†è¯¥æ€ä¹ˆåŠï¼Ÿ&lt;code&gt;Go&lt;/code&gt;é‡Œè¿˜ä¸ºæ¯ç§ç±»åˆ«çš„&lt;code&gt;mspan&lt;/code&gt;ç»´æŠ¤ç€ä¸€ä¸ª&lt;code&gt;mcentral&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;mcentral&lt;/code&gt;çš„ä½œç”¨æ˜¯ä¸ºæ‰€æœ‰&lt;code&gt;mcache&lt;/code&gt;æä¾›åˆ‡åˆ†å¥½çš„&lt;code&gt;mspan&lt;/code&gt;èµ„æºã€‚æ¯ä¸ª&lt;code&gt;central&lt;/code&gt;ä¼šæŒæœ‰ä¸€ç§ç‰¹å®šå¤§å°çš„å…¨å±€&lt;code&gt;mspan&lt;/code&gt;åˆ—è¡¨ï¼ŒåŒ…æ‹¬å·²åˆ†é…å‡ºå»çš„å’Œæœªåˆ†é…å‡ºå»çš„ã€‚æ¯ä¸ª&lt;code&gt;mcentral&lt;/code&gt;å¯¹åº”ä¸€ç§&lt;code&gt;mspan&lt;/code&gt;ï¼Œå½“å·¥ä½œçº¿ç¨‹çš„&lt;code&gt;mcache&lt;/code&gt;ä¸­æ²¡æœ‰åˆé€‚ï¼ˆä¹Ÿå°±æ˜¯ç‰¹å®šå¤§å°çš„ï¼‰çš„&lt;code&gt;mspan&lt;/code&gt;æ—¶å°±ä¼šä»&lt;code&gt;mcentral&lt;/code&gt; å»è·å–ã€‚&lt;code&gt;mcentral&lt;/code&gt;è¢«æ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹å…±åŒäº«æœ‰ï¼Œå­˜åœ¨å¤šä¸ª&lt;code&gt;goroutine&lt;/code&gt;ç«äº‰çš„æƒ…å†µï¼Œå› æ­¤ä»&lt;code&gt;mcentral&lt;/code&gt;è·å–èµ„æºæ—¶éœ€è¦åŠ é”ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;mcentral&lt;/code&gt;çš„å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;//runtime/mcentral.go&lt;br/&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt;Â mcentralÂ structÂ {&lt;br/&gt;Â Â Â Â //Â äº’æ–¥é”&lt;br/&gt;Â Â Â Â lockÂ mutexÂ &lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â //Â è§„æ ¼&lt;br/&gt;Â Â Â Â sizeclassÂ int32Â &lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â //Â å°šæœ‰ç©ºé—²objectçš„mspané“¾è¡¨&lt;br/&gt;Â Â Â Â nonemptyÂ mSpanListÂ &lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â //Â æ²¡æœ‰ç©ºé—²objectçš„mspané“¾è¡¨ï¼Œæˆ–è€…æ˜¯å·²è¢«mcacheå–èµ°çš„msapné“¾è¡¨&lt;br/&gt;Â Â Â Â emptyÂ mSpanListÂ &lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â //Â å·²ç´¯è®¡åˆ†é…çš„å¯¹è±¡ä¸ªæ•°&lt;br/&gt;Â Â Â Â nmallocÂ uint64Â &lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;mcentral&lt;/code&gt;é‡Œç»´æŠ¤ç€ä¸¤ä¸ªåŒå‘é“¾è¡¨ï¼Œ&lt;strong&gt;nonempty&lt;/strong&gt;è¡¨ç¤ºé“¾è¡¨é‡Œè¿˜æœ‰ç©ºé—²çš„&lt;code&gt;mspan&lt;/code&gt;å¾…åˆ†é…ã€‚&lt;strong&gt;empty&lt;/strong&gt;è¡¨ç¤ºè¿™æ¡é“¾è¡¨é‡Œçš„&lt;code&gt;mspan&lt;/code&gt;éƒ½è¢«åˆ†é…äº†&lt;code&gt;object&lt;/code&gt;ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7651122625215889&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4ibYqZUwMxwOh3sQpHvQowB4LP16QeDbtD6qEFycRENb5iaV8kVLUu9kCby1lyo5kPTJ6ekYGSwkeg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;579&quot;/&gt;&lt;figcaption&gt;mcentral&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœä¸Šé¢æˆ‘ä»¬é‚£ä¸ªç¨‹åºç”³è¯·å†…å­˜çš„æ—¶å€™ï¼Œ&lt;code&gt;mcache&lt;/code&gt;é‡Œå·²ç»æ²¡æœ‰åˆé€‚çš„ç©ºé—²&lt;code&gt;mspan&lt;/code&gt;äº†ï¼Œé‚£ä¹ˆå·¥ä½œçº¿ç¨‹å°±ä¼šåƒä¸‹å›¾è¿™æ ·å»&lt;code&gt;mcentral&lt;/code&gt;é‡Œå»ç”³è¯·ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç®€å•è¯´ä¸‹&lt;code&gt;mcache&lt;/code&gt;ä»&lt;code&gt;mcentral&lt;/code&gt;è·å–å’Œå½’è¿˜&lt;code&gt;mspan&lt;/code&gt;çš„æµç¨‹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;è·å– åŠ é”ï¼›ä»&lt;code&gt;nonempty&lt;/code&gt;é“¾è¡¨æ‰¾åˆ°ä¸€ä¸ªå¯ç”¨çš„&lt;code&gt;mspan&lt;/code&gt;ï¼›å¹¶å°†å…¶ä»&lt;code&gt;nonempty&lt;/code&gt;é“¾è¡¨åˆ é™¤ï¼›å°†å–å‡ºçš„&lt;code&gt;mspan&lt;/code&gt;åŠ å…¥åˆ°&lt;code&gt;empty&lt;/code&gt;é“¾è¡¨ï¼›å°†&lt;code&gt;mspan&lt;/code&gt;è¿”å›ç»™å·¥ä½œçº¿ç¨‹ï¼›è§£é”ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å½’è¿˜ åŠ é”ï¼›å°†&lt;code&gt;mspan&lt;/code&gt;ä»&lt;code&gt;empty&lt;/code&gt;é“¾è¡¨åˆ é™¤ï¼›å°†&lt;code&gt;mspan&lt;/code&gt;åŠ å…¥åˆ°&lt;code&gt;nonempty&lt;/code&gt;é“¾è¡¨ï¼›è§£é”ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.581081081081081&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4ibYqZUwMxwOh3sQpHvQowBvfL1SILd6E5mx20krFSFkXaXicDCXOKtMcngSEewiarukXELS57qYLog/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;666&quot;/&gt;&lt;figcaption&gt;ä»mcentralé‡Œç”³è¯·mspan&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“&lt;code&gt;mcentral&lt;/code&gt;æ²¡æœ‰ç©ºé—²çš„&lt;code&gt;mspan&lt;/code&gt;æ—¶ï¼Œä¼šå‘&lt;code&gt;mheap&lt;/code&gt;ç”³è¯·ã€‚è€Œ&lt;code&gt;mheap&lt;/code&gt;æ²¡æœ‰èµ„æºæ—¶ï¼Œä¼šå‘æ“ä½œç³»ç»Ÿç”³è¯·æ–°å†…å­˜ã€‚&lt;code&gt;mheap&lt;/code&gt;ä¸»è¦ç”¨äºå¤§å¯¹è±¡çš„å†…å­˜åˆ†é…ï¼Œä»¥åŠç®¡ç†æœªåˆ‡å‰²çš„&lt;code&gt;mspan&lt;/code&gt;ï¼Œç”¨äºç»™&lt;code&gt;mcentral&lt;/code&gt;åˆ‡å‰²æˆå°å¯¹è±¡ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.38380281690140844&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4ibYqZUwMxwOh3sQpHvQowBkwtqibfPPNMRNZoKxDTZ5fPibrmxOPpCussX9xHtlT4cicdct3XSibxCvA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;568&quot;/&gt;&lt;figcaption&gt;ä»heapä¸Šç”³è¯·å†…å­˜&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŒæ—¶æˆ‘ä»¬ä¹Ÿçœ‹åˆ°ï¼Œ&lt;code&gt;mheap&lt;/code&gt;ä¸­å«æœ‰æ‰€æœ‰è§„æ ¼çš„&lt;code&gt;mcentral&lt;/code&gt;ï¼Œæ‰€ä»¥ï¼Œå½“ä¸€ä¸ª&lt;code&gt;mcache&lt;/code&gt;ä»&lt;code&gt;mcentral&lt;/code&gt;ç”³è¯·&lt;code&gt;mspan&lt;/code&gt;æ—¶ï¼Œåªéœ€è¦åœ¨ç‹¬ç«‹çš„&lt;code&gt;mcentral&lt;/code&gt;ä¸­ä½¿ç”¨é”ï¼Œå¹¶ä¸ä¼šå½±å“ç”³è¯·å…¶ä»–è§„æ ¼çš„&lt;code&gt;mspan&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šé¢è¯´äº†æ¯ç§å°ºå¯¸çš„&lt;code&gt;mspan&lt;/code&gt;éƒ½æœ‰ä¸€ä¸ªå…¨å±€çš„åˆ—è¡¨å­˜æ”¾åœ¨&lt;code&gt;mcentral&lt;/code&gt;é‡Œä¾›æ‰€æœ‰çº¿ç¨‹ä½¿ç”¨ï¼Œæ‰€æœ‰&lt;code&gt;mcentral&lt;/code&gt;çš„é›†åˆåˆ™æ˜¯å­˜æ”¾äº&lt;code&gt;mheap&lt;/code&gt;ä¸­çš„ã€‚&lt;code&gt;mheap&lt;/code&gt;é‡Œçš„&lt;code&gt;arena&lt;/code&gt; åŒºåŸŸæ˜¯çœŸæ­£çš„å †åŒºï¼Œè¿è¡Œæ—¶ä¼šå°† &lt;code&gt;8KB&lt;/code&gt; çœ‹åšä¸€é¡µï¼Œè¿™äº›å†…å­˜é¡µä¸­å­˜å‚¨äº†æ‰€æœ‰åœ¨å †ä¸Šåˆå§‹åŒ–çš„å¯¹è±¡ã€‚è¿è¡Œæ—¶ä½¿ç”¨äºŒç»´çš„ runtime.heapArena æ•°ç»„ç®¡ç†æ‰€æœ‰çš„å†…å­˜ï¼Œæ¯ä¸ª runtime.heapArena éƒ½ä¼šç®¡ç† 64MB çš„å†…å­˜ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.706766917293233&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4ibYqZUwMxwOh3sQpHvQowBylDhdmic0LGrKsfdAE1ESHV3GCt1F9auPJJ9R8qJu2tuCaryPoyZ4Ow/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;399&quot; class=&quot;rich_pages wxw-img&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœ &lt;code&gt;arena&lt;/code&gt; åŒºåŸŸæ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼Œä¼šè°ƒç”¨ runtime.mheap.sysAlloc ä»æ“ä½œç³»ç»Ÿä¸­ç”³è¯·æ›´å¤šçš„å†…å­˜ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å¤§äº32KBå†…å­˜å—çš„åˆ†é…ç­–ç•¥&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Goæ²¡æ³•ä½¿ç”¨å·¥ä½œçº¿ç¨‹çš„æœ¬åœ°ç¼“å­˜&lt;code&gt;mcache&lt;/code&gt;å’Œå…¨å±€ä¸­å¿ƒç¼“å­˜&lt;code&gt;mcentral&lt;/code&gt;ä¸Šç®¡ç†è¶…è¿‡32KBçš„å†…å­˜åˆ†é…ï¼Œæ‰€ä»¥å¯¹äºé‚£äº›è¶…è¿‡32KBçš„å†…å­˜ç”³è¯·ï¼Œä¼šç›´æ¥ä»å †ä¸Š(&lt;code&gt;mheap&lt;/code&gt;)ä¸Šåˆ†é…å¯¹åº”çš„æ•°é‡çš„å†…å­˜é¡µï¼ˆæ¯é¡µå¤§å°æ˜¯8KBï¼‰ç»™ç¨‹åºã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3383742911153119&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4ibYqZUwMxwOh3sQpHvQowBv8NT2G2tibX9v3icjIGVRZsNxtnCgHibToeK6Iiaql8iadLakqAAarrX3FQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;529&quot;/&gt;&lt;figcaption&gt;ç›´æ¥ä»å †ä¸Šåˆ†é…å†…å­˜&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬æŠŠå†…å­˜åˆ†é…ç®¡ç†æ¶‰åŠçš„æ‰€æœ‰æ¦‚å¿µä¸²èµ·æ¥ï¼Œå¯ä»¥å‹¾ç”»å‡ºGoå†…å­˜ç®¡ç†çš„ä¸€ä¸ªå…¨å±€è§†å›¾ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5203883495145631&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4ibYqZUwMxwOh3sQpHvQowBZz5gbKtQbg119JrXsGT7WVsjBh3l7c3DE1Dk7P5tKsmer2cibibUYJibQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1030&quot;/&gt;&lt;figcaption&gt;Goå†…å­˜åˆ†é…çš„å…¨å±€ç¤ºæ„å›¾&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Goè¯­è¨€çš„å†…å­˜åˆ†é…éå¸¸å¤æ‚ï¼Œè¿™ä¸ªæ–‡ç« ä»ä¸€ä¸ªæ¯”è¾ƒç²—çš„è§’åº¦æ¥çœ‹Goçš„å†…å­˜åˆ†é…ï¼Œå¹¶æ²¡æœ‰æ·±å…¥ç»†èŠ‚ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œäº†è§£å®ƒçš„åŸç†ï¼Œåˆ°è¿™ä¸ªç¨‹åº¦ä¹Ÿå°±å¯ä»¥äº†ï¼ˆåº”ä»˜é¢è¯•ï¼‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ€»ç»“èµ·æ¥å…³äºGoå†…å­˜åˆ†é…ç®¡ç†çš„ç­–ç•¥æœ‰å¦‚ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;Goåœ¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œä¼šå‘æ“ä½œç³»ç»Ÿç”³è¯·ä¸€å¤§å—å†…å­˜ï¼Œç”±&lt;code&gt;mheap&lt;/code&gt;ç»“æ„å…¨å±€ç®¡ç†ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Goå†…å­˜ç®¡ç†çš„åŸºæœ¬å•å…ƒæ˜¯&lt;code&gt;mspan&lt;/code&gt;ï¼Œæ¯ç§&lt;code&gt;mspan&lt;/code&gt;å¯ä»¥åˆ†é…ç‰¹å®šå¤§å°çš„&lt;code&gt;object&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;mcache&lt;/code&gt;, &lt;code&gt;mcentral&lt;/code&gt;, &lt;code&gt;mheap&lt;/code&gt;æ˜¯&lt;code&gt;Go&lt;/code&gt;å†…å­˜ç®¡ç†çš„ä¸‰å¤§ç»„ä»¶ï¼Œ&lt;code&gt;mcache&lt;/code&gt;ç®¡ç†çº¿ç¨‹åœ¨æœ¬åœ°ç¼“å­˜çš„&lt;code&gt;mspan&lt;/code&gt;ï¼›&lt;code&gt;mcentral&lt;/code&gt;ç®¡ç†å…¨å±€çš„&lt;code&gt;mspan&lt;/code&gt;ä¾›æ‰€æœ‰çº¿ç¨‹ä½¿ç”¨ï¼›&lt;code&gt;mheap&lt;/code&gt;ç®¡ç†&lt;code&gt;Go&lt;/code&gt;çš„æ‰€æœ‰åŠ¨æ€åˆ†é…å†…å­˜ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸€èˆ¬å°å¯¹è±¡é€šè¿‡&lt;code&gt;mspan&lt;/code&gt;åˆ†é…å†…å­˜ï¼›å¤§å¯¹è±¡åˆ™ç›´æ¥ç”±&lt;code&gt;mheap&lt;/code&gt;åˆ†é…å†…å­˜ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;ç›¸å…³é˜…è¯»&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzUzNTY5MzU2MA==&amp;amp;mid=2247485579&amp;amp;idx=1&amp;amp;sn=f481cff4ffccacc186a020e45e884924&amp;amp;chksm=fa80d91ccdf7500ab984ecde7056aa29a2986c423557736c32bd251f2cb5d1ce1e54909753cc&amp;amp;token=1603590138&amp;amp;lang=zh_CN&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;Goå†…å­˜ç®¡ç†ä¹‹ä»£ç çš„é€ƒé€¸åˆ†æ&lt;/a&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzUzNTY5MzU2MA==&amp;amp;mid=2247484559&amp;amp;idx=1&amp;amp;sn=d639ce831d514c0f73f195f207c0583d&amp;amp;chksm=fa80d518cdf75c0e224697bd9f6f97ad94082f09591d2b9141974baf8a1054e9de0d895fb603&amp;amp;token=1603590138&amp;amp;lang=zh_CN&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;ä¸Šå‘¨å¹¶å‘é¢˜çš„è§£é¢˜æ€è·¯ä»¥åŠä»‹ç»Goè¯­è¨€è°ƒåº¦å™¨&lt;/a&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;å‚è€ƒé“¾æ¥&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt; Memory Management and Allocation&lt;/span&gt;&lt;sup&gt;[1]&lt;/sup&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å›¾è§£Goè¯­è¨€å†…å­˜åˆ†é…&lt;/span&gt;&lt;sup&gt;[2]&lt;/sup&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å†…å­˜åˆ†é…å™¨&lt;/span&gt;&lt;sup&gt;[3]&lt;/sup&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;/span&gt;&lt;/section&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzUzNTY5MzU2MA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4pGhLz2xEbRFHnAQon2QLYgbBibCJo1ibJHesLWshPJeRibateRtAqkaf6BgjlbhYiaxHLq6Zu07CRPw/0?wx_fmt=png&quot; data-nickname=&quot;ç½‘ç®¡å¨biå¨&quot; data-alias=&quot;kevin_tech&quot; data-signature=&quot;åˆ†äº«è½¯ä»¶å¼€å‘å’Œç³»ç»Ÿæ¶æ„è®¾è®¡åŸºç¡€ã€Go è¯­è¨€å’ŒKubernetesã€‚&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;p&gt;&lt;/p&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>5374318ab5f8c7f7184a8468a026f1f7</guid>
<title>garr ï¼šé«˜æ€§èƒ½ã€çº¿ç¨‹å®‰å…¨ã€æ— é”çš„ go æ•°æ®ç»“æ„é›†åˆ</title>
<link>https://toutiao.io/k/8y2p13x</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;article class=&quot;markdown-body entry-content container-lg&quot; itemprop=&quot;text&quot;&gt;&lt;h1 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-garr---go-libs-in-a-jar&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#garr---go-libs-in-a-jar&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Garr - Go libs in a Jar&lt;/h1&gt;
&lt;p dir=&quot;auto&quot;&gt;&lt;a href=&quot;https://pkg.go.dev/go.linecorp.com/garr&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/ef0553731b200a819d39d8cc7e7977fd6ba3fd2a6db5c6d654181db1ab735727/68747470733a2f2f706b672e676f2e6465762f62616467652f676f2e6c696e65636f72702e636f6d2f676172722e737667&quot; alt=&quot;Go Reference&quot; data-canonical-src=&quot;https://pkg.go.dev/badge/go.linecorp.com/garr.svg&quot;/&gt;&lt;/a&gt;
&lt;a target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; href=&quot;https://github.com/line/garr/actions/workflows/ci.yml/badge.svg&quot;&gt;&lt;img src=&quot;https://github.com/line/garr/actions/workflows/ci.yml/badge.svg&quot; alt=&quot;CI&quot;/&gt;&lt;/a&gt;
&lt;a href=&quot;https://goreportcard.com/report/go.linecorp.com/garr&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/edf4b843efd365f4f0bc23578ba03523946158a91ee7357d9b03811778dfcd79/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f676f2e6c696e65636f72702e636f6d2f67617272&quot; alt=&quot;Go Report Card&quot; data-canonical-src=&quot;https://goreportcard.com/badge/go.linecorp.com/garr&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p dir=&quot;auto&quot;&gt;Collection of high performance, thread-safe, lock-free go data structures.&lt;/p&gt;
&lt;ul dir=&quot;auto&quot;&gt;
&lt;li&gt;&lt;a href=&quot;/line/garr/blob/main/adder/README.md&quot;&gt;adder&lt;/a&gt; - Data structure to perform highly-performant sum under high contention. Inspired by &lt;a href=&quot;https://openjdk.java.net/&quot; rel=&quot;nofollow&quot;&gt;OpenJDK LongAdder&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/line/garr/blob/main/circuit-breaker/README.md&quot;&gt;circuit-breaker&lt;/a&gt; - Data structure to implement circuit breaker pattern to detect remote service failure/alive status.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/line/garr/blob/main/queue/README.md&quot;&gt;queue&lt;/a&gt; - Queue data structure, go implementation of &lt;code&gt;JDKLinkedQueue&lt;/code&gt; and &lt;code&gt;MutexLinkedQueue&lt;/code&gt; from &lt;code&gt;OpenJDK&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/line/garr/blob/main/retry/README.md&quot;&gt;retry&lt;/a&gt; - Controls backoff between attempts in a retry operation.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/line/garr/blob/main/worker-pool/README.md&quot;&gt;worker-pool&lt;/a&gt; - Worker pool implementation in go to help perform multiple tasks concurrently with a fixed-but-expandable amount of workers.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-usage&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#usage&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Usage&lt;/h1&gt;
&lt;h2 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-getting-started&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#getting-started&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Getting started&lt;/h2&gt;
&lt;div class=&quot;highlight highlight-source-shell notranslate position-relative overflow-auto&quot; data-snippet-clipboard-copy-content=&quot;go get -u go.linecorp.com/garr&quot;&gt;&lt;pre&gt;go get -u go.linecorp.com/garr&lt;/pre&gt;&lt;/div&gt;
&lt;h2 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-examples&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#examples&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Examples&lt;/h2&gt;
&lt;p dir=&quot;auto&quot;&gt;Please find detailed examples in each sub-package.&lt;/p&gt;
&lt;h3 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-adder&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#adder&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Adder&lt;/h3&gt;
&lt;div class=&quot;highlight highlight-source-go notranslate position-relative overflow-auto&quot; data-snippet-clipboard-copy-content=&quot;package main&amp;#10;&amp;#10;import (&amp;#10;&amp;quot;fmt&amp;quot;&amp;#10;&amp;quot;time&amp;quot;&amp;#10;&amp;#10;ga &amp;quot;go.linecorp.com/garr/adder&amp;quot;&amp;#10;)&amp;#10;&amp;#10;func main() {&amp;#10;// or ga.DefaultAdder() which uses jdk long-adder as default&amp;#10;adder := ga.NewLongAdder(ga.JDKAdderType) &amp;#10;&amp;#10;for i := 0; i &amp;lt; 100; i++ {&amp;#10;go func() {&amp;#10;adder.Add(123)&amp;#10;}()&amp;#10;}&amp;#10;&amp;#10;time.Sleep(3 * time.Second)&amp;#10;&amp;#10;// get total added value&amp;#10;fmt.Println(adder.Sum()) &amp;#10;}&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-k&quot;&gt;package&lt;/span&gt; main

&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; (
&lt;span class=&quot;pl-s&quot;&gt;&quot;fmt&quot;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&quot;time&quot;&lt;/span&gt;

ga &lt;span class=&quot;pl-s&quot;&gt;&quot;go.linecorp.com/garr/adder&quot;&lt;/span&gt;
)

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;main&lt;/span&gt;() {
&lt;span class=&quot;pl-c&quot;&gt;// or ga.DefaultAdder() which uses jdk long-adder as default&lt;/span&gt;
&lt;span class=&quot;pl-s1&quot;&gt;adder&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;ga&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;NewLongAdder&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;ga&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;JDKAdderType&lt;/span&gt;) 

&lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;; &lt;span class=&quot;pl-s1&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;100&lt;/span&gt;; &lt;span class=&quot;pl-s1&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;++&lt;/span&gt; {
&lt;span class=&quot;pl-k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt;() {
&lt;span class=&quot;pl-s1&quot;&gt;adder&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Add&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;123&lt;/span&gt;)
}()
}

&lt;span class=&quot;pl-s1&quot;&gt;time&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Sleep&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;time&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Second&lt;/span&gt;)

&lt;span class=&quot;pl-c&quot;&gt;// get total added value&lt;/span&gt;
&lt;span class=&quot;pl-s1&quot;&gt;fmt&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Println&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;adder&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Sum&lt;/span&gt;()) 
}&lt;/pre&gt;&lt;/div&gt;
&lt;h4 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-build-your-own-prometheus-counter-with-adder&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#build-your-own-prometheus-counter-with-adder&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Build your own Prometheus counter with Adder&lt;/h4&gt;
&lt;div class=&quot;highlight highlight-source-go notranslate position-relative overflow-auto&quot; data-snippet-clipboard-copy-content=&quot;package prom&amp;#10;&amp;#10;import (&amp;#10;ga &amp;quot;go.linecorp.com/garr/adder&amp;quot;&amp;#10;&amp;#10;&amp;quot;github.com/prometheus/client_golang/prometheus&amp;quot;&amp;#10;dto &amp;quot;github.com/prometheus/client_model/go&amp;quot;&amp;#10;)&amp;#10;&amp;#10;// NewCounterI64 creates a new CounterI64 based on the provided prometheus.CounterOpts.&amp;#10;func NewCounterI64(opts prometheus.CounterOpts) CounterI64 {&amp;#10;return CounterI64{counter: prometheus.NewCounter(opts)}&amp;#10;}&amp;#10;&amp;#10;// CounterI64 is optimized Prometheus Counter for int64 value type.&amp;#10;type CounterI64 struct {&amp;#10;val     ga.JDKAdder&amp;#10;counter prometheus.Counter&amp;#10;}&amp;#10;&amp;#10;// Value returns current value.&amp;#10;func (c *CounterI64) Value() int64 {&amp;#10;return c.val.Sum()&amp;#10;}&amp;#10;&amp;#10;// Reset value.&amp;#10;func (c *CounterI64) Reset() {&amp;#10;c.val.Reset()&amp;#10;}&amp;#10;&amp;#10;// Desc returns metric desc.&amp;#10;func (c *CounterI64) Desc() *prometheus.Desc {&amp;#10;return c.counter.Desc()&amp;#10;}&amp;#10;&amp;#10;// Inc by 1.&amp;#10;func (c *CounterI64) Inc() {&amp;#10;c.val.Add(1)&amp;#10;}&amp;#10;&amp;#10;// Add by variant.&amp;#10;func (c *CounterI64) Add(val int64) {&amp;#10;if val &amp;gt; 0 {&amp;#10;c.val.Add(val)&amp;#10;}&amp;#10;}&amp;#10;&amp;#10;// Write implements prometheus.Metric interface.&amp;#10;func (c *CounterI64) Write(out *dto.Metric) (err error) {&amp;#10;if err = c.counter.Write(out); err == nil {&amp;#10;value := float64(c.val.Sum())&amp;#10;out.Counter.Value = &amp;amp;value&amp;#10;}&amp;#10;return&amp;#10;}&amp;#10;&amp;#10;// Collect implements prometheus.Collector interface.&amp;#10;func (c *CounterI64) Collect(ch chan&amp;lt;- prometheus.Metric) {&amp;#10;ch &amp;lt;- c&amp;#10;}&amp;#10;&amp;#10;// Describe implements prometheus.Collector interface.&amp;#10;func (c *CounterI64) Describe(ch chan&amp;lt;- *prometheus.Desc) {&amp;#10;ch &amp;lt;- c.counter.Desc()&amp;#10;}&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-k&quot;&gt;package&lt;/span&gt; prom

&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; (
ga &lt;span class=&quot;pl-s&quot;&gt;&quot;go.linecorp.com/garr/adder&quot;&lt;/span&gt;

&lt;span class=&quot;pl-s&quot;&gt;&quot;github.com/prometheus/client_golang/prometheus&quot;&lt;/span&gt;
dto &lt;span class=&quot;pl-s&quot;&gt;&quot;github.com/prometheus/client_model/go&quot;&lt;/span&gt;
)

&lt;span class=&quot;pl-c&quot;&gt;// NewCounterI64 creates a new CounterI64 based on the provided prometheus.CounterOpts.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;NewCounterI64&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;opts&lt;/span&gt; prometheus.&lt;span class=&quot;pl-smi&quot;&gt;CounterOpts&lt;/span&gt;) &lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt; {
&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt;{&lt;span class=&quot;pl-c1&quot;&gt;counter&lt;/span&gt;: &lt;span class=&quot;pl-s1&quot;&gt;prometheus&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;NewCounter&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;opts&lt;/span&gt;)}
}

&lt;span class=&quot;pl-c&quot;&gt;// CounterI64 is optimized Prometheus Counter for int64 value type.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt; {
&lt;span class=&quot;pl-c1&quot;&gt;val&lt;/span&gt;     ga.&lt;span class=&quot;pl-smi&quot;&gt;JDKAdder&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;counter&lt;/span&gt; prometheus.&lt;span class=&quot;pl-smi&quot;&gt;Counter&lt;/span&gt;
}

&lt;span class=&quot;pl-c&quot;&gt;// Value returns current value.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; (&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Value&lt;/span&gt;() &lt;span class=&quot;pl-smi&quot;&gt;int64&lt;/span&gt; {
&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;val&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Sum&lt;/span&gt;()
}

&lt;span class=&quot;pl-c&quot;&gt;// Reset value.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; (&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Reset&lt;/span&gt;() {
&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;val&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Reset&lt;/span&gt;()
}

&lt;span class=&quot;pl-c&quot;&gt;// Desc returns metric desc.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; (&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Desc&lt;/span&gt;() &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;prometheus.&lt;span class=&quot;pl-smi&quot;&gt;Desc&lt;/span&gt; {
&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;counter&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Desc&lt;/span&gt;()
}

&lt;span class=&quot;pl-c&quot;&gt;// Inc by 1.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; (&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Inc&lt;/span&gt;() {
&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;val&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Add&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;)
}

&lt;span class=&quot;pl-c&quot;&gt;// Add by variant.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; (&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Add&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;int64&lt;/span&gt;) {
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt; {
&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;val&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Add&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;val&lt;/span&gt;)
}
}

&lt;span class=&quot;pl-c&quot;&gt;// Write implements prometheus.Metric interface.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; (&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Write&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;dto.&lt;span class=&quot;pl-smi&quot;&gt;Metric&lt;/span&gt;) (&lt;span class=&quot;pl-s1&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;error&lt;/span&gt;) {
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;counter&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Write&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;out&lt;/span&gt;); &lt;span class=&quot;pl-s1&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
&lt;span class=&quot;pl-s1&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;float64&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;val&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Sum&lt;/span&gt;())
&lt;span class=&quot;pl-s1&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Counter&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Value&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;pl-s1&quot;&gt;value&lt;/span&gt;
}
&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt;
}

&lt;span class=&quot;pl-c&quot;&gt;// Collect implements prometheus.Collector interface.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; (&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Collect&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;ch&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;chan&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;&amp;lt;-&lt;/span&gt; prometheus.&lt;span class=&quot;pl-smi&quot;&gt;Metric&lt;/span&gt;) {
&lt;span class=&quot;pl-s1&quot;&gt;ch&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt;
}

&lt;span class=&quot;pl-c&quot;&gt;// Describe implements prometheus.Collector interface.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; (&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Describe&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;ch&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;chan&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;prometheus.&lt;span class=&quot;pl-smi&quot;&gt;Desc&lt;/span&gt;) {
&lt;span class=&quot;pl-s1&quot;&gt;ch&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;counter&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Desc&lt;/span&gt;()
}&lt;/pre&gt;&lt;/div&gt;
&lt;h3 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-queue&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#queue&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Queue&lt;/h3&gt;
&lt;div class=&quot;highlight highlight-source-go notranslate position-relative overflow-auto&quot; data-snippet-clipboard-copy-content=&quot;package main&amp;#10;&amp;#10;import (&amp;#10;    &amp;quot;fmt&amp;quot;&amp;#10;&amp;#10;    &amp;quot;go.linecorp.com/garr/queue&amp;quot;&amp;#10;)&amp;#10;&amp;#10;func main() {&amp;#10;    q := queue.DefaultQueue() // default using jdk linked queue&amp;#10;&amp;#10;    // push&amp;#10;    q.Offer(123)&amp;#10;&amp;#10;    // return head queue but not remove&amp;#10;    head := q.Peak()&amp;#10;    fmt.Println(head)&amp;#10;&amp;#10;    // remove and return head queue&amp;#10;    polled := q.Poll()&amp;#10;    fmt.Println(polled)&amp;#10;}&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-k&quot;&gt;package&lt;/span&gt; main

&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; (
    &lt;span class=&quot;pl-s&quot;&gt;&quot;fmt&quot;&lt;/span&gt;

    &lt;span class=&quot;pl-s&quot;&gt;&quot;go.linecorp.com/garr/queue&quot;&lt;/span&gt;
)

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;main&lt;/span&gt;() {
    &lt;span class=&quot;pl-s1&quot;&gt;q&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;queue&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;DefaultQueue&lt;/span&gt;() &lt;span class=&quot;pl-c&quot;&gt;// default using jdk linked queue&lt;/span&gt;

    &lt;span class=&quot;pl-c&quot;&gt;// push&lt;/span&gt;
    &lt;span class=&quot;pl-s1&quot;&gt;q&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Offer&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;123&lt;/span&gt;)

    &lt;span class=&quot;pl-c&quot;&gt;// return head queue but not remove&lt;/span&gt;
    &lt;span class=&quot;pl-s1&quot;&gt;head&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;q&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Peak&lt;/span&gt;()
    &lt;span class=&quot;pl-s1&quot;&gt;fmt&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Println&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;head&lt;/span&gt;)

    &lt;span class=&quot;pl-c&quot;&gt;// remove and return head queue&lt;/span&gt;
    &lt;span class=&quot;pl-s1&quot;&gt;polled&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;q&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Poll&lt;/span&gt;()
    &lt;span class=&quot;pl-s1&quot;&gt;fmt&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Println&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;polled&lt;/span&gt;)
}&lt;/pre&gt;&lt;/div&gt;
&lt;h3 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-circuit-breaker&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#circuit-breaker&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Circuit Breaker&lt;/h3&gt;
&lt;div class=&quot;highlight highlight-source-go notranslate position-relative overflow-auto&quot; data-snippet-clipboard-copy-content=&quot;package main&amp;#10;&amp;#10;import (&amp;#10;    cbreaker &amp;quot;go.linecorp.com/garr/circuit-breaker&amp;quot;&amp;#10;)&amp;#10;&amp;#10;func makeRequest() error {&amp;#10;return nil&amp;#10;}&amp;#10;&amp;#10;func main() {&amp;#10;    cb := cbreaker.NewCircuitBreakerBuilder().&amp;#10;                        SetTicker(cbreaker.SystemTicker).&amp;#10;                        SetFailureRateThreshold(validFailureRateThreshold).&amp;#10;                        Build()&amp;#10;&amp;#10;    if cb.CanRequest() {&amp;#10;        err := makeRequest()&amp;#10;        if err != nil {&amp;#10;            cb.OnFailure()&amp;#10;        } else {&amp;#10;            cb.OnSuccess()&amp;#10;        }&amp;#10;    }&amp;#10;}&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-k&quot;&gt;package&lt;/span&gt; main

&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; (
    cbreaker &lt;span class=&quot;pl-s&quot;&gt;&quot;go.linecorp.com/garr/circuit-breaker&quot;&lt;/span&gt;
)

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;makeRequest&lt;/span&gt;() &lt;span class=&quot;pl-smi&quot;&gt;error&lt;/span&gt; {
&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;main&lt;/span&gt;() {
    &lt;span class=&quot;pl-s1&quot;&gt;cb&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;cbreaker&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;NewCircuitBreakerBuilder&lt;/span&gt;().
                        &lt;span class=&quot;pl-en&quot;&gt;SetTicker&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;cbreaker&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;SystemTicker&lt;/span&gt;).
                        &lt;span class=&quot;pl-en&quot;&gt;SetFailureRateThreshold&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;validFailureRateThreshold&lt;/span&gt;).
                        &lt;span class=&quot;pl-en&quot;&gt;Build&lt;/span&gt;()

    &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;cb&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;CanRequest&lt;/span&gt;() {
        &lt;span class=&quot;pl-s1&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;makeRequest&lt;/span&gt;()
        &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
            &lt;span class=&quot;pl-s1&quot;&gt;cb&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;OnFailure&lt;/span&gt;()
        } &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;pl-s1&quot;&gt;cb&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;OnSuccess&lt;/span&gt;()
        }
    }
}&lt;/pre&gt;&lt;/div&gt;
&lt;/article&gt;
          &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>4d9f3d8a50d3da0b72b348fc85804780</guid>
<title>æŠ€æœ¯æ²Ÿé€šçš„4ä¸ªæŠ€å·§</title>
<link>https://toutiao.io/k/wpojnbl</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                                       &quot; id=&quot;js_content&quot;&gt;
            &lt;p&gt;&lt;span&gt;&lt;strong&gt;å½“åˆ«äººä¸»åŠ¨æ‰¾ä½ æ²Ÿé€š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“åˆ«äººæ‰¾ä½ è¯´ä¸€ä»¶äº‹æƒ…ï¼Œéœ€è¦ä½ å¸®å¿™çš„æ—¶å€™ã€‚è¦ç¡®ä¿é—®æ¸…æ¥šä»¥ä¸‹ä¿¡æ¯ï¼š&lt;/p&gt;&lt;p&gt;1ã€äº‹ä»¶èƒŒæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/p&gt;&lt;p&gt;2ã€é‡åˆ°çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/p&gt;&lt;p&gt;3ã€éƒ½æ¶‰åŠå“ªäº›å›¢é˜Ÿæˆ–å“ªäº›äººï¼Ÿ&lt;/p&gt;&lt;p&gt;4ã€æœ‰ä»€ä¹ˆé£é™©ï¼Ÿ&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å½“æ–¹æ¡ˆæ²¡æœ‰å–å¾—å…±è¯†&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“ä¸¤ä¸ªäººæ–¹æ¡ˆä¸ä¸€è‡´æ—¶ï¼Œè‡ªå·±æå‡ºäº†æ–¹æ¡ˆAï¼Œé¢†å¯¼æå‡ºæ–¹æ¡ˆBã€‚Aå’ŒBéƒ½æœ‰ä¸€å®šçš„é—®é¢˜ï¼Œæ˜¯ä¸€é“å–èˆé¢˜ã€‚è¿™æ—¶å€™ä¸å…¶è®¨è®ºå–è°èˆè°ï¼Œä¸å¦‚è¿™ä¹ˆå›ç­”ï¼š&lt;/p&gt;&lt;p&gt;æˆ‘å†å›å»æƒ³æƒ³æœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ¡ˆã€‚&lt;/p&gt;&lt;p&gt;å¦‚æœè‡ªå·±æ˜¯é¢†å¯¼ï¼Œã€Šç¥ç›¾å±€ç‰¹å·¥ã€‹é‡Œç§‘å°”æ£®çš„æ€è·¯å¯ä»¥åšä¸€ä¸ªå¾ˆå¥½çš„å‚è€ƒï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRl8ic20xHygMAiaj4XFdnA0LFzmNA0FYpedicwjveXibic33Hdlfr8PIP5m951orCMBsL3139BK355BPS6w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1920&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å½“åˆ†æ´¾ä»»åŠ¡æ—¶&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“ç»™ä¸‹å±åˆ†æ´¾ä»»åŠ¡æ—¶ï¼Œåˆ†æ´¾çš„éœ€è¦æ˜¯ä¸€ä¸ªå¾…è§£å†³çš„é—®é¢˜ï¼Œä¸è¦ç›´æ¥ç»™å‡ºè§£å†³æ–¹æ¡ˆã€‚å³ä½¿è‡ªå·±å¿ƒé‡Œæœ‰å¾ˆæˆç†Ÿçš„è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿä¸è¦ç«‹å³è¯´å‡ºæ¥ã€‚ä¸‹å±å¦‚æœé’ˆå¯¹é—®é¢˜ç»™å‡ºäº†å’Œè‡ªå·±ä¸€è‡´çš„æ–¹æ¡ˆï¼Œè¿™å¾ˆå¥½ã€‚ä¹Ÿæœ‰å¯èƒ½ä¸‹å±ä¼šç»™å‡ºæ›´å¥½çš„æ–¹æ¡ˆï¼Œä¸€å¼€å§‹è‡ªèº«ç»™å‡ºçš„æ–¹æ¡ˆä¼šé™åˆ¶è¿™ç§å¯èƒ½æ€§ï¼ŒåŒæ—¶é™ä½ä¸‹å±çš„ä¸»è§‚èƒ½åŠ¨æ€§å’Œç²¾ç¥æŠ•å…¥ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;å½“ä¸‹å±ä¸»åŠ¨æ²Ÿé€šæ—¶&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“ä¸‹å±ä¸»åŠ¨æ²Ÿé€šå‘ç°äº†ä¸€ä¸ªç³»ç»Ÿé—®é¢˜æˆ–è€…ä¼˜åŒ–ç‚¹æ—¶ï¼Œä»–å¯èƒ½æ˜¯å¸¦ç€æ–¹æ¡ˆæ¥æ²Ÿé€šçš„ã€‚ä¸è¦å› ä¸ºæ–¹æ¡ˆæœ‰ä¸€äº›é—®é¢˜ï¼Œå¦è®¤äº†ç³»ç»Ÿå¯ä»¥ä¼˜åŒ–æœ¬èº«ã€‚å› ä¸ºè¿™ä¸ªä¸¾åŠ¨åŒæ—¶é™ä½äº†è‡ªå·±çš„æ ¼å±€ï¼šåªè§£å†³çœ¼å‰ä¸å¾—ä¸è§£å†³çš„é—®é¢˜ï¼Œé€ƒé¿æœªæ¥å¯èƒ½å‘ç”Ÿçš„é—®é¢˜ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong data-brushtype=&quot;text&quot;&gt;ç¼–ç¨‹ä¸€ç”Ÿ&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;å› ä¸ºå…¬ä¼—å·å¹³å°æ›´æ”¹äº†æ¨é€è§„åˆ™ï¼Œå¦‚æœä¸æƒ³é”™è¿‡å†…å®¹ï¼Œè®°å¾—è¯»å®Œç‚¹ä¸€ä¸‹â€œåœ¨çœ‹â€ï¼ŒåŠ ä¸ªâ€œæ˜Ÿæ ‡â€ï¼Œè¿™æ ·æ¯æ¬¡æ–°æ–‡ç« æ¨é€æ‰ä¼šç¬¬ä¸€æ—¶é—´å‡ºç°åœ¨ä½ çš„è®¢é˜…åˆ—è¡¨é‡Œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æƒ³çŸ¥é“è‡ªå·±é”™è¿‡äº†å“ªäº›æ›´æ–°ï¼Œå¯å‚è€ƒæˆ‘ä¸å®šæœŸæ›´æ–°çš„ã€Š&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247487380&amp;amp;idx=2&amp;amp;sn=4e71d679e2c22f9c5af4ea3abc667b76&amp;amp;chksm=fafde53acd8a6c2c9d2fb5eb83de5e5a2e3f244a57fa275394d9d61a0cdfa154290fe7a21fe8&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ç³»åˆ—æ–‡ç« åˆ†ç±»æ±‡æ€»&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;&lt;em&gt;&lt;strong&gt;ç³»åˆ—æ–‡ç« åˆ†ç±»æ±‡æ€»&lt;/strong&gt;&lt;/em&gt;&lt;/a&gt;ã€‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;
          &lt;/div&gt;

          

          



           
                                
                    
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>2577b43a53aaef5003111fe1cc17d3b5</guid>
<title>Go netpollå¤§è§£æ</title>
<link>https://toutiao.io/k/6ercbix</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                                       &quot; id=&quot;js_content&quot;&gt;
            &lt;p data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.7484375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wxicPoYsPLia7RuF7m5HYXeByuJbX9ugsIwQ5FbF51DERicDuwutIrUYXg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å›¾ç‰‡æ‹æ‘„äº2022å¹´4æœˆ3æ—¥ æ­å·&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p cid=&quot;n68&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å¼€ç¯‡&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n68&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä¹‹å‰ç®€å•çœ‹è¿‡ä¸€ç‚¹goåŸç”Ÿnetpollï¼Œæ²¡æ³¨æ„å¤ªå¤šç»†èŠ‚ã€‚&lt;/span&gt;&lt;span&gt;æœ€è¿‘ä»å¤´åˆ°å°¾çœ‹äº†ä¸€éï¼Œç‰¹å†™ç¯‡æ–‡ç« è®°å½•ä¸‹ã€‚&lt;/span&gt;&lt;span&gt;æ–‡ç« å¾ˆé•¿ï¼Œè¯·è€å¿ƒçœ‹å®Œï¼Œä¸€å®šæœ‰æ‰€æ”¶è·ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n972&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;h4 md-src-pos=&quot;261..277&quot; data-darkmode-bgcolor-16499522379759=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16499522379759=&quot;#fff|rgb(255, 255, 255)&quot; data-darkmode-color-16499522379759=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16499522379759=&quot;#fff|rgb(0, 0, 0)&quot; data-style=&quot;margin-top: 1em; margin-bottom: 16px; font-weight: bold; line-height: 1.4; font-size: 17px; color: rgb(0, 0, 0); font-family: Helvetica, Arial, freesans, sans-serif; text-align: start; white-space: normal; background-color: rgb(255, 255, 255);&quot; class=&quot;js_darkmode__29&quot;&gt;&lt;span&gt;å†…æ ¸ç©ºé—´å’Œç”¨æˆ·ç©ºé—´&lt;/span&gt;&lt;/h4&gt;&lt;p cid=&quot;n111&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;åœ¨linuxä¸­ï¼Œç»å¸¸èƒ½çœ‹åˆ°ä¸¤ä¸ªè¯è¯­:User space(ç”¨æˆ·ç©ºé—´)å’ŒKernel space (å†…æ ¸ç©ºé—´)ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n111&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n116&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ç®€å•&lt;/span&gt;&lt;span&gt;åœ°&lt;span&gt;è¯´ï¼Œ Kernel spaceæ˜¯linuxå†…æ ¸è¿è¡Œçš„ç©ºé—´ï¼ŒUser spaceæ˜¯ç”¨æˆ·ç¨‹åºè¿è¡Œçš„ç©ºé—´ã€‚&lt;/span&gt;&lt;span&gt;å®ƒä»¬ä¹‹é—´æ˜¯ç›¸äº’éš”ç¦»çš„ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n116&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n124&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ç°ä»£æ“ä½œç³»ç»Ÿéƒ½æ˜¯é‡‡ç”¨è™šæ‹Ÿå­˜å‚¨å™¨ã€‚é‚£ä¹ˆå¯¹32ä½æ“ä½œç³»ç»Ÿè€Œè¨€ï¼Œå®ƒçš„å¯»å€ç©ºé—´ï¼ˆè™šæ‹Ÿå­˜å‚¨ç©ºé—´ï¼‰ä¸º4Gï¼ˆ2çš„32æ¬¡æ–¹ï¼‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n124&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n124&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒæ˜¯å†…æ ¸ï¼Œç‹¬ç«‹äºæ™®é€šçš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥è®¿é—®å—ä¿æŠ¤çš„å†…å­˜ç©ºé—´ï¼Œä¹Ÿæœ‰è®¿é—®åº•å±‚ç¡¬ä»¶è®¾å¤‡çš„æ‰€æœ‰æƒé™ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n124&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n124&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä¸ºäº†ä¿è¯ç”¨æˆ·è¿›ç¨‹ä¸èƒ½ç›´æ¥æ“ä½œå†…æ ¸ï¼Œä¿è¯å†…æ ¸çš„å®‰å…¨ï¼Œç³»ç»Ÿå°†è™šæ‹Ÿç©ºé—´åˆ’åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†ä¸ºå†…æ ¸ç©ºé—´ï¼Œä¸€éƒ¨åˆ†ä¸ºç”¨æˆ·ç©ºé—´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n124&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n124&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;é’ˆå¯¹linuxæ“ä½œç³»ç»Ÿè€Œè¨€ï¼Œå°†æœ€é«˜çš„1Gå­—èŠ‚ï¼ˆä»è™šæ‹Ÿåœ°å€0xC0000000åˆ°0xFFFFFFFFï¼‰ï¼Œä¾›å†…æ ¸ä½¿ç”¨ï¼Œç§°ä¸ºå†…æ ¸ç©ºé—´ï¼Œè€Œå°†è¾ƒä½çš„3Gå­—èŠ‚ï¼ˆä»è™šæ‹Ÿåœ°å€0x00000000åˆ°0xBFFFFFFFï¼‰ï¼Œä¾›å„ä¸ªè¿›ç¨‹ä½¿ç”¨ï¼Œç§°ä¸ºç”¨æˆ·ç©ºé—´ã€‚ç©ºé—´åˆ†é…å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n129&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5468227424749164&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9waNV3NicYA0Duia7CkaEeAn6VyPzebksdc7FmneW6Luzyyia8lrwIJRgiaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;598&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n135&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;Kernel spaceå¯ä»¥è°ƒç”¨ç³»ç»Ÿçš„ä¸€åˆ‡èµ„æºã€‚User space ä¸èƒ½ç›´æ¥è°ƒç”¨ç³»ç»Ÿèµ„æºï¼Œåœ¨ Linuxç³»ç»Ÿä¸­ï¼Œæ‰€æœ‰çš„ç³»ç»Ÿèµ„æºç®¡ç†éƒ½æ˜¯åœ¨å†…æ ¸ç©ºé—´ä¸­å®Œæˆçš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n135&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n135&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æ¯”å¦‚è¯»å†™ç£ç›˜æ–‡ä»¶ã€åˆ†é…å›æ”¶å†…å­˜ã€ä»ç½‘ç»œæ¥å£è¯»å†™æ•°æ®ç­‰ç­‰ã€‚åº”ç”¨ç¨‹åºæ— æ³•ç›´æ¥è¿›è¡Œè¿™æ ·çš„æ“ä½œï¼Œä½†æ˜¯ç”¨æˆ·ç¨‹åºå¯ä»¥é€šè¿‡å†…æ ¸æä¾›çš„æ¥å£æ¥å®Œæˆè¿™æ ·çš„ä»»åŠ¡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n135&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span/&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.37386363636363634&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wWBYZwOAkwzMMjTT7M7SdSDYX6bmrDuRWUibdut64XzybicVkSpNVzkkg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;880&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n122&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n122&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;åƒä¸‹é¢è¿™æ ·ï¼Œ&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n973&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.1733203505355404&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wgIfhu97Rn9L0qJ5eIGia6eD5yo4ELic2nTt0yeicWgZU2VAKZkWI2QGqA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2054&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n975&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n975&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;åº”ç”¨ç¨‹åºè¦è¯»å–ç£ç›˜ä¸Šçš„ä¸€ä¸ªæ–‡ä»¶ï¼Œå®ƒå¯ä»¥å‘å†…æ ¸å‘èµ·ä¸€ä¸ª â€œç³»ç»Ÿè°ƒç”¨â€ å‘Šè¯‰å†…æ ¸ï¼šâ€æˆ‘è¦è¯»å–ç£ç›˜ä¸Šçš„æŸæŸæ–‡ä»¶â€ã€‚å…¶å®å°±æ˜¯é€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„æŒ‡ä»¤è®©è¿›ç¨‹ä»ç”¨æˆ·æ€è¿›å…¥åˆ°å†…æ ¸æ€ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n975&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n975&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;åœ¨å†…æ ¸ç©ºé—´ä¸­ï¼ŒCPU å¯ä»¥æ‰§è¡Œä»»ä½•çš„æŒ‡ä»¤ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬ä»ç£ç›˜ä¸Šè¯»å–æ•°æ®ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n975&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n975&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å…·ä½“è¿‡ç¨‹æ˜¯å…ˆæŠŠæ•°æ®è¯»å–åˆ°å†…æ ¸ç©ºé—´ä¸­ï¼Œç„¶åå†æŠŠæ•°æ®æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´å¹¶ä»å†…æ ¸æ€åˆ‡æ¢åˆ°ç”¨æˆ·æ€ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n975&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n975&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æ­¤æ—¶åº”ç”¨ç¨‹åºå·²ç»ä»ç³»ç»Ÿè°ƒç”¨ä¸­è¿”å›å¹¶ä¸”æ‹¿åˆ°äº†æƒ³è¦çš„æ•°æ®ï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œç”¨æˆ·ç©ºé—´æ‰§è¡Œé€»è¾‘ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n975&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n149&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;è¿™æ ·çš„è¯ï¼Œä¸€æ—¦æ¶‰åŠåˆ°å¯¹I/Oçš„å¤„ç†ï¼Œå°±å¿…ç„¶ä¼šæ¶‰åŠåˆ°åœ¨ç”¨æˆ·æ€å’Œå†…æ ¸æ€ä¹‹é—´æ¥å›åˆ‡æ¢ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n149&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n149&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;h4 cid=&quot;n148&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;ioæ¨¡å‹&lt;/span&gt;&lt;/h4&gt;&lt;p cid=&quot;n97&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ç½‘ä¸Šæœ‰å¤ªå¤šå…³äºI/Oæ¨¡å‹çš„æ–‡ç« ï¼Œçœ‹ç€çœ‹ç€æœ‰å¯èƒ½å°±è·‘åäº†ï¼Œæ‰€ä»¥æˆ‘è¿˜æ˜¯ä» &amp;lt;&amp;lt;UNIX ç½‘ç»œç¼–ç¨‹&amp;gt;&amp;gt; ä¸­æ€»ç»“çš„5ä¸­I/Oæ¨¡å‹è¯´èµ·å§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n97&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n159&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;Unixå¯ç”¨çš„5ç§I/Oæ¨¡å‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot; cid=&quot;n161&quot; mdtype=&quot;list&quot; data-mark=&quot;-&quot;&gt;&lt;li&gt;&lt;p cid=&quot;n164&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;é˜»å¡I/O&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n165&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;éé˜»å¡I/O&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n168&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;I/Oå¤ç”¨&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n171&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä¿¡å·é©±åŠ¨å¼I/O(SIGIO)&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n174&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å¼‚æ­¥I/O(POSIXçš„aio_ç³»åˆ—å‡½æ•°)&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p cid=&quot;n194&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;h5 cid=&quot;n195&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;&lt;strong&gt;é˜»å¡I/O&lt;/strong&gt;&lt;/span&gt;&lt;/h5&gt;&lt;p cid=&quot;n188&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span md-inline=&quot;image&quot; data-src=&quot;https://cdn.syst.top/æˆªå±2022-04-09 ä¸Šåˆ10.29.31.png&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4365904365904366&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wHmh12ibZK222LGMKW2vX02EcVbhgayaDMj0p8yv4SZH08KVHqQK1UHg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;962&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n190&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;é˜»å¡å¼I/Oä¸‹ï¼Œè¿›ç¨‹è°ƒç”¨recvfromï¼Œç›´åˆ°æ•°æ®åˆ°è¾¾ä¸”è¢«å¤åˆ¶åˆ°åº”ç”¨ç¨‹åºçš„ç¼“å†²åŒºä¸­æˆ–è€…å‘ç”Ÿé”™è¯¯æ‰è¿”å›ï¼Œåœ¨æ•´ä¸ªè¿‡ç¨‹è¿›ç¨‹éƒ½æ˜¯è¢«é˜»å¡çš„&lt;/span&gt;&lt;span md-inline=&quot;plain&quot;&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h5 cid=&quot;n200&quot; mdtype=&quot;heading&quot;&gt;&lt;strong&gt;&lt;span&gt;éé˜»å¡I/O&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;/h5&gt;&lt;p cid=&quot;n213&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5110619469026548&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wAmJnn1mZwUV0tlH7XkWSjptQF3hbFkCYnlhXib1ibroiaoQ9d6ZPYT41Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;904&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n205&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n205&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œå‰ä¸‰æ¬¡è°ƒç”¨recvfromä¸­æ²¡æœ‰æ•°æ®å¯è¿”å›ï¼Œå› æ­¤å†…æ ¸è½¬è€Œç«‹å³è¿”å›ä¸€ä¸ªEWOULDBLOCKé”™è¯¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n205&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n205&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ç¬¬å››æ¬¡è°ƒç”¨recvfromæ—¶å·²æœ‰ä¸€ä¸ªæ•°æ®æŠ¥å‡†å¤‡å¥½ï¼Œå®ƒè¢«å¤åˆ¶åˆ°åº”ç”¨ç¨‹åºç¼“å†²åŒºï¼Œäºæ˜¯recvfromæˆåŠŸè¿”å›ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n205&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n207&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å½“ä¸€ä¸ªåº”ç”¨ç¨‹åºåƒè¿™æ ·å¯¹ä¸€ä¸ªéé˜»å¡æè¿°ç¬¦å¾ªç¯è°ƒç”¨recvfromæ—¶ï¼Œæˆ‘ä»¬é€šå¸¸ç§°ä¸ºè½®è¯¢(polling)ï¼ŒæŒç»­è½®è¯¢å†…æ ¸ï¼Œä»¥è¿™ç§æ–¹å¼æŸ¥çœ‹æŸä¸ªæ“ä½œæ˜¯å¦å°±ç»ªã€‚&lt;/span&gt;&lt;/p&gt;&lt;h5 cid=&quot;n216&quot; mdtype=&quot;heading&quot;&gt;&lt;br/&gt;&lt;/h5&gt;&lt;h5 cid=&quot;n216&quot; mdtype=&quot;heading&quot;&gt;&lt;strong&gt;&lt;span&gt;I/Oå¤šè·¯å¤ç”¨&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;/h5&gt;&lt;p cid=&quot;n217&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4437984496124031&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wbPHkFh3bCp7OxLmDFSDluvYR863tHnBacvmzBLGvHXhfXKSkhaEiaXg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1032&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n103&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n103&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æœ‰äº†I/Oå¤šè·¯å¤ç”¨(I/O multiplexing)ï¼Œæˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨ select æˆ–è€… pollï¼Œé˜»å¡åœ¨è¿™ä¸¤ä¸ªç³»ç»Ÿè°ƒç”¨ä¸­çš„æŸä¸€ä¸ªä¹‹ä¸Šï¼Œè€Œä¸æ˜¯é˜»å¡åœ¨çœŸæ­£çš„I/Oç³»ç»Ÿè°ƒç”¨ä¸Šã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n103&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n223&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä¸Šé¢è¿™å¥è¯éš¾ç†è§£æ˜¯å§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n223&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n223&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;è¯´ç™½äº†è¿™é‡ŒæŒ‡çš„æ˜¯ï¼Œåœ¨ç¬¬ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬åªæ˜¯é˜»å¡åœ¨selectè°ƒç”¨ä¸Šï¼Œç›´åˆ°æ•°æ®æŠ¥å¥—æ¥å­—å˜ä¸ºå¯è¯»ï¼Œè¿”å›å¯è¯»æ¡ä»¶ï¼Œè¿™é‡Œå¹¶æ²¡æœ‰å‘ç”ŸI/Oäº‹ä»¶ï¼Œæ‰€ä»¥è¯´è¿™ä¸€æ­¥ï¼Œå¹¶æ²¡æœ‰é˜»å¡åœ¨çœŸæ­£çš„I/Oç³»ç»Ÿè°ƒç”¨ä¸Šã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n223&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n227&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å…¶ä»–ä¸¤ç§å°±ä¸è¿‡å¤šä»‹ç»äº†ã€‚&lt;/span&gt;è¿˜æœ‰ä¸€ç‚¹ï¼Œæˆ‘ä»¬ä¼šç»å¸¸æåˆ°åŒæ­¥I/Oå’Œå¼‚æ­¥I/Oã€‚&lt;/p&gt;&lt;p cid=&quot;n227&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n237&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;POSIX æŠŠè¿™ä¸¤ç§æœ¯è¯­å®šä¹‰å¦‚ä¸‹:&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n250&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n250&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;åŸºäºä¸Šé¢çš„å®šä¹‰ï¼Œ&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n252&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4603174603174603&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wRkCbzDTWL2UIRNKEcaUfYd8yqAUQBoAowlzQoabFwN8U96hh6aDqUg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;630&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n229&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n229&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å¼‚æ­¥I/Oçš„å…³é”®åœ¨äºç¬¬äºŒæ­¥çš„recrfromæ˜¯å¦ä¼šé˜»å¡ä½ç”¨æˆ·è¿›ç¨‹ï¼Œå¦‚æœä¸é˜»å¡ï¼Œé‚£å®ƒå°±æ˜¯å¼‚æ­¥I/Oã€‚ä»ä¸Šé¢æ±‡æ€»å›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œåªæœ‰å¼‚æ­¥I/Oæ»¡è¶³POSIXä¸­å¯¹å¼‚æ­¥I/Oçš„å®šä¹‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n229&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;h4 cid=&quot;n260&quot; mdtype=&quot;heading&quot;&gt;&lt;br/&gt;&lt;/h4&gt;&lt;h4 cid=&quot;n260&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;Go netpoller&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/h4&gt;&lt;p cid=&quot;n277&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n277&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;Go netpoller åº•å±‚å°±æ˜¯å¯¹I/Oå¤šè·¯å¤ç”¨çš„å°è£…ã€‚ä¸åŒå¹³å°å¯¹I/Oå¤šè·¯å¤ç”¨æœ‰ä¸åŒçš„å®ç°æ–¹å¼ã€‚æ¯”å¦‚Linuxçš„selectã€pollå’Œepollã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n277&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n277&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;åœ¨MacOSåˆ™æ˜¯kqueue,è€ŒWindowsæ˜¯åŸºäºå¼‚æ­¥I/Oå®ç°çš„icop......ï¼ŒåŸºäºè¿™äº›èƒŒæ™¯ï¼ŒGoé’ˆå¯¹ä¸åŒçš„å¹³å°è°ƒç”¨å®ç°äº†å¤šç‰ˆæœ¬çš„netpollerã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n278&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5406162464985994&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wAibh5K9hhEhiaGZcDlkAZIQo8Ba6hMA43eo597QuF2TBPq4zRYo0IHqQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;714&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n819&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n819&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªdemoå¼€å§‹è®²è§£ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n292&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.9174757281553398&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wicAN3Qj0vBuwXSrpV4PQdjYib8c34seqMhtvEuPJGwKNL16uGBeJibxHA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;824&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n288&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n288&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å¾ˆç®€å•ä¸€ä¸ªdemoï¼Œå¼€å¯ä¸€ä¸ªtcpæœåŠ¡ã€‚ç„¶åæ¯æ¥ä¸€ä¸ªè¿æ¥ï¼Œå°±å¯åŠ¨ä¸€ä¸ªgå»å¤„ç†è¿æ¥ã€‚å¤„ç†å®Œæ¯•ï¼Œå…³é—­è¿æ¥ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n288&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n832&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;è€Œä¸”æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯åŒæ­¥çš„æ¨¡å¼å»ç¼–å†™å¼‚æ­¥çš„é€»è¾‘ï¼Œä¸€ä¸ªè¿æ¥å¯¹åº”ä¸€ä¸ªgå¤„ç†ï¼Œæå…¶ç®€å•å’Œæ˜“äºç†è§£ã€‚goæ ‡å‡†åº“ä¸­çš„http.serverä¹Ÿæ˜¯è¿™ä¹ˆå¹²çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n834&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.1057007125890737&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9w3nMynhgTw39adF3SGsrMy433Iiae5oNXCUhrw2ibjoalTcrT5C0bFafw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1684&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n836&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n836&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;é’ˆå¯¹ä¸Šé¢çš„tcpæœåŠ¡demoï¼Œæˆ‘ä»¬éœ€è¦å…³æ³¨è¿™æ®µä»£ç åº•å±‚éƒ½å‘ç”Ÿäº†ä»€ä¹ˆã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n836&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n282&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä¸Šé¢ä»£ç ä¸­ä¸»è¦æ¶‰åŠåº•å±‚çš„ä¸€äº›ç»“æ„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n264&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6517073170731708&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wKzW3h9uM7Xnuqd2lRHaqAP3Q5gg3YDM1T1SCicicasoRXh3KibLVwibuDw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2050&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n275&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n275&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å…ˆç®€å•è§£é‡Šä¸€æ³¢ã€‚&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot; cid=&quot;n294&quot; mdtype=&quot;list&quot; data-mark=&quot;-&quot;&gt;&lt;li&gt;&lt;p cid=&quot;n297&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;TCPListener:æˆ‘ä»¬å¼€å¯çš„æ˜¯ä¸€ä¸ªTCPæœåŠ¡ï¼Œé‚£å½“ç„¶å°±æ˜¯TCPæœåŠ¡çš„ç½‘ç»œç›‘å¬å™¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n298&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;netFD:ç½‘ç»œæè¿°ç¬¦ã€‚Goä¸­æ‰€æœ‰çš„ç½‘ç»œæ“ä½œéƒ½æ˜¯ä»¥netFDå®ç°çš„ï¼Œå®ƒå’Œåº•å±‚FDåšç»‘å®šã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n301&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;FD:æ–‡ä»¶æè¿°ç¬¦ã€‚netå’ŒosåŒ…æŠŠè¿™ä¸ªç±»å‹ä½œä¸ºä¸€ä¸ªç½‘ç»œè¿æ¥æˆ–è€…æ“ä½œç³»ç»Ÿæ–‡ä»¶ã€‚å…¶ä¸­é‡Œé¢ä¸€ä¸ªå­—æ®µSysfdå°±æ˜¯å…·ä½“æ–‡ä»¶æè¿°ç¬¦å€¼ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n304&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;pollDesc:I/Oè½®è¯¢å™¨ã€‚è¯´ç™½äº†å®ƒå°±æ˜¯åº•å±‚äº‹ä»¶é©±åŠ¨çš„å°è£…ã€‚å…¶ä¸­çš„runtimeCtxæ˜¯ä¸€ä¸ªæŒ‡é’ˆç±»å‹ï¼Œå…·ä½“æŒ‡å‘runtime/netpoll ä¸­çš„pollDesc.&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p cid=&quot;n99&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n99&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å½“ç„¶å›¾ä¸Šé¢ç»“æ„å­—æ®µéƒ½æ˜¯é˜‰å‰²ç‰ˆçš„ï¼Œä½†æ˜¯ä¸å½±å“æˆ‘ä»¬è¿™ç¯‡æ–‡ç« ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n99&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n320&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œä¸ºä»€ä¹ˆç»“æ„ä¸Šéœ€è¦ä¸€å±‚ä¸€å±‚åµŒå…¥å‘¢ï¼Ÿ&lt;/span&gt;æˆ‘çš„ç†è§£æ˜¯æ¯ä¸‹ä¸€å±‚éƒ½æ˜¯æ›´åŠ æŠ½è±¡çš„ä¸€å±‚ã€‚å®ƒæ˜¯å¯ä»¥ä½œä¸ºä¸Šä¸€å±‚å…·ä½“çš„ä¸€ç§åº”ç”¨ä½“ç°ã€‚&lt;/p&gt;&lt;p cid=&quot;n320&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n326&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æ˜¯ä¸æ˜¯è·Ÿæ²¡è¯´ä¸€æ ·ï¼Ÿå“ˆå“ˆã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n326&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n328&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä¸¾ä¾‹ï¼Œæ¯”å¦‚è¿™é‡Œçš„netFDè¡¨ç¤ºç½‘ç»œæè¿°ç¬¦ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n328&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n844&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å®ƒçš„ä¸Šä¸€å±‚å¯ä»¥æ˜¯ç”¨äºTCPçš„ç½‘ç»œç›‘å¬å™¨TCPListenerï¼Œé‚£ä¹ˆå¯¹åº”çš„æ¥å£æˆ‘ä»¬èƒ½æƒ³åˆ°çš„æœ‰ä¸¤ä¸ªAcceptä»¥åŠcloseã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n844&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n840&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å¯¹äºAccept åŠ¨ä½œï¼Œä¸€å®šæ˜¯è¿”å›ä¸€ä¸ªè¿æ¥ç±»å‹ Conn ï¼Œé’ˆå¯¹è¿™ä¸ªè¿æ¥ï¼Œå®ƒæœ¬èº«ä¹Ÿå­˜åœ¨ä¸€ä¸ªè‡ªå·±çš„netFDï¼Œé‚£ä¹ˆå¯æƒ³è€ŒçŸ¥ä¸€å®šä¼šæœ‰ Writeå’ŒReadä¸¤ä¸ªæ“ä½œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n840&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n848&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;è€Œæ‰€æœ‰çš„ç½‘ç»œæ“ä½œéƒ½æ˜¯ä»¥netFDå®ç°çš„ã€‚è¿™æ ·ï¼ŒnetFDåœ¨è¿™é‡Œå°±æœ‰ä¸¤ç§ä¸&lt;/span&gt;&lt;span&gt;åŒ&lt;/span&gt;&lt;span&gt;&lt;span&gt;çš„ä¸Šå±‚åº”ç”¨ä½“ç°äº†ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n850&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n330&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å¥½äº†,æˆ‘ä»¬éœ€è¦ææ¸…æ¥šå‡ ä»¶äº‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot; cid=&quot;n332&quot; mdtype=&quot;list&quot; data-mark=&quot;-&quot;&gt;&lt;li&gt;&lt;p cid=&quot;n337&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä¸€èˆ¬æˆ‘ä»¬ç”¨å…¶ä»–è¯­è¨€å†™ä¸€ä¸ªtcpæœåŠ¡ï¼Œå¿…ç„¶ä¼šå†™è¿™å‡ æ­¥ï¼šsocket-&amp;gt;bind-&amp;gt;listenï¼Œä½†æ˜¯Goå°±ä¸€ä¸ªListenï¼Œé‚£å°±æ„å‘³ç€åº•å±‚åŒ…è£…äº†è¿™äº›æ“ä½œã€‚å®ƒæ˜¯åœ¨å“ªä¸€æ­¥å®Œæˆçš„ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n341&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;Goæ˜¯åœ¨ä»€ä¹ˆæ—¶å€™åˆå§‹åŒ–netpollçš„ï¼Œæ¯”å¦‚linuxä¸‹åˆå§‹åŒ–epollå®ä¾‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n344&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å½“å¯¹åº”fdæ²¡æœ‰å¯è¯»æˆ–è€…å¯å†™çš„IOäº‹ä»¶è€Œå¯¹åº”è¢«æŒ‚èµ·çš„gï¼Œæ˜¯å¦‚ä½•çŸ¥é“fdä¸Šçš„I/Oäº‹ä»¶å·²readyï¼Œåˆæ˜¯å¦‚ä½•å”¤é†’å¯¹åº”çš„gçš„ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p cid=&quot;n852&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;h5 cid=&quot;n977&quot; mdtype=&quot;heading&quot;&gt;&lt;br/&gt;&lt;/h5&gt;&lt;h5 cid=&quot;n977&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;Listenè§£æ&lt;/span&gt;&lt;/h5&gt;&lt;p cid=&quot;n856&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n856&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å¸¦ç€è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬æ¥ç€çœ‹æµç¨‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n363&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.116279069767442&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wGmjypxAy5LSibWZgw48GtPbdB5NNP8ke9qChsxpwPQnfvt4KlKicY72w/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1978&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n353&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä¸Šå›¾å·²ç»æŠŠå½“ä½ è°ƒç”¨Listenæ“ä½œçš„å®Œæ•´æµç¨‹å…¨éƒ¨ç½—åˆ—å‡ºæ¥äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n353&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n353&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å°±åƒæˆ‘ä¸Šé¢åˆ—å‡ºçš„ç»“æ„å…³ç³»ä¸€æ ·ï¼Œä»ç»“æ„å±‚æ¬¡æ¥è¯´ï¼Œæ¯è°ƒç”¨ä¸‹ä¸€å±‚ï¼Œéƒ½æ˜¯ä¸ºäº†åˆ›å»ºå¹¶è·å–ä¸‹ä¸€å±‚çš„ä¾èµ–ï¼Œå› ä¸ºå†…éƒ¨çš„é«˜åº¦æŠ½è±¡ä¸å°è£…ï¼Œæ‰ä½¿å¾—ä½¿ç”¨è€…å¾€å¾€åªéœ€è°ƒç”¨æå°‘æ•°ç®€å•çš„APIæ¥å£ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n353&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n359&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“äº‹ä¾‹ä»£ç æ¶‰åŠåˆ°çš„ç»“æ„ä»¥åŠå¯¹åº”æµç¨‹äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n359&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n377&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;åœ¨ä¼ ç»Ÿå°è±¡ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªç½‘ç»œæœåŠ¡ã€‚éœ€è¦ç»è¿‡:åˆ›å»ºä¸€ä¸ªsocketã€bind ã€listenè¿™åŸºæœ¬çš„ä¸‰å¤§æ­¥ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n377&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n369&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å‰é¢æˆ‘ä»¬è¯´è¿‡ï¼ŒGoä¸­æ‰€æœ‰çš„ç½‘ç»œæ“ä½œéƒ½æ˜¯ä»¥netFDå®ç°çš„ã€‚&lt;/span&gt;goä¹Ÿæ˜¯åœ¨è¿™ä¸€å±‚å°è£…è¿™ä¸‰å¤§æ­¥çš„ã€‚æ‰€ä»¥æˆ‘ä»¬ç›´æ¥ä»netFDé€»è¾‘å¼€å§‹è¯´ã€‚&lt;/p&gt;&lt;p cid=&quot;n369&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n381&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä¸Šå›¾æ˜¯åœ¨è°ƒç”¨socketå‡½æ•°è¿™ä¸€æ­¥è¿”å›çš„netFDï¼Œå¯æƒ³è€Œ&lt;/span&gt;&lt;span&gt;çŸ¥&lt;/span&gt;&lt;span&gt;&lt;span&gt;æ ¸å¿ƒé€»è¾‘éƒ½åœ¨è¿™é‡Œé¢ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n387&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7553879310344828&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9whysJzw3D4Xpf5hNIT6iaicJaIzX91JHyZKK3AWjhwpd9ibDz8vQ1fic3Dg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;928&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n383&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n383&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªå‡½æ•°æ ¸å¿ƒç‚¹çœ‹æˆä¸‰æ­¥ã€‚&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot; cid=&quot;n392&quot; mdtype=&quot;list&quot; data-mark=&quot;-&quot;&gt;&lt;li&gt;&lt;p cid=&quot;n395&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;è°ƒç”¨sysSocketå‡½æ•°åˆ›å»ºä¸€ä¸ªsocketï¼Œè¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦(file descriptor)ï¼Œç®€ç§°fdä¸‹æ–‡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n399&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;é€šè¿‡sysSocketè¿”å›çš„fdï¼Œè°ƒç”¨newFDå‡½æ•°åˆ›å»ºä¸€ä¸ªæ–°çš„netFDã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n396&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;è°ƒç”¨netFDè‡ªèº«çš„æ–¹æ³•listenStreamå‡½æ•°ï¼Œåšåˆå§‹åŒ–åŠ¨ä½œï¼Œå…·ä½“è¯¦æƒ…ä¸‹é¢å†è¯´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p cid=&quot;n385&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n858&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;åœ¨sysSocketå‡½æ•°ä¸­ï¼Œé¦–å…ˆä¼šé€šè¿‡socketFuncæ¥åˆ›å»ºä¸€ä¸ªsocketï¼Œé€šè¿‡å±‚å±‚æŸ¥çœ‹ï¼Œæœ€ç»ˆæ˜¯é€šè¿‡system callæ¥å®Œæˆè¿™ä¸€æ­¥ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n858&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n858&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å½“è·å–åˆ°å¯¹åº”fdæ—¶ï¼Œä¼šé€šè¿‡syscall.SetNonblockå‡½æ•°æŠŠå½“å‰è¿™ä¸ªfdè®¾ç½®æˆéé˜»å¡æ¨¡å¼ï¼Œè¿™æ ·å½“è¿™ä¸ªListenerè°ƒç”¨acceptå‡½æ•°å°±ä¸ä¼šè¢«é˜»å¡äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n371&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.8641655886157826&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wxWEklHiafp3gvmnMdtaDMRscY2dL4kUqkQDiba0QNRkziaXvUsokW7Mfw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1546&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n365&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ç¬¬äºŒæ­¥ï¼Œé€šè¿‡ç¬¬ä¸€æ­¥åˆ›å»ºsocketæ‹¿åˆ°çš„fdï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„netFDã€‚è¿™æ®µä»£ç æ²¡å•¥å¥½è§£é‡Šçš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n365&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n406&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ç¬¬ä¸‰æ­¥ï¼Œä¹Ÿå°±æ˜¯æœ€æ ¸å¿ƒçš„ä¸€æ­¥ï¼Œè°ƒç”¨netFDè‡ªèº«çš„listenStreamæ–¹æ³•ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n408&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4811218985976268&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9w4OOl2BOSSgzYt2GoR4HFZEib0hKzscVevdLiaRFpmRYSBjBTxdtTpwEg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;927&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n434&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n434&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;listenStreamé‡Œé¢ä¹Ÿæœ‰æ ¸å¿ƒçš„ä¸‰æ­¥:&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n355&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n355&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æˆ‘ä»¬ä¸»è¦çœ‹fd.inité€»è¾‘ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n445&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.308970099667774&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wBWPDic6Ju4e4zgj4jicYFtffR4dBgmaJ3qfmSayRao7q9JzjO45MpVfg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1204&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n347&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n347&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æœ€ç»ˆæ˜¯è°ƒç”¨çš„pollDescçš„initå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°æœ‰é‡è¦çš„ä¸¤æ­¥ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n860&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n860&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æ›´å…·ä½“çš„æµç¨‹ï¼Œ&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n860&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n453&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;é¦–å…ˆserviceInit.Do ä¿è¯å½“ä¸­çš„runtime_pollServerInitåªä¼šåˆå§‹åŒ–ä¸€æ¬¡ã€‚è¿™å¾ˆå¥½ç†è§£ï¼Œç±»ä¼¼epollå®ä¾‹å…¨å±€åˆå§‹åŒ–ä¸€æ¬¡å³å¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n453&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n531&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æ¥ç€æˆ‘ä»¬çœ‹ä¸‹runtime_pollServerInitå‡½æ•°ï¼Œ&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n457&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.20170940170940171&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wITHlr01PfAiacyYuFicBOJLSaIt3fmiazSiasico8Zael0r5a9k3sspkFoQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1170&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n322&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n322&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;è¿™æ˜¯å’‹å›äº‹ï¼Œå’Œæˆ‘ä»¬å¹³å¸¸çœ‹è¿‡çš„å‡½æ•°é•¿çš„ä¸å¤ªä¸€æ ·ï¼Œæ‰§è¡Œä½“å‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n322&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n864&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å…¶å®è¿™ä¸ªå‡½æ•°æ˜¯é€šè¿‡ go:linknameè¿æ¥åˆ°å…·ä½“å®ç°çš„å‡½æ•°poll_runtime_pollServerInitã€‚æ‰¾èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œ&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n462&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5122699386503068&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wNCQiasqFFicwEn8rZicIFXXyEY1DwcafxnvRVAUj3HmfEAleSolSvb0QA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1956&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n533&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n533&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;çœ‹åˆ°poll_runtime_pollServerInit()ä¸Šé¢çš„ //go:linkname xxx äº†å—ï¼Ÿä¸äº†è§£çš„å¯ä»¥çœ‹çœ‹Goå®˜æ–¹æ–‡æ¡£`go:linknameã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n533&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n866&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æ‰€ä»¥æœ€ç»ˆruntime_pollServerInitè°ƒç”¨çš„æ˜¯ï¼Œ&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n468&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5431034482758621&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9w9qPJtWicugYLTmePUjFAiaKrGDdt56iaeb8UzDSWyegHKpibxsfWegAiapQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;696&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n470&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n470&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;é€šè¿‡è°ƒç”¨poll_runtime_pollServerInit-&amp;gt;netpollGenericInitï¼ŒnetpollGenericInité‡Œè°ƒç”¨netpollinitå‡½æ•°å®Œæˆåˆå§‹åŒ–ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n470&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n868&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æ³¨æ„ã€‚è¿™é‡Œçš„netpollinitï¼Œæ˜¯åŸºäºå½“å‰ç³»ç»Ÿæ¥è°ƒç”¨å¯¹åº”ç³»ç»Ÿçš„netpollinitå‡½æ•°çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n868&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n539&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä»€ä¹ˆæ„æ€ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n539&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n537&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æ–‡ç« å¼€å§‹æœ‰æåˆ°Goåº•å±‚ç½‘ç»œæ¨¡å‹æ˜¯åŸºäºI/Oå¤šè·¯å¤ç”¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n537&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n870&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä¸åŒå¹³å°å¯¹I/Oå¤šè·¯å¤ç”¨æœ‰ä¸åŒçš„å®ç°æ–¹å¼ã€‚æ¯”å¦‚Linuxçš„epollï¼ŒMacOSçš„kqueue,è€ŒWindowsçš„icopã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n870&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n473&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æ‰€ä»¥å¯¹åº”ï¼Œå¦‚æœä½ å½“å‰æ˜¯Linuxï¼Œé‚£ä¹ˆæœ€ç»ˆè°ƒç”¨çš„æ˜¯src/runtime/netpoll_epoll.goä¸‹çš„ netpollinitå‡½æ•°ï¼Œç„¶åä¼šåˆ›å»ºä¸€ä¸ªepollå®ä¾‹ï¼Œå¹¶æŠŠå€¼èµ‹ç»™epfdï¼Œä½œä¸ºæ•´ä¸ªruntimeä¸­å”¯ä¸€çš„event-loopä½¿ç”¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n477&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.0012674271229405&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wsNMMaTMUW8NbUs4YibxuawicMyiafvOjmIETKlQT2hll0OJrNY3xyxJCg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;789&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n475&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n475&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å…¶ä»–çš„ï¼Œæ¯”å¦‚MacOSä¸‹çš„kqueue,ä¹Ÿå­˜åœ¨netpollinitå‡½æ•°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n485&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8964285714285715&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wefNcY5ib64cGmmebicZlWdyH6NETQwuFSicCHwjnORXXStELEOVaP9iaiag/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;560&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n491&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n491&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä»¥åŠWindowsä¸‹çš„icopã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n493&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.21170610211706103&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wetnrTHpdlQ0AsMbPonHQH2Q9C84BqkLDcbTsoQo95XCF5AlzHLreCA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;803&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n495&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n495&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æˆ‘ä»¬å›åˆ°pollDesc.init æ“ä½œï¼Œ&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n497&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4432576769025367&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wVM52ySpR2E6LxCt5pAdLyRUnu4ib6aDcRD4rFNL4maBMQUDHEe7CHEQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1498&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n545&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n545&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å®Œæˆç¬¬ä¸€æ­¥åˆå§‹åŒ–æ“ä½œåï¼Œç¬¬äºŒæ­¥å°±æ˜¯è°ƒç”¨runtime_pollOpenã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n545&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n873&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;è€å¥—è·¯é€šè¿‡//go:linknameæ‰¾åˆ°å¯¹åº”çš„å®ç°ï¼Œå®é™…ä¸Šæ˜¯è°ƒç”¨çš„poll_runtime_pollOpenå‡½æ•°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n873&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n873&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;è¿™ä¸ªå‡½æ•°é‡Œé¢å†è°ƒç”¨netpollopenå‡½æ•°ï¼Œnetpollopenå‡½æ•°å’Œä¸Šé¢çš„netpollinitå‡½æ•°ä¸€æ ·ï¼Œä¸åŒå¹³å°éƒ½æœ‰å®ƒçš„å®ç°ã€‚linuxå¹³å°ä¸‹ï¼Œ&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n547&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7986754966887417&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wuKIiasnt9WJicDQWSmOiaVIX0gJGOWZWYNBDu8k8stHLcWahTfTWAFtzg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;755&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n549&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n549&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;netpollopenå‡½æ•°ï¼Œé¦–å…ˆä¼šé€šè¿‡æŒ‡é’ˆæŠŠpollDescä¿å­˜åˆ°epolleventçš„ä¸€ä¸ªå­—èŠ‚æ•°ç»„dataé‡Œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n549&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n553&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ç„¶åä¼šæŠŠä¼ é€’è¿›æ¥çš„fd(åˆšæ‰åˆå§‹åŒ–å®Œæˆçš„é‚£ä¸ªListenerç›‘å¬å™¨)æ³¨å†Œåˆ°epollå½“ä¸­ï¼Œä¸”é€šè¿‡æŒ‡å®š _EPOLLETå°†epollè®¾ç½®ä¸ºè¾¹ç¼˜è§¦å‘(Edge Triggered)æ¨¡å¼ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n553&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n553&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å¦‚æœè®©æˆ‘ç”¨ä¸€å¥è¯æ¥è¯´æ˜epollæ°´å¹³è§¦å‘å’Œè¾¹ç¼˜è§¦å‘çš„åŒºåˆ«ï¼Œé‚£å°±æ˜¯,&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n553&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n875&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æ°´å¹³è§¦å‘ä¸‹epoll_waitåœ¨æ–‡ä»¶æè¿°ç¬¦æ²¡æœ‰è¯»å†™å®Œä¼šä¸€ç›´è§¦å‘ï¼Œè€Œè¾¹ç¼˜è§¦å‘åªåœ¨æ˜¯åœ¨å˜æˆå¯è¯»å†™æ—¶è§¦å‘ä¸€æ¬¡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n875&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n881&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;åˆ°è¿™é‡Œæ•´ä¸ªListen åŠ¨ä½œä¹Ÿå°±ç»“æŸäº†ï¼Œç„¶åå±‚å±‚è¿”å›ã€‚æœ€ç»ˆåˆ°ä¸šåŠ¡è¿”å›çš„æ˜¯ä¸€ä¸ª Listenerï¼ŒæŒ‰ç…§æœ¬ç¯‡çš„ä¾‹å­ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯ä¸€ä¸ªTCPListenerã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n982&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;h5 cid=&quot;n988&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;Acceptè§£æ&lt;/span&gt;&lt;/h5&gt;&lt;p cid=&quot;n562&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æ¥ç€å½“æˆ‘ä»¬è°ƒç”¨listen.Acceptçš„æ—¶å€™ï¼Œ&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n566&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.2873711340206186&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wuzZ7ibHmTXQ85RBWPWHb05PRgLOffHibzzQZF7gASQ4zCgRwERHwziaMQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1552&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n564&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n564&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æœ€ç»ˆnetFDçš„acceptå‡½æ•°ã€‚netFDä¸­é€šè¿‡è°ƒç”¨fd.pfd(å®é™…ä¸Šæ˜¯FD)çš„Acceptå‡½æ•°è·å–åˆ°socket fdï¼Œé€šè¿‡è¿™ä¸ªfdåˆ›å»ºæ–°çš„netFDè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæ–°è¿æ¥çš„fdã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n564&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n564&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å¹¶ä¸”ä¼šå’ŒListenæ—¶ä¸€æ ·è°ƒç”¨netFD.initåšåˆå§‹åŒ–ï¼Œå› ä¸ºå½“å‰epollå·²ç»åˆå§‹åŒ–ä¸€æ¬¡äº†ï¼Œæ‰€ä»¥è¿™æ¬¡åªæ˜¯æŠŠè¿™ä¸ªæ–°è¿æ¥çš„fdä¹ŸåŠ å…¥åˆ°epolläº‹ä»¶é˜Ÿåˆ—å½“ä¸­ï¼Œç”¨äºç›‘å¬conn fdçš„è¯»å†™I/Oäº‹ä»¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n564&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n580&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å…·ä½“æˆ‘ä»¬çœ‹FD.Acceptæ˜¯å’‹ä¹ˆæ‰§è¡Œçš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n578&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.8002560819462228&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wC7zZxKcKibxVaPHqLH0kaZPAicVGibiaa5ib84wOjqoIibcZLic3pj4zCIYWw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1562&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n608&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n608&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;é¦–å…ˆæ˜¯ä¸€ä¸ªæ­»å¾ªç¯forï¼Œæ­»å¾ªç¯é‡Œè°ƒç”¨äº†acceptå‡½æ•°ï¼Œæœ¬è´¨ä¸Šé€šè¿‡systcallè°ƒç”¨ç³»ç»Ÿacceptæ¥æ”¶æ–°è¿æ¥ã€‚å½“æœ‰æ–°è¿æ¥æ—¶ï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ªæ–‡ä»¶æè¿°ç¬¦fdã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n608&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n608&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å½“acceptè·å–åˆ°ä¸€ä¸ªfdï¼Œä¼šè°ƒç”¨systcall.SetNonblockæŠŠè¿™ä¸ªfdè®¾ç½®æˆéé˜»å¡çš„I/Oã€‚ç„¶åè¿”å›è¿™ä¸ªè¿æ¥fdã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n608&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n612&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å› ä¸ºæˆ‘ä»¬åœ¨Listençš„æ—¶å€™å·²ç»æŠŠå¯¹åº”çš„Listener fdè®¾ç½®æˆéé˜»å¡I/Oäº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n612&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n612&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æ‰€ä»¥è°ƒç”¨acceptè¿™ä¸€æ­¥æ˜¯ä¸ä¼šé˜»å¡çš„ã€‚åªæ˜¯ä¸‹é¢ä¼šè¿›è¡Œåˆ¤æ–­ï¼Œæ ¹æ®åˆ¤æ–­ err ==syscall.EAGAIN æ¥è°ƒç”¨fd.pd.waitReadé˜»å¡ä½ç”¨æˆ·ç¨‹åºã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n612&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n885&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ç›´åˆ°I/Oäº‹ä»¶readyï¼Œè¢«é˜»å¡åœ¨fd.pd.waitReadçš„ä»£ç ä¼šç»§ç»­æ‰§è¡Œcontinueï¼Œé‡æ–°ä¸€è½®çš„accept, æ­¤æ—¶å¯¹åº”fdä¸Šçš„ I/Oå·²ç„¶readyï¼Œæœ€ç»ˆå°±è¿”å›ä¸€ä¸ªconnç±»å‹çš„fdã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n885&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n620&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æˆ‘åˆšæ‰è¯´çš„è°ƒç”¨fd.pd.waitReadä¼šè¢«é˜»å¡ï¼Œç›´åˆ°å¯¹åº”I/Oäº‹ä»¶readyã€‚æˆ‘ä»¬æ¥çœ‹å®ƒå…·ä½“é€»è¾‘ï¼Œ&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n887&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7473997028231798&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wSibHqsRH3GS2AjFIBBxejiaU7usU1eKMRiaWaHibK5RKCMsgJ1YbqlfcJw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1346&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n889&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n894&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æœ€ç»ˆåˆ°runtime_pollWaitå‡½æ•°ï¼Œè€å¥—è·¯äº†ï¼Œæˆ‘ä»¬æ‰¾åˆ°å…·ä½“çš„å®ç°å‡½æ•°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n624&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.487907465825447&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wv5OhyWFImIYHflbAeIl2wHFDMsPOvIga1xSruBYFQZdHXfO5mF3Emw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1902&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n630&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n630&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;poll_runtime_pollWait é‡Œçš„forå¾ªç¯å°±æ˜¯ä¸ºäº†ç­‰å¾…å¯¹åº”çš„I/O readyæ‰ä¼šè¿”å›ï¼Œå¦åˆ™çš„è¯ä¸€ç›´è°ƒç”¨netpollblockå‡½æ•°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n630&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n630&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;pollDescç»“æ„æˆ‘ä»¬ä¹‹å‰æåˆ°ï¼Œå®ƒå°±æ˜¯åº•å±‚äº‹ä»¶é©±åŠ¨çš„å°è£…ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n630&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n630&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å…¶ä¸­æœ‰ä¸¤ä¸ªé‡è¦å­—æ®µ: rgå’Œwgï¼Œéƒ½æ˜¯æŒ‡é’ˆç±»å‹ï¼Œå®é™…è¿™ä¸¤ä¸ªå­—æ®µå­˜å‚¨çš„å°±æ˜¯Goåº•å±‚çš„gï¼Œæ›´å…·ä½“ç‚¹æ˜¯ç­‰å¾…i/O readyçš„gã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n630&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n896&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æ¯”å¦‚å½“åˆ›å»ºå®Œä¸€ä¸ªListenerï¼Œè°ƒç”¨Acceptå¼€å§‹æ¥æ”¶å®¢æˆ·ç«¯è¿æ¥ã€‚å¦‚æœæ²¡æœ‰å¯¹åº”çš„è¯·æ±‚ï¼Œé‚£ä¹ˆæœ€ç»ˆä¼šæŠŠgæ”¾å…¥åˆ°pollDescçš„rgã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n896&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n648&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt; å¦‚æœæ˜¯ä¸€ä¸ªconnç±»å‹çš„fdç­‰å¾…å¯å†™I/Oï¼Œé‚£ä¹ˆä¼šæŠŠgæ”¾å…¥åˆ°pollDescçš„wgä¸­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n898&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å…·ä½“å°±æ˜¯æ ¹æ®modeæ¥åˆ¤æ–­å½“å‰æ˜¯ä»€ä¹ˆç±»å‹çš„ç­‰å¾…äº‹ä»¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n898&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n654&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;netpollblocké‡Œä¹Ÿæœ‰ä¸€ä¸ªforå¾ªç¯ï¼Œå¦‚æœå·²ç»readyäº†ï¼Œé‚£ä¹ˆç›´æ¥è¿”å›ç»™ä¸Šä¸€å±‚å°±è¡Œäº†ã€‚å¦åˆ™çš„è¯ï¼Œè®¾ç½®gppä¸ºç­‰å¾…çŠ¶æ€pdWaitã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n654&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n900&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;è¿™é‡Œè¿˜æœ‰ä¸€ç‚¹atomic.Loaduintptr(gpp)ï¼Œè¿™æ˜¯ä¸ºäº†é˜²æ­¢å¼‚å¸¸æƒ…å†µä¸‹å‡ºç°æ­»å¾ªç¯é—®é¢˜ã€‚æ¯”å¦‚å¦‚æœgppçš„å€¼ä¸æ˜¯pdReadyä¹Ÿä¸æ˜¯0ï¼Œé‚£ä¹ˆæ„å‘³ç€å€¼æ˜¯pdWaitï¼Œé‚£å°±æˆäº†double waitï¼Œå¿…ç„¶å¯¼è‡´æ­»å¾ªç¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n900&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n668&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å¦‚æœgppæœªreadyä¸”æˆåŠŸè®¾ç½®æˆpdWaitï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œæœ€ç»ˆä¼šè°ƒç”¨goparkï¼Œä¼šæŒ‚èµ·gä¸”æŠŠå¯¹åº”çš„gæ”¾å…¥åˆ°pollDesc çš„wg|rg å½“ä¸­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n668&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n671&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;è¿›å…¥goparkã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n675&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7451171875&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wx1ibqPQBzA0pdB9jhzCtmS4qkl6S2uEw0qWWf1EBerB1XjdzI467SlQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2048&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n657&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n657&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;è¿™ä¸€å—ä»£ç ä¸æ˜¯å¾ˆéš¾ï¼ŒåŸºæœ¬çš„å­—æ®µæ‰“äº†å¤‡æ³¨ï¼Œæ ¸å¿ƒè¿˜æ˜¯è¦çœ‹park_mè¿™ä¸ªå‡½æ•°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n683&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.149802890932983&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wJsecNIFAK4XwttEfjBiaVtp2aImKicoGrhz3ba8DzDtGPiceSe4kKdAmA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1522&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n685&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n685&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;åœ¨park_må‡½æ•°ä¸­ï¼Œé¦–å…ˆä¼šé€šè¿‡CASå¹¶å‘å®‰å…¨&lt;/span&gt;&lt;span&gt;åœ°&lt;span&gt;ä¿®æ”¹gçš„çŠ¶æ€ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n685&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n685&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;span/&gt;&lt;span&gt;ç„¶åè°ƒç”¨dropgè§£ç»‘gå’Œmçš„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯mæŠŠå½“å‰è¿è¡Œçš„gç½®ç©ºï¼ŒgæŠŠå½“å‰ç»‘å®šçš„mç½®ç©ºã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n685&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n902&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;åé¢çš„ä»£ç æ˜¯æ ¹æ®å½“å‰åœºæ™¯æ¥è§£é‡Šçš„ã€‚æˆ‘ä»¬çŸ¥é“æ­¤æ—¶mçš„waitunlockf å…¶å®å°±æ˜¯netpollblockcommitã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n681&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5690045248868778&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wto7WI0CJIzwf45iaaqHjXQq4utRNYfcymdWsP3iaCVZOrAAhNSTCGmQQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1768&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n677&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n677&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;netpollblockcommitä¼šæŠŠå½“å‰å·²ç»æ˜¯_GwaitingçŠ¶æ€ä¸‹çš„gèµ‹å€¼ç»™gppã€‚å¦‚æœèµ‹å€¼æˆåŠŸï¼ŒnetpollWaitersä¼šåŠ 1ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n677&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n677&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;è¿™ä¸ªå…¨å±€å˜é‡è¡¨ç¤ºå½“å‰ç­‰å¾…I/Oäº‹ä»¶readyçš„gæ•°é‡ï¼Œè°ƒåº¦å™¨å†è¿›è¡Œè°ƒåº¦çš„æ—¶å€™å¯ä»¥æ ¹æ®æ­¤å˜é‡åˆ¤æ–­æ˜¯å¦å­˜åœ¨ç­‰å¾…I/Oäº‹ä»¶çš„gã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n677&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n677&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span/&gt;å¦‚æœæ­¤æ—¶å½“å‰gppä¸‹çš„fdçš„I/Oå·²ç»readyã€‚é‚£ä¹ˆgppçš„çŠ¶æ€å¿…ç„¶å·²ä¸æ˜¯pdWaitï¼Œèµ‹å€¼å¤±è´¥ã€‚è¿”å›falseã€‚&lt;/p&gt;&lt;p cid=&quot;n703&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n703&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å›åˆ°park_mï¼Œ&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n703&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n703&quot; mdtype=&quot;paragraph&quot;&gt;å¦‚æœnetpollblockcommitè¿”å›trueï¼Œé‚£ä¹ˆç›´æ¥è§¦å‘æ–°ä¸€è½®çš„è°ƒåº¦ã€‚&lt;/p&gt;&lt;p cid=&quot;n703&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n703&quot; mdtype=&quot;paragraph&quot;&gt;å¦‚æœnetpollblockcommitè¿”å›falseï¼Œæ„å‘³ç€å½“å‰gå·²ç»ä¸éœ€è¦è¢«æŒ‚èµ·äº†ï¼Œæ‰€ä»¥éœ€è¦æŠŠçŠ¶æ€è°ƒæ•´ä¸º_Grunnableï¼Œç„¶åå®‰æ’gè¿˜æ˜¯åœ¨å½“å‰mä¸Šæ‰§è¡Œã€‚&lt;/p&gt;&lt;p cid=&quot;n706&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n716&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å½“I/Oäº‹ä»¶readyï¼Œä¼šä¸€å±‚å±‚è¿”å›ï¼Œè·å–åˆ°æ–°çš„socket fdï¼Œåˆ›å»ºconnç±»å‹çš„netFDï¼Œåˆå§‹åŒ–netFD(å…¶å®å°±æ˜¯æŠŠè¿™ä¸ªconnç±»å‹çš„fdä¹ŸåŠ å…¥epolläº‹ä»¶é˜Ÿåˆ—ï¼Œç”¨äºç›‘å¬)ï¼Œæœ€ç»ˆæœ€ä¸Šæ¸¸ä¼šè·å–åˆ°ä¸€ä¸ªConnç±»å‹çš„ç½‘ç»œè¿æ¥ï¼Œå°±å¯ä»¥åŸºäºè¿™ä¸ªè¿æ¥åšReadã€Writeç­‰æ“ä½œäº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n710&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5866666666666667&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wElzssv5OTarKu28NceB3HsIQ0xOOnYV8F04O67P2XQrwg2Khpg8qPg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1650&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n652&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;h5 cid=&quot;n997&quot; mdtype=&quot;heading&quot;&gt;&lt;br/&gt;&lt;/h5&gt;&lt;h5 cid=&quot;n997&quot; mdtype=&quot;heading&quot;&gt;&lt;br/&gt;&lt;/h5&gt;&lt;h5 cid=&quot;n997&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;Read/Write è§£æ&lt;/span&gt;&lt;/h5&gt;&lt;p cid=&quot;n995&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n995&quot; mdtype=&quot;paragraph&quot;&gt;åç»­çš„Conn.Read å’Œ Conn.Write åŸç†å’ŒAccept ç±»ä¼¼ã€‚&lt;/p&gt;&lt;p cid=&quot;n723&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.5450819672131149&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wibtZhbS8d7NGBWPJr5Xsv0hoO3l9WsO9yJOn9tu6MBvSnia7htvibScMw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1952&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n644&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n644&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä¸Šå›¾ç»™å‡ºäº†Writeæ“ä½œï¼Œå¯ä»¥çœ‹å‡ºæ ¸å¿ƒéƒ¨åˆ†å’Œacceptæ“ä½œæ—¶ä¸€æ ·çš„ã€‚å¯¹äºReadæ“ä½œï¼Œå°±ä¸å†é‡å¤äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n644&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n741&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä»ä¸Šé¢çš„åˆ†æä¸­æˆ‘ä»¬å·²ç»çŸ¥é“ï¼ŒGoçš„netpolleråº•å±‚é€šè¿‡å¯¹epoll|kqueue|iocpçš„å°è£…ï¼Œä½¿ç”¨åŒæ­¥çš„ç¼–ç¨‹æ‰‹æ³•è¾¾åˆ°å¼‚æ­¥æ‰§è¡Œçš„æ•ˆæœï¼Œæ— è®ºæ˜¯ä¸€ä¸ªListenerè¿˜æ˜¯ä¸€ä¸ªConnï¼Œå®ƒçš„æ ¸å¿ƒéƒ½æ˜¯netFDã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n741&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n741&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;netFDåˆå’Œåº•å±‚çš„PollDescç»“æ„ç»‘å®šï¼Œå½“è¯»å†™å‡ºç°EAGAINé”™è¯¯æ—¶ï¼Œä¼šé€šè¿‡è°ƒç”¨goparkæŠŠå½“å‰gç»™parkä½ï¼ŒåŒæ—¶ä¼šå°†å½“å‰çš„gå­˜å‚¨åˆ°å¯¹åº”netFDçš„PollDescçš„wg|rgå½“ä¸­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n741&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n741&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ç›´åˆ°è¿™ä¸ªnetFDå†æ¬¡å‘ç”Ÿå¯¹åº”çš„è¯»å†™äº‹ä»¶ï¼Œæ‰ä¼šé‡æ–°æŠŠå½“å‰gæ”¾å…¥åˆ°è°ƒåº¦ç³»ç»Ÿè¿›è¡Œè°ƒåº¦ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n741&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n745&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;è¿˜æœ‰æœ€åä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å’‹ä¹ˆçŸ¥é“å“ªäº›FDå‘ç”Ÿè¯»å†™äº‹ä»¶äº†ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n1000&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;h4 cid=&quot;n1002&quot; mdtype=&quot;heading&quot;&gt;&lt;br/&gt;&lt;/h4&gt;&lt;h4 cid=&quot;n1002&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;I/Oå·²å°±ç»ª&lt;/span&gt;&lt;/h4&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n751&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ç­”æ¡ˆå°±æ˜¯netpoll()å‡½æ•°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n754&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.7812828601472135&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9waqkqX9JFCY0NjFqeicBQeJCyx4SU1I3dCGwJGgRqsvdgdBsfLvln2VQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1902&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n758&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n758&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æ­¤å‡½æ•°ä¼šè°ƒç”¨epollwaitå‡½æ•°ï¼Œæœ¬è´¨ä¸Šå°±æ˜¯Linuxä¸­epoll_wait(int epfd, struct epoll_event * events, int maxevents, int timeout)ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n758&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n766&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;åœ¨ä¹‹å‰è°ƒç”¨epoll_ctlï¼Œæ³¨å†Œfdå¯¹åº”çš„I/Oäº‹ä»¶åˆ°epollå®ä¾‹å½“ä¸­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n766&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n766&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;è¿™é‡Œçš„epoll_waitå®é™…ä¸Šä¼šé˜»å¡ç›‘å¬epollå®ä¾‹ä¸Šæ‰€æœ‰fdçš„I/Oäº‹ä»¶ï¼Œé€šè¿‡ä¼ å…¥çš„ç¬¬äºŒä¸ªå‚æ•°(ç”¨æˆ·å†…å­˜åœ°å€events)ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n766&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n904&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å½“æœ‰å¯¹åº”çš„I/Oäº‹ä»¶åˆ°æ¥æ—¶ï¼Œå†…æ ¸å°±ä¼šæŠŠå‘ç”Ÿäº‹ä»¶å¯¹åº”çš„fdå¤åˆ¶åˆ°è¿™å—ç”¨æˆ·å†…å­˜åœ°å€(events)ï¼Œ&lt;/span&gt;è§£é™¤é˜»å¡ã€‚&lt;/p&gt;&lt;p cid=&quot;n904&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n904&quot; mdtype=&quot;paragraph&quot;&gt;ç„¶åæˆ‘ä»¬éå†è¿™ä¸ªeventsï¼Œå»è·å–åˆ°å¯¹åº”çš„äº‹ä»¶ç±»å‹ã€pollDescï¼Œå†é€šè¿‡è°ƒç”¨netpollreadyå‡½æ•°è·å–åˆ°pollDescå¯¹åº”è¢«goparkçš„gï¼Œæœ€ç»ˆæŠŠè¿™äº›gåŠ å…¥åˆ°ä¸€ä¸ªé“¾è¡¨å½“ä¸­ï¼Œè¿”å›ã€‚&lt;/p&gt;&lt;p cid=&quot;n904&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n771&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä¹Ÿå°±æ˜¯è¯´åªè¦è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å°±èƒ½è·å–åˆ°ä¹‹å‰å› ä¸ºI/Oæœªreadyè€Œè¢«goparkæŒ‚èµ·ï¼Œç°åœ¨I/Oå·²readyçš„gé“¾è¡¨äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n771&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n775&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°å››ä¸ªè°ƒç”¨å¤„ï¼Œå¦‚ä¸‹ï¼Œ&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot; cid=&quot;n777&quot; mdtype=&quot;list&quot; data-mark=&quot;-&quot;&gt;&lt;li&gt;&lt;p cid=&quot;n780&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;startTheWorldWithSema&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n781&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;findrunnable&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n786&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;pollWork&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n791&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;sysmon&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p cid=&quot;n727&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n727&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;è¿™å’Œgoçš„è°ƒåº¦æœ‰å…³ï¼Œå½“ç„¶è¿™ä¸æ˜¯æœ¬ç« çš„å†…å®¹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n727&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n727&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å½“è¿™å››ç§æ–¹æ³•è°ƒç”¨netpollå‡½æ•°å¾—åˆ°ä¸€ä¸ªå¯è¿è¡Œçš„gé“¾è¡¨æ—¶ï¼Œéƒ½ä¼šè°ƒç”¨åŒä¸€ä¸ªå‡½æ•°injectglistã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n727&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n727&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;è¿™ä¸ªå‡½æ•°æœ¬è´¨ä¸Šå°±æ˜¯æŠŠé“¾è¡¨ä¸­æ‰€æœ‰gçš„çŠ¶æ€ä»Gwaiting-&amp;gt;Grunnableã€‚ç„¶åæŒ‰ç…§ç­–ç•¥ï¼ŒæŠŠè¿™äº›gæ¨é€åˆ°æœ¬åœ°å¤„ç†å™¨pæˆ–è€…å…¨å®¶è¿è¡Œé˜Ÿåˆ—ä¸­ç­‰å¾…è¢«è°ƒåº¦å™¨æ‰§è¡Œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n809&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.7212681638044913&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/lkVfNnnUQnkzIGzdEuIH9pic2m82LdR9wqRjiagiaiaYPCL6DZ69thsibhjicqpGk3r8BlSX3LNJvpd6iclIbImYTibsow/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1514&quot;/&gt;&lt;/p&gt;&lt;p cid=&quot;n803&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n803&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;åˆ°è¿™é‡Œï¼Œæ•´ä¸ªæµç¨‹å°±å·²ç»å‰–æå®Œæ¯•ã€‚ä¸èƒ½å†å†™äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h4 cid=&quot;n607&quot; mdtype=&quot;heading&quot;&gt;&lt;br/&gt;&lt;/h4&gt;&lt;h4 cid=&quot;n607&quot; mdtype=&quot;heading&quot;&gt;&lt;br/&gt;&lt;/h4&gt;&lt;h4 cid=&quot;n607&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;/h4&gt;&lt;p cid=&quot;n908&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;Go netpolleré€šè¿‡åœ¨åº•å±‚å¯¹epoll/kqueue/iocpè¿™äº›ä¸åŒå¹³å°ä¸‹å¯¹I/Oå¤šè·¯å¤ç”¨å®ç°çš„å°è£…ï¼ŒåŠ ä¸Šè‡ªå¸¦çš„goroutine(ä¸Šæ–‡æˆ‘ä¸€ç›´ç”¨gè¡¨è¾¾)ï¼Œä»è€Œå®ç°äº†ä½¿ç”¨åŒæ­¥ç¼–ç¨‹æ¨¡å¼è¾¾åˆ°å¼‚æ­¥æ‰§è¡Œçš„æ•ˆæœã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n908&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n908&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä»£ç å¾ˆé•¿ï¼Œæ¶‰åŠåˆ°çš„æ¨¡å—ä¹Ÿå¾ˆå¤šï¼Œæ•´ä½“çœ‹å®Œä»£ç è¿˜æ˜¯éå¸¸çˆ½çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n908&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n917&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å¦å¤–æ—©æœ‰äººæå‡ºï¼Œç”±äºä¸€ä¸ªè¿æ¥å¯¹åº”ä¸€ä¸ªgoroutineï¼Œç¬æ—¶å¹¶å‘åœºæ™¯ä¸‹ï¼Œå¤§é‡çš„goroutineä¼šè¢«ä¸æ–­åˆ›å»ºã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n917&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;p cid=&quot;n917&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span/&gt;åŸç”Ÿnetpolleræ— æ³•æä¾›è¶³å¤Ÿçš„æ€§èƒ½å’Œæ§åˆ¶åŠ›ï¼Œå¦‚æ— æ³•æ„ŸçŸ¥è¿æ¥çŠ¶æ€ã€è¿æ¥æ•°é‡å¤šå¯¼è‡´åˆ©ç”¨ç‡ä½ã€æ— æ³•æ§åˆ¶åç¨‹æ•°é‡ç­‰ã€‚é’ˆå¯¹è¿™äº›é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒä¸‹gnetä»¥åŠ KiteX è¿™ä¸¤ä¸ªé¡¹ç›®çš„ç½‘ç»œæ¨¡å‹ã€‚&lt;/p&gt;&lt;p cid=&quot;n919&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;h4 cid=&quot;n101&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;å‚è€ƒèµ„æ–™&lt;/span&gt;&lt;/h4&gt;&lt;ul class=&quot;list-paddingleft-1&quot; cid=&quot;n937&quot; mdtype=&quot;list&quot; data-mark=&quot;-&quot;&gt;&lt;li&gt;&lt;p cid=&quot;n939&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;http://man7.org/linux/man-pages/man7/epoll.7.html&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n965&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&amp;lt;UNIXç½‘ç»œç¼–ç¨‹:å·1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n944&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;https://github.com/panjf2000/gnet&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n953&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;https://strikefreedom.top/go-netpoll-io-multiplexing-reactor&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n956&quot; mdtype=&quot;paragraph&quot;&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzI1MzYzMjE0MQ==&amp;amp;mid=2247485756&amp;amp;idx=1&amp;amp;sn=4d2712e4bfb9be27a790fa15159a7be1&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;https://mp.weixin.qq.com/s/wSaJYg-HqnYY4SdLA2Zzaw&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n959&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;https://ninokop.github.io/2018/02/18/go-net/&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n962&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;https://github.com/cloudwego/kitex&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n962&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span/&gt;&lt;/p&gt;&lt;p cid=&quot;n962&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;hr/&gt;&lt;p cid=&quot;n962&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;section data-darkmode-color-16485725445993=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16485725445993=&quot;#fff|rgb(0,0,0)&quot;&gt;&lt;span&gt;å¾€æœŸæ¨è&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;
          &lt;/div&gt;

          

          



           
                          
              &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>