<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>152466dcf8a5a6c4d331d085df506b2c</guid>
<title>Redisç¢ç‰‡æ•´ç†åŸç†è§£æä¸å®è·µ</title>
<link>https://toutiao.io/k/wmkid6f</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;span&gt;è¯´å®è¯ï¼Œæˆ‘å½“æ—¶è„‘å­çš„ç¬é—´æƒ³æ³•æ˜¯ï¼š&lt;/span&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ä¸šåŠ¡åº”è¯¥æŒ‡çš„æ˜¯åˆ é™¤æœŸé—´è€—æ—¶æ¶¨äº†ï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åˆ é™¤åRedisç«¯çš„è€—æ—¶ä¸ä¼šæ¶¨å§ï¼ŸAOFå’ŒRDBä¹Ÿæ²¡å¼€ï¼Œæ„Ÿè§‰ä¸šåŠ¡é‚£è¾¹æè¿°æœ‰é—®é¢˜ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸šåŠ¡æœåŠ¡æœ‰å¼‚å¸¸ï¼Ÿåˆ¤æ–­æ ‡å‡†ï¼Œå½“æ—¶ç„äº†ä¸€çœ¼ä¸»è°ƒæœåŠ¡æœ‰20ä¸ªï¼Œå…¶ä¸­åªæœ‰3ä¸ªå¯ç”¨æ€§ä¸‹é™ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¸¦ç€ç–‘é—®å¿«é€Ÿè¿‡äº†ä¸‹ç›¸å…³æŒ‡æ ‡ï¼Œå¾—åˆ°ä»¥ä¸‹ç»“è®ºï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ç¡®å®æ˜¯åˆ é™¤æ•°æ®åï¼Œè€—æ—¶ä¸Šæ¶¨äº†3å€ï¼ˆavg:1ms-&amp;gt;3msï¼‰ï¼Œåˆ é™¤æœŸé—´æ•´ä½“è¿˜å¥½ï¼ˆ&lt;strong&gt;ç•¥è¯¡å¼‚&lt;/strong&gt;ï¼Œè„‘å­ç¬é—´æƒ³åˆ°ç¢ç‰‡æ•´ç†ï¼Œä½†è¿™ä¸ªé›†ç¾¤çš„ç¢ç‰‡æ•´ç†cpuå‚æ•°æ§åˆ¶åœ¨10%-20%ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸»è°ƒæœºå™¨ç¡®å®æœ‰å¼‚å¸¸ï¼Œä½†æ˜¯ä¹‹å‰ä¹Ÿæœ‰é—®é¢˜ï¼ˆå¯æ’é™¤ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Redis Server cpuæ¶ˆè€—æ¶¨äº†3å€ï¼Œä½†æ˜¯max=24%ï¼Œä¾æ®ç»éªŒæ˜¯æ²¡é—®é¢˜çš„ï¼Œé™¤éä¸šåŠ¡å¯¹è€—æ—¶æåº¦æ•æ„Ÿã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»¼åˆçœ‹ï¼Œæµé‡æ— ä¸Šæ¶¨ã€ä¸»è°ƒæ–¹æ— å˜åŠ¨ã€åˆ é™¤å¤§é‡æ•°æ®ã€CPUä¸Šæ¶¨ä½†å¯å®¹å¿ï¼ˆä½†ä¸šåŠ¡å¯èƒ½ä¸å®¹å¿ï¼‰ï¼Œç«‹åˆ»åšäº†å…³æ‰ç¢ç‰‡æ•´ç†çš„å†³å®šï¼ŒæœåŠ¡ç¬é—´æ¢å¤ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;ps:Â ä¸Šè¿°æ˜¯3åˆ†é’Ÿå†…å®Œæˆçš„^_^&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è‡ªè®¤ä¸ºå¯¹ç¢ç‰‡ç‡ã€å·²ç»ç›¸å…³å®è·µæœ‰æ‰€äº†è§£ï¼Œä½†è¿˜æ˜¯å‡ºäº†ä¸ªé—®é¢˜ï¼Œäºæ˜¯å‡†å¤‡ä»”ç»†ç ”ç©¶ä¸‹ï¼ŒåŒæ—¶ä¹Ÿåˆ†äº«ç»™å¤§å®¶ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;äºŒã€ä»€ä¹ˆæ˜¯Rediså†…å­˜ç¢ç‰‡&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å†…å­˜åˆ†é…å™¨ä¸ºäº†æ›´å¥½åœ°ç®¡ç†å’Œé‡å¤åˆ©ç”¨å†…å­˜ï¼Œåˆ†é…ç­–ç•¥ä¸€èˆ¬é‡‡ç”¨å›ºå®šèŒƒå›´çš„å†…å­˜å—è¿›è¡Œåˆ†é…ã€‚Redisé»˜è®¤ä½¿ç”¨çš„æ˜¯jemallocåœ¨64ä½ç³»ç»Ÿä¸­å°†å†…å­˜ç©ºé—´åˆ’åˆ†ä¸ºï¼šå°ã€å¤§ã€å·¨å¤§ä¸‰ä¸ªèŒƒå›´ï¼Œæ¯ä¸ªèŒƒå›´å†…åˆåˆ’åˆ†ä¸ºå¤šä¸ªå°çš„å†…å­˜å—å•ä½ï¼š&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;ç©ºé—´&lt;/th&gt;&lt;th&gt;å€¼&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;å°&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;[8]&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;br/&gt;&lt;/td&gt;&lt;td&gt;16&lt;/td&gt;&lt;td&gt;[16ï¼Œ32ï¼Œ48ï¼Œ...ï¼Œ128]&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;br/&gt;&lt;/td&gt;&lt;td&gt;32&lt;/td&gt;&lt;td&gt;[160, 192, 224, 256]&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;br/&gt;&lt;/td&gt;&lt;td&gt;64&lt;/td&gt;&lt;td&gt;[320, 384, 448, 512]&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;br/&gt;&lt;/td&gt;&lt;td&gt;128&lt;/td&gt;&lt;td&gt;[640, 768, 896, 1024]&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;br/&gt;&lt;/td&gt;&lt;td&gt;256&lt;/td&gt;&lt;td&gt;[1280, 1536, 1792, 2048]&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;br/&gt;&lt;/td&gt;&lt;td&gt;512&lt;/td&gt;&lt;td&gt;[2560, 3072, 3584]&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;å¤§&lt;/td&gt;&lt;td&gt;4KB&lt;/td&gt;&lt;td&gt;[4KBï¼Œ8KBï¼Œ12KBï¼Œ...ï¼Œ4072KB]&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;å·¨&lt;/td&gt;&lt;td&gt;4MB&lt;/td&gt;&lt;td&gt;[4MBï¼Œ8MBï¼Œ12MBï¼Œ...]&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¹Ÿå°±æ˜¯å¦‚æœç”³è¯·ä¸€ä¸ª20å­—èŠ‚ï¼Œé‚£jemallocä¼šç›´æ¥ç”³è¯·32å­—èŠ‚çš„ç©ºé—´ï¼Œè¿™ç§åˆ†é…ç­–ç•¥å¿…ç„¶ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæœ‰ä¸€äº›æ•£ç¢çš„å°ç©ºé—´åˆ†é…ä¸å‡ºå»ï¼ˆå†…å­˜ç¢ç‰‡ï¼‰ï¼Œä¾‹å¦‚(æ¼”ç¤ºéœ€è¦)&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;(1) Â ä»0å¼€å§‹ç”³è¯·6å­—èŠ‚ã€3å­—èŠ‚ã€3å­—èŠ‚ã€3å­—èŠ‚ï¼Œä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå¼€è¾Ÿäº†3*8ä¸ªå­—èŠ‚ï¼Œä½†å®é™…ä½¿ç”¨äº†(6+3+3+3)å­—èŠ‚ï¼Œç©ºé—²äº†9å­—èŠ‚ï¼ˆå³ä¸ºç¢ç‰‡ï¼Œå½“ç„¶å¦‚æœæœ‰åé¢æœ‰ç»§ç»­ç”³è¯·å¯èƒ½ä¼šå¡«æ»¡ï¼‰&lt;/p&gt;&lt;span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.49513513513513513&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ZULLb8I10cwI9vnic3c981ENdqz9kAXIrP5uwLm1CyhfryDiaL0o88pCd2p2LdI6da1BalhHQD1X3dgxicJWGr3fg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1850&quot;/&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;(2) å¼€å§‹æ˜¯å¡«æ»¡çš„ï¼Œä½†æ˜¯åˆ é™¤åç©ºå‡ºäº†ä¸€äº›å°ç©ºé—´ï¼Œåç»­å°±æ— æ³•ä½¿ç”¨äº†ï¼š&lt;/span&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.46275395033860045&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ZULLb8I10cwI9vnic3c981ENdqz9kAXIr7Paicj6Qw13liaYrOqECARic8cqagRjibMFLQxnWgLl5M6mibzFV2hhiaPdg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1772&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šå¸¸å¦‚ä¸‹æƒ…å†µå¯èƒ½ä¼šäº§ç”Ÿè¾ƒå¤šçš„å†…å­˜ç¢ç‰‡ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å¤§é‡åˆ é™¤ï¼šä¸»åŠ¨åˆ é™¤(æ¯”å¦‚ä¸Šè¿°å·¥å•)ã€è¢«åŠ¨åˆ é™¤(è¿‡æœŸã€é€å‡ºç­‰)åäº§ç”Ÿå¤§é‡å†…å­˜ç¢ç‰‡ï¼Œå¯¼è‡´ç¢ç‰‡ç‡ä¸Šå‡ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é¢‘ç¹æ›´æ–°ï¼šä¾‹å¦‚å¯¹å·²ç»å­˜åœ¨çš„å­—ç¬¦ä¸²ç±»å‹é”®å€¼åšappendã€setæ‰©å®¹ï¼ˆè§¦å‘sdsæ‰©å®¹ï¼‰æ“ä½œã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¾‹å¦‚ç¬¬ä¸€èŠ‚æåˆ°çš„æ•°æ®åˆ é™¤åï¼Œç¢ç‰‡ç‡çŒ›å¢&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.31564625850340133&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ZULLb8I10cwI9vnic3c981ENdqz9kAXIrgiaFb2jcFMQXMFUyX9wxdvAlpnrIZmxeMhzHuhA6M6pEAV6nibQv2Icw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2940&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¸‰ã€å†…å­˜ç¢ç‰‡çš„å±å®³&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;1. ç¢ç‰‡ç‡&amp;lt;1&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ç§æƒ…å†µä¸€èˆ¬å‡ºç°åœ¨æ“ä½œç³»ç»ŸæŠŠRediså†…å­˜äº¤æ¢(Swap)åˆ°ç¡¬ç›˜å¯¼è‡´ï¼Œä¸€å®šè¦å¯†åˆ‡ç›‘æ§è¿™ç§æƒ…å†µï¼ŒRedisæ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™ï¼Œç”šè‡³hangæ­»ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­£ç¡®çš„åšæ³•çš„æ˜¯ï¼Œå…³é—­æ‰swap(&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=Mzg2NTEyNzE0OA==&amp;amp;mid=2247483828&amp;amp;idx=1&amp;amp;sn=cf3381916c0ceead671b0eff32908b25&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;Redisåœ¨Linuxç³»ç»Ÿçš„é…ç½®ä¼˜åŒ–&lt;/a&gt;)ï¼Œå¤§å¤šæ•°çœ‹ï¼ŒçœŸæ­»æ¯”hangæ­»è¦å¥½å¾ˆå¤šã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2. ç¢ç‰‡ç‡&amp;gt;1&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ç§æƒ…å†µè¯´æ˜å†…å­˜å¹¶æ²¡æœ‰è¢«å……åˆ†åˆ©ç”¨ï¼Œç¢ç‰‡ç‡è¶Šé«˜ï¼Œè¯´æ˜æµªè´¹è¶Šä¸¥é‡ï¼ˆğŸ’°ï¼Œè€ƒè™‘ä¸‹1ä¸ªé›†ç¾¤å’Œ1ä¸‡ä¸ªé›†ç¾¤çš„åŒºåˆ«ï¼‰ï¼Œæˆ‘ä»¬å‡è®¾æœ‰ä¸€ä¸ªæ—¥å¸¸æ»¡çš„100GBï¼ˆä¸€ä¸»ä¸€ä»ï¼‰é›†ç¾¤ï¼Œä¸åŒç¢ç‰‡ç‡çš„è¡¨ç°å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;ç¢ç‰‡ç‡&lt;/th&gt;&lt;th&gt;å®¹é‡&lt;/th&gt;&lt;th&gt;å®é™…å ç”¨å†…å­˜é‡&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;1.05&lt;/td&gt;&lt;td&gt;100GB * 2&lt;/td&gt;&lt;td&gt;100GB * 2*1.05 = 210GB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;1.1&lt;/td&gt;&lt;td&gt;100GB * 2&lt;/td&gt;&lt;td&gt;100GB * 2*1.1 = 220GB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;1.2&lt;/td&gt;&lt;td&gt;100GB * 2&lt;/td&gt;&lt;td&gt;100GB * 2*1.2 = 240GB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;1.3&lt;/td&gt;&lt;td&gt;100GB * 2&lt;/td&gt;&lt;td&gt;100GB * 2*1.3 = 260GB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;1.4&lt;/td&gt;&lt;td&gt;100GB * 2&lt;/td&gt;&lt;td&gt;100GB * 2*1.4 = 280GB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;1.5&lt;/td&gt;&lt;td&gt;100GB * 2&lt;/td&gt;&lt;td&gt;100GB * 2*1.5 = 300GB&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;100GB * 2&lt;/td&gt;&lt;td&gt;100GB * 2*2 = 400GB&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»Redisçš„å†…å­˜åˆ†é…æ¨¡å‹çœ‹ï¼Œç¢ç‰‡ç‡æ˜¯ä¸€å®šå­˜åœ¨ï¼Œä½†ç¢ç‰‡ç‡é«˜åˆ°ä»€ä¹ˆç¨‹åº¦éœ€è¦æ²»ç†ï¼Œæ˜¯å…·ä½“æƒ…å†µå…·ä½“åˆ†æï¼Œæœ¬æ–‡æœ€åä¼šç»™å‡ºä¸€äº›â€æœ€ä½³å®è·µâ€œ&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å››ã€å¦‚ä½•ç›‘æ§Rediså†…å­˜ç¢ç‰‡&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Redisæä¾›info memoryå‘½ä»¤æŸ¥çœ‹ç›¸å…³å†…å­˜æƒ…å†µ:&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;127.0.0.1&amp;gt;Â infoÂ memory&lt;br/&gt;&lt;span&gt;#Â Memory&lt;/span&gt;&lt;br/&gt;used_memory:Â Â Â Â Â 4285839160&lt;br/&gt;used_memory_rss:Â 4349640704&lt;br/&gt;mem_fragmentation_ratio:1.01&lt;br/&gt;mem_allocator:jemalloc-5.1.0&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­æœ‰ä¸‰æ¡æŒ‡æ ‡å¯ä»¥æè¿°ç¢ç‰‡ç‡ï¼Œå„è‡ªå«ä¹‰å¦‚ä¸‹&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;æŒ‡æ ‡å&lt;/th&gt;&lt;th&gt;å«ä¹‰&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;used_memory&lt;/td&gt;&lt;td&gt;ä»Redisè§’åº¦ï¼ŒRediså ç”¨çš„å†…å­˜ç”¨é‡&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;used_memory_rss&lt;/td&gt;&lt;td&gt;ä»æ“ä½œç³»ç»Ÿè§’åº¦ï¼ŒRediså ç”¨çš„å†…å­˜ç”¨é‡&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;mem_fragmentation_ratio&lt;/td&gt;&lt;td&gt;used_memory_rss/used_memoryï¼Œè¡¨ç¤ºå†…å­˜ç¢ç‰‡ç‡&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;äº”ã€æ€ä¹ˆè§£å†³å†…å­˜ç¢ç‰‡(Redisç‰ˆæœ¬å°äº4.0)&lt;span/&gt;&lt;/h3&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;æ•°æ®å¯¹é½ï¼šä¿æŒé”®å€¼å°½é‡ä½¿ç”¨è¾ƒä¸ºå›ºå®šçš„é•¿åº¦ï¼Œè¯´å®è¯è¿™ä¸ªå¯¹ä¸šåŠ¡æ¥è¯´å¾ˆéš¾åšåˆ°ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å®‰å…¨é‡å¯&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;slaveèŠ‚ç‚¹ï¼šå¦‚æ— æµé‡ï¼Œå¯ä»¥é‡å¯ï¼ˆä¸€ä¸»ä¸€ä»çš„æƒ…å†µè¦è°¨æ…ï¼Œä¸‡ä¸€é‡å¯æœŸé—´ï¼ŒmasteræŒ‚äº†ã€‚ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;masterèŠ‚ç‚¹ï¼šå¦‚æœå½“å‰æ¶æ„å¯ä¸»ä»åˆ‡æ¢ï¼ˆä¾‹å¦‚redis sentinelã€redis clusterç­‰ï¼‰ï¼Œå¯ä»¥å°è¯•ï¼ˆä½†é€šå¸¸æ¥è¯´ä¸»ä»åˆ‡æ¢å¯¹ä¸šåŠ¡100%æœ‰æŸï¼‰&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;åˆ‡æ¢åˆ°æ–°é›†ç¾¤ï¼šæ–°å»ºä¸€ä¸ªé›†ç¾¤ï¼Œå°†è€é›†ç¾¤ç¾¤æ•´ä½“è¿ç§»åˆ°æ–°é›†ç¾¤ï¼ˆä½†æ–°é›†ç¾¤ä¸ä¹…åä¹Ÿä¼šç¢ç‰‡ç‡é«˜ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;æ€»ç»“ï¼šä¸Šè¿°æ–¹æ³•è¦ä¸ä¸åˆå®é™…ï¼Œè¦ä¸æ²»æ ‡ä¸æ²»æœ¬ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å…­ã€æ€ä¹ˆè§£å†³å†…å­˜ç¢ç‰‡(Redisç‰ˆæœ¬å¤§äºç­‰äº4.0)&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;1. ç¢ç‰‡æ•´ç†åŠŸèƒ½ï¼š(ä»…jemallocæ”¯æŒ)&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Redis 4.0 releaseåï¼Œæä¾›äº†ç¢ç‰‡æ•´ç†åŠŸèƒ½&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;4.0Â RC3&lt;br/&gt;NewÂ majorÂ feature:Â MemoryÂ de-fragmentation.Â ThisÂ feature,Â contributedÂ byÂ OranÂ Agra,Â allowsÂ RedisÂ toÂ performÂ &lt;span&gt;&quot;onlineÂ defragmentation&quot;&lt;/span&gt;Â ofÂ memoryÂ &lt;span&gt;if&lt;/span&gt;Â theÂ JemallocÂ allocatorÂ isÂ used.Â &lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸€å›¾èƒœè¿‡åƒè¨€ä¸‡è¯­ï¼šç»è¿‡æ•´ç†å24å­—èŠ‚å˜ä¸ºäº†16å­—èŠ‚&lt;/p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4887940234791889&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ZULLb8I10cwI9vnic3c981ENdqz9kAXIrJYqoVLPx770ViaDTytmZEHN7LicYRrJrOlHjN8EsUzicAdkYGeb99xEpQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1874&quot;/&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2. å¦‚ä½•å¼€å¯&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Redisæä¾›äº†activedefragé…ç½®å®ç°å¯¹ç¢ç‰‡æ•´ç†çš„å¼€å¯ï¼ˆé»˜è®¤å…³é—­ï¼‰&lt;/p&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;(1) å¯åŠ¨Rediså‰æ·»åŠ é…ç½®&lt;span/&gt;&lt;/h5&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;activedefragÂ yes&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;(2) åŠ¨æ€å¼€å¯&lt;span/&gt;&lt;/h5&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;configÂ &lt;span&gt;set&lt;/span&gt;Â activedefragÂ yesÂ (å…³é—­)&lt;br/&gt;configÂ &lt;span&gt;set&lt;/span&gt;Â activedefragÂ noÂ (å…³é—­)&lt;br/&gt;configÂ rewriteÂ (è®°å¾—é…ç½®è½ç›˜)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;(3) åŠ¨æ€å‚æ•°å¼€å¯(ç”¨äºæµ‹è¯•)&lt;span/&gt;&lt;/h5&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;./redis-serverÂ --activedefragÂ yes&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;3. ç›¸å…³é…ç½®è§£æ&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†æ›´å¥½çš„æ§åˆ¶å’Œç®¡ç†Redisåšç¢ç‰‡æ•´ç†ï¼Œè¿˜æä¾›äº†å¤šä¸ªå‚æ•°&lt;/p&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;(1) Â å¼€å¯é˜ˆå€¼&lt;span/&gt;&lt;/h5&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;active-defrag-ignore-bytesÂ 100mbÂ (é»˜è®¤å€¼)&lt;br/&gt;active-defrag-threshold-lowerÂ 10Â (é»˜è®¤å€¼)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‰ä¸ªæ¡ä»¶åŒæ—¶æ»¡è¶³ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;activedefrag = yes&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¢ç‰‡ç‡å¤§äºactive-defrag-threshold-lower&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¢ç‰‡é‡å¤§äºactive-defrag-ignore-bytes&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;if&lt;/span&gt;(frag_pctÂ &amp;lt;Â server.active_defrag_threshold_lowerÂ ||Â frag_bytesÂ &amp;lt;Â server.active_defrag_ignore_bytes){&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;(2) å¢å¼ºç³»æ•°&lt;span/&gt;&lt;/h5&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;active_defrag_threshold_upperÂ 100ï¼ˆé»˜è®¤å€¼ï¼‰&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªå‚æ•°å¾ˆæœ‰è¿·æƒ‘æ€§ï¼Œå¥½åƒç›¸å¯¹äºactive-defrag-threshold-loweræ˜¯ç¢ç‰‡æ•´ç†çš„ä¸Šé™ï¼Œå…¶å®ä¸æ˜¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¢å¼ºç³»æ•°ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;size_tÂ frag_bytes;&lt;br/&gt;//è·å–ç¢ç‰‡ç‡å’Œç¢ç‰‡é‡&lt;br/&gt;&lt;span&gt;float&lt;/span&gt;Â frag_pctÂ =Â getAllocatorFragmentation(&amp;amp;frag_bytes);&lt;br/&gt;intÂ cpu_pctÂ =Â INTERPOLATE(frag_pct,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â server.active_defrag_threshold_lower,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â server.active_defrag_threshold_upper,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â server.active_defrag_cycle_min,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â server.active_defrag_cycle_max);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;INTERPOLATEçš„å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#defineÂ INTERPOLATE(x,Â x1,Â x2,Â y1,Â y2)Â (Â (y1)Â +Â ((x)-(x1))Â *Â ((y2)-(y1))Â /Â ((x2)-(x1))Â )&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æŠŠå…¬å¼æ•´ç†ä¸‹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;span data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section role=&quot;presentation&quot; data-formula=&quot;y1 + \frac{(x-x1)}{(x2-x1)}*(y2-y1)&amp;#10;&quot; data-formula-type=&quot;block-equation&quot;&gt;&lt;embed src=&quot;https://mmbiz.qpic.cn/mmbiz_svg/X6Ucic5kYIBOO3CzbOEgf4lk6VsBxm8KAwo2gYErt0icKJVJtjld5KZUr5es4pVo1CdfPv0POiacmr0iaFIuOa1YvoNw6RKDHMqU/0?wx_fmt=svg&quot; data-type=&quot;svg+xml&quot;/&gt;&lt;/section&gt;&lt;/span&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¥—ç”¨å…¬å¼ï¼š&lt;/p&gt;&lt;span data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section role=&quot;presentation&quot; data-formula=&quot;active\_defrag\_cycle\_min + \frac{(frag\_pct-active\_defrag\_threshold\_lower)}{(active\_defrag\_threshold\_upper-active\_defrag\_threshold\_lower)}*(active\_defrag\_cycle\_max-active\_defrag\_cycle\_min)&amp;#10;&quot; data-formula-type=&quot;block-equation&quot;&gt;&lt;embed src=&quot;https://mmbiz.qpic.cn/mmbiz_svg/X6Ucic5kYIBOO3CzbOEgf4lk6VsBxm8KA0tA5tsvTqVPee0Vm9XiatYQbsibheqON6uETn1HG9vibKjSus2qgNB8jCXQ8XJu7Qwt/0?wx_fmt=svg&quot; data-type=&quot;svg+xml&quot;/&gt;&lt;/section&gt;&lt;/span&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥çœ‹åˆ°active_defrag_threshold_upperè¶Šå¤§ï¼Œæ•´ä¸ªå€¼è¶Šå°ï¼Œè¿™ä¸ªå€¼å°±æ˜¯ç”¨æ¥ç¢ç‰‡æ•´ç†çš„é¢„ä¼°CPUå€¼ã€‚&lt;/p&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;(3) æ•´ç†ç²’åº¦&lt;span/&gt;&lt;/h5&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#Â active-defrag-cycle-minÂ 25&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â active-defrag-cycle-maxÂ 75&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;active-defrag-cycle-minå’Œactive-defrag-cycle-maxå°±æ˜¯æ¯æ¬¡ç¢ç‰‡æ•´ç†çš„æœ€å°CPUæ—¶é—´å’Œæœ€å¤§CPUæ—¶é—´ï¼Œä¸Šè¿°å…¬å¼è®¡ç®—å¾—åˆ°çš„cpu_pctè¿˜æ˜¯ä¼šè¢«è¿™ä¸¤ä¸ªå‚æ•°é™åˆ¶ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;cpu_pctÂ =Â LIMIT(cpu_pct,Â server.active_defrag_cycle_min,Â server.active_defrag_cycle_max)&lt;br/&gt;&lt;span&gt;#defineÂ LIMIT(y,Â min,Â max)Â ((y)&amp;lt;(min)?Â min:Â ((y)&amp;gt;(max)?Â max:Â (y)))Â Â Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤ä¸ªå‚æ•°åœ¨ä¸åŒç‰ˆæœ¬çš„Redisé»˜è®¤å€¼ä¸å¤ªä¸€æ ·ï¼š&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;4.0.14&lt;/th&gt;&lt;th&gt;5.0.14&lt;/th&gt;&lt;th&gt;6.0.16&lt;/th&gt;&lt;th&gt;6.2.7&lt;/th&gt;&lt;th&gt;7.0.4&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;active-defrag-cycle-min&lt;/td&gt;&lt;td&gt;25&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;active-defrag-cycle-max&lt;/td&gt;&lt;td&gt;75&lt;/td&gt;&lt;td&gt;75&lt;/td&gt;&lt;td&gt;25&lt;/td&gt;&lt;td&gt;25&lt;/td&gt;&lt;td&gt;25&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;(4) å¤§keyä¼˜åŒ– (since 5.0.0)&lt;span/&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¢ç‰‡æ•´ç†éœ€è¦å¯¹Rediså­—å…¸scanï¼Œå¦‚æœåœ¨è¿›è¡Œä¸­å‘ç°set/hash/zset/list/streamçš„å…ƒç´ ä¸ªæ•°è¶…è¿‡1000ï¼Œåˆ™æŠŠè¿™äº›é”®å€¼æ”¾åˆ°ä¸€ä¸ªå•ç‹¬çš„é˜Ÿåˆ—ä¹‹åè¿›è¡Œå¤„ç†ï¼Œè¿™æ ·åšä¸»è¦æ˜¯ä¸ºäº†é˜²æ­¢ç¢ç‰‡æ•´ç†è¶…æ—¶ï¼ˆå¦‚æœä¸€æ¬¡scanä¸­åŒ…å«äº†å¾ˆå¤šå¤§çš„é”®å€¼ï¼Œå¯èƒ½åœ¨å†…éƒ¨å·²ç»è¶…æ—¶äº†ã€‚ï¼‰ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#Â MaximumÂ numberÂ ofÂ set/hash/zset/listÂ fieldsÂ thatÂ willÂ beÂ processedÂ fromÂ theÂ mainÂ dictionaryÂ scan&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#active-defrag-max-scan-fieldsÂ 1000&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›¸å…³ä»£ç ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;longÂ defragQuicklist(redisDbÂ *db,Â dictEntryÂ *kde)Â {&lt;br/&gt;Â Â Â Â robjÂ *obÂ =Â dictGetVal(kde);&lt;br/&gt;Â Â Â Â quicklistÂ *qlÂ =Â ob-&amp;gt;ptr;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (ql-&amp;gt;lenÂ &amp;gt;Â server.active_defrag_max_scan_fields)&lt;br/&gt;Â Â Â Â Â Â Â Â defragLater(db,Â kde);&lt;br/&gt;Â Â Â Â ....&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;longÂ defragZsetSkiplist(redisDbÂ *db,Â dictEntryÂ *kde)Â {&lt;br/&gt;Â Â Â Â robjÂ *obÂ =Â dictGetVal(kde);&lt;br/&gt;Â Â Â Â zsetÂ *zsÂ =Â (zset*)ob-&amp;gt;ptr;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (dictSize(zs-&amp;gt;dict)Â &amp;gt;Â server.active_defrag_max_scan_fields)&lt;br/&gt;Â Â Â Â Â Â Â Â defragLater(db,Â kde);&lt;br/&gt;Â Â Â Â ....&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;longÂ defragHash(redisDbÂ *db,Â dictEntryÂ *kde)Â {&lt;br/&gt;Â &lt;span&gt;if&lt;/span&gt;Â (dictSize(d)Â &amp;gt;Â server.active_defrag_max_scan_fields)&lt;br/&gt;Â Â Â Â Â Â Â Â defragLater(db,Â kde);&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;longÂ defragStream(redisDbÂ *db,Â dictEntryÂ *kde)Â {&lt;br/&gt;Â Â ....&lt;br/&gt;Â Â Â Â defragLater(db,Â kde);&lt;br/&gt;Â Â Â Â .....&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;longÂ defragSet(redisDbÂ *db,Â dictEntryÂ *kde)Â {&lt;br/&gt;Â Â ....&lt;br/&gt;Â Â Â Â defragLater(db,Â kde);&lt;br/&gt;Â Â Â Â .....&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;defragLater:&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;//listÂ *defrag_later;&lt;br/&gt;voidÂ defragLater(redisDbÂ *db,Â dictEntryÂ *kde)Â {&lt;br/&gt;Â Â Â Â sdsÂ keyÂ =Â sdsdup(dictGetKey(kde));&lt;br/&gt;Â Â Â Â listAddNodeTail(db-&amp;gt;defrag_later,Â key);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å…­ã€Redisç¢ç‰‡æ•´ç†åŸç†è§£æ&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;1. ä»€ä¹ˆæ—¶å€™æ‰§è¡Œ&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¢ç‰‡æ•´ç†(activeExpireCycle)åœ¨Redisçš„æ—¶é—´äº‹ä»¶ä¸­æ‰§è¡Œï¼Œå…·ä½“è·¯å¾„ï¼šserverCron-&amp;gt;databasesCron-&amp;gt;activeExpireCycle&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;serverCron&lt;br/&gt;Â clientsCron();&lt;br/&gt;Â .....&lt;br/&gt;Â databasesCron();&lt;br/&gt;Â Â activeExpireCycle(ACTIVE_EXPIRE_CYCLE_SLOW)&lt;br/&gt;Â Â activeDefragCycle();&lt;br/&gt;Â Â ......&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›¸å…³ä»£ç ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;if&lt;/span&gt;Â (server.active_defrag_enabled)&lt;br/&gt;Â Â activeDefragCycle();&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2. æ‰§è¡Œé¢‘ç‡&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å’Œhzæ˜¯åŒæ­¥çš„ï¼Œé»˜è®¤1ç§’é’Ÿæ‰§è¡Œåæ¬¡ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;3. æ€ä¹ˆæ•´ç† ï¼ˆä»¥Redis 4ä»£ç ä¸ºä¾‹å­ï¼ŒRedis 6ç¨æœ‰å˜åŒ–ï¼‰&lt;span/&gt;&lt;/h4&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;(1) å®šæœŸ(æ¯ç§’é’Ÿ)æ›´æ–°ä»»åŠ¡è¶…æ—¶å‚æ•°server.active_defrag_running&lt;span/&gt;&lt;/h5&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;run_with_period(1000)Â {&lt;br/&gt;Â Â Â Â size_tÂ frag_bytes;&lt;br/&gt;Â Â Â Â &lt;span&gt;float&lt;/span&gt;Â frag_pctÂ =Â getAllocatorFragmentation(&amp;amp;frag_bytes);&lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â //å‰æ–‡å·²ç»è¯´æ˜&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (!server.active_defrag_running)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;(frag_pctÂ &amp;lt;Â server.active_defrag_threshold_lowerÂ ||Â frag_bytesÂ &amp;lt;Â server.active_defrag_ignore_bytes)&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â //å‰æ–‡å·²ç»è¯´æ˜&lt;br/&gt;Â Â Â Â intÂ cpu_pctÂ =Â INTERPOLATE(frag_pct,Â server.active_defrag_threshold_lower,Â server.active_defrag_threshold_upper,Â server.active_defrag_cycle_min,Â server.active_defrag_cycle_max);&lt;br/&gt;Â Â Â Â cpu_pctÂ =Â LIMIT(cpu_pct,Â server.active_defrag_cycle_min,Â server.active_defrag_cycle_max);&lt;br/&gt;&lt;br/&gt;Â Â //server.active_defrag_runningæ˜¯æ‰§è¡Œé™å®šæ—¶é—´çš„é‡è¦å› ç´ &lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (!server.active_defrag_runningÂ ||Â cpu_pctÂ &amp;gt;Â server.active_defrag_running)&lt;br/&gt;Â Â Â Â Â Â Â Â server.active_defrag_runningÂ =Â cpu_pct;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;//ä»»åŠ¡è¶…æ—¶æ—¶é—´ï¼šäº‰åˆ†å¤ºç§’&lt;br/&gt;timelimitÂ =Â 1000000*server.active_defrag_running/server.hz/100;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;Â (timelimitÂ &amp;lt;=Â 0)Â timelimitÂ =Â 1;&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;(2) å¼€å§‹æ•´ç†&lt;span/&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é’ˆå¯¹æ¯ä¸€ä¸ªdbè¿›è¡Œscanï¼Œè¿›è¡Œå¦‚ä¸‹å›è°ƒï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;defragDictBucketCallbackï¼šé’ˆå¯¹æ¯ä¸ªbucketè¿›è¡Œç¢ç‰‡æ•´ç†&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;defragScanCallbackï¼šé’ˆå¯¹æ¯ä¸ªdictEntryè¿›è¡Œç¢ç‰‡æ•´ç†&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;timelimitÂ =Â 1000000*server.active_defrag_running/server.hz/100;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;Â (timelimitÂ &amp;lt;=Â 0)Â timelimitÂ =Â 1;&lt;br/&gt;&lt;span&gt;do&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â cursorÂ =Â dictScan(db-&amp;gt;dict,Â cursor,Â defragScanCallback,Â defragDictBucketCallback,Â db);&lt;br/&gt;Â Â Â Â //æ£€æŸ¥æ˜¯å¦è¶…æ—¶&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (cursorÂ &amp;amp;&amp;amp;Â (++iterationsÂ &amp;gt;Â 16Â ||Â server.stat_active_defrag_hitsÂ -Â defraggedÂ &amp;gt;Â 1000))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((ustime()Â -Â start)Â &amp;gt;Â timelimit)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â iterationsÂ =Â 0;&lt;br/&gt;Â Â Â Â Â Â Â Â defraggedÂ =Â server.stat_active_defrag_hits;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}Â &lt;span&gt;while&lt;/span&gt;(cursor);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;defragDictBucketCallbackçš„é€»è¾‘ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;voidÂ defragDictBucketCallback(voidÂ *privdata,Â dictEntryÂ **bucketref)Â {&lt;br/&gt;Â Â Â Â UNUSED(privdata);&lt;br/&gt;Â Â Â Â &lt;span&gt;while&lt;/span&gt;(*bucketref)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â dictEntryÂ *deÂ =Â *bucketref,Â *newde;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((newdeÂ =Â activeDefragAlloc(de)))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â *bucketrefÂ =Â newde;&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â bucketrefÂ =Â &amp;amp;(*bucketref)-&amp;gt;next;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;defragScanCallbackçš„é€»è¾‘&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;void defragScanCallback(void *privdata, const dictEntry *de) {&lt;br/&gt;    int defragged = defragKey((redisDb*)privdata, (dictEntry*)de);&lt;br/&gt;    server.stat_active_defrag_hits += defragged;&lt;br/&gt;    if(defragged)&lt;br/&gt;        server.stat_active_defrag_key_hits++;&lt;br/&gt;    else&lt;br/&gt;        server.stat_active_defrag_key_misses++;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;defragKeyå¯¹dictEntryä¸­sds keyå’Œå„ä¸ªç±»å‹çš„valueè¿›è¡Œæ•´ç†(å¤æ‚ç±»å‹å°±æ˜¯forå¾ªç¯æ•´ç†)&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;intÂ defragKey(redisDbÂ *db,Â dictEntryÂ *de)Â {&lt;br/&gt;Â Â Â Â sdsÂ keysdsÂ =Â dictGetKey(de);&lt;br/&gt;&lt;br/&gt;Â Â Â Â //æ•´ç†keyÂ sds&lt;br/&gt;Â Â Â Â newsdsÂ =Â activeDefragSds(keysds);&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (newsds)&lt;br/&gt;Â Â Â Â Â Â Â Â defragged++,Â de-&amp;gt;keyÂ =Â newsds;&lt;br/&gt;Â Â Â ....&lt;br/&gt;&lt;br/&gt;Â Â //æ•´ç†valueÂ robj&lt;br/&gt;Â Â Â Â obÂ =Â dictGetVal(de);&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((newobÂ =Â activeDefragStringOb(ob,Â &amp;amp;defragged)))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â de-&amp;gt;v.valÂ =Â newob;&lt;br/&gt;Â Â Â Â Â Â Â Â obÂ =Â newob;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (ob-&amp;gt;&lt;span&gt;type&lt;/span&gt;Â ==Â OBJ_STRING)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â /*Â AlreadyÂ handledÂ &lt;span&gt;in&lt;/span&gt;Â activeDefragStringOb.Â */&lt;br/&gt;Â Â Â Â }Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (ob-&amp;gt;&lt;span&gt;type&lt;/span&gt;Â ==Â OBJ_LIST)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â //å¾ªç¯æ•´ç†quicklistæˆ–è€…ziplistçš„æ¯ä¸ªå…ƒç´ Â &lt;br/&gt;Â Â Â Â }Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (ob-&amp;gt;&lt;span&gt;type&lt;/span&gt;Â ==Â OBJ_SET)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â //å¾ªç¯æ•´ç†&lt;span&gt;hash&lt;/span&gt;æˆ–è€…intsetçš„æ¯ä¸ªå…ƒç´ Â &lt;br/&gt;Â Â Â Â }Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (ob-&amp;gt;&lt;span&gt;type&lt;/span&gt;Â ==Â OBJ_ZSET)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â //å¾ªç¯æ•´ç†skiplistæˆ–è€…ziplistçš„æ¯ä¸ªå…ƒç´ Â &lt;br/&gt;Â Â Â Â }Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (ob-&amp;gt;&lt;span&gt;type&lt;/span&gt;Â ==Â OBJ_HASH)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â //å¾ªç¯æ•´ç†&lt;span&gt;hash&lt;/span&gt;æˆ–è€…ziplistçš„æ¯ä¸ªå…ƒç´ Â &lt;br/&gt;Â Â Â Â }Â &lt;br/&gt;Â Â Â Â ....&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â defragged;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;activeDefragSdsé’ˆå¯¹sdså¯èƒ½çš„ç¢ç‰‡è¿›è¡Œæ•´ç†&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;sdsÂ activeDefragSds(sdsÂ sdsptr)Â {&lt;br/&gt;Â Â Â Â void*Â ptrÂ =Â sdsAllocPtr(sdsptr);&lt;br/&gt;Â Â Â Â void*Â newptrÂ =Â activeDefragAlloc(ptr);&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (newptr)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â size_tÂ offsetÂ =Â sdsptrÂ -Â (char*)ptr;&lt;br/&gt;Â Â Â Â Â Â Â Â sdsptrÂ =Â (char*)newptrÂ +Â offset;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â sdsptr;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â NULL;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;activeDefragAllocæ˜¯æ ¸å¿ƒæ–¹æ³•ï¼Œå…¶è°ƒç”¨jemallocç›¸å…³å‡½æ•°åˆ¤æ–­æ˜¯å¦æœ‰æ•´ç†ä»·å€¼ï¼Œå¦‚éœ€è¦åˆ™é‡æ–°æ•´ç†(ç”Ÿæˆnew é‡Šæ”¾old)&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;void*Â activeDefragAlloc(voidÂ *ptr)Â {&lt;br/&gt;Â Â Â Â intÂ bin_util,Â run_util;&lt;br/&gt;Â Â Â Â size_tÂ size;&lt;br/&gt;Â Â Â Â voidÂ *newptr;&lt;br/&gt;Â Â Â Â //ä¸å€¼å¾—æ•´ç†&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;(!je_get_defrag_hint(ptr,Â &amp;amp;bin_util,Â &amp;amp;run_util))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â server.stat_active_defrag_misses++;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â NULL;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â //ä¸å€¼å¾—æ•´ç†&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (run_utilÂ &amp;gt;Â bin_utilÂ ||Â run_utilÂ ==Â 1&amp;lt;&amp;lt;16)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â server.stat_active_defrag_misses++;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â NULL;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â //åˆ†é…æ–°åŒºåŸŸï¼Œä¸¢æ‰è€çš„&lt;br/&gt;Â Â Â Â sizeÂ =Â zmalloc_size(ptr);&lt;br/&gt;Â Â Â Â newptrÂ =Â zmalloc_no_tcache(size);&lt;br/&gt;Â Â Â Â memcpy(newptr,Â ptr,Â size);&lt;br/&gt;Â Â Â Â zfree_no_tcache(ptr);&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â newptr;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­int je_get_defrag_hint(void* ptr, int *bin_util, int *run_util)æ˜¯jemallocåº“å‡½æ•°ç”¨äºåˆ¤æ–­æ˜¯å¦å€¼å¾—æ•´ç†ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;/*Â thisÂ methodÂ wasÂ addedÂ toÂ jemallocÂ &lt;span&gt;in&lt;/span&gt;Â orderÂ toÂ &lt;span&gt;help&lt;/span&gt;Â usÂ understandÂ &lt;span&gt;which&lt;/span&gt;&lt;br/&gt;Â *Â pointersÂ areÂ worthwhileÂ movingÂ andÂ &lt;span&gt;which&lt;/span&gt;Â aren&lt;span&gt;&#x27;tÂ */&lt;br/&gt;intÂ je_get_defrag_hint(void*Â ptr,Â intÂ *bin_util,Â intÂ *run_util);&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¸ƒã€æ ¸å¿ƒç›‘æ§å‚æ•°å’Œ&lt;span/&gt;&lt;/h3&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;1. active_defrag_running&lt;span/&gt;&lt;/h5&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2. active_defrag_key_hitså’Œactive_defrag_key_misses&lt;span/&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç«™åœ¨æ¯ä¸ªkeyçš„è§’åº¦çœ‹ï¼Œæ˜¯å¦å‘½ä¸­ç¢ç‰‡æ•´ç†ã€‚&lt;/p&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;3. active_defrag_hitså’Œactive_defrag_misses&lt;span/&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç«™åœ¨æ¯ä¸ªkey-values(å¦‚æœæ˜¯å¤æ‚æ•°æ®ç»“æ„ï¼Œå°±å¯èƒ½å¤šæ¬¡)ï¼Œæ˜¯å¦å‘½ä¸­ç¢ç‰‡æ•´ç†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¾‹å¦‚ä¸€ä¸ªhashé”®å€¼å¯¹ï¼Œæœ‰200ä¸ªå…ƒç´ ï¼Œå…¶ä¸­æœ‰å…ƒç´ è¦åšç¢ç‰‡æ•´ç†ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;active_defrag_key_hitsÂ =Â 1&lt;br/&gt;active_defrag_hitsÂ &amp;gt;Â 1&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¸ƒã€æœ€ä½³å®è·µ&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;1. å¼€ä¸å¼€&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ€â€œä½³â€å®è·µ&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å¦‚æœè§„æ¨¡ä¸å¤§ã€ç¢ç‰‡ç‡ä¸é«˜ã€æ²¡ä¸“èŒç»´æŠ¤å»ºè®®å…³é—­ï¼ŒROIä½ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¦‚æœè§„æ¨¡å¤§ï¼ˆæ¯”å¦‚æˆ‘å¸100ä¸‡+ä¸ªèŠ‚ç‚¹ï¼‰ï¼Œç¢ç‰‡æ•´ç†çš„æˆæœ¬æ•ˆæœå¾ˆæ˜æ˜¾ï¼Œâ€æˆæœ¬ä¼˜åŒ–ï¼Œé™æœ¬å¢æ•ˆ~â€œ&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;img data-ratio=&quot;1.2317073170731707&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ZULLb8I10cwI9vnic3c981ENdqz9kAXIrWcljaglaC6r0m4fAfKVribw2zNe3suN633Kaugz2FbZzvXB6EoGlXwQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;656&quot;/&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2. æ€ä¹ˆé…ç½®&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œé‡ç‚¹è¯´ä¸‹active-defrag-cycle-minå’Œactive-defrag-cycle-maxï¼Œå› ä¸ºè®¾ç½®ä¸å½“çš„è¯å¯èƒ½ä¼šå½±å“Redisçš„æ€§èƒ½æˆ–è€…å¯ç”¨æ€§ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;é€‰æ‹©å¤§äº4.0ç‰ˆæœ¬çš„Redisï¼Œè¯¥ç‰ˆæœ¬ç¢ç‰‡æ•´ç†å¤„äºè¯•éªŒé˜¶æ®µ(æ¯”å¦‚å¤§keyé—®é¢˜ï¼Œä½†ä¸ç”¨æƒŠæ…Œæ²¡æœ‰å¤§é—®é¢˜(çº¿ä¸Šæ•°åä¸‡å®ä¾‹å¼€å¯))&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸è¦ç”¨é»˜è®¤å€¼ï¼Œå»ºè®®æ ¹æ®ä¸šåŠ¡åœºæ™¯è¿›è¡Œè°ƒèŠ‚ï¼Œä¾‹å¦‚æœ¬æ–‡æåˆ°çš„ä¸šåŠ¡è¶…æ•æ„Ÿå‹ä¸šåŠ¡ï¼Œå¯ä»¥ç›´æ¥è°ƒä½æˆ–è€…å…³æ‰ã€‚Redisçš„å·¥ä½œçº¿ç¨‹æ˜¯éå¸¸å¿™çš„ï¼šå„ç§cronã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤ä¸ªå‚æ•°åœ¨ä¸åŒç‰ˆæœ¬çš„Redisé»˜è®¤å€¼ä¸å¤ªä¸€æ ·ï¼š&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;4.0.14&lt;/th&gt;&lt;th&gt;5.0.14&lt;/th&gt;&lt;th&gt;6.0.16&lt;/th&gt;&lt;th&gt;6.2.7&lt;/th&gt;&lt;th&gt;7.0.4&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;active-defrag-cycle-min&lt;/td&gt;&lt;td&gt;25&lt;/td&gt;&lt;td&gt;5&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;1&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;active-defrag-cycle-max&lt;/td&gt;&lt;td&gt;75&lt;/td&gt;&lt;td&gt;75&lt;/td&gt;&lt;td&gt;25&lt;/td&gt;&lt;td&gt;25&lt;/td&gt;&lt;td&gt;25&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ€â€œä½³â€å®è·µ(ä¸€å®šä¸è¦ç”¨é»˜è®¤å€¼)&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘çš„çº¿ä¸Šé…ç½®æ˜¯Redis 6+ã€active-defrag-cycle-minï¼š5ã€active-defrag-cycle-maxï¼š10&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;3. æ€ä¹ˆå¼€&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ€â€œä½³â€å®è·µ&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ä½å³°å¼€ï¼šä¸€èˆ¬æ˜¯å¤œé—´(å’Œä¸šåŠ¡åœºæ™¯æœ‰å…³ï¼Œæ¯”å¦‚æµ·å¤–ä¸šåŠ¡å¯èƒ½å°±ä¸é€‚åˆ)ï¼Œä½†éœ€è¦é…åˆä¸€å®šè°ƒåº¦èƒ½åŠ›ï¼ŒRediså¹¶æ²¡æœ‰æä¾›æŒ‰æ—¶é—´æ®µå¼€å¯åŠŸèƒ½ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æš´åŠ›å¼€ï¼šé™ä½active-defrag-cycle-minå’Œactive-defrag-cycle-maxï¼Œæé«˜å®‰å…¨ç³»æ•°ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;4.ç‰ˆæœ¬é€‰æ‹©&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;(1) Redis 4ï¼šè¯•éªŒç‰ˆæœ¬ï¼Œé™¤äº†å¤§keyé—®é¢˜ï¼Œæ•´ä½“è¿˜å¥½ï¼Œå¦‚æœç”¨äº†ä¹Ÿä¸ç”¨è¿‡æ¸¡æ‹…å¿ƒå®ƒçš„ç¨³å®šæ€§&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;###########################Â ACTIVEÂ DEFRAGMENTATIONÂ #######################&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â WARNINGÂ THISÂ FEATUREÂ ISÂ EXPERIMENTAL.Â HoweverÂ itÂ wasÂ stressÂ tested&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â evenÂ inÂ productionÂ andÂ manuallyÂ testedÂ byÂ multipleÂ engineersÂ forÂ some&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â time.&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;(2) Redis5ï¼šæ˜¯ç¢ç‰‡æ•´ç†çš„ç¬¬äºŒä¸ªç‰ˆæœ¬(ä¾‹å¦‚è§£å†³äº†å¤§keyé—®é¢˜)ï¼Œ&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;releaseÂ note:Â ActiveÂ defragmentationÂ versionÂ 2&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†å®ƒè¿˜æ˜¯è¯•éªŒç‰ˆæœ¬ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;###########################Â ACTIVEÂ DEFRAGMENTATIONÂ #######################&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â WARNINGÂ THISÂ FEATUREÂ ISÂ EXPERIMENTAL.Â HoweverÂ itÂ wasÂ stressÂ tested&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â evenÂ inÂ productionÂ andÂ manuallyÂ testedÂ byÂ multipleÂ engineersÂ forÂ some&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â time.&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;(3) å¤§äºRedis 6ï¼šæ­£å¼ç‰ˆ&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;æ²¡äº†EXPERIMENTALçš„æ ‡è¯†&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ€â€œä½³â€å®è·µ&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;æœ€å¥½é€‰æ‹©Redis 6ä»¥ä¸Šç‰ˆæœ¬ï¼Œæ¯•ç«Ÿæ˜¯æ­£å¼ç‰ˆã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¦‚æœé€‰æ‹©äº†Redis 4ã€5ç‰ˆæœ¬ï¼Œä¹Ÿä¸ç”¨è¿‡æ¸¡æƒŠæ…Œï¼ŒåŸºæœ¬è¿˜å¥½ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åœ¨æ•´ä½“ç¢ç‰‡ç‡ä¸Šï¼ŒRedis 6ç¡®å®é«˜äºRedis 3ã€4ï¼Œä¸‹é¢æ˜¯ä¸€ç»„æ•°æ®ï¼š&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;br/&gt;&lt;/th&gt;&lt;th&gt;å®ä¾‹æ•°&lt;/th&gt;&lt;th&gt;å¹³å‡ç¢ç‰‡ç‡&lt;/th&gt;&lt;th&gt;jemallocç‰ˆæœ¬&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Redis 3.0.5&lt;/td&gt;&lt;td&gt;2235&lt;/td&gt;&lt;td&gt;1.28&lt;/td&gt;&lt;td&gt;jemalloc-3.6.0&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Redis 4.0.14&lt;/td&gt;&lt;td&gt;451361&lt;/td&gt;&lt;td&gt;1.156&lt;/td&gt;&lt;td&gt;jemalloc-4.0.3&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Redis 6.0.15&lt;/td&gt;&lt;td&gt;623632&lt;/td&gt;&lt;td&gt;1.112&lt;/td&gt;&lt;td&gt;jemalloc-5.1.0&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;(1) Redis 3é‡‡æ ·è¾ƒå°‘ï¼Œå¯ä»¥å¿½ç•¥&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;(2) Redis 4ã€6å¦‚æ— ç‰¹æ®Šå‡å¼€å¯ç¢ç‰‡æ•´ç†&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;(3) Redis 6çš„ç¢ç‰‡ç‡æ¯”Redis 4ç¡®å®ä½äº†ä¸€ä¸¢ä¸¢&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;(4) ä¸åŒç‰ˆæœ¬çš„jemallocä¸åŒï¼ŒçŒœæµ‹è‚¯å®šè¶Šæ¥è¶Šä¼˜ç§€(è¿™å—äº†è§£ä¸å¤šï¼Œæ­£åœ¨å­¦ä¹ ï¼Œè¯·äº†è§£çš„å¤§ä½¬æŒ‡æ•™)&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;5. æ€ä¹ˆç›‘æ§&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ€â€œä½³â€å®è·µ&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å®ä¾‹ã€é›†ç¾¤ã€å…¨å±€æ•°æ®æ”¶é›†ã€ç›‘æ§å›¾ã€æŠ¥è­¦ç­–ç•¥ï¼šactive_defrag_runningã€active_defrag_key_hits|missesã€active_defrag_hits|misses&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;â€æ—¶åˆ»â€œç›‘æ§used_cpu_*&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ ¸å¿ƒæ—¥å¿—ï¼šä½†æ³¨æ„å¯¹äºRedisæ¥è¯´æ‰“å°å¤ªå¤šæ—¥å¿—ä¸æ˜¯ä»€ä¹ˆå¥½äº‹æƒ…&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;6. memory purgeå‘½ä»¤æ¸…ç†&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é™¤äº†ç¢ç‰‡æ•´ç†é…ç½®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤å®ç°&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;127.0&lt;/span&gt;&lt;span&gt;.0&lt;/span&gt;&lt;span&gt;.1&lt;/span&gt;:&lt;span&gt;6379&lt;/span&gt;&amp;gt;Â memoryÂ purge&lt;br/&gt;OK&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»–å’Œdefragä¸åŒçš„æ˜¯ï¼Œå®ƒä»¬çš„ä¸æ˜¯ä½œç”¨åœ¨åŒä¸€å—å†…å­˜ï¼Œmemory purgeä¸»è¦ç”¨äºæ¸…ç†è„é¡µï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;intÂ &lt;span&gt;&lt;span&gt;jemalloc_purge&lt;/span&gt;&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â /*Â &lt;span&gt;return&lt;/span&gt;Â allÂ unusedÂ (reserved)Â pagesÂ toÂ theÂ OSÂ */&lt;br/&gt;Â Â Â Â charÂ tmp[32];&lt;br/&gt;Â Â Â Â unsignedÂ narenasÂ =Â 0;&lt;br/&gt;Â Â Â Â size_tÂ szÂ =Â sizeof(unsigned);&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (!je_mallctl(&lt;span&gt;&quot;arenas.narenas&quot;&lt;/span&gt;,Â &amp;amp;narenas,Â &amp;amp;sz,Â NULL,Â 0))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â sprintf(tmp,Â &lt;span&gt;&quot;arena.%d.purge&quot;&lt;/span&gt;,Â narenas);&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (!je_mallctl(tmp,Â NULL,Â 0,Â NULL,Â 0))&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â 0;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â -1;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šè¿‡åŸç†ä»¥åŠå®é™…åœºæ™¯çœ‹ï¼Œmemory purgeçš„æ•´ç†æ•ˆæœæ˜¯æ²¡æœ‰defragæ˜æ˜¾çš„ï¼Œå¦‚æœæœ‰éœ€è¦å¯ä»¥ç»“åˆä½¿ç”¨ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;7. ä¸€äº›â€œè°£è¨€â€å’Œ&quot;é”™è¯¯&quot;&lt;span/&gt;&lt;/h4&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;(1) 1 &amp;lt; mem_fragmentation_ratio &amp;lt; 1.5 ,å¯ä»¥è®¤ä¸ºæ˜¯åˆç†çš„ï¼Œæ— éœ€å¤„ç†&lt;span/&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªå’Œè§„æ¨¡æœ‰å…³ï¼Œå¦‚æœè§„æ¨¡è¾ƒå¤§ï¼Œä½ èƒ½è§†è€Œä¸è§å—ï¼Ÿ&lt;/p&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;(2) active-defrag-max-scan-fieldsé…ç½®çš„å«ä¹‰&lt;span/&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é”™è¯¯ï¼šç›´è¯‘&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#Â ç¢ç‰‡æ•´ç†æœŸé—´ï¼Œå¯¹äºÂ List/Set/Hash/ZSetÂ ç±»å‹å…ƒç´ ä¸€æ¬¡Â ScanÂ çš„æ•°é‡&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â MaximumÂ numberÂ ofÂ set/hash/zset/listÂ fieldsÂ thatÂ willÂ beÂ processedÂ fromÂ theÂ mainÂ dictionaryÂ scan&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â active-defrag-max-scan-fieldsÂ 1000&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­£ç¡®ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;å¯¹äºList/Set/Hash/ZSetç±»å‹å…ƒç´ æ•°é‡å¤§äºXXï¼Œåˆ™ä¸åœ¨scan dictä¸­å®Œæˆï¼Œé€šè¿‡ä¸Šæ–‡æˆ‘ä»¬çŸ¥é“æœ‰ä¸€ä¸ªå•ç‹¬çš„é˜Ÿåˆ—ï¼Œé˜²æ­¢è¶…æ—¶ã€‚&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;(3) active_defrag_threshold_upperé…ç½®çš„å«ä¹‰&lt;span/&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªå‚æ•°å¾ˆæœ‰è¿·æƒ‘æ€§ï¼Œå¥½åƒç›¸å¯¹äºactive-defrag-threshold-loweræ˜¯ç¢ç‰‡æ•´ç†çš„ä¸Šé™ï¼Œå…¶å®ä¸æ˜¯ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¢å¼ºç³»æ•°ï¼Œè¿™ä¸ªç½‘ä¸Šå¥½å¤šè§£é‡Šæœ‰é—®é¢˜ã€‚&lt;/p&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;(4) Â frag_pct ç­‰åŒäº mem_fragmentation_ratioï¼Ÿ&lt;span/&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é”™è¯¯ï¼šå®ƒä¸¤æ˜¯ä¸€å›äº‹&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­£ç¡®ï¼šå®ƒä»¬ä¸å®Œå…¨ç›¸ç­‰ï¼Œå¯ä»¥çœ‹ä¸‹æºç ä¸­çš„æè¿°ï¼Œ&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;float&lt;/span&gt;Â getAllocatorFragmentation(size_tÂ *out_frag_bytes)Â {&lt;br/&gt;Â Â Â Â size_tÂ epochÂ =Â 1,Â allocatedÂ =Â 0,Â residentÂ =Â 0,Â activeÂ =Â 0,Â szÂ =Â sizeof(size_t);&lt;br/&gt;Â Â Â Â ......&lt;br/&gt;Â Â Â Â //stats.residentä¸æ“ä½œç³»ç»Ÿçš„RSSä¸åŒï¼Œå®ƒä¸åŒ…å«å…±äº«åº“å’ŒotherÂ nonÂ heapÂ mappings&lt;br/&gt;Â Â Â Â je_mallctl(&lt;span&gt;&quot;stats.resident&quot;&lt;/span&gt;,Â &amp;amp;resident,Â &amp;amp;sz,Â NULL,Â 0);&lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â //stats.activeå’Œstats.residentÂ ä¸åŒï¼Œå®ƒä¸åŒ…å«jemallocä¿ç•™ä»¥ä¾›é‡ç”¨çš„é¡µé¢&lt;br/&gt;Â Â Â Â je_mallctl(&lt;span&gt;&quot;stats.active&quot;&lt;/span&gt;,Â &amp;amp;active,Â &amp;amp;sz,Â NULL,Â 0);&lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â //stats.allocatedä¸zmalloc_used_memoryÂ ä¸åŒï¼Œå®ƒé€šè¿‡è€ƒè™‘æ­¤è¿›ç¨‹å®Œæˆçš„æ‰€æœ‰åˆ†é…&lt;br/&gt;Â Â Â Â je_mallctl(&lt;span&gt;&quot;stats.allocated&quot;&lt;/span&gt;,Â &amp;amp;allocated,Â &amp;amp;sz,Â NULL,Â 0);&lt;br/&gt;Â Â Â Â &lt;span&gt;float&lt;/span&gt;Â frag_pctÂ =Â ((&lt;span&gt;float&lt;/span&gt;)activeÂ /Â allocated)*100Â -Â 100;&lt;br/&gt;Â Â Â Â size_tÂ frag_bytesÂ =Â activeÂ -Â allocated;&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â frag_pct;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>1dae447415c9ed528125a1673bd75bfd</guid>
<title>ä»åŸåˆ™ã€æ–¹æ¡ˆã€ç­–ç•¥åŠéš¾ç‚¹é˜è¿°åˆ†åº“åˆ†è¡¨</title>
<link>https://toutiao.io/k/6u20gmf</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                                       &quot; id=&quot;js_content&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1.0285714285714285&quot; data-type=&quot;png&quot; data-w=&quot;70&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/9YmUctibIWGRG39U9npALUmvibgRFaqtX7ictTddL5iaCCNJ07CZXoWytE91y43pLcfLdvmIsEqGBMiadOicts5U9D0A/640?wx_fmt=png&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;ç‚¹å‡»ä¸Šæ–¹&lt;span data-mid=&quot;&quot;&gt;è“å­—&lt;/span&gt;å…³æ³¨æˆ‘ä»¬&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.6666666666666666&quot; data-type=&quot;jpeg&quot; data-w=&quot;960&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/xicWYTSICzRsgbRXe9nDaFh5J0QIAEcTD9W8m3sIaKxl5SPicqnOyGGJmia8bp3Q4AMkZhkAObQmv8LfeHEv0FgBQ/640?wx_fmt=jpeg&quot;/&gt;&lt;/p&gt;&lt;h3&gt;ã€åˆ†åº“åˆ†è¡¨åŸåˆ™&lt;/h3&gt;&lt;p&gt;å…³ç³»å‹æ•°æ®åº“æœ¬èº«æ¯”è¾ƒå®¹æ˜“æˆä¸ºç³»ç»Ÿæ€§èƒ½ç“¶é¢ˆï¼Œå•æœºå­˜å‚¨å®¹é‡ã€è¿æ¥æ•°ã€å¤„ç†èƒ½åŠ›ç­‰éƒ½å¾ˆæœ‰é™ï¼Œæ•°æ®åº“æœ¬èº«çš„â€œæœ‰çŠ¶æ€æ€§â€å¯¼è‡´äº†å®ƒå¹¶ä¸åƒWebå’Œåº”ç”¨æœåŠ¡å™¨é‚£ä¹ˆå®¹æ˜“æ‰©å±•ã€‚åœ¨äº’è”ç½‘è¡Œä¸šæµ·é‡æ•°æ®å’Œé«˜å¹¶å‘è®¿é—®çš„è€ƒéªŒä¸‹ï¼Œèªæ˜çš„æŠ€æœ¯äººå‘˜æå‡ºäº†åˆ†åº“åˆ†è¡¨æŠ€æœ¯ï¼ˆæœ‰äº›åœ°æ–¹ä¹Ÿç§°ä¸ºShardingã€åˆ†ç‰‡ï¼‰ã€‚åŒæ—¶ï¼Œæµè¡Œçš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­é—´ä»¶ï¼ˆä¾‹å¦‚MongoDBã€ElasticSearchç­‰ï¼‰å‡è‡ªèº«å‹å¥½æ”¯æŒShardingï¼Œå…¶åŸç†å’Œæ€æƒ³éƒ½æ˜¯å¤§åŒå°å¼‚çš„ã€‚&lt;/p&gt;&lt;p&gt;ç›®å‰é’ˆå¯¹æµ·é‡æ•°æ®çš„ä¼˜åŒ–ï¼Œå…¶åˆ†åº“åˆ†è¡¨æ˜¯MySQLæ°¸è¿œçš„è¯é¢˜ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è®¤ä¸ºMySQLæ˜¯ä¸ªç®€å•çš„æ•°æ®åº“ï¼Œåœ¨æ•°æ®é‡å¤§åˆ°ä¸€å®šç¨‹åº¦ä¹‹åå¤„ç†æŸ¥è¯¢çš„æ•ˆç‡é™ä½ï¼Œå¦‚æœéœ€è¦ç»§ç»­ä¿æŒé«˜æ€§èƒ½è¿è½¬çš„è¯ï¼Œå¿…é¡»åˆ†åº“æˆ–è€…åˆ†è¡¨äº†ã€‚å…³äºæ•°æ®é‡è¾¾åˆ°å¤šå°‘å¤§æ˜¯ä¸ªæé™è¿™ä¸ªäº‹å„¿ï¼Œæœ¬æ–‡å…ˆä¸è®¨è®ºï¼Œç ”ç©¶æºç çš„åŒå­¦å·²ç»è¯å®MySQLæˆ–è€…Innodbå†…éƒ¨çš„é”ç²’åº¦å¤ªå¤§çš„é—®é¢˜å¤§å¤§é™åˆ¶äº†MySQLæä¾›QPSçš„èƒ½åŠ›æˆ–è€…å¤„ç†å¤§è§„æ¨¡æ•°æ®çš„èƒ½åŠ›ã€‚åœ¨è¿™ç‚¹ä¸Šï¼Œä¸€èˆ¬çš„ä½¿ç”¨è€…åªå¥½åç­‰å®˜æ–¹ä¸æ–­æ¨å‡ºçš„ä¼˜åŒ–ç‰ˆæœ¬äº†ã€‚&lt;/p&gt;&lt;p&gt;åœ¨ä¸€èˆ¬è¿ç»´çš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬ä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦è€ƒè™‘åˆ†åº“åˆ†è¡¨ï¼Ÿ&lt;/p&gt;&lt;p&gt;é¦–å…ˆè¯´æ˜ï¼Œè¿™é‡Œæ‰€è¯´çš„åˆ†åº“åˆ†è¡¨æ˜¯æŒ‡æŠŠæ•°æ®åº“æ•°æ®çš„ç‰©ç†æ‹†åˆ†åˆ°å¤šä¸ªå®ä¾‹æˆ–è€…å¤šå°æœºå™¨ä¸Šå»ï¼Œè€Œä¸æ˜¯ç±»ä¼¼åˆ†åŒºè¡¨çš„åŸåœ°åˆ‡åˆ†ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;åŸåˆ™é›¶ï¼šèƒ½ä¸åˆ†å°±ä¸åˆ†&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;æ˜¯çš„ï¼ŒMySQL æ˜¯å…³ç³»æ•°æ®åº“ï¼Œæ•°æ®åº“è¡¨ä¹‹é—´çš„å…³ç³»ä»ä¸€å®šçš„è§’åº¦ä¸Šæ˜ å°„äº†ä¸šåŠ¡é€»è¾‘ã€‚ä»»ä½•åˆ†åº“åˆ†è¡¨çš„è¡Œä¸ºéƒ½ä¼šåœ¨æŸç§ç¨‹åº¦ä¸Šæå‡ä¸šåŠ¡é€»è¾‘çš„å¤æ‚åº¦ï¼Œæ•°æ®åº“é™¤äº†æ‰¿è½½æ•°æ®çš„å­˜å‚¨å’Œè®¿é—®å¤–ï¼ŒååŠ©ä¸šåŠ¡æ›´å¥½çš„å®ç°éœ€æ±‚å’Œé€»è¾‘ä¹Ÿæ˜¯å…¶é‡è¦å·¥ä½œä¹‹ä¸€ã€‚åˆ†åº“åˆ†è¡¨ä¼šå¸¦æ¥æ•°æ®çš„åˆå¹¶ï¼ŒæŸ¥è¯¢æˆ–è€…æ›´æ–°æ¡ä»¶çš„åˆ†ç¦»ï¼Œäº‹åŠ¡çš„åˆ†ç¦»ç­‰ç­‰å¤šç§åæœï¼Œä¸šåŠ¡å®ç°çš„å¤æ‚ç¨‹åº¦å¾€å¾€ä¼šç¿»å€æˆ–è€…æŒ‡æ•°çº§ä¸Šå‡ã€‚æ‰€ä»¥ï¼Œåœ¨åˆ†åº“åˆ†è¡¨ä¹‹å‰ï¼Œä¸è¦ä¸ºåˆ†è€Œåˆ†ï¼Œå»åšå…¶ä»–åŠ›æ‰€èƒ½åŠçš„äº‹æƒ…å§ï¼Œä¾‹å¦‚å‡çº§ç¡¬ä»¶ï¼Œå‡çº§ï¼Œå‡çº§ç½‘ç»œï¼Œå‡çº§æ•°æ®åº“ç‰ˆæœ¬ï¼Œè¯»å†™åˆ†ç¦»ï¼Œè´Ÿè½½å‡è¡¡ç­‰ç­‰ã€‚æ‰€æœ‰åˆ†åº“åˆ†è¡¨çš„å‰ææ˜¯ï¼Œè¿™äº›ä½ å·²ç»å°½åŠ›äº†ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;åŸåˆ™ä¸€ï¼šæ•°æ®é‡å¤ªå¤§ï¼Œæ­£å¸¸çš„è¿ç»´å½±å“æ­£å¸¸ä¸šåŠ¡è®¿é—®&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;è¿™é‡Œè¯´çš„è¿ç»´ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;&lt;p&gt;1ï¼‰å¯¹æ•°æ®åº“çš„å¤‡ä»½ã€‚å¦‚æœå•è¡¨æˆ–è€…å•ä¸ªå®ä¾‹å¤ªå¤§ï¼Œåœ¨åšå¤‡ä»½çš„æ—¶å€™éœ€è¦å¤§é‡çš„ç£ç›˜IOæˆ–è€…ç½‘ç»œIOèµ„æºã€‚ä¾‹å¦‚1Tçš„æ•°æ®ï¼Œç½‘ç»œä¼ è¾“å ç”¨50MBçš„æ—¶å€™ï¼Œéœ€è¦20000ç§’æ‰èƒ½ä¼ è¾“å®Œæ¯•ï¼Œåœ¨æ­¤æ•´ä¸ªè¿‡ç¨‹ä¸­çš„ç»´æŠ¤é£é™©éƒ½æ˜¯é«˜äºå¹³æ—¶çš„ã€‚æˆ‘ä»¬åœ¨Qunarçš„åšæ³•æ˜¯ç»™æ‰€æœ‰çš„æ•°æ®åº“æœºå™¨æ·»åŠ ç¬¬äºŒå—ç½‘å¡ï¼Œç”¨æ¥åšå¤‡ä»½ï¼Œæˆ–è€…SSTï¼ŒGroup Communicationç­‰ç­‰å„ç§å†…éƒ¨çš„æ•°æ®ä¼ è¾“ã€‚1Tçš„æ•°æ®çš„å¤‡ä»½ï¼Œä¹Ÿä¼šå ç”¨å¤§é‡çš„ç£ç›˜IOï¼Œå¦‚æœæ˜¯SSDè¿˜å¥½ï¼Œå½“ç„¶è¿™é‡Œå¿½ç•¥æŸäº›å‚å•†çš„äº§å“åœ¨é›†ä¸­IOçš„æ—¶å€™ä¼šå‡ºä¸€äº›BUGçš„é—®é¢˜ã€‚å¦‚æœæ˜¯æ™®é€šçš„ç‰©ç†ç£ç›˜ï¼Œåˆ™åœ¨ä¸é™æµçš„æƒ…å†µä¸‹å»æ‰§è¡Œxtrabackupï¼Œè¯¥å®ä¾‹åŸºæœ¬ä¸å¯ç”¨ã€‚&lt;/p&gt;&lt;p&gt;2ï¼‰å¯¹æ•°æ®è¡¨çš„ä¿®æ”¹ã€‚å¦‚æœæŸä¸ªè¡¨è¿‡å¤§ï¼Œå¯¹æ­¤è¡¨åšDDLçš„æ—¶å€™ï¼ŒMySQLä¼šé”ä½å…¨è¡¨ï¼Œè¿™ä¸ªæ—¶é—´å¯èƒ½å¾ˆé•¿ï¼Œåœ¨è¿™æ®µæ—¶é—´ä¸šåŠ¡ä¸èƒ½è®¿é—®æ­¤è¡¨ï¼Œå½±å“ç”šå¤§ã€‚è§£å†³çš„åŠæ³•æœ‰ç±»ä¼¼è…¾è®¯æ¸¸æˆDBAè‡ªå·±æ”¹é€ çš„å¯ä»¥åœ¨çº¿ç§’æ”¹è¡¨ï¼Œä¸è¿‡ä»–ä»¬ç›®å‰ä¹Ÿåªæ˜¯èƒ½æ·»åŠ å­—æ®µè€Œå·²ï¼Œå¯¹åˆ«çš„DDLè¿˜æ˜¯æ— æ•ˆï¼›æˆ–è€…ä½¿ç”¨pt-online-schema-changeï¼Œå½“ç„¶åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå®ƒéœ€è¦å»ºç«‹è§¦å‘å™¨å’Œå½±å­è¡¨ï¼ŒåŒæ—¶ä¹Ÿéœ€è¦å¾ˆé•¿å¾ˆé•¿çš„æ—¶é—´ï¼Œåœ¨æ­¤æ“ä½œè¿‡ç¨‹ä¸­çš„æ‰€æœ‰æ—¶é—´ï¼Œéƒ½å¯ä»¥çœ‹åšæ˜¯é£é™©æ—¶é—´ã€‚æŠŠæ•°æ®è¡¨åˆ‡åˆ†ï¼Œæ€»é‡å‡å°ï¼Œæœ‰åŠ©äºæ”¹å–„è¿™ç§é£é™©ã€‚&lt;/p&gt;&lt;p&gt;3ï¼‰æ•´ä¸ªè¡¨çƒ­ç‚¹ï¼Œæ•°æ®è®¿é—®å’Œæ›´æ–°é¢‘ç¹ï¼Œç»å¸¸æœ‰é”ç­‰å¾…ï¼Œä½ åˆæ²¡æœ‰èƒ½åŠ›å»ä¿®æ”¹æºç ï¼Œé™ä½é”çš„ç²’åº¦ï¼Œé‚£ä¹ˆåªä¼šæŠŠå…¶ä¸­çš„æ•°æ®ç‰©ç†æ‹†å¼€ï¼Œç”¨ç©ºé—´æ¢æ—¶é—´ï¼Œå˜ç›¸é™ä½è®¿é—®å‹åŠ›ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;åŸåˆ™äºŒï¼šè¡¨è®¾è®¡ä¸åˆç†ï¼Œéœ€è¦å¯¹æŸäº›å­—æ®µå‚ç›´æ‹†åˆ†&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;è¿™é‡Œä¸¾ä¸€ä¸ªä¾‹å­ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªç”¨æˆ·è¡¨ï¼Œåœ¨æœ€åˆè®¾è®¡çš„æ—¶å€™å¯èƒ½æ˜¯è¿™æ ·ï¼š&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;properties&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;       &lt;span class=&quot;code-snippet__attr&quot;&gt;id&lt;/span&gt;                   &lt;span class=&quot;code-snippet__string&quot;/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__attr&quot;&gt;bigint&lt;/span&gt; &lt;span class=&quot;code-snippet__string&quot;/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__attr&quot;&gt;name&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__attr&quot;&gt;varchar&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__attr&quot;&gt;last_login_time&lt;/span&gt;      &lt;span class=&quot;code-snippet__string&quot;/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__attr&quot;&gt;datetime&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;       &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__attr&quot;&gt;personal&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__attr&quot;&gt;_info&lt;/span&gt;    &lt;span class=&quot;code-snippet__string&quot;/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__attr&quot;&gt;text&lt;/span&gt;   &lt;span class=&quot;code-snippet__string&quot;/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__attr&quot;&gt;xxxxx&lt;/span&gt;                                 &lt;span class=&quot;code-snippet__string&quot;/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;è®¾æƒ³æƒ…å†µä¸€ï¼šä½ çš„ä¸šåŠ¡ä¸­å½©äº†ï¼Œç”¨æˆ·æ•°ä»100wé£™å‡åˆ°10ä¸ªäº¿ã€‚ä½ ä¸ºäº†ç»Ÿè®¡æ´»è·ƒç”¨æˆ·ï¼Œåœ¨æ¯ä¸ªäººç™»å½•çš„æ—¶å€™éƒ½ä¼šè®°å½•ä¸€ä¸‹ä»–çš„æœ€è¿‘ç™»å½•æ—¶é—´ã€‚å¹¶ä¸”çš„ç”¨æˆ·æ´»è·ƒå¾—å¾ˆï¼Œä¸æ–­çš„å»æ›´æ–°è¿™ä¸ªlogin_timeï¼Œæçš„ä½ çš„è¿™ä¸ªè¡¨ä¸æ–­çš„è¢«updateï¼Œå‹åŠ›éå¸¸å¤§ã€‚é‚£ä¹ˆï¼Œåœ¨è¿™ä¸ªæ—¶å€™ï¼Œåªè¦è€ƒè™‘å¯¹å®ƒè¿›è¡Œæ‹†åˆ†ï¼Œç«™åœ¨ä¸šåŠ¡çš„è§’åº¦ï¼Œæœ€å¥½çš„åŠæ³•æ˜¯å…ˆæŠŠlast_login_timeæ‹†åˆ†å‡ºå»ï¼Œæˆ‘ä»¬å«å®ƒ user_timeã€‚è¿™æ ·åšï¼Œä¸šåŠ¡çš„ä»£ç åªæœ‰åœ¨ç”¨åˆ°è¿™ä¸ªå­—æ®µçš„æ—¶å€™ä¿®æ”¹ä¸€ä¸‹å°±è¡Œäº†ã€‚å¦‚æœä½ ä¸è¿™ä¹ˆåšï¼Œç›´æ¥æŠŠusersè¡¨æ°´å¹³åˆ‡åˆ†äº†ï¼Œé‚£ä¹ˆï¼Œæ‰€æœ‰è®¿é—®usersè¡¨çš„åœ°æ–¹ï¼Œéƒ½è¦ä¿®æ”¹ã€‚æˆ–è®¸ä½ ä¼šè¯´ï¼Œæˆ‘æœ‰proxyï¼Œèƒ½å¤ŸåŠ¨æ€mergeæ•°æ®ã€‚åˆ°ç›®å‰ä¸ºæ­¢æˆ‘è¿˜ä»æ²¡çœ‹åˆ°è°å®¶çš„proxyä¸å½±å“æ€§èƒ½çš„ã€‚&lt;/p&gt;&lt;p&gt;è®¾æƒ³æƒ…å†µäºŒï¼špersonal_infoè¿™ä¸ªå­—æ®µæœ¬æ¥æ²¡å•¥ç”¨ï¼Œä½ å°±æ˜¯è®©ç”¨æˆ·æ³¨å†Œçš„æ—¶å€™å¡«ä¸€äº›ä¸ªäººçˆ±å¥½è€Œå·²ï¼ŒåŸºæœ¬ä¸æŸ¥è¯¢ã€‚ä¸€å¼€å§‹çš„æ—¶å€™æœ‰å®ƒæ²¡å®ƒæ— æ‰€è°“ã€‚ä½†æ˜¯åˆ°åæ¥å‘ç°ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€ï¼Œè¿™ä¸ªå­—æ®µå ç”¨äº†å¤§é‡çš„ç©ºé—´ï¼Œå› ä¸ºæ˜¯textå˜›ï¼Œæœ‰å¾ˆå¤šäººå–œæ¬¢é•¿ç¯‡å¤§è®ºåœ°ä»‹ç»è‡ªå·±ã€‚æ›´ç³Ÿç³•çš„æ˜¯äºŒï¼Œä¸çŸ¥é“å“ªå¤©å“ªä¸ªäº§å“ç»ç†å¿ƒè¡€æ¥æ½®ï¼Œè¯´å…è®¸ä¸ªäººä¿¡æ¯å…¬å¼€å§ï¼Œä»¥æ–¹ä¾¿è®©å¤§å®¶æ›´å¥½çš„ç›¸äº’äº†è§£ã€‚é‚£ä¹ˆåœ¨æ‰€æœ‰äººçŒå¥‡çª¥ç§å¿ƒç†çš„å½±å“ä¸‹ï¼Œå¯¹æ­¤å­—æ®µçš„è®¿é—®å¤§å¹…åº¦å¢åŠ ã€‚æ•°æ®åº“å‹åŠ›ç¬é—´æŠ—ä¸ä½äº†ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œåªå¥½è€ƒè™‘å¯¹è¿™ä¸ªè¡¨çš„å‚ç›´æ‹†åˆ†äº†ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;åŸåˆ™ä¸‰ï¼šæŸäº›æ•°æ®è¡¨å‡ºç°äº†æ— ç©·å¢é•¿&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;ä¾‹å­å¾ˆå¥½ä¸¾ï¼Œå„ç§çš„è¯„è®ºï¼Œæ¶ˆæ¯ï¼Œæ—¥å¿—è®°å½•ã€‚è¿™ä¸ªå¢é•¿ä¸æ˜¯è·Ÿäººå£æˆæ¯”ä¾‹çš„ï¼Œè€Œæ˜¯ä¸å¯æ§çš„ï¼Œä¾‹å¦‚å¾®åšçš„feedçš„å¹¿æ’­ï¼Œæˆ‘å‘ä¸€æ¡æ¶ˆæ¯ï¼Œä¼šæ‰©æ•£ç»™å¾ˆå¤šå¾ˆå¤šäººã€‚è™½ç„¶ä¸»ä½“å¯èƒ½åªå­˜ä¸€ä»½ï¼Œä½†ä¸æ’é™¤ä¸€äº›ç´¢å¼•æˆ–è€…è·¯ç”±æœ‰è¿™ç§å­˜å‚¨éœ€æ±‚ã€‚è¿™ä¸ªæ—¶å€™ï¼Œå¢åŠ å­˜å‚¨ï¼Œæå‡æœºå™¨é…ç½®å·²ç»è‹ç™½æ— åŠ›äº†ï¼Œæ°´å¹³åˆ‡åˆ†æ˜¯æœ€ä½³å®è·µã€‚æ‹†åˆ†çš„æ ‡å‡†å¾ˆå¤šï¼ŒæŒ‰ç”¨æˆ·çš„ï¼ŒæŒ‰æ—¶é—´çš„ï¼ŒæŒ‰ç”¨é€”çš„ï¼Œä¸åœ¨ä¸€ä¸€ä¸¾ä¾‹ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;åŸåˆ™å››ï¼šå®‰å…¨æ€§å’Œå¯ç”¨æ€§çš„è€ƒè™‘&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;è¿™ä¸ªå¾ˆå®¹æ˜“ç†è§£ï¼Œé¸¡è›‹ä¸è¦æ”¾åœ¨ä¸€ä¸ªç¯®å­é‡Œï¼Œæˆ‘ä¸å¸Œæœ›æˆ‘çš„æ•°æ®åº“å‡ºé—®é¢˜ï¼Œä½†æˆ‘å¸Œæœ›åœ¨å‡ºé—®é¢˜çš„æ—¶å€™ä¸è¦å½±å“åˆ°100%çš„ç”¨æˆ·ï¼Œè¿™ä¸ªå½±å“çš„æ¯”ä¾‹è¶Šå°‘è¶Šå¥½ï¼Œé‚£ä¹ˆï¼Œæ°´å¹³åˆ‡åˆ†å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒæŠŠç”¨æˆ·ï¼Œåº“å­˜ï¼Œè®¢å•ç­‰ç­‰æœ¬æ¥åŒç»Ÿä¸€çš„èµ„æºåˆ‡åˆ†æ‰ï¼Œæ¯ä¸ªå°çš„æ•°æ®åº“å®ä¾‹æ‰¿æ‹…ä¸€å°éƒ¨åˆ†ä¸šåŠ¡ï¼Œè¿™æ ·æ•´ä½“çš„å¯ç”¨æ€§å°±ä¼šæå‡ã€‚è¿™å¯¹Qunarè¿™æ ·çš„ä¸šåŠ¡è¿˜æ˜¯æ¯”è¾ƒåˆé€‚çš„ï¼Œäººä¸äººä¹‹é—´ï¼ŒæŸäº›åº“å­˜ä¸åº“å­˜ä¹‹é—´ï¼Œå…³è”ä¸å¤ªå¤§ï¼Œå¯ä»¥åšä¸€äº›è¿™æ ·çš„åˆ‡åˆ†ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;åŸåˆ™äº”ï¼šä¸šåŠ¡è€¦åˆæ€§è€ƒè™‘&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;è¿™ä¸ªè·Ÿä¸Šé¢æœ‰ç‚¹ç±»ä¼¼ï¼Œä¸»è¦æ˜¯ç«™åœ¨ä¸šåŠ¡çš„å±‚é¢ä¸Šï¼Œæˆ‘ä»¬çš„ç«è½¦ç¥¨ä¸šåŠ¡å’Œçƒ¤ç¾Šè…¿ä¸šåŠ¡æ˜¯å®Œå…¨æ— å…³çš„ä¸šåŠ¡ï¼Œè™½ç„¶æ¯ä¸ªä¸šåŠ¡çš„æ•°æ®é‡å¯èƒ½ä¸å¤ªå¤§ï¼Œæ”¾åœ¨ä¸€ä¸ªMySQLå®ä¾‹ä¸­å®Œå…¨æ²¡é—®é¢˜ï¼Œä½†æ˜¯å¾ˆå¯èƒ½çƒ¤ç¾Šè…¿ä¸šåŠ¡çš„DBA æˆ–è€…å¼€å‘äººå‘˜æ°´å¹³å¾ˆå·®ï¼ŒåŠ¨ä¸åŠ¨ç»™ä½ å‡ºä¸€äº›å¹ºè›¾å­ï¼Œç›´æ¥æŠŠæ•°æ®åº“ææŒ‚ã€‚è¿™ä¸ªæ—¶å€™ï¼Œç«è½¦ç¥¨ä¸šåŠ¡çš„äººå‘˜è™½ç„¶æŠ€æœ¯å¾ˆä¼˜ç§€ï¼Œå·¥ä½œä¹Ÿå¾ˆåŠªåŠ›ï¼Œç…§æ ·è¢«è€æ¿æ‰“å±è‚¡ã€‚è§£å†³çš„åŠæ³•å¾ˆç®€å•:æƒ¹ä¸èµ·ï¼Œèº²å¾—èµ·ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;h3&gt;äºŒã€åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆ&lt;/h3&gt;&lt;p&gt;å‚ç›´æ‹†åˆ†å¸¸è§æœ‰å‚ç›´åˆ†åº“å’Œå‚ç›´åˆ†è¡¨ä¸¤ç§ã€‚å‚ç›´åˆ†è¡¨åœ¨æ—¥å¸¸å¼€å‘å’Œè®¾è®¡ä¸­æ¯”è¾ƒå¸¸è§ï¼Œé€šä¿—çš„è¯´æ³•å«åšâ€œå¤§è¡¨æ‹†å°è¡¨â€ï¼Œæ‹†åˆ†æ˜¯åŸºäºå…³ç³»å‹æ•°æ®åº“ä¸­çš„â€œåˆ—â€ï¼ˆå­—æ®µï¼‰è¿›è¡Œçš„ã€‚é€šå¸¸æƒ…å†µï¼ŒæŸä¸ªè¡¨ä¸­çš„å­—æ®µæ¯”è¾ƒå¤šï¼Œå¯ä»¥æ–°å»ºç«‹ä¸€å¼ â€œæ‰©å±•è¡¨â€ï¼Œå°†ä¸ç»å¸¸ä½¿ç”¨æˆ–è€…é•¿åº¦è¾ƒå¤§çš„å­—æ®µæ‹†åˆ†å‡ºå»æ”¾åˆ°â€œæ‰©å±•è¡¨â€ä¸­ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.48048780487804876&quot; data-type=&quot;png&quot; data-w=&quot;410&quot; title=&quot;ä»åŸåˆ™ã€æ–¹æ¡ˆã€ç­–ç•¥åŠéš¾ç‚¹é˜è¿°åˆ†åº“åˆ†è¡¨&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xicWYTSICzRsgbRXe9nDaFh5J0QIAEcTDN9eYPyn7PNv8hVk4WMozDjxkOaTiaibJsc7oe7FlIJGiaibDvfzC2qMCWA/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;åœ¨å­—æ®µå¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œæ‹†åˆ†å¼€ç¡®å®æ›´ä¾¿äºå¼€å‘å’Œç»´æŠ¤ï¼ˆç¬”è€…æ›¾è§è¿‡æŸä¸ªé—ç•™ç³»ç»Ÿä¸­ï¼Œä¸€ä¸ªå¤§è¡¨ä¸­åŒ…å«100å¤šåˆ—çš„ï¼‰ã€‚æŸç§æ„ä¹‰ä¸Šä¹Ÿèƒ½é¿å…â€œè·¨é¡µâ€çš„é—®é¢˜ï¼ˆMySQLã€MSSQLåº•å±‚éƒ½æ˜¯é€šè¿‡â€œæ•°æ®é¡µâ€æ¥å­˜å‚¨çš„ï¼Œâ€œè·¨é¡µâ€é—®é¢˜å¯èƒ½ä¼šé€ æˆé¢å¤–çš„æ€§èƒ½å¼€é”€ï¼Œè¿™é‡Œä¸å±•å¼€ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªè¡ŒæŸ¥é˜…ç›¸å…³èµ„æ–™è¿›è¡Œç ”ç©¶ï¼‰ã€‚&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;æ‹†åˆ†å­—æ®µçš„æ“ä½œå»ºè®®åœ¨æ•°æ®åº“è®¾è®¡é˜¶æ®µå°±åšå¥½ã€‚å¦‚æœæ˜¯åœ¨å‘å±•è¿‡ç¨‹ä¸­æ‹†åˆ†ï¼Œåˆ™éœ€è¦æ”¹å†™ä»¥å‰çš„æŸ¥è¯¢è¯­å¥ï¼Œä¼šé¢å¤–å¸¦æ¥ä¸€å®šçš„æˆæœ¬å’Œé£é™©ï¼Œå»ºè®®è°¨æ…ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;å‚ç›´åˆ†åº“æ˜¯æ ¹æ®æ•°æ®åº“é‡Œé¢çš„æ•°æ®è¡¨çš„ç›¸å…³æ€§è¿›è¡Œæ‹†åˆ†ï¼Œæ¯”å¦‚ï¼šä¸€ä¸ªæ•°æ®åº“é‡Œé¢æ—¢å­˜åœ¨ç”¨æˆ·æ•°æ®ï¼Œåˆå­˜åœ¨è®¢å•æ•°æ®ï¼Œé‚£ä¹ˆå‚ç›´æ‹†åˆ†å¯ä»¥æŠŠç”¨æˆ·æ•°æ®æ”¾åˆ°ç”¨æˆ·åº“ã€æŠŠè®¢å•æ•°æ®æ”¾åˆ°è®¢å•åº“ã€‚å‚ç›´åˆ†è¡¨æ˜¯å¯¹æ•°æ®è¡¨è¿›è¡Œå‚ç›´æ‹†åˆ†çš„ä¸€ç§æ–¹å¼ï¼Œå¸¸è§çš„æ˜¯æŠŠä¸€ä¸ªå¤šå­—æ®µçš„å¤§è¡¨æŒ‰å¸¸ç”¨å­—æ®µå’Œéå¸¸ç”¨å­—æ®µè¿›è¡Œæ‹†åˆ†ï¼Œæ¯ä¸ªè¡¨é‡Œé¢çš„æ•°æ®è®°å½•æ•°ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ç›¸åŒçš„ï¼Œåªæ˜¯å­—æ®µä¸ä¸€æ ·ï¼Œä½¿ç”¨ä¸»é”®å…³è”ã€‚&lt;/p&gt;&lt;p&gt;å¦å¤–ï¼Œåœ¨â€œå¾®æœåŠ¡â€ç››è¡Œçš„ä»Šå¤©å·²ç»éå¸¸æ™®åŠäº†ï¼ŒæŒ‰ç…§ä¸šåŠ¡æ¨¡å—æ¥åˆ’åˆ†å‡ºä¸åŒçš„æ•°æ®åº“ï¼Œä¹Ÿæ˜¯ä¸€ç§å‚ç›´æ‹†åˆ†ã€‚è€Œä¸æ˜¯åƒæ—©æœŸä¸€æ ·å°†æ‰€æœ‰çš„æ•°æ®è¡¨éƒ½æ”¾åˆ°åŒä¸€ä¸ªæ•°æ®åº“ä¸­ã€‚å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;1.029090909090909&quot; data-type=&quot;jpeg&quot; data-w=&quot;275&quot; title=&quot;ä»åŸåˆ™ã€æ–¹æ¡ˆã€ç­–ç•¥åŠéš¾ç‚¹é˜è¿°åˆ†åº“åˆ†è¡¨&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/xicWYTSICzRsgbRXe9nDaFh5J0QIAEcTDbD7pOq0vf7WibrjQEACJXKCiavwQ2gVl9VJcLBviaTn9jLfHTr39jjOEQ/640?wx_fmt=jpeg&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å‚ç›´æ‹†åˆ†ä¼˜ç‚¹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å‚ç›´æ‹†åˆ†ç¼ºç‚¹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å‚ç›´æ‹†åˆ†å°ç»“ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;ç³»ç»Ÿå±‚é¢çš„â€œæœåŠ¡åŒ–â€æ‹†åˆ†æ“ä½œï¼Œèƒ½å¤Ÿè§£å†³ä¸šåŠ¡ç³»ç»Ÿå±‚é¢çš„è€¦åˆå’Œæ€§èƒ½ç“¶é¢ˆï¼Œæœ‰åˆ©äºç³»ç»Ÿçš„æ‰©å±•ç»´æŠ¤ã€‚è€Œæ•°æ®åº“å±‚é¢çš„æ‹†åˆ†ï¼Œé“ç†ä¹Ÿæ˜¯ç›¸é€šçš„ã€‚ä¸æœåŠ¡çš„â€œæ²»ç†â€å’Œâ€œé™çº§â€æœºåˆ¶ç±»ä¼¼ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¯¹ä¸åŒä¸šåŠ¡ç±»å‹çš„æ•°æ®è¿›è¡Œâ€œåˆ†çº§â€ç®¡ç†ã€ç»´æŠ¤ã€ç›‘æ§ã€æ‰©å±•ç­‰ã€‚&lt;/p&gt;&lt;p&gt;ä¼—æ‰€å‘¨çŸ¥ï¼Œæ•°æ®åº“å¾€å¾€æœ€å®¹æ˜“æˆä¸ºåº”ç”¨ç³»ç»Ÿçš„ç“¶é¢ˆï¼Œè€Œæ•°æ®åº“æœ¬èº«å±äºâ€œæœ‰çŠ¶æ€â€çš„ï¼Œç›¸å¯¹äºWebå’Œåº”ç”¨æœåŠ¡å™¨æ¥è®²ï¼Œæ˜¯æ¯”è¾ƒéš¾å®ç°â€œæ¨ªå‘æ‰©å±•â€çš„ã€‚æ•°æ®åº“çš„è¿æ¥èµ„æºæ¯”è¾ƒå®è´µä¸”å•æœºå¤„ç†èƒ½åŠ›ä¹Ÿæœ‰é™ï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œå‚ç›´åˆ†åº“ä¸€å®šç¨‹åº¦ä¸Šèƒ½å¤Ÿçªç ´IOã€è¿æ¥æ•°åŠå•æœºç¡¬ä»¶èµ„æºçš„ç“¶é¢ˆï¼Œæ˜¯å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¼˜åŒ–æ•°æ®åº“æ¶æ„çš„é‡è¦æ‰‹æ®µã€‚&lt;/p&gt;&lt;p&gt;ç„¶åï¼Œå¾ˆå¤šäººå¹¶æ²¡æœ‰ä»æ ¹æœ¬ä¸Šææ¸…æ¥šä¸ºä»€ä¹ˆè¦æ‹†åˆ†ï¼Œä¹Ÿæ²¡æœ‰æŒæ¡æ‹†åˆ†çš„åŸåˆ™å’ŒæŠ€å·§ï¼Œåªæ˜¯ä¸€å‘³çš„æ¨¡ä»¿å¤§å‚çš„åšæ³•ã€‚å¯¼è‡´æ‹†åˆ†åé‡åˆ°å¾ˆå¤šé—®é¢˜ï¼ˆä¾‹å¦‚ï¼šè·¨åº“joinï¼Œåˆ†å¸ƒå¼äº‹åŠ¡ç­‰ï¼‰ã€‚&lt;/p&gt;&lt;p&gt;æ°´å¹³æ‹†åˆ†æ˜¯é€šè¿‡æŸç§ç­–ç•¥å°†æ•°æ®åˆ†ç‰‡æ¥å­˜å‚¨ï¼Œåˆ†ä¸ºåº“å†…åˆ†è¡¨å’Œåˆ†åº“åˆ†è¡¨ä¸¤éƒ¨åˆ†ï¼Œæ¯ç‰‡æ•°æ®ä¼šåˆ†æ•£åˆ°ä¸åŒçš„MySQLè¡¨æˆ–åº“ï¼Œè¾¾åˆ°åˆ†å¸ƒå¼çš„æ•ˆæœï¼Œèƒ½å¤Ÿæ”¯æŒéå¸¸å¤§çš„æ•°æ®é‡ã€‚&lt;/p&gt;&lt;p&gt;åº“å†…åˆ†è¡¨ï¼Œä»…ä»…æ˜¯å•çº¯çš„è§£å†³äº†å•ä¸€è¡¨æ•°æ®è¿‡å¤§çš„é—®é¢˜ï¼Œç”±äºæ²¡æœ‰æŠŠè¡¨çš„æ•°æ®åˆ†å¸ƒåˆ°ä¸åŒçš„æœºå™¨ä¸Šï¼Œå› æ­¤å¯¹äºå‡è½» MySQL æœåŠ¡å™¨çš„å‹åŠ›æ¥è¯´ï¼Œå¹¶æ²¡æœ‰å¤ªå¤§çš„ä½œç”¨ï¼Œå¤§å®¶è¿˜æ˜¯ç«äº‰åŒä¸€ä¸ªç‰©ç†æœºä¸Šçš„ IOã€CPUã€ç½‘ç»œï¼Œè¿™ä¸ªå°±è¦é€šè¿‡åˆ†åº“åˆ†è¡¨æ¥è§£å†³ã€‚&lt;/p&gt;&lt;p&gt;æœ€å¸¸è§çš„æ–¹å¼å°±æ˜¯é€šè¿‡ä¸»é”®æˆ–è€…æ—¶é—´ç­‰å­—æ®µè¿›è¡ŒHashå’Œå–æ¨¡åæ‹†åˆ†ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.4957983193277311&quot; data-type=&quot;png&quot; data-w=&quot;476&quot; title=&quot;ä»åŸåˆ™ã€æ–¹æ¡ˆã€ç­–ç•¥åŠéš¾ç‚¹é˜è¿°åˆ†åº“åˆ†è¡¨&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xicWYTSICzRsgbRXe9nDaFh5J0QIAEcTDMHrcgDklvUJfOknXbibhUl1wicbQxaiatuVjtibkvrlbMWNsaS1ibDHczLg/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;å½“ä¸‹åˆ†è¡¨æœ‰é™æ€åˆ†è¡¨å’ŒåŠ¨æ€åˆ†è¡¨ä¸¤ç§ï¼š&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é™æ€åˆ†è¡¨&lt;/span&gt;ï¼šäº‹å…ˆä¼°ç®—å‡ºè¡¨èƒ½è¾¾åˆ°çš„é‡ï¼Œç„¶åæ ¹æ®æ¯ä¸€ä¸ªè¡¨éœ€è¦å­˜å¤šå°‘æ•°æ®ç›´æ¥ç®—å‡ºéœ€è¦åˆ›å»ºè¡¨çš„æ•°é‡ã€‚å¦‚ï¼š1äº¿æ•°æ®æ¯ä¸€ä¸ªè¡¨100Wæ¡æ•°æ®é‚£å°±è¦å»º100å¼ è¡¨ï¼Œç„¶åé€šè¿‡ä¸€å®šçš„hashç®—æ³•è®¡ç®—æ¯ä¸€æ¡æ•°æ®å­˜æ”¾åœ¨é‚£å¼ è¡¨ã€‚å…¶å®å°±æœ‰ç‚¹åƒæ˜¯ä½¿ç”¨partition tableä¸€æ ·ã€‚é™æ€åˆ†è¡¨æœ‰ä¸€ä¸ªæ¯™å‘½å°±æ˜¯å½“åˆ†çš„é‚£ä¹ˆå¤šè¡¨è¿˜ä¸æ»¡è¶³æ—¶ï¼Œéœ€è¦å†æ‰©å±•éš¾åº¦å’Œæˆæœ¬å°±ä¼šå¾ˆé«˜ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;åŠ¨æ€åˆ†è¡¨&lt;/span&gt;ï¼šåŒæ ·ä¹Ÿæ˜¯å¯¹å¤§æ•°æ®é‡çš„è¡¨è¿›è¡Œæ‹†åˆ†ï¼Œä»–å¯ä»¥é¿å…é™æ€åˆ†è¡¨å¸¦æ¥çš„åé—ç—‡ã€‚å½“ç„¶ä¹Ÿéœ€è¦åœ¨è®¾è®¡ä¸Šå¤šä¸€äº›ä¸œè¥¿ï¼ˆè¿™å¾€å¾€æ˜¯æˆ‘ä»¬èƒ½æ¥å—çš„ï¼‰ã€‚&lt;/p&gt;&lt;p&gt;æŸç§æ„ä¹‰ä¸Šæ¥è®²ï¼Œæœ‰äº›ç³»ç»Ÿä¸­ä½¿ç”¨çš„â€œå†·çƒ­æ•°æ®åˆ†ç¦»â€ï¼ˆå°†ä¸€äº›ä½¿ç”¨è¾ƒå°‘çš„å†å²æ•°æ®è¿ç§»åˆ°å…¶ä»–çš„æ•°æ®åº“ä¸­ã€‚è€Œåœ¨ä¸šåŠ¡åŠŸèƒ½ä¸Šï¼Œé€šå¸¸é»˜è®¤åªæä¾›çƒ­ç‚¹æ•°æ®çš„æŸ¥è¯¢ï¼‰ï¼Œä¹Ÿæ˜¯ç±»ä¼¼çš„å®è·µã€‚åœ¨é«˜å¹¶å‘å’Œæµ·é‡æ•°æ®çš„åœºæ™¯ä¸‹ï¼Œåˆ†åº“åˆ†è¡¨èƒ½å¤Ÿæœ‰æ•ˆç¼“è§£å•æœºå’Œå•åº“çš„æ€§èƒ½ç“¶é¢ˆå’Œå‹åŠ›ï¼Œçªç ´IOã€è¿æ¥æ•°ã€ç¡¬ä»¶èµ„æºçš„ç“¶é¢ˆã€‚å½“ç„¶ï¼ŒæŠ•å…¥çš„ç¡¬ä»¶æˆæœ¬ä¹Ÿä¼šæ›´é«˜ã€‚åŒæ—¶ï¼Œè¿™ä¹Ÿä¼šå¸¦æ¥ä¸€äº›å¤æ‚çš„æŠ€æœ¯é—®é¢˜å’ŒæŒ‘æˆ˜ï¼ˆä¾‹å¦‚ï¼šè·¨åˆ†ç‰‡çš„å¤æ‚æŸ¥è¯¢ï¼Œè·¨åˆ†ç‰‡äº‹åŠ¡ç­‰ï¼‰ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ°´å¹³æ‹†åˆ†ä¼˜ç‚¹:&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;ä¸å­˜åœ¨å•åº“å¤§æ•°æ®å’Œé«˜å¹¶å‘çš„æ€§èƒ½ç“¶é¢ˆã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;åº”ç”¨ç«¯æ”¹é€ è¾ƒå°‘ã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;æé«˜äº†ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œè´Ÿè½½èƒ½åŠ›ã€‚&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;span&gt;æ°´å¹³æ‹†åˆ†ç¼ºç‚¹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;åˆ†ç‰‡äº‹åŠ¡ä¸€è‡´æ€§éš¾ä»¥è§£å†³ã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;è·¨èŠ‚ç‚¹ Join æ€§èƒ½å·®ï¼Œé€»è¾‘å¤æ‚ã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;æ•°æ®å¤šæ¬¡æ‰©å±•éš¾åº¦è·Ÿç»´æŠ¤é‡æå¤§ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;ä¸‰ã€åˆ†åº“åˆ†è¡¨éš¾ç‚¹&lt;/h3&gt;&lt;p&gt;å‚ç›´åˆ†åº“å¸¦æ¥çš„é—®é¢˜å’Œè§£å†³æ€è·¯ï¼š&lt;/p&gt;&lt;p&gt;åœ¨æ‹†åˆ†ä¹‹å‰ï¼Œç³»ç»Ÿä¸­å¾ˆå¤šåˆ—è¡¨å’Œè¯¦æƒ…é¡µæ‰€éœ€çš„æ•°æ®æ˜¯å¯ä»¥é€šè¿‡sql joinæ¥å®Œæˆçš„ã€‚è€Œæ‹†åˆ†åï¼Œæ•°æ®åº“å¯èƒ½æ˜¯åˆ†å¸ƒå¼åœ¨ä¸åŒå®ä¾‹å’Œä¸åŒçš„ä¸»æœºä¸Šï¼Œjoinå°†å˜å¾—éå¸¸éº»çƒ¦ã€‚è€Œä¸”åŸºäºæ¶æ„è§„èŒƒï¼Œæ€§èƒ½ï¼Œå®‰å…¨æ€§ç­‰æ–¹é¢è€ƒè™‘ï¼Œä¸€èˆ¬æ˜¯ç¦æ­¢è·¨åº“joinçš„ã€‚é‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿé¦–å…ˆè¦è€ƒè™‘ä¸‹å‚ç›´åˆ†åº“çš„è®¾è®¡é—®é¢˜ï¼Œå¦‚æœå¯ä»¥è°ƒæ•´ï¼Œé‚£å°±ä¼˜å…ˆè°ƒæ•´ã€‚å¦‚æœæ— æ³•è°ƒæ•´çš„æƒ…å†µï¼Œä¸‹é¢ç¬”è€…å°†ç»“åˆä»¥å¾€çš„å®é™…ç»éªŒï¼Œæ€»ç»“å‡ ç§å¸¸è§çš„è§£å†³æ€è·¯ï¼Œå¹¶åˆ†æå…¶é€‚ç”¨åœºæ™¯ã€‚&lt;/p&gt;&lt;p&gt;è·¨åº“Joinçš„å‡ ç§è§£å†³æ€è·¯&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å…¨å±€è¡¨&lt;/span&gt;&lt;/p&gt;&lt;p&gt;æ‰€è°“å…¨å±€è¡¨ï¼Œå°±æ˜¯æœ‰å¯èƒ½ç³»ç»Ÿä¸­æ‰€æœ‰æ¨¡å—éƒ½å¯èƒ½ä¼šä¾èµ–åˆ°çš„ä¸€äº›è¡¨ã€‚æ¯”è¾ƒç±»ä¼¼æˆ‘ä»¬ç†è§£çš„â€œæ•°æ®å­—å…¸â€ã€‚ä¸ºäº†é¿å…è·¨åº“joinæŸ¥è¯¢ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ç±»è¡¨åœ¨å…¶ä»–æ¯ä¸ªæ•°æ®åº“ä¸­å‡ä¿å­˜ä¸€ä»½ã€‚åŒæ—¶ï¼Œè¿™ç±»æ•°æ®é€šå¸¸ä¹Ÿå¾ˆå°‘å‘ç”Ÿä¿®æ”¹ï¼ˆç”šè‡³å‡ ä¹ä¸ä¼šï¼‰ï¼Œæ‰€ä»¥ä¹Ÿä¸ç”¨å¤ªæ‹…å¿ƒâ€œä¸€è‡´æ€§â€é—®é¢˜ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;å­—æ®µå†—ä½™&lt;/span&gt;&lt;/p&gt;&lt;p&gt;è¿™æ˜¯ä¸€ç§å…¸å‹çš„åèŒƒå¼è®¾è®¡ï¼Œåœ¨äº’è”ç½‘è¡Œä¸šä¸­æ¯”è¾ƒå¸¸è§ï¼Œé€šå¸¸æ˜¯ä¸ºäº†æ€§èƒ½æ¥é¿å…joinæŸ¥è¯¢ã€‚&lt;/p&gt;&lt;p&gt;ä¸¾ä¸ªç”µå•†ä¸šåŠ¡ä¸­å¾ˆç®€å•çš„åœºæ™¯ï¼šâ€œè®¢å•è¡¨â€ä¸­ä¿å­˜â€œå–å®¶Idâ€çš„åŒæ—¶ï¼Œå°†å–å®¶çš„â€œNameâ€å­—æ®µä¹Ÿå†—ä½™ï¼Œè¿™æ ·æŸ¥è¯¢è®¢å•è¯¦æƒ…çš„æ—¶å€™å°±ä¸éœ€è¦å†å»æŸ¥è¯¢â€œå–å®¶ç”¨æˆ·è¡¨â€ã€‚&lt;/p&gt;&lt;p&gt;å­—æ®µå†—ä½™èƒ½å¸¦æ¥ä¾¿åˆ©ï¼Œæ˜¯ä¸€ç§â€œç©ºé—´æ¢æ—¶é—´â€çš„ä½“ç°ã€‚ä½†å…¶é€‚ç”¨åœºæ™¯ä¹Ÿæ¯”è¾ƒæœ‰é™ï¼Œæ¯”è¾ƒé€‚åˆä¾èµ–å­—æ®µè¾ƒå°‘çš„æƒ…å†µã€‚æœ€å¤æ‚çš„è¿˜æ˜¯æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œè¿™ç‚¹å¾ˆéš¾ä¿è¯ï¼Œå¯ä»¥å€ŸåŠ©æ•°æ®åº“ä¸­çš„è§¦å‘å™¨æˆ–è€…åœ¨ä¸šåŠ¡ä»£ç å±‚é¢å»ä¿è¯ã€‚å½“ç„¶ï¼Œä¹Ÿéœ€è¦ç»“åˆå®é™…ä¸šåŠ¡åœºæ™¯æ¥çœ‹ä¸€è‡´æ€§çš„è¦æ±‚ã€‚å°±åƒä¸Šé¢ä¾‹å­ï¼Œå¦‚æœå–å®¶ä¿®æ”¹äº†Nameä¹‹åï¼Œæ˜¯å¦éœ€è¦åœ¨è®¢å•ä¿¡æ¯ä¸­åŒæ­¥æ›´æ–°å‘¢ï¼Ÿ&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ•°æ®åŒæ­¥&lt;/span&gt;&lt;/p&gt;&lt;p&gt;å®šæ—¶Aåº“ä¸­çš„tab_aè¡¨å’ŒBåº“ä¸­tbl_bæœ‰å…³è”ï¼Œå¯ä»¥å®šæ—¶å°†æŒ‡å®šçš„è¡¨åšåŒæ­¥ã€‚å½“ç„¶ï¼ŒåŒæ­¥æœ¬æ¥ä¼šå¯¹æ•°æ®åº“å¸¦æ¥ä¸€å®šçš„å½±å“ï¼Œéœ€è¦æ€§èƒ½å½±å“å’Œæ•°æ®æ—¶æ•ˆæ€§ä¸­å–å¾—ä¸€ä¸ªå¹³è¡¡ã€‚è¿™æ ·æ¥é¿å…å¤æ‚çš„è·¨åº“æŸ¥è¯¢ã€‚ç¬”è€…æ›¾ç»åœ¨é¡¹ç›®ä¸­æ˜¯é€šè¿‡ETLå·¥å…·æ¥å®æ–½çš„ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç³»ç»Ÿå±‚ç»„è£…&lt;/span&gt;&lt;/p&gt;&lt;p&gt;åœ¨ç³»ç»Ÿå±‚é¢ï¼Œé€šè¿‡è°ƒç”¨ä¸åŒæ¨¡å—çš„ç»„ä»¶æˆ–è€…æœåŠ¡ï¼Œè·å–åˆ°æ•°æ®å¹¶è¿›è¡Œå­—æ®µæ‹¼è£…ã€‚è¯´èµ·æ¥å¾ˆå®¹æ˜“ï¼Œä½†å®è·µèµ·æ¥å¯çœŸæ²¡æœ‰è¿™ä¹ˆç®€å•ï¼Œå°¤å…¶æ˜¯æ•°æ®åº“è®¾è®¡ä¸Šå­˜åœ¨é—®é¢˜ä½†åˆæ— æ³•è½»æ˜“è°ƒæ•´çš„æ—¶å€™ã€‚å…·ä½“æƒ…å†µé€šå¸¸ä¼šæ¯”è¾ƒå¤æ‚ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æŒ‰ä¸šåŠ¡æ‹†åˆ†æ•°æ®åº“ä¹‹åï¼Œä¸å¯é¿å…çš„å°±æ˜¯â€œåˆ†å¸ƒå¼äº‹åŠ¡â€çš„é—®é¢˜ã€‚æƒ³è¦äº†è§£åˆ†å¸ƒå¼äº‹åŠ¡ï¼Œå°±éœ€è¦äº†è§£â€œXAæ¥å£â€å’Œâ€œä¸¤é˜¶æ®µæäº¤â€ã€‚å€¼å¾—æåˆ°çš„æ˜¯ï¼ŒMySQL5.5xå’Œ5.6xä¸­çš„xaæ”¯æŒæ˜¯å­˜åœ¨é—®é¢˜çš„ï¼Œä¼šå¯¼è‡´ä¸»ä»æ•°æ®ä¸ä¸€è‡´ã€‚ç›´åˆ°5.7xç‰ˆæœ¬ä¸­æ‰å¾—åˆ°ä¿®å¤ã€‚Javaåº”ç”¨ç¨‹åºå¯ä»¥é‡‡ç”¨Atomikosæ¡†æ¶æ¥å®ç°XAäº‹åŠ¡ï¼ˆJ2EEä¸­JTAï¼‰ã€‚æ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥è‡ªè¡Œå‚è€ƒã€Šåˆ†å¸ƒå¼äº‹åŠ¡ä¸€è‡´æ€§è§£å†³æ–¹æ¡ˆã€‹ï¼Œé“¾æ¥åœ°å€ï¼šhttp://www.infoq.com/cn/articles/solution-of-distributed-system-transaction-consistency&lt;/p&gt;&lt;h3&gt;å››ã€å¸¸è§åˆ†ç‰‡è§„åˆ™å’Œç­–ç•¥&lt;/h3&gt;&lt;p&gt;åœ¨å¾ˆå¤šä¸­å°é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¾€å¾€ç›´æ¥ä½¿ç”¨æ•°æ®åº“è‡ªå¢ç‰¹æ€§æ¥ç”Ÿæˆä¸»é”®IDï¼Œè¿™æ ·ç¡®å®æ¯”è¾ƒç®€å•ã€‚è€Œåœ¨åˆ†åº“åˆ†è¡¨çš„ç¯å¢ƒä¸­ï¼Œæ•°æ®åˆ†å¸ƒåœ¨ä¸åŒçš„åˆ†ç‰‡ä¸Šï¼Œä¸èƒ½å†å€ŸåŠ©æ•°æ®åº“è‡ªå¢é•¿ç‰¹æ€§ç›´æ¥ç”Ÿæˆï¼Œå¦åˆ™ä¼šé€ æˆä¸åŒåˆ†ç‰‡ä¸Šçš„æ•°æ®è¡¨ä¸»é”®ä¼šé‡å¤ã€‚ç®€å•ä»‹ç»ä¸‹ä½¿ç”¨å’Œäº†è§£è¿‡çš„å‡ ç§IDç”Ÿæˆç®—æ³•ã€‚&lt;/p&gt;&lt;p&gt;1. Twitterçš„Snowflakeï¼ˆåˆåâ€œé›ªèŠ±ç®—æ³•â€ï¼‰&lt;/p&gt;&lt;p&gt;2. UUID/GUIDï¼ˆä¸€èˆ¬åº”ç”¨ç¨‹åºå’Œæ•°æ®åº“å‡æ”¯æŒï¼‰&lt;/p&gt;&lt;p&gt;3. MongoDB ObjectIDï¼ˆç±»ä¼¼UUIDçš„æ–¹å¼ï¼‰&lt;/p&gt;&lt;p&gt;4. Ticket Serverï¼ˆæ•°æ®åº“ç”Ÿå­˜æ–¹å¼ï¼ŒFlickré‡‡ç”¨çš„å°±æ˜¯è¿™ç§æ–¹å¼ï¼‰&lt;/p&gt;&lt;p&gt;å…¶ä¸­ï¼ŒTwitterçš„Snowflakeç®—æ³•æ˜¯è¿‘å‡ å¹´åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿé¡¹ç›®ä¸­ä½¿ç”¨æœ€å¤šçš„ï¼Œæœªå‘ç°é‡å¤æˆ–å¹¶å‘çš„é—®é¢˜ã€‚è¯¥ç®—æ³•ç”Ÿæˆçš„æ˜¯64ä½å”¯ä¸€Idï¼ˆç”±41ä½çš„timestamp+10ä½è‡ªå®šä¹‰çš„æœºå™¨ç +13ä½ç´¯åŠ è®¡æ•°å™¨ç»„æˆï¼‰ã€‚è¿™é‡Œä¸åšè¿‡å¤šä»‹ç»ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯è‡ªè¡ŒæŸ¥é˜…ç›¸å…³èµ„æ–™ã€‚&lt;/p&gt;&lt;p&gt;åœ¨å¼€å§‹åˆ†ç‰‡ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆè¦ç¡®å®šåˆ†ç‰‡å­—æ®µï¼ˆä¹Ÿå¯ç§°ä¸ºâ€œç‰‡é”®â€ï¼‰ã€‚å¾ˆå¤šå¸¸è§çš„ä¾‹å­å’Œåœºæ™¯ä¸­æ˜¯é‡‡ç”¨IDæˆ–è€…æ—¶é—´å­—æ®µè¿›è¡Œæ‹†åˆ†ã€‚è¿™ä¹Ÿå¹¶ä¸ç»å¯¹çš„ï¼Œæˆ‘çš„å»ºè®®æ˜¯ç»“åˆå®é™…ä¸šåŠ¡ï¼Œé€šè¿‡å¯¹ç³»ç»Ÿä¸­æ‰§è¡Œçš„sqlè¯­å¥è¿›è¡Œç»Ÿè®¡åˆ†æï¼Œé€‰æ‹©å‡ºéœ€è¦åˆ†ç‰‡çš„é‚£ä¸ªè¡¨ä¸­æœ€é¢‘ç¹è¢«ä½¿ç”¨ï¼Œæˆ–è€…æœ€é‡è¦çš„å­—æ®µæ¥ä½œä¸ºåˆ†ç‰‡å­—æ®µã€‚&lt;/p&gt;&lt;p&gt;å¸¸è§çš„åˆ†ç‰‡ç­–ç•¥æœ‰éšæœºåˆ†ç‰‡å’Œè¿ç»­åˆ†ç‰‡è¿™ä¸¤ç§ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.506398537477148&quot; data-type=&quot;jpeg&quot; data-w=&quot;547&quot; title=&quot;ä»åŸåˆ™ã€æ–¹æ¡ˆã€ç­–ç•¥åŠéš¾ç‚¹é˜è¿°åˆ†åº“åˆ†è¡¨&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/xicWYTSICzRsgbRXe9nDaFh5J0QIAEcTDUC3GhVicSfS8yXibNjVFNrbVCanBaqmwMHv76plJuxTiaSWicice8q4oqxQ/640?wx_fmt=jpeg&quot;/&gt;&lt;/p&gt;&lt;p&gt;å½“éœ€è¦ä½¿ç”¨åˆ†ç‰‡å­—æ®µè¿›è¡ŒèŒƒå›´æŸ¥æ‰¾æ—¶ï¼Œè¿ç»­åˆ†ç‰‡å¯ä»¥å¿«é€Ÿå®šä½åˆ†ç‰‡è¿›è¡Œé«˜æ•ˆæŸ¥è¯¢ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹å¯ä»¥æœ‰æ•ˆé¿å…è·¨åˆ†ç‰‡æŸ¥è¯¢çš„é—®é¢˜ã€‚åæœŸå¦‚æœæƒ³å¯¹æ•´ä¸ªåˆ†ç‰‡é›†ç¾¤æ‰©å®¹æ—¶ï¼Œåªéœ€è¦æ·»åŠ èŠ‚ç‚¹å³å¯ï¼Œæ— éœ€å¯¹å…¶ä»–åˆ†ç‰‡çš„æ•°æ®è¿›è¡Œè¿ç§»ã€‚ä½†æ˜¯ï¼Œè¿ç»­åˆ†ç‰‡ä¹Ÿæœ‰å¯èƒ½å­˜åœ¨æ•°æ®çƒ­ç‚¹çš„é—®é¢˜ï¼Œå°±åƒå›¾ä¸­æŒ‰æ—¶é—´å­—æ®µåˆ†ç‰‡çš„ä¾‹å­ï¼Œæœ‰äº›èŠ‚ç‚¹å¯èƒ½ä¼šè¢«é¢‘ç¹æŸ¥è¯¢å‹åŠ›è¾ƒå¤§ï¼Œçƒ­æ•°æ®èŠ‚ç‚¹å°±æˆä¸ºäº†æ•´ä¸ªé›†ç¾¤çš„ç“¶é¢ˆã€‚è€Œæœ‰äº›èŠ‚ç‚¹å¯èƒ½å­˜çš„æ˜¯å†å²æ•°æ®ï¼Œå¾ˆå°‘éœ€è¦è¢«æŸ¥è¯¢åˆ°ã€‚&lt;/p&gt;&lt;p&gt;éšæœºåˆ†ç‰‡å…¶å®å¹¶ä¸æ˜¯éšæœºçš„ï¼Œä¹Ÿéµå¾ªä¸€å®šè§„åˆ™ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬ä¼šé‡‡ç”¨Hashå–æ¨¡çš„æ–¹å¼è¿›è¡Œåˆ†ç‰‡æ‹†åˆ†ï¼Œæ‰€ä»¥æœ‰äº›æ—¶å€™ä¹Ÿè¢«ç§°ä¸ºç¦»æ•£åˆ†ç‰‡ã€‚éšæœºåˆ†ç‰‡çš„æ•°æ®ç›¸å¯¹æ¯”è¾ƒå‡åŒ€ï¼Œä¸å®¹æ˜“å‡ºç°çƒ­ç‚¹å’Œå¹¶å‘è®¿é—®çš„ç“¶é¢ˆã€‚ä½†æ˜¯ï¼ŒåæœŸåˆ†ç‰‡é›†ç¾¤æ‰©å®¹èµ·æ¥éœ€è¦è¿ç§»æ—§çš„æ•°æ®ã€‚ä½¿ç”¨ä¸€è‡´æ€§Hashç®—æ³•èƒ½å¤Ÿå¾ˆå¤§ç¨‹åº¦çš„é¿å…è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥å¾ˆå¤šä¸­é—´ä»¶çš„åˆ†ç‰‡é›†ç¾¤éƒ½ä¼šé‡‡ç”¨ä¸€è‡´æ€§Hashç®—æ³•ã€‚ç¦»æ•£åˆ†ç‰‡ä¹Ÿå¾ˆå®¹æ˜“é¢ä¸´è·¨åˆ†ç‰‡æŸ¥è¯¢çš„å¤æ‚é—®é¢˜ã€‚&lt;/p&gt;&lt;p&gt;å¾ˆå°‘æœ‰é¡¹ç›®ä¼šåœ¨åˆæœŸå°±å¼€å§‹è€ƒè™‘åˆ†ç‰‡è®¾è®¡çš„ï¼Œä¸€èˆ¬éƒ½æ˜¯åœ¨ä¸šåŠ¡é«˜é€Ÿå‘å±•é¢ä¸´æ€§èƒ½å’Œå­˜å‚¨çš„ç“¶é¢ˆæ—¶æ‰ä¼šæå‰å‡†å¤‡ã€‚å› æ­¤ï¼Œä¸å¯é¿å…çš„å°±éœ€è¦è€ƒè™‘å†å²æ•°æ®è¿ç§»çš„é—®é¢˜ã€‚ä¸€èˆ¬åšæ³•å°±æ˜¯é€šè¿‡ç¨‹åºå…ˆè¯»å‡ºå†å²æ•°æ®ï¼Œç„¶åæŒ‰ç…§æŒ‡å®šçš„åˆ†ç‰‡è§„åˆ™å†å°†æ•°æ®å†™å…¥åˆ°å„ä¸ªåˆ†ç‰‡èŠ‚ç‚¹ä¸­ã€‚&lt;/p&gt;&lt;p&gt;æ­¤å¤–ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®å½“å‰çš„æ•°æ®é‡å’ŒQPSç­‰è¿›è¡Œå®¹é‡è§„åˆ’ï¼Œç»¼åˆæˆæœ¬å› ç´ ï¼Œæ¨ç®—å‡ºå¤§æ¦‚éœ€è¦å¤šå°‘åˆ†ç‰‡ï¼ˆä¸€èˆ¬å»ºè®®å•ä¸ªåˆ†ç‰‡ä¸Šçš„å•è¡¨æ•°æ®é‡ä¸è¦è¶…è¿‡1000Wï¼‰ã€‚&lt;/p&gt;&lt;p&gt;å¦‚æœæ˜¯é‡‡ç”¨éšæœºåˆ†ç‰‡ï¼Œåˆ™éœ€è¦è€ƒè™‘åæœŸçš„æ‰©å®¹é—®é¢˜ï¼Œç›¸å¯¹ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚å¦‚æœæ˜¯é‡‡ç”¨çš„èŒƒå›´åˆ†ç‰‡ï¼Œåªéœ€è¦æ·»åŠ èŠ‚ç‚¹å°±å¯ä»¥è‡ªåŠ¨æ‰©å®¹ã€‚&lt;/p&gt;&lt;h3&gt;äº”ã€è·¨åˆ†ç‰‡æŠ€æœ¯é—®é¢˜&lt;/h3&gt;&lt;p&gt;ä¸€èˆ¬æ¥è®²ï¼Œåˆ†é¡µæ—¶éœ€è¦æŒ‰ç…§æŒ‡å®šå­—æ®µè¿›è¡Œæ’åºã€‚å½“æ’åºå­—æ®µå°±æ˜¯åˆ†ç‰‡å­—æ®µçš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šè¿‡åˆ†ç‰‡è§„åˆ™å¯ä»¥æ¯”è¾ƒå®¹æ˜“å®šä½åˆ°æŒ‡å®šçš„åˆ†ç‰‡ï¼Œè€Œå½“æ’åºå­—æ®µéåˆ†ç‰‡å­—æ®µçš„æ—¶å€™ï¼Œæƒ…å†µå°±ä¼šå˜å¾—æ¯”è¾ƒå¤æ‚äº†ã€‚ä¸ºäº†æœ€ç»ˆç»“æœçš„å‡†ç¡®æ€§ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸åŒçš„åˆ†ç‰‡èŠ‚ç‚¹ä¸­å°†æ•°æ®è¿›è¡Œæ’åºå¹¶è¿”å›ï¼Œå¹¶å°†ä¸åŒåˆ†ç‰‡è¿”å›çš„ç»“æœé›†è¿›è¡Œæ±‡æ€»å’Œå†æ¬¡æ’åºï¼Œæœ€åå†è¿”å›ç»™ç”¨æˆ·ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.7132987910189983&quot; data-type=&quot;jpeg&quot; data-w=&quot;579&quot; title=&quot;ä»åŸåˆ™ã€æ–¹æ¡ˆã€ç­–ç•¥åŠéš¾ç‚¹é˜è¿°åˆ†åº“åˆ†è¡¨&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/xicWYTSICzRsgbRXe9nDaFh5J0QIAEcTDSXEBu5MEVia6XQad3S1moMialPJtYMZ38IXNrFCDQcKBdOdthicGtdcqw/640?wx_fmt=jpeg&quot;/&gt;&lt;/p&gt;&lt;p&gt;ä¸Šé¢å›¾ä¸­æ‰€æè¿°çš„åªæ˜¯æœ€ç®€å•çš„ä¸€ç§æƒ…å†µï¼ˆå–ç¬¬ä¸€é¡µæ•°æ®ï¼‰ï¼Œçœ‹èµ·æ¥å¯¹æ€§èƒ½çš„å½±å“å¹¶ä¸å¤§ã€‚ä½†æ˜¯ï¼Œå¦‚æœæƒ³å–å‡ºç¬¬10é¡µæ•°æ®ï¼Œæƒ…å†µåˆå°†å˜å¾—å¤æ‚å¾ˆå¤šï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.6968085106382979&quot; data-type=&quot;jpeg&quot; data-w=&quot;564&quot; title=&quot;ä»åŸåˆ™ã€æ–¹æ¡ˆã€ç­–ç•¥åŠéš¾ç‚¹é˜è¿°åˆ†åº“åˆ†è¡¨&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/xicWYTSICzRsgbRXe9nDaFh5J0QIAEcTDLdXh084mBEicGGQQY3eD2cXhEuvgSddibs0JQOSsibbw5f4vDhHQt4pvw/640?wx_fmt=jpeg&quot;/&gt;&lt;/p&gt;&lt;p&gt;æœ‰äº›è¯»è€…å¯èƒ½å¹¶ä¸å¤ªç†è§£ï¼Œä¸ºä»€ä¹ˆä¸èƒ½åƒè·å–ç¬¬ä¸€é¡µæ•°æ®é‚£æ ·ç®€å•å¤„ç†ï¼ˆæ’åºå–å‡ºå‰10æ¡å†åˆå¹¶ã€æ’åºï¼‰ã€‚å…¶å®å¹¶ä¸éš¾ç†è§£ï¼Œå› ä¸ºå„åˆ†ç‰‡èŠ‚ç‚¹ä¸­çš„æ•°æ®å¯èƒ½æ˜¯éšæœºçš„ï¼Œä¸ºäº†æ’åºçš„å‡†ç¡®æ€§ï¼Œå¿…é¡»æŠŠæ‰€æœ‰åˆ†ç‰‡èŠ‚ç‚¹çš„å‰Né¡µæ•°æ®éƒ½æ’åºå¥½ååšåˆå¹¶ï¼Œæœ€åå†è¿›è¡Œæ•´ä½“çš„æ’åºã€‚å¾ˆæ˜¾ç„¶ï¼Œè¿™æ ·çš„æ“ä½œæ˜¯æ¯”è¾ƒæ¶ˆè€—èµ„æºçš„ï¼Œç”¨æˆ·è¶Šå¾€åç¿»é¡µï¼Œç³»ç»Ÿæ€§èƒ½å°†ä¼šè¶Šå·®ã€‚&lt;/p&gt;&lt;p&gt;åœ¨ä½¿ç”¨Maxã€Minã€Sumã€Countä¹‹ç±»çš„å‡½æ•°è¿›è¡Œç»Ÿè®¡å’Œè®¡ç®—çš„æ—¶å€™ï¼Œéœ€è¦å…ˆåœ¨æ¯ä¸ªåˆ†ç‰‡æ•°æ®æºä¸Šæ‰§è¡Œç›¸åº”çš„å‡½æ•°å¤„ç†ï¼Œç„¶åå†å°†å„ä¸ªç»“æœé›†è¿›è¡ŒäºŒæ¬¡å¤„ç†ï¼Œæœ€ç»ˆå†å°†å¤„ç†ç»“æœè¿”å›ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.704225352112676&quot; data-type=&quot;jpeg&quot; data-w=&quot;568&quot; title=&quot;ä»åŸåˆ™ã€æ–¹æ¡ˆã€ç­–ç•¥åŠéš¾ç‚¹é˜è¿°åˆ†åº“åˆ†è¡¨&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/xicWYTSICzRsgbRXe9nDaFh5J0QIAEcTDN42Cn2vIhr32EvyuTEvz0r1x3cTVIRW18ZK0Qibiab1NaqhSqz3XeQuA/640?wx_fmt=jpeg&quot;/&gt;&lt;/p&gt;&lt;section data-recommend-type=&quot;list-title&quot; data-recommend-tid=&quot;8&quot; data-mpa-template=&quot;t&quot; data-mid=&quot;&quot; data-from=&quot;yb-recommend&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;å¾€æœŸæ¨è&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-title&quot; data-recomment-template-id=&quot;8&quot; data-recommend-article-id=&quot;2247486047_1&quot; data-recommend-article-time=&quot;1612135800&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/xicWYTSICzRuaItggtTicnNvgdK94EDNzNP5572L0GQXnDiaibU6MAlS6V4qSOMclzZ8kkbRJHuRicFians72Y9SQUvw/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;æ—¶åºæ•°æ®åº“InfluxDBå¼•æ“æµ…æ&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=MzU2NDc4MjE2Ng==&amp;amp;mid=2247486047&amp;amp;idx=1&amp;amp;sn=0001f4326790dd93014bfd342c90fb41&amp;amp;chksm=fc44ff66cb337670354c4ed1e0e4bb362e1f97b909c0d2ba27214fcd32de284b1d22e110f48f#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU2NDc4MjE2Ng==&amp;amp;mid=2247486047&amp;amp;idx=1&amp;amp;sn=0001f4326790dd93014bfd342c90fb41&amp;amp;chksm=fc44ff66cb337670354c4ed1e0e4bb362e1f97b909c0d2ba27214fcd32de284b1d22e110f48f&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;section data-recommend-title=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;æ—¶åºæ•°æ®åº“InfluxDBå¼•æ“æµ…æ&lt;/p&gt;&lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-title&quot; data-recomment-template-id=&quot;8&quot; data-recommend-article-id=&quot;2247485965_1&quot; data-recommend-article-time=&quot;1612049400&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/xicWYTSICzRuw1laYB5sHPMO13k4yQibogNnI8rcuhHwev6FoeKdVdINnM8HZ7icia30pJRFVMhVzf2ry8nEEhLjkg/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;ç²¾é«“ï¼æ·±å…¥æµ…å‡ºå‰–æ12ä¸ªZookeeperçŸ¥è¯†ç‚¹&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=MzU2NDc4MjE2Ng==&amp;amp;mid=2247485965&amp;amp;idx=1&amp;amp;sn=98927d2f8845948c18930a639d01c211&amp;amp;chksm=fc44ff34cb337622d4a2ba8c39bb06f3ab4cc4ab32c6fab6dbef6365363b945ef5664820db7c#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU2NDc4MjE2Ng==&amp;amp;mid=2247485965&amp;amp;idx=1&amp;amp;sn=98927d2f8845948c18930a639d01c211&amp;amp;chksm=fc44ff34cb337622d4a2ba8c39bb06f3ab4cc4ab32c6fab6dbef6365363b945ef5664820db7c&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;section data-recommend-title=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;ç²¾é«“ï¼æ·±å…¥æµ…å‡ºå‰–æ12ä¸ªZookeeperçŸ¥è¯†ç‚¹&lt;/p&gt;&lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-title&quot; data-recomment-template-id=&quot;8&quot; data-recommend-article-id=&quot;2247485952_1&quot; data-recommend-article-time=&quot;1611963000&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/xicWYTSICzRuw1laYB5sHPMO13k4yQibogWjQvedIKwykOr5REqhnaHFUeicptxnssnuod6854H0GhTRSeQOD8dqA/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;åˆ†ä¸æ¸…ARMå’ŒX86æ¶æ„ï¼Œæ¥çœ‹çœ‹æœåŠ¡å™¨çš„äº§å“å½¢æ€&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=MzU2NDc4MjE2Ng==&amp;amp;mid=2247485952&amp;amp;idx=1&amp;amp;sn=840512fbd429fae2d6798ecbcee1d43e&amp;amp;chksm=fc44ff39cb33762fb912485cd5a3f94062a4a21f712092caedd6c00989da48cbdad2ee60cb05#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU2NDc4MjE2Ng==&amp;amp;mid=2247485952&amp;amp;idx=1&amp;amp;sn=840512fbd429fae2d6798ecbcee1d43e&amp;amp;chksm=fc44ff39cb33762fb912485cd5a3f94062a4a21f712092caedd6c00989da48cbdad2ee60cb05&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;section data-recommend-title=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;åˆ†ä¸æ¸…ARMå’ŒX86æ¶æ„ï¼Œæ¥çœ‹çœ‹æœåŠ¡å™¨çš„äº§å“å½¢æ€&lt;/p&gt;&lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-title&quot; data-recomment-template-id=&quot;8&quot; data-recommend-article-id=&quot;2247485732_1&quot; data-recommend-article-time=&quot;1611876600&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/xicWYTSICzRsPwWe9ws9b1eZv1kGseImPMYrrenEhpfSmxicBNR3GFa1JIacnF81eOJDYBb2pe7jRhG6yCWEvTAg/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;å…¨é¢è®¤è¯†OpenStackæ¶æ„&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=MzU2NDc4MjE2Ng==&amp;amp;mid=2247485732&amp;amp;idx=1&amp;amp;sn=86b955de280cfee3c22bdd83489b6e5e&amp;amp;chksm=fc44fc1dcb33750b737127bfb2c3846152f27036accb2192fe702bf86c9a5b08854e79608586#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU2NDc4MjE2Ng==&amp;amp;mid=2247485732&amp;amp;idx=1&amp;amp;sn=86b955de280cfee3c22bdd83489b6e5e&amp;amp;chksm=fc44fc1dcb33750b737127bfb2c3846152f27036accb2192fe702bf86c9a5b08854e79608586&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;section data-recommend-title=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;å…¨é¢è®¤è¯†OpenStackæ¶æ„&lt;/p&gt;&lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-title&quot; data-recomment-template-id=&quot;8&quot; data-recommend-article-id=&quot;2247485657_1&quot; data-recommend-article-time=&quot;1611790200&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/xicWYTSICzRuEo5gyxME0m1UvDjzp5Uibwiamydfnj9dh0vU4hoYvReZSPKPacq9v3iaiciazicfHdCYialtBuVib4fP69g/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;MACè®¤è¯æŠ€æœ¯&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=MzU2NDc4MjE2Ng==&amp;amp;mid=2247485657&amp;amp;idx=1&amp;amp;sn=aa6fb6e87300dfee313677c12828a982&amp;amp;chksm=fc44fde0cb3374f60a3e6c8745be5a87d39fc892177c09cbd5afbd9bf27765a196373a648e75#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU2NDc4MjE2Ng==&amp;amp;mid=2247485657&amp;amp;idx=1&amp;amp;sn=aa6fb6e87300dfee313677c12828a982&amp;amp;chksm=fc44fde0cb3374f60a3e6c8745be5a87d39fc892177c09cbd5afbd9bf27765a196373a648e75&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;section data-recommend-title=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;MACè®¤è¯æŠ€æœ¯&lt;/p&gt;&lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-title&quot; data-recomment-template-id=&quot;8&quot; data-recommend-article-id=&quot;2247485643_1&quot; data-recommend-article-time=&quot;1611757173&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/xicWYTSICzRuEo5gyxME0m1UvDjzp5UibwaurF75mBg9grDFg0wExzWDgxN6L31KFk5B3EJFkjvprrq0iaH0asqtA/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;æ¥å…¥ä¸èº«ä»½è®¤è¯æŠ€æœ¯æ¦‚è¿°&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=MzU2NDc4MjE2Ng==&amp;amp;mid=2247485643&amp;amp;idx=1&amp;amp;sn=88166c4206f884ecb60efd2001432785&amp;amp;chksm=fc44fdf2cb3374e4ee04288c58be76e011f4d73e49021e3a0f8c2d5308073dcb288d1ac97726#rd&quot;&gt;&lt;section data-recommend-title=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzU2NDc4MjE2Ng==&amp;amp;mid=2247485643&amp;amp;idx=1&amp;amp;sn=88166c4206f884ecb60efd2001432785&amp;amp;chksm=fc44fdf2cb3374e4ee04288c58be76e011f4d73e49021e3a0f8c2d5308073dcb288d1ac97726&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;æ¥å…¥ä¸èº«ä»½è®¤è¯æŠ€æœ¯æ¦‚è¿°&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;img class=&quot;rich_pages&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;321&quot; data-ratio=&quot;0.4255555555555556&quot; data-s=&quot;300,640&quot; data-type=&quot;jpeg&quot; data-w=&quot;900&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/xicWYTSICzRvzhdKrMicSPIibg8PEbOka8njc8rEfaKkOXLp2wmprLicBQicX1iauQsXGSL9iaxkxVSotPCavShokSoTw/640?wx_fmt=jpeg&quot;/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mpa-category=&quot;æ¨¡æ¿&quot; data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1&quot; data-type=&quot;gif&quot; data-w=&quot;92&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/GGTr0OaZf2XsT2qUbElibBOVzt2iajO2wPBFcRSvnBNiat1rmEAxsXC1icuGJgTRtrJ52am2wk5q6SWtef8KNHAoGg/640?wx_fmt=gif&quot;/&gt;&lt;p data-mid=&quot;&quot;&gt;æˆ³è¿™å„¿&lt;/p&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;

          

          
          &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>904b293dc9cac15f5f766ffb53e479f2</guid>
<title>Pythonä¸­å…³é—­æ–‡ä»¶å¾ˆé‡è¦</title>
<link>https://toutiao.io/k/8r3kcz7</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;post-body&quot; itemprop=&quot;articleBody&quot;&gt;

      
      

      
        &lt;h2 id=&quot;å¼•è¨€&quot;&gt;&lt;a href=&quot;#å¼•è¨€&quot; class=&quot;headerlink&quot; title=&quot;å¼•è¨€&quot;/&gt;å¼•è¨€&lt;/h2&gt;&lt;p&gt;åœ¨ä½¿ç”¨ Python æ“ä½œæ–‡ä»¶æ—¶ï¼Œå¾ˆå¤šäººä¼šä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¥æ“ä½œã€‚ä¾‹å¦‚ï¼š&lt;br/&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;with&lt;/span&gt; open(&lt;span class=&quot;string&quot;&gt;&quot;xx.txt&quot;&lt;/span&gt;, mode=&lt;span class=&quot;string&quot;&gt;&quot;w&quot;&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;as&lt;/span&gt; f:&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;    f.write(&lt;span class=&quot;string&quot;&gt;&quot;Hello, World!&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;è¯¥withè¯­å¥å¯åŠ¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œåªè¦ä¸Šä¸‹æ–‡å¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œä¸Šä¸‹æ–‡ç®¡ç†å™¨å°±ä¼šæ‰“å¼€æ–‡ä»¶xx.txtå¹¶ç®¡ç†æ–‡ä»¶èµ„æºã€‚é€šå¸¸ï¼Œç¼©è¿›å—ç»“æŸæˆ–å¼•å‘å¼‚å¸¸ï¼Œæ–‡ä»¶å°†å…³é—­ã€‚å¯èƒ½å¾ˆå¤šåˆå­¦è€…éƒ½ä¼šè¢«å»ºè®®è¿™æ ·ç”¨ï¼Œå¯æ˜¯ä¸ºä»€ä¹ˆè¦è¿™æ ·å†™ç¨‹åºæ‰æ›´å¥å£®ï¼Ÿæˆ–è€…è¯´ä¸ºä»€ä¹ˆä¸€å®šè¦å…³é—­æ–‡ä»¶ï¼Ÿ&lt;/p&gt;
&lt;a id=&quot;more&quot;/&gt;
&lt;h2 id=&quot;ä»ç³»ç»Ÿçš„è§’åº¦çœ‹&quot;&gt;&lt;a href=&quot;#ä»ç³»ç»Ÿçš„è§’åº¦çœ‹&quot; class=&quot;headerlink&quot; title=&quot;ä»ç³»ç»Ÿçš„è§’åº¦çœ‹&quot;/&gt;ä»ç³»ç»Ÿçš„è§’åº¦çœ‹&lt;/h2&gt;&lt;h3 id=&quot;ç³»ç»Ÿé™åˆ¶è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶æ•°&quot;&gt;&lt;a href=&quot;#ç³»ç»Ÿé™åˆ¶è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶æ•°&quot; class=&quot;headerlink&quot; title=&quot;ç³»ç»Ÿé™åˆ¶è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶æ•°&quot;/&gt;ç³»ç»Ÿé™åˆ¶è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶æ•°&lt;/h3&gt;&lt;p&gt;è°ƒç”¨open()æ‰“å¼€æ–‡ä»¶æ—¶ï¼Œä¼šå¯¹æ“ä½œç³»ç»Ÿè¿›è¡Œç³»ç»Ÿè°ƒç”¨ï¼Œç¡¬ç›˜é©±åŠ¨å™¨æ‰¾åˆ°è¯¥æ–‡ä»¶å¹¶ä¸ºè¯»å–æˆ–å†™å…¥åšå¥½å‡†å¤‡ã€‚ç„¶åï¼Œæ“ä½œç³»ç»Ÿå°†è¿”å›ä¸€ä¸ªæ— ç¬¦å·æ•´æ•°nï¼Œ Python è¿›ç¨‹è¿›è¡Œç³»ç»Ÿè°ƒç”¨å¹¶è·å–æ•´æ•° n ä½œä¸ºæ–‡ä»¶å¥æŸ„è·å¾—ä¸æ–‡ä»¶å…³è”çš„ç¼–å·åï¼Œå°±å¯ä»¥è¿›è¡Œè¯»å–æˆ–å†™å…¥æ“ä½œäº†ã€‚&lt;br/&gt;æ“ä½œç³»ç»Ÿé™åˆ¶ä»»ä½•å•ä¸ªè¿›ç¨‹å¯ä»¥æ‹¥æœ‰çš„æ‰“å¼€æ–‡ä»¶çš„æ•°é‡ï¼Œè¿™ä¸ªå¯ä»¥ä½¿ç”¨å·¥å…· ulimit æŸ¥çœ‹ï¼Œ æˆ–è€…ç›´æ¥ä¿®æ”¹ /etc/security/limits.conf æ”¹å˜æ–‡ä»¶æ•°é™åˆ¶ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä¸ºä»€ä¹ˆé™åˆ¶ï¼Ÿçªç ´é™åˆ¶ä¼šæ€æ ·&quot;&gt;&lt;a href=&quot;#ä¸ºä»€ä¹ˆé™åˆ¶ï¼Ÿçªç ´é™åˆ¶ä¼šæ€æ ·&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä»€ä¹ˆé™åˆ¶ï¼Ÿçªç ´é™åˆ¶ä¼šæ€æ ·&quot;/&gt;ä¸ºä»€ä¹ˆé™åˆ¶ï¼Ÿçªç ´é™åˆ¶ä¼šæ€æ ·&lt;/h3&gt;&lt;p&gt;ä»æ“ä½œç³»ç»Ÿçš„è§’åº¦æ¥çœ‹ï¼Œä»»ä½•è¾¾åˆ°é™åˆ¶çš„è¿›ç¨‹éƒ½å¯èƒ½ä¼šæ³„æ¼æ–‡ä»¶å¥æŸ„ä»¥åŠå…¶ä»–èµ„æºã€‚èµ„æºæ³„æ¼å¯èƒ½æ˜¯ç”±äºä¸è‰¯çš„ç¼–ç¨‹ä¹ æƒ¯æˆ–è¯•å›¾æ”»å‡»ç³»ç»Ÿçš„æ¶æ„ç¨‹åºé€ æˆçš„ï¼Œæ“ä½œç³»ç»Ÿä¸ºäº†ä¿æŠ¤ç³»ç»Ÿçš„ç¨³å®šè€Œé‡‡å–é™åˆ¶æªæ–½ã€‚å¦å¤–ï¼Œå¯¹äºå¤§å¤šæ•°åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œæ‰“å¼€è¿™ä¹ˆå¤šæ–‡ä»¶æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚åœ¨ä¸€ä¸ªç¡¬ç›˜é©±åŠ¨å™¨ä¸Šæœ€å¤šåªèƒ½åŒæ—¶è¿›è¡Œä¸€æ¬¡è¯»å–æˆ–å†™å…¥æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚ä½ å†™äº†ä¸€ä¸ªç®€å•çš„æ–‡ä»¶ä¸Šä¼ æœåŠ¡ï¼Œåœ¨æœåŠ¡ä¸­ä½ éœ€è¦å°†ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šï¼Œå¦‚æœä½ æ²¡æœ‰åœ¨å†™å®Œæ–‡ä»¶åå…³é—­æ–‡ä»¶ï¼Œéšç€æœåŠ¡çš„æ—¶é—´å˜é•¿ï¼ŒæœåŠ¡å¼€å¯çš„æ–‡ä»¶ä¼šè¶Šæ¥è¶Šå¤šï¼Œæœ€åä½ ä¼šå¾—åˆ°è¿™ä¸ªæŠ¥é”™ï¼Œ OSError: [Errno 24] Too many open filesã€‚&lt;/p&gt;
&lt;p&gt;é‚£èƒ½ä¸èƒ½çªç ´è¿™ä¸ªæ–‡ä»¶é™åˆ¶å‘¢ï¼Ÿé‚£è‚¯å®šæ˜¯å¯ä»¥çš„ï¼Œå½“ç„¶ä½ å¿…é¡»çŸ¥é“ä½ çš„æœåŠ¡ä¸ºä»€ä¹ˆè¦å¼€å¯è¿™ä¹ˆå¤šçš„æ–‡ä»¶ï¼Œæ¯”å¦‚å¯¹äºä¸€ä¸ªé•¿è¿æ¥æœåŠ¡ï¼Œä»–å¯èƒ½è¦æ±‚å•ä¸ªå®ä¾‹è¦æ”¯æ’‘æ•°ä¸‡çš„tcpé“¾æ¥(Linuxä¸­å¥—æ¥å­—ä¹Ÿæ˜¯æ–‡ä»¶)ï¼Œé‚£è¿™æ—¶å€™å¦‚æœè¿˜é‡‡å–é»˜è®¤çš„å•è¿›ç¨‹å¼€å¯æ–‡ä»¶æ•°é‡é™åˆ¶å¯èƒ½å°±ä¸åˆé€‚äº†ï¼Œä½ å°±éœ€è¦ä¿®æ­£ /etc/security/limits.conf é…ç½®æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ä»ç¨³å®šæ€§çš„è§’åº¦çœ‹&quot;&gt;&lt;a href=&quot;#ä»ç¨³å®šæ€§çš„è§’åº¦çœ‹&quot; class=&quot;headerlink&quot; title=&quot;ä»ç¨³å®šæ€§çš„è§’åº¦çœ‹&quot;/&gt;ä»ç¨³å®šæ€§çš„è§’åº¦çœ‹&lt;/h2&gt;&lt;p&gt;æˆ‘ä»¬æ¯æ¬¡æ“ä½œæ–‡ä»¶éƒ½å»ä½¿ç”¨withæ¥ç®¡ç†ä¸Šä¸‹æ–‡ï¼Œwithå°è£…äº† tryâ€¦exceptâ€¦finally ç¼–ç èŒƒå¼ï¼Œèƒ½åœ¨ä»»ä½•æƒ…å†µä¸‹(å½“ç„¶ä¸åŒ…æ‹¬æ–­ç”µ)æå¤§é™åº¦çš„å¸®ä½ å…³é—­æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯å¦‚æœæˆ‘ä»¬ä¸å…³é—­æ–‡ä»¶ï¼Œå°†ä¼šé¢ä¸´ä»€ä¹ˆï¼Ÿæ¯”å¦‚ä¸‹è¾¹çš„ä»£ç &lt;br/&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; os&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;f = open(&lt;span class=&quot;string&quot;&gt;&quot;xxx.txt&quot;&lt;/span&gt;, mode=&lt;span class=&quot;string&quot;&gt;&quot;w&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;f.write(&lt;span class=&quot;string&quot;&gt;&quot;Hello, world!&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;os._exit(&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)  &lt;span class=&quot;comment&quot;&gt;# æ¨¡æ‹Ÿç¨‹åºå¼‚å¸¸é€€å‡º&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;è¿™æ®µä»£ç ä½ ç¡®å®å¯ä»¥æ‰¾åˆ° xxx.txt æ–‡ä»¶ï¼Œä½†æ˜¯æ–‡ä»¶é‡Œè¾¹æ²¡æœ‰Hello, world!å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸ºæ¯ä¸ªå†™æ“ä½œéƒ½å»æ“ä½œç£ç›˜æ˜¯å¾ˆæ˜‚è´µã€‚å‡ºäºè¿™ä¸ªåŸå› ï¼ŒPython é»˜è®¤æ˜¯ä½¿ç”¨ä¸€ä¸ªç¼“å†²åŒºæ¥æ”¶é›†å†™æ“ä½œã€‚å½“ç¼“å†²åŒºæ»¡æ—¶ï¼Œæˆ–è€…æ–‡ä»¶è¢«æ˜¾å¼å…³é—­æ—¶ï¼Œç¼“å†²åŒºè¢«åˆ·æ–°ï¼Œå†™æ“ä½œå®Œæˆï¼Œè¿™æ—¶å€™æ‰ä¼šå†™å…¥ç£ç›˜ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Python è¿›ç¨‹å®Œæˆåï¼Œæ“ä½œç³»ç»Ÿä¼šæ‰§è¡Œè‡ªå·±çš„æ¸…ç†ï¼Œå…³é—­è¿›ç¨‹æ‰“å¼€çš„æ‰€æœ‰æ–‡ä»¶æè¿°ç¬¦ã€‚å´©æºƒå¯èƒ½å‘ç”Ÿåœ¨å¤šä¸ªçº§åˆ«ï¼Œå¹¶ä¼šå¹²æ‰°æ“ä½œç³»ç»Ÿçš„æ¸…ç†ï¼Œä½¿æ–‡ä»¶å¥æŸ„æ‚¬ç©ºã€‚åœ¨ Windows ä¸Šï¼Œæ‚¬ç©ºæ–‡ä»¶å¥æŸ„å¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œæ‰“å¼€æ–‡ä»¶çš„è¿›ç¨‹ä¹Ÿä¼šé”å®šå®ƒï¼Œå¦ä¸€ä¸ªè¿›ç¨‹åœ¨å…³é—­ä¹‹å‰æ— æ³•æ‰“å¼€è¯¥æ–‡ä»¶ã€‚Windows ç”¨æˆ·å¯èƒ½ç†Ÿæ‚‰ä¸å…è®¸æ‚¨æ‰“å¼€æˆ–åˆ é™¤æ–‡ä»¶çš„æ¶æ„è¿›ç¨‹ã€‚æ–‡ä»¶å¥æŸ„æ³„æ¼å’Œç¼“å†²åŒºä¸­çš„å†…å®¹ä¸¢å¤±å·²ç»å¤Ÿç³Ÿç³•çš„äº†ï¼Œä½†æ˜¯ä¸­æ–­æ–‡ä»¶æ“ä½œçš„å´©æºƒä¹Ÿå¯èƒ½å¯¼è‡´æ–‡ä»¶æŸåã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ€»ç»“&quot;&gt;&lt;a href=&quot;#æ€»ç»“&quot; class=&quot;headerlink&quot; title=&quot;æ€»ç»“&quot;/&gt;æ€»ç»“&lt;/h2&gt;&lt;p&gt;é¦–å…ˆå› ä¸ºå—ç³»ç»Ÿçš„é™åˆ¶ï¼Œæˆ‘ä»¬ä¸ç®¡ç”¨å“ªç§è¯­è¨€ç¼–ç¨‹ï¼Œéƒ½è¦æŠŠä¸åœ¨ä½¿ç”¨çš„æ–‡ä»¶æè¿°ç¬¦å…³é—­ï¼Œä¸€æ¥é¿å…å› å¼€å¯æ–‡ä»¶è¿‡å¤šå¯¼è‡´æœåŠ¡å¼‚å¸¸ï¼ŒäºŒæ¥åŠæ—¶å…³é—­ä¸ç”¨çš„æ–‡ä»¶æè¿°ç¬¦ä¹Ÿèƒ½èŠ‚çº¦èµ„æºã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–æˆ‘ä»¬æ°¸è¿œæ— æ³•å®Œå…¨é¿å…å´©æºƒçš„å½±å“ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨æ¥å‡å°‘å´©æºƒå¸¦æ¥çš„å½±å“ã€‚&lt;/p&gt;

      
    &lt;/div&gt;

    
      


    

    
    
    

    
      &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>f3245593491d5a22af72c050fdb6c186</guid>
<title>é«˜å¹¶å‘ä¸‹å¦‚ä½•é˜²é‡ï¼Ÿ</title>
<link>https://toutiao.io/k/qqouiqz</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;/h2&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç å“¥ï¼Œå¯ä»¥å«æˆ‘é“ä»”ã€‚&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzkzMDI1NjcyOQ==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/EoJib2tNvVtf7icAmS0BQH6oDVG37Q8NzcfdguS5qAqOhfxvZyIKqmuX5BbnDjynrBbZzktp1EiaeFLzapp1nHysw/0?wx_fmt=png&quot; data-nickname=&quot;ç å“¥å­—èŠ‚&quot; data-alias=&quot;MageByte&quot; data-signature=&quot;æ‹¥æŠ±ç¡¬æ ¸æŠ€æœ¯å’Œå¯¹è±¡ï¼Œé¢å‘äººæ°‘å¸ç¼–ç¨‹ã€‚&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å‰è¨€&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ€è¿‘æµ‹è¯•ç»™æˆ‘æäº†ä¸€ä¸ªbugï¼Œè¯´æˆ‘ä¹‹å‰æä¾›çš„ä¸€ä¸ªæ‰¹é‡å¤åˆ¶å•†å“çš„æ¥å£ï¼Œäº§ç”Ÿäº†é‡å¤çš„å•†å“æ•°æ®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿½æŸ¥åŸå› ä¹‹åå‘ç°ï¼Œè¿™ä¸ªäº‹æƒ…æ²¡æƒ³è±¡ä¸­ç®€å•ï¼Œå¯ä»¥è¯´ä¸€æ³¢å¤šæŠ˜ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1. éœ€æ±‚&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº§å“æœ‰ä¸ªéœ€æ±‚ï¼šç”¨æˆ·é€‰æ‹©ä¸€äº›å“ç‰Œï¼Œç‚¹å‡»ç¡®å®šæŒ‰é’®ä¹‹åï¼Œç³»ç»Ÿéœ€è¦åŸºäºä¸€ä»½&lt;code&gt;é»˜è®¤&lt;/code&gt;å“ç‰Œçš„å•†å“æ•°æ®ï¼Œå¤åˆ¶å‡ºä¸€æ‰¹&lt;code&gt;æ–°&lt;/code&gt;çš„å•†å“ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‹¿åˆ°è¿™ä¸ªéœ€æ±‚æ—¶è§‰å¾—å¤ªç®€å•äº†ï¼Œä¸‰ä¸‹äº”é™¤äºŒå°±æå®šã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘æä¾›äº†ä¸€ä¸ªå¤åˆ¶å•†å“çš„åŸºç¡€æ¥å£ï¼Œç»™å•†åŸç³»ç»Ÿè°ƒç”¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“æ—¶çš„æµç¨‹å›¾å¦‚ä¸‹ï¼š&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.2962382445141066&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ibJZVicC7nz5iaKjv5crmHjKwiakCWXlN74v073cEphxgnuialQdxJ1APTqGmxga34icfB9dD7VVPPq7rjYbYF7Pdyqg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1276&quot;/&gt;å¦‚æœæ¯æ¬¡å¤åˆ¶çš„å•†å“æ•°é‡ä¸å¤šï¼Œä½¿ç”¨åŒæ­¥æ¥å£è°ƒç”¨çš„æ–¹æ¡ˆé—®é¢˜ä¹Ÿä¸å¤§ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2. æ€§èƒ½ä¼˜åŒ–&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†ç”±äºæ¯æ¬¡éœ€è¦å¤åˆ¶çš„å•†å“æ•°é‡æ¯”è¾ƒå¤šï¼Œå¯èƒ½æœ‰å‡ åƒã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæ¯æ¬¡éƒ½æ˜¯ç”¨åŒæ­¥æ¥å£çš„æ–¹å¼å¤åˆ¶å•†å“ï¼Œå¯èƒ½ä¼šæœ‰æ€§èƒ½é—®é¢˜ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å› æ­¤ï¼Œåæ¥æˆ‘æŠŠå¤åˆ¶å•†å“çš„é€»è¾‘æ”¹æˆä½¿ç”¨&lt;code&gt;mq&lt;/code&gt;å¼‚æ­¥å¤„ç†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ”¹é€ ä¹‹åçš„æµç¨‹å›¾ï¼š&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.25058823529411767&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ibJZVicC7nz5iaKjv5crmHjKwiakCWXlN74vGmIG2UQ0ACq9ibuIG9mV02Bjdjtw4ibmE06BJucicvkBTaAgibNuEeLdsA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1700&quot;/&gt;å¤åˆ¶å•†å“çš„ç»“æœè¿˜éœ€è¦é€šçŸ¥å•†åŸç³»ç»Ÿï¼š&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4166666666666667&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ibJZVicC7nz5iaKjv5crmHjKwiakCWXlN74vfCDzNOsHJ1a6TElFvSNKEEA8B7320Rhm2hje3tib4B8cdGUzMHK94KQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1128&quot;/&gt;è¿™ä¸ªæ–¹æ¡ˆçœ‹èµ·æ¥ï¼ŒæŒºä¸é”™çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†åæ¥å‡ºç°é—®é¢˜äº†ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3. å‡ºé—®é¢˜äº†&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æµ‹è¯•ç»™æˆ‘ä»¬æäº†ä¸€ä¸ªbugï¼Œè¯´æˆ‘ä¹‹å‰æä¾›çš„ä¸€ä¸ªæ‰¹é‡å¤åˆ¶å•†å“çš„æ¥å£ï¼Œäº§ç”Ÿäº†é‡å¤çš„å•†å“æ•°æ®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»è¿‡è¿½æŸ¥ä¹‹åå‘ç°ï¼Œå•†åŸç³»ç»Ÿä¸ºäº†æ€§èƒ½è€ƒè™‘ï¼Œä¹Ÿæ”¹æˆå¼‚æ­¥äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»–ä»¬æ²¡æœ‰åœ¨æ¥å£ä¸­ç›´æ¥è°ƒç”¨åŸºç¡€ç³»ç»Ÿçš„å¤åˆ¶å•†å“æ¥å£ï¼Œè€Œæ˜¯åœ¨&lt;code&gt;job&lt;/code&gt;ä¸­è°ƒç”¨çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç«™åœ¨ä»–ä»¬çš„è§†è§’æµç¨‹å›¾æ˜¯è¿™æ ·çš„ï¼š&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.28144458281444584&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ibJZVicC7nz5iaKjv5crmHjKwiakCWXlN74vibicaial4QeBQweXfssQVwcqaMnTPY52iaBOGzRd6GuajlLDmicAsHKq0Pw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1606&quot;/&gt;ç”¨æˆ·è°ƒç”¨å•†åŸçš„æ¥å£ï¼Œä»–ä»¬ä¼šå¾€&lt;code&gt;è¯·æ±‚è®°å½•è¡¨&lt;/code&gt;ä¸­å†™å…¥ä¸€æ¡æ•°æ®ï¼Œç„¶ååœ¨å¦å¤–ä¸€ä¸ª&lt;code&gt;job&lt;/code&gt;ä¸­ï¼Œå¼‚æ­¥è°ƒç”¨åŸºç¡€ç³»ç»Ÿçš„æ¥å£å»å¤åˆ¶å•†å“ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†å®é™…æƒ…å†µæ˜¯è¿™æ ·çš„ï¼šå•†åŸç³»ç»Ÿå†…éƒ¨å‡ºç°äº†bugï¼Œåœ¨è¯·æ±‚è®°å½•è¡¨ä¸­ï¼ŒåŒä¸€æ¡è¯·æ±‚äº§ç”Ÿäº†é‡å¤çš„æ•°æ®ã€‚è¿™æ ·å¯¼è‡´çš„ç»“æœæ˜¯ï¼Œåœ¨jobä¸­è°ƒç”¨åŸºç¡€ç³»ç»Ÿå¤åˆ¶å•†å“æ¥å£æ—¶ï¼Œå‘é€äº†é‡å¤çš„è¯·æ±‚ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆšå¥½åŸºç¡€ç³»ç»Ÿç°åœ¨æ˜¯ä½¿ç”¨&lt;code&gt;RocketMQ&lt;/code&gt;å¼‚æ­¥å¤„ç†çš„ã€‚ç”±äºå•†åŸçš„jobä¸€æ¬¡ä¼šå–ä¸€æ‰¹æ•°æ®ï¼ˆæ¯”å¦‚:20æ¡è®°å½•ï¼‰ï¼Œåœ¨æçŸ­çš„æ—¶é—´å†…ï¼ˆå…¶å®å°±æ˜¯åœ¨ä¸€ä¸ªforå¾ªç¯ä¸­ï¼‰å¤šæ¬¡è°ƒç”¨æ¥å£ï¼Œå¯èƒ½å­˜åœ¨ç›¸åŒçš„è¯·æ±‚å‚æ•°è¿ç»­è°ƒç”¨å¤åˆ¶å•†å“æ¥å£æƒ…å†µã€‚äºæ˜¯ï¼Œå‡ºç°äº†å¹¶å‘æ’å…¥é‡å¤æ•°æ®çš„é—®é¢˜ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;4. å¤šçº¿ç¨‹æ¶ˆè´¹&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;RocketMQ&lt;/code&gt;çš„æ¶ˆè´¹è€…ï¼Œä¸ºäº†æ€§èƒ½è€ƒè™‘ï¼Œé»˜è®¤æ˜¯ç”¨å¤šçº¿ç¨‹å¹¶å‘æ¶ˆè´¹çš„ï¼Œæœ€å¤§æ”¯æŒ&lt;code&gt;64&lt;/code&gt;ä¸ªçº¿ç¨‹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@RocketMQMessageListener&lt;/span&gt;(topicÂ =Â &lt;span&gt;&quot;${com.susan.topic:PRODUCT_TOPIC}&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â consumerGroupÂ =Â &lt;span&gt;&quot;${com.susan.group:PRODUCT_TOPIC_GROUP}&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;@Service&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;MessageReceiver&lt;/span&gt;Â &lt;span&gt;implements&lt;/span&gt;Â &lt;span&gt;RocketMQListener&lt;/span&gt;&amp;lt;&lt;span&gt;MessageExt&lt;/span&gt;&amp;gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;onMessage&lt;/span&gt;&lt;span&gt;(MessageExtÂ message)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â StringÂ messageÂ =Â &lt;span&gt;new&lt;/span&gt;Â String(message.getBody(),Â StandardCharsets.UTF_8);&lt;br/&gt;Â Â Â Â Â Â Â Â doSamething(message);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœåœ¨æçŸ­çš„æ—¶é—´å†…ï¼Œè¿ç»­å‘é€é‡å¤çš„æ¶ˆæ¯ï¼Œå°±ä¼šè¢«ä¸åŒçš„çº¿ç¨‹æ¶ˆè´¹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å³ä½¿åœ¨ä»£ç ä¸­æœ‰è¿™æ ·çš„åˆ¤æ–­ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;ProductÂ oldProductÂ =Â query(hashCode);&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;(oldProductÂ ==Â &lt;span&gt;null&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â productMapper.insert(product);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æ’å…¥æ•°æ®ä¹‹å‰ï¼Œå…ˆåˆ¤æ–­è¯¥æ•°æ®æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œåªæœ‰ä¸å­˜åœ¨æ‰ä¼šæ’å…¥ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†ç”±äºåœ¨å¹¶å‘æƒ…å†µä¸‹ï¼Œä¸åŒçš„çº¿ç¨‹éƒ½åˆ¤æ–­å•†å“æ•°æ®ä¸å­˜åœ¨ï¼Œäºæ˜¯åŒæ—¶è¿›è¡Œäº†æ’å…¥æ“ä½œï¼Œæ‰€ä»¥å°±äº§ç”Ÿäº†&lt;code&gt;é‡å¤æ•°æ®&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.432601880877743&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ibJZVicC7nz5iaKjv5crmHjKwiakCWXlN74vqwIZ9vSeRvxOrn1vhCYibVaGM9Zz9z9sTlu9LrDFUoCROAiaMN4k81Xw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;638&quot;/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;5. é¡ºåºæ¶ˆè´¹&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†è§£å†³ä¸Šè¿°å¹¶å‘æ¶ˆè´¹é‡å¤æ¶ˆæ¯çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä»ä¸¤æ–¹é¢ç€æ‰‹ï¼š&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å•†åŸç³»ç»Ÿä¿®å¤äº§ç”Ÿé‡å¤è®°å½•çš„bugã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åŸºç¡€ç³»ç»Ÿå°†æ¶ˆæ¯æ”¹æˆ&lt;code&gt;å•çº¿ç¨‹é¡ºåºæ¶ˆè´¹&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»”ç»†æ€è€ƒäº†ä¸€ä¸‹ï¼Œå¦‚æœåªé å•†åŸç³»ç»Ÿä¿®å¤bugï¼Œä»¥åå¾ˆéš¾é¿å…ä¸å‡ºç°ç±»ä¼¼çš„é‡å¤å•†å“é—®é¢˜ï¼Œæ¯”å¦‚ï¼šå¦‚æœç”¨æˆ·åœ¨æçŸ­çš„æ—¶é—´å†…ç‚¹å‡»åˆ›å»ºå•†å“æŒ‰é’®å¤šæ¬¡ï¼Œæˆ–è€…å•†åŸç³»ç»Ÿä¸»åŠ¨å‘èµ·é‡è¯•ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ï¼ŒåŸºç¡€ç³»ç»Ÿè¿˜éœ€è¿›ä¸€æ­¥å¤„ç†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶å®&lt;code&gt;RocketMQ&lt;/code&gt;æœ¬èº«æ˜¯æ”¯æŒé¡ºåºæ¶ˆè´¹çš„ï¼Œéœ€è¦æ¶ˆæ¯çš„ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…ä¸€èµ·æ”¹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”Ÿäº§è€…æ”¹ä¸ºï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;rocketMQTemplate.asyncSendOrderly(topic,Â message,Â hashKey,Â &lt;span&gt;new&lt;/span&gt;Â SendCallback()Â {&lt;br/&gt;Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;onSuccess&lt;/span&gt;&lt;span&gt;(SendResultÂ sendResult)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â log.info(&lt;span&gt;&quot;sendMessageÂ success&quot;&lt;/span&gt;);&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;onException&lt;/span&gt;&lt;span&gt;(ThrowableÂ e)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â log.error(&lt;span&gt;&quot;sendMessageÂ failed!&quot;&lt;/span&gt;);&lt;br/&gt;Â Â }&lt;br/&gt;});&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‡ç‚¹æ˜¯è¦è°ƒç”¨&lt;code&gt;rocketMQTemplate&lt;/code&gt;å¯¹è±¡çš„&lt;code&gt;asyncSendOrderly&lt;/code&gt;æ–¹æ³•ï¼Œå‘é€é¡ºåºæ¶ˆæ¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¶ˆè´¹è€…æ”¹ä¸ºï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@RocketMQMessageListener&lt;/span&gt;(topicÂ =Â &lt;span&gt;&quot;${com.susan.topic:PRODUCT_TOPIC}&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â consumeModeÂ =Â ConsumeMode.ORDERLY,&lt;br/&gt;Â Â Â Â Â Â Â Â consumerGroupÂ =Â &lt;span&gt;&quot;${com.susan.group:PRODUCT_TOPIC_GROUP}&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;@Service&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;MessageReceiver&lt;/span&gt;Â &lt;span&gt;implements&lt;/span&gt;Â &lt;span&gt;RocketMQListener&lt;/span&gt;&amp;lt;&lt;span&gt;MessageExt&lt;/span&gt;&amp;gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;onMessage&lt;/span&gt;&lt;span&gt;(MessageExtÂ message)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â StringÂ messageÂ =Â &lt;span&gt;new&lt;/span&gt;Â String(message.getBody(),Â StandardCharsets.UTF_8);&lt;br/&gt;Â Â Â Â Â Â Â Â doSamething(message);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥æ”¶æ¶ˆæ¯çš„é‡ç‚¹æ˜¯&lt;code&gt;RocketMQMessageListener&lt;/code&gt;æ³¨è§£ä¸­çš„&lt;code&gt;consumeMode&lt;/code&gt;å‚æ•°ï¼Œè¦è®¾ç½®æˆ&lt;code&gt;ConsumeMode.ORDERLY&lt;/code&gt;ï¼Œè¿™æ ·å°±èƒ½é¡ºåºæ¶ˆè´¹æ¶ˆæ¯äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¿®æ”¹åå…³é”®æµç¨‹å›¾å¦‚ä¸‹ï¼š&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;2.2842105263157895&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ibJZVicC7nz5iaKjv5crmHjKwiakCWXlN74vmDcibWsNfwwiag30A8LHM0UIjibtV9tDYv9HFmL6xQuDxNe5MFfxC7kjA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;380&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸¤è¾¹éƒ½ä¿®æ”¹ä¹‹åï¼Œå¤åˆ¶å•†å“è¿™ä¸€å—å°±æ²¡æœ‰å†å‡ºç°é‡å¤å•†å“çš„é—®é¢˜äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Butï¼Œä¿®å®Œbugä¹‹åï¼Œæˆ‘åˆæ€è€ƒäº†è‰¯ä¹…ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤åˆ¶å•†å“åªæ˜¯åˆ›å»ºå•†å“çš„å…¶ä¸­ä¸€ä¸ªå…¥å£ï¼Œå¦‚æœæœ‰å…¶ä»–å…¥å£ï¼Œè·Ÿå¤åˆ¶å•†å“åŠŸèƒ½åŒæ—¶åˆ›å»ºæ–°å•†å“å‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ä¹Ÿä¼šå‡ºç°é‡å¤å•†å“é—®é¢˜ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è™½è¯´ï¼Œè¿™ç§æ¦‚ç‡éå¸¸éå¸¸å°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†å¦‚æœä¸€æ—¦å‡ºç°é‡å¤å•†å“é—®é¢˜ï¼Œåç»­æ¶‰åŠåˆ°è¦åˆå¹¶å•†å“çš„æ•°æ®ï¼Œéå¸¸éº»çƒ¦ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»è¿‡è¿™ä¸€æ¬¡çš„æ•™è®­ï¼Œä¸€å®šè¦é˜²å¾®æœæ¸ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ç®¡æ˜¯ç”¨æˆ·ï¼Œè¿˜æ˜¯è‡ªå·±çš„å†…éƒ¨ç³»ç»Ÿï¼Œä»ä¸åŒçš„å…¥å£åˆ›å»ºå•†å“ï¼Œéƒ½éœ€è¦è§£å†³é‡å¤å•†å“åˆ›å»ºé—®é¢˜ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£ä¹ˆï¼Œå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;6. å”¯ä¸€ç´¢å¼•&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è§£å†³é‡å¤å•†å“æ•°æ®é—®é¢˜ï¼Œæœ€å¿«æˆæœ¬æœ€ä½æœ€æœ‰æ•ˆçš„åŠæ³•æ˜¯ï¼š&lt;code&gt;ç»™è¡¨å»ºå”¯ä¸€ç´¢å¼•&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æƒ³æ³•æ˜¯å¥½çš„ï¼Œä½†æˆ‘ä»¬è¿™è¾¹æœ‰ä¸ªè§„èŒƒå°±æ˜¯ï¼š&lt;code&gt;ä¸šåŠ¡è¡¨å¿…é¡»éƒ½æ˜¯é€»è¾‘åˆ é™¤&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œè¦åˆ é™¤è¡¨çš„æŸæ¡è®°å½•çš„è¯ï¼Œå¦‚æœç”¨&lt;code&gt;delete&lt;/code&gt;è¯­å¥æ“ä½œçš„è¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;delete&lt;/span&gt;Â &lt;span&gt;from&lt;/span&gt;Â productÂ &lt;span&gt;where&lt;/span&gt;Â &lt;span&gt;id&lt;/span&gt;=&lt;span&gt;123&lt;/span&gt;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ç§deleteæ“ä½œæ˜¯&lt;code&gt;ç‰©ç†åˆ é™¤&lt;/code&gt;ï¼Œå³è¯¥è®°å½•è¢«åˆ é™¤ä¹‹åï¼Œåç»­é€šè¿‡sqlè¯­å¥åŸºæœ¬æŸ¥ä¸å‡ºæ¥ã€‚ï¼ˆä¸è¿‡é€šè¿‡å…¶ä»–æŠ€æœ¯æ‰‹æ®µå¯ä»¥æ‰¾å›ï¼Œé‚£æ˜¯åè¯äº†ï¼‰&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿˜æœ‰å¦å¤–ä¸€ç§æ˜¯é€»è¾‘åˆ é™¤ï¼Œä¸»è¦æ˜¯é€šè¿‡&lt;code&gt;update&lt;/code&gt;è¯­å¥æ“ä½œçš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;update&lt;/span&gt;Â productÂ &lt;span&gt;set&lt;/span&gt;Â delete_status=&lt;span&gt;1&lt;/span&gt;,edit_time=&lt;span&gt;now&lt;/span&gt;(&lt;span&gt;3&lt;/span&gt;)Â &lt;br/&gt;&lt;span&gt;where&lt;/span&gt;Â &lt;span&gt;id&lt;/span&gt;=&lt;span&gt;123&lt;/span&gt;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€»è¾‘åˆ é™¤éœ€è¦åœ¨è¡¨ä¸­é¢å¤–å¢åŠ ä¸€ä¸ª&lt;code&gt;åˆ é™¤çŠ¶æ€å­—æ®µ&lt;/code&gt;ï¼Œç”¨äºè®°å½•æ•°æ®æ˜¯å¦è¢«åˆ é™¤ã€‚åœ¨æ‰€æœ‰çš„ä¸šåŠ¡æŸ¥è¯¢çš„åœ°æ–¹ï¼Œéƒ½éœ€è¦è¿‡æ»¤æ‰å·²ç»åˆ é™¤çš„æ•°æ®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šè¿‡è¿™ç§æ–¹å¼åˆ é™¤æ•°æ®ä¹‹åï¼Œæ•°æ®ä»»ç„¶è¿˜åœ¨è¡¨ä¸­ï¼Œåªæ˜¯ä»é€»è¾‘ä¸Šè¿‡æ»¤äº†åˆ é™¤çŠ¶æ€çš„æ•°æ®è€Œå·²ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶å®å¯¹äºè¿™ç§é€»è¾‘åˆ é™¤çš„è¡¨ï¼Œæ˜¯æ²¡æ³•åŠ &lt;code&gt;å”¯ä¸€ç´¢å¼•&lt;/code&gt;çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡è®¾ä¹‹å‰ç»™å•†å“è¡¨ä¸­çš„nameå’ŒmodelåŠ äº†å”¯ä¸€ç´¢å¼•ï¼Œå¦‚æœç”¨æˆ·æŠŠæŸæ¡è®°å½•åˆ é™¤äº†ï¼Œdelete_statusè®¾ç½®æˆ1äº†ã€‚åæ¥ï¼Œè¯¥ç”¨æˆ·å‘ç°ä¸å¯¹ï¼Œåˆé‡æ–°æ·»åŠ äº†ä¸€æ¨¡ä¸€æ ·çš„å•†å“ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±äºå”¯ä¸€ç´¢å¼•çš„å­˜åœ¨ï¼Œè¯¥ç”¨æˆ·ç¬¬äºŒæ¬¡æ·»åŠ å•†å“ä¼šå¤±è´¥ï¼Œå³ä½¿è¯¥å•†å“å·²ç»è¢«åˆ é™¤äº†ï¼Œä¹Ÿæ²¡æ³•å†æ·»åŠ äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªé—®é¢˜æ˜¾ç„¶æœ‰ç‚¹ä¸¥é‡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰äººå¯èƒ½ä¼šè¯´ï¼šæŠŠnameã€modelå’Œdelete_statusä¸‰ä¸ªå­—æ®µåŒæ—¶åšæˆå”¯ä¸€ç´¢å¼•ä¸å°±è¡Œäº†ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç­”ï¼šè¿™æ ·åšç¡®å®å¯ä»¥è§£å†³ç”¨æˆ·é€»è¾‘åˆ é™¤äº†æŸä¸ªå•†å“ï¼Œåæ¥åˆé‡æ–°æ·»åŠ ç›¸åŒçš„å•†å“æ—¶ï¼Œæ·»åŠ ä¸äº†çš„é—®é¢˜ã€‚ä½†å¦‚æœç¬¬äºŒæ¬¡æ·»åŠ çš„å•†å“ï¼Œåˆè¢«åˆ é™¤äº†ã€‚è¯¥ç”¨æˆ·ç¬¬ä¸‰æ¬¡æ·»åŠ ç›¸åŒçš„å•†å“ï¼Œä¸ä¹Ÿå‡ºç°é—®é¢˜äº†ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±æ­¤å¯è§ï¼Œ&lt;strong&gt;å¦‚æœè¡¨ä¸­æœ‰é€»è¾‘åˆ é™¤åŠŸèƒ½ï¼Œæ˜¯ä¸æ–¹ä¾¿åˆ›å»ºå”¯ä¸€ç´¢å¼•çš„ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;5. åˆ†å¸ƒå¼é”&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥ä¸‹æ¥ï¼Œä½ æƒ³åˆ°çš„ç¬¬äºŒç§è§£å†³æ•°æ®é‡å¤é—®é¢˜çš„åŠæ³•å¯èƒ½æ˜¯ï¼š&lt;code&gt;åŠ åˆ†å¸ƒå¼é”&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›®å‰æœ€å¸¸ç”¨çš„æ€§èƒ½æœ€é«˜çš„åˆ†å¸ƒå¼é”ï¼Œå¯èƒ½æ˜¯&lt;code&gt;redisåˆ†å¸ƒå¼é”&lt;/code&gt;äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨redisåˆ†å¸ƒå¼é”çš„ä¼ªä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;try&lt;/span&gt;{&lt;br/&gt;Â Â StringÂ resultÂ =Â jedis.set(lockKey,Â requestId,Â &lt;span&gt;&quot;NX&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;PX&quot;&lt;/span&gt;,Â expireTime);&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (&lt;span&gt;&quot;OK&quot;&lt;/span&gt;.equals(result))Â {&lt;br/&gt;Â Â Â Â Â Â doSamething();&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;true&lt;/span&gt;;&lt;br/&gt;Â Â }&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;false&lt;/span&gt;;&lt;br/&gt;}Â &lt;span&gt;finally&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â unlock(lockKey,requestId);&lt;br/&gt;}Â Â &lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸è¿‡éœ€è¦åœ¨&lt;code&gt;finally&lt;/code&gt;ä»£ç å—ä¸­&lt;code&gt;é‡Šæ”¾é”&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­lockKeyæ˜¯ç”±å•†å“è¡¨ä¸­çš„nameå’Œmodelç»„åˆè€Œæˆçš„ï¼ŒrequestIdæ˜¯æ¯æ¬¡è¯·æ±‚çš„å”¯ä¸€æ ‡è¯†ï¼Œä»¥ä¾¿äºå®ƒæ¯æ¬¡éƒ½èƒ½æ­£ç¡®å¾—é‡Šæ”¾é”ã€‚è¿˜éœ€è¦è®¾ç½®ä¸€ä¸ªè¿‡æœŸæ—¶é—´expireTimeï¼Œé˜²æ­¢é‡Šæ”¾é”å¤±è´¥ï¼Œé”ä¸€ç›´å­˜åœ¨ï¼Œå¯¼è‡´åé¢çš„è¯·æ±‚æ²¡æ³•è·å–é”ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœåªæ˜¯å•ä¸ªå•†å“ï¼Œæˆ–è€…å°‘é‡çš„å•†å“éœ€è¦å¤åˆ¶æ·»åŠ ï¼Œåˆ™åŠ åˆ†å¸ƒå¼é”æ²¡å•¥é—®é¢˜ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸»è¦æµç¨‹å¦‚ä¸‹ï¼š&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.8079470198675496&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ibJZVicC7nz5iaKjv5crmHjKwiakCWXlN74vGcexEIvtOkk5Jfh2JwW8cvMKIibvp3JvHQdQoia82efOcepStGicuTNcQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;604&quot;/&gt;å¯ä»¥åœ¨å¤åˆ¶æ·»åŠ å•†å“ä¹‹å‰ï¼Œå…ˆå°è¯•åŠ é”ã€‚å¦‚æœåŠ é”æˆåŠŸï¼Œåˆ™åœ¨æŸ¥è¯¢å•†å“æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™æ·»åŠ å•†å“ã€‚æ­¤å¤–ï¼Œåœ¨è¯¥æµç¨‹ä¸­å¦‚æœåŠ é”å¤±è´¥ï¼Œæˆ–è€…æŸ¥è¯¢å•†å“æ—¶ä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŠ åˆ†å¸ƒå¼é”çš„ç›®çš„æ˜¯ï¼šä¿è¯æŸ¥è¯¢å•†å“å’Œæ·»åŠ å•†å“çš„ä¸¤ä¸ªæ“ä½œæ˜¯åŸå­æ€§çš„æ“ä½œã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†ç°åœ¨çš„é—®é¢˜æ˜¯ï¼Œ&lt;strong&gt;æˆ‘ä»¬è¿™æ¬¡éœ€è¦å¤åˆ¶æ·»åŠ çš„å•†å“æ•°é‡å¾ˆå¤šï¼Œå¦‚æœæ¯æ·»åŠ ä¸€ä¸ªå•†å“éƒ½è¦åŠ åˆ†å¸ƒå¼é”çš„è¯ï¼Œä¼šéå¸¸å½±å“æ€§èƒ½ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æ˜¾ç„¶å¯¹äºæ‰¹é‡æ¥å£ï¼ŒåŠ redisåˆ†å¸ƒå¼é”ï¼Œä¸æ˜¯ä¸€ä¸ªç†æƒ³çš„æ–¹æ¡ˆã€‚&lt;/strong&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;6. ç»Ÿä¸€mqå¼‚æ­¥å¤„ç†&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‰é¢æˆ‘ä»¬å·²ç»èŠè¿‡ï¼Œåœ¨æ‰¹é‡å¤åˆ¶å•†å“çš„æ¥å£ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡RocketMQçš„é¡ºåºæ¶ˆæ¯ï¼Œå•çº¿ç¨‹å¼‚æ­¥å¤åˆ¶æ·»åŠ å•†å“çš„ï¼Œå¯ä»¥æš‚æ—¶è§£å†³å•†å“é‡å¤çš„é—®é¢˜ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†é‚£åªæ”¹äº†ä¸€ä¸ªæ·»åŠ å•†å“çš„å…¥å£ï¼Œè¿˜æœ‰å…¶ä»–æ·»åŠ å•†å“çš„å…¥å£ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;èƒ½ä¸èƒ½æŠŠæ·»åŠ å•†å“çš„åº•å±‚é€»è¾‘ç»Ÿä¸€ä¸€ä¸‹ï¼Œæœ€ç»ˆéƒ½è°ƒç”¨åŒä¸€æ®µä»£ç ã€‚ç„¶åé€šè¿‡RocketMQçš„é¡ºåºæ¶ˆæ¯ï¼Œå•çº¿ç¨‹å¼‚æ­¥æ·»åŠ å•†å“ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸»è¦æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6787762906309751&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ibJZVicC7nz5iaKjv5crmHjKwiakCWXlN74vp4QahsQibEx0YLVVX1xLYMzETZOdC0LNJP9VwkNo5MxANC3moic6ZZ2w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1046&quot;/&gt;è¿™æ ·ç¡®å®èƒ½å¤Ÿè§£å†³é‡å¤å•†å“çš„é—®é¢˜ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†åŒæ—¶ä¹Ÿå¸¦æ¥äº†å¦å¤–ä¸¤ä¸ªé—®é¢˜ï¼š&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ç°åœ¨æ‰€æœ‰çš„æ·»åŠ å•†å“åŠŸèƒ½éƒ½æ”¹æˆå¼‚æ­¥äº†ï¼Œä¹‹å‰åŒæ­¥æ·»åŠ å•†å“çš„æ¥å£å¦‚ä½•è¿”å›æ•°æ®å‘¢ï¼Ÿè¿™å°±éœ€è¦ä¿®æ”¹å‰ç«¯äº¤äº’ï¼Œå¦åˆ™ä¼šå½±å“ç”¨æˆ·ä½“éªŒã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¹‹å‰ä¸åŒçš„æ·»åŠ å•†å“å…¥å£ï¼Œæ˜¯å¤šçº¿ç¨‹æ·»åŠ å•†å“çš„ï¼Œç°åœ¨æ”¹æˆåªèƒ½ç”±ä¸€ä¸ªçº¿ç¨‹æ·»åŠ å•†å“ï¼Œè¿™æ ·ä¿®æ”¹çš„ç»“æœå¯¼è‡´æ·»åŠ å•†å“çš„æ•´ä½“æ•ˆç‡é™ä½äº†ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±æ­¤ï¼Œç»¼åˆè€ƒè™‘äº†ä¸€ä¸‹å„æ–¹é¢å› ç´ ï¼Œè¿™ä¸ªæ–¹æ¡ˆæœ€ç»ˆè¢«å¦å®šäº†ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;7. insert on duplicate key update&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶å®ï¼Œåœ¨mysqlä¸­å­˜åœ¨è¿™æ ·çš„è¯­æ³•ï¼Œå³ï¼š&lt;code&gt;insert on duplicate key update&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æ·»åŠ æ•°æ®æ—¶ï¼Œmysqlå‘ç°æ•°æ®ä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥&lt;code&gt;insert&lt;/code&gt;ã€‚å¦‚æœå‘ç°æ•°æ®å·²ç»å­˜åœ¨äº†ï¼Œåˆ™åš&lt;code&gt;update&lt;/code&gt;æ“ä½œã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸è¿‡è¦æ±‚è¡¨ä¸­å­˜åœ¨&lt;code&gt;å”¯ä¸€ç´¢å¼•&lt;/code&gt;æˆ–&lt;code&gt;PRIMARY KEY&lt;/code&gt;ï¼Œè¿™æ ·å½“è¿™ä¸¤ä¸ªå€¼ç›¸åŒæ—¶ï¼Œæ‰ä¼šè§¦å‘æ›´æ–°æ“ä½œï¼Œå¦åˆ™æ˜¯æ’å…¥ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç°åœ¨çš„é—®é¢˜æ˜¯PRIMARY KEYæ˜¯å•†å“è¡¨çš„ä¸»é”®ï¼Œæ˜¯æ ¹æ®&lt;code&gt;é›ªèŠ±ç®—æ³•&lt;/code&gt;æå‰ç”Ÿæˆçš„ï¼Œä¸å¯èƒ½äº§ç”Ÿé‡å¤çš„æ•°æ®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†ç”±äºå•†å“è¡¨æœ‰é€»è¾‘åˆ é™¤åŠŸèƒ½ï¼Œå¯¼è‡´å”¯ä¸€ç´¢å¼•åœ¨å•†å“è¡¨ä¸­åˆ›å»ºä¸äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±æ­¤ï¼Œinsert on duplicate key updateè¿™å¥—æ–¹æ¡ˆï¼Œæš‚æ—¶ä¹Ÿæ²¡æ³•ç”¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤å¤–ï¼Œinsert on duplicate key updateåœ¨é«˜å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œå¯èƒ½ä¼šäº§ç”Ÿ&lt;code&gt;æ­»é”&lt;/code&gt;é—®é¢˜ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„ä¸€ä¸‹ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;8. insert ignore&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨mysqlä¸­è¿˜å­˜åœ¨è¿™æ ·çš„è¯­æ³•ï¼Œå³ï¼š&lt;code&gt;insert ... ignore&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨insertè¯­å¥æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼šmysqlå‘ç°å¦‚æœæ•°æ®é‡å¤äº†ï¼Œå°±å¿½ç•¥ï¼Œå¦åˆ™å°±ä¼šæ’å…¥ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ƒä¸»è¦æ˜¯ç”¨æ¥å¿½ç•¥ï¼Œæ’å…¥é‡å¤æ•°æ®äº§ç”Ÿçš„&lt;code&gt;Duplicate entry &#x27;XXX&#x27; for key &#x27;XXXX&#x27;&lt;/code&gt;å¼‚å¸¸çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸è¿‡ä¹Ÿè¦æ±‚è¡¨ä¸­å­˜åœ¨&lt;code&gt;å”¯ä¸€ç´¢å¼•&lt;/code&gt;æˆ–&lt;code&gt;PRIMARY KEY&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†ç”±äºå•†å“è¡¨æœ‰é€»è¾‘åˆ é™¤åŠŸèƒ½ï¼Œå¯¼è‡´å”¯ä¸€ç´¢å¼•åœ¨å•†å“è¡¨ä¸­åˆ›å»ºä¸äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±æ­¤å¯è§ï¼Œè¿™ä¸ªæ–¹æ¡ˆä¹Ÿä¸è¡Œã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¸©é¦¨çš„æé†’ä¸€ä¸‹ï¼Œä½¿ç”¨insert ... ignoreä¹Ÿæœ‰å¯èƒ½ä¼šå¯¼è‡´&lt;code&gt;æ­»é”&lt;/code&gt;ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;9. é˜²é‡è¡¨&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¹‹å‰èŠè¿‡ï¼Œå› ä¸ºæœ‰é€»è¾‘åˆ é™¤åŠŸèƒ½ï¼Œç»™å•†å“è¡¨åŠ å”¯ä¸€ç´¢å¼•ï¼Œè¡Œä¸é€šã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åé¢åˆè¯´äº†åŠ åˆ†å¸ƒå¼é”ï¼Œæˆ–è€…é€šè¿‡mqå•çº¿ç¨‹å¼‚æ­¥æ·»åŠ å•†å“ï¼Œå½±å“åˆ›å»ºå•†å“çš„æ€§èƒ½ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£ä¹ˆï¼Œå¦‚ä½•è§£å†³é—®é¢˜å‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬èƒ½å¦æ¢ä¸€ç§æ€è·¯ï¼ŒåŠ ä¸€å¼ &lt;code&gt;é˜²é‡è¡¨&lt;/code&gt;ï¼Œ&lt;strong&gt;åœ¨é˜²é‡è¡¨ä¸­å¢åŠ å•†å“è¡¨çš„nameå’Œmodelå­—æ®µä½œä¸ºå”¯ä¸€ç´¢å¼•ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;CREATE&lt;/span&gt;Â &lt;span&gt;TABLE&lt;/span&gt;Â &lt;span&gt;`product_unique`&lt;/span&gt;Â (&lt;br/&gt;Â Â &lt;span&gt;`id`&lt;/span&gt;Â &lt;span&gt;bigint&lt;/span&gt;(&lt;span&gt;20&lt;/span&gt;)Â &lt;span&gt;NOT&lt;/span&gt;Â &lt;span&gt;NULL&lt;/span&gt;Â &lt;span&gt;COMMENT&lt;/span&gt;Â &lt;span&gt;&#x27;id&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;`name`&lt;/span&gt;Â &lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;130&lt;/span&gt;)Â &lt;span&gt;DEFAULT&lt;/span&gt;Â &lt;span&gt;NULL&lt;/span&gt;Â &lt;span&gt;COMMENT&lt;/span&gt;Â &lt;span&gt;&#x27;åç§°&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;`model`&lt;/span&gt;Â &lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;255&lt;/span&gt;)Â Â &lt;span&gt;NOT&lt;/span&gt;Â &lt;span&gt;NULL&lt;/span&gt;Â &lt;span&gt;COMMENT&lt;/span&gt;Â &lt;span&gt;&#x27;è§„æ ¼&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;`user_id`&lt;/span&gt;Â &lt;span&gt;bigint&lt;/span&gt;(&lt;span&gt;20&lt;/span&gt;)Â &lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;NOT&lt;/span&gt;Â &lt;span&gt;NULL&lt;/span&gt;Â &lt;span&gt;COMMENT&lt;/span&gt;Â &lt;span&gt;&#x27;åˆ›å»ºç”¨æˆ·id&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;`user_name`&lt;/span&gt;Â &lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;30&lt;/span&gt;)Â Â &lt;span&gt;NOT&lt;/span&gt;Â &lt;span&gt;NULL&lt;/span&gt;Â &lt;span&gt;COMMENT&lt;/span&gt;Â &lt;span&gt;&#x27;åˆ›å»ºç”¨æˆ·åç§°&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;`create_date`&lt;/span&gt;Â datetime(&lt;span&gt;3&lt;/span&gt;)Â &lt;span&gt;NOT&lt;/span&gt;Â &lt;span&gt;NULL&lt;/span&gt;Â &lt;span&gt;DEFAULT&lt;/span&gt;Â &lt;span&gt;CURRENT_TIMESTAMP&lt;/span&gt;(&lt;span&gt;3&lt;/span&gt;)Â &lt;span&gt;COMMENT&lt;/span&gt;Â &lt;span&gt;&#x27;åˆ›å»ºæ—¶é—´&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â PRIMARYÂ &lt;span&gt;KEY&lt;/span&gt;Â (&lt;span&gt;`id`&lt;/span&gt;),&lt;br/&gt;Â Â &lt;span&gt;UNIQUE&lt;/span&gt;Â &lt;span&gt;KEY&lt;/span&gt;Â &lt;span&gt;`ux_name_model`&lt;/span&gt;Â (&lt;span&gt;`name`&lt;/span&gt;,&lt;span&gt;`model`&lt;/span&gt;)&lt;br/&gt;)Â &lt;span&gt;ENGINE&lt;/span&gt;=&lt;span&gt;InnoDB&lt;/span&gt;Â &lt;span&gt;DEFAULT&lt;/span&gt;Â &lt;span&gt;CHARSET&lt;/span&gt;=utf8mb4Â &lt;span&gt;COMMENT&lt;/span&gt;=&lt;span&gt;&#x27;å•†å“é˜²é‡è¡¨&#x27;&lt;/span&gt;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­è¡¨ä¸­çš„idå¯ä»¥ç”¨å•†å“è¡¨çš„idï¼Œè¡¨ä¸­çš„nameå’Œmodelå°±æ˜¯å•†å“è¡¨çš„nameå’Œmodelï¼Œä¸è¿‡åœ¨è¿™å¼ é˜²é‡è¡¨ä¸­å¢åŠ äº†è¿™ä¸¤ä¸ªå­—æ®µçš„å”¯ä¸€ç´¢å¼•ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è§†é‡ä¸€ä¸‹å­è¢«æ‰“å¼€äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æ·»åŠ å•†å“æ•°æ®ä¹‹å‰ï¼Œå…ˆæ·»åŠ é˜²é‡è¡¨ã€‚å¦‚æœæ·»åŠ æˆåŠŸï¼Œåˆ™è¯´æ˜å¯ä»¥æ­£å¸¸æ·»åŠ å•†å“ï¼Œå¦‚æœæ·»åŠ å¤±è´¥ï¼Œåˆ™è¯´æ˜æœ‰é‡å¤æ•°æ®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é˜²é‡è¡¨æ·»åŠ å¤±è´¥ï¼Œåç»­çš„ä¸šåŠ¡å¤„ç†ï¼Œè¦æ ¹æ®å®é™…ä¸šåŠ¡éœ€æ±‚è€Œå®šã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœä¸šåŠ¡ä¸Šå…è®¸æ·»åŠ ä¸€æ‰¹å•†å“æ—¶ï¼Œå‘ç°æœ‰é‡å¤çš„ï¼Œç›´æ¥æŠ›å¼‚å¸¸ï¼Œåˆ™å¯ä»¥æç¤ºç”¨æˆ·ï¼šç³»ç»Ÿæ£€æµ‹åˆ°é‡å¤çš„å•†å“ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;try&lt;/span&gt;Â {&lt;br/&gt;Â Â transactionTemplate.execute((status)Â -&amp;gt;Â {&lt;br/&gt;Â Â Â Â Â Â productUniqueMapper.batchInsert(productUniqueList);&lt;br/&gt;Â Â Â Â Â Â productMapper.batchInsert(productList);&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â Boolean.TRUE;&lt;br/&gt;Â Â });&lt;br/&gt;}Â &lt;span&gt;catch&lt;/span&gt;(DuplicateKeyExceptionÂ e)Â {&lt;br/&gt;Â Â Â &lt;span&gt;throw&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â BusinessException(&lt;span&gt;&quot;ç³»ç»Ÿæ£€æµ‹åˆ°é‡å¤çš„å•†å“ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•&quot;&lt;/span&gt;);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æ‰¹é‡æ’å…¥æ•°æ®æ—¶ï¼Œå¦‚æœå‡ºç°äº†é‡å¤æ•°æ®ï¼Œæ•è·&lt;code&gt;DuplicateKeyException&lt;/code&gt;å¼‚å¸¸ï¼Œè½¬æ¢æˆ&lt;code&gt;BusinessException&lt;/code&gt;è¿™æ ·è¿è¡Œæ—¶çš„ä¸šåŠ¡å¼‚å¸¸ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿˜æœ‰ä¸€ç§ä¸šåŠ¡åœºæ™¯ï¼Œè¦æ±‚å³ä½¿å‡ºç°äº†é‡å¤çš„å•†å“ï¼Œä¹Ÿä¸æŠ›å¼‚å¸¸ï¼Œè®©ä¸šåŠ¡æµç¨‹ä¹Ÿèƒ½å¤Ÿæ­£å¸¸èµ°ä¸‹å»ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;try&lt;/span&gt;Â {&lt;br/&gt;Â Â transactionTemplate.execute((status)Â -&amp;gt;Â {&lt;br/&gt;Â Â Â Â Â Â productUniqueMapper.insert(productUnique);&lt;br/&gt;Â Â Â Â Â Â productMapper.insert(product);&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â Boolean.TRUE;&lt;br/&gt;Â Â });&lt;br/&gt;}Â &lt;span&gt;catch&lt;/span&gt;(DuplicateKeyExceptionÂ e)Â {&lt;br/&gt;Â Â Â productÂ =Â productMapper.query(product);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æ’å…¥æ•°æ®æ—¶ï¼Œå¦‚æœå‡ºç°äº†é‡å¤æ•°æ®ï¼Œåˆ™æ•è·&lt;code&gt;DuplicateKeyException&lt;/code&gt;ï¼Œåœ¨&lt;code&gt;catch&lt;/code&gt;ä»£ç å—ä¸­å†æŸ¥è¯¢ä¸€æ¬¡å•†å“æ•°æ®ï¼Œå°†æ•°æ®åº“å·²æœ‰çš„å•†å“ç›´æ¥è¿”å›ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœè°ƒç”¨äº†åŒæ­¥æ·»åŠ å•†å“çš„æ¥å£ï¼Œè¿™é‡Œéå¸¸å…³é”®çš„ä¸€ç‚¹ï¼Œæ˜¯è¦è¿”å›å·²æœ‰æ•°æ®çš„idï¼Œä¸šåŠ¡ç³»ç»Ÿåšåç»­æ“ä½œï¼Œè¦æ‹¿è¿™ä¸ªidæ“ä½œã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ç„¶åœ¨æ‰§è¡Œexecuteä¹‹å‰ï¼Œè¿˜æ˜¯éœ€è¦å…ˆæŸ¥ä¸€ä¸‹å•†å“æ•°æ®æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå·²ç»å­˜åœ¨ï¼Œåˆ™ç›´æ¥è¿”å›å·²æœ‰æ•°æ®ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œæ‰æ‰§è¡Œexecuteæ–¹æ³•ã€‚è¿™ä¸€æ­¥åƒä¸‡ä¸èƒ½å°‘ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;ProductÂ oldProductÂ =Â productMapper.query(product);&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;(Objects.nonNull(oldProduct))Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â oldProduct;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;try&lt;/span&gt;Â {&lt;br/&gt;Â Â transactionTemplate.execute((status)Â -&amp;gt;Â {&lt;br/&gt;Â Â Â Â Â Â productUniqueMapper.insert(productUnique);&lt;br/&gt;Â Â Â Â Â Â productMapper.insert(product);&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â Boolean.TRUE;&lt;br/&gt;Â Â });&lt;br/&gt;}Â &lt;span&gt;catch&lt;/span&gt;(DuplicateKeyExceptionÂ e)Â {&lt;br/&gt;Â Â Â productÂ =Â productMapper.query(product);&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;return&lt;/span&gt;Â product;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;åƒä¸‡æ³¨æ„ï¼šé˜²é‡è¡¨å’Œæ·»åŠ å•†å“çš„æ“ä½œå¿…é¡»è¦åœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå¦åˆ™ä¼šå‡ºé—®é¢˜ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œè¿˜éœ€è¦å¯¹å•†å“çš„åˆ é™¤åŠŸèƒ½åšç‰¹æ®Šå¤„ç†ä¸€ä¸‹ï¼Œåœ¨é€»è¾‘åˆ é™¤å•†å“è¡¨çš„åŒæ—¶ï¼Œè¦ç‰©ç†åˆ é™¤é˜²é‡è¡¨ã€‚ç”¨å•†å“è¡¨idä½œä¸ºæŸ¥è¯¢æ¡ä»¶å³å¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯´å®è¯ï¼Œè§£å†³é‡å¤æ•°æ®é—®é¢˜çš„æ–¹æ¡ˆæŒºå¤šçš„ï¼Œæ²¡æœ‰æœ€å¥½çš„æ–¹æ¡ˆï¼Œåªæœ‰æœ€é€‚åˆä¸šåŠ¡åœºæ™¯çš„ï¼Œæœ€ä¼˜çš„æ–¹æ¡ˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œæˆ–è€…æœ‰æ‰€å¯å‘çš„&lt;/span&gt;&lt;span&gt;è¯ï¼Œå¸®å¿™æ‰«æä¸‹å‘äºŒç»´ç å…³æ³¨ä¸€ä¸‹ï¼Œæ‚¨çš„æ”¯æŒæ˜¯æˆ‘åšæŒå†™ä½œæœ€å¤§çš„åŠ¨åŠ›ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>87f80252163dcd2cd2ad5e43237d881b</guid>
<title>innodb æ˜¯å¦‚ä½•å­˜æ•°æ®çš„ï¼Ÿ</title>
<link>https://toutiao.io/k/bxpv123</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;section&gt;&lt;span&gt;å¦‚æœä½ ä½¿ç”¨è¿‡mysqlæ•°æ®åº“ï¼Œå¯¹å®ƒçš„å­˜å‚¨å¼•æ“ï¼š&lt;/span&gt;&lt;code&gt;&lt;span&gt;innodb&lt;/span&gt;&lt;/code&gt;&lt;span&gt;ï¼Œä¸€å®šä¸ä¼šæ„Ÿåˆ°é™Œç”Ÿã€‚&lt;/span&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨mysql5ä»¥å‰ï¼Œé»˜è®¤çš„å­˜å‚¨å¼•æ“æ˜¯ï¼šmyslamã€‚ä½†mysql5ä¹‹åï¼Œé»˜è®¤çš„å­˜å‚¨å¼•æ“å·²ç»å˜æˆäº†ï¼šinnodbï¼Œå®ƒæ˜¯æˆ‘ä»¬å»ºè¡¨çš„é¦–é€‰å­˜å‚¨å¼•æ“ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;é‚£ä¹ˆï¼Œé—®é¢˜æ¥äº†ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;innodbåº•å±‚æ˜¯å¦‚ä½•å­˜å‚¨æ•°æ®çš„ï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è¡¨ä¸­æœ‰å“ªäº›éšè—åˆ—ï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç”¨æˆ·è®°å½•ä¹‹é—´æ˜¯å¦‚ä½•å…³è”èµ·æ¥çš„ï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å¦‚æœä½ æƒ³çŸ¥é“ä¸Šé¢ä¸‰ä¸ªé—®é¢˜çš„ç­”æ¡ˆï¼Œé‚£ä¹ˆï¼Œè¯·ç»§ç»­å¾€ä¸‹é¢çœ‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;1.ç£ç›˜orå†…å­˜ï¼Ÿ&lt;/span&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;1.1 ç£ç›˜&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ•°æ®å¯¹ç³»ç»Ÿæ¥è¯´æ˜¯éå¸¸é‡è¦çš„ä¸œè¥¿ï¼Œæ¯”å¦‚ï¼šç”¨æˆ·çš„èº«ä»½è¯ã€æ‰‹æœºå·ã€é“¶è¡Œå·ã€ä¼šå‘˜è¿‡æœŸæ—¶é—´ã€ç§¯åˆ†ç­‰ç­‰ã€‚ä¸€æ—¦ä¸¢å¤±ï¼Œä¼šå¯¹ç”¨æˆ·é€ æˆå¾ˆå¤§çš„å½±å“ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚ä½•æ‰èƒ½ä¿è¯è¿™äº›é‡è¦çš„æ•°æ®ä¸ä¸¢å‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;ç­”æ¡ˆï¼šæŠŠæ•°æ®å­˜åœ¨ç£ç›˜ä¸Šã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å½“ç„¶æœ‰äººä¼šè¯´ï¼Œå¦‚æœç£ç›˜åäº†æ€ä¹ˆåŠï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;é‚£å°±éœ€è¦å¤‡ä»½ï¼Œæˆ–è€…åšä¸»ä»äº†ã€‚ã€‚ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å¥½äº†ï¼Œæ‰“ä½ï¼Œè¿™ä¸æ˜¯ä»Šå¤©çš„é‡ç‚¹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¨€å½’æ­£ä¼ ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å¤§å®¶éƒ½çŸ¥é“ï¼Œä»ç£ç›˜ä¸Šè¯»å†™æ•°æ®ï¼Œè‡³å°‘éœ€è¦ä¸¤æ¬¡IOè¯·æ±‚æ‰èƒ½å®Œæˆã€‚ä¸€æ¬¡æ˜¯è¯»IOï¼Œå¦ä¸€æ¬¡æ˜¯å†™IOã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è€ŒIOè¯·æ±‚æ˜¯æ¯”è¾ƒè€—æ—¶çš„æ“ä½œï¼Œå¦‚æœé¢‘ç¹çš„è¿›è¡ŒIOè¯·æ±‚åŠ¿å¿…ä¼šå½±å“æ•°æ®åº“çš„æ€§èƒ½ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;é‚£ä¹ˆï¼Œå¦‚ä½•æ‰èƒ½è§£å†³æ•°æ®åº“çš„æ€§èƒ½é—®é¢˜å‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;1.2 å†…å­˜&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æŠŠæ•°æ®å­˜åœ¨å¯„å­˜å™¨ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ²¡é”™ï¼Œæ“ä½œç³»ç»Ÿä»å¯„å­˜å™¨ä¸­è¯»å–æ•°æ®æ˜¯æœ€å¿«çš„ï¼Œå› ä¸ºå®ƒç¦»CPUæœ€è¿‘ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä½†æ˜¯å¯„å­˜å™¨æœ‰ä¸ªéå¸¸è‡´å‘½çš„é—®é¢˜æ˜¯ï¼šå®ƒåªèƒ½å­˜å‚¨éå¸¸å°‘é‡çš„æ•°æ®ï¼Œè®¾è®¡å®ƒçš„ç›®çš„ä¸»è¦æ˜¯ç”¨æ¥æš‚å­˜æŒ‡ä»¤å’Œåœ°å€ï¼Œå¹¶éå­˜å‚¨å¤§é‡ç”¨æˆ·æ•°æ®çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;è¿™æ ·çœ‹æ¥ï¼Œåªèƒ½æŠŠæ•°æ®å­˜åœ¨å†…å­˜ä¸­äº†ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å› ä¸ºå†…å­˜åŒæ ·èƒ½æ»¡è¶³æˆ‘ä»¬ï¼Œå¿«é€Ÿè¯»å–å’Œå†™å…¥æ•°æ®çš„éœ€æ±‚ï¼Œè€Œä¸”æ€§èƒ½æ˜¯éå¸¸å¯è§‚çš„ï¼Œåªæ˜¯æ¯”è¾ƒå¯„å­˜å™¨ç¨ç¨æ…¢äº†ä¸€ä¸¢ä¸¢è€Œå·²ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä¸è¿‡æœ‰ä¸ªè®©äººè®¨åŒçš„åœ°æ–¹æ˜¯ï¼Œå†…å­˜ç›¸å¯¹äºç£ç›˜æ¥è¯´ï¼Œæ˜¯æ›´åŠ æ˜‚è´µçš„èµ„æºã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œ500Gæˆ–è€…1Tçš„ç£ç›˜ï¼Œæ˜¯å¾ˆå¸¸è§çš„ã€‚ä½†ä½ æœ‰å¬è¯´è¿‡æœ‰500Gçš„å†…å­˜å—ï¼Ÿåˆ«äººä¼šä»¥ä¸ºä½ ç–¯äº†ã€‚å†…å­˜å¤§å°è®¨è®ºçš„æ•°é‡çº§ä¸€èˆ¬æ˜¯16Gæˆ–32Gã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å†…å­˜å¯ä»¥å­˜å‚¨ä¸€äº›ç”¨æˆ·æ•°æ®ï¼Œä½†æ— æ³•å­˜å‚¨æ‰€æœ‰çš„ç”¨æˆ·æ•°æ®ï¼Œå› ä¸ºå¦‚æœæ•°æ®é‡å¤ªå¤§äº†ï¼Œå®ƒå¯èƒ½è¿˜æ˜¯å­˜ä¸ä¸‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ­¤å¤–ï¼Œå³ä½¿ç”¨æˆ·æ•°æ®èƒ½åˆšå¥½å­˜åœ¨å†…å­˜ï¼Œä»¥åä¸‡ä¸€æœ‰ä¸€å¤©ï¼Œæ•°æ®åº“æœåŠ¡å™¨æˆ–è€…éƒ¨ç½²èŠ‚ç‚¹æŒ‚äº†ï¼Œæˆ–è€…é‡å¯äº†ï¼Œæ•°æ®ä¸å°±ä¸¢äº†ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ€ä¹ˆåšï¼Œæ‰èƒ½ä¸ä¼šå› ä¸ºå¼‚å¸¸æƒ…å†µï¼Œè€Œä¸¢æ•°æ®ã€‚åŒæ—¶ï¼Œåˆèƒ½ä¿è¯æ•°æ®çš„è¯»å†™é€Ÿåº¦å‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;2.æ•°æ®é¡µ&lt;/span&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æˆ‘ä»¬å¯ä»¥æŠŠä¸€æ‰¹æ•°æ®æ”¾åœ¨ä¸€èµ·ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å†™æ“ä½œæ—¶ï¼Œå…ˆå°†æ•°æ®å†™åˆ°å†…å­˜çš„æŸä¸ªæ‰¹æ¬¡ä¸­ï¼Œç„¶åå†å°†è¯¥æ‰¹æ¬¡çš„æ•°æ®ä¸€æ¬¡æ€§åˆ·åˆ°ç£ç›˜ä¸Šã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¯»æ“ä½œæ—¶ï¼Œä»ç£ç›˜ä¸Šä¸€æ¬¡è¯»ä¸€æ‰¹æ•°æ®ï¼Œç„¶ååŠ è½½åˆ°å†…å­˜å½“ä¸­ï¼Œä»¥åå°±åœ¨å†…å­˜ä¸­æ“ä½œã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8022727272727272&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/uL371281oDER9lbESUVq7L6u9ftCRzaTBwXKnlhniafxnXXvcfz4Erutjxaicj6rkYCicx2zvgBic130771ib62s8rg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;880&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å°†å†…å­˜ä¸­çš„æ•°æ®åˆ·åˆ°ç£ç›˜ï¼Œæˆ–è€…å°†ç£ç›˜ä¸­çš„æ•°æ®åŠ è½½åˆ°å†…å­˜ï¼Œéƒ½æ˜¯ä»¥æ‰¹æ¬¡ä¸ºå•ä½ï¼Œè¿™ä¸ªæ‰¹æ¬¡å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ï¼š&lt;/span&gt;&lt;code&gt;æ•°æ®é¡µ&lt;/code&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å½“ç„¶innodbä¸­å­˜åœ¨å¤šç§ä¸åŒç±»å‹çš„é¡µï¼Œæ•°æ®é¡µåªæ˜¯å…¶ä¸­ä¸€ç§ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œé‡ç‚¹ä»‹ç»ä¸€ä¸‹æ•°æ®é¡µã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä»€ä¹ˆæ˜¯æ•°æ®é¡µï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ•°æ®é¡µä¸»è¦æ˜¯ç”¨æ¥å­˜å‚¨è¡¨ä¸­è®°å½•çš„ï¼Œå®ƒåœ¨ç£ç›˜ä¸­æ˜¯ç”¨åŒå‘é“¾è¡¨ç›¸è¿çš„ï¼Œæ–¹ä¾¿æŸ¥æ‰¾ï¼Œèƒ½å¤Ÿéå¸¸å¿«é€Ÿå¾—ä»ä¸€ä¸ªæ•°æ®é¡µï¼Œå®šä½åˆ°å¦ä¸€ä¸ªæ•°æ®é¡µã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å¾ˆå¤šæ—¶å€™ï¼Œç”±äºæˆ‘ä»¬è¡¨ä¸­çš„æ•°æ®æ¯”è¾ƒå¤šï¼Œåœ¨ç£ç›˜ä¸­å¯èƒ½å­˜æ”¾åœ¨å¤šä¸ªæ•°æ®é¡µå½“ä¸­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ‰ä¸€å¤©ï¼Œæˆ‘ä»¬è¦æ ¹æ®æŸä¸ªæ¡ä»¶æŸ¥è¯¢æ•°æ®æ—¶ï¼Œéœ€è¦ä»ä¸€ä¸ªæ•°æ®é¡µæ‰¾åˆ°å¦ä¸€ä¸ªæ•°æ®é¡µï¼Œè¿™æ—¶å€™çš„åŒå‘é“¾è¡¨å°±æ´¾ä¸Šå¤§ç”¨åœºäº†ã€‚ç£ç›˜ä¸­å„æ•°æ®é¡µçš„æ•´ä½“ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.5654205607476634&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/uL371281oDER9lbESUVq7L6u9ftCRzaTrqmQSib5Pv6G7FUlkuAA2fSaMD1GTTD8ZyM7TeUUOmvkmLDMYlibiaqXg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;428&quot;/&gt;&lt;span&gt;é€šå¸¸æƒ…å†µä¸‹ï¼Œå•ä¸ªæ•°æ®é¡µé»˜è®¤çš„å¤§å°æ˜¯&lt;/span&gt;&lt;code&gt;16kb&lt;/code&gt;&lt;span&gt;ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å‚æ•°ï¼š&lt;/span&gt;&lt;code&gt;innodb_page_size&lt;/code&gt;&lt;span&gt;ï¼Œæ¥é‡æ–°è®¾ç½®å¤§å°ã€‚ä¸è¿‡ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç”¨å®ƒçš„é»˜è®¤å€¼å°±å¤Ÿäº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å¥½å§ï¼Œæ•°æ®é¡µçš„æ•´ä½“ç»“æ„å·²ç»ææ˜ç™½äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;é‚£ä¹ˆï¼Œå•ä¸ªæ•°æ®é¡µåŒ…å«å“ªäº›å†…å®¹å‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.607843137254902&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/uL371281oDER9lbESUVq7L6u9ftCRzaTuicGNp08dpZUgJVaZ28dZt4XHrsD5O2IQpE7t730ib4otYjbicOTuaePQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;408&quot;/&gt;&lt;span&gt;ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºï¼Œæ•°æ®é¡µä¸»è¦åŒ…å«å¦‚ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;æ–‡ä»¶å¤´éƒ¨&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é¡µå¤´éƒ¨&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœ€å¤§å’Œæœ€å°è®°å½•&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç”¨æˆ·è®°å½•&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç©ºé—²ç©ºé—´&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é¡µç›®å½•&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ–‡ä»¶å°¾éƒ¨&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.ç”¨æˆ·è®°å½•&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å¯¹äºæ–°ç”³è¯·çš„æ•°æ®é¡µï¼Œç”¨æˆ·è®°å½•æ˜¯ç©ºçš„ã€‚å½“æ’å…¥æ•°æ®æ—¶ï¼Œinnodbä¼šå°†ä¸€éƒ¨åˆ†&lt;/span&gt;&lt;code&gt;ç©ºé—²ç©ºé—´&lt;/code&gt;&lt;span&gt;åˆ†é…ç»™ç”¨æˆ·è®°å½•ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç”¨æˆ·è®°å½•æ˜¯innodbçš„é‡ä¸­ä¹‹é‡ï¼Œæˆ‘ä»¬å¹³æ—¶ä¿å­˜åˆ°æ•°æ®åº“ä¸­çš„æ•°æ®ï¼Œå°±å­˜å‚¨åœ¨å®ƒé‡Œé¢ã€‚é‚£ä¹ˆï¼Œå®ƒé‡Œé¢åˆåŒ…å«å“ªäº›å†…å®¹å‘¢ï¼Ÿä½ ä¸å¥½å¥‡å—ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å…¶å®åœ¨innodbæ”¯æŒçš„æ•°æ®è¡Œæ ¼å¼æœ‰å››ç§ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;compactè¡Œæ ¼å¼&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;redundantè¡Œæ ¼å¼&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;dynamicè¡Œæ ¼å¼&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;compressedè¡Œæ ¼å¼&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æˆ‘ä»¬ä»¥compactè¡Œæ ¼å¼ä¸ºä¾‹ï¼š&lt;/span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.22176308539944903&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/uL371281oDER9lbESUVq7L6u9ftCRzaTWR8QYayp9b3bhGCkRUhDMyfUkXbagFia4qJGZZTzULPFCTMSf8OFRhA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1452&quot;/&gt;&lt;span&gt;ä¸€æ¡ç”¨æˆ·è®°å½•ä¸»è¦åŒ…å«ä¸‰éƒ¨åˆ†å†…å®¹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;è®°å½•é¢å¤–ä¿¡æ¯ï¼Œå®ƒåŒ…å«äº†å˜é•¿å­—æ®µã€nullå€¼åˆ—è¡¨å’Œè®°å½•å¤´ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;éšè—åˆ—ï¼Œå®ƒåŒ…å«äº†è¡Œidã€äº‹åŠ¡idå’Œå›æ»šç‚¹ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;çœŸæ­£çš„æ•°æ®åˆ—ï¼ŒåŒ…å«çœŸæ­£çš„ç”¨æˆ·æ•°æ®ï¼Œå¯ä»¥æœ‰å¾ˆå¤šåˆ—ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä¸‹é¢è®©æˆ‘ä»¬ä¸€èµ·äº†è§£ä¸€ä¸‹è¿™äº›å†…å®¹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.1 é¢å¤–ä¿¡æ¯&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;é¢å¤–ä¿¡æ¯å¹¶éçœŸæ­£çš„ç”¨æˆ·æ•°æ®ï¼Œå®ƒæ˜¯ä¸ºäº†è¾…åŠ©å­˜æ•°æ®ç”¨çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.1.1 å˜é•¿å­—æ®µåˆ—è¡¨&lt;/span&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ‰äº›æ•°æ®å¦‚æœç›´æ¥å­˜ä¼šæœ‰é—®é¢˜ï¼Œæ¯”å¦‚ï¼šå¦‚æœæŸä¸ªå­—æ®µæ˜¯varcharæˆ–textç±»å‹ï¼Œå®ƒçš„é•¿åº¦ä¸å›ºå®šï¼Œå¯ä»¥æ ¹æ®å­˜å…¥æ•°æ®çš„é•¿åº¦ä¸åŒï¼Œè€Œéšä¹‹å˜åŒ–ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å¦‚æœä¸åœ¨ä¸€ä¸ªåœ°æ–¹è®°å½•æ•°æ®çœŸæ­£çš„é•¿åº¦ï¼Œinnodbå¾ˆå¯èƒ½ä¸çŸ¥é“è¦åˆ†é…å¤šå°‘ç©ºé—´ã€‚å‡å¦‚éƒ½æŒ‰æŸä¸ªå›ºå®šé•¿åº¦åˆ†é…ç©ºé—´ï¼Œä½†å®é™…æ•°æ®åˆæ²¡å å¤šå°‘ç©ºé—´ï¼Œå²‚ä¸æ˜¯ä¼šæµªè´¹ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ‰€ä»¥ï¼Œéœ€è¦åœ¨å˜é•¿å­—æ®µä¸­è®°å½•æŸä¸ªå˜é•¿å­—æ®µå ç”¨çš„å­—èŠ‚æ•°ï¼Œæ–¹ä¾¿æŒ‰éœ€åˆ†é…ç©ºé—´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.1.2 nullå€¼åˆ—è¡¨&lt;/span&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ•°æ®åº“ä¸­æœ‰äº›å­—æ®µçš„å€¼å…è®¸ä¸ºnullï¼Œå¦‚æœæŠŠæ¯ä¸ªå­—æ®µçš„nullå€¼ï¼Œéƒ½ä¿å­˜åˆ°ç”¨æˆ·è®°å½•ä¸­ï¼Œæ˜¾ç„¶æœ‰äº›æµªè´¹å­˜å‚¨ç©ºé—´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ‰æ²¡æœ‰åŠæ³•åªç®€å•çš„æ ‡è®°ä¸€ä¸‹ï¼Œä¸å­˜å‚¨å®é™…çš„nullå€¼å‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç­”æ¡ˆï¼šå°†ä¸ºnullçš„å­—æ®µä¿å­˜åˆ°nullå€¼åˆ—è¡¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;åœ¨åˆ—è¡¨ä¸­ç”¨äºŒè¿›åˆ¶çš„å€¼1ï¼Œè¡¨ç¤ºè¯¥å­—æ®µå…è®¸ä¸ºnullï¼Œç”¨0è¡¨ç¤ºä¸å…è®¸ä¸ºnullã€‚å®ƒåªå ç”¨äº†1ä½ï¼Œå°±èƒ½è¡¨ç¤ºæŸä¸ªå­—ç¬¦æ˜¯å¦ä¸ºnullï¼Œç¡®å®å¯ä»¥èŠ‚çœå¾ˆå¤šå­˜å‚¨ç©ºé—´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.1.3 è®°å½•å¤´ä¿¡æ¯&lt;/span&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è®°å½•å¤´ä¿¡æ¯ç”¨äºæè¿°ä¸€äº›ç‰¹æ®Šçš„å±æ€§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.21900161030595813&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/uL371281oDER9lbESUVq7L6u9ftCRzaTsFNKxYEMAjLkCarV0smyTfcRCqP11xdcaBA11ySIuz2v2qIOp57Dicg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1242&quot;/&gt;&lt;span&gt;å®ƒä¸»è¦åŒ…å«ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;deleted_flagï¼šå³åˆ é™¤æ ‡è®°ï¼Œç”¨äºæ ‡è®°è¯¥è®°å½•æ˜¯å¦è¢«åˆ é™¤äº†ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;min_rec_flagï¼šå³æœ€å°ç›®å½•æ ‡è®°ï¼Œå®ƒæ˜¯éå¶å­èŠ‚ç‚¹ä¸­çš„æœ€å°ç›®å½•æ ‡è®°ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;n_ownedï¼šå³æ‹¥æœ‰çš„è®°å½•æ•°ï¼Œè®°å½•è¯¥ç»„ç´¢å¼•è®°å½•çš„æ¡æ•°ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;heap_noï¼šå³å †ä¸Šçš„ä½ç½®ï¼Œå®ƒè¡¨ç¤ºå½“å‰è®°å½•åœ¨å †ä¸Šçš„ä½ç½®ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;record_typeï¼šå³è®°å½•ç±»å‹ï¼Œå…¶ä¸­ï¼š0è¡¨ç¤ºæ™®é€šè®°å½•ï¼Œ1è¡¨ç¤ºéå¶å­èŠ‚ç‚¹ï¼Œ2è¡¨ç¤ºInfrimumè®°å½•ï¼Œ 3è¡¨ç¤ºSupremumè®°å½•ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;next_recordï¼šå³ä¸‹ä¸€æ¡è®°å½•çš„ä½ç½®ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.2 éšè—åˆ—&lt;/span&gt;&lt;/h3&gt;&lt;section&gt;&lt;span&gt;æ•°æ®åº“åœ¨ä¿å­˜ä¸€æ¡ç”¨æˆ·è®°å½•æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€äº›éšè—åˆ—ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/span&gt;&lt;/section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4148471615720524&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/uL371281oDER9lbESUVq7L6u9ftCRzaT9JJTf5zsLLmjOduicsWlCibbW0OEWHz87pzDzoJItibjuWCu3b0yzsubA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;458&quot;/&gt;&lt;span&gt;ç›®å‰innodbè‡ªåŠ¨åˆ›å»ºçš„éšè—åˆ—æœ‰ä¸‰ç§ï¼š&lt;/span&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;db_row_idï¼Œå³è¡Œidï¼Œå®ƒæ˜¯ä¸€æ¡è®°å½•çš„å”¯ä¸€æ ‡è¯†ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;db_trx_idï¼Œå³äº‹åŠ¡idï¼Œå®ƒæ˜¯äº‹åŠ¡çš„å”¯ä¸€æ ‡è¯†ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;db_roll_ptrï¼Œå³å›æ»šç‚¹ï¼Œå®ƒç”¨äºäº‹åŠ¡å›æ»šã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å¦‚æœè¡¨ä¸­æœ‰ä¸»é”®ï¼Œåˆ™ç”¨ä¸»é”®åšè¡Œidï¼Œæ— éœ€é¢å¤–åˆ›å»ºã€‚å¦‚æœè¡¨ä¸­æ²¡æœ‰ä¸»é”®ï¼Œå‡å¦‚æœ‰ä¸ä¸ºnullçš„uniqueå”¯ä¸€é”®ï¼Œåˆ™ç”¨å®ƒåšä¸ºè¡Œidï¼ŒåŒæ ·æ— éœ€é¢å¤–åˆ›å»ºã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å¦‚æœè¡¨ä¸­æ—¢æ²¡æœ‰ä¸»é”®ï¼Œåˆæ²¡æœ‰å”¯ä¸€é”®ï¼Œåˆ™æ•°æ®åº“ä¼šè‡ªåŠ¨åˆ›å»ºè¡Œidã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä¹Ÿå°±æ˜¯è¯´åœ¨innodbä¸­ï¼Œéšè—åˆ—ä¸­&lt;/span&gt;&lt;code&gt;äº‹åŠ¡id&lt;/code&gt;&lt;span&gt;å’Œ&lt;/span&gt;&lt;code&gt;å›æ»šç‚¹&lt;/code&gt;&lt;span&gt;æ˜¯ä¸€å®šä¼šè¢«åˆ›å»ºçš„ï¼Œä½†è¡Œidè¦æ ¹æ®å®é™…æƒ…å†µå†³å®šã€‚&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.3 çœŸæ­£æ•°æ®åˆ—&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;çœŸæ­£çš„æ•°æ®åˆ—ä¸­å­˜å‚¨äº†ç”¨æˆ·çš„çœŸå®æ•°æ®ï¼Œå®ƒå¯ä»¥åŒ…å«å¾ˆå¤šåˆ—çš„æ•°æ®ã€‚è¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œæ²¡æœ‰ä»€ä¹ˆå¥½å¤šè¯´çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.4 ç”¨æˆ·è®°å½•æ˜¯å¦‚ä½•ç›¸è¿çš„ï¼Ÿ&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;é€šè¿‡ä¸Šé¢ä»‹ç»çš„å†…å®¹ï¼Œå¤§å®¶å¯¹ä¸€æ¡ç”¨æˆ·è®°å½•æ˜¯å¦‚ä½•å­˜å‚¨çš„ï¼Œåº”è¯¥æœ‰äº†ä¸€å®šçš„è®¤è¯†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä½†é—®é¢˜æ¥äº†ï¼Œä¸€æ¡ç”¨æˆ·è®°å½•å’Œå¦ä¸€æ¡ç”¨æˆ·è®°å½•æ˜¯å¦‚ä½•ç›¸è¿çš„ï¼Œinnodbæ˜¯æ€ä¹ˆçŸ¥é“ï¼ŒæŸæ¡è®°å½•çš„ä¸‹ä¸€æ¡è®°å½•æ˜¯è°ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç­”æ¡ˆæ˜¯ï¼šç”¨å‰é¢æåˆ°è¿‡çš„ï¼Œ è®°å½•é¢å¤–ä¿¡æ¯ ã€‹ è®°å½•å¤´ä¿¡æ¯ ã€‹ä¸‹ä¸€æ¡è®°å½•çš„ä½ç½®ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.9116022099447514&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/uL371281oDER9lbESUVq7L6u9ftCRzaTGZ7pAQLNneVSVRwDmXR2icQBftNCKHVqd4wROSaJQJJT3AVbkX7srFA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1086&quot;/&gt;&lt;span&gt;å¤šæ¡ç”¨æˆ·è®°å½•ä¹‹é—´é€šè¿‡&lt;/span&gt;&lt;code&gt;ä¸‹ä¸€æ¡è®°å½•çš„ä½ç½®&lt;/code&gt;&lt;span&gt;ï¼Œç»„æˆäº†ä¸€ä¸ªå•å‘é“¾è¡¨ã€‚è¿™æ ·å°±èƒ½ä»å‰å¾€åï¼Œæ‰¾åˆ°æ‰€æœ‰çš„è®°å½•äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;4.æœ€å¤§å’Œæœ€å°è®°å½•&lt;/span&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä»ä¸Šé¢å¯ä»¥å¾—çŸ¥ï¼Œåœ¨ä¸€ä¸ªæ•°æ®é¡µå½“ä¸­ï¼Œå¦‚æœå­˜åœ¨å¤šæ¡ç”¨æˆ·è®°å½•ï¼Œå®ƒä»¬æ˜¯é€šè¿‡&lt;/span&gt;&lt;code&gt;ä¸‹ä¸€æ¡è®°å½•çš„ä½ç½®&lt;/code&gt;&lt;span&gt;ç›¸è¿çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä¸è¿‡æœ‰ä¸ªé—®é¢˜ï¼šå¦‚æœæ‰èƒ½å¿«é€Ÿæ‰¾åˆ°æœ€å¤§çš„è®°å½•å’Œæœ€å°çš„è®°å½•å‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¿™å°±éœ€è¦åœ¨ä¿å­˜ç”¨æˆ·è®°å½•çš„åŒæ—¶ï¼Œä¹Ÿä¿å­˜æœ€å¤§å’Œæœ€å°è®°å½•äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ€å¤§è®°å½•ä¿å­˜åˆ°Supremumè®°å½•ä¸­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ€å°è®°å½•ä¿å­˜åœ¨Infimumè®°å½•ä¸­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;åœ¨ä¿å­˜ç”¨æˆ·è®°å½•æ—¶ï¼Œæ•°æ®åº“ä¼šè‡ªåŠ¨åˆ›å»ºä¸¤æ¡é¢å¤–çš„è®°å½•ï¼šSupremum å’Œ Infimumã€‚å®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.5045871559633028&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/uL371281oDER9lbESUVq7L6u9ftCRzaTum4U3w1utKO16lVa3QKMDlCS1bEibG3icjmeBxZDRuWGma7jbudm81Jg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;654&quot;/&gt;&lt;span&gt;ä»å›¾ä¸­å¯ä»¥çœ‹å‡ºç”¨æˆ·æ•°æ®æ˜¯ä»æœ€å°è®°å½•å¼€å§‹ï¼Œé€šè¿‡ä¸‹ä¸€æ¡è®°å½•çš„ä½ç½®ï¼Œä»å°åˆ°å¤§ï¼Œä¸€æ­¥æ­¥æŸ¥æ‰¾ï¼Œæœ€åæ‰¾åˆ°æœ€å¤§è®°å½•ä¸ºæ­¢ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;5.é¡µç›®å½•&lt;/span&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœæˆ‘ä»¬è¦æŸ¥è¯¢æŸæ¡è®°å½•çš„è¯ï¼Œæ•°æ®åº“ä¼šä»æœ€å°è®°å½•å¼€å§‹ï¼Œä¸€æ¡æ¡æŸ¥æ‰¾æ‰€æœ‰è®°å½•ã€‚å¦‚æœä¸­é€”æ‰¾åˆ°äº†ï¼Œåˆ™ç›´æ¥è¿”å›è¯¥è®°å½•ã€‚å¦‚æœä¸€ç›´æ‰¾åˆ°æœ€å¤§è®°å½•ï¼Œè¿˜æ²¡æœ‰æ‰¾åˆ°æƒ³è¦çš„è®°å½•ï¼Œåˆ™è¿”å›ç©ºã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å’‹ä¸€çœ‹ï¼Œæ²¡æœ‰é—®é¢˜ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä½†å¦‚æœä»”ç»†æƒ³æƒ³ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ•ˆç‡ä¼šä¸ä¼šæœ‰ç‚¹ä½ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¿™ä¸æ˜¯è¦å¯¹æ•´é¡µç”¨æˆ·æ•°æ®è¿›è¡Œæ‰«æå—ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ‰æ²¡æœ‰æ›´é«˜æ•ˆçš„æ–¹æ³•ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¿™å°±éœ€è¦ä½¿ç”¨&lt;/span&gt;&lt;code&gt;é¡µç›®å½•&lt;/code&gt;&lt;span&gt;äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¯´ç™½äº†ï¼Œå°±æ˜¯æŠŠä¸€é¡µç”¨æˆ·è®°å½•åˆ†ä¸ºè‹¥å¹²ç»„ï¼Œæ¯ä¸€ç»„çš„æœ€å¤§è®°å½•éƒ½ä¿å­˜åˆ°ä¸€ä¸ªåœ°æ–¹ï¼Œè¿™ä¸ªåœ°æ–¹å°±æ˜¯&lt;/span&gt;&lt;code&gt;é¡µç›®å½•&lt;/code&gt;&lt;span&gt;ã€‚æ¯ä¸€ç»„çš„æœ€å¤§è®°å½•å«åš&lt;/span&gt;&lt;code&gt;æ§½&lt;/code&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç”±æ­¤å¯è§ï¼Œé¡µç›®å½•æ˜¯æœ‰å¤šä¸ªæ§½ç»„æˆçš„ã€‚æ‰€ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6590909090909091&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/uL371281oDER9lbESUVq7L6u9ftCRzaTLECzMXJSzZGusugGkiaFpyj5zLXEdp64jYmSLdbtyRQUoBwBzZzI9cA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;968&quot;/&gt;&lt;span&gt;å‡è®¾ä¸€é¡µçš„æ•°æ®åˆ†ä¸º4ç»„ï¼Œè¿™æ ·åœ¨é¡µç›®å½•ä¸­ï¼Œå°±å¯¹åº”äº†4ä¸ªæ§½ï¼Œæ¯ä¸ªæ§½ä¸­éƒ½ä¿å­˜äº†è¯¥ç»„æ•°æ®çš„æœ€å¤§å€¼ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¿™æ ·å°±èƒ½é€šè¿‡äºŒåˆ†æŸ¥æ‰¾ï¼Œæ¯”è¾ƒæ§½ä¸­çš„è®°å½•è·Ÿéœ€è¦æ‰¾åˆ°çš„è®°å½•çš„å¤§å°ã€‚å¦‚æœç”¨æˆ·éœ€è¦æŸ¥æ‰¾çš„è®°å½•ï¼Œå°äºå½“å‰æ§½ä¸­çš„è®°å½•ï¼Œåˆ™å‘ä¸ŠæŸ¥æ‰¾ä¸Šä¸€ä¸ªæ§½ã€‚å¦‚æœç”¨æˆ·éœ€è¦æŸ¥æ‰¾çš„è®°å½•ï¼Œå¤§äºå½“å‰æ§½ä¸­çš„è®°å½•ï¼Œåˆ™å‘ä¸‹æŸ¥æ‰¾ä¸‹ä¸€ä¸ªæ§½ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å¦‚æ­¤ä¸€æ¥ï¼Œå°±èƒ½é€šè¿‡äºŒåˆ†æŸ¥æ‰¾ï¼Œå¿«é€Ÿçš„å®šä½éœ€è¦æŸ¥æ‰¾çš„è®°å½•äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;so easy&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;6.æ–‡ä»¶å¤´éƒ¨å’Œå°¾éƒ¨&lt;/span&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;6.1 æ–‡ä»¶å¤´éƒ¨&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;é€šè¿‡å‰é¢ä»‹ç»çš„è¡Œè®°å½•ä¸­&lt;/span&gt;&lt;code&gt;ä¸‹ä¸€æ¡è®°å½•çš„ä½ç½®&lt;/code&gt;&lt;span&gt;å’Œ&lt;/span&gt;&lt;code&gt;é¡µç›®å½•&lt;/code&gt;&lt;span&gt;ï¼Œinnodbèƒ½éå¸¸å¿«é€Ÿçš„å®šä½æŸä¸€æ¡è®°å½•ã€‚ä½†æœ‰ä¸ªå‰ææ¡ä»¶ï¼Œå°±æ˜¯ç”¨æˆ·è®°å½•å¿…é¡»åœ¨åŒä¸€ä¸ªæ•°æ®é¡µå½“ä¸­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å¦‚æœç”¨æˆ·è®°å½•éå¸¸å¤šï¼Œåœ¨ç¬¬ä¸€ä¸ªæ•°æ®é¡µæ‰¾ä¸åˆ°æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ï¼Œéœ€è¦åˆ°å¦å¤–ä¸€é¡µæ‰¾è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¿™æ—¶å°±éœ€è¦ä½¿ç”¨&lt;/span&gt;&lt;code&gt;æ–‡ä»¶å¤´éƒ¨&lt;/code&gt;&lt;span&gt;äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å®ƒé‡Œé¢åŒ…å«äº†å¤šä¸ªä¿¡æ¯ï¼Œä½†æˆ‘åªåˆ—å‡ºäº†å…¶ä¸­4ä¸ªæœ€å…³é”®çš„ä¿¡æ¯ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;é¡µå·&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸Šä¸€é¡µé¡µå·&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸‹ä¸€é¡µé¡µå·&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é¡µç±»å‹&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;é¡¾åæ€ä¹‰ï¼Œinnodbæ˜¯é€šè¿‡é¡µå·ã€ä¸Šä¸€é¡µé¡µå·å’Œä¸‹ä¸€é¡µé¡µå·æ¥ä¸²è”ä¸åŒæ•°æ®é¡µçš„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.5045454545454546&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/uL371281oDER9lbESUVq7L6u9ftCRzaTRordc1Srg47FYLnjhHEIXg0a0Bj1SibDHRYiawMI7N5lNNcp35cvszSg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;440&quot;/&gt;&lt;span&gt;ä¸åŒçš„æ•°æ®é¡µä¹‹é—´ï¼Œé€šè¿‡ä¸Šä¸€é¡µé¡µå·å’Œä¸‹ä¸€é¡µé¡µå·æ„æˆäº†åŒå‘é“¾è¡¨ã€‚è¿™æ ·å°±èƒ½ä»å‰å‘åï¼Œä¸€é¡µé¡µæŸ¥æ‰¾æ‰€æœ‰çš„æ•°æ®äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ­¤å¤–ï¼Œé¡µç±»å‹ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„å­—æ®µï¼Œå®ƒåŒ…å«äº†å¤šç§ç±»å‹ï¼Œå…¶ä¸­æ¯”è¾ƒå‡ºåçš„æœ‰ï¼šæ•°æ®é¡µã€ç´¢å¼•é¡µï¼ˆç›®å½•é¡¹é¡µï¼‰ã€æº¢å‡ºé¡µã€undoæ—¥å¿—é¡µç­‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;6.2 æ–‡ä»¶å°¾éƒ¨&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æˆ‘ä¹‹å‰æè¿‡ï¼Œæ•°æ®åº“çš„æ•°æ®æ˜¯ä»¥æ•°æ®é¡µä¸ºå•ä½ï¼ŒåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¦‚æœæ•°æ®æœ‰æ›´æ–°çš„è¯ï¼Œéœ€è¦åˆ·æ–°åˆ°ç£ç›˜ä¸Šã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä½†å¦‚æœæŸä¸€å¤©æ¯”è¾ƒå€’éœ‰ï¼Œç¨‹åºåœ¨åˆ·æ–°åˆ°ç£ç›˜çš„è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†å¼‚å¸¸ï¼Œæ¯”å¦‚ï¼šè¿›ç¨‹è¢«killæ‰äº†ï¼Œæˆ–è€…æœåŠ¡å™¨è¢«é‡å¯äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¿™æ—¶å€™æ•°æ®å¯èƒ½åªåˆ·æ–°äº†ä¸€éƒ¨åˆ†ï¼Œå¦‚ä½•åˆ¤æ–­ä¸Šæ¬¡åˆ·ç›˜çš„æ•°æ®æ˜¯å®Œæ•´çš„å‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¿™å°±éœ€è¦ç”¨åˆ°&lt;/span&gt;&lt;code&gt;æ–‡ä»¶å°¾éƒ¨&lt;/code&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å®ƒé‡Œé¢è®°å½•äº†é¡µé¢çš„&lt;/span&gt;&lt;code&gt;æ ¡éªŒå’Œ&lt;/code&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;åœ¨æ•°æ®åˆ·æ–°åˆ°ç£ç›˜ä¹‹å‰ï¼Œä¼šå…ˆè®¡ç®—ä¸€ä¸ªé¡µé¢çš„æ ¡éªŒå’Œã€‚åé¢å¦‚æœæ•°æ®æœ‰æ›´æ–°çš„è¯ï¼Œä¼šè®¡ç®—ä¸€ä¸ªæ–°å€¼ã€‚æ–‡ä»¶å¤´éƒ¨ä¸­ä¹Ÿä¼šè®°å½•è¿™ä¸ªæ ¡éªŒå’Œï¼Œç”±äºæ–‡ä»¶å¤´éƒ¨åœ¨å‰é¢ï¼Œä¼šå…ˆè¢«åˆ·æ–°åˆ°ç£ç›˜ä¸Šã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ¥ä¸‹æ¥ï¼Œåˆ·æ–°ç”¨æˆ·è®°å½•åˆ°ç£ç›˜çš„æ—¶å€™ï¼Œå‡è®¾åˆ·æ–°äº†ä¸€éƒ¨åˆ†ï¼Œæ°å¥½ç¨‹åºå‡ºç°å¼‚å¸¸äº†ã€‚è¿™æ—¶ï¼Œæ–‡ä»¶å°¾éƒ¨çš„æ ¡éªŒå’Œï¼Œè¿˜æ˜¯ä¸€ä¸ªæ—§å€¼ã€‚æ•°æ®åº“ä¼šå»æ ¡éªŒï¼Œæ–‡ä»¶å°¾éƒ¨çš„æ ¡éªŒå’Œï¼Œä¸ç­‰äºæ–‡ä»¶å¤´éƒ¨çš„æ–°å€¼ï¼Œè¯´æ˜è¯¥æ•°æ®é¡µçš„æ•°æ®æ˜¯ä¸å®Œæ•´çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;7.é¡µå¤´éƒ¨&lt;/span&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;é€šè¿‡ä¸Šé¢ä»‹ç»çš„å†…å®¹ï¼Œæ•°æ®é¡µä¹‹é—´èƒ½å¤Ÿè½»æ¾è®¿é—®äº†ï¼Œä½†å‰©ä¸‹è¿˜æœ‰ä¸ªæ¯”è¾ƒé‡è¦çš„é—®é¢˜ï¼Œå°±æ˜¯è®°å½•çš„çŠ¶æ€ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ¯”å¦‚ä¸€é¡µæ•°æ®åˆ°åº•ä¿å­˜äº†å¤šæ¡è®°å½•ï¼Œæˆ–è€…é¡µç›®å½•åˆ°åº•ä½¿ç”¨äº†å¤šä¸ªæ§½ç­‰ã€‚è¿™äº›ä¿¡æ¯æ˜¯å®æ—¶ç»Ÿè®¡ï¼Œè¿˜æ˜¯äº‹å…ˆç»Ÿè®¡å¥½äº†ï¼Œä¿å­˜åˆ°æŸä¸ªåœ°æ–¹ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä¸ºäº†æ€§èƒ½è€ƒè™‘ï¼Œä¸Šé¢çš„è¿™äº›ç»Ÿè®¡æ•°æ®ï¼Œå½“ç„¶æ˜¯å…ˆç»Ÿè®¡å¥½ï¼Œä¿å­˜åˆ°ä¸€ä¸ªåœ°æ–¹ã€‚åé¢éœ€è¦ç”¨åˆ°è¯¥æ•°æ®æ—¶ï¼Œå†è¯»å–å‡ºæ¥ä¼šæ›´å¥½ã€‚è¿™ä¸ªä¿å­˜ç»Ÿè®¡æ•°æ®çš„åœ°æ–¹ï¼Œå°±æ˜¯&lt;/span&gt;&lt;code&gt;é¡µå¤´éƒ¨&lt;/code&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å½“ç„¶é¡µå¤´éƒ¨ä¸ä»…ä»…åªä¿å­˜ï¼šæ§½çš„æ•°é‡ã€è®°å½•æ¡æ•°ç­‰ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å®ƒè¿˜è®°å½•äº†ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å·²åˆ é™¤è®°å½•æ‰€å çš„å­—èŠ‚æ•°&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æœ€åæ’å…¥è®°å½•çš„ä½ç½®&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æœ€å¤§äº‹åŠ¡id&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ç´¢å¼•id&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ç´¢å¼•å±‚çº§&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å…¶å®è¿˜æœ‰å¾ˆå¤šï¼Œåœ¨è¿™é‡Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å¤šä¸ªæ•°æ®é¡µä¹‹é—´é€šè¿‡&lt;/span&gt;&lt;code&gt;é¡µå·&lt;/code&gt;&lt;span&gt;æ„æˆäº†åŒå‘é“¾è¡¨ã€‚è€Œæ¯ä¸€ä¸ªæ•°æ®é¡µçš„è¡Œæ•°æ®ä¹‹é—´ï¼Œåˆé€šè¿‡&lt;/span&gt;&lt;code&gt;ä¸‹ä¸€æ¡è®°å½•çš„ä½ç½®&lt;/code&gt;&lt;span&gt;æ„æˆäº†å•é¡¹é“¾è¡¨ã€‚æ•´ä½“æ¶æ„å›¾å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.561525129982669&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/uL371281oDER9lbESUVq7L6u9ftCRzaTtRWdBL3V9p9UOMy1Pqk1vf2Vy4nxK4ia07d1oZZdxS4kjSzgAUDVcog/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1154&quot;/&gt;&lt;span&gt;å¥½äº†ï¼Œæœ¬æ–‡å†…å®¹å…ˆåˆ°è¿™é‡Œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å‚è€ƒï¼šã€Šmysqlæ˜¯æ€æ ·è¿è¡Œçš„ã€‹&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>