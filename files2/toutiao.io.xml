<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>6c90b68742c6a5dd955a3886ac1853a0</guid>
<title>ç–«æƒ…ä¸‹çš„å¤±ä¸šç¨‹åºå‘˜ï¼›å‚ä¸å¼€æºé¡¹ç›®å¾ˆéš¾å—ï¼ŸGoè¯­è¨€ä¹‹çˆ¶ä»‹ç»æ³›å‹ï½œç å†œå‘¨åˆŠVIPä¼šå‘˜ä¸“å±é‚®ä»¶å‘¨æŠ¥ Vol.086</title>
<link>https://toutiao.io/k/07qzhk3</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;profile_inner&quot;&gt;
                  &lt;strong class=&quot;profile_nickname&quot;&gt;æˆ‘çˆ±ç¨‹åºå‘˜&lt;/strong&gt;
                  &lt;img class=&quot;profile_avatar&quot; id=&quot;js_profile_qrcode_img&quot; src=&quot;&quot; alt=&quot;&quot;/&gt;

                  &lt;p class=&quot;profile_meta&quot;&gt;
                  &lt;label class=&quot;profile_meta_label&quot;&gt;Weixin ID&lt;/label&gt;
                  &lt;span class=&quot;profile_meta_value&quot;&gt;developerWorks&lt;/span&gt;
                  &lt;/p&gt;

                  &lt;p class=&quot;profile_meta&quot;&gt;
                  &lt;label class=&quot;profile_meta_label&quot;&gt;About Feature&lt;/label&gt;
                  &lt;span class=&quot;profile_meta_value&quot;&gt;æˆ‘ä»¬çš„äº§å“ï¼šã€Šç å†œå‘¨åˆŠã€‹ http://manong.io/ ã€ã€Šå¼€å‘è€…å¤´æ¡ã€‹ http://toutiao.io/&lt;/span&gt;
                  &lt;/p&gt;
                &lt;/div&gt;
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>2fcca9fc02fa57f74259e12fc987c578</guid>
<title>ç³»ç»Ÿæ¶æ„çš„11æ¡åŸåˆ™</title>
<link>https://toutiao.io/k/xbwjqgj</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                                                                     &quot; id=&quot;js_content&quot;&gt;
            &lt;p&gt;&lt;span&gt;&lt;strong&gt;åŸºæœ¬åŸåˆ™&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;åŸåˆ™ä¸€ï¼šä»·å€¼ä¸ºç‹&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è§£æï¼š&lt;/p&gt;&lt;p&gt;ä»·å€¼ä¸ºç‹çš„å¦ä¸€ç§è¯´æ³•å«åšYAGNIã€‚YAGNI æ˜¯ You arenâ€™t gonna need it çš„ç¼©å†™ã€‚è¯¥åŸåˆ™çš„åŸºæœ¬å«ä¹‰å°±æ˜¯ï¼Œä¸åº”è¯¥å¼€å‘ä»»ä½•å½“å‰ä¸ä½¿ç”¨çš„åŠŸèƒ½ã€‚å› ä¸ºè¿™äº›å ç”¨å¼€å‘æˆæœ¬çš„åŠŸèƒ½ï¼Œå¯èƒ½æ ¹æœ¬æ²¡æœ‰äººç”¨ã€‚è€Œä¸”ä¸ä»…ä»…æ˜¯å¼€å‘æˆæœ¬æ‰“äº†æ°´æ¼‚ï¼Œä½ è¿˜è¦ä¸æ–­æŠ•å…¥ç»´æŠ¤æˆæœ¬ï¼Œæ¥ä¿è¯è¿™äº›æ— äººä½¿ç”¨çš„åŠŸèƒ½å¯ä»¥æ­£å¸¸è¿è¡Œã€‚&lt;/p&gt;&lt;p&gt;è¦äº†è§£é˜¿å§†è¾¾å°”å®šå¾‹ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬ï¼Œæˆ‘ä»¬ä¸å¯èƒ½æ— é™åˆ¶çš„æå‡ç³»ç»ŸæŸä¸€éƒ¨åˆ†çš„æ•ˆç‡ã€‚è¦æå‡çš„æ€»ä½“æ•ˆæœæœ‰æ²¡æœ‰äº§ç”Ÿç›¸åº”çš„ä»·å€¼ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;åŸåˆ™äºŒï¼šä»¥ç»ˆä¸ºå§‹&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è§£æï¼š&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247484524&amp;amp;idx=1&amp;amp;sn=471a7ea978dece958c3b0285435551fe&amp;amp;chksm=fafdeec2cd8a67d43af8ef1a346b2f2b012eb738b44d0755e3b6d5a49f2ccede10fae94efe72&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ä»¥ç»ˆä¸ºå§‹&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;strong&gt;ä»¥ç»ˆä¸ºå§‹&lt;/strong&gt;&lt;/a&gt;æ˜¯ä¸€ç§æ€ç»´æ¨¡å¼ï¼Œæœ€æ—©å‡ºè‡ªã€Šé»„å¸å†…ç»ã€‹ï¼Œå…ˆäººæ˜¯åœ¨å‘Šè¯«åäººè¦åœ¨äººç”Ÿçš„æ˜¥å¤©å°±è®¤çœŸæ€è€ƒäººç”Ÿç»ˆç‚¹çš„æ„ä¹‰å’Œä»·å€¼ã€‚å…¶å¼•ç”³ä¹‰æœ‰ä¸‰ï¼šä¸€æ˜¯å‡¡äº‹è¦æœ‰ç›®æ ‡ï¼›äºŒæ˜¯å‡¡äº‹è¦æœ‰è®¡åˆ’ï¼›ä¸‰æ˜¯å‡¡äº‹è¦æœ‰åŸåˆ™ã€‚æ­£æ‰€è°“â€œå‡¡äº‹é¢„åˆ™ç«‹ï¼Œä¸é¢„åˆ™åºŸâ€ã€‚&lt;/p&gt;&lt;p&gt;ç™½è¯æ¥è¯´ï¼Œä»¥ç»ˆä¸ºå§‹ï¼Œå°±æ˜¯åœ¨åšäº‹ä¹‹å‰ï¼Œå…ˆæƒ³æƒ³ç»“æœæ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œè¿™ä¸ªç»“æœæ˜¯å¦èƒ½è¾¾åˆ°æœ€åˆçš„ç›®æ ‡ã€‚å°å¿ƒX-Yé—®é¢˜ï¼šä¸ºäº†è§£å†³ Xé—®é¢˜ï¼Œè§‰å¾—ç”¨ Y å¯ä»¥è§£ï¼Œäºæ˜¯ç ”ç©¶ Y é—®é¢˜ï¼Œç»“æœæåˆ°æœ€åï¼Œå‘ç°åŸæ¥è¦è§£å†³çš„ X é—®é¢˜ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;åŸåˆ™ä¸‰ï¼šåˆ†æ²»åŸåˆ™&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è§£æï¼š&lt;/p&gt;&lt;p&gt;åšæ¶æ„æ—¶ä¸è¦æƒ³ç€ä¸€æ¬¡æ€§æŠŠæ‰€æœ‰çš„åŠŸèƒ½éƒ½åšå¥½ï¼Œè¦æ‹¥æŠ± &lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247485060&amp;amp;idx=1&amp;amp;sn=02720887a28154ede413f85fa0af29f6&amp;amp;chksm=fafdec2acd8a653cbbbc8995eb9dd17053288aaa1509a2fc5f74d1ccc7f33d9d307ca76dbe7f&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;MVP&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;strong&gt;MVP&lt;/strong&gt;&lt;/a&gt;ï¼ˆMinimal Viable Productï¼‰ï¼Œæœ€å°å¯è¿è¡Œç‰ˆæœ¬ã€‚å…ˆè®©ç¨‹åºå®Œæˆæœ€åŸºæœ¬åŠŸèƒ½ä¸Šçº¿ï¼Œæ ¹æ®åé¦ˆè°ƒæ•´å’Œå†³å®šä¸‹ä¸€æ­¥çš„è¿­ä»£ã€‚&lt;/p&gt;&lt;p&gt;è¿­ä»£ç€å»åšäº‹æƒ…ï¼Œæ•æ·å¼€å‘çš„æ€è·¯ã€‚å¯¹äºæ¯ä¸ªåŠŸèƒ½ç‚¹ï¼Œåˆ›å»ºé‡Œç¨‹ç¢‘ï¼Œç„¶åå»è¿­ä»£ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;åŸåˆ™å››ï¼šæœåŠ¡è‡ªæ²»&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è§£æï¼š&lt;/p&gt;&lt;p&gt;åœ¨ç³»ç»Ÿè®¾è®¡æ—¶ï¼Œè¦è€ƒè™‘æœåŠ¡ä¸Šçº¿åï¼Œå¯¹äºé—®é¢˜è¦è‡ªæ„ŸçŸ¥ã€è‡ªä¿®å¤ã€è‡ªä¼˜åŒ–ã€è‡ªè¿ç»´åŠè‡ªå®‰å…¨ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;åŸåˆ™äº”ï¼šæ‹¥æŠ±å˜åŒ–&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è§£æï¼š&lt;/p&gt;&lt;h1&gt;&lt;span&gt;é‡è§†æ¶æ„æ‰©å±•æ€§å’Œå¯è¿ç»´æ€§ã€‚&lt;/span&gt;&lt;strong&gt;&lt;span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247484368&amp;amp;idx=1&amp;amp;sn=b3c8d41b98ecf2b976d0b025c0322055&amp;amp;chksm=fafde97ecd8a6068cc4d25f2766261870a67baa4cbf9dc0d4920302fcf09e74ee682025efabc&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;æ— çŠ¶æ€çš„ç³»ç»Ÿ&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;æ— çŠ¶æ€çš„ç³»ç»Ÿ&lt;/a&gt;&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;çš„æ˜¯å¯æ‰©å±•çš„å’Œç›´æ¥çš„ã€‚ä»»ä½•æ—¶å€™éƒ½è¦è€ƒè™‘è¿™ä¸€ç‚¹ï¼Œä¸è¦æä¸ªä¸å¯æ‰©å±•çš„ï¼Œæœ‰çŠ¶æ€çš„ä¸œä¸œå‡ºæ¥ã€‚å¦åˆ™ï¼Œä¸€æ—¦éœ€è¦æ”¹å˜ï¼Œæˆæœ¬å¾ˆé«˜ã€‚&lt;/span&gt;&lt;/h1&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;åŸåˆ™å…­ï¼šç®€å•å³æ­£ä¹‰&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è§£æï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247485195&amp;amp;idx=1&amp;amp;sn=9aa72718cdcc24d872f0a89cf63ea34f&amp;amp;chksm=fafdeda5cd8a64b3a55f4de3fdc48d2ee396074d851f686b70a7e679dbcf26862348a79182eb&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ç®€å•å³æ­£ä¹‰&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;strong&gt;ç®€å•å³æ­£ä¹‰&lt;/strong&gt;&lt;/a&gt;çš„å¦ä¸€ç§è¯´æ³•å«åšKISSã€‚KISS(Keep it simple,sutpid)ä¿æŒæ¯ä»¶äº‹æƒ…éƒ½å°½å¯èƒ½çš„ç®€å•ã€‚ç”¨æœ€ç®€å•çš„è§£å†³æ–¹æ¡ˆæ¥è§£å†³é—®é¢˜ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;åŸåˆ™ä¸ƒï¼šå°½é‡è‡ªåŠ¨åŒ–&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è§£æï¼š&lt;/p&gt;&lt;p&gt;äººåŠ›æˆæœ¬æ—¢æ…¢åˆè´µï¼Œè¿˜æœ‰ç»å¸¸ä¸æ–­çš„äººå·¥å¤±è¯¯ã€‚å¦‚æœä¸èƒ½é™ä½äººåŠ›æˆæœ¬ï¼Œåè€Œéœ€è¦æ›´å¤šçš„äººï¼Œé‚£ä¹ˆè¿™ä¸ªæ¶æ„è®¾è®¡ä¸€å®šæ˜¯å¤±è´¥çš„ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;ç¨³å®šæ€§åŸåˆ™&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;åŸåˆ™å…«ï¼šä¾èµ–æœ€ç®€&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è§£é‡Šï¼š&lt;/p&gt;&lt;p&gt;ä¾èµ–åŸåˆ™æ˜¯&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247484076&amp;amp;idx=1&amp;amp;sn=0c2b291a31ed53e9c8af06d131aabdd4&amp;amp;chksm=fafde802cd8a6114430a5c1eb8609481059341089ba2c4113012764578152570b6149780e3d5&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;å»é™¤ä¾èµ–ã€å¼±åŒ–ä¾èµ–ã€æ§åˆ¶ä¾èµ–&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;strong&gt;&lt;span&gt;å»é™¤ä¾èµ–ã€å¼±åŒ–ä¾èµ–ã€æ§åˆ¶ä¾èµ–&lt;/span&gt;&lt;/strong&gt;&lt;/a&gt;ã€‚å¤šä¸€ä¸ªä¾èµ–å¤šä¸€åˆ†é£é™©ã€‚èƒ½ä¸ä¾èµ–åˆ™ä¸ä¾èµ–ï¼Œèƒ½å¼‚æ­¥å¼±ä¾èµ–ä¸è¦åŒæ­¥å¼ºä¾èµ–ã€‚å®åœ¨ä¸èƒ½å¼±ä¾èµ–çš„ï¼Œæ¯”å¦‚å¿…é¡»è¦è°ƒç”¨åŠ å¯†å­˜å‚¨æ¥è·å–æ•°æ®åº“çš„å¯†ç ï¼Œä¸ç„¶æ— æ³•è¿æ¥æ•°æ®åº“ï¼Œå¯ä»¥æ§åˆ¶è·å–å¯†ç åœ¨æœåŠ¡å¯åŠ¨æ—¶è¿›è¡Œï¼Œå¦‚æœè·å–ä¸åˆ°åˆ™æœåŠ¡å¯åŠ¨å¤±è´¥ï¼Œå› ä¸ºç°åœ¨éƒ½æ˜¯é›†ç¾¤éƒ¨ç½²ï¼Œä¸€å°æ— æ³•å¯åŠ¨ä¸å½±å“æ•´ä½“æä¾›æœåŠ¡ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;åŸåˆ™ä¹ï¼šä¸ä½œä¸æ­»&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è§£é‡Šï¼š&lt;/p&gt;&lt;p&gt;å°½å¯èƒ½çš„åšè¾ƒå°‘çš„åŠŸèƒ½ã€‚å½“æœ‰ç–‘é—®çš„æ—¶å€™ï¼Œå°±ä¸è¦å»åšï¼Œç”šè‡³å¹²æ‰ã€‚å¾ˆå¤šåŠŸèƒ½ä»æ¥ä¸ä¼šè¢«ä½¿ç”¨ã€‚æœ€å¤šç•™ä¸ªæ‰©å±•ç‚¹å°±å¤Ÿäº†ã€‚&lt;/p&gt;&lt;p&gt;ç­‰åˆ°æœ‰äººæå‡ºå†è¯´ï¼ˆé™¤éæ˜¯å½±å“æ ¸å¿ƒæµç¨‹ï¼Œå¦åˆ™å°±ç­‰åˆ°éœ€è¦çš„æ—¶å€™å†å»åšï¼‰ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;åŸåˆ™åï¼šå®¹ç¾å®¹é”™&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è§£æï¼š&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247485188&amp;amp;idx=1&amp;amp;sn=3618568ba3bf9c396195d8e2c4e6723d&amp;amp;chksm=fafdedaacd8a64bca74024452fb88a56ff99aa6bcd9ae841fca1b91cbff40d4dd78698b09dcc&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;Everything fails!Â &quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;strong&gt;&lt;span&gt;Everything fails!&lt;/span&gt;Â &lt;/strong&gt;&lt;/a&gt;äººéƒ½æ˜¯è¦æ­»çš„ï¼Œæœºå™¨éƒ½æ˜¯è¦åçš„ã€‚&lt;span&gt;å¦‚æœä¸€ä»¶äº‹æƒ…æœ‰å¯èƒ½å‘ç”Ÿåˆ™åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸€å®šä¼šå‘ç”Ÿï¼Œæ¶æ„ä¸­è¦åšå¥½å®¹é”™è®¾è®¡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;åŸåˆ™åä¸€ï¼šç”¨æˆç†Ÿçš„æŠ€æœ¯&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è§£æï¼š&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247484324&amp;amp;idx=1&amp;amp;sn=78986320566babe59cc2c0da81c7f5b6&amp;amp;chksm=fafde90acd8a601ceff0bb501a0c1f6cd10b5408d3e4fed43d9e6c8605f800297abead8abdf5&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ä¸è¦ç»™åˆ«äººçš„æŠ€æœ¯å½“å°ç™½é¼ &quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;&lt;strong&gt;ä¸è¦ç»™åˆ«äººçš„æŠ€æœ¯å½“å°ç™½é¼ &lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;ï¼Œä¸è¦å› æŠ€æœ¯æœ¬èº«çš„é—®é¢˜å½±å“ç³»ç»Ÿçš„ç¨³å®šã€‚å°½å¯èƒ½çš„ä½¿ç”¨çº¢åˆ©å¤§çš„ä¸»æµæŠ€æœ¯ï¼Œè€Œä¸è¦è‡ªå·±å‘æ˜è½®å­ï¼Œæ›´ä¸è¦é­”æ”¹ã€‚åœ¨æŠ€æœ¯é€‰å‹ä¸Šï¼Œåƒä¸‡ä¸è¦è¢«â€”â€”â€œä½ çœ‹æŸä¸ªå…¬å¸ä¹Ÿåœ¨ç”¨è¿™ä¸ªæŠ€æœ¯â€ï¼Œæˆ–æ˜¯ä¸€äº›åœ¨è®ºå›ä¸Šçœ‹åˆ°çš„ä¸€äº›ç¨‹åºå‘˜åæ§½æŠ€æœ¯çš„è§‚ç‚¹ï¼ˆæ²¡æœ‰ä»»ä½•çš„æ•°æ®ï¼Œåªæœ‰è‡ªå·±çš„å–œå¥½ï¼‰æ¥å†³å®šè‡ªå·±çš„æŠ€æœ¯ï¼Œè¿˜æ˜¯çœ‹çœ‹ä¸»æµå¤§å¤šæ•°å…¬å¸å®é™…åœ¨ç”¨çš„æŠ€æœ¯æ ˆï¼Œä¼šæ›´é è°±ä¸€äº›ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;æ€»ç»“&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸€å¼ å›¾æ€»ç»“ä»Šå¤©çš„å†…å®¹ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.939443535188216&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRliccwBMXSp9icdrUcDBcn7aU7asr1qCfg79N67CR0uKsu5FONagZrGE0x2WgiaMVChYcPYMvSYGqzjtw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;611&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong data-brushtype=&quot;text&quot;&gt;&lt;span&gt;ç¼–ç¨‹ä¸€ç”Ÿ&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;å› &lt;/span&gt;&lt;span&gt;ä¸ºå…¬ä¼—å·å¹³å°æ›´æ”¹äº†æ¨é€è§„åˆ™ï¼Œå¦‚æœä¸æƒ³é”™è¿‡å†…å®¹ï¼Œè®°å¾—è¯»å®Œç‚¹ä¸€ä¸‹â€œåœ¨çœ‹â€ï¼ŒåŠ ä¸ªâ€œæ˜Ÿæ ‡â€ï¼Œè¿™æ ·æ¯æ¬¡æ–°æ–‡ç« æ¨é€æ‰ä¼šç¬¬ä¸€æ—¶é—´å‡ºç°åœ¨ä½ çš„è®¢é˜…åˆ—è¡¨é‡Œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247486113&amp;amp;idx=1&amp;amp;sn=f3623b2cf257aa37ea83768fd4325762&amp;amp;chksm=fafde00fcd8a691928c66f7e484ab2b7f6fa7797dc32833a7f777bb4ebde58c010750f13c118&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;PDCAæ–¹æ³•è®º&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;&lt;strong&gt;PDCAæ–¹æ³•è®º&lt;/strong&gt;&lt;/a&gt;&lt;span&gt;ï¼Œæ£€æŸ¥è‡ªå·±æ˜¯å¦é”™è¿‡æ›´æ–°ï¼š&lt;/span&gt;&lt;span&gt;æ¯å‘¨ä¸‰æ™šä¸Š8ç‚¹å·¦å³ï¼Œæˆ‘éƒ½ä¼šæ›´æ–°æ–‡ç« ï¼Œå¦‚æœä½ æ²¡æœ‰æ”¶åˆ°ï¼Œè®°å¾—ç‚¹å¼€ã€ç¼–ç¨‹ä¸€ç”Ÿã€‘å…¬ä¼—å·æ‰¾ä¸€ä¸‹(*^â–½^*)&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;
          &lt;/div&gt;

          

          



           
                                
                    
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>997facc71b928314cd27274f6f21ff5d</guid>
<title>Lyftå¾®æœåŠ¡ç ”å‘æ•ˆèƒ½æå‡å®è·µ | 3. åˆ©ç”¨è¦†ç›–æœºåˆ¶åœ¨é¢„å‘ç¯å¢ƒä¸­æ‰©å±•æœåŠ¡ç½‘æ ¼</title>
<link>https://toutiao.io/k/cuqzep3</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                                                                     &quot; id=&quot;js_content&quot;&gt;
            &lt;blockquote&gt;&lt;p&gt;&lt;em&gt;æ€æ ·æ‰èƒ½æé«˜ç ”å‘æ•ˆç‡ï¼Ÿæ˜¯ä¾èµ–äºå„è‡ªç‹¬ç«‹çš„æœ¬åœ°å¼€å‘æµ‹è¯•ç¯å¢ƒï¼Œè¿˜æ˜¯ä¾èµ–å®Œæ•´çš„ç«¯åˆ°ç«¯æµ‹è¯•ï¼ŸLyftçš„è¿™ä¸€ç³»åˆ—æ–‡ç« ä»‹ç»äº†å…¶å¼€å‘ç¯å¢ƒçš„å†å²å’Œå‘å±•ï¼Œå¸®åŠ©æˆ‘ä»¬æ€è€ƒå¦‚ä½•æ‰“é€ ä¸€å¥—é€‚åˆå¤§è§„æ¨¡å¾®æœåŠ¡çš„é«˜æ•ˆç ”å‘ç¯å¢ƒã€‚æœ¬ç³»åˆ—å…±4ç¯‡æ–‡ç« ï¼Œè¿™æ˜¯ç¬¬3ç¯‡ã€‚åŸæ–‡ï¼šScaling productivity on microservices at Lyft (Part 3): Extending our Envoy mesh with staging overrides&lt;span&gt;[1]&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3325&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/9utHkjMdE0ViakuqpKG829aZCvhDorrxxQgxEfGiaUFTgAGGibMRWfHeuSsiaEic80m63AgCVsAmOodh2MqBPicake6A/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1200&quot;/&gt;&lt;/p&gt;&lt;p&gt;æœ¬ç³»åˆ—ä»‹ç»çš„æ˜¯Lyftåœ¨é¢å¯¹è¶Šæ¥è¶Šå¤šçš„å¼€å‘äººå‘˜å’ŒæœåŠ¡æ—¶ï¼Œå¦‚ä½•é«˜æ•ˆæ‰©å±•å¼€å‘å®è·µï¼Œæœ¬æ–‡æ˜¯ç¬¬ä¸‰ç¯‡ã€‚&lt;/p&gt;&lt;p&gt;åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æè¿°äº†ä¸ºå¿«é€Ÿè¿­ä»£æœ¬åœ°æœåŠ¡è€Œè®¾è®¡çš„ç¬”è®°æœ¬ç”µè„‘å¼€å‘å·¥ä½œæµç¨‹ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œå°†è¯¦ç»†ä»‹ç»å®‰å…¨ä¸”éš”ç¦»çš„ç«¯åˆ°ç«¯(E2E)æµ‹è¯•è§£å†³æ–¹æ¡ˆï¼šé¢„ç”Ÿäº§å…±äº«ç¯å¢ƒã€‚åœ¨æ·±å…¥ç ”ç©¶å®ç°ç»†èŠ‚ä¹‹å‰ï¼Œæˆ‘ä»¬å°†ç®€è¦å›é¡¾ä¿ƒä½¿æˆ‘ä»¬æ„å»ºè¿™ä¸€ç³»ç»Ÿçš„é—®é¢˜ã€‚&lt;/p&gt;&lt;h3&gt;ä»¥å‰çš„é›†æˆç¯å¢ƒ&lt;/h3&gt;&lt;p&gt;åœ¨æœ¬ç³»åˆ—çš„ç¬¬1éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†åœ¨ä¹‹å‰ç”¨äºå¤šæœåŠ¡ç«¯åˆ°ç«¯æµ‹è¯•çš„å·¥å…·Oneboxã€‚Oneboxçš„ç”¨æˆ·éœ€è¦ç§Ÿç”¨å¤§å‹AWS EC2è™šæ‹Ÿæœºæ¥å¯åŠ¨100å¤šä¸ªæœåŠ¡ï¼Œä»¥éªŒè¯ä¿®æ”¹æ˜¯å¦èƒ½å¤Ÿè·¨æœåŠ¡è¾¹ç•Œå·¥ä½œã€‚è¿™ç§è§£å†³æ–¹æ¡ˆä¸ºæ¯ä¸ªå¼€å‘äººå‘˜æä¾›äº†ä¸€ä¸ªæ²™ç›’ï¼Œè¿è¡Œè‡ªå·±ç‰ˆæœ¬çš„Lyftï¼Œæ§åˆ¶æ¯ä¸ªæœåŠ¡çš„ç‰ˆæœ¬ã€æ•°æ®åº“å†…å®¹å’Œè¿è¡Œæ—¶é…ç½®ã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.775&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/9utHkjMdE0ViakuqpKG829aZCvhDorrxx1s3xbch2V8icg0LY1KqUrv1icRKwMye8UB1q5QahBCvsInL2ZOl4gYnw/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1200&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯ä¸ªå¼€å‘äººå‘˜éƒ½è¿è¡Œå¹¶ç®¡ç†è‡ªå·±ç‹¬ç«‹çš„Onebox&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;ä¸å¹¸çš„æ˜¯ï¼Œéšç€Lyftçš„å·¥ç¨‹å¸ˆå’ŒæœåŠ¡æ•°é‡çš„å¢åŠ ï¼ŒOneboxé‡åˆ°äº†è§„æ¨¡é—®é¢˜(è¯¦æƒ…è§ç¬¬ä¸€ç¯‡æ–‡ç« )ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°å¯æŒç»­çš„æ›¿ä»£æ–¹æ¡ˆæ¥æ‰§è¡Œç«¯åˆ°ç«¯æµ‹è¯•ã€‚&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬å°†å…±äº«çš„é¢„å‘ç¯å¢ƒè§†ä¸ºä¸€ç§å¯è¡Œçš„æ›¿ä»£å“ã€‚é¢„å‘ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒçš„ç›¸ä¼¼æ€§è®©æˆ‘ä»¬å……æ»¡ä¿¡å¿ƒï¼Œä½†æˆ‘ä»¬éœ€è¦æ·»åŠ ç¼ºå¤±çš„éƒ¨åˆ†ï¼Œä»è€Œæä¾›ä¸€ä¸ªå®‰å…¨çš„å¼€å‘ç¯å¢ƒï¼šéš”ç¦»ã€‚&lt;/p&gt;&lt;h3&gt;é¢„å‘ç¯å¢ƒï¼ˆStaging Environmentï¼‰&lt;/h3&gt;&lt;p&gt;é¢„å‘ç¯å¢ƒè¿è¡Œä¸ç”Ÿäº§ç¯å¢ƒç›¸åŒçš„æŠ€æœ¯æ ˆï¼Œä½†ä½¿ç”¨äº†å¼¹æ€§èµ„æºã€æ¨¡æ‹Ÿç”¨æˆ·æ•°æ®ä»¥åŠäººé€ webæµé‡ç”Ÿæˆå™¨ã€‚é¢„å‘ç¯å¢ƒæ˜¯Lyftä¸€çº§ç¯å¢ƒï¼Œå¦‚æœç¯å¢ƒå˜å¾—ä¸ç¨³å®šï¼ŒSLO&lt;span&gt;[2]&lt;/span&gt;å—åˆ°å½±å“ï¼Œéšæ—¶å¾…å‘½çš„å·¥ç¨‹å¸ˆå’Œå¼€å‘äººå‘˜å°±ä¼šæå‡SEV&lt;span&gt;[3]&lt;/span&gt;ã€‚å°½ç®¡é¢„å‘ç¯å¢ƒçš„å¯ç”¨æ€§å’ŒçœŸæ­£çš„æµé‡å¢åŠ äº†ç«¯åˆ°ç«¯çš„å¯ä¿¡åº¦ï¼Œä½†å¦‚æœæˆ‘ä»¬é¼“åŠ±å¹¿æ³›ä½¿ç”¨é¢„å‘ç¯å¢ƒï¼Œå°±å¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜ï¼š&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;é¢„å‘ç¯å¢ƒæ˜¯å®Œå…¨å…±äº«çš„ç¯å¢ƒï¼Œå°±åƒç”Ÿäº§ç¯å¢ƒä¸€æ ·ï¼Œå¦‚æœæœ‰äººå°†ä¸€ä¸ªæ•…éšœå®ä¾‹éƒ¨ç½²åˆ°é¢„å‘é›†ç¾¤ï¼Œå°±ä¼šå½±å“åˆ°å…¶ä»–(å¯èƒ½æ˜¯ä¼ é€’æ€§çš„)ä¾èµ–è¯¥æœåŠ¡çš„äººã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;äº¤ä»˜æ–°ä»£ç çš„æ–¹å¼æ˜¯å°†PRåˆå¹¶åˆ°ä¸»çº¿ï¼Œä»è€Œè§¦å‘ä¸€ä¸ªæ–°çš„éƒ¨ç½²æµæ°´çº¿ã€‚ä¸ºäº†æµ‹è¯•å®éªŒæ€§å˜æ›´å¦‚ä½•åœ¨ç«¯åˆ°ç«¯ç¯å¢ƒä¸­å·¥ä½œï¼Œéœ€è¦æ‰¿å—å¤§é‡çš„è¿‡ç¨‹è´Ÿæ‹…ï¼šç¼–å†™æµ‹è¯•ã€ä»£ç å®¡æŸ¥ã€åˆå¹¶ï¼Œå¹¶é€šè¿‡CI/CDè¿›è¡Œè¿›å±•ã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;è¿™ä¸ªç¹é‡çš„è¿‡ç¨‹å¯èƒ½ä¼šå¯¼è‡´ç”¨æˆ·ä½¿ç”¨â€œé€ƒç”Ÿå£â€ï¼šå°†PRåˆ†æ”¯ç›´æ¥éƒ¨ç½²åˆ°é¢„å‘ç¯å¢ƒã€‚å½“æœªå¤„ç†çš„æäº¤åœ¨é¢„å‘ç¯å¢ƒä¸‹è¿è¡Œæ—¶ï¼Œå°†è¿›ä¸€æ­¥æ”¾å¤§é™ä½ç¯å¢ƒç¨³å®šæ€§çš„ç¼ºé™·é—®é¢˜ã€‚&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å…‹æœè¿™äº›æŒ‘æˆ˜ï¼Œä½¿é¢„å‘ç¯å¢ƒæ›´é€‚åˆæ‰‹å·¥éªŒè¯ç«¯åˆ°ç«¯å·¥ä½œæµã€‚æˆ‘ä»¬æƒ³è®©ç”¨æˆ·åœ¨å‡†å¤‡é˜¶æ®µæµ‹è¯•ä»–ä»¬çš„ä»£ç ï¼Œè€Œä¸æ˜¯è¢«è¿‡ç¨‹æ‰€å›°ã€‚å¦‚æœä»–ä»¬çš„ä¿®è®¢å‡ºç°é—®é¢˜çš„è¯ï¼Œæœ€å°åŒ–å˜æ›´çš„å½±å“åŠå¾„ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åˆ›å»ºäº†&lt;code&gt;staging override&lt;/code&gt;ã€‚&lt;/p&gt;&lt;h5&gt;Staging Overridesï¼ˆé¢„å‘è¦†ç›–ï¼‰&lt;/h5&gt;&lt;p&gt;Staging overrideæ˜¯ä¸€ç»„ç”¨äºåœ¨é¢„å‘ç¯å¢ƒä¸­å®‰å…¨å¿«é€Ÿçš„éªŒè¯ç”¨æˆ·å˜æ›´çš„å·¥å…·ã€‚&lt;span&gt;æˆ‘ä»¬ä»æ ¹æœ¬ä¸Šæ”¹å˜äº†éš”ç¦»æ¨¡å‹çš„æ–¹æ³•ï¼šåœ¨å…±äº«ç¯å¢ƒä¸­éš”ç¦»è¯·æ±‚ï¼Œè€Œä¸æ˜¯æä¾›å®Œå…¨éš”ç¦»çš„ç¯å¢ƒã€‚&lt;/span&gt;å…¶æ ¸å¿ƒæ˜¯ï¼Œæˆ‘ä»¬å…è®¸ç”¨æˆ·é‡å†™é€šè¿‡é¢„å‘ç¯å¢ƒçš„è¯·æ±‚ï¼Œå¹¶æœ‰æ¡ä»¶çš„æ‰§è¡Œå®éªŒä»£ç ã€‚å¤§è‡´çš„å·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;åœ¨é¢„å‘ç¯å¢ƒä¸Šåˆ›å»ºä¸€ä¸ªä¸å‘æœåŠ¡å‘ç°æ³¨å†Œçš„æ–°éƒ¨ç½²ï¼Œå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„&lt;em&gt;å¸è½½éƒ¨ç½²ï¼ˆoffloaded deploymentï¼‰&lt;/em&gt;ï¼Œå¹¶ä¸”ä¿è¯å‘è¿™ä¸ªæœåŠ¡å‘å‡ºè¯·æ±‚çš„å…¶ä»–ç”¨æˆ·ä¸ä¼šè¢«è·¯ç”±åˆ°è¿™ä¸ª(å¯èƒ½è¢«ç ´åçš„)å®ä¾‹ã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;åŸºç¡€æ¶æ„åº”è¯¥çŸ¥é“å¦‚ä½•è§£é‡Šåœ¨è¯·æ±‚å¤´ä¸­åµŒå…¥çš„è¦†ç›–ä¿¡æ¯ï¼Œä»è€Œç¡®ä¿è¦†ç›–å…ƒæ•°æ®ï¼ˆoverride metadataï¼‰åœ¨æ•´ä¸ªè°ƒç”¨å›¾ï¼ˆrequest call graphï¼‰ä¸­ä¼ æ’­ã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;ä¿®æ”¹æ¯ä¸ªæœåŠ¡çš„è·¯ç”±è§„åˆ™ï¼Œä»è€Œå¯ä»¥åˆ©ç”¨è¯·æ±‚å¤´ä¸­æä¾›çš„è¦†ç›–ä¿¡æ¯ï¼Œæ ¹æ®è¦†ç›–å…ƒæ•°æ®æŒ‡å®šçš„è§„åˆ™ï¼Œè·¯ç”±åˆ°å¯¹åº”çš„å¸è½½éƒ¨ç½²ï¼ˆoffloaded deploymentï¼‰ã€‚&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h5&gt;ç¤ºä¾‹åœºæ™¯&lt;/h5&gt;&lt;p&gt;å‡è®¾ä¸€ä¸ªç”¨æˆ·æƒ³è¦åœ¨ç«¯åˆ°ç«¯åœºæ™¯ä¸­æµ‹è¯•æ–°ç‰ˆæœ¬çš„&lt;code&gt;onboarding&lt;/code&gt;æœåŠ¡ã€‚ä¹‹å‰åŸºäºOneboxï¼Œç”¨æˆ·å¯ä»¥å¯åŠ¨Lyftå †æ ˆçš„æ•´ä¸ªå‰¯æœ¬ï¼Œå¹¶ä¿®æ”¹ç›¸åº”æœåŠ¡ï¼Œä»¥éªŒè¯æ˜¯å¦å¦‚é¢„æœŸèˆ¬å·¥ä½œã€‚&lt;/p&gt;&lt;p&gt;å¦‚ä»Šåœ¨é¢„å‘ç¯å¢ƒä¸­ï¼Œç”¨æˆ·å¯ä»¥å…±äº«ç¯å¢ƒï¼Œä½†å¯ä»¥æ›¿æ¢å·²å¸è½½çš„å®ä¾‹ï¼Œè¿™äº›å®ä¾‹ä¸ä¼šå½±å“åˆ°æ­£å¸¸çš„é¢„å‘æµé‡ã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4625&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/9utHkjMdE0ViakuqpKG829aZCvhDorrxxC5aQQqmOn1mVRJXia0dq6QfzjBEcKQg2AK09sPaxJGpRvCupZOaoYxQ/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1200&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å…¸å‹ç”¨æˆ·å‘é¢„å‘ç¯å¢ƒå‘å‡ºçš„è¯·æ±‚ä¸ä¼šé€šè¿‡ä»»ä½•è¢«å®æ—¶å¸è½½çš„å®ä¾‹&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;é€šè¿‡ç»™è¯·æ±‚é™„åŠ ç‰¹å®šçš„å¤´(&quot;&lt;em&gt;request baggage&lt;/em&gt;&quot;)ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©å°†è¯·æ±‚è·¯ç”±åˆ°æ–°å®ä¾‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4625&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/9utHkjMdE0ViakuqpKG829aZCvhDorrxx4Yqw4cm7cBg07W8hr3JmVZto5418HBM9mXyZTzicth9AdrACHs1RF4g/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1200&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¤´éƒ¨å…ƒæ•°æ®å…è®¸ç”¨æˆ·åœ¨æ¯ä¸ªè¯·æ±‚çš„åŸºç¡€ä¸Šä¿®æ”¹è°ƒç”¨æµ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;åœ¨æœ¬æ–‡çš„å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨å¦‚ä½•æ„å»ºè¿™äº›ç»„ä»¶æ¥æä¾›é›†æˆè°ƒè¯•ä½“éªŒã€‚&lt;/p&gt;&lt;h3&gt;å¸è½½éƒ¨ç½²ï¼ˆOffloaded Deploymentsï¼‰&lt;/h3&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5791666666666667&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/9utHkjMdE0ViakuqpKG829aZCvhDorrxxv3yl7tLn8264ia93fGv89uib2sF8ickBeibic8iaaRhlibdOEfmoRyJdFaW6A/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1200&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Lyftä½¿ç”¨Envoyä½œä¸ºæœåŠ¡ç½‘ç»œä»£ç†ï¼Œå¤„ç†ä¼—å¤šæœåŠ¡ä¹‹é—´çš„é€šä¿¡&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;åœ¨Lyftï¼Œæ¯é¡¹æœåŠ¡çš„æ¯ä¸ªå®ä¾‹éƒ½è¢«éƒ¨ç½²åœ¨ä¸€ä¸ªEnvoy&lt;span&gt;[4]&lt;/span&gt;Â sidecaræ—è¾¹ï¼Œä½œä¸ºè¯¥æœåŠ¡çš„å”¯ä¸€å‡ºå…¥å£ã€‚é€šè¿‡ç¡®ä¿æ‰€æœ‰ç½‘ç»œæµé‡éƒ½é€šè¿‡Envoyï¼Œæˆ‘ä»¬ä¸ºå¼€å‘äººå‘˜æä¾›äº†ä¸€ä¸ªç®€åŒ–çš„æµé‡è§†å›¾ï¼Œè¯¥è§†å›¾ä»¥ä¸€ç§ä¸è¯­è¨€æ— å…³çš„æ–¹å¼æä¾›äº†æœåŠ¡æŠ½è±¡ã€å¯è§‚å¯Ÿæ€§å’Œå¯æ‰©å±•æ€§ã€‚&lt;/p&gt;&lt;p&gt;æœåŠ¡é€šè¿‡å‘å…¶Envoy sidecarå‘é€è¯·æ±‚æ¥è°ƒç”¨ä¸Šæ¸¸&lt;span&gt;[5]&lt;/span&gt;æœåŠ¡ï¼ŒEnvoyå°†è¯·æ±‚è½¬å‘åˆ°ä¸Šæ¸¸çš„å¥åº·å®ä¾‹ã€‚æˆ‘ä»¬é€šè¿‡æ§åˆ¶å¹³é¢æ›´æ–°Envoyçš„é…ç½®ï¼Œæ§åˆ¶å¹³é¢åŸºäºKubernetesäº‹ä»¶é€šè¿‡xDS API&lt;span&gt;[6]&lt;/span&gt;è¿›è¡Œæ›´æ–°ã€‚&lt;/p&gt;&lt;h5&gt;é¿å…æœåŠ¡å‘ç°&lt;/h5&gt;&lt;p&gt;å¦‚æœæˆ‘ä»¬å¸Œæœ›åˆ›å»ºä¸€ä¸ªä¸ä¼šä»ç½‘æ ¼ä¸­æ­£å¸¸è·å–æœåŠ¡æµé‡çš„å®ä¾‹ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡ç¤ºæ§åˆ¶å¹³é¢å°†å…¶æ’é™¤åœ¨æœåŠ¡å‘ç°ä¹‹å¤–ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åœ¨Kubernetes podæ ‡ç­¾ä¸­åµŒå…¥é¢å¤–çš„ä¿¡æ¯ï¼Œè¡¨ç¤ºè¯¥podå·²è¢«å¸è½½ï¼š&lt;/p&gt;&lt;p&gt;&lt;span aria-label=&quot;icon: copy&quot;&gt;&lt;svg viewbox=&quot;64 64 896 896&quot; focusable=&quot;false&quot; data-icon=&quot;copy&quot; fill=&quot;currentColor&quot; aria-hidden=&quot;true&quot;&gt;&lt;path d=&quot;M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;...&lt;/span&gt;&lt;br/&gt;app=foo&lt;br/&gt;environment=staging&lt;br/&gt;offloaded&lt;span&gt;-&lt;/span&gt;deploy=true&lt;br/&gt;&lt;span&gt;...&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åæˆ‘ä»¬å¯ä»¥ä¿®æ”¹æ§åˆ¶å¹³é¢æ¥è¿‡æ»¤è¿™äº›å®ä¾‹ï¼Œç¡®ä¿å®ƒä»¬åœ¨å‡†å¤‡é˜¶æ®µä¸æ¥æ”¶æ ‡å‡†æµé‡ã€‚&lt;/p&gt;&lt;p&gt;å½“ç”¨æˆ·å‡†å¤‡åœ¨é¢„å‘ç¯å¢ƒ(æœ¬åœ°è¿­ä»£å)åˆ›å»ºå¸è½½éƒ¨ç½²æ—¶ï¼Œé¦–å…ˆå¿…é¡»åœ¨Githubä¸­åˆ›å»ºä¸€ä¸ªpull requestã€‚æˆ‘ä»¬çš„æŒç»­é›†æˆå°†è‡ªåŠ¨å¯åŠ¨éƒ¨ç½²æ‰€éœ€çš„å®¹å™¨é•œåƒæ„å»ºã€‚ç„¶åç”¨æˆ·å¯ä»¥åˆ©ç”¨Githubæœºå™¨äººæ˜¾å¼çš„å¸è½½éƒ¨ç½²ä»–ä»¬çš„æœåŠ¡åˆ°é¢„å‘ç¯å¢ƒï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3575&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/9utHkjMdE0ViakuqpKG829aZCvhDorrxxpsmFSoCMOBeB8xq5JxJykvcL9pseKajicNOp3nyREicPnkqcMpM7cJNw/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1200&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬çš„Githubæœºå™¨äººå¯ä»¥ä»PRç®€å•çš„åˆ›å»ºä¸€ä¸ªå¸è½½éƒ¨ç½²&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;é€šè¿‡è¿™ä¸€æ–¹å¼ï¼Œç”¨æˆ·å¯ä»¥ä¸ºæŸä¸ªæœåŠ¡åˆ›å»ºç‹¬ç«‹çš„éƒ¨ç½²ï¼Œä¸æ™®é€šçš„ä¸´æ—¶éƒ¨ç½²å…±äº«å®Œå…¨ç›¸åŒçš„ç¯å¢ƒï¼šä¸æ ‡å‡†æ•°æ®åº“çš„äº¤äº’ï¼Œå‡ºå£è°ƒç”¨åˆ°å…¶ä»–æœåŠ¡ï¼Œå¹¶ä¸”å¯ä»¥è¢«æ ‡å‡†çš„æŒ‡æ ‡/æ—¥å¿—/åˆ†æç³»ç»Ÿæ‰€è§‚æµ‹ã€‚å¯¹äºé‚£äº›åªæƒ³&lt;code&gt;ssh&lt;/code&gt;åˆ°å®ä¾‹å¹¶æµ‹è¯•è„šæœ¬æˆ–è¿è¡Œè°ƒè¯•å™¨è€Œä¸æ‹…å¿ƒå½±å“é¢„å‘ç¯å¢ƒå…¶ä½™éƒ¨åˆ†çš„å¼€å‘äººå‘˜æ¥è¯´ï¼Œè¿™è¢«è¯æ˜éå¸¸æœ‰ç”¨ã€‚ç„¶è€Œï¼Œå½“å¼€å‘äººå‘˜å¯ä»¥åœ¨æ‰‹æœºä¸Šæ‰“å¼€Lyftåº”ç”¨ï¼Œå¹¶ç¡®ä¿è¯·æ±‚åœ¨ä¸€ä¸ªå¸è½½éƒ¨ç½²ä¸­å¾—åˆ°PRä»£ç çš„æœåŠ¡æ—¶ï¼Œå¸è½½éƒ¨ç½²æ‰çœŸæ­£å…·æœ‰å¨åŠ›ã€‚&lt;/p&gt;&lt;h3&gt;è¦†ç›–æŠ¥å¤´å’Œä¸Šä¸‹æ–‡ä¼ æ’­ï¼ˆOverride Headers and Context Propagationï¼‰&lt;/h3&gt;&lt;p&gt;è¦å°†è¯·æ±‚è·¯ç”±åˆ°å·²å¸è½½çš„éƒ¨ç½²ï¼Œéœ€è¦åœ¨è¯·æ±‚ä¸­åµŒå…¥å…ƒæ•°æ®ï¼Œä»¥ä¾¿é€šçŸ¥åŸºç¡€è®¾æ–½ä½•æ—¶ä¿®æ”¹è°ƒç”¨æµã€‚å…ƒæ•°æ®åŒ…å«æƒ³è¦è¦†ç›–çš„æœåŠ¡çš„è·¯ç”±è§„åˆ™ï¼Œä»¥åŠåº”è¯¥å°†æµé‡å¼•å¯¼åˆ°å“ªäº›å¸è½½çš„éƒ¨ç½²ä¸Šå»ã€‚æˆ‘ä»¬å†³å®šå°†è¿™äº›å…ƒæ•°æ®æºå¸¦åœ¨è¯·æ±‚å¤´ä¸­ï¼Œä»è€Œå¯¹æœåŠ¡å’ŒæœåŠ¡æ‰€æœ‰è€…ä¿æŒé€æ˜ã€‚&lt;/p&gt;&lt;p&gt;ä¸è¿‡ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿å¤´ä¿¡æ¯å¯ä»¥é€šè¿‡ä½¿ç”¨ä¸åŒè¯­è¨€ç¼–å†™çš„æœåŠ¡åœ¨ç½‘æ ¼ä¸­ä¼ æ’­ã€‚æˆ‘ä»¬å·²ç»ä½¿ç”¨OpenTracingæŠ¥å¤´(&lt;code&gt;x-ot-span-context&lt;/code&gt;)å°†è·Ÿè¸ªä¿¡æ¯ä»ä¸€ä¸ªè¯·æ±‚ä¼ æ’­åˆ°ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚OpenTracingæœ‰ä¸€ä¸ªå«åšâ€œbaggage&lt;span&gt;[7]&lt;/span&gt;â€çš„æ¦‚å¿µï¼Œè¿™æ˜¯ä¸€ä¸ªåµŒåœ¨è·¨æœåŠ¡è¾¹ç•Œçš„æŠ¥å¤´ä¸­çš„æŒä¹…åŒ–é”®/å€¼ç»“æ„ã€‚å°†å…ƒæ•°æ®ç¼–ç åˆ°baggageä¸­ï¼Œé€šè¿‡è¯·æ±‚å’Œè·Ÿè¸ªåº“å°†å…¶ä»ä¸€ä¸ªè¯·æ±‚ä¼ æ’­åˆ°ä¸‹ä¸€ä¸ªè¯·æ±‚ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿè¿›è¡Œå¿«é€Ÿçš„å¤„ç†ã€‚&lt;/p&gt;&lt;h5&gt;æ„é€ å’Œé™„åŠ Baggage&lt;/h5&gt;&lt;p&gt;å®é™…çš„HTTPæŠ¥å¤´æ˜¯ä¸€ä¸ªbase64ç¼–ç çš„trace protobuf&lt;span&gt;[8]&lt;/span&gt;ã€‚æˆ‘ä»¬åˆ›å»ºäº†è‡ªå·±çš„protobufï¼Œå‘½åä¸º&lt;code&gt;Overrides&lt;/code&gt;ï¼Œæ³¨å…¥åˆ°è·Ÿè¸ªçš„baggageä¸­ï¼Œå¦‚ä¸‹ä»£ç æ¼”ç¤ºï¼š&lt;/p&gt;&lt;p&gt;&lt;span aria-label=&quot;icon: copy&quot;&gt;&lt;svg viewbox=&quot;64 64 896 896&quot; focusable=&quot;false&quot; data-icon=&quot;copy&quot; fill=&quot;currentColor&quot; aria-hidden=&quot;true&quot;&gt;&lt;path d=&quot;M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;syntax = &quot;proto3&quot;;&lt;br/&gt;&lt;br/&gt;/* container for override metadata */&lt;br/&gt;message Overrides {&lt;br/&gt;  &lt;br/&gt;  // maps cluster_name -&amp;gt; ip_port&lt;br/&gt;  map&amp;lt;string, string&amp;gt; routing_overrides = 1;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬å¯ä»¥å°†æ ·æœ¬æ•°æ®ç»“æ„åµŒå…¥åˆ°è·Ÿè¸ªbaggageä¸­&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;svg viewbox=&quot;64 64 896 896&quot; focusable=&quot;false&quot; data-icon=&quot;copy&quot; fill=&quot;currentColor&quot; aria-hidden=&quot;true&quot;&gt;&lt;path d=&quot;M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;from&lt;/span&gt; base64 &lt;span&gt;import&lt;/span&gt; standard_b64decode&lt;span&gt;,&lt;/span&gt; standard_b64encode&lt;br/&gt;&lt;br/&gt;&lt;span&gt;from&lt;/span&gt; flask &lt;span&gt;import&lt;/span&gt; Flask&lt;span&gt;,&lt;/span&gt; request&lt;br/&gt;&lt;span&gt;from&lt;/span&gt; lightstep&lt;span&gt;.&lt;/span&gt;lightstep_carrier_pb2 &lt;span&gt;import&lt;/span&gt; BinaryCarrier&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; overrides_pb2&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;header_from_overrides&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;overrides&lt;span&gt;:&lt;/span&gt; overrides_pb2&lt;span&gt;.&lt;/span&gt;Overrides&lt;span&gt;)&lt;/span&gt; &lt;span&gt;-&amp;gt;&lt;/span&gt; &lt;span&gt;bytes&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&quot;&quot;&quot;&lt;br/&gt;    Attach the `overrides` to the trace&#x27;s baggage and return the new `x-ot-span-context` header&lt;br/&gt;    &quot;&quot;&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;# decode the trace from the current request context&lt;/span&gt;&lt;br/&gt;    header &lt;span&gt;=&lt;/span&gt; request&lt;span&gt;.&lt;/span&gt;headers&lt;span&gt;.&lt;/span&gt;get&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&#x27;x-ot-span-context&#x27;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&#x27;&#x27;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    trace_proto &lt;span&gt;=&lt;/span&gt; BinaryCarrier&lt;span&gt;()&lt;/span&gt;&lt;br/&gt;    trace_proto&lt;span&gt;.&lt;/span&gt;ParseFromString&lt;span&gt;(&lt;/span&gt;standard_b64decode&lt;span&gt;(&lt;/span&gt;header&lt;span&gt;))&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;# b64encode the provided custom `overrides` and place in the baggage&lt;/span&gt;&lt;br/&gt;    b64_overrides &lt;span&gt;=&lt;/span&gt; standard_b64encode&lt;span&gt;(&lt;/span&gt;overrides&lt;span&gt;.&lt;/span&gt;SerializeToString&lt;span&gt;())&lt;/span&gt;&lt;br/&gt;    trace_proto&lt;span&gt;.&lt;/span&gt;basic_ctx&lt;span&gt;.&lt;/span&gt;baggage_items&lt;span&gt;[&lt;/span&gt;&lt;span&gt;&#x27;overrides&#x27;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; b64_overrides&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;# re-encode the modified trace for use as an outgoing HTTP header&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;return&lt;/span&gt; standard_b64encode&lt;span&gt;(&lt;/span&gt;trace_proto&lt;span&gt;.&lt;/span&gt;SerializeToString&lt;span&gt;())&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;# create a sample `Overrides` proto that overrides routing for `users` service&lt;/span&gt;&lt;br/&gt;overrides_proto &lt;span&gt;=&lt;/span&gt; overrides_pb2&lt;span&gt;.&lt;/span&gt;Overrides&lt;span&gt;()&lt;/span&gt;&lt;br/&gt;overrides_proto&lt;span&gt;.&lt;/span&gt;routing_overrides&lt;span&gt;[&lt;/span&gt;&lt;span&gt;&quot;users&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;&quot;10.0.0.42:80&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;with&lt;/span&gt; Flask&lt;span&gt;(&lt;/span&gt;__name__&lt;span&gt;).&lt;/span&gt;test_request_context&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&#x27;/add-baggage&#x27;&lt;/span&gt;&lt;span&gt;):&lt;/span&gt;&lt;br/&gt;    new_header_with_baggage &lt;span&gt;=&lt;/span&gt; header_from_overrides&lt;span&gt;(&lt;/span&gt;overrides_proto&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;print&lt;/span&gt;&lt;span&gt;({&lt;/span&gt;&lt;span&gt;&quot;x-ot-span-context&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt; new_header_with_baggage&lt;span&gt;})&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;# {&#x27;x-ot-span-context&#x27;: b&#x27;Ei8iLQoJb3ZlcnJpZGVzEiBDaFVLQlhWelpYSnpFZ3d4TUM0d0xqQXVOREk2T0RBPQ==&#x27;}&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;å¦‚ä½•æå–å½“å‰çš„traceå¹¶è¦†ç›–&lt;/span&gt;&lt;/p&gt;&lt;p&gt;ä¸ºäº†ä»å¼€å‘äººå‘˜é‚£é‡ŒæŠ½è±¡å‡ºè¿™ç§æ•°æ®åºåˆ—åŒ–ï¼Œæˆ‘ä»¬ä¸ºç°æœ‰çš„ä»£ç†åº”ç”¨ç¨‹åºæ·»åŠ äº†åˆ›å»ºå¤´çš„å·¥å…·(è¯·é˜…è¯»æ›´å¤šå…³äºä»£ç†çš„ä¿¡æ¯)ã€‚å¼€å‘äººå‘˜å°†å®¢æˆ·ç«¯æŒ‡å‘ä»£ç†ï¼Œä»è€Œå¯ä»¥ç”¨ç”¨æˆ·å®šä¹‰çš„Typescriptä»£ç æ‹¦æˆªè¯·æ±‚/å“åº”æ•°æ®ã€‚æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåŠ©æ‰‹å‡½æ•°&lt;code&gt;setEnvoyOverride(service: string, sha: string)&lt;/code&gt;ï¼Œå®ƒå°†é€šè¿‡&lt;code&gt;sha&lt;/code&gt;æŸ¥æ‰¾IPåœ°å€ï¼Œåˆ›å»º&lt;code&gt;Override&lt;/code&gt;Â protobufï¼Œç¼–ç å¤´éƒ¨ï¼Œå¹¶ç¡®ä¿å®ƒè¢«é™„åŠ åˆ°é€šè¿‡ä»£ç†çš„æ¯ä¸ªè¯·æ±‚ä¸Šã€‚&lt;/p&gt;&lt;h5&gt;ä¸Šä¸‹æ–‡ä¼ æ’­ï¼ˆContext Propagationï¼‰&lt;/h5&gt;&lt;p&gt;ä¸Šä¸‹æ–‡ä¼ æ’­åœ¨ä»»ä½•ä¸€ä¸ªåˆ†å¸ƒå¼è·Ÿè¸ªç³»ç»Ÿä¸­éƒ½å¾ˆé‡è¦ã€‚æˆ‘ä»¬éœ€è¦å…ƒæ•°æ®åœ¨è¯·æ±‚çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…éƒ½å¯ç”¨ï¼Œä»¥ç¡®ä¿è®¸å¤šæ·±å±‚è°ƒç”¨çš„æœåŠ¡èƒ½å¤Ÿè®¿é—®ç”¨æˆ·æŒ‡å®šçš„è¦†ç›–ã€‚æˆ‘ä»¬å¸Œæœ›ç¡®ä¿æ¯ä¸ªæœåŠ¡éƒ½èƒ½å°†å…ƒæ•°æ®æ­£ç¡®è½¬å‘åˆ°è¯·æ±‚æµä¸­åç»­çš„æœåŠ¡ä¸­â€”â€”å³ä½¿æœåŠ¡æœ¬èº«å¹¶ä¸å…³å¿ƒå…¶å†…å®¹ã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7925&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/9utHkjMdE0ViakuqpKG829aZCvhDorrxxVlud0KyUjgEBibFiaeu53nsFEhCmczpAz6DT5YJlYY0kib84Wf0NeZKKA/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1200&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è°ƒç”¨å›¾ä¸­çš„æ¯ä¸ªæœåŠ¡éƒ½å¿…é¡»ä¼ æ’­å…ƒæ•°æ®ä»¥å®ç°å®Œæ•´çš„è·Ÿè¸ªè¦†ç›–&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;Lyftçš„åŸºç¡€è®¾æ–½ç”¨æˆ‘ä»¬æœ€å¸¸ç”¨çš„è¯­è¨€(Pythonã€Goã€Typescript)ç»´æŠ¤æ ‡å‡†çš„è¯·æ±‚åº“ï¼Œä¸ºå¼€å‘äººå‘˜å¤„ç†ä¸Šä¸‹æ–‡ä¼ æ’­ã€‚å¦‚æœæœåŠ¡æ‰€æœ‰è€…ä½¿ç”¨è¿™äº›åº“è°ƒç”¨å¦ä¸€ä¸ªæœåŠ¡ï¼Œä¸Šä¸‹æ–‡ä¼ æ’­å¯¹ç”¨æˆ·å°±æ˜¯é€æ˜çš„ã€‚&lt;/p&gt;&lt;p&gt;ä¸å¹¸çš„æ˜¯ï¼Œåœ¨è¿™ä¸ªé¡¹ç›®æ¨å‡ºæœŸé—´ï¼Œæˆ‘ä»¬å‘ç°ä¸Šä¸‹æ–‡ä¼ æ’­å¹¶ä¸åƒæˆ‘ä»¬å¸Œæœ›çš„é‚£æ ·æ™®éã€‚æœ€åˆç»å¸¸æœ‰ç”¨æˆ·æ¥æ‰¾æˆ‘ä»¬ï¼Œè¯´ä»–ä»¬çš„è¯·æ±‚æ²¡æœ‰è¢«è¦†ç›–ï¼Œç½ªé­ç¥¸é¦–é€šå¸¸æ˜¯traceä¸¢å¤±ã€‚æˆ‘ä»¬æŠ•å…¥äº†å¤§é‡èµ„é‡‘ï¼Œä»¥ç¡®ä¿ä¸Šä¸‹æ–‡ä¼ æ’­èƒ½å¤Ÿè·¨å„ç§è¯­è¨€ç‰¹æ€§(ä¾‹å¦‚Python gevent/greenlets)ã€å¤šç§è¯·æ±‚åè®®(HTTP/gRPC)ä»¥åŠå„ç§å¼‚æ­¥ä½œä¸š/é˜Ÿåˆ—(SQS&lt;span&gt;[9]&lt;/span&gt;)å·¥ä½œã€‚æˆ‘ä»¬è¿˜æ·»åŠ äº†å¯è§‚å¯Ÿæ€§å’Œå·¥å…·æ¥è¯Šæ–­æ¶‰åŠtraceä¸¢å¤±çš„é—®é¢˜ï¼Œä¾‹å¦‚æ ‡è¯†æ²¡æœ‰æ·»åŠ å¤´éƒ¨çš„æœåŠ¡å‡ºå£çš„æŒ‡ç¤ºæ¿ã€‚&lt;/p&gt;&lt;h3&gt;æ‰©å±•Envoy&lt;/h3&gt;&lt;p&gt;æ—¢ç„¶æˆ‘ä»¬å·²ç»åœ¨è¯·æ±‚ä¸­ä¼ æ’­äº†é‡å†™å…ƒæ•°æ®ï¼Œå°±éœ€è¦ä¿®æ”¹ç½‘ç»œå±‚æ¥è¯»å–å…ƒæ•°æ®å¹¶é‡å®šå‘åˆ°æƒ³è¦çš„å¸è½½å®ä¾‹ã€‚&lt;/p&gt;&lt;p&gt;å› ä¸ºæˆ‘ä»¬æ‰€æœ‰æœåŠ¡éƒ½æ˜¯é€šè¿‡Envoy sidecarå‘å‡ºè¯·æ±‚çš„ï¼Œæ‰€ä»¥å¯ä»¥åœ¨è¿™äº›ä»£ç†ä¸­åµŒå…¥ä¸€äº›ä¸­é—´ä»¶æ¥è¯»å–è¦†ç›–å¹¶é€‚å½“ä¿®æ”¹è·¯ç”±è§„åˆ™ã€‚æˆ‘ä»¬åˆ©ç”¨Envoyçš„HTTPè¿‡æ»¤ç³»ç»Ÿ&lt;span&gt;[10]&lt;/span&gt;å¤„ç†è¯·æ±‚ï¼Œå› æ­¤åœ¨HTTPè¿‡æ»¤å™¨ä¸­å®ç°äº†ä¸¤ä¸ªæ­¥éª¤ï¼šè¯»å–è¯·æ±‚å¤´çš„è¦†ç›–ä¿¡æ¯ï¼Œå¹¶ä¿®æ”¹è·¯ç”±è§„åˆ™ï¼Œä»è€Œå°†è·¯ç”±é‡å®šå‘åˆ°å·²å¸è½½çš„éƒ¨ç½²ã€‚&lt;/p&gt;&lt;h5&gt;åˆ©ç”¨Envoy HTTPè¿‡æ»¤å™¨è·Ÿè¸ª&lt;/h5&gt;&lt;p&gt;æˆ‘ä»¬å†³å®šåˆ›å»ºä¸€ä¸ªè§£ç è¿‡æ»¤å™¨&lt;span&gt;[10]&lt;/span&gt;ï¼Œå…è®¸æˆ‘ä»¬åœ¨è¯·æ±‚è¢«å‘é€åˆ°ä¸Šæ¸¸é›†ç¾¤ä¹‹å‰è§£æå¹¶å¯¹è¦†ç›–åšå‡ºååº”ã€‚HTTPè¿‡æ»¤ç³»ç»Ÿæä¾›äº†ç®€å•çš„APIï¼Œå¯ä»¥è·å–å½“å‰çš„ç›®çš„è·¯ç”±ä»¥åŠæ­£åœ¨å¤„ç†çš„è¯·æ±‚çš„æ‰€æœ‰æŠ¥å¤´ã€‚è™½ç„¶æ˜¯ç”¨C++å®ç°çš„ï¼Œä½†ä¸‹é¢çš„ä¼ªä»£ç åæ˜ äº†åŸºæœ¬è¦ç‚¹ï¼š&lt;/p&gt;&lt;p&gt;&lt;span aria-label=&quot;icon: copy&quot;&gt;&lt;svg viewbox=&quot;64 64 896 896&quot; focusable=&quot;false&quot; data-icon=&quot;copy&quot; fill=&quot;currentColor&quot; aria-hidden=&quot;true&quot;&gt;&lt;path d=&quot;M832 64H296c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496v688c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V96c0-17.7-14.3-32-32-32zM704 192H192c-17.7 0-32 14.3-32 32v530.7c0 8.5 3.4 16.6 9.4 22.6l173.3 173.3c2.2 2.2 4.7 4 7.4 5.5v1.9h4.2c3.5 1.3 7.2 2 11 2H704c17.7 0 32-14.3 32-32V224c0-17.7-14.3-32-32-32zM350 856.2L263.9 770H350v86.2zM664 888H414V746c0-22.1-17.9-40-40-40H232V264h432v624z&quot;/&gt;&lt;/svg&gt;&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;routing_overrides_filter&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;route&lt;span&gt;,&lt;/span&gt; headers&lt;span&gt;):&lt;/span&gt;&lt;br/&gt;    routing_overrides &lt;span&gt;=&lt;/span&gt; headers&lt;span&gt;.&lt;/span&gt;trace&lt;span&gt;().&lt;/span&gt;baggage&lt;span&gt;()[&lt;/span&gt;&lt;span&gt;&#x27;overrides&#x27;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;# {&#x27;users&#x27;: &#x27;10.0.0.42:80&#x27;}&lt;/span&gt;&lt;br/&gt;    next_cluster &lt;span&gt;=&lt;/span&gt; route&lt;span&gt;.&lt;/span&gt;cluster&lt;span&gt;()&lt;/span&gt; &lt;span&gt;# &#x27;users&#x27;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;# modify the route if there&#x27;s an override for the cluster we are going to&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;if&lt;/span&gt; next_cluster &lt;span&gt;in&lt;/span&gt; routing_overrides&lt;span&gt;:&lt;/span&gt;&lt;br/&gt;        &lt;br/&gt;        &lt;span&gt;# the user provided the ip/port of their offloaded deploy in the header baggage&lt;/span&gt;&lt;br/&gt;        offloaded_instance_ip_port &lt;span&gt;=&lt;/span&gt; routing_overrides&lt;span&gt;[&lt;/span&gt;next_cluster&lt;span&gt;]&lt;/span&gt; &lt;span&gt;# &#x27;10.0.0.42:80&#x27;&lt;/span&gt;&lt;br/&gt;        &lt;br/&gt;        &lt;span&gt;# redirect the request to the ORIGINAL_DST cluster with the new ip/port header&lt;/span&gt;&lt;br/&gt;        headers&lt;span&gt;.&lt;/span&gt;&lt;span&gt;set&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&#x27;x-envoy-original-dst-host&#x27;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; ip_port&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;        route&lt;span&gt;.&lt;/span&gt;set_cluster&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&#x27;original_dst_cluster&#x27;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿‡æ»¤å™¨ä½¿ç”¨Envoyçš„è·Ÿè¸ªå®ç”¨ç¨‹åºæå–baggageä¸­åŒ…å«çš„è¦†ç›–ã€‚è™½ç„¶è¿‡æ»¤å™¨æ€»æ˜¯å¯ä»¥è®¿é—®åƒ&lt;code&gt;traceId&lt;/code&gt;å’Œ&lt;code&gt;isSampled&lt;/code&gt;è¿™æ ·çš„è·Ÿè¸ªä¿¡æ¯ï¼Œä½†æˆ‘ä»¬é¦–å…ˆå¿…é¡»ä¿®æ”¹Envoyï¼Œä»è€Œå¯ä»¥æå–baggageä¸­çš„ä¿¡æ¯&lt;span&gt;[11]&lt;/span&gt;ã€‚åˆå¹¶äº†è¿™ä¸ªæ›´æ”¹åï¼Œè¿‡æ»¤å™¨å°±å¯ä»¥ä½¿ç”¨æ–°çš„APIæ¥æå–åº•å±‚traceä¸­çš„baggageï¼š&lt;code&gt;routing_overrides = headers.trace().baggage()[&#x27;overrides&#x27;]&lt;/code&gt;&lt;/p&gt;&lt;h5&gt;æœ€åˆç›®çš„é›†ç¾¤ï¼ˆOriginal Destination Clusterï¼‰&lt;/h5&gt;&lt;p&gt;å‡è®¾è¦†ç›–åº”ç”¨äºå½“å‰ç›®æ ‡é›†ç¾¤ï¼Œåˆ™å¿…é¡»å°†è¯·æ±‚é‡å®šå‘åˆ°å·²å¸è½½çš„éƒ¨ç½²ã€‚æˆ‘ä»¬ä½¿ç”¨Envoyçš„åŸå§‹ç›®çš„åœ°&lt;span&gt;[12]&lt;/span&gt;(&lt;code&gt;ORIGINAL_DST&lt;/code&gt;)å°†è¯·æ±‚å‘é€åˆ°ä¸€ä¸ªç”±baggageæä¾›çš„è¦†ç›–ã€‚&lt;/p&gt;&lt;p&gt;å¯¹äºæˆ‘ä»¬é…ç½®çš„&lt;code&gt;ORIGINAL_DST&lt;/code&gt;é›†ç¾¤ï¼Œæœ€ç»ˆç›®çš„åœ°æ˜¯ç”±ä¸€ä¸ªç‰¹æ®Šçš„&lt;code&gt;x-envoy-original-dst-host&lt;/code&gt;&lt;span&gt;[13]&lt;/span&gt;æŠ¥å¤´å†³å®šçš„ï¼Œå®ƒåŒ…å«ä¸€ä¸ªip/portï¼Œå¦‚&lt;code&gt;10.0.42:80&lt;/code&gt;ï¼ŒHTTPè¿‡æ»¤å™¨å¯ä»¥æ”¹å˜è¿™ä¸ªæŠ¥å¤´æ¥é‡å®šå‘è¯·æ±‚ã€‚&lt;/p&gt;&lt;p&gt;ä¾‹å¦‚ï¼Œå¦‚æœè¯·æ±‚æœ€åˆæ˜¯ä¸º&lt;code&gt;user&lt;/code&gt;é›†ç¾¤å‡†å¤‡çš„ï¼Œä½†æ˜¯ç”¨æˆ·é‡å†™äº†ip/portï¼Œæˆ‘ä»¬å°†æŠŠ&lt;code&gt;x-envoy-original-dst-host&lt;/code&gt;æ›´æ”¹ä¸ºæ‰€æä¾›çš„ip/portã€‚&lt;/p&gt;&lt;p&gt;å½“&lt;code&gt;x-envoy-original-dst-host&lt;/code&gt;è¢«ä¿®æ”¹åï¼Œè¿‡æ»¤å™¨éœ€è¦å°†è¯·æ±‚å‘é€åˆ°&lt;code&gt;ORIGINAL_DST&lt;/code&gt;é›†ç¾¤ï¼Œä»¥ç¡®ä¿å‘é€åˆ°æ–°çš„ç›®çš„åœ°ã€‚è¿™ä¸€éœ€æ±‚ä¿ƒä½¿æˆ‘ä»¬å¯¹Envoyåšå‡ºäº†ç¬¬äºŒä¸ªå˜æ›´ï¼šæ”¯æŒè·¯ç”±å¯å˜æ€§&lt;span&gt;[14]&lt;/span&gt;ã€‚åˆå¹¶æ­¤å˜æ›´åï¼Œè¿‡æ»¤å™¨å°±å¯ä»¥æ”¹å˜ç›®æ ‡é›†ç¾¤ï¼š&lt;code&gt;route.set_cluster(&#x27;original_dst_cluster&#x27;)&lt;/code&gt;ã€‚&lt;/p&gt;&lt;h3&gt;ç»“æœ&lt;/h3&gt;&lt;p&gt;é€šè¿‡å¸è½½éƒ¨ç½²ã€ä¼ æ’­baggageå’ŒEnvoyè¿‡æ»¤å™¨ï¼Œæˆ‘ä»¬ç°åœ¨å·²ç»å±•ç¤ºäº†é¢„å‘è¦†ç›–ğŸ‰çš„æ‰€æœ‰ä¸»è¦ç»„ä»¶ã€‚&lt;/p&gt;&lt;p&gt;è¿™ä¸ªå·¥ä½œæµç¨‹æå¤§æ”¹è¿›äº†ç«¯åˆ°ç«¯æµ‹è¯•çš„å¼€é”€ã€‚æˆ‘ä»¬ç°åœ¨æ¯ä¸ªæœˆéƒ½æœ‰100ä¸ªç‹¬ç«‹çš„æœåŠ¡éƒ¨ç½²ï¼Œä¸ä»¥å‰çš„Oneboxè§£å†³æ–¹æ¡ˆç›¸æ¯”ï¼Œé¢„å‘è¦†ç›–æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ç¯å¢ƒé…ç½®ï¼š&lt;/span&gt;Â Oneboxè¦æ±‚ç”¨æˆ·å¯åŠ¨æ•°ç™¾ä¸ªå®¹å™¨å¹¶è¿è¡Œå®šåˆ¶çš„ç§å­è„šæœ¬ï¼Œéœ€è¦å¼€å‘äººå‘˜èŠ±ä¸Šè‡³å°‘1ä¸ªå°æ—¶å‡†å¤‡ç¯å¢ƒã€‚é€šè¿‡é¢„å‘è¦†ç›–ï¼Œç”¨æˆ·å¯ä»¥åœ¨10åˆ†é’Ÿå†…é€šè¿‡ç«¯åˆ°ç«¯ç¯å¢ƒéƒ¨ç½²æŸä¸ªå˜æ›´ã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ä½æˆæœ¬åŸºç¡€è®¾æ–½ï¼š&lt;/span&gt;Â Oneboxè¿è¡Œçš„æ˜¯å®Œå…¨ç‹¬ç«‹äºé¢„å‘/ç”Ÿäº§ç¯å¢ƒçš„æŠ€æœ¯æ ˆï¼Œæ‰€ä»¥åº•å±‚åŸºç¡€è®¾æ–½ç»„ä»¶(ä¾‹å¦‚ç½‘ç»œã€å¯è§‚å¯Ÿæ€§)é€šå¸¸æ˜¯å•ç‹¬å®ç°çš„ã€‚é€šè¿‡å°†ç«¯åˆ°ç«¯æµ‹è¯•è½¬ç§»åˆ°é¢„å‘ç¯å¢ƒï¼Œç”±äºç¯å¢ƒæ”¹è¿›ä¸ºé›†ä¸­ç»´æŠ¤ï¼Œé™ä½äº†åŸºç¡€è®¾æ–½æ”¯æŒçš„æˆæœ¬ã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ä½æˆæœ¬åŠŸèƒ½éªŒè¯ï¼š&lt;/span&gt;Â ç”±äºOneboxå’Œäº§å“ä¹‹é—´çš„å·®å¼‚ï¼Œå³ä½¿åœ¨Oneboxç«¯åˆ°ç«¯æµ‹è¯•ä¹‹åï¼Œç”¨æˆ·ä¹Ÿç»å¸¸(åˆç†çš„)æ€€ç–‘ä»£ç çš„æ­£ç¡®æ€§ã€‚é¢„å‘ä¸ç”Ÿäº§ç¯å¢ƒåœ¨æ•°æ®å’Œæµé‡æ¨¡å¼æ–¹é¢æ›´ä¸ºæ¥è¿‘ï¼Œä½¿ç”¨æˆ·æ›´æœ‰ä¿¡å¿ƒç›¸ä¿¡å¦‚æœå˜æ›´åœ¨é¢„å‘ç¯å¢ƒä¸­å°±ç»ªï¼Œä¹Ÿå°±æ„å‘³ç€åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å°±ç»ªã€‚&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h5&gt;é¢å¤–çš„å·¥ä½œ&lt;/h5&gt;&lt;p&gt;å¯åŠ¨é¢„å‘è¦†ç›–æ˜¯ä¸€é¡¹æ¶‰åŠç½‘ç»œã€éƒ¨ç½²ã€å¯è§‚å¯Ÿæ€§ã€å®‰å…¨æ€§å’Œå¼€å‘å·¥å…·çš„è·¨ç»„ç»‡å·¥ä½œã€‚ä»¥ä¸‹æ˜¯ä¸€äº›æ²¡æœ‰æ¶‰åŠåˆ°çš„é¢å¤–å·¥ä½œæµç¨‹ï¼š&lt;/p&gt;&lt;h5&gt;æœªæ¥çš„å·¥ä½œ&lt;/h5&gt;&lt;p&gt;å±•æœ›æœªæ¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é¢„å‘è¦†ç›–åšæ›´å¤šçš„äº‹æƒ…ï¼Œè®©ç”¨æˆ·é‡æ–°åˆ›å»ºæƒ³è¦éªŒè¯çš„ç«¯åˆ°ç«¯åœºæ™¯ï¼š&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å¯å…±äº«çš„baggageï¼š&lt;/span&gt;Â ä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªé›†ä¸­ç®¡ç†çš„baggageå­˜å‚¨ï¼Œå…è®¸æŒä¹…åŒ–ä¸€ç»„ç‹¬ç‰¹çš„è¦†ç›–(æœåŠ¡&lt;code&gt;foo&lt;/code&gt;æ˜¯Xï¼ŒæœåŠ¡&lt;code&gt;bar&lt;/code&gt;æ˜¯Yï¼Œæ ‡ç­¾&lt;code&gt;baz&lt;/code&gt;æ˜¯Z)ï¼Œé€šè¿‡ä¸å›¢é˜Ÿæˆå‘˜å…±äº«ç¡®åˆ‡çš„åœºæ™¯è€Œæ”¹å–„åä½œã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;è¦†ç›–ç”¨ä¾‹ï¼š&lt;/span&gt;Â è®©æˆ‘ä»¬çš„åŸºç¡€è®¾æ–½äº†è§£å…¶ä»–è¦†ç›–ï¼Œä»¥ä¾¿è®©ç”¨æˆ·æ§åˆ¶è¯·æ±‚çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Envoyé”™è¯¯æ³¨å…¥&lt;span&gt;[15]&lt;/span&gt;å°†äººé€ å»¶è¿Ÿæ³¨å…¥åˆ°è¯·æ±‚ä¸­ï¼Œä¸´æ—¶å¯ç”¨è°ƒè¯•æ—¥å¿—è®°å½•ï¼Œæˆ–è€…é‡å®šå‘åˆ°ä¸åŒçš„æ•°æ®åº“ã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ä¸æœ¬åœ°å¼€å‘é›†æˆï¼š&lt;/span&gt;Â æˆ‘ä»¬å¯ä»¥å…è®¸é‡å†™è¯·æ±‚ï¼Œç›´æ¥å°†è¯·æ±‚é‡è·¯ç”±åˆ°ç”¨æˆ·çš„ç¬”è®°æœ¬ç”µè„‘ï¼Œè€Œä¸æ˜¯è¦æ±‚ç”¨æˆ·åœ¨å‡†å¤‡é˜¶æ®µå¯åŠ¨ä»–ä»¬çš„PRå®ä¾‹ã€‚&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;è¯·ç»§ç»­å…³æ³¨æˆ‘ä»¬ç³»åˆ—ä¸­çš„ä¸‹ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°†å±•ç¤ºå¦‚ä½•åœ¨äº¤ä»˜é˜¶æ®µä½¿ç”¨è‡ªåŠ¨åŒ–éªŒæ”¶æµ‹è¯•å¯¹ç”Ÿäº§éƒ¨ç½²è¿›è¡ŒéªŒæ”¶ï¼&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;span&gt;References:&lt;/span&gt;&lt;br/&gt;[1] Scaling productivity on microservices at Lyft (Part 3): Extending our Envoy mesh with staging overrides:Â https://eng.lyft.com/scaling-productivity-on-microservices-at-lyft-part-3-extending-our-envoy-mesh-with-staging-fdaafafca82f&lt;br/&gt;[2] Service Level Objective:Â https://en.wikipedia.org/wiki/Service-level_objective&lt;br/&gt;[3] Severity Levels:Â https://response.pagerduty.com/before/severity_levels/&lt;br/&gt;[4] Envoy Proxy:Â https://www.envoyproxy.io/&lt;br/&gt;[5] Terminology:Â https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/intro/terminology#:~:text=Upstream%3A%20An%20upstream%20host%20receives%20connections%20and%20requests%20from%20Envoy%20and%20returns%20responses.&lt;br/&gt;[6] xDS protocol:Â https://www.envoyproxy.io/docs/envoy/latest/api-docs/xds_protocol&lt;br/&gt;[7] Tags, logs and baggage:Â https://opentracing.io/docs/overview/tags-logs-baggage/&lt;br/&gt;[8] lightstep_carrier.proto:Â https://github.com/lightstep/lightstep-tracer-protos/blob/13cdeec9bd4a0ba2cd7062fecde3a057071edcb8/src/lightstep/lightstep_carrier.proto&lt;br/&gt;[9] Amazon Simple Queue Service:Â https://aws.amazon.com/sqs/&lt;br/&gt;[10] HTTP filters:Â https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/http/http_filters&lt;br/&gt;[11] tracing: add baggage methods to Tracing::Span:Â https://github.com/envoyproxy/envoy/pull/12260&lt;br/&gt;[12] Original destination:Â https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/load_balancing/original_dst&lt;br/&gt;[13] Original destination host request header:Â https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/load_balancing/original_dst#original-destination-host-request-header&lt;br/&gt;[14] http: support route mutability:Â https://github.com/envoyproxy/envoy/pull/15266&lt;br/&gt;[15] Fault Injection:Â https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/fault_filter&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote&gt;&lt;p&gt;ä½ å¥½ï¼Œæˆ‘æ˜¯ä¿å‡¡ï¼Œåœ¨Motorolaåšè¿‡ç ”å‘ï¼Œç°åœ¨åœ¨MaveniråšæŠ€æœ¯å·¥ä½œï¼Œå¯¹é€šä¿¡ã€ç½‘ç»œã€åç«¯æ¶æ„ã€äº‘åŸç”Ÿã€DevOpsã€CICDã€åŒºå—é“¾ã€AIç­‰æŠ€æœ¯å§‹ç»ˆä¿æŒç€æµ“åšçš„å…´è¶£ï¼Œå¹³æ—¶å–œæ¬¢é˜…è¯»ã€æ€è€ƒï¼Œç›¸ä¿¡æŒç»­å­¦ä¹ ã€ç»ˆèº«æˆé•¿ï¼Œæ¬¢è¿ä¸€èµ·äº¤æµå­¦ä¹ ã€‚&lt;br/&gt;å¾®ä¿¡å…¬ä¼—å·ï¼šDeepNoMind&lt;/p&gt;&lt;/blockquote&gt;
          &lt;/div&gt;

          

          



           
                                
                    
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>59d91f46c428474f0caeea8d94ef512d</guid>
<title>äº‘åŸç”Ÿç½‘ç»œåˆ©å™¨--Cilium ä¹‹ eBPF ç¯‡</title>
<link>https://toutiao.io/k/12919uh</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                                                                     &quot; id=&quot;js_content&quot;&gt;
            &lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;245&quot; data-backw=&quot;578&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;361&quot; data-ratio=&quot;0.425&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/1DjrTiaica04lheX9aIvU5iabXFr4iaceFibuC3hoRXeibWYXqlVcESFAHruVte7bickB6crt4jaTrHz2BvRzRTpb6NSA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1080&quot;/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;â€œ&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;åœ¨ä¸Šä¸€ç¯‡ã€Š&lt;/span&gt;&lt;span&gt;&lt;strong&gt;Â &lt;/strong&gt;&lt;/span&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzA5NTUxNzE4MQ==&amp;amp;mid=2659274355&amp;amp;idx=1&amp;amp;sn=68acffa0684ad8546682e4a4d40bbdd8&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;äº‘åŸç”Ÿç½‘ç»œåˆ©å™¨--Cilium æ€»è§ˆ&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;ç¯‡&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ã€‹çš„æ–‡ç« ä¸­ï¼Œæ•´ä½“çš„ä»‹ç»äº†ä¸€ä¸‹ Cilium ä¸­å¸¸è§æŠ€æœ¯æœ¯è¯­å’Œæ€»ä½“çš„æ¶æ„ä»‹ç»ã€‚æ¥ä¸‹æ¥çš„ç¯‡å¹…ä¼šé‡ç‚¹ä»‹ç» eBPF çš„ä¸€äº›å…³é”®ç‰¹æ€§ï¼Œä»¥åŠåœ¨ Cilium ä¸­ä½¿ç”¨Â eBPF åšäº†å“ªäº›å·¥ä½œï¼Œå¹¶ä»‹ç»åŸºæœ¬çš„åŸç†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;hr data-style=&quot;border-style: solid; border-width: 0px 0px 0px; border-color: rgba(0, 0, 0, 0.1); transform-origin: 0px 0px; transform: scale(1, 0.5);&quot; class=&quot;js_darkmode__10&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span/&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;01&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;h2&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;æ€»è¿°&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;eBPF æ˜¯ä¸€ç§å¯ä»¥åœ¨ä¸æ”¹å˜ Kernel çš„å‰æä¸‹ï¼Œå¼€å‘ Kernel ç›¸å…³èƒ½åŠ›çš„ä¸€ç§æŠ€æœ¯ã€‚å¼€å‘ eBPF çš„ç¨‹åºéœ€è¦ä½¿ç”¨ C è¯­è¨€ï¼Œå› ä¸º Kernel æ˜¯Â C è¯­è¨€å¼€å‘çš„ï¼ŒeBPF åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­ä¼šä¾èµ– Kernel çš„Â uapi ä»¥åŠ Linux çš„Â Hepler æ–¹æ³•æ¥å®Œæˆå¤„ç†ã€‚Linux æ˜¯åŸºäºäº‹ä»¶æ¨¡å‹çš„ç³»ç»Ÿï¼Œä¹Ÿæ”¯æŒäº† eBPF ç±»å‹ Hookï¼Œåœ¨ä¸€äº› Hook ç‚¹æ‰§è¡ŒæŒ‚è½½çš„ eBPF ç¨‹åºã€‚åœ¨ä¸åŒçš„æŒ‚è½½ç‚¹ï¼Œæ”¯æŒä¸åŒç±»å‹çš„ eBPF ç¨‹åºç±»å‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸ºä»€ä¹ˆ eBPF ä¼šæœ‰ç±»å‹ï¼Ÿä¸»è¦è€ƒè™‘çš„æ˜¯ï¼ŒLinux æœ¬èº«çš„èƒ½åŠ›éå¸¸å¤šï¼Œè€Œæä¾›ç»™å¤–éƒ¨å¯è°ƒç”¨çš„æ–¹æ³•æ˜¯å¾ˆå°‘çš„ï¼Œé‚£å°±éœ€è¦ä¸ºä¸åŒçš„åœºæ™¯å’Œèƒ½åŠ›ï¼Œå¼€æ”¾ä¸åŒçš„ç³»ç»Ÿè°ƒç”¨èƒ½åŠ›ï¼Œå“ªäº›èƒ½åŠ›åœ¨å“ªäº›ç±»å‹ä¸‹å¯ä»¥è¢«è°ƒç”¨ï¼Œå°±è·Ÿ eBPF çš„ç¨‹åºç±»å‹æœ‰å…³ç³»äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸¾ä¾‹ï¼Œå¯¹äºå¤„ç†ç½‘ç»œçš„ eBPF ç¨‹åºï¼Œä¸éœ€è¦ç»™è¿™ç±»å‹çš„ç¨‹åºå¼€æ”¾å¤„ç†å­˜å‚¨çš„èƒ½åŠ›ã€‚å¯¹äºä¸€ä¸ªç¨‹åºè€Œè¨€ï¼Œä¸»è¦å°±åŒ…å«äº†æ•°æ®ç»“æ„å’Œç®—æ³•ä¸¤ä¸ªéƒ¨åˆ†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨ eBPF ä¸­ä¹Ÿæ˜¯ä¸€æ ·ï¼Œç¨‹åºè‡ªå·±çš„æ•°æ®ç»“æ„æ˜¯å¯ä»¥è‡ªç”±å®šä¹‰çš„ï¼Œä½†æ˜¯æœ‰ä¸€ äº›å’Œå†…æ ¸ç›¸å…³çš„èƒ½åŠ›ä»¥åŠ eBPF å†…ç½®æä¾›çš„æ•°æ®å¤„ç†ï¼Œå°±å¿…é¡»è¦ä¾èµ–ç‰¹å®šçš„æ•°æ®ç»“æ„ï¼Œè¿™é‡Œçš„æ•°æ®ç»“æ„å°±æ˜¯ eBPF çš„ä¸åŒç±»å‹çš„ Mapsã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¥ä¸‹æ¥å°±æ˜¯ç®—æ³•ï¼ŒeBPF çš„ç®—æ³•æ˜¯æœ‰ä¸€å®šçš„é™åˆ¶çš„ï¼Œå¯¹äºè¦è°ƒç”¨å†…æ ¸çš„èƒ½åŠ›çš„ï¼Œéœ€è¦é€šè¿‡ Linux Hepler çš„æ–¹å¼æ¥å®Œæˆè°ƒç”¨ï¼Œè€Œ Linux Hepler æ˜¯è·Ÿç€ Linux çš„å†…æ ¸ç‰ˆæœ¬èµ°çš„ï¼Œå½“éœ€è¦ Linux å¼€æ”¾ä¸€äº›æ–°çš„èƒ½åŠ›ç»™å¤–éƒ¨ï¼Œå°±éœ€è¦å¼€å‘ Linux çš„Â Helperï¼Œåˆå¹¶åˆ° Kernel ä¹‹åï¼ŒeBPF çš„ç¨‹åºæ‰å¯ä»¥ä½¿ç”¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿˜æœ‰ä¸€éƒ¨åˆ†çš„ç®—æ³•å°±æ˜¯ eBPF ç¨‹åºè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘äº†ï¼ŒåŒæ—¶åœ¨ eBPF çš„ç®—æ³•éƒ¨åˆ†ä¸­ï¼Œæœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„éƒ¨åˆ†ï¼Œå°±æ˜¯ eBPF ç¨‹åºä¹‹é—´äº’ç›¸è°ƒç”¨çš„èƒ½åŠ›ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªä¸“ä¸šæœ¯è¯­å« Tail CallÂ (å°¾éƒ¨è°ƒç”¨)ã€‚å¯ä»¥ç†è§£æˆï¼ŒeBPF A ç¨‹åºï¼Œè°ƒç”¨ eBPF B ç¨‹åºçš„æ—¶å€™ï¼Œæ˜¯ç»è¿‡ Tail Call çš„æ–¹å¼ï¼Œè¿™ç§æ–¹å¼çš„è°ƒç”¨ï¼Œç¨‹åºè°ƒç”¨ä¸ä¼šæœ‰è¿”å›ï¼Œè€Œæ˜¯ç›´æ¥è¿›å…¥åˆ°å¦å¤–ä¸€ä¸ªç¨‹åºï¼Œä½†æ˜¯ä¸åŒ eBPF ç¨‹åºä¹‹é—´æ˜¯å¯ä»¥é€šè¿‡ Pin çš„æœºåˆ¶å…±äº«è¿™äº›æ•°æ®ç»“æ„çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Cilium ä¸­ä½¿ç”¨äº†å¤§é‡å¾— eBPF æŠ€æœ¯ï¼Œå®ç°äº† K8s çš„å®¹å™¨ç½‘ç»œçš„èƒ½åŠ›ã€‚&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;h2&gt;&lt;span&gt;&lt;strong&gt;02&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;h2&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;æŠ€æœ¯æœ¯è¯­&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;strong&gt;&lt;span/&gt;&lt;/strong&gt;&lt;/h2&gt;&lt;section&gt;&lt;span&gt;&lt;span/&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;ä¸ºäº†æ›´å¥½çš„ç†è§£ Cilium å®ç°çš„æ•°æ®å¹³é¢çš„èƒ½åŠ›ï¼Œé¦–å…ˆéœ€è¦å¯¹ä¸€äº›å¸¸è§çš„ eBPF çš„ç›¸å…³æ¦‚å¿µï¼Œæœ‰ä¸€ä¸ªåˆæ­¥çš„è®¤è¯†ï¼Œè¿™æ ·èƒ½æ›´å¥½çš„å¸®åŠ©ç†è§£åŸç†ã€‚ä»¥ä¸‹æ•´ç†ä¸€äº›æŠ€æœ¯æœ¯è¯­ï¼Œä¸åŒ…å«æ‰€æœ‰çš„ï¼Œåªæ˜¯åˆ—å‡ºæ¥ä¸€äº›ä¸»è¦çš„ç‚¹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;eBPF çš„å‘½ä»¤ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¯¹ eBPF çš„å¸¸è§æ“ä½œæ˜¯é€šè¿‡ç³»ç»Ÿè°ƒç”¨ SYSCALL å®Œæˆçš„ã€‚å¸¸è§çš„æ“ä½œï¼šå¯¹ eBPF Map çš„å¢åˆ æ”¹æŸ¥æ“ä½œï¼›Object å¯¹è±¡çš„ Pin å’ŒÂ Get æ“ä½œï¼›eBPF ç¨‹åºçš„æŒ‚è½½å’Œå¸è½½ã€‚&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.3740458015267176&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1DjrTiaica04lheX9aIvU5iabXFr4iaceFibu5jnmntPmll31vM5zicQ7dvFwKaqxFlr7TE4KmgibQlreYg1O0zLGGYnw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;786&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;eBPF çš„Â Map ç±»å‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™é‡Œæè¿°äº† eBPF Maps æ”¯æŒå“ªäº›ç±»å‹çš„ Mapsï¼Œä¸åŒç±»å‹ Map çš„ä½¿ç”¨æ–¹å¼å’Œåœºæ™¯ä¼šä¸ä¸€æ ·ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.6478405315614617&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1DjrTiaica04lheX9aIvU5iabXFr4iaceFibuicDrEr8iciaKP7GqbOQeWEkrWTMgy9MwLhOSpJTlyRy9Ih0icgdtYIG7tg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;602&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;eBPF çš„ç¨‹åºç±»å‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä»¥ä¸‹æè¿°äº† eBPF ç¨‹åºçš„ç±»å‹ç§ç±»ï¼Œä¸åŒç§ç±»çš„ eBPF ä¼šå®Œæˆä¸åŒçš„èƒ½åŠ›ã€‚ä¸¾ä¾‹ï¼Œå¦‚æœæ˜¯å’Œ XDP ç›¸å…³çš„èƒ½åŠ›ï¼Œç¨‹åºçš„ç±»å‹å°±æ˜¯ BPF_PROG_TYPE_XDPï¼›å¦‚æœæ˜¯ tc ç›¸å…³çš„èƒ½åŠ›ï¼Œç¨‹åºçš„ç±»å‹å°±æ˜¯ BPF_PROG_TYPE_SCHED_CLS å’ŒÂ BPF_PROG_TYPE_SCHED_ACTã€‚ä»€ä¹ˆæ ·çš„ Linux Helper è¢«åŠ è½½ï¼Œæ˜¯ç”±Â eBPF çš„ç¨‹åºç±»å‹å†³å®šçš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.4025974025974026&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1DjrTiaica04lheX9aIvU5iabXFr4iaceFibukticpYU0Q9LqBToMlibZ7EbMUNnzic4Qv92Uk43Ln31XxnJVicfsM1v0iag/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;770&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;eBPF çš„æŒ‚è½½ç±»å‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸åŒçš„ eBPF ç¨‹åºç±»å‹ï¼Œå°±ä¼šæœ‰ä¸åŒçš„æŒ‚è½½ç±»å‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;2.053231939163498&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1DjrTiaica04lheX9aIvU5iabXFr4iaceFibuaVWvicicTrWVFvNkic8R74sa9qd7V9DVeXWSg5PB5eK0TOgqYceia6Rchg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;526&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;eBPF Tail Callï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;span&gt;é¡¾åæ€ä¹‰å°±æ˜¯å°¾éƒ¨è°ƒç”¨ï¼Œ&lt;/span&gt;&lt;span&gt;ä¸»è¦çš„ç‰¹ç‚¹å°±&lt;/span&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;span&gt; e&lt;/span&gt;&lt;span&gt;BP&lt;/span&gt;&lt;span&gt;F &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;ç¨‹åºä»ä¸€ä¸ªè°ƒç”¨åˆ°å¦ä¸€ä¸ªï¼Œä¸åƒä¸€èˆ¬çš„ç¨‹åºè¯­è¨€çš„æ–¹æ³•è°ƒç”¨æ˜¯æœ‰è¿”å›å€¼ï¼Œ&lt;/span&gt;&lt;span&gt;Tail Call &lt;/span&gt;&lt;span&gt;ä¸ä¼šæœ‰è¿”å›å€¼çš„ï¼Œè€Œæ˜¯ä»ä¸€&lt;/span&gt;&lt;span&gt;ä¸ª&lt;/span&gt;&lt;span&gt; e&lt;/span&gt;&lt;span&gt;BP&lt;/span&gt;&lt;span&gt;F &lt;/span&gt;&lt;span&gt;ç›´&lt;/span&gt;&lt;span&gt;æ¥å°±æ‰§è¡Œåˆ°ä¸‹ä¸€&lt;/span&gt;&lt;span&gt;ä¸ª&lt;/span&gt;&lt;span&gt; e&lt;/span&gt;&lt;span&gt;BP&lt;/span&gt;&lt;span&gt;F &lt;/span&gt;&lt;span&gt;ç¨‹&lt;/span&gt;&lt;span&gt;åºï¼Œä¸¤&lt;/span&gt;&lt;span&gt;ä¸ª&lt;/span&gt;&lt;span&gt; e&lt;/span&gt;&lt;span&gt;BP&lt;/span&gt;&lt;span&gt;F &lt;/span&gt;&lt;span&gt;ä¹‹&lt;/span&gt;&lt;span&gt;é—´æ˜¯åŒçº§çš„ï¼Œ&lt;/span&gt;&lt;span&gt;ä¸æ˜¯æ–¹æ³•è°ƒç”¨çš„å…³ç³»ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.3669201520912547&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1DjrTiaica04lheX9aIvU5iabXFr4iaceFibuSD2WAqykAQoNmgkuVyToCAnibghDX2N8pR3XC7IjR3f93soS1Bg3Zng/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1052&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;eBPF Sectionï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¯ä»¥ç®€å•ç†è§£æˆ eBPF ç¨‹åºçš„æ‰§è¡Œå…¥å£ï¼Œå¯ä»¥åœ¨ç¨‹åºä¸­æŒ‡å®š Sectionã€‚ä¸¾ä¾‹ï¼š__section(&quot;from-netdev&quot;)ã€‚å¦‚æœä¸æŒ‡å®šçš„è¯ï¼Œä¼šæœ‰é»˜è®¤çš„ Sectionã€‚åœ¨å­¦ä¹  Cilium çš„Â eBPF ç¨‹åºçš„æ—¶å€™ï¼Œæ¨èé˜…è¯»çš„å…¥å£å°±æ˜¯ä»¥æ¯ä¸€ç§ eBPF çš„Â C è¯­è¨€ç¨‹åºçš„ Section éƒ¨åˆ†ä¸ºå­¦ä¹ å…¥å£ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.3904761904761905&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1DjrTiaica04lheX9aIvU5iabXFr4iaceFibunoqqrxhCVQ66YL4DHoKU2UKc6Sia8gmPtb9oiadQVNcMlTTsHEoqMSiaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;630&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;eBPF Object Pinï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ­£å¦‚å­—é¢æ„æ€ï¼ŒæŒ‡çš„æ˜¯å°† eBPF Map Pin åˆ°Â Linux çš„Â bpffs è¿™ä¸ªè™šæ‹Ÿçš„æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚ä¸»è¦çš„ä½œç”¨æ˜¯è®© eBPF çš„Â Mapsï¼Œå¯ä»¥è¢« eBPF ç¨‹åºæˆ–è€…ç”¨æˆ·æ€çš„åº”ç”¨è¯»å–å’Œå…±äº«ï¼Œåœ¨é€šè¿‡ Obj Get ä¹‹å‰ï¼Œæ˜¯éœ€è¦å…ˆå®Œæˆ Pin åŠ¨ä½œï¼Œæ‰å¯ä»¥è¢« Getã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.7763888888888889&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1DjrTiaica04lheX9aIvU5iabXFr4iaceFibuuRplX6keU7dddJsSwib7k0buFTicwjvKs7KPUwJrS7UHyia9iaibez1Rcyw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;720&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;Linux Helperï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä» Linux ç³»ç»Ÿçš„è§’åº¦ï¼Œæä¾›ä¸€äº›å¯¹å¤–è®¿é—® Linux ç³»ç»Ÿèƒ½åŠ›çš„æ–¹æ³•ï¼Œä¾›å¤–éƒ¨ç¨‹åºå»ä½¿ç”¨ã€‚å¤–éƒ¨ç¨‹åºè¦ä½¿ç”¨ Kernel çš„æ¥å£ï¼Œé‚£å°±åªèƒ½é€šè¿‡ Linux Helper æ¥å®Œæˆã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸åŒçš„ Kernel ç‰ˆæœ¬æ”¯æŒçš„ Linux Helper æ˜¯ä¸åŒçš„ï¼Œç‰ˆæœ¬è¶Šé«˜ï¼Œæ”¯æŒçš„èƒ½åŠ›è¶Šå¤šï¼Œé«˜çº§çš„èƒ½åŠ›ä¹Ÿè¶Šå¤šï¼Œä½¿ç”¨è¿™äº›é«˜çº§èƒ½åŠ›çš„å®ç°æ—¶ï¼Œç½‘ç»œæ€§èƒ½ä¹Ÿä¼šè¶Šé«˜ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå¾ˆå¤š Cilium çš„é«˜çº§èƒ½åŠ›éƒ½éœ€è¦ç‰¹å®šç‰ˆæœ¬çš„ Kernelã€‚æ›´å¤šè¯¦æƒ…è¯·å‚åŠ Â &lt;/span&gt;&lt;span&gt;bpf-helpers&lt;/span&gt;&lt;span&gt;Â ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;XDP&lt;/span&gt;&lt;span&gt;ï¼š&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;span/&gt;&lt;/span&gt;&lt;span&gt;eXpress Data Pathï¼Œæ˜¯æ•°æ®åŒ…è¿›å…¥ä¸»æœºåï¼Œæœ€æ—©çš„ä¸€ä¸ªæ”¯æŒ eBPF çš„Â Hook ç‚¹ã€‚å¯ä»¥åœ¨æ­¤é˜¶æ®µå®Œæˆå¦‚è¿‡æ»¤åŒ…ã€LB ç­‰åœºæ™¯çš„èƒ½åŠ›ã€‚åŒæ—¶ä»è¿è¡Œçš„æ—¶æœºï¼Œåˆå¯ä»¥åˆ†ä¸ºæ˜¯ç¡¬ä»¶çº§çš„ã€ç½‘ç»œé©±åŠ¨çº§çš„ã€å†…æ ¸çº§çš„ï¼Œä¾æ¬¡æ‰§è¡Œæ—¶æœºæ˜¯ç¡¬ä»¶çº§çš„æœ€æ—©Â (æ€§èƒ½æœ€å¥½)ï¼Œç½‘ç»œé©±åŠ¨çº§çš„å…¶æ¬¡ï¼Œå†…æ ¸çº§çš„æ˜¯æœ€æ™šÂ (æ€§èƒ½æœ€å·®ï¼Œä¸€èˆ¬ç”¨äº Pocï¼Œä¸å»ºè®®ç”Ÿäº§ä½¿ç”¨)ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;æŒ‚è½½ XDP çš„Â eBPF ç¨‹åºÂ (è¿™é‡Œçš„ sec å°±æ˜¯ä»£è¡¨ eBPF çš„Â Section)ï¼š&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ip link set dev em1 xdp obj prog.o sec foobar&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.279027902790279&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1DjrTiaica04lheX9aIvU5iabXFr4iaceFibuVKf8pnET01MCVuvgoe6n5D1bsQq6kiaG974dOjgc0UfFib3Wic5Sb63Sw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1111&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;XDP è¿”å›ç ï¼š&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;è¿”å›ç ä»£è¡¨çš„æ˜¯åœ¨å¤„ç†è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä¸åŒçš„é€»è¾‘éœ€è¦å¯¹æ•°æ®åŒ…è¿›è¡Œä¸åŒçš„å¤„ç†è¡Œä¸ºã€‚ä¸¾ä¾‹ï¼Œå½“è§‰å¾—æ•°æ®åŒ…éœ€è¦è¢«ä¸¢å¼ƒçš„æ—¶å€™ï¼Œå°±éœ€è¦åœ¨ eBPF ç¨‹åºä¸­è¿”å› XDP_DROPï¼Œå½“è§‰å¾—æ•°æ®åŒ…è¢«é‡å®šå‘å‡ºå»çš„æ—¶å€™ï¼Œå¯ä»¥è¿”å› XDP_TX / XDP_REDIRECTï¼›å½“è§‰å¾—æ•°æ®åŒ…éœ€è¦ç»§ç»­è¿›å…¥åˆ°å†…æ ¸çš„æ—¶å€™ï¼Œå¯ä»¥è¿”å› XDP_PASSã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.3559322033898305&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1DjrTiaica04lheX9aIvU5iabXFr4iaceFibutibAsnE2cKgVFrHrlRhPPgGAkRe9TaoXsCc00PWqLFhmsgPG9lFRYiaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1062&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;tcï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Traffic Controlï¼Œæ¯ä¸€ä¸ª Linux è¯†åˆ«çš„ç½‘ç»œè®¾å¤‡éƒ½æ”¯æŒ tc çš„èƒ½åŠ›ï¼ŒåŒ…æ‹¬ç‰©ç†çš„å’Œè™šæ‹Ÿçš„ã€‚åœ¨å®¹å™¨ç½‘ç»œç›¸å…³çš„ç½‘ç»œè®¾å¤‡çš„è¿›å‡ºå£çš„åœ°æ–¹ï¼Œ&lt;span&gt;å¯ä»¥&lt;/span&gt;åˆ©ç”¨ tc çš„èƒ½åŠ›æ¥å®Œæˆå¯¹ç½‘ç»œæ•°æ®åŒ…çš„æ§åˆ¶èƒ½åŠ›ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åŒæ—¶ï¼Œ tc æ˜¯æ”¯æŒä¸¤ä¸ªæ–¹å‘çš„ï¼Œä¸€ä¸ªæ˜¯ ingress çš„æ–¹å‘ï¼Œä¸€ä¸ª egress çš„æ–¹å‘ã€‚è€Œ XDP åªæ”¯æŒ ingress çš„æ–¹å‘ã€‚å¯ä»¥ç†è§£æˆä½¿ç”¨äº†Â tc çš„èƒ½åŠ›ï¼Œå¯ä»¥åœ¨æ•°æ®åŒ…è¿›å…¥ä¸€ä¸ªç½‘ç»œè®¾å¤‡çš„æ—¶å€™ï¼Œè¿›è¡Œç›¸å…³å¤„ç†ï¼Œåœ¨å‡ºå»çš„æ—¶å€™ï¼Œä¹Ÿå¯ä»¥è¿›è¡Œæ•°æ®åŒ…çš„å¤„ç†ã€‚è€Œä½¿ç”¨ XDP çš„æ—¶å€™ï¼Œåªèƒ½åœ¨è¿›å…¥ç½‘ç»œè®¾å¤‡çš„æ—¶å€™ï¼Œè¿›è¡Œæ•°æ®åŒ…çš„å¤„ç†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æŒ‚è½½ tc çš„Â eBPF ç¨‹åºÂ (è¿™é‡Œçš„ egress å°±æ˜¯æ–¹å‘ï¼Œsec å°±æ˜¯ä»£è¡¨ eBPF çš„Â Section)ï¼š&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;tc filter add dev em1 egress bpf da obj prog.o sec foobar&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.2800718132854578&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1DjrTiaica04lheX9aIvU5iabXFr4iaceFibuIzygo3ZictHqo1lp9Astpia0icOgK3pTXXjBEgEw9ianaNS58IOkzB3bWg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1114&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;tc è¿”å›ç ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿”å›ç ä»£è¡¨çš„æ˜¯åœ¨å¤„ç†è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä¸åŒçš„é€»è¾‘éœ€è¦å¯¹æ•°æ®åŒ…è¿›è¡Œä¸åŒçš„å¤„ç†è¡Œä¸ºã€‚ä¸¾ä¾‹ï¼Œå½“è§‰å¾—æ•°æ®åŒ…éœ€è¦è¢«ä¸¢å¼ƒçš„æ—¶å€™ï¼Œå°±éœ€è¦åœ¨ eBPF ç¨‹åºä¸­è¿”å› TC_ACT_SHOT / TC_ACT_STOLENï¼Œå½“è§‰å¾—æ•°æ®åŒ…è¢«é‡å®šå‘å‡ºå»çš„æ—¶å€™ï¼Œå¯ä»¥è¿”å› TC_ACT_REDIRECTï¼›å½“è§‰å¾—æ•°æ®åŒ…éœ€è¦ç»§ç»­è¿›å…¥åˆ°å†…æ ¸çš„æ—¶å€™ï¼Œå¯ä»¥è¿”å› TC_ACT_OKã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.2144638403990025&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1DjrTiaica04lheX9aIvU5iabXFr4iaceFibuzfIgvXnTa9ql3f0lk6qCBGVy3gjypvcXw7UK6CyY2HLfnUHjkibt6lA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;802&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Socket Redirectï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™æ˜¯ä¸€ç§å¯ä»¥ç›´æ¥å°†ä¸€ä¸ª Socket çš„æ•°æ®åŒ… redirect åˆ°å¦ä¸€ä¸ª Socket çš„èƒ½åŠ›ï¼Œæ— éœ€ç»è¿‡å†…æ ¸çš„ç½‘ç»œåè®®æ ˆï¼Œå°±å¯ä»¥åŠ é€Ÿæœ¬åœ°çš„ç½‘ç»œé€šä¿¡èƒ½åŠ›ã€‚æ³¨æ„è¿™é‡Œæ˜¯åªåœ¨æœ¬åœ° Socket ä¹‹é—´æ•°æ®åŒ…çš„é€šä¿¡ï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§æœºåˆ¶ã€‚è¿™ä¸ªèƒ½åŠ›ä¹Ÿæ˜¯ Kernel æä¾›çš„ï¼Œå±äº eBPF èŒƒç•´èƒ½åŠ›çš„ä½“ç°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å…·ä½“çš„ä½¿ç”¨åœºæ™¯ä¸»è¦åŒ…å« Pod å†…å®¹å™¨ä¹‹é—´çš„é€šä¿¡ï¼Œä»¥åŠä¸»æœºä¸Šçš„ Socket ç½‘ç»œä¹‹é—´çš„é€šä¿¡ï¼Œä»¥åŠæ‰€æœ‰å¯ä»¥æœ¬åœ°é€šè¿‡ Socket äº’ç›¸é€šä¿¡çš„ç¨‹åºä¹‹é—´ã€‚ä¸å±€é™äºå®¹å™¨ï¼ŒäºŒè¿›åˆ¶è¿è¡Œçš„ä¸»æœºè¿›ç¨‹ä¹Ÿå¯ä»¥ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸‹å›¾æä¾›ä¸€ç§ä» Pod å†…ä¸¤ä¸ªå®¹å™¨çš„ Socket Redirect åŠ é€Ÿåœºæ™¯ä¸ºä¾‹ï¼Œä»‹ç»ä¸€ä¸‹ Socket Redirect çš„èƒ½åŠ›ã€‚å¯ä»¥çœ‹åˆ° Socket Redirect å¤§æ¦‚çš„ä½¿ç”¨æ–¹å¼ï¼Œå¸®åŠ©ç†è§£ï¼Œä½†æ˜¯ Socket Redirect ä¸ä»…ä»…å±€é™äºè¿™ä¸ªåœºæ™¯ï¼Œåªè¦æ˜¯æœ¬åœ°çš„ Socket éƒ½æ˜¯å¯ä»¥ä½¿ç”¨è¿™ç§ç‰¹æ€§ã€‚&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.4374429223744292&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1DjrTiaica04lheX9aIvU5iabXFr4iaceFibuysicwZuEHjiagtujq5Z9Bh3gGVEwqCicT82khZlqCAsBiaYicEZIwicjJNfg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1095&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;CTX Redirectï¼š&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;span/&gt;&lt;/span&gt;&lt;span&gt;è¿™æ˜¯ Cilium ç½‘ç»œåŒºåˆ«äºå…¶å®ƒç½‘ç»œæ–¹æ¡ˆçš„ç‰¹ç‚¹ä¹‹ä¸€ï¼Œé€šè¿‡ Kernel çš„Â redirect å®Œæˆç½‘ç»œè®¾å¤‡åˆ°ç½‘ç»œè®¾å¤‡çš„æ•°æ®åŒ…çš„ä¼ è¾“èƒ½åŠ›ã€‚ctx_redirect(const struct __sk_buff *ctx __maybe_unused, int ifindex, __u32 flags)ï¼Œä»æ–¹æ³•çš„å®šä¹‰ä¸­å°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œå°†æ•°æ®åŒ…è½¬å‘åˆ° ifindex è¿™ä¸ªç½‘ç»œè®¾å¤‡å»ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;åœ¨ Cilium ä¸­ï¼Œæ ¸å¿ƒæ€æƒ³å°±æ˜¯ bypass netfilter/iptablesï¼Œç›´æ¥é€šè¿‡ redirect å°†æ•°æ®åŒ…è½¬æ¥è½¬å»ï¼Œç¼©çŸ­æ•°æ®åŒ…çš„ä¼ è¾“è·¯å¾„ï¼Œæå‡ç½‘ç»œæ€§èƒ½ã€‚ä¼ ç»Ÿçš„ç©æ³•æ˜¯æ‰€æœ‰ç½‘ç»œè®¾å¤‡çš„æ•°æ®åŒ…ï¼Œéƒ½è¦ç»è¿‡å†…æ ¸ç½‘ç»œåè®®æ ˆè¿›è¡Œä¼ é€’ï¼Œæ•°æ®è·¯å¾„æ¯”è¾ƒé•¿ï¼Œå¯¹ netfilter/iptables çš„ä½“ç³»ä¾èµ–æ€§æ¯”è¾ƒå¼ºã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å¦‚ä¸‹å›¾ï¼Œè¿™é‡Œçš„æ•°æ®åŒ…çš„ redirect çš„æ–¹å‘æ˜¯å“ªä¸€ä¸ªï¼Œå–å†³äºä½¿ç”¨çš„å†…æ ¸çš„ç‰ˆæœ¬ï¼Œå¤§è‡´å¯ä»¥å¸®åŠ©ç†è§£Â CTX RedirectÂ çš„ä½œç”¨ã€‚ä¸‹å›¾ä»…ä»…æ˜¯ä¸ºäº†è¯´æ˜ redirect æ˜¯ä»€ä¹ˆæ„æ€ï¼Œä¸åŒ…å«æ‰€æœ‰çš„æ•°æ®è·¯å¾„ï¼Œå› ä¸ºæœ‰ä¸€äº›æ•°æ®æµæ˜¯ä¸€å®šè¦ç»è¿‡å†…æ ¸çš„å¤„ç†ï¼Œä¸åœ¨æ­¤å›¾ä¸­å…·ä½“åˆ†æã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;è¿™é‡Œåœ¨å†…æ ¸ç‰ˆæœ¬è¾ƒé«˜çš„æƒ…å†µä¸‹ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ CTX Redirect çš„å‡çº§èƒ½åŠ›ï¼Œä¹Ÿå°±æ˜¯ CTX Redirect Peer å’ŒÂ CTX Redirect Neighï¼Œç½‘ç»œæ€§èƒ½ä¼šæ›´å¥½ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.6178414096916299&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1DjrTiaica04lheX9aIvU5iabXFr4iaceFibutwVXGUicsjVqBjicaAxdnRkia24qmKMIKolQN1ZgcXicibOOCxDN9wkLAhw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;908&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;NodePortÂ Accelerationï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åŸºäº XDP çš„æŠ€æœ¯ï¼Œåœ¨å—åŒ—å‘ NodePort è®¿é—® K8sÂ æœåŠ¡çš„æ—¶å€™ï¼Œè¿›è¡Œç½‘ç»œåŠ é€Ÿçš„èƒ½åŠ›ã€‚åŒ…æ‹¬ç›´æ¥ redirect åˆ°æœ¬åœ° Podï¼›åŒ…æ‹¬ redirect åˆ°å½“å‰ç‰©ç†ç½‘å¡æˆ–å…¶å®ƒç‰©ç†ç½‘å¡çš„æ–¹å¼ï¼Œforward æ•°æ®åŒ…å»çœŸæ­£è¿è¡Œ Pod çš„æœºå™¨ï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨åˆ° XDP_REDIRECT æˆ–è€… XDP_TXï¼Œå…·ä½“å–å†³äºå½“å‰ä½¿ç”¨çš„ Cilium ç‰ˆæœ¬æ˜¯ä¸æ˜¯ä½¿ç”¨äº†æ”¯æŒ XDP å¤šç½‘å¡çš„ Featureã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸ç®¡æ˜¯æœ¬åœ°çš„ Podï¼Œè¿˜æ˜¯å…¶å®ƒæœºå™¨çš„ Podï¼Œéƒ½æ˜¯ä½¿ç”¨çš„ eBPF çš„ç½‘ç»œæŠ€æœ¯å®Œæˆæ•°æ®åŒ…çš„å¤„ç†èƒ½åŠ›ï¼Œç¼©çŸ­äº†æ•°æ®åŒ…åœ¨æ•´ä¸ªç½‘ç»œä¸Šçš„ä¼ è¾“è·¯å¾„ã€‚å¦‚ä¸Šå›¾ï¼Œç‰©ç†ç½‘å¡ä¸Šçš„æ•°æ®åŒ…çš„è·¯å¾„éƒ¨åˆ†çš„ç®­å¤´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2&gt;&lt;span&gt;&lt;strong&gt;03&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;h2&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;åŸç†æ¦‚è¿°&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;è¿™é‡Œçš„åŸç†æ¦‚è¿°ä¸»è¦æ˜¯ï¼Œä» Cilium ä¸­ä½¿ç”¨åˆ°çš„ç½‘ç»œè®¾å¤‡ï¼Œä»¥åŠç½‘ç»œè®¾å¤‡ä¸Šè¢«æŒ‚è½½çš„ eBPF ç¨‹åºï¼Œæ¥ç†è§£ Cilium åœ¨æ•°æ®è·¯å¾„ä¸­ï¼Œå®ç°äº†å“ªäº›æœ‰ç‰¹è‰²çš„ç½‘ç»œèƒ½åŠ›ï¼Œä»¥åŠä»ä¸­å¯ä»¥çœ‹å‡ºæ¥å®ç°çš„å¤§æ¦‚åŸç†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5185512367491166&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1DjrTiaica04lheX9aIvU5iabXFr4iaceFibu3E32HkR4AvUGYOnYvunNswccX47Liaz5pQlV2QTb3iaLKJU14j2zPc7g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1132&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;cilium_host/cilium_netï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Cilium Agent åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šåˆå§‹åŒ–è¿™ä¸€å¯¹è™šæ‹Ÿç½‘ç»œè®¾å¤‡ã€‚è¿™æ˜¯ä¸€å¯¹ veth pair çš„è™šæ‹Ÿçš„ç½‘ç»œè®¾å¤‡ã€‚å…¶ä¸­ cilium_net æ˜¯Â cilium_host çš„Â parentï¼Œè€Œä¸”æ²¡æœ‰ ip åœ°å€ï¼Œå®ƒæ˜¯ä¸€ç§ netdeviceï¼Œå¯ä»¥çœ‹æˆå’Œç‰©ç†ç½‘å¡ç±»ä¼¼çš„è®¾å¤‡ã€‚cilium_host æœ‰è®¾ç½® ip åœ°å€ï¼Œè¿™ä¸ª ip åœ°å€ä¼šä½œä¸º Pod çš„ç½‘å…³ï¼Œå¯ä»¥æŸ¥çœ‹ Pod çš„è·¯ç”±ä¿¡æ¯ï¼Œçœ‹åˆ°å¯¹åº”çš„ç½‘å…³åœ°å€å°±æ˜¯ cilium_host çš„Â ip åœ°å€ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é‚£æ˜¯ä¸æ˜¯ä¼šç†è§£æˆå®¹å™¨ Pod é‡Œçš„æ•°æ®åŒ…è¦æƒ³å‡ºå»ï¼Œå°±å…ˆå°†æ•°æ®åŒ…å‘å¾€ cilium_hostï¼Ÿå…¶å®ä¸æ˜¯ï¼Œé€šè¿‡ arp çš„å‘½ä»¤æŸ¥çœ‹å¯¹åº”çš„ mac åœ°å€ï¼Œå¯ä»¥çœ‹åˆ°å¯¹åº”çš„ mac åœ°å€ï¼Œå…¶å®æ˜¯ lxc-xxx çš„åœ°å€ï¼Œlxc-xxx æ˜¯ä»€ä¹ˆï¼Œä¼šåœ¨ä¸‹é¢æåˆ°ã€‚æ‰€ä»¥ Pod å‡ºæ¥çš„æ•°æ®åŒ…çš„ç¬¬ä¸€è·³ï¼ŒçœŸæ­£è¦ç»è¿‡çš„è·¯å¾„æ˜¯ lxc-xxxã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é‚£æ•°æ®åŒ…åˆ°è¾¾ lxc-xxx ä¹‹åä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿè¿™ä¸ªå°±è¦æåˆ°æŒ‚è½½åœ¨ lxc-xxx çš„Â tc ingress çš„Â from-containerï¼Œè¿™ä¸ª Section å¯¹åº”çš„ eBPF ç¨‹åºã€‚é‚£ cilium_net æ˜¯è´Ÿè´£å¤„ç†ä»€ä¹ˆï¼Ÿcilium_net çš„ç½‘ç»œè®¾å¤‡ä¸Šä¹Ÿä¼šæŒ‚è½½ eBPF ç¨‹åºï¼Œè¿™ä¸ªç¨‹åºæ˜¯ bpf_host_cilium_net.o æ–‡ä»¶ä¸­çš„ to-host Sectionï¼ŒæŒ‚è½½çš„æ–¹å‘æ˜¯ tc ingressã€‚ä¸»è¦å®Œæˆ ctx çš„Â encrypt ç›¸å…³çš„ mark æ“ä½œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨ Kernel å’ŒÂ Cilium ç‰ˆæœ¬æ¯”è¾ƒä½çš„æ—¶å€™ï¼Œæ•°æ®åŒ…è¦è¿›å…¥ Podï¼Œéƒ½éœ€è¦ç»è¿‡ cilium_host è®¾å¤‡ï¼Œä½†æ˜¯åœ¨é«˜å†…æ ¸ç‰ˆæœ¬å’Œæ¯”è¾ƒæ–°çš„ç‰ˆæœ¬ Cilium ç‰ˆæœ¬ä¸­ï¼Œcilium_host å°±æ˜¾å¾—ä¸é‚£ä¹ˆé‡è¦äº†ï¼Œä¸»è¦ç”¨æ¥å¤„ç†æœ¬åœ°æµé‡è®¿é—® Pod çš„æƒ…å†µã€‚cilium_host æŒ‚è½½çš„ eBPF ç¨‹åºé€šè¿‡ tc çš„æ–¹å¼å®Œæˆï¼ŒåŒ…æ‹¬ from-host å’ŒÂ to-hostã€‚cilium_net æŒ‚è½½çš„ eBPF ç¨‹åºé€šè¿‡ tc çš„æ–¹å¼å®Œæˆï¼ŒåŒ…æ‹¬ to-hostã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;cilium_vxlanï¼š&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;span/&gt;&lt;/span&gt;&lt;span&gt;Cilium Agent åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œä¼šåˆå§‹åŒ–è¿™ä¸ªè™šæ‹Ÿçš„ç½‘ç»œè®¾å¤‡ã€‚ä¸»è¦çš„ä½œç”¨å°±æ˜¯å®Œæˆåœ¨ overlay ç½‘ç»œæ¨¡å¼ä¸‹ï¼ŒåŸºäº vxlan/vtep å®Œæˆè·¨ä¸»æœºçš„ç½‘ç»œæ•°æ®é€šä¿¡ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;Cilium ä½¿ç”¨ UDP 8472 ç«¯å£ä½œä¸º vtep ç«¯ç‚¹çš„æœåŠ¡ã€‚vxlan çš„æ•°æ®åŒ…è·¯ç”±ï¼Œä¹Ÿæ˜¯é€šè¿‡ Kernel çš„è·¯ç”±å­ç³»ç»Ÿå®Œæˆè·¯ç”±å‘ç°ï¼Œæœ€åé€šè¿‡ç‰©ç†ç½‘å¡ï¼Œå®Œæˆè·¨ä¸»æœºçš„ overlay ç½‘ç»œã€‚cilium_vxlan æŒ‚è½½çš„ eBPF ç¨‹åºé€šè¿‡ tc çš„æ–¹å¼å®Œæˆï¼ŒåŒ…æ‹¬ from-overlay å’ŒÂ to-overlayï¼Œå…·ä½“ from-overlay å’ŒÂ to-overlay åœ¨ä¸‹é¢ä¼šæœ‰ç›¸å…³è¯´æ˜ã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;lxc-xxx/eth0ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯ä¸€ä¸ª Pod éƒ½ä¼šæœ‰çš„ä¸€å¯¹ veth pairã€‚è¿™ä¹Ÿæ˜¯å®¹å™¨ç½‘ç»œä¸­æœ€å¸¸è§ Linux æä¾›çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ã€‚ä¸€ç«¯åœ¨ä¸»æœºçš„ç½‘ç»œç©ºé—´ï¼Œä¸€ç«¯åœ¨å®¹å™¨çš„ç½‘ç»œç©ºé—´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å…¶ä¸­ eth0 æ˜¯å®¹å™¨ç«¯çš„ï¼Œlxc-xxx æ˜¯ä¸»æœºç«¯çš„ã€‚eth0 æœ‰è‡ªå·±çš„ ip åœ°å€ï¼Œlxc-xxx æ˜¯æ²¡æœ‰ ip åœ°å€çš„ã€‚å¯¹äºå®¹å™¨çš„å‡ºå£æµé‡ï¼Œä½¿ç”¨äº† tc ingress çš„æ–¹å¼ï¼Œåœ¨ lxc-xxx ä¸»æœºç«¯çš„è®¾å¤‡ä¸ŠæŒ‚è½½äº† eBPF ç¨‹åºï¼Œç¨‹åºçš„ Section æ˜¯Â from-containerï¼Œå…·ä½“ from-container æ˜¯è´Ÿè´£ä»€ä¹ˆï¼Œä¼šåœ¨ä¸‹é¢æœ‰ç›¸å…³è¯´æ˜ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯ä¸€ä¸ª Pod çš„å¯¹åº”çš„ eBPF ç¨‹åºæ˜¯åœ¨åˆ›å»º Pod çš„æ—¶å€™ï¼Œç”± CNI è°ƒç”¨ Cilium Agent çš„Â create endpoint çš„æ¥å£ï¼Œç”±è¿™ä¸ªæ¥å£å®Œæˆ Pod ç›¸å…³ eBPF ç¨‹åºçš„ç¼–è¯‘å’ŒæŒ‚è½½ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç°åœ¨æœ‰äº† from-container æ¥å¤„ç† Pod çš„å‡ºå£æµé‡ï¼Œé‚£æ˜¯ä¸æ˜¯åº”è¯¥ä¹Ÿæœ‰ä¸€ä¸ª to-container æ¥è´Ÿè´£å¤„ç† Pod çš„å…¥å£æµé‡ï¼ŒåŒæ—¶ä¹ŸæŒ‚è½½åœ¨ lxc-xxx çš„Â tc ä¸Šï¼Ÿ&lt;/span&gt;&lt;span&gt;çš„ç¡®æ˜¯&lt;/span&gt;&lt;span&gt;æœ‰&lt;/span&gt;&lt;span&gt; t&lt;/span&gt;&lt;span&gt;o-container&lt;/span&gt;&lt;span&gt;ï¼Œä½†æ˜¯å´ä¸æ˜¯æŒ‚è½½&lt;/span&gt;&lt;span&gt;åœ¨&lt;/span&gt;&lt;span&gt; l&lt;/span&gt;&lt;span&gt;xc-xx&lt;/span&gt;&lt;span&gt;x &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;Â t&lt;/span&gt;&lt;span&gt;c &lt;/span&gt;&lt;span&gt;ä¸Š&lt;/span&gt;&lt;span&gt;çš„ï¼Œè€Œæ˜¯ä¿å­˜&lt;/span&gt;&lt;span&gt;åœ¨&lt;/span&gt;&lt;span&gt; e&lt;/span&gt;&lt;span&gt;BP&lt;/span&gt;&lt;span&gt;F &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;ä¸€&lt;/span&gt;&lt;span&gt;ç§&lt;/span&gt;&lt;span&gt; M&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;ä¸­&lt;/span&gt;&lt;span&gt;ï¼Œè¿™&lt;/span&gt;&lt;span&gt;ç§&lt;/span&gt;&lt;span&gt; M&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;span&gt;ä¸“é—¨ç”¨æ¥ä¿&lt;/span&gt;&lt;span&gt;å­˜&lt;/span&gt;&lt;span&gt; e&lt;/span&gt;&lt;span&gt;BP&lt;/span&gt;&lt;span&gt;F &lt;/span&gt;&lt;span&gt;ç¨‹&lt;/span&gt;&lt;span&gt;åºçš„&lt;/span&gt;&lt;span&gt;Â (&lt;/span&gt;&lt;span&gt;BPF_MAP_TYPE_PROG_ARRAY&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;ï¼Œè§å›¾ä¸­&lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt; P&lt;/span&gt;&lt;span&gt;OLICY_CALL_MA&lt;/span&gt;&lt;span&gt;P &lt;/span&gt;&lt;span&gt;è¿™&lt;/span&gt;&lt;span&gt;ä¸ª&lt;/span&gt;&lt;span&gt; m&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;ä¸­&lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt; i&lt;/span&gt;&lt;span&gt;tem&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;tc ingress/egressï¼š&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;span/&gt;&lt;/span&gt;&lt;span&gt;tc æ˜¯Â Linux ä¸­çš„èƒ½åŠ›ï¼Œä¹Ÿæ˜¯æœ‰ Hook çš„ï¼ŒåŒæ—¶æ”¯æŒç»™ tc æŒ‚è½½ eBPF ç¨‹åºï¼Œæ¥å¤„ç†ç½‘ç»œæ•°æ®åŒ…ã€‚tc å¯¹æ•°æ®åŒ…çš„å¤„ç†ï¼Œæ”¯æŒ ingress å’ŒÂ egressã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ingress å¯ä»¥ç†è§£æˆæ•°æ®åŒ…è¿›å…¥æ—¶å€™çš„ Hookï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯ egress çš„Â Hookã€‚ä¸¤ä¸ª Hook å¤„ç†æ•°æ®åŒ…çš„æ—¶æœºä¸ä¸€æ ·ï¼Œç”¨æ¥å¤„ç†çš„èƒ½åŠ›ä¹Ÿå°±ä¸ä¸€æ ·ã€‚tc åœ¨Â Cilium ä¸­ä½¿ç”¨çš„æ˜¯æœ€å¤šçš„ï¼Œæ‰€æœ‰çš„ç½‘ç»œè®¾å¤‡éƒ½å¯ä»¥ä½¿ç”¨ tcï¼Œä¸ç®¡æ˜¯ç‰©ç†çš„ï¼Œè¿˜æ˜¯è™šæ‹Ÿçš„éƒ½ä¸€æ ·ã€‚è¿™ä¹Ÿæ˜¯ tc ä¸ºä»€ä¹ˆåœ¨ Cilium ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚åœ¨ Cilium è¿˜æ²¡æœ‰æ”¯æŒ XDP çš„å—åŒ—å‘çš„ LB çš„æ—¶å€™ï¼Œå°±æ˜¯ç”± tc æ¥å®Œæˆ LB èƒ½åŠ›çš„ã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;XDP ingressï¼š&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;span/&gt;&lt;/span&gt;&lt;span&gt;XDP ä¹Ÿæ˜¯ eBPF çš„Â Hook ç‚¹ï¼Œæ˜¯æ•°æ®è·¯å¾„æœ€é å‰çš„ Hook ç‚¹ï¼Œä¸€èˆ¬å¯ä»¥ç”¨äºå¯¹æ•°æ®çš„å¿«é€Ÿè¿‡æ»¤ï¼Œä»¥åŠå¯ä»¥åŸºäº XDP å®ç° LB çš„èƒ½åŠ›ã€‚é™¤äº†å·²ç»åœ¨æ•°æ®è·¯å¾„æ¯”è¾ƒé å‰ï¼ŒXDP çš„æ”¯æŒæ–¹å¼è¿˜æœ‰ 3 ç§ç±»å‹ï¼Œä¸€ç§æ˜¯ç”±ç¡¬ä»¶æ¥æ”¯æŒï¼Œå®ç° XDP çš„Â Offload æ•ˆæœï¼›ä¸€ç§æ˜¯åŸºäºç¡¬ä»¶ç½‘å¡é©±åŠ¨ï¼Œåœ¨é©±åŠ¨å±‚å®ç°ï¼›ä¸€ç§æ˜¯ Linux å†…ç½®å®ç°çš„ï¼Œä¹Ÿæ˜¯æ€§èƒ½æœ€å·®çš„ä¸€ç§ï¼Œä¸æ¨èç”Ÿäº§ä¸Šä½¿ç”¨è¿™ç§æ–¹å¼ã€‚è¶Šæ—©å¤„ç†æ€§èƒ½è¶Šå¥½ï¼Œæ‰€ä»¥ Offload æœºåˆ¶çš„ XDP æ•ˆæœæœ€å¥½ï¼Œå…¶æ¬¡æ˜¯ç½‘å¡é©±åŠ¨çš„æ–¹å¼ï¼Œæœ€åæ˜¯ Linux å†…ç½®çš„å®ç°ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;eBPF Sectionï¼š&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span/&gt;&lt;/span&gt;&lt;span&gt;Section æ˜¯Â eBPF ç¨‹åºçš„æ‰§è¡Œå…¥å£ï¼Œç±»ä¼¼ main å‡½æ•°ï¼Œä½†æ˜¯æ¯ä¸€ä¸ª object æ–‡ä»¶ä¸­æ˜¯å¯ä»¥åŒ…å«å¤šä¸ª Section çš„ã€‚åœ¨ Cilium ä¸­ä¸»è¦åŒ…å« XDP from-netdevï¼ŒtcÂ from-netdevï¼Œto-netdevï¼Œfrom-networkï¼Œfrom-overlayï¼Œto-overlayï¼Œfrom-hostï¼Œto-hostï¼Œfrom-containerï¼Œto-containerï¼Œcgroup/connectï¼Œcgroup/bindï¼Œcgroup/post_bindï¼Œcgroup/sendmsgï¼Œcgroup/recvmsgï¼Œcgroup/getpeernameï¼Œsk_msgï¼Œsockopsã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;eBPF Mapsï¼š&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;span/&gt;&lt;/span&gt;&lt;span&gt;Cilium ä¸­ä½¿ç”¨äº†å¾ˆå¤š eBPF ä¸­çš„ Mapsã€‚ä»æ–‡ç« å¼€å§‹çš„æŠ€æœ¯æœ¯è¯­ä¸­ï¼Œäº†è§£äº†ç›¸å…³æ¦‚å¿µä¹‹åï¼Œå¯ä»¥ä» map çš„Â name ä¸Šçœ‹å¾—å‡ºï¼Œè¿™ä¸ª map ä¸»è¦è´Ÿè´£çš„æ˜¯å“ªä¸€éƒ¨åˆ†çš„èƒ½åŠ›ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å…·ä½“ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹è¿™äº›ï¼šcilium_call_policyï¼Œcilium_ct4_globalï¼Œcilium_ct_any4_globalï¼Œcilium_eventsï¼Œcilium_ipcacheï¼Œcilium_ipv4_frag_datagramsï¼Œcilium_lb4_affinityï¼Œcilium_lb4_backendsï¼Œcilium_lb4_reverse_natï¼Œcilium_lb4_reverse_skï¼Œcilium_lb4_service_v2ï¼Œcilium_lb_affinity_matchï¼Œcilium_lxcï¼Œcilium_metricsï¼Œcilium_nodeport_neigh4ï¼Œcilium_singalsï¼Œcilium_snat_v4_externalï¼Œcilium_tunnel_mapï¼Œcilium_lb4_maglevï¼Œcilium_lb4_source_rangeï¼Œcilium_ipmasq_v4ï¼Œcilium_encrypt_stateï¼Œcilium_egress_gw_policy_v4ï¼Œcilium_ep_to_policyã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;è¿˜æœ‰ä¸€å°éƒ¨åˆ†æ˜¯æ ¹æ®è¿è¡Œæ—¶ç”Ÿæˆå‡ºæ¥çš„ï¼Œå¦‚ï¼šcilium_policy_[epid]ï¼Œcilium_calls_hostns_[epid]ï¼Œcilium_calls_netdev_[ifindex]ï¼Œcilium_calls_[epid]ï¼Œcilium_policy_[epid]ã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;XDP from-netdevï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™æ˜¯ä¸€ä¸ª eBPF Sectionï¼ŒæŒ‚è½½åœ¨ç‰©ç†ç½‘å¡çš„ tcÂ ingress ä¸Šçš„ eBPF ç¨‹åºã€‚ä¸»è¦çš„ä½œç”¨æ˜¯ï¼Œå®Œæˆä¸»æœºæ•°æ®åŒ…åˆ°è¾¾ä¸»æœºï¼Œå¯¹æ•°æ®åŒ…è¿›è¡Œå¤„ç†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åªæœ‰å½“å¼€å¯äº† ENABLE_NODEPORT_ACCELERATION èƒ½åŠ›ï¼Œæ‰ä¼šåœ¨ XDP é˜¶æ®µç›´æ¥æ¥æ‰‹å¤„ç† NodePort çš„è®¿é—®ã€‚å¦‚æœæ˜¯æ²¡æœ‰å¼€å¯çš„ï¼Œæ•°æ®åŒ…ä¼šç›´æ¥è¿›å…¥å†…æ ¸ï¼Œç”± tc çš„Â from-netdev æ¥å®Œæˆ NodePort çš„å¤„ç†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å½“å¼€å¯äº†ä¹‹åï¼Œä¸»è¦è¿˜æ˜¯å’Œ tc çš„Â from-netdev ç±»ä¼¼ï¼Œè°ƒç”¨ nodeport_lb4 å®Œæˆ nodeport ç±»å‹çš„ LB æ“ä½œã€‚å¯ä»¥å¤„ç†å¤–éƒ¨é€šè¿‡ K8sÂ NodePort çš„æœåŠ¡è®¿é—®æ–¹å¼ï¼Œè®¿é—®æœåŠ¡ï¼ŒåŒ…æ‹¬ dnatã€lbã€ct ç­‰æ“ä½œï¼Œå°†å¤–éƒ¨çš„è®¿é—®æµé‡æ‰“åˆ°æœ¬åœ°çš„ Podï¼Œæˆ–è€…é€šè¿‡ XDP çš„Â redirect çš„æ–¹å¼ï¼Œå°†æ•°æ®æµé‡è½¬å‘åˆ°ç›¸åŒç½‘å¡æˆ–è€…ä¸åŒç½‘å¡ï¼Œç„¶åæœ€ç»ˆå°†æ•°æ®æµé‡è½¬å‘åˆ°æä¾›æœåŠ¡çš„ Pod æ‰€åœ¨çš„ä¸»æœºã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é™¤äº†ä¸Šè¿°èƒ½åŠ›ï¼Œå¯¹äº XDP çš„Â from-netdevï¼Œå¦‚æœå¼€å¯äº† ENABLE_PREFILTERï¼Œè¿˜ä¼šè´Ÿè´£ Pre-Filterï¼Œå¯ä»¥ç†è§£æˆç±»ä¼¼ ddos çš„åœºæ™¯ï¼Œå½“ä¸è¢«å…è®¸çš„è®¿é—®æµé‡åˆ°è¾¾ä¹‹åï¼Œå¯ä»¥è¿›è¡Œä¸€ä¸ªå¿«é€Ÿçš„éªŒè¯ï¼Œå¦‚æœä¸è¢«å…è®¸çš„ï¼Œä¼šå¿«é€Ÿçš„è¢« Drop æ‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;tc from-netdevï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™æ˜¯ä¸€ä¸ª eBPF Sectionï¼ŒæŒ‚è½½åœ¨ç‰©ç†ç½‘å¡çš„ tc ingress ä¸Šçš„ eBPF ç¨‹åºã€‚ä¸»è¦çš„ä½œç”¨æ˜¯ï¼Œå®Œæˆä¸»æœºæ•°æ®åŒ…åˆ°è¾¾ä¸»æœºï¼Œå¯¹æ•°æ®åŒ…è¿›è¡Œå¤„ç†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™é‡Œä¸»è¦æœ‰ä¸¤ä¸ªåœºæ™¯ä¼šæ¶‰åŠåˆ° from-netdevï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯å¼€å¯äº†ä¸»æœºçš„é˜²ç«å¢™ï¼Œè¿™é‡Œçš„é˜²ç«å¢™ä¸æ˜¯ iptables å®ç°çš„ï¼Œè€Œæ˜¯åŸºäº eBPF å®ç°çš„ Host Network Policyï¼Œç”¨äºå¤„ç†ä»€ä¹ˆæ ·çš„æ•°æ®åŒ…æ˜¯å¯ä»¥è®¿é—®ä¸»æœºçš„ï¼›ç¬¬äºŒä¸ªå°±æ˜¯å¼€å¯äº† NodePortï¼Œå¯ä»¥å¤„ç†å¤–éƒ¨é€šè¿‡ K8S NodePort çš„æœåŠ¡è®¿é—®æ–¹å¼ï¼Œè®¿é—®æœåŠ¡ï¼ŒåŒ…æ‹¬ dnatã€lbã€ct ç­‰æ“ä½œï¼Œå°†å¤–éƒ¨çš„è®¿é—®æµé‡æ‰“åˆ°æœ¬åœ°çš„ Podï¼Œæˆ–è€…é€šè¿‡ tc çš„Â redirect çš„æ–¹å¼ï¼Œå°†æ•°æ®æµé‡è½¬å‘åˆ° to-netdev è¿›è¡Œ snat ä¹‹åï¼Œå†è½¬å‘åˆ°æä¾›æœåŠ¡çš„ Pod æ‰€åœ¨çš„ä¸»æœºã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;to-netdevï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™æ˜¯ä¸€ä¸ª eBPF Sectionï¼ŒæŒ‚è½½åœ¨ç‰©ç†ç½‘å¡çš„ tc egress ä¸Šçš„ eBPF ç¨‹åºã€‚ä¸»è¦çš„ä½œç”¨æ˜¯ï¼Œå®Œæˆä¸»æœºæ•°æ®åŒ…å‡ºä¸»æœºï¼Œå¯¹æ•°æ®åŒ…è¿›è¡Œå¤„ç†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™é‡Œä¸»è¦æœ‰ä¸¤ä¸ªåœºæ™¯ä¼šæ¶‰åŠåˆ° to-netdevï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯å¼€å¯äº†ä¸»æœºçš„é˜²ç«å¢™ï¼Œè¿™é‡Œçš„é˜²ç«å¢™ä¸æ˜¯ iptables å®ç°çš„ï¼Œè€Œæ˜¯åŸºäº eBPF å®ç°çš„ Host Network Policyï¼Œç”¨äºå¤„ç†ä»€ä¹ˆæ ·çš„æ•°æ®åŒ…æ˜¯å¯ä»¥å‡ºä¸»æœºçš„ï¼Œé€šè¿‡ handle_to_netdev_ipv4 æ–¹æ³•å®Œæˆï¼›ç¬¬äºŒä¸ªå°±æ˜¯å¼€å¯äº† NodePort ä¹‹åï¼Œåœ¨éœ€è¦è®¿é—®çš„ Backend Pod ä¸åœ¨ä¸»æœºçš„æ—¶å€™ï¼Œä¼šåœ¨è¿™é‡Œå®Œæˆ snat æ“ä½œï¼Œé€šè¿‡ handle_nat_fwd æ–¹æ³•å’Œ nodeport_nat_ipv4_fwd æ–¹æ³•å®Œæˆ snatã€‚&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;from-hostï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™æ˜¯ä¸€ä¸ª eBPF Sectionã€‚æŒ‚è½½åœ¨ cilium_host çš„Â tc egress ä¸ŠÂ eBPF ç¨‹åºã€‚ä¸»è¦å®Œæˆæ•°æ®æµé‡å¯¼å…¥åˆ° Cilium-managed çš„ network ä¸­å»ã€‚ä¸¾ä¾‹ï¼Œå¦‚æœ¬åœ°è¿›ç¨‹è®¿é—®æœ¬åœ°ä¸»æœºçš„ Podã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å…·ä½“å®Œæˆçš„äº‹æƒ…å¤§è‡´åŒ…å«ï¼š&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;1. é€šè¿‡ tail call æœºåˆ¶å®Œæˆè¦è¿›å…¥åˆ° Pod çš„æ•°æ®åŒ…ã€‚&lt;/span&gt;&lt;span&gt;å‚è§ï¼š&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ep_tail_call&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;ctx, CILIUM_CALL_IPV4_FROM_HOST&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;ï¼›&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span/&gt;&lt;span&gt;2. &lt;/span&gt;&lt;span&gt;é€š&lt;/span&gt;&lt;span&gt;è¿‡&lt;/span&gt;&lt;span&gt; i&lt;/span&gt;&lt;span&gt;pv4_host_policy_egress&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;ctx, secctx, ipcache_srcid, &amp;amp;monitor&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;å®Œ&lt;/span&gt;&lt;span&gt;æˆ&lt;/span&gt;&lt;span&gt; h&lt;/span&gt;&lt;span&gt;ost polic&lt;/span&gt;&lt;span&gt;y &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;éªŒè¯ï¼Œä¹Ÿå°±&lt;/span&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;span&gt; e&lt;/span&gt;&lt;span&gt;BP&lt;/span&gt;&lt;span&gt;F &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;ä¸»æœºé˜²ç«å¢™ï¼Œè¿™ä¸ªæ˜¯åœ¨&lt;/span&gt;&lt;span&gt; cilium_hos&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;Â e&lt;/span&gt;&lt;span&gt;gress pat&lt;/span&gt;&lt;span&gt;h &lt;/span&gt;&lt;span&gt;ä¸Š&lt;/span&gt;&lt;span&gt;ï¼Œä¹Ÿå°±æ˜¯å³å°†è¦è¿›å…¥&lt;/span&gt;&lt;span&gt;åˆ°&lt;/span&gt;&lt;span&gt; P&lt;/span&gt;&lt;span&gt;o&lt;/span&gt;&lt;span&gt;d &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;ä¸€ä¾§ï¼›&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;span&gt;3. &lt;/span&gt;&lt;span&gt;é€š&lt;/span&gt;&lt;span&gt;è¿‡&lt;/span&gt;&lt;span&gt; r&lt;/span&gt;&lt;span&gt;ewrite_dmac_to_host&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;ctx, secctx&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;å®Œ&lt;/span&gt;&lt;span&gt;æˆ&lt;/span&gt;&lt;span&gt; d&lt;/span&gt;&lt;span&gt;st &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt; m&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;c &lt;/span&gt;&lt;span&gt;åœ°&lt;/span&gt;&lt;span&gt;å€çš„è®¾ç½®ï¼Œå°†&lt;/span&gt;&lt;span&gt;å…¶&lt;/span&gt;&lt;span&gt; d&lt;/span&gt;&lt;span&gt;s&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;Â m&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;c &lt;/span&gt;&lt;span&gt;è®¾&lt;/span&gt;&lt;span&gt;ç½®&lt;/span&gt;&lt;span&gt;æˆ&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;c&lt;/span&gt;&lt;span&gt;ilium-hos&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;ä¸»æœºç«¯&lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt; c&lt;/span&gt;&lt;span&gt;ilium_ne&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;Â m&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;c &lt;/span&gt;&lt;span&gt;åœ°&lt;/span&gt;&lt;span&gt;å€ï¼Œä¹Ÿå°±æ˜¯ä¸‹ä¸€è·³ï¼Œ&lt;/span&gt;&lt;span&gt;å½“ç»&lt;/span&gt;&lt;span&gt;è¿‡&lt;/span&gt;&lt;span&gt; c&lt;/span&gt;&lt;span&gt;ilium-hos&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;Â p&lt;/span&gt;&lt;span&gt;acket&lt;/span&gt;&lt;span&gt;ï¼Œéœ€ç»è¿‡ä¸‹é¢æ­¥éª¤æŸ¥è¯¢åˆ°&lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt; e&lt;/span&gt;&lt;span&gt;ndpoin&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;span&gt;Â local hos&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;Â e&lt;/span&gt;&lt;span&gt;ndpoint&lt;/span&gt;&lt;span&gt;ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦å›&lt;/span&gt;&lt;span&gt;åˆ°&lt;/span&gt;&lt;span&gt; h&lt;/span&gt;&lt;span&gt;ost&lt;/span&gt;&lt;span&gt;ï¼Œé‚£å›&lt;/span&gt;&lt;span&gt;åˆ°&lt;/span&gt;&lt;span&gt; h&lt;/span&gt;&lt;span&gt;os&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;æ—¶å€™ï¼Œå°±éœ€è¦è®¾&lt;/span&gt;&lt;span&gt;ç½®&lt;/span&gt;&lt;span&gt; p&lt;/span&gt;&lt;span&gt;acke&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;ç›®&lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt; m&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;c &lt;/span&gt;&lt;span&gt;åœ°&lt;/span&gt;&lt;span&gt;å€&lt;/span&gt;&lt;span&gt;ä¸º&lt;/span&gt;&lt;span&gt; c&lt;/span&gt;&lt;span&gt;ilium_ne&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;Â m&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;c &lt;/span&gt;&lt;span&gt;åœ°&lt;/span&gt;&lt;span&gt;å€ï¼Œè¿™&lt;/span&gt;&lt;span&gt;æ ·&lt;/span&gt;&lt;span&gt; p&lt;/span&gt;&lt;span&gt;acke&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;å°±&lt;/span&gt;&lt;span&gt;ä¼šè¢«å‘é€&lt;/span&gt;&lt;span&gt;åˆ°&lt;/span&gt;&lt;span&gt; K&lt;/span&gt;&lt;span&gt;ernel Stac&lt;/span&gt;&lt;span&gt;k &lt;/span&gt;&lt;span&gt;å»&lt;/span&gt;&lt;span&gt;ï¼Œå›åˆ°ä¸»æœºä¸Š&lt;/span&gt;&lt;span&gt;ï¼›&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;span&gt;4. &lt;/span&gt;&lt;span&gt;é€š&lt;/span&gt;&lt;span&gt;è¿‡&lt;/span&gt;&lt;span&gt; l&lt;/span&gt;&lt;span&gt;ookup_ip4_endpoin&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;æ‰¾&lt;/span&gt;&lt;span&gt;åˆ°è¦è®¿é—®&lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt; e&lt;/span&gt;&lt;span&gt;ndpoint&lt;/span&gt;&lt;span&gt;ï¼Œç„¶åä½¿&lt;/span&gt;&lt;span&gt;ç”¨&lt;/span&gt;&lt;span&gt; i&lt;/span&gt;&lt;span&gt;pv4_local_deliver&lt;/span&gt;&lt;span&gt;y &lt;/span&gt;&lt;span&gt;æ–¹&lt;/span&gt;&lt;span&gt;æ³•&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;å®Œæˆæ•°æ®åŒ…çš„è½¬å‘å¤„ç†&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;span&gt;åœ¨å¤„ç†çš„è¿‡ç¨‹ä¸­&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;ä¼šæ ¹æ®æ˜¯ä¸æ˜¯&lt;/span&gt;&lt;span&gt;æœ‰&lt;/span&gt;&lt;span&gt; N&lt;/span&gt;&lt;span&gt;etwork Polic&lt;/span&gt;&lt;span&gt;y &lt;/span&gt;&lt;span&gt;æ¥&lt;/span&gt;&lt;span&gt;å†³å®šæ˜¯ä¸æ˜¯è¦åšéªŒè¯ã€‚&lt;/span&gt;&lt;span&gt;å…·&lt;/span&gt;&lt;span&gt;ä½“&lt;/span&gt;&lt;span&gt; i&lt;/span&gt;&lt;span&gt;pv4_local_deliver&lt;/span&gt;&lt;span&gt;y &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;ä½œç”¨å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;span&gt;ipv4_local_delivery è¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ä½œç”¨ï¼Œæ˜¯å¤„ç†æœ¬åœ°çš„ packet åˆ°Â Pod çš„æ ¸å¿ƒæ–¹æ³•ã€‚ä¸ç®¡æ˜¯ Pod åˆ° Pod çš„ï¼Œè¿˜æ˜¯ cilium_host åˆ° Pod çš„ï¼Œè¿˜æ˜¯ overlay åˆ°Â Pod çš„ï¼Œè¿˜æ˜¯ç‰©ç†ç½‘å¡åˆ° Pod çš„ï¼Œåªè¦æ˜¯ç¡®å®šäº†æ˜¯æœ¬åœ°çš„ endpointï¼Œé‚£ packet è¦è¿›å…¥ Pod å°±æ˜¯è¦è¿™ä¸ªæ–¹æ³•æ¥å¤„ç†çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;to-hostï¼š&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;è¿™æ˜¯ä¸€ä¸ª eBPF Sectionï¼ŒæŒ‚è½½åœ¨ cilium_host çš„Â tc ingress ä¸ŠÂ eBPF ç¨‹åºã€‚to-host ä¸»è¦å¤„ç†çš„æ˜¯ ENCRYPT åŠ å¯†æ“ä½œå’Œ TO_PROXYã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å¯¹äº ENCRYPTï¼Œä¸»è¦æ˜¯å°† ctxâ†’cb[CB_ENCRYPT_IDENTITY]Â çš„ src identity è½¬æ¢æˆ 24 bit çš„ identityï¼Œç„¶åè®¾ç½®åˆ° ctx çš„Â mark çš„Â value ä¸­ï¼Œç”¨äºæ ‡è®°æ•°æ®åŒ…çš„å®‰å…¨èº«ä»½ï¼›TO_PROXY ä¸»è¦ä½œç”¨æ˜¯å½“å¼€å¯äº†åŸºäº eBPF çš„Â tproxy æ—¶å€™ï¼Œæå‰æŠ“å–Â proxy socketï¼Œç„¶åå°†å…¶ä¸ ctx å…³è”èµ·æ¥ï¼Œè¿™æ˜¯ tproxy éœ€è¦çš„é…ç½®ï¼Œä¸ºçœŸæ­£çš„ packet è½¬å‘åˆ°ä»£ç†åšå¥½å‡†å¤‡ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;from-containerï¼š&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;è¿™æ˜¯ä¸€ä¸ª eBPF Sectionï¼Œè¿™ä¸ª Section æ˜¯å’Œ Pod æœ€ç›´æ¥å…³è”çš„ eBPF çš„ç¨‹åºã€‚æŒ‚è½½åœ¨ Pod ä¸»æœºä¾§çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ä¸Šï¼Œä¹Ÿå°±æ˜¯ lxc-xxx è¿™ä¸ªç½‘ç»œè®¾å¤‡ï¼Œæ–¹å‘ä¸º ingressã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;ä¸»è¦å®Œæˆçš„äº‹æƒ…åŒ…æ‹¬å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;1.Â å½“ packet è¦ä» Pod å‡ºå»ï¼Œé¦–å…ˆ packet ä¼šç»è¿‡ eth0 åˆ°è¾¾ Pod å¯¹åº”çš„ lxc-xxx çš„Â tc ingressï¼Œè¿™é‡Œçš„ ebpfÂ ç¨‹åºçš„ Section æ˜¯Â from-containerã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;2. æ•°æ®åŒ…æ˜¯ä» Pod å‘å‡ºå»çš„ï¼Œå¦‚æœæ˜¯ original ç±»å‹çš„æ•°æ®åŒ…ï¼Œä¼šåœ¨è¿™é‡Œå®Œæˆæ•°æ®åŒ…çš„ dnat æ“ä½œï¼Œç®¡ç†è¿æ¥è·Ÿè¸ªï¼›å¦‚æœæ˜¯ reply ç±»å‹çš„æ•°æ®åŒ…ï¼Œä¼šå®Œæˆ reverse dnat çš„æ“ä½œã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;3. å¯¹äºæœ‰ Network Policy éªŒè¯éœ€è¦çš„æ•°æ®åŒ…ï¼Œä¼šç»è¿‡ tproxy çš„æ–¹å¼ï¼Œå°†æ•°æ®åŒ…å‘å¾€ cilium proxy å»éªŒè¯æ˜¯ä¸æ˜¯å¯ä»¥ accessï¼Œå¯¹äºæ­£å¸¸çš„ä»æœåŠ¡ç«¯è¿”å›çš„ reply æ•°æ®åŒ…ï¼Œä¼šæ ‡è®°æˆ skip policyï¼Œä¹Ÿå°±æ˜¯ä¸éœ€è¦åšéªŒè¯ã€‚å…·ä½“å®ç°å‚è€ƒ policy_can_egress4 æ–¹æ³•ã€‚ä» Pod é‡Œå‡ºæ¥çš„æ•°æ®åŒ…çš„ç›®çš„æ–¹å‘å¤§è‡´å¯ä»¥åˆ†ä¸ºå‡ ä¸ªè·¯å¾„ï¼šç¬¬ä¸€ä¸ªæ˜¯ Pod è®¿é—®æœ¬åœ°çš„ Podï¼Œç»è¿‡ ipv4_local_delivery æ¥å®Œæˆæ•°æ®åŒ…çš„è½¬å‘ï¼›ç¬¬äºŒä¸ªæ˜¯ Pod è®¿é—®å¤–ç½‘ï¼Œç»è¿‡ Kernel Stack å®Œæˆè§£æåï¼Œç»è¿‡ç‰©ç†ç½‘å¡çš„ to-netdev å‡ºå»ï¼›ç¬¬ä¸‰ä¸ªæ˜¯ Pod è®¿é—®æœ¬åœ°çš„é Pod çš„ï¼Œä¹Ÿæ˜¯ç»è¿‡ Kernel Stack å®Œæˆï¼›ç¬¬å››ä¸ªæ˜¯ Pod è®¿é—®éæœ¬æœºçš„é›†ç¾¤å…¶å®ƒæœºå™¨ä¸­çš„ Podï¼Œç»è¿‡ Kernel Stack å®Œæˆè§£æåï¼Œç»è¿‡ç‰©ç†ç½‘å¡ to-netdev å‡ºå»ï¼›ç¬¬äº”ä¸ªæ˜¯ Pod ç»è¿‡ overlay ç½‘ç»œè®¿é—®éæœ¬æœºçš„é›†ç¾¤å…¶å®ƒæœºå™¨ä¸­çš„ Podï¼Œç»è¿‡ cilium_vxlanï¼Œç„¶åç»è¿‡ Kernel Stack å®Œæˆè§£æåç»è¿‡ç‰©ç†ç½‘å¡å‡ºå»ã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;to-containerï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™æ˜¯ä¸€ä¸ª eBPF Sectionï¼Œè¿™æ˜¯ä¸€ä¸ªæ¯”è¾ƒç‰¹åˆ«çš„ eBPF çš„ç¨‹åºã€‚å®ƒå’Œ Pod ç›¸å…³ï¼Œä½†æ˜¯å´ä¸æ˜¯æŒ‚è½½åœ¨ tc egress ä¸Šçš„ï¼Œè€Œæ˜¯ä»¥ eBPF ç¨‹åºï¼Œä¿å­˜åœ¨ eBPF ä¸­çš„ map ä¸­çš„ï¼ŒeBPF ä¸­æœ‰ä¸€ç§ map ç±»å‹ï¼Œæ˜¯å¯ä»¥ä¿å­˜ eBPF ç¨‹åºçš„Â (BPF_MAP_TYPE_PROG_ARRAY) ï¼ŒåŒæ—¶ map ä¸­çš„ç¨‹åºéƒ½æœ‰è‡ªå·±çš„ id ç¼–å·ï¼Œå¯ä»¥ç”¨æ¥åœ¨ tail call ä¸­ç›´æ¥è°ƒç”¨ï¼Œto-container å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œè€Œä¸”æ˜¯æ¯ä¸€ä¸ª Pod éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„ to-containerï¼Œå’Œå…¶å®ƒå’Œ Pod ç›¸å…³çš„ eBPF ç¨‹åºä¸€æ ·ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å®ƒçš„ä¸»è¦ä½œç”¨å°±æ˜¯ï¼Œåœ¨æ•°æ®åŒ…è¿›å…¥ Pod è¿›å…¥ä¹‹å‰ï¼Œå®Œæˆ Policy çš„éªŒè¯ï¼Œå¦‚æœéªŒè¯é€šè¿‡äº†ä¼šä½¿ç”¨ Linux çš„Â redirect æ–¹æ³•ï¼Œå°†æ•°æ®åŒ…è½¬å‘åˆ° Pod çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ä¸Šã€‚è‡³äºæ˜¯ lxc-xxx è¿˜æ˜¯ eth0ï¼Œçœ‹å†…æ ¸çš„ç‰ˆæœ¬æ”¯æŒä¸æ”¯æŒ redirect peerï¼Œå¦‚æœæ”¯æŒ redirect peerï¼Œå°±ä¼šç›´æ¥è½¬å‘åˆ° Pod çš„Â eth0ï¼Œå¦‚æœä¸æ”¯æŒå°±ä¼šè½¬å‘åˆ° Pod çš„ä¸»æœºä¾§çš„ lxc-xxx ä¸Šã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;from-overlayï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™æ˜¯ä¸€ä¸ª eBPF Sectionï¼Œåœ¨é€‰æ‹©ä½¿ç”¨ Cilium çš„Â overlay ç½‘ç»œæ¨¡å‹æ—¶ï¼Œä¼šä½¿ç”¨åˆ°å’Œ overlay ç›¸å…³çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ï¼Œè¿™äº›è®¾å¤‡æ˜¯ Agent åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œåœ¨ä¸»æœºç©ºé—´åˆ›å»ºå‡ºæ¥çš„ï¼ŒåŸºäº vxlan çš„æŠ€æœ¯å®Œæˆ overlay ç½‘ç»œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;from-overla&lt;/span&gt;&lt;span&gt;y &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;æŒ‚è½½ç‚¹&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;å°±æ˜¯æŒ‚è½½&lt;/span&gt;&lt;span&gt;åœ¨&lt;/span&gt;&lt;span&gt; c&lt;/span&gt;&lt;span&gt;ilium_vxla&lt;/span&gt;&lt;span&gt;n &lt;/span&gt;&lt;span&gt;è¿™&lt;/span&gt;&lt;span&gt;ä¸ªç½‘ç»œè®¾å¤‡&lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt; t&lt;/span&gt;&lt;span&gt;c ingres&lt;/span&gt;&lt;span&gt;s &lt;/span&gt;&lt;span&gt;ä¸Š&lt;/span&gt;&lt;span&gt;çš„ï¼Œä¸»è¦å¤„ç†çš„æ•°æ®åŒ…æ˜¯è¿›&lt;/span&gt;&lt;span&gt;å…¥&lt;/span&gt;&lt;span&gt; P&lt;/span&gt;&lt;span&gt;o&lt;/span&gt;&lt;span&gt;d &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;ï¼Œåœ¨è¿›&lt;/span&gt;&lt;span&gt;å…¥&lt;/span&gt;&lt;span&gt; P&lt;/span&gt;&lt;span&gt;o&lt;/span&gt;&lt;span&gt;d &lt;/span&gt;&lt;span&gt;ä¹‹&lt;/span&gt;&lt;span&gt;å‰ä¼šå…ˆç»&lt;/span&gt;&lt;span&gt;è¿‡&lt;/span&gt;&lt;span&gt; c&lt;/span&gt;&lt;span&gt;ilium_vxla&lt;/span&gt;&lt;span&gt;n &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;Â f&lt;/span&gt;&lt;span&gt;rom-overla&lt;/span&gt;&lt;span&gt;y &lt;/span&gt;&lt;span&gt;å¤„&lt;/span&gt;&lt;span&gt;ç†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span/&gt;&lt;span&gt;ä¸»è¦å®Œæˆçš„å·¥ä½œåŒ…æ‹¬ä»¥ä¸‹å‡ ç‚¹ï¼š&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;span&gt;1. &lt;/span&gt;&lt;span&gt;åŒ…&lt;/span&gt;&lt;span&gt;æ‹¬&lt;/span&gt;&lt;span&gt; i&lt;/span&gt;&lt;span&gt;pse&lt;/span&gt;&lt;span&gt;c &lt;/span&gt;&lt;span&gt;å®‰&lt;/span&gt;&lt;span&gt;å…¨ç›¸å…³çš„å¤„ç†ï¼›&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;span&gt;2. &lt;/span&gt;&lt;span&gt;åŒ…æ‹¬å°†æ•°æ®åŒ…é€š&lt;/span&gt;&lt;span&gt;è¿‡&lt;/span&gt;&lt;span&gt; i&lt;/span&gt;&lt;span&gt;pv4_local_deliver&lt;/span&gt;&lt;span&gt;y &lt;/span&gt;&lt;span&gt;æ–¹&lt;/span&gt;&lt;span&gt;æ³•&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;ä¼ é€’åˆ°åç«¯æœåŠ¡åœ¨æœ¬æœº&lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt; P&lt;/span&gt;&lt;span&gt;o&lt;/span&gt;&lt;span&gt;d &lt;/span&gt;&lt;span&gt;ä¸­&lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt; c&lt;/span&gt;&lt;span&gt;ase&lt;/span&gt;&lt;span&gt;ï¼Œå…¶ä¸­ä¹Ÿä¼šç»&lt;/span&gt;&lt;span&gt;è¿‡&lt;/span&gt;&lt;span&gt; t&lt;/span&gt;&lt;span&gt;o-container&lt;/span&gt;&lt;span&gt;ï¼›&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;span&gt;3. &lt;/span&gt;&lt;span&gt;é€š&lt;/span&gt;&lt;span&gt;è¿‡&lt;/span&gt;&lt;span&gt; N&lt;/span&gt;&lt;span&gt;odePor&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;è®¿&lt;/span&gt;&lt;span&gt;é—®æœåŠ¡æ—¶ï¼ŒæœåŠ¡ä¸åœ¨æœ¬åœ°çš„æ—¶å€™ï¼Œä½¿ç”¨&lt;/span&gt;&lt;span&gt;å’Œ&lt;/span&gt;&lt;span&gt; f&lt;/span&gt;&lt;span&gt;rom-netde&lt;/span&gt;&lt;span&gt;v &lt;/span&gt;&lt;span&gt;ç±»&lt;/span&gt;&lt;span&gt;ä¼¼çš„æ–¹å¼&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;å»å¤„&lt;/span&gt;&lt;span&gt;ç†&lt;/span&gt;&lt;span&gt; N&lt;/span&gt;&lt;span&gt;odePor&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;è¯·æ±‚ï¼Œå…¶ä¸­åŒ…&lt;/span&gt;&lt;span&gt;æ‹¬&lt;/span&gt;&lt;span&gt; d&lt;/span&gt;&lt;span&gt;nat&lt;/span&gt;&lt;span&gt;ã€&lt;/span&gt;&lt;span&gt;c&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;ç­‰&lt;/span&gt;&lt;span&gt;æ“ä½œï¼Œæœ€åé€šè¿‡ï¼Œ&lt;/span&gt;&lt;span&gt;ep_tail_call&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;ctx, CILIUM_CALL_IPV4_NODEPORT_NAT&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;æˆ–&lt;/span&gt;&lt;span&gt;è€…&lt;/span&gt;&lt;span&gt; e&lt;/span&gt;&lt;span&gt;p_tail_call&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;ctx, CILIUM_CALL_IPV4_NODEPORT_DSR&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;æ–¹æ³•å®Œæˆæ•°æ®åŒ…çš„å¤„ç†ï¼Œå…·ä½“æ˜¯å“ªç§ï¼Œå–å†³&lt;/span&gt;&lt;span&gt;äº&lt;/span&gt;&lt;span&gt; N&lt;/span&gt;&lt;span&gt;odePor&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;Â L&lt;/span&gt;&lt;span&gt;B &lt;/span&gt;&lt;span&gt;ç­–&lt;/span&gt;&lt;span&gt;ç•¥&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;span&gt; s&lt;/span&gt;&lt;span&gt;na&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;è¿˜&lt;/span&gt;&lt;span&gt;æ˜¯&lt;/span&gt;&lt;span&gt; d&lt;/span&gt;&lt;span&gt;sr&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;span&gt;4. &lt;/span&gt;&lt;span&gt;æ•°æ®åŒ…éƒ½æ˜¯ä»ç‰©ç†ç½‘å¡åˆ°è¾¾ä¸»æœºçš„ï¼Œé‚£æ˜¯æ€æ ·åˆ°&lt;/span&gt;&lt;span&gt;è¾¾&lt;/span&gt;&lt;span&gt; c&lt;/span&gt;&lt;span&gt;ilium_vxla&lt;/span&gt;&lt;span&gt;n çš„ï¼Ÿ&lt;/span&gt;&lt;span&gt;è¿™ä¸ªæ˜¯ç”±æŒ‚è½½åœ¨ç‰©ç†ç½‘å¡&lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt; f&lt;/span&gt;&lt;span&gt;rom-netdev &lt;/span&gt;&lt;span&gt;ï¼Œæ ¹æ®éš§é“ç±»å‹ï¼Œå°†æ•°æ®åŒ…é€š&lt;/span&gt;&lt;span&gt;è¿‡&lt;/span&gt;&lt;span&gt; r&lt;/span&gt;&lt;span&gt;edirec&lt;/span&gt;&lt;span&gt;t &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;æ–¹å¼&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;ä¼ é€’&lt;/span&gt;&lt;span&gt;åˆ°&lt;/span&gt;&lt;span&gt; c&lt;/span&gt;&lt;span&gt;ilium_vxla&lt;/span&gt;&lt;span&gt;n &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;span&gt;å‚è§ï¼š&lt;/span&gt;&lt;span&gt;from-netde&lt;/span&gt;&lt;span&gt;v &lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;&lt;span&gt;Â e&lt;/span&gt;&lt;span&gt;ncap_and_redirect_with_nodei&lt;/span&gt;&lt;span&gt;d &lt;/span&gt;&lt;span&gt;æ–¹&lt;/span&gt;&lt;span&gt;æ³•ï¼Œ&lt;/span&gt;&lt;span&gt;å…¶ä¸­ä¸»è¦æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œä¸€æ˜¯__encap_with_nodeid(ctx, tunnel_endpoint, seclabel, monitor) æ–¹æ³•å®Œæˆ encapsulating ï¼ŒäºŒæ˜¯ ctx_redirect(ctx, ENCAP_IFINDEX, 0) æ–¹æ³•å®Œæˆå°†æ•°æ®åŒ… redirect åˆ° cilium_vxlan å¯¹åº”çš„ ENCAP_IFINDEX è¿™ä¸ª ifindexã€‚&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;to-overlayï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™æ˜¯ä¸€ä¸ª eBPF Sectionï¼Œåœ¨é€‰æ‹©ä½¿ç”¨ Cilium çš„Â overlay ç½‘ç»œæ¨¡å‹æ—¶ï¼Œä¼šä½¿ç”¨åˆ°å’Œ overlay ç›¸å…³çš„è™šæ‹Ÿç½‘ç»œè®¾å¤‡ï¼Œè¿™äº›è®¾å¤‡æ˜¯ Cilium Agent åœ¨å¯åŠ¨çš„æ—¶å€™åœ¨ä¸»æœºç©ºé—´åˆ›å»ºå‡ºæ¥çš„ï¼ŒåŸºäº vxlan çš„æŠ€æœ¯å®Œæˆ overlay ç½‘ç»œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;to-overlay çš„æŒ‚è½½ç‚¹å°±æ˜¯æŒ‚è½½åœ¨ cilium_vxlan è¿™ä¸ªç½‘ç»œè®¾å¤‡çš„ egress ä¸Šçš„ã€‚ä¸»è¦å®Œæˆçš„å·¥ä½œåŒ…æ‹¬ï¼šé€šè¿‡ nodeport_nat_ipv4_fwd å’ŒÂ snat_v4_process å®Œæˆ egress æ–¹å‘çš„ snat æ“ä½œï¼Œsnat çš„ä½œç”¨æ˜¯è·¨ä¸»æœºè®¿é—®çš„æ—¶å€™ï¼Œéœ€è¦å°†æºåœ°å€æ”¹æˆä¸»æœºçš„åœ°å€ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;to-overlay å¤„ç†çš„æ•°æ®åŒ…æ˜¯é€šè¿‡ lxc-xxx çš„Â from-container ç¨‹åº redirect è¿‡æ¥çš„æ•°æ®åŒ…ï¼Œè¿™è¯´æ˜Â to-overlay å¤„ç†çš„æ˜¯ Pod é€šè¿‡ vxlan å‡ºå»çš„æ•°æ®åŒ…ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;from-networkï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™æ˜¯ä¸€ä¸ª eBPF Sectionï¼ŒæŒ‚è½½åœ¨ç‰©ç†ç½‘ç»œçš„è®¾å¤‡ä¸­ tc ingressï¼Œå¦‚ç‰©ç†æœºå™¨çš„ eth0 ç½‘å¡ï¼Œä½†æ˜¯è¿™ä¸ª eBPF çš„ç¨‹åºæ˜¯å¯é€‰çš„ï¼Œåªæœ‰å½“è®¾ç½®äº† EncryptInterface çš„æ—¶å€™ï¼Œæ‰ä¼šç¼–è¯‘å’ŒæŒ‚è½½è¿™ä¸ªç¨‹åºã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸»è¦å®Œæˆçš„å·¥ä½œæ˜¯å¯¹æ•°æ®åŒ…çš„è§£å¯†æ“ä½œï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨ ipsec çš„åŠ å¯†ï¼Œä¹Ÿå°±æ˜¯ ENABLE_IPSEC ä¸ºÂ falseï¼Œè¿™é‡Œä¸ä¼šå¯¹æ•°æ®åŒ…æœ‰ä»»ä½•ä¿®æ”¹ï¼Œç›´æ¥å°†æ•°æ®åŒ…æ”¾å› Kernelã€‚å¦‚æœä½¿ç”¨äº† IPSECï¼Œè§£å¯†çš„æ—¶å€™ï¼Œæ‰ä¼šä½¿ç”¨åˆ°è¿™ä¸ªç¨‹åºï¼Œå¦‚æœæ²¡æœ‰ä½¿ç”¨åˆ°ï¼Œè¿™ä¸ªç¨‹åºæ˜¯ä¸éœ€è¦ç¼–è¯‘å’ŒæŒ‚è½½çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸»è¦å®ç°çš„æ–¹å¼æ˜¯è®¾ç½® ctx çš„Â mark ä¸ºÂ MARK_MAGIC_DECRYPT(0x0D00) ï¼Œç„¶åå°†æ•°æ®åŒ…æ”¾å› Kernel Stackï¼Œç”± Kernel Stack å®Œæˆ IPsec decryptionã€‚&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;cgroup/connectï¼Œcgroup/bindï¼Œcgroup/post_bindï¼Œcgroup/sendmsgï¼Œcgroup/recvmsgï¼Œcgroup/getpeernameï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™æ˜¯ä¸€äº› eBPF Sectionï¼Œåœ¨ Cilium ä¸­ï¼Œä½¿ç”¨äº†å’Œ cgroup ç›¸å…³çš„ eBPF çš„èƒ½åŠ›ï¼Œä¸»è¦å®Œæˆçš„äº‹æƒ…æ˜¯ç›‘æµ‹ socket çš„Â opsã€‚åœ¨ socket çš„æ“ä½œè¿‡ç¨‹ä¸­ï¼Œæ‰§è¡Œç›¸å…³çš„ eBPF ç¨‹åºæ¥å®Œæˆ Socket LB èƒ½åŠ›ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸¾ä¾‹ï¼Œå½“è¦åˆ›å»ºè¿æ¥çš„æ—¶å€™ï¼Œä¼šå…ˆåšä¸€æ¬¡ dnatï¼Œæ‰¾åˆ°çœŸæ­£çš„åç«¯çš„ Pod çš„çœŸå® ip åœ°å€ï¼Œç”¨çœŸå®çš„ ip åœ°å€æ¥å®Œæˆå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„è¿æ¥ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¸­é—´ä¸€å±‚ä»£ç†çš„æ–¹å¼ï¼Œè¿™æ ·æ•°æ®é€šä¿¡çš„æ•ˆç‡å¾—åˆ°æå‡ï¼Œä¹Ÿæ˜¯ä¸Šæ–‡æåˆ°çš„ Host Reachable Service çš„èƒ½åŠ›ä½“ç°ã€‚åŒ…æ‹¬åœ¨åˆ›å»ºè¿æ¥ï¼ŒæŒ‡å®š bind çš„åœ°å€ï¼Œä»¥åŠå‘é€å’Œæ¥å—æ•°æ®åŒ…çš„è¿‡ç¨‹ä¸­ï¼Œéƒ½å¯ä»¥åšä¸€äº›ç‰¹æ®Šçš„å¤„ç†ï¼Œæ¥æå‡ç½‘ç»œæ€§èƒ½ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;sk_msg / sockopsï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™æ˜¯ä¸€äº› eBPF Sectionï¼Œåœ¨ Cilium ä¸­æ”¯æŒ socket åŠ é€Ÿçš„ç‰¹æ€§ï¼Œå¯ä»¥å®Œæˆæœ¬åœ° socket å’ŒÂ socket ä¹‹é—´æ•°æ®åŒ…çš„ redirectï¼Œè€Œä¸éœ€è¦ç»è¿‡å†…æ ¸åº•å±‚çš„ç½‘ç»œåè®®æ ˆã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸¾ä¾‹ï¼šåœ¨ä¸€ä¸ª Pod ä¸­æœ‰ä¸¤ä¸ªå®¹å™¨ï¼Œè¿™ä¸¤ä¸ªå®¹å™¨ä¹‹é—´ä¼šåŸºäº socket è¿›è¡Œé€šä¿¡ï¼Œè¿™ä¸ªåœºæ™¯æ˜¯å¯ä»¥åŸºäºè¿™ä¸ªç‰¹æ€§å®ŒæˆåŠ é€Ÿï¼Œå½“ç„¶ä¸ä»…ä»…æ”¯æŒè¿™ä¸€ç§ caseï¼Œåªè¦æ˜¯æœ¬åœ°çš„ socket ä¹‹é—´ï¼Œéƒ½æ˜¯å¯ä»¥å®ŒæˆåŠ é€Ÿï¼Œå› ä¸ºåŠ é€Ÿçš„èŒƒå›´æ˜¯åŸºäº cgroup ç›‘å¬çš„æ‰€æœ‰ä¸»æœºä¸Šçš„ socketã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸»è¦å®ç°çš„æ–¹å¼æ˜¯ä¾èµ–äº eBPF ä¸­çš„ sockmap å’ŒÂ msg_redirect_hashã€‚sockmap ä¸­ä¿å­˜çš„æ˜¯ socketï¼Œmsg_redirect_hash æ˜¯å†…æ ¸æä¾›çš„ï¼Œé…åˆ sockmap å®Œæˆ socket åˆ°Â socket çš„æ•°æ®åŒ…çš„ç›´æ¥ redirectã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å…·ä½“å“ªäº› socket éœ€è¦è¢«å¤„ç†ï¼Œé€šè¿‡ä½¿ç”¨Â sockops ä¸­çš„èƒ½åŠ›ï¼Œç›‘æµ‹å·²ç»å»ºç«‹è¿æ¥çš„ socketï¼Œå°†çŠ¶æ€ä¸º BPF_SOCK_OPS_ACTIVE_ESTABLISHED_CB çš„Â socket æ”¾åˆ° sockmap ä¸­ã€‚sockmap å…·ä½“å¯¹åº”çš„ eBPF çš„Â map ç±»å‹å¯ä»¥æ˜¯ BPF_MAP_TYPE_SOCKHASHã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2&gt;&lt;span&gt;&lt;strong&gt;04&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;h2&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;æ€»ç»“&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;Cilium æ˜¯ä¸€ä¸ªä½¿ç”¨ eBPF çš„æŠ€æœ¯å®ç°æ•°æ®è·¯å¾„ï¼Œåœ¨ä¸åŒçš„ç½‘ç»œè®¾å¤‡ä¸­ redirect æ•°æ®åŒ…ï¼Œç¼©çŸ­æ•°æ®è·¯å¾„ï¼Œè¾¾åˆ°åŠ é€Ÿçš„æ•ˆæœã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç‰¹ç‚¹æ˜¯é«˜çº§çš„ç‰¹æ€§å¯¹ Kernel çš„è¦æ±‚æ¯”è¾ƒé«˜ï¼Œè€Œä¸”ä¸åŒçš„ Kernel ç‰ˆæœ¬ï¼Œä¼šå¯¼è‡´ä¸åŒçš„æ•°æ®è·¯å¾„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¦æƒ³è¾¾åˆ°æœ€å¥½çš„ç½‘ç»œæ€§èƒ½ï¼Œæ¨èæœ€ä½çš„ Kernel çš„æœ€ä½ç‰ˆæœ¬ä¸º 5.10ã€‚å¦‚æœåªæ˜¯æƒ³è®© Cilium å¯ä»¥è¿è¡Œèµ·æ¥ï¼Œé‚£æœ€ä½çš„ Kernel çš„æœ€ä½ç‰ˆæœ¬æ˜¯ 4.9.17ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.6680440771349863&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1DjrTiaica04lheX9aIvU5iabXFr4iaceFibucknN86D6C2z2GwPeEpicFc3Oa0xhgunOoibRqaVBAAWichDmPXTgAfJFw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1452&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;hr data-style=&quot;border-style: solid; border-width: 0px 0px 0px; border-color: rgba(0, 0, 0, 0.1); transform-origin: 0px 0px; transform: scale(1, 0.5);&quot; class=&quot;js_darkmode__10&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â æœ¬æ–‡ä½œè€…Â &lt;/span&gt;&lt;/p&gt;&lt;p data-darkmode-bgcolor-15886644409858=&quot;rgb(36, 36, 36)&quot; data-darkmode-original-bgcolor-15886644409858=&quot;rgb(255, 255, 255)&quot; data-style=&quot;margin-top: 5px; margin-bottom: 5px; max-width: 100%; background-color: rgb(255, 255, 255); min-height: 1em; letter-spacing: 0.544px; white-space: normal; text-align: center; box-sizing: border-box !important; overflow-wrap: break-word !important; color: rgba(230, 230, 230, 0.9);&quot; class=&quot;js_darkmode__6&quot; data-darkmode-bgcolor-16372053747624=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16372053747624=&quot;#fff|rgb(255, 255, 255)&quot; data-darkmode-color-16372053747624=&quot;rgba(163, 163, 163, 0.9)&quot; data-darkmode-original-color-16372053747624=&quot;#fff|rgba(230, 230, 230, 0.9)&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;117&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;114&quot; data-ratio=&quot;0.98565965583174&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1DjrTiaica04keMUUKWIVfK2vq0U4OWjZW0ibeLucpCYKfe8j9xibIy58icgEZ0zWiaJNWCuy2iaAlooxdlVO4JUZR7SQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1046&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;strong&gt;&lt;span/&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;ç†Šä¸­ç¥¥&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;ã€ŒDao&lt;/span&gt;&lt;span&gt;Cloud é“å®¢&lt;/span&gt;&lt;span&gt;ã€æŠ€æœ¯åˆä¼™äºº&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;äº‘åŸç”ŸæŠ€æœ¯ä¸“å®¶&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;hr data-style=&quot;border-style: solid; border-width: 0px 0px 0px; border-color: rgba(0, 0, 0, 0.1); transform-origin: 0px 0px; transform: scale(1, 0.5);&quot; class=&quot;js_darkmode__10&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span/&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç›¸å…³é“¾æ¥ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;https://cilium.io/&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;https://docs.cilium.io/en/stable/bpf/&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;https://www.man7.org/linux/man-pages/man7/bpf-helpers.7.html&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icGWTH9VkFq3qkSDQic93bFVw7hfdhjWInq4jtwTQk0tmSP823b4XOVbibm63dxzwAPyvXia151ZFQ2K5sDvcTl5Sg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;400&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;DaoCloud å…¬å¸ç®€ä»‹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;ã€ŒDaoCloud é“å®¢ã€äº‘åŸç”Ÿé¢†åŸŸçš„åˆ›æ–°é¢†å¯¼è€…ï¼Œæˆç«‹äº 2014 å¹´åº•ï¼Œæ‹¥æœ‰è‡ªä¸»çŸ¥è¯†äº§æƒçš„æ ¸å¿ƒæŠ€æœ¯ï¼Œè‡´åŠ›äºæ‰“é€ å¼€æ”¾çš„äº‘æ“ä½œç³»ç»Ÿä¸ºä¼ä¸šæ•°å­—åŒ–è½¬å‹èµ‹èƒ½ã€‚äº§å“èƒ½åŠ›è¦†ç›–äº‘åŸç”Ÿåº”ç”¨çš„å¼€å‘ã€äº¤ä»˜ã€è¿ç»´å…¨ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶æä¾›å…¬æœ‰äº‘ã€ç§æœ‰äº‘å’Œæ··åˆäº‘ç­‰å¤šç§äº¤ä»˜æ–¹å¼ã€‚æˆç«‹è¿„ä»Šï¼Œå…¬å¸å·²åœ¨é‡‘èç§‘æŠ€ã€å…ˆè¿›åˆ¶é€ ã€æ™ºèƒ½æ±½è½¦ã€é›¶å”®ç½‘ç‚¹ã€åŸå¸‚å¤§è„‘ç­‰å¤šä¸ªé¢†åŸŸæ·±è€•ï¼Œæ ‡æ†å®¢æˆ·åŒ…æ‹¬äº¤é€šé“¶è¡Œã€æµ¦å‘é“¶è¡Œã€ä¸Šæ±½é›†å›¢ã€ä¸œé£æ±½è½¦ã€æµ·å°”é›†å›¢ã€å±ˆè‡£æ°ã€é‡‘æ‹±é—¨ï¼ˆéº¦å½“åŠ³ï¼‰ç­‰ã€‚ç›®å‰ï¼Œå…¬å¸å·²å®Œæˆäº† D è½®è¶…äº¿å…ƒèèµ„ï¼Œè¢«èª‰ä¸ºç§‘æŠ€é¢†åŸŸå‡†ç‹¬è§’å…½ä¼ä¸šã€‚å…¬å¸åœ¨åŒ—äº¬ã€æ­¦æ±‰ã€æ·±åœ³ã€æˆéƒ½è®¾ç«‹å¤šå®¶åˆ†å…¬å¸åŠåˆèµ„å…¬å¸ï¼Œæ€»å‘˜å·¥äººæ•°è¶…è¿‡ 400 äººï¼Œæ˜¯ä¸Šæµ·å¸‚é«˜æ–°æŠ€æœ¯ä¼ä¸šã€ä¸Šæµ·å¸‚â€œç§‘æŠ€å°å·¨äººâ€ä¼ä¸šå’Œä¸Šæµ·å¸‚â€œä¸“ç²¾ç‰¹æ–°â€ä¼ä¸šï¼Œå¹¶å…¥é€‰äº†ç§‘åˆ›æ¿åŸ¹è‚²ä¼ä¸šåå•ã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;ç½‘å€ï¼š&lt;/span&gt;&lt;span&gt;www.daocloud.io&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é‚®ä»¶ï¼šinfo@daocloud.io&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç”µè¯ï¼š400 002 6898&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5900621118012422&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1DjrTiaica04nnwnvanKwk0ym0zoD77xItIh02tUNoicUUbD7WibONpElX4j6sp8cx13q3jBZgVZXM8fiaic5scLwKjQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;644&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
          &lt;/div&gt;

          

          



           
                                
                    
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>98156602effec14cab5bc7b963b6b55f</guid>
<title>è°·æ­Œå·¥ç¨‹æœ€ä½³å®è·µ</title>
<link>https://toutiao.io/k/q19mmjh</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ€è¿‘å…¬å¸åŒäº‹ä½œäº†ä¸ªCode Reviewçš„åˆ†äº«ï¼Œäºæ˜¯ä¹æˆ‘ç³»ç»Ÿå­¦ä¹ äº†ä¸‹ã€Šè°·æ­Œå·¥ç¨‹å®è·µã€‹ï¼Œé‡Œé¢ä¸»è¦è®²çš„æ˜¯Code Reviewã€‚å†™ä¸‹æœ¬æ–‡ä½œä¸ºç¬”è®°ã€‚&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;å‰è¨€&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;æœ¯è¯­&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;ä»£ç å®¡æŸ¥è€…æŒ‡å—&lt;/p&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;Code Review æ ‡å‡†&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Code Review è¦ç‚¹&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;æŸ¥çœ‹CLçš„æ­¥éª¤&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Code Review é€Ÿåº¦&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;å¦‚ä½•æ’°å†™ Code Review è¯„è®º&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;å¤„ç† Code Review ä¸­çš„æ‹–å»¶&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;p&gt;ä»£ç å¼€å‘è€…æŒ‡å—&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;æ€»ç»“&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å‰è¨€&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ã€Šè°·æ­Œå·¥ç¨‹å®è·µã€‹æ˜¯ Google å›¢é˜Ÿé•¿æœŸä»¥æ¥çš„å†…éƒ¨é¡¹ç›®æœ€ä½³å®è·µã€‚å…¶ç›®çš„æ˜¯å¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°è¿›è¡Œä»£ç å®¡æŸ¥å·¥ä½œï¼Œé€šè¿‡ Code Review æ¥æå‡å¹¶ä¼˜åŒ–å½“å‰é¡¹ç›®çš„ä»£ç è´¨é‡ï¼Œä¾¿äºå¼€å‘äººå‘˜ç»´æŠ¤å’Œç»´æŠ¤æ—§é¡¹ç›®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ç®¡ä½ æ˜¯ä»£ç å¼€å‘è€…è¿˜æ˜¯ä»£ç çš„å®¡æŸ¥è€…éƒ½å€¼å¾—è¯»ä¸€è¯»ã€‚&lt;span&gt;æœ¬æ–‡ä¸»è¦æ˜¯åŸºäº&lt;/span&gt;&lt;span&gt;ã€Šè°·æ­Œå·¥ç¨‹å®è·µã€‹&lt;/span&gt;&lt;sup&gt;[1]&lt;/sup&gt;&lt;span&gt;ï¼Œæ‘˜å–äº†å…³é”®éƒ¨åˆ†ï¼Œå¹¶åšäº†ç¬”è®°å’Œæ‰©å±•ã€‚&lt;/span&gt;&lt;span&gt;å»ºè®®çœ‹ä¸‹è‹±æ–‡åŸç‰ˆ&lt;/span&gt;&lt;span&gt;ã€ŠGoogle Engineering Practices Documentation
ã€‹&lt;/span&gt;&lt;sup&gt;[2]&lt;/sup&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æœ¯è¯­&lt;/span&gt;&lt;/h2&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;CLï¼ˆ&lt;span&gt;Change List&lt;/span&gt;ï¼‰&lt;/section&gt;&lt;section&gt;è¡¨ç¤ºå˜æ›´åˆ—è¡¨&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;LGTMï¼ˆ&lt;span&gt;Looks Good toÂ &lt;/span&gt;&lt;span&gt;Me&lt;/span&gt;ï¼‰&lt;/section&gt;&lt;section&gt;æˆ‘è§‰å¾—ä¸é”™ã€‚è¡¨ç¤ºè®¤å¯è¿™æ¬¡PRï¼ŒåŒæ„mergeåˆå¹¶ä»£ç åˆ°è¿œç¨‹ä»“åº“ã€‚&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æ‰©å±•&lt;/strong&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;MRï¼ˆ&lt;span&gt;Merge Request&lt;/span&gt;ï¼‰&lt;/section&gt;&lt;section&gt;åˆå¹¶è¯·æ±‚ï¼ŒGitLabä¸­æœ¯è¯­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;PRï¼ˆPull Requestï¼‰&lt;/section&gt;&lt;section&gt;åˆå¹¶è¯·æ±‚ï¼ŒGitHubä¸­æœ¯è¯­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;CRï¼ˆCode Reviewï¼‰&lt;/section&gt;&lt;section&gt;ä»£ç å®¡æŸ¥ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ACKï¼ˆAcknowledgementï¼‰&lt;/section&gt;&lt;section&gt;æˆ‘ç¡®è®¤äº†æˆ–è€…æˆ‘æ¥å—äº†,æˆ‘æ‰¿è®¤äº†ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;WIPï¼ˆWork in progressï¼‰&lt;/section&gt;&lt;section&gt;do not merge yet. Â  å¼€å‘ä¸­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ASAPï¼ˆAs Soon As Possibleï¼‰&lt;/section&gt;&lt;section&gt;å°½å¿«ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;TL;DRï¼ˆToo Long; Didnâ€™t Readï¼‰&lt;/section&gt;&lt;section&gt;ã€Œå¤ªé•¿æ‡’å¾—çœ‹ã€README æ–‡æ¡£å¸¸è§ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;PTALï¼ˆPlease take a look ï¼‰&lt;/section&gt;&lt;section&gt;å¸®æˆ‘çœ‹ä¸‹ï¼Œä¸€èˆ¬éƒ½æ˜¯è¯·åˆ«äºº review è‡ªå·±çš„ PRã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;CCï¼ˆCarbon copy ï¼‰&lt;/section&gt;&lt;section&gt;ä¸€èˆ¬ä»£è¡¨æŠ„é€åˆ«äººçš„æ„æ€ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;RFCï¼ˆRequest for commentsï¼‰&lt;/section&gt;&lt;section&gt;æˆ‘è§‰å¾—è¿™ä¸ªæƒ³æ³•å¾ˆå¥½, æˆ‘ä»¬æ¥ä¸€èµ·è®¨è®ºä¸‹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;NACK/NAKï¼ˆNegative acknowledgementï¼‰&lt;/section&gt;&lt;section&gt;ä¸åŒæ„ã€‚i.e. disagree with change and/or conceptã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;RFCï¼ˆRequest For Commentsï¼‰&lt;/section&gt;&lt;section&gt;è¯·æ±‚è¿›è¡Œè®¨è®º i.e. I think this is a good idea, lets discussã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;AFAIK/AFAICTï¼ˆ&lt;span&gt;As Far As I Know / Can TellÂ &lt;/span&gt;ï¼‰&lt;/section&gt;&lt;section&gt;æ®æˆ‘æ‰€çŸ¥ï¼›å°±æˆ‘æ‰€çŸ¥ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;TBRï¼ˆ&lt;span&gt;To Be Reviewed&lt;/span&gt;ï¼‰&lt;/section&gt;&lt;section&gt;æç¤ºç»´æŠ¤è€…è¿›è¡Œ reviewã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰©å±•å‚è€ƒ&lt;span&gt;Git å›¢é˜Ÿåä½œå¸¸ç”¨æœ¯è¯­&lt;/span&gt;&lt;sup&gt;[3]&lt;/sup&gt;ã€&lt;span&gt;LGTM : code review è¡Œè¯&lt;/span&gt;&lt;sup&gt;[4]&lt;/sup&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ä»£ç å®¡æŸ¥è€…æŒ‡å—&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Code Review æ ‡å‡†&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€æœ‰ Code Review æŒ‡å—ä¸­çš„é«˜çº§åŸåˆ™ï¼š&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ä¸€èˆ¬æ¥è¯´ï¼Œå®¡æ ¸äººå‘˜åº”è¯¥å€¾å‘äºæ‰¹å‡†CLï¼Œåªè¦CLç¡®å®å¯ä»¥æé«˜ç³»ç»Ÿçš„æ•´ä½“ä»£ç å¥åº·çŠ¶æ€ï¼Œå³ä½¿CLå¹¶ä¸å®Œç¾ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Code Review è¦ç‚¹&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;è®¾è®¡ï¼šä¸»è¦æ˜¯çœ‹CLæ•´ä½“è®¾è®¡æ˜¯å¦åˆç†ï¼Œæ¯”å¦‚ä»£ç çš„åˆ†å±‚æ˜¯å¦åˆç†ç­‰ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åŠŸèƒ½ï¼šä¸»è¦çœ‹æ˜¯å¦ç¬¦åˆå¼€å‘è€…çš„æ„å›¾ï¼Œå¹¶è€ƒè™‘åˆ°ä¸€äº›è¾¹ç¼˜æƒ…å†µï¼Œå¦‚å¹¶å‘é—®é¢˜ç­‰ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¤æ‚åº¦ï¼šé˜…è¯»ä»£ç çš„äººæ— æ³•å¿«é€Ÿç†è§£ã€‚è¿˜è¦æ³¨æ„è¿‡åº¦å·¥ç¨‹ï¼ˆover-engineeringï¼‰ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æµ‹è¯•ï¼šç¡®ä¿ CL ä¸­çš„æµ‹è¯•æ­£ç¡®ï¼Œåˆç†ä¸”æœ‰ç”¨ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å‘½åï¼šä¸€ä¸ªå¥½åå­—åº”è¯¥è¶³å¤Ÿé•¿ï¼Œå¯ä»¥å®Œå…¨ä¼ è¾¾é¡¹ç›®çš„å†…å®¹æˆ–ä½œç”¨ï¼Œä½†åˆä¸ä¼šå¤ªé•¿ï¼Œä»¥è‡³äºéš¾ä»¥é˜…è¯»ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ³¨é‡Šï¼šæ˜¯å¦æ‰€æœ‰æ³¨é‡Šéƒ½æ˜¯å¿…è¦çš„ï¼Ÿé€šå¸¸ï¼Œæ³¨é‡Šè§£é‡Šä¸ºä»€ä¹ˆæŸäº›ä»£ç å­˜åœ¨æ—¶å¾ˆæœ‰ç”¨ï¼Œä¸”ä¸åº”è¯¥ç”¨æ¥è§£é‡ŠæŸäº›ä»£ç æ­£åœ¨åšä»€ä¹ˆã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é£æ ¼ï¼šå‚è€ƒ&lt;span&gt;ã€ŠGoogle Style Guidesã€‹&lt;/span&gt;&lt;sup&gt;[5]&lt;/sup&gt;Â ï¼Œé‡Œé¢åŒ…å«Googleçš„å¤šç§è¯­è¨€çš„é£æ ¼æŒ‡å—ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ–‡æ¡£ï¼šå¦‚æœ CL å˜æ›´äº†ï¼Œè¯·æ£€æŸ¥ç›¸å…³æ–‡æ¡£æ˜¯å¦æœ‰æ›´æ–°ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ¯ä¸€è¡Œï¼šæŸ¥çœ‹åˆ†é…ç»™æ‚¨å®¡æŸ¥çš„æ¯è¡Œä»£ç ã€‚å¦‚æœä¸äº†è§£æŸäº›éƒ¨åˆ†çš„å®¡æŸ¥ï¼Œè¯·ç¡®ä¿ CL ä¸Šæœ‰ä¸€ä¸ªåˆæ ¼çš„å®¡æŸ¥äººï¼Œç‰¹åˆ«æ˜¯å¯¹äºå®‰å…¨æ€§ã€å¹¶å‘æ€§ã€å¯è®¿é—®æ€§ã€å›½é™…åŒ–ç­‰å¤æ‚é—®é¢˜ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸Šä¸‹æ–‡ï¼šé€šå¸¸ï¼Œä»£ç å®¡æŸ¥å·¥å…·åªä¼šæ˜¾ç¤ºå˜æ›´çš„éƒ¨åˆ†çš„å‘¨å›´çš„å‡ è¡Œã€‚æœ‰æ—¶æ‚¨å¿…é¡»æŸ¥çœ‹æ•´ä¸ªæ–‡ä»¶ä»¥ç¡®ä¿å˜æ›´ç¡®å®æœ‰æ„ä¹‰ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å¥½çš„äº‹æƒ…ï¼š&lt;/span&gt;&lt;span&gt;æ¯”èµ·å‘Šè¯‰ä»–ä»¬åšé”™äº†ä»€ä¹ˆï¼Œæœ‰æ—¶æ›´æœ‰ä»·å€¼çš„æ˜¯å‘Šè¯‰å¼€å‘äººå‘˜ä»–ä»¬åš&lt;/span&gt;&lt;span&gt;å¯¹äº†ä»€ä¹ˆã€‚&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æŸ¥çœ‹CLçš„æ­¥éª¤&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç¬¬ä¸€æ­¥ï¼šå…¨é¢äº†è§£å˜æ›´ã€‚&lt;span/&gt;&lt;/h4&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç¬¬äºŒæ­¥ï¼šæ£€æŸ¥ CL çš„ä¸»è¦éƒ¨åˆ†ã€‚&lt;span/&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;é€šå¸¸ï¼ŒåŒ…å«å¤§é‡çš„é€»è¾‘å˜æ›´çš„æ–‡ä»¶å°±æ˜¯ CL çš„ä¸»è¦éƒ¨åˆ†&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¦‚æœ CL å¤ªå¤§è€Œæ— æ³•ç¡®å®šå“ªäº›éƒ¨åˆ†æ˜¯ä¸»è¦éƒ¨åˆ†ï¼Œè¯·å‘å¼€å‘äººå‘˜è¯¢é—®æ‚¨åº”è¯¥é¦–å…ˆæŸ¥çœ‹çš„å†…å®¹æˆ–è€…è¦æ±‚ä»–ä»¬å°† CL æ‹†åˆ†ä¸ºå¤šä¸ª CLã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¦‚æœåœ¨è¯¥éƒ¨åˆ†å‘ç°å­˜åœ¨ä¸€äº›ä¸»è¦çš„è®¾è®¡é—®é¢˜æ—¶ï¼Œå³ä½¿æ²¡æœ‰æ—¶é—´ç«‹å³æŸ¥çœ‹ CL çš„å…¶ä½™éƒ¨åˆ†ï¼Œä¹Ÿåº”ç«‹å³ç•™ä¸‹è¯„è®ºå‘ŠçŸ¥æ­¤é—®é¢˜ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç¬¬ä¸‰æ­¥ï¼šä»¥é€‚å½“çš„é¡ºåºæŸ¥çœ‹CLçš„å…¶ä½™éƒ¨åˆ†ã€‚&lt;span/&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;é€šå¸¸åœ¨æŸ¥çœ‹ä¸»è¦æ–‡ä»¶ä¹‹åï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯æŒ‰ç…§ä»£ç å®¡æŸ¥å·¥å…·å‘æ‚¨æä¾›çš„é¡ºåºæµè§ˆæ¯ä¸ªæ–‡ä»¶ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœ‰æ—¶åœ¨é˜…è¯»ä¸»ä»£ç ä¹‹å‰å…ˆé˜…è¯»æµ‹è¯•ä¹Ÿå¾ˆæœ‰å¸®åŠ©ï¼Œå› ä¸ºè¿™æ ·æ‚¨å°±å¯ä»¥äº†è§£è¯¥å˜æ›´åº”å½“åšäº›ä»€ä¹ˆã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Code Review é€Ÿåº¦&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¸ºä»€ä¹ˆå°½å¿«è¿›è¡Œ Code Reviewï¼Ÿ&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ç„¶å°±ä¼šå‘ç”Ÿï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;æ•´ä¸ªå›¢é˜Ÿçš„é€Ÿåº¦é™ä½äº†ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¼€å‘è€…å¼€å§‹æŠ—è®®ä»£ç å®¡æŸ¥æµç¨‹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä»£ç å¥åº·çŠ¶å†µå¯èƒ½ä¼šå—åˆ°å½±å“ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Code Review åº”è¯¥æœ‰å¤šå¿«ï¼Ÿ&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæ‚¨æ²¡æœ‰å¤„äºé‡ç‚¹ä»»åŠ¡çš„ä¸­ï¼Œé‚£ä¹ˆæ‚¨åº”è¯¥åœ¨æ”¶åˆ°ä»£ç å®¡æŸ¥åå°½å¿«å¼€å§‹ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é€Ÿåº¦ vs. ä¸­æ–­&lt;span/&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å¦‚æœæ‚¨æ­£å¤„äºé‡ç‚¹ä»»åŠ¡ä¸­ï¼Œä¾‹å¦‚ç¼–å†™ä»£ç ï¼Œè¯·ä¸è¦æ‰“æ–­è‡ªå·±è¿›è¡Œä»£ç å®¡æŸ¥ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åœ¨å›å¤å®¡æŸ¥è¯·æ±‚ä¹‹å‰ï¼Œè¯·ç­‰å¾…å·¥ä½œä¸­æ–­ç‚¹ã€‚å¯èƒ½æ˜¯å½“ä½ çš„å½“å‰ç¼–ç ä»»åŠ¡å®Œæˆï¼Œåˆé¤åï¼Œä»ä¼šè®®è¿”å›ç­‰ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å¿«é€Ÿå“åº”&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¿«é€Ÿçš„ä¸ªäººå“åº”æ¯”æ•´ä¸ªè¿‡ç¨‹å¿«é€Ÿå‘ç”Ÿæ›´ä¸ºé‡è¦ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å¸¦è¯„è®ºçš„LGTM&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†åŠ å¿«ä»£ç å®¡æŸ¥ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå³ä½¿ä»–ä»¬ä¹Ÿåœ¨ CL ä¸Šç•™ä¸‹æœªè§£å†³çš„è¯„è®ºï¼Œå®¡æŸ¥è€…ä¹Ÿåº”è¯¥ç»™äºˆ LGTM/Approvaã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å¤§å‹CL&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæœ‰äººå‘æ‚¨å‘é€äº†ä»£ç å®¡æŸ¥å¤ªå¤§ï¼Œæ‚¨ä¸ç¡®å®šä½•æ—¶æœ‰æ—¶é—´æŸ¥çœ‹ï¼Œé‚£ä¹ˆæ‚¨åº”è¯¥è¦æ±‚å¼€å‘è€…å°† CL æ‹†åˆ†ä¸ºå‡ ä¸ªè¾ƒå°çš„ CL è€Œä¸æ˜¯ä¸€æ¬¡å®¡æŸ¥çš„ä¸€ä¸ªå·¨å¤§çš„ CLã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä»£ç å®¡æŸ¥éšæ—¶é—´æ¨ç§»è€Œæ”¹è¿›&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸è¦ä¸ºäº†æé«˜æƒ³è±¡ä¸­çš„ä»£ç å®¡æŸ¥é€Ÿåº¦ï¼Œè€Œåœ¨ä»£ç å®¡æŸ¥æ ‡å‡†æˆ–è´¨é‡æ–¹é¢å¦¥åï¼Œå®é™…ä¸Šè¿™æ ·åšå¯¹äºé•¿æœŸæ¥è¯´ä¸ä¼šæœ‰ä»»ä½•å¸®åŠ©ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç´§æ€¥æƒ…å†µ&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;CLå¿…é¡»éå¸¸å¿«é€Ÿåœ°é€šè¿‡æ•´ä¸ªå®¡æŸ¥æµç¨‹ï¼Œå¹¶ä¸”è´¨é‡å‡†åˆ™å°†æ”¾å®½ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç´§æ€¥ CL æ˜¯è¿™æ ·çš„å°æ›´æ–°ï¼šå…è®¸ä¸»è¦å‘å¸ƒç»§ç»­è€Œä¸æ˜¯å›æ»šï¼Œä¿®å¤æ˜¾è‘—å½±å“ç”¨æˆ·ç”Ÿäº§çš„é”™è¯¯ï¼Œå¤„ç†ç´§è¿«çš„æ³•å¾‹é—®é¢˜ï¼Œå…³é—­ä¸»è¦å®‰å…¨æ¼æ´ç­‰ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å¦‚ä½•æ’°å†™ Code Review è¯„è®º&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æ€»ç»“&lt;span/&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ä¿æŒå‹å–„ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è§£é‡Šä½ çš„æ¨ç†ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åœ¨ç»™å‡ºæ˜ç¡®çš„æŒ‡ç¤ºä¸åªæŒ‡å‡ºé—®é¢˜å¹¶è®©å¼€å‘äººå‘˜è‡ªå·±å†³å®šé—´åšå¥½å¹³è¡¡ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é¼“åŠ±å¼€å‘äººå‘˜ç®€åŒ–ä»£ç æˆ–æ·»åŠ ä»£ç æ³¨é‡Šï¼Œè€Œä¸ä»…ä»…æ˜¯å‘ä½ è§£é‡Šå¤æ‚æ€§ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç¤¼è²Œ&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸€èˆ¬è€Œè¨€ï¼Œå¯¹äºé‚£äº›æ­£åœ¨è¢«æ‚¨å®¡æŸ¥ä»£ç çš„äººï¼Œé™¤äº†ä¿æŒæœ‰ç¤¼è²Œä¸”å°Šé‡ä»¥å¤–ï¼Œé‡è¦çš„æ˜¯è¿˜è¦ç¡®ä¿æ‚¨ï¼ˆçš„è¯„è®ºï¼‰æ˜¯éå¸¸æ¸…æ¥šä¸”æœ‰å¸®åŠ©çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;ç³Ÿç³•çš„ç¤ºä¾‹&lt;/strong&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;ä¸ºä»€ä¹ˆè¿™é‡Œä½ ä½¿ç”¨äº†çº¿ç¨‹ï¼Œæ˜¾ç„¶å¹¶å‘å¹¶æ²¡æœ‰å¸¦æ¥ä»€ä¹ˆå¥½å¤„ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;strong&gt;å¥½çš„ç¤ºä¾‹&lt;/strong&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;è¿™é‡Œçš„å¹¶å‘æ¨¡å‹å¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œä½†æ²¡æœ‰ä»»ä½•å®é™…çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œå› ä¸ºæ²¡æœ‰æ€§èƒ½ä¼˜åŠ¿ï¼Œæœ€å¥½æ˜¯å°†è¿™äº›ä»£ç ä½œä¸ºå•çº¿ç¨‹å¤„ç†è€Œä¸æ˜¯ä½¿ç”¨å¤šçº¿ç¨‹ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;è§£é‡Šä¸ºä»€ä¹ˆ&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…³äºä¸Šé¢çš„â€œå¥½â€ç¤ºä¾‹ï¼Œæ‚¨ä¼šæ³¨æ„åˆ°çš„ä¸€ä»¶äº‹æ˜¯ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜ç†è§£æ‚¨å‘è¡¨è¯„è®ºçš„åŸå› ã€‚å¹¶ä¸æ€»æ˜¯éœ€è¦æ‚¨åœ¨å®¡æŸ¥è¯„è®ºä¸­åŒ…å«æ­¤ä¿¡æ¯ï¼Œä½†æœ‰æ—¶å€™æä¾›æ›´å¤šè§£é‡Šï¼Œå¯¹äºè¡¨æ˜æ‚¨çš„æ„å›¾ï¼Œæ‚¨åœ¨éµå¾ªçš„æœ€ä½³å®è·µï¼Œæˆ–ä¸ºæ‚¨å»ºè®®å¦‚ä½•æé«˜ä»£ç å¥åº·çŠ¶å†µæ˜¯ååˆ†æ°å½“çš„ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç»™äºˆæŒ‡å¯¼&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸€èˆ¬æ¥è¯´ï¼Œä¿®å¤ CL æ˜¯å¼€å‘äººå‘˜çš„è´£ä»»ï¼Œè€Œä¸æ˜¯å®¡æŸ¥è€…ã€‚æ‚¨æ— éœ€ä¸ºå¼€å‘äººå‘˜è¯¦ç»†è®¾è®¡è§£å†³æ–¹æ¡ˆæˆ–ç¼–å†™ä»£ç ã€‚ä½†è¿™å¹¶ä¸æ„å‘³ç€å®¡æŸ¥è€…åº”è¯¥æ²¡æœ‰å¸®åŠ©ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ‚¨åº”è¯¥åœ¨æŒ‡å‡ºé—®é¢˜å’Œæä¾›ç›´æ¥æŒ‡å¯¼ä¹‹é—´å–å¾—é€‚å½“çš„å¹³è¡¡ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æ¥å—è§£é‡Š&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæ‚¨è¦æ±‚å¼€å‘äººå‘˜è§£é‡Šä¸€æ®µæ‚¨ä¸ç†è§£çš„ä»£ç ï¼Œé‚£é€šå¸¸ä¼šå¯¼è‡´ä»–ä»¬æ›´æ¸…æ¥šåœ°é‡å†™ä»£ç ã€‚å¶å°”ï¼Œåœ¨ä»£ç ä¸­æ·»åŠ æ³¨é‡Šä¹Ÿæ˜¯ä¸€ç§æ°å½“çš„å“åº”ï¼Œåªè¦å®ƒä¸ä»…ä»…æ˜¯è§£é‡Šè¿‡äºå¤æ‚çš„ä»£ç ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å¤„ç† Code Review ä¸­çš„æ‹–å»¶&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰æ—¶å¼€å‘äººå‘˜ä¼šæ‹–å»¶ï¼ˆPushbackï¼‰ä»£ç å®¡æŸ¥ã€‚ä»–ä»¬è¦ä¹ˆä¸åŒæ„æ‚¨çš„å»ºè®®ï¼Œè¦ä¹ˆæŠ±æ€¨æ‚¨å¤ªä¸¥æ ¼ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;è°æ˜¯å¯¹çš„ï¼Ÿ&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“å¼€å‘äººå‘˜ä¸åŒæ„æ‚¨çš„å»ºè®®æ—¶ï¼Œè¯·å…ˆèŠ±ç‚¹æ—¶é—´è€ƒè™‘ä¸€ä¸‹æ˜¯å¦æ­£ç¡®ã€‚é€šå¸¸ï¼Œä»–ä»¬æ¯”ä½ æ›´æ¥è¿‘ä»£ç ï¼Œæ‰€ä»¥ä»–ä»¬å¯èƒ½çœŸçš„å¯¹å®ƒçš„æŸäº›æ–¹é¢æœ‰æ›´å¥½çš„æ´å¯ŸåŠ›ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰æ—¶éœ€è¦å‡ è½®è§£é‡Šä¸€ä¸ªå»ºè®®æ‰èƒ½æ‰èƒ½è®©å¯¹æ–¹çœŸæ­£ç†è§£ä½ çš„ç”¨æ„ã€‚åªè¦ç¡®ä¿å§‹ç»ˆä¿æŒç¤¼è²Œï¼Œè®©å¼€å‘äººå‘˜çŸ¥é“ä½ æœ‰å¬åˆ°ä»–ä»¬åœ¨è¯´ä»€ä¹ˆï¼Œåªæ˜¯ä½ ä¸åŒæ„è¯¥è®ºç‚¹è€Œå·²ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æ²®ä¸§çš„å¼€å‘è€…&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®¡æŸ¥è€…æœ‰æ—¶è®¤ä¸ºï¼Œå¦‚æœå®¡æŸ¥è€…äººåšæŒæ”¹è¿›ï¼Œå¼€å‘äººå‘˜ä¼šæ„Ÿåˆ°ä¸å®‰ã€‚æœ‰æ—¶å€™å¼€å‘äººå‘˜ä¼šæ„Ÿåˆ°å¾ˆæ²®ä¸§ï¼Œä½†è¿™æ ·çš„æ„Ÿè§‰é€šå¸¸åªä¼šæŒç»­å¾ˆçŸ­çš„æ—¶é—´ï¼Œåæ¥ä»–ä»¬ä¼šéå¸¸æ„Ÿè°¢æ‚¨åœ¨æé«˜ä»£ç è´¨é‡æ–¹é¢ç»™ä»–ä»¬çš„å¸®åŠ©ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœæ‚¨åœ¨è¯„è®ºä¸­è¡¨ç°å¾—å¾ˆæœ‰ç¤¼è²Œï¼Œå¼€å‘äººå‘˜å®é™…ä¸Šæ ¹æœ¬ä¸ä¼šæ„Ÿåˆ°æ²®ä¸§ï¼Œè¿™äº›æ‹…å¿§éƒ½ä»…å­˜åœ¨äºå®¡æ ¸è€…å¿ƒä¸­è€Œå·²ã€‚å¼€å‘è€…æ„Ÿåˆ°æ²®ä¸§é€šå¸¸æ›´å¤šåœ°ä¸è¯„è®ºçš„å†™ä½œæ–¹å¼æœ‰å…³ï¼Œè€Œä¸æ˜¯å®¡æŸ¥è€…å¯¹ä»£ç è´¨é‡çš„åšæŒã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç¨åæ¸…ç†&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»éªŒè¡¨æ˜ï¼Œåœ¨å¼€å‘äººå‘˜ç¼–å†™åŸå§‹ CL åï¼Œç»è¿‡è¶Šé•¿çš„æ—¶é—´è¿™ç§æ¸…ç†å‘ç”Ÿçš„å¯èƒ½æ€§å°±è¶Šå°ã€‚å®é™…ä¸Šï¼Œé€šå¸¸é™¤éå¼€å‘äººå‘˜åœ¨å½“å‰ CL ä¹‹åç«‹å³è¿›è¡Œæ¸…ç†ï¼Œå¦åˆ™å®ƒå°±æ°¸è¿œä¸ä¼šå‘ç”Ÿã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å› æ­¤ï¼Œåœ¨ä»£ç è¿›å…¥ä»£ç åº“å¹¶â€œå®Œæˆâ€ä¹‹å‰ï¼Œé€šå¸¸æœ€å¥½åšæŒè®©å¼€å‘äººå‘˜ç°åœ¨æ¸…ç†ä»–ä»¬çš„ CLã€‚è®©äººä»¬â€œç¨åæ¸…ç†ä¸œè¥¿â€æ˜¯ä»£ç åº“è´¨é‡é€€åŒ–çš„å¸¸è§åŸå› ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœ CL å¼•å…¥äº†æ–°çš„å¤æ‚æ€§ï¼Œé™¤éæ˜¯ç´§æ€¥æƒ…å†µï¼Œå¦åˆ™å¿…é¡»åœ¨æäº¤ä¹‹å‰å°†å…¶æ¸…é™¤ã€‚å¦‚æœ CL æš´éœ²äº†ç›¸å…³çš„é—®é¢˜å¹¶ä¸”ç°åœ¨æ— æ³•è§£å†³ï¼Œé‚£ä¹ˆå¼€å‘äººå‘˜åº”è¯¥å°† bug è®°å½•ä¸‹æ¥å¹¶åˆ†é…ç»™è‡ªå·±ï¼Œé¿å…åç»­è¢«é—å¿˜ã€‚åˆæˆ–è€…ä»–ä»¬å¯ä»¥é€‰æ‹©åœ¨ç¨‹åºä¸­ç•™ä¸‹ TODO çš„æ³¨é‡Šå¹¶è¿ç»“åˆ°åˆšè®°å½•ä¸‹çš„ bugã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å…³äºä¸¥æ ¼æ€§çš„æŠ±æ€¨&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæ‚¨ä»¥å‰æœ‰ç›¸å½“å®½æ¾çš„ä»£ç å®¡æŸ¥ï¼Œå¹¶è½¬è€Œè¿›è¡Œä¸¥æ ¼çš„å®¡æŸ¥ï¼Œä¸€äº›å¼€å‘äººå‘˜ä¼šæŠ±æ€¨å¾—éå¸¸å¤§å£°ã€‚é€šå¸¸æé«˜ä»£ç å®¡æŸ¥çš„é€Ÿåº¦ä¼šè®©è¿™äº›æŠ±æ€¨é€æ¸æ¶ˆå¤±ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰æ—¶ï¼Œè¿™äº›æŠ•è¯‰å¯èƒ½éœ€è¦æ•°æœˆæ‰ä¼šæ¶ˆå¤±ï¼Œä½†æœ€ç»ˆå¼€å‘äººå‘˜å¾€å¾€ä¼šçœ‹åˆ°ä¸¥æ ¼çš„ä»£ç å®¡æŸ¥çš„ä»·å€¼ï¼Œå› ä¸ºä»–ä»¬ä¼šçœ‹åˆ°ä»£ç å®¡æŸ¥å¸®åŠ©ç”Ÿæˆçš„ä¼˜ç§€ä»£ç ã€‚è€Œä¸”ä¸€æ—¦å‘ç”ŸæŸäº›äº‹æƒ…æ—¶ï¼Œæœ€å“äº®çš„æŠ—è®®è€…ç”šè‡³å¯èƒ½ä¼šæˆä¸ºä½ æœ€åšå®šçš„æ”¯æŒè€…ï¼Œå› ä¸ºä»–ä»¬ä¼šçœ‹åˆ°å®¡æ ¸å˜ä¸¥æ ¼åæ‰€å¸¦æ¥çš„ä»·å€¼ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;è§£å†³å†²çª&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœä¸Šè¿°æ‰€æœ‰æ“ä½œä»æ— æ³•è§£å†³æ‚¨ä¸å¼€å‘äººå‘˜ä¹‹é—´çš„å†²çªï¼Œè¯·å‚é˜… â€œCode Review æ ‡å‡†â€ä»¥è·å–æœ‰åŠ©äºè§£å†³å†²çªçš„æŒ‡å¯¼å’ŒåŸåˆ™ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ä»£ç å¼€å‘è€…æŒ‡å—&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å†™å¥½ CL æè¿°&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;CL æè¿°æ˜¯è¿›è¡Œäº†å“ªäº›æ›´æ”¹ä»¥åŠä¸ºä½•æ›´æ”¹çš„å…¬å¼€è®°å½•ã€‚CL å°†ä½œä¸ºç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿä¸­çš„æ°¸ä¹…è®°å½•ï¼Œå¯èƒ½ä¼šåœ¨é•¿æ—¶æœŸå†…è¢«é™¤å®¡æŸ¥è€…ä¹‹å¤–çš„æ•°ç™¾äººé˜…è¯»ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é¦–è¡Œ&lt;span/&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;æ­£åœ¨åšä»€ä¹ˆçš„ç®€çŸ­æ‘˜è¦ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å®Œæ•´çš„å¥å­ï¼Œä½¿ç”¨ç¥ˆä½¿å¥ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åé¢è·Ÿä¸€ä¸ªç©ºè¡Œã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Body æ˜¯ä¿¡æ¯ä¸°å¯Œçš„&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä½™æè¿°åº”è¯¥æ˜¯æä¾›ä¿¡æ¯çš„ã€‚å¯èƒ½åŒ…æ‹¬å¯¹æ­£åœ¨è§£å†³çš„é—®é¢˜çš„ç®€è¦æè¿°ï¼Œä»¥åŠä¸ºä»€ä¹ˆè¿™æ˜¯æœ€å¥½çš„æ–¹æ³•ã€‚å¦‚æœæ–¹æ³•æœ‰ä»»ä½•ç¼ºç‚¹ï¼Œåº”è¯¥æåˆ°å®ƒä»¬ã€‚å¦‚æœç›¸å…³ï¼Œè¯·åŒ…æ‹¬èƒŒæ™¯ä¿¡æ¯ï¼Œä¾‹å¦‚é”™è¯¯ç¼–å·ï¼ŒåŸºå‡†æµ‹è¯•ç»“æœä»¥åŠè®¾è®¡æ–‡æ¡£çš„é“¾æ¥ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å³ä½¿æ˜¯å°å‹ CL ä¹Ÿéœ€è¦æ³¨æ„ç»†èŠ‚ã€‚åœ¨ CL æè¿°ä¸­æä¾›ä¸Šä¸‹æ–‡ä»¥ä¾›å‚ç…§ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç³Ÿç³•çš„ CL æè¿°&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;â€œFix bug â€æ˜¯ä¸€ä¸ªä¸å……åˆ†çš„ CL æè¿°ã€‚ä»€ä¹ˆ bugï¼Ÿä½ åšäº†ä»€ä¹ˆä¿®å¤ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä»–ç±»ä¼¼çš„ä¸è‰¯æè¿°åŒ…æ‹¬ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;â€œFix build.â€&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;â€œAdd patch.â€&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;â€œMoving code from A to B.â€&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;â€œPhase 1.â€&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;â€œAdd convenience functions.â€&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;â€œkill weird URLs.â€&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­ä¸€äº›æ˜¯çœŸæ­£çš„ CL æè¿°ã€‚ä»–ä»¬çš„ä½œè€…å¯èƒ½è®¤ä¸ºè‡ªå·±æä¾›äº†æœ‰ç”¨çš„ä¿¡æ¯ï¼Œå´æ²¡æœ‰è¾¾åˆ° CL æè¿°çš„ç›®çš„ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å¥½çš„ CL æè¿°&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»¥ä¸‹æ˜¯ä¸€äº›å¾ˆå¥½çš„æè¿°ç¤ºä¾‹ã€‚&lt;/p&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;åŠŸèƒ½å˜åŒ–ä¾‹å­ï¼š&lt;span/&gt;&lt;/h5&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;rpcï¼šåˆ é™¤ RPC æœåŠ¡å™¨æ¶ˆæ¯ç©ºé—²åˆ—è¡¨çš„å¤§å°é™åˆ¶ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åƒ FizzBuzz è¿™æ ·çš„æœåŠ¡å™¨æœ‰éå¸¸å¤§çš„æ¶ˆæ¯ï¼Œå¹¶ä¸”å¯ä»¥ä»é‡ç”¨ä¸­å—ç›Šã€‚ä½¿ freelist æ›´å¤§ï¼Œå¹¶æ·»åŠ ä¸€ä¸ª goroutineï¼Œéšç€æ—¶é—´çš„æ¨ç§»ç¼“æ…¢é‡Šæ”¾ freelist æ¡ç›®ï¼Œä»¥ä¾¿ç©ºé—²æœåŠ¡å™¨æœ€ç»ˆé‡Šæ”¾æ‰€æœ‰ freelist æ¡ç›®ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‰å‡ ä¸ªè¯æè¿°äº† CL çš„å®é™…ä½œç”¨ã€‚æè¿°çš„å…¶ä½™éƒ¨åˆ†è®¨è®ºäº†æ­£åœ¨è§£å†³çš„é—®é¢˜ï¼Œä¸ºä»€ä¹ˆè¿™æ˜¯ä¸€ä¸ªå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œä»¥åŠæœ‰å…³å…·ä½“å®ç°çš„æ›´å¤šä¿¡æ¯ã€‚&lt;/p&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é‡æ„ä¾‹å­ï¼š&lt;span/&gt;&lt;/h5&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ä½¿ç”¨ TimeKeeper æ„é€ ä¸€ä¸ª Task ä»¥ä½¿ç”¨å…¶ TimeStr å’Œ Now æ–¹æ³•ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ç»™Taskæ·»åŠ ä¸€ä¸ªNowæ–¹æ³•ï¼Œè¿™æ ·borglet()çš„getteræ–¹æ³•å°±å¯ä»¥è¢«ç§»é™¤äº†ï¼ˆå®ƒåªè¢«OOMCandidateç”¨æ¥è°ƒç”¨borgletçš„Nowæ–¹æ³•ï¼‰ã€‚è¿™æ›¿æ¢äº† Borglet ä¸Šå§”æ‰˜ç»™ TimeKeeper çš„æ–¹æ³•ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å…è®¸ Tasks æä¾› Now æ˜¯æ¶ˆé™¤å¯¹ Borglet ä¾èµ–çš„ä¸€æ­¥ã€‚æœ€ç»ˆï¼Œä¾èµ–äºä» Task è·å– Now çš„åä½œè€…åº”
è¯¥æ”¹ä¸ºç›´æ¥ä½¿ç”¨ TimeKeeperï¼Œä½†è¿™æ˜¯å¯¹å°æ­¥éª¤é‡æ„çš„ä¸€ç§é€‚åº”ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ç»§ç»­é‡æ„ Borglet Hierarchy çš„é•¿æœŸç›®æ ‡ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¬¬ä¸€è¡Œæè¿°äº† CL çš„ä½œç”¨ä»¥åŠä¸è¿‡å»ç›¸æ¯”çš„å˜åŒ–ã€‚æè¿°çš„å…¶ä½™éƒ¨åˆ†è®¨è®ºäº†å…·ä½“çš„å®ç°ã€CL çš„ä¸Šä¸‹æ–‡ã€è§£å†³æ–¹æ¡ˆå¹¶ä¸ç†æƒ³ä»¥åŠå¯èƒ½çš„æœªæ¥æ–¹å‘ã€‚å®ƒè¿˜è§£é‡Šäº†ä¸ºä»€ä¹ˆè¦è¿›è¡Œè¿™ç§æ›´æ”¹ã€‚&lt;/p&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;éœ€è¦ä¸€äº›ä¸Šä¸‹æ–‡çš„å°å‹ CLä¾‹å­ï¼š&lt;span/&gt;&lt;/h5&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ä¸º status.py åˆ›å»ºä¸€ä¸ª Python3 æ„å»ºè§„åˆ™ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¿™å…è®¸å·²ç»åœ¨ Python3 ä¸­ä½¿ç”¨å®ƒçš„æ¶ˆè´¹è€…ä¾èµ–äºåŸå§‹çŠ¶æ€æ„å»ºè§„åˆ™æ—è¾¹çš„è§„åˆ™ï¼Œè€Œä¸æ˜¯ä»–ä»¬è‡ªå·±æ ‘ä¸­çš„æŸä¸ªä½ç½®ã€‚å®ƒé¼“åŠ±æ–°æ¶ˆè´¹è€…å°½å¯èƒ½ä½¿ç”¨ Python3ï¼Œè€Œä¸æ˜¯ Python2ï¼Œå¹¶æ˜¾ç€ç®€åŒ–å½“å‰æ­£åœ¨å¼€å‘çš„ä¸€äº›è‡ªåŠ¨æ„å»ºæ–‡ä»¶é‡æ„å·¥å…·ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¬¬ä¸€å¥è¯æè¿°äº†å®é™…æ­£åœ¨åšçš„äº‹æƒ…ã€‚æè¿°çš„å…¶ä½™éƒ¨åˆ†è§£é‡Šäº†ä¸ºä»€ä¹ˆè¦è¿›è¡Œæ›´æ”¹ï¼Œå¹¶ä¸ºå®¡é˜…è€…æä¾›äº†å¾ˆå¤šèƒŒæ™¯ä¿¡æ¯ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å°å‹ CL&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¸ºä»€ä¹ˆæäº¤å°å‹ CL?&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°ä¸”ç®€å•çš„ CL æ˜¯æŒ‡ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;å®¡æŸ¥æ›´å¿«&lt;/strong&gt;ã€‚å®¡æŸ¥è€…æ›´å®¹æ˜“æŠ½å¤šæ¬¡äº”åˆ†é’Ÿæ—¶é—´æ¥å®¡æŸ¥å°å‹ CLï¼Œè€Œä¸æ˜¯ç•™å‡º 30 åˆ†é’Ÿæ¥å®¡æŸ¥ä¸€ä¸ªå¤§å‹ CLã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;å®¡æŸ¥å¾—æ›´å½»åº•&lt;/strong&gt;ã€‚å¦‚æœæ˜¯å¤§çš„å˜æ›´ï¼Œå®¡æŸ¥è€…å’Œæäº¤è€…å¾€å¾€ä¼šå› ä¸ºå¤§é‡ç»†èŠ‚çš„è®¨è®ºç¿»æ¥è¦†å»è€Œæ„Ÿåˆ°æ²®ä¸§â€”â€”æœ‰æ—¶ç”šè‡³åˆ°äº†é‡è¦ç‚¹è¢«é—æ¼æˆ–ä¸¢å¤±çš„ç¨‹åº¦ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;ä¸å¤ªå¯èƒ½å¼•å…¥é”™è¯¯&lt;/strong&gt;ã€‚ç”±äºæ‚¨è¿›è¡Œçš„å˜æ›´è¾ƒå°‘ï¼Œæ‚¨å’Œæ‚¨çš„å®¡æŸ¥è€…å¯ä»¥æ›´è½»æ¾æœ‰æ•ˆåœ°æ¨æ–­ CL çš„å½±å“ï¼Œå¹¶æŸ¥çœ‹æ˜¯å¦å·²å¼•å…¥é”™è¯¯ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;å¦‚æœè¢«æ‹’ç»ï¼Œå‡å°‘æµªè´¹çš„å·¥ä½œ&lt;/strong&gt;ã€‚å¦‚æœæ‚¨å†™äº†ä¸€ä¸ªå·¨å¤§çš„ CLï¼Œæ‚¨çš„è¯„è®ºè€…è¯´æ•´ä¸ª CL çš„æ–¹å‘éƒ½é”™è¯¯äº†ï¼Œä½ å°±æµªè´¹äº†å¾ˆå¤šç²¾åŠ›å’Œæ—¶é—´ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;æ›´å®¹æ˜“åˆå¹¶&lt;/strong&gt;ã€‚å¤„ç†å¤§å‹ CL éœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œåœ¨åˆå¹¶æ—¶ä¼šå‡ºç°å¾ˆå¤šå†²çªï¼Œå¹¶ä¸”å¿…é¡»ç»å¸¸åˆå¹¶ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;æ›´å®¹æ˜“è®¾è®¡å¥½&lt;/strong&gt;ã€‚æ‰“ç£¨ä¸€ä¸ªå°å˜æ›´çš„è®¾è®¡å’Œä»£ç å¥åº·çŠ¶å†µæ¯”å®Œå–„ä¸€ä¸ªå¤§å˜æ›´çš„æ‰€æœ‰ç»†èŠ‚è¦å®¹æ˜“å¾—å¤šã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;å‡å°‘å¯¹å®¡æŸ¥çš„é˜»ç¢&lt;/strong&gt;ã€‚å‘é€æ•´ä½“å˜æ›´çš„è‡ªåŒ…å«éƒ¨åˆ†å¯è®©æ‚¨åœ¨ç­‰å¾…å½“å‰ CL å®¡æ ¸æ—¶ç»§ç»­ç¼–ç ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;æ›´ç®€å•çš„å›æ»š&lt;/strong&gt;ã€‚å¤§å‹ CL æ›´æœ‰å¯èƒ½è§¦åŠåœ¨åˆå§‹ CL æäº¤å’Œå›æ»š CL ä¹‹é—´æ›´æ–°çš„æ–‡ä»¶ï¼Œä»è€Œä½¿å›æ»šå˜å¾—å¤æ‚ï¼ˆä¸­é—´çš„ CL ä¹Ÿå¯èƒ½éœ€è¦å›æ»šï¼‰ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä»€ä¹ˆæ˜¯å°å‹ CLï¼Ÿ&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸€èˆ¬æ¥è¯´ï¼ŒCL çš„æ­£ç¡®å¤§å°æ˜¯è‡ªåŒ…å«çš„å˜æ›´ã€‚è¿™æ„å‘³ç€ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;CL è¿›è¡Œäº†ä¸€é¡¹æœ€å°çš„å˜æ›´ï¼Œåªè§£å†³äº†ä¸€ä»¶äº‹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å®¡æŸ¥è€…éœ€è¦äº†è§£çš„å…³äº CL çš„æ‰€æœ‰å†…å®¹ï¼ˆé™¤äº†æœªæ¥çš„å¼€å‘ï¼‰éƒ½åœ¨ CL çš„æè¿°ã€ç°æœ‰çš„ä»£ç åº“æˆ–å·²ç»å®¡æŸ¥è¿‡çš„ CL ä¸­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¯¹å…¶ç”¨æˆ·å’Œå¼€å‘è€…æ¥è¯´ï¼Œåœ¨ç­¾å…¥ CL åç³»ç»Ÿèƒ½ç»§ç»­è‰¯å¥½çš„å·¥ä½œã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;CL ä¸ä¼šè¿‡å°ä»¥è‡´äºå…¶å«ä¹‰éš¾ä»¥ç†è§£ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…³äºå¤šå¤§ç®—â€œå¤ªå¤§â€æ²¡æœ‰ä¸¥æ ¼çš„è§„åˆ™ã€‚å¯¹äº CL æ¥è¯´ï¼Œ100 è¡Œé€šå¸¸æ˜¯åˆç†çš„å¤§å°ï¼Œ1000 è¡Œé€šå¸¸å¤ªå¤§ï¼Œä½†è¿™å–å†³äºæ‚¨çš„å®¡æŸ¥è€…çš„åˆ¤æ–­ã€‚å˜æ›´ä¸­åŒ…å«çš„æ–‡ä»¶æ•°ä¹Ÿä¼šå½±å“å…¶â€œå¤§å°â€ã€‚ä¸€ä¸ªæ–‡ä»¶ä¸­çš„ 200 è¡Œå˜æ›´å¯èƒ½æ²¡é—®é¢˜ï¼Œä½†æ˜¯åˆ†å¸ƒåœ¨ 50 ä¸ªæ–‡ä»¶ä¸­é€šå¸¸ä¼šå¤ªå¤§ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä»€ä¹ˆæ—¶å€™å¤§ CL æ˜¯å¯ä»¥çš„ï¼Ÿ&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¤§å˜æ›´ä¹Ÿæ˜¯å¯ä»¥æ¥å—çš„ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;æ‚¨é€šå¸¸å¯ä»¥å°†æ•´ä¸ªæ–‡ä»¶çš„åˆ é™¤è§†ä¸ºä¸€è¡Œå˜æ›´ï¼Œå› ä¸ºå®¡æ ¸äººå‘˜ä¸éœ€è¦å¾ˆé•¿æ—¶é—´å®¡æ ¸ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœ‰æ—¶ä¸€ä¸ªå¤§çš„ CL æ˜¯ç”±æ‚¨å®Œå…¨ä¿¡ä»»çš„è‡ªåŠ¨é‡æ„å·¥å…·ç”Ÿæˆçš„ï¼Œè€Œå®¡æŸ¥è€…çš„å·¥ä½œåªæ˜¯æ£€æŸ¥å¹¶ç¡®å®šæƒ³è¦è¿™æ ·çš„å˜æ›´ã€‚ä½†è¿™äº› CL å¯ä»¥æ›´å¤§ï¼Œå°½ç®¡ä¸Šé¢çš„ä¸€äº›è­¦å‘Šï¼ˆä¾‹å¦‚åˆå¹¶å’Œæµ‹è¯•ï¼‰ä»ç„¶é€‚ç”¨ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;åˆ†ç¦»å‡ºé‡æ„&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šå¸¸æœ€å¥½åœ¨åŠŸèƒ½å˜æ›´æˆ–é”™è¯¯ä¿®å¤çš„å•ç‹¬ CL ä¸­è¿›è¡Œé‡æ„ã€‚ä¾‹å¦‚ï¼Œç§»åŠ¨å’Œé‡å‘½åç±»åº”è¯¥ä¸ä¿®å¤è¯¥ç±»ä¸­çš„é”™è¯¯çš„ CL ä¸åŒã€‚å®¡æŸ¥è€…æ›´å®¹æ˜“ç†è§£æ¯ä¸ª CL åœ¨å•ç‹¬æ—¶å¼•å…¥çš„æ›´æ”¹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯ï¼Œä¿®å¤æœ¬åœ°å˜é‡åç§°ç­‰å°æ¸…ç†å¯ä»¥åŒ…å«åœ¨åŠŸèƒ½å˜æ›´æˆ–é”™è¯¯ä¿®å¤ CL ä¸­ã€‚å¦‚æœé‡æ„å¤§åˆ°åŒ…å«åœ¨æ‚¨å½“å‰çš„ CL ä¸­ï¼Œä¼šä½¿å®¡æŸ¥æ›´åŠ å›°éš¾çš„è¯ï¼Œéœ€è¦å¼€å‘è€…å’Œå®¡æŸ¥è€…ä¸€èµ·åˆ¤æ–­æ˜¯å¦å°†å…¶æ‹†å¼€ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å°†ç›¸å…³çš„æµ‹è¯•ä»£ç ä¿å­˜åœ¨åŒä¸€ä¸ª CL ä¸­&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é¿å…å°†æµ‹è¯•ä»£ç æ‹†åˆ†ä¸ºå•ç‹¬çš„ CLã€‚éªŒè¯ä»£ç ä¿®æ”¹çš„æµ‹è¯•åº”è¯¥è¿›å…¥ç›¸åŒçš„ CLï¼Œå³ä½¿å®ƒå¢åŠ äº†ä»£ç è¡Œæ•°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯ï¼Œç‹¬ç«‹çš„æµ‹è¯•ä¿®æ”¹å¯ä»¥é¦–å…ˆè¿›å…¥å•ç‹¬çš„ CLï¼Œç±»ä¼¼äºé‡æ„æŒ‡å—ã€‚åŒ…æ‹¬ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ä½¿ç”¨æ–°æµ‹è¯•éªŒè¯é¢„å…ˆå­˜åœ¨çš„å·²æäº¤ä»£ç ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é‡æ„æµ‹è¯•ä»£ç ï¼ˆä¾‹å¦‚å¼•å…¥è¾…åŠ©å‡½æ•°ï¼‰ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¼•å…¥æ›´å¤§çš„æµ‹è¯•æ¡†æ¶ä»£ç ï¼ˆä¾‹å¦‚é›†æˆæµ‹è¯•ï¼‰ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¸è¦ç ´åæ„å»º&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæ‚¨æœ‰å‡ ä¸ªç›¸äº’ä¾èµ–çš„ CLï¼Œæ‚¨éœ€è¦æ‰¾åˆ°ä¸€ç§æ–¹æ³•æ¥ç¡®ä¿åœ¨æ¯æ¬¡æäº¤ CL åæ•´ä¸ªç³»ç»Ÿèƒ½å¤Ÿç»§ç»­è¿ä½œã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å¦‚æœä¸èƒ½è®©å®ƒè¶³å¤Ÿå°&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰æ—¶ä½ ä¼šé‡åˆ°çœ‹èµ·æ¥æ‚¨çš„ CL å¿…é¡»å¦‚æ­¤åºå¤§ï¼Œä½†è¿™é€šå¸¸å¾ˆå°‘æ˜¯æ­£ç¡®çš„ã€‚ä¹ æƒ¯äºç¼–å†™å°å‹ CL çš„æäº¤è€…å‡ ä¹æ€»èƒ½æ‰¾åˆ°å°†åŠŸèƒ½åˆ†è§£ä¸ºä¸€ç³»åˆ—å°å˜æ›´çš„æ–¹æ³•ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ç¼–å†™å¤§å‹ CL ä¹‹å‰ï¼Œè¯·è€ƒè™‘åœ¨é‡æ„ CL ä¹‹å‰æ˜¯å¦å¯ä»¥ä¸ºæ›´æ¸…æ™°çš„å®ç°é“ºå¹³é“è·¯ã€‚ä¸ä½ çš„åŒä¼´èŠèŠï¼Œçœ‹çœ‹æ˜¯å¦æœ‰äººæƒ³è¿‡å¦‚ä½•åœ¨å°å‹ CL ä¸­å®ç°è¿™äº›åŠŸèƒ½ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœä»¥ä¸Šçš„åŠªåŠ›éƒ½å¤±è´¥äº†ï¼ˆè¿™åº”è¯¥æ˜¯éå¸¸ç½•è§çš„ï¼‰ï¼Œé‚£ä¹ˆè¯·åœ¨äº‹å…ˆå¾å¾—å®¡æŸ¥è€…çš„åŒæ„åæäº¤å¤§å‹ CLï¼Œä»¥ä¾¿ä»–ä»¬æ”¶åˆ°æœ‰å…³å³å°†å‘ç”Ÿçš„äº‹æƒ…çš„è­¦å‘Šã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å¦‚ä½•å¤„ç†å®¡æŸ¥è€…çš„è¯„è®º&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“æ‚¨å‘é€ CL è¿›è¡Œå®¡æŸ¥æ—¶ï¼Œæ‚¨çš„å®¡æŸ¥è€…å¯èƒ½ä¼šå¯¹æ‚¨çš„ CL å‘è¡¨ä¸€äº›è¯„è®ºã€‚ä»¥ä¸‹æ˜¯å¤„ç†å®¡æŸ¥è€…è¯„è®ºçš„ä¸€äº›æœ‰ç”¨ä¿¡æ¯ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¸æ˜¯é’ˆå¯¹æ‚¨&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®¡æŸ¥çš„ç›®æ ‡æ˜¯ä¿æŒä»£ç åº“å’Œäº§å“çš„è´¨é‡ã€‚å½“å®¡æŸ¥è€…å¯¹æ‚¨çš„ä»£ç æå‡ºæ‰¹è¯„æ—¶ï¼Œè¯·å°†å…¶è§†ä¸ºåœ¨å¸®åŠ©æ‚¨ã€ä»£ç åº“ï¼Œè€Œä¸æ˜¯å¯¹æ‚¨æˆ–æ‚¨çš„èƒ½åŠ›çš„ä¸ªäººæ”»å‡»ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ°¸è¿œä¸è¦æ„¤æ€’åœ°å›åº”ä»£ç å®¡æŸ¥è¯„è®ºã€‚è¿™ä¸¥é‡è¿åäº†ä¸“ä¸šç¤¼ä»ªä¸”å°†æ°¸è¿œå­˜åœ¨äºä»£ç å®¡æŸ¥å·¥å…·ä¸­ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¿®å¤ä»£ç &lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœå®¡æŸ¥è€…è¯´ä»–ä»¬ä¸äº†è§£æ‚¨çš„ä»£ç ä¸­çš„æŸäº›å†…å®¹ï¼Œé‚£ä¹ˆæ‚¨çš„ç¬¬ä¸€ååº”åº”è¯¥æ˜¯æ¾„æ¸…ä»£ç æœ¬èº«ã€‚å¦‚æœæ— æ³•æ¾„æ¸…ä»£ç ï¼Œè¯·æ·»åŠ ä»£ç æ³¨é‡Šï¼Œä»¥è§£é‡Šä»£ç å­˜åœ¨çš„åŸå› ã€‚åªæœ‰åœ¨æƒ³å¢åŠ çš„æ³¨é‡Šçœ‹èµ·æ¥æ¯«æ— æ„ä¹‰æ—¶ï¼Œæ‚¨æ‰èƒ½åœ¨ä»£ç å®¡æŸ¥å·¥å…·ä¸­è¿›è¡Œå›å¤ä¸è§£é‡Šã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœå®¡æŸ¥è€…ä¸ç†è§£æ‚¨çš„æŸäº›ä»£ç ï¼Œé‚£ä¹ˆä»£ç çš„æœªæ¥è¯»è€…å¯èƒ½ä¹Ÿä¸ä¼šç†è§£ã€‚åœ¨ä»£ç å®¡æŸ¥å·¥å…·ä¸­å›å¤å¯¹æœªæ¥çš„ä»£ç è¯»è€…æ²¡æœ‰å¸®åŠ©ï¼Œä½†æ¾„æ¸…ä»£ç æˆ–æ·»åŠ ä»£ç æ³¨é‡Šç¡®å¯ä»¥å®å®åœ¨åœ¨å¾—å¸®åŠ©ä»–ä»¬ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;è‡ªæˆ‘åæ€&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¼–å†™ CL å¯èƒ½éœ€è¦åšå¾ˆå¤šå·¥ä½œã€‚åœ¨ç»ˆäºå‘é€ä¸€ä¸ª CL ç”¨äºå®¡æŸ¥åï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæ„Ÿåˆ°æ»¡è¶³çš„ï¼Œè®¤ä¸ºå®ƒå·²ç»å®Œæˆï¼Œå¹¶ä¸”éå¸¸ç¡®å®šä¸éœ€è¦è¿›ä¸€æ­¥çš„å·¥ä½œã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é€šå¸¸æ˜¯ä»¤äººæ»¡æ„çš„ã€‚å› æ­¤ï¼Œå½“å®¡æŸ¥è€…å›å¤å¯¹å¯ä»¥æ”¹è¿›çš„äº‹æƒ…çš„è¯„è®ºæ—¶ï¼Œå¾ˆå®¹æ˜“æœ¬èƒ½åœ°è®¤ä¸ºè¯„è®ºæ˜¯é”™è¯¯çš„ï¼Œå®¡æŸ¥è€…æ­£åœ¨ä¸å¿…è¦åœ°é˜»æ­¢æ‚¨ï¼Œæˆ–è€…ä»–ä»¬åº”è¯¥è®©æ‚¨æäº¤ CLã€‚ä½†æ˜¯ï¼Œæ— è®ºæ‚¨ç›®å‰å¤šä¹ˆç¡®å®šï¼Œè¯·èŠ±ä¸€ç‚¹æ—¶é—´é€€ä¸€æ­¥ï¼Œè€ƒè™‘å®¡æŸ¥è€…æ˜¯å¦æä¾›æœ‰åŠ©äºå¯¹ä»£ç åº“å’Œå…¬å¸æœ‰ä»·å€¼çš„åé¦ˆã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;è§£å†³å†²çª&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è§£å†³å†²çªçš„ç¬¬ä¸€æ­¥åº”è¯¥æ˜¯å°è¯•ä¸å®¡æŸ¥è€…è¾¾æˆå…±è¯†ã€‚å¦‚æœæ‚¨æ— æ³•è¾¾æˆå…±è¯†ï¼Œè¯·å‚é˜…â€œä»£ç å®¡æŸ¥æ ‡å‡†â€ï¼Œè¯¥æ ‡å‡†æä¾›äº†åœ¨è¿™ç§æƒ…å†µä¸‹éµå¾ªçš„åŸåˆ™ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ä»£ç å®¡æŸ¥è€…è§†è§’&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ä»¥åˆ¶å®šå®¡æ ¸æ ‡å‡†ä¸ºå‰æï¼Œå°½å¯èƒ½å¿«é€Ÿã€åŠæ—¶çš„åé¦ˆä»£ç å¼€å‘è€…çš„åˆå¹¶è¯·æ±‚ã€‚&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å¯¹äºè¯„è®ºè¦ä¿æŒå‹å–„ã€æä¾›å¼•å¯¼ï¼Œä»¥æœ€ç»ˆä»£ç è´¨é‡ã€å…¬å¸ä»·å€¼ä¸ºå¯¼å‘ã€‚&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;åšå¥½æ²Ÿé€šï¼Œæœ‰ç–‘é—®åŠæ—¶æ²Ÿé€šã€æ¥å—è§£é‡Šã€‚&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ä»£ç å¼€å‘è€…è§†è§’&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å†™å¥½CLçš„æè¿°ã€‚&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æä¾›å°çš„CLã€ç›¸å…³æµ‹è¯•ä»£ç ä¸åˆ†ç¦»ã€é‡æ„ä»£ç åˆ†ç¦»ã€ä¸ç ´åæ„å»ºã€‚&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ä»¥ä»£ç è´¨é‡ã€å…¬å¸ä»·å€¼ä¸ºç»“æœå¯¼å‘ï¼ŒåŠæ—¶ä¿®å¤ã€åšå¥½æ²Ÿé€šã€‚&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å‚è€ƒèµ„æ–™&lt;/span&gt;&lt;/h3&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;span&gt;[1]&lt;/span&gt;&lt;p&gt;ã€Šè°·æ­Œå·¥ç¨‹å®è·µã€‹: &lt;em&gt;https://jimmysong.io/eng-practices/&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[2]&lt;/span&gt;&lt;p&gt;ã€ŠGoogle Engineering Practices Documentation
ã€‹: &lt;em&gt;https://github.com/google/eng-practices&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[3]&lt;/span&gt;&lt;p&gt;Git å›¢é˜Ÿåä½œå¸¸ç”¨æœ¯è¯­: &lt;em&gt;https://blog.csdn.net/qq_15988951/article/details/108331701&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[4]&lt;/span&gt;&lt;p&gt;LGTM : code review è¡Œè¯: &lt;em&gt;&quot;https://blog.csdn.net/weixin_41287260/article/details/108676433&quot;&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[5]&lt;/span&gt;&lt;p&gt;ã€ŠGoogle Style Guidesã€‹: &lt;em&gt;https://google.github.io/styleguide/&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>