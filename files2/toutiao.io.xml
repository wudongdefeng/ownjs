<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>12bc28e0023e40f8a4ca87c4ff851f83</guid>
<title>Springboot+WebSocket å®ç°IMåŠæ—¶é€šè®¯</title>
<link>https://toutiao.io/k/yxpbsc7</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;é¡¹ç›®ä¸­ç¢°åˆ°éœ€è¦åŠæ—¶é€šè®¯çš„åœºæ™¯ï¼Œä½¿ç”¨springbooté›†æˆwebsocketï¼Œå³å¯å®ç°ç®€å•çš„åŠæ—¶é€šè®¯ã€‚æœ¬æ–‡ä»‹ç»springbootå¦‚ä½•é›†æˆwebsocketã€IMåŠæ—¶é€šè®¯éœ€è¦å“ªäº›æ¨¡å—ã€å¼€å‘å’Œéƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ã€ä»¥åŠå®ç°å°å‹IMåŠæ—¶é€šè®¯çš„ä»£ç ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1ã€Springbooté›†æˆWebsocket&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é›†æˆåˆ†ä¸ºä¸‰æ­¥ï¼šæ·»åŠ ä¾èµ–ã€å¢åŠ é…ç½®ç±»å’Œæ¶ˆæ¯æ ¸å¿ƒç±»ã€å‰ç«¯é›†æˆã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1.1ã€æ·»åŠ ä¾èµ–&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&amp;lt;&lt;span&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span&gt;&amp;lt;/&lt;span&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;spring-boot-starter-websocket&lt;span&gt;&amp;lt;/&lt;span&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;2.1.13.RELEASE&lt;span&gt;&amp;lt;/&lt;span&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1.2ã€å¢åŠ WebSocketé…ç½®ç±»&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;import&lt;/span&gt;Â org.springframework.context.annotation.Bean;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.springframework.context.annotation.Configuration;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.springframework.web.socket.server.standard.ServerEndpointExporter;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;/**&lt;br/&gt;Â *Â WebSocketé…ç½®&lt;br/&gt;Â */&lt;/span&gt;&lt;br/&gt;&lt;span&gt;@Configuration&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;WebSocketConfig&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;@Bean&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â ServerEndpointExporterÂ &lt;span&gt;serverEndpointExporter&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â ServerEndpointExporter();&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1.3ã€å¢åŠ æ¶ˆæ¯æ ¸å¿ƒç±»WebSocketServer&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@ServerEndpoint&lt;/span&gt;(&lt;span&gt;&quot;/trtc/websocket/{userId}&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;@Component&lt;/span&gt;&lt;br/&gt;&lt;span&gt;@Slf&lt;/span&gt;4j&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;WebSocketServer&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æ¶ˆæ¯å­˜å‚¨&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â MessageStoreÂ messageStore;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æ¶ˆæ¯å‘é€&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â MessageSenderÂ messageSender;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;setMessageStore&lt;/span&gt;&lt;span&gt;(MessageStoreÂ messageStore)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â WebSocketServer.messageStoreÂ =Â messageStore;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;setMessageSender&lt;/span&gt;&lt;span&gt;(MessageSenderÂ messageSender)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â WebSocketServer.messageSenderÂ =Â messageSender;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â è¿æ¥å»ºç«‹æˆåŠŸè°ƒç”¨çš„æ–¹æ³•&lt;br/&gt;Â Â Â Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@OnOpen&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;onOpen&lt;/span&gt;&lt;span&gt;(SessionÂ session,Â @PathParam(&lt;span&gt;&quot;userId&quot;&lt;/span&gt;)&lt;/span&gt;Â StringÂ userId)Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â messageStore.saveSession(session);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â è¿æ¥å…³é—­è°ƒç”¨çš„æ–¹æ³•&lt;br/&gt;Â Â Â Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@OnClose&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;onClose&lt;/span&gt;&lt;span&gt;(SessionÂ session,Â @PathParam(&lt;span&gt;&quot;userId&quot;&lt;/span&gt;)&lt;/span&gt;Â StringÂ userId)Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â messageStore.deleteSession(session);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â æ”¶åˆ°å®¢æˆ·ç«¯æ¶ˆæ¯åè°ƒç”¨çš„æ–¹æ³•&lt;br/&gt;Â Â Â Â Â *&lt;br/&gt;Â Â Â Â Â *Â @Â ParamÂ messageÂ å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„æ¶ˆæ¯&lt;br/&gt;Â Â Â Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@OnMessage&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;onMessage&lt;/span&gt;&lt;span&gt;(StringÂ message,Â SessionÂ session)&lt;/span&gt;Â &lt;span&gt;throws&lt;/span&gt;Â ExceptionÂ &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â log.warn(&lt;span&gt;&quot;===========Â æ”¶åˆ°æ¥è‡ªçª—å£&quot;&lt;/span&gt;Â +Â session.getId()Â +Â &lt;span&gt;&quot;çš„ä¿¡æ¯:&quot;&lt;/span&gt;Â +Â message);&lt;br/&gt;Â Â Â Â Â Â Â Â handleTextMessage(session,Â &lt;span&gt;new&lt;/span&gt;Â TextMessage(message));&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â &lt;span&gt;@param&lt;/span&gt;Â session&lt;br/&gt;Â Â Â Â Â *Â &lt;span&gt;@param&lt;/span&gt;Â error&lt;br/&gt;Â Â Â Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@OnError&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;onError&lt;/span&gt;&lt;span&gt;(SessionÂ session,Â @PathParam(&lt;span&gt;&quot;userId&quot;&lt;/span&gt;)&lt;/span&gt;Â StringÂ userId,Â ThrowableÂ error)Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â log.error(&lt;span&gt;&quot;===========Â å‘ç”Ÿé”™è¯¯&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â error.printStackTrace();&lt;br/&gt;&lt;span&gt;//Â Â Â Â Â Â Â Â msgStore.deleteSession(session);&lt;/span&gt;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;handleTextMessage&lt;/span&gt;&lt;span&gt;(SessionÂ session,Â TextMessageÂ message)&lt;/span&gt;Â &lt;span&gt;throws&lt;/span&gt;Â ExceptionÂ &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â log.warn(&lt;span&gt;&quot;===========Â ReceivedÂ message:Â {}&quot;&lt;/span&gt;,Â message.getPayload());&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1.4ã€å‰ç«¯é¡µé¢åŠ å…¥socket&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&amp;lt;!DOCTYPEÂ &lt;span&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;&lt;span&gt;html&lt;/span&gt;Â &lt;span&gt;xmlns&lt;/span&gt;=&lt;span&gt;&quot;http://www.w3.org/1999/html&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;&amp;lt;&lt;span&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;WebSocketÂ Example&lt;span&gt;&amp;lt;/&lt;span&gt;title&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;&amp;lt;/&lt;span&gt;head&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;&amp;lt;&lt;span&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â ç™»å½•ç”¨æˆ·IDï¼š&lt;span&gt;&amp;lt;&lt;span&gt;input&lt;/span&gt;Â &lt;span&gt;type&lt;/span&gt;=&lt;span&gt;&quot;text&quot;&lt;/span&gt;Â &lt;span&gt;id&lt;/span&gt;=&lt;span&gt;&quot;sendUserId&quot;&lt;/span&gt;Â /&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;br&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â æ¥å—ç”¨æˆ·IDï¼š&lt;span&gt;&amp;lt;&lt;span&gt;input&lt;/span&gt;Â &lt;span&gt;type&lt;/span&gt;=&lt;span&gt;&quot;text&quot;&lt;/span&gt;Â &lt;span&gt;id&lt;/span&gt;=&lt;span&gt;&quot;receivedUserId&quot;&lt;/span&gt;Â /&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;br&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â å‘é€æ¶ˆæ¯å†…å®¹ï¼š&lt;span&gt;&amp;lt;&lt;span&gt;input&lt;/span&gt;Â &lt;span&gt;type&lt;/span&gt;=&lt;span&gt;&quot;text&quot;&lt;/span&gt;Â &lt;span&gt;id&lt;/span&gt;=&lt;span&gt;&quot;messageInput&quot;&lt;/span&gt;Â /&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;br&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â æ¥å—æ¶ˆæ¯å†…å®¹ï¼š&lt;span&gt;&amp;lt;&lt;span&gt;input&lt;/span&gt;Â &lt;span&gt;type&lt;/span&gt;=&lt;span&gt;&quot;text&quot;&lt;/span&gt;Â &lt;span&gt;id&lt;/span&gt;=&lt;span&gt;&quot;messageReceive&quot;&lt;/span&gt;Â /&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;br&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;button&lt;/span&gt;Â &lt;span&gt;onclick&lt;/span&gt;=&lt;span&gt;&quot;sendMessage()&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;Send&lt;span&gt;&amp;lt;/&lt;span&gt;button&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;var&lt;/span&gt;Â socketÂ =Â &lt;span&gt;new&lt;/span&gt;Â WebSocket(&lt;span&gt;&quot;ws://localhost:8080/trtc/websocket/aaa&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;var&lt;/span&gt;Â roomIdÂ =Â &lt;span&gt;&quot;123456&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//Â éšæœºäº§å‡ºå…­ä½æ•°å­—&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;var&lt;/span&gt;Â sendUserIdÂ =Â &lt;span&gt;Math&lt;/span&gt;.floor(&lt;span&gt;Math&lt;/span&gt;.random()Â *Â &lt;span&gt;1000000&lt;/span&gt;);&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;document&lt;/span&gt;.getElementById(&lt;span&gt;&quot;sendUserId&quot;&lt;/span&gt;).valueÂ =Â sendUserId;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;var&lt;/span&gt;Â messageReceiveÂ =Â &lt;span&gt;document&lt;/span&gt;.getElementById(&lt;span&gt;&quot;messageReceive&quot;&lt;/span&gt;);&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â socket.onopenÂ =Â &lt;span&gt;&lt;span&gt;function&lt;/span&gt;Â (&lt;span&gt;event&lt;/span&gt;)Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;console&lt;/span&gt;.log(&lt;span&gt;&quot;WebSocketÂ isÂ openÂ now.&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;let&lt;/span&gt;Â loginInfoÂ =Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;msgType&lt;/span&gt;:Â &lt;span&gt;2&lt;/span&gt;,Â &lt;span&gt;//ç™»å½•æ¶ˆæ¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;sendUserId&lt;/span&gt;:Â sendUserId,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;bizType&lt;/span&gt;:Â &lt;span&gt;1&lt;/span&gt;,Â &lt;span&gt;//ä¸šåŠ¡ç±»å‹&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;bizOptModule&lt;/span&gt;:Â &lt;span&gt;1&lt;/span&gt;,Â &lt;span&gt;//ä¸šåŠ¡æ¨¡å—&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;roomId&lt;/span&gt;:Â roomId,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;msgBody&lt;/span&gt;:Â {},&lt;br/&gt;Â Â Â Â Â Â Â Â };&lt;br/&gt;Â Â Â Â Â Â Â Â socket.send(&lt;span&gt;JSON&lt;/span&gt;.stringify(loginInfo));&lt;br/&gt;Â Â Â Â Â Â };&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â socket.onmessageÂ =Â &lt;span&gt;&lt;span&gt;function&lt;/span&gt;Â (&lt;span&gt;event&lt;/span&gt;)Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;var&lt;/span&gt;Â messageÂ =Â event.data;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;console&lt;/span&gt;.log(&lt;span&gt;&quot;ReceivedÂ message:Â &quot;&lt;/span&gt;Â +Â message);&lt;br/&gt;Â Â Â Â Â Â Â Â messageReceive.valueÂ =Â message;&lt;br/&gt;Â Â Â Â Â Â };&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â socket.oncloseÂ =Â &lt;span&gt;&lt;span&gt;function&lt;/span&gt;Â (&lt;span&gt;event&lt;/span&gt;)Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;console&lt;/span&gt;.log(&lt;span&gt;&quot;WebSocketÂ isÂ closedÂ now.&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â };&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;&lt;span&gt;function&lt;/span&gt;Â &lt;span&gt;sendMessage&lt;/span&gt;(&lt;span/&gt;)Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;var&lt;/span&gt;Â messageÂ =Â &lt;span&gt;document&lt;/span&gt;.getElementById(&lt;span&gt;&quot;messageInput&quot;&lt;/span&gt;).value;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;var&lt;/span&gt;Â receivedUserIdÂ =Â &lt;span&gt;document&lt;/span&gt;.getElementById(&lt;span&gt;&quot;receivedUserId&quot;&lt;/span&gt;).value;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;let&lt;/span&gt;Â operateInfoÂ =Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;msgType&lt;/span&gt;:Â &lt;span&gt;100&lt;/span&gt;,Â &lt;span&gt;//ä¸šåŠ¡æ¶ˆæ¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;sendUserId&lt;/span&gt;:Â sendUserId,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;bizType&lt;/span&gt;:Â &lt;span&gt;1&lt;/span&gt;,Â &lt;span&gt;//ä¸šåŠ¡ç±»å‹&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;bizOptModule&lt;/span&gt;:Â &lt;span&gt;1&lt;/span&gt;,Â &lt;span&gt;//ä¸šåŠ¡æ¨¡å—&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;roomId&lt;/span&gt;:Â roomId,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;receivedUserId&lt;/span&gt;:Â receivedUserId,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;msgBody&lt;/span&gt;:Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;operateType&lt;/span&gt;:Â &lt;span&gt;1&lt;/span&gt;,Â &lt;span&gt;//æ“ä½œç±»å‹ï¼šç¦è¨€&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;operateContent&lt;/span&gt;:Â &lt;span&gt;&quot;1&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â },&lt;br/&gt;Â Â Â Â Â Â Â Â };&lt;br/&gt;Â Â Â Â Â Â Â Â socket.send(&lt;span&gt;JSON&lt;/span&gt;.stringify(operateInfo));&lt;br/&gt;Â Â Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â setInterval(&lt;span&gt;&lt;span&gt;()&lt;/span&gt;Â =&amp;gt;&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â socket.send(&lt;span&gt;&quot;ping&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â },Â &lt;span&gt;30000&lt;/span&gt;);&lt;br/&gt;Â Â Â Â &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;&amp;lt;/&lt;span&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2ã€å°å‹åŠæ—¶é€šè®¯åŒ…å«çš„æ¨¡å—&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»¥ä¸Šåªæ˜¯é›†æˆäº†websocketæ¡†æ¶ï¼Œå®ç°äº†åŸºæœ¬çš„å…¨åŒå·¥é€šä¿¡ï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½å¯ä»¥åŒæ—¶å‘é€å’Œæ¥æ”¶æ•°æ®ã€‚è¦æƒ³å®ç°ä¸€äº›å°å‹å®Œæ•´çš„åŠæ—¶é€šè®¯ï¼Œè¿˜éœ€è¦å…·å¤‡ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒæ¨¡å—ã€‚ä¹Ÿé€šè¿‡ä¸€å¼ æµç¨‹å›¾å±•ç¤ºäº†å…¶ä¸­è¿‡ç¨‹ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.1ã€æ¶ˆæ¯å¯¹è±¡æ¨¡å‹&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»„ç»‡æ¶ˆæ¯å†…å®¹ï¼Œæ¯”å¦‚æ¶ˆæ¯ç±»å‹ã€å‘é€è€…ç”¨æˆ·IDã€æ¥å—è€…ç”¨æˆ·IDã€å…·ä½“çš„æ¶ˆæ¯ä½“ç­‰ã€‚æ¯”å¦‚ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;SocketMsg&lt;/span&gt;&amp;lt;&lt;span&gt;T&lt;/span&gt;&amp;gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â æ¶ˆæ¯ç±»å‹ï¼š1å¿ƒè·³Â Â 2ç™»å½•Â 3ä¸šåŠ¡æ“ä½œ&lt;br/&gt;Â Â Â Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â IntegerÂ msgType;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â å‘é€è€…ç”¨æˆ·ID&lt;br/&gt;Â Â Â Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â StringÂ sendUserId;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â æ¥å—è€…ç”¨æˆ·ID&lt;br/&gt;Â Â Â Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â StringÂ receivedUserId;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â ä¸šåŠ¡ç±»å‹&lt;br/&gt;Â Â Â Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â IntegerÂ bizType;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â ä¸šåŠ¡æ“ä½œæ¨¡å—&lt;br/&gt;Â Â Â Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â IntegerÂ bizOptModule;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â æ¶ˆæ¯å†…å®¹&lt;br/&gt;Â Â Â Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â TÂ msgBody;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.2ã€æ¶ˆæ¯å­˜å‚¨æ¨¡å—&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è´Ÿè´£å­˜å‚¨æ¶ˆæ¯å†…å®¹ã€ç”¨æˆ·IDå’ŒsessionIDçš„å…³ç³»ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±æˆ–è€…æœåŠ¡å™¨é‡å¯ç­‰ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.3ã€æ¶ˆæ¯å‘é€æ¨¡å—&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŠŸèƒ½å¼€å‘å®Œæ¯•ï¼Œä¸€èˆ¬éƒ¨ç½²åˆ°åˆ†å¸ƒå¼é›†ç¾¤ç¯å¢ƒï¼Œæ‰€ä»¥é€šè®¯æ—¶sessionä¼šåˆ†å¸ƒåœ¨å¤šå°æœåŠ¡å™¨ã€‚æ¯”å¦‚ç”¨æˆ·Açš„sessionåœ¨æœºå™¨1ï¼Œç”¨æˆ·Bçš„sessionåœ¨æœºå™¨2ï¼Œæ­¤æ—¶Aå‘é€ç»™Bï¼Œå°±æ— æ³•å•ç‹¬é€šè¿‡æœºå™¨1å®Œæˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å› ä¸ºæœºå™¨1æ‹¿ä¸åˆ°æœºå™¨2é‡Œçš„sessionï¼Œæ‰€ä»¥æ¶ˆæ¯å‘ä¸è¿‡å»ã€‚æ­¤æ—¶åªèƒ½å€ŸåŠ©åˆ«çš„ä¸­é—´ä»¶æ¥å®ç°ï¼Œæ¯”å¦‚å€ŸåŠ©æ¶ˆæ¯ä¸­é—´ä»¶kafkaå®ç°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœºå™¨1å°†æ¶ˆæ¯å‘é€ç»™kafkaï¼Œç„¶åæœºå™¨1å’Œæœºå™¨2éƒ½ç›‘å¬kafkaï¼Œç„¶åæŸ¥çœ‹ç”¨æˆ·å¯¹åº”çš„sessionæ˜¯å¦åœ¨æœ¬æœºï¼Œå¦‚æœåœ¨æœ¬æœºåˆ™å‘é€å‡ºå»ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.4ã€æ¶ˆæ¯æ¨é€æ¨¡å—&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¨¡å—3æåˆ°çš„æ¶ˆæ¯å‘é€æµç¨‹ä¸­ï¼Œæ¶ˆæ¯å‘é€ç»™ æ¶ˆæ¯ä¸­é—´ä»¶ï¼Œç„¶åæœåŠ¡å™¨æ¶ˆè´¹åˆ°æ¶ˆè´¹ï¼Œåœ¨é€šè¿‡æœ¬æœºçš„sessionæ¨é€ç»™å®¢æˆ·ç«¯ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.5ã€æ¶æ„å›¾&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.47191011235955055&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/iaKiaGaGnVlcHhlL9pR1WDhfstDCaNIYdZyZhJ479x6VY5TwPJNnNCUyBPQInpibJzqWsGAI6yNWlDcV2pWtuGYRQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2136&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3ã€é‡åˆ°çš„å‡ ä¸ªé—®é¢˜&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3.1ã€è¿æ¥è‡ªåŠ¨æ–­å¼€&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;webSocketè¿æ¥ä¹‹åï¼Œå‘ç°ä¸€ä¸ªé—®é¢˜ï¼šå°±æ˜¯æ¯éš”ä¸€æ®µæ—¶é—´å¦‚æœä¸ä¼ é€æ•°æ®çš„è¯ï¼Œä¸å‰ç«¯çš„è¿æ¥å°±ä¼šè‡ªåŠ¨æ–­å¼€ã€‚é‡‡ç”¨å¿ƒè·³æ¶ˆæ¯çš„æ–¹å¼ï¼Œå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ¯”å¦‚å®¢æœç«¯æ¯éš”30ç§’è‡ªåŠ¨å‘é€pingæ¶ˆæ¯ç»™æœåŠ¡ç«¯ï¼ŒæœåŠ¡ç«¯è¿”å›pongã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3.2ã€Sessionæ— æ³•è¢«åºåˆ—åŒ–&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ†å¸ƒå¼åœºæ™¯ä¼šå­˜åœ¨è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œå½“ä¸€æ¬¡è¯·æ±‚è´Ÿè½½åˆ°ç¬¬ä¸€å°æœåŠ¡å™¨æ—¶ï¼Œsessionåœ¨ç¬¬ä¸€å°æœåŠ¡å™¨çº¿ç¨‹ä¸Šï¼Œç¬¬äºŒæ¬¡è¯·æ±‚ï¼Œè´Ÿè½½åˆ°ç¬¬äºŒå°æœåŠ¡å™¨ä¸Šï¼Œæ­¤æ—¶é€šè¿‡userIdæŸ¥æ‰¾å½“å‰ç”¨æˆ·çš„sessionæ—¶ï¼Œæ˜¯æŸ¥æ‰¾ä¸åˆ°çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬æ¥æƒ³ç€æŠŠsessionå­˜å…¥åˆ°redisä¸­ï¼Œå°±å¯ä»¥ä»redisè·å–ç”¨æˆ·çš„sessionï¼Œå¸Œæœ›ç”¨è¿™ç§æ–¹å¼æ¥è§£å†³åˆ†å¸ƒå¼åœºæ™¯ä¸‹æ¶ˆæ¯å‘é€çš„é—®é¢˜ã€‚ç»“æœå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;TheÂ remoteÂ endpointÂ wasÂ inÂ stateÂ [STREAM_WRITING]Â whichÂ isÂ anÂ invalidÂ stateÂ &lt;span&gt;for&lt;/span&gt;Â calledÂ method&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¿»çœ‹äº†sessionæºç ï¼Œå‘ç°sessionæ— æ³•è¢«åºåˆ—åŒ–ã€‚æ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆåªèƒ½æ”¾å¼ƒã€‚è§£å†³æ–¹æ¡ˆè¯·çœ‹ä¸‹é¢çš„&lt;code&gt;é—®é¢˜5&lt;/code&gt;æˆ–è€…ä¸Šé¢çš„&lt;code&gt;æ¶æ„å›¾&lt;/code&gt;ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3.3ã€å¯¹è±¡æ— æ³•è‡ªåŠ¨æ³¨å…¥&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨äº†&lt;code&gt;@ServerEndpoint&lt;/code&gt;æ³¨è§£çš„ç±»ä¸­ä½¿ç”¨&lt;code&gt;@Resource&lt;/code&gt;æˆ–&lt;code&gt;@Autowired&lt;/code&gt;æ³¨å…¥å¯¹è±¡éƒ½ä¼šå¤±è´¥ï¼Œå¹¶ä¸”æŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŸå› æ˜¯&lt;code&gt;WebSocket&lt;/code&gt;æœåŠ¡æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œé‚£ä¹ˆå½“æˆ‘ä»¬å»å‘èµ·ä¸€ä¸ª&lt;code&gt;ws&lt;/code&gt;è¿æ¥æ—¶ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªç«¯ç‚¹å¯¹è±¡ã€‚&lt;code&gt;WebSocket&lt;/code&gt;æœåŠ¡æ˜¯å¤šå¯¹è±¡çš„ï¼Œä¸æ˜¯å•ä¾‹çš„ã€‚è€Œæˆ‘ä»¬çš„&lt;code&gt;Spring&lt;/code&gt;çš„&lt;code&gt;Bean&lt;/code&gt;é»˜è®¤å°±æ˜¯å•ä¾‹çš„ï¼Œåœ¨éå•ä¾‹ç±»ä¸­æ³¨å…¥ä¸€ä¸ªå•ä¾‹çš„&lt;code&gt;Bean&lt;/code&gt;æ˜¯å†²çªçš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ–è€…è¯´ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Springç®¡ç†é‡‡ç”¨å•ä¾‹æ¨¡å¼ï¼ˆ&lt;code&gt;singleton&lt;/code&gt;ï¼‰ï¼Œè€Œ WebSocket æ˜¯å¤šå¯¹è±¡çš„ï¼Œå³æ¯ä¸ªå®¢æˆ·ç«¯å¯¹åº”åå°çš„ä¸€ä¸ª WebSocket å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥ç†è§£æˆ new äº†ä¸€ä¸ª WebSocketï¼Œè¿™æ ·å½“ç„¶æ˜¯ä¸èƒ½è·å¾—è‡ªåŠ¨æ³¨å…¥çš„å¯¹è±¡äº†ï¼Œå› ä¸ºè¿™ä¸¤è€…åˆšå¥½å†²çªã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;@Autowired &lt;/code&gt;æ³¨è§£æ³¨å…¥å¯¹è±¡æ“ä½œæ˜¯åœ¨å¯åŠ¨æ—¶æ‰§è¡Œçš„ï¼Œè€Œä¸æ˜¯åœ¨ä½¿ç”¨æ—¶ï¼Œè€Œ WebSocket æ˜¯åªæœ‰è¿æ¥ä½¿ç”¨æ—¶æ‰å®ä¾‹åŒ–å¯¹è±¡ï¼Œä¸”æœ‰å¤šä¸ªè¿æ¥å°±æœ‰å¤šä¸ªå¯¹è±¡ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼Œè¿™ä¸ª Service æ ¹æœ¬å°±æ²¡æœ‰æ³¨å…¥åˆ° WebSocket å½“ä¸­ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;å¦‚ä½•è§£å†³å‘¢ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨é™æ€å¯¹è±¡ï¼Œå¹¶ä¸”å¯¹å¤–æš´éœ²setæ–¹æ³•ï¼Œè¿™æ ·åœ¨å¯¹è±¡åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå°†å…¶æ³¨å…¥åˆ°&lt;code&gt;WebSocketServer&lt;/code&gt;ä¸­ã€‚æ¯”å¦‚è¯´è¿™æ ·ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@ServerEndpoint&lt;/span&gt;(&lt;span&gt;&quot;/trtc/websocket/{userId}&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;@Component&lt;/span&gt;&lt;br/&gt;&lt;span&gt;@Slf&lt;/span&gt;4j&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;WebSocketServer&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â MessageStoreÂ messageStore;&lt;br/&gt;Â Â &lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â MessageSenderÂ messageSender;&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;setMessageStore&lt;/span&gt;&lt;span&gt;(MessageStoreÂ messageStore)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â WebSocketServer.messageStoreÂ =Â messageStore;&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;setMessageSender&lt;/span&gt;&lt;span&gt;(MessageSenderÂ messageSender)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â WebSocketServer.messageSenderÂ =Â messageSender;&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;@Slf&lt;/span&gt;4j&lt;br/&gt;&lt;span&gt;@Service&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;MessageStore&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;@Autowired&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â RedisTemplate&amp;lt;String,Â Object&amp;gt;Â redisTemplate;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@PostConstruct&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;init&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â WebSocketServer.setMessageStore(&lt;span&gt;this&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3.4ã€åˆ†å¸ƒå¼åœºæ™¯æ¶ˆæ¯å¦‚ä½•å‘ç»™å®¢æˆ·ç«¯&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;é—®é¢˜2&lt;/code&gt;ä¸­æåˆ°äº†åˆ†å¸ƒå¼åœºæ™¯ä¸‹å­˜åœ¨çš„sessionä¸åœ¨æœ¬æœºçš„é—®é¢˜ï¼Œè¿™ç§åœºæ™¯å¯ä»¥é€šè¿‡å‘é€æ¶ˆæ¯ä¸­é—´ä»¶çš„æ–¹å¼è§£å†³ã€‚å…·ä½“è¿™æ ·è§£å†³ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯æ¬¡è¿æ¥æ—¶ï¼Œéƒ½å°†userIdå’Œå¯¹åº”çš„sessionå­˜å…¥åˆ°æœ¬æœºï¼Œå‘é€æ¶ˆæ¯æ—¶ï¼Œç›´æ¥å‘é€ç»™MQ-Brokerï¼Œç„¶åæ¯å°åº”ç”¨è´Ÿè½½éƒ½å»æ¶ˆè´¹è¿™ä¸ªæ¶ˆæ¯ï¼Œæ‹¿åˆ°æ¶ˆæ¯ä¹‹åï¼Œåˆ¤æ–­åœ¨æœ¬æœºèƒ½æ ¹æ®userIdæ˜¯å¦èƒ½æ‰¾åˆ°sessionï¼Œæ‰¾åˆ°åˆ™æ¨é€åˆ°å®¢æˆ·ç«¯ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3.5ã€éƒ¨ç½²æ—¶Nginxé…ç½®é—®é¢˜&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»£ç å¼€å‘å®Œæ¯•ä¹‹åï¼Œæœ¬æœºè·‘é€šåï¼Œç„¶åéƒ¨ç½²åˆ°æœåŠ¡å™¨ä¹‹åï¼Œè¿˜å·®å¾ˆé‡è¦çš„ä¸€æ­¥ï¼šé…ç½®nginxä»£ç†ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3.5.1ã€ç»™åç«¯åº”ç”¨éƒ¨ç½²ç‹¬ç«‹åŸŸå&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¦ç»™åç«¯åº”ç”¨éƒ¨ç½²ç‹¬ç«‹åŸŸåï¼Œnginxä»£ç†ç›´æ¥è½¬å‘åˆ°åº”ç”¨çš„ç‹¬ç«‹åŸŸåï¼Œä¸è¦èµ°å¾®æœåŠ¡çš„gatewayç½‘å…³è½¬å‘è¿‡å»ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3.5.2ã€å¤šå±‚nginxè½¬å‘é—®é¢˜&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“åªæœ‰ä¸€å±‚nginxçš„æ—¶å€™ï¼Œé…ç½®æ¯”è¾ƒç®€å•ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;locationÂ ~*Â ^/api/websocket/*Â {&lt;br/&gt;Â Â Â Â Â Â proxy_passÂ http://mangodwsstest.mangod.top;&lt;br/&gt;Â Â Â Â Â Â &lt;br/&gt;Â Â Â Â Â Â proxy_read_timeoutÂ 300s;&lt;br/&gt;Â Â Â Â Â Â proxy_send_timeoutÂ 300s;&lt;br/&gt;Â Â Â Â Â Â proxy_set_headerÂ HostÂ mangodwsstest.mangod.top;&lt;br/&gt;Â Â Â Â Â Â proxy_http_versionÂ 1.1;&lt;br/&gt;Â Â Â Â Â Â proxy_set_headerÂ UpgradeÂ $http_upgrade;&lt;br/&gt;Â Â Â Â Â Â proxy_set_headerÂ ConnectionÂ &quot;Upgrade&quot;;&lt;br/&gt;Â Â Â Â Â Â proxy_set_headerÂ X-Real-IPÂ $remote_addr;&lt;br/&gt;Â }&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯ï¼Œå½“æœ‰ä¸¤å±‚nginxè½¬å‘çš„æ—¶å€™ï¼Œé—®é¢˜å°±å‡ºç°äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æœ€å¤–å±‚çš„nginxéœ€è¦ä½¿ç”¨å¦‚ä¸‹é…ç½®ï¼Œä¸èƒ½ç…§æŠ„åé¢ä¸€å±‚çš„é…ç½®ã€‚&lt;code&gt;proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for&lt;/code&gt;å’Œ&lt;code&gt;proxy_set_header  X-Forwarded-Proto $scheme&lt;/code&gt;è¿™ä¸¤ä¸ªé…ç½®ä¸èƒ½å°‘ï¼Œç”¨æ¥å°†åè®®å’ŒçœŸå®IPä¼ é€’ç»™åé¢ä¸€å±‚çš„nginxã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;locationÂ ~*Â ^/api/websocket/*Â {&lt;br/&gt;Â Â Â Â Â Â proxy_passÂ http://mangodwsstest.mangod.top;&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â proxy_read_timeoutÂ 300s;&lt;br/&gt;Â Â Â Â Â Â proxy_send_timeoutÂ 300s;&lt;br/&gt;Â Â Â Â Â Â proxy_set_headerÂ Â HostÂ $http_host;&lt;br/&gt;Â Â Â Â Â Â proxy_set_headerÂ Â X-Real-IPÂ Â $remote_addr;&lt;br/&gt;Â Â Â Â Â Â proxy_set_headerÂ Â X-Forwarded-ForÂ $proxy_add_x_forwarded_for;&lt;br/&gt;Â Â Â Â Â Â proxy_set_headerÂ Â X-Forwarded-ProtoÂ $scheme;&lt;br/&gt;Â Â Â Â Â Â proxy_http_versionÂ 1.1;&lt;br/&gt;Â Â Â Â Â Â proxy_set_headerÂ UpgradeÂ $http_upgrade;&lt;br/&gt;Â Â Â Â Â Â proxy_set_headerÂ ConnectionÂ $connection_upgrade;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;4ã€å®Œæ•´ä»£ç &lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;é¡µé¢æ•ˆæœå¦‚ä¸‹&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¼€å¯ä¸¤ä¸ªwebé¡µé¢ï¼Œç”¨æˆ·1è¾“å…¥ç”¨æˆ·2çš„ç”¨æˆ·IDï¼Œè¾“å…¥å‘é€æ¶ˆæ¯å†…å®¹ï¼Œç‚¹å‡»å‘é€ã€‚åœ¨ç”¨æˆ·2çš„é¡µé¢çš„æ¥å—æ¶ˆæ¯å†…å®¹å¯ä»¥çœ‹åˆ°å‘é€çš„æ¶ˆæ¯ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3333333333333333&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/iaKiaGaGnVlcHhlL9pR1WDhfstDCaNIYdZOaMnzicib5PGWyD2B6icUJiaa9XxKcbcpn9oLjeqicTpAJ6nsS2PX9FT5kA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;906&quot;/&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3575418994413408&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/iaKiaGaGnVlcHhlL9pR1WDhfstDCaNIYdZgRngTAlicdkQstQ5IU6HnN92dy6sBjFaQvsHiaqMibHPbsNlTp8xibY7ZQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1074&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ä»£ç ç»“æ„&lt;/strong&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4831275720164609&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/iaKiaGaGnVlcHhlL9pR1WDhfstDCaNIYdZI3TSAB9jY8N5nXJ4oVJFLqb7ql2icpbZIMbz60bjqT4ibia85ue2ZlG7A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2430&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ä»£ç åœ°å€&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;https://github.com/yclxiao/spring-websocket.git&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æ€»ç»“&lt;/strong&gt;ï¼šæœ¬æ–‡ä»‹ç»springbootå¦‚ä½•é›†æˆwebsocketã€IMåŠæ—¶é€šè®¯éœ€è¦å“ªäº›æ¨¡å—ã€å¼€å‘å’Œéƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ã€ä»¥åŠå®ç°å°å‹IMåŠæ—¶é€šè®¯çš„ä»£ç ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æœ¬ç¯‡å®Œç»“ï¼æ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œæ¬¢è¿ç‚¹èµ Â å…³æ³¨ Â æ”¶è— Â ç§ä¿¡ï¼ï¼ï¼&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;åŸæ–‡é“¾æ¥ï¼š&lt;/strong&gt;http://www.mangod.top/articles/2023/08/27/1693094046480.html&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_jpg/iaKiaGaGnVlcHhlL9pR1WDhfstDCaNIYdZf0dY4Hkrpvll4Ja8lOL1XrBEeNaMam0Sx4KVAxEs18VzaFoHSH523Q/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;430&quot;/&gt;&lt;/figure&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>ebe1e2f1bb9a71535ac3fec1933a6e5e</guid>
<title>ã€ä½å¼€ã€‘åŸºäºVue3æ­å»ºçš„ä½ä»£ç æ•°æ®å¯è§†åŒ–å¼€å‘å¹³å°</title>
<link>https://toutiao.io/k/jkurmwr</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content js_underline_content&amp;#10;                       autoTypeSetting24psection&amp;#10;            &quot; id=&quot;js_content&quot;&gt;&lt;p&gt;&lt;span&gt;GoViewÂ &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;GoView æ˜¯ä¸€ä¸ªVue3æ­å»ºçš„ä½ä»£ç æ•°æ®å¯è§†åŒ–å¼€å‘å¹³å°ï¼Œå°†å›¾è¡¨æˆ–é¡µé¢å…ƒç´ å°è£…ä¸ºåŸºç¡€ç»„ä»¶ï¼Œæ— éœ€ç¼–å†™ä»£ç å³å¯å®Œæˆä¸šåŠ¡éœ€æ±‚ã€‚&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;å®ƒçš„æŠ€æœ¯æ ˆä¸ºï¼šVue3 + TypeScript4 + Vite2 + NaiveUI + ECharts5 + Axios + Pinia2 + PlopJS&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5657439446366782&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/KmEUbWy7RO8wWjlC5PotUYcRamSG73wTaQbVeLb6HF9zPHqA55Fu90DIcCtsLg2oLyZia43KuRtnRC2yicRu7bpQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;578&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Goviewæ˜¯ä¸€ä¸ªåŸºäºgolanghtml/templateè¯­æ³•çš„è½»é‡çº§ã€æç®€ä¸”æƒ¯ç”¨çš„æ¨¡æ¿åº“ï¼Œç”¨äºæ„å»ºGoWebåº”ç”¨ç¨‹åºã€‚å®ƒä½¿ç”¨golang/html/templateè¯­æ³•ï¼Œå¹¶ä¸”åœ¨æ­¤åŸºç¡€ä¸Šå¢åŠ äº†ä¸€äº›åŠŸèƒ½ï¼Œä½¿å¾—åœ¨Goè¯­è¨€ä¸­ç¼–å†™HTMLæ¨¡æ¿æ›´åŠ æ–¹ä¾¿å’Œæ˜“ç”¨ã€‚&lt;br/&gt;&lt;br/&gt;åŒæ—¶ï¼ŒGoviewä¹Ÿæ˜¯ä¸€ä¸ªæ‹–æ‹½å¼ä½ä»£ç æ•°æ®å¯è§†åŒ–å¼€å‘å¹³å°ï¼Œæ—¨åœ¨å¸®åŠ©ç”¨æˆ·å¿«é€Ÿæ„å»ºæ•°æ®å¤§å±ï¼ŒåŒæ—¶å‡å°‘å¿ƒæ™ºè´Ÿæ‹…ã€‚é€šè¿‡å°†å›¾è¡¨å’Œé¡µé¢å…ƒç´ å°è£…ä¸ºåŸºç¡€ç»„ä»¶ï¼Œç”¨æˆ·æ— éœ€ç¼–å†™å¤§é‡çš„ä»£ç ï¼Œå³å¯è½»æ¾åœ°åˆ›å»ºæ•°æ®å¯è§†åŒ–ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h4&gt;&lt;span&gt;æ•´ä½“ä»‹ç»&lt;/span&gt;&lt;/h4&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æ¡†æ¶ï¼šåŸºäº Vue3 æ¡†æ¶ç¼–å†™ï¼Œä½¿ç”¨ hooks å†™æ³•æŠ½ç¦»éƒ¨åˆ†é€»è¾‘ï¼Œä½¿ä»£ç ç»“æ„æ›´åŠ æ¸…æ™°ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ç±»å‹ï¼šä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹çº¦æŸï¼Œå‡å°‘æœªçŸ¥é”™è¯¯å‘ç”Ÿæ¦‚ç‡ï¼Œå¯ä»¥å¤§èƒ†ä¿®æ”¹é€»è¾‘å†…å®¹ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æ€§èƒ½ï¼šå¤šå¤„æ€§èƒ½ä¼˜åŒ–ï¼Œä½¿ç”¨é¡µé¢æ‡’åŠ è½½ã€ç»„ä»¶åŠ¨æ€æ³¨å†Œã€æ•°æ®æ»šåŠ¨åŠ è½½ç­‰æ–¹å¼ï¼Œæå‡é¡µé¢æ¸²æŸ“é€Ÿåº¦ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å­˜å‚¨ï¼šæ‹¥æœ‰æœ¬åœ°è®°å¿†ï¼Œéƒ¨åˆ†é…ç½®é¡¹é‡‡ç”¨ storage å­˜å‚¨æœ¬åœ°ï¼Œæå‡ä½¿ç”¨ä½“éªŒï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å°è£…ï¼šé¡¹ç›®è¿›è¡Œäº†è¯¦ç»†çš„å·¥å…·ç±»å°è£…å¦‚ï¼šè·¯ç”±ã€å­˜å‚¨ã€åŠ /è§£å¯†ã€æ–‡ä»¶å¤„ç†ã€ä¸»é¢˜ã€NaiveUI å…¨å±€æ–¹æ³•ã€ç»„ä»¶ç­‰&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.32037037037037036&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/KmEUbWy7RO8wWjlC5PotUYcRamSG73wT1icc8a2ehBZcqicBAtkLMAkCW0pbKL58ULxOAqxdAibEvV0NSeRbYhmJg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;è¯´æ˜æ–‡æ¡£ï¼šÂ &lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5333333333333333&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/KmEUbWy7RO8wWjlC5PotUYcRamSG73wT5KFnvRVtKCbRV0KKTUyHXyibwIh3F9UVX7jRGXibObjZDvoIz3T6zqRg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;å·¥ä½œå°ï¼šÂ &lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5361111111111111&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/KmEUbWy7RO8wWjlC5PotUYcRamSG73wTKb1biah4HOoH0TqzTiblkCTLPnWIvqVGcLCPLZdc2ibbEj7geLbL8OgoA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;è¯·æ±‚é…ç½®ï¼šÂ &lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.537962962962963&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/KmEUbWy7RO8wWjlC5PotUYcRamSG73wTIIrvptNbdYcr2rLTYzJD6oIMQFvh8ABIBYTGibkr6A55PN49ZQLdq5Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;æ•°æ®è¿‡æ»¤ï¼šÂ &lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.625&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/KmEUbWy7RO8wWjlC5PotUYcRamSG73wT5Jp3WYeBiaCMYKxmCmfr8yHYNAXrZNV6FibrI05TKcD1z0zfHG8Bfg6Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;é«˜çº§äº‹ä»¶ç¼–è¾‘:Â &lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5101851851851852&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/KmEUbWy7RO8wWjlC5PotUYcRamSG73wTwwIGfDU1MPibAcHVib2ulZ96dZHibAFlwvtGofKicjnVp2d5ED7YOWyyzw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;è‡ªå®šä¹‰ç»„ä»¶é¢œè‰²:Â &lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6259259259259259&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/KmEUbWy7RO8wWjlC5PotUYcRamSG73wTqZHIwiaTN4Lgasa4padTx0rxoBUsWS2ubeE97gAetbMMxWMKDSrMDjg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;å¿«æ·ä¸»é¡µï¼šÂ &lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.625&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_jpg/KmEUbWy7RO8wWjlC5PotUYcRamSG73wTqDHXDAVSbEicV7Hc93QhTJJnTq7YhRAsE8iaC5dA7yibyuIFfW0dU0mEw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;ä¸»é¢˜è‰²ï¼šÂ &lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.625&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/KmEUbWy7RO8wWjlC5PotUYcRamSG73wTIyVCy88B2HibsC3jwicialIyVKOcd17wFTneD9pXlBiciaft1a0FHA9N20A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;äº®ç™½ä¸»é¢˜ï¼šÂ &lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5444444444444444&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/KmEUbWy7RO8wWjlC5PotUYcRamSG73wTaJw3PMMrBCleib3RZsCvBB2w9WemusAvxE7iaDXCsyI4k1t69NPkWqNA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;ä¸»è¦æŠ€æœ¯æ ˆä¸ºï¼š&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;åç§°&lt;/th&gt;&lt;th&gt;ç‰ˆæœ¬&lt;/th&gt;&lt;th&gt;åç§°&lt;/th&gt;&lt;th&gt;ç‰ˆæœ¬&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Vue&lt;/td&gt;&lt;td&gt;3.2.x&lt;/td&gt;&lt;td&gt;TypeScript4&lt;/td&gt;&lt;td&gt;4.6.x&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Vite&lt;/td&gt;&lt;td&gt;4.2.x&lt;/td&gt;&lt;td&gt;NaiveUI&lt;/td&gt;&lt;td&gt;2.34.x&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ECharts&lt;/td&gt;&lt;td&gt;5.3.x&lt;/td&gt;&lt;td&gt;Pinia&lt;/td&gt;&lt;td&gt;2.0.x&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;è¯¦è§Â &lt;code&gt;package.json&lt;/code&gt;&lt;/td&gt;&lt;td&gt;ğŸ˜&lt;/td&gt;&lt;td&gt;ğŸ¥°&lt;/td&gt;&lt;td&gt;ğŸ¤—&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;å¼€å‘ç¯å¢ƒ:&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;åç§°&lt;/th&gt;&lt;th&gt;ç‰ˆæœ¬&lt;/th&gt;&lt;th&gt;åç§°&lt;/th&gt;&lt;th&gt;ç‰ˆæœ¬&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;node&lt;/td&gt;&lt;td&gt;16.16.x&lt;/td&gt;&lt;td&gt;npm&lt;/td&gt;&lt;td&gt;8.5.x&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;pnpm&lt;/td&gt;&lt;td&gt;7.1.x&lt;/td&gt;&lt;td&gt;windows&lt;/td&gt;&lt;td&gt;11&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;å·²å®Œæˆå›¾è¡¨ï¼š&lt;/p&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;åˆ†ç±»&lt;/th&gt;&lt;th&gt;åç§°&lt;/th&gt;&lt;th&gt;åç§°&lt;/th&gt;&lt;th&gt;åç§°&lt;/th&gt;&lt;th&gt;åç§°&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;å›¾è¡¨&lt;/td&gt;&lt;td&gt;æŸ±çŠ¶å›¾&lt;/td&gt;&lt;td&gt;æ¨ªå‘æŸ±çŠ¶å›¾&lt;/td&gt;&lt;td&gt;æŠ˜çº¿å›¾&lt;/td&gt;&lt;td&gt;å•/å¤š æŠ˜çº¿é¢ç§¯å›¾(æ¸å˜è‰²)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;*&lt;/td&gt;&lt;td&gt;é¥¼å›¾&lt;/td&gt;&lt;td&gt;ç¯å½¢å›¾&lt;/td&gt;&lt;td&gt;æ°´çƒå›¾&lt;/td&gt;&lt;td&gt;é›·è¾¾å›¾&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;*&lt;/td&gt;&lt;td&gt;NaiveUI å¤šç§è¿›åº¦&lt;/td&gt;&lt;td&gt;æ•£ç‚¹å›¾&lt;/td&gt;&lt;td&gt;å¯¹æ•°å›å½’æ•£ç‚¹å›¾&lt;/td&gt;&lt;td&gt;çƒ­åŠ›å›¾&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;*&lt;/td&gt;&lt;td&gt;æ¼æ–—å›¾&lt;/td&gt;&lt;td&gt;ä¸­å›½åœ°å›¾&lt;/td&gt;&lt;td&gt;é«˜å¾·åœ°å›¾&lt;/td&gt;&lt;td&gt;ğŸ¦Š&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ä¿¡æ¯&lt;/td&gt;&lt;td&gt;æ–‡å­—&lt;/td&gt;&lt;td&gt;æ¸å˜æ–‡å­—&lt;/td&gt;&lt;td&gt;è¯äº‘&lt;/td&gt;&lt;td&gt;åµŒå¥—ç½‘é¡µ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;*&lt;/td&gt;&lt;td&gt;å›¾ç‰‡&lt;/td&gt;&lt;td&gt;è§†é¢‘&lt;/td&gt;&lt;td&gt;ğŸ˜º&lt;/td&gt;&lt;td&gt;ğŸ¯&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;åˆ—è¡¨&lt;/td&gt;&lt;td&gt;æ»šåŠ¨æ’ååˆ—è¡¨&lt;/td&gt;&lt;td&gt;æ»šåŠ¨è¡¨æ ¼&lt;/td&gt;&lt;td&gt;ğŸ®&lt;/td&gt;&lt;td&gt;ğŸ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;å°ç»„ä»¶&lt;/td&gt;&lt;td&gt;è¾¹æ¡†-01~13&lt;/td&gt;&lt;td&gt;è£…é¥°-01~05&lt;/td&gt;&lt;td&gt;æ•°å­—ç¿»ç‰Œ&lt;/td&gt;&lt;td&gt;é€šç”¨æ—¶é—´&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;*&lt;/td&gt;&lt;td&gt;æ•°å­—è®¡æ•°&lt;/td&gt;&lt;td&gt;å€’è®¡æ—¶&lt;/td&gt;&lt;td&gt;æ—¶é’Ÿ&lt;/td&gt;&lt;td&gt;ğŸ¦&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h2&gt;æµè§ˆå™¨æ”¯æŒ&lt;/h2&gt;&lt;p&gt;å¼€å‘å’Œæµ‹è¯•å¹³å°å‡åœ¨Â &lt;code&gt;Google&lt;/code&gt;Â å’Œæœ€æ–°ç‰ˆÂ &lt;code&gt;EDGE&lt;/code&gt;Â ä¸Šå®Œæˆï¼Œæš‚æœªæµ‹è¯•Â &lt;code&gt;IE11&lt;/code&gt;Â ç­‰å…¶å®ƒæµè§ˆå™¨ï¼Œå¦‚æœ‰éœ€æ±‚è¯·è‡ªè¡Œæµ‹è¯•ä¸å…¼å®¹ã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.35185185185185186&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/KmEUbWy7RO8wWjlC5PotUYcRamSG73wTF82Fu1DKoZ6sIlrgOSekHJzv4gvltL0ibR4qYQYc8jtvZkTrPEvuPcw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¹³å°çš„ç‰¹ç‚¹&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™ç§å¹³å°çš„ç›®æ ‡æ˜¯ç®€åŒ–æ•°æ®å¯è§†åŒ–çš„å¼€å‘è¿‡ç¨‹ï¼Œä½¿æ²¡æœ‰ç¼–ç¨‹èƒŒæ™¯çš„ç”¨æˆ·ä¹Ÿèƒ½åˆ›å»ºå‡ºå¤æ‚çš„å¯è§†åŒ–åº”ç”¨ã€‚ä¸‹é¢æ˜¯ä¸€äº›æ‹–æ‹½å¼ä½ä»£ç æ•°æ®å¯è§†åŒ–å¼€å‘å¹³å°çš„ç‰¹ç‚¹ï¼š&lt;br/&gt;&lt;br/&gt;1. &lt;/span&gt;&lt;span&gt;&lt;strong&gt;æ˜“äºä½¿ç”¨&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ï¼šå¹³å°é€šå¸¸æä¾›ç›´è§‚çš„ç”¨æˆ·ç•Œé¢å’Œæ‹–æ‹½åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥åœ¨ç•Œé¢ä¸Šé€‰æ‹©å’Œæ‹–åŠ¨ä¸åŒçš„å…ƒç´ æ¥åˆ›å»ºå¯è§†åŒ–ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2. &lt;/span&gt;&lt;span&gt;&lt;strong&gt;é¢„è®¾è®¡çš„æ¨¡æ¿å’Œç»„ä»¶&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ï¼šå¹³å°é€šå¸¸æä¾›å„ç§é¢„è®¾è®¡çš„æ¨¡æ¿å’Œå¯è§†åŒ–å…ƒç´ ï¼Œå¦‚å›¾è¡¨ã€åœ°å›¾ã€è¡¨æ ¼ç­‰ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©å’Œä¿®æ”¹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;3. &lt;/span&gt;&lt;span&gt;&lt;strong&gt;è‡ªå®šä¹‰èƒ½åŠ›&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ï¼šè™½ç„¶å¹³å°æä¾›é¢„è®¾è®¡çš„æ¨¡æ¿å’Œç»„ä»¶ï¼Œä½†ç”¨æˆ·é€šå¸¸ä¹Ÿå¯ä»¥æ ¹æ®éœ€è¦è‡ªå®šä¹‰å…ƒç´ ï¼Œä»¥æ»¡è¶³ç‰¹å®šçš„è®¾è®¡éœ€æ±‚ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;4. &lt;/span&gt;&lt;span&gt;&lt;strong&gt;å¼ºå¤§çš„æ•°æ®å¤„ç†èƒ½åŠ›&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ï¼šå¹³å°å¯ä»¥å¤„ç†å„ç§æ¥æºçš„æ•°æ®ï¼ŒåŒ…æ‹¬æ•°æ®åº“ã€APIã€Excelæ–‡ä»¶ç­‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;5. &lt;/span&gt;&lt;span&gt;&lt;strong&gt;äº¤äº’æ€§&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ï¼šç”¨æˆ·å¯ä»¥é€šè¿‡ç‚¹å‡»ã€æ»‘åŠ¨ç­‰æ‰‹åŠ¿æ¥ä¸å¯è§†åŒ–äº¤äº’ï¼Œå¦‚æ”¾å¤§ã€ç¼©å°ã€ç­›é€‰æ•°æ®ç­‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;6. &lt;/span&gt;&lt;span&gt;&lt;strong&gt;å¯æ‰©å±•æ€§&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ï¼šå¹³å°å¯ä»¥é›†æˆåˆ°ç°æœ‰çš„ç³»ç»Ÿæˆ–åº”ç”¨ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡APIä¸å…¶ä»–ç³»ç»Ÿæˆ–æœåŠ¡è¿›è¡Œäº¤äº’ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;7. &lt;/span&gt;&lt;span&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ï¼šå¹³å°éœ€è¦ä¿è¯æ•°æ®çš„å®‰å…¨æ€§ï¼Œç¡®ä¿åªæœ‰ç»è¿‡æˆæƒçš„ç”¨æˆ·æ‰èƒ½è®¿é—®å’Œå¤„ç†æ•°æ®ã€‚&lt;br/&gt;&lt;br/&gt;ä¸€äº›å¸¸è§çš„æ‹–æ‹½å¼ä½ä»£ç æ•°æ®å¯è§†åŒ–å¼€å‘å¹³å°åŒ…æ‹¬Tableau, Power BI, Datawrapperç­‰ã€‚è¿™äº›å¹³å°éƒ½æä¾›äº†å¼ºå¤§çš„æ•°æ®å¯è§†åŒ–åŠŸèƒ½ï¼ŒåŒæ—¶ä¿æŒäº†æ˜“ç”¨æ€§å’Œçµæ´»æ€§ï¼Œä½¿å¾—ä»»ä½•äººéƒ½å¯ä»¥åˆ›å»ºå’Œç†è§£æ•°æ®ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;çŒœæ‚¨å–œæ¬¢ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI3MTQyNDc5MA==&amp;amp;mid=2247489830&amp;amp;idx=1&amp;amp;sn=2736acf08126131a2454b416a98034b2&amp;amp;chksm=eac3555fddb4dc498e29f5df0ebafcc946081d2079a39a1276e42b491c0e91379f1b957c04f2&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ã€ä½å¼€ã€‘ä½å¼€å¹³å°çš„æ•°æ®æ¨¡å‹é©±åŠ¨&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; hasload=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;ã€ä½å¼€ã€‘ä½å¼€å¹³å°çš„æ•°æ®æ¨¡å‹é©±åŠ¨&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI3MTQyNDc5MA==&amp;amp;mid=2247490713&amp;amp;idx=1&amp;amp;sn=05b8b6b026511862c0924b42680e6acc&amp;amp;chksm=eac350e0ddb4d9f628a8ae96a204210a44c186472f90176eefe5ec0ab7f446238325cd15a999&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ã€å¼€æºã€‘æµ·é‡æ•°æ®çš„å®æ—¶ CDC å’Œæ‰¹é‡åŒæ­¥ï¼Œå¯ä»¥ç¨³å®šé«˜æ•ˆåœ°åŒæ­¥ä¸‡äº¿çº§æ•°æ®&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; hasload=&quot;1&quot;&gt;&lt;span&gt;&lt;strong&gt;ã€å¼€æºã€‘æµ·é‡æ•°æ®çš„å®æ—¶ CDC å’Œæ‰¹é‡åŒæ­¥ï¼Œå¯ä»¥ç¨³å®šé«˜æ•ˆåœ°åŒæ­¥ä¸‡äº¿çº§æ•°æ®&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI3MTQyNDc5MA==&amp;amp;mid=2247491298&amp;amp;idx=1&amp;amp;sn=700dad1b09bfec7c229a3c22d32d8b1a&amp;amp;chksm=eac3529bddb4db8dd5e93fd1b60a820b573ae45b91ff16dbed67f954953c5860c3da6fc4ed2f&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ã€åº”ç”¨ã€‘Milvus å‘é‡æ•°æ®åº“çš„åº”ç”¨åœºæ™¯&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;&lt;strong&gt;ã€åº”ç”¨ã€‘Milvus å‘é‡æ•°æ®åº“çš„åº”ç”¨åœºæ™¯&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI3MTQyNDc5MA==&amp;amp;mid=2247491242&amp;amp;idx=1&amp;amp;sn=d0aae049b1268bf8150df09bd6674219&amp;amp;chksm=eac352d3ddb4dbc59d23adc147f2b180a233e1faf6f3c9f7094a64a16402a84e7708d9ec37d0&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ã€è§£è¯»ã€‘æ•°å­—ä¸­å›½2522æ¡†æ¶å’Œæ•°æ®æ²»ç†&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;&lt;strong&gt;ã€è§£è¯»ã€‘æ•°å­—ä¸­å›½2522æ¡†æ¶å’Œæ•°æ®æ²»ç†&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI3MTQyNDc5MA==&amp;amp;mid=2247491228&amp;amp;idx=1&amp;amp;sn=9f01734f21a1edc2398f491da1175d53&amp;amp;chksm=eac352e5ddb4dbf388d06e6559afb0fc7c1469959f596ae28a13d9324f1be4524edb4c26a048&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;[AI]æ•°æ®æ²»ç†ä¸­çš„äººå·¥æ™ºèƒ½&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;&lt;strong&gt;Â  [AI]æ•°æ®æ²»ç†ä¸­çš„äººå·¥æ™ºèƒ½&lt;/strong&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;æ·»åŠ å¾®ä¿¡è¿›ç›¸å…³äº¤æµç¾¤&lt;/span&gt;ï¼Œ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¤‡æ³¨â€œ&lt;span&gt;å¾®æœåŠ¡&lt;/span&gt;â€è¿›ç¾¤äº¤æµ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¤‡æ³¨â€œ&lt;span&gt;ä½å¼€&lt;/span&gt;â€è¿›ä½å¼€ç¾¤äº¤æµ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¤‡æ³¨â€œAIâ€è¿›AIå¤§æ•°æ®ï¼Œæ•°æ®æ²»ç†ç¾¤äº¤æµ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¤‡æ³¨â€œæ•°å­—â€è¿›ç‰©è”ç½‘å’Œæ•°å­—å­ªç”Ÿç¾¤äº¤æµ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;å¤‡æ³¨â€œå®‰å…¨â€è¿›å®‰å…¨ç›¸å…³ç¾¤äº¤æµ&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¤‡æ³¨â€œå•†åŠ¡â€è¿›è¡Œå•†åŠ¡äº¤æµ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100003496&quot; data-ratio=&quot;1.2074074074074075&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/KmEUbWy7RO9icbfoYK0eiakZOquUgsBqvQf0q6NBoGO8YARSPwcHLGibnl35GU9jgE992B5NMDNcuhyqoSwreQ2cA/640?wx_fmt=jpeg&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&amp;amp;wx_co=1&quot; data-type=&quot;jpeg&quot; data-w=&quot;945&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å…³æ³¨å…¬ä¼—å· softå¼ ä¸‰ä¸°Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100003495&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/KmEUbWy7RO9mWCDq1S7EibsdIcr4FgZNLYlfp5VJNCX004apD8wXhsuiaia5Tmz0xwE2aCP5Z6mhVwtvXFcknaB2w/640?wx_fmt=png&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&amp;amp;wx_co=1&quot; data-type=&quot;png&quot; data-w=&quot;258&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;mp-style-type data-value=&quot;3&quot;/&gt;&lt;/p&gt;&lt;/div&gt;

          
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>0e1e42a587492d520d1e880a34407437</guid>
<title>é¡¹ç›®ç®¡ç†å…¨æµç¨‹ï¼</title>
<link>https://toutiao.io/k/bkfubev</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content js_underline_content&amp;#10;                       autoTypeSetting24psection&amp;#10;            &quot; id=&quot;js_content&quot;&gt;&lt;p data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;span&gt;ä¸‹é¢è¿™å¼ å›¾ï¼Œé¡¹ç›®ç®¡ç†çš„å…¨æµç¨‹åšäº†è¯¦ç»†çš„è§£æã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ä¸€ä¸ªå®Œæ•´çš„é¡¹ç›®æµç¨‹å…¨è²Œï¼Œä»¥åŠåœ¨ä¸åŒæµç¨‹éœ€è¦é¡¹ç›®ç»ç†é‡ç‚¹å…³æ³¨çš„å†…å®¹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;4.157647058823529&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/sIdiaFJdqrPQwDg5rZ8FVl4AyFrGYuuRwHD9arzkfUmyLDotNDSKgX3wqkFYDk4nrceEqtdZkU0KXyC24bIYzWQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;850&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;4.324705882352941&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/sIdiaFJdqrPQwDg5rZ8FVl4AyFrGYuuRwz6DIJwErsrEHcXHJ7CiaD7aPwwjDfibjB7ibch8eadXrzYaNGYGsS8hRA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;850&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;4.423529411764706&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/sIdiaFJdqrPQwDg5rZ8FVl4AyFrGYuuRwDqY1zcRHWVgyzoIBjEDux60dxRnanDiaRgEBNwTZ7rNsiceYnibMBa17w/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;850&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;4.496470588235294&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/sIdiaFJdqrPQwDg5rZ8FVl4AyFrGYuuRwH0tmIcOibGT4l0MtiaN5dibKXLn1K2jMjexhPaXdkKoPwfbqlzlNFQx4w/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;850&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;3.9035294117647057&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/sIdiaFJdqrPQwDg5rZ8FVl4AyFrGYuuRw0BnmnjqoAMq6HvuAK3Jibb6jDmAgHHGAArherVaSQ6GfXk0icLEFp1Jg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;850&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å½“ç„¶ï¼Œç†æ¸…äº†é¡¹ç›®ç®¡ç†å…¨æµç¨‹è¿˜è¿œè¿œä¸å¤Ÿï¼Œé¡¹ç›®ç»ç†è¿˜éœ€è¦é€šè¿‡å­¦ä¹ å’Œä¸æ–­çš„å®è·µï¼ŒåŠ æ·±ç†è§£ï¼Œç§¯ç´¯ç»éªŒï¼Œè¿™æ ·æ‰èƒ½&lt;/span&gt;&lt;strong&gt;&lt;span&gt;çœŸæ­£æŒæ¡é¡¹ç›®ç®¡ç†çš„ç²¾é«“&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;åˆ«å¿˜äº†ç‚¹èµï¼Œæ”¶è—&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å°±å–œæ¬¢è¿™ç§çŸ¥è¯†åˆ’è¿‡è„‘å­&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ä¸ç•™ç—•è¿¹çš„æ„Ÿè§‰&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;-THE END-&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5555555555555556&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/EKK4IJyFJIuDMLOISu7uwT5IL33cIqbWfpOFGav8paT7zc6ZsgFEJAz0xJqUsHbOGIl2Qswicn5SJZZLzb8PhsA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;900&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;mp-style-type data-value=&quot;3&quot;/&gt;&lt;/p&gt;&lt;/div&gt;

          
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>8647cf51b6c61715186081b94faa1171</guid>
<title>è¿™äº›å¤©ï¼Œæˆ‘ä»¬å‰ç«¯ç»„ä¸€èµ·å¤„ç†çš„é¡¹ç›®ä¼˜åŒ–</title>
<link>https://toutiao.io/k/8myztg9</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content js_underline_content&amp;#10;                       autoTypeSetting24psection&amp;#10;            &quot; id=&quot;js_content&quot;&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;mp-common-profile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;Mzg2NjY2NTcyNg==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/TZL4BdZpLdjaCTEjQdxnaIlEWiaGcw9zNV7AHZGgp5q9U0zPf3cmcIgBRYG1n2ydEBHJGgl8nEA1bKiaj1fibK2EA/0?wx_fmt=png&quot; data-nickname=&quot;å‰ç«¯ä¹‹ç¥&quot; data-alias=&quot;Sunshine_Lin_God&quot; data-signature=&quot;ä¸€ä½å‰ç«¯å°èœé¸¡ï¼Œå†™è¿‡100å¤šç¯‡åŸåˆ›æ–‡ç« ï¼Œå…¨ç½‘æœ‰5w+ä¸ªå‰ç«¯æœ‹å‹ï¼Œæ¢¦æƒ³æ˜¯æˆä¸ºâ€å‰ç«¯ä¹‹ç¥â€œ~&quot; data-from=&quot;0&quot; data-is_biz_ban=&quot;0&quot;/&gt;&lt;/section&gt;&lt;h2&gt;&lt;span&gt;å‰è¨€&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;æ¨¡æ‹Ÿé¢è¯•ã€ç®€å†æŒ‡å¯¼ã€å…¥èŒæŒ‡å¯¼ã€é¡¹ç›®æŒ‡å¯¼ã€ç­”ç–‘è§£æƒ‘&lt;/strong&gt;å¯ç§ä¿¡æ‰¾æˆ‘~å·²å¸®åŠ©100+ååŒå­¦å®Œæˆæ”¹é€ ï¼&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ—ä¸‰å¿ƒï¼Œç”¨æœ€é€šä¿—æ˜“æ‡‚çš„è¯è®²æœ€éš¾çš„çŸ¥è¯†ç‚¹æ˜¯æˆ‘çš„åº§å³é“­ï¼ŒåŸºç¡€æ˜¯è¿›é˜¶çš„å‰ææ˜¯æˆ‘çš„åˆå¿ƒ~&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/TZL4BdZpLdiaxHCwGjFomGgrcdx8jRjF4H6vz4oIyicTgBo0a4UHZd1egY3CDTRjF7479VuyctWzJegNtRDFcTfQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;200&quot;/&gt;&lt;/figure&gt;&lt;p&gt;å¾ˆæ—©ä¸€æ®µæ—¶é—´ï¼Œæˆ‘ä»¬å‰ç«¯ç»„åšäº†ä¸€äº›å›½å¤–ç³»ç»Ÿçš„å°ä¼˜åŒ–(&lt;code&gt;é›†ä¸­è¡¨ç°åœ¨ä»£ç æ‰§è¡Œé€Ÿåº¦ï¼Œç³»ç»Ÿå®‰å…¨ç­‰æ–¹é¢&lt;/code&gt;)ï¼Œæ•…æ–°å»ºä¸€ç¯‡æ–‡ç« æ¥è®°å½•è¿™æ¬¡ä¼˜åŒ–çš„ç»å†ã€‚å¦‚æœæœ¬æ–‡å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œçƒ¦è¯·å¤§å®¶ä¸€é”®ä¸‰è¿å“¦,Â &lt;strong&gt;èŸ¹èŸ¹å¤§å®¶~&lt;/strong&gt;&lt;/p&gt;&lt;h2&gt;&lt;span&gt;1. å‡å°æ–‡ä»¶ä½“ç§¯/ç½‘ç»œè¯·æ±‚&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;æ–¹æ³•ä¸€ï¼šåˆ é™¤éœ€è¦é¢„å…ˆåŠ è½½å’Œé¢„å…ˆè·å–çš„èµ„æºï¼Œä¸€èˆ¬ä½¿ç”¨è¿™ç§æ–¹æ³•&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;link&lt;/strong&gt;æ ‡ç­¾ä¸­çš„&lt;code&gt;preload&lt;/code&gt;å’Œ&lt;code&gt;prefetch&lt;/code&gt;ï¼š&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;ol class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;code&gt;preload&lt;/code&gt;æ’ä»¶ç”¨äºé¢„åŠ è½½èµ„æºã€‚&lt;/strong&gt;Â å³åœ¨å½“å‰é¡µé¢åŠ è½½å®Œæˆåï¼Œç«‹å³åŠ è½½å¹¶ç¼“å­˜æŒ‡å®šçš„èµ„æºã€‚é¢„åŠ è½½çš„èµ„æºè¢«è®¤ä¸ºæ˜¯å½“å‰é¡µé¢æ‰€éœ€çš„å…³é”®èµ„æºï¼Œå› æ­¤ä¼šä¼˜å…ˆä¸‹è½½å’Œç¼“å­˜ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;code&gt;prefetch&lt;/code&gt;æ’ä»¶ç”¨äºé¢„è·å–èµ„æºã€‚&lt;/strong&gt;Â å³åœ¨å½“å‰é¡µé¢åŠ è½½å®Œæˆåï¼Œå¼‚æ­¥åœ°åŠ è½½å¹¶ç¼“å­˜æŒ‡å®šçš„èµ„æºï¼Œä»¥ä¾›å°†æ¥å¯èƒ½éœ€è¦çš„é¡µé¢ä½¿ç”¨ã€‚é¢„è·å–çš„èµ„æºè¢«è®¤ä¸ºæ˜¯å¯èƒ½ä¼šåœ¨æœªæ¥çš„å¯¼èˆªä¸­ä½¿ç”¨çš„èµ„æºï¼Œä½†ä¸æ˜¯å½“å‰é¡µé¢æ‰€å¿…éœ€çš„ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;`vue.config.js`&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;module&lt;/span&gt;.exportsÂ =Â {&lt;br/&gt;Â Â &lt;span&gt;chainWebpack&lt;/span&gt;:Â &lt;span&gt;(&lt;span&gt;config&lt;/span&gt;)Â =&amp;gt;&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;`åˆ é™¤éœ€è¦é¢„å…ˆåŠ è½½(å½“å‰é¡µé¢)çš„èµ„æºï¼Œå½“éœ€è¦è¿™äº›èµ„æºçš„æ—¶å€™ï¼Œé¡µé¢ä¼šè‡ªåŠ¨åŠ è½½`&lt;/span&gt;&lt;br/&gt;Â Â Â Â config.plugins.delete(&lt;span&gt;&#x27;preload&#x27;&lt;/span&gt;)Â Â &lt;br/&gt;Â Â Â Â &lt;span&gt;`åˆ é™¤éœ€è¦é¢„å…ˆè·å–(å°†æ¥çš„é¡µé¢)çš„èµ„æº`&lt;/span&gt;&lt;br/&gt;Â Â Â Â config.plugins.delete(&lt;span&gt;&#x27;prefetch&#x27;&lt;/span&gt;)&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;æ–¹æ³•äºŒï¼šä½¿ç”¨&lt;code&gt;webpack&lt;/code&gt;åˆå¹¶å°æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;åˆå¹¶&lt;code&gt;js&lt;/code&gt;ä»£ç çš„æ„ä¹‰ï¼š&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;ol class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;å‡å°‘ç½‘ç»œè¯·æ±‚ï¼š&lt;/strong&gt;Â æ¯ä¸ªæ–‡ä»¶éƒ½éœ€è¦é€šè¿‡ç½‘ç»œè¿›è¡Œå•ç‹¬çš„è¯·æ±‚å’Œå“åº”ã€‚é€šè¿‡å°†å¤šä¸ªæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¯ä»¥å‡å°‘é¡µé¢éœ€è¦å‘èµ·çš„ç½‘ç»œè¯·æ±‚æ¬¡æ•°ï¼Œä»è€Œé™ä½å»¶è¿Ÿå’Œæé«˜åŠ è½½é€Ÿåº¦ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;ç¼“å­˜ä¼˜åŒ–ï¼š&lt;/strong&gt;Â åˆå¹¶ä»£ç å¯ä»¥æé«˜æµè§ˆå™¨ç¼“å­˜çš„æ•ˆç‡ã€‚å½“å¤šä¸ªé¡µé¢å…±äº«åŒä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œæµè§ˆå™¨åªéœ€è¦ä¸‹è½½å¹¶ç¼“å­˜ä¸€æ¬¡è¯¥æ–‡ä»¶ï¼Œè€Œä¸æ˜¯é’ˆå¯¹æ¯ä¸ªé¡µé¢éƒ½ä¸‹è½½ä¸€æ¬¡ã€‚è¿™æ ·å¯ä»¥å‡å°‘æ•´ä½“çš„é‡å¤ä¸‹è½½å’Œæé«˜ç¼“å­˜å‘½ä¸­ç‡ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;å‡å°‘é¡µé¢æ¸²æŸ“é˜»å¡ï¼š&lt;/strong&gt;Â å½“æµè§ˆå™¨ä¸‹è½½å’Œæ‰§è¡Œ&lt;code&gt;js&lt;/code&gt;ä»£ç æ—¶ï¼Œå®ƒä¼šé˜»å¡é¡µé¢çš„æ¸²æŸ“è¿‡ç¨‹ã€‚é€šè¿‡åˆå¹¶&lt;code&gt;js&lt;/code&gt;ä»£ç ï¼Œå¯ä»¥å‡å°‘å› ä¸ºå¤šä¸ª&lt;code&gt;js&lt;/code&gt;æ–‡ä»¶çš„ä¸‹è½½å’Œæ‰§è¡Œè€Œé€ æˆçš„é¡µé¢æ¸²æŸ“é˜»å¡æ—¶é—´ï¼Œæé«˜é¡µé¢çš„å“åº”é€Ÿåº¦å’Œç”¨æˆ·ä½“éªŒã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;ä»£ç ä¼˜åŒ–å’Œå‹ç¼©ï¼š&lt;/strong&gt;Â åœ¨åˆå¹¶&lt;code&gt;js&lt;/code&gt;ä»£ç ä¹‹å‰ï¼Œå¯ä»¥å¯¹ä»£ç è¿›è¡Œä¼˜åŒ–å’Œå‹ç¼©ï¼Œå»é™¤ç©ºæ ¼ã€æ³¨é‡Šå’Œä¸å¿…è¦çš„ä»£ç ï¼Œä»è€Œå‡å°‘æ–‡ä»¶å¤§å°ï¼Œå¹¶æé«˜ä»£ç çš„æ‰§è¡Œæ•ˆç‡ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;`vue.config.js:Â `&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;const&lt;/span&gt;Â webpackÂ =Â &lt;span&gt;require&lt;/span&gt;(&lt;span&gt;&#x27;webpack&#x27;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;const&lt;/span&gt;Â ENVÂ =Â process.env.NODE_ENV&lt;br/&gt;&lt;br/&gt;&lt;span&gt;module&lt;/span&gt;.exportsÂ =Â {&lt;br/&gt;Â Â &lt;span&gt;chainWebpack&lt;/span&gt;:Â &lt;span&gt;(&lt;span&gt;config&lt;/span&gt;)Â =&amp;gt;&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â config.when(ENVÂ ===Â &lt;span&gt;&#x27;production&#x27;&lt;/span&gt;,Â configÂ =&amp;gt;Â {&lt;br/&gt;Â Â Â Â Â Â config.plugin(&lt;span&gt;&#x27;webpackOptimize&#x27;&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â .use(&lt;br/&gt;Â Â Â Â Â Â Â Â webpack.optimize.LimitChunkCountPlugin,Â &lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;`é™åˆ¶ç”Ÿæˆçš„ä»£ç å—(chunks)çš„æ•°é‡`&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â [{Â &lt;span&gt;maxChunks&lt;/span&gt;:Â &lt;span&gt;10&lt;/span&gt;Â }]&lt;br/&gt;Â Â Â Â Â Â )&lt;br/&gt;Â Â Â Â Â Â .use(&lt;br/&gt;Â Â Â Â Â Â Â Â webpack.optimize.MinChunkSizePlugin,Â &lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;`æŒ‡å®šä»£ç å—çš„æœ€å°å­—èŠ‚æ•°`&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â [{Â &lt;span&gt;minChunkSize&lt;/span&gt;:Â &lt;span&gt;50000&lt;/span&gt;Â }]&lt;br/&gt;Â Â Â Â Â Â )&lt;br/&gt;Â Â Â Â })&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ä¼˜åŒ–å‰çš„æœ¬åœ°ç¯å¢ƒï¼š&lt;/strong&gt;&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4620976116303219&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdiaxHCwGjFomGgrcdx8jRjF449u6fyX3KzVuK37ow1aq4EFVuJLY68JSu8D7UO4Mun9cib0Vz7Sibhqw/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;963&quot;/&gt;&lt;figcaption&gt;image.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;strong&gt;ä¼˜åŒ–åçš„æœ¬åœ°ç¯å¢ƒ(&lt;code&gt;app.js&lt;/code&gt;æ–‡ä»¶è¾ƒå¤§ï¼Œæ˜¯ç”±äº&lt;code&gt;main.js&lt;/code&gt;å¼•å…¥äº†å¤§é‡çš„ç¬¬ä¸‰æ–¹åº“)ï¼š&lt;/strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.45556690500510727&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdiaxHCwGjFomGgrcdx8jRjF4ohl8V2s33nHjMYXibNak6dFTmxfBpONYvKmTiaiaia6KLjHDBymd4xPWXQ/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;979&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;ä¼˜åŒ–åçš„çº¿ä¸Šç¯å¢ƒ(é¦–å…ˆï¼Œæ‰“åŒ…åæœ‰å¯¹è¿™äº›æ–‡ä»¶è¿›è¡Œå‹ç¼©å¤„ç†ï¼Œ&lt;code&gt;app.js&lt;/code&gt;è¢«å‹ç¼©è‡³&lt;code&gt;1.24MB&lt;/code&gt;ã€‚&lt;code&gt;&quot;inspect&quot;: &quot;vue inspect &amp;gt; output.js&quot;&lt;/code&gt;ï¼Œä½¿ç”¨&lt;code&gt;npm run inspect&lt;/code&gt;å¯ä»¥æŸ¥çœ‹&lt;code&gt;webPack&lt;/code&gt;çš„é…ç½®ä¿¡æ¯ã€‚å…¶æ¬¡ï¼Œè¿ç»´éƒ½æœ‰å¯¹è¿™äº›æ–‡ä»¶ä½œ&lt;code&gt;gzip&lt;/code&gt;å‹ç¼©å¤„ç†, æ‰€ä»¥ä½“ç§¯éƒ½å‡å°äº†å¾ˆå¤š, æœ€ç»ˆ&lt;code&gt;app.js&lt;/code&gt;çš„ä½“ç§¯å‡å°è‡³&lt;code&gt;405KB&lt;/code&gt;):&lt;/strong&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4425144747725393&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdiaxHCwGjFomGgrcdx8jRjF4zGzG5AsJ9YcA0Dqu0SXicnhx64fFicTyXguEvfcDicpV1yvSGOXcQpcXQ/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1209&quot;/&gt;&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.1268462206776716&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdiaxHCwGjFomGgrcdx8jRjF4fJOBoCuOy9kGvWgU2s6ic1ej7xmkRGxHqpGwyUjhSMJEwQ5ho0yrxqg/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1151&quot;/&gt;&lt;figcaption&gt;image.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2&gt;&lt;span&gt;2.Â &lt;code&gt;åŠ å‡ä¹˜é™¤&lt;/code&gt;è¿ç®—é›†æˆ&lt;span&gt;`big.js`&lt;/span&gt;&lt;span&gt;[1]&lt;/span&gt;ï¼Œè§£å†³&lt;code&gt;js&lt;/code&gt;å°æ•°ç²¾åº¦é—®é¢˜&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;å½“æ¶‰åŠåˆ°æµ®ç‚¹æ•°è®¡ç®—æ—¶ï¼Œ&lt;code&gt;js&lt;/code&gt;ä¸­çš„ç²¾åº¦ä¸¢å¤±é—®é¢˜, æ˜¯ç”±äºä½¿ç”¨&lt;code&gt;IEEE 754&lt;/code&gt;æ ‡å‡†æ¥è¡¨ç¤ºå’Œè®¡ç®—æµ®ç‚¹æ•°çš„æ–¹å¼å¼•èµ·çš„ã€‚&lt;strong&gt;è¿™ä¸ªé—®é¢˜ä¸ä»…ä»…åœ¨&lt;code&gt;js&lt;/code&gt;ä¸­å­˜åœ¨ï¼Œè€Œæ˜¯åœ¨æ‰€æœ‰ä½¿ç”¨&lt;code&gt;IEEE 754&lt;/code&gt;æ ‡å‡†çš„ç¼–ç¨‹è¯­è¨€ä¸­éƒ½ä¼šé‡åˆ°ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;code&gt;IEEE 754&lt;/code&gt;æ ‡å‡†å®šä¹‰äº†ä¸¤ç§å¸¸è§çš„æµ®ç‚¹æ•°è¡¨ç¤ºå½¢å¼ï¼šå•ç²¾åº¦ï¼ˆ&lt;code&gt;32&lt;/code&gt;ä½ï¼‰å’ŒåŒç²¾åº¦ï¼ˆ&lt;code&gt;64&lt;/code&gt;ä½ï¼‰ã€‚åœ¨Â &lt;code&gt;js&lt;/code&gt;ä¸­ï¼Œé‡‡ç”¨çš„æ˜¯åŒç²¾åº¦è¡¨ç¤ºæ³•ï¼Œå³&lt;code&gt;64&lt;/code&gt;ä½ã€‚&lt;/p&gt;&lt;p&gt;ç„¶è€Œï¼Œç”±äºäºŒè¿›åˆ¶å’Œåè¿›åˆ¶ä¹‹é—´çš„è½¬æ¢å­˜åœ¨å·®å¼‚ï¼Œ&lt;strong&gt;æŸäº›åè¿›åˆ¶åˆ†æ•°æ— æ³•ç²¾ç¡®è¡¨ç¤ºä¸ºæœ‰é™ä½çš„äºŒè¿›åˆ¶æµ®ç‚¹æ•°ã€‚è¿™å¯¼è‡´äº†èˆå…¥è¯¯å·®å’Œç²¾åº¦ä¸¢å¤±ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;å®‰è£…ä¾èµ–ï¼š&lt;/strong&gt;Â &lt;code&gt;npm install --save big.js&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;æ–¹æ³•å°è£…ï¼š&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;import&lt;/span&gt;Â BigÂ &lt;span&gt;from&lt;/span&gt;Â &lt;span&gt;&#x27;big.js&#x27;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;function&lt;/span&gt;Â &lt;span&gt;accFactory&lt;/span&gt;(&lt;span&gt;methodÂ =Â &lt;span&gt;&#x27;add&#x27;&lt;/span&gt;&lt;/span&gt;)Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;function&lt;/span&gt;Â (&lt;span&gt;...nums&lt;/span&gt;)Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;`å°†ä¼ å…¥çš„å‚æ•°è½¬æ¢ä¸ºNumberç±»å‹ï¼Œå¹¶è¿‡æ»¤æ‰ä¸æ˜¯Numberç±»å‹çš„ç»“æœ`&lt;/span&gt;&lt;br/&gt;Â Â Â Â numsÂ =Â nums.map(&lt;span&gt;Number&lt;/span&gt;).filter(&lt;span&gt;(&lt;span&gt;num&lt;/span&gt;)Â =&amp;gt;&lt;/span&gt;Â numÂ ||Â numÂ ===Â &lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;Â Â Â Â &lt;span&gt;`å¦‚æœè¿‡æ»¤åçš„ç»“æœæ˜¯é•¿åº¦ä¸º1çš„æ•°ç»„ï¼Œé‚£å°±è¿”å›æ•°ç»„çš„ç¬¬ä¸€é¡¹`&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;`å¦‚æœè¿‡æ»¤åçš„ç»“æœä¸ºç©ºæ•°ç»„ï¼Œåˆ™è¿”å›0`&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (nums.lengthÂ &amp;lt;Â &lt;span&gt;2&lt;/span&gt;)Â &lt;span&gt;return&lt;/span&gt;Â nums[&lt;span&gt;0&lt;/span&gt;]Â ||Â &lt;span&gt;0&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;`éœ€è¦ä¸ºreduceæ–¹æ³•èµ‹åˆå€¼ï¼Œæ˜¯å› ä¸ºbig.jsçš„è¿ç®—æ“ä½œï¼Œæ˜¯åŸºäºnewÂ Bigæ ¼å¼çš„æ•°å­—`&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;`å¯ä»¥å°†Bigå¯¹è±¡è½¬æ¢ä¸ºæµ®ç‚¹æ•°ï¼Œæ–¹ä¾¿åç»­Number.toFixed()çš„æ“ä½œ`&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;parseFloat&lt;/span&gt;(nums.slice(&lt;span&gt;1&lt;/span&gt;).reduce(&lt;span&gt;(&lt;span&gt;prev,Â num&lt;/span&gt;)Â =&amp;gt;&lt;/span&gt;Â prev[method](num),Â &lt;span&gt;new&lt;/span&gt;Â Big(nums[&lt;span&gt;0&lt;/span&gt;])))Â ||Â &lt;span&gt;0&lt;/span&gt;&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;`plusã€minusã€timesã€divä¸ºbig.jsä¸­çš„è®¡ç®—æ–¹æ³•ï¼Œåˆ†åˆ«å¯¹åº”åŠ å‡ä¹˜é™¤è¿™å››ä¸ªè¿ç®—æ“ä½œ`&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;`æµ®ç‚¹æ•°æ±‚å’Œ`&lt;/span&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â &lt;span&gt;const&lt;/span&gt;Â accAddÂ =Â accFactory(&lt;span&gt;&#x27;plus&#x27;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;`æµ®ç‚¹æ•°ç›¸å‡`&lt;/span&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â &lt;span&gt;const&lt;/span&gt;Â accSubÂ =Â accFactory(&lt;span&gt;&#x27;minus&#x27;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;`æµ®ç‚¹æ•°ç›¸ä¹˜`&lt;/span&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â &lt;span&gt;const&lt;/span&gt;Â accMulÂ =Â accFactory(&lt;span&gt;&#x27;times&#x27;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;`æµ®ç‚¹æ•°ç›¸é™¤`&lt;/span&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â &lt;span&gt;const&lt;/span&gt;Â accDivÂ =Â accFactory(&lt;span&gt;&#x27;div&#x27;&lt;/span&gt;)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;import&lt;/span&gt;Â {Â accAdd,Â accSub,Â accMul,Â accDivÂ }Â &lt;span&gt;from&lt;/span&gt;Â &lt;span&gt;&#x27;@/utils/calculate&#x27;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;mounted()Â {&lt;br/&gt;Â Â &lt;span&gt;this&lt;/span&gt;.calTestHandler()&lt;br/&gt;},&lt;br/&gt;&lt;br/&gt;&lt;span&gt;methods&lt;/span&gt;:Â {&lt;br/&gt;Â Â calTestHandler()Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;const&lt;/span&gt;Â operationsÂ =Â [&lt;br/&gt;Â Â Â Â Â Â {Â &lt;span&gt;operator&lt;/span&gt;:Â &lt;span&gt;&#x27;+&#x27;&lt;/span&gt;,Â &lt;span&gt;method&lt;/span&gt;:Â accAdd,Â &lt;span&gt;a&lt;/span&gt;:Â &lt;span&gt;0.1&lt;/span&gt;,Â &lt;span&gt;b&lt;/span&gt;:Â &lt;span&gt;0.2&lt;/span&gt;Â },&lt;br/&gt;Â Â Â Â Â Â {Â &lt;span&gt;operator&lt;/span&gt;:Â &lt;span&gt;&#x27;-&#x27;&lt;/span&gt;,Â &lt;span&gt;method&lt;/span&gt;:Â accSub,Â &lt;span&gt;a&lt;/span&gt;:Â &lt;span&gt;0.1&lt;/span&gt;,Â &lt;span&gt;b&lt;/span&gt;:Â &lt;span&gt;0.3&lt;/span&gt;Â },&lt;br/&gt;Â Â Â Â Â Â {Â &lt;span&gt;operator&lt;/span&gt;:Â &lt;span&gt;&#x27;*&#x27;&lt;/span&gt;,Â &lt;span&gt;method&lt;/span&gt;:Â accMul,Â &lt;span&gt;a&lt;/span&gt;:Â &lt;span&gt;0.1&lt;/span&gt;,Â &lt;span&gt;b&lt;/span&gt;:Â &lt;span&gt;0.2&lt;/span&gt;Â },&lt;br/&gt;Â Â Â Â Â Â {Â &lt;span&gt;operator&lt;/span&gt;:Â &lt;span&gt;&#x27;/&#x27;&lt;/span&gt;,Â &lt;span&gt;method&lt;/span&gt;:Â accDiv,Â &lt;span&gt;a&lt;/span&gt;:Â &lt;span&gt;0.1&lt;/span&gt;,Â &lt;span&gt;b&lt;/span&gt;:Â &lt;span&gt;0.3&lt;/span&gt;Â }&lt;br/&gt;Â Â Â Â ]&lt;br/&gt;Â &lt;br/&gt;Â Â Â Â operations.forEach(&lt;span&gt;(&lt;span&gt;operation&lt;/span&gt;)Â =&amp;gt;&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;const&lt;/span&gt;Â {Â operator,Â method,Â a,Â bÂ }Â =Â operation&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;const&lt;/span&gt;Â resultÂ =Â method(a,Â b)&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;console&lt;/span&gt;.log(&lt;span&gt;`åŸç”ŸjsÂ &lt;span&gt;${operator}&lt;/span&gt;Â è¿ç®—ï¼š&lt;span&gt;${a}&lt;/span&gt;Â &lt;span&gt;${operator}&lt;/span&gt;Â &lt;span&gt;${b}&lt;/span&gt;çš„å€¼æ˜¯&lt;span&gt;${&lt;span&gt;eval&lt;/span&gt;(aÂ +Â operatorÂ +Â b)}&lt;/span&gt;`&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;console&lt;/span&gt;.log(&lt;span&gt;`big.jsÂ &lt;span&gt;${operator}&lt;/span&gt;Â è¿ç®—ï¼š&lt;span&gt;${a}&lt;/span&gt;Â &lt;span&gt;${operator}&lt;/span&gt;Â &lt;span&gt;${b}&lt;/span&gt;çš„å€¼æ˜¯&lt;span&gt;${result}&lt;/span&gt;`&lt;/span&gt;)&lt;br/&gt;Â Â Â Â })&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç»“æœå±•ç¤ºï¼š&lt;/strong&gt;&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.43799472295514513&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdiaxHCwGjFomGgrcdx8jRjF4s1O7HuQQMKuyZK8YHwFm30Dvic7WQV0OhuIqPlyh7mT9AEB9XG6UpHw/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;379&quot;/&gt;&lt;figcaption&gt;image.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2&gt;&lt;span&gt;3. ä½¿ç”¨&lt;span&gt;`bluebird`&lt;/span&gt;&lt;span&gt;[2]&lt;/span&gt;æå‡&lt;code&gt;promise&lt;/code&gt;çš„æ‰§è¡Œé€Ÿåº¦&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;bluebird&lt;/code&gt;æ˜¯ä¸€ä¸ªæµè¡Œçš„&lt;code&gt;Promise&lt;/code&gt;åº“ï¼Œç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œã€‚å®ƒæä¾›äº†å¼ºå¤§çš„å¼‚æ­¥ç¼–ç¨‹å·¥å…·ï¼Œä½¿å¾—ç¼–å†™å’Œç®¡ç†å¼‚æ­¥ä»£ç å˜å¾—æ›´åŠ ç®€å•å’Œå¯é ã€‚&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;code&gt;Promise&lt;/code&gt;åŠŸèƒ½å¢å¼ºï¼š&lt;/strong&gt;Â &lt;code&gt;bluebird&lt;/code&gt;æä¾›äº†è®¸å¤šé¢å¤–çš„åŠŸèƒ½å’Œæ“ä½œï¼Œè¶…å‡ºäº†åŸç”Ÿ&lt;code&gt;Promise&lt;/code&gt;çš„èŒƒå›´ã€‚å®ƒæ”¯æŒè¶…æ—¶æ§åˆ¶ã€å¹¶å‘æ§åˆ¶ã€é”™è¯¯å¤„ç†ã€é‡è¯•ã€è¿›åº¦æŠ¥å‘Šå’Œå–æ¶ˆç­‰åŠŸèƒ½ã€‚è¿™äº›åŠŸèƒ½ä½¿å¾—å¤„ç†å¤æ‚çš„å¼‚æ­¥æ§åˆ¶æµå˜å¾—æ›´åŠ å®¹æ˜“ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;æ€§èƒ½ä¼˜åŒ–ï¼š&lt;code&gt;bluebird&lt;/code&gt;åœ¨æ€§èƒ½æ–¹é¢è¿›è¡Œäº†ä¼˜åŒ–ï¼Œæ¯”åŸç”Ÿ&lt;code&gt;Promise&lt;/code&gt;æ›´å¿«ã€‚&lt;/strong&gt;Â å®ƒå®ç°äº†é«˜æ•ˆçš„å¼‚æ­¥è°ƒåº¦å’Œå†…å­˜ç®¡ç†ï¼Œä»¥æä¾›æ›´å¿«çš„æ‰§è¡Œé€Ÿåº¦å’Œæ›´ä½çš„èµ„æºæ¶ˆè€—ã€‚è¿™ä½¿å¾—åœ¨å¤§è§„æ¨¡å¼‚æ­¥æ“ä½œçš„æƒ…å†µä¸‹ï¼Œ&lt;code&gt;bluebird&lt;/code&gt;å¯ä»¥æä¾›æ›´é«˜æ•ˆçš„æ€§èƒ½ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;é”™è¯¯è¿½è¸ªå’Œè°ƒè¯•ï¼š&lt;code&gt;bluebird&lt;/code&gt;æä¾›äº†æ›´å¥½çš„é”™è¯¯è¿½è¸ªå’Œè°ƒè¯•æ”¯æŒã€‚&lt;/strong&gt;Â å½“ä½¿ç”¨&lt;code&gt;bluebird&lt;/code&gt;è¿›è¡Œå¼‚æ­¥æ“ä½œæ—¶ï¼Œå®ƒä¼šç”Ÿæˆè¯¦ç»†çš„é”™è¯¯å †æ ˆè·Ÿè¸ªä¿¡æ¯ï¼ŒåŒ…æ‹¬å¼‚æ­¥æ“ä½œé“¾çš„æ¯ä¸ªæ­¥éª¤ã€‚è¿™ä½¿å¾—åœ¨è°ƒè¯•å’Œæ’æŸ¥é”™è¯¯æ—¶æ›´å®¹æ˜“å®šä½é—®é¢˜æ‰€åœ¨ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;å¯äº’æ“ä½œæ€§ï¼š&lt;code&gt;bluebird&lt;/code&gt;çš„&lt;code&gt;api&lt;/code&gt;ä¸åŸç”Ÿ&lt;code&gt;Promise&lt;/code&gt;ç›¸ä¼¼ï¼Œå› æ­¤å¯ä»¥ä¸å…¶ä»–ä½¿ç”¨&lt;code&gt;Promise&lt;/code&gt;çš„åº“å’Œä»£ç è¿›è¡Œäº’æ“ä½œã€‚&lt;/strong&gt;Â è¿™ä½¿å¾—åœ¨ç°æœ‰çš„ä»£ç åŸºç¡€ä¸Šï¼Œè¿ç§»åˆ°&lt;code&gt;bluebird&lt;/code&gt;æ›´åŠ å®¹æ˜“ï¼Œå¹¶ä¸”å¯ä»¥å……åˆ†åˆ©ç”¨&lt;code&gt;bluebird&lt;/code&gt;æä¾›çš„é¢å¤–åŠŸèƒ½ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;å®‰è£…ä¾èµ–ï¼š&lt;/strong&gt;Â &lt;code&gt;npm install --save bluebird&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;æ–¹æ³•å°è£…(å…¨å±€æŒ‚è½½)ï¼š&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;import&lt;/span&gt;Â &lt;span&gt;Promise&lt;/span&gt;Â &lt;span&gt;from&lt;/span&gt;Â &lt;span&gt;&#x27;bluebird&#x27;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;Promise&lt;/span&gt;.config({&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;`ç¡®å®šæ˜¯å¦å¯ç”¨è­¦å‘Šè¾“å‡ºã€‚å½“è®¾ç½®ä¸ºtrueï¼Œbluebirdä¼šåœ¨æ§åˆ¶å°è¾“å‡ºè­¦å‘Šï¼Œä¾‹å¦‚ä¸æ¨èä½¿ç”¨çš„æ–¹æ³•æˆ–æ½œåœ¨é—®é¢˜`&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;warnings&lt;/span&gt;:Â &lt;span&gt;false&lt;/span&gt;,&lt;br/&gt;Â Â &lt;br/&gt;Â Â &lt;span&gt;`ç¡®å®šæ˜¯å¦å¯ç”¨é•¿å †æ ˆè·Ÿè¸ª,Â bluebirdä¼šç”Ÿæˆè¯¦ç»†çš„å¼‚æ­¥è°ƒç”¨å †æ ˆä¿¡æ¯ï¼ŒåŒ…æ‹¬Promiseé“¾ä¸­çš„æ¯ä¸ªæ­¥éª¤ã€‚`&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;`è¿™å¯¹äºè°ƒè¯•å’Œé”™è¯¯è¿½è¸ªéå¸¸æœ‰ç”¨,Â ä½†å¯ç”¨é•¿å †æ ˆè·Ÿè¸ªï¼Œå¯èƒ½ä¼šå¯¹æ€§èƒ½äº§ç”Ÿä¸€äº›å½±å“`&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;longStackTraces&lt;/span&gt;:Â &lt;span&gt;false&lt;/span&gt;,&lt;br/&gt;Â Â &lt;br/&gt;Â Â &lt;span&gt;`ç¡®å®šæ˜¯å¦å¯ç”¨å–æ¶ˆåŠŸèƒ½ã€‚å½“è®¾ç½®ä¸ºtrueæ—¶ï¼Œbluebirdå…è®¸å–æ¶ˆå¼‚æ­¥æ“ä½œã€‚`&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;`å–æ¶ˆä¸€ä¸ªPromiseå°†å¯¼è‡´å…¶ç›¸å…³çš„æ“ä½œè¢«ä¸­æ–­æˆ–å¿½ç•¥ï¼Œæœ‰åŠ©äºä¼˜åŒ–èµ„æºä½¿ç”¨å’Œæ§åˆ¶å¼‚æ­¥æµç¨‹ã€‚`&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;cancellation&lt;/span&gt;:Â &lt;span&gt;true&lt;/span&gt;,&lt;br/&gt;Â Â &lt;br/&gt;Â Â &lt;span&gt;`ç¡®å®šæ˜¯å¦å¯ç”¨æ€§èƒ½ç›‘è§†ã€‚å½“è®¾ç½®ä¸ºtrueæ—¶ï¼Œbluebirdå¯ä»¥æ”¶é›†å¼‚æ­¥æ“ä½œçš„æ€§èƒ½æ•°æ®ï¼Œä¾‹å¦‚æ‰§è¡Œæ—¶é—´ã€è°ƒç”¨æ¬¡æ•°ç­‰ã€‚`&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;`è¿™å¯¹äºåˆ†æå’Œä¼˜åŒ–å¼‚æ­¥æ“ä½œçš„æ€§èƒ½éå¸¸æœ‰ç”¨ã€‚`&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;monitoring&lt;/span&gt;:Â &lt;span&gt;true&lt;/span&gt;,&lt;br/&gt;Â Â &lt;br/&gt;Â Â &lt;span&gt;`ç¡®å®šæ˜¯å¦å¯ç”¨å¼‚æ­¥æŒ‚é’©ã€‚å¼‚æ­¥æŒ‚é’©æ˜¯node.jsæä¾›çš„ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥åœ¨å¼‚æ­¥æ“ä½œçš„ä¸åŒé˜¶æ®µæ‰§è¡Œå›è°ƒå‡½æ•°ã€‚`&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;`å½“è®¾ç½®ä¸ºtrueæ—¶ï¼Œbluebirdå°†ä½¿ç”¨å¼‚æ­¥æŒ‚é’©æ¥è·Ÿè¸ªå’Œç®¡ç†å¼‚æ­¥æ“ä½œ`&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;asyncHooks&lt;/span&gt;:Â &lt;span&gt;false&lt;/span&gt;&lt;br/&gt;})&lt;br/&gt;&lt;span&gt;window&lt;/span&gt;.bluePromiseÂ =Â &lt;span&gt;Promise&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;`main.js`&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â bluebirdÂ &lt;span&gt;from&lt;/span&gt;Â &lt;span&gt;&#x27;@/utils/bluebird&#x27;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;mounted()Â {&lt;br/&gt;Â &lt;span&gt;this&lt;/span&gt;.proTestHandler()&lt;br/&gt;},&lt;br/&gt;&lt;br/&gt;&lt;span&gt;methods&lt;/span&gt;:Â {&lt;br/&gt;Â Â &lt;span&gt;async&lt;/span&gt;Â proTestHandler()Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;const&lt;/span&gt;Â promisesÂ =Â []&lt;br/&gt;Â Â Â Â &lt;span&gt;const&lt;/span&gt;Â bluebirdsÂ =Â []&lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â &lt;span&gt;const&lt;/span&gt;Â promiseListÂ =Â &lt;span&gt;(&lt;span&gt;promise,Â count,Â arr&lt;/span&gt;)Â =&amp;gt;&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â (&lt;span&gt;let&lt;/span&gt;Â iÂ =Â &lt;span&gt;0&lt;/span&gt;;Â iÂ &amp;lt;Â count;Â i++)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â arr.push(&lt;span&gt;new&lt;/span&gt;Â promise(&lt;span&gt;(&lt;span&gt;resolve&lt;/span&gt;)Â =&amp;gt;&lt;/span&gt;Â resolve(i)))&lt;br/&gt;Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â &lt;span&gt;const&lt;/span&gt;Â generatePromisesÂ =Â &lt;span&gt;&lt;span&gt;()&lt;/span&gt;Â =&amp;gt;&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â promiseList(&lt;span&gt;Promise&lt;/span&gt;,Â &lt;span&gt;1000000&lt;/span&gt;,Â promises)&lt;br/&gt;Â Â Â Â Â Â promiseList(bluePromise,Â &lt;span&gt;1000000&lt;/span&gt;,Â bluebirds)&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â generatePromises()&lt;br/&gt;Â Â Â Â &lt;span&gt;console&lt;/span&gt;.log(&lt;span&gt;&#x27;promise&#x27;&lt;/span&gt;)&lt;br/&gt;Â Â Â Â &lt;span&gt;console&lt;/span&gt;.time()&lt;br/&gt;Â Â Â Â &lt;span&gt;await&lt;/span&gt;Â &lt;span&gt;Promise&lt;/span&gt;.all(promises)&lt;br/&gt;Â Â Â Â &lt;span&gt;console&lt;/span&gt;.timeEnd()&lt;br/&gt;Â Â Â Â &lt;span&gt;console&lt;/span&gt;.log(&lt;span&gt;&#x27;bluebirds&#x27;&lt;/span&gt;)&lt;br/&gt;Â Â Â Â &lt;span&gt;console&lt;/span&gt;.time()&lt;br/&gt;Â Â Â Â &lt;span&gt;await&lt;/span&gt;Â bluePromise.all(bluebirds)&lt;br/&gt;Â Â Â Â &lt;span&gt;console&lt;/span&gt;.timeEnd()&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç»“æœå±•ç¤º&lt;/strong&gt;&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.42346938775510207&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdiaxHCwGjFomGgrcdx8jRjF40CQr7ZdEjePDPUsMa27uMolPQTjwNVuGLQmUcrvLoH5DJiaZic1dtyJw/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;196&quot;/&gt;&lt;figcaption&gt;image.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2&gt;&lt;span&gt;4. ä½¿ç”¨&lt;span&gt;`hashids`&lt;/span&gt;&lt;span&gt;[3]&lt;/span&gt;åŠ å¯†è·¯ç”±&lt;code&gt;id&lt;/code&gt;&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;åœ¨ç½‘å€ä¸Šåº”ç”¨&lt;code&gt;hashids&lt;/code&gt;æœ‰ä»¥ä¸‹&lt;code&gt;4&lt;/code&gt;ç‚¹é‡è¦æ„ä¹‰ï¼š&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;åŠ å¯†éšè—çœŸå®idï¼š&lt;/strong&gt;Â åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½å¸Œæœ›éšè—ç½‘å€ä¸­çš„çœŸå®&lt;code&gt;id&lt;/code&gt;ï¼Œä»¥å¢åŠ å®‰å…¨æ€§å’Œé˜²æ­¢ç›´æ¥æš´éœ²æ•æ„Ÿä¿¡æ¯ã€‚ä½¿ç”¨&lt;code&gt;hashids&lt;/code&gt;ï¼Œå¯ä»¥å°†çœŸå®çš„æ•°å­—&lt;code&gt;id&lt;/code&gt;è½¬æ¢ä¸ºçŸ­å­—ç¬¦ä¸²ï¼Œå¹¶åœ¨ç½‘å€ä¸­ä½¿ç”¨è¯¥çŸ­å­—ç¬¦ä¸²ä»£æ›¿åŸå§‹&lt;code&gt;id&lt;/code&gt;ã€‚è¿™æ ·ï¼Œå¤–éƒ¨ç”¨æˆ·åªèƒ½çœ‹åˆ°çŸ­å­—ç¬¦ä¸²ï¼Œè€Œæ— æ³•ç›´æ¥æ¨æ–­å‡ºçœŸå®çš„&lt;code&gt;id&lt;/code&gt;å€¼ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;å¯è¯»æ€§å’Œç¾è§‚æ€§ï¼š&lt;/strong&gt;Â é•¿çš„æ•°å­—&lt;code&gt;id&lt;/code&gt;åœ¨ç½‘å€ä¸­å¯èƒ½æ˜¾å¾—å†—é•¿å’Œéš¾ä»¥ç†è§£ã€‚ä½¿ç”¨&lt;code&gt;hashids&lt;/code&gt;å°†å…¶è½¬æ¢ä¸ºçŸ­å­—ç¬¦ä¸²ï¼Œå¯ä»¥å¤§å¤§æå‡ç½‘å€çš„å¯è¯»æ€§å’Œç¾è§‚æ€§ã€‚çŸ­å­—ç¬¦ä¸²é€šå¸¸åŒ…å«å­—æ¯å’Œæ•°å­—çš„ç»„åˆï¼Œæ›´æ˜“äºè®°å¿†å’Œåˆ†äº«ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;é˜²æ­¢çŒœæµ‹å’Œéå†ï¼š&lt;/strong&gt;Â ä½¿ç”¨è¿ç»­çš„æ•°å­—&lt;code&gt;id&lt;/code&gt;åœ¨ç½‘å€ä¸­å¯èƒ½å¯¼è‡´çŒœæµ‹å’Œéå†çš„é£é™©ï¼Œå› ä¸ºæ”»å‡»è€…å¯ä»¥é€šè¿‡é€’å¢&lt;code&gt;id&lt;/code&gt;æ¥å°è¯•è®¿é—®å’Œæš´éœ²æ•°æ®ã€‚é€šè¿‡ä½¿ç”¨&lt;code&gt;hashids&lt;/code&gt;ç”Ÿæˆçš„çŸ­å­—ç¬¦ä¸²ä½œä¸º&lt;code&gt;id&lt;/code&gt;ï¼Œå¯ä»¥æœ‰æ•ˆåœ°é˜²æ­¢è¿™ç§æ”»å‡»ã€‚ç”±äºçŸ­å­—ç¬¦ä¸²æ˜¯éšæœºç”Ÿæˆçš„ï¼Œæ”»å‡»è€…æ— æ³•æ ¹æ®çŸ­å­—ç¬¦ä¸²æ¨æ–­å‡ºä¸‹ä¸€ä¸ª&lt;code&gt;id&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;URLç¼©çŸ­å’Œåˆ†äº«ï¼š&lt;/strong&gt;Â &lt;code&gt;hashids&lt;/code&gt;ç”Ÿæˆçš„çŸ­å­—ç¬¦ä¸²å¯ä»¥ç”¨ä½œ&lt;code&gt;url&lt;/code&gt;ç¼©çŸ­æœåŠ¡çš„æ›¿ä»£æ–¹æ¡ˆã€‚ä½ å¯ä»¥å°†é•¿çš„&lt;code&gt;url&lt;/code&gt;è½¬æ¢ä¸ºçŸ­å­—ç¬¦ä¸²ï¼Œå¹¶åœ¨åˆ†äº«æ—¶ä½¿ç”¨è¯¥çŸ­å­—ç¬¦ä¸²ã€‚è¿™å¯¹äºé™åˆ¶å­—ç¬¦æ•°ã€ç®€åŒ–é“¾æ¥ä»¥åŠåœ¨ç¤¾äº¤åª’ä½“å’ŒçŸ­ä¿¡ä¸­å…±äº«é“¾æ¥éƒ½éå¸¸æœ‰ç”¨ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;å®‰è£…ä¾èµ–ï¼š&lt;/strong&gt;Â &lt;code&gt;npm install --save hashids&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;æ–¹æ³•å°è£…(å…¨å±€æŒ‚è½½)ï¼š&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;`çŸ­ç æ–¹æ³•å°è£…ï¼š`&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â HashidsÂ &lt;span&gt;from&lt;/span&gt;Â &lt;span&gt;&#x27;hashids&#x27;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;const&lt;/span&gt;Â hashidsÂ =Â &lt;span&gt;new&lt;/span&gt;Â Hashids(&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;`ç›å€¼æ˜¯ä¸€ä¸ªå¯é€‰çš„å­—ç¬¦ä¸²å‚æ•°ï¼Œç”¨äºå¢åŠ ç”Ÿæˆçš„çŸ­ç çš„å”¯ä¸€æ€§å’Œå®‰å…¨æ€§ã€‚æ¯ä¸ªä¸åŒçš„ç›å€¼å°†äº§ç”Ÿä¸åŒçš„çŸ­ç åºåˆ—,`&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;`å¯ä»¥å°†ç›å€¼è§†ä¸ºé¡¹ç›®çš„åç§°æˆ–æ ‡è¯†ç¬¦ã€‚å¦‚æœä¸æä¾›ç›å€¼ï¼Œåˆ™é»˜è®¤ä¸ºä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚`&lt;/span&gt;&lt;br/&gt;Â Â &lt;br/&gt;Â Â &lt;span&gt;&#x27;toadditWeb&#x27;&lt;/span&gt;,Â &lt;br/&gt;Â Â &lt;br/&gt;Â Â &lt;span&gt;`æ˜¯ä¸€ä¸ªå¯é€‰çš„æ•´æ•°å‚æ•°ï¼Œç”¨äºæŒ‡å®šç”Ÿæˆçš„çŸ­ç çš„æœ€å°é•¿åº¦ã€‚å¦‚æœç”Ÿæˆçš„çŸ­ç é•¿åº¦å°äºæŒ‡å®šçš„æœ€å°é•¿åº¦ï¼Œ`&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;`hashidsä¼šè‡ªåŠ¨å¡«å……çŸ­ç ä»¥è¾¾åˆ°æœ€å°é•¿åº¦ã€‚è¿™åªæ˜¯ä¸€ä¸ªæœ€å°é•¿åº¦çš„é™åˆ¶ï¼Œå®é™…ç”Ÿæˆçš„çŸ­ç é•¿åº¦å¯èƒ½æ›´é•¿ã€‚`&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;`å¦‚æœä¸æä¾›æœ€å°é•¿åº¦ï¼Œåˆ™é»˜è®¤ä¸º0ï¼Œå³æ²¡æœ‰æœ€å°é•¿åº¦é™åˆ¶ã€‚`&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;8&lt;/span&gt;,Â &lt;br/&gt;Â Â &lt;br/&gt;Â Â &lt;span&gt;`å­—æ¯è¡¨æ˜¯ä¸€ä¸ªå¯é€‰çš„å­—ç¬¦ä¸²å‚æ•°ï¼Œç”¨äºå®šä¹‰ç”ŸæˆçŸ­ç æ—¶ä½¿ç”¨çš„å­—ç¬¦é›†ã€‚è¯¥å­—ç¬¦ä¸²åŒ…å«æ‰€æœ‰å¯ç”¨äºç”ŸæˆçŸ­ç çš„å­—ç¬¦ã€‚`&lt;/span&gt;Â &lt;br/&gt;Â Â &lt;span&gt;`é€šå¸¸ï¼Œå­—æ¯è¡¨ä¸­åº”åŒ…å«ä¸€ç»„ä¸å®¹æ˜“æ··æ·†çš„å­—ç¬¦ï¼Œä»¥é¿å…ç”Ÿæˆçš„çŸ­ç äº§ç”Ÿæ­§ä¹‰ã€‚å¦‚æœä¸æä¾›å­—æ¯è¡¨ï¼Œåˆ™é»˜è®¤ä¸º`&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;`&quot;abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890&quot;`&lt;/span&gt;ã€‚&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;`çŸ­ç å°è£…`&lt;/span&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;function&lt;/span&gt;Â &lt;span&gt;encode&lt;/span&gt;(&lt;span&gt;val&lt;/span&gt;)Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â hashids.encode(val)&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;`çŸ­ç è§£æ`&lt;/span&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;function&lt;/span&gt;Â &lt;span&gt;decode&lt;/span&gt;(&lt;span&gt;val&lt;/span&gt;)Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â hashids.decode(val)[&lt;span&gt;0&lt;/span&gt;]&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;`glboal.js:Â å…¨å±€æ³¨å†Œ`&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â {Â encode,Â decodeÂ }Â &lt;span&gt;from&lt;/span&gt;Â &lt;span&gt;&#x27;@/utils/hashids&#x27;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â &lt;span&gt;default&lt;/span&gt;Â {&lt;br/&gt;Â Â install(Vue)Â {&lt;br/&gt;Â Â Â Â Vue.prototype.$encodeÂ =Â &lt;span&gt;window&lt;/span&gt;.$encodeÂ =Â &lt;span&gt;(&lt;span&gt;data&lt;/span&gt;)Â =&amp;gt;&lt;/span&gt;Â encode(data)&lt;br/&gt;Â Â Â Â Vue.prototype.$decodeÂ =Â &lt;span&gt;window&lt;/span&gt;.$decodeÂ =Â &lt;span&gt;(&lt;span&gt;data&lt;/span&gt;)Â =&amp;gt;&lt;/span&gt;Â decode(data)&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;`åœ¨main.jsä¸­æŒ‚è½½ï¼š`&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â VueÂ &lt;span&gt;from&lt;/span&gt;Â &lt;span&gt;&#x27;vue&#x27;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â AppÂ &lt;span&gt;from&lt;/span&gt;Â &lt;span&gt;&#x27;./App&#x27;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â globalConstÂ &lt;span&gt;from&lt;/span&gt;Â &lt;span&gt;&#x27;@/commons/globalConst&#x27;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Vue.use(globalConst)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;new&lt;/span&gt;Â Vue({&lt;br/&gt;Â Â &lt;span&gt;el&lt;/span&gt;:Â &lt;span&gt;&#x27;#app&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â router,&lt;br/&gt;Â Â store,&lt;br/&gt;Â Â &lt;span&gt;render&lt;/span&gt;:Â &lt;span&gt;(&lt;span&gt;h&lt;/span&gt;)Â =&amp;gt;&lt;/span&gt;Â h(App)&lt;br/&gt;})&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;&lt;br/&gt;mounted()Â {&lt;br/&gt;Â Â &lt;span&gt;this&lt;/span&gt;.hashTestHandler()&lt;br/&gt;},&lt;br/&gt;&lt;br/&gt;&lt;span&gt;methods&lt;/span&gt;:Â {&lt;br/&gt;Â Â hashTestHandler()Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;const&lt;/span&gt;Â testIdÂ =Â &lt;span&gt;18&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;const&lt;/span&gt;Â encodeÂ =Â $encode(testId)&lt;br/&gt;Â Â Â Â &lt;span&gt;console&lt;/span&gt;.log(&lt;span&gt;`hashidsç¼–ç å‰:Â &lt;span&gt;${testId}&lt;/span&gt;`&lt;/span&gt;)&lt;br/&gt;Â Â Â Â &lt;span&gt;console&lt;/span&gt;.log(&lt;span&gt;`hashidsç¼–ç :Â &lt;span&gt;${encode}&lt;/span&gt;`&lt;/span&gt;)&lt;br/&gt;Â Â Â Â &lt;span&gt;console&lt;/span&gt;.log(&lt;span&gt;`hashidsè§£ç :Â &lt;span&gt;${$decode(encode)}&lt;/span&gt;`&lt;/span&gt;)&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;ç»“æœå±•ç¤º(&lt;code&gt;åœ¨åŒä¸€ä¸ªç›å€¼ä¸‹ï¼Œä¸ç®¡é¡µé¢æ˜¯å¦åˆ·æ–°ï¼Œç¼–ç ç»“æœéƒ½ä¸ä¼šæ”¹å˜&lt;/code&gt;):&lt;/strong&gt;&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.35802469135802467&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdiaxHCwGjFomGgrcdx8jRjF4BrkMfNWsakOoLNBYKOaN92Laxq8E0h7rjiczfag0K0I0rQQIod2cfSQ/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;162&quot;/&gt;&lt;figcaption&gt;image.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2&gt;&lt;span&gt;5. ç™»é™†æ—¶ä½¿ç”¨&lt;span&gt;`è¡Œä¸ºéªŒè¯ç `&lt;/span&gt;&lt;span&gt;[4]&lt;/span&gt;&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;ç™»é™†æ—¶ä½¿ç”¨&lt;code&gt;è¡Œä¸ºéªŒè¯ç &lt;/code&gt;æœ‰ä»¥ä¸‹&lt;code&gt;5&lt;/code&gt;ç‚¹é‡è¦æ„ä¹‰ï¼š&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;å¢å¼ºå®‰å…¨æ€§ï¼š&lt;/strong&gt;Â ä¼ ç»Ÿçš„éªŒè¯ç å¯ä»¥è¢«è‡ªåŠ¨åŒ–çš„æœºå™¨äººæˆ–æ¶æ„ç¨‹åºè½»æ˜“åœ°ç ´è§£æˆ–ç»•è¿‡ã€‚è€Œ&lt;code&gt;è¡Œä¸ºéªŒè¯ç &lt;/code&gt;é€šè¿‡åˆ†æç”¨æˆ·çš„è¡Œä¸ºæ¨¡å¼ï¼Œå¯ä»¥æ›´å‡†ç¡®åœ°è¯†åˆ«æ˜¯å¦æ˜¯çœŸå®ç”¨æˆ·ï¼Œä»è€Œæé«˜å®‰å…¨æ€§ï¼Œé˜²æ­¢æ¶æ„æ´»åŠ¨å’Œæœºå™¨äººæ”»å‡»ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;ç”¨æˆ·å‹å¥½æ€§ï¼š&lt;/strong&gt;Â ç›¸æ¯”äºä¼ ç»Ÿçš„éªŒè¯ç ï¼Œ&lt;code&gt;è¡Œä¸ºéªŒè¯ç &lt;/code&gt;é€šå¸¸å¯¹ç”¨æˆ·æ¥è¯´æ›´åŠ å‹å¥½å’Œä¾¿æ·ã€‚ç”¨æˆ·æ— éœ€è¾“å…¥å¤æ‚çš„æ–‡æœ¬æˆ–è§£ææ¨¡ç³Šçš„å›¾åƒï¼Œè€Œæ˜¯é€šè¿‡æ­£å¸¸çš„äº¤äº’è¡Œä¸ºå®ŒæˆéªŒè¯ï¼Œä¾‹å¦‚ç®€å•çš„æ»‘åŠ¨ã€ç‚¹å‡»ã€æ‹–æ‹½ç­‰æ“ä½œã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;æ— æ„ŸçŸ¥éªŒè¯ï¼š&lt;/strong&gt;Â &lt;code&gt;è¡Œä¸ºéªŒè¯ç &lt;/code&gt;å¯ä»¥åœ¨ç”¨æˆ·è¿›è¡Œæ­£å¸¸çš„æ“ä½œè¿‡ç¨‹ä¸­è¿›è¡ŒéªŒè¯ï¼Œå‡ ä¹æ— éœ€ç”¨æˆ·é¢å¤–çš„å¹²é¢„æˆ–æ³¨æ„ã€‚è¿™æ ·å¯ä»¥å‡å°‘å¯¹ç”¨æˆ·çš„å¹²æ‰°å’Œé˜»ç¢ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;è‡ªé€‚åº”æ€§ï¼š&lt;/strong&gt;Â &lt;code&gt;è¡Œä¸ºéªŒè¯ç &lt;/code&gt;å¯ä»¥æ ¹æ®ç”¨æˆ·çš„è¡Œä¸ºæ¨¡å¼è‡ªé€‚åº”åœ°è¿›è¡ŒéªŒè¯ã€‚å®ƒå¯ä»¥æ ¹æ®ç”¨æˆ·çš„è®¾å¤‡ã€IPåœ°å€ã€æµè§ˆå™¨æŒ‡çº¹ã€é¼ æ ‡ç§»åŠ¨è½¨è¿¹ç­‰å› ç´ æ¥ç»¼åˆè¯„ä¼°ç”¨æˆ·çš„çœŸå®æ€§ï¼Œä»è€Œæé«˜å‡†ç¡®æ€§å’Œå®‰å…¨æ€§ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;é˜²æ­¢æ•°æ®æ»¥ç”¨ï¼š&lt;/strong&gt;Â &lt;code&gt;è¡Œä¸ºéªŒè¯ç &lt;/code&gt;å¯ä»¥ç”¨äºé˜²æ­¢æ¶æ„ç”¨æˆ·æˆ–æ”»å‡»è€…æ»¥ç”¨ç³»ç»Ÿæˆ–æœåŠ¡ã€‚é€šè¿‡åˆ†æç”¨æˆ·çš„è¡Œä¸ºæ¨¡å¼å’Œäº¤äº’æ–¹å¼ï¼Œå¯ä»¥åŠæ—¶è¯†åˆ«å’Œé˜»æ­¢å¼‚å¸¸è¡Œä¸ºï¼Œä¿æŠ¤ç³»ç»Ÿå’Œæ•°æ®çš„å®‰å…¨ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;pre&gt;&lt;code&gt;å‰ç«¯å‚è€ƒæ–‡æ¡£ï¼šhttps:&lt;span&gt;//github.com/Yunlingfly/vue-captcha/tree/master&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;æœ€ç»ˆæ•ˆæœï¼š&lt;/strong&gt;&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5865384615384616&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdiaxHCwGjFomGgrcdx8jRjF4ciaZtLZn7GRWeAZlT0826KDoHKRajTV2YibO58iaxXpcxOlHL9tutPFpQ/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;728&quot;/&gt;&lt;figcaption&gt;image.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;blockquote&gt;&lt;p&gt;ä½œè€…ï¼šæ²æµ´åœ¨æ›™å…‰ä¸‹çš„è´°è´§é“å£«Â &lt;/p&gt;&lt;p&gt;é“¾æ¥ï¼šhttps://juejin.cn/post/7264440609129119804Â &lt;/p&gt;&lt;p&gt;æ¥æºï¼šç¨€åœŸæ˜é‡‘Â &lt;/p&gt;&lt;/blockquote&gt;&lt;h2&gt;&lt;span&gt;ç»“è¯­&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;h2&gt;&lt;span&gt;ç»“è¯­&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;æˆ‘æ˜¯æ—ä¸‰å¿ƒ&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ä¸€ä¸ªå¾…è¿‡&lt;strong&gt;å°å‹toGå‹å¤–åŒ…å…¬å¸ã€å¤§å‹å¤–åŒ…å…¬å¸ã€å°å…¬å¸ã€æ½œåŠ›å‹åˆ›ä¸šå…¬å¸ã€å¤§å…¬å¸&lt;/strong&gt;çš„ä½œæ­»å‹å‰ç«¯é€‰æ‰‹ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸€ä¸ªåå‰ç«¯çš„å…¨å¹²å·¥ç¨‹å¸ˆï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸€ä¸ªä¸æ­£ç»çš„æ˜é‡‘ä½œè€…ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é€—æ¯”çš„Bç«™upä¸»ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸å¸…çš„å°çº¢ä¹¦åšä¸»ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å–œæ¬¢æ‰“é“çš„ç¯®çƒèœé¸Ÿï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å–œæ¬¢å†å²çš„ä¹å‘³å°‘å¹´ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å–œæ¬¢rapçš„äº”éŸ³ä¸å…¨å¼±é¸¡&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;å¦‚æœä½ æƒ³ä¸€èµ·å­¦ä¹ å‰ç«¯ï¼Œä¸€èµ·æ‘¸é±¼ï¼Œä¸€èµ·ç ”ç©¶ç®€å†ä¼˜åŒ–ï¼Œä¸€èµ·ç ”ç©¶é¢è¯•è¿›æ­¥ï¼Œä¸€èµ·äº¤æµå†å²éŸ³ä¹ç¯®çƒrapï¼Œå¯ä»¥æ¥ä¿ºçš„æ‘¸é±¼å­¦ä¹ ç¾¤å“ˆå“ˆï¼Œç‚¹è¿™ä¸ªï¼Œæœ‰7000å¤šåå‰ç«¯å°ä¼™ä¼´åœ¨ç­‰ç€ä¸€èµ·å­¦ä¹ å“¦ --&amp;gt;Â &lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.3190954773869348&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/TZL4BdZpLdgpicInf3LddZb1L01E3HchGy1pbwyVicwoh59PQnIC5s7kuReOU1mchh2uiaWPFeUjtlvvmmtbB8few/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1194&quot;/&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mp-common-profile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;Mzg2NjY2NTcyNg==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/TZL4BdZpLdjaCTEjQdxnaIlEWiaGcw9zNV7AHZGgp5q9U0zPf3cmcIgBRYG1n2ydEBHJGgl8nEA1bKiaj1fibK2EA/0?wx_fmt=png&quot; data-nickname=&quot;å‰ç«¯ä¹‹ç¥&quot; data-alias=&quot;Sunshine_Lin_God&quot; data-signature=&quot;ä¸€ä½å‰ç«¯å°èœé¸¡ï¼Œå†™è¿‡100å¤šç¯‡åŸåˆ›æ–‡ç« ï¼Œå…¨ç½‘æœ‰5w+ä¸ªå‰ç«¯æœ‹å‹ï¼Œæ¢¦æƒ³æ˜¯æˆä¸ºâ€å‰ç«¯ä¹‹ç¥â€œ~&quot; data-from=&quot;0&quot; data-is_biz_ban=&quot;0&quot;/&gt;&lt;/section&gt;&lt;blockquote&gt;&lt;p&gt;å¹¿å·çš„å…„å¼Ÿå¯ä»¥çº¦é¥­å“¦ï¼Œæˆ–è€…çº¦çƒ~æˆ‘è´Ÿè´£æ‰“é“ï¼Œä½ è´Ÿè´£è¿›çƒï¼Œè°¢è°¢~&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote&gt;&lt;p&gt;&lt;strong&gt;æ¨¡æ‹Ÿé¢è¯•ã€ç®€å†æŒ‡å¯¼ã€å…¥èŒæŒ‡å¯¼ã€é¡¹ç›®æŒ‡å¯¼ã€ç­”ç–‘è§£æƒ‘&lt;/strong&gt;å¯ç§ä¿¡æ‰¾æˆ‘~å·²å¸®åŠ©100+ååŒå­¦å®Œæˆæ”¹é€ ï¼&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;mp-style-type data-value=&quot;3&quot;/&gt;&lt;/p&gt;&lt;/div&gt;

          
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>8f552a38f80501e94819493208aa79e3</guid>
<title>JVM å†…å­˜å¤§å¯¹è±¡ç›‘æ§å’Œä¼˜åŒ–å®è·µ</title>
<link>https://toutiao.io/k/b8nerwy</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;ä½œè€…ï¼š&lt;/p&gt;&lt;p&gt;vivo äº’è”ç½‘æœåŠ¡å™¨å›¢é˜Ÿ - Liu Zhenã€Ye Wenhao&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;æœåŠ¡å™¨å†…å­˜é—®é¢˜æ˜¯å½±å“åº”ç”¨ç¨‹åºæ€§èƒ½å’Œç¨³å®šæ€§çš„é‡è¦å› ç´ ä¹‹ä¸€ï¼Œéœ€è¦åŠæ—¶æ’æŸ¥å’Œä¼˜åŒ–ã€‚æœ¬æ–‡ä»‹ç»äº†æŸæ ¸å¿ƒæœåŠ¡å†…å­˜é—®é¢˜æ’æŸ¥ä¸è§£å†³è¿‡ç¨‹ã€‚é¦–å…ˆåœ¨JVMä¸å¤§å¯¹è±¡ä¼˜åŒ–ä¸Šè¿›è¡Œäº†æœ‰æ•ˆçš„å®è·µï¼Œå…¶æ¬¡åœ¨æ•…éšœè½¬ç§»ä¸å¤§å¯¹è±¡ç›‘æ§ä¸Šæå‡ºäº†å¯é çš„è½åœ°æ–¹æ¡ˆã€‚æœ€åï¼Œæ€»ç»“äº†å†…å­˜ä¼˜åŒ–éœ€è¦è€ƒè™‘çš„å…¶ä»–é—®é¢˜ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;ä¸€ã€é—®é¢˜æè¿°&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;éŸ³ä¹ä¸šåŠ¡ä¸­ï¼ŒcoreæœåŠ¡ä¸»è¦æä¾›æ­Œæ›²ã€æ­Œæ‰‹ç­‰å…ƒæ•°æ®ä¸ç”¨æˆ·èµ„äº§æŸ¥è¯¢ã€‚éšç€å…ƒæ•°æ®ä¸ç”¨æˆ·èµ„äº§æŸ¥è¯¢é‡çš„å¢é•¿ï¼Œä¸€äº›JVMå†…å­˜é—®é¢˜ä¹Ÿé€æ¸æ˜¾éœ²ï¼Œä¾‹å¦‚GCé¢‘ç¹ã€è€—æ—¶é•¿ï¼Œåœ¨é«˜å³°æœŸRPCè°ƒç”¨è¶…æ—¶ç­‰é—®é¢˜ï¼Œå¯¼è‡´ä¸šåŠ¡æ ¸å¿ƒåŠŸèƒ½å—æŸã€‚&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.3388888888888889&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/4g5IMGibSxt5nibZianRN5pckGaRIKNvG94CttVva2gc08zTscL7xtI65tXfrqkhxnts7as51BOibrM4utib95MtUKQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;span&gt;å›¾1 ä¸šåŠ¡å¼‚å¸¸æ•°é‡å˜åŒ–&lt;/span&gt;&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;äºŒã€åˆ†æä¸è§£å†³&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;é€šè¿‡å¯¹æ—¥å¿—ï¼Œæœºå™¨CPUã€å†…å­˜ç­‰ç›‘æ§æ•°æ®åˆ†æå‘ç°ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;YGCå¹³å‡æ¯åˆ†é’Ÿæ¬¡æ•°12æ¬¡ï¼Œå³°å€¼ä¸º24æ¬¡ï¼Œå¹³å‡æ¯æ¬¡çš„è€—æ—¶åœ¨327æ¯«ç§’ã€‚FGCå¹³å‡æ¯10åˆ†é’Ÿ0.08æ¬¡ï¼Œå³°å€¼1æ¬¡ï¼Œå¹³å‡è€—æ—¶30ç§’ã€‚å¯ä»¥çœ‹åˆ°GCé—®é¢˜è¾ƒä¸ºçªå‡ºã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åœ¨é—®é¢˜æœŸé—´ï¼Œæœºå™¨çš„CPUå¹¶æ²¡æœ‰æ˜æ˜¾çš„å˜åŒ–ï¼Œä½†æ˜¯å †å†…å­˜å‡ºç°è¾ƒå¤§å¼‚å¸¸ã€‚å›¾2ï¼Œé»„è‰²åœ†åœˆå¤„ï¼Œå†…å­˜ä½¿ç”¨æ€¥é€Ÿä¸Šå‡ï¼ŒFGCå˜çš„é¢‘ç¹ï¼Œé‡Šæ”¾çš„å†…å­˜è¶Šæ¥è¶Šå°‘ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.29074074074074074&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/4g5IMGibSxt5nibZianRN5pckGaRIKNvG94UQJX4ibiahJfV7y3r9FGs8amY7P2cSJowuzOvV8fVrQOwWoMvIgmrOjg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;span&gt;å›¾2 è€å¹´ä»£å†…å­˜ä½¿ç”¨å¼‚å¸¸&lt;/span&gt;&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;å› æ­¤ï¼Œæˆ‘ä»¬è®¤ä¸ºä¸šåŠ¡åŠŸèƒ½å¼‚å¸¸æ˜¯æœºå™¨çš„å†…å­˜é—®é¢˜å¯¼è‡´çš„ï¼Œéœ€è¦å¯¹æœåŠ¡çš„å†…å­˜åšä¸€æ¬¡ä¸“é¡¹ä¼˜åŒ–ã€‚&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;æ­¥éª¤1Â  JVMä¼˜åŒ–&lt;/p&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;ä»¥ä¸‹æ˜¯é»˜è®¤çš„JVMå‚æ•°ï¼š&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;-Xms4096MÂ -Xmx4096MÂ -Xmn1024MÂ -XX:MetaspaceSize=&lt;span class=&quot;code-snippet__number&quot;&gt;256&lt;/span&gt;MÂ -Djava.security.egd=file:&lt;span class=&quot;code-snippet__regexp&quot;&gt;/dev/&lt;/span&gt;./urandomÂ -XX:+HeapDumpOnOutOfMemoryErrorÂ -XX:HeapDumpPath=&lt;span class=&quot;code-snippet__regexp&quot;&gt;/data/&lt;/span&gt;{runuser}/logs/other&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;å¦‚æœä¸æŒ‡å®šåƒåœ¾æ”¶é›†å™¨ï¼Œé‚£ä¹ˆJDK 8é»˜è®¤é‡‡ç”¨çš„æ˜¯Parallel Scavengeï¼ˆæ–°ç”Ÿä»£ï¼‰ +Parallel Oldï¼ˆè€å¹´ä»£ï¼‰ï¼Œè¿™ç§ç»„åˆåœ¨å¤šæ ¸CPUä¸Šå……åˆ†åˆ©ç”¨å¤šçº¿ç¨‹å¹¶è¡Œçš„ä¼˜åŠ¿ï¼Œæé«˜åƒåœ¾å›æ”¶çš„æ•ˆç‡å’Œååé‡ã€‚ä½†æ˜¯ï¼Œç”±äºé‡‡ç”¨å¤šçº¿ç¨‹å¹¶è¡Œæ–¹å¼ï¼Œä¼šé€ æˆä¸€å®šçš„åœé¡¿æ—¶é—´ï¼Œä¸é€‚åˆå¯¹å“åº”æ—¶é—´è¦æ±‚è¾ƒé«˜çš„åº”ç”¨ç¨‹åºã€‚ç„¶è€Œï¼Œcoreè¿™ç±»çš„æœåŠ¡ç‰¹ç‚¹æ˜¯å¯¹è±¡æ•°é‡å¤šï¼Œç”Ÿå‘½å‘¨æœŸçŸ­ã€‚åœ¨ç³»ç»Ÿç‰¹ç‚¹ä¸Šï¼Œååé‡è¾ƒä½ï¼Œè¦æ±‚æ—¶å»¶ä½ã€‚å› æ­¤ï¼Œé»˜è®¤çš„JVMå‚æ•°å¹¶ä¸é€‚åˆcoreæœåŠ¡ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ ¹æ®ä¸šåŠ¡çš„ç‰¹ç‚¹å’Œå¤šæ¬¡å¯¹ç…§å®éªŒï¼Œé€‰æ‹©äº†å¦‚ä¸‹å‚æ•°è¿›è¡ŒJVMä¼˜åŒ–ï¼ˆ4æ ¸8Gçš„æœºå™¨ï¼‰ã€‚è¯¥å‚æ•°å°†youngåŒºè®¾ä¸ºåŸæ¥çš„1.5å€ï¼Œå‡å°‘äº†è¿›å…¥è€å¹´ä»£çš„å¯¹è±¡æ•°é‡ã€‚å°†åƒåœ¾å›æ”¶å™¨æ¢æˆParNew+CMSï¼Œå¯ä»¥å‡å°‘YGCçš„æ¬¡æ•°ï¼Œé™ä½åœé¡¿æ—¶é—´ã€‚æ­¤å¤–è¿˜å¼€å¯äº†CMSScavengeBeforeRemarkï¼Œåœ¨CMSçš„é‡æ–°æ ‡è®°é˜¶æ®µè¿›è¡Œä¸€æ¬¡YGCï¼Œä»¥å‡å°‘é‡æ–°æ ‡è®°çš„æ—¶é—´ã€‚&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;-Xms4096MÂ -Xmx4096MÂ -Xmn1536MÂ -XX:MetaspaceSize=&lt;span class=&quot;code-snippet__number&quot;&gt;256&lt;/span&gt;MÂ -XX:+UseConcMarkSweepGCÂ -XX:+CMSScavengeBeforeRemarkÂ -Djava.security.egd=file:&lt;span class=&quot;code-snippet__regexp&quot;&gt;/dev/&lt;/span&gt;./urandomÂ -XX:+HeapDumpOnOutOfMemoryErrorÂ -XX:HeapDumpPath=&lt;span class=&quot;code-snippet__regexp&quot;&gt;/data/&lt;/span&gt;{runuser}/logs/other&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.275&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/4g5IMGibSxt5nibZianRN5pckGaRIKNvG942x1efThPHuPOiaE11HstGaXlyHy4mxOibAyh3WwWnxWz69wpfZazylMg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å›¾3 JVMä¼˜åŒ–å‰åçš„å †å†…å­˜å¯¹æ¯”&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;ä¼˜åŒ–åæ•ˆæœå¦‚å›¾3ï¼Œå †å†…å­˜çš„ä½¿ç”¨æ˜æ˜¾é™ä½ï¼Œä½†æ˜¯Dubboè¶…æ—¶ä»ç„¶å­˜åœ¨ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬æ¨æ–­ï¼Œåœ¨ä¸šåŠ¡é«˜å³°æœŸï¼Œè¯¥èŠ‚ç‚¹å‡ºç°äº†å¤§å¯¹è±¡æ™‹å‡åˆ°äº†è€å¹´ä»£ï¼Œå¯¼è‡´å†…å­˜ä½¿ç”¨è¿…é€Ÿä¸Šå‡ï¼Œå¹¶ä¸”å¤§å¯¹è±¡æ²¡æœ‰è¢«åŠæ—¶å›æ”¶ã€‚é‚£å¦‚ä½•æ‰¾åˆ°è¿™ä¸ªå¤§å¯¹è±¡åŠå…¶äº§ç”Ÿçš„åŸå› å‘¢ï¼Ÿä¸ºäº†é™ä½é—®é¢˜æ’æŸ¥æœŸé—´ä¸šåŠ¡çš„æŸå¤±ï¼Œæå‡ºäº†ä¸´æ—¶çš„æ•…éšœè½¬ç§»ç­–ç•¥ï¼Œå°½é‡é™ä½å¼‚å¸¸æ•°é‡ã€‚&lt;/p&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;æ­¥éª¤2Â  æ•…éšœè½¬ç§»ç­–ç•¥&lt;/p&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;åœ¨apiæœåŠ¡è°ƒç”¨coreæœåŠ¡å‡ºç°å¼‚å¸¸æ—¶ï¼Œå°†å‡ºç°å¼‚å¸¸çš„æœºå™¨ipä¸ŠæŠ¥ç»™ç›‘æ§å¹³å°ã€‚ç„¶ååˆ©ç”¨ç›‘æ§å¹³å°çš„ç»Ÿè®¡ä¸å‘Šè­¦èƒ½åŠ›ï¼Œé…ç½®ç›¸åº”çš„å‘Šè­¦è§„åˆ™ä¸å›è°ƒå‡½æ•°ã€‚å½“å¼‚å¸¸è§¦å‘å‘Šè­¦ï¼Œé€šè¿‡é…ç½®çš„å›è°ƒå‡½æ•°å°†å‘Šè­¦ipä¼ é€’ç»™apiæœåŠ¡ï¼Œæ­¤æ—¶apiæœåŠ¡å¯ä»¥å°†coreæœåŠ¡ä¸‹çš„è¯¥ipå¯¹åº”çš„æœºå™¨è§†ä¸ºâ€œæ•…éšœâ€ï¼Œè¿›è€Œé€šè¿‡è‡ªå®šä¹‰çš„æ•…éšœè½¬ç§»ç­–ç•¥ï¼ˆå®ç°Dubboçš„AbstractLoadBalanceæŠ½è±¡ç±»ï¼Œå¹¶ä¸”é…ç½®åœ¨é¡¹ç›®ï¼‰ï¼Œè‡ªåŠ¨å°†è¯¥ipä»æä¾›è€…é›†ç¾¤ä¸­å‰”é™¤ï¼Œä»è€Œè¾¾åˆ°ä¸å»è°ƒç”¨é—®é¢˜æœºå™¨ã€‚å›¾ 4 æ˜¯æ•´ä¸ªæªæ–½çš„æµç¨‹ã€‚åœ¨è¯¥æªæ–½ä¸Šçº¿å‰ï¼Œæ¯å½“æœ‰æœºå™¨å†…å­˜å‘Šè­¦æ—¶ï¼Œå°†ä¼šäººå·¥é‡å¯è¯¥æœºå™¨ã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.9898148148148148&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_jpg/4g5IMGibSxt5nibZianRN5pckGaRIKNvG94XXYicnlbh1UV4Hxq9BChpGCGaXeTCPg37j5yy6UKMP9bRfxvCK7SVLA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;span&gt;å›¾4 æ•…éšœè½¬ç§»ç­–ç•¥&lt;/span&gt;&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;æ­¥éª¤3Â  å¤§å¯¹è±¡ä¼˜åŒ–&lt;/p&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;å¤§å¯¹è±¡å ç”¨äº†è¾ƒå¤šçš„å†…å­˜ï¼Œå¯¼è‡´å†…å­˜ç©ºé—´æ— æ³•è¢«æœ‰æ•ˆåˆ©ç”¨ï¼Œç”šè‡³é€ æˆOOMï¼ˆOut Of Memoryï¼‰å¼‚å¸¸ã€‚åœ¨ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œå…ˆæ˜¯æŸ¥çœ‹äº†å¼‚å¸¸æœŸé—´çš„çº¿ç¨‹ä¿¡æ¯ï¼Œç„¶åå¯¹å †å†…å­˜è¿›è¡Œäº†åˆ†æï¼Œæœ€ç»ˆç¡®å®šäº†å¤§å¯¹è±¡èº«ä»½ä»¥åŠäº§ç”Ÿçš„æ¥å£ã€‚&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;ï¼ˆ1ï¼‰ Dump Stack æŸ¥çœ‹çº¿ç¨‹&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä»ç›‘æ§å¹³å°ä¸ŠDump Stackæ–‡ä»¶ï¼Œå‘ç°ä¸€å®šæ•°é‡çš„å¦‚ä¸‹çº¿ç¨‹è°ƒç”¨ã€‚&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;nginx&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__attribute&quot;&gt;Thread&lt;/span&gt; &lt;span class=&quot;code-snippet__number&quot;&gt;5612&lt;/span&gt;: (state = IN_JAVA)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; - org.apache.dubbo.remoting.exchange.codec.ExchangeCodec.encodeResponse(org.apache.dubbo.remoting.Channel, org.apache.dubbo.remoting.buffer.ChannelBuffer, org.apache.dubbo.remoting.exchange.Response) &lt;span class=&quot;code-snippet__variable&quot;&gt;@bci&lt;/span&gt;=&lt;span class=&quot;code-snippet__number&quot;&gt;11&lt;/span&gt;, line=&lt;span class=&quot;code-snippet__number&quot;&gt;282&lt;/span&gt; (Compiled frame; &lt;span class=&quot;code-snippet__attribute&quot;&gt;information&lt;/span&gt; may be imprecise)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; - org.apache.dubbo.remoting.exchange.codec.ExchangeCodec.encode(org.apache.dubbo.remoting.Channel, org.apache.dubbo.remoting.buffer.ChannelBuffer, java.lang.Object) &lt;span class=&quot;code-snippet__variable&quot;&gt;@bci&lt;/span&gt;=&lt;span class=&quot;code-snippet__number&quot;&gt;34&lt;/span&gt;, line=&lt;span class=&quot;code-snippet__number&quot;&gt;73&lt;/span&gt; (Compiled frame)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; - org.apache.dubbo.rpc.protocol.dubbo.DubboCountCodec.encode(org.apache.dubbo.remoting.Channel, org.apache.dubbo.remoting.buffer.ChannelBuffer, java.lang.Object) &lt;span class=&quot;code-snippet__variable&quot;&gt;@bci&lt;/span&gt;=&lt;span class=&quot;code-snippet__number&quot;&gt;7&lt;/span&gt;, line=&lt;span class=&quot;code-snippet__number&quot;&gt;40&lt;/span&gt; (Compiled frame)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; - org.apache.dubbo.remoting.transport.netty4.NettyCodecAdapter&lt;span class=&quot;code-snippet__variable&quot;&gt;$InternalEncoder&lt;/span&gt;.encode(io.netty.channel.ChannelHandlerContext, java.lang.Object, io.netty.buffer.ByteBuf) &lt;span class=&quot;code-snippet__variable&quot;&gt;@bci&lt;/span&gt;=&lt;span class=&quot;code-snippet__number&quot;&gt;51&lt;/span&gt;, line=&lt;span class=&quot;code-snippet__number&quot;&gt;69&lt;/span&gt; (Compiled frame)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; - io.netty.handler.codec.MessageToByteEncoder.write(io.netty.channel.ChannelHandlerContext, java.lang.Object, io.netty.channel.ChannelPromise) &lt;span class=&quot;code-snippet__variable&quot;&gt;@bci&lt;/span&gt;=&lt;span class=&quot;code-snippet__number&quot;&gt;33&lt;/span&gt;, line=&lt;span class=&quot;code-snippet__number&quot;&gt;107&lt;/span&gt; (Compiled frame)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; - io.netty.channel.AbstractChannelHandlerContext.invokeWrite0(java.lang.Object, io.netty.channel.ChannelPromise) &lt;span class=&quot;code-snippet__variable&quot;&gt;@bci&lt;/span&gt;=&lt;span class=&quot;code-snippet__number&quot;&gt;10&lt;/span&gt;, line=&lt;span class=&quot;code-snippet__number&quot;&gt;717&lt;/span&gt; (Compiled frame)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; - io.netty.channel.AbstractChannelHandlerContext.invokeWrite(java.lang.Object, io.netty.channel.ChannelPromise) &lt;span class=&quot;code-snippet__variable&quot;&gt;@bci&lt;/span&gt;=&lt;span class=&quot;code-snippet__number&quot;&gt;10&lt;/span&gt;, line=&lt;span class=&quot;code-snippet__number&quot;&gt;709&lt;/span&gt; (Compiled frame)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;state = IN_JAVA è¡¨ç¤ºJavaè™šæ‹Ÿæœºæ­£åœ¨æ‰§è¡ŒJavaç¨‹åºã€‚ä»çº¿ç¨‹è°ƒç”¨ä¿¡æ¯å¯ä»¥çœ‹åˆ°ï¼ŒDubboæ­£åœ¨è°ƒç”¨Nettyï¼Œå°†è¾“å‡ºå†™å…¥åˆ°ç¼“å†²åŒºã€‚æ­¤æ—¶çš„å“åº”å¯èƒ½æ˜¯ä¸€ä¸ªå¤§å¯¹è±¡ï¼Œå› è€Œåœ¨å¯¹å“åº”è¿›è¡Œç¼–ç ã€å†™ç¼“å†²åŒºæ—¶ï¼Œéœ€è¦è€—è´¹è¾ƒé•¿çš„æ—¶é—´ï¼Œå¯¼è‡´æŠ“å–åˆ°çš„æ­¤ç±»çº¿ç¨‹è¾ƒå¤šã€‚å¦å¤–è€—æ—¶é•¿ï¼Œä¹Ÿå³æ˜¯å¤§å¯¹è±¡å­˜æ´»æ—¶é—´é•¿ï¼Œå¯¼è‡´full gc é‡Šæ”¾çš„å†…å­˜è¶Šæ¥è¶Šå°ï¼Œç©ºé—²çš„å †å†…å­˜å˜å°ï¼Œè¿™åˆä¼šåŠ å‰§full gc æ¬¡æ•°ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¿™ä¸€ç³»åˆ—çš„è¿é”ååº”ä¸å›¾2ç›¸å»åˆï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥çš„ä»»åŠ¡å°±æ˜¯æ‰¾åˆ°è¿™ä¸ªå¤§å¯¹è±¡ã€‚&lt;/p&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;ï¼ˆ2ï¼‰Dump Heap æŸ¥çœ‹å†…å­˜&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å¯¹coreæœåŠ¡çš„å †å†…å­˜è¿›è¡Œäº†å¤šæ¬¡æŸ¥çœ‹ï¼Œå…¶ä¸­æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„ä¸€æ¬¡å¿«ç…§çš„å¤§å¯¹è±¡åˆ—è¡¨å¦‚ä¸‹ï¼Œ&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.46111111111111114&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/4g5IMGibSxt5nibZianRN5pckGaRIKNvG94VFDKP4s4GJicBR9gnS42wKw7a0ew8qiatbadicDcibWz5s3ETxDicUY6wgw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;span&gt;å›¾5 coreæœåŠ¡çš„å †å†…å­˜å¿«ç…§&lt;/span&gt;&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;æ•´ä¸ªNettyçš„taskQueueæœ‰258MBã€‚å¹¶ä¸”ä»å›¾ä¸­ç»¿è‰²æ–¹æ¡†å¤„å¯ä»¥å‘ç°ï¼Œå•ä¸ªçš„Responseç«Ÿè¾¾åˆ°äº†9Mï¼Œçº¢è‰²æ–¹æ¡†å¤„ï¼Œæ˜¾ç¤ºäº†è°ƒç”¨æ–¹çš„æœåŠ¡åä»¥åŠURIã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¿›ä¸€æ­¥æ’æŸ¥ï¼Œå‘ç°è¯¥æ¥å£ä¼šé€šè¿‡coreæœåŠ¡æŸ¥è¯¢å¤§é‡ä¿¡æ¯ï¼Œè‡³æ­¤åŸºæœ¬æ’æŸ¥æ¸…æ¥šäº†å¤§å¯¹è±¡çš„èº«ä»½ä»¥åŠäº§ç”ŸåŸå› ã€‚&lt;/p&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;ï¼ˆ3ï¼‰ä¼˜åŒ–ç»“æœ&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åœ¨å¯¹æ¥å£è¿›è¡Œä¼˜åŒ–åï¼Œæ•´ä¸ªcoreæœåŠ¡ä¹Ÿå‡ºç°äº†éå¸¸æ˜æ˜¾çš„æ”¹è¿›ã€‚YGCå…¨å¤©æ€»æ¬¡æ•°é™ä½äº†76.5%ï¼Œé«˜å³°æœŸç´¯è®¡è€—æ—¶é™ä½äº†75.5%ã€‚FGCä¸‰å¤©æ‰ä¼šå‘ç”Ÿä¸€æ¬¡ï¼Œå¹¶ä¸”é«˜å³°æœŸç´¯è®¡è€—æ—¶é™ä½äº†90.1%ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.6601851851851852&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/4g5IMGibSxt5nibZianRN5pckGaRIKNvG94RaP25DrtaI9BbhmhJtnzrw8obryLpsUtGRZY1YVNvIElk0MbfbKSnQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;å›¾6Â å¤§å¯¹è±¡ä¼˜åŒ–åçš„coreæœåŠ¡GCæƒ…å†µ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å°½ç®¡ä¼˜åŒ–åï¼Œå› å†…éƒ¨å¼‚å¸¸å¯¼è‡´è·å–æ ¸å¿ƒä¸šåŠ¡å¤±è´¥çš„å¼‚å¸¸è¯·æ±‚æ•°æ˜¾è‘—å‡å°‘ï¼Œä½†æ˜¯ä¾ç„¶å­˜åœ¨ã€‚ä¸ºäº†æ‰¾åˆ°æœ€åè¿™ä¸€ç‚¹å¼‚å¸¸äº§ç”Ÿçš„åŸå› ï¼Œæˆ‘ä»¬æ‰“ç®—å¯¹coreæœåŠ¡å†…å­˜ä¸­çš„å¯¹è±¡å¤§å°è¿›è¡Œç›‘æ§ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.3435185185185185&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/4g5IMGibSxt5nibZianRN5pckGaRIKNvG94Y1eog2vWOg4pP1KWGE91ShJZRpmibicvUxNxyxXVyqELObu73KEhKIKg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å›¾7Â ç³»ç»Ÿå†…éƒ¨å¼‚å¸¸å¯¼è‡´æ ¸å¿ƒä¸šåŠ¡å¤±è´¥çš„å¼‚å¸¸è¯·æ±‚æ•°&lt;/span&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;æ­¥éª¤4Â  æ— ä¾µå…¥å¼å†…å­˜å¯¹è±¡ç›‘æ§&lt;/p&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;Debug Dubbo æºç çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°åœ¨ç½‘ç»œå±‚ï¼ŒDubboé€šè¿‡encodeResponseæ–¹æ³•å¯¹å“åº”è¿›è¡Œç¼–ç å¹¶å†™å…¥ç¼“å†²åŒºï¼Œé€šè¿‡checkPayloadæ–¹æ³•å»æ£€æŸ¥å“åº”çš„å¤§å°ï¼Œå½“è¶…è¿‡payloadæ—¶ï¼Œä¼šæŠ›å‡ºExceedPayloadLimitExceptionå¼‚å¸¸ã€‚åœ¨å¤–å±‚å¯¹å¼‚å¸¸è¿›è¡Œäº†æ•è·ï¼Œé‡ç½®bufferä½ç½®ï¼Œè€Œä¸”å¦‚æœæ˜¯ExceedPayloadLimitExceptionå¼‚å¸¸ï¼Œé‡æ–°å‘é€ä¸€ä¸ªç©ºå“åº”ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ï¼Œ&lt;strong&gt;ç©ºå“åº”æ²¡æœ‰åŸå§‹çš„å“åº”ç»“æœä¿¡æ¯&lt;/strong&gt;ï¼Œæºç å¦‚ä¸‹ã€‚&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;java&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;encodeResponse&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(Channel channel, ChannelBuffer buffer, Response res)&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;throws&lt;/span&gt; IOException &lt;/span&gt;{&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;try&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        checkPayload(channel, len);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    } &lt;span class=&quot;code-snippet__keyword&quot;&gt;catch&lt;/span&gt; (Throwable t) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;         &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        buffer.writerIndex(savedWriteIndex);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        Response r = &lt;span class=&quot;code-snippet__keyword&quot;&gt;new&lt;/span&gt; Response(res.getId(), res.getVersion());&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        r.setStatus(Response.BAD_RESPONSE);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;         &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (t &lt;span class=&quot;code-snippet__keyword&quot;&gt;instanceof&lt;/span&gt; ExceedPayloadLimitException) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            r.setErrorMessage(t.getMessage());&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            channel.send(r);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;         &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;checkPayload&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(Channel channel, &lt;span class=&quot;code-snippet__keyword&quot;&gt;long&lt;/span&gt; size)&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;throws&lt;/span&gt; IOException &lt;/span&gt;{&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; payload = getPayload(channel);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;boolean&lt;/span&gt; overPayload = isOverPayload(payload, size);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (overPayload) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        ExceedPayloadLimitException e = &lt;span class=&quot;code-snippet__keyword&quot;&gt;new&lt;/span&gt; ExceedPayloadLimitException(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;Data length too large: &quot;&lt;/span&gt; + size + &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;, max payload: &quot;&lt;/span&gt; + payload + &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;, channel: &quot;&lt;/span&gt; + channel);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        logger.error(e);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;throw&lt;/span&gt; e;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;å—æ­¤å¯å‘ï¼Œè‡ªå®šä¹‰äº†ç¼–è§£ç ç±»ï¼ˆå®ç°org.apache.dubbo.remoting.Codec2æ¥å£ï¼Œå¹¶ä¸”é…ç½®åœ¨é¡¹ç›®ï¼‰ï¼Œå»ç›‘æ§è¶…å‡ºé˜ˆå€¼çš„å¯¹è±¡ï¼Œå¹¶æ‰“å°è¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜ã€‚åœ¨å…·ä½“å®ç°ä¸­ï¼Œå¦‚æœç‰¹æ„å»è®¡ç®—æ¯ä¸ªå¯¹è±¡çš„å¤§å°ï¼Œé‚£ä¹ˆåŠ¿å¿…æ˜¯å¯¹æœåŠ¡æ€§èƒ½é€ æˆå½±å“ã€‚ç»è¿‡åˆ†æï¼Œé‡‡å–äº†å’ŒcheckPayloadä¸€æ ·çš„æ–¹å¼ï¼Œæ ¹æ®ç¼–ç å‰åbufferçš„writerIndexä½ç½®å»åˆ¤æ–­æœ‰æ²¡æœ‰è¶…è¿‡è®¾å®šçš„é˜ˆå€¼ã€‚ä»£ç å¦‚ä¸‹ã€‚&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;java&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-snippet__class&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;MusicDubboCountCodec&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;Codec2&lt;/span&gt; &lt;/span&gt;{&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;static&lt;/span&gt; Cache&amp;lt;Long, String&amp;gt; EXCEED_PAYLOAD_LIMIT_CACHE = Caffeine.newBuilder()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        .maximumSize(&lt;span class=&quot;code-snippet__number&quot;&gt;100&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        .expireAfterWrite(&lt;span class=&quot;code-snippet__number&quot;&gt;300&lt;/span&gt;, TimeUnit.SECONDS)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        .softValues()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        .build();&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__meta&quot;&gt;@Override&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;encode&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(Channel channel, ChannelBuffer buffer, Object message)&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;throws&lt;/span&gt; IOException &lt;/span&gt;{&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; writeBefore = &lt;span class=&quot;code-snippet__keyword&quot;&gt;null&lt;/span&gt; == buffer ? &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt; : buffer.writerIndex();&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        dubboCountCodec.encode(channel, buffer, message);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        checkOverPayload(message);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; writeAfter = &lt;span class=&quot;code-snippet__keyword&quot;&gt;null&lt;/span&gt; == buffer ? &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt; : buffer.writerIndex();    &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; length = writeAfter - writeBefore;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        warningLengthTooLong(length, message);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;checkOverPayload&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(Object message)&lt;/span&gt;&lt;/span&gt;{&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt;(!(message &lt;span class=&quot;code-snippet__keyword&quot;&gt;instanceof&lt;/span&gt; Response)){&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        Response response = (Response) message;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt;(Response.BAD_RESPONSE == response.getStatus() &amp;amp;&amp;amp; StrUtil.contains(response.getErrorMessage(), OVER_PAYLOAD_ERROR_MESSAGE)){          &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            EXCEED_PAYLOAD_LIMIT_CACHE.put(response.getId(), response.getErrorMessage());&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt;(Response.OK == response.getStatus() &amp;amp;&amp;amp;  EXCEED_PAYLOAD_LIMIT_CACHE.getIfPresent(response.getId()) != &lt;span class=&quot;code-snippet__keyword&quot;&gt;null&lt;/span&gt;){      &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            String responseMessage = getResponseMessage(response);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            log.warn(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;dubboåºåˆ—åŒ–å¯¹è±¡å¤§å°è¶…è¿‡payload,errorMsg is {},response is {}&quot;&lt;/span&gt;, EXCEED_PAYLOAD_LIMIT_CACHE.getIfPresent(response.getId()),responseMessage);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;     &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;åœ¨ä¸Šæ–‡ä¸­æåˆ°ï¼Œå½“æ•è·åˆ°è¶…è¿‡payloadçš„å¼‚å¸¸æ—¶ï¼Œä¼šé‡æ–°ç”Ÿæˆç©ºå“åº”ï¼Œå¯¼è‡´å¤±å»äº†åŸå§‹çš„å“åº”ç»“æœï¼Œæ­¤æ—¶å†å»æ‰“å°æ—¥å¿—ï¼Œæ˜¯æ— æ³•è·å–åˆ°è°ƒç”¨æ–¹æ³•å’Œå…¥å‚çš„ï¼Œä½†æ˜¯encodeResponseæ–¹æ³•æ­¥éª¤4ä¸­ï¼Œé‡æ–°å‘é€è¿™ä¸ªResponseï¼Œç»™äº†æˆ‘ä»¬æœºä¼šå»è·å–åˆ°æƒ³è¦çš„ä¿¡æ¯ï¼Œå› ä¸ºé‡æ–°å‘é€æ„å‘³ç€ä¼šå†å»èµ°ä¸€éè‡ªå®šä¹‰çš„ç¼–ç ç±»ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å‡è®¾æœ‰ä¸€ä¸ªè¶…å‡ºpayloadçš„è¯·æ±‚ï¼Œæ‰§è¡Œåˆ°è‡ªå®šç¼–ç ç±»encodeæ–¹æ³•çš„æ­¥éª¤2ï¼ˆDubboæºç ä¸­çš„ç¼–ç æ–¹æ³•ï¼‰ï¼Œåœ¨è¿™é‡Œä¼šè°ƒç”¨encodeResponseæ–¹æ³•é‡ç½®bufferï¼Œå‘é€æ–°çš„ç©ºå“åº”ã€‚&lt;/p&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;ï¼ˆ1ï¼‰å½“è¿™ä¸ªæ–°çš„ç©ºå“åº”å†æ¬¡è¿›å…¥è‡ªå®šä¹‰encodeæ–¹æ³•ï¼Œæ‰§è¡Œ checkOverPayloadæ–¹æ³•çš„æ­¥éª¤3.1æ—¶ï¼Œå°±ä¼šè®°å½•å¼‚å¸¸å“åº”çš„idåˆ°æœ¬åœ°ç¼“å­˜ã€‚ç”±äºåœ¨encodeResponseä¸­bufferè¢«é‡ç½®ï¼Œæ— æ³•è®¡ç®—å¯¹è±¡çš„å¤§å°ï¼Œæ‰€ä»¥æ­¥éª¤4ã€5ä¸ä¼šèµ·åˆ°å®é™…ä½œç”¨ï¼Œå°±æ­¤ç»“æŸæ–°çš„å‘é€è¿‡ç¨‹ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ï¼ˆ2ï¼‰åŸå…ˆçš„å‘é€è¿‡ç¨‹å›åˆ°æ­¥éª¤2 ç»§ç»­æ‰§è¡Œï¼Œåˆ°äº†æ­¥éª¤3.2 æ—¶ï¼Œå‘ç°æœ¬åœ°ç¼“å­˜çš„å¼‚å¸¸æ± ä¸­æœ‰å½“å‰çš„å“åº”idï¼Œè¿™æ—¶å°±å¯ä»¥æ‰“å°è°ƒç”¨ä¿¡æ¯äº†ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ç»¼ä¸Šï¼Œå¯¹äºå¤§å°åœ¨å‘Šè­¦é˜ˆå€¼å’Œpayloadä¹‹é—´çš„å¯¹è±¡ï¼Œç”±äºå“åº”ä¿¡æ¯æˆåŠŸå†™å…¥äº†bufferï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œå¤§å°åˆ¤æ–­ï¼Œå¹¶ä¸”æ‰“å°å“åº”ä¸­çš„å…³é”®ä¿¡æ¯ï¼›å¯¹äºè¶…è¿‡payloadçš„å¯¹è±¡ï¼Œåœ¨é‡æ–°å‘é€ä¸­è®°å½•å¼‚å¸¸å“åº”idåˆ°æœ¬åœ°ï¼Œåœ¨åŸå§‹å‘é€è¿‡ç¨‹ä¸­è®¿é—®å¼‚å¸¸idæ± è¯†åˆ«æ˜¯å¦æ˜¯å¼‚å¸¸å“åº”ï¼Œè¿›è¡Œå…³é”®ä¿¡æ¯æ‰“å°ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åœ¨ç›‘æ§æªæ–½ä¸Šçº¿åï¼Œé€šè¿‡æ—¥å¿—å¾ˆå¿«é€Ÿçš„å‘ç°äº†ä¸€éƒ¨åˆ†äº§ç”Ÿå¤§å¯¹è±¡çš„æ¥å£ï¼Œå½“å‰ä¹Ÿæ­£åœ¨æ ¹æ®æ¥å£ç‰¹ç‚¹åšé’ˆå¯¹æ€§ä¼˜åŒ–ã€‚&lt;/p&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;p&gt;ä¸‰ã€æ€»ç»“&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;åœ¨å¯¹æœåŠ¡JVMå†…å­˜è¿›è¡Œè°ƒä¼˜æ—¶ï¼Œè¦å……åˆ†åˆ©ç”¨æ—¥å¿—ã€ç›‘æ§å·¥å…·ã€å †æ ˆä¿¡æ¯ç­‰ï¼Œåˆ†æä¸å®šä½é—®é¢˜ã€‚å°½é‡é™ä½é—®é¢˜æ’æŸ¥æœŸé—´çš„ä¸šåŠ¡æŸå¤±ï¼Œå¼•å…¥å¯¹è±¡ç›‘æ§æ‰‹æ®µä¹Ÿä¸èƒ½å½±å“ç°æœ‰ä¸šåŠ¡ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥åœ¨å®šæ—¶ä»»åŠ¡ã€ä»£ç é‡æ„ã€ç¼“å­˜ç­‰æ–¹é¢è¿›è¡Œä¼˜åŒ–ã€‚ä¼˜åŒ–æœåŠ¡å†…å­˜ä¸ä»…ä»…æ˜¯JVMè°ƒå‚ï¼Œè€Œæ˜¯ä¸€ä¸ªå…¨æ–¹é¢çš„æŒç»­è¿‡ç¨‹ã€‚&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;END&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;span title=&quot;&quot; opera-tn-ra-cell=&quot;_$.pages:0.layers:0.comps:68.title1&quot;&gt;&lt;p&gt;çŒœä½ å–œæ¬¢&lt;/p&gt;&lt;/span&gt; &lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>