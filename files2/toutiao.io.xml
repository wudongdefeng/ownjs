<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>a7afa944065c2fb07e0467b359684e63</guid>
<title>2022ï¼Œå€¼å¾—å­¦ä¹ ç³»åˆ—ä¹‹ï¼šå‡½æ•°å¼ç¼–ç¨‹</title>
<link>https://toutiao.io/k/8bwye9l</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;pos-relative js-post-content&quot;&gt;
              
              &lt;p&gt;åœ¨è¯ç”Ÿè¿‘ 70 å¹´ä¹‹åï¼Œ å‡½æ•°å¼ç¼–ç¨‹ï¼ˆFunctional Programmingï¼‰å¼€å§‹è·å¾—è¶Šæ¥è¶Šå¤šçš„å…³æ³¨ã€‚å¹¶ä¸”éšç€æ—¶é—´æ¨ç§»ã€æŠ€æœ¯æ¼”å˜ï¼Œå®ƒä¸å‰ç«¯å¼€å‘ï¼Œç»“åˆçš„ä¹Ÿè¶Šå‘ç´§å¯†ï¼›å‰äº›æ—¥å­ï¼Œè¯»äº†äº›æ–‡ç« ï¼Œå¯¹å‡½æ•°å¼ç¼–ç¨‹æœ‰äº†ç²—æµ…çš„äº†è§£ï¼Œå¹¶åœ¨ä»£ç ä¸Šåšäº†äº›å®è·µï¼Œå‘ç°è¿™ç§æ€æƒ³éå¸¸æœ‰è¶£ï¼Œå–œä¹‹ä¸å·²ã€‚è¿‘æ—¥æˆ‘å¥³ç¥å¯¹å®ƒçªæ„Ÿå¥½å¥‡ï¼Œäºæ˜¯ä¹ï¼Œä¾¿ç»“åˆä¸šç•Œå·²æœ‰ä¹‹åˆ†äº«ï¼Œç»“åˆè‡ªå·±ç†è§£ä¸å®è·µï¼Œæ¢³ç†æˆæ–‡ï¼Œä»¥ä¾¿è§£é‡Šã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://lovejade.oss-cn-shenzhen.aliyuncs.com/Function.png&quot; alt=&quot;å‡½æ•°å¼ç¼–ç¨‹&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;%E4%B8%8E%E9%9D%9E%E5%87%BD%E6%95%B0%E5%BC%8F%E7%9A%84%E5%8C%BA%E5%88%AB&quot;&gt;ä¸éå‡½æ•°å¼çš„åŒºåˆ«&lt;/h2&gt;
&lt;p&gt;éå‡½æ•°å¼çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;let counter = 0
const increment = () =&amp;gt; {
    counter++
}
&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const increment = (counter) =&amp;gt; {
    return counter + 1
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;ä½ å¯èƒ½ä¼šè§‰å¾—è¿™ä¸ªä¾‹å­å¤ªè¿‡æ™®é€šã€‚ä½†ï¼Œè¿™å°±æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„å‡†åˆ™ï¼š&lt;strong&gt;ä¸ä¾èµ–äºå¤–éƒ¨çš„æ•°æ®ï¼Œè€Œä¸”ä¹Ÿä¸æ”¹å˜å¤–éƒ¨æ•°æ®çš„å€¼ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å€¼ç»™ä½ &lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å†çœ‹ä¸€æ®µå¤æ‚ä¸€ç‚¹ï¼Œå´è¾ƒä¸º &lt;a href=&quot;https://github.com/nicejade/blog.nicelinks.site/blob/master/src/components/search/index.js&quot;&gt;å®ç”¨çš„ä»£ç ç¤ºä¾‹&lt;/a&gt; ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const handleSearch = (_keywords) =&amp;gt; {
  let queryResultArr;
  if (!_keywords) {
    queryResultArr = []
  } else {
    queryResultArr = getQueryResult(_keywords)
  }
  setQueryResultArr(queryResultArr)
  setIsShowResults(queryResultArr.length &amp;gt; 0)
}

const throttle = (fn, wait) =&amp;gt; {
  let pre = Date.now();
  return function () {
    const context = this;
    const args = arguments;
    const now = Date.now();
    if (now - pre &amp;gt;= wait) {
      fn.apply(context, args)
      pre = Date.now()
    }
  }
}

const requestSearchFunc = throttle(handleSearch, 200)

const handleInputChange = (event) =&amp;gt; {
  const value = event.target.value;
  setKeywords(value)
  requestSearchFunc(value)
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¯ä»¥ä½¿ç”¨ &lt;code&gt;throttle&lt;/code&gt; æ¥&lt;strong&gt;èŠ‚æµå‡½æ•°&lt;/strong&gt;ï¼Œå¦‚ï¼šrequestSearchFuncï¼›è¿™ä¸ªæŠ€æœ¯å…¶å®å°±æ˜¯ Currying æŠ€æœ¯ï¼ˆæŠŠä¸€ä¸ªå‡½æ•°çš„å¤šä¸ªå‚æ•°åˆ†è§£æˆå¤šä¸ªå‡½æ•°ï¼Œ ç„¶åæŠŠå‡½æ•°å¤šå±‚å°è£…èµ·æ¥ï¼Œæ¯å±‚å‡½æ•°éƒ½è¿”å›ä¸€ä¸ªå‡½æ•°å»æ¥æ”¶ä¸‹ä¸€ä¸ªå‚æ•°è¿™æ ·ï¼Œå¯ä»¥ç®€åŒ–å‡½æ•°çš„å¤šä¸ªå‚æ•°ï¼‰ã€‚ä»è¿™ä¸ªæŠ€æœ¯ä¸Šï¼Œä½ å¯èƒ½ä½“ä¼šåˆ°å‡½æ•°å¼ç¼–ç¨‹çš„ç†å¿µï¼š&lt;strong&gt;æŠŠå‡½æ•°å½“æˆå˜é‡æ¥ç”¨ï¼Œå…³æ³¨äºæè¿°é—®é¢˜è€Œä¸æ˜¯æ€ä¹ˆå®ç°&lt;/strong&gt;ï¼Œè¿™æ ·å¯ä»¥è®©ä»£ç æ›´æ˜“è¯»ã€‚&lt;/p&gt;
&lt;h2 id=&quot;%E8%BF%87%E7%A8%8B%E5%BC%8F-vs-%E5%87%BD%E6%95%B0%E5%BC%8F&quot;&gt;è¿‡ç¨‹å¼ vs å‡½æ•°å¼&lt;/h2&gt;
&lt;p&gt;è¿‡ç¨‹å¼ç¼–ç¨‹ï¼Œä¸»è¦è¦é‡‡å–è¿‡ç¨‹è°ƒç”¨ï¼Œæˆ–å‡½æ•°è°ƒç”¨çš„æ–¹å¼æ¥è¿›è¡Œæµç¨‹æ§åˆ¶ï¼›å®ƒä¸»è¦å…³æ³¨ï¼šä¸€æ­¥ä¸€æ­¥åœ°è§£å†³é—®é¢˜ã€‚è¿™æ˜¯å®Œå…¨æœ‰æ•ˆçš„ç¼–ç æ–¹å¼ï¼Œä½†å½“æ‚¨å¸Œæœ›åº”ç”¨ç¨‹åºæ‰©å±•æ—¶ï¼Œå®ƒå­˜åœ¨è®¸å¤šç¼ºç‚¹ã€‚è€Œå‡½æ•°å¼ç¼–ç¨‹ï¼ˆÂ Functional Programmingï¼‰å…³æ³¨çš„æ˜¯ï¼š&lt;strong&gt;æè¿°è¦åšä»€ä¹ˆï¼Œè€Œä¸æ˜¯å¦‚ä½•åš&lt;/strong&gt;ï¼ˆdescribe what to do, rather than how to do itï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸¾ä¾‹æ¥è¯´ï¼Œå¯¹äºä¸€ä¸ªè‹±æ–‡åæ•°ç»„ï¼Œéœ€è¦å°†å…¶ä¸­çŸ­æ¨ªçº¿å‘½åï¼Œè½¬åŒ–ä¸ºå¤§é©¼å³°æ ¼å¼ã€‚åŸºäºä¼ ç»Ÿè¿‡ç¨‹å¼ç¼–ç¨‹ï¼Œå¯èƒ½ä½ ä¸ä¼šæƒ³å¤ªå¤šï¼Œç›´æ¥å°†æƒ³æ³•ç”¨ä»£ç æ¥è¡¨è¾¾å‡ºæ¥ï¼Œä¸´æ—¶å˜é‡ã€å¾ªç¯è¯­å¥ï¼Œç”¨çš„é£èµ·ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const nameArr = [&#x27;nice-jade&#x27;, &#x27;rayso-lee&#x27;, &#x27;jon-snow&#x27;, &#x27;arya-stark&#x27;];
const newArr = [];
for (let i = 0, len = nameArr.length; i &amp;lt; len ; i++) {
  let name = nameArr[i];
  let tempNameArr = name.split(&#x27;-&#x27;);
  let newNameArr = [];
  for (let j = 0, nameLen = tempNameArr.length; j &amp;lt; nameLen; j++) {
    let newFormatName = tempNameArr[j][0].toUpperCase() + tempNameArr[j].slice(1);
    newNameArr.push(newFormatName);
  }
  newArr.push(newNameArr.join(&#x27; &#x27;));
}
console.log(newArr)
// [ &#x27;Nice Jade&#x27;, &#x27;Rayso Lee&#x27;, &#x27;Jon Snow&#x27;, &#x27;Arya Stark&#x27; ]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿™æ˜¯å¯ä»¥è¾¾æˆç›®æ ‡çš„ç­”æ¡ˆï¼Œå®ƒå®Œå…¨&lt;strong&gt;é¢å‘è¿‡ç¨‹&lt;/strong&gt;ï¼›è™½ç„¶åœ¨ç¼–ç æ—¶å€™ï¼Œèƒ½å¤Ÿå°†æƒ³æ³•æ·‹æ¼“å°½è‡´è¡¨ç°å‡ºæ¥ã€‚ä½†å¯¹äºé˜…è¯»çš„äººï¼Œååˆ†ä¸å¤Ÿå‹å¥½ã€‚å› ä¸ºè¿™ä¸­é—´å¤¹æ‚äº†å¤æ‚çš„é€»è¾‘ï¼Œå……æ–¥äº†å¤§é‡ä¸´æ—¶å˜é‡ã€å¾ªç¯ã€çŠ¶æ€å˜åŒ–ç­‰ç­‰ï¼›é€šå¸¸æ‚¨éœ€è¦ï¼š&lt;strong&gt;ä»å¤´è¯»åˆ°å°¾æ‰çŸ¥é“å®ƒå…·ä½“åšäº†ä»€ä¹ˆ&lt;/strong&gt;ï¼Œè€Œä¸”ä¸€æ—¦å‡ºé—®é¢˜ï¼Œå¾ˆéš¾å®šä½ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å°†å¦‚ä¸Šä»£ç ï¼Œæ‹†åˆ†æˆå‡ ä¸ªå‡½æ•°ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const nameArr = [&#x27;nice-jade&#x27;, &#x27;rayso-lee&#x27;, &#x27;jon-snow&#x27;, &#x27;arya-stark&#x27;]
const capitalize = (str) =&amp;gt; str[0].toUpperCase() + str.slice(1).toLowerCase()

const convertName = (name) =&amp;gt; {
  let tempNameArr = name.split(&#x27;-&#x27;)
  let newNameArr = []
  for (let j = 0, nameLen = tempNameArr.length; j &amp;lt; nameLen; j++) {
    let newFormatName = capitalize(tempNameArr[j])
    newNameArr.push(newFormatName)
  }
  return newNameArr.join(&#x27; &#x27;)
}

const getNewArr = (nameArr) =&amp;gt; {
    const newArr = []
    for (let i = 0, len = nameArr.length; i &amp;lt; len; i++) {
      let name = nameArr[i]
      const newName = convertName(name)
      newArr.push(newName)
    }
    return newArr
}

const newNameArr = getNewArr(nameArr)
console.log(newNameArr)
// [ &#x27;Nice Jade&#x27;, &#x27;Rayso Lee&#x27;, &#x27;Jon Snow&#x27;, &#x27;Arya Stark&#x27; ]
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¦‚æ­¤ä¸€æ¥ï¼Œé˜…è¯»ä»£ç æ—¶ï¼Œéœ€è¦è€ƒè™‘çš„ä¸Šä¸‹æ–‡å°‘äº†è®¸å¤šï¼Œä¹Ÿå°±æ›´å®¹æ˜“ã€‚ä¸åƒç¬¬ä¸€ä¸ªç¤ºä¾‹ï¼Œå¦‚æœæ²¡æœ‰åˆç†çš„æ³¨é‡Šè¯´æ˜ï¼Œä½ è¿˜éœ€è¦èŠ±äº›æ—¶é—´æ¥ç†è§£ã€‚&lt;strong&gt;è€ŒæŠŠä»£ç é€»è¾‘å°è£…æˆäº†å‡½æ•°åï¼Œå°±ç›¸å½“äºï¼šç»™æ¯ä¸ªç›¸å¯¹ç‹¬ç«‹çš„ç¨‹åºé€»è¾‘å–äº†ä¸ªåå­—ï¼Œäºæ˜¯ä»£ç æˆäº†è‡ªè§£é‡Šçš„&lt;/strong&gt;ã€‚å¹¸å¥½ï¼Œåœ¨è¿™ä»½ä»£ç ä¸­ï¼Œå‡½æ•°é—´è°ƒç”¨ï¼Œæ²¡æœ‰&lt;strong&gt;ä¾èµ–å…±äº«çš„å˜é‡&lt;/strong&gt;ï¼Œå¦åˆ™å°†ä¼šæ›´åŠ å¤æ‚ã€‚ä½†ï¼Œä»æ˜¯å……æ–¥äº†ä¸´æ—¶å˜é‡ã€å¾ªç¯ï¼Œå¢åŠ ä»£ç é‡çš„åŒæ—¶ï¼Œä¹ŸåŠ å¤§äº†ç†è§£ä¹‹éš¾åº¦ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœåŸºäº&lt;strong&gt;å‡½æ•°å¼ç¼–ç¨‹&lt;/strong&gt;æ€æƒ³ï¼Œé‚£ä¼šæ˜¯æ€æ ·çš„ä»£ç å‘¢ï¼Ÿ&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const { compose, map, join, split } = require(&#x27;ramda&#x27;)

const nameArr = [&#x27;nice-jade&#x27;, &#x27;rayso-lee&#x27;, &#x27;jon-snow&#x27;, &#x27;arya-stark&#x27;]
const capitalize = (str) =&amp;gt; str[0].toUpperCase() + str.slice(1).toLowerCase()
const convertName = compose(join(&#x27; &#x27;), map(capitalize), split(&#x27;-&#x27;))
const newNameArr = nameArr.map((item) =&amp;gt; convertName(item))

console.log(newNameArr)
// [ &#x27;Nice Jade&#x27;, &#x27;Rayso Lee&#x27;, &#x27;Jon Snow&#x27;, &#x27;Arya Stark&#x27; ]&amp;gt;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å¦‚ä¸Šä»£ç ï¼ˆæœ‰å€ŸåŠ© &lt;a href=&quot;https://github.com/ramda/ramda&quot;&gt;ramda&lt;/a&gt; â€”â€”ã€Œå®ç”¨çš„å‡½æ•°å¼ JavaScript å·¥å…·åº“ã€æ¥å®ç°ï¼‰ï¼Œè™½ä¾ç„¶æŠŠç¨‹åºçš„é€»è¾‘åˆ†æˆäº†å‡½æ•°ï¼Œä¸è¿‡è¿™äº›å‡½æ•°éƒ½æ˜¯ Functional çš„ã€‚å› ä¸ºå®ƒä»¬æœ‰ä¸‰ä¸ªç—‡çŠ¶ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®ƒä»¬ä¹‹é—´æ²¡æœ‰å…±äº«çš„å˜é‡ã€‚&lt;/li&gt;
&lt;li&gt;å‡½æ•°é—´é€šè¿‡å‚æ•°å’Œè¿”å›å€¼æ¥ä¼ é€’æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å‡½æ•°é‡Œæ²¡æœ‰ä¸´æ—¶å˜é‡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»è¿™ä¸ªç¼–ç¨‹æ€è·¯ï¼Œå¯ä»¥æ¸…æ™°çœ‹å‡ºï¼Œ&lt;strong&gt;å‡½æ•°å¼ç¼–ç¨‹&lt;/strong&gt;çš„æ€ç»´è¿‡ç¨‹æ˜¯å®Œå…¨ä¸åŒçš„ï¼Œå®ƒçš„ç€çœ¼ç‚¹æ˜¯&lt;strong&gt;å‡½æ•°&lt;/strong&gt;ï¼Œè€Œä¸æ˜¯&lt;strong&gt;è¿‡ç¨‹&lt;/strong&gt;ï¼Œå®ƒå¼ºè°ƒçš„æ˜¯ï¼šé€šè¿‡å‡½æ•°çš„ç»„åˆã€å˜æ¢å»è§£å†³é—®é¢˜ï¼Œè€Œä¸æ˜¯é€šè¿‡å†™ä»€ä¹ˆæ ·çš„è¯­å¥å»è§£å†³é—®é¢˜ï¼›å½“ä½ çš„ä»£ç è¶Šæ¥è¶Šå¤šçš„æ—¶å€™ï¼Œè¿™ç§å‡½æ•°çš„æ‹†åˆ†å’Œç»„åˆï¼Œå°±ä¼šäº§ç”Ÿå‡ºæ›´åŠ å¼ºå¤§çš„åŠ›é‡ã€‚&lt;/p&gt;
&lt;h2 id=&quot;%E4%BB%80%E4%B9%88%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%EF%BC%9F&quot;&gt;ä»€ä¹ˆå‡½æ•°å¼ç¼–ç¨‹ï¼Ÿ&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B&quot;&gt;&lt;strong&gt;å‡½æ•°å¼ç¼–ç¨‹&lt;/strong&gt;&lt;/a&gt; ï¼Œæˆ–ç§°å‡½æ•°ç¨‹åºè®¾è®¡ã€æ³›å‡½ç¼–ç¨‹ï¼ˆè‹±è¯­ï¼šFunctional Programmingï¼‰ï¼Œæ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå®ƒå°†ç”µè„‘è¿ç®—è§†ä¸ºå‡½æ•°è¿ç®—ï¼Œå¹¶ä¸”é¿å…ä½¿ç”¨ç¨‹åºçŠ¶æ€ä»¥åŠæ˜“å˜å¯¹è±¡ã€‚æ¯”èµ·æŒ‡ä»¤å¼ç¼–ç¨‹ï¼Œå‡½æ•°å¼ç¼–ç¨‹æ›´åŠ å¼ºè°ƒç¨‹åºæ‰§è¡Œçš„ç»“æœï¼Œè€Œéæ‰§è¡Œçš„è¿‡ç¨‹ï¼›å€¡å¯¼åˆ©ç”¨è‹¥å¹²ç®€å•çš„æ‰§è¡Œå•å…ƒï¼Œè®©è®¡ç®—ç»“æœä¸æ–­æ¸è¿›ï¼Œé€å±‚æ¨å¯¼å¤æ‚çš„è¿ç®—ï¼Œè€Œä¸æ˜¯è®¾è®¡ä¸€ä¸ªå¤æ‚çš„æ‰§è¡Œè¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œå‡½æ•°æ˜¯å¤´ç­‰å¯¹è±¡ï¼Œæ„æ€æ˜¯è¯´ä¸€ä¸ªå‡½æ•°ï¼Œæ—¢å¯ä»¥ä½œä¸ºå…¶å®ƒå‡½æ•°çš„è¾“å…¥å‚æ•°å€¼ï¼Œä¹Ÿå¯ä»¥ä»å‡½æ•°ä¸­è¿”å›å€¼ï¼Œè¢«ä¿®æ”¹æˆ–è€…è¢«åˆ†é…ç»™ä¸€ä¸ªå˜é‡ã€‚&lt;/p&gt;
&lt;p&gt;è¯ç”Ÿ 50 å¤šå¹´ä¹‹åï¼Œå‡½æ•°å¼ç¼–ç¨‹ï¼Œå¼€å§‹è·å¾—è¶Šæ¥è¶Šå¤šçš„å…³æ³¨ã€‚ä¸ä»…æœ€å¤è€çš„å‡½æ•°å¼è¯­è¨€ Lisp é‡è·é’æ˜¥ï¼Œè€Œä¸”æ–°çš„å‡½æ•°å¼è¯­è¨€å±‚å‡ºä¸ç©·ï¼Œæ¯”å¦‚ Erlangã€clojureã€Scalaã€F#ç­‰ç­‰ã€‚ç›®å‰æœ€å½“çº¢çš„ Pythonã€Rubyã€Javascriptï¼Œå¯¹å‡½æ•°å¼ç¼–ç¨‹çš„æ”¯æŒéƒ½å¾ˆå¼ºï¼Œå°±è¿è€ç‰Œçš„é¢å‘å¯¹è±¡çš„ Javaã€é¢å‘è¿‡ç¨‹çš„ PHPï¼Œéƒ½å¿™ä¸è¿­åœ°åŠ å…¥å¯¹åŒ¿åå‡½æ•°çš„æ”¯æŒã€‚è¶Šæ¥è¶Šå¤šçš„è¿¹è±¡è¡¨æ˜ï¼Œå‡½æ•°å¼ç¼–ç¨‹å·²ç»ä¸å†æ˜¯å­¦æœ¯ç•Œçš„æœ€çˆ±ï¼Œå¼€å§‹å¤§è¸æ­¥åœ°åœ¨ä¸šç•ŒæŠ•å…¥å®ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¹Ÿè®¸ç»§&quot;é¢å‘å¯¹è±¡ç¼–ç¨‹&quot;ä¹‹åï¼Œ&quot;å‡½æ•°å¼ç¼–ç¨‹&quot;ä¼šæˆä¸ºä¸‹ä¸€ä¸ªç¼–ç¨‹çš„ä¸»æµèŒƒå¼ï¼ˆparadigmï¼‰ã€‚æœªæ¥çš„ç¨‹åºå‘˜ææ€•æˆ–å¤šæˆ–å°‘éƒ½å¿…é¡»æ‡‚ä¸€ç‚¹ã€‚â€”â€” &lt;a href=&quot;https://www.ruanyifeng.com/blog/2012/04/functional_programming.html&quot;&gt;å‡½æ•°å¼ç¼–ç¨‹åˆæ¢ @é˜®ä¸€å³°&lt;/a&gt; ï¼ˆ2012 å¹´ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å‡½æ•°ï¼Œå³æ˜¯ä¸€ç§æè¿°é›†åˆå’Œé›†åˆä¹‹é—´çš„&lt;strong&gt;è½¬æ¢å…³ç³»&lt;/strong&gt;ï¼Œè¾“å…¥é€šè¿‡å‡½æ•°ï¼Œéƒ½ä¼šè¿”å›&lt;strong&gt;æœ‰ä¸”åªæœ‰ä¸€ä¸ª&lt;/strong&gt;è¾“å‡ºå€¼ã€‚&lt;strong&gt;å‡½æ•°&lt;/strong&gt;å®é™…ä¸Šæ˜¯ä¸€ä¸ª&lt;strong&gt;å…³ç³»&lt;/strong&gt;ï¼Œæˆ–è€…è¯´æˆä¸€ç§æ˜ å°„ï¼Œè€Œè¿™ç§æ˜ å°„å…³ç³»æ˜¯å¯ &lt;code&gt;ç»„åˆ&lt;/code&gt; çš„ï¼Œå½“çŸ¥é“ä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºç±»å‹ï¼Œå¯ä»¥åŒ¹é…å¦ä¸€ä¸ªå‡½æ•°çš„è¾“å…¥ï¼Œé‚£ä»–ä»¬å°±å¯ä»¥è¿›è¡Œç»„åˆã€‚å¦‚ä¸Šè¿°ä»£ç ä¸­æåŠçš„ &lt;code&gt;convertName&lt;/code&gt; å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç¼–ç¨‹ä¸–ç•Œä¸­ï¼Œéœ€è¦å¤„ç†çš„é€»è¾‘ï¼Œå…¶å®åªæœ‰â€œæ•°æ®â€å’Œâ€œå…³ç³»â€ï¼Œè€Œå…³ç³»å°±æ˜¯ &lt;code&gt;å‡½æ•°&lt;/code&gt;ã€‚ä¸€æ—¦æ˜ å°„å…³ç³»ï¼ˆå‡½æ•°ï¼‰æ‰¾åˆ°äº†ï¼Œé—®é¢˜å³èƒ½è¿åˆƒè€Œè§£ï¼›å‰©ä¸‹çš„äº‹æƒ…ï¼Œå°±æ˜¯è®©æ•°æ®é€šè¿‡è¿™ç§å…³ç³»ï¼Œç„¶åè½¬æ¢æˆå¦ä¸€ä¸ªæ•°æ®è€Œå·²ã€‚&lt;/p&gt;
&lt;h2 id=&quot;%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E7%9A%84%E7%89%B9%E7%82%B9&quot;&gt;å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹ç‚¹&lt;/h2&gt;
&lt;h3 id=&quot;%E5%87%BD%E6%95%B0%E6%98%AF%E7%AC%AC%E4%B8%80%E7%AD%89%E5%85%AC%E6%B0%91&quot;&gt;&lt;strong&gt;å‡½æ•°æ˜¯&quot;ç¬¬ä¸€ç­‰å…¬æ°‘&quot;&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;æ‰€è°“ &lt;a href=&quot;https://en.wikipedia.org/wiki/First-class_function&quot;&gt;&quot;ç¬¬ä¸€ç­‰å…¬æ°‘&quot;&lt;/a&gt; ï¼ˆFirst Classï¼‰ï¼ŒæŒ‡çš„æ˜¯å‡½æ•°ä¸å…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·ï¼Œå¤„äºå¹³ç­‰åœ°ä½ï¼Œå¯ä»¥èµ‹å€¼ç»™å…¶ä»–å˜é‡ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‚æ•°ï¼Œä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œæˆ–è€…ä½œä¸ºåˆ«çš„å‡½æ•°çš„è¿”å›å€¼ã€‚å¦‚ä¸Šæ–‡ä¸­ä»£ç ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-js&quot;&gt;const convertName = compose(join(&#x27; &#x27;), map(capitalize), split(&#x27;-&#x27;))
&lt;/code&gt;&lt;/pre&gt;
&lt;h3 id=&quot;%E6%97%A0%E7%8A%B6%E6%80%81%E5%92%8C%E6%95%B0%E6%8D%AE%E4%B8%8D%E5%8F%AF%E5%8F%98&quot;&gt;æ— çŠ¶æ€å’Œæ•°æ®ä¸å¯å˜&lt;/h3&gt;
&lt;p&gt;æ— çŠ¶æ€ï¼ˆStatelessnessï¼‰å’Œæ•°æ®ä¸å¯å˜ï¼ˆImmutable dataï¼‰ï¼Œè¿™æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®ä¸å¯å˜&lt;/strong&gt;ï¼šå®ƒè¦æ±‚ä½ æ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œè¿™æ„å‘³ç€å¦‚æœä½ æƒ³ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä½ åº”è¯¥åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ç”¨æ¥ä¿®æ”¹ï¼Œè€Œä¸æ˜¯ä¿®æ”¹å·²æœ‰çš„å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ— çŠ¶æ€&lt;/strong&gt;ï¼šä¸»è¦æ˜¯å¼ºè°ƒå¯¹äºä¸€ä¸ªå‡½æ•°ï¼Œä¸ç®¡ä½ ä½•æ—¶è¿è¡Œï¼Œå®ƒéƒ½åº”è¯¥åƒç¬¬ä¸€æ¬¡è¿è¡Œä¸€æ ·ï¼Œç»™å®šç›¸åŒçš„è¾“å…¥ï¼Œç»™å‡ºç›¸åŒçš„è¾“å‡ºï¼Œå®Œå…¨ä¸ä¾èµ–å¤–éƒ¨çŠ¶æ€çš„å˜åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸ºäº†å®ç°è¿™ä¸ªç›®æ ‡ï¼Œå‡½æ•°å¼ç¼–ç¨‹æå‡ºå‡½æ•°åº”è¯¥å…·å¤‡çš„ç‰¹æ€§ï¼šæ²¡æœ‰å‰¯ä½œç”¨å’Œçº¯å‡½æ•°ã€‚&lt;/p&gt;
&lt;h3 id=&quot;%E6%B2%A1%E6%9C%89%E5%89%AF%E4%BD%9C%E7%94%A8&quot;&gt;æ²¡æœ‰&quot;å‰¯ä½œç”¨&quot;&lt;/h3&gt;
&lt;p&gt;æ‰€è°“&quot;å‰¯ä½œç”¨&quot;ï¼ˆside effectï¼‰ï¼ŒæŒ‡çš„æ˜¯å‡½æ•°å†…éƒ¨ä¸å¤–éƒ¨äº’åŠ¨ï¼ˆæœ€å…¸å‹çš„æƒ…å†µï¼Œå°±æ˜¯ä¿®æ”¹å…¨å±€å˜é‡çš„å€¼ï¼‰ï¼Œäº§ç”Ÿè¿ç®—ä»¥å¤–çš„å…¶ä»–ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;å‡½æ•°å¼ç¼–ç¨‹å¼ºè°ƒæ²¡æœ‰&quot;å‰¯ä½œç”¨&quot;ï¼Œæ„å‘³ç€å‡½æ•°è¦ä¿æŒç‹¬ç«‹ï¼Œæ‰€æœ‰åŠŸèƒ½å°±æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å€¼ï¼Œæ²¡æœ‰å…¶ä»–è¡Œä¸ºï¼Œå°¤å…¶æ˜¯ä¸å¾—ä¿®æ”¹å¤–éƒ¨å˜é‡çš„å€¼ã€‚&lt;/p&gt;
&lt;h3 id=&quot;%E5%BC%95%E7%94%A8%E9%80%8F%E6%98%8E&quot;&gt;&lt;strong&gt;å¼•ç”¨é€æ˜&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;å¼•ç”¨é€æ˜ï¼ˆReferential transparencyï¼‰ï¼ŒæŒ‡çš„æ˜¯å‡½æ•°çš„è¿è¡Œä¸ä¾èµ–äºå¤–éƒ¨å˜é‡æˆ–&quot;çŠ¶æ€&quot;ï¼Œåªä¾èµ–äºè¾“å…¥çš„å‚æ•°ï¼Œä»»ä½•æ—¶å€™åªè¦å‚æ•°ç›¸åŒï¼Œå¼•ç”¨å‡½æ•°æ‰€å¾—åˆ°çš„è¿”å›å€¼æ€»æ˜¯ç›¸åŒçš„ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰äº†å‰é¢çš„ç¬¬ä¸‰ç‚¹å’Œç¬¬å››ç‚¹ï¼Œè¿™ç‚¹æ˜¯å¾ˆæ˜¾ç„¶çš„ã€‚å…¶ä»–ç±»å‹çš„è¯­è¨€ï¼Œå‡½æ•°çš„è¿”å›å€¼å¾€å¾€ä¸ç³»ç»ŸçŠ¶æ€æœ‰å…³ï¼Œä¸åŒçš„çŠ¶æ€ä¹‹ä¸‹ï¼Œè¿”å›å€¼æ˜¯ä¸ä¸€æ ·çš„ã€‚è¿™å°±å«&quot;å¼•ç”¨ä¸é€æ˜&quot;ï¼Œå¾ˆä¸åˆ©äºè§‚å¯Ÿå’Œç†è§£ç¨‹åºçš„è¡Œä¸ºã€‚&lt;/p&gt;
&lt;h3 id=&quot;%E6%83%B0%E6%80%A7%E6%89%A7%E8%A1%8C&quot;&gt;æƒ°æ€§æ‰§è¡Œ&lt;/h3&gt;
&lt;p&gt;æ‰€è°“æƒ°æ€§æ‰§è¡Œï¼ˆLazy Evaluationï¼‰ï¼ŒæŒ‡çš„æ˜¯å‡½æ•°åªåœ¨éœ€è¦çš„æ—¶å€™æ‰§è¡Œï¼Œå³ï¼šä¸äº§ç”Ÿæ— æ„ä¹‰çš„ä¸­é—´å˜é‡ã€‚åƒä¸Šé¢ğŸ‘†çš„ä¾‹å­ï¼Œå‡½æ•°å¼ç¼–ç¨‹è·Ÿå‘½ä»¤å¼ç¼–ç¨‹æœ€å¤§çš„åŒºåˆ«å°±åœ¨äºï¼šå‡ ä¹æ²¡æœ‰ä¸­é—´å˜é‡ï¼Œå®ƒä»å¤´åˆ°å°¾éƒ½åœ¨å†™å‡½æ•°ï¼Œåªæœ‰åœ¨æœ€åçš„æ—¶å€™æ‰é€šè¿‡è°ƒç”¨  &lt;code&gt;convertName&lt;/code&gt;  äº§ç”Ÿå®é™…çš„ç»“æœã€‚&lt;/p&gt;
&lt;h3 id=&quot;%E5%B0%BE%E9%80%92%E5%BD%92%E4%BC%98%E5%8C%96&quot;&gt;å°¾é€’å½’ä¼˜åŒ–&lt;/h3&gt;
&lt;p&gt;è¿­ä»£åœ¨å‡½æ•°å¼è¯­è¨€ä¸­å¸¸ç”¨&lt;strong&gt;é€’å½’&lt;/strong&gt;æ¥å®Œæˆï¼Œç”¨é€’å½’æ¥å®ç°æ§åˆ¶æµç¨‹çš„æœºåˆ¶ï¼Œæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹ç‚¹ã€‚æˆ‘æƒ³æ‚¨å½“ç„¶çŸ¥é“ &lt;code&gt;é€’å½’&lt;/code&gt; çš„å®³å¤„ï¼Œé‚£å°±æ˜¯å¦‚æœé€’å½’å¾ˆæ·±çš„è¯ï¼Œstack å—ä¸äº†ï¼Œå¹¶ä¼šå¯¼è‡´æ€§èƒ½å¤§å¹…åº¦ä¸‹é™ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬ä½¿ç”¨å°¾é€’å½’ä¼˜åŒ–æŠ€æœ¯â€”â€”æ¯æ¬¡é€’å½’æ—¶éƒ½ä¼šé‡ç”¨ stackï¼Œè¿™æ ·ä¸€æ¥èƒ½å¤Ÿæå‡æ€§èƒ½ã€‚å°¾é€’å½’çš„å®ç°ï¼Œå…¶å®æ˜¯åŸºäºç¼–è¯‘å™¨çš„è¯†åˆ«å’Œä¼˜åŒ–çš„ï¼Œç¼–è¯‘å™¨å‘ç°ä¸€ä¸ªå‡½æ•°æ˜¯å°¾é€’å½’ï¼Œå°±ä¼šæŠŠå®ƒå®ç°ä¸ºä¸å‘½ä»¤å¼ç¼–ç¨‹ä¸­çš„è¿­ä»£å·®ä¸å¤šçš„æ±‡ç¼–ç ã€‚&lt;/p&gt;
&lt;h3 id=&quot;%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E7%9B%B8%E5%85%B3%E6%8A%80%E6%9C%AF&quot;&gt;å‡½æ•°å¼ç¼–ç¨‹ç›¸å…³æŠ€æœ¯&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;map &amp;amp; reduce&lt;/strong&gt;Â ï¼šè¿™ä¸ªæŠ€æœ¯ä¸ç”¨å¤šè¯´äº†ï¼Œå‡½æ•°å¼ç¼–ç¨‹æœ€å¸¸è§çš„æŠ€æœ¯ï¼Œå°±æ˜¯å¯¹ä¸€ä¸ªé›†åˆåš Map å’Œ Reduce æ“ä½œã€‚è¿™æ¯”èµ·è¿‡ç¨‹å¼çš„è¯­è¨€æ¥è¯´ï¼Œåœ¨ä»£ç ä¸Šè¦æ›´å®¹æ˜“é˜…è¯»ã€‚ï¼ˆä¼ ç»Ÿè¿‡ç¨‹å¼çš„è¯­è¨€éœ€è¦ä½¿ç”¨ for/while å¾ªç¯ï¼Œç„¶ååœ¨å„ç§å˜é‡ä¸­æŠŠæ•°æ®å€’è¿‡æ¥å€’è¿‡å»çš„ï¼‰è¿™ä¸ªå¾ˆåƒ C++ä¸­çš„ STL ä¸­çš„ foreachï¼Œfind_ifï¼Œcount_if ä¹‹æµçš„å‡½æ•°çš„ç©æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;pipeline&lt;/strong&gt;ï¼šè¿™ä¸ªæŠ€æœ¯çš„æ„æ€æ˜¯ï¼ŒæŠŠå‡½æ•°å®ä¾‹æˆä¸€ä¸ªä¸€ä¸ªçš„ actionï¼Œç„¶åï¼ŒæŠŠä¸€ç»„ action æ”¾åˆ°ä¸€ä¸ªæ•°ç»„æˆ–æ˜¯åˆ—è¡¨ä¸­ï¼Œç„¶åæŠŠæ•°æ®ä¼ ç»™è¿™ä¸ª action listï¼Œæ•°æ®å°±åƒä¸€ä¸ª pipeline ä¸€æ ·é¡ºåºåœ°è¢«å„ä¸ªå‡½æ•°æ‰€æ“ä½œï¼Œæœ€ç»ˆå¾—åˆ°æˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;compose&lt;/strong&gt;ï¼šå®ƒå¯ä»¥æ¥æ”¶å¤šä¸ªç‹¬ç«‹çš„å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œç„¶åå°†è¿™äº›å‡½æ•°è¿›è¡Œç»„åˆä¸²è”ï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ªâ€œç»„åˆå‡½æ•°â€ã€‚&lt;code&gt;pipe&lt;/code&gt; ä¸Â &lt;code&gt;compose&lt;/code&gt; çš„å…±åŒç‚¹æ˜¯ï¼šéƒ½è¿”å›â€œç»„åˆå‡½æ•°â€ï¼ŒåŒºåˆ«åˆ™æ˜¯æ‰§è¡Œçš„é¡ºåºä¸åŒï¼Œå‰è€…æ˜¯ä»å·¦å‘å³æ‰§è¡Œï¼Œåè€…åˆ™æ˜¯ä»å³å‘å·¦æ‰§è¡Œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;recursing é€’å½’&lt;/strong&gt;Â ï¼šé€’å½’æœ€å¤§çš„å¥½å¤„å°±ç®€åŒ–ä»£ç ï¼Œä»–å¯ä»¥æŠŠä¸€ä¸ªå¤æ‚çš„é—®é¢˜ç”¨å¾ˆç®€å•çš„ä»£ç æè¿°å‡ºæ¥ã€‚æ³¨æ„ï¼šé€’å½’çš„ç²¾é«“æ˜¯æè¿°é—®é¢˜ï¼Œè€Œè¿™æ­£æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„ç²¾é«“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;currying&lt;/strong&gt;ï¼šæŠŠä¸€ä¸ªå‡½æ•°çš„å¤šä¸ªå‚æ•°åˆ†è§£æˆå¤šä¸ªå‡½æ•°ï¼Œ ç„¶åæŠŠå‡½æ•°å¤šå±‚å°è£…èµ·æ¥ï¼Œæ¯å±‚å‡½æ•°éƒ½è¿”å›ä¸€ä¸ªå‡½æ•°å»æ¥æ”¶ä¸‹ä¸€ä¸ªå‚æ•°è¿™æ ·ï¼Œå¯ä»¥ç®€åŒ–å‡½æ•°çš„å¤šä¸ªå‚æ•°ã€‚åœ¨ C++ä¸­ï¼Œè¿™ä¸ªå¾ˆåƒ STL ä¸­çš„ bind_1st æˆ–æ˜¯ bind2ndã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;higher order function é«˜é˜¶å‡½æ•°&lt;/strong&gt;ï¼šæ‰€è°“é«˜é˜¶å‡½æ•°å°±æ˜¯å‡½æ•°å½“å‚æ•°ï¼ŒæŠŠä¼ å…¥çš„å‡½æ•°åšä¸€ä¸ªå°è£…ï¼Œç„¶åè¿”å›è¿™ä¸ªå°è£…å‡½æ•°ã€‚ç°è±¡ä¸Šå°±æ˜¯å‡½æ•°ä¼ è¿›ä¼ å‡ºï¼Œå°±åƒé¢å‘å¯¹è±¡å¯¹è±¡æ»¡å¤©é£ä¸€æ ·ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%E7%9A%84%E6%84%8F%E4%B9%89&quot;&gt;å‡½æ•°å¼ç¼–ç¨‹çš„æ„ä¹‰&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä»£ç ç®€æ´ï¼Œå¼€å‘å¿«é€Ÿ&lt;/strong&gt;ï¼šå¤§é‡ä½¿ç”¨å‡½æ•°ï¼Œå‡å°‘äº†ä»£ç çš„é‡å¤ï¼Œå› æ­¤ç¨‹åºæ¯”è¾ƒçŸ­ï¼Œå¼€å‘é€Ÿåº¦è¾ƒå¿«ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¥è¿‘è‡ªç„¶è¯­è¨€ï¼Œæ˜“äºç†è§£&lt;/strong&gt;ï¼šå‡½æ•°å¼ç¼–ç¨‹çš„è‡ªç”±åº¦å¾ˆé«˜ï¼Œå¯ä»¥å†™å‡ºå¾ˆæ¥è¿‘è‡ªç„¶è¯­è¨€çš„ä»£ç ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›´æ–¹ä¾¿çš„ä»£ç ç®¡ç†&lt;/strong&gt;ï¼šä¸ä¾èµ–ã€ä¹Ÿä¸ä¼šæ”¹å˜å¤–ç•Œçš„çŠ¶æ€ï¼Œåªè¦ç»™å®šè¾“å…¥å‚æ•°ï¼Œè¿”å›çš„ç»“æœå¿…å®šç›¸åŒï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ›´å°‘çš„å‡ºé”™æ¦‚ç‡&lt;/strong&gt;ï¼šå› ä¸ºæ¯ä¸ªå‡½æ•°éƒ½å¾ˆå°ï¼Œè€Œä¸”ç›¸åŒè¾“å…¥ï¼Œæ°¸è¿œå¯ä»¥å¾—åˆ°ç›¸åŒçš„è¾“å‡ºï¼Œæµ‹è¯•ä¹Ÿå¾ˆç®€å•ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜“äº&quot;å¹¶å‘ç¼–ç¨‹&quot;&lt;/strong&gt;ï¼šå› ä¸ºå®ƒä¸ä¿®æ”¹å˜é‡ï¼Œæ‰€ä»¥æ ¹æœ¬ä¸å­˜åœ¨&quot;é”&quot;çº¿ç¨‹çš„é—®é¢˜ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä»£ç çš„çƒ­å‡çº§&lt;/strong&gt;ï¼šåŸºäºæ²¡æœ‰å‰¯ä½œç”¨ç‰¹ç‚¹ï¼Œåªè¦ä¿è¯æ¥å£ä¸å˜ï¼Œå†…éƒ¨å®ç°æ˜¯å¤–éƒ¨æ— å…³çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B%EF%BC%8C%E7%BB%93%E8%AF%AD&quot;&gt;å‡½æ•°å¼ç¼–ç¨‹ï¼Œç»“è¯­&lt;/h2&gt;
&lt;p&gt;æ­£å¦‚æ‚¨åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­çœ‹åˆ°çš„ï¼Œå®ƒå¸Œæœ›ä½¿ç”¨å°çš„ï¼ˆç†æƒ³æƒ…å†µä¸‹æ˜¯&lt;strong&gt;çº¯å‡½æ•°&lt;/strong&gt;ï¼‰å‡½æ•°æ¥è§£å†³é—®é¢˜ã€‚è¿™ç§æ–¹æ³•ä¹Ÿéå¸¸å…·æœ‰å¯ &lt;code&gt;æ‰©å±•æ€§&lt;/code&gt;ï¼Œå¹¶ä¸”å‡½æ•°å¯ä»¥ &lt;code&gt;é‡ç”¨&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ²¡æœ‰æ›´å¥½å’Œæ›´åçš„èŒƒå¼ã€‚æœ‰ç»éªŒçš„å¼€å‘äººå‘˜ï¼Œå¯ä»¥çœ‹åˆ°æ¯ç§èŒƒå¼çš„ä¼˜ç‚¹ï¼Œå¹¶ä¸ºç»™å®šçš„é—®é¢˜é€‰æ‹©ç›¸å¯¹æ›´åˆé€‚çš„ã€‚è¿‡ç¨‹å¼ç¼–ç¨‹ï¼Œå¹¶ä¸æ˜¯è¯´ä½ ä¸èƒ½ä½¿ç”¨å‡½æ•°ï¼›å‡½æ•°å¼ç¼–ç¨‹ä¹Ÿä¸ä¼šé˜»æ­¢ä½ ä½¿ç”¨â€œç±»â€ã€‚è¿™äº›èŒƒå¼ï¼Œåªæ˜¯ä»¥ä¸€ç§éšä»£ç å¢é•¿è€Œæœ‰ç›Šçš„æ–¹å¼ï¼Œæ¥å¸®åŠ©è§£å†³é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;åŸæ–‡é¦–å‘äºï¼š&lt;a href=&quot;https://forum.lovejade.cn/d/182&quot;&gt;æµ…è°ˆå…³äºã€Œå‡½æ•°å¼ç¼–ç¨‹ã€çš„ç†è§£ ï½œ å®œæƒ³æ‚ ç„¶äº­&lt;/a&gt;ï¼Œ@2022 å¹´ 05 æœˆ 30 æ—¥ã€‚&lt;/p&gt;
&lt;h2 id=&quot;%E6%89%80%E5%8F%82%E8%80%83%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0&quot;&gt;æ‰€å‚è€ƒç³»åˆ—æ–‡ç« &lt;/h2&gt;

&lt;h2 id=&quot;%E7%8C%9C%E6%82%A8%E5%8F%AF%E8%83%BD%E6%84%9F%E5%85%B4%E8%B6%A3%E7%9A%84%E6%96%87%E7%AB%A0&quot;&gt;çŒœæ‚¨å¯èƒ½æ„Ÿå…´è¶£çš„æ–‡ç« &lt;/h2&gt;


                &lt;section class=&quot;m-tags in-post&quot;&gt;
                  &lt;h3 class=&quot;m-submenu-title&quot;&gt;Tags&lt;/h3&gt;
                  
                &lt;/section&gt;
            &lt;/div&gt;
          &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>56eab0a132537e77293b86afcb80ad1a</guid>
<title>æˆ‘ï¼Œ35å²ç¨‹åºå‘˜ï¼Œåƒä¸‡èµ„äº§3å¤©å½’é›¶ï¼›Twitteræ¶æ„å†³ç­–ï¼›åœ¨è·å…°åšç¨‹åºå‘˜çš„ä½“éªŒï½œç å†œå‘¨åˆŠVIPä¼šå‘˜ä¸“å±é‚®ä»¶å‘¨æŠ¥ Vol.093</title>
<link>https://toutiao.io/k/jr55rv0</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;profile_inner&quot;&gt;
                  &lt;strong class=&quot;profile_nickname&quot;&gt;æˆ‘çˆ±ç¨‹åºå‘˜&lt;/strong&gt;
                  &lt;img class=&quot;profile_avatar&quot; id=&quot;js_profile_qrcode_img&quot; src=&quot;&quot; alt=&quot;&quot;/&gt;

                  &lt;p class=&quot;profile_meta&quot;&gt;
                  &lt;label class=&quot;profile_meta_label&quot;&gt;Weixin ID&lt;/label&gt;
                  &lt;span class=&quot;profile_meta_value&quot;&gt;developerWorks&lt;/span&gt;
                  &lt;/p&gt;

                  &lt;p class=&quot;profile_meta&quot;&gt;
                  &lt;label class=&quot;profile_meta_label&quot;&gt;About Feature&lt;/label&gt;
                  &lt;span class=&quot;profile_meta_value&quot;&gt;æˆ‘ä»¬çš„äº§å“ï¼šã€Šç å†œå‘¨åˆŠã€‹ http://manong.io/ ã€ã€Šå¼€å‘è€…å¤´æ¡ã€‹ http://toutiao.io/&lt;/span&gt;
                  &lt;/p&gt;
                &lt;/div&gt;
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>33931400e3481179b5bf029205cc40b2</guid>
<title>å›¾æ–‡ç»“åˆï¼Rediså»¶è¿Ÿé˜Ÿåˆ—golangé«˜æ•ˆå®è·µ</title>
<link>https://toutiao.io/k/rc9xqyk</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                                                                     &quot; id=&quot;js_content&quot;&gt;
            &lt;p data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.1&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/VY8SELNGe977Xa5zfy5iaV3agpS11Cqm4psjPOibic6BZSicnBFh6uWzCFp3uqN5R114Fq85DmuCzdL3eESlQ37bFA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¯¼è¯­Â |Â &lt;/span&gt;&lt;span/&gt;&lt;span&gt;æœ¬æ–‡ä¸»è¦è®²è¿°å¦‚ä½•ä½¿ç”¨golangåŸºäºRediså®ç°å»¶è¿Ÿæ¶ˆæ¯é˜Ÿåˆ—ç»„ä»¶ã€‚&lt;span&gt;å¸Œæœ›å¯¹æœ‰éœ€æ±‚çš„åŒå­¦æœ‰æ‰€å¸®åŠ©ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;ä¸€ã€èƒŒæ™¯&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸šåŠ¡ä¸­ç»å¸¸ä¼šæœ‰è¿™æ ·çš„åœºæ™¯ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¼šç›´æ¥é€šè¿‡ä¸€ä¸ªæœ¬åœ°å®šæ—¶å™¨æ¥å¸®æˆ‘ä»¬å®Œæˆè¿™ä¸ªä»»åŠ¡ã€‚å¦‚æœæˆ‘ä»¬çš„ç³»ç»Ÿæ˜¯å¤šå®ä¾‹åˆ†å¸ƒå¼çš„ï¼Œæœ¬åœ°å®šæ—¶å™¨å°±ä¼šé¢ä¸´å¾ˆå¤šé—®é¢˜ï¼Œå¦‚ï¼šæ€ä¹ˆä¿è¯é‡å¤å¤„ç†çš„é—®é¢˜ï¼›ç»Ÿä¸€ç®¡æ§çš„é—®é¢˜ç­‰&lt;/span&gt;&lt;span&gt;ç­‰ã€‚é¢å¯¹æœ¬åœ°å®šæ—¶å™¨é‡åˆ°çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ†å¸ƒå¼å»¶è¿Ÿé˜Ÿåˆ—æ¥å®ç°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™é‡Œä»‹ç»ä¸€ç§ä½¿ç”¨golangåŸºäºrediså®ç°å»¶è¿Ÿé˜Ÿåˆ—çš„å…·ä½“å®è·µã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;äºŒã€å®ç°åŸç†&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;h2&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;1ã€ä½¿ç”¨rediså¯ä»¥é€šè¿‡Listç±»å‹æ¥å®ç°é˜Ÿåˆ—çš„åŠŸèƒ½ï¼Œé€šè¿‡LPOPï¼ŒRPUSHæ¥ä¿è¯å…ˆè¿›å…ˆå‡ºçš„ç‰¹æ€§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.21015625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe97YZ1n3ibOnfqrveNaLwG1TdX7m8cprnRkKkUlQic6GtGpWBSNGAvzezmJBjXBCiazSuaVZclWSuHm4A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2ã€é’ˆå¯¹éœ€è¦å»¶è¿Ÿå¤„ç†çš„æ¶ˆæ¯å¯ä»¥é€šè¿‡SortedSetæœ‰åºé›†åˆç±»å‹æ¥å­˜å‚¨, æ¶ˆæ¯åˆ°æœŸæ—¶æœŸä½¿ç”¨æ—¶é—´æˆ³ï¼Œä½œä¸ºmember scoreçš„å€¼ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.38984375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe97YZ1n3ibOnfqrveNaLwG1Tdic1iatZlQtoxAQrqlzBSmvcibZQshGUJWMlexJMPYonqLNzib1zAe8CHHw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;3ã€å®šæ—¶è½®è®­sortedsetï¼Œä½¿ç”¨åˆ°æœŸæ—¶é—´æˆ³ä½œä¸ºscoreï¼Œé€šè¿‡ZRANGEBYSCOREæ’åºè·å–åˆ°æœŸçš„æ¶ˆæ¯ï¼Œå°†åˆ°æœŸçš„æ¶ˆæ¯è¿ç§»åˆ°Listé˜Ÿåˆ—ä¸­å³å¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.52734375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe97YZ1n3ibOnfqrveNaLwG1Td3Iw65J4pmZeDgoiahP45E7WJGajichKk4HRSyM9LK1wDAhTgmyZxN9lw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;ä¸‰ã€æ¶ˆæ¯è¿ç§»çš„åŸå­æ€§&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é’ˆå¯¹åˆ°æœŸæ¶ˆæ¯çš„å¾€listçš„è¿ç§»éœ€è¦ä¸‰ä¸ªåŠ¨ä½œï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æŸ¥è¯¢åˆ°æœŸæ¶ˆæ¯ï¼›&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ä»sortedsetå–å‡ºåˆ°æœŸæ¶ˆæ¯ï¼›&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å°†åˆ°æœŸæ¶ˆæ¯pushåˆ°listé˜Ÿåˆ—ä¸­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é‚£å¦‚ä½•ä¿è¯è¿™ä¸ªä¸‰ä¸ªæ“ä½œçš„&lt;/span&gt;&lt;span&gt;åŸå­æ€§&lt;/span&gt;&lt;span&gt;ï¼ˆè¦ä¹ˆéƒ½æˆåŠŸï¼Œè¦ä¹ˆéƒ½å¤±è´¥ï¼‰ã€‚åœ¨redisä¸­æœ‰ä¸¤ç§å¤„ç†æ–¹å¼å¯ä»¥ä¿è¯å¤šæ“ä½œé—´çš„åŸå­æ€§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ï¼ˆä¸€ï¼‰Transaction&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ï¼ˆäºŒï¼‰LuaScript&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Redisä½¿ç”¨å•ä¸ªLuaè§£é‡Šå™¨å»è¿è¡Œæ‰€æœ‰è„šæœ¬ï¼Œå¹¶ä¸”ï¼ŒRedisä¹Ÿä¿è¯è„šæœ¬ä¼šä»¥åŸå­æ€§(atomic)çš„æ–¹å¼æ‰§è¡Œï¼šå½“æŸä¸ªè„šæœ¬æ­£åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œä¸ä¼šæœ‰å…¶ä»–è„šæœ¬æˆ–Rediså‘½ä»¤è¢«æ‰§è¡Œã€‚è¿™å’Œä½¿ç”¨MULTI/EXECåŒ…å›´çš„äº‹åŠ¡å¾ˆç±»ä¼¼ã€‚åœ¨å…¶ä»–åˆ«çš„å®¢æˆ·ç«¯çœ‹æ¥ï¼Œè„šæœ¬çš„æ•ˆæœ(effect)è¦ä¹ˆæ˜¯ä¸å¯è§çš„(not visible)ï¼Œè¦ä¹ˆå°±æ˜¯å·²å®Œæˆçš„(already completed)ã€‚æ³¨æ„ï¼šç¼–å†™çš„scriptä¸èƒ½å¾ˆæ…¢ï¼Œå› ä¸ºä¼šé˜»å¡å…¶ä»–å‘½ä»¤çš„æ‰§è¡Œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Transactionèƒ½å¤Ÿä¿è¯å¤šä¸ªæ“ä½œçš„åŸå­æ€§ã€‚LuaScriptä¸ä»…ä¿è¯äº†å¤šæ“ä½œé—´çš„åŸå­æ€§ï¼Œå¯ä»¥å¤„ç†æ›´å¤æ‚çš„é€»è¾‘ï¼Œå¦‚ä¿éšœgetã€setæ“ä½œçš„åŸå­æ€§ã€‚è¿™é‡Œé’ˆå¯¹åˆ°æœŸæ¶ˆæ¯çš„è¿ç§»æ˜¯å…ˆæŸ¥è¯¢åˆ°æœŸçš„æ¶ˆæ¯ï¼Œç„¶åä¸¤ä¸ªå†™æ“ä½œå®Œæˆã€‚æ‰€ä»¥è¿™é‡Œä½¿ç”¨LuaScriptå®ç°æ›´ä¸ºç®€å•æ–¹ä¾¿ã€‚å¦åˆ™è¿˜éœ€è¦åŠ ä¸€ä¸ªé”æ¥é¿å…åŒä¸€ä¸ªåˆ°æœŸæ¶ˆæ¯å¤šæ¬¡å¤„ç†çš„é—®é¢˜ã€‚å¦‚æœè¿ç§»åˆ°æœŸæ¶ˆæ¯çš„æ¨¡å—æ˜¯å•å®ä¾‹ï¼ˆéå¹¶å‘ï¼‰å¤„ç†çš„ï¼Œä¸éœ€è¦åŠ é”å¤„ç†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2&gt;&lt;br/&gt;&lt;/h2&gt;&lt;p&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;å››ã€Listï¼ŒSortedSetæ€§èƒ½&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç½‘ä¸Šé’ˆå¯¹redisçš„å‹æµ‹å¾ˆå¤šï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨memtier_benchmarkå°†ä¸å»¶è¿Ÿé˜Ÿåˆ—ä½¿ç”¨åˆ°ç›¸å…³çš„æ“ä½œè¿›è¡Œå‹æµ‹ã€‚ä½¿ç”¨redis6.0ï¼Œ8æ ¸16GlinuxæœåŠ¡å™¨ã€‚&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ï¼ˆä¸€ï¼‰Listè¯»å†™æ€§èƒ½ LPOPï¼ŒRPUSHæ—¶é—´å¤æ‚åº¦ä¸ºO(1)&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.184375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe97YZ1n3ibOnfqrveNaLwG1TdOIJz4K8PCaUS6UItKNib7LXjGlaXjib3RUxC1vFIdHZxRw5qicX2hkE6Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.184375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe97YZ1n3ibOnfqrveNaLwG1TdOIJz4K8PCaUS6UItKNib7LXjGlaXjib3RUxC1vFIdHZxRw5qicX2hkE6Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ï¼ˆäºŒï¼‰sortedset ç›¸å…³æ“ä½œçš„è¯»å†™æ€§èƒ½&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.19140625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe97YZ1n3ibOnfqrveNaLwG1TdSzEwLcUREwLC8ck6d5uMuWiafmVjBiaMh0Bia7xqpqLjPkolpxpgOSFfA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.184375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe97YZ1n3ibOnfqrveNaLwG1TdnrWl6A1Qdp4qibshd0NZVeibficvjrK1ZHsbDfBeVEhdBicAcjibbScTEIA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨ç†Ÿæ‚‰äº†åŸºäºrediså®ç°çš„å»¶è¿Ÿé˜Ÿåˆ—çš„åŸºæœ¬æ–¹æ³•åï¼Œæ¥ä¸‹æ¥çœ‹ä¸‹ä½¿ç”¨golangå…·ä½“çš„å®ç°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;äº”ã€æ¶ˆæ¯åè®®å®šä¹‰&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å®šä¹‰ä¸€ä¸ªæ¶ˆæ¯ç»“æ„æ¥ä¿å­˜æ¶ˆæ¯ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;type&lt;/span&gt; Job &lt;span class=&quot;code-snippet__keyword&quot;&gt;struct&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  Id        &lt;span class=&quot;code-snippet__keyword&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;code-snippet__string&quot;&gt;`msgpack:&quot;1&quot;`&lt;/span&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  Topic     &lt;span class=&quot;code-snippet__keyword&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;code-snippet__string&quot;&gt;`msgpack:&quot;2&quot;`&lt;/span&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  Delay     &lt;span class=&quot;code-snippet__keyword&quot;&gt;int64&lt;/span&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;`msgpack:&quot;3&quot;`&lt;/span&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  Playload  []&lt;span class=&quot;code-snippet__keyword&quot;&gt;byte&lt;/span&gt; &lt;span class=&quot;code-snippet__string&quot;&gt;`msgpack:&quot;4&quot;`&lt;/span&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  Timestamp &lt;span class=&quot;code-snippet__keyword&quot;&gt;int64&lt;/span&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;`msgpack:&quot;5&quot;`&lt;/span&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™é‡Œä½¿ç”¨msgpackå®ç°æ¶ˆæ¯çš„åºåˆ—åŒ–ã€‚messagepackæ˜¯ä¸€ä¸ªé«˜æ•ˆçš„äºŒè¿›åˆ¶åºåˆ—åŒ–åè®®ã€‚ç›¸æ¯”jsonç¼–ç åçš„æ•°æ®çš„ä½“ç§¯æ›´å°ï¼Œç¼–è§£ç çš„é€Ÿåº¦æ›´å¿«ã€‚redis scriptä¹Ÿæ”¯æŒmessagepackã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;benchmarkæ€§èƒ½æµ‹è¯•:&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.95234375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe97YZ1n3ibOnfqrveNaLwG1TdAzwhGAoMbHpmeC7BEtKwhWibmiaOwQaZPIzngOnw6Lo1YsGgZJI0icUIQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å…¶ä»–ç¼–è§£ç æ€§èƒ½å¯¹æ¯”å‚è€ƒï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;span&gt;https://github.com/alecthomas/go_serialization_benchmarks&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;å…­ã€å»¶è¿Ÿé˜Ÿåˆ—çš„æ ¸å¿ƒ-redis&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åŸºäºrediså®ç°åˆ†å¸ƒå¼å»¶è¿Ÿé˜Ÿåˆ—ï¼Œå…¶æ ¸å¿ƒæ˜¯ä½¿ç”¨Listç±»å‹å®ç°é˜Ÿåˆ—åŠŸèƒ½ï¼›ä½¿ç”¨sortedsetå®ç°å»¶è¿Ÿæ¶ˆæ¯çš„ç®¡ç†ï¼Œå¹¶ä¸”è½®è¯¢sortedsetå°†åˆ°æœŸçš„æ¶ˆæ¯è¿ç§»åˆ°Listé˜Ÿåˆ—ä¸­ï¼Œå†å¯ç”¨consumerå®ä¾‹å¤„ç†Listé˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ï¼Œå°±å®Œæˆäº†æ•´ä¸ªå»¶è¿Ÿé˜Ÿåˆ—çš„æ ¸å¿ƒå¤„ç†æµç¨‹ã€‚å…ˆæ¥çœ‹ä¸‹é’ˆå¯¹redisæ“ä½œçš„ç›¸å…³å®ç°ï¼Œè¿™é‡Œæ“ä½œredisçš„åº“ä½¿ç”¨çš„æ˜¯go-redisåº“ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ï¼ˆä¸€ï¼‰è·å–å»¶æ—¶æ¶ˆæ¯æ•°&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;zcard&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(rdb *redis.Client, key &lt;span class=&quot;code-snippet__keyword&quot;&gt;string&lt;/span&gt;)&lt;/span&gt; *&lt;span class=&quot;code-snippet__title&quot;&gt;redis&lt;/span&gt;.&lt;span class=&quot;code-snippet__title&quot;&gt;IntCmd&lt;/span&gt;&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; rdb.ZCard(context.Background(), key)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ï¼ˆäºŒï¼‰è·å–ç­‰å¾…æ‰§è¡Œçš„æ¶ˆæ¯æ•°&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;llen&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(rdb *redis.Client, key &lt;span class=&quot;code-snippet__keyword&quot;&gt;string&lt;/span&gt;)&lt;/span&gt; *&lt;span class=&quot;code-snippet__title&quot;&gt;redis&lt;/span&gt;.&lt;span class=&quot;code-snippet__title&quot;&gt;IntCmd&lt;/span&gt;&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; rdb.LLen(context.Background(), key)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™ä¸¤ä¸ªæ–¹æ³•å±äºmetricæ–¹æ³•ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬äº†è§£å½“å‰å»¶æ—¶é˜Ÿåˆ—çš„æ¶ˆæ¯ç§¯å‹æƒ…å†µï¼Œä¸ºæˆ‘ä»¬å¯¹consumerå®ä¾‹çš„æ°´å¹³æ‰©å±•æä¾›å‚è€ƒæŒ‡æ ‡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ï¼ˆä¸‰ï¼‰å‘é€å¯æ‰§è¡Œæ¶ˆæ¯&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cs&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;func &lt;span class=&quot;code-snippet__title&quot;&gt;lpush&lt;/span&gt;(&lt;span class=&quot;code-snippet__params&quot;&gt;rdb *redis.Client, key &lt;span class=&quot;code-snippet__keyword&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;code-snippet__keyword&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;interface&lt;/span&gt;{}&lt;/span&gt;) error&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; rdb.LPush(context.Background(), key, &lt;span class=&quot;code-snippet__keyword&quot;&gt;value&lt;/span&gt;).Err()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ï¼ˆå››ï¼‰å‘é€å»¶æ—¶æ¶ˆæ¯&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;zadd&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(rdb *redis.Client, key &lt;span class=&quot;code-snippet__keyword&quot;&gt;string&lt;/span&gt;, value &lt;span class=&quot;code-snippet__keyword&quot;&gt;interface&lt;/span&gt;{}, delay &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt;)&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;error&lt;/span&gt;&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; rdb.ZAdd(&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    context.Background(),&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    key,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &amp;amp;redis.Z{Score: &lt;span class=&quot;code-snippet__keyword&quot;&gt;float64&lt;/span&gt;(delay), Member: value}).Err()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ï¼ˆäº”ï¼‰è·å–å¯æ‰§è¡Œæ¶ˆæ¯&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;rpop&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(rdb *redis.Client, key &lt;span class=&quot;code-snippet__keyword&quot;&gt;string&lt;/span&gt;)&lt;/span&gt; *&lt;span class=&quot;code-snippet__title&quot;&gt;redis&lt;/span&gt;.&lt;span class=&quot;code-snippet__title&quot;&gt;StringCmd&lt;/span&gt;&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; rdb.RPop(context.Background(), key)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ï¼ˆå…­ï¼‰åˆ°æœŸæ¶ˆæ¯è¿ç§»åˆ°å¾…æ‰§è¡Œé˜Ÿåˆ—&lt;/span&gt;&lt;span&gt;ï¼Œè¿™é‡Œä½¿ç”¨redis scriptå®ç°ã€‚æ¯æ¬¡éƒ½å–æŒ‡å®šæ•°é‡ï¼ˆlimit 0 numï¼‰çš„åˆ°æœŸæ¶ˆæ¯ï¼Œæ—¶é—´èŠ±è´¹ç›¸å¯¹ç¨³å®šã€‚ä¹Ÿä¸è‡³äºåœ¨åˆ°æœŸæ¶ˆæ¯çªå¢æ—¶ï¼Œå¯¼è‡´rediså†…å­˜å ç”¨çªå¢ã€‚æ¯æ¬¡æ‰§è¡Œä»…å¯¹å®¢æˆ·ç«¯è¿”å›æ¶ˆæ¯æ•°ï¼Œä»è€Œé™ä½ç½‘ç»œä¼ è¾“ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;kotlin&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;func migrateExpiredJobs(rdb *redis.Client, delaykey, readyKey string) error {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  script := redis.NewScript(`&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  local &lt;span class=&quot;code-snippet__keyword&quot;&gt;val&lt;/span&gt; = redis.call(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;zrangebyscore&#x27;&lt;/span&gt;, KEYS[&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;], &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;-inf&#x27;&lt;/span&gt;, ARGV[&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;], &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;limit&#x27;&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;20&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt;(next(&lt;span class=&quot;code-snippet__keyword&quot;&gt;val&lt;/span&gt;) ~= nil) then&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    redis.call(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;zremrangebyrank&#x27;&lt;/span&gt;, KEYS[&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;], &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;, #&lt;span class=&quot;code-snippet__keyword&quot;&gt;val&lt;/span&gt; - &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    redis.call(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;rpush&#x27;&lt;/span&gt;, KEYS[&lt;span class=&quot;code-snippet__number&quot;&gt;2&lt;/span&gt;], unpack(&lt;span class=&quot;code-snippet__keyword&quot;&gt;val&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;, #&lt;span class=&quot;code-snippet__keyword&quot;&gt;val&lt;/span&gt;))&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  end&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; #&lt;span class=&quot;code-snippet__keyword&quot;&gt;val&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  `)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; script.Run(context.Background(), rdb, []string{delaykey, readyKey}, time.Now().Unix()).Err()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;ä¸ƒã€Productå®ç°&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;productåŠŸèƒ½æ¯”è¾ƒå•ä¸€ï¼Œä»…å®ç°æ¶ˆæ¯çš„æŠ•é€’ã€‚è¿™é‡Œæ˜¯å¯¹Redisä¸¤ä¸ªæ–¹æ³•RPUSHã€ZADDçš„çš„å°è£…ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cpp&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;type QueueClient &lt;span class=&quot;code-snippet__class&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;struct&lt;/span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__built_in&quot;&gt;queue&lt;/span&gt; *&lt;span class=&quot;code-snippet__built_in&quot;&gt;queue&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;QueueClientæä¾›äº†&lt;/span&gt;&lt;span&gt;ä¸¤ä¸ªæ“ä½œæ–¹æ³•&lt;/span&gt;&lt;span&gt;ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__params&quot;&gt;(c *QueueClient)&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;Dispatch&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(topic &lt;span class=&quot;code-snippet__keyword&quot;&gt;string&lt;/span&gt;, payload []&lt;span class=&quot;code-snippet__keyword&quot;&gt;byte&lt;/span&gt;)&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;error&lt;/span&gt;&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; c.queue.Push(&amp;amp;Job{&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    Topic:     topic,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    Playload:  payload,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    Delay:     &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    Timestamp: time.Now().Unix(),&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  })&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__params&quot;&gt;(c *QueueClient)&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;DispatchDelaySecond&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(topic &lt;span class=&quot;code-snippet__keyword&quot;&gt;string&lt;/span&gt;, payload []&lt;span class=&quot;code-snippet__keyword&quot;&gt;byte&lt;/span&gt;, delaySec &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt;)&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;error&lt;/span&gt;&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; c.queue.DelayJob(&amp;amp;Job{&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    Topic:     topic,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    Playload:  payload,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    Delay:     &lt;span class=&quot;code-snippet__keyword&quot;&gt;int64&lt;/span&gt;(delaySec),&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    Timestamp: time.Now().Unix(),&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  })&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;å…«ã€consumerå®ç°&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨å®Œæˆæ¶ˆæ¯æŠ•é€’çš„ç›¸å…³æ–¹æ³•çš„å®ç°åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å¦‚ä½•å®ç°ä¸€ä¸ªç¨³å®šé«˜æ•ˆçš„æ¶ˆæ¯å¤„ç†æ¡†æ¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;consumerå®Œæˆ&lt;/span&gt;&lt;span&gt;ä¸¤ä¸ªæ ¸å¿ƒæ“ä½œ&lt;/span&gt;&lt;span&gt;ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¥ä¸‹æ¥çœ‹ä¸‹consumer queueserverçš„å®ç°çš„ä¸»è¦æ–¹æ³•ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.77421875&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe97YZ1n3ibOnfqrveNaLwG1TdpraXJRHAIdvOzmeic7nPkhJJaH7OXFyd5ibo4fA0b5wcLuX9IW5BjScw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;1ã€QueueServerå¼€å§‹æ‰§è¡Œçš„topic workerå¤„ç†æ¶ˆæ¯ã€‚ä¸€ä¸ªtopicä¸€ä¸ªåç¨‹çš„å¤„ç†æ–¹å¼ï¼Œä¿è¯ä¸åŒçš„topicä¹‹é—´ä¸ç›¸äº’å½±å“ï¼›&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;type&lt;/span&gt; QueueServer &lt;span class=&quot;code-snippet__keyword&quot;&gt;struct&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  queueOption *QueueOption&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  topicwokers []*TopicWorker&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  queue       *queue&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  stopCh      &lt;span class=&quot;code-snippet__keyword&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;struct&lt;/span&gt;{}&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__built_in&quot;&gt;close&lt;/span&gt;       &lt;span class=&quot;code-snippet__keyword&quot;&gt;uint32&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__params&quot;&gt;(s *QueueServer)&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;Run&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(ctx context.Context)&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;error&lt;/span&gt;&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;for&lt;/span&gt; _, topicWorker := &lt;span class=&quot;code-snippet__keyword&quot;&gt;range&lt;/span&gt; s.topicwokers {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;go&lt;/span&gt; s.processJob(ctx, topicWorker)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;go&lt;/span&gt; s.watchSystemSignal(ctx)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &amp;lt;-s.stopCh&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  ctxTimeOut, cancalFunc := context.WithTimeout(ctx, time.Second*time.Duration(s.queueOption.CloseWaitTime))&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;defer&lt;/span&gt; cancalFunc()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; s.Close(ctxTimeOut)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2ã€å®šä¹‰ç»Ÿä¸€æ¶ˆæ¯å¤„ç†æ¥å£JobHandlerï¼Œå®šä¹‰äº†ä¸¤ä¸ªæ–¹æ³•ï¼šTopicè¿”å›é˜Ÿåˆ—åï¼›Executeå®Œæˆæ¶ˆæ¯çš„å¤„ç†ï¼Œå¯ä»¥å®ç°ä¸šåŠ¡å¤„ç†é€»è¾‘ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cs&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;type JobHandler &lt;span class=&quot;code-snippet__keyword&quot;&gt;interface&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  Topic() &lt;span class=&quot;code-snippet__keyword&quot;&gt;string&lt;/span&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  Execute(context.Context, []&lt;span class=&quot;code-snippet__keyword&quot;&gt;byte&lt;/span&gt;) error &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é€šè¿‡topic workeræ¥ç®¡ç†æ¯ä¸ªæ¶ˆæ¯é˜Ÿåˆ—çš„å¤„ç†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cpp&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;type TopicWorker &lt;span class=&quot;code-snippet__class&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;struct&lt;/span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  TopicName   &lt;span class=&quot;code-snippet__built_in&quot;&gt;string&lt;/span&gt;     &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  Handler     JobHandler &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  WorkerCount &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  WorkerPool  *semaphore.Weighted &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é€šè¿‡ä¿¡å·é‡semaphoreåº“å®ç°åç¨‹çš„å¹¶å‘æ•°æ§åˆ¶ã€‚å¦‚æœæ¶ˆæ¯é—´æœ‰é¡ºåºè¦æ±‚ï¼Œå¯ä»¥è®¾ç½®workerCountä¸º1ã€‚å½“serveré€€å‡ºçš„æ—¶å€™ï¼Œè·å–ä¸workerCountç›¸ç­‰æ•°é‡çš„ä¿¡å·é‡ç­‰å¾…æ‰€æœ‰å¤„ç†æ¶ˆæ¯çš„åç¨‹æ‰§è¡Œå®Œæˆã€‚s.queue.GetReadyJob(topic.TopicName) è¿™ä¸ªæ–¹æ³•çš„å†…éƒ¨å‡ºäº†è·å–å¯æ‰§è¡Œæ¶ˆæ¯å¤–ï¼Œè¿˜æ‰§è¡Œäº†åˆ°æœŸæ¶ˆæ¯è¿ç§»çš„æ–¹æ³•ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__params&quot;&gt;(q *queue)&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;GetReadyJob&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(topic &lt;span class=&quot;code-snippet__keyword&quot;&gt;string&lt;/span&gt;)&lt;/span&gt; &lt;span class=&quot;code-snippet__params&quot;&gt;(*Job, error)&lt;/span&gt;&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  migrateExpiredJobs(q.rdb, &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                           fmt.Sprintf(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;%s:%s&quot;&lt;/span&gt;, topic, DelayJobType),&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                           fmt.Sprintf(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;%s:%s&quot;&lt;/span&gt;, topic, ReadyJobType))&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; q.Pop(topic)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__params&quot;&gt;(s *QueueServer)&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;processJob&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(ctx context.Context, topic *TopicWorker)&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;error&lt;/span&gt;&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;for&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; atomic.LoadUint32(&amp;amp;s.&lt;span class=&quot;code-snippet__built_in&quot;&gt;close&lt;/span&gt;) == closed {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      &lt;span class=&quot;code-snippet__keyword&quot;&gt;break&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; err := topic.WorkerPool.Acquire(ctx, &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;); err != &lt;span class=&quot;code-snippet__literal&quot;&gt;nil&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; err&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    job, err := s.queue.GetReadyJob(topic.TopicName)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;code-snippet__literal&quot;&gt;nil&lt;/span&gt; &amp;amp;&amp;amp; err != redis.Nil {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      topic.WorkerPool.Release(&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      &lt;span class=&quot;code-snippet__keyword&quot;&gt;continue&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; job == &lt;span class=&quot;code-snippet__literal&quot;&gt;nil&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      topic.WorkerPool.Release(&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      time.Sleep(time.Second * time.Duration(s.queueOption.WaitTime))&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      &lt;span class=&quot;code-snippet__keyword&quot;&gt;continue&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      topic.Handler.Execute(ctx, job.Playload)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      topic.WorkerPool.Release(&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    }()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; err := topic.WorkerPool.Acquire(ctx, &lt;span class=&quot;code-snippet__keyword&quot;&gt;int64&lt;/span&gt;(topic.WorkerCount)); err != &lt;span class=&quot;code-snippet__literal&quot;&gt;nil&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; err&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-snippet__literal&quot;&gt;nil&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;ä¹ã€æ‰©å±•&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;h3&gt;&lt;span&gt;ï¼ˆä¸€ï¼‰Jobé”™è¯¯é‡è¯•&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¦‚æœæƒ³è¦ç»™ä¸Šé¢çš„Jobå¤„ç†åŠ ä¸Šé”™è¯¯é‡è¯•çš„æœºåˆ¶ã€‚æˆ‘ä»¬ç»™Job structåŠ ä¸ŠTryCountå­—æ®µï¼Œå½“JobHandler æ‰§è¡Œè¿”å›erroræ—¶ï¼ŒæŠŠjobæ”¾å…¥å¯æ‰§è¡Œé˜Ÿåˆ—æˆ–æ˜¯å»¶è¿Ÿé›†åˆï¼ˆç­‰å¾…æŒ‡å®šæ—¶å€™åé‡è¯•ï¼‰ã€‚é€šè¿‡TryCountæ¥é™å®šé‡è¯•çš„æ¬¡æ•°ã€‚è¶…è¿‡æŒ‡å®šæ¬¡æ•°åä¸¢å¼ƒæ¶ˆæ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;h3&gt;&lt;span&gt;ï¼ˆäºŒï¼‰Jobè¶…æ—¶é‡è¯•&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¦‚æœæƒ³è¦ç»™ä¸Šé¢çš„Jobå¤„ç†åŠ ä¸Šè¶…æ—¶é‡è¯•çš„æœºåˆ¶ã€‚æˆ‘ä»¬ç»™Job structåŠ ä¸ŠTryTimeOutå­—æ®µï¼Œå½“è¯»å–æ¶ˆæ¯çš„åŒæ—¶æŠŠjobæ”¾å…¥å»¶è¿Ÿé›†åˆï¼ˆç­‰å¾…åˆ°è¾¾è¶…æ—¶æ—¶é—´åé‡è¯•ï¼‰ã€‚é€šè¿‡TryCountæ¥é™å®šé‡è¯•çš„æ¬¡æ•°ã€‚è¶…è¿‡æŒ‡å®šæ¬¡æ•°åä¸¢å¼ƒæ¶ˆæ¯ã€‚æ‰§è¡ŒæˆåŠŸæ—¶éœ€è¦ä»seté›†åˆåˆ é™¤ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;åã€æ€»ç»“&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä½¿ç”¨golangåŸºäºrediså®ç°å»¶è¿Ÿé˜Ÿåˆ—çš„æ–¹æ³•å¦‚ä¸Šæ‰€è¿°ï¼Œå®ç°æ–¹å¼å¾ˆå¤šï¼Œä½†æ ¸å¿ƒåŸºæœ¬ç›¸åŒï¼Œå¯èƒ½åœ¨æŸäº›å®ç°ç»†èŠ‚ä¸Šç•¥æœ‰å·®å¼‚ã€‚æ¯”å¦‚ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç†Ÿæ‚‰php laravelæ¡†æ¶çš„åº”è¯¥è§‰å¾—è¿™ä¸ªæ–¹æ¡ˆç›¸ä¼¼ï¼Œæœ¬æ–‡çš„å®ç°æ–¹æ¡ˆè·Ÿlaravelé‡Œçš„queueåº“å®ç°æ–¹æ¡ˆç±»ä¼¼ï¼Œå®ƒæ”¯æŒæ›´å¤šçš„æ¶ˆæ¯é©±åŠ¨ï¼šæœ¬åœ°ã€æ–‡ä»¶ã€mysqlã€redisç­‰ã€‚ä½†æˆ‘ä»¬å€ŸåŠ©golangå¯ä»¥å®ç°çš„æ›´é«˜æ•ˆæ¶ˆæ¯å¤„ç†æ¡†æ¶ã€‚ä½¿ç”¨è¿™ç§æ–¹å¼éœ€è¦è€ƒè™‘æ¶ˆæ¯ä¸¢å¤±æ—¶çš„è¡¥å¿æœºåˆ¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;h1 data-lines=&quot;1&quot; data-sign=&quot;381759e8570981ca8c2525ac43ac6e29&quot;&gt;&lt;strong&gt;å‚è€ƒèµ„æ–™ï¼š&lt;/strong&gt;&lt;/h1&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;1.&lt;/span&gt;&lt;span&gt;redisæ“ä½œï¼š&lt;/span&gt;&lt;span&gt;http://doc.redisfans.com/index.html&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;2.go-redisï¼š&lt;/span&gt;&lt;span&gt;https://github.com/go-redis/redis&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;Â ä½œè€…ç®€ä»‹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;105&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;105&quot; data-fileid=&quot;100043716&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe97YZ1n3ibOnfqrveNaLwG1TdficxibicUn2ragAcupYXIMnwY0Yia3cnXAXmQZK4FDzHjxiazlpfR3ibTueQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;500&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;ç‹æ™“æ—&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span/&gt;&lt;span&gt;&lt;span&gt;è…¾è®¯åº”ç”¨å¼€å‘å·¥ç¨‹å¸ˆ&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;è…¾è®¯åº”ç”¨å¼€å‘å·¥ç¨‹å¸ˆï¼Œç›®å‰è´Ÿè´£æ¸¸å¯çˆ±å¹³å°ï¼ˆyka.qq.comï¼‰çš„åå°å¼€å‘å·¥ä½œã€‚&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;37b42a3b6ddcc414e6e32be4a161956e&quot;&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;Â æ¨èé˜…è¯»&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI2NDU4OTExOQ==&amp;amp;mid=2247537945&amp;amp;idx=1&amp;amp;sn=d51d07540f96441cd96ee708480c4646&amp;amp;chksm=eaa84f49dddfc65f817c15fe9885414cb6b305dd71dbe0f939a7d46134aee03201fa406b64c7&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;å¼€ç®±å³ç”¨ï¼æ·±å…¥æµ…å‡ºPrometheusç›‘æ§ç¥å™¨&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;å¼€ç®±å³ç”¨ï¼æ·±å…¥æµ…å‡ºPrometheusç›‘æ§ç¥å™¨&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI2NDU4OTExOQ==&amp;amp;mid=2247537758&amp;amp;idx=1&amp;amp;sn=06cce9029d32f224c0e0225be6b42f80&amp;amp;chksm=eaa84e0edddfc718104daecd7fe4f012790dc4fff7732e8ba7fa994616401d5263a0e8b2c7cf&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;C++17åœ¨ä¸šåŠ¡ä»£ç ä¸­æœ€å¥½ç”¨çš„10ä¸ªç‰¹æ€§ï¼&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;11&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;&lt;span&gt;C++17åœ¨ä¸šåŠ¡ä»£ç ä¸­æœ€å¥½ç”¨çš„10ä¸ªç‰¹æ€§ï¼&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI2NDU4OTExOQ==&amp;amp;mid=2247537712&amp;amp;idx=1&amp;amp;sn=229dd98665f20adb94c97f0a0b05105b&amp;amp;chksm=eaa84e60dddfc776d0b1a77303d2e6e8dbe48c4ad8cbdf2e97019efbc70b202ada62646299da&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;å¿…æ’¸ç³»åˆ—ï¼Goå¦å¤–å‡ ä¸ªé»‘é­”æ³•æŠ€å·§æ±‡æ€»&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;&lt;span&gt;å¿…æ’¸ç³»åˆ—ï¼Goå¦å¤–å‡ ä¸ªé»‘é­”æ³•æŠ€å·§æ±‡æ€»&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI2NDU4OTExOQ==&amp;amp;mid=2247535783&amp;amp;idx=1&amp;amp;sn=e9736107bfb467fedb5cbcd4bcfa6f01&amp;amp;chksm=eaa856f7dddfdfe1cba3fa86754926632aaabf63870cd129ff3dbf11385199f4413bf9fe4240&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;æ¥äº†ï¼Goçš„2ä¸ªé»‘é­”æ³•æŠ€å·§&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;æ¥äº†ï¼Goçš„2ä¸ªé»‘é­”æ³•æŠ€å·§&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzI2NDU4OTExOQ==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe96FK2eEg86vUicOR3n6kAHk1PHvTb8VBicYk0RmNQYsQyibgg8iaZqT0bCEU9VKo3Z3iceoQfgycyMpKWQ/0?wx_fmt=png&quot; data-nickname=&quot;äº‘åŠ ç¤¾åŒº&quot; data-alias=&quot;QcloudCommunity&quot; data-signature=&quot;è…¾è®¯äº‘å®˜æ–¹ç¤¾åŒºå…¬ä¼—å·ï¼Œæ±‡èšæŠ€æœ¯å¼€å‘è€…ç¾¤ä½“ï¼Œåˆ†äº«æŠ€æœ¯å¹²è´§ï¼Œæ‰“é€ æŠ€æœ¯å½±å“åŠ›äº¤æµç¤¾åŒºã€‚&quot; data-from=&quot;2&quot; has-insert-preloading=&quot;1&quot; wah-hotarea=&quot;click&quot;/&gt;&lt;/section&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;37b42a3b6ddcc414e6e32be4a161956e&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.59375&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/VY8SELNGe977Xa5zfy5iaV3agpS11Cqm4xV7ckfbmtFLyUjFID2k7yO4q8hvB4OqYoNkARZ2xuvzKvMtnmVN2BQ/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;640&quot;/&gt;&lt;/p&gt;
          &lt;/div&gt;

          

          



           
                                
                    
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>3e8e8bac3bafcb1291c147920e40a734</guid>
<title>æ·±å…¥ç†è§£ ELK ä¸­ Logstash çš„åº•å±‚åŸç† + å¡«å‘æŒ‡å—</title>
<link>https://toutiao.io/k/gjx29io</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä½ å¥½ï¼Œæˆ‘æ˜¯æ‚Ÿç©ºå‘€ï¼Œæˆ‘è¢«æ†§æ†¬å°å“¥å‚¬æ›´äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;span&gt;å„¿ç«¥èŠ‚ã€ç«¯åˆèŠ‚å‰å‘ä¸€ç¯‡ï¼Œç¥å¤§å®¶åŒèŠ‚å¿«ä¹&lt;/span&gt;~&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzAwMjI0ODk0NA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ2JicQpKzblLHz64qoibVa3ATNA4rH8mIYXAF3OErAzxFKHzf5qiaiblb4rAMuAXXMJHEcKcvaHv4ia9rA/0?wx_fmt=png&quot; data-nickname=&quot;æ‚Ÿç©ºèŠæ¶æ„&quot; data-alias=&quot;PassJava666&quot; data-signature=&quot;ç”¨æ•…äº‹è®²è§£åˆ†å¸ƒå¼ã€æ¶æ„ã€‚ ã€Š JVM æ€§èƒ½è°ƒä¼˜å®æˆ˜ã€‹ä¸“æ ä½œè€…ï¼Œ ã€ŠSpring Cloud å®æˆ˜ PassJavaã€‹å¼€æºä½œè€…ï¼Œ è‡ªä¸»å¼€å‘äº† PMP åˆ·é¢˜å°ç¨‹åºã€‚&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬æ–‡ç›®å½•å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;å‰è¨€&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;ä¸€ã€éƒ¨ç½²æ¶æ„å›¾&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;äºŒã€Logstash ç”¨æ¥åšä»€ä¹ˆï¼Ÿ&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;ä¸‰ã€Logstash çš„åŸç†&lt;/p&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;3.1 ä» Logstash è‡ªå¸¦çš„é…ç½®è¯´èµ·&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;3.2 Input æ’ä»¶&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;3.3 Filter æ’ä»¶&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;3.4 Output æ’ä»¶&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;3.5 å®Œæ•´é…ç½®&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;p&gt;å››ã€Logstash æ€ä¹ˆè·‘èµ·æ¥çš„&lt;/p&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;4.1 Logstash å¦‚ä½•è¿è¡Œçš„&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;4.2 Logstash çš„æ¶æ„åŸç†&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;p&gt;äº”ã€Logstash å®•æœºé£é™©&lt;/p&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;5.1 Logstash å•ç‚¹éƒ¨ç½²çš„é£é™©&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;5.2 å¼€æœºå¯åŠ¨ Logstash&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;p&gt;å…­ã€æ€»ç»“&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å‰è¨€&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šè¿‡æœ¬ç¯‡å†…å®¹ï¼Œä½ å¯ä»¥å­¦åˆ°å¦‚ä½•è§£å†³ Logstash çš„å¸¸è§é—®é¢˜ã€ç†è§£ Logstash çš„è¿è¡Œæœºåˆ¶ã€é›†ç¾¤ç¯å¢ƒä¸‹å¦‚ä½•éƒ¨ç½² ELK Stackã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ä½¿ç”¨ Logstash é‡åˆ°äº†å¾ˆå¤šå‘ï¼Œæœ¬ç¯‡ä¹Ÿä¼šè®²è§£è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;æ—¥å¿—è®°å½•çš„æ ¼å¼å¤æ‚ï¼Œæ­£åˆ™è¡¨è¾¾å¼éå¸¸ç£¨äººã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœåŠ¡æ—¥å¿—æœ‰å¤šç§æ ¼å¼ï¼Œå¦‚ä½•åŒ¹é…ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é”™è¯¯æ—¥å¿—æ‰“å°äº†å †æ ˆä¿¡æ¯ï¼ŒåŒ…å«å¾ˆå¤šè¡Œï¼Œå¦‚ä½•åˆå¹¶ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ—¥å¿—è®°å½•è¡Œæ•°è¿‡å¤šï¼ˆ100å¤šè¡Œï¼‰ï¼Œè¢«æ‹†åˆ†åˆ°äº†å…¶ä»–çš„æ—¥å¿—è®°å½•ä¸­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è¾“å‡ºåˆ° ES çš„æ—¥å¿—åŒ…å«å¾ˆå¤šæ— æ„ä¹‰å­—æ®µã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è¾“å‡ºåˆ° ES çš„æ—¥å¿—æ—¶é—´å’Œæœ¬æ¥çš„æ—¥å¿—æ—¶é—´ç›¸å·® 8 å°æ—¶ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¦‚ä½•ä¼˜åŒ– Logstash çš„æ€§èƒ½&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Logstash å•ç‚¹æ•…éšœå¦‚ä½•å¤„ç†ã€‚&lt;span/&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä¸€ã€éƒ¨ç½²æ¶æ„å›¾&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šæ¬¡æˆ‘ä»¬èŠåˆ°äº† ELK Stack çš„æ­å»ºï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzAwMjI0ODk0NA==&amp;amp;mid=2451962693&amp;amp;idx=1&amp;amp;sn=96530613aaadd8240d8a5c2ab7dff49d&amp;amp;chksm=8d1c02daba6b8bcc2499861fd37aac5cfa88d616fc839cb6a7a3c003118457ac325c3dcbeb62&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;ä¸€æ–‡å¸¦ä½ æ­å»ºä¸€å¥— ELK Stack æ—¥å¿—å¹³å°&lt;/a&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ€è¿‘æ‚Ÿç©ºæ­£åœ¨æˆ‘ä»¬çš„æµ‹è¯•ç¯å¢ƒéƒ¨ç½²è¿™ä¸€å¥— ELKï¼Œå‘ç°è¿˜æ˜¯æœ‰å¾ˆå¤šå†…å®¹éœ€è¦å†å•ç‹¬æ‹å‡ ç¯‡å‡ºæ¥è¯¦ç»†è®²è®²çš„ï¼Œè¿™æ¬¡æˆ‘ä¼šå¸¦ç€å¤§å®¶ä¸€èµ·æ¥çœ‹ä¸‹ ELK ä¸­çš„ Logstash ç»„ä»¶çš„è½åœ°ç©æ³•å’Œè¸©å‘ä¹‹è·¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æµ‹è¯•ç¯å¢ƒç›®å‰æœ‰ &lt;span&gt;12&lt;/span&gt; å°æœºå™¨ï¼Œå…¶ä¸­ æœ‰ &lt;span&gt;4&lt;/span&gt; å°ç»™åç«¯å¾®æœåŠ¡ã€Filebeatã€Logstash ä½¿ç”¨ï¼Œ&lt;span&gt;3&lt;/span&gt; å°ç»™ ES é›†ç¾¤å’Œ Kibana ä½¿ç”¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;éƒ¨ç½²æ‹“æ‰‘å›¾å¦‚ä¸‹ï¼š&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.46386946386946387&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8RMYK466oGtbQNnpUgEvWO3oR7uhu8ibXS27cTz0KjpZMUangvDm3sticA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2574&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;éƒ¨ç½²è¯´æ˜&lt;/span&gt;ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;4 å°æœåŠ¡å™¨ç»™ä¸šåŠ¡å¾®æœåŠ¡æœåŠ¡ä½¿ç”¨ï¼Œå¾®æœåŠ¡çš„æ—¥å¿—ä¼šå­˜æ”¾æœ¬æœºä¸Šã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;4 å°æœåŠ¡å™¨éƒ½å®‰è£… Filebeat æ—¥å¿—é‡‡é›†å™¨ï¼Œé‡‡é›†æœ¬æœºçš„å¾®æœåŠ¡æ—¥å¿—ï¼Œ&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å…¶ä¸­ä¸€å°æœåŠ¡å™¨å®‰è£… Logstash ï¼ŒFilebeat å‘é€æ—¥å¿—ç»™ Logstashã€‚Logstash å°†æ—¥å¿—è¾“å‡ºåˆ° Elasticsearch é›†ç¾¤ä¸­ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;3 å°æœåŠ¡å™¨éƒ½å®‰è£…æœ‰ Elasticsearch æœåŠ¡ï¼Œç»„æˆ ES é›†ç¾¤ã€‚å…¶ä¸­ä¸€å°å®‰è£… Kibana æœåŠ¡ï¼ŒæŸ¥è¯¢ ES é›†ç¾¤ä¸­çš„æ—¥å¿—ä¿¡æ¯ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;äºŒã€Logstash ç”¨æ¥åšä»€ä¹ˆï¼Ÿ&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½ æ˜¯å¦è¿˜åœ¨è‹¦æ¼æ¯æ¬¡ç”Ÿäº§ç¯å¢ƒå‡ºç°é—®é¢˜éƒ½éœ€è¦è¿œç¨‹åˆ°æœåŠ¡å™¨æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½ æ˜¯å¦è¿˜åœ¨ä¸ºäº†æ²¡æœ‰ç»Ÿä¸€çš„æ—¥å¿—æœç´¢å…¥å£è€Œçƒ¦å¿ƒï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½ æ˜¯å¦è¿˜åœ¨ä¸ºä»å‡ åä¸‡æ¡æ—¥å¿—ä¸­æœç´¢å…³é”®ä¿¡æ¯è€Œè‹¦æ¼ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ²¡é”™ï¼ŒLogstash å®ƒæ¥å•¦ï¼Œå¸¦ç€æ‰€æœ‰çš„æ—¥å¿—è®°å½•æ¥å•¦ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Logstash å®ƒæ˜¯å¸®åŠ©æˆ‘ä»¬æ”¶é›†ã€è§£æå’Œè½¬æ¢æ—¥å¿—çš„ã€‚ä½œä¸º ELK ä¸­çš„ä¸€å‘˜ï¼Œå‘æŒ¥ç€å¾ˆå¤§çš„ä½œç”¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ç„¶ Logstash ä¸ä»…ä»…ç”¨åœ¨æ”¶é›†æ—¥å¿—æ–¹é¢ï¼Œè¿˜å¯ä»¥æ”¶é›†å…¶ä»–å†…å®¹ï¼Œæˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„è¿˜æ˜¯ç”¨åœ¨æ—¥å¿—æ–¹é¢ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä¸‰ã€Logstash çš„åŸç†&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.1 ä» Logstash è‡ªå¸¦çš„é…ç½®è¯´èµ·&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Logstash çš„åŸç†å…¶å®è¿˜æ¯”è¾ƒç®€å•ï¼Œä¸€ä¸ªè¾“å…¥ï¼Œä¸€ä¸ªè¾“å‡ºï¼Œä¸­é—´æœ‰ä¸ªç®¡é“ï¼ˆä¸æ˜¯å¿…é¡»çš„ï¼‰ï¼Œè¿™ä¸ªç®¡é“ç”¨æ¥æ”¶é›†ã€è§£æå’Œè½¬æ¢æ—¥å¿—çš„ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4413793103448276&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8RHJ66ZUWtIeib49wSb1BPCAYOoD3MPfxAXKFYXnuaQlyicDMibf6rPkoNA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;870&quot;/&gt;&lt;figcaption&gt;Logstash ç»„ä»¶&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Logstash è¿è¡Œæ—¶ï¼Œä¼šè¯»å– Logstash çš„é…ç½®æ–‡ä»¶ï¼Œé…ç½®æ–‡ä»¶å¯ä»¥é…ç½®è¾“å…¥æºã€è¾“å‡ºæºã€ä»¥åŠå¦‚ä½•è§£æå’Œè½¬æ¢çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Logstash é…ç½®é¡¹ä¸­æœ‰ä¸¤ä¸ªå¿…éœ€å…ƒç´ ï¼Œè¾“å…¥ï¼ˆinputsï¼‰å’Œè¾“å‡ºï¼ˆouputsï¼‰ï¼Œä»¥åŠä¸€ä¸ªå¯é€‰å…ƒç´  filters è¿‡æ»¤å™¨æ’ä»¶ã€‚input å¯ä»¥é…ç½®æ¥æºæ•°æ®ï¼Œè¿‡æ»¤å™¨æ’ä»¶åœ¨ä½ æŒ‡å®šæ—¶ä¿®æ”¹æ•°æ®ï¼Œoutput å°†æ•°æ®å†™å…¥ç›®æ ‡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬æ¥çœ‹ä¸‹ Logstash è½¯ä»¶è‡ªå¸¦çš„ä¸€ä¸ªç¤ºä¾‹é…ç½®ï¼Œæ–‡ä»¶è·¯å¾„ï¼š\logstash-7.6.2\config\logstash-sample.conf&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4735169491525424&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8RzxAdegoef5B8l9QrabEKAEejobIqIgXa1V2CLs1ThicOCicAHUbBAEpw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;944&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Œä¸€ä¸ª input å’Œ ä¸€ä¸ª output å°±æå®šäº†ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3762057877813505&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8RZFonQD0deJmnlvicrMWCNXuycfoyAtp6gsn6kZY53VXhs8Qh0Yxsdtg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1244&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯è¿™ç§é…ç½®å…¶å®æ„ä¹‰ä¸å¤§ï¼Œæ²¡æœ‰å¯¹æ—¥å¿—è¿›è¡Œè§£æï¼Œä¼ åˆ° ES ä¸­çš„æ•°æ®æ˜¯åŸå§‹æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª message å­—æ®µåŒ…å«ä¸€æ•´æ¡æ—¥å¿—ä¿¡æ¯ï¼Œä¸ä¾¿äºæ ¹æ®å­—æ®µæœç´¢ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.2 Input æ’ä»¶&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é…ç½®æ–‡ä»¶ä¸­ input è¾“å…¥æºæŒ‡å®šäº† beatsï¼Œè€Œ beats æ˜¯ä¸€ä¸ªå¤§å®¶æ—ï¼ŒFilebeat åªæ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚å¯¹åº”çš„ç«¯å£ port = 5044ï¼Œè¡¨ç¤º beats æ’ä»¶å¯ä»¥å¾€ 5044 ç«¯å£å‘é€æ—¥å¿—ï¼Œlogstash å¯ä»¥æ¥æ”¶åˆ°é€šè¿‡è¿™ä¸ªç«¯å£å’Œ beats æ’ä»¶é€šä¿¡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨éƒ¨ç½²æ¶æ„å›¾ä¸­ï¼Œinput è¾“å…¥æºæ˜¯ Filebeatï¼Œå®ƒä¸“é—¨ç›‘æ§æ—¥å¿—çš„å˜åŒ–ï¼Œç„¶åå°†æ—¥å¿—ä¼ ç»™ Logstashã€‚åœ¨æ—©æœŸï¼ŒLogstash æ˜¯è‡ªå·±æ¥é‡‡é›†çš„æ—¥å¿—æ–‡ä»¶çš„ã€‚æ‰€ä»¥æ—©æœŸçš„æ—¥å¿—æ£€ç´¢æ–¹æ¡ˆæ‰å«åš ELKï¼ŒElasticsearch + Logstash + Kibanaï¼Œè€Œç°åœ¨åŠ å…¥äº† Filebeat åï¼Œè¿™å¥—æ—¥å¿—æ£€ç´¢æ–¹æ¡ˆå±äº ELK Stackï¼Œä¸æ˜¯ ELKFï¼Œæ‘’å¼ƒäº†ç”¨é¦–å­—æ¯ç¼©å†™æ¥å‘½åã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦å¤– input å…¶å®æœ‰å¾ˆå¤šç»„ä»¶å¯ä»¥ä½œä¸ºè¾“å…¥æºï¼Œä¸é™äº Filebeatï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥ç”¨ Kafka ä½œä¸ºè¾“å…¥æºï¼Œå°†æ¶ˆæ¯ä¼ ç»™ Logstashã€‚å…·ä½“æœ‰å“ªäº›æ’ä»¶åˆ—è¡¨ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ª &lt;span&gt;input æ’ä»¶åˆ—è¡¨&lt;/span&gt;&lt;sup&gt;[1]&lt;/sup&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.3 Filter æ’ä»¶&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€Œå¯¹äº Logstash çš„ Filterï¼Œè¿™ä¸ªæ‰æ˜¯ Logstash æœ€å¼ºå¤§çš„åœ°æ–¹ã€‚Filter æ’ä»¶ä¹Ÿéå¸¸å¤šï¼Œæˆ‘ä»¬å¸¸ç”¨åˆ°çš„ grokã€dateã€mutateã€mutiline å››ä¸ªæ’ä»¶ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äº filter çš„å„ä¸ªæ’ä»¶æ‰§è¡Œæµç¨‹ï¼Œå¯ä»¥çœ‹ä¸‹é¢è¿™å¼ å›¾ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4929906542056075&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8Rj7wlhzy2JCF4UKNkwvRrSL6F14YRTriaSJb72OZOkevLZOibLS2ObYbw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;856&quot;/&gt;&lt;figcaption&gt;å›¾ç‰‡æ¥è‡ª Elasticsearch å®˜ç½‘&lt;/figcaption&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3.3.1 æ—¥å¿—ç¤ºä¾‹&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¥æˆ‘ä»¬åç«¯æœåŠ¡æ‰“å°çš„æ—¥å¿—ä¸ºä¾‹ï¼Œçœ‹æ˜¯å¦‚ä½•ç”¨ filter æ’ä»¶æ¥è§£æå’Œè½¬æ¢æ—¥å¿—çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;logback.xml é…ç½®çš„æ—¥å¿—æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&amp;lt;encoder&amp;gt;&lt;br/&gt;Â Â Â Â &amp;lt;pattern&amp;gt;%d{yyyy-MM-ddÂ HH:mm:ss.SSS}Â [%thread]Â %-5levelÂ %loggerÂ -Â %msg%n&amp;lt;/pattern&amp;gt;&lt;br/&gt;&amp;lt;/encoder&amp;gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ—¥å¿—æ ¼å¼è§£é‡Šå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;è®°å½•æ—¥å¿—æ—¶é—´ï¼š%d{yyyy-MM-dd HH:mm:ss.SSS}&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;è®°å½•æ˜¯å“ªä¸ªçº¿ç¨‹æ‰“å°çš„æ—¥å¿—ï¼š[%thread]&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;è®°å½•æ—¥å¿—ç­‰çº§ï¼š%-5level&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;æ‰“å°æ—¥å¿—çš„ç±»ï¼š%logger&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;è®°å½•å…·ä½“æ—¥å¿—ä¿¡æ¯ï¼š%msg%nï¼Œè¿™ä¸ª msg çš„å†…å®¹å°±æ˜¯ log.info(&quot;abc&quot;) ä¸­çš„ abcã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šè¿‡æ‰§è¡Œä»£ç  log.info(&quot;xxx&quot;) åï¼Œå°±ä¼šåœ¨æœ¬åœ°çš„æ—¥å¿—æ–‡ä»¶ä¸­è¿½åŠ ä¸€æ¡æ—¥å¿—ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3.3.2 æ‰“å°çš„æ—¥å¿—å†…å®¹&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»æœåŠ¡å™¨æ‹·è´å‡ºäº†ä¸€æ¡æ—¥å¿—ï¼Œçœ‹ä¸‹é•¿ä»€ä¹ˆæ ·ï¼Œæœ‰éƒ¨åˆ†æ•æ„Ÿä¿¡æ¯æˆ‘å·²ç»å»æ‰äº†ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;2022-06-16Â 15:50:00.070Â [XNIO-1Â task-1]Â INFOÂ Â com.passjava.configÂ -Â æ–¹æ³•åä¸º:MemberController-,è¯·æ±‚å‚æ•°:{çœç•¥}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£ä¹ˆ Logstash å¦‚ä½•é’ˆå¯¹ä¸Šé¢çš„ä¿¡æ¯è§£æå‡ºå¯¹åº”çš„å­—æ®µå‘¢ï¼Ÿæ¯”å¦‚å¦‚ä½•è§£æå‡ºæ‰“å°æ—¥å¿—çš„æ—¶é—´ã€æ—¥å¿—ç­‰çº§ã€æ—¥å¿—ä¿¡æ¯ï¼Ÿ&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3.3.3 grok æ’ä»¶&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œå°±è¦ç”¨åˆ° logstash çš„ filter ä¸­çš„ grok æ’ä»¶ã€‚filebeat å‘é€ç»™ logstash çš„æ—¥å¿—å†…å®¹ä¼šæ”¾åˆ°message å­—æ®µé‡Œé¢ï¼Œlogstash åŒ¹é…è¿™ä¸ª message å­—æ®µå°±å¯ä»¥äº†ã€‚é…ç½®é¡¹å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;filterÂ {&lt;br/&gt;Â grokÂ {&lt;br/&gt;Â Â Â Â Â Â matchÂ =&amp;gt;Â [Â &lt;span&gt;&quot;message&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;(?&amp;lt;logTime&amp;gt;\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2}.\d{3})\s+\[(?&amp;lt;thread&amp;gt;.*)\]\s+(?&amp;lt;level&amp;gt;\w*)\s{1,2}+(?&amp;lt;class&amp;gt;\S*)\s+-\s+(?&amp;lt;content&amp;gt;.*)\s*&quot;&lt;/span&gt;]&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;span&gt;å‘&lt;/span&gt;ï¼šæ—¥å¿—è®°å½•çš„æ ¼å¼å¤æ‚ï¼Œæ­£åˆ™è¡¨è¾¾å¼éå¸¸ç£¨äººã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤§å®¶å‘ç°æ²¡ï¼Œä¸Šé¢çš„ åŒ¹é… message çš„æ­£åˆ™è¡¨è¾¾å¼è¿˜æ˜¯æŒºå¤æ‚çš„ï¼Œè¿™ä¸ªæ˜¯æˆ‘ä¸€ç‚¹ä¸€ç‚¹è¯•å‡ºæ¥çš„ã€‚Kibana è‡ªå¸¦ grok çš„æ­£åˆ™åŒ¹é…çš„å·¥å…·ï¼Œè·¯å¾„å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;http://&amp;lt;yourÂ kibanaÂ IP&amp;gt;:5601/app/kibana&lt;span&gt;#/dev_tools/grokdebugger&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬æŠŠæ—¥å¿—å’Œæ­£åˆ™è¡¨è¾¾å¼åˆ†åˆ«ç²˜è´´åˆ°ä¸Šé¢çš„è¾“å…¥æ¡†ï¼Œç‚¹å‡» Simulate å°±å¯ä»¥æµ‹è¯•æ˜¯å¦èƒ½æ­£ç¡®åŒ¹é…å’Œè§£æå‡ºæ—¥å¿—å­—æ®µã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6238993710691824&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8R9m9VKdfJTmiaonQDGRrLNA3kjTqz7kvibvuPcNjQ5W9iaaN1PnT8bYwzg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1590&quot;/&gt;&lt;figcaption&gt;Grok Debugger å·¥å…·&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰æ²¡æœ‰å¸¸ç”¨çš„æ­£åˆ™è¡¨è¾¾å¼å‘¢ï¼Ÿæœ‰çš„ï¼Œlogstash å®˜æ–¹ä¹Ÿç»™äº†ä¸€äº›å¸¸ç”¨çš„&lt;code&gt;å¸¸é‡&lt;/code&gt;æ¥è¡¨è¾¾é‚£äº›æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯ä»¥åˆ°è¿™ä¸ª Github åœ°å€æŸ¥çœ‹æœ‰å“ªäº›å¸¸ç”¨çš„å¸¸é‡ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;https://github.com/logstash-plugins/logstash-patterns-core/blob/main/patterns/ecs-v1/grok-patterns&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯”å¦‚å¯ä»¥ç”¨ IP å¸¸é‡æ¥ä»£æ›¿æ­£åˆ™è¡¨è¾¾å¼ &lt;code&gt;IP (?:%{IPV6}|%{IPV4})&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¥½äº†ï¼Œç»è¿‡æ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…ä¹‹åï¼Œgrok æ’ä»¶ä¼šå°†æ—¥å¿—è§£ææˆå¤šä¸ªå­—æ®µï¼Œç„¶åå°†å¤šä¸ªå­—æ®µå­˜åˆ°äº† ES ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥åœ¨ ES é€šè¿‡å­—æ®µæ¥æœç´¢ï¼Œä¹Ÿå¯ä»¥åœ¨ kibana çš„ Discover ç•Œé¢æ·»åŠ åˆ—è¡¨å±•ç¤ºçš„å­—æ®µã€‚&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5024390243902439&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8RKj8wzEnhPOctKoCqc7icN8JkdACp4qbCRqCicbbux4pfwribK2OANU6kA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;615&quot;/&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;span&gt;å‘&lt;/span&gt;ï¼šæˆ‘ä»¬åç«¯é¡¹ç›®çš„ä¸åŒæœåŠ¡æ‰“å°äº†ä¸¤ç§ä¸åŒæ ¼å¼çš„æ—¥å¿—ï¼Œé‚£è¿™ç§å¦‚ä½•åŒ¹é…ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å†åŠ ä¸€ä¸ª match å°±å¯ä»¥äº†ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;filterÂ {&lt;br/&gt;Â grokÂ {&lt;br/&gt;Â Â Â Â Â Â matchÂ =&amp;gt;Â [Â &lt;span&gt;&quot;message&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;(?&amp;lt;logTime&amp;gt;\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2}.\d{3})\s+\[(?&amp;lt;thread&amp;gt;.*)\]\s+(?&amp;lt;level&amp;gt;\w*)\s{1,2}+(?&amp;lt;class&amp;gt;\S*)\s+-\s+(?&amp;lt;content&amp;gt;.*)\s*&quot;&lt;/span&gt;]&lt;br/&gt;Â Â Â Â Â Â matchÂ =&amp;gt;Â [Â &lt;span&gt;&quot;message&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;(?&amp;lt;logTime&amp;gt;\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2}.\d{3})\s{1,2}+(?&amp;lt;level&amp;gt;\w*)\s{1,2}+.\s---+\s\[(?&amp;lt;thread&amp;gt;.*)\]+\s(?&amp;lt;class&amp;gt;\S*)\s*:+\s(?&amp;lt;content&amp;gt;.*)\s*&quot;&lt;/span&gt;]&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ä»»æ„ä¸€ä¸ª message åŒ¹é…ä¸Šäº†è¿™ä¸ªæ­£åˆ™ï¼Œåˆ™ grok æ‰§è¡Œå®Œæ¯•ã€‚å‡å¦‚è¿˜æœ‰ç¬¬ä¸‰ç§æ ¼å¼çš„ messageï¼Œé‚£ä¹ˆè™½ç„¶ grok æ²¡æœ‰åŒ¹é…ä¸Šï¼Œä½†æ˜¯ message ä¹Ÿä¼šè¾“å‡ºåˆ° ESï¼Œåªæ˜¯è¿™æ¡æ—¥å¿—åœ¨ ES ä¸­ä¸ä¼šå±•ç¤º logTimeã€level ç­‰å­—æ®µã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3.3.4 multiline æ’ä»¶&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¿˜æœ‰ä¸€ä¸ªå‘çš„åœ°æ–¹&lt;/span&gt;æ˜¯é”™è¯¯æ—¥å¿—ä¸€èˆ¬éƒ½æ˜¯å¾ˆå¤šè¡Œçš„ï¼Œä¼šæŠŠå †æ ˆä¿¡æ¯æ‰“å°å‡ºæ¥ï¼Œå½“ç»è¿‡ logstash è§£æåï¼Œæ¯ä¸€è¡Œéƒ½ä¼šå½“åšä¸€æ¡è®°å½•å­˜æ”¾åˆ° ESï¼Œé‚£è¿™ç§æƒ…å†µè‚¯å®šæ˜¯éœ€è¦å¤„ç†çš„ã€‚è¿™é‡Œå°±éœ€è¦ä½¿ç”¨ multiline æ’ä»¶ï¼Œå¯¹å±äºåŒä¸€ä¸ªæ¡æ—¥å¿—çš„è®°å½•è¿›è¡Œæ‹¼æ¥ã€‚&lt;/p&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3.3.4.1 å®‰è£… multiline æ’ä»¶&lt;/h5&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;multiline ä¸æ˜¯ logstash è‡ªå¸¦çš„ï¼Œéœ€è¦å•ç‹¬è¿›è¡Œå®‰è£…ã€‚æˆ‘ä»¬çš„ç¯å¢ƒæ˜¯æ²¡æœ‰å¤–ç½‘çš„ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œç¦»çº¿å®‰è£…ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»‹ç»åœ¨çº¿å’Œç¦»çº¿å®‰è£… multiline çš„æ–¹å¼ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ logstash æ ¹ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;bin/logstash-pluginÂ installÂ logstash-filter-multiline&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.10892586989409984&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8R5A3GI4wMKoYzPQNNVR8SdAgrzBQu7Xzj2ZB8K92E6Q4FFBjJGicMcVw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;661&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æœ‰ç½‘çš„æœºå™¨ä¸Šåœ¨çº¿å®‰è£…æ’ä»¶ï¼Œç„¶åæ‰“åŒ…ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;bin/logstash-pluginÂ installÂ logstash-filter-multiline&lt;br/&gt;bin/logstash-pluginÂ prepare-offline-packÂ logstash-filter-multiline&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‹·è´åˆ°æœåŠ¡å™¨ï¼Œæ‰§è¡Œå®‰è£…å‘½ä»¤ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;bin/logstash-pluginÂ installÂ file:///home/software/logstash-offline-plugins-7.6.2.zip&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®‰è£…æ’ä»¶éœ€è¦ç­‰å¾… 5 åˆ†é’Ÿå·¦å³çš„æ—¶é—´ï¼Œæ§åˆ¶å°ç•Œé¢ä¼šè¢« hang ä½ï¼Œå½“å‡ºç° &lt;code&gt;Install successful&lt;/code&gt; è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.08308004052684904&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8RR0HUZu1BrIn4RQlJjmiclvBEkXdfX59E9hz25nR9IF9nEibbDKFsVUoQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;987&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ£€æŸ¥ä¸‹æ’ä»¶æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹æ’ä»¶åˆ—è¡¨ã€‚å½“å‡ºç° multiline æ’ä»¶æ—¶åˆ™è¡¨ç¤ºå®‰è£…æˆåŠŸã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;bin/logstash-pluginÂ list&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3.3.4.2 ä½¿ç”¨ multiline æ’ä»¶&lt;/h5&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœè¦å¯¹åŒä¸€æ¡æ—¥å¿—çš„å¤šè¡Œè¿›è¡Œåˆå¹¶ï¼Œä½ çš„æ€è·¯æ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿæ¯”å¦‚ä¸‹é¢è¿™ä¸¤æ¡å¼‚å¸¸æ—¥å¿—ï¼Œå¦‚ä½•æŠŠæ–‡ä»¶ä¸­çš„ 8 è¡Œæ—¥å¿—åˆå¹¶æˆä¸¤æ¡æ—¥å¿—ï¼Ÿ&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.16666666666666666&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8RXsHmZE5K7I5uicRbJBDxptopdaaUGhxx6c684xDibLW7nHwVibwuUcZGw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1482&quot;/&gt;&lt;figcaption&gt;å¤šè¡Œæ—¥å¿—ç¤ºä¾‹&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ€è·¯æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ç¬¬ä¸€æ­¥ï¼šæ¯ä¸€æ¡æ—¥å¿—çš„ç¬¬ä¸€è¡Œå¼€å¤´éƒ½æ˜¯ä¸€ä¸ªæ—¶é—´ï¼Œå¯ä»¥ç”¨æ—¶é—´çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…åˆ°ç¬¬ä¸€è¡Œã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¬¬äºŒæ­¥ï¼šç„¶åå°†åé¢æ¯ä¸€è¡Œçš„æ—¥å¿—ä¸ç¬¬ä¸€è¡Œåˆå¹¶ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¬¬ä¸‰æ­¥ï¼šå½“é‡åˆ°æŸä¸€è¡Œçš„å¼€å¤´æ˜¯å¯ä»¥åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„æ—¶é—´çš„ï¼Œå°±åœæ­¢ç¬¬ä¸€æ¡æ—¥å¿—çš„åˆå¹¶ï¼Œå¼€å§‹åˆå¹¶ç¬¬äºŒæ¡æ—¥å¿—ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¬¬å››æ­¥ï¼šé‡å¤ç¬¬äºŒæ­¥å’Œç¬¬ä¸‰æ­¥&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œmultiline çš„é…ç½®å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;filterÂ {&lt;br/&gt;Â Â multilineÂ {&lt;br/&gt;Â Â Â Â patternÂ =&amp;gt;Â &lt;span&gt;&quot;^\d{4}-\d{1,2}-\d{1,2}\s\d{1,2}:\d{1,2}:\d{1,2}.\d{3}&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â negateÂ =&amp;gt;Â &lt;span&gt;true&lt;/span&gt;&lt;br/&gt;Â Â Â Â whatÂ =&amp;gt;Â &lt;span&gt;&quot;previous&quot;&lt;/span&gt;&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ—¶é—´çš„æ­£åˆ™è¡¨è¾¾å¼å°±æ˜¯è¿™ä¸ª pattern å­—æ®µï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±é¡¹ç›®ä¸­çš„æ—¥å¿—çš„æ—¶é—´æ¥å®šä¹‰æ­£åˆ™è¡¨è¾¾å¼ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;pattern&lt;/span&gt;: è¿™ä¸ªæ˜¯ç”¨æ¥åŒ¹é…æ–‡æœ¬çš„è¡¨è¾¾å¼ï¼Œä¹Ÿå¯ä»¥æ˜¯&lt;code&gt;grok&lt;/code&gt;è¡¨è¾¾å¼&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;what&lt;/span&gt;: å¦‚æœ&lt;code&gt;pattern&lt;/code&gt;åŒ¹é…æˆåŠŸçš„è¯ï¼Œé‚£ä¹ˆåŒ¹é…è¡Œæ˜¯å½’å±äºä¸Šä¸€ä¸ªäº‹ä»¶ï¼Œè¿˜æ˜¯å½’å±äºä¸‹ä¸€ä¸ªäº‹ä»¶ã€‚&lt;/p&gt;&lt;p&gt;previous: å½’å±äºä¸Šä¸€ä¸ªäº‹ä»¶ï¼Œå‘ä¸Šåˆå¹¶ã€‚&lt;/p&gt;&lt;p&gt;next: å½’å±äºä¸‹ä¸€ä¸ªäº‹ä»¶ï¼Œå‘ä¸‹åˆå¹¶&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;negate&lt;/span&gt;:æ˜¯å¦å¯¹ pattern çš„ç»“æœå–å&lt;/p&gt;&lt;p&gt;false: ä¸å–åï¼Œ&lt;span&gt;æ˜¯é»˜è®¤å€¼&lt;/span&gt;ã€‚&lt;/p&gt;&lt;p&gt;true: å–åã€‚å°†å¤šè¡Œäº‹ä»¶æ‰«æè¿‡ç¨‹ä¸­çš„è¡ŒåŒ¹é…é€»è¾‘å–åï¼ˆå¦‚æœpatternåŒ¹é…å¤±è´¥ï¼Œåˆ™è®¤ä¸ºå½“å‰è¡Œæ˜¯å¤šè¡Œäº‹ä»¶çš„ç»„æˆéƒ¨åˆ†ï¼‰&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‚è€ƒ &lt;span&gt;multiline å®˜æ–¹æ–‡æ¡£&lt;/span&gt;&lt;sup&gt;[2]&lt;/sup&gt;&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3.3.5 å¤šè¡Œè¢«æ‹†åˆ†&lt;/h4&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å‘ï¼šJava å †æ ˆæ—¥å¿—å¤ªé•¿äº†ï¼Œæœ‰ 100 å¤šè¡Œï¼Œè¢«æ‹†åˆ†äº†ä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†è¢«åˆå¹¶åˆ°äº†åŸæ¥çš„é‚£ä¸€æ¡æ—¥å¿—ä¸­ï¼Œå¦å¤–ä¸€éƒ¨åˆ†è¢«åˆå¹¶åˆ°äº†ä¸ç›¸å…³çš„æ—¥å¿—ä¸­ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç¬¬äºŒæ¡æ—¥å¿—æœ‰ 100 å¤šè¡Œï¼Œå…¶ä¸­æœ€åä¸€è¡Œè¢«é”™è¯¯åœ°åˆå¹¶åˆ°äº†ç¬¬ä¸‰æ¡æ—¥å¿—ä¸­ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.2454798331015299&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8RNMEiaJVqpYcYQDDurSiaQIFiavJgpsshgeMibwvz7riaLTVsdjO6xBMNZLg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1438&quot;/&gt;&lt;figcaption&gt;æ—¥å¿—åˆå¹¶é”™ä¹±&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æ˜¯é€šè¿‡é…ç½® filebeat çš„ multiline æ’ä»¶æ¥æˆªæ–­æ—¥å¿—çš„ã€‚ä¸ºä»€ä¹ˆä¸ç”¨ logstash çš„ multiline æ’ä»¶å‘¢ï¼Ÿå› ä¸ºåœ¨ filter ä¸­ä½¿ç”¨ multiline æ²¡æœ‰æˆªæ–­çš„é…ç½®é¡¹ã€‚filebeat çš„ multiline é…ç½®é¡¹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;multiline.type:Â pattern&lt;br/&gt;multiline.pattern:Â &lt;span&gt;&#x27;^\d{4}-\d{1,2}-\d{1,2}\s\d{1,2}:\d{1,2}:\d{1,2}.\d{3}&#x27;&lt;/span&gt;&lt;br/&gt;multiline.negate:Â &lt;span&gt;true&lt;/span&gt;&lt;br/&gt;multiline.match:Â after&lt;br/&gt;multiline.max_lines:Â 50&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é…ç½®é¡¹è¯´æ˜ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;multiline.patternï¼šå¸Œæœ›åŒ¹é…åˆ°çš„ç»“æœï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;multiline.negateï¼šå€¼ä¸º true æˆ– falseã€‚ä½¿ç”¨ false ä»£è¡¨åŒ¹é…åˆ°çš„è¡Œåˆå¹¶åˆ°ä¸Šä¸€è¡Œï¼›ä½¿ç”¨ true ä»£è¡¨ä¸åŒ¹é…çš„è¡Œåˆå¹¶åˆ°ä¸Šä¸€è¡Œ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;multiline.matchï¼šå€¼ä¸º after æˆ– beforeã€‚after ä»£è¡¨åˆå¹¶åˆ°ä¸Šä¸€è¡Œçš„æœ«å°¾ï¼›before ä»£è¡¨åˆå¹¶åˆ°ä¸‹ä¸€è¡Œçš„å¼€å¤´&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;multiline.max_linesï¼šåˆå¹¶çš„æœ€å¤§è¡Œæ•°ï¼Œé»˜è®¤ 500&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;multiline.timeoutï¼šä¸€æ¬¡åˆå¹¶äº‹ä»¶çš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤ä¸º 5sï¼Œé˜²æ­¢åˆå¹¶æ¶ˆè€—å¤ªå¤šæ—¶é—´å¯¼è‡´ filebeat è¿›ç¨‹å¡æ­»&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬é‡ç‚¹å…³æ³¨ max_lines å±æ€§ï¼Œè¡¨ç¤ºæœ€å¤šä¿ç•™å¤šå°‘è¡Œåæ‰§è¡Œæˆªæ–­ï¼Œè¿™é‡Œé…ç½® 50 è¡Œã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ³¨æ„ï¼šfilebeat å’Œ logstash æˆ‘éƒ½é…ç½®äº† multilineï¼Œæ²¡æœ‰éªŒè¯è¿‡åªé…ç½® filebeat çš„æƒ…å†µã€‚å‚è€ƒ &lt;span&gt;Filebeat å®˜æ–¹æ–‡æ¡£&lt;/span&gt;&lt;sup&gt;[3]&lt;/sup&gt;&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3.3.6 mutate æ’ä»¶&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“æˆ‘ä»¬å°†æ—¥å¿—è§£æå‡ºæ¥åï¼ŒLogstash è‡ªèº«ä¼šä¼ ä¸€äº›ä¸ç›¸å…³çš„å­—æ®µåˆ° ES ä¸­ï¼Œè¿™äº›å­—æ®µå¯¹æˆ‘ä»¬æ’æŸ¥çº¿ä¸Šé—®é¢˜å¸®åŠ©ä¸å¤§ã€‚å¯ä»¥ç›´æ¥å‰”é™¤æ‰ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å‘ï¼šè¾“å‡ºåˆ° ES çš„æ—¥å¿—åŒ…å«å¾ˆå¤šæ— æ„ä¹‰å­—æ®µã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œæˆ‘ä»¬å°±è¦ç”¨åˆ° mutate æ’ä»¶äº†ã€‚å®ƒå¯ä»¥å¯¹å­—æ®µè¿›è¡Œè½¬æ¢ï¼Œå‰”é™¤ç­‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯”å¦‚æˆ‘çš„é…ç½®æ˜¯è¿™æ ·çš„ï¼Œå¯¹å¾ˆå¤šå­—æ®µè¿›è¡Œäº†å‰”é™¤ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;mutateÂ {&lt;br/&gt;Â Â Â Â remove_fieldÂ =&amp;gt;Â [&lt;span&gt;&quot;agent&quot;&lt;/span&gt;,&lt;span&gt;&quot;message&quot;&lt;/span&gt;,&lt;span&gt;&quot;@version&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;tags&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;ecs&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;input&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;[log][offset]&quot;&lt;/span&gt;]&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ³¨æ„ï¼šä¸€å®šè¦æŠŠ log.offset å­—æ®µå»æ‰ï¼Œè¿™ä¸ªå­—æ®µå¯èƒ½ä¼šåŒ…å«å¾ˆå¤šæ— æ„ä¹‰å†…å®¹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…³äº Mutate è¿‡æ»¤å™¨å®ƒæœ‰å¾ˆå¤šé…ç½®é¡¹å¯ä¾›é€‰æ‹©ï¼Œå¦‚ä¸‹è¡¨æ ¼æ‰€ç¤ºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.0253583241455346&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8RRDRb0ianIXSDl6IYSzVicY3ic4RyvbVlyg91VpZfaTicBibQ8hHbG9Alw7Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;907&quot;/&gt;&lt;figcaption&gt;Mutate Â è¿‡æ»¤å™¨é…ç½®é€‰é¡¹&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‚è€ƒ &lt;span&gt;Mutate å‚è€ƒæ–‡ç« &lt;/span&gt;&lt;sup&gt;[4]&lt;/sup&gt;&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3.3.7 date æ’ä»¶&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ° kibana æŸ¥è¯¢æ—¥å¿—æ—¶ï¼Œå‘ç°æ’åºå’Œè¿‡æ»¤å­—æ®µ &lt;code&gt;@timestamp&lt;/code&gt; æ˜¯ ES æ’å…¥æ—¥å¿—çš„æ—¶é—´ï¼Œè€Œä¸æ˜¯æ‰“å°æ—¥å¿—çš„æ—¶é—´ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œæˆ‘ä»¬å°±è¦ç”¨åˆ° &lt;code&gt;date&lt;/code&gt; æ’ä»¶äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šé¢çš„ grok æ’ä»¶å·²ç»æˆåŠŸè§£æå‡ºäº†æ‰“å°æ—¥å¿—çš„æ—¶é—´ï¼Œèµ‹å€¼åˆ°äº† &lt;code&gt;logTime&lt;/code&gt; å˜é‡ä¸­ï¼Œç°åœ¨ç”¨ date æ’ä»¶å°† &lt;code&gt;logTime&lt;/code&gt; åŒ¹é…ä¸‹ï¼Œå¦‚æœèƒ½åŒ¹é…ï¼Œåˆ™ä¼šèµ‹å€¼åˆ° &lt;code&gt;@timestamp &lt;/code&gt; å­—æ®µï¼Œå†™å…¥åˆ° ES ä¸­çš„ &lt;code&gt;@timestamp &lt;/code&gt;å­—æ®µå°±ä¼šå’Œæ—¥å¿—æ—¶é—´ä¸€è‡´äº†ã€‚é…ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;dateÂ {&lt;br/&gt;Â Â Â Â matchÂ =&amp;gt;Â [&lt;span&gt;&quot;logTime&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;MMMÂ dÂ HH:mm:ss&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;MMMÂ ddÂ HH:mm:ss&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;ISO8601&quot;&lt;/span&gt;]&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯ç»è¿‡æµ‹è¯•å†™å…¥åˆ° ES çš„ &lt;code&gt;@timestamp&lt;/code&gt; æ—¥å¿—æ—¶é—´å’Œæ‰“å°çš„æ—¥å¿—æ—¶é—´ç›¸å·® 8 å°æ—¶ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.37032418952618457&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8R22icawtZjzA98qb0b1TS2712xoNERP9KWzbAXULtOjRYs13UMasQwGA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;802&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬åˆ° ES ä¸­æŸ¥è¯¢è®°å½•åï¼Œå‘ç° &lt;code&gt;@timestamp&lt;/code&gt; å­—æ®µæ—¶é—´å¤šäº†ä¸€ä¸ªå­—æ¯ &lt;code&gt;Z&lt;/code&gt;ï¼Œä»£è¡¨ &lt;code&gt;UTC&lt;/code&gt; æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¯´ ES ä¸­å­˜çš„æ—¶é—´æ¯”æ—¥å¿—è®°å½•çš„æ—¶é—´æ™š 8 ä¸ªå°æ—¶ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.22786647314949202&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8RcXCuGYicq1NCVUSpaHA1xt1IUEasJVVRqo9XdUd3EDibdBLvn7XZ6NBA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;689&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡å¢åŠ é…ç½® Â timezone =&amp;gt; &quot;Asia/Shanghai&quot; æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä¿®æ”¹åçš„é…ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;dateÂ {&lt;br/&gt;Â Â Â Â matchÂ =&amp;gt;Â [&lt;span&gt;&quot;logTime&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;MMMÂ dÂ HH:mm:ss&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;MMMÂ ddÂ HH:mm:ss&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;ISO8601&quot;&lt;/span&gt;]&lt;br/&gt;Â Â Â Â timezoneÂ =&amp;gt;Â &lt;span&gt;&quot;Asia/Shanghai&quot;&lt;/span&gt;&lt;br/&gt;Â Â }&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è°ƒæ•´åï¼Œå†åŠ ä¸€æ¡æ—¥å¿—åæŸ¥çœ‹ç»“æœï¼ŒKibana æ˜¾ç¤º @timestamp å­—æ®µå’Œæ—¥å¿—çš„è®°å½•æ—¶é—´ä¸€è‡´äº†ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.24351851851851852&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8RcTapCZ31Gs4lKOnDBmj1FMrtqlzwtgQRNEsnibL66he5gvqicbZdlL5g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.4 Output æ’ä»¶&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Logstash è§£æå’Œè½¬æ¢åçš„æ—¥å¿—æœ€åè¾“å‡ºåˆ°äº† Elasticsearch ä¸­ï¼Œç”±äºæˆ‘ä»¬ ES æ˜¯é›†ç¾¤éƒ¨ç½²çš„ï¼Œæ‰€ä»¥éœ€è¦é…ç½®å¤šä¸ª Â ES èŠ‚ç‚¹åœ°å€ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;outputÂ {&lt;br/&gt;Â Â stdoutÂ {Â }&lt;br/&gt;&lt;br/&gt;Â Â elasticsearchÂ {&lt;br/&gt;Â Â Â Â hostsÂ =&amp;gt;Â [&lt;span&gt;&quot;10.2.1.64:9200&quot;&lt;/span&gt;,&lt;span&gt;&quot;10.2.1.65:9200&quot;&lt;/span&gt;,&lt;span&gt;&quot;10.27.2.1:9200&quot;&lt;/span&gt;]&lt;br/&gt;Â Â Â Â indexÂ =&amp;gt;Â &lt;span&gt;&quot;qa_log&quot;&lt;/span&gt;&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ³¨æ„è¿™é‡Œçš„ index åç§° qa_log å¿…é¡»æ˜¯å°å†™ï¼Œä¸ç„¶å†™å…¥ es æ—¶ä¼šæŠ¥é”™ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.5 å®Œæ•´é…ç½®&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;logstah é…ç½®æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;inputÂ {&lt;br/&gt;Â Â beatsÂ {&lt;br/&gt;Â Â Â Â portÂ =&amp;gt;Â 9900&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;filterÂ {&lt;br/&gt;&lt;br/&gt;Â Â multilineÂ {&lt;br/&gt;Â Â Â Â patternÂ =&amp;gt;Â &lt;span&gt;&quot;^\d{4}-\d{1,2}-\d{1,2}\s\d{1,2}:\d{1,2}:\d{1,2}.\d{3}&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â negateÂ =&amp;gt;Â true&lt;br/&gt;Â Â Â Â whatÂ =&amp;gt;Â &lt;span&gt;&quot;previous&quot;&lt;/span&gt;&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â grokÂ {&lt;br/&gt;Â Â Â Â Â Â matchÂ =&amp;gt;Â [Â &lt;span&gt;&quot;message&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;(?&amp;lt;logTime&amp;gt;\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2}.\d{3})\s+\[(?&amp;lt;thread&amp;gt;.*)\]\s+(?&amp;lt;level&amp;gt;\w*)\s{1,2}+(?&amp;lt;class&amp;gt;\S*)\s+-\s+(?&amp;lt;content&amp;gt;.*)\s*&quot;&lt;/span&gt;]&lt;br/&gt;Â Â Â Â Â Â matchÂ =&amp;gt;Â [Â &lt;span&gt;&quot;message&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;(?&amp;lt;logTime&amp;gt;\d{4}-\d{2}-\d{2}\s\d{2}:\d{2}:\d{2}.\d{3})\s{1,2}+(?&amp;lt;level&amp;gt;\w*)\s{1,2}+.\s---+\s\[(?&amp;lt;thread&amp;gt;.*)\]+\s(?&amp;lt;class&amp;gt;\S*)\s*:+\s(?&amp;lt;content&amp;gt;.*)\s*&quot;&lt;/span&gt;]&lt;br/&gt;Â Â Â Â Â Â matchÂ =&amp;gt;Â [&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;&quot;source&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;/home/passjava/logs/(?&amp;lt;logName&amp;gt;\w+)/.*.log&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â ]&lt;br/&gt;Â Â Â Â Â Â overwriteÂ =&amp;gt;Â [Â &lt;span&gt;&quot;source&quot;&lt;/span&gt;]&lt;br/&gt;Â Â Â Â Â Â break_on_matchÂ =&amp;gt;Â false&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â mutateÂ {&lt;br/&gt;Â Â Â Â convertÂ =&amp;gt;Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;&quot;bytes&quot;&lt;/span&gt;Â =&amp;gt;Â &lt;span&gt;&quot;integer&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â remove_fieldÂ =&amp;gt;Â [&lt;span&gt;&quot;agent&quot;&lt;/span&gt;,&lt;span&gt;&quot;message&quot;&lt;/span&gt;,&lt;span&gt;&quot;@version&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;tags&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;ecs&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;_score&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;input&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;[log][offset]&quot;&lt;/span&gt;]&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â useragentÂ {&lt;br/&gt;Â Â Â Â sourceÂ =&amp;gt;Â &lt;span&gt;&quot;user_agent&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â targetÂ =&amp;gt;Â &lt;span&gt;&quot;useragent&quot;&lt;/span&gt;&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â dateÂ {&lt;br/&gt;Â Â Â Â matchÂ =&amp;gt;Â [&lt;span&gt;&quot;logTime&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;MMMÂ dÂ HH:mm:ss&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;MMMÂ ddÂ HH:mm:ss&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;ISO8601&quot;&lt;/span&gt;]&lt;br/&gt;Â Â Â Â timezoneÂ =&amp;gt;Â &lt;span&gt;&quot;Asia/Shanghai&quot;&lt;/span&gt;&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;outputÂ {&lt;br/&gt;Â Â stdoutÂ {Â }&lt;br/&gt;&lt;br/&gt;Â Â elasticsearchÂ {&lt;br/&gt;Â Â Â Â hostsÂ =&amp;gt;Â [&lt;span&gt;&quot;10.2.1.64:9200&quot;&lt;/span&gt;,&lt;span&gt;&quot;10.2.1.65:9200&quot;&lt;/span&gt;,&lt;span&gt;&quot;10.2.1.66:9200&quot;&lt;/span&gt;]&lt;br/&gt;Â Â Â Â indexÂ =&amp;gt;Â &lt;span&gt;&quot;qa_log&quot;&lt;/span&gt;&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å››ã€Logstash æ€ä¹ˆè·‘èµ·æ¥çš„&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.1 Logstash å¦‚ä½•è¿è¡Œçš„&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½ ä¼šå¥½å¥‡ Logstash æ˜¯æ€ä¹ˆè¿è¡Œèµ·æ¥çš„å—ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®˜æ–¹æä¾›çš„å¯åŠ¨æ–¹å¼æ˜¯æ‰§è¡Œ logstash -f weblog.conf å‘½ä»¤æ¥å¯åŠ¨ï¼Œå½“æ‰§è¡Œè¿™ä¸ªå‘½ä»¤çš„æ—¶å€™å…¶å®ä¼šè°ƒç”¨ Java å‘½ä»¤ï¼Œä»¥åŠè®¾ç½® java å¯åŠ¨å‚æ•°ï¼Œç„¶åä¼ å…¥äº†ä¸€ä¸ªé…ç½®æ–‡ä»¶ weblog.conf æ¥å¯åŠ¨ Logstashã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;cd&lt;/span&gt;Â /home/logstash-7.6.2&lt;br/&gt;sudoÂ ./bin/logstashÂ -fÂ weblog.conf&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“å¯åŠ¨å®Œä¹‹åï¼Œæˆ‘ä»¬é€šè¿‡å‘½ä»¤æ¥çœ‹ä¸‹ Logstash çš„è¿è¡ŒçŠ¶æ€&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;psÂ -efÂ |Â grepÂ logstash&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰§è¡Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥çœ‹åˆ°ç”¨åˆ°äº† Java å‘½ä»¤ï¼Œè®¾ç½®äº† JVM å‚æ•°ï¼Œç”¨åˆ°äº† Logstash çš„JAR åŒ…ï¼Œä¼ å…¥äº†å‚æ•°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.2588495575221239&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8Rqbgw9kbXFXia6I2q1nMHgkLJ3NSjBL4zdcBLibwSWibkQmgBCwKdVnqiag/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1356&quot;/&gt;&lt;span&gt;&lt;strong&gt;æ‰€ä»¥å»ºè®® Logstash å•ç‹¬éƒ¨ç½²åˆ°ä¸€å°æœåŠ¡å™¨ä¸Šï¼Œé¿å…æœåŠ¡å™¨çš„èµ„æºè¢« Logstash å ç”¨ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Logstash é»˜è®¤çš„ JVM é…ç½®æ˜¯ -Xms1g -Xmx1gï¼Œè¡¨ç¤ºåˆ†é…çš„æœ€å°å’Œæœ€å¤§å †å†…å­˜å¤§å°ä¸º 1 Gã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£ä¹ˆè¿™ä¸ªå‚æ•°æ˜¯åœ¨å“ªé‡Œé…ç½®çš„å‘¢ï¼Ÿå…¨å±€æœç´¢ä¸‹ Xms1gï¼Œæ‰¾åˆ°æ˜¯åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œé¢é…ç½®çš„ï¼Œconfig\jvm.optionsï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹è¿™é‡Œé¢çš„ JVM é…ç½®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬å¯ä»¥è°ƒæ•´ Logstash çš„ JVM å¯åŠ¨å‚æ•°ï¼Œæ¥&lt;span&gt;ä¼˜åŒ– Logstash çš„æ€§èƒ½&lt;/span&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦å¤– Kibana ä¸Šé¢è¿˜å¯ä»¥ç›‘æ§ Logstash çš„è¿è¡ŒçŠ¶æ€ï¼ˆä¸åœ¨æœ¬ç¯‡è®¨è®ºèŒƒå›´ï¼‰ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.2 Logstash çš„æ¶æ„åŸç†&lt;/span&gt;&lt;/h3&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5406360424028268&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8Ruicgw7Uq1baGSNICSFaadF1JyKuiarh1N2bibS3piczo1F57IoC56rNMcA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1415&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬å†…å®¹å‚è€ƒè¿™ç¯‡ &lt;span&gt;Logstash æ¶æ„&lt;/span&gt;&lt;sup&gt;[5]&lt;/sup&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Logstash æœ‰å¤šä¸ª inputï¼Œæ¯ä¸ª input éƒ½ä¼šæœ‰è‡ªå·±çš„ codecã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ•°æ®ä¼šå…ˆå­˜æ”¾åˆ° Queue ä¸­ï¼ŒLogstash ä¼šæŠŠ Queue ä¸­çš„æ•°æ®åˆ†å‘åˆ°ä¸åŒçš„ pipeline ä¸­ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç„¶åæ¯ä¸€ä¸ª pipeline ç”± Batcherã€filterã€output ç»„æˆ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Batcher çš„ä½œç”¨æ˜¯æ‰¹é‡åœ°ä»Queueä¸­å–æ•°æ®ã€‚Batcher å¯ä»¥é…ç½®ä¸ºä¸€æ¬¡å–ä¸€ç™¾ä¸ªæ•°æ®ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;äº”ã€Logstash å®•æœºé£é™©&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;5.1 Logstash å•ç‚¹éƒ¨ç½²çš„é£é™©&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å› ä¸º Logstash æ˜¯å•ç‚¹éƒ¨ç½²åˆ°ä¸€å°æœåŠ¡å™¨ä¸Šï¼Œæ‰€ä»¥ä¼šå­˜åœ¨ä¸¤ä¸ªé£é™©ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;logstash çªç„¶å´©äº†æ€ä¹ˆåŠï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;logstash æ‰€åœ¨çš„æœºå™¨å®•æœºäº†æ€ä¹ˆåŠï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Logstash æ‰€åœ¨çš„æœºå™¨é‡å¯äº†æ€ä¹ˆåŠï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äºç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œå¯ä»¥å®‰è£… Keepalived è½¯ä»¶æ¥ä¿è¯é«˜å¯ç”¨ã€‚å¦å¤–å³ä½¿æ²¡æœ‰å®‰è£…ï¼Œå½“æ‰‹åŠ¨å¯åŠ¨ Logstash åï¼ŒLogstash ä¹Ÿèƒ½å°†æœªåŠæ—¶åŒæ­¥çš„æ—¥å¿—å†™å…¥åˆ° ESã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äºç¬¬äºŒä¸ªé—®é¢˜ï¼Œæ‰€åœ¨çš„æœºå™¨å®•æœºäº†ï¼Œé‚£å¯ä»¥é€šè¿‡å®‰è£…ä¸¤å¥— Logstashï¼Œé€šè¿‡ keepalived æä¾›çš„è™šæ‹Ÿ IP åŠŸèƒ½ï¼Œåˆ‡æ¢æµé‡åˆ°å¦å¤–ä¸€ä¸ª Logstashã€‚å…³äºå¦‚ä½•ä½¿ç”¨ Keepalivedï¼Œå¯ä»¥å‚è€ƒä¹‹å‰çš„ &lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzAwMjI0ODk0NA==&amp;amp;mid=2451963004&amp;amp;idx=1&amp;amp;sn=2667d0e6e9142939e3645de680a4533f&amp;amp;chksm=8d1c05e3ba6b8cf5a6a0ab2ecb66af10496838e25814cbefcd45907dd652a5ec6ef3917b6ada&amp;amp;token=1170452569&amp;amp;lang=zh_CN&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;å®æˆ˜ MySQL é«˜å¯ç”¨æ¶æ„&lt;/a&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äºç¬¬ä¸‰ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æŠŠå¯åŠ¨ Logstash çš„å‘½ä»¤æ”¾åˆ°å¼€æœºå¯åŠ¨è„šæœ¬ä¸­å°±å¯ä»¥äº†ï¼Œä½†æ˜¯å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;Ubuntu 18.04 ç‰ˆæœ¬æ˜¯æ²¡æœ‰å¼€æœºå¯åŠ¨æ–‡ä»¶çš„&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Logstash æ— æ³•æ‰¾åˆ° Java è¿è¡Œç¯å¢ƒ&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸‹æ€ä¹ˆè¿›è¡Œé…ç½®å¼€æœºè‡ªå¯åŠ¨ Logstashã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;5.2 å¼€æœºå¯åŠ¨ Logstash&lt;/span&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;5.2.1 åˆ›å»ºè‡ªåŠ¨å¯åŠ¨è„šæœ¬&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å»ºç«‹rc-local.serviceæ–‡ä»¶&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;sudoÂ vimÂ /etc/systemd/system/rc-local.service&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°†ä¸‹åˆ—å†…å®¹å¤åˆ¶è¿› rc-local.service æ–‡ä»¶&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;[Unit]&lt;br/&gt;Description=/etc/rc.localÂ Compatibility&lt;br/&gt;ConditionPathExists=/etc/rc.local&lt;br/&gt;Â &lt;br/&gt;[Service]&lt;br/&gt;Type=forking&lt;br/&gt;ExecStart=/etc/rc.localÂ start&lt;br/&gt;TimeoutSec=0&lt;br/&gt;StandardOutput=tty&lt;br/&gt;RemainAfterExit=yes&lt;br/&gt;SysVStartPriority=99&lt;br/&gt;Â &lt;br/&gt;[Install]&lt;br/&gt;WantedBy=multi-user.target&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ›å»ºæ–‡ä»¶ rc.local&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;sudoÂ vimÂ /etc/rc.local&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ·»åŠ å¯åŠ¨è„šæœ¬åˆ°å¯åŠ¨æ–‡ä»¶ä¸­&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;#!/bin/shÂ -e&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â å¯åŠ¨Â logstash&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#nohupÂ /home/software/logstash-7.6.2/bin/logstashÂ -fÂ /home/software/logstash-7.6.2/weblog.confÂ &amp;amp;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â å¯åŠ¨Â filebeat&lt;/span&gt;&lt;br/&gt;nohupÂ /home/software/filebeat-7.6.2-linux-x86_64/filebeatÂ -eÂ -cÂ /home/software/filebeat-7.6.2-linux-x86_64/config.ymlÂ &amp;amp;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;exit&lt;/span&gt;Â 0&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;5.2.2 ä¿®æ”¹ Java è¿è¡Œç¯å¢ƒ&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å› åœ¨å¼€æœºå¯åŠ¨ä¸­ï¼Œlogstash æ‰¾ä¸åˆ° java çš„è¿è¡Œç¯å¢ƒï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨é…ç½®ä¸‹ logstashã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;cd&lt;/span&gt;Â /home/software/logstash-7.6.2/bin/&lt;br/&gt;sudoÂ vimÂ logstash.lib.sh&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ setup_java() æ–¹æ³•çš„ç¬¬ä¸€è¡ŒåŠ å…¥ JAVA_HOME å˜é‡ï¼ŒJAVA_HOME çš„è·¯å¾„éœ€è¦æ ¹æ®è‡ªå·±çš„ java å®‰è£…ç›®å½•æ¥ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;JAVA_HOME=&lt;span&gt;&quot;/opt/java/jdk1.8.0_181&quot;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3776785714285714&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8RxGbcCZf4yLB7LegUBibo2Q76vEU725NibJOwiawl5NvlaCK1DJeGOibf3g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1120&quot;/&gt;&lt;figcaption&gt;ä¿®æ”¹ Java è¿è¡Œç¯å¢ƒ&lt;/figcaption&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;5.2.3 æƒé™é—®é¢˜&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»™ rc.local åŠ ä¸Šæƒé™,å¯ç”¨æœåŠ¡&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;sudoÂ chmodÂ +xÂ /etc/rc.local&lt;br/&gt;sudoÂ systemctlÂ &lt;span&gt;enable&lt;/span&gt;Â rc-local&lt;br/&gt;sudoÂ systemctlÂ stopÂ rc-local.service&lt;br/&gt;sudoÂ systemctlÂ startÂ rc-local.service&lt;br/&gt;sudoÂ systemctlÂ statusÂ rc-local.service&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.36149732620320857&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ3rkKtSViaCQ9wn78YkTRH8RcFvhogsArRqznZc5yTGUlSU5O5LUOJcbLSicuuUeyh9iadI7qdLfSBUg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;935&quot;/&gt;&lt;figcaption&gt;Logstash å¯åŠ¨æˆåŠŸ&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç„¶åé‡å¯æœºå™¨ï¼ŒæŸ¥çœ‹ logstashè¿›ç¨‹æ˜¯å¦æ­£åœ¨è¿è¡Œï¼Œçœ‹åˆ°ä¸€å¤§ä¸² java è¿è¡Œçš„å‘½ä»¤åˆ™è¡¨ç¤º logstash æ­£åœ¨è¿è¡Œã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;psÂ -efÂ |Â grepÂ logstash&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å…­ã€æ€»ç»“&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬ç¯‡è®²è§£äº† Logstash åœ¨é›†ç¾¤ç¯å¢ƒä¸‹çš„éƒ¨ç½²æ¶æ„å›¾ã€Logstash é‡åˆ°çš„å‡ å¤§å‘ã€ä»¥åŠ Logstash çš„è¿è¡Œæœºåˆ¶å’Œæ¶æ„åŸç†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Logstash è¿˜æ˜¯éå¸¸å¼ºå¤§çš„ï¼Œæœ‰å¾ˆå¤šåŠŸèƒ½æœªåœ¨æœ¬ç¯‡è¿›è¡Œè®²è§£ï¼Œæœ¬ç¯‡ä¹Ÿæ˜¯æŠ›ç –å¼•ç‰ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…æœ‹å‹ä»¬å¯ä»¥åŠ æˆ‘å¥½å‹ passjava å…±åŒæ¢ç´¢ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ›´å¤šå¥½æ–‡è¯·æŸ¥çœ‹ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzAwMjI0ODk0NA==&amp;amp;mid=2451963004&amp;amp;idx=1&amp;amp;sn=2667d0e6e9142939e3645de680a4533f&amp;amp;chksm=8d1c05e3ba6b8cf5a6a0ab2ecb66af10496838e25814cbefcd45907dd652a5ec6ef3917b6ada&amp;amp;token=1170452569&amp;amp;lang=zh_CN&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;å®æˆ˜ MySQL é«˜å¯ç”¨æ¶æ„&lt;/a&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzAwMjI0ODk0NA==&amp;amp;mid=2451962693&amp;amp;idx=1&amp;amp;sn=96530613aaadd8240d8a5c2ab7dff49d&amp;amp;chksm=8d1c02daba6b8bcc2499861fd37aac5cfa88d616fc839cb6a7a3c003118457ac325c3dcbeb62&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;ä¸€æ–‡å¸¦ä½ æ­å»ºä¸€å¥— ELK Stack æ—¥å¿—å¹³å°&lt;/a&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å·¨äººçš„è‚©è†€&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;https://blog.csdn.net/xzk9381/article/details/109571087&lt;br/&gt;https://www.elastic.co/guide/en/beats/filebeat/current/multiline-examples.html&lt;br/&gt;https://github.com/logstash-plugins/logstash-patterns-core/blob/main/patterns/ecs-v1/grok-patterns&lt;br/&gt;https://www.runoob.com/regexp/regexp-syntax.html&lt;br/&gt;https://www.elastic.co/guide/en/beats/libbeat/current/config-file-permissions.html&lt;br/&gt;https://www.tutorialspoint.com/logstash/logstash_supported_outputs.htm&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å‚è€ƒèµ„æ–™&lt;/span&gt;&lt;/h3&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>6568d51407faf1a71eb1ad2b425aab93</guid>
<title>ä¸€æ–‡æ¦‚è§ˆ NLP ç®—æ³•ï¼ˆPythonï¼‰</title>
<link>https://toutiao.io/k/jbwk2nr</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                                                                     &quot; id=&quot;js_content&quot;&gt;
            &lt;section class=&quot;mp_profile_iframe_wrp&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzU4OTQ1MTA4OQ==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/Iefry9dPrYJ1LbaTxqd4VPOibfZ1tf0fXDUqFOLlPcRPvv4W4Cro4YnhRx2Xib5MId5rECtVMBkmvJk8nSNnsekw/0?wx_fmt=png&quot; data-nickname=&quot;æ•°æ®æŒ–æ˜å·¥ç¨‹å¸ˆ&quot; data-alias=&quot;DataMinings&quot; data-signature=&quot;æ•°ä¸‡åæ•°æ®æŒ–æ˜çˆ±å¥½è€…çš„èšé›†åœ°ï¼Œè‡´åŠ›äºå‰æ²¿æ•°æ®æŠ€æœ¯ç ”ç©¶ã€‚å…¬ä¼—å·ä»¥æ•°æ®ä¸ºæ ¸å¿ƒï¼Œåˆ†äº«å¤§æ•°æ®ã€æ•°æ®åˆ†æã€æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ ç­‰å¹²è´§ï¼Œæƒ³å­¦æ•°æ®æˆ‘ç­‰ä½ æ¥ã€‚&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;span&gt;NLP&lt;/span&gt;ï¼Œè‡ªç„¶è¯­è¨€å¤„ç†å°±æ˜¯ç”¨è®¡ç®—æœºæ¥åˆ†æå’Œç”Ÿæˆè‡ªç„¶è¯­è¨€ï¼ˆæ–‡æœ¬ã€è¯­éŸ³ï¼‰ï¼Œç›®çš„æ˜¯è®©äººç±»å¯ä»¥ç”¨è‡ªç„¶è¯­è¨€å½¢å¼è·Ÿè®¡ç®—æœºç³»ç»Ÿè¿›è¡Œäººæœºäº¤äº’ï¼Œä»è€Œæ›´ä¾¿æ·ã€æœ‰æ•ˆåœ°è¿›è¡Œä¿¡æ¯ç®¡ç†ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;span&gt;NLPæ˜¯äººå·¥æ™ºèƒ½é¢†åŸŸå†å²è¾ƒä¸ºæ‚ ä¹…çš„é¢†åŸŸï¼Œä½†ç”±äºè¯­è¨€çš„å¤æ‚æ€§ï¼ˆè¯­è¨€è¡¨è¾¾å¤šæ ·æ€§/æ­§ä¹‰/æ¨¡ç³Šç­‰ç­‰ï¼‰ï¼Œå¦‚ä»Šçš„å‘å±•åŠæ”¶æ•ˆç›¸å¯¹ç¼“æ…¢ã€‚æ¯”å°”Â·ç›–èŒ¨æ›¾è¯´è¿‡ï¼Œ&quot;NLPæ˜¯ AI çš‡å† ä¸Šçš„æ˜ç ã€‚&quot; åœ¨å…‰é²œç»šä¸½çš„åŒæ—¶ï¼Œå´å¯æœ›è€Œä¸å¯åŠï¼ˆ...ï¼‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5625&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFPUicaMwPQh5L2pQ4GJ6WBb33fU9TKvJRrmypjonjQuh5A59oTiaic4F7kQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;768&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸ºäº†æ­å¼€NLPçš„ç¥ç§˜é¢çº±ï¼Œæœ¬æ–‡æ¥ä¸‹æ¥ä¼šæ¢³ç†ä¸‹NLPæµç¨‹ã€ä¸»è¦ä»»åŠ¡åŠç®—æ³•ï¼Œå¹¶æœ€ç»ˆè½åˆ°å®é™…NLPé¡¹ç›®ï¼ˆç»å…¸çš„æ–‡æœ¬åˆ†ç±»ä»»åŠ¡çš„å®æˆ˜ï¼‰ã€‚&lt;/span&gt;&lt;code&gt;&lt;span&gt;é¡ºä¾¿è¯´ä¸€å¥ï¼Œä¸ªäººæ°´å¹³æœ‰é™ï¼Œä¸è¶³ä¹‹å¤„è¿˜è¯·ç•™è¨€æŒ‡å‡º~~&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;äºŒã€NLPä¸»è¦ä»»åŠ¡åŠæŠ€æœ¯&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;NLPä»»åŠ¡å¯ä»¥å¤§è‡´åˆ†ä¸ºè¯æ³•åˆ†æã€å¥æ³•åˆ†æã€è¯­ä¹‰åˆ†æä¸‰ä¸ªå±‚é¢ã€‚å…·ä½“çš„ï¼Œæœ¬æ–‡æŒ‰ç…§å•è¯-ã€‹å¥å­-ã€‹æ–‡æœ¬åšé¡ºåºå±•å¼€ï¼Œå¹¶ä»‹ç»å„ä¸ªå±‚é¢çš„ä»»åŠ¡åŠå¯¹åº”æŠ€æœ¯ã€‚æœ¬èŠ‚ä¸ŠåŠéƒ¨åˆ†çš„åˆ†è¯ã€å‘½åå®ä½“è¯†åˆ«ã€è¯å‘é‡ç­‰ç­‰å¯ä»¥è§†ä¸ºNLPåŸºç¡€çš„ä»»åŠ¡ã€‚ä¸‹åŠéƒ¨åˆ†çš„å¥å­å…³ç³»ã€æ–‡æœ¬ç”ŸæˆåŠåˆ†ç±»ä»»åŠ¡å¯ä»¥çœ‹åšNLPä¸»è¦çš„åº”ç”¨ä»»åŠ¡ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8193548387096774&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFPfWQ9LL3quh012HngTsRFmOPKCP9UfHEX0AQTyqY9p3dxRLUjeAXWLg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™é‡Œï¼Œè´´ä¸€å¼ è‡ªç„¶è¯­è¨€å¤„ç†çš„æŠ€æœ¯è·¯çº¿å›¾ï¼Œä»‹ç»äº†NLPä»»åŠ¡åŠä¸»æµæ¨¡å‹çš„åˆ†æ”¯ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7153225806451613&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFPlCibHgLZYibVPfib4GIHgia3oIse5RdnPX7hl1hob6kgNYr3ibVo2GOlzzw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;é«˜æ¸…å›¾å¯å¦‚ä¸‹è·¯å¾„ä¸‹è½½ï¼ˆåŸä½œè€…graykodeï¼‰ï¼šhttps://github.com/aialgorithm/AiPy/tree/master/Ai%E7%9F%A5%E8%AF%86%E5%9B%BE%E5%86%8C/Ai_Roadmap&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;2.1 æ•°æ®æ¸…æ´— + åˆ†è¯ï¼ˆç³»åˆ—æ ‡æ³¨ä»»åŠ¡ï¼‰&lt;/h3&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;æ•°æ®è¯­æ–™æ¸…æ´—ã€‚æˆ‘ä»¬æ‹¿åˆ°æ–‡æœ¬çš„æ•°æ®è¯­æ–™(Corpus)åï¼Œé€šå¸¸é¦–å…ˆè¦åšçš„æ˜¯ï¼Œåˆ†æå¹¶æ¸…æ´—ä¸‹æ–‡æœ¬ï¼Œä¸»è¦ç”¨æ­£åˆ™åŒ¹é…åˆ é™¤æ‰æ•°å­—åŠæ ‡ç‚¹ç¬¦å·ï¼ˆä¸€èˆ¬è¿™äº›éƒ½æ˜¯å™ªéŸ³ï¼Œå¯¹äºå®é™…ä»»åŠ¡æ²¡æœ‰å¸®åŠ©ï¼‰ï¼Œåšä¸‹åˆ†è¯åï¼Œåˆ æ‰ä¸€äº›æ— å…³çš„è¯ï¼ˆåœç”¨è¯ï¼‰ï¼Œå¯¹äºè‹±æ–‡è¿˜éœ€è¦ç»Ÿä¸€ä¸‹å¤æ•°ã€è¯­æ€ã€æ—¶æ€ç­‰ä¸åŒå½¢æ€çš„å•è¯å½¢å¼ï¼Œä¹Ÿå°±æ˜¯è¯å¹²/è¯å½¢è¿˜åŸã€‚&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;åˆ†è¯ã€‚å³åˆ’åˆ†ä¸ºè¯å•å…ƒï¼ˆtokenï¼‰ï¼Œæ˜¯ä¸€ä¸ªå¸¸è§çš„åºåˆ—æ ‡æ³¨ä»»åŠ¡ã€‚å¯¹äºè‹±æ–‡ç­‰æ‹‰ä¸è¯­ç³»çš„è¯­å¥åˆ†è¯ï¼Œå¤©ç„¶å¯ä»¥é€šè¿‡ç©ºæ ¼åšåˆ†è¯ï¼Œ&lt;/span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.10259301014656144&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFPo45Nqrm9xR1N4DtPGlQFzxyPg4S2lbG5kDfQvcg1vFp7wSvSO9d7uQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;887&quot;/&gt;&lt;span&gt;å¯¹äºä¸­æ–‡è¯­å¥ï¼Œç”±äºä¸­æ–‡è¯è¯­æ˜¯è¿ç»­çš„ï¼Œå¯ä»¥ç”¨ç»“å·´åˆ†è¯ï¼ˆåŸºäºtrie tree+ç»´ç‰¹æ¯”ç­‰ç®—æ³•å®ç°æœ€å¤§æ¦‚ç‡çš„è¯è¯­åˆ‡åˆ†ï¼‰ç­‰å·¥å…·å®ç°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;importÂ jieba&lt;br/&gt;jieba.lcut(&lt;span&gt;&quot;æˆ‘çš„åœ°å€æ˜¯ä¸Šæµ·å¸‚æ¾æ±ŸåŒºä¸­å±±è¡—é“åå…‰è¯æˆ¿&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;&amp;gt;&amp;gt;&amp;gt;Â [&lt;span&gt;&#x27;æˆ‘&#x27;&lt;/span&gt;,Â &lt;span&gt;&#x27;çš„&#x27;&lt;/span&gt;,Â &lt;span&gt;&#x27;åœ°å€&#x27;&lt;/span&gt;,Â &lt;span&gt;&#x27;æ˜¯&#x27;&lt;/span&gt;,Â &lt;span&gt;&#x27;ä¸Šæµ·å¸‚&#x27;&lt;/span&gt;,Â &lt;span&gt;&#x27;æ¾æ±ŸåŒº&#x27;&lt;/span&gt;,Â &lt;span&gt;&#x27;ä¸­å±±&#x27;&lt;/span&gt;,Â &lt;span&gt;&#x27;è¡—é“&#x27;&lt;/span&gt;,Â &lt;span&gt;&#x27;åå…‰&#x27;&lt;/span&gt;,Â &lt;span&gt;&#x27;è¯æˆ¿&#x27;&lt;/span&gt;]&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;è‹±æ–‡åˆ†è¯åçš„è¯å¹²/è¯å½¢ç­‰è¿˜åŸ(å»é™¤æ—¶æ€ è¯­æ€åŠå¤æ•°ç­‰ä¿¡æ¯ï¼Œç»Ÿä¸€ä¸ºä¸€ä¸ªâ€œå•è¯â€å½¢æ€)ã€‚è¿™å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼Œè¿˜æ˜¯æ ¹æ®å®é™…ä»»åŠ¡æ˜¯å¦éœ€è¦ä¿ç•™æ—¶æ€ã€è¯­æ€ç­‰ä¿¡æ¯ï¼Œæœ‰WordNetLemmatizerã€ SnowballStemmerç­‰æ–¹æ³•ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;åˆ†è¯åŠæ¸…æ´—æ–‡æœ¬åï¼Œè¿˜éœ€è¦å¯¹ç…§å‰åçš„æ•ˆæœå·®å¼‚ï¼Œåœ¨åšäº›å¾®è°ƒã€‚è¿™é‡Œå¯ä»¥ç»Ÿè®¡ä¸‹ä¸ªå•è¯çš„é¢‘ç‡ã€å¥é•¿ç­‰æŒ‡æ ‡ï¼Œè¿˜å¯ä»¥é€šè¿‡åƒè¯äº‘ç­‰å·¥å…·åšä¸‹å¯è§†åŒ–~&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;fromÂ wordcloudÂ importÂ WordCloud&lt;br/&gt;ham_msg_cloudÂ =Â WordCloud(widthÂ =520,Â heightÂ =260,max_font_size=50,Â background_colorÂ =&lt;span&gt;&quot;black&quot;&lt;/span&gt;,Â colormap=&lt;span&gt;&#x27;Blues&#x27;&lt;/span&gt;).generate(åŸæ–‡æœ¬è¯­æ–™)&lt;br/&gt;plt.figure(figsize=(16,10))&lt;br/&gt;plt.imshow(ham_msg_cloud,Â interpolation=&lt;span&gt;&#x27;bilinear&#x27;&lt;/span&gt;)&lt;br/&gt;plt.axis(&lt;span&gt;&#x27;off&#x27;&lt;/span&gt;)Â &lt;span&gt;#Â turnÂ offÂ axis&lt;/span&gt;&lt;br/&gt;plt.show()&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5730659025787965&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFPCnhctribqHI47GRtDHjxZb7gtLysgfL0vcWgt3DS2wN1q15WJibuMWbg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;698&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;2.2 è¯æ€§æ ‡æ³¨ï¼ˆç³»åˆ—æ ‡æ³¨ä»»åŠ¡ï¼‰&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¯æ€§æ ‡æ³¨æ˜¯å¯¹å¥å­ä¸­çš„æˆåˆ†åšç®€å•åˆ†æï¼ŒåŒºåˆ†å‡ºåˆ†åè¯ã€åŠ¨è¯ã€å½¢å®¹è¯ä¹‹ç±»ã€‚å¯¹äºå¥æ³•åˆ†æã€ä¿¡æ¯æŠ½å–çš„ä»»åŠ¡ï¼Œç»è¿‡è¯æ€§æ ‡æ³¨åçš„æ–‡æœ¬ä¼šå¸¦æ¥å¾ˆå¤§çš„ä¾¿åˆ©æ€§ï¼ˆå…¶ä»–æ–¹é¢çš„åº”ç”¨å¥½åƒæ¯”è¾ƒå°‘ï¼‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å¸¸ç”¨çš„è¯æ€§æ ‡æ³¨æœ‰åŸºäºè§„åˆ™ã€ç»Ÿè®¡ä»¥åŠæ·±åº¦å­¦ä¹ çš„æ–¹æ³•ï¼ŒåƒHanLPã€ç»“å·´åˆ†è¯ç­‰å·¥å…·éƒ½æœ‰è¿™ä¸ªåŠŸèƒ½ã€‚&lt;/span&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5171428571428571&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFPI3o6V01WfyAEzKIoPuGYRwaPet51XtImunzNudmia7h8WQWCXppGcibg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;700&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;2.3 å‘½åå®ä½“è¯†åˆ«ï¼ˆç³»åˆ—æ ‡æ³¨ä»»åŠ¡ï¼‰&lt;/h3&gt;&lt;section&gt;&lt;span&gt;å‘½åå®ä½“è¯†åˆ«ï¼ˆNamed Entity Recognitionï¼Œç®€ç§°NERï¼‰æ˜¯ä¸€ä¸ªæœ‰ç›‘ç£çš„ç³»åˆ—æ ‡æ³¨ä»»åŠ¡ï¼Œåˆç§°ä½œâ€œä¸“åè¯†åˆ«â€ï¼Œæ˜¯æŒ‡è¯†åˆ«æ–‡æœ¬ä¸­å…·æœ‰ç‰¹å®šæ„ä¹‰çš„å®ä½“ï¼Œä¸»è¦åŒ…æ‹¬äººåã€åœ°åã€æœºæ„åã€æ—¶é—´ã€ä¸“æœ‰åè¯ç­‰å…³é”®ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.26490984743411927&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFPVjibTzQT2ZIJZtvBzAj1ZXgibEESUAj6PuxNELLmE3B3mfzqiaYskAnxg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;721&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é€šè¿‡NERè¯†åˆ«å‡ºä¸€äº›å…³é”®çš„äººåã€åœ°åå°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°æå–å‡ºâ€œæŸäººå»å“ªé‡Œï¼Œåšä»€ä¹ˆäº‹çš„ä¿¡æ¯â€ï¼Œå¾ˆæ–¹ä¾¿ä¿¡æ¯æå–ã€é—®ç­”ç³»ç»Ÿç­‰ä»»åŠ¡ã€‚NERä¸»æµçš„æ¨¡å‹å®ç°æœ‰BiLSTM-CRFã€Bert-CRFï¼Œå¦‚ä¸‹ä¸€ä¸ªç®€å•çš„ä¸­æ–‡neré¡¹ç›®ï¼šhttps://github.com/Determined22/zh-NER-TF&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;2.4 è¯å‘é‡ï¼ˆè¡¨ç¤ºå­¦ä¹ ï¼‰&lt;/h3&gt;&lt;section&gt;&lt;span&gt;å¯¹äºè‡ªç„¶è¯­è¨€æ–‡æœ¬ï¼Œè®¡ç®—æœºæ— æ³•ç†è§£è¯åé¢çš„å«ä¹‰ã€‚è¾“å…¥æ¨¡å‹å‰ï¼Œé¦–å…ˆè¦åšçš„å°±æ˜¯è¯çš„æ•°å€¼åŒ–è¡¨ç¤ºï¼Œå¸¸ç”¨çš„è½¬åŒ–æ–¹å¼æœ‰2ç§ï¼šOne-hotç¼–ç ã€è¯åµŒå…¥åˆ†å¸ƒå¼æ–¹æ³•ã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;##Â è¯è¢‹è¡¨ç¤º&lt;/span&gt;&lt;br/&gt;fromÂ sklearn.feature_extraction.textÂ importÂ CountVectorizer&lt;br/&gt;bowÂ =Â CountVectorizer(&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â analyzerÂ =Â &lt;span&gt;&#x27;word&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â strip_accentsÂ =Â &lt;span&gt;&#x27;ascii&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â tokenizerÂ =Â [],&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lowercaseÂ =Â True,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â max_featuresÂ =Â 100,Â &lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â )&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.22401847575057737&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFPnYsicxIydyMCLjj4TpiaibQIAbomgnBLloIkf5TVAcvGxEpCwXVqLfL7g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;866&quot;/&gt;&lt;/figure&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7467741935483871&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFP0D1tmfUtHpwDOt0U5EXfw2jNsmZlT21iaQlRibe5rsShjcVZPibIPCdLQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;#Â FasttextÂ embedæ¨¡å‹&lt;/span&gt;&lt;br/&gt;fromÂ gensim.modelsÂ importÂ FastText,word2vec&lt;br/&gt;&lt;br/&gt;modelÂ =Â FastText(text,Â Â size=100,sg=1,Â window=3,Â min_count=1,Â iter=10,Â min_n=3,Â max_n=6,word_ngrams=1,workers=12)&lt;br/&gt;&lt;span&gt;print&lt;/span&gt;(model.wv[&lt;span&gt;&#x27;hello&#x27;&lt;/span&gt;])Â &lt;span&gt;#Â è¯å‘é‡&lt;/span&gt;&lt;br/&gt;model.save(&lt;span&gt;&#x27;./data/fasttext100dim&#x27;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç‰¹åˆ«åœ°ï¼Œæ­£å› ä¸ºBertç­‰å¤§è§„æ¨¡è‡ªç›‘ç£é¢„è®­ç»ƒæ–¹æ³•ï¼Œåˆä¸ºNLPå¸¦æ¥äº†æ˜¥å¤©~&lt;/span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6074074074074074&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFPFgiaLkWpcJvo9PNCj8OHjmu2ibxVdVEMkTML9QcRzsXmNmUMDAYBJsRw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.12145110410094637&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFPjgiar4OichM0aBibm88UpHQpfiamgialOYmv6uVhRCjChJiawrosb4hvza8g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;634&quot;/&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;#Â TF-IDFå¯ä»¥ç›´æ¥è°ƒç”¨sklearn&lt;/span&gt;&lt;br/&gt;fromÂ sklearn.feature_extraction.textÂ importÂ TfidfTransformer&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;2.5 å¥æ³•ã€è¯­ä¹‰ä¾å­˜åˆ†æ&lt;/h3&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å¥æ³•ã€è¯­ä¹‰ä¾å­˜åˆ†ææ˜¯ä¼ ç»Ÿè‡ªç„¶è¯­è¨€çš„åŸºç¡€å¥å­çº§çš„ä»»åŠ¡ï¼Œè¯­ä¹‰ä¾å­˜åˆ†ææ˜¯æŒ‡åœ¨å¥å­ç»“æ„ä¸­åˆ†æå®è¯å’Œå®è¯ä¹‹é—´çš„è¯­ä¹‰å…³ç³»ï¼Œè¿™ç§å…³ç³»æ˜¯ä¸€ç§äº‹å®ä¸Šæˆ–é€»è¾‘ä¸Šçš„å…³ç³»ï¼Œä¸”åªæœ‰å½“è¯è¯­è¿›å…¥åˆ°å¥å­æ—¶æ‰ä¼šå­˜åœ¨ã€‚è¯­ä¹‰ä¾å­˜åˆ†æçš„ç›®çš„å³å›ç­”å¥å­çš„â€Who did what to whom when and whereâ€çš„é—®é¢˜ã€‚ä¾‹å¦‚å¥å­â€œå¼ ä¸‰æ˜¨å¤©å‘Šè¯‰æå››ä¸€ä¸ªç§˜å¯†â€ï¼Œè¯­ä¹‰ä¾å­˜åˆ†æå¯ä»¥å›ç­”å››ä¸ªé—®é¢˜ï¼Œå³è°å‘Šè¯‰äº†æå››ä¸€ä¸ªç§˜å¯†ï¼Œå¼ ä¸‰å‘Šè¯‰è°ä¸€ä¸ªç§˜å¯†ï¼Œå¼ ä¸‰ä»€ä¹ˆæ—¶å€™å‘Šè¯‰æå››ä¸€ä¸ªç§˜å¯†ï¼Œå¼ ä¸‰å‘Šè¯‰æå››ä»€ä¹ˆã€‚&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.38303341902313626&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFPIic5ppjiaUR7ZxwpoyiaUghkYqlUZVNibCjiagzXflXjubPglYbficPSiciaAA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;389&quot;/&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä¼ ç»Ÿçš„è‡ªç„¶è¯­è¨€å¤„ç†å¤šæ˜¯å‚ç…§äº†è¯­è¨€å­¦å®¶å¯¹äºè‡ªç„¶è¯­è¨€çš„å½’çº³æ€»ç»“ï¼Œé€šè¿‡å¥æ³•ã€è¯­ä¹‰åˆ†æå¯ä»¥æŒ–æ˜å‡ºè¯è¯­é—´çš„è”ç³»ï¼ˆä¸»è°“å®¾ã€æ–½äº‹å—äº‹ç­‰å…³ç³»ï¼‰ï¼Œç”¨äºåˆ¶å®šæ–‡æœ¬è§„åˆ™ã€ä¿¡æ¯æŠ½å–ï¼ˆå¦‚æ­£åˆ™åŒ¹é…å åŠ è¯­ä¹‰è§„åˆ™åº”ç”¨äºçŸ¥è¯†æŠ½å–æˆ–è€…æ„é€ ç‰¹å¾ï¼‰ã€‚å¯ä»¥å‚è€ƒspacyåº“ã€å“ˆå·¥å¤§NLPçš„ç¤ºä¾‹ï¼šhttp://ltp.ai/demo.html&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;éšç€æ·±åº¦å­¦ä¹ æŠ€æœ¯RNN/LSTMç­‰å¼ºå¤§çš„æ—¶åºæ¨¡å‹ï¼ˆsequential modelingï¼‰å’Œè¯åµŒå…¥æ–¹æ³•çš„æ™®åŠï¼Œèƒ½å¤Ÿåœ¨ä¸€å®šç¨‹åº¦ä¸Šåˆ»ç”»å¥å­çš„éšå«è¯­æ³•ç»“æ„ï¼Œå­¦ä¹ åˆ°ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå·²ç»é€æ¸å–ä»£äº†è¯æ³•ã€å¥æ³•ç­‰ä¼ ç»Ÿè‡ªç„¶è¯­è¨€å¤„ç†æµç¨‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;2.6 ç›¸ä¼¼åº¦ç®—æ³•ï¼ˆå¥å­å…³ç³»çš„ä»»åŠ¡ï¼‰&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è‡ªç„¶è¯­è¨€å¤„ç†ä»»åŠ¡ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åˆ¤æ–­ä¸¤ç¯‡æ–‡æ¡£çš„ç›¸ä¼¼ç¨‹åº¦ï¼ˆå¥å­å…³ç³»ï¼‰ï¼Œæ¯”å¦‚æ£€ç´¢ç³»ç»Ÿè¾“å‡ºæœ€ç›¸å…³çš„æ–‡æœ¬ï¼Œæ¨èç³»ç»Ÿæ¨èç›¸ä¼¼çš„æ–‡ç« ã€‚æ–‡æœ¬ç›¸ä¼¼åº¦åŒ¹é…å¸¸ç”¨åˆ°çš„æ–¹æ³•æœ‰ï¼šæ–‡æœ¬ç¼–è¾‘è·ç¦»ã€WMDã€ BM2.5ã€è¯å‘é‡ç›¸ä¼¼åº¦ ã€Approximate Nearest Neighborä»¥åŠä¸€äº›æœ‰ç›‘ç£çš„(ç¥ç»ç½‘ç»œ)æ¨¡å‹åˆ¤æ–­æ–‡æœ¬é—´ç›¸ä¼¼åº¦ã€‚&lt;/span&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.48563218390804597&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFP376LgYvQ9l4YbP29uzB0NzgFO8OlxB6kQ9ygD1TvyOeboOnvmCZmWA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;696&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;2.7 æ–‡æœ¬åˆ†ç±»ä»»åŠ¡&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ–‡æœ¬åˆ†ç±»æ˜¯ç»å…¸çš„NLPä»»åŠ¡ï¼Œå°±æ˜¯å°†æ–‡æœ¬ç³»åˆ—å¯¹åº”é¢„æµ‹åˆ°ç±»åˆ«ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;åˆ†ç±»ä»»åŠ¡ä½¿ç”¨é¢„è®­ç»ƒ+(ç¥ç»ç½‘ç»œ)åˆ†ç±»æ¨¡å‹çš„ç«¯å¯¹ç«¯å­¦ä¹ æ˜¯ä¸»æµï¼Œæ·±åº¦å­¦ä¹ å­¦ä¹ ç‰¹å¾çš„è¡¨è¾¾ç„¶åè¿›è¡Œåˆ†ç±»ï¼Œå¤§å¤§å‡å°‘äººå·¥çš„ç‰¹å¾ã€‚ä½†ä»¥å®é™…é¡¹ç›®ä¸­çš„ç»éªŒæ¥çœ‹ï¼Œå¯¹äºä¸€äº›å›°éš¾ä»»åŠ¡ï¼ˆä»»åŠ¡çš„å™ªå£°å¤§ï¼‰ï¼ŒåŠ å…¥äº›äººå·¥çš„ç‰¹å¾å·¥ç¨‹è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.9222520107238605&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFP8dm5lCiag6QibLzkYT6iaorxGQJexfZU6nqgqo7nRvia0ZQanUhSt1X2Rw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;746&quot;/&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;2.8 æ–‡æœ¬ç”Ÿæˆä»»åŠ¡&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ–‡æœ¬ç”Ÿæˆä¹Ÿå°±æ˜¯ç”±ç±»åˆ«ç”Ÿæˆåºåˆ— æˆ–è€… ç”±åºåˆ—åˆ°åºåˆ—çš„é¢„æµ‹ä»»åŠ¡ã€‚æŒ‰ç…§ä¸åŒçš„è¾“å…¥åˆ’åˆ†ï¼Œæ–‡æœ¬è‡ªåŠ¨ç”Ÿæˆå¯åŒ…æ‹¬æ–‡æœ¬åˆ°æ–‡æœ¬çš„ç”Ÿæˆ(text-to-text Â generation)ã€æ„ä¹‰åˆ°æ–‡æœ¬çš„ç”Ÿæˆ(meaning-to-text Â generation)ã€æ•°æ®åˆ°æ–‡æœ¬çš„ç”Ÿæˆ(data-to-text Â generation)ä»¥åŠå›¾åƒåˆ°æ–‡æœ¬çš„ç”Ÿæˆ(image-to-text generation)ç­‰ã€‚å…·ä½“åº”ç”¨å¦‚æœºå™¨ç¿»è¯‘ã€æ–‡æœ¬æ‘˜è¦ç†è§£ã€é˜…è¯»ç†è§£ã€é—²èŠå¯¹è¯ã€å†™ä½œã€çœ‹å›¾è¯´è¯ã€‚å¸¸ç”¨çš„æ¨¡å‹å¦‚RNNã€CNNã€seq2seqã€Transformerã€‚&lt;/span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4689189189189189&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFP82qbJZn3937QYzU4SgAsy23mNhYA8V2th9YVPv55ayeTUPMVt6Y7nw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;740&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;åŒæ ·çš„ï¼ŒåŸºäºå¤§è§„æ¨¡é¢„è®­ç»ƒæ¨¡å‹çš„æ–‡æœ¬ç”Ÿæˆä¹Ÿæ˜¯ä¸€å¤§çƒ­é—¨ï¼Œå¯è§ã€ŠA Survey of Pretrained Language Models Based Text Generationã€‹&lt;/span&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä¸‰ã€åƒåœ¾çŸ­ä¿¡æ–‡æœ¬åˆ†ç±»å®æˆ˜&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3.1 è¯»å–çŸ­ä¿¡æ–‡æœ¬æ•°æ®å¹¶å±•ç¤º&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ¬é¡¹ç›®æ˜¯é€šè¿‡æœ‰ç›‘ç£çš„çŸ­ä¿¡æ–‡æœ¬ï¼Œå­¦ä¹ ä¸€ä¸ªåƒåœ¾çŸ­ä¿¡æ–‡æœ¬åˆ†ç±»æ¨¡å‹ã€‚æ•°æ®æ ·æœ¬æ€»çš„æœ‰5572æ¡ï¼Œlabelæœ‰spamï¼ˆåƒåœ¾çŸ­ä¿¡ï¼‰å’Œhamä¸¤ç§ï¼Œæ˜¯ä¸€ä¸ªå…¸å‹ç±»åˆ«ä¸å‡è¡¡çš„äºŒåˆ†ç±»é—®é¢˜ã€‚&lt;/span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8300970873786407&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFP7eeAO753uhH2YtQO5HUKAEKORVickZZrXfKt500USTicNXH9xR32hY0g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;618&quot;/&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;#Â æºç å¯è§https://github.com/aialgorithm/Blog&lt;/span&gt;&lt;br/&gt;importÂ pandasÂ asÂ pd&lt;br/&gt;importÂ numpyÂ asÂ np&lt;br/&gt;importÂ Â matplotlib.pyplotÂ asÂ plt&lt;br/&gt;&lt;br/&gt;spam_dfÂ =Â pd.read_csv(&lt;span&gt;&#x27;./data/spam.csv&#x27;&lt;/span&gt;,Â header=0,Â encoding=&lt;span&gt;&quot;ISO-8859-1&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ•°æ®å±•ç¤º&lt;/span&gt;&lt;br/&gt;_,Â axÂ =Â plt.subplots(1,2,figsize=(10,5))&lt;br/&gt;spam_df[&lt;span&gt;&#x27;label&#x27;&lt;/span&gt;].value_counts().plot(ax=ax[0],Â kind=&lt;span&gt;&quot;bar&quot;&lt;/span&gt;,Â rot=90,Â title=&lt;span&gt;&#x27;label&#x27;&lt;/span&gt;);&lt;br/&gt;spam_df[&lt;span&gt;&#x27;label&#x27;&lt;/span&gt;].value_counts().plot(ax=ax[1],Â kind=&lt;span&gt;&quot;pie&quot;&lt;/span&gt;,Â rot=90,Â title=&lt;span&gt;&#x27;label&#x27;&lt;/span&gt;,Â ylabel=&lt;span&gt;&#x27;&#x27;&lt;/span&gt;);&lt;br/&gt;&lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&quot;DatasetÂ size:Â &quot;&lt;/span&gt;,Â spam_df.shape)&lt;br/&gt;&lt;br/&gt;spam_df.head(5)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3.2 æ•°æ®æ¸…æ´—é¢„å¤„ç†&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ•°æ®æ¸…æ´—åœ¨äºå»é™¤ä¸€äº›å™ªå£°ä¿¡æ¯ï¼Œè¿™é‡Œå¯¹çŸ­ä¿¡æ–‡æœ¬åšæŒ‰ç©ºæ ¼åˆ†è¯ï¼Œç»Ÿä¸€å¤§å°å†™ï¼Œæ¸…æ´—éè‹±æ–‡å­—ç¬¦ï¼Œå»æ‰åœç”¨è¯å¹¶åšäº†è¯å¹²è¿˜åŸã€‚è€ƒè™‘åˆ°çŸ­ä¿¡æ–‡æœ¬é‡Œé¢çš„æ•°å­—ä½æ•°å¯èƒ½æœ‰ä¸€å®šçš„å«ä¹‰ï¼Œè¿™é‡Œå°†æ•°å­—æ›¿æ¢ä¸ºâ€˜xâ€™çš„å¤„ç†ã€‚æœ€åï¼Œå°†æ ‡ç­¾ç»Ÿä¸€ä¸ºæ•°å€¼ï¼ˆ0ã€1ï¼‰æ˜¯å¦åƒåœ¾çŸ­ä¿¡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;#Â å¯¼å…¥ç›¸å…³çš„åº“&lt;/span&gt;&lt;br/&gt;importÂ nltk&lt;br/&gt;fromÂ nltkÂ importÂ word_tokenize&lt;br/&gt;fromÂ nltk.corpusÂ importÂ stopwords&lt;br/&gt;fromÂ nltk.dataÂ importÂ load&lt;br/&gt;fromÂ nltk.stemÂ importÂ SnowballStemmer&lt;br/&gt;fromÂ stringÂ importÂ punctuation&lt;br/&gt;&lt;br/&gt;importÂ reÂ Â &lt;span&gt;#Â æ­£åˆ™åŒ¹é…&lt;/span&gt;&lt;br/&gt;stop_wordsÂ =Â &lt;span&gt;set&lt;/span&gt;(stopwords.words(&lt;span&gt;&#x27;english&#x27;&lt;/span&gt;))&lt;br/&gt;non_wordsÂ =Â list(punctuation)&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â è¯å½¢ã€è¯å¹²è¿˜åŸ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â fromÂ nltk.stemÂ importÂ WordNetLemmatizer&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â wnlÂ =Â WordNetLemmatizer()&lt;/span&gt;&lt;br/&gt;stemmerÂ =Â SnowballStemmer(&lt;span&gt;&#x27;english&#x27;&lt;/span&gt;)&lt;br/&gt;defÂ stem_tokens(tokens,Â stemmer):&lt;br/&gt;Â Â Â Â stemsÂ =Â []&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â tokenÂ &lt;span&gt;in&lt;/span&gt;Â tokens:&lt;br/&gt;Â Â Â Â Â Â Â Â stems.append(stemmer.stem(token))&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â stems&lt;br/&gt;&lt;br/&gt;&lt;span&gt;###Â æ¸…é™¤éè‹±æ–‡è¯æ±‡å¹¶æ›¿æ¢æ•°å€¼x&lt;/span&gt;&lt;br/&gt;defÂ clean_non_english_xdig(txt,isstem=True,Â gettok=True):&lt;br/&gt;Â Â Â Â txtÂ =Â re.sub(&lt;span&gt;&#x27;[0-9]&#x27;&lt;/span&gt;,Â &lt;span&gt;&#x27;x&#x27;&lt;/span&gt;,Â txt)Â &lt;span&gt;#Â å»æ•°å­—æ›¿æ¢ä¸ºx&lt;/span&gt;&lt;br/&gt;Â Â Â Â txtÂ =Â txt.lower()Â &lt;span&gt;#Â ç»Ÿä¸€å°å†™&lt;/span&gt;&lt;br/&gt;Â Â Â Â txtÂ =Â re.sub(&lt;span&gt;&#x27;[^a-zA-Z]&#x27;&lt;/span&gt;,Â &lt;span&gt;&#x27;Â &#x27;&lt;/span&gt;,Â txt)Â &lt;span&gt;#å»é™¤éè‹±æ–‡å­—ç¬¦å¹¶æ›¿æ¢ä¸ºç©ºæ ¼&lt;/span&gt;&lt;br/&gt;Â Â Â Â word_tokensÂ =Â word_tokenize(txt)Â &lt;span&gt;#Â åˆ†è¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â notÂ isstem:Â &lt;span&gt;#æ˜¯å¦åšè¯å¹²è¿˜åŸ&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â filtered_wordÂ =Â [wÂ &lt;span&gt;for&lt;/span&gt;Â wÂ &lt;span&gt;in&lt;/span&gt;Â word_tokensÂ &lt;span&gt;if&lt;/span&gt;Â notÂ wÂ &lt;span&gt;in&lt;/span&gt;Â stop_words]Â Â &lt;span&gt;#Â åˆ é™¤åœç”¨è¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;else&lt;/span&gt;:&lt;br/&gt;Â Â Â Â Â Â Â Â filtered_wordÂ =Â [stemmer.stem(w)Â &lt;span&gt;for&lt;/span&gt;Â wÂ &lt;span&gt;in&lt;/span&gt;Â word_tokensÂ &lt;span&gt;if&lt;/span&gt;Â notÂ wÂ &lt;span&gt;in&lt;/span&gt;Â stop_words]Â Â Â &lt;span&gt;#Â åˆ é™¤åœç”¨è¯åŠè¯å¹²è¿˜åŸ&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â gettok:Â Â Â &lt;span&gt;#è¿”å›ä¸ºå­—ç¬¦ä¸²æˆ–åˆ†è¯åˆ—è¡¨&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â filtered_word&lt;br/&gt;Â Â Â Â &lt;span&gt;else&lt;/span&gt;:&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;Â &quot;&lt;/span&gt;.join(filtered_word)&lt;br/&gt;&lt;br/&gt;spam_df[&lt;span&gt;&#x27;token&#x27;&lt;/span&gt;]Â =Â spam_df.message.apply(lambdaÂ x:clean_non_english_xdig(x))&lt;br/&gt;spam_df.head(3)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ•°æ®æ¸…æ´—&lt;/span&gt;&lt;br/&gt;spam_df[&lt;span&gt;&#x27;token&#x27;&lt;/span&gt;]Â =Â spam_df.message.apply(lambdaÂ x:clean_non_english_xdig(x))&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ ‡ç­¾æ•´æ•°ç¼–ç &lt;/span&gt;&lt;br/&gt;spam_df[&lt;span&gt;&#x27;label&#x27;&lt;/span&gt;]Â =Â (spam_df.label==&lt;span&gt;&#x27;spam&#x27;&lt;/span&gt;).astype(int)&lt;br/&gt;&lt;br/&gt;spam_df.head(3)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.1811965811965812&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFP3zhRVU4fsZyCxcNBgB9sVFyl9DhFcHW029iaOHloGDiap1a9FnGqzUSQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;585&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3.3 fasttextè¯å‘é‡è¡¨ç¤ºå­¦ä¹ &lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æˆ‘ä»¬éœ€è¦å°†å•è¯æ–‡æœ¬è½¬åŒ–ä¸ºæ•°å€¼çš„è¯å‘é‡æ‰èƒ½è¾“å…¥æ¨¡å‹ã€‚è¯å‘é‡è¡¨ç¤ºå¸¸ç”¨çš„è¯è¢‹ã€fasttextã€bertç­‰æ–¹æ³•ï¼Œè¿™é‡Œè®­ç»ƒçš„æ˜¯fasttextï¼Œæ¨¡å‹çš„ä¸»è¦è¾“å…¥å‚æ•°æ˜¯ï¼Œè¾“å…¥åˆ†è¯åçš„è¯­æ–™ï¼ˆé€šå¸¸è®­ç»ƒè¯­æ–™è¶Šå¤šè¶Šå¥½ï¼Œå½“ç°æœ‰è¯­æ–™æœ‰é™æ—¶å€™ï¼Œç›´æ¥æ‹¿githubä¸Šåˆé€‚çš„å¤§è§„æ¨¡é¢„è®­ç»ƒæ¨¡å‹æ¥åšè¯å‘é‡ä¹Ÿæ˜¯ä¸é”™çš„é€‰æ‹©ï¼‰ï¼Œè¯å‘é‡çš„ç»´åº¦sizeï¼ˆä¸€ä¸ªç»éªŒçš„è¯å‘é‡ç»´åº¦è®¾å®šæ˜¯ï¼Œdim &amp;gt; 8.33 logN, Nä¸ºè¯æ±‡è¡¨çš„å¤§å°ï¼Œå½“ç»´åº¦dimè¶³å¤Ÿå¤§æ‰èƒ½è¡¨è¾¾å¥½è¿™Nè§„æ¨¡çš„è¯æ±‡è¡¨çš„å«ä¹‰ã€‚å¯å‚è€ƒã€Š# æœ€å°ç†µåŸç†ï¼ˆå…­ï¼‰ï¼šè¯å‘é‡çš„ç»´åº¦åº”è¯¥æ€ä¹ˆé€‰æ‹©ï¼ŸBy è‹å‰‘æ—ã€‹ï¼‰ã€‚è¯­æ–™å¤ªå¤§çš„æ—¶å€™å¯ä»¥ä½¿ç”¨workerså¼€å¯å¤šè¿›ç¨‹è®­ç»ƒï¼ˆå…¶ä»–å‚æ•°åŠè¯è¡¨ç¤ºå­¦ä¹ åŸç†åç»­ä¼šä¸“é¢˜ä»‹ç»ï¼Œä¹Ÿå¯ä»¥è‡ªè¡Œäº†è§£ï¼‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;#Â è®­ç»ƒè¯å‘é‡Â FasttextÂ embedæ¨¡å‹&lt;/span&gt;&lt;br/&gt;fromÂ gensim.modelsÂ importÂ FastText,word2vec&lt;br/&gt;&lt;br/&gt;fmodelÂ =Â FastText(spam_df.token,Â Â size=100,sg=1,Â window=3,Â min_count=1,Â iter=10,Â min_n=3,Â max_n=6,word_ngrams=1,workers=12)&lt;br/&gt;&lt;span&gt;print&lt;/span&gt;(fmodel.wv[&lt;span&gt;&#x27;hello&#x27;&lt;/span&gt;])Â &lt;span&gt;#Â è¾“å‡ºhelloçš„è¯å‘é‡&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â fmodel.save(&#x27;./data/fasttext100dim&#x27;)&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4583333333333333&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFPv9FN92I06P9v9wtRNaUiaCaarGvxZhyNd2icL2pnAnibL69522IxXrpUA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;648&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æŒ‰ç…§å¥å­æ‰€æœ‰çš„è¯å‘é‡å–å¹³å‡ï¼Œä¸ºæ¯ä¸€å¥å­ç”Ÿæˆå¥å‘é‡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;fmodelÂ =Â FastText.load(&lt;span&gt;&#x27;./data/fasttext100dim&#x27;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#å¯¹æ¯ä¸ªå¥å­çš„æ‰€æœ‰è¯å‘é‡å–å‡å€¼ï¼Œæ¥ç”Ÿæˆä¸€ä¸ªå¥å­çš„vector&lt;/span&gt;&lt;br/&gt;defÂ build_sentence_vector(sentence,w2v_model,size=100):&lt;br/&gt;Â Â Â Â sen_vec=np.zeros((size,))&lt;br/&gt;Â Â Â Â count=0&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â wordÂ &lt;span&gt;in&lt;/span&gt;Â sentence:&lt;br/&gt;Â Â Â Â Â Â Â Â try:&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â sen_vec+=w2v_model[word]&lt;span&gt;#.reshape((1,size))&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â count+=1&lt;br/&gt;Â Â Â Â Â Â Â Â exceptÂ KeyError:&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;continue&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â count!=0:&lt;br/&gt;Â Â Â Â Â Â Â Â sen_vec/=count&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â sen_vec&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â å¥å‘é‡&lt;/span&gt;&lt;br/&gt;sents_vecÂ =Â []&lt;br/&gt;&lt;span&gt;for&lt;/span&gt;Â sentÂ &lt;span&gt;in&lt;/span&gt;Â spam_df[&lt;span&gt;&#x27;token&#x27;&lt;/span&gt;]:&lt;br/&gt;Â Â Â Â sents_vec.append(build_sentence_vector(sent,fmodel,size=100))&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;br/&gt;&lt;span&gt;print&lt;/span&gt;(len(sents_vec))&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3.4 è®­ç»ƒæ–‡æœ¬åˆ†ç±»æ¨¡å‹&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç¤ºä¾‹é‡‡ç”¨çš„fasttext embedding + lightgbmçš„äºŒåˆ†ç±»æ¨¡å‹ï¼Œç±»åˆ«ä¸å‡è¡¡ä½¿ç”¨lgbä»£ä»·æ•æ„Ÿå­¦ä¹ è§£å†³ï¼ˆå³class_weight=&#x27;balanced&#x27;ï¼‰ï¼Œè¶…å‚æ•°æ˜¯æ‰‹åŠ¨ç®€å•é…ç½®çš„ï¼Œå¯ä»¥è‡ªè¡Œæœç´¢ä¸‹è¾ƒä¼˜è¶…å‚æ•°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;###Â è®­ç»ƒæ–‡æœ¬åˆ†ç±»æ¨¡å‹&lt;/span&gt;&lt;br/&gt;fromÂ sklearn.model_selectionÂ importÂ train_test_split&lt;br/&gt;fromÂ lightgbmÂ importÂ LGBMClassifier&lt;br/&gt;fromÂ sklearn.linear_modelÂ importÂ LogisticRegression&lt;br/&gt;&lt;br/&gt;train_x,Â test_x,Â train_y,Â test_yÂ =Â train_test_split(sents_vec,Â spam_df.label,test_size=0.2,shuffle=True,random_state=42)&lt;br/&gt;resultÂ =Â []&lt;br/&gt;clfÂ =Â LGBMClassifier(class_weight=&lt;span&gt;&#x27;balanced&#x27;&lt;/span&gt;,n_estimators=300,Â num_leaves=64,Â reg_alpha=Â 1,reg_lambda=Â 1,random_state=42)&lt;br/&gt;&lt;span&gt;#clfÂ =Â LogisticRegression(class_weight=&#x27;balanced&#x27;,random_state=42)&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;clf.fit(train_x,train_y)&lt;br/&gt;&lt;br/&gt;importÂ pickle&lt;br/&gt;&lt;span&gt;#Â ä¿å­˜æ¨¡å‹&lt;/span&gt;&lt;br/&gt;pickle.dump(clf,Â open(&lt;span&gt;&#x27;./saved_models/spam_clf.pkl&#x27;&lt;/span&gt;,Â &lt;span&gt;&#x27;wb&#x27;&lt;/span&gt;))&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â åŠ è½½æ¨¡å‹&lt;/span&gt;&lt;br/&gt;modelÂ =Â pickle.load(open(&lt;span&gt;&#x27;./saved_models/spam_clf.pkl&#x27;&lt;/span&gt;,Â &lt;span&gt;&#x27;rb&#x27;&lt;/span&gt;))&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3.5 æ¨¡å‹è¯„ä¼°&lt;/h3&gt;&lt;p&gt;&lt;span&gt;è®­ç»ƒé›†æµ‹è¯•é›†æŒ‰0.2åˆ’åˆ†ï¼Œåˆ†å¸ƒéªŒè¯è®­ç»ƒé›†æµ‹è¯•é›†çš„AUCã€F1scoreç­‰æŒ‡æ ‡ï¼Œå‡æœ‰ä¸é”™çš„è¡¨ç°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3773148148148148&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTtASicPiczBT5iboIV1e2tjkFPezMLia0ocXWRWvYZHClgnFhm5F0vhalaOs92cOBD9Z2EmhLD7qa0Jiag/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;864&quot;/&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;fromÂ sklearn.metricsÂ importÂ auc,roc_curve,f1_score,precision_score,recall_score&lt;br/&gt;defÂ model_metrics(model,Â x,Â y,tp=&lt;span&gt;&#x27;auc&#x27;&lt;/span&gt;):&lt;br/&gt;Â Â Â Â &lt;span&gt;&quot;&quot;&quot;Â è¯„ä¼°Â &quot;&quot;&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â yhatÂ =Â model.predict(x)&lt;br/&gt;Â Â Â Â yprobÂ =Â model.predict_proba(x)[:,1]&lt;br/&gt;Â Â Â Â fpr,tpr,_Â =Â roc_curve(y,Â yprob,pos_label=1)&lt;br/&gt;Â Â Â Â metricsÂ =Â {&lt;span&gt;&#x27;AUC&#x27;&lt;/span&gt;:auc(fpr,Â tpr),&lt;span&gt;&#x27;KS&#x27;&lt;/span&gt;:max(tpr-fpr),&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;&#x27;f1&#x27;&lt;/span&gt;:f1_score(y,yhat),&lt;span&gt;&#x27;P&#x27;&lt;/span&gt;:precision_score(y,yhat),&lt;span&gt;&#x27;R&#x27;&lt;/span&gt;:recall_score(y,yhat)}&lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â roc_aucÂ =Â auc(fpr,Â tpr)&lt;br/&gt;&lt;br/&gt;Â Â Â Â plt.plot(fpr,Â tpr,Â &lt;span&gt;&#x27;k--&#x27;&lt;/span&gt;,Â label=&lt;span&gt;&#x27;ROCÂ (areaÂ =Â {0:.2f})&#x27;&lt;/span&gt;.format(roc_auc),Â lw=2)&lt;br/&gt;&lt;br/&gt;Â Â Â Â plt.xlim([-0.05,Â 1.05])Â Â &lt;span&gt;#Â è®¾ç½®xã€yè½´çš„ä¸Šä¸‹é™ï¼Œä»¥å…å’Œè¾¹ç¼˜é‡åˆï¼Œæ›´å¥½çš„è§‚å¯Ÿå›¾åƒçš„æ•´ä½“&lt;/span&gt;&lt;br/&gt;Â Â Â Â plt.ylim([-0.05,Â 1.05])&lt;br/&gt;Â Â Â Â plt.xlabel(&lt;span&gt;&#x27;FalseÂ PositiveÂ Rate&#x27;&lt;/span&gt;)&lt;br/&gt;Â Â Â Â plt.ylabel(&lt;span&gt;&#x27;TrueÂ PositiveÂ Rate&#x27;&lt;/span&gt;)Â Â &lt;span&gt;#Â å¯ä»¥ä½¿ç”¨ä¸­æ–‡ï¼Œä½†éœ€è¦å¯¼å…¥ä¸€äº›åº“å³å­—ä½“&lt;/span&gt;&lt;br/&gt;Â Â Â Â plt.title(&lt;span&gt;&#x27;ROCÂ Curve&#x27;&lt;/span&gt;)&lt;br/&gt;Â Â Â Â plt.legend(loc=&lt;span&gt;&quot;lowerÂ right&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â metrics&lt;br/&gt;&lt;br/&gt;&lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;trainÂ &#x27;&lt;/span&gt;,model_metrics(clf,Â Â train_x,Â train_y,tp=&lt;span&gt;&#x27;ks&#x27;&lt;/span&gt;))&lt;br/&gt;&lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;testÂ &#x27;&lt;/span&gt;,model_metrics(clf,Â test_x,test_y,tp=&lt;span&gt;&#x27;ks&#x27;&lt;/span&gt;))&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzU4OTQ1MTA4OQ==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/Iefry9dPrYJ1LbaTxqd4VPOibfZ1tf0fXDUqFOLlPcRPvv4W4Cro4YnhRx2Xib5MId5rECtVMBkmvJk8nSNnsekw/0?wx_fmt=png&quot; data-nickname=&quot;æ•°æ®æŒ–æ˜å·¥ç¨‹å¸ˆ&quot; data-alias=&quot;DataMinings&quot; data-signature=&quot;æ•°ä¸‡åæ•°æ®æŒ–æ˜çˆ±å¥½è€…çš„èšé›†åœ°ï¼Œè‡´åŠ›äºå‰æ²¿æ•°æ®æŠ€æœ¯ç ”ç©¶ã€‚å…¬ä¼—å·ä»¥æ•°æ®ä¸ºæ ¸å¿ƒï¼Œåˆ†äº«å¤§æ•°æ®ã€æ•°æ®åˆ†æã€æœºå™¨å­¦ä¹ ã€æ·±åº¦å­¦ä¹ ç­‰å¹²è´§ï¼Œæƒ³å­¦æ•°æ®æˆ‘ç­‰ä½ æ¥ã€‚&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;strong&gt;æ¨èé˜…è¯»&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzU4OTQ1MTA4OQ==&amp;amp;mid=2247500946&amp;amp;idx=1&amp;amp;sn=35d33828ff50f373709086a636eb4964&amp;amp;chksm=fdcfdeaccab857babe6ce58dfc0444ffc58cac52a28c23774e14a6126a685103e492d1e2e395&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;2021ç§‘å¤§è®¯é£-è½¦è¾†è´·æ¬¾è¿çº¦é¢„æµ‹èµ›äº‹ Top1æ–¹æ¡ˆï¼ˆPythonä»£ç ï¼‰&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;11&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;2021ç§‘å¤§è®¯é£-è½¦è¾†è´·æ¬¾è¿çº¦é¢„æµ‹èµ›äº‹ Top1æ–¹æ¡ˆï¼ˆPythonä»£ç ï¼‰&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzU4OTQ1MTA4OQ==&amp;amp;mid=2247500459&amp;amp;idx=1&amp;amp;sn=8e15c48bc67abdc03caa649689479140&amp;amp;chksm=fdcfd895cab85183fb6a03ac22f9804b973ebea2e96a5d153a062067a6fe6c1e241b2aeb7b0a&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;10 ç§èšç±»ç®—æ³•çš„å®Œæ•´ Python æ“ä½œç¤ºä¾‹&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;10 ç§èšç±»ç®—æ³•çš„å®Œæ•´ Python æ“ä½œç¤ºä¾‹&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzU4OTQ1MTA4OQ==&amp;amp;mid=2247500259&amp;amp;idx=2&amp;amp;sn=e52aa3206765ab55d7ebc89d8ba4a29c&amp;amp;chksm=fdcfdbddcab852cbb2a9763745871ed2a266b1f997f1e37b52d2db244dbc6faa1f61f5aa1548&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ä¸ºä»€ä¹ˆå›å½’é—®é¢˜ç”¨MSEï¼Ÿ&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;ä¸ºä»€ä¹ˆå›å½’é—®é¢˜ç”¨MSEï¼Ÿ&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzU4OTQ1MTA4OQ==&amp;amp;mid=2247500237&amp;amp;idx=1&amp;amp;sn=c15c8ef92403c01730a5ee3a28c487d0&amp;amp;chksm=fdcfdbf3cab852e5f17b75b8a0ac72cb0b9754c609dc3ea91fc45617b067e8be5f5657709a17&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;æ—¶åºç‰¹å¾ç›¸å…³ç³»æ•°çš„ç¨³å®šæ€§åˆ†æ(é™„ä»£ç )&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;11&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;æ—¶åºç‰¹å¾ç›¸å…³ç³»æ•°çš„ç¨³å®šæ€§åˆ†æ(é™„ä»£ç )&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzU4OTQ1MTA4OQ==&amp;amp;mid=2247499891&amp;amp;idx=1&amp;amp;sn=53f97dd57de38f9e27bf3f5c18180e36&amp;amp;chksm=fdcfda4dcab8535b8cd129d90dd40927f2f33c6039d2dbe921fc1daae45f84fb3bf9f80bdc99&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;æ—¶é—´åºåˆ—é¢„æµ‹æ–¹æ³•æ±‡æ€»ï¼šä»ç†è®ºåˆ°å®è·µï¼ˆé™„Kaggleç»å…¸æ¯”èµ›æ–¹æ¡ˆï¼‰&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;æ—¶é—´åºåˆ—é¢„æµ‹æ–¹æ³•æ±‡æ€»ï¼šä»ç†è®ºåˆ°å®è·µï¼ˆé™„Kaggleç»å…¸æ¯”èµ›æ–¹æ¡ˆï¼‰&lt;/a&gt;&lt;/p&gt;&lt;/pre&gt;
          &lt;/div&gt;

          

          



           
                                
                    
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>