<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>b969ba6f7f4c954bef603687df78d995</guid>
<title>é¢è¯•å®˜é—®: ES åœ¨æ•°æ®é‡å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼ˆæ•°åäº¿çº§åˆ«ï¼‰å¦‚ä½•æé«˜æŸ¥è¯¢æ•ˆç‡å•Šï¼Ÿ</title>
<link>https://toutiao.io/k/kiapnd2</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;container app-preview post-body&quot;&gt;
  &lt;div class=&quot;preview&quot;&gt;&lt;h2&gt;è§£é¢˜æ€è·¯&lt;/h2&gt;

&lt;p&gt;éœ€è¦ä»ESæœç´¢ä¼˜åŒ–ä½œç­”&lt;/p&gt;

&lt;p&gt;esçš„æ€§èƒ½ä¼˜åŒ–ï¼Œä¸»è¦æ˜¯å›´ç»•ç€ fileSystem cache ä¹Ÿå¯ä»¥å«åšOS cacheæ¥è¿›è¡Œï¼›eså†™å…¥æ•°æ®å®é™…
ä¸Šæ•°æ®æœ€ç»ˆéƒ½ä¼šå†™å…¥åˆ°ç£ç›˜ä¸­å»ï¼Œå½“æˆ‘ä»¬æœç´¢è¯»å–çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šå°†æ•°æ®æ”¾å…¥åˆ°os cacheä¸­ï¼Œè€Œ
esä¸¥é‡ä¾èµ–äºè¿™ä¸ªos cacheï¼Œå¦‚æœæˆ‘ä»¬ç»™æœºå™¨çš„å†…å­˜è¶³å¤Ÿå¤šï¼Œåœ¨esé‡Œå­˜çš„ä¹¦åº“é‡Œæ˜‚å°äºå†…å­˜å®¹
é‡ï¼Œé‚£ä¹ˆæœç´¢çš„æ•ˆç‡æ˜¯éå¸¸é«˜çš„ï¼Œ&lt;/p&gt;

&lt;h2&gt;æ€§èƒ½ä¼˜åŒ–çš„æ€æ‰‹é”â€”â€”filesystem cache&lt;/h2&gt;

&lt;p&gt;ä½ å¾€ es é‡Œå†™çš„æ•°æ®ï¼Œå®é™…ä¸Šéƒ½å†™åˆ°ç£ç›˜æ–‡ä»¶é‡Œå»äº†ï¼ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿä¼šå°†ç£ç›˜æ–‡ä»¶é‡Œçš„æ•°æ®è‡ªåŠ¨ç¼“å­˜åˆ° filesystem cache é‡Œé¢å»ã€‚es çš„æœç´¢å¼•æ“ä¸¥é‡ä¾èµ–äºåº•å±‚çš„ filesystem cacheï¼Œä½ å¦‚æœç»™ filesystem cache æ›´å¤šçš„å†…å­˜ï¼Œå°½é‡è®©å†…å­˜å¯ä»¥å®¹çº³æ‰€æœ‰çš„ idx segment file ç´¢å¼•æ•°æ®æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ æœç´¢çš„æ—¶å€™å°±åŸºæœ¬éƒ½æ˜¯èµ°å†…å­˜çš„ï¼Œæ€§èƒ½ä¼šéå¸¸é«˜ã€‚&lt;/p&gt;

&lt;h2&gt;å‡å°‘å­—æ®µ&lt;/h2&gt;

&lt;p&gt;å¦‚æœæˆ‘ä»¬çš„è¡¨é‡Œæœ‰å¾ˆå¤šçš„å­—æ®µï¼Œè€Œæˆ‘ä»¬åªéœ€è¦å¾€esåº“é‡Œå†™å…¥æˆ‘ä»¬éœ€è¦æ£€ç´¢çš„é‚£å‡ ä¸ªå­—æ®µå°±å¯ä»¥äº†ï¼Œå¯¹äºå…¶ä»–çš„å­—æ®µæˆ‘ä»¬å¯ä»¥å­˜åˆ°mysqlæˆ–è€…è¯´å…¶ä»–çš„æ¯”å¦‚Hbaseä¸­ï¼Œhbaseçš„ç‰¹ç‚¹æ˜¯é€‚ç”¨äºæµ·é‡æ•°æ®çš„åœ¨çº¿å­˜å‚¨ï¼Œå°±æ˜¯å¯¹hbaseå¯ä»¥å†™å…¥æµ·é‡æ•°æ®ï¼Œä¸è¦åšå¤æ‚çš„æœç´¢ï¼Œå°±æ˜¯åšå¾ˆç®€å•çš„ä¸€äº›æ ¹æ®idæˆ–è€…èŒƒå›´è¿›è¡ŒæŸ¥è¯¢çš„è¿™ä¹ˆä¸€ä¸ªæ“ä½œå°±å¯ä»¥äº†ï¼Œä»esä¸­æ ¹æ®æ£€ç´¢çš„å­—æ®µå»æœç´¢ï¼Œæ‹¿åˆ°çš„ç»“æœå¯èƒ½å°±åå‡ ä¸ªdoc idï¼Œç„¶åæ ¹æ®doc idåˆ°hbaseé‡Œå»æŸ¥è¯¢æ¯ä¸ªdoc idå¯¹åº”çš„å®Œæ•´çš„æ•°æ®ï¼Œç»™æŸ¥å‡ºæ¥ï¼Œå†è¿”å›ç»™å‰ç«¯ã€‚ç®€å•åœ°è¯´å°±æ˜¯ï¼šelastcisearchå‡å°‘æ•°æ®é‡ä»…ä»…æ”¾è¦ç”¨äºæœç´¢çš„å‡ ä¸ªå…³é”®å­—æ®µå³å¯ï¼Œå°½é‡å†™å…¥esçš„æ•°æ®é‡è·Ÿesæœºå™¨çš„filesystem cacheæ˜¯å·®ä¸å¤šçš„å°±å¯ä»¥äº†ï¼›å…¶ä»–ä¸ç”¨æ¥æ£€ç´¢çš„æ•°æ®æ”¾hbasé‡Œï¼Œæˆ–è€…mysqlã€‚&lt;/p&gt;

&lt;h2&gt;æ•°æ®é¢„çƒ­&lt;/h2&gt;

&lt;p&gt;å¦‚æœè¯´æˆ‘ä»¬æŒ‰ç…§æ–¹æ¡ˆä¸€çš„æ–¹æ³•åšäº†ä¹‹åï¼Œæ•ˆç‡è¿˜æ˜¯ä¸è¡Œï¼Œå­˜çš„æ•°æ®é‡è¿˜æ˜¯è¶…è¿‡os cacheçš„ç©ºé—´ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å§ä¸€äº›æ¯”è¾ƒçƒ­é—¨çš„æ•°æ®ï¼Œæ¯”å¦‚åœ¨ç”µå•†ç³»ç»Ÿä¸­ï¼Œåƒä¸€äº›çƒ­é—¨çš„å•†å“ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åå°å•ç‹¬çš„å†™ä¸€ä¸ªå­ç³»ç»Ÿï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ï¼Œæˆ‘ä»¬å°±è®¿é—®ä¸€ä¸‹ï¼Œç„¶æ•°æ®è¿›å…¥åˆ°os cacheä¸­ï¼Œè¿™æ ·ç”¨æˆ·æ¥è®¿é—®çš„æ—¶å€™å°±è®¿é—®åˆ°çš„æ˜¯os cacheä¸­çš„æ•°æ®ï¼Œå°±æ¯”è¾ƒå¿«ã€‚&lt;/p&gt;

&lt;h2&gt;å†·çƒ­åˆ†ç¦»&lt;/h2&gt;

&lt;p&gt;elasticsearch å¯ä»¥åšç±»ä¼¼äº mysql çš„æ°´å¹³æ‹†åˆ†ï¼Œå°±æ˜¯è¯´å°†å¤§é‡çš„è®¿é—®å¾ˆå°‘ã€é¢‘ç‡å¾ˆä½çš„æ•°æ®ï¼Œå•ç‹¬å†™ä¸€ä¸ªç´¢å¼•ï¼Œç„¶åå°†è®¿é—®å¾ˆé¢‘ç¹çš„çƒ­æ•°æ®å•ç‹¬å†™ä¸€ä¸ªç´¢å¼•ã€‚æœ€å¥½æ˜¯å°†å†·æ•°æ®å†™å…¥ä¸€ä¸ªç´¢å¼•ä¸­ï¼Œç„¶åçƒ­æ•°æ®å†™å…¥å¦å¤–ä¸€ä¸ªç´¢å¼•ä¸­ï¼Œè¿™æ ·å¯ä»¥ç¡®ä¿çƒ­æ•°æ®åœ¨è¢«é¢„çƒ­ä¹‹åï¼Œå°½é‡éƒ½è®©ä»–ä»¬ç•™åœ¨ filesystem os cacheé‡Œï¼Œåˆ«è®©å†·æ•°æ®ç»™å†²åˆ·æ‰ã€‚&lt;/p&gt;

&lt;p&gt;å‡è®¾ä½ æœ‰ 6 å°æœºå™¨ï¼Œ 2 ä¸ªç´¢å¼•ï¼Œä¸€ä¸ªæ”¾å†·æ•°æ®ï¼Œä¸€ä¸ªæ”¾çƒ­æ•°æ®ï¼Œæ¯ä¸ªç´¢å¼• 3 ä¸ª shardã€‚ 3 å°æœºå™¨æ”¾çƒ­æ•°æ® indexï¼Œå¦å¤– 3 å°æœºå™¨æ”¾å†·æ•°æ® indexã€‚ç„¶åè¿™æ ·çš„è¯ï¼Œä½ å¤§é‡çš„æ—¶é—´æ˜¯åœ¨è®¿é—®çƒ­æ•°æ® indexï¼Œçƒ­æ•°æ®å¯èƒ½å°±å æ€»æ•°æ®é‡çš„ 10%ï¼Œæ­¤æ—¶æ•°æ®é‡å¾ˆå°‘ï¼Œå‡ ä¹å…¨éƒ½ä¿ç•™åœ¨ filesystem cache é‡Œé¢äº†ï¼Œå°±å¯ä»¥ç¡®ä¿çƒ­æ•°æ®çš„è®¿é—®æ€§èƒ½æ˜¯å¾ˆé«˜çš„ã€‚ä½†æ˜¯å¯¹äºå†·æ•°æ®è€Œè¨€ï¼Œæ˜¯åœ¨åˆ«çš„ index é‡Œçš„ï¼Œè·Ÿçƒ­æ•°æ® index ä¸åœ¨ç›¸åŒçš„æœºå™¨ä¸Šï¼Œå¤§å®¶äº’ç›¸ä¹‹é—´éƒ½æ²¡ä»€ä¹ˆè”ç³»äº†ã€‚å¦‚æœæœ‰äººè®¿é—®å†·æ•°æ®ï¼Œå¯èƒ½å¤§é‡æ•°æ®æ˜¯åœ¨ç£ç›˜ä¸Šçš„ï¼Œæ­¤æ—¶æ€§èƒ½å·®ç‚¹ï¼Œå°± 10% çš„äººå»è®¿é—®å†·æ•°æ®ï¼Œ90% çš„äººåœ¨è®¿é—®çƒ­æ•°æ®ï¼Œä¹Ÿæ— æ‰€è°“äº†ã€‚&lt;/p&gt;

&lt;h2&gt;document æ¨¡å‹è®¾è®¡&lt;/h2&gt;

&lt;p&gt;å¯¹äº MySQLï¼Œæˆ‘ä»¬ç»å¸¸æœ‰ä¸€äº›å¤æ‚çš„å…³è”æŸ¥è¯¢ã€‚åœ¨ es é‡Œè¯¥æ€ä¹ˆç©å„¿ï¼Œes é‡Œé¢çš„å¤æ‚çš„å…³è”æŸ¥è¯¢å°½é‡åˆ«ç”¨ï¼Œä¸€æ—¦ç”¨äº†æ€§èƒ½ä¸€èˆ¬éƒ½ä¸å¤ªå¥½ã€‚æœ€å¥½æ˜¯å…ˆåœ¨ Java ç³»ç»Ÿé‡Œå°±å®Œæˆå…³è”ï¼Œå°†å…³è”å¥½çš„æ•°æ®ç›´æ¥å†™å…¥ es ä¸­ã€‚æœç´¢çš„æ—¶å€™ï¼Œå°±ä¸éœ€è¦åˆ©ç”¨ esçš„æœç´¢è¯­æ³•æ¥å®Œæˆ join ä¹‹ç±»çš„å…³è”æœç´¢äº†ã€‚
  document æ¨¡å‹è®¾è®¡æ˜¯éå¸¸é‡è¦çš„ï¼Œå¾ˆå¤šæ“ä½œï¼Œä¸è¦åœ¨æœç´¢çš„æ—¶å€™æ‰æƒ³å»æ‰§è¡Œå„ç§å¤æ‚çš„ä¹±ä¸ƒå…«ç³Ÿçš„æ“ä½œã€‚es èƒ½æ”¯æŒçš„æ“ä½œå°±é‚£ä¹ˆå¤šï¼Œä¸è¦è€ƒè™‘ç”¨ es åšä¸€äº›å®ƒä¸å¥½æ“ä½œçš„äº‹æƒ…ã€‚å¦‚æœçœŸçš„æœ‰é‚£ç§æ“ä½œï¼Œå°½é‡åœ¨ document æ¨¡å‹è®¾è®¡çš„æ—¶å€™ï¼Œå†™å…¥çš„æ—¶å€™å°±å®Œæˆã€‚å¦å¤–å¯¹äºä¸€äº›å¤ªå¤æ‚çš„æ“ä½œï¼Œæ¯”å¦‚
join/nested/parent-child æœç´¢éƒ½è¦å°½é‡é¿å…ï¼Œæ€§èƒ½éƒ½å¾ˆå·®çš„ã€‚&lt;/p&gt;

&lt;h2&gt;åˆ†é¡µæ€§èƒ½ä¼˜åŒ–&lt;/h2&gt;

&lt;h3&gt;ä¸å…è®¸æ·±åº¦åˆ†é¡µï¼ˆé»˜è®¤æ·±åº¦åˆ†é¡µæ€§èƒ½å¾ˆå·®ï¼‰&lt;/h3&gt;

&lt;p&gt;ç±»ä¼¼äº app é‡Œçš„æ¨èå•†å“ä¸æ–­ä¸‹æ‹‰å‡ºæ¥ä¸€é¡µä¸€é¡µçš„ï¼Œä½ å¯ä»¥ç”¨ scroll api scroll ä¼šä¸€æ¬¡æ€§ç»™ä½ ç”Ÿæˆæ‰€æœ‰æ•°æ®çš„ä¸€ä¸ªå¿«ç…§ç„¶åæ¯æ¬¡æ»‘åŠ¨å‘åç¿»é¡µå°±æ˜¯é€šè¿‡æ¸¸æ ‡scroll_idç§»åŠ¨ï¼Œè·å–ä¸‹ä¸€é¡µä¸‹ä¸€é¡µè¿™æ ·å­ï¼Œæ€§èƒ½ä¼šæ¯”ä¸Šé¢è¯´çš„é‚£ç§åˆ†é¡µæ€§èƒ½è¦é«˜å¾ˆå¤šå¾ˆå¤šï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯æ¯«ç§’çº§çš„ã€‚åˆå§‹åŒ–æ—¶å¿…é¡»æŒ‡å®šscroll` å‚æ•°ï¼Œå‘Šè¯‰ es è¦ä¿å­˜æ­¤æ¬¡æœç´¢çš„ä¸Šä¸‹æ–‡å¤šé•¿æ—¶é—´ã€‚ä½ éœ€è¦ç¡®ä¿ç”¨æˆ·ä¸ä¼šæŒç»­ä¸æ–­ç¿»é¡µç¿»å‡ ä¸ªå°æ—¶ï¼Œå¦åˆ™å¯èƒ½å› ä¸ºè¶…æ—¶è€Œå¤±è´¥ã€‚é™¤äº†ç”¨ scroll api ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ search_after æ¥åšï¼Œsearch_after çš„æ€æƒ³æ˜¯ä½¿ç”¨å‰ä¸€é¡µçš„ç»“æœæ¥å¸®åŠ©æ£€ç´¢ä¸‹ä¸€é¡µçš„æ•°æ®ï¼Œæ˜¾ç„¶ï¼Œè¿™ç§æ–¹å¼ä¹Ÿä¸å…è®¸ä½ éšæ„ç¿»é¡µï¼Œä½ åªèƒ½ä¸€é¡µé¡µå¾€åç¿»ã€‚åˆå§‹åŒ–æ—¶ï¼Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªå”¯ä¸€å€¼çš„å­—æ®µä½œä¸º sort å­—æ®µã€‚&lt;/p&gt;

&lt;h2&gt;å·å¤–å·å¤–&lt;/h2&gt;

&lt;p&gt;ç»™å¤§å®¶æ•´ç†äº†Javaæœ€æ–°å¤§å‚é¢è¯•é¢˜åŠç­”æ¡ˆï¼Œå¹¶ä¸”æ•´ç†æˆäº†PDFæ ¼å¼æ–¹ä¾¿é˜…è¯»ã€‚ æ¬¢è¿å¤§å®¶å…³æ³¨â€æµ…è°ˆæ¶æ„â€œ å…¬ä¼—å· (åå°ç§ä¿¡â€é¢è¯•â€œå³å¯è·å–)ã€‚å¦å¤–éœ€è¦å¤§å‚å†…æ¨åŒå­¦ä¹Ÿå¯ä»¥ç§ä¿¡æˆ‘ã€‚ &lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://storage.bytearch.com/images/mianshiti.png&quot; alt=&quot;file&quot;/&gt;&lt;/p&gt;
&lt;/div&gt;
  &lt;/div&gt;
  &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>1e9835f450f348d5df6db10c5fab0572</guid>
<title>35å²ç¨‹åºçŒ¿ï¼Œä¹Ÿæ˜¯è¦è¿›é˜¿é‡Œçš„</title>
<link>https://toutiao.io/k/o5xvksj</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¤§å®¶å¥½æˆ‘æ˜¯å°Qï¼Œä»Šå¤©æˆ‘æ¥å’Œå¤§å®¶èŠèŠâ€œ35å²ç¨‹åºå‘˜é‚£äº›äº‹â€ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨ITè¡Œä¸šå…¢å…¢ä¸šä¸šçš„å·¥ä½œäº†10å¹´ï¼Œå°Qæ˜¯éå¸¸äº†è§£è¿™ä¸ªè¡Œä¸šçš„æ½œè§„åˆ™çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æœ€è¿‘å‡ å¹´ï¼Œå°Qæ¯å¹´éƒ½ä¼šé¢è¯•å‡ ç™¾ä¸ªå€™é€‰äººï¼Œå€™é€‰äººçš„èƒ½åŠ›å±‚æ¬¡ä¸é½ï¼Œå…¶ä¸­ï¼Œæœ‰éå¸¸æœ‰æ½œåŠ›çš„95åç¨‹åºå‘˜ï¼Œä¹Ÿæœ‰ç»éªŒéå¸¸ä¸°å¯Œçš„90åç¨‹åºå‘˜ï¼Œå½“ç„¶ä¹Ÿæœ‰å¹´é¾„åå¤§çš„85åç¨‹åºå‘˜ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å°Qæ¥èŠèŠè‡ªå·±çš„ä¸€äº›æ„Ÿæƒ³ï¼Œé¢è¯•è¿™ä¸ªä¸œè¥¿å…¶å®æ˜¯çœ‹çœ¼ç¼˜å’Œèƒ½åŠ›ï¼Œä¸€ä¸ªç»éªŒéå¸¸ä¸°å¯Œçš„é¢è¯•å®˜ï¼Œä»–å‡ ä¹å¯ä»¥ä¸ç”¨å’Œä½ èŠå°±å¤§æ¦‚çŸ¥é“ä½ çš„æŠ€æœ¯èƒ½åŠ›æ˜¯å¦åŒ¹é…HCå²—ä½çš„è¦æ±‚ï¼Œä½†æ˜¯é¢è¯•å®˜ä¸ºä»€ä¹ˆè¿˜è¦é¢è¯•å‘¢ï¼Ÿå…¶å®ä¸»è¦çš„åŸå› è¿˜æ˜¯è¦è€ƒå¯Ÿå€™é€‰äººçš„å¿ƒæ™ºèƒ½åŠ›ï¼Œæ‰€è°“å¿ƒæ™ºèƒ½åŠ›ï¼Œä¸»è¦æ˜¯æŒ‡â€œæ™ºå•†â€å’Œâ€œæƒ…å•†â€çš„ç»„åˆèƒ½åŠ›ï¼Œç”¨ä¸€ä¸ªç®€å•çš„æœ¯è¯­æ¥è§£é‡Šï¼Œå°±æ˜¯çœ‹ä½ æ˜¯å¦â€œè®¨ä»–å–œæ¬¢â€ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æœ‰äººæˆ–è®¸ä¼šè¯´ï¼Œé¢è¯•åˆä¸æ˜¯â€œé€‰ç¾â€ï¼Œæ€ä¹ˆè¿˜è¦â€œè®¨ä»–å–œæ¬¢â€å‘¢ï¼Ÿå’±ä»¬æ¢ä½æ€è€ƒä¸€ä¸‹ï¼Œå¦‚æœä½ æ˜¯é¢è¯•å®˜ï¼ˆç”šè‡³ä½ å°±æ˜¯HCå²—ä½çš„ç›´æ¥ä¸»ç®¡ï¼‰ï¼Œä½ ä¼šæ‹›è˜ä¸€ä¸ªâ€œä¸è®¨ä½ å–œæ¬¢â€çš„äººè¿‡æ¥åšäº‹æƒ…å—ï¼Ÿå“ˆå“ˆï¼Œæˆ‘æƒ³ä½ åº”è¯¥ä¸ä¼šã€‚æ‰€ä»¥å°Qè®¤ä¸ºï¼Œé¢è¯•èƒ½åŠ›æ˜¯ç¡¬å®åŠ›ï¼Œé‚£ä¹ˆâ€œè®¨ä»–å–œæ¬¢â€æ˜¯ç›´æ¥å½±å“é¢è¯•å®˜å†³ç­–çš„â€œæ¶¦æ»‘å‰‚â€ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨â€œè®¨ä»–å–œæ¬¢â€è¿™ä¸ªâ€œæ¶¦æ»‘å‰‚â€ä¸Šï¼Œ35å²ç¨‹åºå‘˜å°¤å…¶æ˜¯è¦æ³¨æ„çš„ï¼Œå¦‚æœä½ æ˜¯æœ¬ç§‘æ¯•ä¸šï¼Œåˆ°äº†35å²ä½ å°±å·²ç»å·¥ä½œè‡³å°‘13å¹´äº†ï¼›å¦‚æœä½ æ˜¯ä¸“ç§‘æ¯•ä¸šï¼Œåˆ°äº†35å²ä½ å°±å·²ç»å·¥ä½œè‡³å°‘15å¹´äº†ï¼›å¦‚æœä½ æ˜¯ç¡•å£«æ¯•ä¸šï¼Œåˆ°äº†35å²ä½ å°±å·²ç»å·¥ä½œè‡³å°‘10å¹´äº†ã€‚å¥½å§ï¼Œä¸€èˆ¬éƒ½äº†è¿™ä¸ªå¹´é¾„ï¼Œé¢è¯•å®˜ä¼šé»˜è®¤ä½ çš„æŠ€æœ¯èƒ½åŠ›æ˜¯è¾¾åˆ°è¦æ±‚çš„ï¼ˆå½“ç„¶å¦‚æœä½ ä¸€ç›´ç”Ÿæ´»åœ¨æŠ€æœ¯èƒ½åŠ›çš„å®‰é€¸åŒºï¼Œè¿™ä¸ªéœ€è¦å¦å½“åˆ«è®ºï¼‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2&gt;&lt;br/&gt;&lt;/h2&gt;&lt;h2&gt;&lt;span&gt;&lt;strong&gt;35å²ç¨‹åºçŒ¿ï¼Œä¹Ÿæ˜¯è¦è¿›é˜¿é‡Œçš„&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å°Qä¹Ÿæ˜¯ä¸€åå¤§é¾„â€œ35å²ç¨‹åºå‘˜â€ï¼Œå°Qèƒ½å¤Ÿæ·±æ·±çš„ä½“ä¼šè¿™ä¸ªå¹´é¾„çš„å°´å°¬ï¼Œå°¤å…¶æ˜¯è¿˜æ²¡æœ‰å®Œå…¨è½¬å‹åˆ°æŠ€æœ¯ç®¡ç†çš„ï¼Œå¹´é¾„ä¼˜åŠ¿å·²ç»ä¸å¤å­˜åœ¨äº†ï¼Œä½†æ˜¯è¿˜è¦å’Œå¹´è½»äººæŠ¢é¥­ç¢—ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é¦–å…ˆï¼Œ35å²ç¨‹åºå‘˜è¦è¿›é˜¿é‡Œéœ€è¦å…·å¤‡â€œ20å²ç¨‹åºå‘˜å½’é›¶çš„æ€ç»´â€ã€‚è¿™ä¸ªè¦æ±‚â€œ35å²ç¨‹åºå‘˜â€å…·å¤‡éšæ—¶é‡æ–°æ¥è¿‡çš„å‹‡æ°”ï¼Œé˜¿é‡Œä¸æ˜¯æœ‰ä¸€ä¸ªéå¸¸é²œæ˜çš„ä»·å€¼è§‚â€œæ±‚å˜â€ï¼Œä¹Ÿå°±æ˜¯è¯´â€œç°æœ‰æˆå°±â€æ˜¯ä½ ç«‹è¶³è¿‡å»å’Œç°åœ¨çš„åŸºçŸ³ï¼Œä½†æ˜¯â€œæ±‚å˜â€æ˜¯ä½ çªç ´è‡ªå·±ï¼Œå¹¶å†³èƒœåƒé‡Œçš„â€œé•¿è¿œè§„åˆ’â€ã€‚åªæœ‰å…·å¤‡äº†å½’é›¶æ€ç»´ï¼Œä½ æ‰ä¼šä¸€ç›´ä¿æŒéå¸¸å¼ºçƒˆçš„â€œå¥½å¥‡å¿ƒâ€ï¼Œå¹¶ä¸€ç›´æŠŠè‡ªå·±å½“åšä¸€ä¸ªå°ç™½ï¼Œè™šå¿ƒçš„æ¥å—åˆ«äººçš„å»ºè®®ï¼Œè¿™æ ·æ‰èƒ½çªç ´â€œ35å²ç¨‹åºå‘˜â€çš„é—¨æ§›ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å…¶æ¬¡ï¼Œ35å²ç¨‹åºå‘˜è¦è¿›é˜¿é‡Œéœ€è¦å…·å¤‡â€œå¯ä»¥è®¤è¯çš„æŠ€æœ¯å“ç‰Œâ€ã€‚è¿™ä¸ªè¦æ±‚â€œ35å²ç¨‹åºå‘˜â€å…·å¤‡é•¿æœŸçš„äººç”Ÿè§„åˆ’èƒ½åŠ›ã€‚ä¸€ä¸ªèƒ½è§„åˆ’è‡ªå·±äººç”Ÿçš„äººï¼Œé‚£ä¹ˆä»–å¤§æ¦‚ç‡ä¼šåœ¨èŒåœºä¸Šæœ€å¤§ç¨‹åº¦çš„å‘æŒ¥ä»–çš„ä»·å€¼ï¼Œä»è€Œæ›´å¥½çš„æœåŠ¡å…¬å¸ï¼Œæ‰€ä»¥é˜¿é‡Œä¸æ˜¯æœ‰ä¸€ä¸ªéå¸¸é²œæ˜çš„ä»·å€¼è§‚â€œåˆ›æ–°â€ã€‚å°Qè§‰å¾—æ‰“é€ ä¸ªäººæŠ€æœ¯å“ç‰ŒçœŸçš„å¾ˆé‡è¦ï¼Œå°¤å…¶æ˜¯æƒ³è·¨è¿‡â€œ35å²ç¨‹åºå‘˜â€é—¨æ§›çš„æŠ€æœ¯äººå‘˜ï¼Œä¸€å®šè¦è·å¾—è‡ªå·±ç‰¹è‰²çš„æŠ€æœ¯å“ç‰Œï¼Œå¹¶æŒä¹‹ä»¥æ’çš„è¾“å‡ºï¼Œè¿™æ ·æ‰èƒ½æ›´å¤§ç¨‹åº¦çš„è®©è‡ªå·±ä¿æŒâ€œ20å²ç¨‹åºå‘˜å½’é›¶çš„æ€ç»´â€ï¼Œä¸æ˜¯æœ‰ä¸€å¥ä¿—è¯ï¼Œå«åšâ€œåç”Ÿå¯ç•â€å—ï¼Ÿè™½ç„¶ä½ çš„å¹´é¾„åˆ°äº†35å²ï¼Œä½ çš„é˜…å†å’Œç»éªŒåˆ°äº†35å²ï¼Œä½†æ˜¯ä½ çš„æ±‚çŸ¥æ¬²ç¡®è¿˜æ˜¯ä¸€ä¸ªâ€œåç”Ÿâ€çš„çŠ¶æ€ï¼Œè¿™æ ·çš„ä½ æ˜¯å¤šä¹ˆçš„ä¼˜ç§€ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æœ€åï¼Œ35å²ç¨‹åºå‘˜è¿›é˜¿é‡Œéœ€è¦å…·å¤‡â€œè¿‡ç¡¬çš„æŠ€æœ¯é©±åŠ¨èƒ½åŠ›â€ã€‚è¿™ä¸ªæ˜¯â€œ35å²ç¨‹åºå‘˜â€æœ€åŸºæœ¬çš„ç¡¬å®åŠ›ï¼Œä¸ç®¡ä½ æ˜¯å“ªä¸ªå¹´é¾„æ®µâ€œæŠ€æœ¯æ‰æ˜¯ç‹é“â€ï¼Œå’±ä»¬ç¥–å›½ä¸æ˜¯ä¸€ç›´åœ¨å®æ–½â€œç§‘æ•™å…´å›½â€å’Œâ€œç§‘æŠ€æ˜¯ç¬¬ä¸€ç”Ÿäº§åŠ›â€çš„Nä¸ªäº”å¹´è®¡åˆ’å—ï¼Ÿé‚£ä¹ˆå¦‚ä½•æé«˜è‡ªå·±â€œè¿‡ç¡¬çš„æŠ€æœ¯é©±åŠ¨èƒ½åŠ›â€å‘¢ï¼Ÿå°Qæ˜¯è¿™æ ·è®¤ä¸ºçš„ï¼Œ35å²ç¨‹åºå‘˜ä¸æ˜¯è¯´ä½ æ‡‚çš„æŠ€æœ¯è¶Šå¤šè¶Šå¥½ï¼Œè€Œæ˜¯è¦å°†è¿™äº›æŠ€æœ¯å½’ç±»ï¼ŒæŒ‰é¢†åŸŸå»é©±åŠ¨è‡ªå·±å»å­¦ä¹ ï¼Œå¹¶èƒ½å­¦ä¼šèä¼šè´¯é€šçš„èƒ½åŠ›ï¼Œæ‰€è°“â€œä¸€æ¡¶ç™¾é€šï¼Œç„•ç„¶å¤§æ‚Ÿâ€æ‰æ˜¯â€œ35å²ç¨‹åºå‘˜â€æœ€åæŠ€æœ¯èƒ½åŠ›çš„ä½“ç°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ€»ç»“ï¼Œ35å²ç¨‹åºå‘˜é™¤äº†å°†è¿‡ç¡¬çš„æŠ€æœ¯é©±åŠ¨èƒ½åŠ›ä½œä¸ºåŸºçŸ³ï¼Œè¿˜è¦å°†å¯ä»¥è®¤è¯çš„æŠ€æœ¯å“ç‰Œä½œä¸ºè‡ªå·±äººç”Ÿçš„é•¿æœŸè§„åˆ’ï¼Œä»¥åŠè¦å…·å¤‡â€œ20å²ç¨‹åºå‘˜å½’é›¶çš„æ€ç»´â€ï¼Œæœ€åè¿˜æ˜¯è¦å…·å¤‡åˆ©ç”¨å’Œä¿æŒâ€œèµ„æºå’Œäººè„‰â€çš„èƒ½åŠ›ï¼Œå› ä¸ºæœ‰äººçš„åœ°æ–¹å°±æœ‰â€œæ±Ÿæ¹–â€ï¼Œæ‰€è°“â€œäººåœ¨æ±Ÿæ¹–ï¼Œç”Ÿä¸ç”±å·±â€ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;35å²ç¨‹åºå‘˜éœ€è¦åˆ·â€œç®—æ³•é¢˜â€å—&lt;/strong&gt;&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç®—æ³•é¢˜æ˜¯å€™é€‰äººé¢è¯•çš„ç¬¬ä¸€å¤§ç—›ç‚¹ï¼Œå°Qè®¤ä¸ºâ€œç®—æ³•â€è¿™ä¸ªä¸œè¥¿ä¸ç”¨åˆ»æ„çš„å»ç ”ç©¶ï¼Œä¸ºç”šä¹ˆå‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é¦–å…ˆï¼Œå°Qè®¤ä¸ºï¼Œæˆ‘ä»¬å­¦ä¹ çš„ç›®çš„æ˜¯ä¸ºäº†â€œç”¨å’Œå®è·µâ€ï¼Œç®—æ³•è¿™ä¸ªä¸œè¥¿åœ¨å’±ä»¬å®é™…çš„é¡¹ç›®ä¸­çœŸçš„æ˜¯æ²¡æœ‰æœºä¼šç”¨ï¼Œå› ä¸ºå¦‚æœä½ çš„é¡¹ç›®ä¸­å¦‚æœçœŸçš„ç”¨åˆ°äº†ç®—æ³•ï¼Œä¹Ÿä¼šé‡‡ç”¨â€œå·¥ä¸šçº§â€çš„ç®—æ³•å¼•æ“æ¥è®¡ç®—ä½ çš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä»äº‹â€œå·¥ä¸šçº§â€ç®—æ³•å¼€å‘çš„ç¨‹åºå‘˜å°±é‚£ä¹ˆä¸€æ³¢äººã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å…¶æ¬¡ï¼Œå°Qè®¤ä¸ºï¼Œ35å²ç¨‹åºå‘˜æ€ä¹ˆå‡†å¤‡ç®—æ³•å‘¢ï¼Ÿå¯ä»¥ä»ä¸­é—´ä»¶ç€æ‰‹ï¼Œæ¯”å¦‚RocketMQã€Spring Cloud Alibabaã€Sentinelã€Nacosä»¥åŠDubboä¸­ç”¨åˆ°äº†é‚£äº›ç®—æ³•å’Œæ•°æ®ç»“æ„ï¼Œå¹¶ä»å…·ä½“çš„æŠ€æœ¯åœºæ™¯ä¸­å»ä½“ä¼šç®—æ³•å’Œæ•°æ®ç»“æ„çš„æ¶æ„æ€æƒ³ã€‚å½“ç„¶è¿™é‡Œå°Qåªæ˜¯ä¸¾ä¸ªä¾‹å­ï¼Œå®é™…ä¸Šè¿˜æ˜¯æœ‰å¾ˆå¤šå…¶å®ƒæŠ€æœ¯æ¡ˆä¾‹çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æœ€åï¼Œå°Qè®¤ä¸ºï¼Œç®—æ³•è¿™ä¸ªä¸œè¥¿æ˜¯â€œ35å²ç¨‹åºå‘˜â€çš„ç¼–ç¨‹åŸºç¡€çš„ä½“ç°ï¼Œå¦‚æœä½ åŸºç¡€ä¸å¥½ï¼Œé‚£ä¹ˆâ€œç®—æ³•â€è‚¯å®šä¸å¥½ï¼Œå¦‚æœä½ â€œç®—æ³•â€ä¸å¥½ï¼Œä½†æ˜¯æ‡‚å¾—å¦‚ä½•åˆ©ç”¨â€œä¸­é—´ä»¶â€å»å®ç°â€œç®—æ³•â€ï¼Œé‚£ä¹Ÿæ˜¯ä¸€ç§èƒ½åŠ›çš„ä½“ç°ã€‚æ‰€ä»¥ï¼Œæœ€åè¿˜æ˜¯è¦å¤¯å®åŸºç¡€ï¼Œä¸è¦çœ¼é«˜æ‰‹ä½ï¼Œåªæœ‰ç†Ÿæ‚‰æŠ€æœ¯ç»†èŠ‚çš„äººï¼Œæ‰ä¼šè§‰å¾—åšæŠ€æœ¯çš„äººå¤ªä¸å®¹æ˜“äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;æ€»ç»“&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æœ¬å…¬ä¼—å·åç»­æ–‡ç« ä¼šç”¨å°½é‡å°‘çš„æ–‡å­—æ¥å¸¦ç€å¤§å®¶æ‹“å±•æ–°çš„æŠ€æœ¯ï¼Œè¨€ç®€æ„èµ…æ˜¯æ–‡ç« çš„ç‰¹è‰²ï¼Œè¦è®©è¯»è€…ä¸èƒ½ç™½è¯»æ–‡ç« ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¬¢è¿ä¹¦å‹ä»¬è®¤çœŸçš„å“è¯»å°Qçš„æŠ€æœ¯å“ç‰Œç³»åˆ—ä¹¦ç±â€œSpring Cloud Alibabaå¾®æœåŠ¡æ¶æ„å®æˆ˜æ´¾ï¼ˆä¸Šä¸‹å†Œï¼‰â€œï¼Œå¤šå¤šç†Ÿæ‚‰æ›´å¤šç‰›é€¼çš„æŠ€æœ¯ã€‚â€35å²ç¨‹åºå‘˜â€œæœ‰ä¸€ä¸ªæ¯”è¾ƒç‰¹è‰²çš„å£å·ï¼Œâ€ä¸è¦è®©æŠ€æœ¯æˆä¸ºä½ è·¨è¶Š35å²é—¨æ§›çš„ç“¶é¢ˆâ€œï¼Œè¦è®©æŠ€æœ¯æˆä¸ºä½ çš„é»„é‡‘åœ£è¡£ï¼Œè¾…åŠ©ä½ é˜²å¾¡æ›´å¤šå¤§Bossçš„ç»„åˆæ‹³ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å°Qä¼šå­œå­œä¸å€¦çš„ç»™å¤§å®¶ä»‹ç»â€œSpring Cloud Alibabaå…¨å®¶æ¡¶æŠ€æœ¯æ ˆâ€ï¼Œä¹¦å‹ä»¬ä¹Ÿè¦æŒä¹‹ä»¥æ’çš„å¤šå¤šå…³æ³¨å°Qã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é¦–å…ˆï¼ŒSpring Cloud Alibabaæ˜¯ä¸€ä¸ªå¾®æœåŠ¡åŸºç¡€æ¡†æ¶ï¼Œå®ƒæœ¬èº«å…·å¤‡ä¸€å®šçš„å¾®æœåŠ¡æ²»ç†çš„èƒ½åŠ›ï¼Œæ¯”å¦‚åˆ†å¸ƒå¼æœåŠ¡æ²»ç†ã€åˆ†å¸ƒå¼é…ç½®æ²»ç†ã€åˆ†å¸ƒå¼æµé‡æ²»ç†ã€åˆ†å¸ƒå¼äº‹åŠ¡ã€åˆ†å¸ƒå¼ç½‘å…³ã€åˆ†å¸ƒå¼æ¶ˆæ¯æ²»ç†ç­‰ã€‚å¦‚æœé¡¹ç›®ç›´æ¥ä½¿ç”¨Spring Cloud Alibabaæä¾›çš„åŠŸèƒ½ï¼Œå®Œå…¨å¯ä»¥æ»¡è¶³ä¸­ç­‰é¡¹ç›®çš„å¾®æœåŠ¡å¼€å‘çš„ä¸šåŠ¡åœºæ™¯ï¼Œå¼€å‘äººå‘˜åªéœ€è¦ç†Ÿæ‚‰Spring Cloud Alibabaå°±å¯ä»¥æˆä¸ºä¸€ä¸ªå¾®æœåŠ¡é¢†åŸŸçš„å¼€å‘ä¸“å®¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å…¶æ¬¡ï¼Œæ—¢ç„¶æ˜¯å¾®æœåŠ¡åŸºç¡€æ¡†æ¶ï¼Œå®ƒè¿˜å¯ä»¥æ‰©å±•è‡ªèº«çš„æ²¡æœ‰çš„å¾®æœåŠ¡æ²»ç†èƒ½åŠ›ï¼Œæ¯”å¦‚Skywalkingã€Discoveryã€ShardingSphereã€DataXç­‰ã€‚Spring Cloud Alibabaæ˜¯åŸºäºSpring Bootçš„æ€æƒ³æ¥è®¾è®¡çš„ï¼ŒSpring Bootåˆæ˜¯åŸºäºSpring Frameworkæ¥è®¾è®¡çš„ï¼Œä¹Ÿå°±æ˜¯è¯´å‡¡æ˜¯Spring Frameworkç”Ÿæ€çš„æŠ€æœ¯æ ˆï¼ŒSpring Cloud Alibabaå‡å¯ä»¥æ‰©å±•ã€‚è¿™æ ·æ— è®ºæ˜¯å¼€æºç¤¾åŒºæä¾›çš„å¾®æœåŠ¡æŠ€æœ¯èƒ½åŠ›ï¼Œè¿˜æ˜¯å…¬å¸è‡ªç ”çš„å¾®æœåŠ¡æŠ€æœ¯èƒ½åŠ›ï¼Œéƒ½å¯ä»¥è¢«Spring Cloud Alibabaå¼•å…¥ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æœ€åï¼ŒSpring Cloud Alibabaæ˜¯Spring Cloudçš„è¶…é›†ï¼Œå®ƒå…·å¤‡Spring Cloudæ•´ä¸ªå¾®æœåŠ¡ç”Ÿæ€ç³»ç»Ÿçš„èƒ½åŠ›ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ€»ç»“ï¼ŒSpring Cloud Alibabaç»å¯¹æ˜¯å¾®æœåŠ¡æ¶æ„é¢†åŸŸçš„å·¨æ— éœ¸ï¼Œé€šè¿‡å®ƒå¼€å‘äººå‘˜å¯ä»¥å¿«é€Ÿçš„æ­å»ºé«˜å¯ç”¨ã€é«˜ç¨³å®šæ€§å’Œé«˜æ€§èƒ½çš„å¾®æœåŠ¡æ¶æ„ã€‚åœ¨æ­å»ºçš„è¿‡ç¨‹ä¸­ï¼Œè¿˜ä¼šé©±åŠ¨å¼€å‘äººå‘˜å»æ‰©å±•Spring Cloud Alibabaè¿˜ä¸æ”¯æŒçš„å¾®æœåŠ¡æŠ€æœ¯ã€‚Spring Cloud Alibabaæ˜¯è®©å¼€å‘äººå‘˜å…¥é—¨å’Œè¿›é˜¶å¾®æœåŠ¡æ¶æ„çš„ä¸€æ­¥åˆ°ä½çš„æœ€ä½³é€‰æ‹©ï¼Œé€šè¿‡å®ƒå¼€å‘äººå‘˜å¯ä»¥å¿«é€Ÿçš„ç†Ÿæ‚‰å¾®æœåŠ¡æ¶æ„çš„å…¨æ ˆæ”¯æ’‘æŠ€æœ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;æœ¬å…¬ä¼—å·æ–‡ç« ï¼Œå…¨éƒ¨æ˜¯è‡ªå·±ä¸€æ‰‹åŸåˆ›çš„ï¼Œå¸Œæœ›æœ‹å‹ä»¬å¤šå¤šå…³æ³¨æœ¬äººçš„å…¬ä¼—å·ã€‚&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>bdf6b3ca7bc21521224d18091067bcff</guid>
<title>ä¼˜è´¨ç½‘ç«™åŒå¥½è€…å‘¨åˆŠï¼ˆç¬¬ 49 æœŸï¼‰- å€¾åŸä¹‹é“¾ - æ‚ ç„¶å®œæƒ³äº­</title>
<link>https://toutiao.io/k/enw1a6g</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;Post-body&quot;&gt;
                    &lt;p&gt;&lt;a href=&quot;https://nicelinks.site/?utm_source=weekly&quot; rel=&quot; nofollow ugc&quot;&gt;å€¾åŸä¹‹é“¾&lt;/a&gt;ä½œä¸ºä¸€ä¸ªå¼€æ”¾å¹³å°ï¼Œæ—¨åœ¨äº‘é›†å…¨çƒ&lt;strong&gt;ä¼˜ç§€ç½‘ç«™&lt;/strong&gt;ï¼Œæ¢ç´¢äº’è”ç½‘ä¸­æ›´å¹¿é˜”çš„ä¸–ç•Œã€‚æ­¤å‘¨åˆŠï¼Œå°†æ±‡èšè¿‡å»ä¸€å‘¨&lt;a href=&quot;https://nicelinks.site/?utm_source=weekly&quot; rel=&quot; nofollow ugc&quot;&gt;å€¾åŸ&lt;/a&gt;æ‰€æ”¶å½•çš„å†…å®¹ï¼Œä»¥é£¨åŒå¥½ï¼›æ¬¢è¿æ¨èæˆ–è‡ªèï¼ˆä»…é™æœ‰ç‹¬ç«‹åŸŸåçš„ç½‘ç«™ï¼Œå¯ä»¥æ˜¯äºŒçº§åŸŸåï¼‰ã€‚æ‚¨å¦‚æœè¦äº†è§£æ”¶å½•è¦æ±‚ï¼Œè¯·å‚è§&lt;a href=&quot;https://nicelinks.site/about?utm_source=weekly&quot; rel=&quot; nofollow ugc&quot;&gt;å…³äºå€¾åŸ&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¤‡æ³¨&lt;/strong&gt;ï¼šæœ¬å‘¨åˆŠ&lt;strong&gt;æ¯å‘¨äº”&lt;/strong&gt;ç”Ÿæˆï¼Œé¦–å‘äºä¸ªäººå¾®ä¿¡å…¬ä¼—å·&lt;a href=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI5MDIwMzM2Mg==&amp;amp;action=getalbum&amp;amp;album_id=1530765143352082433&amp;amp;scene=173&amp;amp;from_msgid=2650641087&amp;amp;from_itemidx=1&amp;amp;count=3#wechat_redirect&quot; rel=&quot; nofollow ugc&quot;&gt;æ™šæ™´å¹½è‰è½©&lt;/a&gt;ã€åšå®¢&lt;a href=&quot;https://www.jeffjade.com&quot; rel=&quot; nofollow ugc&quot;&gt;æ™šæ™´å¹½è‰è½©&lt;/a&gt;ï¼Œä»¥åŠ&lt;a href=&quot;https://forum.lovejade.cn/&quot; rel=&quot; nofollow ugc&quot;&gt;æ‚ ç„¶å®œæƒ³äº­&lt;/a&gt;ç¤¾åŒºï¼›æ­¤ä¸€é”®ç”Ÿæˆè„šæœ¬åŸºäº &lt;a href=&quot;https://nicelinks.site/post/602d30aad099ff5688618591&quot; rel=&quot; nofollow ugc&quot;&gt;Deno&lt;/a&gt; ç¼–å†™ï¼Œå¹¶åœ¨ Github å¼€æºï¼š&lt;a href=&quot;https://github.com/nicejade/nicelinks-weekly&quot; rel=&quot; nofollow ugc&quot;&gt;nicejade/nicelinks-weekly&lt;/a&gt;ã€‚&lt;/p&gt;



&lt;p&gt;&lt;strong&gt;æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/tags/%E7%A4%BE%E5%8C%BA&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;ç¤¾åŒº&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E5%88%86%E4%BA%AB&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;åˆ†äº«&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/Wiki&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;Wiki&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;

&lt;blockquote class=&quot;uncited&quot;&gt;&lt;div&gt;&lt;p&gt;ä¸”å¤«å¤©åœ°ä¹‹é—´ï¼Œç‰©å„æœ‰ä¸»ï¼Œè‹Ÿéå¾ä¹‹æ‰€æœ‰ï¼Œè™½ä¸€æ¯«è€Œè«å–ã€‚æƒŸæ±Ÿä¸Šä¹‹æ¸…é£ï¼Œä¸å±±é—´ä¹‹æ˜æœˆï¼Œè€³å¾—ä¹‹è€Œä¸ºå£°ï¼Œç›®é‡ä¹‹è€Œæˆè‰²ï¼Œå–ä¹‹æ— ç¦ï¼Œç”¨ä¹‹ä¸ç«­ã€‚æ˜¯é€ ç‰©è€…ä¹‹æ— å°½è—ä¹Ÿï¼Œè€Œå¾ä¸å­ä¹‹æ‰€å…±é€‚ã€‚&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/wiki.lovejade.cn.png?x-oss-process=style/png2jpg&quot; title=&quot;&quot; alt=&quot;å€¾åŸä¹‹é“¾ - æ¸…é£æ˜æœˆé˜&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ¨èè¯­&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/redirect?url=https://wiki.lovejade.cn/&quot; rel=&quot; nofollow ugc&quot;&gt;æ¸…é£æ˜æœˆé˜&lt;/a&gt;ï¼ŒåŸºäº &lt;a href=&quot;https://nicelinks.site/post/61a334f7465c2155e2d15886&quot; rel=&quot; nofollow ugc&quot;&gt;Wiki&lt;/a&gt; æ­å»ºçš„ Web åº”ç”¨ï¼Œåå­—å–è‡ªï¼šâ€œæƒŸæ±Ÿä¸Šä¹‹æ¸…é£ï¼Œä¸å±±é—´ä¹‹æ˜æœˆï¼Œè€³å¾—ä¹‹è€Œä¸ºå£°ï¼Œç›®é‡ä¹‹è€Œæˆè‰²â€ã€‚å¹´ä¸æ—¶é©°ï¼Œæ„ä¸å²å»ï¼Œå¿µå…¶åŠŸèƒ½ä¹‹ä¸°ç›ˆï¼Œç‰¹åœ¨æ­¤ï¼šè®°ä½™ä¹‹æ‰€é€ ï¼Œå½•å¾ä¹‹æ‰€é—»ï¼Œäº«æ„šä¹‹æ‰€å­¦ï¼Œè½½æˆ‘ä¹‹éšæ„Ÿ.....äººç”Ÿæ¼«çŸ­ï¼Œç™½é¦–æ—¶å›é¡¾ï¼Œå ªå‡­è¿™äº›è®¸æ–‡å­—ä»¥è‡ªæ€œã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;åˆè¡·&lt;/strong&gt;ï¼šæ—©å…ˆæ­å»ºçš„åä½™ä¸ªç½‘ç«™ï¼Œæœ‰äº›å®å±ä¸ºä½“éªŒã€Œ&lt;a href=&quot;https://nicelinks.site/tags/%E7%BD%91%E7%AB%99%E7%94%9F%E6%88%90%E5%99%A8&quot; rel=&quot; nofollow ugc&quot;&gt;ç½‘ç«™æ„å»ºå·¥å…·&lt;/a&gt;ã€è€Œèµ·ï¼›å²æœˆè¹‰è·ä¸­æŠ˜è…¾å¤šäº†ï¼Œé‚£ç§å…´ä¹‹æ‰€è‡³ã€è¡Œä¹‹æ‰€å¾€çš„å†²åŠ¨ï¼Œæ—©å·²éšå»ï¼›è€Œä»Šï¼Œå´åˆâ€œé‡è¹ˆè¦†è¾™â€ï¼Œå®åœ¨æ˜¯æ„Ÿå¿µ &lt;a href=&quot;https://nicelinks.site/post/61a334f7465c2155e2d15886&quot; rel=&quot; nofollow ugc&quot;&gt;Wiki.js&lt;/a&gt; ä¹‹å¼ºå¤§ï¼Œä¸€æ—¶ä¸ºå…¶è•´è—çš„ã€Œå“²æ€ã€æ‰€ç€è¿·ï¼›ä¸€ç›´ä»¥æ¥å‘¢ï¼Œä¹Ÿåœ¨æ¢ç´¢æ–‡æ¡£ã€Wiki æœ€ä½³æ’°å†™å·¥å…·ï¼›è€Œå‰æ®µæ—¶é—´ï¼Œåˆæ°å·§è´­å¾—äº‘æœåŠ¡å™¨ä¸€å°ï¼›è¿™å¥½å¥‡çš„å¿µå¤´ï¼Œä¸é€‚å®œçš„ç¯å¢ƒï¼Œç»“åˆçš„æ°åˆ°å¥½å¤„ï¼Œäºæ˜¯ï¼Œä¾¿æœ‰äº†&lt;a href=&quot;https://wiki.lovejade.cn/zh/&quot; rel=&quot; nofollow ugc&quot;&gt;â€œæ¸…é£æ˜æœˆé˜â€&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;â”€â”€ å‡ºè‡ª&lt;a href=&quot;https://nicelinks.site/post/61e96fec3bc51624375150aa&quot; rel=&quot; nofollow ugc&quot;&gt;å€¾åŸä¹‹é“¾ - æ¸…é£æ˜æœˆé˜&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;&lt;strong&gt;æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/tags/AI&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;AI&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E5%B7%A5%E5%85%B7&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;å·¥å…·&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E5%8A%A8%E7%94%BB&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;åŠ¨ç”»&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å…³é”®å­—&lt;/strong&gt;ï¼šMotion Capture, 3D Animation, AI Animation, AI Motion Capture, Mocap, Animation Software, Motion Tracking&lt;/p&gt;

&lt;blockquote class=&quot;uncited&quot;&gt;&lt;div&gt;&lt;p&gt;Plask is a browser-based AI motion capture tool and animation editor. With any camera, creators can digitize their movements, automate animation work, collaborate with colleagues, and export them all on one platform.&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/plask.ai.png?x-oss-process=style/png2jpg&quot; title=&quot;&quot; alt=&quot;å€¾åŸä¹‹é“¾ - Plask&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ¨èè¯­&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/redirect?url=https://plask.ai/&quot; rel=&quot; nofollow ugc&quot;&gt;Plask&lt;/a&gt;ï¼Œä¸€æ¬¾åŸºäºæµè§ˆå™¨çš„å…è´¹ AI åŠ¨ä½œæ•æ‰å’ŒåŠ¨ç”»å·¥å…·ã€‚åªéœ€åœ¨ç½‘ç»œæ‘„åƒå¤´ä¸Šå½•åˆ¶è§†é¢‘ã€‚æ™ºèƒ½ AI å°†ä¸ºæ‚¨æ•æ‰åŠ¨ä½œï¼Œè®©åŠ¨ç”»å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚ä½¿ç”¨ &lt;a href=&quot;https://nicelinks.site/redirect?url=https://plask.ai/&quot; rel=&quot; nofollow ugc&quot;&gt;Plask&lt;/a&gt; åŸºäºæµè§ˆå™¨çš„ç¼–è¾‘å·¥å…·ç¼–è¾‘æ‚¨çš„åŠ¨ç”»ï¼Œåªéœ€ä¸€å¤„å³å¯æ‰¾åˆ°æ‰€æœ‰å¿…è¦å·¥å…·ï¼Œè®©æ‚¨çš„åŠ¨ç”»å®Œç¾æ— ç¼ºã€‚&lt;a href=&quot;https://nicelinks.site/redirect?url=https://plask.ai/&quot; rel=&quot; nofollow ugc&quot;&gt;Plask&lt;/a&gt; æ”¯æŒæ‚¨ç›´æ¥åœ¨æµè§ˆå™¨ä¸­å…±äº«ã€æŸ¥çœ‹å’Œåä½œã€‚ä½¿ç”¨ Plask åœ¨æµè§ˆå™¨ä¸­ç®¡ç†æ‚¨çš„æƒ³æ³•å’Œé¡¹ç›®ã€‚æ— è®ºæ‚¨æ˜¯å•ç‹¬å·¥ä½œè¿˜æ˜¯ä¸å›¢é˜Ÿåˆä½œï¼Œå®ƒéƒ½å¯ä»¥æ— ç¼é›†æˆåˆ°æ‚¨çš„å·¥ä½œæµç¨‹ä¸­ã€‚å®ƒæ”¯æŒå¤§å¤šæ•°ä¸“ä¸šæ–‡ä»¶æ ¼å¼ï¼ŒåŒ…æ‹¬ GLBã€FBXã€BVH ç­‰ã€‚æ¯ä¸ªäººçš„åŠ¨ç”»ï¼Œä¸ºæ¯ä¸ªäººæœåŠ¡ï¼Œä½¿ç”¨ &lt;code&gt;Plask&lt;/code&gt;ï¼Œä¸“ä¸šè´¨é‡çš„å·¥å…·å”¾æ‰‹å¯å¾—ï¼&lt;/p&gt;

&lt;p&gt;â”€â”€ å‡ºè‡ª&lt;a href=&quot;https://nicelinks.site/post/61e960713bc51624375150a8&quot; rel=&quot; nofollow ugc&quot;&gt;å€¾åŸä¹‹é“¾ - Plask&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;&lt;strong&gt;æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/tags/SVG&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;SVG&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E5%9B%BE%E7%89%87&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;å›¾ç‰‡&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E8%AE%BE%E8%AE%A1&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;è®¾è®¡&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;

&lt;blockquote class=&quot;uncited&quot;&gt;&lt;div&gt;&lt;p&gt;SVG Wave is a minimal svg wave generator with lot of customization. It lets you abiltiy to generate and export pngs and svgs of beautiful waves. SVG wave also lets you layer multiple waves. Create SVGs for your website designs.&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/svgwave.in.png?x-oss-process=style/png2jpg&quot; title=&quot;&quot; alt=&quot;å€¾åŸä¹‹é“¾ - Svg Wave - A free &amp;amp; beautiful gradient SVG wave Generator.&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ¨èè¯­&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/redirect?url=https://svgwave.in/&quot; rel=&quot; nofollow ugc&quot;&gt;Svg Wave&lt;/a&gt;ï¼Œä¸€ä¸ªå…è´¹ä¸”æ¼‚äº®çš„æ¸å˜ SVG æ³¢å½¢å›¾ç”Ÿæˆå™¨ã€‚å®ƒæ”¯æŒæ‚¨è‡ªç”±çš„å¯¹æ³¢æµª ğŸŒŠ è¿›è¡Œè°ƒæ•´ï¼Œå¦‚æ³¢æµªçš„é«˜åº¦ã€å›¾å±‚æ•°é‡ã€å¼¯æ›²åº¦ï¼Œé¢œè‰²ç­‰ç­‰ï¼Œä¹Ÿæ”¯æŒé‡åˆ¶ã€åè½¬ç­‰æ“ä½œï¼Œä»¥ä¾¿æ‚¨å¯ä»¥ç”Ÿæˆè‡ªå·±æ»¡æ„çš„å›¾å½¢ï¼›é™¤æ­¤å¤–ï¼Œ&lt;a href=&quot;https://nicelinks.site/redirect?url=https://svgwave.in/&quot; rel=&quot; nofollow ugc&quot;&gt;Svg Wave&lt;/a&gt; è¿˜æ”¯æŒç”Ÿæˆæ³¢æµªåŠ¨ç”»ï¼ˆåªé€‚ç”¨äº Chrome æµè§ˆå™¨ï¼‰ï¼›å®ƒå¯ä»¥å¯¼å‡º &lt;code&gt;SVG&lt;/code&gt;ã€&lt;code&gt;PNG&lt;/code&gt; ä¸¤ç§æ ¼å¼ã€‚å¦å¤–å€¼å¾—ä¸€æçš„æ˜¯ï¼Œ&lt;a href=&quot;https://nicelinks.site/redirect?url=https://svgwave.in/&quot; rel=&quot; nofollow ugc&quot;&gt;Svg Wave&lt;/a&gt; è¿™ä¸ªç½‘ç«™è®¾è®¡çš„å¹²å‡€ã€æ¸…çˆ½ï¼Œçœ‹ç€ä»¤äººé¢‡ä¸ºèˆ’é€‚ã€‚&lt;/p&gt;

&lt;p&gt;â”€â”€ å‡ºè‡ª&lt;a href=&quot;https://nicelinks.site/post/61e95a223bc51624375150a6&quot; rel=&quot; nofollow ugc&quot;&gt;å€¾åŸä¹‹é“¾ - Svg Wave - A free &amp;amp; beautiful gradient SVG wave Generator.&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;&lt;strong&gt;æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/tags/%E8%A7%86%E9%A2%91&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;è§†é¢‘&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E7%B4%A0%E6%9D%90&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;ç´ æ&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E8%B5%84%E6%BA%90&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;èµ„æº&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;

&lt;blockquote class=&quot;uncited&quot;&gt;&lt;div&gt;&lt;p&gt;Download Free Stock Video Footage, Stock Music &amp;amp; Premiere Pro Templates for your next video editing project. All assets can be downloaded for free!&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/mixkit.co.png?x-oss-process=style/png2jpg&quot; title=&quot;&quot; alt=&quot;å€¾åŸä¹‹é“¾ - Mixkit - Awesome free assets for your next video project&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ¨èè¯­&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/redirect?url=https://mixkit.co/&quot; rel=&quot; nofollow ugc&quot;&gt;Mixkit&lt;/a&gt;ï¼Œä¸ºæ‚¨çš„ä¸‹ä¸€ä¸ªè§†é¢‘é¡¹ç›®æä¾›å¾ˆæ£’çš„&lt;strong&gt;å…è´¹&lt;/strong&gt;èµ„æºï¼Œå¦‚ï¼šè§†é¢‘å‰ªè¾‘ã€åº“å­˜éŸ³ä¹ï¼ˆ100 å¤šä¸ªå…è´¹çš„ Ambient Stock éŸ³ä¹æ›²ç›®ã€‚ä»æ¢¦å¹»èˆ¬çš„èƒŒæ™¯éŸ³ä¹åˆ°å¤§æ°”ã€éƒéƒè‘±è‘±çš„å™¨ä¹ï¼Œç”¨æˆ‘ä»¬çš„ç¯å¢ƒéŸ³ä¹æ›²ç›®ä¹‹ä¸€è®¾å®šå®Œç¾çš„åŸºè°ƒã€‚ï¼‰ã€å£°éŸ³æ•ˆæœå’Œè§†é¢‘æ¨¡æ¿ã€‚ä»–ä»¬ç²¾å¿ƒç­–åˆ’äº†ä¸€äº›ä¸–ç•Œä¸Šæœ€æœ‰æ‰åçš„åˆ›ä½œè€…çš„å‰ªè¾‘ã€æ›²è°ƒå’Œæ¨¡æ¿ï¼Œæ‰€æœ‰å†…å®¹éƒ½æ˜¯å…è´¹æä¾›çš„ã€‚&lt;a href=&quot;https://nicelinks.site/redirect?url=https://mixkit.co/&quot; rel=&quot; nofollow ugc&quot;&gt;Mixkit&lt;/a&gt; çš„å…è´¹å›¾ä¹¦é¦†æ­£åœ¨å¿«é€Ÿå¢é•¿ï¼Œæ¯å‘¨éƒ½æœ‰æ–°çš„è§†é¢‘èµ„äº§è¢«æ·»åŠ è¿›æ¥ï¼Œä½ æ€»èƒ½æ‰¾åˆ°å®Œç¾çš„é«˜è´¨é‡é¡¹ç›®æ¥ä¸‹è½½ï¼Œå¹¶åœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨ã€‚æ‚¨å¯ä»¥æ ¹æ®éœ€è¦ä¸‹è½½è§†é¢‘ã€å£°éŸ³å’Œæ¨¡æ¿ï¼Œæ— éœ€ç½²åæˆ–æ³¨å†Œã€‚å¦‚æœæ‚¨ä»äº‹æˆ–æœ‰æ„æ„¿ä»äº‹è§†é¢‘ç›¸å…³å†…å®¹åˆ›é€ ï¼Œ&lt;a href=&quot;https://nicelinks.site/redirect?url=https://mixkit.co/&quot; rel=&quot; nofollow ugc&quot;&gt;Mixkit&lt;/a&gt; æ˜¯æ‚¨éå¸¸å€¼å¾—å…³æ³¨çš„ç½‘ç«™ã€‚&lt;/p&gt;

&lt;p&gt;â”€â”€ å‡ºè‡ª&lt;a href=&quot;https://nicelinks.site/post/61e82e723bc516243751509d&quot; rel=&quot; nofollow ugc&quot;&gt;å€¾åŸä¹‹é“¾ - Mixkit - Awesome free assets for your next video project&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;&lt;strong&gt;æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/tags/JavaScript&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;JavaScript&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/Framework&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;Framework&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;è¯„è®ºç³»ç»Ÿ&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;

&lt;blockquote class=&quot;uncited&quot;&gt;&lt;div&gt;&lt;p&gt;ä¸€æ¬¾åŸºäº Valine è¡ç”Ÿçš„ç®€æ´ã€å®‰å…¨çš„è¯„è®ºç³»ç»Ÿã€‚&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/waline.js.org.png?x-oss-process=style/png2jpg&quot; title=&quot;&quot; alt=&quot;å€¾åŸä¹‹é“¾ - Waline | Waline&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ¨èè¯­&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/redirect?url=https://waline.js.org/&quot; rel=&quot; nofollow ugc&quot;&gt;Waline&lt;/a&gt;ï¼Œä¸€æ¬¾åŸºäº Valine è¡ç”Ÿçš„ç®€æ´ã€å®‰å…¨çš„è¯„è®ºç³»ç»Ÿã€‚å¯ä»¥å°† Waline ç­‰ä»·æˆ With backend Valineã€‚å®ƒå…·æœ‰ä»¥ä¸‹åŠŸèƒ½ç‰¹å¾ï¼š&lt;/p&gt;

&lt;ul&gt;&lt;li&gt;&lt;strong&gt;è‡ªç”±è¯„è®º&lt;/strong&gt;ï¼šå®Œå…¨çš„ Markdown æ”¯æŒï¼ŒåŒæ—¶åŒ…å«è¡¨æƒ…ã€æ•°å­¦å…¬å¼ã€HTML åµŒå…¥ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½»é‡&lt;/strong&gt;ï¼š54kB gzip çš„å®Œæ•´å®¢æˆ·ç«¯å¤§å°ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼ºå¤§çš„å®‰å…¨æ€§&lt;/strong&gt;ï¼šå†…å®¹æ ¡éªŒã€é˜²çŒæ°´ã€ä¿æŠ¤æ•æ„Ÿæ•°æ®ç­‰ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç™»å½•æ”¯æŒ&lt;/strong&gt;ï¼šåœ¨å…è®¸åŒ¿åè¯„è®ºçš„åŸºç¡€ä¸Šï¼Œæ”¯æŒè´¦å·æ³¨å†Œï¼Œä¿æŒèº«ä»½ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®Œå…¨å…è´¹éƒ¨ç½²&lt;/strong&gt;ï¼šå¯å…è´¹éƒ¨ç½²åœ¨ Vercel ä¸Šï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜“äºéƒ¨ç½²&lt;/strong&gt;ï¼šå¤šç§éƒ¨ç½²éƒ¨ç½²æ–¹å¼å’Œå­˜å‚¨æœåŠ¡æ”¯æŒã€‚&lt;/li&gt;&lt;/ul&gt;

&lt;p&gt;é™¤äº†ä»¥ä¸Šç‰¹å¾å¤–ï¼Œ&lt;a href=&quot;https://nicelinks.site/redirect?url=https://waline.js.org/&quot; rel=&quot; nofollow ugc&quot;&gt;Waline&lt;/a&gt; å·²ç»å®Œæˆéå¸¸å¤šä¼˜è´¨åŠŸèƒ½ï¼Œè¯¸å¦‚ï¼šé‚®ä»¶ï¼ˆ å¾®ä¿¡ã€ QQã€Telegramï¼‰é€šçŸ¥ï¼Œè¯„è®ºç®¡ç†ã€è¯„è®ºåˆ é™¤ã€ç™»å½•æ”¯æŒã€Akismetã€æ–‡ç« ç»Ÿè®¡ã€å¤šè¯­è¨€åŒæ­¥ã€åŸºäº IP çš„å‘å¸ƒè¯„è®ºé¢‘ç‡é™åˆ¶ã€ IP é»‘åå•ã€ é‡å¤å†…å®¹æ£€æµ‹ã€ç½®é¡¶è¯„è®ºã€å…¶å®ƒæ•°æ®åº“æ”¯æŒï¼ˆå·²æ”¯æŒ LeanCloud, MySQL, MongoDB, SQLite, PostgreSQL, CloudBase, Deta, è½»æœåŠ¡, GitHubï¼‰ç­‰ç­‰ã€‚æœ€å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå®ƒæ”¯æŒ&lt;strong&gt;ç‹¬ç«‹éƒ¨ç½²&lt;/strong&gt;ï¼Œæ‚¨å¯ä»¥åŸºäº &lt;a href=&quot;https://nicelinks.site/post/5b7036890f8719053c094d68&quot; rel=&quot; nofollow ugc&quot;&gt;Docker&lt;/a&gt;ï¼ˆdocker-compose æˆ– Nodeï¼‰ï¼Œéƒ¨ç½²åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šã€‚&lt;/p&gt;

&lt;p&gt;â”€â”€ å‡ºè‡ª&lt;a href=&quot;https://nicelinks.site/post/61e6e0783bc516243751509b&quot; rel=&quot; nofollow ugc&quot;&gt;å€¾åŸä¹‹é“¾ - Waline | Waline&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å¯¹å€¾åŸä¹‹é“¾æ„Ÿå…´è¶£çš„æœ‹å‹ï¼Œå¯é€šè¿‡ Webï¼Œå°ç¨‹åºï¼Œå¿«åº”ç”¨ç­‰æ¸ é“è¿›è¡Œè®¿é—®(åç»­å°†æ”¯æŒæ›´å¤šï¼Œå¦‚ VsCode æ’ä»¶ï¼ŒChrome æ‰©å±•ç­‰)ã€‚æ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿éšæ—¶å‘æˆ‘ä»¬åé¦ˆï¼ˆæ‚¨å¯ä»¥é€šè¿‡å®˜ç½‘åé¦ˆæ¸ é“ï¼Œæˆ–æ·»åŠ å¦‚ä¸‹å®¢æœå¾®ä¿¡ï¼‰ï¼ŒğŸ¤² ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://image.nicelinks.site/%E5%80%BE%E5%9F%8E%E4%B9%8B%E9%93%BE-%E5%BE%AE%E4%BF%A1-mini.jpeg&quot; title=&quot;&quot; alt=&quot;å€¾åŸä¹‹é“¾ - å®¢æœå¾®ä¿¡&quot;/&gt;&lt;/p&gt;

&lt;h2&gt;æœ¬æœŸæ–‡æœ«å¯„è¯­&lt;/h2&gt;

&lt;p&gt;æˆ‘æ›¾ä¸ƒæ¬¡é„™è§†è‡ªå·±çš„çµé­‚ï¼š ç¬¬ä¸€æ¬¡ï¼Œ&lt;strong&gt;å½“å®ƒæœ¬å¯è¿›å–æ—¶ï¼Œå´æ•…ä½œè°¦å‘&lt;/strong&gt;ï¼› ç¬¬äºŒæ¬¡ï¼Œ&lt;strong&gt;å½“å®ƒåœ¨ç©ºè™šæ—¶ï¼Œç”¨çˆ±æ¬²æ¥å¡«å……&lt;/strong&gt;ï¼› ç¬¬ä¸‰æ¬¡ï¼Œ&lt;strong&gt;åœ¨å›°éš¾å’Œå®¹æ˜“ä¹‹é—´ï¼Œå®ƒé€‰æ‹©äº†å®¹æ˜“&lt;/strong&gt;ï¼› ç¬¬å››æ¬¡ï¼Œ&lt;strong&gt;å®ƒçŠ¯äº†é”™ï¼Œå´å€Ÿç”±åˆ«äººä¹Ÿä¼šçŠ¯é”™æ¥å®½æ…°è‡ªå·±&lt;/strong&gt;ï¼› ç¬¬äº”æ¬¡ï¼Œå®ƒè‡ªç”±è½¯å¼±ï¼Œå´æŠŠå®ƒè®¤ä¸ºæ˜¯ç”Ÿå‘½çš„åšéŸ§ï¼› ç¬¬å…­æ¬¡ï¼Œ&lt;strong&gt;å½“å®ƒé„™å¤·ä¸€å¼ ä¸‘æ¶çš„å˜´è„¸æ—¶ï¼Œå´ä¸çŸ¥é‚£æ­£æ˜¯è‡ªå·±é¢å…·ä¸­çš„ä¸€å‰¯&lt;/strong&gt;ï¼› ç¬¬ä¸ƒæ¬¡ï¼Œ&lt;strong&gt;å®ƒä¾§èº«äºç”Ÿæ´»çš„æ±¡æ³¥ä¸­ï¼Œè™½ä¸ç”˜å¿ƒï¼Œå´åˆç•é¦–ç•å°¾&lt;/strong&gt;ã€‚ â”€â”€ é»å·´å«©è£”ç¾å›½è¯—äººã€ç”»å®¶ Â· çºªä¼¯ä¼¦ã€Šæˆ‘æ›¾ä¸ƒæ¬¡é„™è§†è‡ªå·±çš„çµé­‚ã€‹&lt;/p&gt;

&lt;blockquote class=&quot;uncited&quot;&gt;&lt;div&gt;&lt;p&gt;&lt;a href=&quot;https://nicelinks.site/?utm_source=weekly&quot; rel=&quot; nofollow ugc&quot;&gt;å€¾åŸä¹‹é“¾&lt;/a&gt;ä½œä¸ºä¸€ä¸ªå¼€æ”¾å¹³å°ï¼Œæ—¨åœ¨äº‘é›†å…¨çƒ&lt;strong&gt;ä¼˜ç§€ç½‘ç«™&lt;/strong&gt;ï¼Œæ¢ç´¢äº’è”ç½‘ä¸­æ›´å¹¿é˜”çš„ä¸–ç•Œï¼›åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥è½»æ¾å‘ç°ã€å­¦ä¹ ã€åˆ†äº«æ›´å¤šæœ‰ç”¨æˆ–æœ‰è¶£çš„äº‹ç‰©ã€‚&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://image.nicelinks.site/nicelinks-miniprogram-code.jpeg?imageView2/1/w/300/h/300/interlace/1/ignore-error/1&quot; title=&quot;&quot; alt=&quot;å°ç¨‹åºç  - å€¾åŸä¹‹é“¾&quot;/&gt;&lt;/p&gt;

&lt;h3&gt;æ‚¨å¯èƒ½æ„Ÿå…´è¶£çš„æ–‡ç« &lt;/h3&gt;



                &lt;/div&gt;
            &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>0fcfc303178e7a337775d94596e8d502</guid>
<title>è¶…å®ç”¨æ•™ç¨‹ï¼ä¸€æ¢Golangæ€æ ·è·µè¡ŒClean Architectureï¼Ÿ</title>
<link>https://toutiao.io/k/4a3bgsg</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;p class=&quot;original_area_primary&quot;&gt;
                                                                                                &lt;/p&gt;

                    
                                                    


                
                
                
                
                                                
                                                                
                                
                                
                
                &lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;p data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.1&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/VY8SELNGe977Xa5zfy5iaV3agpS11Cqm4psjPOibic6BZSicnBFh6uWzCFp3uqN5R114Fq85DmuCzdL3eESlQ37bFA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¯¼è¯­Â |&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;ç”±äºgolangä¸åƒjavaä¸€æ ·æœ‰ä¸€ä¸ªç»Ÿä¸€çš„ç¼–ç æ¨¡å¼ï¼Œå¹¶ä¸”åœ¨åŒä¸€ä¸ªç»„ä¸­ï¼Œä¸åŒé¡¹ç›®åˆ†åŒ…å¯èƒ½ä¹Ÿä¸å°½ç›¸åŒï¼Œæ‰€ä»¥è¿™ç¯‡æ–‡ç« ä¸»è¦å€Ÿé‰´ä¸€ä¸‹clean architectureæ€æƒ³æ¥å½’çº³ä¸€ä¸‹æˆ‘ç†æƒ³ä¸­é¡¹ç›®åº”è¯¥æ€ä¹ˆè§„èŒƒåˆ†åŒ…ä¸åˆ†å±‚ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;å¼•è¨€&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é‰´äºgolangä¸åƒjavaä¸€æ ·æœ‰ä¸€ä¸ªç»Ÿä¸€çš„ç¼–ç æ¨¡å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å’Œå…¶ä»–å›¢é˜Ÿä¸€æ ·ï¼Œé‡‡ç”¨äº†&lt;/span&gt;&lt;span&gt;Goé¢å‘åŒ…çš„è®¾è®¡å’Œæ¶æ„åˆ†å±‚ä¸­&lt;/span&gt;&lt;span&gt;ä»‹ç»çš„ä¸€äº›ç†è®ºï¼Œç„¶åå†ç»“åˆä»¥å¾€çš„é¡¹ç›®ç»éªŒæ¥è¿›è¡Œåˆ†åŒ…ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”œâ”€â”€ cmd/&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”‚   â””â”€â”€ main.&lt;span class=&quot;code-snippet__keyword&quot;&gt;go&lt;/span&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”œâ”€â”€ etc&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”‚   â””â”€â”€ dev_conf.yaml              &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”œâ”€â”€ global&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”‚   â””â”€â”€ global.&lt;span class=&quot;code-snippet__keyword&quot;&gt;go&lt;/span&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”œâ”€â”€ internal/&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”‚       â””â”€â”€ service/&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”‚           â””â”€â”€ xxx_service.&lt;span class=&quot;code-snippet__keyword&quot;&gt;go&lt;/span&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”‚           â””â”€â”€ xxx_service_test.&lt;span class=&quot;code-snippet__keyword&quot;&gt;go&lt;/span&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”‚       â””â”€â”€ model/&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”‚           â””â”€â”€ xxx_info.&lt;span class=&quot;code-snippet__keyword&quot;&gt;go&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”‚       â””â”€â”€ api/&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”‚           â””â”€â”€ xxx_api.&lt;span class=&quot;code-snippet__keyword&quot;&gt;go&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”‚       â””â”€â”€ router/&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”‚           â””â”€â”€ router.&lt;span class=&quot;code-snippet__keyword&quot;&gt;go&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”‚       â””â”€â”€ pkg/&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”‚           â””â”€â”€ datetool&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;â”‚Â Â Â Â Â Â Â Â Â Â Â â””â”€â”€Â jsontool&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;99138864bfd8cedf2d8d3c5a77767838&quot;&gt;&lt;span&gt;å…¶å®ä¸Šé¢çš„è¿™ä¸ªåˆ’åˆ†åªæ˜¯ç®€å•çš„å°†åŠŸèƒ½åˆ†äº†ä¸€ä¸‹åŒ…ï¼Œåœ¨é¡¹ç›®å®è·µçš„è¿‡ç¨‹ä¸­è¿˜æ˜¯æœ‰å¾ˆå¤šé—®é¢˜ã€‚æ¯”å¦‚ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;86e2842d8fe330c643b7fd990e681b5a&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;86e2842d8fe330c643b7fd990e681b5a&quot;&gt;&lt;span&gt;å¯¹äºåŠŸèƒ½å®ç°æˆ‘æ˜¯é€šè¿‡functionçš„å‚æ•°ä¼ é€’è¿˜æ˜¯é€šè¿‡ç»“æ„ä½“çš„å˜é‡ä¼ é€’ï¼Ÿ&lt;/span&gt;&lt;span&gt;ä½¿ç”¨ä¸€ä¸ªæ•°æ®åº“çš„å…¨å±€å˜é‡å¼•ç”¨ä¼ é€’æ˜¯å¦å®‰å…¨ï¼Ÿ&lt;/span&gt;&lt;span&gt;æ˜¯å¦å­˜åœ¨è¿‡åº¦è€¦åˆï¼Ÿ&lt;/span&gt;&lt;span&gt;åœ¨ä»£ç å®ç°è¿‡ç¨‹ä¸­å‡ ä¹å…¨éƒ¨éƒ½æ˜¯ä¾èµ–äºå®ç°ï¼Œè€Œä¸æ˜¯ä¾èµ–äºæ¥å£ï¼Œé‚£ä¹ˆå°†MySQLåˆ‡æ¢ä¸ºMongDBæ˜¯ä¸æ˜¯è¦ä¿®æ”¹æ‰€æœ‰çš„å®ç°ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;d90b8cb901f69272e23f56afa97fc03b&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;d90b8cb901f69272e23f56afa97fc03b&quot;&gt;&lt;span&gt;æ‰€ä»¥ç°åœ¨åœ¨æˆ‘ä»¬å·¥ä½œä¸­éšç€ä»£ç è¶Šæ¥è¶Šå¤šï¼Œä»£ç ä¸­å„ç§initï¼Œfunctionï¼Œstructï¼Œå…¨å±€å˜é‡æ„Ÿè§‰ä¹Ÿè¶Šæ¥è¶Šä¹±ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;e641b52b9698d34ce9932b432afc8971&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;e641b52b9698d34ce9932b432afc8971&quot;&gt;&lt;span&gt;æ¯ä¸ªæ¨¡å—ä¸ç‹¬ç«‹ï¼Œçœ‹ä¼¼æŒ‰é€»è¾‘åˆ†äº†æ¨¡å—ï¼Œä½†æ²¡æœ‰æ˜ç¡®çš„ä¸Šä¸‹å±‚å…³ç³»ï¼Œæ•°æ®æµçš„æµå‘å’Œé€»è¾‘ä¹Ÿä¸æ˜ç¡®ï¼Œå¾ˆéš¾çœ‹æ¸…ä»£ç è°ƒç”¨æƒ…å†µã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;e3f4eca9446b3600983b89dcac42ac46&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;e3f4eca9446b3600983b89dcac42ac46&quot;&gt;&lt;span&gt;ä¸è¿‡å°±åƒã€Šé‡æ„ã€‹ä¸­æ‰€è¯´ï¼š&lt;/span&gt;&lt;span&gt;&lt;strong&gt;å…ˆè®©ä»£ç å·¥ä½œèµ·æ¥-å¦‚æœä»£ç ä¸èƒ½å·¥ä½œï¼Œå°±ä¸èƒ½äº§ç”Ÿä»·å€¼ï¼›ç„¶åå†è¯•å›¾å°†å®ƒå˜å¥½-é€šè¿‡å¯¹ä»£ç è¿›è¡Œé‡æ„ï¼Œè®©æˆ‘ä»¬è‡ªå·±å’Œå…¶ä»–äººæ›´å¥½åœ°ç†è§£ä»£ç ï¼Œå¹¶èƒ½æŒ‰ç…§éœ€æ±‚ä¸æ–­åœ°ä¿®æ”¹ä»£ç &lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;268dab3b3984121780ba9dc87aab3b90&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;268dab3b3984121780ba9dc87aab3b90&quot;&gt;&lt;span&gt;æ‰€ä»¥æˆ‘è§‰å¾—æ˜¯æ—¶å€™è‡ªæˆ‘æ”¹å˜ä¸€ä¸‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;268dab3b3984121780ba9dc87aab3b90&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;268dab3b3984121780ba9dc87aab3b90&quot;&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;ä¸€ã€The Clean Architecture&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨ç®€æ´æ¶æ„é‡Œé¢å¯¹æˆ‘ä»¬çš„é¡¹ç›®æå‡ºäº†&lt;/span&gt;&lt;span&gt;å‡ ç‚¹è¦æ±‚ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.7344559585492227&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe954kMf12fcrtkLCa6ricGr24FEPzBBp0vibEPen7dBqVcKFEn81OSuUxKicslCAiby8orAAaE59Id6GrQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;772&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;625b2675a4aa047cc13f17b7ff3da999&quot;&gt;&lt;span&gt;ä¸Šå›¾ä¸­åŒå¿ƒåœ†ä»£è¡¨å„ç§ä¸åŒé¢†åŸŸçš„è½¯ä»¶ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œ&lt;/span&gt;&lt;span&gt;&lt;strong&gt;è¶Šæ·±å…¥ä»£è¡¨ä½ çš„è½¯ä»¶å±‚æ¬¡è¶Šé«˜&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;span&gt;&lt;strong&gt;å¤–åœ†æ˜¯æˆ˜æœ¯å®ç°æœºåˆ¶ï¼Œå†…åœ†çš„æ˜¯æˆ˜ç•¥æ ¸å¿ƒç­–ç•¥&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;a4784b3da22d123ff625ff76c2db3a48&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;a4784b3da22d123ff625ff76c2db3a48&quot;&gt;&lt;span&gt;å¯¹äºæˆ‘ä»¬çš„é¡¹ç›®æ¥è¯´ï¼Œä»£ç ä¾èµ–åº”è¯¥ç”±å¤–å‘å†…ï¼Œå•å‘å•å±‚ä¾èµ–ï¼Œè¿™ç§ä¾èµ–åŒ…å«ä»£ç åç§°ï¼Œæˆ–ç±»çš„å‡½æ•°ï¼Œå˜é‡æˆ–ä»»ä½•å…¶ä»–å‘½åè½¯ä»¶å®ä½“ã€‚&lt;strong/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;472b035d9d30b4682f277f6eaeefaea0&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;472b035d9d30b4682f277f6eaeefaea0&quot;&gt;&lt;span&gt;å¯¹äºç®€æ´æ¶æ„æ¥è¯´åˆ†ä¸ºäº†&lt;/span&gt;&lt;span&gt;&lt;strong&gt;å››å±‚&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p data-lines=&quot;1&quot; data-type=&quot;p&quot; data-sign=&quot;05f249907cb9c9326ee85152fff8620a&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;1&quot; data-type=&quot;p&quot; data-sign=&quot;05f249907cb9c9326ee85152fff8620a&quot;&gt;&lt;span&gt;é‚£ä¹ˆå¯¹äºæˆ‘çš„é¡¹ç›®æ¥è¯´ï¼Œå‚è€ƒäº†&lt;/span&gt;&lt;span&gt;trpc-go&lt;/span&gt;&lt;span&gt;çš„ä»£ç åˆ†å±‚ï¼Œå°†æˆ‘çš„é¡¹ç›®ä¹Ÿåˆ†ä¸ºäº†å››å±‚ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.5564516129032258&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe954kMf12fcrtkLCa6ricGr24YbuYfiaKgeIzaAjp4hXQLZicVxnaoz4s1kVT8keNX3K28XrF0AGOgu9Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;h3 data-lines=&quot;1&quot; data-sign=&quot;3acf39c3b75624d47945405a558d1b0b&quot;&gt;&lt;span&gt;&lt;strong&gt;ï¼ˆä¸€ï¼‰models&lt;/strong&gt;&lt;/span&gt;&lt;/h3&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;06cc97ed600eddb1307601f796015f60&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;06cc97ed600eddb1307601f796015f60&quot;&gt;&lt;span&gt;å°è£…äº†å„ç§å®ä½“ç±»å¯¹è±¡ï¼Œä¸æ•°æ®åº“äº¤äº’çš„ã€ä¸UIäº¤äº’çš„ç­‰ç­‰ï¼Œä»»ä½•çš„å®ä½“ç±»éƒ½åº”è¯¥æ”¾åœ¨è¿™é‡Œã€‚å¦‚ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;06cc97ed600eddb1307601f796015f60&quot;&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;time&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;type&lt;/span&gt; Article &lt;span class=&quot;code-snippet__keyword&quot;&gt;struct&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  ID        &lt;span class=&quot;code-snippet__keyword&quot;&gt;int64&lt;/span&gt;     &lt;span class=&quot;code-snippet__string&quot;&gt;`json:&quot;id&quot;`&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  Title     &lt;span class=&quot;code-snippet__keyword&quot;&gt;string&lt;/span&gt;    &lt;span class=&quot;code-snippet__string&quot;&gt;`json:&quot;title&quot;`&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  Content   &lt;span class=&quot;code-snippet__keyword&quot;&gt;string&lt;/span&gt;    &lt;span class=&quot;code-snippet__string&quot;&gt;`json:&quot;content&quot;`&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  UpdatedAt time.Time &lt;span class=&quot;code-snippet__string&quot;&gt;`json:&quot;updated_at&quot;`&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  CreatedAt time.Time &lt;span class=&quot;code-snippet__string&quot;&gt;`json:&quot;created_at&quot;`&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;h3 data-lines=&quot;1&quot; data-sign=&quot;60189a3e6850d14a4aeffa50f71a8cb6&quot;&gt;&lt;span&gt;&lt;strong&gt;ï¼ˆäºŒï¼‰repo&lt;/strong&gt;&lt;/span&gt;&lt;/h3&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;3a3dd1ed619db5004a7e6a7af3e821e3&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;3a3dd1ed619db5004a7e6a7af3e821e3&quot;&gt;&lt;span&gt;è¿™é‡Œå­˜æ”¾çš„æ˜¯æ•°æ®åº“æ“ä½œç±»ï¼Œæ•°æ®åº“CRUDéƒ½åœ¨è¿™é‡Œã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œä¸åŒ…å«ä»»ä½•çš„ä¸šåŠ¡é€»è¾‘ä»£ç ï¼Œå¾ˆå¤šåŒå­¦å–œæ¬¢å°†ä¸šåŠ¡é€»è¾‘ä¹Ÿæ”¾åˆ°è¿™é‡Œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;f085a762de5b8ae3119be2d7f79fd899&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;f085a762de5b8ae3119be2d7f79fd899&quot;&gt;&lt;span&gt;å¦‚æœä½¿ç”¨ORMï¼Œé‚£ä¹ˆè¿™é‡Œæ”¾å…¥çš„ORMæ“ä½œç›¸å…³çš„ä»£ç ï¼›å¦‚æœä½¿ç”¨å¾®æœåŠ¡ï¼Œé‚£ä¹ˆè¿™é‡Œæ”¾çš„æ˜¯å…¶ä»–æœåŠ¡è¯·æ±‚çš„ä»£ç ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;f085a762de5b8ae3119be2d7f79fd899&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;h3 data-lines=&quot;1&quot; data-sign=&quot;b6e6792b538a4767e82ed41d0233aac5&quot;&gt;&lt;span&gt;&lt;strong&gt;ï¼ˆä¸‰ï¼‰service&lt;/strong&gt;&lt;/span&gt;&lt;/h3&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;c252579ebcc819fcc1bd513bb314ed9f&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;c252579ebcc819fcc1bd513bb314ed9f&quot;&gt;&lt;span&gt;è¿™é‡Œæ˜¯ä¸šåŠ¡é€»è¾‘å±‚ï¼Œæ‰€æœ‰çš„ä¸šåŠ¡è¿‡ç¨‹å¤„ç†ä»£ç éƒ½åº”è¯¥æ”¾åœ¨è¿™é‡Œã€‚è¿™ä¸€å±‚ä¼šå†³å®šæ˜¯è¯·æ±‚repoå±‚çš„ä»€ä¹ˆä»£ç ï¼Œæ˜¯æ“ä½œæ•°æ®åº“è¿˜æ˜¯è°ƒç”¨å…¶ä»–æœåŠ¡ï¼›æ‰€æœ‰çš„ä¸šåŠ¡æ•°æ®è®¡ç®—ä¹Ÿåº”è¯¥æ”¾åœ¨è¿™é‡Œï¼›è¿™é‡Œæ¥å—çš„å…¥å‚åº”è¯¥æ˜¯controllerä¼ å…¥çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;c252579ebcc819fcc1bd513bb314ed9f&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;c252579ebcc819fcc1bd513bb314ed9f&quot;&gt;&lt;/p&gt;&lt;h3 data-lines=&quot;1&quot; data-sign=&quot;017b75728cd42c046548fea973d4933e&quot;&gt;&lt;span&gt;&lt;strong&gt;ï¼ˆå››ï¼‰api&lt;/strong&gt;&lt;/span&gt;&lt;/h3&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;cb4def08f56cac33130532b4fb3c41e7&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;cb4def08f56cac33130532b4fb3c41e7&quot;&gt;&lt;span&gt;è¿™é‡Œæ˜¯æ¥æ”¶å¤–éƒ¨è¯·æ±‚çš„ä»£ç ï¼Œå¦‚ï¼šginå¯¹åº”çš„handlerã€gRPCã€å…¶ä»–REST APIæ¡†æ¶æ¥å…¥å±‚ç­‰ç­‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;cb4def08f56cac33130532b4fb3c41e7&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;cb4def08f56cac33130532b4fb3c41e7&quot;&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;äºŒã€é¢å‘æ¥å£ç¼–ç¨‹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;h2 data-lines=&quot;1&quot; data-sign=&quot;0b2d5baf9daf1150f56e7915e55b9b17&quot;&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;26adffbb8cc3ab22afb1827e3b48be3e&quot;&gt;&lt;span&gt;é™¤äº†modelså±‚ï¼Œå±‚ä¸å±‚ä¹‹é—´åº”è¯¥é€šè¿‡æ¥å£äº¤äº’ï¼Œè€Œä¸æ˜¯å®ç°ã€‚&lt;/span&gt;&lt;span&gt;&lt;strong&gt;å¦‚æœè¦ç”¨serviceè°ƒç”¨repoå±‚ï¼Œé‚£ä¹ˆåº”è¯¥è°ƒç”¨repoçš„æ¥å£&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ã€‚é‚£ä¹ˆä¿®æ”¹åº•å±‚å®ç°çš„æ—¶å€™æˆ‘ä»¬ä¸Šå±‚çš„åŸºç±»ä¸éœ€è¦å˜æ›´ï¼Œåªéœ€è¦æ›´æ¢ä¸€ä¸‹åº•å±‚å®ç°å³å¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;c7240c8c4741f67e47423b8c8d887232&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;c7240c8c4741f67e47423b8c8d887232&quot;&gt;&lt;span&gt;ä¾‹å¦‚æˆ‘ä»¬æƒ³è¦å°†æ‰€æœ‰æ–‡ç« æŸ¥è¯¢å‡ºæ¥ï¼Œé‚£ä¹ˆå¯ä»¥åœ¨repoæä¾›è¿™æ ·çš„æ¥å£ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;package&lt;/span&gt; repo&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;import&lt;/span&gt; (&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;context&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;my-clean-rchitecture/models&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;time&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;type&lt;/span&gt; IArticleRepo &lt;span class=&quot;code-snippet__keyword&quot;&gt;interface&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  Fetch(ctx context.Context, createdDate time.Time, num &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt;) (res []models.Article, err error)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™ä¸ªæ¥å£çš„å®ç°ç±»å°±å¯ä»¥æ ¹æ®éœ€æ±‚å˜æ›´ï¼Œæ¯”å¦‚è¯´å½“æˆ‘ä»¬æƒ³è¦mysqlæ¥ä½œä¸ºå­˜å‚¨æŸ¥è¯¢ï¼Œé‚£ä¹ˆåªéœ€è¦æä¾›ä¸€ä¸ªè¿™æ ·çš„åŸºç±»ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;type&lt;/span&gt; mysqlArticleRepository &lt;span class=&quot;code-snippet__keyword&quot;&gt;struct&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  DB *gorm.DB&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;NewMysqlArticleRepository&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(DB *gorm.DB)&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;IArticleRepo&lt;/span&gt;&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; &amp;amp;mysqlArticleRepository{DB}&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__params&quot;&gt;(m *mysqlArticleRepository)&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;Fetch&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(ctx context.Context, createdDate time.Time,&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  num &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt;)&lt;/span&gt; &lt;span class=&quot;code-snippet__params&quot;&gt;(res []models.Article, err error)&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  err = m.DB.WithContext(ctx).Model(&amp;amp;models.Article{}).&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    Select(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;id,title,content, updated_at, created_at&quot;&lt;/span&gt;).&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    Where(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;created_at &amp;gt; ?&quot;&lt;/span&gt;, createdDate).Limit(num).Find(&amp;amp;res).Error&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;4e5f9e740d0ae8ed1007bae27bafaf67&quot;&gt;&lt;span&gt;å¦‚æœæ”¹å¤©æƒ³è¦æ¢æˆMongoDBæ¥å®ç°æˆ‘ä»¬çš„å­˜å‚¨ï¼Œé‚£ä¹ˆåªéœ€è¦å®šä¹‰ä¸€ä¸ªç»“æ„ä½“å®ç°IArticleRepoæ¥å£å³å¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;01f21d325cfa52b0bd4f9b8a2de2aa38&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;01f21d325cfa52b0bd4f9b8a2de2aa38&quot;&gt;&lt;span&gt;é‚£ä¹ˆåœ¨serviceå±‚å®ç°çš„æ—¶å€™å°±å¯ä»¥æŒ‰ç…§æˆ‘ä»¬çš„éœ€æ±‚æ¥å°†å¯¹åº”çš„repoå®ç°æ³¨å…¥å³å¯ï¼Œä»è€Œä¸éœ€è¦æ”¹åŠ¨serviceå±‚çš„å®ç°ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre/&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;type&lt;/span&gt; articleService &lt;span class=&quot;code-snippet__keyword&quot;&gt;struct&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  articleRepo repo.IArticleRepo&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;NewArticleService&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(a repo.IArticleRepo)&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;IArticleService&lt;/span&gt;&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; &amp;amp;articleService{&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    articleRepo: a,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__params&quot;&gt;(a *articleService)&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;Fetch&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(ctx context.Context, createdDate time.Time, num &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt;)&lt;/span&gt; &lt;span class=&quot;code-snippet__params&quot;&gt;(res []models.Article, err error)&lt;/span&gt;&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; num == &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    num = &lt;span class=&quot;code-snippet__number&quot;&gt;10&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  res, err = a.articleRepo.Fetch(ctx, createdDate, num)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;code-snippet__literal&quot;&gt;nil&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-snippet__literal&quot;&gt;nil&lt;/span&gt;, err&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;ä¸‰ã€ä¾èµ–æ³¨å…¥DI&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;836a083fc64895e12f30067a719437e5&quot;&gt;&lt;span&gt;ä¾èµ–æ³¨å…¥ï¼Œè‹±æ–‡ådependency injectionï¼Œç®€ç§°DIã€‚DIä»¥å‰åœ¨javaå·¥ç¨‹é‡Œé¢ç»å¸¸é‡åˆ°ï¼Œä½†æ˜¯åœ¨goé‡Œé¢å¾ˆå¤šäººéƒ½è¯´ä¸éœ€è¦ï¼Œä½†æ˜¯æˆ‘è§‰å¾—åœ¨å¤§å‹è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­è¿˜æ˜¯æœ‰å¿…è¦çš„ï¼Œå¦åˆ™åªèƒ½é€šè¿‡å…¨å±€å˜é‡æˆ–è€…æ–¹æ³•å‚æ•°æ¥è¿›è¡Œä¼ é€’ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;fe90f6d64f3586ebf8fd465c680a90bd&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;fe90f6d64f3586ebf8fd465c680a90bd&quot;&gt;&lt;span&gt;è‡³äºå…·ä½“ä»€ä¹ˆæ˜¯&lt;/span&gt;&lt;span&gt;&lt;strong&gt;DI&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ï¼Œç®€å•æ¥è¯´å°±æ˜¯&lt;/span&gt;&lt;span&gt;&lt;strong&gt;è¢«ä¾èµ–çš„æ¨¡å—&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;ï¼Œåœ¨&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;åˆ›å»ºæ¨¡å—æ—¶ï¼Œè¢«æ³¨å…¥åˆ°ï¼ˆå³å½“ä½œå‚æ•°ä¼ å…¥ï¼‰æ¨¡å—çš„é‡Œé¢&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ã€‚æƒ³è¦æ›´åŠ æ·±å…¥çš„äº†è§£ä»€ä¹ˆæ˜¯DIè¿™é‡Œå†æ¨èä¸€ä¸‹&lt;/span&gt;&lt;span&gt;Dependency injection&lt;/span&gt;&lt;span&gt;å’Œ&lt;/span&gt;&lt;span&gt;Inversion of Control Containers and the Dependency Injection pattern&lt;/span&gt;&lt;span&gt;è¿™ä¸¤ç¯‡æ–‡ç« ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;82f3cde3fa91049d419b63991bf17edb&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;82f3cde3fa91049d419b63991bf17edb&quot;&gt;&lt;span&gt;å¦‚æœä¸ç”¨DIä¸»è¦æœ‰ä¸¤å¤§ä¸æ–¹ä¾¿çš„åœ°æ–¹ï¼Œä¸€ä¸ªæ˜¯åº•å±‚ç±»çš„ä¿®æ”¹éœ€è¦ä¿®æ”¹ä¸Šå±‚ç±»ï¼Œåœ¨å¤§å‹è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­åŸºç±»æ˜¯å¾ˆå¤šçš„ï¼Œä¸€æ¡é“¾è·¯æ”¹ä¸‹æ¥åŠ¨è¾„è¦ä¿®æ”¹å‡ åä¸ªæ–‡ä»¶ï¼›å¦ä¸€æ–¹é¢å°±æ˜¯å°±æ˜¯å±‚ä¸å±‚ä¹‹é—´å•å…ƒæµ‹è¯•ä¸å¤ªæ–¹ä¾¿ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;dafbacddebab5e6d48a75ce959ca9d41&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;dafbacddebab5e6d48a75ce959ca9d41&quot;&gt;&lt;span&gt;å› ä¸ºé‡‡ç”¨äº†ä¾èµ–æ³¨å…¥ï¼Œåœ¨åˆå§‹åŒ–çš„è¿‡ç¨‹ä¸­å°±ä¸å¯é¿å…çš„ä¼šå†™å¤§é‡çš„newï¼Œæ¯”å¦‚æˆ‘ä»¬çš„é¡¹ç›®ä¸­éœ€è¦è¿™æ ·ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;package&lt;/span&gt; main&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;import&lt;/span&gt; (&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;my-clean-rchitecture/api&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;my-clean-rchitecture/api/handlers&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;my-clean-rchitecture/app&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;my-clean-rchitecture/repo&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;my-clean-rchitecture/service&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; { &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  db := app.InitDB() &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  repository := repo.NewMysqlArticleRepository(db)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  articleService := service.NewArticleService(repository)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  handler := handlers.NewArticleHandler(articleService)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  router := api.NewRouter(handler)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  engine := app.NewGinEngine()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  server := app.NewServer(engine, router)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  server.Start()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;2d6321a7fc713fa385f4f58b4eed2786&quot;&gt;&lt;span&gt;é‚£ä¹ˆå¯¹äºè¿™ä¹ˆä¸€æ®µä»£ç ï¼Œæˆ‘ä»¬æœ‰æ²¡æœ‰åŠæ³•ä¸ç”¨è‡ªå·±å†™å‘¢ï¼Ÿè¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥å€ŸåŠ©æ¡†æ¶çš„åŠ›é‡æ¥ç”Ÿæˆæˆ‘ä»¬çš„æ³¨å…¥ä»£ç ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;70b077ce28182035eb095bbe0f553325&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;70b077ce28182035eb095bbe0f553325&quot;&gt;&lt;span&gt;åœ¨goé‡Œé¢DIçš„å·¥å…·ç›¸å¯¹æ¥è¯´æ²¡æœ‰javaè¿™ä¹ˆæ–¹ä¾¿ï¼ŒæŠ€æœ¯æ¡†æ¶ä¸€èˆ¬ä¸»è¦æœ‰ï¼šwireã€digã€fxç­‰ã€‚ç”±äºwireæ˜¯ä½¿ç”¨ä»£ç ç”Ÿæˆæ¥è¿›è¡Œæ³¨å…¥ï¼Œæ€§èƒ½ä¼šæ¯”è¾ƒé«˜ï¼Œå¹¶ä¸”å®ƒæ˜¯googleæ¨å‡ºçš„DIæ¡†æ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œä½¿ç”¨wireè¿›è¡Œæ³¨å…¥ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;689ebf67ad75746035047bf7d667fc90&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;689ebf67ad75746035047bf7d667fc90&quot;&gt;&lt;span&gt;wireçš„è¦æ±‚å¾ˆç®€å•ï¼Œæ–°å»ºä¸€ä¸ªwire.goæ–‡ä»¶ï¼ˆæ–‡ä»¶åå¯ä»¥éšæ„ï¼‰ï¼Œåˆ›å»ºæˆ‘ä»¬çš„åˆå§‹åŒ–å‡½æ•°ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬è¦åˆ›å»ºå¹¶åˆå§‹åŒ–ä¸€ä¸ªserverå¯¹è±¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿™æ ·ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;swift&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;package main&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;import&lt;/span&gt; (&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;github.com/google/wire&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;my-clean-rchitecture/api&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;my-clean-rchitecture/api/handlers&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;my-clean-rchitecture/app&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;my-clean-rchitecture/repo&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;my-clean-rchitecture/service&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;InitServer&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;()&lt;/span&gt;&lt;/span&gt; *app.&lt;span class=&quot;code-snippet__type&quot;&gt;Server&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  wire.&lt;span class=&quot;code-snippet__type&quot;&gt;Build&lt;/span&gt;(&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    app.&lt;span class=&quot;code-snippet__type&quot;&gt;InitDB&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    repo.&lt;span class=&quot;code-snippet__type&quot;&gt;NewMysqlArticleRepository&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    service.&lt;span class=&quot;code-snippet__type&quot;&gt;NewArticleService&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    handlers.&lt;span class=&quot;code-snippet__type&quot;&gt;NewArticleHandler&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    api.&lt;span class=&quot;code-snippet__type&quot;&gt;NewRouter&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    app.&lt;span class=&quot;code-snippet__type&quot;&gt;NewServer&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    app.&lt;span class=&quot;code-snippet__type&quot;&gt;NewGinEngine&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; &amp;amp;app.&lt;span class=&quot;code-snippet__type&quot;&gt;Server&lt;/span&gt;{}&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;09f5eba2114aefcccfb2a1d5d44b6dc2&quot;&gt;&lt;span&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç¬¬ä¸€è¡Œçš„æ³¨è§£ï¼š+build wireinjectï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªæ³¨å…¥å™¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;09f5eba2114aefcccfb2a1d5d44b6dc2&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;433dda338673226f15280885d584e693&quot;&gt;&lt;span&gt;åœ¨å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨wire.Build()å°†åˆ›å»ºServeræ‰€ä¾èµ–çš„ç±»å‹çš„æ„é€ å™¨ä¼ è¿›å»ã€‚å†™å®Œwire.goæ–‡ä»¶ä¹‹åæ‰§è¡Œwireå‘½ä»¤ï¼Œå°±ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªwire_gen.goæ–‡ä»¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;package&lt;/span&gt; main&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;import&lt;/span&gt; (&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;my-clean-rchitecture/api&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;my-clean-rchitecture/api/handlers&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;my-clean-rchitecture/app&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;my-clean-rchitecture/repo&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;my-clean-rchitecture/service&quot;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;InitServer&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;()&lt;/span&gt; *&lt;span class=&quot;code-snippet__title&quot;&gt;app&lt;/span&gt;.&lt;span class=&quot;code-snippet__title&quot;&gt;Server&lt;/span&gt;&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  engine := app.NewGinEngine()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  db := app.InitDB()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  iArticleRepo := repo.NewMysqlArticleRepository(db)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  iArticleService := service.NewArticleService(iArticleRepo)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  articleHandler := handlers.NewArticleHandler(iArticleService)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  router := api.NewRouter(articleHandler)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  server := app.NewServer(engine, router)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; server&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¯ä»¥çœ‹åˆ°wireè‡ªåŠ¨å¸®æˆ‘ä»¬ç”Ÿæˆäº†InitServeræ–¹æ³•ï¼Œæ­¤æ–¹æ³•ä¸­ä¾æ¬¡åˆå§‹åŒ–äº†æ‰€æœ‰è¦åˆå§‹åŒ–çš„åŸºç±»ã€‚ä¹‹ååœ¨æˆ‘ä»¬çš„mainå‡½æ•°ä¸­å°±åªéœ€è°ƒç”¨è¿™ä¸ªInitServerå³å¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;css&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__selector-tag&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__selector-tag&quot;&gt;main&lt;/span&gt;() {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__attribute&quot;&gt;server &lt;/span&gt;:= &lt;span class=&quot;code-snippet__built_in&quot;&gt;InitServer&lt;/span&gt;()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  server.&lt;span class=&quot;code-snippet__built_in&quot;&gt;Start&lt;/span&gt;()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;å››ã€æµ‹è¯•&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;h2 data-lines=&quot;1&quot; data-sign=&quot;201be8a65b8069170f3f773c661fa024&quot;&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;0b2fd1f85f65171fc21066392f559907&quot;&gt;&lt;span&gt;åœ¨ä¸Šé¢æˆ‘ä»¬å®šä¹‰å¥½äº†æ¯ä¸€å±‚åº”è¯¥åšä»€ä¹ˆï¼Œé‚£ä¹ˆå¯¹äºæ¯ä¸€å±‚æˆ‘ä»¬åº”è¯¥éƒ½æ˜¯å¯å•ç‹¬æµ‹è¯•çš„ï¼Œå³ä½¿å¦å¤–ä¸€å±‚ä¸å­˜åœ¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p data-lines=&quot;1&quot; data-type=&quot;p&quot; data-sign=&quot;1ed80d9c07906c63bf6d2cf54fdb4507&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;1&quot; data-type=&quot;p&quot; data-sign=&quot;1ed80d9c07906c63bf6d2cf54fdb4507&quot;&gt;&lt;span&gt;ç”±äºæˆ‘ä»¬æ˜¯é€šè¿‡github.com/golang/mock/gomockæ¥è¿›è¡Œmockï¼Œæ‰€ä»¥éœ€è¦æ‰§è¡Œä¸€ä¸‹ä»£ç ç”Ÿæˆï¼Œç”Ÿæˆçš„mockä»£ç æˆ‘ä»¬æ”¾å…¥åˆ°mockåŒ…ä¸­ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;mockgen -destination .\mock\repo_mock.&lt;span class=&quot;code-snippet__keyword&quot;&gt;go&lt;/span&gt; -source .\repo\repo.&lt;span class=&quot;code-snippet__keyword&quot;&gt;go&lt;/span&gt; -&lt;span class=&quot;code-snippet__keyword&quot;&gt;package&lt;/span&gt; mock&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;mockgen -destination .\mock\service_mock.&lt;span class=&quot;code-snippet__keyword&quot;&gt;go&lt;/span&gt; -source .\service\service.&lt;span class=&quot;code-snippet__keyword&quot;&gt;go&lt;/span&gt; -&lt;span class=&quot;code-snippet__keyword&quot;&gt;package&lt;/span&gt; mock&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p data-lines=&quot;1&quot; data-type=&quot;p&quot; data-sign=&quot;e5d83c1af1fccfd31da19dc8752102bb&quot;&gt;&lt;span&gt;ä¸Šé¢è¿™ä¸¤ä¸ªå‘½ä»¤ä¼šé€šè¿‡æ¥å£å¸®æˆ‘è‡ªåŠ¨ç”Ÿæˆmockå‡½æ•°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;1&quot; data-type=&quot;p&quot; data-sign=&quot;e5d83c1af1fccfd31da19dc8752102bb&quot;&gt;&lt;/p&gt;&lt;h3 data-lines=&quot;1&quot; data-sign=&quot;83bd12c00726d030005d585d7ee65df1&quot;&gt;&lt;span&gt;&lt;strong&gt;ï¼ˆä¸€ï¼‰repoå±‚æµ‹è¯•&lt;/strong&gt;&lt;/span&gt;&lt;/h3&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;95858338fb3665d2c393d3452dc54671&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;95858338fb3665d2c393d3452dc54671&quot;&gt;&lt;span&gt;åœ¨é¡¹ç›®ä¸­ï¼Œç”±äºæˆ‘ä»¬ç”¨äº†gormæ¥ä½œä¸ºæˆ‘ä»¬çš„ormåº“ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨github.com/DATA-DOG/go-sqlmockç»“åˆgormæ¥è¿›è¡Œmockï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;getSqlMock&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;code-snippet__params&quot;&gt;(mock sqlmock.Sqlmock, gormDB *gorm.DB)&lt;/span&gt;&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;var&lt;/span&gt; err error&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;var&lt;/span&gt; db *sql.DB&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  db, mock, err = sqlmock.New(sqlmock.QueryMatcherOption(sqlmock.QueryMatcherEqual))&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;code-snippet__literal&quot;&gt;nil&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__built_in&quot;&gt;panic&lt;/span&gt;(err)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  gormDB, err = gorm.Open(mysql.New(mysql.Config{&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    SkipInitializeWithVersion: &lt;span class=&quot;code-snippet__literal&quot;&gt;true&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    Conn:                      db,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }), &amp;amp;gorm.Config{})&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;code-snippet__literal&quot;&gt;nil&lt;/span&gt; != err {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    log.Fatalf(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;Init DB with sqlmock failed, err %v&quot;&lt;/span&gt;, err)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;Test_mysqlArticleRepository_Fetch&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(t *testing.T)&lt;/span&gt;&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  createAt := time.Now()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  updateAt := time.Now()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;var&lt;/span&gt; articles = []models.Article{&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    {&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;test1&quot;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;content&quot;&lt;/span&gt;, updateAt, createAt},&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    {&lt;span class=&quot;code-snippet__number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;test2&quot;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;content2&quot;&lt;/span&gt;, updateAt, createAt},&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  limit := &lt;span class=&quot;code-snippet__number&quot;&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  mock, db := getSqlMock()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  mock.ExpectQuery(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;SELECT id,title,content, updated_at, created_at FROM `articles` WHERE created_at &amp;gt; ? LIMIT 2&quot;&lt;/span&gt;).&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    WithArgs(createAt).&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    WillReturnRows(sqlmock.NewRows([]&lt;span class=&quot;code-snippet__keyword&quot;&gt;string&lt;/span&gt;{&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;id&quot;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;title&quot;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;content&quot;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;updated_at&quot;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;created_at&quot;&lt;/span&gt;}).&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      AddRow(articles[&lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;].ID, articles[&lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;].Title, articles[&lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;].Content, articles[&lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;].UpdatedAt, articles[&lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;].CreatedAt).&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      AddRow(articles[&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;].ID, articles[&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;].Title, articles[&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;].Content, articles[&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;].UpdatedAt, articles[&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;].CreatedAt))&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  repository := NewMysqlArticleRepository(db)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  result, err := repository.Fetch(context.TODO(), createAt, limit)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  assert.Nil(t, err)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  assert.Equal(t, articles, result)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;h3 data-lines=&quot;1&quot; data-sign=&quot;d6df771e192edc440faee06058bcf2ec&quot;&gt;&lt;span&gt;&lt;strong&gt;ï¼ˆäºŒï¼‰serviceå±‚æµ‹è¯•&lt;/strong&gt;&lt;/span&gt;&lt;/h3&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;5cf314a284b726115b47dd52400f4dcd&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;5cf314a284b726115b47dd52400f4dcd&quot;&gt;&lt;span&gt;è¿™é‡Œä¸»è¦å°±æ˜¯ç”¨æˆ‘ä»¬gomockç”Ÿæˆçš„ä»£ç æ¥mock repoå±‚ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;css&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__selector-tag&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__selector-tag&quot;&gt;Test_articleService_Fetch&lt;/span&gt;(&lt;span class=&quot;code-snippet__selector-tag&quot;&gt;t&lt;/span&gt; *&lt;span class=&quot;code-snippet__selector-tag&quot;&gt;testing&lt;/span&gt;&lt;span class=&quot;code-snippet__selector-class&quot;&gt;.T&lt;/span&gt;) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__attribute&quot;&gt;ctl &lt;/span&gt;:= gomock.&lt;span class=&quot;code-snippet__built_in&quot;&gt;NewController&lt;/span&gt;(t)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  defer ctl.&lt;span class=&quot;code-snippet__built_in&quot;&gt;Finish&lt;/span&gt;()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  now := time.&lt;span class=&quot;code-snippet__built_in&quot;&gt;Now&lt;/span&gt;()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  mockRepo := mock.&lt;span class=&quot;code-snippet__built_in&quot;&gt;NewMockIArticleRepo&lt;/span&gt;(ctl)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  gomock.&lt;span class=&quot;code-snippet__built_in&quot;&gt;InOrder&lt;/span&gt;(&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    mockRepo.EXPECT().&lt;span class=&quot;code-snippet__built_in&quot;&gt;Fetch&lt;/span&gt;(context.TODO(), now, &lt;span class=&quot;code-snippet__number&quot;&gt;10&lt;/span&gt;).&lt;span class=&quot;code-snippet__built_in&quot;&gt;Return&lt;/span&gt;(nil, nil),&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  )&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  service := &lt;span class=&quot;code-snippet__built_in&quot;&gt;NewArticleService&lt;/span&gt;(mockRepo)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  fetch, _ := service.&lt;span class=&quot;code-snippet__built_in&quot;&gt;Fetch&lt;/span&gt;(context.TODO(), now, &lt;span class=&quot;code-snippet__number&quot;&gt;10&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  fmt.&lt;span class=&quot;code-snippet__built_in&quot;&gt;Println&lt;/span&gt;(fetch)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;h3 data-lines=&quot;1&quot; data-sign=&quot;39b83e364f86c400c7453010b5029128&quot;&gt;&lt;span&gt;&lt;strong&gt;ï¼ˆä¸‰ï¼‰apiå±‚æµ‹è¯•&lt;/strong&gt;&lt;/span&gt;&lt;/h3&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;6f3f5a8464a73c567109b22115dc1ee7&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;6f3f5a8464a73c567109b22115dc1ee7&quot;&gt;&lt;span&gt;å¯¹äºè¿™ä¸€å±‚ï¼Œæˆ‘ä»¬ä¸ä»…è¦mock serviceå±‚ï¼Œè¿˜éœ€è¦å‘é€httptestæ¥æ¨¡æ‹Ÿè¯·æ±‚å‘é€ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;go&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;TestArticleHandler_FetchArticle&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(t *testing.T)&lt;/span&gt;&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  ctl := gomock.NewController(t)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;defer&lt;/span&gt; ctl.Finish()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  createAt, _ := time.Parse(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;2006-01-02&quot;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;2021-12-26&quot;&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  mockService := mock.NewMockIArticleService(ctl)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  gomock.InOrder(&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    mockService.EXPECT().Fetch(gomock.Any(), createAt, &lt;span class=&quot;code-snippet__number&quot;&gt;10&lt;/span&gt;).Return(&lt;span class=&quot;code-snippet__literal&quot;&gt;nil&lt;/span&gt;, &lt;span class=&quot;code-snippet__literal&quot;&gt;nil&lt;/span&gt;),&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  )&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  article := NewArticleHandler(mockService)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  gin.SetMode(gin.TestMode)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  r := gin.Default()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  r.GET(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;/articles&quot;&lt;/span&gt;, article.FetchArticle)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  req, err := http.NewRequest(http.MethodGet, &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;/articles?num=10&amp;amp;create_date=2021-12-26&quot;&lt;/span&gt;, &lt;span class=&quot;code-snippet__literal&quot;&gt;nil&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; err != &lt;span class=&quot;code-snippet__literal&quot;&gt;nil&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    t.Fatalf(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;Couldn&#x27;t create request: %v\n&quot;&lt;/span&gt;, err)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  w := httptest.NewRecorder()&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  r.ServeHTTP(w, req)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; w.Code != http.StatusOK {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    t.Fatalf(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;Expected to get status %d but instead got %d\n&quot;&lt;/span&gt;, http.StatusOK, w.Code)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;äº”ã€æ€»ç»“&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;9305dd9f632630c16fc56ba9a7a54e16&quot;&gt;&lt;span&gt;ä»¥ä¸Šå°±æ˜¯æˆ‘å¯¹golangçš„é¡¹ç›®ä¸­å‘ç°é—®é¢˜çš„ä¸€ç‚¹ç‚¹æ€»ç»“ä¸æ€è€ƒï¼Œæ€è€ƒçš„å…ˆä¸ç®¡å¯¹ä¸å¯¹ï¼Œæ€»å½’æ˜¯è§£å†³äº†æˆ‘ä»¬å½“ä¸‹çš„ä¸€äº›é—®é¢˜ã€‚ä¸è¿‡ï¼Œé¡¹ç›®æ€»å½’æ˜¯éœ€è¦ä¸æ–­é‡æ„å®Œå–„çš„ï¼Œæ‰€ä»¥ä¸‹æ¬¡æœ‰é—®é¢˜çš„æ—¶å€™ä¸‹æ¬¡å†æ”¹å‘—ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;25f3aea7e8f60952cc14039b790e0e8b&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;25f3aea7e8f60952cc14039b790e0e8b&quot;&gt;&lt;span&gt;å¯¹äºæˆ‘ä¸Šé¢çš„æ€»ç»“å’Œæè¿°æ„Ÿè§‰æœ‰ä¸å¯¹çš„åœ°æ–¹ï¼Œè¯·éšæ—¶æŒ‡å‡ºæ¥ä¸€èµ·è®¨è®ºã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;dca4608149a8e9389911c7fd0308d2fc&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;dca4608149a8e9389911c7fd0308d2fc&quot;&gt;&lt;span&gt;é¡¹ç›®ä»£ç ä½ç½®ï¼š&lt;/span&gt;&lt;span&gt;https://github.com/devYun/go-clean-architecture&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;dca4608149a8e9389911c7fd0308d2fc&quot;&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;dca4608149a8e9389911c7fd0308d2fc&quot;&gt;&lt;strong&gt;å‚è€ƒèµ„æ–™ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;dca4608149a8e9389911c7fd0308d2fc&quot;&gt;&lt;span&gt;1.The Clean Architecture&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;dca4608149a8e9389911c7fd0308d2fc&quot;&gt;&lt;span&gt;2.bxcodec&lt;/span&gt;&lt;span&gt;/go-clean-arch&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;dca4608149a8e9389911c7fd0308d2fc&quot;&gt;&lt;span&gt;3.Trying Clean Architecture on Golang&lt;/span&gt;&lt;/p&gt;&lt;p data-lines=&quot;2&quot; data-type=&quot;p&quot; data-sign=&quot;dca4608149a8e9389911c7fd0308d2fc&quot;&gt;&lt;span&gt;4.ç†è§£ä¸€ä¸‹ä¾èµ–æ³¨å…¥ï¼Œä»¥åŠå¦‚ä½•ç”¨wire&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;Â ä½œè€…ç®€ä»‹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;105&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;107&quot; data-fileid=&quot;100044396&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/VY8SELNGe954kMf12fcrtkLCa6ricGr24n5P6ciacmQhd6Bb7d7ZWKc0ia7s6b3XZ82ERK6Lic07SfEBwTuicUILPnQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;500&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;ç½—å¿—èµŸ&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;è…¾è®¯åå°å¼€å‘å·¥ç¨‹å¸ˆ&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;è…¾è®¯åå°å¼€å‘å·¥ç¨‹å¸ˆï¼Œè´Ÿè´£IEGæ¸¸æˆæ¨èç›¸å…³åç«¯ä¸šåŠ¡ï¼Œæ·±å…¥ç ”ç©¶è¿‡GoÂ runtimeç›¸å…³ä»£ç ï¼Œå–œæ¬¢ä¸“ç ”æŠ€æœ¯ç»†èŠ‚ï¼Œæ¢ç´¢æŠ€æœ¯ä¸­æœ‰è¶£çš„å®è·µåˆ†äº«ç»™å¤§å®¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-template=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot; mpa-is-content=&quot;t&quot;&gt;Â æ¨èé˜…è¯»&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI2NDU4OTExOQ==&amp;amp;mid=2247532481&amp;amp;idx=1&amp;amp;sn=acd788f649593e2e06a9fd355aa37a52&amp;amp;chksm=eaa86591dddfec871a95fde6f16db61e96e40094794140953f0ddea62480b333e0f67f9d920e&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œ6ç§æ–¹æ¡ˆï¼Œä¿è¯ç¼“å­˜å’Œæ•°æ®åº“çš„æœ€ç»ˆä¸€è‡´æ€§ï¼&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œ6ç§æ–¹æ¡ˆï¼Œä¿è¯ç¼“å­˜å’Œæ•°æ®åº“çš„æœ€ç»ˆä¸€è‡´æ€§ï¼&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI2NDU4OTExOQ==&amp;amp;mid=2247532357&amp;amp;idx=1&amp;amp;sn=84088fd7cc97b36a2d93986591b3a41c&amp;amp;chksm=eaa86515dddfec0388340a6132315dedfa82ee1dcb4f4b4e2d057ad4f297c286eb468f0e4f7a&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;é¢ è¦†Kafkaçš„ç»Ÿæ²»ï¼Œæ–°ä¸€ä»£äº‘åŸç”Ÿæ¶ˆæ¯ç³»ç»ŸPulsaréœ‡æ’¼æ¥è¢­ï¼&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;&lt;span&gt;é¢ è¦†Kafkaçš„ç»Ÿæ²»ï¼Œæ–°ä¸€ä»£äº‘åŸç”Ÿæ¶ˆæ¯ç³»ç»ŸPulsaréœ‡æ’¼æ¥è¢­ï¼&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI2NDU4OTExOQ==&amp;amp;mid=2247532240&amp;amp;idx=1&amp;amp;sn=bb7e1b07f9eef04f074bd32305a7d9f1&amp;amp;chksm=eaa86480dddfed968078a46456d86586cb78ab6a91ea8e28f36c5a09c5a5e1c72eaca804b235&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ä¸ƒå¹´æ¿€è¡ï¼Serverlessçš„ä¸‹ä¸€ç«™å°†å»å¾€ä½•æ–¹ï¼Ÿ&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;11&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;&lt;span&gt;ä¸ƒå¹´æ¿€è¡ï¼Serverlessçš„ä¸‹ä¸€ç«™å°†å»å¾€ä½•æ–¹ï¼Ÿ&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI2NDU4OTExOQ==&amp;amp;mid=2247532236&amp;amp;idx=1&amp;amp;sn=98558d0331d44be6b9385e8b40aa957c&amp;amp;chksm=eaa8649cdddfed8a278d3fe8e6975982d6b34f7e0127af85c505c96d6a86c2f461d43e71c901&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;åŸºäºæµè®¡ç®—Oceanuså’ŒElasticsearch Serviceæ„å»ºç™¾äº¿çº§å®æ—¶ç›‘æ§ç³»ç»Ÿ&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;11&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;&lt;span&gt;åŸºäºæµè®¡ç®—Oceanuså’ŒElasticsearch Serviceæ„å»ºç™¾äº¿çº§å®æ—¶ç›‘æ§ç³»ç»Ÿ&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzI2NDU4OTExOQ==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/VY8SELNGe96FK2eEg86vUicOR3n6kAHk1PHvTb8VBicYk0RmNQYsQyibgg8iaZqT0bCEU9VKo3Z3iceoQfgycyMpKWQ/0?wx_fmt=png&quot; data-nickname=&quot;äº‘åŠ ç¤¾åŒº&quot; data-alias=&quot;QcloudCommunity&quot; data-signature=&quot;è…¾è®¯äº‘å®˜æ–¹ç¤¾åŒºå…¬ä¼—å·ï¼Œæ±‡èšæŠ€æœ¯å¼€å‘è€…ç¾¤ä½“ï¼Œåˆ†äº«æŠ€æœ¯å¹²è´§ï¼Œæ‰“é€ æŠ€æœ¯å½±å“åŠ›äº¤æµç¤¾åŒºã€‚&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.59375&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/VY8SELNGe977Xa5zfy5iaV3agpS11Cqm4xV7ckfbmtFLyUjFID2k7yO4q8hvB4OqYoNkARZ2xuvzKvMtnmVN2BQ/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;640&quot;/&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>58d02a2fb19a797ca1e5ce3464a65bf5</guid>
<title>èŠèŠNettyé‚£äº›äº‹å„¿ä¹‹ä»å†…æ ¸è§’åº¦çœ‹IOæ¨¡å‹</title>
<link>https://toutiao.io/k/kn9asp3</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»Šå¤©æˆ‘ä»¬æ¥èŠèŠNettyçš„é‚£äº›äº‹å„¿ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“Nettyæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½å¼‚æ­¥äº‹ä»¶é©±åŠ¨çš„ç½‘ç»œæ¡†æ¶ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ƒçš„è®¾è®¡å¼‚å¸¸ä¼˜é›…ç®€æ´ï¼Œæ‰©å±•æ€§é«˜ï¼Œç¨³å®šæ€§å¼ºã€‚æ‹¥æœ‰éå¸¸è¯¦ç»†å®Œæ•´çš„ç”¨æˆ·æ–‡æ¡£ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŒæ—¶å†…ç½®äº†å¾ˆå¤šéå¸¸æœ‰ç”¨çš„æ¨¡å—åŸºæœ¬ä¸Šåšåˆ°äº†å¼€ç®±å³ç”¨ï¼Œç”¨æˆ·åªéœ€è¦ç¼–å†™çŸ­çŸ­å‡ è¡Œä»£ç ï¼Œå°±å¯ä»¥å¿«é€Ÿæ„å»ºå‡ºä¸€ä¸ªå…·æœ‰&lt;code&gt;é«˜åå&lt;/code&gt;ï¼Œ&lt;code&gt;ä½å»¶æ—¶&lt;/code&gt;ï¼Œ&lt;code&gt;æ›´å°‘çš„èµ„æºæ¶ˆè€—&lt;/code&gt;ï¼Œ&lt;code&gt;é«˜æ€§èƒ½ï¼ˆéå¿…è¦çš„å†…å­˜æ‹·è´æœ€å°åŒ–ï¼‰&lt;/code&gt;ç­‰ç‰¹å¾çš„é«˜å¹¶å‘ç½‘ç»œåº”ç”¨ç¨‹åºã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬æ–‡æˆ‘ä»¬æ¥æ¢è®¨ä¸‹æ”¯æŒNettyå…·æœ‰&lt;code&gt;é«˜åå&lt;/code&gt;ï¼Œ&lt;code&gt;ä½å»¶æ—¶&lt;/code&gt;ç‰¹å¾çš„åŸºçŸ³----nettyçš„&lt;code&gt;ç½‘ç»œIOæ¨¡å‹&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±Nettyçš„&lt;code&gt;ç½‘ç»œIOæ¨¡å‹&lt;/code&gt;å¼€å§‹ï¼Œæˆ‘ä»¬æ¥æ­£å¼æ­å¼€æœ¬ç³»åˆ—Nettyæºç è§£æçš„åºå¹•ï¼š&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç½‘ç»œåŒ…æ¥æ”¶æµç¨‹&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8943548387096775&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEAVqTQC2CLFPicUHhicvVfVnFGUOEwWI1ueTic9xAtwibD0iaGVmSMxkuJcA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;figcaption&gt;ç½‘ç»œåŒ…æ”¶å‘è¿‡ç¨‹.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å½“&lt;code&gt;ç½‘ç»œæ•°æ®å¸§&lt;/code&gt;é€šè¿‡ç½‘ç»œä¼ è¾“åˆ°è¾¾ç½‘å¡æ—¶ï¼Œç½‘å¡ä¼šå°†ç½‘ç»œæ•°æ®å¸§é€šè¿‡&lt;code&gt;DMAçš„æ–¹å¼&lt;/code&gt;æ”¾åˆ°&lt;code&gt;ç¯å½¢ç¼“å†²åŒºRingBuffer&lt;/code&gt;ä¸­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;code&gt;RingBuffer&lt;/code&gt;æ˜¯ç½‘å¡åœ¨å¯åŠ¨çš„æ—¶å€™&lt;code&gt;åˆ†é…å’Œåˆå§‹åŒ–&lt;/code&gt;çš„&lt;code&gt;ç¯å½¢ç¼“å†²é˜Ÿåˆ—&lt;/code&gt;ã€‚å½“&lt;code&gt;RingBufferæ»¡&lt;/code&gt;çš„æ—¶å€™ï¼Œæ–°æ¥çš„æ•°æ®åŒ…å°±ä¼šè¢«&lt;code&gt;ä¸¢å¼ƒ&lt;/code&gt;ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡&lt;code&gt;ifconfig&lt;/code&gt;å‘½ä»¤æŸ¥çœ‹ç½‘å¡æ”¶å‘æ•°æ®åŒ…çš„æƒ…å†µã€‚å…¶ä¸­&lt;code&gt;overruns&lt;/code&gt;æ•°æ®é¡¹è¡¨ç¤ºå½“&lt;code&gt;RingBufferæ»¡&lt;/code&gt;æ—¶ï¼Œè¢«&lt;code&gt;ä¸¢å¼ƒçš„æ•°æ®åŒ…&lt;/code&gt;ã€‚å¦‚æœå‘ç°å‡ºç°ä¸¢åŒ…æƒ…å†µï¼Œå¯ä»¥é€šè¿‡&lt;code&gt;ethtoolå‘½ä»¤&lt;/code&gt;æ¥å¢å¤§RingBufferé•¿åº¦ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å½“&lt;code&gt;DMAæ“ä½œå®Œæˆ&lt;/code&gt;æ—¶ï¼Œç½‘å¡ä¼šå‘CPUå‘èµ·ä¸€ä¸ª&lt;code&gt;ç¡¬ä¸­æ–­&lt;/code&gt;ï¼Œå‘Šè¯‰&lt;code&gt;CPU&lt;/code&gt;æœ‰ç½‘ç»œæ•°æ®åˆ°è¾¾ã€‚CPUè°ƒç”¨ç½‘å¡é©±åŠ¨æ³¨å†Œçš„&lt;code&gt;ç¡¬ä¸­æ–­å“åº”ç¨‹åº&lt;/code&gt;ã€‚ç½‘å¡ç¡¬ä¸­æ–­å“åº”ç¨‹åºä¼šä¸ºç½‘ç»œæ•°æ®å¸§åˆ›å»ºå†…æ ¸æ•°æ®ç»“æ„&lt;code&gt;sk_buffer&lt;/code&gt;ï¼Œå¹¶å°†ç½‘ç»œæ•°æ®å¸§&lt;code&gt;æ‹·è´&lt;/code&gt;åˆ°&lt;code&gt;sk_buffer&lt;/code&gt;ä¸­ã€‚ç„¶åå‘èµ·&lt;code&gt;è½¯ä¸­æ–­è¯·æ±‚&lt;/code&gt;ï¼Œé€šçŸ¥&lt;code&gt;å†…æ ¸&lt;/code&gt;æœ‰æ–°çš„ç½‘ç»œæ•°æ®å¸§åˆ°è¾¾ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;code&gt;sk_buff&lt;/code&gt;ç¼“å†²åŒºï¼Œæ˜¯ä¸€ä¸ªç»´æŠ¤ç½‘ç»œå¸§ç»“æ„çš„&lt;code&gt;åŒå‘é“¾è¡¨&lt;/code&gt;ï¼Œé“¾è¡¨ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ª&lt;code&gt;ç½‘ç»œå¸§&lt;/code&gt;ã€‚è™½ç„¶ TCP/IP åè®®æ ˆåˆ†äº†å¥½å‡ å±‚ï¼Œä½†ä¸Šä¸‹ä¸åŒå±‚ä¹‹é—´çš„ä¼ é€’ï¼Œå®é™…ä¸Šåªéœ€è¦æ“ä½œè¿™ä¸ªæ•°æ®ç»“æ„ä¸­çš„æŒ‡é’ˆï¼Œè€Œ&lt;code&gt;æ— éœ€è¿›è¡Œæ•°æ®å¤åˆ¶&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å†…æ ¸çº¿ç¨‹&lt;code&gt;ksoftirqd&lt;/code&gt;å‘ç°æœ‰è½¯ä¸­æ–­è¯·æ±‚åˆ°æ¥ï¼Œéšåè°ƒç”¨ç½‘å¡é©±åŠ¨æ³¨å†Œçš„&lt;code&gt;pollå‡½æ•°&lt;/code&gt;ï¼Œ&lt;code&gt;pollå‡½æ•°&lt;/code&gt;å°†&lt;code&gt;sk_buffer&lt;/code&gt;ä¸­çš„&lt;code&gt;ç½‘ç»œæ•°æ®åŒ…&lt;/code&gt;é€åˆ°å†…æ ¸åè®®æ ˆä¸­æ³¨å†Œçš„&lt;code&gt;ip_rcvå‡½æ•°&lt;/code&gt;ä¸­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;code&gt;æ¯ä¸ªCPU&lt;/code&gt;ä¼šç»‘å®š&lt;code&gt;ä¸€ä¸ªksoftirqd&lt;/code&gt;å†…æ ¸çº¿ç¨‹&lt;code&gt;ä¸“é—¨&lt;/code&gt;ç”¨æ¥å¤„ç†&lt;code&gt;è½¯ä¸­æ–­å“åº”&lt;/code&gt;ã€‚2ä¸ª CPU æ—¶ï¼Œå°±ä¼šæœ‰ &lt;code&gt;ksoftirqd/0&lt;/code&gt; å’Œ &lt;code&gt;ksoftirqd/1&lt;/code&gt;è¿™ä¸¤ä¸ªå†…æ ¸çº¿ç¨‹ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;strong&gt;è¿™é‡Œæœ‰ä¸ªäº‹æƒ…éœ€è¦æ³¨æ„ä¸‹ï¼š&lt;/strong&gt; ç½‘å¡æ¥æ”¶åˆ°æ•°æ®åï¼Œå½“&lt;code&gt;DMAæ‹·è´å®Œæˆ&lt;/code&gt;æ—¶ï¼Œå‘CPUå‘å‡º&lt;code&gt;ç¡¬ä¸­æ–­&lt;/code&gt;ï¼Œè¿™æ—¶&lt;code&gt;å“ªä¸ªCPU&lt;/code&gt;ä¸Šå“åº”äº†è¿™ä¸ª&lt;code&gt;ç¡¬ä¸­æ–­&lt;/code&gt;ï¼Œé‚£ä¹ˆåœ¨ç½‘å¡&lt;code&gt;ç¡¬ä¸­æ–­å“åº”ç¨‹åº&lt;/code&gt;ä¸­å‘å‡ºçš„&lt;code&gt;è½¯ä¸­æ–­è¯·æ±‚&lt;/code&gt;ä¹Ÿä¼šåœ¨&lt;code&gt;è¿™ä¸ªCPUç»‘å®šçš„ksoftirqdçº¿ç¨‹&lt;/code&gt;ä¸­å“åº”ã€‚æ‰€ä»¥å¦‚æœå‘ç°Linuxè½¯ä¸­æ–­ï¼ŒCPUæ¶ˆè€—éƒ½&lt;code&gt;é›†ä¸­åœ¨ä¸€ä¸ªæ ¸ä¸Š&lt;/code&gt;çš„è¯ï¼Œé‚£ä¹ˆå°±éœ€è¦è°ƒæ•´ç¡¬ä¸­æ–­çš„&lt;code&gt;CPUäº²å’Œæ€§&lt;/code&gt;ï¼Œæ¥å°†ç¡¬ä¸­æ–­&lt;code&gt;æ‰“æ•£&lt;/code&gt;åˆ°&lt;code&gt;ä¸é€šçš„CPUæ ¸&lt;/code&gt;ä¸Šå»ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;åœ¨&lt;code&gt;ip_rcvå‡½æ•°&lt;/code&gt;ä¸­ä¹Ÿå°±æ˜¯ä¸Šå›¾ä¸­çš„&lt;code&gt;ç½‘ç»œå±‚&lt;/code&gt;ï¼Œ&lt;code&gt;å–å‡º&lt;/code&gt;æ•°æ®åŒ…çš„&lt;code&gt;IPå¤´&lt;/code&gt;ï¼Œåˆ¤æ–­è¯¥æ•°æ®åŒ…ä¸‹ä¸€è·³çš„èµ°å‘ï¼Œå¦‚æœæ•°æ®åŒ…æ˜¯å‘é€ç»™æœ¬æœºçš„ï¼Œåˆ™å–å‡ºä¼ è¾“å±‚çš„åè®®ç±»å‹ï¼ˆ&lt;code&gt;TCP&lt;/code&gt;æˆ–è€…&lt;code&gt;UDP&lt;/code&gt;)ï¼Œå¹¶&lt;code&gt;å»æ‰&lt;/code&gt;æ•°æ®åŒ…çš„&lt;code&gt;IPå¤´&lt;/code&gt;ï¼Œå°†æ•°æ®åŒ…äº¤ç»™ä¸Šå›¾ä¸­å¾—&lt;code&gt;ä¼ è¾“å±‚&lt;/code&gt;å¤„ç†ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ä¼ è¾“å±‚çš„å¤„ç†å‡½æ•°ï¼š&lt;code&gt;TCPåè®®&lt;/code&gt;å¯¹åº”å†…æ ¸åè®®æ ˆä¸­æ³¨å†Œçš„&lt;code&gt;tcp_rcvå‡½æ•°&lt;/code&gt;ï¼Œ&lt;code&gt;UDPåè®®&lt;/code&gt;å¯¹åº”å†…æ ¸åè®®æ ˆä¸­æ³¨å†Œçš„&lt;code&gt;udp_rcvå‡½æ•°&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å½“æˆ‘ä»¬é‡‡ç”¨çš„æ˜¯&lt;code&gt;TCPåè®®&lt;/code&gt;æ—¶ï¼Œæ•°æ®åŒ…åˆ°è¾¾ä¼ è¾“å±‚æ—¶ï¼Œä¼šåœ¨å†…æ ¸åè®®æ ˆä¸­çš„&lt;code&gt;tcp_rcvå‡½æ•°&lt;/code&gt;å¤„ç†ï¼Œåœ¨tcp_rcvå‡½æ•°ä¸­&lt;code&gt;å»æ‰&lt;/code&gt;TCPå¤´ï¼Œæ ¹æ®&lt;code&gt;å››å…ƒç»„ï¼ˆæºIPï¼Œæºç«¯å£ï¼Œç›®çš„IPï¼Œç›®çš„ç«¯å£ï¼‰&lt;/code&gt;æŸ¥æ‰¾&lt;code&gt;å¯¹åº”çš„Socket&lt;/code&gt;ï¼Œå¦‚æœæ‰¾åˆ°å¯¹åº”çš„Socketåˆ™å°†ç½‘ç»œæ•°æ®åŒ…ä¸­çš„ä¼ è¾“æ•°æ®æ‹·è´åˆ°&lt;code&gt;Socket&lt;/code&gt;ä¸­çš„&lt;code&gt;æ¥æ”¶ç¼“å†²åŒº&lt;/code&gt;ä¸­ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™å‘é€ä¸€ä¸ª&lt;code&gt;ç›®æ ‡ä¸å¯è¾¾&lt;/code&gt;çš„&lt;code&gt;icmp&lt;/code&gt;åŒ…ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å†…æ ¸åœ¨æ¥æ”¶ç½‘ç»œæ•°æ®åŒ…æ—¶æ‰€åšçš„å·¥ä½œæˆ‘ä»¬å°±ä»‹ç»å®Œäº†ï¼Œç°åœ¨æˆ‘ä»¬æŠŠè§†è§’æ”¾åˆ°åº”ç”¨å±‚ï¼Œå½“æˆ‘ä»¬ç¨‹åºé€šè¿‡ç³»ç»Ÿè°ƒç”¨&lt;code&gt;read&lt;/code&gt;è¯»å–&lt;code&gt;Socketæ¥æ”¶ç¼“å†²åŒº&lt;/code&gt;ä¸­çš„æ•°æ®æ—¶ï¼Œå¦‚æœæ¥æ”¶ç¼“å†²åŒºä¸­&lt;code&gt;æ²¡æœ‰æ•°æ®&lt;/code&gt;ï¼Œé‚£ä¹ˆåº”ç”¨ç¨‹åºå°±ä¼šåœ¨ç³»ç»Ÿè°ƒç”¨ä¸Š&lt;code&gt;é˜»å¡&lt;/code&gt;ï¼Œç›´åˆ°Socketæ¥æ”¶ç¼“å†²åŒº&lt;code&gt;æœ‰æ•°æ®&lt;/code&gt;ï¼Œç„¶å&lt;code&gt;CPU&lt;/code&gt;å°†&lt;code&gt;å†…æ ¸ç©ºé—´&lt;/code&gt;ï¼ˆSocketæ¥æ”¶ç¼“å†²åŒºï¼‰çš„æ•°æ®&lt;code&gt;æ‹·è´&lt;/code&gt;åˆ°&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;ï¼Œæœ€åç³»ç»Ÿè°ƒç”¨&lt;code&gt;readè¿”å›&lt;/code&gt;ï¼Œåº”ç”¨ç¨‹åº&lt;code&gt;è¯»å–&lt;/code&gt;æ•°æ®ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ€§èƒ½å¼€é”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»å†…æ ¸å¤„ç†ç½‘ç»œæ•°æ®åŒ…æ¥æ”¶çš„æ•´ä¸ªè¿‡ç¨‹æ¥çœ‹ï¼Œå†…æ ¸å¸®æˆ‘ä»¬åšäº†éå¸¸ä¹‹å¤šçš„å·¥ä½œï¼Œæœ€ç»ˆæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ‰èƒ½è¯»å–åˆ°ç½‘ç»œæ•°æ®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;éšç€è€Œæ¥çš„ä¹Ÿå¸¦æ¥äº†å¾ˆå¤šçš„æ€§èƒ½å¼€é”€ï¼Œç»“åˆå‰é¢ä»‹ç»çš„ç½‘ç»œæ•°æ®åŒ…æ¥æ”¶è¿‡ç¨‹æˆ‘ä»¬æ¥çœ‹ä¸‹ç½‘ç»œæ•°æ®åŒ…æ¥æ”¶çš„è¿‡ç¨‹ä¸­éƒ½æœ‰å“ªäº›æ€§èƒ½å¼€é”€ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;åº”ç”¨ç¨‹åºé€šè¿‡&lt;code&gt;ç³»ç»Ÿè°ƒç”¨&lt;/code&gt;ä»&lt;code&gt;ç”¨æˆ·æ€&lt;/code&gt;è½¬ä¸º&lt;code&gt;å†…æ ¸æ€&lt;/code&gt;çš„å¼€é”€ä»¥åŠç³»ç»Ÿè°ƒç”¨&lt;code&gt;è¿”å›&lt;/code&gt;æ—¶ä»&lt;code&gt;å†…æ ¸æ€&lt;/code&gt;è½¬ä¸º&lt;code&gt;ç”¨æˆ·æ€&lt;/code&gt;çš„å¼€é”€ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç½‘ç»œæ•°æ®ä»&lt;code&gt;å†…æ ¸ç©ºé—´&lt;/code&gt;é€šè¿‡&lt;code&gt;CPUæ‹·è´&lt;/code&gt;åˆ°&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;çš„å¼€é”€ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å†…æ ¸çº¿ç¨‹&lt;code&gt;ksoftirqd&lt;/code&gt;å“åº”&lt;code&gt;è½¯ä¸­æ–­&lt;/code&gt;çš„å¼€é”€ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;CPU&lt;/code&gt;å“åº”&lt;code&gt;ç¡¬ä¸­æ–­&lt;/code&gt;çš„å¼€é”€ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;DMAæ‹·è´&lt;/code&gt;ç½‘ç»œæ•°æ®åŒ…åˆ°&lt;code&gt;å†…å­˜&lt;/code&gt;ä¸­çš„å¼€é”€ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç½‘ç»œåŒ…å‘é€æµç¨‹&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.117741935483871&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEUK82351HYuWhJCicKvej94Cico9gLw6PJFPQBzmSibCplZAJXLoTz9O7w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;figcaption&gt;ç½‘ç»œåŒ…å‘é€è¿‡ç¨‹.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å½“æˆ‘ä»¬åœ¨åº”ç”¨ç¨‹åºä¸­è°ƒç”¨&lt;code&gt;send&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨å‘é€æ•°æ®æ—¶ï¼Œç”±äºæ˜¯ç³»ç»Ÿè°ƒç”¨æ‰€ä»¥çº¿ç¨‹ä¼šå‘ç”Ÿä¸€æ¬¡ç”¨æˆ·æ€åˆ°å†…æ ¸æ€çš„è½¬æ¢ï¼Œåœ¨å†…æ ¸ä¸­é¦–å…ˆæ ¹æ®&lt;code&gt;fd&lt;/code&gt;å°†çœŸæ­£çš„Socketæ‰¾å‡ºï¼Œè¿™ä¸ªSocketå¯¹è±¡ä¸­è®°å½•ç€å„ç§åè®®æ ˆçš„å‡½æ•°åœ°å€ï¼Œç„¶åæ„é€ &lt;code&gt;struct msghdr&lt;/code&gt;å¯¹è±¡ï¼Œå°†ç”¨æˆ·éœ€è¦å‘é€çš„æ•°æ®å…¨éƒ¨å°è£…åœ¨è¿™ä¸ª&lt;code&gt;struct msghdr&lt;/code&gt;ç»“æ„ä½“ä¸­ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;è°ƒç”¨å†…æ ¸åè®®æ ˆå‡½æ•°&lt;code&gt;inet_sendmsg&lt;/code&gt;ï¼Œå‘é€æµç¨‹è¿›å…¥å†…æ ¸åè®®æ ˆå¤„ç†ã€‚åœ¨è¿›å…¥åˆ°å†…æ ¸åè®®æ ˆä¹‹åï¼Œå†…æ ¸ä¼šæ‰¾åˆ°Socketä¸Šçš„å…·ä½“åè®®çš„å‘é€å‡½æ•°ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;æ¯”å¦‚ï¼šæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯&lt;code&gt;TCPåè®®&lt;/code&gt;ï¼Œå¯¹åº”çš„&lt;code&gt;TCPåè®®&lt;/code&gt;å‘é€å‡½æ•°æ˜¯&lt;code&gt;tcp_sendmsg&lt;/code&gt;ï¼Œå¦‚æœæ˜¯&lt;code&gt;UDPåè®®&lt;/code&gt;çš„è¯ï¼Œå¯¹åº”çš„å‘é€å‡½æ•°ä¸º&lt;code&gt;udp_sendmsg&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;åœ¨&lt;code&gt;TCPåè®®&lt;/code&gt;çš„å‘é€å‡½æ•°&lt;code&gt;tcp_sendmsg&lt;/code&gt;ä¸­ï¼Œåˆ›å»ºå†…æ ¸æ•°æ®ç»“æ„&lt;code&gt;sk_buffer&lt;/code&gt;,å°†&lt;code&gt;struct msghdr&lt;/code&gt;ç»“æ„ä½“ä¸­çš„å‘é€æ•°æ®&lt;code&gt;æ‹·è´&lt;/code&gt;åˆ°&lt;code&gt;sk_buffer&lt;/code&gt;ä¸­ã€‚è°ƒç”¨&lt;code&gt;tcp_write_queue_tail&lt;/code&gt;å‡½æ•°è·å–&lt;code&gt;Socket&lt;/code&gt;å‘é€é˜Ÿåˆ—ä¸­çš„é˜Ÿå°¾å…ƒç´ ï¼Œå°†æ–°åˆ›å»ºçš„&lt;code&gt;sk_buffer&lt;/code&gt;æ·»åŠ åˆ°&lt;code&gt;Socket&lt;/code&gt;å‘é€é˜Ÿåˆ—çš„å°¾éƒ¨ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;code&gt;Socket&lt;/code&gt;çš„å‘é€é˜Ÿåˆ—æ˜¯ç”±&lt;code&gt;sk_buffer&lt;/code&gt;ç»„æˆçš„ä¸€ä¸ª&lt;code&gt;åŒå‘é“¾è¡¨&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å‘é€æµç¨‹èµ°åˆ°è¿™é‡Œï¼Œç”¨æˆ·è¦å‘é€çš„æ•°æ®æ€»ç®—æ˜¯ä»&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;æ‹·è´åˆ°äº†&lt;code&gt;å†…æ ¸&lt;/code&gt;ä¸­ï¼Œè¿™æ—¶è™½ç„¶å‘é€æ•°æ®å·²ç»&lt;code&gt;æ‹·è´&lt;/code&gt;åˆ°äº†å†…æ ¸&lt;code&gt;Socket&lt;/code&gt;ä¸­çš„&lt;code&gt;å‘é€é˜Ÿåˆ—&lt;/code&gt;ä¸­ï¼Œä½†å¹¶ä¸ä»£è¡¨å†…æ ¸ä¼šå¼€å§‹å‘é€ï¼Œå› ä¸º&lt;code&gt;TCPåè®®&lt;/code&gt;çš„&lt;code&gt;æµé‡æ§åˆ¶&lt;/code&gt;å’Œ&lt;code&gt;æ‹¥å¡æ§åˆ¶&lt;/code&gt;ï¼Œç”¨æˆ·è¦å‘é€çš„æ•°æ®åŒ…&lt;code&gt;å¹¶ä¸ä¸€å®š&lt;/code&gt;ä¼šç«‹é©¬è¢«å‘é€å‡ºå»ï¼Œéœ€è¦ç¬¦åˆ&lt;code&gt;TCPåè®®&lt;/code&gt;çš„å‘é€æ¡ä»¶ã€‚å¦‚æœ&lt;code&gt;æ²¡æœ‰è¾¾åˆ°å‘é€æ¡ä»¶&lt;/code&gt;ï¼Œé‚£ä¹ˆæœ¬æ¬¡&lt;code&gt;send&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨å°±ä¼šç›´æ¥è¿”å›ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å¦‚æœç¬¦åˆå‘é€æ¡ä»¶ï¼Œåˆ™å¼€å§‹è°ƒç”¨&lt;code&gt;tcp_write_xmit&lt;/code&gt;å†…æ ¸å‡½æ•°ã€‚åœ¨è¿™ä¸ªå‡½æ•°ä¸­ï¼Œä¼šå¾ªç¯è·å–&lt;code&gt;Socket&lt;/code&gt;å‘é€é˜Ÿåˆ—ä¸­å¾…å‘é€çš„&lt;code&gt;sk_buffer&lt;/code&gt;ï¼Œç„¶åè¿›è¡Œ&lt;code&gt;æ‹¥å¡æ§åˆ¶&lt;/code&gt;ä»¥åŠ&lt;code&gt;æ»‘åŠ¨çª—å£çš„ç®¡ç†&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å°†ä»&lt;code&gt;Socket&lt;/code&gt;å‘é€é˜Ÿåˆ—ä¸­è·å–åˆ°çš„&lt;code&gt;sk_buffer&lt;/code&gt;é‡æ–°&lt;code&gt;æ‹·è´ä¸€ä»½&lt;/code&gt;ï¼Œè®¾ç½®&lt;code&gt;sk_bufferå‰¯æœ¬&lt;/code&gt;ä¸­çš„&lt;code&gt;TCP HEADER&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;code&gt;sk_buffer&lt;/code&gt; å†…éƒ¨å…¶å®åŒ…å«äº†ç½‘ç»œåè®®ä¸­æ‰€æœ‰çš„ &lt;code&gt;header&lt;/code&gt;ã€‚åœ¨è®¾ç½® &lt;code&gt;TCP HEADER&lt;/code&gt;çš„æ—¶å€™ï¼Œåªæ˜¯æŠŠæŒ‡é’ˆæŒ‡å‘ &lt;code&gt;sk_buffer&lt;/code&gt;çš„åˆé€‚ä½ç½®ã€‚åé¢å†è®¾ç½® &lt;code&gt;IP HEADER&lt;/code&gt;çš„æ—¶å€™ï¼Œåœ¨æŠŠæŒ‡é’ˆç§»åŠ¨ä¸€ä¸‹å°±è¡Œï¼Œé¿å…é¢‘ç¹çš„å†…å­˜ç”³è¯·å’Œæ‹·è´ï¼Œæ•ˆç‡å¾ˆé«˜ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4112903225806452&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEpYMIdLl6Jch1BmZ4hwRpDHIXJIhmKibfPeEib9Y8SDx2YzXibkVWkic3Yg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;figcaption&gt;sk_buffer.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨&lt;code&gt;Socket&lt;/code&gt;å‘é€é˜Ÿåˆ—ä¸­çš„&lt;code&gt;sk_buffer&lt;/code&gt;è€Œæ˜¯éœ€è¦æ‹·è´ä¸€ä»½å‘¢ï¼Ÿ&lt;/strong&gt;å› ä¸º&lt;code&gt;TCPåè®®&lt;/code&gt;æ˜¯æ”¯æŒ&lt;code&gt;ä¸¢åŒ…é‡ä¼ &lt;/code&gt;çš„ï¼Œåœ¨æ²¡æœ‰æ”¶åˆ°å¯¹ç«¯çš„&lt;code&gt;ACK&lt;/code&gt;ä¹‹å‰ï¼Œè¿™ä¸ª&lt;code&gt;sk_buffer&lt;/code&gt;æ˜¯ä¸èƒ½åˆ é™¤çš„ã€‚å†…æ ¸æ¯æ¬¡è°ƒç”¨ç½‘å¡å‘é€æ•°æ®çš„æ—¶å€™ï¼Œå®é™…ä¸Šä¼ é€’çš„æ˜¯&lt;code&gt;sk_buffer&lt;/code&gt;çš„&lt;code&gt;æ‹·è´å‰¯æœ¬&lt;/code&gt;ï¼Œå½“ç½‘å¡æŠŠæ•°æ®å‘é€å‡ºå»åï¼Œ&lt;code&gt;sk_buffer&lt;/code&gt;æ‹·è´å‰¯æœ¬ä¼šè¢«é‡Šæ”¾ã€‚å½“æ”¶åˆ°å¯¹ç«¯çš„&lt;code&gt;ACK&lt;/code&gt;ä¹‹åï¼Œ&lt;code&gt;Socket&lt;/code&gt;å‘é€é˜Ÿåˆ—ä¸­çš„&lt;code&gt;sk_buffer&lt;/code&gt;æ‰ä¼šè¢«çœŸæ­£åˆ é™¤ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å½“è®¾ç½®å®Œ&lt;code&gt;TCPå¤´&lt;/code&gt;åï¼Œå†…æ ¸åè®®æ ˆ&lt;code&gt;ä¼ è¾“å±‚&lt;/code&gt;çš„äº‹æƒ…å°±åšå®Œäº†ï¼Œä¸‹é¢é€šè¿‡è°ƒç”¨&lt;code&gt;ip_queue_xmit&lt;/code&gt;å†…æ ¸å‡½æ•°ï¼Œæ­£å¼æ¥åˆ°å†…æ ¸åè®®æ ˆ&lt;code&gt;ç½‘ç»œå±‚&lt;/code&gt;çš„å¤„ç†ã€‚&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;é€šè¿‡&lt;code&gt;route&lt;/code&gt;å‘½ä»¤å¯ä»¥æŸ¥çœ‹æœ¬æœºè·¯ç”±é…ç½®ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote&gt;&lt;p&gt;å¦‚æœä½ ä½¿ç”¨ &lt;code&gt;iptables&lt;/code&gt;é…ç½®äº†ä¸€äº›è§„åˆ™ï¼Œé‚£ä¹ˆè¿™é‡Œå°†æ£€æµ‹&lt;code&gt;æ˜¯å¦å‘½ä¸­&lt;/code&gt;è§„åˆ™ã€‚å¦‚æœä½ è®¾ç½®äº†éå¸¸&lt;code&gt;å¤æ‚çš„ netfilter è§„åˆ™&lt;/code&gt;ï¼Œåœ¨è¿™ä¸ªå‡½æ•°é‡Œå°†ä¼šå¯¼è‡´ä½ çš„çº¿ç¨‹ &lt;code&gt;CPU å¼€é”€&lt;/code&gt;ä¼š&lt;code&gt;æå¤§å¢åŠ &lt;/code&gt;ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å°†&lt;code&gt;sk_buffer&lt;/code&gt;ä¸­çš„æŒ‡é’ˆç§»åŠ¨åˆ°&lt;code&gt;IPå¤´&lt;/code&gt;ä½ç½®ä¸Šï¼Œè®¾ç½®&lt;code&gt;IPå¤´&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;æ‰§è¡Œ&lt;code&gt;netfilters&lt;/code&gt;è¿‡æ»¤ã€‚è¿‡æ»¤é€šè¿‡ä¹‹åï¼Œå¦‚æœæ•°æ®å¤§äº &lt;code&gt;MTU&lt;/code&gt;çš„è¯ï¼Œåˆ™æ‰§è¡Œåˆ†ç‰‡ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ£€æŸ¥&lt;code&gt;Socket&lt;/code&gt;ä¸­æ˜¯å¦æœ‰ç¼“å­˜è·¯ç”±è¡¨ï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œåˆ™æŸ¥æ‰¾è·¯ç”±é¡¹ï¼Œå¹¶ç¼“å­˜åˆ°&lt;code&gt;Socket&lt;/code&gt;ä¸­ã€‚æ¥ç€åœ¨æŠŠè·¯ç”±è¡¨è®¾ç½®åˆ°&lt;code&gt;sk_buffer&lt;/code&gt;ä¸­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å†…æ ¸åè®®æ ˆ&lt;code&gt;ç½‘ç»œå±‚&lt;/code&gt;çš„äº‹æƒ…å¤„ç†å®Œåï¼Œç°åœ¨å‘é€æµç¨‹è¿›å…¥äº†åˆ°äº†&lt;code&gt;é‚»å±…å­ç³»ç»Ÿ&lt;/code&gt;ï¼Œ&lt;code&gt;é‚»å±…å­ç³»ç»Ÿ&lt;/code&gt;ä½äºå†…æ ¸åè®®æ ˆä¸­çš„&lt;code&gt;ç½‘ç»œå±‚&lt;/code&gt;å’Œ&lt;code&gt;ç½‘ç»œæ¥å£å±‚&lt;/code&gt;ä¹‹é—´ï¼Œç”¨äºå‘é€&lt;code&gt;ARPè¯·æ±‚&lt;/code&gt;è·å–&lt;code&gt;MACåœ°å€&lt;/code&gt;ï¼Œç„¶åå°†&lt;code&gt;sk_buffer&lt;/code&gt;ä¸­çš„æŒ‡é’ˆç§»åŠ¨åˆ°&lt;code&gt;MACå¤´&lt;/code&gt;ä½ç½®ï¼Œå¡«å……&lt;code&gt;MACå¤´&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ç»è¿‡&lt;code&gt;é‚»å±…å­ç³»ç»Ÿ&lt;/code&gt;çš„å¤„ç†ï¼Œç°åœ¨&lt;code&gt;sk_buffer&lt;/code&gt;ä¸­å·²ç»å°è£…äº†ä¸€ä¸ªå®Œæ•´çš„&lt;code&gt;æ•°æ®å¸§&lt;/code&gt;ï¼Œéšåå†…æ ¸å°†&lt;code&gt;sk_buffer&lt;/code&gt;äº¤ç»™&lt;code&gt;ç½‘ç»œè®¾å¤‡å­ç³»ç»Ÿ&lt;/code&gt;è¿›è¡Œå¤„ç†ã€‚&lt;code&gt;ç½‘ç»œè®¾å¤‡å­ç³»ç»Ÿ&lt;/code&gt;ä¸»è¦åšä»¥ä¸‹å‡ é¡¹äº‹æƒ…ï¼š&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;é€‰æ‹©å‘é€é˜Ÿåˆ—ï¼ˆ&lt;code&gt;RingBuffer&lt;/code&gt;ï¼‰ã€‚å› ä¸ºç½‘å¡æ‹¥æœ‰å¤šä¸ªå‘é€é˜Ÿåˆ—ï¼Œæ‰€ä»¥åœ¨å‘é€å‰éœ€è¦é€‰æ‹©ä¸€ä¸ªå‘é€é˜Ÿåˆ—ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å°†&lt;code&gt;sk_buffer&lt;/code&gt;æ·»åŠ åˆ°å‘é€é˜Ÿåˆ—ä¸­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¾ªç¯ä»å‘é€é˜Ÿåˆ—ï¼ˆ&lt;code&gt;RingBuffer&lt;/code&gt;ï¼‰ä¸­å–å‡º&lt;code&gt;sk_buffer&lt;/code&gt;ï¼Œè°ƒç”¨å†…æ ¸å‡½æ•°&lt;code&gt;sch_direct_xmit&lt;/code&gt;å‘é€æ•°æ®ï¼Œå…¶ä¸­ä¼šè°ƒç”¨&lt;code&gt;ç½‘å¡é©±åŠ¨ç¨‹åº&lt;/code&gt;æ¥å‘é€æ•°æ®ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ä»¥ä¸Šè¿‡ç¨‹å…¨éƒ¨æ˜¯ç”¨æˆ·çº¿ç¨‹çš„å†…æ ¸æ€åœ¨æ‰§è¡Œï¼Œå ç”¨çš„CPUæ—¶é—´æ˜¯ç³»ç»Ÿæ€æ—¶é—´(&lt;code&gt;sy&lt;/code&gt;)ï¼Œå½“åˆ†é…ç»™ç”¨æˆ·çº¿ç¨‹çš„&lt;code&gt;CPU quota&lt;/code&gt;ç”¨å®Œçš„æ—¶å€™ï¼Œä¼šè§¦å‘&lt;code&gt;NET_TX_SOFTIRQ&lt;/code&gt;ç±»å‹çš„è½¯ä¸­æ–­ï¼Œå†…æ ¸çº¿ç¨‹&lt;code&gt;ksoftirqd&lt;/code&gt;ä¼šå“åº”è¿™ä¸ªè½¯ä¸­æ–­ï¼Œå¹¶æ‰§è¡Œ&lt;code&gt;NET_TX_SOFTIRQ&lt;/code&gt;ç±»å‹çš„è½¯ä¸­æ–­æ³¨å†Œçš„å›è°ƒå‡½æ•°&lt;code&gt;net_tx_action&lt;/code&gt;ï¼Œåœ¨å›è°ƒå‡½æ•°ä¸­ä¼šæ‰§è¡Œåˆ°é©±åŠ¨ç¨‹åºå‡½æ•° &lt;code&gt;dev_hard_start_xmit&lt;/code&gt;æ¥å‘é€æ•°æ®ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šå½“è§¦å‘&lt;code&gt;NET_TX_SOFTIRQ&lt;/code&gt;è½¯ä¸­æ–­æ¥å‘é€æ•°æ®æ—¶ï¼Œåè¾¹æ¶ˆè€—çš„ CPU å°±éƒ½æ˜¾ç¤ºåœ¨ &lt;code&gt;si&lt;/code&gt;è¿™é‡Œäº†ï¼Œä¸ä¼šæ¶ˆè€—ç”¨æˆ·è¿›ç¨‹çš„ç³»ç»Ÿæ€æ—¶é—´ï¼ˆ&lt;code&gt;sy&lt;/code&gt;ï¼‰äº†ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ä»è¿™é‡Œå¯ä»¥çœ‹åˆ°ç½‘ç»œåŒ…çš„å‘é€è¿‡ç¨‹å’Œæ¥å—è¿‡ç¨‹æ˜¯ä¸åŒçš„ï¼Œåœ¨ä»‹ç»ç½‘ç»œåŒ…çš„æ¥å—è¿‡ç¨‹æ—¶ï¼Œæˆ‘ä»¬æåˆ°æ˜¯é€šè¿‡è§¦å‘&lt;code&gt;NET_RX_SOFTIRQ&lt;/code&gt;ç±»å‹çš„è½¯ä¸­æ–­åœ¨å†…æ ¸çº¿ç¨‹&lt;code&gt;ksoftirqd&lt;/code&gt;ä¸­æ‰§è¡Œ&lt;code&gt;å†…æ ¸ç½‘ç»œåè®®æ ˆ&lt;/code&gt;æ¥å—æ•°æ®ã€‚è€Œåœ¨ç½‘ç»œæ•°æ®åŒ…çš„å‘é€è¿‡ç¨‹ä¸­æ˜¯&lt;code&gt;ç”¨æˆ·çº¿ç¨‹çš„å†…æ ¸æ€&lt;/code&gt;åœ¨æ‰§è¡Œ&lt;code&gt;å†…æ ¸ç½‘ç»œåè®®æ ˆ&lt;/code&gt;ï¼Œåªæœ‰å½“çº¿ç¨‹çš„&lt;code&gt;CPU quota&lt;/code&gt;ç”¨å°½æ—¶ï¼Œæ‰è§¦å‘&lt;code&gt;NET_TX_SOFTIRQ&lt;/code&gt;è½¯ä¸­æ–­æ¥å‘é€æ•°æ®ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;åœ¨æ•´ä¸ªç½‘ç»œåŒ…çš„å‘é€å’Œæ¥å—è¿‡ç¨‹ä¸­ï¼Œ&lt;code&gt;NET_TX_SOFTIRQ&lt;/code&gt;ç±»å‹çš„è½¯ä¸­æ–­åªä¼šåœ¨å‘é€ç½‘ç»œåŒ…æ—¶å¹¶ä¸”å½“ç”¨æˆ·çº¿ç¨‹çš„&lt;code&gt;CPU quota&lt;/code&gt;ç”¨å°½æ—¶ï¼Œæ‰ä¼šè§¦å‘ã€‚å‰©ä¸‹çš„æ¥å—è¿‡ç¨‹ä¸­è§¦å‘çš„è½¯ä¸­æ–­ç±»å‹ä»¥åŠå‘é€å®Œæ•°æ®è§¦å‘çš„è½¯ä¸­æ–­ç±»å‹å‡ä¸º&lt;code&gt;NET_RX_SOFTIRQ&lt;/code&gt;ã€‚æ‰€ä»¥è¿™å°±æ˜¯ä½ åœ¨æœåŠ¡å™¨ä¸ŠæŸ¥çœ‹ &lt;code&gt;/proc/softirqs&lt;/code&gt;ï¼Œä¸€èˆ¬ &lt;code&gt;NET_RX&lt;/code&gt;éƒ½è¦æ¯” &lt;code&gt;NET_TX&lt;/code&gt;å¤§å¾ˆå¤šçš„çš„åŸå› ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ç°åœ¨å‘é€æµç¨‹ç»ˆäºåˆ°äº†ç½‘å¡çœŸå®å‘é€æ•°æ®çš„é˜¶æ®µï¼Œå‰è¾¹æˆ‘ä»¬è®²åˆ°æ— è®ºæ˜¯ç”¨æˆ·çº¿ç¨‹çš„å†…æ ¸æ€è¿˜æ˜¯è§¦å‘&lt;code&gt;NET_TX_SOFTIRQ&lt;/code&gt;ç±»å‹çš„è½¯ä¸­æ–­åœ¨å‘é€æ•°æ®çš„æ—¶å€™æœ€ç»ˆä¼šè°ƒç”¨åˆ°ç½‘å¡çš„é©±åŠ¨ç¨‹åºå‡½æ•°&lt;code&gt;dev_hard_start_xmit&lt;/code&gt;æ¥å‘é€æ•°æ®ã€‚åœ¨ç½‘å¡é©±åŠ¨ç¨‹åºå‡½æ•°&lt;code&gt;dev_hard_start_xmit&lt;/code&gt;ä¸­ä¼šå°†&lt;code&gt;sk_buffer&lt;/code&gt;æ˜ å°„åˆ°ç½‘å¡å¯è®¿é—®çš„&lt;code&gt;å†…å­˜ DMA åŒºåŸŸ&lt;/code&gt;ï¼Œæœ€ç»ˆç½‘å¡é©±åŠ¨ç¨‹åºé€šè¿‡&lt;code&gt;DMA&lt;/code&gt;çš„æ–¹å¼å°†&lt;code&gt;æ•°æ®å¸§&lt;/code&gt;é€šè¿‡ç‰©ç†ç½‘å¡å‘é€å‡ºå»ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å½“æ•°æ®å‘é€å®Œæ¯•åï¼Œè¿˜æœ‰æœ€åä¸€é¡¹é‡è¦çš„å·¥ä½œï¼Œå°±æ˜¯æ¸…ç†å·¥ä½œã€‚æ•°æ®å‘é€å®Œæ¯•åï¼Œç½‘å¡è®¾å¤‡ä¼šå‘&lt;code&gt;CPU&lt;/code&gt;å‘é€ä¸€ä¸ªç¡¬ä¸­æ–­ï¼Œ&lt;code&gt;CPU&lt;/code&gt;è°ƒç”¨ç½‘å¡é©±åŠ¨ç¨‹åºæ³¨å†Œçš„&lt;code&gt;ç¡¬ä¸­æ–­å“åº”ç¨‹åº&lt;/code&gt;ï¼Œåœ¨ç¡¬ä¸­æ–­å“åº”ä¸­è§¦å‘&lt;code&gt;NET_RX_SOFTIRQ&lt;/code&gt;ç±»å‹çš„è½¯ä¸­æ–­ï¼Œåœ¨è½¯ä¸­æ–­çš„å›è°ƒå‡½æ•°&lt;code&gt;igb_poll&lt;/code&gt;ä¸­æ¸…ç†é‡Šæ”¾ &lt;code&gt;sk_buffer&lt;/code&gt;ï¼Œæ¸…ç†&lt;code&gt;ç½‘å¡&lt;/code&gt;å‘é€é˜Ÿåˆ—ï¼ˆ&lt;code&gt;RingBuffer&lt;/code&gt;ï¼‰ï¼Œè§£é™¤ DMA æ˜ å°„ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;æ— è®º&lt;code&gt;ç¡¬ä¸­æ–­&lt;/code&gt;æ˜¯å› ä¸º&lt;code&gt;æœ‰æ•°æ®è¦æ¥æ”¶&lt;/code&gt;ï¼Œè¿˜æ˜¯è¯´&lt;code&gt;å‘é€å®Œæˆé€šçŸ¥&lt;/code&gt;ï¼Œä»ç¡¬ä¸­æ–­è§¦å‘çš„è½¯ä¸­æ–­éƒ½æ˜¯ &lt;code&gt;NET_RX_SOFTIRQ&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;è¿™é‡Œé‡Šæ”¾æ¸…ç†çš„åªæ˜¯&lt;code&gt;sk_buffer&lt;/code&gt;çš„å‰¯æœ¬ï¼ŒçœŸæ­£çš„&lt;code&gt;sk_buffer&lt;/code&gt;ç°åœ¨è¿˜æ˜¯å­˜æ”¾åœ¨&lt;code&gt;Socket&lt;/code&gt;çš„å‘é€é˜Ÿåˆ—ä¸­ã€‚å‰é¢åœ¨&lt;code&gt;ä¼ è¾“å±‚&lt;/code&gt;å¤„ç†çš„æ—¶å€™æˆ‘ä»¬æåˆ°è¿‡ï¼Œå› ä¸ºä¼ è¾“å±‚éœ€è¦&lt;code&gt;ä¿è¯å¯é æ€§&lt;/code&gt;ï¼Œæ‰€ä»¥ &lt;code&gt;sk_buffer&lt;/code&gt;å…¶å®è¿˜æ²¡æœ‰åˆ é™¤ã€‚å®ƒå¾—ç­‰æ”¶åˆ°å¯¹æ–¹çš„ ACK ä¹‹åæ‰ä¼šçœŸæ­£åˆ é™¤ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ€§èƒ½å¼€é”€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‰è¾¹æˆ‘ä»¬æåˆ°äº†åœ¨ç½‘ç»œåŒ…æ¥æ”¶è¿‡ç¨‹ä¸­æ¶‰åŠåˆ°çš„æ€§èƒ½å¼€é”€ï¼Œç°åœ¨ä»‹ç»å®Œäº†ç½‘ç»œåŒ…çš„å‘é€è¿‡ç¨‹ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹åœ¨æ•°æ®åŒ…å‘é€è¿‡ç¨‹ä¸­çš„æ€§èƒ½å¼€é”€ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å’Œæ¥æ”¶æ•°æ®ä¸€æ ·ï¼Œåº”ç”¨ç¨‹åºåœ¨è°ƒç”¨&lt;code&gt;ç³»ç»Ÿè°ƒç”¨send&lt;/code&gt;çš„æ—¶å€™ä¼šä»&lt;code&gt;ç”¨æˆ·æ€&lt;/code&gt;è½¬ä¸º&lt;code&gt;å†…æ ¸æ€&lt;/code&gt;ä»¥åŠå‘é€å®Œæ•°æ®åï¼Œ&lt;code&gt;ç³»ç»Ÿè°ƒç”¨&lt;/code&gt;è¿”å›æ—¶ä»&lt;code&gt;å†…æ ¸æ€&lt;/code&gt;è½¬ä¸º&lt;code&gt;ç”¨æˆ·æ€&lt;/code&gt;çš„å¼€é”€ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ç”¨æˆ·çº¿ç¨‹å†…æ ¸æ€&lt;code&gt;CPU quota&lt;/code&gt;ç”¨å°½æ—¶è§¦å‘&lt;code&gt;NET_TX_SOFTIRQ&lt;/code&gt;ç±»å‹è½¯ä¸­æ–­ï¼Œå†…æ ¸å“åº”è½¯ä¸­æ–­çš„å¼€é”€ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ç½‘å¡å‘é€å®Œæ•°æ®ï¼Œå‘&lt;code&gt;CPU&lt;/code&gt;å‘é€ç¡¬ä¸­æ–­ï¼Œ&lt;code&gt;CPU&lt;/code&gt;å“åº”ç¡¬ä¸­æ–­çš„å¼€é”€ã€‚ä»¥åŠåœ¨ç¡¬ä¸­æ–­ä¸­å‘é€&lt;code&gt;NET_RX_SOFTIRQ&lt;/code&gt;è½¯ä¸­æ–­æ‰§è¡Œå…·ä½“çš„å†…å­˜æ¸…ç†åŠ¨ä½œã€‚å†…æ ¸å“åº”è½¯ä¸­æ–­çš„å¼€é”€ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å†…å­˜æ‹·è´çš„å¼€é”€ã€‚æˆ‘ä»¬æ¥å›é¡¾ä¸‹åœ¨æ•°æ®åŒ…å‘é€çš„è¿‡ç¨‹ä¸­éƒ½å‘ç”Ÿäº†å“ªäº›å†…å­˜æ‹·è´ï¼š&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;åœ¨å†…æ ¸åè®®æ ˆçš„ä¼ è¾“å±‚ä¸­ï¼Œ&lt;code&gt;TCPåè®®&lt;/code&gt;å¯¹åº”çš„å‘é€å‡½æ•°&lt;code&gt;tcp_sendmsg&lt;/code&gt;ä¼šç”³è¯·&lt;code&gt;sk_buffer&lt;/code&gt;ï¼Œå°†ç”¨æˆ·è¦å‘é€çš„æ•°æ®&lt;code&gt;æ‹·è´&lt;/code&gt;åˆ°&lt;code&gt;sk_buffer&lt;/code&gt;ä¸­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åœ¨å‘é€æµç¨‹ä»ä¼ è¾“å±‚åˆ°ç½‘ç»œå±‚çš„æ—¶å€™ï¼Œä¼š&lt;code&gt;æ‹·è´&lt;/code&gt;ä¸€ä¸ª&lt;code&gt;sk_bufferå‰¯æœ¬&lt;/code&gt;å‡ºæ¥ï¼Œå°†è¿™ä¸ª&lt;code&gt;sk_bufferå‰¯æœ¬&lt;/code&gt;å‘ä¸‹ä¼ é€’ã€‚åŸå§‹&lt;code&gt;sk_buffer&lt;/code&gt;ä¿ç•™åœ¨&lt;code&gt;Socket&lt;/code&gt;å‘é€é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…ç½‘ç»œå¯¹ç«¯&lt;code&gt;ACK&lt;/code&gt;ï¼Œå¯¹ç«¯&lt;code&gt;ACK&lt;/code&gt;ååˆ é™¤&lt;code&gt;Socket&lt;/code&gt;å‘é€é˜Ÿåˆ—ä¸­çš„&lt;code&gt;sk_buffer&lt;/code&gt;ã€‚å¯¹ç«¯æ²¡æœ‰å‘é€&lt;code&gt;ACK&lt;/code&gt;ï¼Œåˆ™é‡æ–°ä»&lt;code&gt;Socket&lt;/code&gt;å‘é€é˜Ÿåˆ—ä¸­å‘é€ï¼Œå®ç°&lt;code&gt;TCPåè®®&lt;/code&gt;çš„å¯é ä¼ è¾“ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åœ¨ç½‘ç»œå±‚ï¼Œå¦‚æœå‘ç°è¦å‘é€çš„æ•°æ®å¤§äº&lt;code&gt;MTU&lt;/code&gt;ï¼Œåˆ™ä¼šè¿›è¡Œåˆ†ç‰‡æ“ä½œï¼Œç”³è¯·é¢å¤–çš„&lt;code&gt;sk_buffer&lt;/code&gt;ï¼Œå¹¶å°†åŸæ¥çš„sk_buffer&lt;code&gt;æ‹·è´&lt;/code&gt;åˆ°å¤šä¸ªå°çš„sk_bufferä¸­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å†è°ˆ(é˜»å¡ï¼Œéé˜»å¡)ä¸(åŒæ­¥ï¼Œå¼‚æ­¥)&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æˆ‘ä»¬èŠå®Œç½‘ç»œæ•°æ®çš„æ¥æ”¶å’Œå‘é€è¿‡ç¨‹åï¼Œæˆ‘ä»¬æ¥è°ˆä¸‹IOä¸­ç‰¹åˆ«å®¹æ˜“æ··æ·†çš„æ¦‚å¿µï¼š&lt;code&gt;é˜»å¡ä¸åŒæ­¥&lt;/code&gt;ï¼Œ&lt;code&gt;éé˜»å¡ä¸å¼‚æ­¥&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç½‘ä¸Šå„ç§åšæ–‡è¿˜æœ‰å„ç§ä¹¦ç±ä¸­æœ‰å¤§é‡çš„å…³äºè¿™ä¸¤ä¸ªæ¦‚å¿µçš„è§£é‡Šï¼Œä½†æ˜¯ç¬”è€…è§‰å¾—è¿˜æ˜¯ä¸å¤Ÿå½¢è±¡åŒ–ï¼Œåªæ˜¯å¯¹æ¦‚å¿µçš„ç”Ÿç¡¬è§£é‡Šï¼Œå¦‚æœç¡¬å¥—æ¦‚å¿µçš„è¯ï¼Œå…¶å®æ„Ÿè§‰&lt;code&gt;é˜»å¡ä¸åŒæ­¥&lt;/code&gt;ï¼Œ&lt;code&gt;éé˜»å¡ä¸å¼‚æ­¥&lt;/code&gt;è¿˜æ˜¯æ²¡å•¥åŒºåˆ«ï¼Œæ—¶é—´é•¿äº†ï¼Œè¿˜æ˜¯æ¯”è¾ƒæ¨¡ç³Šå®¹æ˜“æ··æ·†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ç¬”è€…åœ¨è¿™é‡Œå°è¯•æ¢ä¸€ç§æ›´åŠ å½¢è±¡åŒ–ï¼Œæ›´åŠ å®¹æ˜“ç†è§£è®°å¿†çš„æ–¹å¼æ¥æ¸…æ™°åœ°è§£é‡Šä¸‹ä»€ä¹ˆæ˜¯&lt;code&gt;é˜»å¡ä¸éé˜»å¡&lt;/code&gt;ï¼Œä»€ä¹ˆæ˜¯&lt;code&gt;åŒæ­¥ä¸å¼‚æ­¥&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»è¿‡å‰è¾¹å¯¹ç½‘ç»œæ•°æ®åŒ…æ¥æ”¶æµç¨‹çš„ä»‹ç»ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥å°†æ•´ä¸ªæµç¨‹æ€»ç»“ä¸ºä¸¤ä¸ªé˜¶æ®µï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7629032258064516&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEgwcdMwZya6aIFeslTuyUGGUtLgBnkQhrP9GhxRPMxNvG3TmKxFG5bQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;figcaption&gt;æ•°æ®æ¥æ”¶é˜¶æ®µ.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;æ•°æ®å‡†å¤‡é˜¶æ®µï¼š&lt;/strong&gt; åœ¨è¿™ä¸ªé˜¶æ®µï¼Œç½‘ç»œæ•°æ®åŒ…åˆ°è¾¾ç½‘å¡ï¼Œé€šè¿‡&lt;code&gt;DMA&lt;/code&gt;çš„æ–¹å¼å°†æ•°æ®åŒ…æ‹·è´åˆ°å†…å­˜ä¸­ï¼Œç„¶åç»è¿‡ç¡¬ä¸­æ–­ï¼Œè½¯ä¸­æ–­ï¼Œæ¥ç€é€šè¿‡å†…æ ¸çº¿ç¨‹&lt;code&gt;ksoftirqd&lt;/code&gt;ç»è¿‡å†…æ ¸åè®®æ ˆçš„å¤„ç†ï¼Œæœ€ç»ˆå°†æ•°æ®å‘é€åˆ°&lt;code&gt;å†…æ ¸Socket&lt;/code&gt;çš„æ¥æ”¶ç¼“å†²åŒºä¸­ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;æ•°æ®æ‹·è´é˜¶æ®µï¼š&lt;/strong&gt; å½“æ•°æ®åˆ°è¾¾&lt;code&gt;å†…æ ¸Socket&lt;/code&gt;çš„æ¥æ”¶ç¼“å†²åŒºä¸­æ—¶ï¼Œæ­¤æ—¶æ•°æ®å­˜åœ¨äº&lt;code&gt;å†…æ ¸ç©ºé—´&lt;/code&gt;ä¸­ï¼Œéœ€è¦å°†æ•°æ®&lt;code&gt;æ‹·è´&lt;/code&gt;åˆ°&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;ä¸­ï¼Œæ‰èƒ½å¤Ÿè¢«åº”ç”¨ç¨‹åºè¯»å–ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;é˜»å¡ä¸éé˜»å¡&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é˜»å¡ä¸éé˜»å¡çš„åŒºåˆ«ä¸»è¦å‘ç”Ÿåœ¨ç¬¬ä¸€é˜¶æ®µï¼š&lt;code&gt;æ•°æ®å‡†å¤‡é˜¶æ®µ&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“åº”ç”¨ç¨‹åºå‘èµ·&lt;code&gt;ç³»ç»Ÿè°ƒç”¨read&lt;/code&gt;æ—¶ï¼Œçº¿ç¨‹ä»ç”¨æˆ·æ€è½¬ä¸ºå†…æ ¸æ€ï¼Œè¯»å–å†…æ ¸&lt;code&gt;Socket&lt;/code&gt;çš„æ¥æ”¶ç¼“å†²åŒºä¸­çš„ç½‘ç»œæ•°æ®ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é˜»å¡&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœè¿™æ—¶å†…æ ¸&lt;code&gt;Socket&lt;/code&gt;çš„æ¥æ”¶ç¼“å†²åŒºæ²¡æœ‰æ•°æ®ï¼Œé‚£ä¹ˆçº¿ç¨‹å°±ä¼šä¸€ç›´&lt;code&gt;ç­‰å¾…&lt;/code&gt;ï¼Œç›´åˆ°&lt;code&gt;Socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºæœ‰æ•°æ®ä¸ºæ­¢ã€‚éšåå°†æ•°æ®ä»å†…æ ¸ç©ºé—´æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ï¼Œ&lt;code&gt;ç³»ç»Ÿè°ƒç”¨read&lt;/code&gt;è¿”å›ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6959677419354838&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcE59KUqV0jGMaO1RzueavdIWFn5lpNicVTss7vF5OvdChgR3zjtbGcgzg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;figcaption&gt;é˜»å¡IO.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼š&lt;strong&gt;é˜»å¡&lt;/strong&gt;çš„ç‰¹ç‚¹æ˜¯åœ¨ç¬¬ä¸€é˜¶æ®µå’Œç¬¬äºŒé˜¶æ®µ&lt;code&gt;éƒ½ä¼šç­‰å¾…&lt;/code&gt;ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;éé˜»å¡&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;é˜»å¡&lt;/code&gt;å’Œ&lt;code&gt;éé˜»å¡&lt;/code&gt;ä¸»è¦çš„åŒºåˆ†æ˜¯åœ¨ç¬¬ä¸€é˜¶æ®µï¼š&lt;code&gt;æ•°æ®å‡†å¤‡é˜¶æ®µ&lt;/code&gt;ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;åœ¨ç¬¬ä¸€é˜¶æ®µï¼Œå½“&lt;code&gt;Socket&lt;/code&gt;çš„æ¥æ”¶ç¼“å†²åŒºä¸­æ²¡æœ‰æ•°æ®çš„æ—¶å€™ï¼Œ&lt;code&gt;é˜»å¡æ¨¡å¼ä¸‹&lt;/code&gt;åº”ç”¨çº¿ç¨‹ä¼šä¸€ç›´ç­‰å¾…ã€‚&lt;code&gt;éé˜»å¡æ¨¡å¼ä¸‹&lt;/code&gt;åº”ç”¨çº¿ç¨‹ä¸ä¼šç­‰å¾…ï¼Œ&lt;code&gt;ç³»ç»Ÿè°ƒç”¨&lt;/code&gt;ç›´æ¥è¿”å›é”™è¯¯æ ‡å¿—&lt;code&gt;EWOULDBLOCK&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å½“&lt;code&gt;Socket&lt;/code&gt;çš„æ¥æ”¶ç¼“å†²åŒºä¸­æœ‰æ•°æ®çš„æ—¶å€™ï¼Œ&lt;code&gt;é˜»å¡&lt;/code&gt;å’Œ&lt;code&gt;éé˜»å¡&lt;/code&gt;çš„è¡¨ç°æ˜¯ä¸€æ ·çš„ï¼Œéƒ½ä¼šè¿›å…¥ç¬¬äºŒé˜¶æ®µ&lt;code&gt;ç­‰å¾…&lt;/code&gt;æ•°æ®ä»&lt;code&gt;å†…æ ¸ç©ºé—´&lt;/code&gt;æ‹·è´åˆ°&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;ï¼Œç„¶å&lt;code&gt;ç³»ç»Ÿè°ƒç”¨è¿”å›&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7483870967741936&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcERxuxKJvM0hOVl9fGVF4uP3b5iasjyBg7AQPjwbc9O3w5MjtiaRYM9URQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;figcaption&gt;éé˜»å¡IO.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼š&lt;strong&gt;éé˜»å¡&lt;/strong&gt;çš„ç‰¹ç‚¹æ˜¯ç¬¬ä¸€é˜¶æ®µ&lt;code&gt;ä¸ä¼šç­‰å¾…&lt;/code&gt;ï¼Œä½†æ˜¯åœ¨ç¬¬äºŒé˜¶æ®µè¿˜æ˜¯ä¼š&lt;code&gt;ç­‰å¾…&lt;/code&gt;ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;åŒæ­¥ä¸å¼‚æ­¥&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;åŒæ­¥&lt;/code&gt;ä¸&lt;code&gt;å¼‚æ­¥&lt;/code&gt;ä¸»è¦çš„åŒºåˆ«å‘ç”Ÿåœ¨ç¬¬äºŒé˜¶æ®µï¼š&lt;code&gt;æ•°æ®æ‹·è´é˜¶æ®µ&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‰è¾¹æˆ‘ä»¬æåˆ°åœ¨&lt;code&gt;æ•°æ®æ‹·è´é˜¶æ®µ&lt;/code&gt;ä¸»è¦æ˜¯å°†æ•°æ®ä»&lt;code&gt;å†…æ ¸ç©ºé—´&lt;/code&gt;æ‹·è´åˆ°&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;ã€‚ç„¶ååº”ç”¨ç¨‹åºæ‰å¯ä»¥è¯»å–æ•°æ®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“å†…æ ¸&lt;code&gt;Socket&lt;/code&gt;çš„æ¥æ”¶ç¼“å†²åŒºæœ‰æ•°æ®åˆ°è¾¾æ—¶ï¼Œè¿›å…¥ç¬¬äºŒé˜¶æ®µã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;åŒæ­¥&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;åŒæ­¥æ¨¡å¼&lt;/code&gt;åœ¨æ•°æ®å‡†å¤‡å¥½åï¼Œæ˜¯ç”±&lt;code&gt;ç”¨æˆ·çº¿ç¨‹&lt;/code&gt;çš„&lt;code&gt;å†…æ ¸æ€&lt;/code&gt;æ¥æ‰§è¡Œ&lt;code&gt;ç¬¬äºŒé˜¶æ®µ&lt;/code&gt;ã€‚æ‰€ä»¥åº”ç”¨ç¨‹åºä¼šåœ¨ç¬¬äºŒé˜¶æ®µå‘ç”Ÿ&lt;code&gt;é˜»å¡&lt;/code&gt;ï¼Œç›´åˆ°æ•°æ®ä»&lt;code&gt;å†…æ ¸ç©ºé—´&lt;/code&gt;æ‹·è´åˆ°&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;ï¼Œç³»ç»Ÿè°ƒç”¨æ‰ä¼šè¿”å›ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Linuxä¸‹çš„ &lt;code&gt;epoll&lt;/code&gt;å’ŒMac ä¸‹çš„ &lt;code&gt;kqueue&lt;/code&gt;éƒ½å±äº&lt;code&gt;åŒæ­¥ IO&lt;/code&gt;ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7532258064516129&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEjEQDIAtT2cuNI4aaW1NtREspTEhdh4opJ4bqvamfRm0PAVMC8TjKuQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;figcaption&gt;åŒæ­¥IO.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å¼‚æ­¥&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;å¼‚æ­¥æ¨¡å¼&lt;/code&gt;ä¸‹æ˜¯ç”±&lt;code&gt;å†…æ ¸&lt;/code&gt;æ¥æ‰§è¡Œç¬¬äºŒé˜¶æ®µçš„æ•°æ®æ‹·è´æ“ä½œï¼Œå½“&lt;code&gt;å†…æ ¸&lt;/code&gt;æ‰§è¡Œå®Œç¬¬äºŒé˜¶æ®µï¼Œä¼šé€šçŸ¥ç”¨æˆ·çº¿ç¨‹IOæ“ä½œå·²ç»å®Œæˆï¼Œå¹¶å°†æ•°æ®å›è°ƒç»™ç”¨æˆ·çº¿ç¨‹ã€‚æ‰€ä»¥åœ¨&lt;code&gt;å¼‚æ­¥æ¨¡å¼&lt;/code&gt;ä¸‹ &lt;code&gt;æ•°æ®å‡†å¤‡é˜¶æ®µ&lt;/code&gt;å’Œ&lt;code&gt;æ•°æ®æ‹·è´é˜¶æ®µ&lt;/code&gt;å‡æ˜¯ç”±&lt;code&gt;å†…æ ¸&lt;/code&gt;æ¥å®Œæˆï¼Œä¸ä¼šå¯¹åº”ç”¨ç¨‹åºé€ æˆä»»ä½•é˜»å¡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŸºäºä»¥ä¸Šç‰¹å¾ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°&lt;code&gt;å¼‚æ­¥æ¨¡å¼&lt;/code&gt;éœ€è¦å†…æ ¸çš„æ”¯æŒï¼Œæ¯”è¾ƒä¾èµ–æ“ä½œç³»ç»Ÿåº•å±‚çš„æ”¯æŒã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ç›®å‰æµè¡Œçš„æ“ä½œç³»ç»Ÿä¸­ï¼Œåªæœ‰Windows ä¸­çš„ &lt;code&gt;IOCP&lt;/code&gt;æ‰çœŸæ­£å±äºå¼‚æ­¥ IOï¼Œå®ç°çš„ä¹Ÿéå¸¸æˆç†Ÿã€‚ä½†Windowså¾ˆå°‘ç”¨æ¥ä½œä¸ºæœåŠ¡å™¨ä½¿ç”¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€Œå¸¸ç”¨æ¥ä½œä¸ºæœåŠ¡å™¨ä½¿ç”¨çš„Linuxï¼Œ&lt;code&gt;å¼‚æ­¥IOæœºåˆ¶&lt;/code&gt;å®ç°çš„ä¸å¤Ÿæˆç†Ÿï¼Œä¸NIOç›¸æ¯”æ€§èƒ½æå‡çš„ä¹Ÿä¸å¤Ÿæ˜æ˜¾ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†Linux kernel åœ¨5.1ç‰ˆæœ¬ç”±Facebookçš„å¤§ç¥Jens Axboeå¼•å…¥äº†æ–°çš„å¼‚æ­¥IOåº“&lt;code&gt;io_uring&lt;/code&gt; æ”¹å–„äº†åŸæ¥Linux native AIOçš„ä¸€äº›æ€§èƒ½é—®é¢˜ã€‚æ€§èƒ½ç›¸æ¯”&lt;code&gt;Epoll&lt;/code&gt;ä»¥åŠä¹‹å‰åŸç”Ÿçš„&lt;code&gt;AIO&lt;/code&gt;æé«˜äº†ä¸å°‘ï¼Œå€¼å¾—å…³æ³¨ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7532258064516129&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEgH4TCcSV12UCRFeMUEunGcgFdUG9nZLq2AQ9QjnuQpzpJuKHMTus8w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;figcaption&gt;å¼‚æ­¥IO.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;IOæ¨¡å‹&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨è¿›è¡Œç½‘ç»œIOæ“ä½œæ—¶ï¼Œç”¨ä»€ä¹ˆæ ·çš„IOæ¨¡å‹æ¥è¯»å†™æ•°æ®å°†åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå†³å®šäº†ç½‘ç»œæ¡†æ¶çš„IOæ€§èƒ½ã€‚æ‰€ä»¥IOæ¨¡å‹çš„é€‰æ‹©æ˜¯æ„å»ºä¸€ä¸ªé«˜æ€§èƒ½ç½‘ç»œæ¡†æ¶çš„åŸºç¡€ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ã€ŠUNIX ç½‘ç»œç¼–ç¨‹ã€‹ä¸€ä¹¦ä¸­ä»‹ç»äº†äº”ç§IOæ¨¡å‹ï¼š&lt;code&gt;é˜»å¡IO&lt;/code&gt;,&lt;code&gt;éé˜»å¡IO&lt;/code&gt;,&lt;code&gt;IOå¤šè·¯å¤ç”¨&lt;/code&gt;,&lt;code&gt;ä¿¡å·é©±åŠ¨IO&lt;/code&gt;,&lt;code&gt;å¼‚æ­¥IO&lt;/code&gt;ï¼Œæ¯ä¸€ç§IOæ¨¡å‹çš„å‡ºç°éƒ½æ˜¯å¯¹å‰ä¸€ç§çš„å‡çº§ä¼˜åŒ–ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢æˆ‘ä»¬å°±æ¥åˆ†åˆ«ä»‹ç»ä¸‹è¿™äº”ç§IOæ¨¡å‹å„è‡ªéƒ½è§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Œé€‚ç”¨äºå“ªäº›åœºæ™¯ï¼Œå„è‡ªçš„ä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;é˜»å¡IOï¼ˆBIOï¼‰&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6959677419354838&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcE59KUqV0jGMaO1RzueavdIWFn5lpNicVTss7vF5OvdChgR3zjtbGcgzg/640?wx_fmt=png&quot;/&gt;&lt;figcaption&gt;é˜»å¡IO.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»è¿‡å‰ä¸€å°èŠ‚å¯¹&lt;code&gt;é˜»å¡&lt;/code&gt;è¿™ä¸ªæ¦‚å¿µçš„ä»‹ç»ï¼Œç›¸ä¿¡å¤§å®¶å¯ä»¥å¾ˆå®¹æ˜“ç†è§£&lt;code&gt;é˜»å¡IO&lt;/code&gt;çš„æ¦‚å¿µå’Œè¿‡ç¨‹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ—¢ç„¶è¿™å°èŠ‚æˆ‘ä»¬è°ˆçš„æ˜¯&lt;code&gt;IO&lt;/code&gt;ï¼Œé‚£ä¹ˆä¸‹è¾¹æˆ‘ä»¬æ¥çœ‹ä¸‹åœ¨&lt;code&gt;é˜»å¡IO&lt;/code&gt;æ¨¡å‹ä¸‹ï¼Œç½‘ç»œæ•°æ®çš„è¯»å†™è¿‡ç¨‹ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é˜»å¡è¯»&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ç”¨æˆ·çº¿ç¨‹å‘èµ·&lt;code&gt;read&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨ï¼Œç”¨æˆ·çº¿ç¨‹ä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€ï¼Œåœ¨å†…æ ¸ä¸­å»æŸ¥çœ‹&lt;code&gt;Socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºæ˜¯å¦æœ‰æ•°æ®åˆ°æ¥ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;Socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºä¸­&lt;code&gt;æœ‰æ•°æ®&lt;/code&gt;ï¼Œåˆ™ç”¨æˆ·çº¿ç¨‹åœ¨å†…æ ¸æ€å°†å†…æ ¸ç©ºé—´ä¸­çš„æ•°æ®æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ï¼Œç³»ç»ŸIOè°ƒç”¨è¿”å›ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;Socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºä¸­&lt;code&gt;æ— æ•°æ®&lt;/code&gt;ï¼Œåˆ™ç”¨æˆ·çº¿ç¨‹è®©å‡ºCPUï¼Œè¿›å…¥&lt;code&gt;é˜»å¡çŠ¶æ€&lt;/code&gt;ã€‚å½“æ•°æ®åˆ°è¾¾&lt;code&gt;Socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºåï¼Œå†…æ ¸å”¤é†’&lt;code&gt;é˜»å¡çŠ¶æ€&lt;/code&gt;ä¸­çš„ç”¨æˆ·çº¿ç¨‹è¿›å…¥&lt;code&gt;å°±ç»ªçŠ¶æ€&lt;/code&gt;ï¼Œéšåç»è¿‡CPUçš„è°ƒåº¦è·å–åˆ°&lt;code&gt;CPU quota&lt;/code&gt;è¿›å…¥&lt;code&gt;è¿è¡ŒçŠ¶æ€&lt;/code&gt;ï¼Œå°†å†…æ ¸ç©ºé—´çš„æ•°æ®æ‹·è´åˆ°ç”¨æˆ·ç©ºé—´ï¼Œéšåç³»ç»Ÿè°ƒç”¨è¿”å›ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é˜»å¡å†™&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ç”¨æˆ·çº¿ç¨‹å‘èµ·&lt;code&gt;send&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œç”¨æˆ·çº¿ç¨‹ä»ç”¨æˆ·æ€åˆ‡æ¢åˆ°å†…æ ¸æ€ï¼Œå°†å‘é€æ•°æ®ä»ç”¨æˆ·ç©ºé—´æ‹·è´åˆ°å†…æ ¸ç©ºé—´ä¸­çš„&lt;code&gt;Socket&lt;/code&gt;å‘é€ç¼“å†²åŒºä¸­ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å½“&lt;code&gt;Socket&lt;/code&gt;å‘é€ç¼“å†²åŒºèƒ½å¤Ÿå®¹çº³ä¸‹å‘é€æ•°æ®æ—¶ï¼Œç”¨æˆ·çº¿ç¨‹ä¼šå°†å…¨éƒ¨çš„å‘é€æ•°æ®å†™å…¥&lt;code&gt;Socket&lt;/code&gt;ç¼“å†²åŒºï¼Œç„¶åæ‰§è¡Œåœ¨ã€Šç½‘ç»œåŒ…å‘é€æµç¨‹ã€‹è¿™å°èŠ‚ä»‹ç»çš„åç»­æµç¨‹ï¼Œç„¶åè¿”å›ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å½“&lt;code&gt;Socket&lt;/code&gt;å‘é€ç¼“å†²åŒºç©ºé—´ä¸å¤Ÿï¼Œæ— æ³•å®¹çº³ä¸‹å…¨éƒ¨å‘é€æ•°æ®æ—¶ï¼Œç”¨æˆ·çº¿ç¨‹è®©å‡ºCPU,è¿›å…¥&lt;code&gt;é˜»å¡çŠ¶æ€&lt;/code&gt;ï¼Œç›´åˆ°&lt;code&gt;Socket&lt;/code&gt;å‘é€ç¼“å†²åŒºèƒ½å¤Ÿå®¹çº³ä¸‹å…¨éƒ¨å‘é€æ•°æ®æ—¶ï¼Œå†…æ ¸å”¤é†’ç”¨æˆ·çº¿ç¨‹ï¼Œæ‰§è¡Œåç»­å‘é€æµç¨‹ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;é˜»å¡IO&lt;/code&gt;æ¨¡å‹ä¸‹çš„å†™æ“ä½œåšäº‹é£æ ¼æ¯”è¾ƒç¡¬åˆšï¼Œéå¾—è¦æŠŠå…¨éƒ¨çš„å‘é€æ•°æ®å†™å…¥å‘é€ç¼“å†²åŒºæ‰è‚¯å–„ç½¢ç”˜ä¼‘ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;é˜»å¡IOæ¨¡å‹&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5524193548387096&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcE15CGWNAUIdAvTbLVsusiaasD4rxcL0k8FShwAj1DguCc5cF8dPzfexA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;figcaption&gt;é˜»å¡IOæ¨¡å‹.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±äº&lt;code&gt;é˜»å¡IO&lt;/code&gt;çš„è¯»å†™ç‰¹ç‚¹ï¼Œæ‰€ä»¥å¯¼è‡´åœ¨&lt;code&gt;é˜»å¡IO&lt;/code&gt;æ¨¡å‹ä¸‹ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦è¢«ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹å¤„ç†ã€‚ä¸€ä¸ªçº¿ç¨‹åœ¨åŒä¸€æ—¶åˆ»åªèƒ½ä¸ä¸€ä¸ªè¿æ¥ç»‘å®šã€‚æ¥ä¸€ä¸ªè¯·æ±‚ï¼ŒæœåŠ¡ç«¯å°±éœ€è¦åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ç”¨æ¥å¤„ç†è¯·æ±‚ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“å®¢æˆ·ç«¯è¯·æ±‚çš„å¹¶å‘é‡çªç„¶å¢å¤§æ—¶ï¼ŒæœåŠ¡ç«¯åœ¨ä¸€ç¬é—´å°±ä¼šåˆ›å»ºå‡ºå¤§é‡çš„çº¿ç¨‹ï¼Œè€Œåˆ›å»ºçº¿ç¨‹æ˜¯éœ€è¦ç³»ç»Ÿèµ„æºå¼€é”€çš„ï¼Œè¿™æ ·ä¸€æ¥å°±ä¼šä¸€ç¬é—´å ç”¨å¤§é‡çš„ç³»ç»Ÿèµ„æºã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœå®¢æˆ·ç«¯åˆ›å»ºå¥½è¿æ¥åï¼Œä½†æ˜¯ä¸€ç›´ä¸å‘æ•°æ®ï¼Œé€šå¸¸å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œç½‘ç»œè¿æ¥ä¹Ÿ&lt;code&gt;å¹¶ä¸&lt;/code&gt;æ€»æ˜¯æœ‰æ•°æ®å¯è¯»ï¼Œé‚£ä¹ˆåœ¨ç©ºé—²çš„è¿™æ®µæ—¶é—´å†…ï¼ŒæœåŠ¡ç«¯çº¿ç¨‹å°±ä¼šä¸€ç›´å¤„äº&lt;code&gt;é˜»å¡çŠ¶æ€&lt;/code&gt;ï¼Œæ— æ³•å¹²å…¶ä»–çš„äº‹æƒ…ã€‚CPUä¹Ÿ&lt;code&gt;æ— æ³•å¾—åˆ°å……åˆ†çš„å‘æŒ¥&lt;/code&gt;ï¼ŒåŒæ—¶è¿˜ä¼š&lt;code&gt;å¯¼è‡´å¤§é‡çº¿ç¨‹åˆ‡æ¢çš„å¼€é”€&lt;/code&gt;ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;é€‚ç”¨åœºæ™¯&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŸºäºä»¥ä¸Š&lt;code&gt;é˜»å¡IOæ¨¡å‹&lt;/code&gt;çš„ç‰¹ç‚¹ï¼Œè¯¥æ¨¡å‹åªé€‚ç”¨äº&lt;code&gt;è¿æ¥æ•°å°‘&lt;/code&gt;ï¼Œ&lt;code&gt;å¹¶å‘åº¦ä½&lt;/code&gt;çš„ä¸šåŠ¡åœºæ™¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯”å¦‚å…¬å¸å†…éƒ¨çš„ä¸€äº›ç®¡ç†ç³»ç»Ÿï¼Œé€šå¸¸è¯·æ±‚æ•°åœ¨100ä¸ªå·¦å³ï¼Œä½¿ç”¨&lt;code&gt;é˜»å¡IOæ¨¡å‹&lt;/code&gt;è¿˜æ˜¯éå¸¸é€‚åˆçš„ã€‚è€Œä¸”æ€§èƒ½è¿˜ä¸è¾“NIOã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯¥æ¨¡å‹åœ¨C10Kä¹‹å‰ï¼Œæ˜¯æ™®éè¢«é‡‡ç”¨çš„ä¸€ç§IOæ¨¡å‹ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;éé˜»å¡IOï¼ˆNIOï¼‰&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;é˜»å¡IOæ¨¡å‹&lt;/code&gt;æœ€å¤§çš„é—®é¢˜å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹åªèƒ½å¤„ç†ä¸€ä¸ªè¿æ¥ï¼Œå¦‚æœè¿™ä¸ªè¿æ¥ä¸Šæ²¡æœ‰æ•°æ®çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªçº¿ç¨‹å°±åªèƒ½é˜»å¡åœ¨ç³»ç»ŸIOè°ƒç”¨ä¸Šï¼Œä¸èƒ½å¹²å…¶ä»–çš„äº‹æƒ…ã€‚è¿™å¯¹ç³»ç»Ÿèµ„æºæ¥è¯´ï¼Œæ˜¯ä¸€ç§æå¤§çš„æµªè´¹ã€‚åŒæ—¶å¤§é‡çš„çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå·¨å¤§çš„ç³»ç»Ÿå¼€é”€ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ&lt;strong&gt;æˆ‘ä»¬å°±éœ€è¦ç”¨å°½å¯èƒ½å°‘çš„çº¿ç¨‹å»å¤„ç†æ›´å¤šçš„è¿æ¥ã€‚&lt;/strong&gt;ï¼Œ&lt;code&gt;ç½‘ç»œIOæ¨¡å‹çš„æ¼”å˜&lt;/code&gt;ä¹Ÿæ˜¯æ ¹æ®è¿™ä¸ªéœ€æ±‚æ¥ä¸€æ­¥ä¸€æ­¥æ¼”è¿›çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŸºäºè¿™ä¸ªéœ€æ±‚ï¼Œç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆ&lt;code&gt;éé˜»å¡IO&lt;/code&gt;å°±å‡ºç°äº†ã€‚æˆ‘ä»¬åœ¨ä¸Šä¸€å°èŠ‚ä¸­ä»‹ç»äº†&lt;code&gt;éé˜»å¡&lt;/code&gt;çš„æ¦‚å¿µï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸‹ç½‘ç»œè¯»å†™æ“ä½œåœ¨&lt;code&gt;éé˜»å¡IO&lt;/code&gt;ä¸‹çš„ç‰¹ç‚¹ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7483870967741936&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcERxuxKJvM0hOVl9fGVF4uP3b5iasjyBg7AQPjwbc9O3w5MjtiaRYM9URQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;figcaption&gt;éé˜»å¡IO.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;éé˜»å¡è¯»&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ç”¨æˆ·çº¿ç¨‹å‘èµ·éé˜»å¡&lt;code&gt;read&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œç”¨æˆ·çº¿ç¨‹ä»&lt;code&gt;ç”¨æˆ·æ€&lt;/code&gt;è½¬ä¸º&lt;code&gt;å†…æ ¸æ€&lt;/code&gt;ï¼Œåœ¨å†…æ ¸ä¸­å»æŸ¥çœ‹&lt;code&gt;Socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºæ˜¯å¦æœ‰æ•°æ®åˆ°æ¥ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;Socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºä¸­&lt;code&gt;æ— æ•°æ®&lt;/code&gt;ï¼Œç³»ç»Ÿè°ƒç”¨ç«‹é©¬è¿”å›ï¼Œå¹¶å¸¦æœ‰ä¸€ä¸ª &lt;code&gt;EWOULDBLOCK&lt;/code&gt; æˆ– &lt;code&gt;EAGAIN&lt;/code&gt;é”™è¯¯ï¼Œè¿™ä¸ªé˜¶æ®µç”¨æˆ·çº¿ç¨‹&lt;code&gt;ä¸ä¼šé˜»å¡&lt;/code&gt;ï¼Œä¹Ÿ&lt;code&gt;ä¸ä¼šè®©å‡ºCPU&lt;/code&gt;ï¼Œè€Œæ˜¯ä¼šç»§ç»­&lt;code&gt;è½®è®­&lt;/code&gt;ç›´åˆ°&lt;code&gt;Socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºä¸­æœ‰æ•°æ®ä¸ºæ­¢ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;Socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºä¸­&lt;code&gt;æœ‰æ•°æ®&lt;/code&gt;ï¼Œç”¨æˆ·çº¿ç¨‹åœ¨&lt;code&gt;å†…æ ¸æ€&lt;/code&gt;ä¼šå°†&lt;code&gt;å†…æ ¸ç©ºé—´&lt;/code&gt;ä¸­çš„æ•°æ®æ‹·è´åˆ°&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;ï¼Œ&lt;strong&gt;æ³¨æ„&lt;/strong&gt;è¿™ä¸ªæ•°æ®æ‹·è´é˜¶æ®µï¼Œåº”ç”¨ç¨‹åºæ˜¯&lt;code&gt;é˜»å¡çš„&lt;/code&gt;ï¼Œå½“æ•°æ®æ‹·è´å®Œæˆï¼Œç³»ç»Ÿè°ƒç”¨è¿”å›ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;éé˜»å¡å†™&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‰è¾¹æˆ‘ä»¬åœ¨ä»‹ç»&lt;code&gt;é˜»å¡å†™&lt;/code&gt;çš„æ—¶å€™æåˆ°&lt;code&gt;é˜»å¡å†™&lt;/code&gt;çš„é£æ ¼ç‰¹åˆ«çš„ç¡¬æœ—ï¼Œå¤´æ¯”è¾ƒé“éè¦æŠŠå…¨éƒ¨å‘é€æ•°æ®ä¸€æ¬¡æ€§éƒ½å†™åˆ°&lt;code&gt;Socket&lt;/code&gt;çš„å‘é€ç¼“å†²åŒºä¸­æ‰è¿”å›ï¼Œå¦‚æœå‘é€ç¼“å†²åŒºä¸­æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´å®¹çº³ï¼Œé‚£ä¹ˆå°±ä¸€ç›´é˜»å¡æ­»ç­‰ï¼Œç‰¹åˆ«çš„åˆšã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›¸æ¯”è¾ƒè€Œè¨€&lt;code&gt;éé˜»å¡å†™&lt;/code&gt;çš„ç‰¹ç‚¹å°±æ¯”è¾ƒä½›ç³»ï¼Œå½“å‘é€ç¼“å†²åŒºä¸­æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´å®¹çº³å…¨éƒ¨å‘é€æ•°æ®æ—¶ï¼Œ&lt;code&gt;éé˜»å¡å†™&lt;/code&gt;çš„ç‰¹ç‚¹æ˜¯&lt;code&gt;èƒ½å†™å¤šå°‘å†™å¤šå°‘&lt;/code&gt;ï¼Œå†™ä¸ä¸‹äº†ï¼Œå°±ç«‹å³è¿”å›ã€‚å¹¶å°†å†™å…¥åˆ°å‘é€ç¼“å†²åŒºçš„å­—èŠ‚æ•°è¿”å›ç»™åº”ç”¨ç¨‹åºï¼Œæ–¹ä¾¿ç”¨æˆ·çº¿ç¨‹ä¸æ–­çš„&lt;code&gt;è½®è®­&lt;/code&gt;å°è¯•å°†&lt;code&gt;å‰©ä¸‹çš„æ•°æ®&lt;/code&gt;å†™å…¥å‘é€ç¼“å†²åŒºä¸­ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;éé˜»å¡IOæ¨¡å‹&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.37338709677419357&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEZHypSu2HK3FeqU10jRnAwDEkrVZA7kbl0MWpPonZrdOWfXzcngzlvg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;figcaption&gt;éé˜»å¡IOæ¨¡å‹.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŸºäºä»¥ä¸Š&lt;code&gt;éé˜»å¡IO&lt;/code&gt;çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬å°±ä¸å¿…åƒ&lt;code&gt;é˜»å¡IO&lt;/code&gt;é‚£æ ·ä¸ºæ¯ä¸ªè¯·æ±‚åˆ†é…ä¸€ä¸ªçº¿ç¨‹å»å¤„ç†è¿æ¥ä¸Šçš„è¯»å†™äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬å¯ä»¥åˆ©ç”¨&lt;strong&gt;ä¸€ä¸ªçº¿ç¨‹æˆ–è€…å¾ˆå°‘çš„çº¿ç¨‹&lt;/strong&gt;ï¼Œå»&lt;code&gt;ä¸æ–­åœ°è½®è¯¢&lt;/code&gt;æ¯ä¸ª&lt;code&gt;Socket&lt;/code&gt;çš„æ¥æ”¶ç¼“å†²åŒºæ˜¯å¦æœ‰æ•°æ®åˆ°è¾¾ï¼Œå¦‚æœæ²¡æœ‰æ•°æ®ï¼Œ&lt;code&gt;ä¸å¿…é˜»å¡&lt;/code&gt;çº¿ç¨‹ï¼Œè€Œæ˜¯æ¥ç€å»&lt;code&gt;è½®è¯¢&lt;/code&gt;ä¸‹ä¸€ä¸ª&lt;code&gt;Socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºï¼Œç›´åˆ°è½®è¯¢åˆ°æ•°æ®åï¼Œå¤„ç†è¿æ¥ä¸Šçš„è¯»å†™ï¼Œæˆ–è€…äº¤ç»™ä¸šåŠ¡çº¿ç¨‹æ± å»å¤„ç†ï¼Œè½®è¯¢çº¿ç¨‹åˆ™&lt;code&gt;ç»§ç»­è½®è¯¢&lt;/code&gt;å…¶ä»–çš„&lt;code&gt;Socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ ·ä¸€ä¸ª&lt;code&gt;éé˜»å¡IOæ¨¡å‹&lt;/code&gt;å°±å®ç°äº†æˆ‘ä»¬åœ¨æœ¬å°èŠ‚å¼€å§‹æå‡ºçš„éœ€æ±‚ï¼š&lt;strong&gt;æˆ‘ä»¬éœ€è¦ç”¨å°½å¯èƒ½å°‘çš„çº¿ç¨‹å»å¤„ç†æ›´å¤šçš„è¿æ¥&lt;/strong&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;é€‚ç”¨åœºæ™¯&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è™½ç„¶&lt;code&gt;éé˜»å¡IOæ¨¡å‹&lt;/code&gt;ä¸&lt;code&gt;é˜»å¡IOæ¨¡å‹&lt;/code&gt;ç›¸æ¯”ï¼Œå‡å°‘äº†å¾ˆå¤§ä¸€éƒ¨åˆ†çš„èµ„æºæ¶ˆè€—å’Œç³»ç»Ÿå¼€é”€ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯å®ƒä»ç„¶æœ‰å¾ˆå¤§çš„æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºåœ¨&lt;code&gt;éé˜»å¡IOæ¨¡å‹&lt;/code&gt;ä¸‹ï¼Œéœ€è¦ç”¨æˆ·çº¿ç¨‹å»&lt;code&gt;ä¸æ–­åœ°&lt;/code&gt;å‘èµ·&lt;code&gt;ç³»ç»Ÿè°ƒç”¨&lt;/code&gt;å»è½®è®­&lt;code&gt;Socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºï¼Œè¿™å°±éœ€è¦ç”¨æˆ·çº¿ç¨‹ä¸æ–­åœ°ä»&lt;code&gt;ç”¨æˆ·æ€&lt;/code&gt;åˆ‡æ¢åˆ°&lt;code&gt;å†…æ ¸æ€&lt;/code&gt;ï¼Œ&lt;code&gt;å†…æ ¸æ€&lt;/code&gt;åˆ‡æ¢åˆ°&lt;code&gt;ç”¨æˆ·æ€&lt;/code&gt;ã€‚éšç€å¹¶å‘é‡çš„å¢å¤§ï¼Œè¿™ä¸ªä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ä¹Ÿæ˜¯å·¨å¤§çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥å•çº¯çš„&lt;code&gt;éé˜»å¡IO&lt;/code&gt;æ¨¡å‹è¿˜æ˜¯æ— æ³•é€‚ç”¨äºé«˜å¹¶å‘çš„åœºæ™¯ã€‚åªèƒ½é€‚ç”¨äº&lt;code&gt;C10K&lt;/code&gt;ä»¥ä¸‹çš„åœºæ™¯ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;IOå¤šè·¯å¤ç”¨&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨&lt;code&gt;éé˜»å¡IO&lt;/code&gt;è¿™ä¸€å°èŠ‚çš„å¼€å¤´ï¼Œæˆ‘ä»¬æåˆ°&lt;code&gt;ç½‘ç»œIOæ¨¡å‹&lt;/code&gt;çš„æ¼”å˜éƒ½æ˜¯å›´ç»•ç€---&lt;strong&gt;å¦‚ä½•ç”¨å°½å¯èƒ½å°‘çš„çº¿ç¨‹å»å¤„ç†æ›´å¤šçš„è¿æ¥&lt;/strong&gt;è¿™ä¸ªæ ¸å¿ƒéœ€æ±‚å¼€å§‹å±•å¼€çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬å°èŠ‚æˆ‘ä»¬æ¥è°ˆè°ˆ&lt;code&gt;IOå¤šè·¯å¤ç”¨æ¨¡å‹&lt;/code&gt;ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯&lt;code&gt;å¤šè·¯&lt;/code&gt;ï¼Ÿï¼Œä»€ä¹ˆåˆæ˜¯&lt;code&gt;å¤ç”¨&lt;/code&gt;å‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬è¿˜æ˜¯ä»¥è¿™ä¸ªæ ¸å¿ƒéœ€æ±‚æ¥å¯¹è¿™ä¸¤ä¸ªæ¦‚å¿µå±•å¼€é˜è¿°ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;å¤šè·¯&lt;/strong&gt;ï¼šæˆ‘ä»¬çš„æ ¸å¿ƒéœ€æ±‚æ˜¯è¦ç”¨å°½å¯èƒ½å°‘çš„çº¿ç¨‹æ¥å¤„ç†å°½å¯èƒ½å¤šçš„è¿æ¥ï¼Œè¿™é‡Œçš„&lt;code&gt;å¤šè·¯&lt;/code&gt;æŒ‡çš„å°±æ˜¯æˆ‘ä»¬éœ€è¦å¤„ç†çš„ä¼—å¤šè¿æ¥ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;å¤ç”¨&lt;/strong&gt;ï¼šæ ¸å¿ƒéœ€æ±‚è¦æ±‚æˆ‘ä»¬ä½¿ç”¨&lt;code&gt;å°½å¯èƒ½å°‘çš„çº¿ç¨‹&lt;/code&gt;ï¼Œ&lt;code&gt;å°½å¯èƒ½å°‘çš„ç³»ç»Ÿå¼€é”€&lt;/code&gt;å»å¤„ç†&lt;code&gt;å°½å¯èƒ½å¤š&lt;/code&gt;çš„è¿æ¥ï¼ˆ&lt;code&gt;å¤šè·¯&lt;/code&gt;ï¼‰ï¼Œé‚£ä¹ˆè¿™é‡Œçš„&lt;code&gt;å¤ç”¨&lt;/code&gt;æŒ‡çš„å°±æ˜¯ç”¨&lt;code&gt;æœ‰é™çš„èµ„æº&lt;/code&gt;ï¼Œæ¯”å¦‚ç”¨ä¸€ä¸ªçº¿ç¨‹æˆ–è€…å›ºå®šæ•°é‡çš„çº¿ç¨‹å»å¤„ç†ä¼—å¤šè¿æ¥ä¸Šçš„è¯»å†™äº‹ä»¶ã€‚æ¢å¥è¯è¯´ï¼Œåœ¨&lt;code&gt;é˜»å¡IOæ¨¡å‹&lt;/code&gt;ä¸­ä¸€ä¸ªè¿æ¥å°±éœ€è¦åˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹å»ä¸“é—¨å¤„ç†è¿™ä¸ªè¿æ¥ä¸Šçš„è¯»å†™ï¼Œåˆ°äº†&lt;code&gt;IOå¤šè·¯å¤ç”¨æ¨¡å‹&lt;/code&gt;ä¸­ï¼Œå¤šä¸ªè¿æ¥å¯ä»¥&lt;code&gt;å¤ç”¨&lt;/code&gt;è¿™ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹å»å¤„ç†è¿™å¤šä¸ªè¿æ¥ä¸Šçš„è¯»å†™ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¥½äº†ï¼Œ&lt;code&gt;IOå¤šè·¯å¤ç”¨æ¨¡å‹&lt;/code&gt;çš„æ¦‚å¿µè§£é‡Šæ¸…æ¥šäº†ï¼Œé‚£ä¹ˆ&lt;strong&gt;é—®é¢˜çš„å…³é”®&lt;/strong&gt;æ˜¯æˆ‘ä»¬å¦‚ä½•å»å®ç°è¿™ä¸ª&lt;code&gt;å¤ç”¨&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯å¦‚ä½•è®©ä¸€ä¸ªç‹¬ç«‹çš„çº¿ç¨‹å»å¤„ç†ä¼—å¤šè¿æ¥ä¸Šçš„è¯»å†™äº‹ä»¶å‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªé—®é¢˜å…¶å®åœ¨&lt;code&gt;éé˜»å¡IOæ¨¡å‹&lt;/code&gt;ä¸­å·²ç»ç»™å‡ºäº†å®ƒçš„ç­”æ¡ˆï¼Œåœ¨&lt;code&gt;éé˜»å¡IOæ¨¡å‹&lt;/code&gt;ä¸­ï¼Œåˆ©ç”¨&lt;code&gt;éé˜»å¡&lt;/code&gt;çš„ç³»ç»ŸIOè°ƒç”¨å»ä¸æ–­çš„è½®è¯¢ä¼—å¤šè¿æ¥çš„&lt;code&gt;Socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºçœ‹æ˜¯å¦æœ‰æ•°æ®åˆ°æ¥ï¼Œå¦‚æœæœ‰åˆ™å¤„ç†ï¼Œå¦‚æœæ²¡æœ‰åˆ™ç»§ç»­è½®è¯¢ä¸‹ä¸€ä¸ª&lt;code&gt;Socket&lt;/code&gt;ã€‚è¿™æ ·å°±è¾¾åˆ°äº†ç”¨ä¸€ä¸ªçº¿ç¨‹å»å¤„ç†ä¼—å¤šè¿æ¥ä¸Šçš„è¯»å†™äº‹ä»¶äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ä½†æ˜¯&lt;/strong&gt;&lt;code&gt;éé˜»å¡IOæ¨¡å‹&lt;/code&gt;æœ€å¤§çš„é—®é¢˜å°±æ˜¯éœ€è¦ä¸æ–­çš„å‘èµ·&lt;code&gt;ç³»ç»Ÿè°ƒç”¨&lt;/code&gt;å»è½®è¯¢å„ä¸ª&lt;code&gt;Socket&lt;/code&gt;ä¸­çš„æ¥æ”¶ç¼“å†²åŒºæ˜¯å¦æœ‰æ•°æ®åˆ°æ¥ï¼Œ&lt;code&gt;é¢‘ç¹&lt;/code&gt;çš„&lt;code&gt;ç³»ç»Ÿè°ƒç”¨&lt;/code&gt;éšä¹‹å¸¦æ¥äº†å¤§é‡çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ã€‚éšç€å¹¶å‘é‡çš„æå‡ï¼Œè¿™æ ·ä¹Ÿä¼šå¯¼è‡´éå¸¸ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;é‚£ä¹ˆå¦‚ä½•é¿å…é¢‘ç¹çš„ç³»ç»Ÿè°ƒç”¨åŒæ—¶åˆå¯ä»¥å®ç°æˆ‘ä»¬çš„æ ¸å¿ƒéœ€æ±‚å‘¢ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™å°±éœ€è¦æ“ä½œç³»ç»Ÿçš„å†…æ ¸æ¥æ”¯æŒè¿™æ ·çš„æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥æŠŠé¢‘ç¹çš„è½®è¯¢æ“ä½œäº¤ç»™æ“ä½œç³»ç»Ÿå†…æ ¸æ¥æ›¿æˆ‘ä»¬å®Œæˆï¼Œè¿™æ ·å°±é¿å…äº†åœ¨&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;é¢‘ç¹çš„å»ä½¿ç”¨ç³»ç»Ÿè°ƒç”¨æ¥è½®è¯¢æ‰€å¸¦æ¥çš„æ€§èƒ½å¼€é”€ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­£å¦‚æˆ‘ä»¬æ‰€æƒ³ï¼Œæ“ä½œç³»ç»Ÿå†…æ ¸ä¹Ÿç¡®å®ä¸ºæˆ‘ä»¬æä¾›äº†è¿™æ ·çš„åŠŸèƒ½å®ç°ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ä¸€èµ·çœ‹ä¸‹æ“ä½œç³»ç»Ÿå¯¹&lt;code&gt;IOå¤šè·¯å¤ç”¨æ¨¡å‹&lt;/code&gt;çš„å®ç°ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;select&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;select&lt;/code&gt;æ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸æä¾›ç»™æˆ‘ä»¬ä½¿ç”¨çš„ä¸€ä¸ª&lt;code&gt;ç³»ç»Ÿè°ƒç”¨&lt;/code&gt;ï¼Œå®ƒè§£å†³äº†åœ¨&lt;code&gt;éé˜»å¡IOæ¨¡å‹&lt;/code&gt;ä¸­éœ€è¦ä¸æ–­çš„å‘èµ·&lt;code&gt;ç³»ç»ŸIOè°ƒç”¨&lt;/code&gt;å»è½®è¯¢&lt;code&gt;å„ä¸ªè¿æ¥ä¸Šçš„Socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºæ‰€å¸¦æ¥çš„&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;ä¸&lt;code&gt;å†…æ ¸ç©ºé—´&lt;/code&gt;ä¸æ–­åˆ‡æ¢çš„&lt;code&gt;ç³»ç»Ÿå¼€é”€&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;select&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨å°†&lt;code&gt;è½®è¯¢&lt;/code&gt;çš„æ“ä½œäº¤ç»™äº†&lt;code&gt;å†…æ ¸&lt;/code&gt;æ¥å¸®åŠ©æˆ‘ä»¬å®Œæˆï¼Œä»è€Œé¿å…äº†åœ¨&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;ä¸æ–­çš„å‘èµ·è½®è¯¢æ‰€å¸¦æ¥çš„çš„ç³»ç»Ÿæ€§èƒ½å¼€é”€ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5556451612903226&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEjOYnCMt84RfZyS5JVtLyrr115wOiauU5b21IvrIsHx4ndVDryGSlfMQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;figcaption&gt;select.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;é¦–å…ˆç”¨æˆ·çº¿ç¨‹åœ¨å‘èµ·&lt;code&gt;select&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨çš„æ—¶å€™ä¼š&lt;code&gt;é˜»å¡&lt;/code&gt;åœ¨&lt;code&gt;select&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨ä¸Šã€‚æ­¤æ—¶ï¼Œç”¨æˆ·çº¿ç¨‹ä»&lt;code&gt;ç”¨æˆ·æ€&lt;/code&gt;åˆ‡æ¢åˆ°äº†&lt;code&gt;å†…æ ¸æ€&lt;/code&gt;å®Œæˆäº†ä¸€æ¬¡&lt;code&gt;ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/code&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ç”¨æˆ·çº¿ç¨‹å°†éœ€è¦ç›‘å¬çš„&lt;code&gt;Socket&lt;/code&gt;å¯¹åº”çš„æ–‡ä»¶æè¿°ç¬¦&lt;code&gt;fd&lt;/code&gt;æ•°ç»„é€šè¿‡&lt;code&gt;select&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨ä¼ é€’ç»™å†…æ ¸ã€‚æ­¤æ—¶ï¼Œç”¨æˆ·çº¿ç¨‹å°†&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;ä¸­çš„æ–‡ä»¶æè¿°ç¬¦&lt;code&gt;fd&lt;/code&gt;æ•°ç»„&lt;code&gt;æ‹·è´&lt;/code&gt;åˆ°&lt;code&gt;å†…æ ¸ç©ºé—´&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œçš„&lt;strong&gt;æ–‡ä»¶æè¿°ç¬¦æ•°ç»„&lt;/strong&gt;å…¶å®æ˜¯ä¸€ä¸ª&lt;code&gt;BitMap&lt;/code&gt;ï¼Œ&lt;code&gt;BitMap&lt;/code&gt;ä¸‹æ ‡ä¸º&lt;code&gt;æ–‡ä»¶æè¿°ç¬¦fd&lt;/code&gt;ï¼Œä¸‹æ ‡å¯¹åº”çš„å€¼ä¸ºï¼š&lt;code&gt;1&lt;/code&gt;è¡¨ç¤ºè¯¥&lt;code&gt;fd&lt;/code&gt;ä¸Šæœ‰è¯»å†™äº‹ä»¶ï¼Œ&lt;code&gt;0&lt;/code&gt;è¡¨ç¤ºè¯¥&lt;code&gt;fd&lt;/code&gt;ä¸Šæ²¡æœ‰è¯»å†™äº‹ä»¶ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.2709677419354839&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcED7ATGgNE7Ou6uf2ef80pvzAfiaFI9EakX3FDd1icRiaiaMk5on3c0CrWdA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;figcaption&gt;fdæ•°ç»„BitMap.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æ–‡ä»¶æè¿°ç¬¦fd&lt;/strong&gt;å…¶å®å°±æ˜¯ä¸€ä¸ª&lt;code&gt;æ•´æ•°å€¼&lt;/code&gt;ï¼Œåœ¨Linuxä¸­ä¸€åˆ‡çš†æ–‡ä»¶ï¼Œ&lt;code&gt;Socket&lt;/code&gt;ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡ä»¶ã€‚æè¿°è¿›ç¨‹æ‰€æœ‰ä¿¡æ¯çš„æ•°æ®ç»“æ„&lt;code&gt;task_struct&lt;/code&gt;ä¸­æœ‰ä¸€ä¸ªå±æ€§&lt;code&gt;struct files_struct *files&lt;/code&gt;ï¼Œå®ƒæœ€ç»ˆæŒ‡å‘äº†ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„é‡Œå­˜æ”¾äº†è¿›ç¨‹æ‰“å¼€çš„æ‰€æœ‰æ–‡ä»¶åˆ—è¡¨ï¼Œæ–‡ä»¶ä¿¡æ¯å°è£…åœ¨&lt;code&gt;struct file&lt;/code&gt;ç»“æ„ä½“ä¸­ï¼Œè¿™ä¸ªæ•°ç»„å­˜æ”¾çš„ç±»å‹å°±æ˜¯&lt;code&gt;struct file&lt;/code&gt;ç»“æ„ä½“ï¼Œ&lt;code&gt;æ•°ç»„çš„ä¸‹æ ‡&lt;/code&gt;åˆ™æ˜¯æˆ‘ä»¬å¸¸è¯´çš„æ–‡ä»¶æè¿°ç¬¦&lt;code&gt;fd&lt;/code&gt;ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å½“ç”¨æˆ·çº¿ç¨‹è°ƒç”¨å®Œ&lt;code&gt;select&lt;/code&gt;åå¼€å§‹è¿›å…¥&lt;code&gt;é˜»å¡çŠ¶æ€&lt;/code&gt;ï¼Œ&lt;code&gt;å†…æ ¸&lt;/code&gt;å¼€å§‹è½®è¯¢éå†&lt;code&gt;fd&lt;/code&gt;æ•°ç»„ï¼ŒæŸ¥çœ‹&lt;code&gt;fd&lt;/code&gt;å¯¹åº”çš„&lt;code&gt;Socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºä¸­æ˜¯å¦æœ‰æ•°æ®åˆ°æ¥ã€‚å¦‚æœæœ‰æ•°æ®åˆ°æ¥ï¼Œåˆ™å°†&lt;code&gt;fd&lt;/code&gt;å¯¹åº”&lt;code&gt;BitMap&lt;/code&gt;çš„å€¼è®¾ç½®ä¸º&lt;code&gt;1&lt;/code&gt;ã€‚å¦‚æœæ²¡æœ‰æ•°æ®åˆ°æ¥ï¼Œåˆ™ä¿æŒå€¼ä¸º&lt;code&gt;0&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;è¿™é‡Œå†…æ ¸ä¼šä¿®æ”¹åŸå§‹çš„&lt;code&gt;fd&lt;/code&gt;æ•°ç»„ï¼ï¼&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å†…æ ¸éå†ä¸€é&lt;code&gt;fd&lt;/code&gt;æ•°ç»„åï¼Œå¦‚æœå‘ç°æœ‰äº›&lt;code&gt;fd&lt;/code&gt;ä¸Šæœ‰IOæ•°æ®åˆ°æ¥ï¼Œåˆ™å°†ä¿®æ”¹åçš„&lt;code&gt;fd&lt;/code&gt;æ•°ç»„è¿”å›ç»™ç”¨æˆ·çº¿ç¨‹ã€‚æ­¤æ—¶ï¼Œä¼šå°†&lt;code&gt;fd&lt;/code&gt;æ•°ç»„ä»&lt;code&gt;å†…æ ¸ç©ºé—´&lt;/code&gt;æ‹·è´åˆ°&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å½“å†…æ ¸å°†ä¿®æ”¹åçš„&lt;code&gt;fd&lt;/code&gt;æ•°ç»„è¿”å›ç»™ç”¨æˆ·çº¿ç¨‹åï¼Œç”¨æˆ·çº¿ç¨‹è§£é™¤&lt;code&gt;é˜»å¡&lt;/code&gt;ï¼Œç”±ç”¨æˆ·çº¿ç¨‹å¼€å§‹éå†&lt;code&gt;fd&lt;/code&gt;æ•°ç»„ç„¶åæ‰¾å‡º&lt;code&gt;fd&lt;/code&gt;æ•°ç»„ä¸­å€¼ä¸º&lt;code&gt;1&lt;/code&gt;çš„&lt;code&gt;Socket&lt;/code&gt;æ–‡ä»¶æè¿°ç¬¦ã€‚æœ€åå¯¹è¿™äº›&lt;code&gt;Socket&lt;/code&gt;å‘èµ·ç³»ç»Ÿè°ƒç”¨è¯»å–æ•°æ®ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;code&gt;select&lt;/code&gt;ä¸ä¼šå‘Šè¯‰ç”¨æˆ·çº¿ç¨‹å…·ä½“å“ªäº›&lt;code&gt;fd&lt;/code&gt;ä¸Šæœ‰IOæ•°æ®åˆ°æ¥ï¼Œåªæ˜¯åœ¨&lt;code&gt;IOæ´»è·ƒ&lt;/code&gt;çš„&lt;code&gt;fd&lt;/code&gt;ä¸Šæ‰“ä¸Šæ ‡è®°ï¼Œå°†æ‰“å¥½æ ‡è®°çš„å®Œæ•´&lt;code&gt;fd&lt;/code&gt;æ•°ç»„è¿”å›ç»™ç”¨æˆ·çº¿ç¨‹ï¼Œæ‰€ä»¥ç”¨æˆ·çº¿ç¨‹è¿˜éœ€è¦éå†&lt;code&gt;fd&lt;/code&gt;æ•°ç»„æ‰¾å‡ºå…·ä½“å“ªäº›&lt;code&gt;fd&lt;/code&gt;ä¸Šæœ‰&lt;code&gt;IOæ•°æ®&lt;/code&gt;åˆ°æ¥ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ç”±äºå†…æ ¸åœ¨éå†çš„è¿‡ç¨‹ä¸­å·²ç»ä¿®æ”¹äº†&lt;code&gt;fd&lt;/code&gt;æ•°ç»„ï¼Œæ‰€ä»¥åœ¨ç”¨æˆ·çº¿ç¨‹éå†å®Œ&lt;code&gt;fd&lt;/code&gt;æ•°ç»„åè·å–åˆ°&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„&lt;code&gt;Socket&lt;/code&gt;åï¼Œå°±éœ€è¦&lt;code&gt;é‡ç½®&lt;/code&gt;fdæ•°ç»„ï¼Œå¹¶é‡æ–°è°ƒç”¨&lt;code&gt;select&lt;/code&gt;ä¼ å…¥é‡ç½®åçš„&lt;code&gt;fd&lt;/code&gt;æ•°ç»„ï¼Œè®©å†…æ ¸å‘èµ·æ–°çš„ä¸€è½®éå†è½®è¯¢ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;APIä»‹ç»&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“æˆ‘ä»¬ç†Ÿæ‚‰äº†&lt;code&gt;select&lt;/code&gt;çš„åŸç†åï¼Œå°±å¾ˆå®¹æ˜“ç†è§£å†…æ ¸ç»™æˆ‘ä»¬æä¾›çš„&lt;code&gt;select API&lt;/code&gt;äº†ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;Â &lt;span&gt;&lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;select&lt;/span&gt;&lt;span&gt;(&lt;span&gt;int&lt;/span&gt;Â maxfdp1,fd_setÂ *readset,fd_setÂ *writeset,fd_setÂ *exceptset,&lt;span&gt;const&lt;/span&gt;Â structÂ timevalÂ *timeout)&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»&lt;code&gt;select API&lt;/code&gt;ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ&lt;code&gt;select&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨æ˜¯åœ¨è§„å®šçš„&lt;code&gt;è¶…æ—¶æ—¶é—´å†…&lt;/code&gt;ï¼Œç›‘å¬ï¼ˆ&lt;code&gt;è½®è¯¢&lt;/code&gt;ï¼‰ç”¨æˆ·æ„Ÿå…´è¶£çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆä¸Šçš„&lt;code&gt;å¯è¯»&lt;/code&gt;,&lt;code&gt;å¯å†™&lt;/code&gt;,&lt;code&gt;å¼‚å¸¸&lt;/code&gt;ä¸‰ç±»äº‹ä»¶ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;maxfdp1 ï¼š&lt;/code&gt; selectä¼ é€’ç»™å†…æ ¸ç›‘å¬çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆä¸­æ•°å€¼æœ€å¤§çš„æ–‡ä»¶æè¿°ç¬¦&lt;code&gt;+1&lt;/code&gt;ï¼Œç›®çš„æ˜¯ç”¨äºé™å®šå†…æ ¸éå†èŒƒå›´ã€‚æ¯”å¦‚ï¼š&lt;code&gt;select&lt;/code&gt;ç›‘å¬çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆä¸º&lt;code&gt;{0,1,2,3,4}&lt;/code&gt;ï¼Œé‚£ä¹ˆ&lt;code&gt;maxfdp1&lt;/code&gt;çš„å€¼ä¸º&lt;code&gt;5&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;fd_set *readsetï¼š&lt;/code&gt; å¯¹&lt;code&gt;å¯è¯»äº‹ä»¶&lt;/code&gt;æ„Ÿå…´è¶£çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;fd_set *writesetï¼š&lt;/code&gt; å¯¹&lt;code&gt;å¯å†™äº‹ä»¶&lt;/code&gt;æ„Ÿå…´è¶£çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;fd_set *exceptsetï¼š&lt;/code&gt;å¯¹&lt;code&gt;å¯å†™äº‹ä»¶&lt;/code&gt;æ„Ÿå…´è¶£çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;è¿™é‡Œçš„&lt;code&gt;fd_set&lt;/code&gt;å°±æ˜¯æˆ‘ä»¬å‰è¾¹æåˆ°çš„&lt;code&gt;æ–‡ä»¶æè¿°ç¬¦æ•°ç»„&lt;/code&gt;ï¼Œæ˜¯ä¸€ä¸ª&lt;code&gt;BitMap&lt;/code&gt;ç»“æ„ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;const struct timeval *timeoutï¼š&lt;/code&gt;selectç³»ç»Ÿè°ƒç”¨è¶…æ—¶æ—¶é—´ï¼Œåœ¨è¿™æ®µæ—¶é—´å†…ï¼Œå†…æ ¸å¦‚æœæ²¡æœ‰å‘ç°æœ‰&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œå°±ç›´æ¥è¿”å›ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šå°èŠ‚æåˆ°ï¼Œåœ¨&lt;code&gt;å†…æ ¸&lt;/code&gt;éå†å®Œ&lt;code&gt;fd&lt;/code&gt;æ•°ç»„åï¼Œå‘ç°æœ‰&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„&lt;code&gt;fd&lt;/code&gt;ï¼Œåˆ™ä¼šå°†è¯¥&lt;code&gt;fd&lt;/code&gt;å¯¹åº”çš„&lt;code&gt;BitMap&lt;/code&gt;ä¸­çš„å€¼è®¾ç½®ä¸º&lt;code&gt;1&lt;/code&gt;ï¼Œå¹¶å°†ä¿®æ”¹åçš„&lt;code&gt;fd&lt;/code&gt;æ•°ç»„ï¼Œè¿”å›ç»™ç”¨æˆ·çº¿ç¨‹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ç”¨æˆ·çº¿ç¨‹ä¸­éœ€è¦é‡æ–°éå†&lt;code&gt;fd&lt;/code&gt;æ•°ç»„ï¼Œæ‰¾å‡º&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„&lt;code&gt;fd&lt;/code&gt;å‡ºæ¥ï¼Œç„¶åå‘èµ·çœŸæ­£çš„è¯»å†™è°ƒç”¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢ä»‹ç»ä¸‹åœ¨ç”¨æˆ·çº¿ç¨‹ä¸­é‡æ–°éå†&lt;code&gt;fd&lt;/code&gt;æ•°ç»„çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°çš„&lt;code&gt;API&lt;/code&gt;ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;void FD_ZERO(fd_set *fdset)ï¼š&lt;/code&gt;æ¸…ç©ºæŒ‡å®šçš„æ–‡ä»¶æè¿°ç¬¦é›†åˆï¼Œå³è®©&lt;code&gt;fd_set&lt;/code&gt;ä¸­ä¸åœ¨åŒ…å«ä»»ä½•æ–‡ä»¶æè¿°ç¬¦ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;void FD_SET(int fd, fd_set *fdset)ï¼š&lt;/code&gt;å°†ä¸€ä¸ªç»™å®šçš„æ–‡ä»¶æè¿°ç¬¦åŠ å…¥é›†åˆä¹‹ä¸­ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;æ¯æ¬¡è°ƒç”¨&lt;code&gt;select&lt;/code&gt;ä¹‹å‰éƒ½è¦é€šè¿‡&lt;code&gt;FD_ZERO&lt;/code&gt;å’Œ&lt;code&gt;FD_SET&lt;/code&gt;é‡æ–°è®¾ç½®æ–‡ä»¶æè¿°ç¬¦ï¼Œå› ä¸ºæ–‡ä»¶æè¿°ç¬¦é›†åˆä¼šåœ¨&lt;code&gt;å†…æ ¸&lt;/code&gt;ä¸­&lt;code&gt;è¢«ä¿®æ”¹&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;int FD_ISSET(int fd, fd_set *fdset)ï¼š&lt;/code&gt;æ£€æŸ¥é›†åˆä¸­æŒ‡å®šçš„æ–‡ä»¶æè¿°ç¬¦æ˜¯å¦å¯ä»¥è¯»å†™ã€‚ç”¨æˆ·çº¿ç¨‹&lt;code&gt;éå†&lt;/code&gt;æ–‡ä»¶æè¿°ç¬¦é›†åˆ,è°ƒç”¨è¯¥æ–¹æ³•æ£€æŸ¥ç›¸åº”çš„æ–‡ä»¶æè¿°ç¬¦æ˜¯å¦&lt;code&gt;IOå°±ç»ª&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;void FD_CLR(int fd, fd_set *fdset)ï¼š&lt;/code&gt;å°†ä¸€ä¸ªç»™å®šçš„æ–‡ä»¶æè¿°ç¬¦ä»é›†åˆä¸­åˆ é™¤&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æ€§èƒ½å¼€é”€&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è™½ç„¶&lt;code&gt;select&lt;/code&gt;è§£å†³äº†&lt;code&gt;éé˜»å¡IOæ¨¡å‹&lt;/code&gt;ä¸­é¢‘ç¹å‘èµ·&lt;code&gt;ç³»ç»Ÿè°ƒç”¨&lt;/code&gt;çš„é—®é¢˜ï¼Œä½†æ˜¯åœ¨æ•´ä¸ª&lt;code&gt;select&lt;/code&gt;å·¥ä½œè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¿˜æ˜¯çœ‹å‡ºäº†&lt;code&gt;select&lt;/code&gt;æœ‰äº›ä¸è¶³çš„åœ°æ–¹ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;åœ¨å‘èµ·&lt;code&gt;select&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨ä»¥åŠè¿”å›æ—¶ï¼Œç”¨æˆ·çº¿ç¨‹å„å‘ç”Ÿäº†ä¸€æ¬¡&lt;code&gt;ç”¨æˆ·æ€&lt;/code&gt;åˆ°&lt;code&gt;å†…æ ¸æ€&lt;/code&gt;ä»¥åŠ&lt;code&gt;å†…æ ¸æ€&lt;/code&gt;åˆ°&lt;code&gt;ç”¨æˆ·æ€&lt;/code&gt;çš„ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ã€‚&lt;strong&gt;å‘ç”Ÿ2æ¬¡ä¸Šä¸‹æ–‡&lt;code&gt;åˆ‡æ¢&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;åœ¨å‘èµ·&lt;code&gt;select&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨ä»¥åŠè¿”å›æ—¶ï¼Œç”¨æˆ·çº¿ç¨‹åœ¨&lt;code&gt;å†…æ ¸æ€&lt;/code&gt;éœ€è¦å°†&lt;code&gt;æ–‡ä»¶æè¿°ç¬¦é›†åˆ&lt;/code&gt;ä»ç”¨æˆ·ç©ºé—´&lt;code&gt;æ‹·è´&lt;/code&gt;åˆ°å†…æ ¸ç©ºé—´ã€‚ä»¥åŠåœ¨å†…æ ¸ä¿®æ”¹å®Œ&lt;code&gt;æ–‡ä»¶æè¿°ç¬¦é›†åˆ&lt;/code&gt;åï¼Œåˆè¦å°†å®ƒä»å†…æ ¸ç©ºé—´&lt;code&gt;æ‹·è´&lt;/code&gt;åˆ°ç”¨æˆ·ç©ºé—´ã€‚&lt;strong&gt;å‘ç”Ÿ2æ¬¡æ–‡ä»¶æè¿°ç¬¦é›†åˆçš„&lt;code&gt;æ‹·è´&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;è™½ç„¶ç”±åŸæ¥åœ¨&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;å‘èµ·è½®è¯¢&lt;code&gt;ä¼˜åŒ–æˆäº†&lt;/code&gt;åœ¨&lt;code&gt;å†…æ ¸ç©ºé—´&lt;/code&gt;å‘èµ·è½®è¯¢ä½†&lt;code&gt;select&lt;/code&gt;ä¸ä¼šå‘Šè¯‰ç”¨æˆ·çº¿ç¨‹åˆ°åº•æ˜¯å“ªäº›&lt;code&gt;Socket&lt;/code&gt;ä¸Šå‘ç”Ÿäº†&lt;code&gt;IOå°±ç»ª&lt;/code&gt;äº‹ä»¶ï¼Œåªæ˜¯å¯¹&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„&lt;code&gt;Socket&lt;/code&gt;ä½œäº†æ ‡è®°ï¼Œç”¨æˆ·çº¿ç¨‹ä¾ç„¶è¦&lt;code&gt;éå†&lt;/code&gt;æ–‡ä»¶æè¿°ç¬¦é›†åˆå»æŸ¥æ‰¾å…·ä½“&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„&lt;code&gt;Socket&lt;/code&gt;ã€‚æ—¶é—´å¤æ‚åº¦ä¾ç„¶ä¸º&lt;code&gt;O(n)&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œç½‘ç»œè¿æ¥å¹¶ä¸æ€»æ˜¯æ´»è·ƒçš„ï¼Œå¦‚æœ&lt;code&gt;select&lt;/code&gt;ç›‘å¬äº†å¤§é‡çš„å®¢æˆ·ç«¯è¿æ¥ï¼Œåªæœ‰å°‘æ•°çš„è¿æ¥æ´»è·ƒï¼Œç„¶è€Œä½¿ç”¨è½®è¯¢çš„è¿™ç§æ–¹å¼ä¼šéšç€è¿æ¥æ•°çš„å¢å¤§ï¼Œæ•ˆç‡ä¼šè¶Šæ¥è¶Šä½ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;å†…æ ¸&lt;/code&gt;ä¼šå¯¹åŸå§‹çš„&lt;code&gt;æ–‡ä»¶æè¿°ç¬¦é›†åˆ&lt;/code&gt;è¿›è¡Œä¿®æ”¹ã€‚å¯¼è‡´æ¯æ¬¡åœ¨ç”¨æˆ·ç©ºé—´é‡æ–°å‘èµ·&lt;code&gt;select&lt;/code&gt;è°ƒç”¨æ—¶ï¼Œéƒ½éœ€è¦å¯¹&lt;code&gt;æ–‡ä»¶æè¿°ç¬¦é›†åˆ&lt;/code&gt;è¿›è¡Œ&lt;code&gt;é‡ç½®&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;BitMap&lt;/code&gt;ç»“æ„çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆï¼Œé•¿åº¦ä¸ºå›ºå®šçš„&lt;code&gt;1024&lt;/code&gt;,æ‰€ä»¥åªèƒ½ç›‘å¬&lt;code&gt;0~1023&lt;/code&gt;çš„æ–‡ä»¶æè¿°ç¬¦ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;select&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨ ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»¥ä¸Š&lt;code&gt;select&lt;/code&gt;çš„ä¸è¶³æ‰€äº§ç”Ÿçš„&lt;code&gt;æ€§èƒ½å¼€é”€&lt;/code&gt;éƒ½ä¼šéšç€å¹¶å‘é‡çš„å¢å¤§è€Œ&lt;code&gt;çº¿æ€§å¢é•¿&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¾ˆæ˜æ˜¾&lt;code&gt;select&lt;/code&gt;ä¹Ÿä¸èƒ½è§£å†³&lt;code&gt;C10K&lt;/code&gt;é—®é¢˜ï¼Œåªé€‚ç”¨äº&lt;code&gt;1000&lt;/code&gt;ä¸ªå·¦å³çš„å¹¶å‘è¿æ¥åœºæ™¯ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;poll&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;poll&lt;/code&gt;ç›¸å½“äºæ˜¯æ”¹è¿›ç‰ˆçš„&lt;code&gt;select&lt;/code&gt;ï¼Œä½†æ˜¯å·¥ä½œåŸç†åŸºæœ¬å’Œ&lt;code&gt;select&lt;/code&gt;æ²¡æœ‰æœ¬è´¨çš„åŒºåˆ«ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;poll&lt;/span&gt;&lt;span&gt;(structÂ pollfdÂ *fds,Â &lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â nfds,Â &lt;span&gt;int&lt;/span&gt;Â timeout)&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;structÂ pollfdÂ {&lt;br/&gt;Â Â Â Â intÂ Â Â fd;Â Â Â Â Â Â Â Â Â /*Â æ–‡ä»¶æè¿°ç¬¦Â */&lt;br/&gt;Â Â Â Â shortÂ events;Â Â Â Â Â /*Â éœ€è¦ç›‘å¬çš„äº‹ä»¶Â */&lt;br/&gt;Â Â Â Â shortÂ revents;Â Â Â Â /*Â å®é™…å‘ç”Ÿçš„äº‹ä»¶Â ç”±å†…æ ¸ä¿®æ”¹è®¾ç½®Â */&lt;br/&gt;};&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;select&lt;/code&gt;ä¸­ä½¿ç”¨çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆæ˜¯é‡‡ç”¨çš„å›ºå®šé•¿åº¦ä¸º1024çš„&lt;code&gt;BitMap&lt;/code&gt;ç»“æ„çš„&lt;code&gt;fd_set&lt;/code&gt;ï¼Œè€Œ&lt;code&gt;poll&lt;/code&gt;æ¢æˆäº†ä¸€ä¸ª&lt;code&gt;pollfd&lt;/code&gt;ç»“æ„æ²¡æœ‰å›ºå®šé•¿åº¦çš„æ•°ç»„ï¼Œè¿™æ ·å°±æ²¡æœ‰äº†æœ€å¤§æè¿°ç¬¦æ•°é‡çš„é™åˆ¶ï¼ˆå½“ç„¶è¿˜ä¼šå—åˆ°ç³»ç»Ÿæ–‡ä»¶æè¿°ç¬¦é™åˆ¶ï¼‰&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;poll&lt;/code&gt;åªæ˜¯æ”¹è¿›äº†&lt;code&gt;select&lt;/code&gt;åªèƒ½ç›‘å¬&lt;code&gt;1024&lt;/code&gt;ä¸ªæ–‡ä»¶æè¿°ç¬¦çš„æ•°é‡é™åˆ¶ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰åœ¨æ€§èƒ½æ–¹é¢åšå‡ºæ”¹è¿›ã€‚å’Œ&lt;code&gt;select&lt;/code&gt;ä¸Šæœ¬è´¨å¹¶æ²¡æœ‰å¤šå¤§å·®åˆ«ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;åŒæ ·éœ€è¦åœ¨&lt;code&gt;å†…æ ¸ç©ºé—´&lt;/code&gt;å’Œ&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;ä¸­å¯¹æ–‡ä»¶æè¿°ç¬¦é›†åˆè¿›è¡Œ&lt;code&gt;è½®è¯¢&lt;/code&gt;ï¼ŒæŸ¥æ‰¾å‡º&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„&lt;code&gt;Socket&lt;/code&gt;çš„æ—¶é—´å¤æ‚åº¦ä¾ç„¶ä¸º&lt;code&gt;O(n)&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;åŒæ ·éœ€è¦å°†&lt;code&gt;åŒ…å«å¤§é‡æ–‡ä»¶æè¿°ç¬¦çš„é›†åˆ&lt;/code&gt;æ•´ä½“åœ¨&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;å’Œ&lt;code&gt;å†…æ ¸ç©ºé—´&lt;/code&gt;ä¹‹é—´&lt;code&gt;æ¥å›å¤åˆ¶&lt;/code&gt;ï¼Œ&lt;strong&gt;æ— è®ºè¿™äº›æ–‡ä»¶æè¿°ç¬¦æ˜¯å¦å°±ç»ª&lt;/strong&gt;ã€‚ä»–ä»¬çš„å¼€é”€éƒ½ä¼šéšç€æ–‡ä»¶æè¿°ç¬¦æ•°é‡çš„å¢åŠ è€Œçº¿æ€§å¢å¤§ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;selectï¼Œpoll&lt;/code&gt;åœ¨æ¯æ¬¡æ–°å¢ï¼Œåˆ é™¤éœ€è¦ç›‘å¬çš„socketæ—¶ï¼Œéƒ½éœ€è¦å°†æ•´ä¸ªæ–°çš„&lt;code&gt;socket&lt;/code&gt;é›†åˆå…¨é‡ä¼ è‡³&lt;code&gt;å†…æ ¸&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;poll&lt;/code&gt;åŒæ ·ä¸é€‚ç”¨é«˜å¹¶å‘çš„åœºæ™¯ã€‚ä¾ç„¶æ— æ³•è§£å†³&lt;code&gt;C10K&lt;/code&gt;é—®é¢˜ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;epoll&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šè¿‡ä¸Šè¾¹å¯¹&lt;code&gt;select,poll&lt;/code&gt;æ ¸å¿ƒåŸç†çš„ä»‹ç»ï¼Œæˆ‘ä»¬çœ‹åˆ°&lt;code&gt;select,poll&lt;/code&gt;çš„æ€§èƒ½ç“¶é¢ˆä¸»è¦ä½“ç°åœ¨ä¸‹é¢ä¸‰ä¸ªåœ°æ–¹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å› ä¸ºå†…æ ¸ä¸ä¼šä¿å­˜æˆ‘ä»¬è¦ç›‘å¬çš„&lt;code&gt;socket&lt;/code&gt;é›†åˆï¼Œæ‰€ä»¥åœ¨æ¯æ¬¡è°ƒç”¨&lt;code&gt;select,poll&lt;/code&gt;çš„æ—¶å€™éƒ½éœ€è¦ä¼ å…¥ï¼Œä¼ å‡ºå…¨é‡çš„&lt;code&gt;socket&lt;/code&gt;æ–‡ä»¶æè¿°ç¬¦é›†åˆã€‚è¿™å¯¼è‡´äº†å¤§é‡çš„æ–‡ä»¶æè¿°ç¬¦åœ¨&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;å’Œ&lt;code&gt;å†…æ ¸ç©ºé—´&lt;/code&gt;é¢‘ç¹çš„æ¥å›å¤åˆ¶ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ç”±äºå†…æ ¸ä¸ä¼šé€šçŸ¥å…·ä½“&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„&lt;code&gt;socket&lt;/code&gt;ï¼Œåªæ˜¯åœ¨è¿™äº›&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„socketä¸Šæ‰“å¥½æ ‡è®°ï¼Œæ‰€ä»¥å½“&lt;code&gt;select&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨è¿”å›æ—¶ï¼Œåœ¨&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;è¿˜æ˜¯éœ€è¦&lt;code&gt;å®Œæ•´éå†&lt;/code&gt;ä¸€é&lt;code&gt;socket&lt;/code&gt;æ–‡ä»¶æè¿°ç¬¦é›†åˆæ¥è·å–å…·ä½“&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„&lt;code&gt;socket&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;åœ¨&lt;code&gt;å†…æ ¸ç©ºé—´&lt;/code&gt;ä¸­ä¹Ÿæ˜¯é€šè¿‡éå†çš„æ–¹å¼æ¥å¾—åˆ°&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„&lt;code&gt;socket&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹&lt;code&gt;epoll&lt;/code&gt;æ˜¯å¦‚ä½•è§£å†³è¿™äº›é—®é¢˜çš„ã€‚åœ¨ä»‹ç»&lt;code&gt;epoll&lt;/code&gt;çš„æ ¸å¿ƒåŸç†ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦ä»‹ç»ä¸‹ç†è§£&lt;code&gt;epoll&lt;/code&gt;å·¥ä½œè¿‡ç¨‹æ‰€éœ€è¦çš„ä¸€äº›æ ¸å¿ƒåŸºç¡€çŸ¥è¯†ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Socketçš„åˆ›å»º&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœåŠ¡ç«¯çº¿ç¨‹è°ƒç”¨&lt;code&gt;accept&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨åå¼€å§‹&lt;code&gt;é˜»å¡&lt;/code&gt;ï¼Œå½“æœ‰å®¢æˆ·ç«¯è¿æ¥ä¸Šæ¥å¹¶å®Œæˆ&lt;code&gt;TCPä¸‰æ¬¡æ¡æ‰‹&lt;/code&gt;åï¼Œ&lt;code&gt;å†…æ ¸&lt;/code&gt;ä¼šåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„&lt;code&gt;Socket&lt;/code&gt;ä½œä¸ºæœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯é€šä¿¡çš„&lt;code&gt;å†…æ ¸&lt;/code&gt;æ¥å£ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨Linuxå†…æ ¸çš„è§’åº¦çœ‹æ¥ï¼Œä¸€åˆ‡çš†æ˜¯æ–‡ä»¶ï¼Œ&lt;code&gt;Socket&lt;/code&gt;ä¹Ÿä¸ä¾‹å¤–ï¼Œå½“å†…æ ¸åˆ›å»ºå‡º&lt;code&gt;Socket&lt;/code&gt;ä¹‹åï¼Œä¼šå°†è¿™ä¸ª&lt;code&gt;Socket&lt;/code&gt;æ”¾åˆ°å½“å‰è¿›ç¨‹æ‰€æ‰“å¼€çš„æ–‡ä»¶åˆ—è¡¨ä¸­ç®¡ç†èµ·æ¥ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹è¿›ç¨‹ç®¡ç†è¿™äº›æ‰“å¼€çš„æ–‡ä»¶åˆ—è¡¨ç›¸å…³çš„å†…æ ¸æ•°æ®ç»“æ„æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿåœ¨äº†è§£å®Œè¿™äº›æ•°æ®ç»“æ„åï¼Œæˆ‘ä»¬ä¼šæ›´åŠ æ¸…æ™°çš„ç†è§£&lt;code&gt;Socket&lt;/code&gt;åœ¨å†…æ ¸ä¸­æ‰€å‘æŒ¥çš„ä½œç”¨ã€‚å¹¶ä¸”å¯¹åé¢æˆ‘ä»¬ç†è§£&lt;code&gt;epoll&lt;/code&gt;çš„åˆ›å»ºè¿‡ç¨‹æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;è¿›ç¨‹ä¸­ç®¡ç†æ–‡ä»¶åˆ—è¡¨ç»“æ„&lt;span/&gt;&lt;/h4&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.48629032258064514&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEDCWo05bLDqtgBwGwAPGHKNGsXCEk7O6LB3ksNKFiaU4qgPouZwQDrFg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;figcaption&gt;è¿›ç¨‹ä¸­ç®¡ç†æ–‡ä»¶åˆ—è¡¨ç»“æ„.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;struct tast_struct&lt;/code&gt;æ˜¯å†…æ ¸ä¸­ç”¨æ¥è¡¨ç¤ºè¿›ç¨‹çš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œå®ƒåŒ…å«äº†è¿›ç¨‹çš„æ‰€æœ‰ä¿¡æ¯ã€‚æœ¬å°èŠ‚æˆ‘ä»¬åªåˆ—å‡ºå’Œæ–‡ä»¶ç®¡ç†ç›¸å…³çš„å±æ€§ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­è¿›ç¨‹å†…æ‰“å¼€çš„æ‰€æœ‰æ–‡ä»¶æ˜¯é€šè¿‡ä¸€ä¸ªæ•°ç»„&lt;code&gt;fd_array&lt;/code&gt;æ¥è¿›è¡Œç»„ç»‡ç®¡ç†ï¼Œæ•°ç»„çš„ä¸‹æ ‡å³ä¸ºæˆ‘ä»¬å¸¸æåˆ°çš„&lt;code&gt;æ–‡ä»¶æè¿°ç¬¦&lt;/code&gt;ï¼Œæ•°ç»„ä¸­å­˜æ”¾çš„æ˜¯å¯¹åº”çš„æ–‡ä»¶æ•°æ®ç»“æ„&lt;code&gt;struct file&lt;/code&gt;ã€‚æ¯æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ï¼Œå†…æ ¸éƒ½ä¼šåˆ›å»ºä¸€ä¸ª&lt;code&gt;struct file&lt;/code&gt;ä¸ä¹‹å¯¹åº”ï¼Œå¹¶åœ¨&lt;code&gt;fd_array&lt;/code&gt;ä¸­æ‰¾åˆ°ä¸€ä¸ªç©ºé—²ä½ç½®åˆ†é…ç»™å®ƒï¼Œæ•°ç»„ä¸­å¯¹åº”çš„ä¸‹æ ‡ï¼Œå°±æ˜¯æˆ‘ä»¬åœ¨&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;ç”¨åˆ°çš„&lt;code&gt;æ–‡ä»¶æè¿°ç¬¦&lt;/code&gt;ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å¯¹äºä»»ä½•ä¸€ä¸ªè¿›ç¨‹ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ–‡ä»¶æè¿°ç¬¦ &lt;code&gt;0&lt;/code&gt;è¡¨ç¤º &lt;code&gt;stdin æ ‡å‡†è¾“å…¥&lt;/code&gt;ï¼Œæ–‡ä»¶æè¿°ç¬¦ &lt;code&gt;1&lt;/code&gt;è¡¨ç¤º&lt;code&gt;stdout æ ‡å‡†è¾“å‡º&lt;/code&gt;ï¼Œæ–‡ä»¶æè¿°ç¬¦&lt;code&gt;2&lt;/code&gt;è¡¨ç¤º&lt;code&gt;stderr æ ‡å‡†é”™è¯¯è¾“å‡º&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿›ç¨‹ä¸­æ‰“å¼€çš„æ–‡ä»¶åˆ—è¡¨&lt;code&gt;fd_array&lt;/code&gt;å®šä¹‰åœ¨å†…æ ¸æ•°æ®ç»“æ„&lt;code&gt;struct files_struct&lt;/code&gt;ä¸­ï¼Œåœ¨&lt;code&gt;struct fdtable&lt;/code&gt;ç»“æ„ä¸­æœ‰ä¸€ä¸ªæŒ‡é’ˆ&lt;code&gt;struct fd **fd&lt;/code&gt;æŒ‡å‘&lt;code&gt;fd_array&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ç”±äºæœ¬å°èŠ‚è®¨è®ºçš„æ˜¯å†…æ ¸ç½‘ç»œç³»ç»Ÿéƒ¨åˆ†çš„æ•°æ®ç»“æ„&lt;/strong&gt;ï¼Œæ‰€ä»¥è¿™é‡Œæ‹¿&lt;code&gt;Socket&lt;/code&gt;æ–‡ä»¶ç±»å‹æ¥ä¸¾ä¾‹è¯´æ˜ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”¨äºå°è£…æ–‡ä»¶å…ƒä¿¡æ¯çš„å†…æ ¸æ•°æ®ç»“æ„&lt;code&gt;struct file&lt;/code&gt;ä¸­çš„&lt;code&gt;private_data&lt;/code&gt;æŒ‡é’ˆæŒ‡å‘å…·ä½“çš„&lt;code&gt;Socket&lt;/code&gt;ç»“æ„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;struct file&lt;/code&gt;ä¸­çš„&lt;code&gt;file_operations&lt;/code&gt;å±æ€§å®šä¹‰äº†æ–‡ä»¶çš„æ“ä½œå‡½æ•°ï¼Œä¸åŒçš„æ–‡ä»¶ç±»å‹ï¼Œå¯¹åº”çš„&lt;code&gt;file_operations&lt;/code&gt;æ˜¯ä¸åŒçš„ï¼Œé’ˆå¯¹&lt;code&gt;Socket&lt;/code&gt;æ–‡ä»¶ç±»å‹ï¼Œè¿™é‡Œçš„&lt;code&gt;file_operations&lt;/code&gt;æŒ‡å‘&lt;code&gt;socket_file_ops&lt;/code&gt;ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;æˆ‘ä»¬åœ¨&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;å¯¹&lt;code&gt;Socket&lt;/code&gt;å‘èµ·çš„è¯»å†™ç­‰ç³»ç»Ÿè°ƒç”¨ï¼Œè¿›å…¥å†…æ ¸é¦–å…ˆä¼šè°ƒç”¨çš„æ˜¯&lt;code&gt;Socket&lt;/code&gt;å¯¹åº”çš„&lt;code&gt;struct file&lt;/code&gt;ä¸­æŒ‡å‘çš„&lt;code&gt;socket_file_ops&lt;/code&gt;ã€‚&lt;strong&gt;æ¯”å¦‚&lt;/strong&gt;ï¼šå¯¹&lt;code&gt;Socket&lt;/code&gt;å‘èµ·&lt;code&gt;write&lt;/code&gt;å†™æ“ä½œï¼Œåœ¨å†…æ ¸ä¸­é¦–å…ˆè¢«è°ƒç”¨çš„å°±æ˜¯&lt;code&gt;socket_file_ops&lt;/code&gt;ä¸­å®šä¹‰çš„&lt;code&gt;sock_write_iter&lt;/code&gt;ã€‚&lt;code&gt;Socket&lt;/code&gt;å‘èµ·&lt;code&gt;read&lt;/code&gt;è¯»æ“ä½œå†…æ ¸ä¸­å¯¹åº”çš„åˆ™æ˜¯&lt;code&gt;sock_read_iter&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;br/&gt;&lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;const&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;file_operations&lt;/span&gt;Â &lt;span&gt;socket_file_ops&lt;/span&gt;Â =Â {&lt;/span&gt;&lt;br/&gt;Â Â .ownerÂ =Â Â THIS_MODULE,&lt;br/&gt;Â Â .llseekÂ =Â Â no_llseek,&lt;br/&gt;Â Â .read_iterÂ =Â Â sock_read_iter,&lt;br/&gt;Â Â .write_iterÂ =Â Â sock_write_iter,&lt;br/&gt;Â Â .pollÂ =Â Â Â Â sock_poll,&lt;br/&gt;Â Â .unlocked_ioctlÂ =Â sock_ioctl,&lt;br/&gt;Â Â .mmapÂ =Â Â Â Â sock_mmap,&lt;br/&gt;Â Â .releaseÂ =Â Â sock_close,&lt;br/&gt;Â Â .fasyncÂ =Â Â sock_fasync,&lt;br/&gt;Â Â .sendpageÂ =Â Â sock_sendpage,&lt;br/&gt;Â Â .splice_writeÂ =Â generic_splice_sendpage,&lt;br/&gt;Â Â .splice_readÂ =Â Â sock_splice_read,&lt;br/&gt;};&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Socketå†…æ ¸ç»“æ„&lt;span/&gt;&lt;/h4&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6056451612903225&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEV2mJ5ffNML0pVxP679iapicwtrNvRLjAuPJ9EOS0J2VFDtuMicX3Lw3cQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;figcaption&gt;Socketå†…æ ¸ç»“æ„.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æˆ‘ä»¬è¿›è¡Œç½‘ç»œç¨‹åºçš„ç¼–å†™æ—¶ä¼šé¦–å…ˆåˆ›å»ºä¸€ä¸ª&lt;code&gt;Socket&lt;/code&gt;ï¼Œç„¶ååŸºäºè¿™ä¸ª&lt;code&gt;Socket&lt;/code&gt;è¿›è¡Œ&lt;code&gt;bind&lt;/code&gt;ï¼Œ&lt;code&gt;listen&lt;/code&gt;ï¼Œæˆ‘ä»¬å…ˆå°†è¿™ä¸ª&lt;code&gt;Socket&lt;/code&gt;ç§°ä½œä¸º&lt;code&gt;ç›‘å¬Socket&lt;/code&gt;ã€‚&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å½“æˆ‘ä»¬è°ƒç”¨&lt;code&gt;accept&lt;/code&gt;åï¼Œå†…æ ¸ä¼šåŸºäº&lt;code&gt;ç›‘å¬Socket&lt;/code&gt;åˆ›å»ºå‡ºæ¥ä¸€ä¸ªæ–°çš„&lt;code&gt;Socket&lt;/code&gt;ä¸“é—¨ç”¨äºä¸å®¢æˆ·ç«¯ä¹‹é—´çš„ç½‘ç»œé€šä¿¡ã€‚å¹¶å°†&lt;code&gt;ç›‘å¬Socket&lt;/code&gt;ä¸­çš„&lt;code&gt;Socketæ“ä½œå‡½æ•°é›†åˆ&lt;/code&gt;ï¼ˆ&lt;code&gt;inet_stream_ops&lt;/code&gt;ï¼‰&lt;code&gt;ops&lt;/code&gt;èµ‹å€¼åˆ°æ–°çš„&lt;code&gt;Socket&lt;/code&gt;çš„&lt;code&gt;ops&lt;/code&gt;å±æ€§ä¸­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;const&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;proto_ops&lt;/span&gt;Â &lt;span&gt;inet_stream_ops&lt;/span&gt;Â =Â {&lt;/span&gt;&lt;br/&gt;Â Â .bindÂ =Â inet_bind,&lt;br/&gt;Â Â .connectÂ =Â inet_stream_connect,&lt;br/&gt;Â Â .acceptÂ =Â inet_accept,&lt;br/&gt;Â Â .pollÂ =Â tcp_poll,&lt;br/&gt;Â Â .listenÂ =Â inet_listen,&lt;br/&gt;Â Â .sendmsgÂ =Â inet_sendmsg,&lt;br/&gt;Â Â .recvmsgÂ =Â inet_recvmsg,&lt;br/&gt;Â Â ......&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ&lt;code&gt;ç›‘å¬çš„ socket&lt;/code&gt;å’ŒçœŸæ­£ç”¨æ¥ç½‘ç»œé€šä¿¡çš„ &lt;code&gt;Socket&lt;/code&gt;ï¼Œæ˜¯ä¸¤ä¸ª Socketï¼Œä¸€ä¸ªå«ä½œ&lt;code&gt;ç›‘å¬ Socket&lt;/code&gt;ï¼Œä¸€ä¸ªå«ä½œ&lt;code&gt;å·²è¿æ¥çš„Socket&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ol start=&quot;2&quot; data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;æ¥ç€å†…æ ¸ä¼šä¸º&lt;code&gt;å·²è¿æ¥çš„Socket&lt;/code&gt;åˆ›å»º&lt;code&gt;struct file&lt;/code&gt;å¹¶åˆå§‹åŒ–ï¼Œå¹¶æŠŠSocketæ–‡ä»¶æ“ä½œå‡½æ•°é›†åˆï¼ˆ&lt;code&gt;socket_file_ops&lt;/code&gt;ï¼‰èµ‹å€¼ç»™&lt;code&gt;struct file&lt;/code&gt;ä¸­çš„&lt;code&gt;f_ops&lt;/code&gt;æŒ‡é’ˆã€‚ç„¶åå°†&lt;code&gt;struct socket&lt;/code&gt;ä¸­çš„&lt;code&gt;file&lt;/code&gt;æŒ‡é’ˆæŒ‡å‘è¿™ä¸ªæ–°åˆ†é…ç”³è¯·çš„&lt;code&gt;struct file&lt;/code&gt;ç»“æ„ä½“ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å†…æ ¸ä¼šç»´æŠ¤ä¸¤ä¸ªé˜Ÿåˆ—ï¼š&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ä¸€ä¸ªæ˜¯å·²ç»å®Œæˆ&lt;code&gt;TCPä¸‰æ¬¡æ¡æ‰‹&lt;/code&gt;ï¼Œè¿æ¥çŠ¶æ€å¤„äº&lt;code&gt;established&lt;/code&gt;çš„è¿æ¥é˜Ÿåˆ—ã€‚å†…æ ¸ä¸­ä¸º&lt;code&gt;icsk_accept_queue&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸€ä¸ªæ˜¯è¿˜æ²¡æœ‰å®Œæˆ&lt;code&gt;TCPä¸‰æ¬¡æ¡æ‰‹&lt;/code&gt;ï¼Œè¿æ¥çŠ¶æ€å¤„äº&lt;code&gt;syn_rcvd&lt;/code&gt;çš„åŠè¿æ¥é˜Ÿåˆ—ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;&lt;ol start=&quot;3&quot; data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ç„¶åè°ƒç”¨&lt;code&gt;socket-&amp;gt;ops-&amp;gt;accept&lt;/code&gt;ï¼Œä»&lt;code&gt;Socketå†…æ ¸ç»“æ„å›¾&lt;/code&gt;ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¶å®è°ƒç”¨çš„æ˜¯&lt;code&gt;inet_accept&lt;/code&gt;ï¼Œè¯¥å‡½æ•°ä¼šåœ¨&lt;code&gt;icsk_accept_queue&lt;/code&gt;ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰å·²ç»å»ºç«‹å¥½çš„è¿æ¥ï¼Œå¦‚æœæœ‰çš„è¯ï¼Œç›´æ¥ä»&lt;code&gt;icsk_accept_queue&lt;/code&gt;ä¸­è·å–å·²ç»åˆ›å»ºå¥½çš„&lt;code&gt;struct sock&lt;/code&gt;ã€‚å¹¶å°†è¿™ä¸ª&lt;code&gt;struct sock&lt;/code&gt;å¯¹è±¡èµ‹å€¼ç»™&lt;code&gt;struct socket&lt;/code&gt;ä¸­çš„&lt;code&gt;sock&lt;/code&gt;æŒ‡é’ˆã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;struct sock&lt;/code&gt;åœ¨&lt;code&gt;struct socket&lt;/code&gt;ä¸­æ˜¯ä¸€ä¸ªéå¸¸æ ¸å¿ƒçš„å†…æ ¸å¯¹è±¡ï¼Œæ­£æ˜¯åœ¨è¿™é‡Œå®šä¹‰äº†æˆ‘ä»¬åœ¨ä»‹ç»&lt;code&gt;ç½‘ç»œåŒ…çš„æ¥æ”¶å‘é€æµç¨‹&lt;/code&gt;ä¸­æåˆ°çš„&lt;code&gt;æ¥æ”¶é˜Ÿåˆ—&lt;/code&gt;ï¼Œ&lt;code&gt;å‘é€é˜Ÿåˆ—&lt;/code&gt;ï¼Œ&lt;code&gt;ç­‰å¾…é˜Ÿåˆ—&lt;/code&gt;ï¼Œ&lt;code&gt;æ•°æ®å°±ç»ªå›è°ƒå‡½æ•°æŒ‡é’ˆ&lt;/code&gt;ï¼Œ&lt;code&gt;å†…æ ¸åè®®æ ˆæ“ä½œå‡½æ•°é›†åˆ&lt;/code&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;æ ¹æ®åˆ›å»º&lt;code&gt;Socket&lt;/code&gt;æ—¶å‘èµ·çš„ç³»ç»Ÿè°ƒç”¨&lt;code&gt;sock_create&lt;/code&gt;ä¸­çš„&lt;code&gt;protocol&lt;/code&gt;å‚æ•°(å¯¹äº&lt;code&gt;TCPåè®®&lt;/code&gt;è¿™é‡Œçš„å‚æ•°å€¼ä¸º&lt;code&gt;SOCK_STREAM&lt;/code&gt;)æŸ¥æ‰¾åˆ°å¯¹äº tcp å®šä¹‰çš„æ“ä½œæ–¹æ³•å®ç°é›†åˆ &lt;code&gt;inet_stream_ops&lt;/code&gt; å’Œ&lt;code&gt;tcp_prot&lt;/code&gt;ã€‚å¹¶æŠŠå®ƒä»¬åˆ†åˆ«è®¾ç½®åˆ°&lt;code&gt;socket-&amp;gt;ops&lt;/code&gt;å’Œ&lt;code&gt;sock-&amp;gt;sk_prot&lt;/code&gt;ä¸Šã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;è¿™é‡Œå¯ä»¥å›çœ‹ä¸‹æœ¬å°èŠ‚å¼€å¤´çš„ã€ŠSocketå†…æ ¸ç»“æ„å›¾ã€‹æ‹ä¸€ä¸‹ä»–ä»¬ä¹‹é—´çš„å…³ç³»ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;code&gt;socket&lt;/code&gt;ç›¸å…³çš„æ“ä½œæ¥å£å®šä¹‰åœ¨&lt;code&gt;inet_stream_ops&lt;/code&gt;å‡½æ•°é›†åˆä¸­ï¼Œè´Ÿè´£å¯¹ä¸Šç»™ç”¨æˆ·æä¾›æ¥å£ã€‚è€Œ&lt;code&gt;socket&lt;/code&gt;ä¸å†…æ ¸åè®®æ ˆä¹‹é—´çš„æ“ä½œæ¥å£å®šä¹‰åœ¨&lt;code&gt;struct sock&lt;/code&gt;ä¸­çš„&lt;code&gt;sk_prot&lt;/code&gt;æŒ‡é’ˆä¸Šï¼Œè¿™é‡ŒæŒ‡å‘&lt;code&gt;tcp_prot&lt;/code&gt;åè®®æ“ä½œå‡½æ•°é›†åˆã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;proto&lt;/span&gt;Â &lt;span&gt;tcp_prot&lt;/span&gt;Â =Â {&lt;/span&gt;&lt;br/&gt;Â Â .nameÂ Â Â Â Â Â =Â &lt;span&gt;&quot;TCP&quot;&lt;/span&gt;,&lt;br/&gt;Â Â .ownerÂ Â Â Â Â Â =Â THIS_MODULE,&lt;br/&gt;Â Â .closeÂ Â Â Â Â Â =Â tcp_close,&lt;br/&gt;Â Â .connectÂ Â Â Â =Â tcp_v4_connect,&lt;br/&gt;Â Â .disconnectÂ Â Â Â =Â tcp_disconnect,&lt;br/&gt;Â Â .acceptÂ Â Â Â Â Â =Â inet_csk_accept,&lt;br/&gt;Â Â .keepaliveÂ Â Â Â =Â tcp_set_keepalive,&lt;br/&gt;Â Â .recvmsgÂ Â Â Â =Â tcp_recvmsg,&lt;br/&gt;Â Â .sendmsgÂ Â Â Â =Â tcp_sendmsg,&lt;br/&gt;Â Â .backlog_rcvÂ Â Â Â =Â tcp_v4_do_rcv,&lt;br/&gt;Â Â Â ......&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ä¹‹å‰æåˆ°çš„å¯¹&lt;code&gt;Socket&lt;/code&gt;å‘èµ·çš„ç³»ç»ŸIOè°ƒç”¨ï¼Œåœ¨å†…æ ¸ä¸­é¦–å…ˆä¼šè°ƒç”¨&lt;code&gt;Socket&lt;/code&gt;çš„æ–‡ä»¶ç»“æ„&lt;code&gt;struct file&lt;/code&gt;ä¸­çš„&lt;code&gt;file_operations&lt;/code&gt;æ–‡ä»¶æ“ä½œé›†åˆï¼Œç„¶åè°ƒç”¨&lt;code&gt;struct socket&lt;/code&gt;ä¸­çš„&lt;code&gt;ops&lt;/code&gt;æŒ‡å‘çš„&lt;code&gt;inet_stream_ops&lt;/code&gt;socketæ“ä½œå‡½æ•°ï¼Œæœ€ç»ˆè°ƒç”¨åˆ°&lt;code&gt;struct sock&lt;/code&gt;ä¸­&lt;code&gt;sk_prot&lt;/code&gt;æŒ‡é’ˆæŒ‡å‘çš„&lt;code&gt;tcp_prot&lt;/code&gt;å†…æ ¸åè®®æ ˆæ“ä½œå‡½æ•°æ¥å£é›†åˆã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5620967741935484&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEulX0vLf43hBicEqX8FejWO7Z5ru4ZyWKVmQ5gRSoLruicozQOwotH6fQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;figcaption&gt;ç³»ç»ŸIOè°ƒç”¨ç»“æ„.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å°†&lt;code&gt;struct sock&lt;/code&gt; å¯¹è±¡ä¸­çš„&lt;code&gt;sk_data_ready&lt;/code&gt; å‡½æ•°æŒ‡é’ˆè®¾ç½®ä¸º &lt;code&gt;sock_def_readable&lt;/code&gt;ï¼Œåœ¨&lt;code&gt;Socket&lt;/code&gt;æ•°æ®å°±ç»ªçš„æ—¶å€™å†…æ ¸ä¼šå›è°ƒè¯¥å‡½æ•°ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;struct sock&lt;/code&gt;ä¸­çš„&lt;code&gt;ç­‰å¾…é˜Ÿåˆ—&lt;/code&gt;ä¸­å­˜æ”¾çš„æ˜¯ç³»ç»ŸIOè°ƒç”¨å‘ç”Ÿé˜»å¡çš„&lt;code&gt;è¿›ç¨‹fd&lt;/code&gt;ï¼Œä»¥åŠç›¸åº”çš„&lt;code&gt;å›è°ƒå‡½æ•°&lt;/code&gt;ã€‚&lt;strong&gt;è®°ä½è¿™ä¸ªåœ°æ–¹ï¼Œåè¾¹ä»‹ç»epollçš„æ—¶å€™æˆ‘ä»¬è¿˜ä¼šæåˆ°ï¼&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;ol start=&quot;4&quot; data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å½“&lt;code&gt;struct file&lt;/code&gt;ï¼Œ&lt;code&gt;struct socket&lt;/code&gt;ï¼Œ&lt;code&gt;struct sock&lt;/code&gt;è¿™äº›æ ¸å¿ƒçš„å†…æ ¸å¯¹è±¡åˆ›å»ºå¥½ä¹‹åï¼Œæœ€åå°±æ˜¯æŠŠ&lt;code&gt;socket&lt;/code&gt;å¯¹è±¡å¯¹åº”çš„&lt;code&gt;struct file&lt;/code&gt;æ”¾åˆ°è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶åˆ—è¡¨&lt;code&gt;fd_array&lt;/code&gt;ä¸­ã€‚éšåç³»ç»Ÿè°ƒç”¨&lt;code&gt;accept&lt;/code&gt;è¿”å›&lt;code&gt;socket&lt;/code&gt;çš„æ–‡ä»¶æè¿°ç¬¦&lt;code&gt;fd&lt;/code&gt;ç»™ç”¨æˆ·ç¨‹åºã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é˜»å¡IOä¸­ç”¨æˆ·è¿›ç¨‹é˜»å¡ä»¥åŠå”¤é†’åŸç†&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å‰è¾¹å°èŠ‚æˆ‘ä»¬ä»‹ç»&lt;code&gt;é˜»å¡IO&lt;/code&gt;çš„æ—¶å€™æåˆ°ï¼Œå½“ç”¨æˆ·è¿›ç¨‹å‘èµ·ç³»ç»ŸIOè°ƒç”¨æ—¶ï¼Œè¿™é‡Œæˆ‘ä»¬æ‹¿&lt;code&gt;read&lt;/code&gt;ä¸¾ä¾‹ï¼Œç”¨æˆ·è¿›ç¨‹ä¼šåœ¨&lt;code&gt;å†…æ ¸æ€&lt;/code&gt;æŸ¥çœ‹å¯¹åº”&lt;code&gt;Socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºæ˜¯å¦æœ‰æ•°æ®åˆ°æ¥ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;Socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºæœ‰æ•°æ®ï¼Œåˆ™æ‹·è´æ•°æ®åˆ°&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;ï¼Œç³»ç»Ÿè°ƒç”¨è¿”å›ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;Socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºæ²¡æœ‰æ•°æ®ï¼Œåˆ™ç”¨æˆ·è¿›ç¨‹è®©å‡º&lt;code&gt;CPU&lt;/code&gt;è¿›å…¥&lt;code&gt;é˜»å¡çŠ¶æ€&lt;/code&gt;ï¼Œå½“æ•°æ®åˆ°è¾¾æ¥æ”¶ç¼“å†²åŒºæ—¶ï¼Œç”¨æˆ·è¿›ç¨‹ä¼šè¢«å”¤é†’ï¼Œä»&lt;code&gt;é˜»å¡çŠ¶æ€&lt;/code&gt;è¿›å…¥&lt;code&gt;å°±ç»ªçŠ¶æ€&lt;/code&gt;ï¼Œç­‰å¾…CPUè°ƒåº¦ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬å°èŠ‚æˆ‘ä»¬å°±æ¥çœ‹ä¸‹ç”¨æˆ·è¿›ç¨‹æ˜¯å¦‚ä½•&lt;code&gt;é˜»å¡&lt;/code&gt;åœ¨&lt;code&gt;Socket&lt;/code&gt;ä¸Šï¼Œåˆæ˜¯å¦‚ä½•åœ¨&lt;code&gt;Socket&lt;/code&gt;ä¸Šè¢«å”¤é†’çš„ã€‚&lt;strong&gt;ç†è§£è¿™ä¸ªè¿‡ç¨‹å¾ˆé‡è¦ï¼Œå¯¹æˆ‘ä»¬ç†è§£epollçš„äº‹ä»¶é€šçŸ¥è¿‡ç¨‹å¾ˆæœ‰å¸®åŠ©&lt;/strong&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;é¦–å…ˆæˆ‘ä»¬åœ¨ç”¨æˆ·è¿›ç¨‹ä¸­å¯¹&lt;code&gt;Socket&lt;/code&gt;è¿›è¡Œ&lt;code&gt;read&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œç”¨æˆ·è¿›ç¨‹ä¼šä»&lt;code&gt;ç”¨æˆ·æ€&lt;/code&gt;è½¬ä¸º&lt;code&gt;å†…æ ¸æ€&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åœ¨è¿›ç¨‹çš„&lt;code&gt;struct task_struct&lt;/code&gt;ç»“æ„æ‰¾åˆ°&lt;code&gt;fd_array&lt;/code&gt;ï¼Œå¹¶æ ¹æ®&lt;code&gt;Socket&lt;/code&gt;çš„æ–‡ä»¶æè¿°ç¬¦&lt;code&gt;fd&lt;/code&gt;æ‰¾åˆ°å¯¹åº”çš„&lt;code&gt;struct file&lt;/code&gt;ï¼Œè°ƒç”¨&lt;code&gt;struct file&lt;/code&gt;ä¸­çš„æ–‡ä»¶æ“ä½œå‡½æ•°ç»“åˆ&lt;code&gt;file_operations&lt;/code&gt;ï¼Œ&lt;code&gt;read&lt;/code&gt;ç³»ç»Ÿè°ƒç”¨å¯¹åº”çš„æ˜¯&lt;code&gt;sock_read_iter&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åœ¨&lt;code&gt;sock_read_iter&lt;/code&gt;å‡½æ•°ä¸­æ‰¾åˆ°&lt;code&gt;struct file&lt;/code&gt;æŒ‡å‘çš„&lt;code&gt;struct socket&lt;/code&gt;ï¼Œå¹¶è°ƒç”¨&lt;code&gt;socket-&amp;gt;ops-&amp;gt;recvmsg&lt;/code&gt;ï¼Œè¿™é‡Œæˆ‘ä»¬çŸ¥é“è°ƒç”¨çš„æ˜¯&lt;code&gt;inet_stream_ops&lt;/code&gt;é›†åˆä¸­å®šä¹‰çš„&lt;code&gt;inet_recvmsg&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åœ¨&lt;code&gt;inet_recvmsg&lt;/code&gt;ä¸­ä¼šæ‰¾åˆ°&lt;code&gt;struct sock&lt;/code&gt;ï¼Œå¹¶è°ƒç”¨&lt;code&gt;sock-&amp;gt;skprot-&amp;gt;recvmsg&lt;/code&gt;,è¿™é‡Œè°ƒç”¨çš„æ˜¯&lt;code&gt;tcp_prot&lt;/code&gt;é›†åˆä¸­å®šä¹‰çš„&lt;code&gt;tcp_recvmsg&lt;/code&gt;å‡½æ•°ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;æ•´ä¸ªè°ƒç”¨è¿‡ç¨‹å¯ä»¥å‚è€ƒä¸Šè¾¹çš„ã€Šç³»ç»ŸIOè°ƒç”¨ç»“æ„å›¾ã€‹&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ç†Ÿæ‚‰äº†å†…æ ¸å‡½æ•°è°ƒç”¨æ ˆåï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ç³»ç»ŸIOè°ƒç”¨åœ¨&lt;code&gt;tcp_recvmsg&lt;/code&gt;å†…æ ¸å‡½æ•°ä¸­æ˜¯å¦‚ä½•å°†ç”¨æˆ·è¿›ç¨‹ç»™é˜»å¡æ‰çš„&lt;/strong&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6217741935483871&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEmK3jYMPOt7rib3Q5g7XFoaibh594gLT4uFERshJOcs9TGdVajaRaVYkA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;figcaption&gt;ç³»ç»ŸIOè°ƒç”¨é˜»å¡åŸç†.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;tcp_recvmsg&lt;/span&gt;&lt;span&gt;(structÂ kiocbÂ *iocb,Â structÂ sockÂ *sk,Â structÂ msghdrÂ *msg,&lt;br/&gt;Â Â &lt;span&gt;size_t&lt;/span&gt;Â len,Â &lt;span&gt;int&lt;/span&gt;Â nonblock,Â &lt;span&gt;int&lt;/span&gt;Â flags,Â &lt;span&gt;int&lt;/span&gt;Â *addr_len)&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â .................çœç•¥éæ ¸å¿ƒä»£ç ...............&lt;br/&gt;Â Â Â &lt;span&gt;//è®¿é—®sockå¯¹è±¡ä¸­å®šä¹‰çš„æ¥æ”¶é˜Ÿåˆ—&lt;/span&gt;&lt;br/&gt;Â Â skb_queue_walk(&amp;amp;sk-&amp;gt;sk_receive_queue,Â skb)Â {&lt;br/&gt;&lt;br/&gt;Â Â Â Â .................çœç•¥éæ ¸å¿ƒä»£ç ...............&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;//æ²¡æœ‰æ”¶åˆ°è¶³å¤Ÿæ•°æ®ï¼Œè°ƒç”¨sk_wait_dataÂ é˜»å¡å½“å‰è¿›ç¨‹&lt;/span&gt;&lt;br/&gt;Â Â sk_wait_data(sk,Â &amp;amp;timeo);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;sk_wait_data&lt;/span&gt;&lt;span&gt;(structÂ sockÂ *sk,Â &lt;span&gt;long&lt;/span&gt;Â *timeo)&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;{&lt;br/&gt;Â &lt;span&gt;//åˆ›å»ºstructÂ sockä¸­ç­‰å¾…é˜Ÿåˆ—ä¸Šçš„å…ƒç´ wait_queue_t&lt;/span&gt;&lt;br/&gt;Â &lt;span&gt;//å°†è¿›ç¨‹æè¿°ç¬¦å’Œå›è°ƒå‡½æ•°autoremove_wake_functionå…³è”åˆ°wait_queue_tä¸­&lt;/span&gt;&lt;br/&gt;Â DEFINE_WAIT(wait);&lt;br/&gt;&lt;br/&gt;Â &lt;span&gt;//Â è°ƒç”¨Â sk_sleepÂ è·å–Â sockÂ å¯¹è±¡ä¸‹çš„ç­‰å¾…é˜Ÿåˆ—çš„å¤´æŒ‡é’ˆwait_queue_head_t&lt;/span&gt;&lt;br/&gt;Â &lt;span&gt;//Â è°ƒç”¨prepare_to_waitå°†æ–°åˆ›å»ºçš„ç­‰å¾…é¡¹wait_queue_tæ’å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œå¹¶å°†è¿›ç¨‹çŠ¶æ€è®¾ç½®ä¸ºå¯æ‰“æ–­Â INTERRUPTIBLE&lt;/span&gt;&lt;br/&gt;Â prepare_to_wait(sk_sleep(sk),Â &amp;amp;wait,Â TASK_INTERRUPTIBLE);&lt;br/&gt;Â set_bit(SOCK_ASYNC_WAITDATA,Â &amp;amp;sk-&amp;gt;sk_socket-&amp;gt;flags);&lt;br/&gt;&lt;br/&gt;Â &lt;span&gt;//Â é€šè¿‡è°ƒç”¨schedule_timeoutè®©å‡ºCPUï¼Œç„¶åè¿›è¡Œç¡çœ ï¼Œå¯¼è‡´ä¸€æ¬¡ä¸Šä¸‹æ–‡åˆ‡æ¢&lt;/span&gt;&lt;br/&gt;Â rcÂ =Â sk_wait_event(sk,Â timeo,Â !skb_queue_empty(&amp;amp;sk-&amp;gt;sk_receive_queue));&lt;br/&gt;Â ...&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;é¦–å…ˆä¼šåœ¨&lt;code&gt;DEFINE_WAIT&lt;/code&gt;ä¸­åˆ›å»º&lt;code&gt;struct sock&lt;/code&gt;ä¸­ç­‰å¾…é˜Ÿåˆ—ä¸Šçš„ç­‰å¾…ç±»å‹&lt;code&gt;wait_queue_t&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#&lt;span&gt;define&lt;/span&gt;Â DEFINE_WAIT(name)Â DEFINE_WAIT_FUNC(name,Â autoremove_wake_function)&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#&lt;span&gt;define&lt;/span&gt;Â DEFINE_WAIT_FUNC(name,Â function)Â Â Â Â \&lt;br/&gt;Â wait_queue_tÂ nameÂ =Â {Â Â Â Â Â Â \&lt;br/&gt;Â Â .privateÂ =Â current,Â Â Â Â \&lt;br/&gt;Â Â .funcÂ Â =Â function,Â Â Â Â \&lt;br/&gt;Â Â .task_listÂ =Â LIST_HEAD_INIT((name).task_list),Â \&lt;br/&gt;Â }&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç­‰å¾…ç±»å‹&lt;code&gt;wait_queue_t&lt;/code&gt;ä¸­çš„&lt;code&gt;private&lt;/code&gt;ç”¨æ¥å…³è”&lt;code&gt;é˜»å¡&lt;/code&gt;åœ¨å½“å‰&lt;code&gt;socket&lt;/code&gt;ä¸Šçš„ç”¨æˆ·è¿›ç¨‹&lt;code&gt;fd&lt;/code&gt;ã€‚&lt;code&gt;func&lt;/code&gt;ç”¨æ¥å…³è”ç­‰å¾…é¡¹ä¸Šæ³¨å†Œçš„å›è°ƒå‡½æ•°ã€‚è¿™é‡Œæ³¨å†Œçš„æ˜¯&lt;code&gt;autoremove_wake_function&lt;/code&gt;ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;è°ƒç”¨&lt;code&gt;sk_sleep(sk)&lt;/code&gt;è·å–&lt;code&gt;struct sock&lt;/code&gt;å¯¹è±¡ä¸­çš„ç­‰å¾…é˜Ÿåˆ—å¤´æŒ‡é’ˆ&lt;code&gt;wait_queue_head_t&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;è°ƒç”¨&lt;code&gt;prepare_to_wait&lt;/code&gt;å°†æ–°åˆ›å»ºçš„ç­‰å¾…é¡¹&lt;code&gt;wait_queue_t&lt;/code&gt;æ’å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œå¹¶å°†è¿›ç¨‹è®¾ç½®ä¸ºå¯æ‰“æ–­ &lt;code&gt;INTERRUPTIBL&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;è°ƒç”¨&lt;code&gt;sk_wait_event&lt;/code&gt;è®©å‡ºCPUï¼Œè¿›ç¨‹è¿›å…¥ç¡çœ çŠ¶æ€ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”¨æˆ·è¿›ç¨‹çš„&lt;code&gt;é˜»å¡è¿‡ç¨‹&lt;/code&gt;æˆ‘ä»¬å°±ä»‹ç»å®Œäº†ï¼Œå…³é”®æ˜¯è¦ç†è§£è®°ä½&lt;code&gt;struct sock&lt;/code&gt;ä¸­å®šä¹‰çš„ç­‰å¾…é˜Ÿåˆ—ä¸Šçš„ç­‰å¾…ç±»å‹&lt;code&gt;wait_queue_t&lt;/code&gt;çš„ç»“æ„ã€‚åé¢&lt;code&gt;epoll&lt;/code&gt;çš„ä»‹ç»ä¸­æˆ‘ä»¬è¿˜ä¼šç”¨åˆ°å®ƒã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ä¸‹é¢æˆ‘ä»¬æ¥ç€ä»‹ç»å½“æ•°æ®å°±ç»ªåï¼Œç”¨æˆ·è¿›ç¨‹æ˜¯å¦‚ä½•è¢«å”¤é†’çš„&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æœ¬æ–‡å¼€å§‹ä»‹ç»ã€Šç½‘ç»œåŒ…æ¥æ”¶è¿‡ç¨‹ã€‹è¿™ä¸€å°èŠ‚ä¸­æˆ‘ä»¬æåˆ°ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å½“ç½‘ç»œæ•°æ®åŒ…åˆ°è¾¾ç½‘å¡æ—¶ï¼Œç½‘å¡é€šè¿‡&lt;code&gt;DMA&lt;/code&gt;çš„æ–¹å¼å°†æ•°æ®æ”¾åˆ°&lt;code&gt;RingBuffer&lt;/code&gt;ä¸­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç„¶åå‘CPUå‘èµ·ç¡¬ä¸­æ–­ï¼Œåœ¨ç¡¬ä¸­æ–­å“åº”ç¨‹åºä¸­åˆ›å»º&lt;code&gt;sk_buffer&lt;/code&gt;ï¼Œå¹¶å°†ç½‘ç»œæ•°æ®æ‹·è´è‡³&lt;code&gt;sk_buffer&lt;/code&gt;ä¸­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;éšåå‘èµ·è½¯ä¸­æ–­ï¼Œå†…æ ¸çº¿ç¨‹&lt;code&gt;ksoftirqd&lt;/code&gt;å“åº”è½¯ä¸­æ–­ï¼Œè°ƒç”¨&lt;code&gt;pollå‡½æ•°&lt;/code&gt;å°†&lt;code&gt;sk_buffer&lt;/code&gt;é€å¾€å†…æ ¸åè®®æ ˆåšå±‚å±‚åè®®å¤„ç†ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åœ¨ä¼ è¾“å±‚&lt;code&gt;tcp_rcv å‡½æ•°&lt;/code&gt;ä¸­ï¼Œå»æ‰TCPå¤´ï¼Œæ ¹æ®&lt;code&gt;å››å…ƒç»„ï¼ˆæºIPï¼Œæºç«¯å£ï¼Œç›®çš„IPï¼Œç›®çš„ç«¯å£ï¼‰&lt;/code&gt;æŸ¥æ‰¾å¯¹åº”çš„&lt;code&gt;Socket&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœ€åå°†&lt;code&gt;sk_buffer&lt;/code&gt;æ”¾åˆ°&lt;code&gt;Socket&lt;/code&gt;ä¸­çš„æ¥æ”¶é˜Ÿåˆ—é‡Œã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šè¾¹è¿™äº›è¿‡ç¨‹æ˜¯å†…æ ¸æ¥æ”¶ç½‘ç»œæ•°æ®çš„å®Œæ•´è¿‡ç¨‹ï¼Œä¸‹è¾¹æˆ‘ä»¬æ¥çœ‹ä¸‹ï¼Œå½“æ•°æ®åŒ…æ¥æ”¶å®Œæ¯•åï¼Œç”¨æˆ·è¿›ç¨‹æ˜¯å¦‚ä½•è¢«å”¤é†’çš„ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5870967741935483&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcE9kTceMWn7KUGpgqK5Sq7nMgTBs4UkZwJ5Mor0WEibKZvLBxLeV0dJJg/640?wx_fmt=png&quot;/&gt;&lt;figcaption&gt;ç³»ç»ŸIOè°ƒç”¨å”¤é†’åŸç†.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å½“è½¯ä¸­æ–­å°†&lt;code&gt;sk_buffer&lt;/code&gt;æ”¾åˆ°&lt;code&gt;Socket&lt;/code&gt;çš„æ¥æ”¶é˜Ÿåˆ—ä¸Šæ—¶ï¼Œæ¥ç€å°±ä¼šè°ƒç”¨&lt;code&gt;æ•°æ®å°±ç»ªå‡½æ•°å›è°ƒæŒ‡é’ˆsk_data_ready&lt;/code&gt;ï¼Œå‰è¾¹æˆ‘ä»¬æåˆ°ï¼Œè¿™ä¸ªå‡½æ•°æŒ‡é’ˆåœ¨åˆå§‹åŒ–çš„æ—¶å€™æŒ‡å‘äº†&lt;code&gt;sock_def_readable&lt;/code&gt;å‡½æ•°ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;åœ¨&lt;code&gt;sock_def_readable&lt;/code&gt;å‡½æ•°ä¸­ä¼šå»è·å–&lt;code&gt;socket-&amp;gt;sock-&amp;gt;sk_wq&lt;/code&gt;ç­‰å¾…é˜Ÿåˆ—ã€‚åœ¨&lt;code&gt;wake_up_common&lt;/code&gt;å‡½æ•°ä¸­ä»ç­‰å¾…é˜Ÿåˆ—&lt;code&gt;sk_wq&lt;/code&gt;ä¸­æ‰¾å‡º&lt;code&gt;ä¸€ä¸ª&lt;/code&gt;ç­‰å¾…é¡¹&lt;code&gt;wait_queue_t&lt;/code&gt;ï¼Œå›è°ƒæ³¨å†Œåœ¨è¯¥ç­‰å¾…é¡¹ä¸Šçš„&lt;code&gt;func&lt;/code&gt;å›è°ƒå‡½æ•°ï¼ˆ&lt;code&gt;wait_queue_t-&amp;gt;func&lt;/code&gt;ï¼‰,åˆ›å»ºç­‰å¾…é¡¹&lt;code&gt;wait_queue_t&lt;/code&gt;æ˜¯æˆ‘ä»¬æåˆ°ï¼Œè¿™é‡Œæ³¨å†Œçš„å›è°ƒå‡½æ•°æ˜¯&lt;code&gt;autoremove_wake_function&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å³ä½¿æ˜¯æœ‰å¤šä¸ªè¿›ç¨‹éƒ½é˜»å¡åœ¨åŒä¸€ä¸ª socket ä¸Šï¼Œä¹Ÿåªå”¤é†’ 1 ä¸ªè¿›ç¨‹ã€‚å…¶ä½œç”¨æ˜¯ä¸ºäº†é¿å…æƒŠç¾¤ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;åœ¨&lt;code&gt;autoremove_wake_function&lt;/code&gt;å‡½æ•°ä¸­ï¼Œæ ¹æ®ç­‰å¾…é¡¹&lt;code&gt;wait_queue_t&lt;/code&gt;ä¸Šçš„&lt;code&gt;private&lt;/code&gt;å…³è”çš„&lt;code&gt;é˜»å¡è¿›ç¨‹fd&lt;/code&gt;è°ƒç”¨&lt;code&gt;try_to_wake_up&lt;/code&gt;å”¤é†’é˜»å¡åœ¨è¯¥&lt;code&gt;Socket&lt;/code&gt;ä¸Šçš„è¿›ç¨‹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;è®°ä½&lt;code&gt;wait_queue_t&lt;/code&gt;ä¸­çš„&lt;code&gt;func&lt;/code&gt;å‡½æ•°æŒ‡é’ˆï¼Œåœ¨&lt;code&gt;epoll&lt;/code&gt;ä¸­è¿™é‡Œä¼šæ³¨å†Œ&lt;code&gt;epoll&lt;/code&gt;çš„å›è°ƒå‡½æ•°ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç°åœ¨ç†è§£&lt;code&gt;epoll&lt;/code&gt;æ‰€éœ€è¦çš„åŸºç¡€çŸ¥è¯†æˆ‘ä»¬å°±ä»‹ç»å®Œäº†ï¼Œå” å¨äº†è¿™ä¹ˆå¤šï¼Œä¸‹é¢ç»ˆäºæ­£å¼è¿›å…¥æœ¬å°èŠ‚çš„ä¸»é¢˜&lt;code&gt;epoll&lt;/code&gt;äº†ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;epoll_createåˆ›å»ºepollå¯¹è±¡&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;epoll_create&lt;/code&gt;æ˜¯å†…æ ¸æä¾›ç»™æˆ‘ä»¬åˆ›å»º&lt;code&gt;epoll&lt;/code&gt;å¯¹è±¡çš„ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œå½“æˆ‘ä»¬åœ¨ç”¨æˆ·è¿›ç¨‹ä¸­è°ƒç”¨&lt;code&gt;epoll_create&lt;/code&gt;æ—¶ï¼Œå†…æ ¸ä¼šä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª&lt;code&gt;struct eventpoll&lt;/code&gt;å¯¹è±¡ï¼Œå¹¶ä¸”ä¹Ÿæœ‰ç›¸åº”çš„&lt;code&gt;struct file&lt;/code&gt;ä¸ä¹‹å…³è”ï¼ŒåŒæ ·éœ€è¦æŠŠè¿™ä¸ª&lt;code&gt;struct eventpoll&lt;/code&gt;å¯¹è±¡æ‰€å…³è”çš„&lt;code&gt;struct file&lt;/code&gt;æ”¾å…¥è¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶åˆ—è¡¨&lt;code&gt;fd_array&lt;/code&gt;ä¸­ç®¡ç†ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ç†Ÿæ‚‰äº†&lt;code&gt;Socket&lt;/code&gt;çš„åˆ›å»ºé€»è¾‘ï¼Œ&lt;code&gt;epoll&lt;/code&gt;çš„åˆ›å»ºé€»è¾‘ä¹Ÿå°±ä¸éš¾ç†è§£äº†ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;code&gt;struct eventpoll&lt;/code&gt;å¯¹è±¡å…³è”çš„&lt;code&gt;struct file&lt;/code&gt;ä¸­çš„&lt;code&gt;file_operations æŒ‡é’ˆ&lt;/code&gt;æŒ‡å‘çš„æ˜¯&lt;code&gt;eventpoll_fops&lt;/code&gt;æ“ä½œå‡½æ•°é›†åˆã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;const&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;file_operations&lt;/span&gt;Â &lt;span&gt;eventpoll_fops&lt;/span&gt;Â =Â {&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â .releaseÂ =Â ep_eventpoll_release;&lt;br/&gt;Â Â Â Â Â .pollÂ =Â ep_eventpoll_poll,&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6854838709677419&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEibKwPYGuZaNbHCJ6jeia6TBicsgdh0cicLaIaHaGgLomLzb9h2r3Wfd3Cw/640?wx_fmt=png&quot;/&gt;&lt;figcaption&gt;eopllåœ¨è¿›ç¨‹ä¸­çš„æ•´ä½“ç»“æ„.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;eventpoll&lt;/span&gt;Â {&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//ç­‰å¾…é˜Ÿåˆ—ï¼Œé˜»å¡åœ¨epollä¸Šçš„è¿›ç¨‹ä¼šæ”¾åœ¨è¿™é‡Œ&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;wait_queue_head_t&lt;/span&gt;Â wq;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//å°±ç»ªé˜Ÿåˆ—ï¼ŒIOå°±ç»ªçš„socketè¿æ¥ä¼šæ”¾åœ¨è¿™é‡Œ&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;list_head&lt;/span&gt;Â &lt;span&gt;rdllist&lt;/span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//çº¢é»‘æ ‘ç”¨æ¥ç®¡ç†æ‰€æœ‰ç›‘å¬çš„socketè¿æ¥&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;rb_root&lt;/span&gt;Â &lt;span&gt;rbr&lt;/span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â ......&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;wait_queue_head_t wqï¼š&lt;/code&gt;epollä¸­çš„ç­‰å¾…é˜Ÿåˆ—ï¼Œé˜Ÿåˆ—é‡Œå­˜æ”¾çš„æ˜¯&lt;code&gt;é˜»å¡&lt;/code&gt;åœ¨&lt;code&gt;epoll&lt;/code&gt;ä¸Šçš„ç”¨æˆ·è¿›ç¨‹ã€‚åœ¨&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„æ—¶å€™&lt;code&gt;epoll&lt;/code&gt;å¯ä»¥é€šè¿‡è¿™ä¸ªé˜Ÿåˆ—æ‰¾åˆ°è¿™äº›&lt;code&gt;é˜»å¡&lt;/code&gt;çš„è¿›ç¨‹å¹¶å”¤é†’å®ƒä»¬ï¼Œä»è€Œæ‰§è¡Œ&lt;code&gt;IOè°ƒç”¨&lt;/code&gt;è¯»å†™&lt;code&gt;Socket&lt;/code&gt;ä¸Šçš„æ•°æ®ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;è¿™é‡Œæ³¨æ„ä¸&lt;code&gt;Socket&lt;/code&gt;ä¸­çš„ç­‰å¾…é˜Ÿåˆ—åŒºåˆ†ï¼ï¼ï¼&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;struct list_head rdllistï¼š&lt;/code&gt;epollä¸­çš„å°±ç»ªé˜Ÿåˆ—ï¼Œé˜Ÿåˆ—é‡Œå­˜æ”¾çš„æ˜¯éƒ½æ˜¯&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„&lt;code&gt;Socket&lt;/code&gt;ï¼Œè¢«å”¤é†’çš„ç”¨æˆ·è¿›ç¨‹å¯ä»¥ç›´æ¥è¯»å–è¿™ä¸ªé˜Ÿåˆ—è·å–&lt;code&gt;IOæ´»è·ƒ&lt;/code&gt;çš„&lt;code&gt;Socket&lt;/code&gt;ã€‚æ— éœ€å†æ¬¡éå†æ•´ä¸ª&lt;code&gt;Socket&lt;/code&gt;é›†åˆã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;è¿™é‡Œæ­£æ˜¯&lt;code&gt;epoll&lt;/code&gt;æ¯”&lt;code&gt;select ï¼Œpoll&lt;/code&gt;é«˜æ•ˆä¹‹å¤„ï¼Œ&lt;code&gt;select ï¼Œpoll&lt;/code&gt;è¿”å›çš„æ˜¯å…¨éƒ¨çš„&lt;code&gt;socket&lt;/code&gt;è¿æ¥ï¼Œæˆ‘ä»¬éœ€è¦åœ¨&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;å†æ¬¡éå†æ‰¾å‡ºçœŸæ­£&lt;code&gt;IOæ´»è·ƒ&lt;/code&gt;çš„&lt;code&gt;Socket&lt;/code&gt;è¿æ¥ã€‚è€Œ&lt;code&gt;epoll&lt;/code&gt;åªæ˜¯è¿”å›&lt;code&gt;IOæ´»è·ƒ&lt;/code&gt;çš„&lt;code&gt;Socket&lt;/code&gt;è¿æ¥ã€‚ç”¨æˆ·è¿›ç¨‹å¯ä»¥ç›´æ¥è¿›è¡ŒIOæ“ä½œã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;struct rb_root rbr :&lt;/code&gt; ç”±äºçº¢é»‘æ ‘åœ¨&lt;code&gt;æŸ¥æ‰¾&lt;/code&gt;ï¼Œ&lt;code&gt;æ’å…¥&lt;/code&gt;ï¼Œ&lt;code&gt;åˆ é™¤&lt;/code&gt;ç­‰ç»¼åˆæ€§èƒ½æ–¹é¢æ˜¯æœ€ä¼˜çš„ï¼Œæ‰€ä»¥epollå†…éƒ¨ä½¿ç”¨ä¸€é¢—çº¢é»‘æ ‘æ¥ç®¡ç†æµ·é‡çš„&lt;code&gt;Socket&lt;/code&gt;è¿æ¥ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;code&gt;select&lt;/code&gt;ç”¨&lt;code&gt;æ•°ç»„&lt;/code&gt;ç®¡ç†è¿æ¥ï¼Œ&lt;code&gt;poll&lt;/code&gt;ç”¨&lt;code&gt;é“¾è¡¨&lt;/code&gt;ç®¡ç†è¿æ¥ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;epoll_ctlå‘epollå¯¹è±¡ä¸­æ·»åŠ ç›‘å¬çš„Socket&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“æˆ‘ä»¬è°ƒç”¨&lt;code&gt;epoll_create&lt;/code&gt;åœ¨å†…æ ¸ä¸­åˆ›å»ºå‡º&lt;code&gt;epoll&lt;/code&gt;å¯¹è±¡&lt;code&gt;struct eventpoll&lt;/code&gt;åï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨&lt;code&gt;epoll_ctl&lt;/code&gt;å‘&lt;code&gt;epoll&lt;/code&gt;ä¸­æ·»åŠ æˆ‘ä»¬éœ€è¦ç®¡ç†çš„&lt;code&gt;Socket&lt;/code&gt;è¿æ¥äº†ã€‚&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;é¦–å…ˆè¦åœ¨epollå†…æ ¸ä¸­åˆ›å»ºä¸€ä¸ªè¡¨ç¤º&lt;code&gt;Socketè¿æ¥&lt;/code&gt;çš„æ•°æ®ç»“æ„&lt;code&gt;struct epitem&lt;/code&gt;ï¼Œè€Œåœ¨&lt;code&gt;epoll&lt;/code&gt;ä¸­ä¸ºäº†ç»¼åˆæ€§èƒ½çš„è€ƒè™‘ï¼Œé‡‡ç”¨ä¸€é¢—çº¢é»‘æ ‘æ¥ç®¡ç†è¿™äº›æµ·é‡&lt;code&gt;socketè¿æ¥&lt;/code&gt;ã€‚æ‰€ä»¥&lt;code&gt;struct epitem&lt;/code&gt;æ˜¯ä¸€ä¸ªçº¢é»‘æ ‘èŠ‚ç‚¹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.775&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEItBeLMXJPAJtcYN6yeNKBbIkH8pCgeic4CIpFTJqrBJ4IkAxJH6JaEg/640?wx_fmt=png&quot;/&gt;&lt;figcaption&gt;struct epitem.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;epitem&lt;/span&gt;&lt;br/&gt;{&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//æŒ‡å‘æ‰€å±epollå¯¹è±¡&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;eventpoll&lt;/span&gt;Â *&lt;span&gt;ep&lt;/span&gt;;&lt;/span&gt;Â &lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//æ³¨å†Œçš„æ„Ÿå…´è¶£çš„äº‹ä»¶,ä¹Ÿå°±æ˜¯ç”¨æˆ·ç©ºé—´çš„epoll_eventÂ Â Â Â Â &lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;epoll_event&lt;/span&gt;Â &lt;span&gt;event&lt;/span&gt;;&lt;/span&gt;Â &lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//æŒ‡å‘epollå¯¹è±¡ä¸­çš„å°±ç»ªé˜Ÿåˆ—&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;list_head&lt;/span&gt;Â &lt;span&gt;rdllink&lt;/span&gt;;&lt;/span&gt;Â Â &lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//æŒ‡å‘epollä¸­å¯¹åº”çš„çº¢é»‘æ ‘èŠ‚ç‚¹&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;rb_node&lt;/span&gt;Â &lt;span&gt;rbn&lt;/span&gt;;&lt;/span&gt;Â Â Â Â Â &lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//æŒ‡å‘epitemæ‰€è¡¨ç¤ºçš„socket-&amp;gt;fileç»“æ„ä»¥åŠå¯¹åº”çš„fd&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;epoll_filefd&lt;/span&gt;Â &lt;span&gt;ffd&lt;/span&gt;;&lt;/span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;br/&gt;Â Â }&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;è¿™é‡Œé‡ç‚¹è®°ä½&lt;code&gt;struct epitem&lt;/code&gt;ç»“æ„ä¸­çš„&lt;code&gt;rdllink&lt;/code&gt;ä»¥åŠ&lt;code&gt;epoll_filefd&lt;/code&gt;æˆå‘˜ï¼Œåé¢æˆ‘ä»¬ä¼šç”¨åˆ°ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ol start=&quot;2&quot; data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;åœ¨å†…æ ¸ä¸­åˆ›å»ºå®Œè¡¨ç¤º&lt;code&gt;Socketè¿æ¥&lt;/code&gt;çš„æ•°æ®ç»“æ„&lt;code&gt;struct epitem&lt;/code&gt;åï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨&lt;code&gt;Socket&lt;/code&gt;ä¸­çš„ç­‰å¾…é˜Ÿåˆ—ä¸Šåˆ›å»ºç­‰å¾…é¡¹&lt;code&gt;wait_queue_t&lt;/code&gt;å¹¶ä¸”æ³¨å†Œ&lt;code&gt;epollçš„å›è°ƒå‡½æ•°ep_poll_callback&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šè¿‡&lt;code&gt;ã€Šé˜»å¡IOä¸­ç”¨æˆ·è¿›ç¨‹é˜»å¡ä»¥åŠå”¤é†’åŸç†ã€‹&lt;/code&gt;å°èŠ‚çš„é“ºå«ï¼Œæˆ‘æƒ³å¤§å®¶å·²ç»çŒœåˆ°è¿™ä¸€æ­¥çš„æ„ä¹‰æ‰€åœ¨äº†å§ï¼å½“æ—¶åœ¨ç­‰å¾…é¡¹&lt;code&gt;wait_queue_t&lt;/code&gt;ä¸­æ³¨å†Œçš„æ˜¯&lt;code&gt;autoremove_wake_function&lt;/code&gt;å›è°ƒå‡½æ•°ã€‚è¿˜è®°å¾—å—ï¼Ÿ&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;epollçš„å›è°ƒå‡½æ•°&lt;code&gt;ep_poll_callback&lt;/code&gt;æ­£æ˜¯&lt;code&gt;epoll&lt;/code&gt;åŒæ­¥IOäº‹ä»¶é€šçŸ¥æœºåˆ¶çš„æ ¸å¿ƒæ‰€åœ¨ï¼Œä¹Ÿæ˜¯åŒºåˆ«äº&lt;code&gt;selectï¼Œpoll&lt;/code&gt;é‡‡ç”¨å†…æ ¸è½®è¯¢æ–¹å¼çš„æ ¹æœ¬æ€§èƒ½å·®å¼‚æ‰€åœ¨ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5516129032258065&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEkerTL14uiakMoYWeslKZrAXfMibzAwSt2CE6LmTbHMI6yK1oolEvCqAQ/640?wx_fmt=png&quot;/&gt;&lt;figcaption&gt;epitemåˆ›å»ºç­‰å¾…é¡¹.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;è¿™é‡Œåˆå‡ºç°äº†ä¸€ä¸ªæ–°çš„æ•°æ®ç»“æ„&lt;code&gt;struct eppoll_entry&lt;/code&gt;ï¼Œé‚£å®ƒçš„ä½œç”¨æ˜¯å¹²ä»€ä¹ˆçš„å‘¢ï¼Ÿå¤§å®¶å¯ä»¥ç»“åˆä¸Šå›¾å…ˆçŒœæµ‹ä¸‹å®ƒçš„ä½œç”¨!&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬çŸ¥é“&lt;code&gt;socket-&amp;gt;sock-&amp;gt;sk_wq&lt;/code&gt;ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ç±»å‹æ˜¯&lt;code&gt;wait_queue_t&lt;/code&gt;ï¼Œæˆ‘ä»¬éœ€è¦åœ¨&lt;code&gt;struct epitem&lt;/code&gt;æ‰€è¡¨ç¤ºçš„&lt;code&gt;socket&lt;/code&gt;çš„ç­‰å¾…é˜Ÿåˆ—ä¸Šæ³¨å†Œ&lt;code&gt;epoll&lt;/code&gt;å›è°ƒå‡½æ•°&lt;code&gt;ep_poll_callback&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ ·å½“æ•°æ®åˆ°è¾¾&lt;code&gt;socket&lt;/code&gt;ä¸­çš„æ¥æ”¶é˜Ÿåˆ—æ—¶ï¼Œå†…æ ¸ä¼šå›è°ƒ&lt;code&gt;sk_data_ready&lt;/code&gt;ï¼Œåœ¨&lt;code&gt;é˜»å¡IOä¸­ç”¨æˆ·è¿›ç¨‹é˜»å¡ä»¥åŠå”¤é†’åŸç†&lt;/code&gt;è¿™ä¸€å°èŠ‚ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“è¿™ä¸ª&lt;code&gt;sk_data_ready&lt;/code&gt;å‡½æ•°æŒ‡é’ˆä¼šæŒ‡å‘&lt;code&gt;sk_def_readable&lt;/code&gt;å‡½æ•°ï¼Œåœ¨&lt;code&gt;sk_def_readable&lt;/code&gt;ä¸­ä¼šå›è°ƒæ³¨å†Œåœ¨ç­‰å¾…é˜Ÿåˆ—é‡Œçš„ç­‰å¾…é¡¹&lt;code&gt;wait_queue_t -&amp;gt; func&lt;/code&gt;å›è°ƒå‡½æ•°&lt;code&gt;ep_poll_callback&lt;/code&gt;ã€‚&lt;strong&gt;åœ¨&lt;code&gt;ep_poll_callback&lt;/code&gt;ä¸­éœ€è¦æ‰¾åˆ°&lt;code&gt;epitem&lt;/code&gt;&lt;/strong&gt;ï¼Œå°†&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„&lt;code&gt;epitem&lt;/code&gt;æ”¾å…¥&lt;code&gt;epoll&lt;/code&gt;ä¸­çš„å°±ç»ªé˜Ÿåˆ—ä¸­ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€Œ&lt;code&gt;socket&lt;/code&gt;ç­‰å¾…é˜Ÿåˆ—ä¸­ç±»å‹æ˜¯&lt;code&gt;wait_queue_t&lt;/code&gt;æ— æ³•å…³è”åˆ°&lt;code&gt;epitem&lt;/code&gt;ã€‚æ‰€ä»¥å°±å‡ºç°äº†&lt;code&gt;struct eppoll_entry&lt;/code&gt;ç»“æ„ä½“ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯å…³è”&lt;code&gt;Socket&lt;/code&gt;ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ç­‰å¾…é¡¹&lt;code&gt;wait_queue_t&lt;/code&gt;å’Œ&lt;code&gt;epitem&lt;/code&gt;ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;eppoll_entry&lt;/span&gt;Â {&lt;/span&gt;Â &lt;br/&gt;Â Â Â &lt;span&gt;//æŒ‡å‘å…³è”çš„epitem&lt;/span&gt;&lt;br/&gt;Â Â Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;epitem&lt;/span&gt;Â *&lt;span&gt;base&lt;/span&gt;;&lt;/span&gt;Â &lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â å…³è”ç›‘å¬socketä¸­ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ç­‰å¾…é¡¹Â (privateÂ =Â nullÂ Â funcÂ =Â ep_poll_callback)&lt;/span&gt;&lt;br/&gt;Â Â Â &lt;span&gt;wait_queue_t&lt;/span&gt;Â wait;Â Â Â &lt;br/&gt;&lt;br/&gt;Â Â Â &lt;span&gt;//Â ç›‘å¬socketä¸­ç­‰å¾…é˜Ÿåˆ—å¤´æŒ‡é’ˆ&lt;/span&gt;&lt;br/&gt;Â Â Â &lt;span&gt;wait_queue_head_t&lt;/span&gt;Â *whead;Â &lt;br/&gt;Â Â Â Â .........&lt;br/&gt;Â Â };Â &lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ ·åœ¨&lt;code&gt;ep_poll_callback&lt;/code&gt;å›è°ƒå‡½æ•°ä¸­å°±å¯ä»¥æ ¹æ®&lt;code&gt;Socket&lt;/code&gt;ç­‰å¾…é˜Ÿåˆ—ä¸­çš„ç­‰å¾…é¡¹&lt;code&gt;wait&lt;/code&gt;ï¼Œé€šè¿‡&lt;code&gt;container_ofå®&lt;/code&gt;æ‰¾åˆ°&lt;code&gt;eppoll_entry&lt;/code&gt;ï¼Œç»§è€Œæ‰¾åˆ°&lt;code&gt;epitem&lt;/code&gt;äº†ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;code&gt;container_of&lt;/code&gt;åœ¨Linuxå†…æ ¸ä¸­æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„å®ï¼Œç”¨äºä»åŒ…å«åœ¨æŸä¸ªç»“æ„ä¸­çš„æŒ‡é’ˆè·å¾—ç»“æ„æœ¬èº«çš„æŒ‡é’ˆï¼Œé€šä¿—åœ°è®²å°±æ˜¯é€šè¿‡ç»“æ„ä½“å˜é‡ä¸­æŸä¸ªæˆå‘˜çš„é¦–åœ°å€è¿›è€Œè·å¾—æ•´ä¸ªç»“æ„ä½“å˜é‡çš„é¦–åœ°å€ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;è¿™é‡Œéœ€è¦æ³¨æ„ä¸‹è¿™æ¬¡ç­‰å¾…é¡¹&lt;code&gt;wait_queue_t&lt;/code&gt;ä¸­çš„&lt;code&gt;private&lt;/code&gt;è®¾ç½®çš„æ˜¯&lt;code&gt;null&lt;/code&gt;ï¼Œå› ä¸ºè¿™é‡Œ&lt;code&gt;Socket&lt;/code&gt;æ˜¯äº¤ç»™&lt;code&gt;epoll&lt;/code&gt;æ¥ç®¡ç†çš„ï¼Œé˜»å¡åœ¨&lt;code&gt;Socket&lt;/code&gt;ä¸Šçš„è¿›ç¨‹æ˜¯ä¹Ÿç”±&lt;code&gt;epoll&lt;/code&gt;æ¥å”¤é†’ã€‚åœ¨ç­‰å¾…é¡¹&lt;code&gt;wait_queue_t&lt;/code&gt;æ³¨å†Œçš„&lt;code&gt;func&lt;/code&gt;æ˜¯&lt;code&gt;ep_poll_callback&lt;/code&gt;è€Œä¸æ˜¯&lt;code&gt;autoremove_wake_function&lt;/code&gt;ï¼Œ&lt;code&gt;é˜»å¡è¿›ç¨‹&lt;/code&gt;å¹¶ä¸éœ€è¦&lt;code&gt;autoremove_wake_function&lt;/code&gt;æ¥å”¤é†’ï¼Œæ‰€ä»¥è¿™é‡Œè®¾ç½®&lt;code&gt;private&lt;/code&gt;ä¸º&lt;code&gt;null&lt;/code&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;ol start=&quot;3&quot; data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å½“åœ¨&lt;code&gt;Socket&lt;/code&gt;çš„ç­‰å¾…é˜Ÿåˆ—ä¸­åˆ›å»ºå¥½ç­‰å¾…é¡¹&lt;code&gt;wait_queue_t&lt;/code&gt;å¹¶ä¸”æ³¨å†Œäº†&lt;code&gt;epoll&lt;/code&gt;çš„å›è°ƒå‡½æ•°&lt;code&gt;ep_poll_callback&lt;/code&gt;ï¼Œç„¶ååˆé€šè¿‡&lt;code&gt;eppoll_entry&lt;/code&gt;å…³è”äº†&lt;code&gt;epitem&lt;/code&gt;åã€‚å‰©ä¸‹è¦åšçš„å°±æ˜¯å°†&lt;code&gt;epitem&lt;/code&gt;æ’å…¥åˆ°&lt;code&gt;epoll&lt;/code&gt;ä¸­çš„çº¢é»‘æ ‘&lt;code&gt;struct rb_root rbr&lt;/code&gt;ä¸­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;è¿™é‡Œå¯ä»¥çœ‹åˆ°&lt;code&gt;epoll&lt;/code&gt;å¦ä¸€ä¸ªä¼˜åŒ–çš„åœ°æ–¹ï¼Œ&lt;code&gt;epoll&lt;/code&gt;å°†æ‰€æœ‰çš„&lt;code&gt;socket&lt;/code&gt;è¿æ¥é€šè¿‡å†…æ ¸ä¸­çš„çº¢é»‘æ ‘æ¥é›†ä¸­ç®¡ç†ã€‚æ¯æ¬¡æ·»åŠ æˆ–è€…åˆ é™¤&lt;code&gt;socketè¿æ¥&lt;/code&gt;éƒ½æ˜¯å¢é‡æ·»åŠ åˆ é™¤ï¼Œè€Œä¸æ˜¯åƒ&lt;code&gt;selectï¼Œpoll&lt;/code&gt;é‚£æ ·æ¯æ¬¡è°ƒç”¨éƒ½æ˜¯å…¨é‡&lt;code&gt;socketè¿æ¥&lt;/code&gt;é›†åˆä¼ å…¥å†…æ ¸ã€‚é¿å…äº†&lt;code&gt;é¢‘ç¹å¤§é‡&lt;/code&gt;çš„&lt;code&gt;å†…å­˜æ‹·è´&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;epoll_waitåŒæ­¥é˜»å¡è·å–IOå°±ç»ªçš„Socket&lt;span/&gt;&lt;/h3&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ç”¨æˆ·ç¨‹åºè°ƒç”¨&lt;code&gt;epoll_wait&lt;/code&gt;åï¼Œå†…æ ¸é¦–å…ˆä¼šæŸ¥æ‰¾epollä¸­çš„å°±ç»ªé˜Ÿåˆ—&lt;code&gt;eventpoll-&amp;gt;rdllist&lt;/code&gt;æ˜¯å¦æœ‰&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„&lt;code&gt;epitem&lt;/code&gt;ã€‚&lt;code&gt;epitem&lt;/code&gt;é‡Œå°è£…äº†&lt;code&gt;socket&lt;/code&gt;çš„ä¿¡æ¯ã€‚å¦‚æœå°±ç»ªé˜Ÿåˆ—ä¸­æœ‰å°±ç»ªçš„&lt;code&gt;epitem&lt;/code&gt;ï¼Œå°±å°†&lt;code&gt;å°±ç»ªçš„socket&lt;/code&gt;ä¿¡æ¯å°è£…åˆ°&lt;code&gt;epoll_event&lt;/code&gt;è¿”å›ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å¦‚æœ&lt;code&gt;eventpoll-&amp;gt;rdllist&lt;/code&gt;å°±ç»ªé˜Ÿåˆ—ä¸­æ²¡æœ‰&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„&lt;code&gt;epitem&lt;/code&gt;ï¼Œåˆ™ä¼šåˆ›å»ºç­‰å¾…é¡¹&lt;code&gt;wait_queue_t&lt;/code&gt;ï¼Œå°†ç”¨æˆ·è¿›ç¨‹çš„&lt;code&gt;fd&lt;/code&gt;å…³è”åˆ°&lt;code&gt;wait_queue_t-&amp;gt;private&lt;/code&gt;ä¸Šï¼Œå¹¶åœ¨ç­‰å¾…é¡¹&lt;code&gt;wait_queue_t-&amp;gt;func&lt;/code&gt;ä¸Šæ³¨å†Œå›è°ƒå‡½æ•°&lt;code&gt;default_wake_function&lt;/code&gt;ã€‚æœ€åå°†ç­‰å¾…é¡¹æ·»åŠ åˆ°&lt;code&gt;epoll&lt;/code&gt;ä¸­çš„ç­‰å¾…é˜Ÿåˆ—ä¸­ã€‚ç”¨æˆ·è¿›ç¨‹è®©å‡ºCPUï¼Œè¿›å…¥&lt;code&gt;é˜»å¡çŠ¶æ€&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5056451612903226&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEG5wWc27ZGXv7sBleibFeuPfEuyfibG9VolWJCiaHlp0DZoYoibpwb3MgNA/640?wx_fmt=png&quot;/&gt;&lt;figcaption&gt;epoll_waitåŒæ­¥è·å–æ•°æ®.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;è¿™é‡Œå’Œ&lt;code&gt;é˜»å¡IOæ¨¡å‹&lt;/code&gt;ä¸­çš„é˜»å¡åŸç†æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡åœ¨&lt;code&gt;é˜»å¡IOæ¨¡å‹&lt;/code&gt;ä¸­æ³¨å†Œåˆ°ç­‰å¾…é¡¹&lt;code&gt;wait_queue_t-&amp;gt;func&lt;/code&gt;ä¸Šçš„æ˜¯&lt;code&gt;autoremove_wake_function&lt;/code&gt;ï¼Œå¹¶å°†ç­‰å¾…é¡¹æ·»åŠ åˆ°&lt;code&gt;socket&lt;/code&gt;ä¸­çš„ç­‰å¾…é˜Ÿåˆ—ä¸­ã€‚è¿™é‡Œæ³¨å†Œçš„æ˜¯&lt;code&gt;default_wake_function&lt;/code&gt;ï¼Œå°†ç­‰å¾…é¡¹æ·»åŠ åˆ°&lt;code&gt;epoll&lt;/code&gt;ä¸­çš„ç­‰å¾…é˜Ÿåˆ—ä¸Šã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4475806451612903&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEl2MECv0ibicDsbibN5ZJaql9ziaJMEFNtzEoxr5LcJuR9vaojRYZ5kyOfA/640?wx_fmt=png&quot;/&gt;&lt;figcaption&gt;æ•°æ®åˆ°æ¥epoll_waitæµç¨‹.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;ol start=&quot;3&quot; data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;å‰è¾¹åšäº†é‚£ä¹ˆå¤šçš„çŸ¥è¯†é“ºå«ï¼Œä¸‹é¢ç»ˆäºåˆ°äº†&lt;code&gt;epoll&lt;/code&gt;çš„æ•´ä¸ªå·¥ä½œæµç¨‹äº†ï¼š&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4967741935483871&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEgGR4zpAZARg0IVDCjFjwuukcBZsicw9tmJeO2CCda9x4EwMRZibXptWg/640?wx_fmt=png&quot;/&gt;&lt;figcaption&gt;epoll_waitå¤„ç†è¿‡ç¨‹.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å½“ç½‘ç»œæ•°æ®åŒ…åœ¨è½¯ä¸­æ–­ä¸­ç»è¿‡å†…æ ¸åè®®æ ˆçš„å¤„ç†åˆ°è¾¾&lt;code&gt;socket&lt;/code&gt;çš„æ¥æ”¶ç¼“å†²åŒºæ—¶ï¼Œç´§æ¥ç€ä¼šè°ƒç”¨socketçš„æ•°æ®å°±ç»ªå›è°ƒæŒ‡é’ˆ&lt;code&gt;sk_data_ready&lt;/code&gt;ï¼Œå›è°ƒå‡½æ•°ä¸º&lt;code&gt;sock_def_readable&lt;/code&gt;ã€‚åœ¨&lt;code&gt;socket&lt;/code&gt;çš„ç­‰å¾…é˜Ÿåˆ—ä¸­æ‰¾å‡ºç­‰å¾…é¡¹ï¼Œå…¶ä¸­ç­‰å¾…é¡¹ä¸­æ³¨å†Œçš„å›è°ƒå‡½æ•°ä¸º&lt;code&gt;ep_poll_callback&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;åœ¨å›è°ƒå‡½æ•°&lt;code&gt;ep_poll_callback&lt;/code&gt;ä¸­ï¼Œæ ¹æ®&lt;code&gt;struct eppoll_entry&lt;/code&gt;ä¸­çš„&lt;code&gt;struct wait_queue_t wait&lt;/code&gt;é€šè¿‡&lt;code&gt;container_ofå®&lt;/code&gt;æ‰¾åˆ°&lt;code&gt;eppoll_entry&lt;/code&gt;å¯¹è±¡å¹¶é€šè¿‡å®ƒçš„&lt;code&gt;base&lt;/code&gt;æŒ‡é’ˆæ‰¾åˆ°å°è£…&lt;code&gt;socket&lt;/code&gt;çš„æ•°æ®ç»“æ„&lt;code&gt;struct epitem&lt;/code&gt;ï¼Œå¹¶å°†å®ƒåŠ å…¥åˆ°&lt;code&gt;epoll&lt;/code&gt;ä¸­çš„å°±ç»ªé˜Ÿåˆ—&lt;code&gt;rdllist&lt;/code&gt;ä¸­ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;éšåæŸ¥çœ‹&lt;code&gt;epoll&lt;/code&gt;ä¸­çš„ç­‰å¾…é˜Ÿåˆ—ä¸­æ˜¯å¦æœ‰ç­‰å¾…é¡¹ï¼Œä¹Ÿå°±æ˜¯è¯´æŸ¥çœ‹æ˜¯å¦æœ‰è¿›ç¨‹é˜»å¡åœ¨&lt;code&gt;epoll_wait&lt;/code&gt;ä¸Šç­‰å¾…&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„&lt;code&gt;socket&lt;/code&gt;ã€‚å¦‚æœæ²¡æœ‰ç­‰å¾…é¡¹ï¼Œåˆ™è½¯ä¸­æ–­å¤„ç†å®Œæˆã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å¦‚æœæœ‰ç­‰å¾…é¡¹ï¼Œåˆ™å›åˆ°æ³¨å†Œåœ¨ç­‰å¾…é¡¹ä¸­çš„å›è°ƒå‡½æ•°&lt;code&gt;default_wake_function&lt;/code&gt;,åœ¨å›è°ƒå‡½æ•°ä¸­å”¤é†’&lt;code&gt;é˜»å¡è¿›ç¨‹&lt;/code&gt;ï¼Œå¹¶å°†å°±ç»ªé˜Ÿåˆ—&lt;code&gt;rdllist&lt;/code&gt;ä¸­çš„&lt;code&gt;epitem&lt;/code&gt;çš„&lt;code&gt;IOå°±ç»ª&lt;/code&gt;socketä¿¡æ¯å°è£…åˆ°&lt;code&gt;struct epoll_event&lt;/code&gt;ä¸­è¿”å›ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ç”¨æˆ·è¿›ç¨‹æ‹¿åˆ°&lt;code&gt;epoll_event&lt;/code&gt;è·å–&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„socketï¼Œå‘èµ·ç³»ç»ŸIOè°ƒç”¨è¯»å–æ•°æ®ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å†è°ˆæ°´å¹³è§¦å‘å’Œè¾¹ç¼˜è§¦å‘&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç½‘ä¸Šæœ‰å¤§é‡çš„å…³äºè¿™ä¸¤ç§æ¨¡å¼çš„è®²è§£ï¼Œå¤§éƒ¨åˆ†è®²çš„æ¯”è¾ƒæ¨¡ç³Šï¼Œæ„Ÿè§‰åªæ˜¯å¼ºè¡Œä»æ¦‚å¿µä¸Šè¿›è¡Œæè¿°ï¼Œçœ‹å®Œè®©äººéš¾ä»¥ç†è§£ã€‚æ‰€ä»¥åœ¨è¿™é‡Œï¼Œç¬”è€…æƒ³ç»“åˆä¸Šè¾¹&lt;code&gt;epoll&lt;/code&gt;çš„å·¥ä½œè¿‡ç¨‹ï¼Œå†æ¬¡å¯¹è¿™ä¸¤ç§æ¨¡å¼åšä¸‹è‡ªå·±çš„è§£è¯»ï¼ŒåŠ›æ±‚æ¸…æ™°çš„è§£é‡Šå‡ºè¿™ä¸¤ç§å·¥ä½œæ¨¡å¼çš„å¼‚åŒã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»è¿‡ä¸Šè¾¹å¯¹&lt;code&gt;epoll&lt;/code&gt;å·¥ä½œè¿‡ç¨‹çš„è¯¦ç»†è§£è¯»ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œå½“æˆ‘ä»¬ç›‘å¬çš„&lt;code&gt;socket&lt;/code&gt;ä¸Šæœ‰æ•°æ®åˆ°æ¥æ—¶ï¼Œè½¯ä¸­æ–­ä¼šæ‰§è¡Œ&lt;code&gt;epoll&lt;/code&gt;çš„å›è°ƒå‡½æ•°&lt;code&gt;ep_poll_callback&lt;/code&gt;,åœ¨å›è°ƒå‡½æ•°ä¸­ä¼šå°†&lt;code&gt;epoll&lt;/code&gt;ä¸­æè¿°&lt;code&gt;socketä¿¡æ¯&lt;/code&gt;çš„æ•°æ®ç»“æ„&lt;code&gt;epitem&lt;/code&gt;æ’å…¥åˆ°&lt;code&gt;epoll&lt;/code&gt;ä¸­çš„å°±ç»ªé˜Ÿåˆ—&lt;code&gt;rdllist&lt;/code&gt;ä¸­ã€‚éšåç”¨æˆ·è¿›ç¨‹ä»&lt;code&gt;epoll&lt;/code&gt;çš„ç­‰å¾…é˜Ÿåˆ—ä¸­è¢«å”¤é†’ï¼Œ&lt;code&gt;epoll_wait&lt;/code&gt;å°†&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„&lt;code&gt;socket&lt;/code&gt;è¿”å›ç»™ç”¨æˆ·è¿›ç¨‹ï¼Œéšå³&lt;code&gt;epoll_wait&lt;/code&gt;ä¼šæ¸…ç©º&lt;code&gt;rdllist&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æ°´å¹³è§¦å‘&lt;/strong&gt;å’Œ&lt;strong&gt;è¾¹ç¼˜è§¦å‘&lt;/strong&gt;æœ€å…³é”®çš„&lt;strong&gt;åŒºåˆ«&lt;/strong&gt;å°±åœ¨äºå½“&lt;code&gt;socket&lt;/code&gt;ä¸­çš„æ¥æ”¶ç¼“å†²åŒºè¿˜æœ‰æ•°æ®å¯è¯»æ—¶ã€‚&lt;strong&gt;&lt;code&gt;epoll_wait&lt;/code&gt;æ˜¯å¦ä¼šæ¸…ç©º&lt;code&gt;rdllist&lt;/code&gt;ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;æ°´å¹³è§¦å‘&lt;/strong&gt;ï¼šåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œç”¨æˆ·çº¿ç¨‹è°ƒç”¨&lt;code&gt;epoll_wait&lt;/code&gt;è·å–åˆ°&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„socketåï¼Œå¯¹&lt;code&gt;Socket&lt;/code&gt;è¿›è¡Œç³»ç»ŸIOè°ƒç”¨è¯»å–æ•°æ®ï¼Œå‡è®¾&lt;code&gt;socket&lt;/code&gt;ä¸­çš„æ•°æ®åªè¯»äº†ä¸€éƒ¨åˆ†æ²¡æœ‰å…¨éƒ¨è¯»å®Œï¼Œè¿™æ—¶å†æ¬¡è°ƒç”¨&lt;code&gt;epoll_wait&lt;/code&gt;ï¼Œ&lt;code&gt;epoll_wait&lt;/code&gt;ä¼šæ£€æŸ¥è¿™äº›&lt;code&gt;Socket&lt;/code&gt;ä¸­çš„æ¥æ”¶ç¼“å†²åŒºæ˜¯å¦è¿˜æœ‰æ•°æ®å¯è¯»ï¼Œå¦‚æœè¿˜æœ‰æ•°æ®å¯è¯»ï¼Œå°±å°†&lt;code&gt;socket&lt;/code&gt;é‡æ–°æ”¾å›&lt;code&gt;rdllist&lt;/code&gt;ã€‚æ‰€ä»¥å½“&lt;code&gt;socket&lt;/code&gt;ä¸Šçš„IOæ²¡æœ‰è¢«å¤„ç†å®Œæ—¶ï¼Œå†æ¬¡è°ƒç”¨&lt;code&gt;epoll_wait&lt;/code&gt;ä¾ç„¶å¯ä»¥è·å¾—è¿™äº›&lt;code&gt;socket&lt;/code&gt;ï¼Œç”¨æˆ·è¿›ç¨‹å¯ä»¥æ¥ç€å¤„ç†&lt;code&gt;socket&lt;/code&gt;ä¸Šçš„IOäº‹ä»¶ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;è¾¹ç¼˜è§¦å‘ï¼š&lt;/strong&gt; åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œ&lt;code&gt;epoll_wait&lt;/code&gt;å°±ä¼šç›´æ¥æ¸…ç©º&lt;code&gt;rdllist&lt;/code&gt;ï¼Œä¸ç®¡&lt;code&gt;socket&lt;/code&gt;ä¸Šæ˜¯å¦è¿˜æœ‰æ•°æ®å¯è¯»ã€‚æ‰€ä»¥åœ¨è¾¹ç¼˜è§¦å‘æ¨¡å¼ä¸‹ï¼Œå½“ä½ æ²¡æœ‰æ¥å¾—åŠå¤„ç†&lt;code&gt;socket&lt;/code&gt;æ¥æ”¶ç¼“å†²åŒºçš„å‰©ä¸‹å¯è¯»æ•°æ®æ—¶ï¼Œå†æ¬¡è°ƒç”¨&lt;code&gt;epoll_wait&lt;/code&gt;ï¼Œå› ä¸ºè¿™æ—¶&lt;code&gt;rdlist&lt;/code&gt;å·²ç»è¢«æ¸…ç©ºäº†ï¼Œ&lt;code&gt;socket&lt;/code&gt;ä¸ä¼šå†æ¬¡ä»&lt;code&gt;epoll_wait&lt;/code&gt;ä¸­è¿”å›ï¼Œæ‰€ä»¥ç”¨æˆ·è¿›ç¨‹å°±ä¸ä¼šå†æ¬¡è·å¾—è¿™ä¸ª&lt;code&gt;socket&lt;/code&gt;äº†ï¼Œä¹Ÿå°±æ— æ³•åœ¨å¯¹å®ƒè¿›è¡ŒIOå¤„ç†äº†ã€‚&lt;strong&gt;é™¤éï¼Œè¿™ä¸ª&lt;code&gt;socket&lt;/code&gt;ä¸Šæœ‰æ–°çš„IOæ•°æ®åˆ°è¾¾&lt;/strong&gt;ï¼Œæ ¹æ®&lt;code&gt;epoll&lt;/code&gt;çš„å·¥ä½œè¿‡ç¨‹ï¼Œè¯¥&lt;code&gt;socket&lt;/code&gt;ä¼šè¢«å†æ¬¡æ”¾å…¥&lt;code&gt;rdllist&lt;/code&gt;ä¸­ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å¦‚æœä½ åœ¨&lt;code&gt;è¾¹ç¼˜è§¦å‘æ¨¡å¼&lt;/code&gt;ä¸‹ï¼Œå¤„ç†äº†éƒ¨åˆ†&lt;code&gt;socket&lt;/code&gt;ä¸Šçš„æ•°æ®ï¼Œé‚£ä¹ˆæƒ³è¦å¤„ç†å‰©ä¸‹éƒ¨åˆ†çš„æ•°æ®ï¼Œå°±åªèƒ½ç­‰åˆ°è¿™ä¸ª&lt;code&gt;socket&lt;/code&gt;ä¸Šå†æ¬¡æœ‰ç½‘ç»œæ•°æ®åˆ°è¾¾ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨&lt;code&gt;Netty&lt;/code&gt;ä¸­å®ç°çš„&lt;code&gt;EpollSocketChannel&lt;/code&gt;é»˜è®¤çš„å°±æ˜¯&lt;code&gt;è¾¹ç¼˜è§¦å‘&lt;/code&gt;æ¨¡å¼ã€‚&lt;code&gt;JDK&lt;/code&gt;çš„&lt;code&gt;NIO&lt;/code&gt;é»˜è®¤æ˜¯&lt;code&gt;æ°´å¹³è§¦å‘&lt;/code&gt;æ¨¡å¼ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;epollå¯¹selectï¼Œpollçš„ä¼˜åŒ–æ€»ç»“&lt;span/&gt;&lt;/h3&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;epoll&lt;/code&gt;åœ¨å†…æ ¸ä¸­é€šè¿‡&lt;code&gt;çº¢é»‘æ ‘&lt;/code&gt;ç®¡ç†æµ·é‡çš„è¿æ¥ï¼Œæ‰€ä»¥åœ¨è°ƒç”¨&lt;code&gt;epoll_wait&lt;/code&gt;è·å–&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„socketæ—¶ï¼Œä¸éœ€è¦ä¼ å…¥ç›‘å¬çš„socketæ–‡ä»¶æè¿°ç¬¦ã€‚ä»è€Œé¿å…äº†æµ·é‡çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆåœ¨&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;å’Œ&lt;code&gt;å†…æ ¸ç©ºé—´&lt;/code&gt;ä¸­æ¥å›å¤åˆ¶ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;code&gt;selectï¼Œpoll&lt;/code&gt;æ¯æ¬¡è°ƒç”¨æ—¶éƒ½éœ€è¦ä¼ é€’å…¨é‡çš„æ–‡ä»¶æè¿°ç¬¦é›†åˆï¼Œå¯¼è‡´å¤§é‡é¢‘ç¹çš„æ‹·è´æ“ä½œã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;epoll&lt;/code&gt;ä»…ä¼šé€šçŸ¥&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„socketã€‚é¿å…äº†åœ¨ç”¨æˆ·ç©ºé—´éå†çš„å¼€é”€ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;code&gt;selectï¼Œpoll&lt;/code&gt;åªä¼šåœ¨&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„socketä¸Šæ‰“å¥½æ ‡è®°ï¼Œä¾ç„¶æ˜¯å…¨é‡è¿”å›ï¼Œæ‰€ä»¥åœ¨ç”¨æˆ·ç©ºé—´è¿˜éœ€è¦ç”¨æˆ·ç¨‹åºåœ¨ä¸€æ¬¡éå†å…¨é‡é›†åˆæ‰¾å‡ºå…·ä½“&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„socketã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;epoll&lt;/code&gt;é€šè¿‡åœ¨&lt;code&gt;socket&lt;/code&gt;çš„ç­‰å¾…é˜Ÿåˆ—ä¸Šæ³¨å†Œå›è°ƒå‡½æ•°&lt;code&gt;ep_poll_callback&lt;/code&gt;é€šçŸ¥ç”¨æˆ·ç¨‹åº&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„socketã€‚é¿å…äº†åœ¨å†…æ ¸ä¸­è½®è¯¢çš„å¼€é”€ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å¤§éƒ¨åˆ†æƒ…å†µä¸‹&lt;code&gt;socket&lt;/code&gt;ä¸Šå¹¶ä¸æ€»æ˜¯&lt;code&gt;IOæ´»è·ƒ&lt;/code&gt;çš„ï¼Œåœ¨é¢å¯¹æµ·é‡è¿æ¥çš„æƒ…å†µä¸‹ï¼Œ&lt;code&gt;selectï¼Œpoll&lt;/code&gt;é‡‡ç”¨å†…æ ¸è½®è¯¢çš„æ–¹å¼è·å–&lt;code&gt;IOæ´»è·ƒ&lt;/code&gt;çš„socketï¼Œæ— ç–‘æ˜¯æ€§èƒ½ä½ä¸‹çš„æ ¸å¿ƒåŸå› ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ ¹æ®ä»¥ä¸Š&lt;code&gt;epoll&lt;/code&gt;çš„æ€§èƒ½ä¼˜åŠ¿ï¼Œå®ƒæ˜¯ç›®å‰ä¸ºæ­¢å„å¤§ä¸»æµç½‘ç»œæ¡†æ¶ï¼Œä»¥åŠåå‘ä»£ç†ä¸­é—´ä»¶ä½¿ç”¨åˆ°çš„ç½‘ç»œIOæ¨¡å‹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ©ç”¨&lt;code&gt;epoll&lt;/code&gt;å¤šè·¯å¤ç”¨IOæ¨¡å‹å¯ä»¥è½»æ¾çš„è§£å†³&lt;code&gt;C10K&lt;/code&gt;é—®é¢˜ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;C100k&lt;/code&gt;çš„è§£å†³æ–¹æ¡ˆä¹Ÿè¿˜æ˜¯åŸºäº&lt;code&gt;C10K&lt;/code&gt;çš„æ–¹æ¡ˆï¼Œé€šè¿‡&lt;code&gt;epoll&lt;/code&gt; é…åˆçº¿ç¨‹æ± ï¼Œå†åŠ ä¸Š CPUã€å†…å­˜å’Œç½‘ç»œæ¥å£çš„æ€§èƒ½å’Œå®¹é‡æå‡ã€‚å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œ&lt;code&gt;C100K&lt;/code&gt;å¾ˆè‡ªç„¶å°±å¯ä»¥è¾¾åˆ°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”šè‡³&lt;code&gt;C1000K&lt;/code&gt;çš„è§£å†³æ–¹æ³•ï¼Œæœ¬è´¨ä¸Šè¿˜æ˜¯æ„å»ºåœ¨ &lt;code&gt;epoll&lt;/code&gt; çš„&lt;code&gt;å¤šè·¯å¤ç”¨ I/O æ¨¡å‹&lt;/code&gt;ä¸Šã€‚åªä¸è¿‡ï¼Œé™¤äº† I/O æ¨¡å‹ä¹‹å¤–ï¼Œè¿˜éœ€è¦ä»åº”ç”¨ç¨‹åºåˆ° Linux å†…æ ¸ã€å†åˆ° CPUã€å†…å­˜å’Œç½‘ç»œç­‰å„ä¸ªå±‚æ¬¡çš„æ·±åº¦ä¼˜åŒ–ï¼Œç‰¹åˆ«æ˜¯éœ€è¦å€ŸåŠ©ç¡¬ä»¶ï¼Œæ¥å¸è½½é‚£äº›åŸæ¥é€šè¿‡è½¯ä»¶å¤„ç†çš„å¤§é‡åŠŸèƒ½ï¼ˆ&lt;code&gt;å»æ‰å¤§é‡çš„ä¸­æ–­å“åº”å¼€é”€&lt;/code&gt;ï¼Œ&lt;code&gt;ä»¥åŠå†…æ ¸åè®®æ ˆå¤„ç†çš„å¼€é”€&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ä¿¡å·é©±åŠ¨IO&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.666&quot; data-type=&quot;png&quot; data-w=&quot;500&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEPmrUxCAPYRsmPqyGfq7icCaV1FP8bwKOTt0icvGO12ickvLv8Y80K7R5A/640?wx_fmt=png&quot;/&gt;&lt;figcaption&gt;ä¿¡å·é©±åŠ¨IO.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤§å®¶å¯¹è¿™ä¸ªè£…å¤‡è‚¯å®šä¸ä¼šé™Œç”Ÿï¼Œå½“æˆ‘ä»¬å»ä¸€äº›ç¾é£ŸåŸåƒé¥­çš„æ—¶å€™ï¼Œç‚¹å®Œé¤ä»˜äº†é’±ï¼Œè€æ¿ä¼šç»™æˆ‘ä»¬ä¸€ä¸ªä¿¡å·å™¨ã€‚ç„¶åæˆ‘ä»¬å¸¦ç€è¿™ä¸ªä¿¡å·å™¨å¯ä»¥å»æ‰¾é¤æ¡Œï¼Œæˆ–è€…å¹²äº›å…¶ä»–çš„äº‹æƒ…ã€‚å½“ä¿¡å·å™¨äº®äº†çš„æ—¶å€™ï¼Œè¿™æ—¶ä»£è¡¨é¥­é¤å·²ç»åšå¥½ï¼Œæˆ‘ä»¬å¯ä»¥å»çª—å£å–é¤äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªå…¸å‹çš„ç”Ÿæ´»åœºæ™¯å’Œæˆ‘ä»¬è¦ä»‹ç»çš„&lt;code&gt;ä¿¡å·é©±åŠ¨IOæ¨¡å‹&lt;/code&gt;å°±å¾ˆåƒã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨&lt;code&gt;ä¿¡å·é©±åŠ¨IOæ¨¡å‹&lt;/code&gt;ä¸‹ï¼Œç”¨æˆ·è¿›ç¨‹æ“ä½œé€šè¿‡&lt;code&gt;ç³»ç»Ÿè°ƒç”¨ sigaction å‡½æ•°&lt;/code&gt;å‘èµ·ä¸€ä¸ª IO è¯·æ±‚ï¼Œåœ¨å¯¹åº”çš„&lt;code&gt;socket&lt;/code&gt;æ³¨å†Œä¸€ä¸ª&lt;code&gt;ä¿¡å·å›è°ƒ&lt;/code&gt;ï¼Œæ­¤æ—¶&lt;code&gt;ä¸é˜»å¡&lt;/code&gt;ç”¨æˆ·è¿›ç¨‹ï¼Œè¿›ç¨‹ä¼šç»§ç»­å·¥ä½œã€‚å½“å†…æ ¸æ•°æ®å°±ç»ªæ—¶ï¼Œå†…æ ¸å°±ä¸ºè¯¥è¿›ç¨‹ç”Ÿæˆä¸€ä¸ª &lt;code&gt;SIGIO ä¿¡å·&lt;/code&gt;ï¼Œé€šè¿‡ä¿¡å·å›è°ƒé€šçŸ¥è¿›ç¨‹è¿›è¡Œç›¸å…³ IO æ“ä½œã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼š&lt;code&gt;ä¿¡å·é©±åŠ¨å¼ IO æ¨¡å‹&lt;/code&gt;ä¾ç„¶æ˜¯&lt;code&gt;åŒæ­¥IO&lt;/code&gt;ï¼Œå› ä¸ºå®ƒè™½ç„¶å¯ä»¥åœ¨ç­‰å¾…æ•°æ®çš„æ—¶å€™ä¸è¢«é˜»å¡ï¼Œä¹Ÿä¸ä¼šé¢‘ç¹çš„è½®è¯¢ï¼Œä½†æ˜¯å½“æ•°æ®å°±ç»ªï¼Œå†…æ ¸ä¿¡å·é€šçŸ¥åï¼Œç”¨æˆ·è¿›ç¨‹ä¾ç„¶è¦è‡ªå·±å»è¯»å–æ•°æ®ï¼Œåœ¨&lt;code&gt;æ•°æ®æ‹·è´é˜¶æ®µ&lt;/code&gt;å‘ç”Ÿé˜»å¡ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ä¿¡å·é©±åŠ¨ IOæ¨¡å‹ ç›¸æ¯”äºå‰ä¸‰ç§ IO æ¨¡å‹ï¼Œå®ç°äº†åœ¨ç­‰å¾…æ•°æ®å°±ç»ªæ—¶ï¼Œè¿›ç¨‹ä¸è¢«é˜»å¡ï¼Œä¸»å¾ªç¯å¯ä»¥ç»§ç»­å·¥ä½œï¼Œæ‰€ä»¥&lt;code&gt;ç†è®ºä¸Š&lt;/code&gt;æ€§èƒ½æ›´ä½³ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯å®é™…ä¸Šï¼Œä½¿ç”¨&lt;code&gt;TCPåè®®&lt;/code&gt;é€šä¿¡æ—¶ï¼Œ&lt;code&gt;ä¿¡å·é©±åŠ¨IOæ¨¡å‹&lt;/code&gt;å‡ ä¹&lt;code&gt;ä¸ä¼šè¢«é‡‡ç”¨&lt;/code&gt;ã€‚åŸå› å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ä¿¡å·IO åœ¨å¤§é‡ IO æ“ä½œæ—¶å¯èƒ½ä¼šå› ä¸ºä¿¡å·é˜Ÿåˆ—æº¢å‡ºå¯¼è‡´æ²¡æ³•é€šçŸ¥&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;SIGIO ä¿¡å·&lt;/code&gt;æ˜¯ä¸€ç§ Unix ä¿¡å·ï¼Œä¿¡å·æ²¡æœ‰é™„åŠ ä¿¡æ¯ï¼Œå¦‚æœä¸€ä¸ªä¿¡å·æºæœ‰å¤šç§äº§ç”Ÿä¿¡å·çš„åŸå› ï¼Œä¿¡å·æ¥æ”¶è€…å°±æ— æ³•ç¡®å®šç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆã€‚è€Œ TCP socket ç”Ÿäº§çš„ä¿¡å·äº‹ä»¶æœ‰ä¸ƒç§ä¹‹å¤šï¼Œè¿™æ ·åº”ç”¨ç¨‹åºæ”¶åˆ° SIGIOï¼Œæ ¹æœ¬æ— ä»åŒºåˆ†å¤„ç†ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†&lt;code&gt;ä¿¡å·é©±åŠ¨IOæ¨¡å‹&lt;/code&gt;å¯ä»¥ç”¨åœ¨ &lt;code&gt;UDP&lt;/code&gt;é€šä¿¡ä¸Šï¼Œå› ä¸ºUDP åªæœ‰&lt;code&gt;ä¸€ä¸ªæ•°æ®è¯·æ±‚äº‹ä»¶&lt;/code&gt;ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€åœ¨æ­£å¸¸æƒ…å†µä¸‹ UDP è¿›ç¨‹åªè¦æ•è· SIGIO ä¿¡å·ï¼Œå°±è°ƒç”¨ &lt;code&gt;read ç³»ç»Ÿè°ƒç”¨&lt;/code&gt;è¯»å–åˆ°è¾¾çš„æ•°æ®ã€‚å¦‚æœå‡ºç°å¼‚å¸¸ï¼Œå°±è¿”å›ä¸€ä¸ªå¼‚å¸¸é”™è¯¯ã€‚&lt;/p&gt;&lt;hr data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œæ’å¥é¢˜å¤–è¯ï¼Œå¤§å®¶è§‰ä¸è§‰å¾—&lt;code&gt;é˜»å¡IOæ¨¡å‹&lt;/code&gt;åœ¨ç”Ÿæ´»ä¸­çš„ä¾‹å­å°±åƒæ˜¯æˆ‘ä»¬åœ¨é£Ÿå ‚æ’é˜Ÿæ‰“é¥­ã€‚ä½ è‡ªå·±éœ€è¦æ’é˜Ÿå»æ‰“é¥­åŒæ—¶æ‰“é¥­å¸ˆå‚…åœ¨é…èœçš„è¿‡ç¨‹ä¸­ä½ éœ€è¦ç­‰å¾…ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.740909090909091&quot; data-type=&quot;png&quot; data-w=&quot;220&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEfnPgIKViaoGPghC3DGrmSn8YiaibhwQBrUiaFgticngwAwyqr6hh6exRocA/640?wx_fmt=png&quot;/&gt;&lt;figcaption&gt;é˜»å¡IO.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;IOå¤šè·¯å¤ç”¨æ¨¡å‹&lt;/code&gt;å°±åƒæ˜¯æˆ‘ä»¬åœ¨é¥­åº—é—¨å£æ’é˜Ÿç­‰å¾…å«å·ã€‚å«å·å™¨å°±å¥½æ¯”&lt;code&gt;select,poll,epoll&lt;/code&gt;å¯ä»¥ç»Ÿä¸€ç®¡ç†å…¨éƒ¨é¡¾å®¢çš„&lt;code&gt;åƒé¥­å°±ç»ª&lt;/code&gt;äº‹ä»¶ï¼Œå®¢æˆ·å¥½æ¯”æ˜¯&lt;code&gt;socket&lt;/code&gt;è¿æ¥ï¼Œè°å¯ä»¥å»åƒé¥­äº†ï¼Œå«å·å™¨å°±é€šçŸ¥è°ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6232394366197183&quot; data-type=&quot;png&quot; data-w=&quot;284&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEB28gaSs3gtCLlPLIlibib0kRf9XgKCEbuW8Tvx3dC20Bc8MylahYMbtg/640?wx_fmt=png&quot;/&gt;&lt;figcaption&gt;IOå¤šè·¯å¤ç”¨.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;##å¼‚æ­¥IOï¼ˆAIOï¼‰&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»¥ä¸Šä»‹ç»çš„å››ç§&lt;code&gt;IOæ¨¡å‹&lt;/code&gt;å‡ä¸º&lt;code&gt;åŒæ­¥IO&lt;/code&gt;ï¼Œå®ƒä»¬éƒ½ä¼šé˜»å¡åœ¨ç¬¬äºŒé˜¶æ®µ&lt;code&gt;æ•°æ®æ‹·è´é˜¶æ®µ&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šè¿‡åœ¨å‰è¾¹å°èŠ‚ã€ŠåŒæ­¥ä¸å¼‚æ­¥ã€‹ä¸­çš„ä»‹ç»ï¼Œç›¸ä¿¡å¤§å®¶å¾ˆå®¹æ˜“å°±ä¼šç†è§£&lt;code&gt;å¼‚æ­¥IOæ¨¡å‹&lt;/code&gt;ï¼Œåœ¨&lt;code&gt;å¼‚æ­¥IOæ¨¡å‹&lt;/code&gt;ä¸‹ï¼ŒIOæ“ä½œåœ¨&lt;code&gt;æ•°æ®å‡†å¤‡é˜¶æ®µ&lt;/code&gt;å’Œ&lt;code&gt;æ•°æ®æ‹·è´é˜¶æ®µ&lt;/code&gt;å‡æ˜¯ç”±å†…æ ¸æ¥å®Œæˆï¼Œä¸ä¼šå¯¹åº”ç”¨ç¨‹åºé€ æˆä»»ä½•é˜»å¡ã€‚åº”ç”¨è¿›ç¨‹åªéœ€è¦åœ¨&lt;code&gt;æŒ‡å®šçš„æ•°ç»„&lt;/code&gt;ä¸­å¼•ç”¨æ•°æ®å³å¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;å¼‚æ­¥ IO&lt;/code&gt; ä¸&lt;code&gt;ä¿¡å·é©±åŠ¨ IO&lt;/code&gt; çš„ä¸»è¦åŒºåˆ«åœ¨äºï¼š&lt;code&gt;ä¿¡å·é©±åŠ¨ IO&lt;/code&gt; ç”±å†…æ ¸é€šçŸ¥ä½•æ—¶å¯ä»¥&lt;code&gt;å¼€å§‹ä¸€ä¸ª IO æ“ä½œ&lt;/code&gt;ï¼Œè€Œ&lt;code&gt;å¼‚æ­¥ IO&lt;/code&gt;ç”±å†…æ ¸é€šçŸ¥ &lt;code&gt;IO æ“ä½œä½•æ—¶å·²ç»å®Œæˆ&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸¾ä¸ªç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼š&lt;code&gt;å¼‚æ­¥IOæ¨¡å‹&lt;/code&gt;å°±åƒæˆ‘ä»¬å»ä¸€ä¸ªé«˜æ¡£é¥­åº—é‡Œçš„åŒ…é—´åƒé¥­ï¼Œæˆ‘ä»¬åªéœ€è¦ååœ¨åŒ…é—´é‡Œé¢ï¼Œç‚¹å®Œé¤ï¼ˆ&lt;code&gt;ç±»æ¯”å¼‚æ­¥IOè°ƒç”¨&lt;/code&gt;ï¼‰ä¹‹åï¼Œæˆ‘ä»¬å°±ä»€ä¹ˆä¹Ÿä¸éœ€è¦ç®¡ï¼Œè¯¥å–é…’å–é…’ï¼Œè¯¥èŠå¤©èŠå¤©ï¼Œé¥­é¤åšå¥½åæœåŠ¡å‘˜ï¼ˆ&lt;code&gt;ç±»æ¯”å†…æ ¸&lt;/code&gt;ï¼‰ä¼šè‡ªå·±ç»™æˆ‘ä»¬é€åˆ°åŒ…é—´ï¼ˆ&lt;code&gt;ç±»æ¯”ç”¨æˆ·ç©ºé—´&lt;/code&gt;ï¼‰æ¥ã€‚æ•´ä¸ªè¿‡ç¨‹æ²¡æœ‰ä»»ä½•é˜»å¡ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.358&quot; data-type=&quot;png&quot; data-w=&quot;500&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEfQXKapnOwAK72jTpaKrqfUicX38A8Z5TWopFUyZC0B04NMBRMdiapAFw/640?wx_fmt=png&quot;/&gt;&lt;figcaption&gt;å¼‚æ­¥IO.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;å¼‚æ­¥IO&lt;/code&gt;çš„ç³»ç»Ÿè°ƒç”¨éœ€è¦æ“ä½œç³»ç»Ÿå†…æ ¸æ¥æ”¯æŒï¼Œç›®å‰åªæœ‰&lt;code&gt;Window&lt;/code&gt;ä¸­çš„&lt;code&gt;IOCP&lt;/code&gt;å®ç°äº†éå¸¸æˆç†Ÿçš„&lt;code&gt;å¼‚æ­¥IOæœºåˆ¶&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€Œ&lt;code&gt;Linux&lt;/code&gt;ç³»ç»Ÿå¯¹&lt;code&gt;å¼‚æ­¥IOæœºåˆ¶&lt;/code&gt;å®ç°çš„ä¸å¤Ÿæˆç†Ÿï¼Œä¸”ä¸&lt;code&gt;NIO&lt;/code&gt;çš„æ€§èƒ½ç›¸æ¯”æå‡ä¹Ÿä¸æ˜æ˜¾ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ä½†Linux kernel åœ¨5.1ç‰ˆæœ¬ç”±Facebookçš„å¤§ç¥Jens Axboeå¼•å…¥äº†æ–°çš„å¼‚æ­¥IOåº“&lt;code&gt;io_uring&lt;/code&gt; æ”¹å–„äº†åŸæ¥Linux native AIOçš„ä¸€äº›æ€§èƒ½é—®é¢˜ã€‚æ€§èƒ½ç›¸æ¯”&lt;code&gt;Epoll&lt;/code&gt;ä»¥åŠä¹‹å‰åŸç”Ÿçš„&lt;code&gt;AIO&lt;/code&gt;æé«˜äº†ä¸å°‘ï¼Œå€¼å¾—å…³æ³¨ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å†åŠ ä¸Š&lt;code&gt;ä¿¡å·é©±åŠ¨IOæ¨¡å‹&lt;/code&gt;ä¸é€‚ç”¨&lt;code&gt;TCPåè®®&lt;/code&gt;ï¼Œæ‰€ä»¥ç›®å‰å¤§éƒ¨åˆ†é‡‡ç”¨çš„è¿˜æ˜¯&lt;code&gt;IOå¤šè·¯å¤ç”¨æ¨¡å‹&lt;/code&gt;ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;IOçº¿ç¨‹æ¨¡å‹&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å‰è¾¹å†…å®¹çš„ä»‹ç»ä¸­ï¼Œæˆ‘ä»¬è¯¦è¿°äº†ç½‘ç»œæ•°æ®åŒ…çš„æ¥æ”¶å’Œå‘é€è¿‡ç¨‹ï¼Œå¹¶é€šè¿‡ä»‹ç»5ç§&lt;code&gt;IOæ¨¡å‹&lt;/code&gt;äº†è§£äº†å†…æ ¸æ˜¯å¦‚ä½•è¯»å–ç½‘ç»œæ•°æ®å¹¶é€šçŸ¥ç»™ç”¨æˆ·çº¿ç¨‹çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‰è¾¹çš„å†…å®¹éƒ½æ˜¯ä»¥&lt;code&gt;å†…æ ¸ç©ºé—´&lt;/code&gt;çš„è§†è§’æ¥å‰–æç½‘ç»œæ•°æ®çš„æ”¶å‘æ¨¡å‹ï¼Œæœ¬å°èŠ‚æˆ‘ä»¬ç«™åœ¨&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;çš„è§†è§’æ¥çœ‹ä¸‹å¦‚æœå¯¹ç½‘ç»œæ•°æ®è¿›è¡Œæ”¶å‘ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›¸å¯¹&lt;code&gt;å†…æ ¸&lt;/code&gt;æ¥è®²ï¼Œ&lt;code&gt;ç”¨æˆ·ç©ºé—´çš„IOçº¿ç¨‹æ¨¡å‹&lt;/code&gt;ç›¸å¯¹å°±ç®€å•ä¸€äº›ã€‚è¿™äº›&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;çš„&lt;code&gt;IOçº¿ç¨‹æ¨¡å‹&lt;/code&gt;éƒ½æ˜¯åœ¨è®¨è®ºå½“å¤šçº¿ç¨‹ä¸€èµ·é…åˆå·¥ä½œæ—¶è°è´Ÿè´£æ¥æ”¶è¿æ¥ï¼Œè°è´Ÿè´£å“åº”IO è¯»å†™ã€è°è´Ÿè´£è®¡ç®—ã€è°è´Ÿè´£å‘é€å’Œæ¥æ”¶ï¼Œä»…ä»…æ˜¯ç”¨æˆ·IOçº¿ç¨‹çš„ä¸åŒåˆ†å·¥æ¨¡å¼ç½¢äº†ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Reactor&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Reactor&lt;/code&gt;æ˜¯åˆ©ç”¨&lt;code&gt;NIO&lt;/code&gt;å¯¹&lt;code&gt;IOçº¿ç¨‹&lt;/code&gt;è¿›è¡Œä¸åŒçš„åˆ†å·¥ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ä½¿ç”¨å‰è¾¹æˆ‘ä»¬æåˆ°çš„&lt;code&gt;IOå¤šè·¯å¤ç”¨æ¨¡å‹&lt;/code&gt;æ¯”å¦‚&lt;code&gt;select,poll,epoll,kqueue&lt;/code&gt;,è¿›è¡ŒIOäº‹ä»¶çš„æ³¨å†Œå’Œç›‘å¬ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å°†ç›‘å¬åˆ°&lt;code&gt;å°±ç»ªçš„IOäº‹ä»¶&lt;/code&gt;åˆ†å‘&lt;code&gt;dispatch&lt;/code&gt;åˆ°å„ä¸ªå…·ä½“çš„å¤„ç†&lt;code&gt;Handler&lt;/code&gt;ä¸­è¿›è¡Œç›¸åº”çš„&lt;code&gt;IOäº‹ä»¶å¤„ç†&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šè¿‡&lt;code&gt;IOå¤šè·¯å¤ç”¨æŠ€æœ¯&lt;/code&gt;å°±å¯ä»¥ä¸æ–­çš„ç›‘å¬&lt;code&gt;IOäº‹ä»¶&lt;/code&gt;ï¼Œä¸æ–­çš„åˆ†å‘&lt;code&gt;dispatch&lt;/code&gt;ï¼Œå°±åƒä¸€ä¸ª&lt;code&gt;ååº”å †&lt;/code&gt;ä¸€æ ·ï¼Œçœ‹èµ·æ¥åƒä¸æ–­çš„äº§ç”Ÿ&lt;code&gt;IOäº‹ä»¶&lt;/code&gt;ï¼Œå› æ­¤æˆ‘ä»¬ç§°è¿™ç§æ¨¡å¼ä¸º&lt;code&gt;Reactor&lt;/code&gt;æ¨¡å‹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹&lt;code&gt;Reactoræ¨¡å‹&lt;/code&gt;çš„ä¸‰ç§åˆ†ç±»ï¼š&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å•Reactorå•çº¿ç¨‹&lt;span/&gt;&lt;/h3&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.39520333680917624&quot; data-type=&quot;png&quot; data-w=&quot;959&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEwlZPO0207A07smWv3l1Gq7rHOMAmRuqePPg2KdO7BPDbSQDrguxz6g/640?wx_fmt=png&quot;/&gt;&lt;figcaption&gt;å•Reactorå•çº¿ç¨‹&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Reactoræ¨¡å‹&lt;/code&gt;æ˜¯ä¾èµ–&lt;code&gt;IOå¤šè·¯å¤ç”¨æŠ€æœ¯&lt;/code&gt;å®ç°ç›‘å¬&lt;code&gt;IOäº‹ä»¶&lt;/code&gt;ï¼Œä»è€Œæºæºä¸æ–­çš„äº§ç”Ÿ&lt;code&gt;IOå°±ç»ªäº‹ä»¶&lt;/code&gt;ï¼Œåœ¨Linuxç³»ç»Ÿä¸‹æˆ‘ä»¬ä½¿ç”¨&lt;code&gt;epoll&lt;/code&gt;æ¥è¿›è¡Œ&lt;code&gt;IOå¤šè·¯å¤ç”¨&lt;/code&gt;ï¼Œæˆ‘ä»¬ä»¥Linuxç³»ç»Ÿä¸ºä¾‹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å•&lt;code&gt;Reactor&lt;/code&gt;æ„å‘³ç€åªæœ‰ä¸€ä¸ª&lt;code&gt;epoll&lt;/code&gt;å¯¹è±¡ï¼Œç”¨æ¥ç›‘å¬æ‰€æœ‰çš„äº‹ä»¶ï¼Œæ¯”å¦‚&lt;code&gt;è¿æ¥äº‹ä»¶&lt;/code&gt;ï¼Œ&lt;code&gt;è¯»å†™äº‹ä»¶&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;å•çº¿ç¨‹&lt;/code&gt;æ„å‘³ç€åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œ&lt;code&gt;epoll_wait&lt;/code&gt;è·å–&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„&lt;code&gt;Socket&lt;/code&gt;ï¼Œç„¶åå¯¹è¿™äº›å°±ç»ªçš„&lt;code&gt;Socket&lt;/code&gt;æ‰§è¡Œè¯»å†™ï¼Œä»¥åŠåè¾¹çš„ä¸šåŠ¡å¤„ç†ä¹Ÿä¾ç„¶æ˜¯è¿™ä¸ªçº¿ç¨‹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;å•Reactorå•çº¿ç¨‹&lt;/code&gt;æ¨¡å‹å°±å¥½æ¯”æˆ‘ä»¬å¼€äº†ä¸€ä¸ªå¾ˆå°å¾ˆå°çš„å°é¥­é¦†ï¼Œä½œä¸ºè€æ¿çš„æˆ‘ä»¬éœ€è¦ä¸€ä¸ªäººå¹²æ‰€æœ‰çš„äº‹æƒ…ï¼ŒåŒ…æ‹¬ï¼šè¿æ¥é¡¾å®¢ï¼ˆ&lt;code&gt;acceptäº‹ä»¶&lt;/code&gt;ï¼‰ï¼Œä¸ºé¡¾å®¢ä»‹ç»èœå•ç­‰å¾…é¡¾å®¢ç‚¹èœ(&lt;code&gt;IOè¯·æ±‚&lt;/code&gt;)ï¼Œåšèœï¼ˆ&lt;code&gt;ä¸šåŠ¡å¤„ç†&lt;/code&gt;ï¼‰ï¼Œä¸Šèœï¼ˆ&lt;code&gt;IOå“åº”&lt;/code&gt;ï¼‰ï¼Œé€å®¢ï¼ˆ&lt;code&gt;æ–­å¼€è¿æ¥&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å•Reactorå¤šçº¿ç¨‹&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;éšç€å®¢äººçš„å¢å¤šï¼ˆ&lt;code&gt;å¹¶å‘è¯·æ±‚&lt;/code&gt;ï¼‰ï¼Œæ˜¾ç„¶é¥­é¦†é‡Œçš„äº‹æƒ…åªæœ‰æˆ‘ä»¬ä¸€ä¸ªäººå¹²ï¼ˆ&lt;code&gt;å•çº¿ç¨‹&lt;/code&gt;ï¼‰è‚¯å®šæ˜¯å¿™ä¸è¿‡æ¥çš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±éœ€è¦å¤šæ‹›è˜ä¸€äº›å‘˜å·¥ï¼ˆ&lt;code&gt;å¤šçº¿ç¨‹&lt;/code&gt;ï¼‰æ¥å¸®ç€ä¸€èµ·å¹²ä¸Šè¿°çš„äº‹æƒ…ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äºæ˜¯å°±æœ‰äº†&lt;code&gt;å•Reactorå¤šçº¿ç¨‹&lt;/code&gt;æ¨¡å‹ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7006048387096774&quot; data-type=&quot;png&quot; data-w=&quot;992&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEo6zebSVIsdVBZIBDtOM5OEOwJxgZfMicrYkyfnz6hLIkiaK8MN4I5Kfw/640?wx_fmt=png&quot;/&gt;&lt;figcaption&gt;å•Reactorå¤šçº¿ç¨‹&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;è¿™ç§æ¨¡å¼ä¸‹ï¼Œä¹Ÿæ˜¯åªæœ‰ä¸€ä¸ª&lt;code&gt;epoll&lt;/code&gt;å¯¹è±¡æ¥ç›‘å¬æ‰€æœ‰çš„&lt;code&gt;IOäº‹ä»¶&lt;/code&gt;ï¼Œä¸€ä¸ªçº¿ç¨‹æ¥è°ƒç”¨&lt;code&gt;epoll_wait&lt;/code&gt;è·å–&lt;code&gt;IOå°±ç»ª&lt;/code&gt;çš„&lt;code&gt;Socket&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä½†æ˜¯å½“&lt;code&gt;IOå°±ç»ªäº‹ä»¶&lt;/code&gt;äº§ç”Ÿæ—¶ï¼Œè¿™äº›&lt;code&gt;IOäº‹ä»¶&lt;/code&gt;å¯¹åº”å¤„ç†çš„ä¸šåŠ¡&lt;code&gt;Handler&lt;/code&gt;ï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡çº¿ç¨‹æ± æ¥æ‰§è¡Œã€‚è¿™æ ·ç›¸æ¯”&lt;code&gt;å•Reactorå•çº¿ç¨‹&lt;/code&gt;æ¨¡å‹æé«˜äº†æ‰§è¡Œæ•ˆç‡ï¼Œå……åˆ†å‘æŒ¥äº†å¤šæ ¸CPUçš„ä¼˜åŠ¿ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¸»ä»Reactorå¤šçº¿ç¨‹&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åšä»»ä½•äº‹æƒ…éƒ½è¦åŒºåˆ†&lt;code&gt;äº‹æƒ…çš„ä¼˜å…ˆçº§&lt;/code&gt;ï¼Œæˆ‘ä»¬åº”è¯¥&lt;code&gt;ä¼˜å…ˆé«˜æ•ˆ&lt;/code&gt;çš„å»åš&lt;code&gt;ä¼˜å…ˆçº§æ›´é«˜&lt;/code&gt;çš„äº‹æƒ…ï¼Œè€Œä¸æ˜¯ä¸€è‚¡è„‘ä¸åˆ†ä¼˜å…ˆçº§çš„å…¨éƒ¨å»åšã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“æˆ‘ä»¬çš„å°é¥­é¦†å®¢äººè¶Šæ¥è¶Šå¤šï¼ˆ&lt;code&gt;å¹¶å‘é‡è¶Šæ¥è¶Šå¤§&lt;/code&gt;ï¼‰ï¼Œæˆ‘ä»¬å°±éœ€è¦æ‰©å¤§é¥­åº—çš„è§„æ¨¡ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬å‘ç°ï¼Œ&lt;code&gt;è¿æ¥å®¢äºº&lt;/code&gt;æ˜¯é¥­åº—æœ€é‡è¦çš„å·¥ä½œï¼Œæˆ‘ä»¬è¦å…ˆæŠŠå®¢äººè¿æ¥è¿›æ¥ï¼Œä¸èƒ½è®©å®¢äººä¸€çœ‹äººå¤šå°±èµ°æ‰ï¼Œåªè¦å®¢äººè¿›æ¥äº†ï¼Œå“ªæ€•èœåšçš„æ…¢ä¸€ç‚¹ä¹Ÿæ²¡å…³ç³»ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äºæ˜¯ï¼Œ&lt;code&gt;ä¸»ä»Reactorå¤šçº¿ç¨‹&lt;/code&gt;æ¨¡å‹å°±äº§ç”Ÿäº†ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6917670682730924&quot; data-type=&quot;png&quot; data-w=&quot;996&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEubXjFtTT6Ac0xQxicxT4jwia2OOjiafa2FhzzYh1VGelwHmj8OBdKwukg/640?wx_fmt=png&quot;/&gt;&lt;figcaption&gt;ä¸»ä»Reactorå¤šçº¿ç¨‹&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;æˆ‘ä»¬ç”±åŸæ¥çš„&lt;code&gt;å•Reactor&lt;/code&gt;å˜ä¸ºäº†&lt;code&gt;å¤šReactor&lt;/code&gt;ã€‚&lt;code&gt;ä¸»Reactor&lt;/code&gt;ç”¨æ¥ä¼˜å…ˆ&lt;code&gt;ä¸“é—¨&lt;/code&gt;åšä¼˜å…ˆçº§æœ€é«˜çš„äº‹æƒ…ï¼Œä¹Ÿå°±æ˜¯è¿æ¥å®¢äººï¼ˆ&lt;code&gt;å¤„ç†è¿æ¥äº‹ä»¶&lt;/code&gt;ï¼‰ï¼Œå¯¹åº”çš„å¤„ç†&lt;code&gt;Handler&lt;/code&gt;å°±æ˜¯å›¾ä¸­çš„&lt;code&gt;acceptor&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å½“åˆ›å»ºå¥½è¿æ¥ï¼Œå»ºç«‹å¥½å¯¹åº”çš„&lt;code&gt;socket&lt;/code&gt;åï¼Œåœ¨&lt;code&gt;acceptor&lt;/code&gt;ä¸­å°†è¦ç›‘å¬çš„&lt;code&gt;readäº‹ä»¶&lt;/code&gt;æ³¨å†Œåˆ°&lt;code&gt;ä»Reactor&lt;/code&gt;ä¸­ï¼Œç”±&lt;code&gt;ä»Reactor&lt;/code&gt;æ¥ç›‘å¬&lt;code&gt;socket&lt;/code&gt;ä¸Šçš„&lt;code&gt;è¯»å†™&lt;/code&gt;äº‹ä»¶ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;æœ€ç»ˆå°†è¯»å†™çš„ä¸šåŠ¡é€»è¾‘å¤„ç†äº¤ç»™çº¿ç¨‹æ± å¤„ç†ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šè¿™é‡Œå‘&lt;code&gt;ä»Reactor&lt;/code&gt;æ³¨å†Œçš„åªæ˜¯&lt;code&gt;readäº‹ä»¶&lt;/code&gt;ï¼Œå¹¶æ²¡æœ‰æ³¨å†Œ&lt;code&gt;writeäº‹ä»¶&lt;/code&gt;ï¼Œå› ä¸º&lt;code&gt;readäº‹ä»¶&lt;/code&gt;æ˜¯ç”±&lt;code&gt;epollå†…æ ¸&lt;/code&gt;è§¦å‘çš„ï¼Œè€Œ&lt;code&gt;writeäº‹ä»¶&lt;/code&gt;åˆ™æ˜¯ç”±ç”¨æˆ·ä¸šåŠ¡çº¿ç¨‹è§¦å‘çš„ï¼ˆ&lt;code&gt;ä»€ä¹ˆæ—¶å€™å‘é€æ•°æ®æ˜¯ç”±å…·ä½“ä¸šåŠ¡çº¿ç¨‹å†³å®šçš„&lt;/code&gt;ï¼‰ï¼Œæ‰€ä»¥&lt;code&gt;writeäº‹ä»¶&lt;/code&gt;ç†åº”æ˜¯ç”±&lt;code&gt;ç”¨æˆ·ä¸šåŠ¡çº¿ç¨‹&lt;/code&gt;å»æ³¨å†Œã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ç”¨æˆ·çº¿ç¨‹æ³¨å†Œ&lt;code&gt;writeäº‹ä»¶&lt;/code&gt;çš„æ—¶æœºæ˜¯åªæœ‰å½“ç”¨æˆ·å‘é€çš„æ•°æ®&lt;code&gt;æ— æ³•ä¸€æ¬¡æ€§&lt;/code&gt;å…¨éƒ¨å†™å…¥&lt;code&gt;buffer&lt;/code&gt;æ—¶ï¼Œæ‰ä¼šå»æ³¨å†Œ&lt;code&gt;writeäº‹ä»¶&lt;/code&gt;ï¼Œç­‰å¾…&lt;code&gt;bufferé‡æ–°å¯å†™&lt;/code&gt;æ—¶ï¼Œç»§ç»­å†™å…¥å‰©ä¸‹çš„å‘é€æ•°æ®ã€å¦‚æœç”¨æˆ·çº¿ç¨‹å¯ä»¥ä¸€è‚¡è„‘çš„å°†å‘é€æ•°æ®å…¨éƒ¨å†™å…¥&lt;code&gt;buffer&lt;/code&gt;ï¼Œé‚£ä¹ˆä¹Ÿå°±æ— éœ€æ³¨å†Œ&lt;code&gt;writeäº‹ä»¶&lt;/code&gt;åˆ°&lt;code&gt;ä»Reactor&lt;/code&gt;ä¸­ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;ä¸»ä»Reactorå¤šçº¿ç¨‹&lt;/code&gt;æ¨¡å‹æ˜¯ç°åœ¨å¤§éƒ¨åˆ†ä¸»æµç½‘ç»œæ¡†æ¶ä¸­é‡‡ç”¨çš„ä¸€ç§&lt;code&gt;IOçº¿ç¨‹æ¨¡å‹&lt;/code&gt;ã€‚æˆ‘ä»¬æœ¬ç³»åˆ—çš„ä¸»é¢˜&lt;code&gt;Netty&lt;/code&gt;å°±æ˜¯ç”¨çš„è¿™ç§æ¨¡å‹ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Proactor&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Proactor&lt;/code&gt;æ˜¯åŸºäº&lt;code&gt;AIO&lt;/code&gt;å¯¹&lt;code&gt;IOçº¿ç¨‹&lt;/code&gt;è¿›è¡Œåˆ†å·¥çš„ä¸€ç§æ¨¡å‹ã€‚å‰è¾¹æˆ‘ä»¬ä»‹ç»äº†&lt;code&gt;å¼‚æ­¥IOæ¨¡å‹&lt;/code&gt;ï¼Œå®ƒæ˜¯æ“ä½œç³»ç»Ÿå†…æ ¸æ”¯æŒçš„ä¸€ç§å…¨å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ï¼Œåœ¨&lt;code&gt;æ•°æ®å‡†å¤‡é˜¶æ®µ&lt;/code&gt;å’Œ&lt;code&gt;æ•°æ®æ‹·è´é˜¶æ®µ&lt;/code&gt;å…¨ç¨‹æ— é˜»å¡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;ProactorIOçº¿ç¨‹æ¨¡å‹&lt;/code&gt;å°†&lt;code&gt;IOäº‹ä»¶çš„ç›‘å¬&lt;/code&gt;ï¼Œ&lt;code&gt;IOæ“ä½œçš„æ‰§è¡Œ&lt;/code&gt;ï¼Œ&lt;code&gt;IOç»“æœçš„dispatch&lt;/code&gt;ç»Ÿç»Ÿäº¤ç»™&lt;code&gt;å†…æ ¸&lt;/code&gt;æ¥åšã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4403225806451613&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEGKYKib71IWfbpGh4URSHfiaPhTiaWfQVZuJzfg4PwDXm7E6iacaMUrnsVg/640?wx_fmt=png&quot;/&gt;&lt;figcaption&gt;proactor.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;code&gt;Proactoræ¨¡å‹&lt;/code&gt;ç»„ä»¶ä»‹ç»ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;completion handler&lt;/code&gt; ä¸ºç”¨æˆ·ç¨‹åºå®šä¹‰çš„å¼‚æ­¥IOæ“ä½œå›è°ƒå‡½æ•°ï¼Œåœ¨å¼‚æ­¥IOæ“ä½œå®Œæˆæ—¶ä¼šè¢«å†…æ ¸å›è°ƒå¹¶é€šçŸ¥IOç»“æœã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;Completion Event Queue&lt;/code&gt; å¼‚æ­¥IOæ“ä½œå®Œæˆåï¼Œä¼šäº§ç”Ÿå¯¹åº”çš„&lt;code&gt;IOå®Œæˆäº‹ä»¶&lt;/code&gt;ï¼Œå°†&lt;code&gt;IOå®Œæˆäº‹ä»¶&lt;/code&gt;æ”¾å…¥è¯¥é˜Ÿåˆ—ä¸­ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;Asynchronous Operation Processor&lt;/code&gt; è´Ÿè´£&lt;code&gt;å¼‚æ­¥IO&lt;/code&gt;çš„æ‰§è¡Œã€‚æ‰§è¡Œå®Œæˆåäº§ç”Ÿ&lt;code&gt;IOå®Œæˆäº‹ä»¶&lt;/code&gt;æ”¾å…¥&lt;code&gt;Completion Event Queue&lt;/code&gt; é˜Ÿåˆ—ä¸­ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;Proactor&lt;/code&gt; æ˜¯ä¸€ä¸ªäº‹ä»¶å¾ªç¯æ´¾å‘å™¨ï¼Œè´Ÿè´£ä»&lt;code&gt;Completion Event Queue&lt;/code&gt;ä¸­è·å–&lt;code&gt;IOå®Œæˆäº‹ä»¶&lt;/code&gt;ï¼Œå¹¶å›è°ƒä¸&lt;code&gt;IOå®Œæˆäº‹ä»¶&lt;/code&gt;å…³è”çš„&lt;code&gt;completion handler&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;Initiator&lt;/code&gt; åˆå§‹åŒ–å¼‚æ­¥æ“ä½œï¼ˆ&lt;code&gt;asynchronous operation&lt;/code&gt;ï¼‰å¹¶é€šè¿‡&lt;code&gt;Asynchronous Operation Processor&lt;/code&gt;å°†&lt;code&gt;completion handler&lt;/code&gt;å’Œ&lt;code&gt;proactor&lt;/code&gt;æ³¨å†Œåˆ°å†…æ ¸ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;code&gt;Proactoræ¨¡å‹&lt;/code&gt;æ‰§è¡Œè¿‡ç¨‹ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ç”¨æˆ·çº¿ç¨‹å‘èµ·&lt;code&gt;aio_read&lt;/code&gt;ï¼Œå¹¶å‘Šè¯‰&lt;code&gt;å†…æ ¸&lt;/code&gt;ç”¨æˆ·ç©ºé—´ä¸­çš„è¯»ç¼“å†²åŒºåœ°å€ï¼Œä»¥ä¾¿&lt;code&gt;å†…æ ¸&lt;/code&gt;å®Œæˆ&lt;code&gt;IOæ“ä½œ&lt;/code&gt;å°†ç»“æœæ”¾å…¥&lt;code&gt;ç”¨æˆ·ç©ºé—´&lt;/code&gt;çš„è¯»ç¼“å†²åŒºï¼Œç”¨æˆ·çº¿ç¨‹ç›´æ¥å¯ä»¥è¯»å–ç»“æœï¼ˆ&lt;code&gt;æ— ä»»ä½•é˜»å¡&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;Initiator&lt;/code&gt; åˆå§‹åŒ–&lt;code&gt;aio_read&lt;/code&gt;å¼‚æ­¥è¯»å–æ“ä½œï¼ˆ&lt;code&gt;asynchronous operation&lt;/code&gt;ï¼‰,å¹¶å°†&lt;code&gt;completion handler&lt;/code&gt;æ³¨å†Œåˆ°å†…æ ¸ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;åœ¨&lt;code&gt;Proactor&lt;/code&gt;ä¸­æˆ‘ä»¬å…³å¿ƒçš„&lt;code&gt;IOå®Œæˆäº‹ä»¶&lt;/code&gt;ï¼šå†…æ ¸å·²ç»å¸®æˆ‘ä»¬è¯»å¥½æ•°æ®å¹¶æ”¾å…¥æˆ‘ä»¬æŒ‡å®šçš„è¯»ç¼“å†²åŒºï¼Œç”¨æˆ·çº¿ç¨‹å¯ä»¥ç›´æ¥è¯»å–ã€‚åœ¨&lt;code&gt;Reactor&lt;/code&gt;ä¸­æˆ‘ä»¬å…³å¿ƒçš„æ˜¯&lt;code&gt;IOå°±ç»ªäº‹ä»¶&lt;/code&gt;ï¼šæ•°æ®å·²ç»åˆ°æ¥ï¼Œä½†æ˜¯éœ€è¦ç”¨æˆ·çº¿ç¨‹è‡ªå·±å»è¯»å–ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;æ­¤æ—¶ç”¨æˆ·çº¿ç¨‹å°±å¯ä»¥åšå…¶ä»–äº‹æƒ…äº†ï¼Œæ— éœ€ç­‰å¾…IOç»“æœã€‚è€Œå†…æ ¸ä¸æ­¤åŒæ—¶å¼€å§‹å¼‚æ­¥æ‰§è¡ŒIOæ“ä½œã€‚å½“&lt;code&gt;IOæ“ä½œ&lt;/code&gt;å®Œæˆæ—¶ä¼šäº§ç”Ÿä¸€ä¸ª&lt;code&gt;completion event&lt;/code&gt;äº‹ä»¶ï¼Œå°†è¿™ä¸ª&lt;code&gt;IOå®Œæˆäº‹ä»¶&lt;/code&gt;æ”¾å…¥&lt;code&gt;completion event queue&lt;/code&gt;ä¸­ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;Proactor&lt;/code&gt;ä»&lt;code&gt;completion event queue&lt;/code&gt;ä¸­å–å‡º&lt;code&gt;completion event&lt;/code&gt;ï¼Œå¹¶å›è°ƒä¸&lt;code&gt;IOå®Œæˆäº‹ä»¶&lt;/code&gt;å…³è”çš„&lt;code&gt;completion handler&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;åœ¨&lt;code&gt;completion handler&lt;/code&gt;ä¸­å®Œæˆä¸šåŠ¡é€»è¾‘å¤„ç†ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Reactorä¸Proactorå¯¹æ¯”&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;Reactor&lt;/code&gt;æ˜¯åŸºäº&lt;code&gt;NIO&lt;/code&gt;å®ç°çš„ä¸€ç§&lt;code&gt;IOçº¿ç¨‹æ¨¡å‹&lt;/code&gt;ï¼Œ&lt;code&gt;Proactor&lt;/code&gt;æ˜¯åŸºäº&lt;code&gt;AIO&lt;/code&gt;å®ç°çš„&lt;code&gt;IOçº¿ç¨‹æ¨¡å‹&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;Reactor&lt;/code&gt;å…³å¿ƒçš„æ˜¯&lt;code&gt;IOå°±ç»ªäº‹ä»¶&lt;/code&gt;ï¼Œ&lt;code&gt;Proactor&lt;/code&gt;å…³å¿ƒçš„æ˜¯&lt;code&gt;IOå®Œæˆäº‹ä»¶&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;åœ¨&lt;code&gt;Proactor&lt;/code&gt;ä¸­ï¼Œç”¨æˆ·ç¨‹åºéœ€è¦å‘å†…æ ¸ä¼ é€’&lt;code&gt;ç”¨æˆ·ç©ºé—´çš„è¯»ç¼“å†²åŒºåœ°å€&lt;/code&gt;ã€‚&lt;code&gt;Reactor&lt;/code&gt;åˆ™ä¸éœ€è¦ã€‚è¿™ä¹Ÿå°±å¯¼è‡´äº†åœ¨&lt;code&gt;Proactor&lt;/code&gt;ä¸­æ¯ä¸ªå¹¶å‘æ“ä½œéƒ½è¦æ±‚æœ‰ç‹¬ç«‹çš„ç¼“å­˜åŒºï¼Œåœ¨å†…å­˜ä¸Šæœ‰ä¸€å®šçš„å¼€é”€ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;Proactor&lt;/code&gt; çš„å®ç°é€»è¾‘å¤æ‚ï¼Œç¼–ç æˆæœ¬è¾ƒ &lt;code&gt;Reactor&lt;/code&gt;è¦é«˜å¾ˆå¤šã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;Proactor&lt;/code&gt; åœ¨å¤„ç†&lt;code&gt;é«˜è€—æ—¶ IO&lt;/code&gt;æ—¶çš„æ€§èƒ½è¦é«˜äº &lt;code&gt;Reactor&lt;/code&gt;ï¼Œä½†å¯¹äº&lt;code&gt;ä½è€—æ—¶ IO&lt;/code&gt;çš„æ‰§è¡Œæ•ˆç‡æå‡&lt;code&gt;å¹¶ä¸æ˜æ˜¾&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Nettyçš„IOæ¨¡å‹&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æˆ‘ä»¬ä»‹ç»å®Œ&lt;code&gt;ç½‘ç»œæ•°æ®åŒ…åœ¨å†…æ ¸ä¸­çš„æ”¶å‘è¿‡ç¨‹&lt;/code&gt;ä»¥åŠäº”ç§&lt;code&gt;IOæ¨¡å‹&lt;/code&gt;å’Œä¸¤ç§&lt;code&gt;IOçº¿ç¨‹æ¨¡å‹&lt;/code&gt;åï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸‹&lt;code&gt;netty&lt;/code&gt;ä¸­çš„IOæ¨¡å‹æ˜¯ä»€ä¹ˆæ ·çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æˆ‘ä»¬ä»‹ç»&lt;code&gt;Reactor IOçº¿ç¨‹æ¨¡å‹&lt;/code&gt;çš„æ—¶å€™æåˆ°æœ‰ä¸‰ç§&lt;code&gt;Reactoræ¨¡å‹&lt;/code&gt;ï¼š&lt;code&gt;å•Reactorå•çº¿ç¨‹&lt;/code&gt;ï¼Œ&lt;code&gt;å•Reactorå¤šçº¿ç¨‹&lt;/code&gt;ï¼Œ&lt;code&gt;ä¸»ä»Reactorå¤šçº¿ç¨‹&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸‰ç§&lt;code&gt;Reactoræ¨¡å‹&lt;/code&gt;åœ¨&lt;code&gt;netty&lt;/code&gt;ä¸­éƒ½æ˜¯æ”¯æŒçš„ï¼Œä½†æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„æ˜¯&lt;code&gt;ä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å‹&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€Œæˆ‘ä»¬ä¹‹å‰ä»‹ç»çš„ä¸‰ç§&lt;code&gt;Reactor&lt;/code&gt;åªæ˜¯ä¸€ç§æ¨¡å‹ï¼Œæ˜¯ä¸€ç§è®¾è®¡æ€æƒ³ã€‚å®é™…ä¸Šå„ç§ç½‘ç»œæ¡†æ¶åœ¨å®ç°ä¸­å¹¶ä¸æ˜¯ä¸¥æ ¼æŒ‰ç…§æ¨¡å‹æ¥å®ç°çš„ï¼Œä¼šæœ‰ä¸€äº›å°çš„ä¸åŒï¼Œä½†å¤§ä½“è®¾è®¡æ€æƒ³ä¸Šæ˜¯ä¸€æ ·çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸‹&lt;code&gt;netty&lt;/code&gt;ä¸­çš„&lt;code&gt;ä¸»ä»Reactorå¤šçº¿ç¨‹æ¨¡å‹&lt;/code&gt;æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Ÿ&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.567741935483871&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sOIZXFW0vUY4ypDTgZibnVV3K2XJZVLcEqBHAhkKJCkVgiaazsXibAeyzHXtCy8fB3JPwWlq0LL8kWQG6OVwFYDgA/640?wx_fmt=png&quot;/&gt;&lt;figcaption&gt;nettyä¸­çš„reactor.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;Reactor&lt;/code&gt;åœ¨&lt;code&gt;netty&lt;/code&gt;ä¸­æ˜¯ä»¥&lt;code&gt;group&lt;/code&gt;çš„å½¢å¼å‡ºç°çš„ï¼Œ&lt;code&gt;netty&lt;/code&gt;ä¸­å°†&lt;code&gt;Reactor&lt;/code&gt;åˆ†ä¸ºä¸¤ç»„ï¼Œä¸€ç»„æ˜¯&lt;code&gt;MainReactorGroup&lt;/code&gt;ä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ç¼–ç ä¸­å¸¸å¸¸çœ‹åˆ°çš„&lt;code&gt;EventLoopGroup bossGroup&lt;/code&gt;,å¦ä¸€ç»„æ˜¯&lt;code&gt;SubReactorGroup&lt;/code&gt;ä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨ç¼–ç ä¸­å¸¸å¸¸çœ‹åˆ°çš„&lt;code&gt;EventLoopGroup workerGroup&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;MainReactorGroup&lt;/code&gt;ä¸­é€šå¸¸åªæœ‰ä¸€ä¸ª&lt;code&gt;Reactor&lt;/code&gt;ï¼Œä¸“é—¨è´Ÿè´£åšæœ€é‡è¦çš„äº‹æƒ…ï¼Œä¹Ÿå°±æ˜¯ç›‘å¬è¿æ¥&lt;code&gt;accept&lt;/code&gt;äº‹ä»¶ã€‚å½“æœ‰è¿æ¥äº‹ä»¶äº§ç”Ÿæ—¶ï¼Œåœ¨å¯¹åº”çš„å¤„ç†&lt;code&gt;handler acceptor&lt;/code&gt;ä¸­åˆ›å»ºåˆå§‹åŒ–ç›¸åº”çš„&lt;code&gt;NioSocketChannel&lt;/code&gt;ï¼ˆä»£è¡¨ä¸€ä¸ª&lt;code&gt;Socketè¿æ¥&lt;/code&gt;ï¼‰ã€‚ç„¶åä»¥&lt;code&gt;è´Ÿè½½å‡è¡¡&lt;/code&gt;çš„æ–¹å¼åœ¨&lt;code&gt;SubReactorGroup&lt;/code&gt;ä¸­é€‰å–ä¸€ä¸ª&lt;code&gt;Reactor&lt;/code&gt;ï¼Œæ³¨å†Œä¸Šå»ï¼Œç›‘å¬&lt;code&gt;Readäº‹ä»¶&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;code&gt;MainReactorGroup&lt;/code&gt;ä¸­åªæœ‰ä¸€ä¸ª&lt;code&gt;Reactor&lt;/code&gt;çš„åŸå› æ˜¯ï¼Œé€šå¸¸æˆ‘ä»¬æœåŠ¡ç«¯ç¨‹åºåªä¼š&lt;code&gt;ç»‘å®šç›‘å¬&lt;/code&gt;ä¸€ä¸ªç«¯å£ï¼Œå¦‚æœè¦&lt;code&gt;ç»‘å®šç›‘å¬&lt;/code&gt;å¤šä¸ªç«¯å£ï¼Œå°±ä¼šé…ç½®å¤šä¸ª&lt;code&gt;Reactor&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;SubReactorGroup&lt;/code&gt;ä¸­æœ‰å¤šä¸ª&lt;code&gt;Reactor&lt;/code&gt;ï¼Œå…·ä½“&lt;code&gt;Reactor&lt;/code&gt;çš„ä¸ªæ•°å¯ä»¥ç”±ç³»ç»Ÿå‚æ•° &lt;code&gt;-D io.netty.eventLoopThreads&lt;/code&gt;æŒ‡å®šã€‚é»˜è®¤çš„&lt;code&gt;Reactor&lt;/code&gt;çš„ä¸ªæ•°ä¸º&lt;code&gt;CPUæ ¸æ•° * 2&lt;/code&gt;ã€‚&lt;code&gt;SubReactorGroup&lt;/code&gt;ä¸­çš„&lt;code&gt;Reactor&lt;/code&gt;ä¸»è¦è´Ÿè´£ç›‘å¬&lt;code&gt;è¯»å†™äº‹ä»¶&lt;/code&gt;ï¼Œæ¯ä¸€ä¸ª&lt;code&gt;Reactor&lt;/code&gt;è´Ÿè´£ç›‘å¬ä¸€ç»„&lt;code&gt;socketè¿æ¥&lt;/code&gt;ã€‚å°†å…¨é‡çš„è¿æ¥&lt;code&gt;åˆ†æ‘Š&lt;/code&gt;åœ¨å¤šä¸ª&lt;code&gt;Reactor&lt;/code&gt;ä¸­ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ä¸€ä¸ª&lt;code&gt;Reactor&lt;/code&gt;åˆ†é…ä¸€ä¸ª&lt;code&gt;IOçº¿ç¨‹&lt;/code&gt;ï¼Œè¿™ä¸ª&lt;code&gt;IOçº¿ç¨‹&lt;/code&gt;è´Ÿè´£ä»&lt;code&gt;Reactor&lt;/code&gt;ä¸­è·å–&lt;code&gt;IOå°±ç»ªäº‹ä»¶&lt;/code&gt;ï¼Œæ‰§è¡Œ&lt;code&gt;IOè°ƒç”¨è·å–IOæ•°æ®&lt;/code&gt;ï¼Œæ‰§è¡Œ&lt;code&gt;PipeLine&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;code&gt;Socketè¿æ¥&lt;/code&gt;åœ¨åˆ›å»ºåå°±è¢«&lt;code&gt;å›ºå®šçš„åˆ†é…&lt;/code&gt;ç»™ä¸€ä¸ª&lt;code&gt;Reactor&lt;/code&gt;ï¼Œæ‰€ä»¥ä¸€ä¸ª&lt;code&gt;Socketè¿æ¥&lt;/code&gt;ä¹Ÿåªä¼šè¢«ä¸€ä¸ªå›ºå®šçš„&lt;code&gt;IOçº¿ç¨‹&lt;/code&gt;æ‰§è¡Œï¼Œæ¯ä¸ª&lt;code&gt;Socketè¿æ¥&lt;/code&gt;åˆ†é…ä¸€ä¸ªç‹¬ç«‹çš„&lt;code&gt;PipeLine&lt;/code&gt;å®ä¾‹ï¼Œç”¨æ¥ç¼–æ’è¿™ä¸ª&lt;code&gt;Socketè¿æ¥&lt;/code&gt;ä¸Šçš„&lt;code&gt;IOå¤„ç†é€»è¾‘&lt;/code&gt;ã€‚è¿™ç§&lt;code&gt;æ— é”ä¸²è¡ŒåŒ–&lt;/code&gt;çš„è®¾è®¡çš„ç›®çš„æ˜¯ä¸ºäº†é˜²æ­¢å¤šçº¿ç¨‹å¹¶å‘æ‰§è¡ŒåŒä¸€ä¸ªsocketè¿æ¥ä¸Šçš„&lt;code&gt;IOé€»è¾‘å¤„ç†&lt;/code&gt;ï¼Œé˜²æ­¢å‡ºç°&lt;code&gt;çº¿ç¨‹å®‰å…¨é—®é¢˜&lt;/code&gt;ã€‚åŒæ—¶ä½¿ç³»ç»Ÿååé‡è¾¾åˆ°æœ€å¤§åŒ–&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ç”±äºæ¯ä¸ª&lt;code&gt;Reactor&lt;/code&gt;ä¸­åªæœ‰ä¸€ä¸ª&lt;code&gt;IOçº¿ç¨‹&lt;/code&gt;ï¼Œè¿™ä¸ª&lt;code&gt;IOçº¿ç¨‹&lt;/code&gt;æ—¢è¦æ‰§è¡Œ&lt;code&gt;IOæ´»è·ƒSocketè¿æ¥&lt;/code&gt;å¯¹åº”çš„&lt;code&gt;PipeLine&lt;/code&gt;ä¸­çš„&lt;code&gt;ChannelHandler&lt;/code&gt;ï¼Œåˆè¦ä»&lt;code&gt;Reactor&lt;/code&gt;ä¸­è·å–&lt;code&gt;IOå°±ç»ªäº‹ä»¶&lt;/code&gt;ï¼Œæ‰§è¡Œ&lt;code&gt;IOè°ƒç”¨&lt;/code&gt;ã€‚æ‰€ä»¥&lt;code&gt;PipeLine&lt;/code&gt;ä¸­&lt;code&gt;ChannelHandler&lt;/code&gt;ä¸­æ‰§è¡Œçš„é€»è¾‘ä¸èƒ½è€—æ—¶å¤ªé•¿ï¼Œå°½é‡å°†è€—æ—¶çš„ä¸šåŠ¡é€»è¾‘å¤„ç†æ”¾å…¥å•ç‹¬çš„ä¸šåŠ¡çº¿ç¨‹æ± ä¸­å¤„ç†ï¼Œå¦åˆ™ä¼šå½±å“å…¶ä»–è¿æ¥çš„&lt;code&gt;IOè¯»å†™&lt;/code&gt;ï¼Œä»è€Œè¿‘ä¸€æ­¥å½±å“æ•´ä¸ªæœåŠ¡ç¨‹åºçš„&lt;code&gt;IOåå&lt;/code&gt;ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å½“&lt;code&gt;IOè¯·æ±‚&lt;/code&gt;åœ¨ä¸šåŠ¡çº¿ç¨‹ä¸­å®Œæˆç›¸åº”çš„ä¸šåŠ¡é€»è¾‘å¤„ç†åï¼Œåœ¨ä¸šåŠ¡çº¿ç¨‹ä¸­åˆ©ç”¨æŒæœ‰çš„&lt;code&gt;ChannelHandlerContext&lt;/code&gt;å¼•ç”¨å°†å“åº”æ•°æ®åœ¨&lt;code&gt;PipeLine&lt;/code&gt;ä¸­åå‘ä¼ æ’­ï¼Œæœ€ç»ˆå†™å›ç»™å®¢æˆ·ç«¯ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;netty&lt;/code&gt;ä¸­çš„&lt;code&gt;IOæ¨¡å‹&lt;/code&gt;æˆ‘ä»¬ä»‹ç»å®Œäº†ï¼Œä¸‹é¢æˆ‘ä»¬æ¥ç®€å•ä»‹ç»ä¸‹åœ¨&lt;code&gt;netty&lt;/code&gt;ä¸­æ˜¯å¦‚ä½•æ”¯æŒå‰è¾¹æåˆ°çš„ä¸‰ç§&lt;code&gt;Reactoræ¨¡å‹&lt;/code&gt;çš„ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é…ç½®å•Reactorå•çº¿ç¨‹&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;EventLoopGroupÂ eventGroupÂ =Â &lt;span&gt;new&lt;/span&gt;Â NioEventLoopGroup(&lt;span&gt;1&lt;/span&gt;);&lt;br/&gt;ServerBootstrapÂ serverBootstrapÂ =Â &lt;span&gt;new&lt;/span&gt;Â ServerBootstrap();Â &lt;br/&gt;serverBootstrap.group(eventGroup);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é…ç½®å•Reactorå¤šçº¿ç¨‹&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;EventLoopGroupÂ eventGroupÂ =Â &lt;span&gt;new&lt;/span&gt;Â NioEventLoopGroup();&lt;br/&gt;ServerBootstrapÂ serverBootstrapÂ =Â &lt;span&gt;new&lt;/span&gt;Â ServerBootstrap();Â &lt;br/&gt;serverBootstrap.group(eventGroup);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é…ç½®ä¸»ä»Reactorå¤šçº¿ç¨‹&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;EventLoopGroupÂ bossGroupÂ =Â &lt;span&gt;new&lt;/span&gt;Â NioEventLoopGroup(&lt;span&gt;1&lt;/span&gt;);Â &lt;br/&gt;EventLoopGroupÂ workerGroupÂ =Â &lt;span&gt;new&lt;/span&gt;Â NioEventLoopGroup();&lt;br/&gt;ServerBootstrapÂ serverBootstrapÂ =Â &lt;span&gt;new&lt;/span&gt;Â ServerBootstrap();Â &lt;br/&gt;serverBootstrap.group(bossGroup,Â workerGroup);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;hr data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬æ–‡æ˜¯ä¸€ç¯‡ä¿¡æ¯é‡æ¯”è¾ƒå¤§çš„æ–‡ç« ï¼Œç”¨äº†&lt;code&gt;25&lt;/code&gt;å¼ å›¾ï¼Œ&lt;code&gt;22336&lt;/code&gt;ä¸ªå­—ä»å†…æ ¸å¦‚ä½•å¤„ç†ç½‘ç»œæ•°æ®åŒ…çš„æ”¶å‘è¿‡ç¨‹å¼€å§‹å±•å¼€ï¼Œéšååˆåœ¨&lt;code&gt;å†…æ ¸è§’åº¦&lt;/code&gt;ä»‹ç»äº†ç»å¸¸å®¹æ˜“æ··æ·†çš„&lt;code&gt;é˜»å¡ä¸éé˜»å¡&lt;/code&gt;ï¼Œ&lt;code&gt;åŒæ­¥ä¸å¼‚æ­¥&lt;/code&gt;çš„æ¦‚å¿µã€‚ä»¥è¿™ä¸ªä½œä¸ºé“ºå«ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ª&lt;code&gt;C10K&lt;/code&gt;çš„é—®é¢˜ï¼Œå¼•å‡ºäº†äº”ç§&lt;code&gt;IOæ¨¡å‹&lt;/code&gt;ï¼Œéšååœ¨&lt;code&gt;IOå¤šè·¯å¤ç”¨&lt;/code&gt;ä¸­ä»¥æŠ€æœ¯æ¼”è¿›çš„å½¢å¼ä»‹ç»äº†&lt;code&gt;select,poll,epoll&lt;/code&gt;çš„åŸç†å’Œå®ƒä»¬ç»¼åˆçš„å¯¹æ¯”ã€‚æœ€åæˆ‘ä»¬ä»‹ç»äº†ä¸¤ç§&lt;code&gt;IOçº¿ç¨‹æ¨¡å‹&lt;/code&gt;ä»¥åŠ&lt;code&gt;netty&lt;/code&gt;ä¸­çš„&lt;code&gt;Reactoræ¨¡å‹&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;- EOF -&lt;/span&gt;&lt;/p&gt;&lt;section donone=&quot;shifuMouseDownCard(&#x27;shifu_c_030&#x27;)&quot; label=&quot;Copyright Reserved by PLAYHUDONG.&quot;&gt;&lt;section&gt;&lt;span&gt;æ¨èé˜…è¯»&lt;/span&gt;Â Â &lt;span&gt;ç‚¹å‡»æ ‡é¢˜å¯è·³è½¬&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;amp;mid=2651508612&amp;amp;idx=1&amp;amp;sn=e12e0093ed5e06ca6eea1f63c6acc757&amp;amp;chksm=bd25a3fb8a522aed945e915b9277ab2a15797bb9a35782a0969f5281d4ede6c0e087a335c6e6&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;18å¼ å›¾ï¼Œå›¾è§£SpringBootè§£æymlå…¨æµç¨‹&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;11&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;18å¼ å›¾ï¼Œå›¾è§£SpringBootè§£æymlå…¨æµç¨‹&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;amp;mid=2651508544&amp;amp;idx=1&amp;amp;sn=ae0b6256fa3a1b579f646c1b2352d397&amp;amp;chksm=bd25a33f8a522a2914ec2d5b560a0e84aae571db8664edb9c09f8a3d824306055b203074c673&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;èµ·é£ï¼Œä¼šäº†è¿™4ä¸ª Intellij IDEA è°ƒè¯•é­”æ³•ï¼Œé˜…è¯»æºç éƒ½ç®€å•äº†ï¼&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;11&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot;&gt;èµ·é£ï¼Œä¼šäº†è¿™4ä¸ª Intellij IDEA è°ƒè¯•é­”æ³•ï¼Œé˜…è¯»æºç éƒ½ç®€å•äº†ï¼&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;amp;mid=2651508541&amp;amp;idx=1&amp;amp;sn=551a5034a7f374d8ed3da25327bccca4&amp;amp;chksm=bd25a3428a522a5458b3148a80ec26ac3b454a563034bb88694839bed796d2d3212f105b82d1&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;è¿˜åœ¨ç”¨ç­–ç•¥æ¨¡å¼è§£å†³ if-elseï¼ŸMap+å‡½æ•°å¼æ¥å£æ–¹æ³•æ‰æ˜¯YYDSï¼&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot;&gt;è¿˜åœ¨ç”¨ç­–ç•¥æ¨¡å¼è§£å†³ if-elseï¼ŸMap+å‡½æ•°å¼æ¥å£æ–¹æ³•æ‰æ˜¯YYDSï¼&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;çœ‹å®Œæœ¬æ–‡æœ‰æ”¶è·ï¼Ÿè¯·è½¬å‘åˆ†äº«ç»™æ›´å¤šäºº&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;å…³æ³¨ã€ŒImportNewã€ï¼Œæå‡JavaæŠ€èƒ½&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.9166666666666666&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;600&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;span&gt;ç‚¹èµå’Œåœ¨çœ‹å°±æ˜¯æœ€å¤§çš„æ”¯æŒ&lt;/span&gt;&lt;span&gt;â¤ï¸&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>