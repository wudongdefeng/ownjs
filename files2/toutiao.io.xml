<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>0fc8b0a6f11913fa02a62bf752be09d2</guid>
<title>MQTT 快速体验</title>
<link>https://toutiao.io/k/eaf0zso</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;content&quot;&gt;&lt;p&gt;全球物联网正在高速发展，专门针对低带宽和不稳定网络环境的物联网应用设计的 MQTT 协议也因此得到广泛应用。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://mqtt.org/&quot;&gt;MQTT&lt;/a&gt; 是一种基于发布/订阅模式轻量级消息传输协议，具有简单易实现、支持 QoS、报文小等特点，非常适用于工业互联网、车联网、智能硬件、电力能源等领域。&lt;/p&gt;
&lt;p&gt;本文将通过讲解与演示向读者展示 MQTT 协议的入门使用流程，物联网及 MQTT 初学者可以通过本文以更简单的方式理解 MQTT 相关概念，快速开始 MQTT 服务及应用的开发。&lt;/p&gt;
&lt;h2 id=&quot;mqtt-连接&quot;&gt;MQTT 连接&lt;/h2&gt;
&lt;p&gt;在使用 MQTT 协议进行通信之前，需要先建立一个 MQTT 连接，连接由客户端向服务器端发起。&lt;/p&gt;
&lt;h3 id=&quot;mqtt-客户端&quot;&gt;MQTT 客户端&lt;/h3&gt;
&lt;p&gt;任何运行了 MQTT 客户端库的程序或设备都是一个 MQTT 客户端，例如：使用了 MQTT 的即时通讯 APP 是一个客户端，使用 MQTT 上报数据的各种传感器设备是一个客户端，以及各种 MQTT 测试工具也是一个客户端。&lt;/p&gt;
&lt;p&gt;目前，基本所有的编程语言都有成熟的开源 MQTT 客户端库，读者可参考 EMQ 整理的 &lt;a href=&quot;https://www.emqx.com/zh/mqtt-client-sdk&quot;&gt;MQTT 客户端库大全&lt;/a&gt;选择一个合适的客户端库来构建满足自身业务需求的 MQTT 客户端。也可直接访问 EMQ 提供的 &lt;a href=&quot;https://www.emqx.com/zh/blog/tag/mqtt-%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%BC%96%E7%A8%8B&quot;&gt;MQTT 客户端编程&lt;/a&gt;系列博客，学习如何在 Java、Python、PHP、Node.js 等编程语言中使用 MQTT。&lt;/p&gt;
&lt;p&gt;本次演示我们将使用由 MQTT X 提供的支持浏览器访问的在线 MQTT 客户端：&lt;a href=&quot;http://www.emqx.io/online-mqtt-client&quot;&gt;http://www.emqx.io/online-mqtt-client&lt;/a&gt;。MQTT X 是目前开源客户端中 GitHub Star 数最多的，它同时也提供了桌面客户端（&lt;a href=&quot;https://mqttx.app/zh&quot;&gt;https://mqttx.app/zh&lt;/a&gt;）与命令行客户端（&lt;a href=&quot;https://mqttx.app/zh/cli&quot;&gt;https://mqttx.app/zh/cli&lt;/a&gt;），感兴趣的读者可自行下载使用。&lt;/p&gt;
&lt;h3 id=&quot;mqtt-服务器&quot;&gt;MQTT 服务器&lt;/h3&gt;
&lt;p&gt;MQTT 服务器负责接收客户端发起的连接，并将客户端发送的消息转发到另外一些符合条件的客户端。一个成熟的 MQTT 服务器可支持海量的客户端连接及百万级的消息吞吐，帮助物联网业务提供商专注于业务功能并快速创建一个可靠的 MQTT 应用。&lt;/p&gt;
&lt;p&gt;MQTT 服务器一般有私有部署、全托管云服务、公共在线三种形式。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;私有部署需要自行搭建与维护服务器，适合接入量较大、且有技术团队支持的公司。&lt;/p&gt;
&lt;p&gt;读者若是希望搭建私有 MQTT 服务器进行测试，可运行如下 Docker 命令直接安装 EMQX 开源版。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker run -d --name emqx -p 1883:1883 -p 8083:8083 -p 8084:8084 -p 8883:8883 -p 18083:18083 emqx/emqx
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;也可参考博客&lt;a href=&quot;https://www.emqx.com/zh/blog/how-to-install-emqx-mqtt-broker-on-ubuntu&quot;&gt;如何在 Ubuntu 上安装 EMQX MQTT 服务器&lt;/a&gt;进行安装。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;全托管云服务免除了企业维护基础设施的负担，简单几步就能轻松开启 MQTT 服务。如下图，EMQX Cloud 支持按连接创建 MQTT 服务，且可选择部署在多个云平台。&lt;/p&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/71a7d845d76b5d298a64d395fc8d1ad7.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;MQTT Cloud&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/71a7d845d76b5d298a64d395fc8d1ad7.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/71a7d845d76b5d298a64d395fc8d1ad7.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/71a7d845d76b5d298a64d395fc8d1ad7.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;公共的在线服务器一般由各个 MQTT 服务器的所属商业公司所提供，主要用来做 MQTT 流程测试。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;本次演示我们将使用由 EMQ 提供的&lt;a href=&quot;https://www.emqx.com/zh/mqtt/public-mqtt5-broker&quot;&gt;公共 MQTT 服务器&lt;/a&gt;，该服务器基于&lt;a href=&quot;https://www.emqx.com/zh/cloud&quot;&gt;全托管的 MQTT 云服务 - EMQX Cloud&lt;/a&gt; 创建，服务器信息如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Broker： &lt;code&gt;broker.emqx.io&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;TCP Port： &lt;code&gt;1883&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Websocket Port： &lt;code&gt;8083&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;创建连接&quot;&gt;创建连接&lt;/h3&gt;
&lt;p&gt;接下来我们开始正式创建一个 MQTT 连接，使用浏览器访问 &lt;a href=&quot;http://www.emqx.io/online-mqtt-client&quot;&gt;http://www.emqx.io/online-mqtt-client&lt;/a&gt;，然后点击页面中间的 &lt;code&gt;New Connection&lt;/code&gt; 按钮，将会看到如下页面。&lt;/p&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/5e110d181ce8489c275d5674910fa16d.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;创建 MQTT 连接&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/5e110d181ce8489c275d5674910fa16d.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/5e110d181ce8489c275d5674910fa16d.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/5e110d181ce8489c275d5674910fa16d.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;各个连接的参数的意义如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Name&lt;/strong&gt;：为该在线客户端特有，只是一个区分不同连接的名称，与连接的建立无关系。使用代码连接时没有该参数。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Client ID&lt;/strong&gt;：服务端使用 Client ID 识别客户端，连接服务端的每个客户端都必须要有唯一的 Client ID。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Host&lt;/strong&gt;：为连接的服务器地址及协议，协议一般有 4 种：基于普通 TCP 的 MQTT、基于 SSL/TLS 的 MQTT、基于 WebSocket 的 MQTT，基于加密 WebSocket 的 MQTT。本文使用的在线工具基于浏览器运行，所以只能选择 ws 或 wss 协议。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Port&lt;/strong&gt;：连接的服务器端口。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Path&lt;/strong&gt;：选 ws 或 wss 协议时需要填写，EMQX 服务器默认为 &lt;code&gt;/mqtt&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Username，Password&lt;/strong&gt;：MQTT 可以通过发送用户名和密码来进行相关的认证和授权，但是，如果此信息未加密，则用户名和密码是以明文的方式发送的。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Connect Timeout&lt;/strong&gt;：连接超时时间，连接在多少秒内未成功则不再继续连接。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Keep Alive&lt;/strong&gt;：保活周期，是一个以秒为单位的时间间隔。客户端在无报文发送时，将按 Keep Alive 设定的值定时向服务端发送心跳报文，确保连接不被服务端断开。更多细节可查看博客：&lt;a href=&quot;https://www.emqx.com/zh/blog/mqtt-keep-alive&quot;&gt;MQTT 协议中的 Keep Alive 机制&lt;/a&gt;。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Clean Session&lt;/strong&gt;：清除会话，为 &lt;code&gt;false&lt;/code&gt; 时表示创建一个持久会话，在客户端断开连接时，会话仍然保持并保存离线消息，直到会话超时注销。否则表示创建一个新的临时会话，在客户端断开时，会话自动销毁。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Auto Reconnect&lt;/strong&gt;：自动重连，几乎所有客户端库都实现了自动重连。如果设置了自动重连，当网络不佳连接被断开后，客户端将自动重新发起连接。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;MQTT Version&lt;/strong&gt;：MQTT 版本，建议使用 5.0。MQTT 5.0 是为适应迅速增长的设备数量与企业需求而全面更新的一个版本，其在 3.1.1 版本基础上增加了会话/消息延时、原因码、主题别名、用户属性、共享订阅等更加符合现代物联网应用需求的特性。更多 MQTT 5.0 详细信息可查看 EMQ 提供的 &lt;a href=&quot;https://www.emqx.com/zh/mqtt/mqtt5&quot;&gt;MQTT 5.0 专题系列&lt;/a&gt;文章。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我们在 &lt;code&gt;Name&lt;/code&gt; 里输入 &lt;code&gt;Simple Demo&lt;/code&gt;，并点击右上角的 &lt;code&gt;Connect&lt;/code&gt; 按钮即可创建一个 MQTT 连接，如下表示连接建立成功。&lt;/p&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/9583db03a552b24980cf49005e3dc668.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;MQTT 连接成功&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/9583db03a552b24980cf49005e3dc668.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/9583db03a552b24980cf49005e3dc668.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/9583db03a552b24980cf49005e3dc668.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;发布与订阅&quot;&gt;发布与订阅&lt;/h2&gt;
&lt;p&gt;连接成功后，客户端就能进行消息的收发，在消息收发前我们需要先理解发布/订阅模式。&lt;/p&gt;
&lt;h3 id=&quot;发布-订阅模式&quot;&gt;发布/订阅模式&lt;/h3&gt;
&lt;p&gt;发布订阅模式区别于传统的客户端-服务器模式，它使发送消息的客户端（发布者）与接收消息的客户端（订阅者）分离，发布者与订阅者不需要建立直接联系。我们既可以让多个发布者向一个订阅者发布消息，也可以让多个订阅者同时接收一个发布者的消息，它的精髓在于由一个被称为代理（MQTT 服务器）的中间角色负责所有消息路由和分发的工作。&lt;/p&gt;
&lt;p&gt;下图为 MQTT 的发布/订阅流程：温度传感器作为一个客户端连接至 MQTT 服务器后，即可向某个主题（比如 &lt;code&gt;Temperature&lt;/code&gt;）发布温度消息，服务器收到该消息后会将消息转发至订阅了 &lt;code&gt;Temperature&lt;/code&gt; 主题的客户端（比如下图的手机、浏览器等应用）。&lt;/p&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/a6baf485733448bc9730f47bf1f41135.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;发布/订阅模式&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/a6baf485733448bc9730f47bf1f41135.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/a6baf485733448bc9730f47bf1f41135.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/a6baf485733448bc9730f47bf1f41135.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;主题-topic&quot;&gt;主题（Topic）&lt;/h3&gt;
&lt;p&gt;MQTT 协议基于主题进行消息路由，主题类似 URL 路径，例如：&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;chat/room/1

sensor/10/temperature

sensor/+/temperature
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;主题通过 &lt;code&gt;/&lt;/code&gt; 分割层级，支持 &lt;code&gt;+&lt;/code&gt;， &lt;code&gt;#&lt;/code&gt; 通配符:&lt;/p&gt;

&lt;p&gt;更多关于 MQTT 主题的介绍可查看博客：&lt;a href=&quot;https://www.emqx.com/zh/blog/advanced-features-of-mqtt-topics&quot;&gt;MQTT 主题的高级特性&lt;/a&gt;。&lt;/p&gt;
&lt;h3 id=&quot;消息服务质量-qos&quot;&gt;消息服务质量（QoS）&lt;/h3&gt;
&lt;p&gt;MQTT 协议提供了 3 种消息服务质量等级（Quality of Service），它保证了在不同的网络环境下消息传递的可靠性。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;QoS 0：消息最多传递一次。&lt;/p&gt;
&lt;p&gt;如果当时客户端不可用，则会丢失该消息。发布者发送一条消息之后，就不再关心它有没有发送到对方，也不设置任何重发机制。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;QoS 1：消息传递至少 1 次。&lt;/p&gt;
&lt;p&gt;包含了简单的重发机制，发布者发送消息之后等待接收者的 ACK，如果没收到 ACK 则重新发送消息。这种模式能保证消息至少能到达一次，但无法保证消息重复。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;QoS 2：消息仅传送一次。&lt;/p&gt;
&lt;p&gt;设计了重发和重复消息发现机制，保证消息到达对方并且严格只到达一次。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;更多关于 MQTT QoS 的介绍可查看博客：&lt;a href=&quot;https://www.emqx.com/zh/blog/introduction-to-mqtt-qos&quot;&gt;MQTT QoS 服务质量介绍&lt;/a&gt;。&lt;/p&gt;
&lt;h3 id=&quot;订阅主题&quot;&gt;订阅主题&lt;/h3&gt;
&lt;p&gt;接下来我们模拟温度传感器场景，在之前创建的 Simple Demo 连接里订阅所有的温度传感器上报的温度数据，即订阅通配符主题 &lt;code&gt;sensor/+/temperature&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;如下图，点击按钮 &lt;code&gt;New Subscription&lt;/code&gt;，在弹出框的 Topic 下面输入主题 &lt;code&gt;sensor/+/temperature&lt;/code&gt;，QoS 保持默认 0 不变。&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Color 字段可修改订阅标签的颜色，Alias 字段可修改订阅主题的显示名称。这两个字段为该在线客户端特有，使用代码连接时无此参数。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/79321fd9e22058e27a256152b60908d6.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;订阅 MQTT 主题&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/79321fd9e22058e27a256152b60908d6.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/79321fd9e22058e27a256152b60908d6.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/79321fd9e22058e27a256152b60908d6.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;订阅成功后即可看到中间的订阅列表里多了一条记录。&lt;/p&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/3687ba334049a0ca19e3300a2cbc4a98.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;主题订阅成功&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/3687ba334049a0ca19e3300a2cbc4a98.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/3687ba334049a0ca19e3300a2cbc4a98.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/3687ba334049a0ca19e3300a2cbc4a98.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;发布消息&quot;&gt;发布消息&lt;/h3&gt;
&lt;p&gt;接下来我们点击最左侧的 &lt;code&gt;+&lt;/code&gt; 按钮分别创建 &lt;code&gt;Sensor 1&lt;/code&gt; 和 &lt;code&gt;Sensor 2&lt;/code&gt; 两个连接，模拟两个温度传感器。&lt;/p&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/0c96ec70a51ecc605bad4972edd77fb1.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;创建 MQTT 连接&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/0c96ec70a51ecc605bad4972edd77fb1.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/0c96ec70a51ecc605bad4972edd77fb1.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/0c96ec70a51ecc605bad4972edd77fb1.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;连接创建好后如下图所示，将会看到 3 个连接，并且连接左侧的在线状态圆点都为绿色（绿色说明连接成功）。&lt;/p&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/70010ba4da8d452ab0f738d36013dd9a.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;连接创建成功&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/70010ba4da8d452ab0f738d36013dd9a.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/70010ba4da8d452ab0f738d36013dd9a.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/70010ba4da8d452ab0f738d36013dd9a.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;选中 Sensor 1 连接，在页面右下部分输入发布主题 &lt;code&gt;sensor/1/temperature&lt;/code&gt;，消息框内输入如下 JSON 格式消息，并点击右侧最底部的发布按钮发送消息。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{
  &quot;msg&quot;: &quot;17.2&quot;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/859966556e5649f1d6ec9bf378162def.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;发布 MQTT 消息&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/859966556e5649f1d6ec9bf378162def.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/859966556e5649f1d6ec9bf378162def.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/859966556e5649f1d6ec9bf378162def.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;如下表示消息发送成功。&lt;/p&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/b1a46d8a415603d87e0c4244ee34bc02.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;消息发布成功&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/b1a46d8a415603d87e0c4244ee34bc02.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/b1a46d8a415603d87e0c4244ee34bc02.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/b1a46d8a415603d87e0c4244ee34bc02.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;使用同样的步骤，在 Sensor 2 连接里向 &lt;code&gt;sensor/2/temperature&lt;/code&gt; 主题发布如下 JSON 消息。&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;{
  &quot;msg&quot;: &quot;18.2&quot;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;将会看到 Simple Demo 连接收到 2 条新消息。&lt;/p&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/f815767a47f234424ae55ea0fe39eb04.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;消息通知&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/f815767a47f234424ae55ea0fe39eb04.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/f815767a47f234424ae55ea0fe39eb04.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/f815767a47f234424ae55ea0fe39eb04.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;点击 Simple Demo 连接，将会看到两个传感器发送的两条消息。&lt;/p&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/f88de809773829f6a86dcedc2f612dd5.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;收到两条 MQTT 消息&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/f88de809773829f6a86dcedc2f612dd5.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/f88de809773829f6a86dcedc2f612dd5.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/f88de809773829f6a86dcedc2f612dd5.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;mqtt-重要特性演示&quot;&gt;MQTT 重要特性演示&lt;/h2&gt;
&lt;h3 id=&quot;保留消息-retained-message&quot;&gt;保留消息（Retained Message）&lt;/h3&gt;
&lt;p&gt;MQTT 客户端向服务器发布消息时，可以设置保留消息标志。一个主题下最新一条保留消息会驻留在消息服务器，后来的订阅者订阅主题时仍可以接收该消息。&lt;/p&gt;
&lt;p&gt;如下图，我们在 Sensor 1 连接里向 &lt;code&gt;retained_message&lt;/code&gt; 主题发送两条不一样的消息，且发送消息时勾选 &lt;code&gt;Retain&lt;/code&gt; 选项。&lt;/p&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/5c7dcb078d223e0b6d33cb66241caa5d.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;MQTT 保留消息&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/5c7dcb078d223e0b6d33cb66241caa5d.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/5c7dcb078d223e0b6d33cb66241caa5d.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/5c7dcb078d223e0b6d33cb66241caa5d.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;然后，我们再在 Simple Demo 连接里订阅 &lt;code&gt;retained_message&lt;/code&gt; 主题，订阅成功后将会收到 Sensor 1 发送的第二条保留消息，由此可见服务器只会保存一个主题下最后一条保留消息。&lt;/p&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/afe8cca62d576404d5f622f362ef3592.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;MQTT 保留消息&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/afe8cca62d576404d5f622f362ef3592.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/afe8cca62d576404d5f622f362ef3592.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/afe8cca62d576404d5f622f362ef3592.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;清除会话-clean-session&quot;&gt;清除会话（Clean Session）&lt;/h3&gt;
&lt;p&gt;一般情况下 MQTT 客户端仅能接收到在线时其他客户端发布的消息，如果客户端离线再上线后将收不到离线期间的消息。但是当客户端使用固定的 Client ID，且连接参数 Clean Session 为 false 时，客户端离线后消息服务器可以为客户端保持一定量的离线消息，并在客户端再次上线后发送给客户端（且为客户端恢复下线前的订阅信息）。&lt;/p&gt;
&lt;p&gt;本次演示使用的公共 MQTT 服务器设置的离线消息保存时间为 5 分钟，最大消息数为 1000 条，且不保存 QoS 0 消息。接下来我们创建一个  MQTT 3.1.1 版本的连接，并验证 QoS 1 情况下的离线会话。&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;MQTT 5 中使用 Clean Start 与 Session Expiry Interval 改进了 Clean Session，详情可查看博客：&lt;a href=&quot;https://www.emqx.com/zh/blog/mqtt5-new-feature-clean-start-and-session-expiry-interval&quot;&gt;Clean Start 与 Session Expiry Interval&lt;/a&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;如下图，创建一个名为 &lt;code&gt;MQTT V3&lt;/code&gt; 的连接，Clean Session 设置为 false，MQTT 版本选择 3.1.1。&lt;/p&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/1472ce0ea8e728647d973cae56e6b1d5.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;MQTT 清除会话&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/1472ce0ea8e728647d973cae56e6b1d5.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/1472ce0ea8e728647d973cae56e6b1d5.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/1472ce0ea8e728647d973cae56e6b1d5.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;连接成功后订阅 &lt;code&gt;clean_session_false&lt;/code&gt; 主题，且 QoS 设置为 1。&lt;/p&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/7a5792040185d956803cb7406b2df3af.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;订阅 MQTT 主题&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/7a5792040185d956803cb7406b2df3af.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/7a5792040185d956803cb7406b2df3af.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/7a5792040185d956803cb7406b2df3af.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;订阅成功后，点击右上角的断开连接按钮。&lt;/p&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/fd5726bd0e2a5b9d9d73a7095f322ecf.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;断开 MQTT 连接&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/fd5726bd0e2a5b9d9d73a7095f322ecf.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/fd5726bd0e2a5b9d9d73a7095f322ecf.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/fd5726bd0e2a5b9d9d73a7095f322ecf.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;接下来创建一个名为 &lt;code&gt;MQTT_V3_Publish&lt;/code&gt; 的连接，MQTT 版本同样设置为 3.1.1，连接成功后向 &lt;code&gt;clean_session_false&lt;/code&gt; 主题发布三条消息。&lt;/p&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/0659785e98cb03f9d6e78497e0adb26f.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;发布 MQTT 消息&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/0659785e98cb03f9d6e78497e0adb26f.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/0659785e98cb03f9d6e78497e0adb26f.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/0659785e98cb03f9d6e78497e0adb26f.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;然后选中 MQTT_V3 连接，点击连接按钮连接至服务器，将会成功接收到 3 条离线期间的消息。&lt;/p&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/106cc289cbb3a07be2ed294dd97fe420.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;MQTT 离线消息&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/106cc289cbb3a07be2ed294dd97fe420.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/106cc289cbb3a07be2ed294dd97fe420.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/106cc289cbb3a07be2ed294dd97fe420.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;遗嘱消息-last-will&quot;&gt;遗嘱消息（Last Will）&lt;/h3&gt;
&lt;p&gt;MQTT 客户端向服务器发起连接请求时，可以设置是否发送遗嘱消息（Will Message）标志，和遗嘱消息主题（Topic）与内容（Payload）。设置了遗嘱消息消息的 MQTT 客户端异常下线时（客户端断开前未向服务器发送 DISCONNECT 消息），MQTT 消息服务器会发布该客户端设置的遗嘱消息。&lt;/p&gt;
&lt;p&gt;更多关于遗嘱消息的介绍可查看博客：&lt;a href=&quot;https://www.emqx.com/zh/blog/use-of-mqtt-will-message&quot;&gt;MQTT 遗嘱消息（Will Message）的使用&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;如下图，我们创建一个名为 &lt;code&gt;Last Will&lt;/code&gt; 的连接。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;为了能快速看到效果，我们设置 Keep Alive 为 5 秒&lt;/li&gt;
&lt;li&gt;Last-Will Topic 设置为 &lt;code&gt;last_will&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Last-Will QoS 设置为 &lt;code&gt;1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Last-Will Retain 设置为 &lt;code&gt;true&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Last-Will Payload 设置为 &lt;code&gt;offline&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/3fc9e2c463bd38c21dc7f523520c7076.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;MQTT 遗嘱消息&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/3fc9e2c463bd38c21dc7f523520c7076.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/3fc9e2c463bd38c21dc7f523520c7076.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/3fc9e2c463bd38c21dc7f523520c7076.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;连接成功后，我们断开电脑网络 5 秒钟以上（模拟客户端异常下线），再打开网络。然后启动 Simple Demo 连接，并订阅 &lt;code&gt;last_will&lt;/code&gt; 主题，将会收到 &lt;code&gt;Last Will&lt;/code&gt; 连接设置的遗嘱消息。&lt;/p&gt;
&lt;p&gt;
                &lt;img src=&quot;https://assets.emqx.com/images/a216808a1ba964bbddc75708bc55c072.png?imageMogr2/thumbnail/1520x&quot; alt=&quot;MQTT 遗嘱消息&quot; sizes=&quot;(max-width: 640px) 100vw, (max-width: 768px) 100vw, 1520px&quot; srcset=&quot;&amp;#10;                        https://assets.emqx.com/images/a216808a1ba964bbddc75708bc55c072.png?imageMogr2/thumbnail/640x   640w,&amp;#10;                        https://assets.emqx.com/images/a216808a1ba964bbddc75708bc55c072.png?imageMogr2/thumbnail/768x   768w,&amp;#10;                        https://assets.emqx.com/images/a216808a1ba964bbddc75708bc55c072.png?imageMogr2/thumbnail/1520x 1520w&amp;#10;                        &quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;至此，我们完成了对 MQTT 相关基础概念及其使用流程的讲解与演示，读者可以根据本文所学尝试上手使用 MQTT 协议。接下来读者可访问 EMQ 提供的 &lt;a href=&quot;https://www.emqx.com/zh/blog/tag/mqtt-客户端编程&quot;&gt;MQTT 客户端编程&lt;/a&gt;系列博客，学习如何在 Java、Python、PHP、Node.js 等编程语言中使用 MQTT，开始 MQTT 应用及服务开发，探索 MQTT 的更多高级应用。&lt;/p&gt;
&lt;section class=&quot;promotion&quot;&gt;
    &lt;div&gt;&lt;p&gt;
        免费试用 EMQX Cloud
        &lt;/p&gt;&lt;p class=&quot;is-size-14 is-text-normal has-text-weight-normal&quot;&gt;全托管的 MQTT 消息云服务&lt;/p&gt;
    &lt;/div&gt;
    &lt;a href=&quot;https://www.emqx.com/zh/signup?continue=https://cloud.emqx.com/console/deployments/0?oper=new&quot; class=&quot;button is-gradient px-5&quot;&gt;开始试用 →&lt;/a&gt;
&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>91de1da5b02226176233fe6ce635cc9d</guid>
<title>在 K8s 集群上部署 RabbitMQ 实战</title>
<link>https://toutiao.io/k/3bgyv06</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;❝&lt;/span&gt;&lt;p&gt;作者：老Z，云原生爱好者，目前专注于云原生运维，KubeSphere Ambassador。&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;前言&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;&lt;strong&gt;知识点&lt;/strong&gt;&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;定级：&lt;strong&gt;入门级&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;RabbitMQ 单节点安装部署&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;RabbitMQ 集群安装部署&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;GitOps 运维思想&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;&lt;strong&gt;演示服务器配置&lt;/strong&gt;&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;section data-tool=&quot;mdnice编辑器&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;主机名&lt;/th&gt;&lt;th&gt;IP&lt;/th&gt;&lt;th&gt;CPU&lt;/th&gt;&lt;th&gt;内存&lt;/th&gt;&lt;th&gt;系统盘&lt;/th&gt;&lt;th&gt;数据盘&lt;/th&gt;&lt;th&gt;用途&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;zdeops-master&lt;/td&gt;&lt;td&gt;192.168.9.9&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;200&lt;/td&gt;&lt;td&gt;Ansible 运维控制节点&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ks-k8s-master-0&lt;/td&gt;&lt;td&gt;192.168.9.91&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;16&lt;/td&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;200+200&lt;/td&gt;&lt;td&gt;KubeSphere/k8s-master/k8s-worker/Ceph&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ks-k8s-master-1&lt;/td&gt;&lt;td&gt;192.168.9.92&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;16&lt;/td&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;200+200&lt;/td&gt;&lt;td&gt;KubeSphere/k8s-master/k8s-worker/Ceph&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ks-k8s-master-2&lt;/td&gt;&lt;td&gt;192.168.9.93&lt;/td&gt;&lt;td&gt;4&lt;/td&gt;&lt;td&gt;16&lt;/td&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;200+200&lt;/td&gt;&lt;td&gt;KubeSphere/k8s-master/k8s-worker/Ceph&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;storage-node-0&lt;/td&gt;&lt;td&gt;192.168.9.95&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;200+200&lt;/td&gt;&lt;td&gt;ElasticSearch/GlusterFS&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;storage-node-0&lt;/td&gt;&lt;td&gt;192.168.9.96&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;200+200&lt;/td&gt;&lt;td&gt;ElasticSearch/GlusterFS&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;storage-node-0&lt;/td&gt;&lt;td&gt;192.168.9.97&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;200+200&lt;/td&gt;&lt;td&gt;ElasticSearch/GlusterFS&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;harbor&lt;/td&gt;&lt;td&gt;192.168.9.89&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;200&lt;/td&gt;&lt;td&gt;Harbor&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;合计&lt;/td&gt;&lt;td&gt;8&lt;/td&gt;&lt;td&gt;22&lt;/td&gt;&lt;td&gt;84&lt;/td&gt;&lt;td&gt;320&lt;/td&gt;&lt;td&gt;2800&lt;/td&gt;&lt;td&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;&lt;strong&gt;演示环境涉及软件版本信息&lt;/strong&gt;&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;操作系统：&lt;strong&gt;CentOS-7.9-x86_64&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Ansible：&lt;strong&gt;2.8.20&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;KubeSphere：&lt;strong&gt;3.3.0&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Kubernetes：&lt;strong&gt;v1.24.1&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Rook：&lt;strong&gt;v1.9.7&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Ceph： &lt;strong&gt;v16.2.9&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;GlusterFS：&lt;strong&gt;9.5.1&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ElasticSearch：&lt;strong&gt;7.17.5&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Harbor：&lt;strong&gt;2.5.1&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;RabbitMQ：&lt;strong&gt;3.9.22&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;RabbitMQ Cluster Operator：&lt;strong&gt;1.14.0&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;简介&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;RabbitMQ 单节点如何在 K8s 集群上部署？RabbitMQ 集群如何在 K8s 集群上部署？60 分钟带你实战入门。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;单节点 RabbitMQ 部署&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;思路梳理&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;StatefulSet&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Headless Service：内部服务用&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;External Service：外部管理用&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Secrets：管理用户名和密码&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Image：DockerHub 官方提供的 rabbitmq:3.9.22-management(带 management 插件)&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;准备离线镜像&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;此过程为可选项，离线内网环境可用，如果不配置内网镜像，后续的资源配置清单中注意更改容器的 image 为默认值。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在一台能同时访问互联网和内网 Harbor 仓库的服务器上进行下面的操作。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;docker pull rabbitmq:3.9.22-management&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;docker tag rabbitmq:3.9.22-management registry.zdevops.com.cn/library/rabbitmq:3.9.22-management&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;docker push registry.zdevops.com.cn/library/rabbitmq:3.9.22-management&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;docker rmi rabbitmq:3.9.22-management&lt;br/&gt;docker rmi registry.zdevops.com.cn/library/rabbitmq:3.9.22-management&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;资源配置清单&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;---&lt;/span&gt;&lt;br/&gt;&lt;span&gt;kind:&lt;/span&gt; &lt;span&gt;Secret&lt;/span&gt;&lt;br/&gt;&lt;span&gt;apiVersion:&lt;/span&gt; &lt;span&gt;v1&lt;/span&gt;&lt;br/&gt;&lt;span&gt;metadata:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;rabbitmq-secret&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;namespace:&lt;/span&gt; &lt;span&gt;zdevops&lt;/span&gt;&lt;br/&gt;&lt;span&gt;data:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;pass:&lt;/span&gt; &lt;span&gt;UEA4OHcwcmQ=&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;user:&lt;/span&gt; &lt;span&gt;YWRtaW4=&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type:&lt;/span&gt; &lt;span&gt;Opaque&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;---&lt;/span&gt;&lt;br/&gt;&lt;span&gt;apiVersion:&lt;/span&gt; &lt;span&gt;apps/v1&lt;/span&gt;&lt;br/&gt;&lt;span&gt;kind:&lt;/span&gt; &lt;span&gt;StatefulSet&lt;/span&gt;&lt;br/&gt;&lt;span&gt;metadata:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;rabbitmq&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;namespace:&lt;/span&gt; &lt;span&gt;zdevops&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;labels:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;app:&lt;/span&gt; &lt;span&gt;rabbitmq&lt;/span&gt;&lt;br/&gt;&lt;span&gt;spec:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;replicas:&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;selector:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;matchLabels:&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;app:&lt;/span&gt; &lt;span&gt;rabbitmq&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;template:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;metadata:&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;creationTimestamp:&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;labels:&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;app:&lt;/span&gt; &lt;span&gt;rabbitmq&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;spec:&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;volumes:&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;-&lt;/span&gt; &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;host-time&lt;/span&gt;&lt;br/&gt;          &lt;span&gt;hostPath:&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;path:&lt;/span&gt; &lt;span&gt;/etc/localtime&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;type:&lt;/span&gt; &lt;span&gt;&#x27;&#x27;&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;containers:&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;-&lt;/span&gt; &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;rabbitmq&lt;/span&gt;&lt;br/&gt;          &lt;span&gt;image:&lt;/span&gt; &lt;span&gt;&#x27;registry.zdevops.com.cn/library/rabbitmq:3.9.22-management&#x27;&lt;/span&gt;&lt;br/&gt;          &lt;span&gt;ports:&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;-&lt;/span&gt; &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;tcp-5672&lt;/span&gt;&lt;br/&gt;              &lt;span&gt;containerPort:&lt;/span&gt; &lt;span&gt;5672&lt;/span&gt;&lt;br/&gt;              &lt;span&gt;protocol:&lt;/span&gt; &lt;span&gt;TCP&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;-&lt;/span&gt; &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;http-15672&lt;/span&gt;&lt;br/&gt;              &lt;span&gt;containerPort:&lt;/span&gt; &lt;span&gt;15672&lt;/span&gt;&lt;br/&gt;              &lt;span&gt;protocol:&lt;/span&gt; &lt;span&gt;TCP&lt;/span&gt;&lt;br/&gt;          &lt;span&gt;env:&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;-&lt;/span&gt; &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;RABBITMQ_DEFAULT_USER&lt;/span&gt;&lt;br/&gt;              &lt;span&gt;valueFrom:&lt;/span&gt;&lt;br/&gt;                &lt;span&gt;secretKeyRef:&lt;/span&gt;&lt;br/&gt;                  &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;rabbitmq-secret&lt;/span&gt;&lt;br/&gt;                  &lt;span&gt;key:&lt;/span&gt; &lt;span&gt;user&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;-&lt;/span&gt; &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;RABBITMQ_DEFAULT_PASS&lt;/span&gt;&lt;br/&gt;              &lt;span&gt;valueFrom:&lt;/span&gt;&lt;br/&gt;                &lt;span&gt;secretKeyRef:&lt;/span&gt;&lt;br/&gt;                  &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;rabbitmq-secret&lt;/span&gt;&lt;br/&gt;                  &lt;span&gt;key:&lt;/span&gt; &lt;span&gt;pass&lt;/span&gt;&lt;br/&gt;          &lt;span&gt;resources:&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;limits:&lt;/span&gt;&lt;br/&gt;              &lt;span&gt;cpu:&lt;/span&gt; &lt;span&gt;&#x27;2&#x27;&lt;/span&gt;&lt;br/&gt;              &lt;span&gt;memory:&lt;/span&gt; &lt;span&gt;4000Mi&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;requests:&lt;/span&gt;&lt;br/&gt;              &lt;span&gt;cpu:&lt;/span&gt; &lt;span&gt;100m&lt;/span&gt;&lt;br/&gt;              &lt;span&gt;memory:&lt;/span&gt; &lt;span&gt;500Mi&lt;/span&gt;&lt;br/&gt;          &lt;span&gt;volumeMounts:&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;-&lt;/span&gt; &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;host-time&lt;/span&gt;&lt;br/&gt;              &lt;span&gt;readOnly:&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;br/&gt;              &lt;span&gt;mountPath:&lt;/span&gt; &lt;span&gt;/etc/localtime&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;serviceName:&lt;/span&gt; &lt;span&gt;rabbitmq-headless&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;---&lt;/span&gt;&lt;br/&gt;&lt;span&gt;apiVersion:&lt;/span&gt; &lt;span&gt;v1&lt;/span&gt;&lt;br/&gt;&lt;span&gt;kind:&lt;/span&gt; &lt;span&gt;Service&lt;/span&gt;&lt;br/&gt;&lt;span&gt;metadata:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;rabbitmq-headless&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;namespace:&lt;/span&gt; &lt;span&gt;zdevops&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;labels:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;app:&lt;/span&gt; &lt;span&gt;rabbitmq&lt;/span&gt;&lt;br/&gt;&lt;span&gt;spec:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;ports:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;-&lt;/span&gt; &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;tcp-rabbitmq-5672&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;protocol:&lt;/span&gt; &lt;span&gt;TCP&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;port:&lt;/span&gt; &lt;span&gt;5672&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;targetPort:&lt;/span&gt; &lt;span&gt;5672&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;selector:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;app:&lt;/span&gt; &lt;span&gt;rabbitmq&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;clusterIP:&lt;/span&gt; &lt;span&gt;None&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;type:&lt;/span&gt; &lt;span&gt;ClusterIP&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;---&lt;/span&gt;&lt;br/&gt;&lt;span&gt;apiVersion:&lt;/span&gt; &lt;span&gt;v1&lt;/span&gt;&lt;br/&gt;&lt;span&gt;kind:&lt;/span&gt; &lt;span&gt;Service&lt;/span&gt;&lt;br/&gt;&lt;span&gt;metadata:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;rabbitmq-external&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;namespace:&lt;/span&gt; &lt;span&gt;zdevops&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;labels:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;app:&lt;/span&gt; &lt;span&gt;rabbitmq-external&lt;/span&gt;&lt;br/&gt;&lt;span&gt;spec:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;ports:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;-&lt;/span&gt; &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;http-rabbitmq-external&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;protocol:&lt;/span&gt; &lt;span&gt;TCP&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;port:&lt;/span&gt; &lt;span&gt;15672&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;targetPort:&lt;/span&gt; &lt;span&gt;15672&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;nodePort:&lt;/span&gt; &lt;span&gt;31672&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;selector:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;app:&lt;/span&gt; &lt;span&gt;rabbitmq&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;type:&lt;/span&gt; &lt;span&gt;NodePort&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;GitOps&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;在运维开发服务器上操作&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 在已有代码仓库创建 rabbitmq/single 目录&lt;/span&gt;&lt;br/&gt;[root@zdevops-master k8s-yaml]# mkdir -p rabbitmq/single&lt;br/&gt;&lt;span&gt;&lt;br/&gt;#&lt;/span&gt;&lt;span&gt; 编辑资源配置清单&lt;/span&gt;&lt;br/&gt;[root@zdevops-master k8s-yaml]# vi rabbitmq/single/rabbitmq-secret.yaml&lt;br/&gt;[root@zdevops-master k8s-yaml]# vi rabbitmq/single/rabbitmq-sts.yaml&lt;br/&gt;[root@zdevops-master k8s-yaml]# vi rabbitmq/single/rabbitmq-external.yaml&lt;br/&gt;&lt;span&gt;&lt;br/&gt;#&lt;/span&gt;&lt;span&gt; 提交 Git&lt;/span&gt;&lt;br/&gt;[root@zdevops-master k8s-yaml]# git add rabbitmq&lt;br/&gt;[root@zdevops-master k8s-yaml]# git commit -am &#x27;添加rabbitmq 单节点资源配置清单&#x27;&lt;br/&gt;[root@zdevops-master k8s-yaml]# git push&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;部署资源&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;在运维管理服务器上操作&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# git pull&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# kubectl apply -f rabbitmq/single/&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;验证&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# kubectl get secret -n zdevops&lt;br/&gt;NAME              TYPE     DATA   AGE&lt;br/&gt;rabbitmq-secret   Opaque   2      8s&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# kubectl get sts -o wide -n zdevops&lt;br/&gt;NAME       READY   AGE   CONTAINERS   IMAGES&lt;br/&gt;rabbitmq   1/1     25s   rabbitmq     registry.zdevops.com.cn/library/rabbitmq:3.9.22-management&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# kubectl get pods -o wide -n zdevops&lt;br/&gt;NAME         READY   STATUS    RESTARTS   AGE   IP             NODE              NOMINATED NODE   READINESS GATES&lt;br/&gt;rabbitmq-0   1/1     Running   0          26s   10.233.87.13   ks-k8s-master-1   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# kubectl get svc -o wide -n zdevops&lt;br/&gt;NAME                TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)           AGE   SELECTOR&lt;br/&gt;rabbitmq-external   NodePort    10.233.4.224   &amp;lt;none&amp;gt;        15672:31672/TCP   36s   app=rabbitmq&lt;br/&gt;rabbitmq-headless   ClusterIP   None           &amp;lt;none&amp;gt;        5672/TCP          36s   app=rabbitmq&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5078125&quot; data-type=&quot;png&quot; data-w=&quot;1920&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/u5Pibv7AcsEWhXsOYgDUw99le862ykz4f51UxA4FMAPMjlXWG29qibI5ejJjelFaPCbqSicYLSaeiaeuVRAhDN8Low/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;清理资源&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# kubectl delete sts rabbitmq -n zdevops&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# kubectl delete svc rabbitmq-external rabbitmq-headless -n zdevops&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;集群模式 RabbitMQ 部署&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;思路梳理&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;使用官方提供的 &lt;strong&gt;RabbitMQ Cluster Operator for Kubernetes。&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Open source &lt;span&gt;RabbitMQ Cluster Kubernetes Operator&lt;/span&gt;&lt;sup&gt;[1]&lt;/sup&gt; by VMware。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;官方文档快速部署&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;官方提供了快速部署的例子，只需要两步，这里我们仅作参考，后面我们参考内网离线镜像部署的方案。&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;部署 RabbitMQ Cluster Operator&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;kubectl apply -f https://github.com/rabbitmq/cluster-operator/releases/latest/download/cluster-operator.yml&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;kubectl apply -f https://raw.githubusercontent.com/rabbitmq/cluster-operator/main/docs/examples/hello-world/rabbitmq.yaml&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;准备离线镜像&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;此过程为可选项，离线内网环境可用，如果不配置内网镜像，后续的资源配置清单中注意更改容器的 image 为默认值。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在一台能同时访问互联网和内网 Harbor 仓库的服务器上进行下面的操作。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;curl -u &quot;admin:Harbor12345&quot; -X POST -H &quot;Content-Type: application/json&quot; https://registry.zdevops.com.cn/api/v2.0/projects -d &#x27;{ &quot;project_name&quot;: &quot;rabbitmqoperator&quot;, &quot;public&quot;: true}&#x27;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;docker pull rabbitmqoperator/cluster-operator:1.14.0&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;docker tag rabbitmqoperator/cluster-operator:1.14.0 registry.zdevops.com.cn/rabbitmqoperator/cluster-operator:1.14.0&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;docker push registry.zdevops.com.cn/rabbitmqoperator/cluster-operator:1.14.0&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;docker rmi rabbitmqoperator/cluster-operator:1.14.0&lt;br/&gt;docker rmi registry.zdevops.com.cn/rabbitmqoperator/cluster-operator:1.14.0&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;资源配置清单&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;通过官网获取 RabbitMQ Cluster Operator 部署资源配置清单「cluster-operator.yml」&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;wget https://github.com/rabbitmq/cluster-operator/releases/latest/download/cluster-operator.yml&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;修改 RabbitMQ Cluster Operator image 为内网镜像&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;sed -i &#x27;s#rabbitmqoperator#registry.zdevops.com.cn/rabbitmqoperator#g&#x27; cluster-operator.yml&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;RabbitMQ Cluster 部署资源清单「rabbitmq-cluster.yaml」&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;apiVersion: rabbitmq.com/v1beta1&lt;br/&gt;kind: RabbitmqCluster&lt;br/&gt;metadata:&lt;br/&gt;  namespace: zdevops&lt;br/&gt;  name: rabbitmq-cluster&lt;br/&gt;  labels:&lt;br/&gt;    app: rabbitmq-cluster&lt;br/&gt;spec:&lt;br/&gt;  replicas: 3&lt;br/&gt;  image: registry.zdevops.com.cn/library/rabbitmq:3.9.22-management&lt;br/&gt;  resources:&lt;br/&gt;    limits:&lt;br/&gt;      cpu: 2&lt;br/&gt;      memory: 4Gi&lt;br/&gt;    requests:&lt;br/&gt;      cpu: 100m&lt;br/&gt;      memory: 500Mi&lt;br/&gt;  rabbitmq:&lt;br/&gt;    additionalConfig: |&lt;br/&gt;      default_user=admin&lt;br/&gt;      default_pass=P@88w0rd&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;❝&lt;/span&gt;&lt;p&gt;更多配置参数和配置示例，请参考 &lt;span&gt;官方文档&lt;/span&gt;&lt;sup&gt;[2]&lt;/sup&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;管理页面的外部访问服务 &lt;strong&gt;rabbitmq-cluster-external.yaml&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;---&lt;/span&gt;&lt;br/&gt;&lt;span&gt;apiVersion:&lt;/span&gt; &lt;span&gt;v1&lt;/span&gt;&lt;br/&gt;&lt;span&gt;kind:&lt;/span&gt; &lt;span&gt;Service&lt;/span&gt;&lt;br/&gt;&lt;span&gt;metadata:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;rabbitmq-cluster-external&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;namespace:&lt;/span&gt; &lt;span&gt;zdevops&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;labels:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;app:&lt;/span&gt; &lt;span&gt;rabbitmq-cluster-external&lt;/span&gt;&lt;br/&gt;&lt;span&gt;spec:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;ports:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;-&lt;/span&gt; &lt;span&gt;name:&lt;/span&gt; &lt;span&gt;management&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;protocol:&lt;/span&gt; &lt;span&gt;TCP&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;port:&lt;/span&gt; &lt;span&gt;15672&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;targetPort:&lt;/span&gt; &lt;span&gt;15672&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;nodePort:&lt;/span&gt; &lt;span&gt;31672&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;selector:&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;app.kubernetes.io/name:&lt;/span&gt; &lt;span&gt;rabbitmq-cluster&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;type:&lt;/span&gt; &lt;span&gt;NodePort&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;GitOps&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;在运维开发服务器上操作&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 在已有代码仓库创建 rabbitmq/cluster 目录&lt;/span&gt;&lt;br/&gt;[root@zdevops-master k8s-yaml]# mkdir -p rabbitmq/cluster&lt;br/&gt;&lt;span&gt;&lt;br/&gt;#&lt;/span&gt;&lt;span&gt; 编辑资源配置清单&lt;/span&gt;&lt;br/&gt;[root@zdevops-master k8s-yaml]# vi rabbitmq/cluster/cluster-operator.yml&lt;br/&gt;[root@zdevops-master k8s-yaml]# vi rabbitmq/cluster/rabbitmq-cluster.yaml&lt;br/&gt;[root@zdevops-master k8s-yaml]# vi rabbitmq/cluster/rabbitmq-cluster-external.yaml&lt;br/&gt;&lt;span&gt;&lt;br/&gt;#&lt;/span&gt;&lt;span&gt; 提交 Git&lt;/span&gt;&lt;br/&gt;[root@zdevops-master k8s-yaml]# git add rabbitmq/cluster&lt;br/&gt;[root@zdevops-master k8s-yaml]# git commit -am &#x27;添加 rabbitmq 集群模式部署资源配置清单&#x27;&lt;br/&gt;[root@zdevops-master k8s-yaml]# git push&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;部署资源&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;在运维管理服务器上操作&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# git pull&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;部署 RabbitMQ Cluster Operator&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# kubectl apply -f rabbitmq/cluster/cluster-operator.yml&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# kubectl apply -f rabbitmq/cluster/rabbitmq-cluster.yaml&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# kubectl apply -f rabbitmq/cluster/rabbitmq-cluster-external.yaml&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;验证&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;RabbitMQ Cluster Operator Deployment&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# kubectl get deployments -n rabbitmq-system -o wide&lt;br/&gt;NAME                        READY   UP-TO-DATE   AVAILABLE   AGE    CONTAINERS   IMAGES                                                             SELECTOR&lt;br/&gt;rabbitmq-cluster-operator   1/1     1            1           107m   operator     registry.zdevops.com.cn/rabbitmqoperator/cluster-operator:1.14.0   app.kubernetes.io/name=rabbitmq-cluster-operator&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# kubectl get rabbitmqclusters -n zdevops&lt;br/&gt;NAME               ALLREPLICASREADY   RECONCILESUCCESS   AGE&lt;br/&gt;rabbitmq-cluster   False              Unknown            23s&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# kubectl get sts -o wide -n zdevops&lt;br/&gt;NAME                      READY   AGE   CONTAINERS   IMAGES&lt;br/&gt;rabbitmq-cluster-server   3/3     74s   rabbitmq     registry.zdevops.com.cn/library/rabbitmq:3.9.22-management&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# kubectl get pods -o wide -n zdevops&lt;br/&gt;NAME                        READY   STATUS    RESTARTS   AGE   IP              NODE              NOMINATED NODE   READINESS GATES&lt;br/&gt;rabbitmq-cluster-server-0   1/1     Running   0          84s   10.233.116.26   ks-k8s-master-2   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;&lt;br/&gt;rabbitmq-cluster-server-1   1/1     Running   0          83s   10.233.117.28   ks-k8s-master-0   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;&lt;br/&gt;rabbitmq-cluster-server-2   1/1     Running   0          82s   10.233.87.31    ks-k8s-master-1   &amp;lt;none&amp;gt;           &amp;lt;none&amp;gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# kubectl get svc -n zdevops -o wide&lt;br/&gt;NAME                        TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)                        AGE    SELECTOR&lt;br/&gt;rabbitmq-cluster            ClusterIP   10.233.56.153   &amp;lt;none&amp;gt;        15692/TCP,5672/TCP,15672/TCP   107s   app.kubernetes.io/name=rabbitmq-cluster&lt;br/&gt;rabbitmq-cluster-external   NodePort    10.233.63.84    &amp;lt;none&amp;gt;        15672:31672/TCP                74m    app.kubernetes.io/name=rabbitmq-cluster&lt;br/&gt;rabbitmq-cluster-nodes      ClusterIP   None            &amp;lt;none&amp;gt;        4369/TCP,25672/TCP             107s   app.kubernetes.io/name=rabbitmq-cluster&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5078125&quot; data-type=&quot;png&quot; data-w=&quot;1920&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/u5Pibv7AcsEWhXsOYgDUw99le862ykz4fx94GZCpxPICYrhUjJFqLpU8abrgfbHJ1R4Wns6g84apfk6aVAqdtVA/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;❝&lt;/span&gt;&lt;p&gt;&lt;strong&gt;从管理界面中可以看到一个三节点的集群&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;清理资源&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# kubectl delete rabbitmqclusters rabbitmq-cluster -n zdevops&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;[root@zdevops-master k8s-yaml]# kubectl delete svc rabbitmq-cluster-external -n zdevops&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;结束语&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;本系列文档是我在云原生技术领域的学习和运维实践的手记，&lt;strong&gt;用输出倒逼输入&lt;/strong&gt;是一种高效的学习方法，能够快速积累经验和提高技术，只有把学到的知识写出来并能够让其他人理解，才能说明真正掌握了这项知识。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;如果你喜欢本文，请分享给你的小伙伴！&lt;/strong&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;&lt;strong&gt;Get 文档&lt;/strong&gt;&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;Github：https://github.com/devops/z-notes&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Gitee：https://gitee.com/zdevops/z-notes&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;知乎：https://www.zhihu.com/people/zdevops/&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;&lt;strong&gt;Get 代码&lt;/strong&gt;&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;Github：https://github.com/devops/ansible-zdevops&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Gitee：https://gitee.com/zdevops/ansible-zdevops&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;&lt;strong&gt;Get 视频 B 站&lt;/strong&gt;&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;老 Z 手记&lt;/span&gt;&lt;sup&gt;[3]&lt;/sup&gt; https://space.bilibili.com/1039301316&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;引用链接&lt;/span&gt;&lt;/h3&gt;&lt;section data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;&lt;span&gt;[1] &lt;/span&gt;&lt;p&gt;RabbitMQ Cluster Kubernetes Operator: &lt;em&gt;https://rabbitmq.com/kubernetes/operator/operator-overview.html&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[2] &lt;/span&gt;&lt;p&gt;官方文档: &lt;em&gt;https://www.rabbitmq.com/kubernetes/operator/using-operator.html&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[3] &lt;/span&gt;&lt;p&gt;老 Z 手记: &lt;em&gt;https://space.bilibili.com/1039301316&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>eea57964b8af47d8e42502011e5faac4</guid>
<title>元数据治理：产品方案介绍及案例实践</title>
<link>https://toutiao.io/k/xagxkux</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                           autoTypeSetting24psection&amp;#10;                          &quot; id=&quot;js_content&quot;&gt;&lt;section label=&quot;Copyright Reserved by PLAYHUDONG.&quot; donone=&quot;shifuMouseDownCard(&#x27;shifu_c_008&#x27;)&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;导读：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;今天分享的主题是元数据治理实践，&lt;span&gt;这是一项长期持续的工作，涉及多部门协作、多角色参与，链路长且复杂，要有完善的流程、成熟的平台、业务和技术部门共同参与，才能推进治理工作的有效展开。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86134&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span data-original-title=&quot;&quot; title=&quot;&quot;&gt;1&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-width=&quot;20%&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;p hm_fix=&quot;360:461&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span data-brushtype=&quot;text&quot;&gt;背景说明&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1.1 痛点问题&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;随着《“十四五”数字经济发展规划》的印发、数据治理相关法律法规的公布、数据治理高峰论坛的举办等等，都体现了数据治理的重要性。从国家宏观发展层面看，响应国家政府监管要求，数据治理是时代发展趋势。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;另一方面，从企业发展和长远的战略规划来看，数据治理的痛点问题日渐突出，必须加快数据治理进程。企业面临的数据治理痛点可以总结如下：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;质量问题：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;很多公司的数据部门启动数据治理的大背景就是数据质量存在问题。质量问题包括数据内容质量、元数据质量2方面。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;（1）数据内容质量差：可能会影响业务分析和决策，数据内容质量差易导致数据问题后知后觉、数据可信度低、业务反馈意见大、数据部门压力大等；&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;（2）元数据质量差：会导致用户“找不到”、“看不懂”自己想要的数据。例如数据地图90%以上的用户都是IT技术人员，业务人员几乎很难使用。当表数量很大时，要找到一个自己想要的数据如大海捞针，即数据“找不到” ；数据地图78%的核心表都存在元数据信息缺失，尤其是业务元数据和管理元数据，用户找到数据但也难懂数据背后的含义，即数据“看不懂”问题。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;安全问题：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;数据安全是一个企业的高压线，一旦数据泄露，对业务的影响非常之大，将造成重要影响。元数据缺失安全等级，就会导致数据在使用时，没有约束的依据和规则。&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;标准问题：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;没有标准则没有评判依据，杂乱无章的数据将是治理最大的困难。当公司业务部门比较多的时候，各业务部门、开发团队的数据标准不一致，数据代码、名称、口径重复，关键字段缺失等，导致数据打通和整合过程困难，无法进行数据流动和共享。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;价值问题：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;数据资产只有被业务使用，才能体现出价值，否则将视为无效资产。而无效资产需要及时被发现、被治理，否则冗余的资产也会带来存储和管理成本。同时无效资产和有效资产混杂在一起，业务将很难识别哪些是有价值的资产，为业务使用带来的困难。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1.2 解决方案架构图&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;元数据治理是一项长期持续的工作，涉及多部门协作、多角色参与，链路长且复杂，需要有完善的流程、成熟的平台、业务和技术部门共同参与，才能推进治理工作的有效展开。元数据治理的解决方案架构图如下：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.6015625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sYBGQlzfEOWyan0YAo7KbicLPx29PLAPCcOXxxRUBVzI19ofrhqxhm0sHF5M12I5lhE2iaY0yeQcfGuBYleb1ibQQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;数据治理的最终愿景可以概括为三点：&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;流程方面：落地一套标准的数据治理规范流程&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;平台方面：沉淀一套全链路的数据治理工具体系&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;业务方面：定标准/保质量/抓安全/降成本/提价值&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;为了实现该愿景，我们将整个治理体系划分四层：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;管理层：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;管理层主要是从集团层面来制定数据治理的组织架构、职责分配、制定流程，这是整个治理工作的基础前提，否则后续治理工作将无法展开。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;标准层：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;标准层主要是定义整个数据治理过程中涉及到的各项标准，以及标准的落地评估。标准制定的内容主要包括模型设计规范、指标设计规范、模型开发规范、命名规则规范等等。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;执行层：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;执行层则主要是各个产品模块的具体执行情况展示和分析，也是数据治理工作的重要内容来源。执行层包括元数据的资产全景、模型设计检测规范结果、质量分析报告、安全审计及访问控制、模型开发存储及计算资源情况等，通过执行层的数据结果可以反应当前存在哪些需要治理的数据和数据现状。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;评价层：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;评价层则主要是针对执行层的结果，结合资产健康评估体系的规则，对目前待治理数据进行评分评价，指导数据治理工作人员进一步开展治理工作，并且通过治理工作台来查看整体治理进展。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1.3 元数据治理涉及的各产品间交互&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;元数据治理流程主要包括元数据采集、元数据注册、元数据治理、元数据发布、元数据使用。整条链路贯穿了各个子产品，包括数据源管理、数据质量、数据安全、数据标准、模型设计、数据资产目录及资产详情等，具体各产品间的交互关系及核心要素如下图所示：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.7114261884904087&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sYBGQlzfEOWyan0YAo7KbicLPx29PLAPCNicahibX89jQKtB6tV4TvtJIMNRVaBxlpSmEZjhkJRqMTs7SRE8QBHdQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1199&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1.4 名词解释&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.5388513513513513&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/sYBGQlzfEOWyan0YAo7KbicLPx29PLAPCauX0cQjD0aBPJrL14ryViboI68IT8QQHWriaM8PaJWny45MCFOx5k9JQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;592&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86134&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span data-original-title=&quot;&quot; title=&quot;&quot;&gt;2&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-width=&quot;20%&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;p hm_fix=&quot;360:461&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span data-brushtype=&quot;text&quot;&gt;元数据治理流程介绍&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;2.1 存量元数据的治理流程&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;随着企业业务发展积累了大量的存量数据，数据可能分布在各个业务源系统中，涵盖多个数据源。这些数据若不加以有效利用，对于企业来说就是资源浪费且占据存储和管理成本，且如何从这些海量混杂的数据中，提取有价值、可业务复用的数据，也是数据治理要解决的问题。故存量数据的治理，是数据治理中的一大重点工作。整个元数据治理流程会涉及到IT运维团队、数据治理部门、各业务部门等协同推进完成。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;存量元数据治理的业务流程图如下所示：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.16796875&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sYBGQlzfEOWyan0YAo7KbicLPx29PLAPCo5fhzRlt3iaa9PeajAC6iaLv6jYxjtDrbWfGruAEqxMOYViaR0e7WeUBA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;2.2 增量元数据的治理流程&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;增量元数据的治理流程和存量元数据的治理流程大部分相似，差别主要是新增数据的表物理模型还未创建，需要先经数据产品或数据开发进行元数据注册，此时主要是注册元数据的逻辑定义信息，经过注册审核后数据开发人员再去进行物理建模，这样建模得到的表更加标准和规范。数据开发人员物理建模后，治理人员再根据元数据信息完善度决定是否需要治理流程来补充元数据的其他信息。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;增量元数据治理的业务流程图如下所示：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.1640625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sYBGQlzfEOWyan0YAo7KbicLPx29PLAPCzWPS026JbjuWzwmnok7XJziaO1PFbibo6cBEQcaTR4YtLpHIVTzibqvCg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;86134&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span data-original-title=&quot;&quot; title=&quot;&quot;&gt;3&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;section data-width=&quot;20%&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;p hm_fix=&quot;360:461&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span data-brushtype=&quot;text&quot;&gt;元数据治理产品案例实践&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;3.1 实践内容&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;3.1.1 案例场景描述&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;目标：通过一个简化的案例，介绍元数据基本的治理流程，该案例将介绍业务库存量表的元数据治理流程。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;场景：某业务系统的MySQL库中存储了一张「客户信息表」，该表在实际业务中使用比较频繁，但是由于元数据缺失导致经常面临各种数据答疑、数据使用不规范等问题。故计划将该表采集到平台上进行治理，治理内容主要是完善表的业务信息、技术信息、管理信息等，以便将治理后的数据表呈现给用户，方便用户快速理解和使用表。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;3.1.2 操作流程说明&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;为了实现上述案例的场景，我们需要完成以下事项：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;（1）登记MySQL数据源，方便后续元数据使用；&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;（2）采集MySQL数据源中的「客户信息表」的元数据；&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;（3）「客户信息表」的元数据治理，包括元数据的安全、质量、标准、部门归属等信息；&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;（4）已治理的元数据表进行发布，发布后业务人员可以在资产目录中查看完整的元数据信息，以便业务使用。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.33828125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sYBGQlzfEOWyan0YAo7KbicLPx29PLAPCRnoPVD1mmia2IfeQmVIkicoDWEwwVP1FGhJwKg0TA1F83YcU8I8hLunw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;3.2 操作步骤&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;第一步：登记数据源&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在平台的数据源管理模块中，登记业务系统的MySQL数据源信息。登记内容主要包括数据源名称、负责人、数据源连接、用户名和密码等信息。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.740625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sYBGQlzfEOWyan0YAo7KbicLPx29PLAPCzEJTwyq5JTsKaHsPWErjpAEHmuAeGia5dYU7483g2e2LMCYylEic6QKg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;第二步：创建元数据采集任务&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在元数据采集模块创建采集任务，采集上一步中登记的MySQL数据源中的「客户信息表」，根据实际业务场景需要设置采集的间隔周期。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.62265625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sYBGQlzfEOWyan0YAo7KbicLPx29PLAPCwZBUH5zalr0qhib5fyvD4t8xBBTHED2cUY3JVqzZHlOOLDqYTub84cA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.628125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sYBGQlzfEOWyan0YAo7KbicLPx29PLAPC5DtBxcCP9ibBEOE2z8vrDPgqNiaedPoJHKHKWjEmmEkgFMQqJfoOxWLA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.56328125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sYBGQlzfEOWyan0YAo7KbicLPx29PLAPCjAK8VHQgG3iasEk7zibpcmsavN7SabJibEibGSRjtAMlhXTT23FeV7tLOw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;第三步：申请元数据治理&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;元数据治理是整个操作实践过程中最重要，也是最复杂的一步。元数据治理一般会涉及到多部门间的协作治理，例如业务信息的补充完善需要业务部门专员参与治理，技术信息完善需要IT部门开发参与治理，最终治理的元数据在发布申请时需要治理部门进行最终审核确认。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;上一步中采集的元数据表会在平台自动注册为一条元数据记录，此时元数据只有基本的物理信息例如表名、字段名、字段类型等，信息非常不完善。此时元数据是草稿状态，需要通过申请治理来派发治理工单给相关人员处理，如下图所示：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.50390625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sYBGQlzfEOWyan0YAo7KbicLPx29PLAPCEpT0ZticKlnhwTwFTR2L0Oib9q9ianTksT0kO7nNQxxiaicDCsvzBXhZbwg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.52421875&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sYBGQlzfEOWyan0YAo7KbicLPx29PLAPCODN0qU3erkwWLQictu8JlOAvJ0hjPrgSBoUWLVyAtcAnzcJhfqyHNyQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;工单接收人接收到治理工单后，可以对元数据信息进行补充，包括表级和字段级的业务元数据、技术元数据等信息。表级元数据治理页面如下所示：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.6390625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sYBGQlzfEOWyan0YAo7KbicLPx29PLAPCTkhbydegAdGIDqiaHmu3hNzdRvblNraCiazfNaewNYub1ibEtKe0BNpww/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;表级元数据信息分为基础信息、业务信息、技术信息，如果上述元数据内容还不够，还需要更多的元数据属性，系统也支持自定义属性及值域，以便业务灵活扩展元数据。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Tips：元数据治理页中，表的技术信息可以点击右侧的“扫描技术信息”按钮，触发一次元数据扫描功能。扫描后系统会自动将源库中的一些物理信息展示在页面上，方便用户确认最新表信息并覆盖填充。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;接下来是字段的元数据治理页面，如下所示：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.59140625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sYBGQlzfEOWyan0YAo7KbicLPx29PLAPCYibbrHsFRiaa96Nf3XqpjxINLjGnvfPGpuL31dmAbZVeKKlDROrq2zQA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这里可以针对表的每个字段进行治理，治理内容包括基础信息、业务信息、技术信息。&lt;/span&gt;&lt;span&gt;图中红色圈选出来的几个信息是和平台其他子产品相关联的内容，这里简单说明一下：&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;安全级别：可以在配置管理模块中设置安全级别的自动推荐方式，可以通过安全中心识别任务扫描获取安全级别，也可以通过第三方NLP接口智能推荐安全级别；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;数据元：和平台的数据标准模块打通，数据标准中会定义数据元规范、格式、值域等；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;数据质量管理信息：和平台数据质量中心打通，关联系统规则模板；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;关联指标：和指标系统打通，能够了解字段和指标的关联关系；&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;关联标签：和标签系统打通，能够了解字段和标签的关联关系。&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;span&gt;其&lt;/span&gt;&lt;span&gt;他字段的治理项操作页面基本一致，这里就不一一展示了。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;第四步：申请元数据发布&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;经过第三步的元数据治理后（实际治理过程可能需要多轮治理才能达到申请发布的条件）可以申请发布，以便将治理后的表资产共享给业务人员。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.559375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sYBGQlzfEOWyan0YAo7KbicLPx29PLAPCvzpuicdcWG6oQtQN7rXpxhOiatBrUapbj73tYVeThgXZeHlObQDInHMw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.55546875&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sYBGQlzfEOWyan0YAo7KbicLPx29PLAPCdJ5iczfAVuYlGASn90lqGIcufNiaxbXmF2EdcibwjMGLZRNWt1XY53Mtw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;第五步：数据资产查看&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;已治理并发布后的元数据，可在资产目录中的对应业务目录下找到表，或者直接根据关键字搜索表。找到表后在表详情页可查看元数据信息，其中表和字段的基础信息、业务信息、技术信息都比较完善，在此基础上平台也提供了元数据其他丰富的功能例如数据预览、产出信息、数据血缘等等。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.4703125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sYBGQlzfEOWyan0YAo7KbicLPx29PLAPC50E6be2k8dfwMR0MWp4kDMmv5rjYnM6KqsKEXtU65lkLg7854vXbOw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.59609375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sYBGQlzfEOWyan0YAo7KbicLPx29PLAPCIDEoFMbnptql4jPwIAVHtcCIufTjYLnTbCYe1576sFuia7MnDeex2Kw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;以上通过一个简单案例完成了元数据表从业务系统登记、采集、治理、发布、查看使用的主流程。实际业务场景中企业往往存在着大量历史数据亟待治理、同时新增数据的规范治理等，数据治理工作也会更加艰巨、复杂，治理项涵盖内容也会更多更深，由此也是对产品提出了更多的要求和挑战。&lt;/span&gt;&lt;/p&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;101582&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;作者简介&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-autoskip=&quot;1&quot;&gt;&lt;p hm_fix=&quot;322:369&quot;&gt;&lt;span&gt;梦琴，&lt;span&gt;网易数帆&lt;/span&gt;有数资深产品经理，6年工作经验。目前主要负责数据地图、元数据中心和数据治理相关内容。&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mp-common-profile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzIwNTUxNTI1Ng==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/sYBGQlzfEOV4Bfic2e5zqTMCl0XxmMuVq1XpDOBrbXicVB4KmrEXglsWcnMREoQXfX24sscdvQIR74ic3SiciaLoMFA/0?wx_fmt=png&quot; data-nickname=&quot;网易有数&quot; data-alias=&quot;Youdata_Netease&quot; data-signature=&quot;网易有数是网易数帆旗下大数据技术与服务品牌，以“数据价值”为导向，聚焦于企业 “看数”、“管数”、“用数”等业务场景，提供全链路大数据技术及产品服务，致力于盘活企业数据生产力，加速实现数字化转型。&quot; data-from=&quot;0&quot; data-is_biz_ban=&quot;0&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;section&gt;&lt;img class=&quot;__bg_gif rich_pages wxw-img&quot; data-fileid=&quot;100003451&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/sYBGQlzfEOXECeWKgyIia3c7bom7Ir4rh4qI4XdxuRW4lyHudFyglytmLrOM4yYOWs3XNqqj0XlXTEw8icZ2Eb1Q/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;400&quot;/&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot; hm_fix=&quot;317:401&quot;&gt;分享，点赞，在看，安排一下？&lt;/section&gt;&lt;/span&gt;&lt;/section&gt;&lt;/div&gt;

          

          
          &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>02d609512c62997c2ae4aca1970f637e</guid>
<title>阿里云如何基于边缘云设计终端云化场景的架构？</title>
<link>https://toutiao.io/k/lqr1cuc</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                           autoTypeSetting24psection&amp;#10;                          &quot; id=&quot;js_content&quot;&gt;&lt;section data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6666667&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Ua9PWyGDDPiab6QPpWGdSbS8V5udS1HzicH2hrkvtKxVrOtmpOG5QZa3q4a9tico9GybebVFRhM8NG3nNhqmtNHJQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;“&lt;/span&gt; &lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;终端无休止的更新迭代，&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;是软件对计算资源的需求激增。&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;span&gt;”&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;技术作者｜&lt;span&gt;王广芳&lt;/span&gt;    &lt;br/&gt;内容编辑｜IMMENSE&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;这是个万物更迭速度惊人的时代。&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;世界多元延展，大众需求激增，而满足需求，终端设备的死亡迭代随之疯狂加速。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;于是，手机、电脑被无休止的更新换代，究其背后，&lt;strong&gt;本质是消费终端软件对计算资源的需求激增所致。&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;情况同样映射在企业。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;数字化时代的今天，IT终端是企业的重要生产力。据了解，PC终端设备的使用寿命是&lt;/span&gt;&lt;span&gt;3-6年&lt;/span&gt;&lt;span&gt;，随着使用年限的增加，运行速度慢、性能不足、故障率提高等问题层出不穷。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;企业如果选择IT设施更替，会周期性产生高昂成本，由此产生的存量IT设备也逐渐成为管理、数据、应用、安全的孤岛，造成极大的运维压力和成本。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在此之上，5G时代让各行业探索的新场景和新应用不断涌现，软件功能的不断丰富、智能操作系统的不断升级，对场景中终端设备的要求也越来越高，这也是对计算资源需求的与日俱增。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;于是，腾挪计算资源，将终端设备&lt;/span&gt;&lt;span&gt;“就近上云”&lt;/span&gt;&lt;span&gt;，可能是最好的解法。&lt;/span&gt;&lt;span&gt;即终端云化。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;01&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;终端云化：打破硬件的桎梏&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;近几年，“终端云化”技术开始规模化落地，其核心思想是“&lt;/span&gt;&lt;span&gt;计算卸载&lt;/span&gt;&lt;span&gt;”，即将智能终端的计算任务卸载到边缘云虚拟终端处理，解决终端设备在算力和存储等方面的不足。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;比如最近火爆的云游戏，使得在低配的手机、PC端甚至智能电视上玩大型高画质游戏成为可能。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;为了更好的理解终端云化的优势和特点，下面将以阿里云视图计算产品VEC（Visual Edge Computing）为例进行说明。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;视图计算VEC重点服务的是视频图像设备（消费电子、摄像头、车载终端等）上云场景，通过设备终端的标准协议接入，提供设备管理、视图处理、视图存储等服务。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;“终端云化”技术打破了硬件的桎梏，其优势可总结为以下两点：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;一是功能演进与终端设备解耦。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;功能和性能的演进不再依赖终端设备的配置和升级，面对各种周期长、一致性差、兼容性等问题，只需要云端服务统一升级即可。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;比如：VEC服务的普通摄像头需要增加AI识别功能，不需花费巨资更换高价的智能摄像头，只需将接入到云端的视频流对接AI识别服务，简单配置参数即可。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;二是高效的规模化管理。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;当终端设备规模到达一定规模后，终端本身的管理以及终端上生产数据的管理就是一个很大的挑战了，尤其是VEC服务的视图类设备，会产生大量的视频或图片数据，在云端基于平台进行设备管理、流处理、流存储的能力是设备端无法企及的。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;视图计算VEC作为终端云化的典型场景，重点构建了视图设备一键上云标准化协议、截图/录制/转码/混流等流媒体处理、视图AI、视图存储等核心技术能力，但最核心的竞争力来自基于边缘云打造的架构优势。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;02&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;“终端云化”为何依赖边缘云？&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;边缘云节点无处不在，离用户更近、数据处理延时低，可带来更好的体验。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;边缘云能为”终端云化“带来什么？&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;仍然拿视图计算VEC来进行说明，常规的VEC系统设计可以是完全的中心架构，构建起来比较简单，如下图所示。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.58515625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Ua9PWyGDDPiab6QPpWGdSbS8V5udS1Hziceics37jJ3kTswUCxehvcBGicC4Ouzcia1BSmqEdUJwTcKhIseHEqK2Twg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;可以看到，VEC系统应用统一部署在一个Region，面向全网所有的视图设备提供GB协议和自研协议的接入服务，并支持接入设备以RTP或RTMP协议推流，进行切片录制、截图、转码、AI分析、存储、实时播放、录像回看等服务。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;但是VEC产品服务了海量的视图设备，&lt;strong&gt;视图流数据需要持续上传到平台进行处理，如果全部数据都到中心统一处理，成本是非常高的。&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这类比较典型的终端云化大流量场景，如果能够将流量收敛到边缘进行处理，将明显降低流量成本，提升产品的竞争力。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;同时，如果全网设备统一推流到中心，并不能确保所有设备推流的低延时体验，边缘就近接流是非常有必要的。&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;此时，边缘架构的两大优势就显现出来了。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;一是就近接入，&lt;/span&gt;&lt;/span&gt;&lt;span&gt;接流网关可以基于边缘节点进行广泛覆盖，支持设备的就近低延时接入；&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;二是更低成本，&lt;/span&gt;&lt;/span&gt;&lt;span&gt;设备的视图流数据可以在边缘完成处理和存储，优化流量和存储成本。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;03&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p powered-by=&quot;xiumi.us&quot;&gt;&lt;strong&gt;&lt;span&gt;完整的边缘架构系统是如何构建的？&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;接下来，如何设计业务系统的边缘架构？&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;中心架构与边缘架构的主要差异是，&lt;strong&gt;从“中心-终端”两层架构到“中心-边缘-终端”三层架构的演进。&lt;/strong&gt;边缘云作为中间层，整体思路上将重点考虑终端能力的上移和中心能力的下沉。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;终端能力上移可以降低终端硬件要求以及软件复杂度，对于海量终端的场景，在终端成本优化和易运维方面会有明显收益，这也是VEC在视图设备上云场景提供的价值逻辑。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;中心能力下沉则主要评估业务系统中边缘和中心有成本差异的模块，比如VEC的视图流在边缘接入后可以在边缘完成处理和存储，后续的视图数据读取也可以直接从边缘访问，这样就大幅收敛了边缘回到中心的流量，带宽成本得到优化。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5775&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Ua9PWyGDDPiab6QPpWGdSbS8V5udS1Hzic3k2jUjibYODQMibjiaE7ozAWxFGFaPCXhc29md27zQCMhNBHic2W4Niaepw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1200&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;对VEC系统中心模块和边缘模块的评估，可以提炼为以下几类情况：&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;最终的VEC边缘架构如下图所示。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;其中ENS是阿里云的边缘云产品-边缘节点服务（Edge Node Service），提供了虚机、容器等多种形态实例，块存储、对象存储等多种存储服务，以及LB、NAT等多种网络组件，在全国完成重点城市的全域覆盖。&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;VEC基于ENS进行边缘架构构建，明显降低了技术方案落地的研发成本，同时在边缘基础设施层的稳定性方面产品级的保障，可以更专注业务系统自身的技术迭代。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.6030864197530864&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Ua9PWyGDDPiab6QPpWGdSbS8V5udS1HzicHkFqoRjZluZHrSqpg5QnPxJbUohIpQHZCxv3H6IwiaYsHibOBa4I08Rw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1620&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;针对边缘架构，系统要建设一些关键能力，更好地发挥边缘架构的优势，主要包括：&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt; &lt;/span&gt; &lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;资源与业务调度能力&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;资源由中心统一模型升级为边缘分布式模型，配套的资源和业务调度成为系统核心能力，包括访问和流量就近调度，以及节点故障或水位较高时的可用性调度等；&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt; &lt;/span&gt; &lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;云边协同管控能力&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;中心管控和边缘管控一起形成闭环，比如用户通过中心OpenAPI编排一个处理流程，首先切片录制，存储为固定时长的文件，然后读取文件进行AI识别，就涉及到中心解析模板-&amp;gt;多模块参数下发边缘-&amp;gt;边缘模块按流程和参数处理-&amp;gt;识别的结构化信息回传中心-&amp;gt;中心信息处理等云边交互管控的复杂链路；&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt; &lt;/span&gt; &lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;云边稳定且安全的通信能力&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;中心与边缘基于互联网的远程通信RPC，需重点考虑通信安全和通信可靠性，云边协同管控依赖云边稳定且安全的通信能力；&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt; &lt;/span&gt; &lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;边缘自治管控能力&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;边缘需要具备一定的自治管控能力，以应对高性能、高可用、云边一致性等场景的要求，比如减少边缘处理逻辑中对中心的依赖，以及当云边通信短时不可用时能够持续服务并在恢复后进行状态同步等。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;构建一套完整的边缘架构系统，还需要什么？配套的系统能力。&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;主要包括：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt; &lt;/span&gt; &lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;边缘节点高效部署&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;边缘节点部署包括节点资源的申请和初始化，以及边缘模块应用的部署和发布。&lt;/span&gt;&lt;span&gt;边缘架构需要大量的边缘节点进行服务，节点的部署和纳管必须标准且高效，应用容器化部署是一个不错的选择。&lt;/span&gt;&lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt; &lt;/span&gt; &lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;配置管理及配置动态下发&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;业务调度和云边协同管控等核心能力都有基于策略和配置进行动态管理的需求，实现灵活的场景适配，以及全网资源更高效的使用。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt; &lt;/span&gt; &lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;远程运维系统&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;远程运维能力包括边缘状态和日志的采集上报、监控告警、远程诊断和处置等，互联网的不稳定增加了远程运维的挑战，运维动作的链路长，故障因素多，需要针对核心运维场景做全链路能力建设。&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;VEC的支撑系统大图如下，其中应用部署发布、服务发现治理、集群扩缩容等关键能力是基于ENS容器平台构建的。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5153094462540717&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Ua9PWyGDDPiab6QPpWGdSbS8V5udS1HzicIH4dxVRYPIbUyJlS1M29FeZLEXuicC81ibAGIX256K5lvjsPJpEauMsA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1535&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;“&lt;/span&gt; &lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;&lt;em&gt;&lt;span&gt;边缘云的发展吸引了越来越多技术人的关注，在关注、参与边缘云自身能力演进的同时，相信更多的技术人更有机会做的事情，是推动自己的业务架构向边缘架构演进。      &lt;/span&gt;&lt;/em&gt;&lt;/strong&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;span&gt;”&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;视图计算的架构可以面向更多终端云化的场景进行扩展，演进成为更加通用的终端云化平台。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在平台技术方面，可以将目前自研的&lt;/span&gt;&lt;span&gt;ODCAP（Open Device Cloud Access Protocol）&lt;/span&gt;&lt;span&gt;开放设备上云协议用于更广泛的终端云化接入和管理，同时提供可视化的视图流处理编排引擎，方便终端数据的复杂处理流程定义。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在边缘架构演进方面，视图数据被存储到了数量众多的边缘节点中，数据操作都需要先定位节点再进行读写，复杂度较高。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;技术上应该考虑将多个物理节点的存储抽象成一个逻辑存储，并封装一套标准的逻辑对象存储接口，这套接口可以和中心的对象存储接口在使用体验上完全一致。这个能力也已经在阿里云边缘云ENS上孵化完成，开始对外产品化服务。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;随着边缘场景的不断丰富，边缘云才能获得更好的发展。而边缘云的使命，就是支持各类边缘场景和架构更好、更快、更稳的构建和发展。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;总之，真正好的技术，是可以打破桎梏，弥合鸿沟的。&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;往期推荐&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;：&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-from=&quot;yb-recommend-list&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; data-from=&quot;yb-recommend&quot; data-recommend-article-type=&quot;normal&quot; data-recomment-template-id=&quot;1&quot; data-recommend-article-id=&quot;2247532234_1&quot; data-recommend-article-time=&quot;1662099857&quot; data-recommend-article-cover=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/Ua9PWyGDDPiaI6RnyZSXlg0PAcz54veFqAAWWpxhN68xic2ibdicJlYQOPLcggnwAMFNU7OmO7KC1W3H0Ygia5ibp20Q/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;源于加速，不止加速——10年沉淀，破局改变&quot; data-recommend-article-content-url=&quot;https://mp.weixin.qq.com/s?__biz=MjM5NTE0NTY3MQ==&amp;amp;mid=2247532234&amp;amp;idx=1&amp;amp;sn=ce4385f287ae6b5722730b8e8c1c8043&amp;amp;chksm=a6fecc62918945743cb807dc971b10e772e2b6b414071ab9b35c999054d212d097946618f228#rd&quot;&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MjM5NTE0NTY3MQ==&amp;amp;mid=2247532234&amp;amp;idx=1&amp;amp;sn=ce4385f287ae6b5722730b8e8c1c8043&amp;amp;chksm=a6fecc62918945743cb807dc971b10e772e2b6b414071ab9b35c999054d212d097946618f228&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;1&quot;&gt;&lt;section data-recommend-type=&quot;normal&quot; data-recommend-tid=&quot;1&quot; data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;span class=&quot;js_jump_icon h5_image_link&quot; data-positionback=&quot;static&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4262788365095286&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/Ua9PWyGDDPiaI6RnyZSXlg0PAcz54veFqAAWWpxhN68xic2ibdicJlYQOPLcggnwAMFNU7OmO7KC1W3H0Ygia5ibp20Q/640?wx_fmt=jpeg&quot; data-w=&quot;997&quot;/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;p data-recommend-title=&quot;t&quot; data-mid=&quot;&quot;&gt;源于加速，不止加速——10年沉淀，破局改变&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;br/&gt;&lt;section data-mpa-template=&quot;t&quot; data-from=&quot;yb-recommend&quot; data-recommend-article-type=&quot;normal&quot; data-recomment-template-id=&quot;1&quot; data-recommend-article-id=&quot;2247531792_1&quot; data-recommend-article-time=&quot;1661833889&quot; data-recommend-article-cover=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/Ua9PWyGDDPjqZrIibIhMqV67bk72MWRoGyrj0b21U6pYn64kDob9KMYL9co6VFgLOP5SBbcJKgquFpt8MDqNLdQ/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;是什么，让“云”无处不在，无所不及 ？&quot; data-recommend-article-content-url=&quot;https://mp.weixin.qq.com/s?__biz=MjM5NTE0NTY3MQ==&amp;amp;mid=2247531792&amp;amp;idx=1&amp;amp;sn=a7d923202348dce6d996e7c10de38361&amp;amp;chksm=a6fecfb8918946ae12b3a71ff259dc19b84c59b0631488bfa41138a6f4f7cb42154383740224#rd&quot;&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MjM5NTE0NTY3MQ==&amp;amp;mid=2247531792&amp;amp;idx=1&amp;amp;sn=a7d923202348dce6d996e7c10de38361&amp;amp;chksm=a6fecfb8918946ae12b3a71ff259dc19b84c59b0631488bfa41138a6f4f7cb42154383740224&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;1&quot;&gt;&lt;section data-recommend-type=&quot;normal&quot; data-recommend-tid=&quot;1&quot; data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;span class=&quot;js_jump_icon h5_image_link&quot; data-positionback=&quot;static&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4248046875&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/Ua9PWyGDDPjqZrIibIhMqV67bk72MWRoGyrj0b21U6pYn64kDob9KMYL9co6VFgLOP5SBbcJKgquFpt8MDqNLdQ/640?wx_fmt=jpeg&quot; data-w=&quot;1024&quot;/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;p data-recommend-title=&quot;t&quot; data-mid=&quot;&quot;&gt;是什么，让“云”无处不在，无所不及 ？&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;br/&gt;&lt;section data-mpa-template=&quot;t&quot; data-from=&quot;yb-recommend&quot; data-recommend-article-type=&quot;normal&quot; data-recomment-template-id=&quot;1&quot; data-recommend-article-id=&quot;2247530932_1&quot; data-recommend-article-time=&quot;1660732340&quot; data-recommend-article-cover=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/Ua9PWyGDDPgzOW7tClXVMYnbBaQFQR2lMmjDJYCgkc1U1Gg9ibnvdpOVrpbeUj5APzOMQ9BUvLoSFxnT9RQuwiaQ/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;从阿里云全球实时传输网络GRTN出发，浅谈QOE优化实践&quot; data-recommend-article-content-url=&quot;https://mp.weixin.qq.com/s?__biz=MjM5NTE0NTY3MQ==&amp;amp;mid=2247530932&amp;amp;idx=1&amp;amp;sn=7c4f9fcd3709730a324b435f862f2977&amp;amp;chksm=a6fecb1c9189420abdaaba53c0d2e8e49dd2b04d7f910c3c8d25f325d1da1559645b1fdf5c3d#rd&quot;&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MjM5NTE0NTY3MQ==&amp;amp;mid=2247530932&amp;amp;idx=1&amp;amp;sn=7c4f9fcd3709730a324b435f862f2977&amp;amp;chksm=a6fecb1c9189420abdaaba53c0d2e8e49dd2b04d7f910c3c8d25f325d1da1559645b1fdf5c3d&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;1&quot;&gt;&lt;section data-recommend-type=&quot;normal&quot; data-recommend-tid=&quot;1&quot; data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;span class=&quot;js_jump_icon h5_image_link&quot; data-positionback=&quot;static&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.425&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/Ua9PWyGDDPgzOW7tClXVMYnbBaQFQR2lMmjDJYCgkc1U1Gg9ibnvdpOVrpbeUj5APzOMQ9BUvLoSFxnT9RQuwiaQ/640?wx_fmt=jpeg&quot; data-w=&quot;1000&quot;/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;p data-recommend-title=&quot;t&quot; data-mid=&quot;&quot;&gt;从阿里云全球实时传输网络GRTN出发，浅谈QOE优化实践&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;END&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5685848715164676&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Ua9PWyGDDPiab6QPpWGdSbS8V5udS1Hzicp9HeQksZltCInlZSHdl116pGxQWnCYBku6qAPMmMfY20RWiaXuXAoUA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2763&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/div&gt;

          

          
          &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>2b0fa92d062d1d51b62bca7afd9460f9</guid>
<title>图技术在美团外卖下的场景化应用及探索</title>
<link>https://toutiao.io/k/wq0e0sk</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                                       &quot; id=&quot;js_content&quot;&gt;&lt;p data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;58&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.1546875&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsU2zk0q52HtKQjubeUEyZHBVHPgeBXgTUj0ib1Kwfosl82xO1Aw7x6gccLuuYs1dbxI7REI7OcjbGw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;总第534&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;篇&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;2022年 第051篇&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;section data-role=&quot;outer&quot; label=&quot;Powered by 135editor.com&quot;&gt;&lt;section data-role=&quot;outer&quot; label=&quot;Powered by 135editor.com&quot;&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;127&quot;&gt;&lt;section data-tools=&quot;135编辑器&quot; data-id=&quot;127&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;img border=&quot;0&quot; class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;103&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;103&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsU2zk0q52HtKQjubeUEyZHBic5ADGrKxgSd0tibyMiasOHXjb46qFBw7PTfuWAxXzWq32lDkL05icwkMg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;750&quot; data-width=&quot;100%&quot; opacity=&quot;&quot; title=&quot;undefined&quot;/&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot; data-style=&quot;text-align: left; font-size: 14px; color: inherit;&quot;&gt;&lt;section&gt;&lt;span&gt;在外卖广告CTR预估建模中，我们依托图技术在场景化上进行了一系列探索。本文首先介绍了使用图网络技术的出发点，然后从特征层面的抽象图关系到子图扩展以及场景感知子图，逐步介绍如何使用图技术建模业务问题，并针对联合训练的线上服务细节及效果进行解释和分析，希望能给从事相关工作的同学带来一些帮助或启发。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;1. 引言&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;2. 图技术的场景化探索&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;2.1 基于特征图的场景特征交叉建模&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;2.2 基于子图扩展的行为图建模&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;2.3 基于元路径的场景图建模&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;3. 工程实践落地&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;3.1 场景图CTR模型主结构&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;3.2 基于子图扩展的行为图联合训练&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;3.3 场景子图模块&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;3.4 效果收益&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;4. 总结和展望&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;5. 作者简介&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;6. 参考资料&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;1. 引言&lt;/span&gt;&lt;/h2&gt;&lt;section&gt;&lt;span&gt;外卖已经成为大众生活中非常的重要组成部分，大家也逐步感受到外卖带来的便利。大数据和深度学习时代的到来，使点击率（&lt;/span&gt;&lt;span&gt;Click Through Rate, CTR&lt;/span&gt;&lt;span&gt;）/转化率（&lt;/span&gt;&lt;span&gt;Conversion Rate, CVR&lt;/span&gt;&lt;span&gt;）预估技术得到了长足的发展，深度学习技术已经成为业界的主流方法。美团外卖也通过应用深度模型，在线上取得了显著的收益。预估模型所做的事情，是建模蕴藏在数据中、&lt;strong&gt;在特定场景下用户和商品之间的关联性（&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;即“人-货-场”&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;）&lt;/strong&gt;。以点击率预估为例，可以对画像特征、上下文特征、行为特征等进行建模，模型能够感知在该场景下用户和商品之间的关联。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;美团外卖是一个场景化业务：用户当前决策是受不同场景因素共同影响的结果，这些场景因素包括但不限于LBS地理位置、商家营业情况、时间餐段。比如在繁华商圈/小城市（&lt;/span&gt;&lt;span&gt;LBS&lt;/span&gt;&lt;span&gt;）下的工作日/非工作日/正餐/下午茶（&lt;/span&gt;&lt;span&gt;时间餐段&lt;/span&gt;&lt;span&gt;），根据商家营业情况圈选商家。相比于传统电商业务来说，增加了LBS和时段的限制，其场景化因素更为丰富。同时，外卖具有很强的即时需求性质，用户的决策链路会很短，长时间“逛”外卖App的情况较少，故单次用户决策具备短时性的特点，这也进一步对外卖场景化增加了更多的建模因素。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;因此，如何将用户的外卖需求进行场景化建模，从而提升用户在使用外卖时的下单体验，成为外卖预估模型需要重点解决的问题。&lt;/span&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;1.1 问题与挑战&lt;/span&gt;&lt;/h3&gt;&lt;section&gt;&lt;span&gt;相较于传统电子商务，用户兴趣在外卖业务下呈现出更加明显的场景化特点，具备【用户-场景-兴趣-决策】链路：即用户在特定场景下，结合自身需求与个人饮食兴趣，产生决策。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.44609375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/hEx03cFgUsXMmG7zAdvWg5zD0CMNYsGfTT4JgstDhPpAic5H7LcOqeWPQOFZR27gGKKGAy2Vq51bNwLXSw3FJaQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;figcaption&gt;&lt;span&gt;图1 场景化用户行为决策示例&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;场景化建模在本质上，是在给定场景条件下，比如地理位置、餐段时间、天气等，基于用户兴趣为用户匹配出最佳商品。围绕场景化建模这一目标，业界从不同角度进行了一系列技术探索：&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;特征建模&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;：构造用户-商品-场景交互的统计特征/交叉特征，例如：用户在午餐时段的品类偏好、用户夜宵时段点击商户数量统计等。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;序列建模&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;：分场景行为序列，精细化刻画在不同场景下的用户兴趣，例如：用户在不同蜂窝下的Session行为，在不同时间段的Session行为。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;以上建模方法能够建模场景因素在用户决策商品时的影响，但存在一些问题：&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;特征建模，尤其是特征交叉的过程中，容易引入噪声，会对模型学习产生负面影响。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;序列建模，依赖于用户行为的丰富程度，在分场景行为划分下对低频用户的兴趣刻画不友好，同时高频用户的兴趣刻画容易陷入个人兴趣封闭圈。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;交叉和序列范式对场景的刻画并不完整，交叉范式存在维度上限，序列范式局限于用户已有行为偏好。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;因此，场景化建模存在以下挑战：&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;如何抽取有效场景特征交叉。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;如何打破序列建模下的兴趣封闭性。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;如何完整地对用户决策场景进行有效刻画。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;针对上述问题特点，经过逐层分解，我们发现需要一种更加完整、高效的信息表达方式，能够具备：关系预测能力、全局信息传播能力、高阶表达能力，而我们在图技术的领域中找到相应的解决方案，后文会针对这些问题和图技术的解法依次进行展开，希望这些思考和实践经验能对大家有所帮助或者启发。&lt;/span&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;1.2 图技术介绍&lt;/span&gt;&lt;/h3&gt;&lt;section&gt;&lt;span&gt;近些年来，随着图神经网络（&lt;/span&gt;&lt;span&gt;Graph Neural Networks&lt;/span&gt;&lt;span&gt;）的快速发展&lt;sup&gt;[1]&lt;/sup&gt;，越来越多的人开始关注起图数据。工业界也出现了图技术的相继落地，很多应用场景都可以抽象为节点向量化表示、分类、聚类、链接预测等图任务形式。&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;对于召回场景来说，基于多种实体间天然存在的关联交互图，构建深度匹配模型学习到的Embedding表达可以直接用来度量用户-商品的偏好、商品-商品关联。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;对于预估模型来说，最朴素的视角，即是在用户-商品这个二部图上进行链接预测。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;在美团内部业务中，Graph Embedding/GNN技术在多个技术团队落地；如美团平台&lt;sup&gt;[2],[4],[10]&lt;/sup&gt;相关工作以及外卖技术Represent-Learning项目等，都取得了不错的正向收益。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;相比传统欧式空间结构类型数据，图结构数据具有以下特点：&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;结构化&lt;/strong&gt;：图网络具备拓扑结构性，这种结构化特性往往代表了一些规律。例如节点重要性，社区结构等。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;关联化&lt;/strong&gt;：图网络提供了一种复杂关系和交互的度量方法。例如关联关系、依赖关系可以通过图表征学习进行度量。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;全局化&lt;/strong&gt;：图网络构建采用全域数据，相比私域化的序列数据，图结构数据更加能够体现出群体偏好信息。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;强泛化&lt;/strong&gt;：利用图网络的消息传播机制，图上节点丰富信息更容易传播到冷门节点上，提高冷门节点表达能力。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;从业界信息表示的发展趋势来看，信息表示是在升维的：从手工特征，到序列建模，再到图建模，背后是对更加完整信息的有效刻画的诉求。&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;手动特征时代&lt;/strong&gt;：基于行为日志统计挖掘用户/商家/商品画像。缺点是刻画粒度较粗、不精准、表达能力有限。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;Neural Network（NN）序列模型时代&lt;/strong&gt;：基于原始行为序列设计用户兴趣提取模块端到端学习用户兴趣。优点是一定程度从多峰和动态演变方面提升了用户兴趣表达的准确性。缺点是较难学习到结构化信息，对于行为数据强依赖，头部用户行为密集，中长尾用户行为稀疏。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;Graph Neural Network（GNN）时代&lt;/strong&gt;：万物皆图。序列可以看做是一个子图，相比于序列，图结构数据对于信息的表达，更加结构化、完整、丰富。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;在日常业务优化中我们也发现，如果说要找到一种形式化的建模语言能够准确、完整的翻译出我们的业务场景，那么呈现出来的建模语言就是“图”。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;542&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;135&quot; data-ratio=&quot;0.24814814814814815&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/hEx03cFgUsXMmG7zAdvWg5zD0CMNYsGfYXSJAUjtmiaINacfq9NzuMFztrAhxOwGF18YjoJib2rgHsOiaftewYo4Q/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1080&quot;/&gt;&lt;figcaption&gt;&lt;span&gt;图2 信息表示的发展历程&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;因此，我们期待通过图技术手段，实现外卖场景下的场景建模。以下我们将从图算法探索和具体工程实践落地两大方面，阐述我们在图技术场景建模上的尝试及经验。&lt;/span&gt;&lt;/section&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;2. 图技术的场景化探索&lt;/span&gt;&lt;/h2&gt;&lt;section&gt;&lt;span&gt;外卖场景化是指基于用户-商家/商品完整交互信息（&lt;/span&gt;&lt;span&gt;&amp;lt;User、POI、Time、Location&amp;gt;&lt;/span&gt;&lt;span&gt;）中挖掘到的共性Pattern。我们通过构建用户-商家/商品交互场景图来刻画和提取这个Pattern，并将场景先验知识引入到预估模型当中辅助决策。业界已经有前沿探索将GNN应用于LBS场景建模，如美团平台的STGCN&lt;sup&gt;[2]&lt;/sup&gt;从时空结合的角度描述了LBS场景下GNN应用，外卖数据组的“门控超图GNN”&lt;sup&gt;[3]&lt;/sup&gt;描述了超图在外卖LBS场景化建模的应用；对比普通GNN方法都取得了SOTA的效果。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;针对美团外卖的场景化建模特点，我们在图算法上也进行了一系列探索，分别在场景特征交叉、子图拓展感知、元路径场景图三个方面，围绕着在不同场景下的用户-POI建模的目标，进行了多方面的探索，在离线评估、线上业务上均取得了不错的效果。&lt;/span&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;2.1 基于特征图的场景特征交叉建模&lt;/span&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;2.1.1 场景特征交叉&lt;/span&gt;&lt;/h4&gt;&lt;section&gt;&lt;span&gt;特征是机器学习模型的源动力，业界常言“特征的上限决定了模型的上限”。NN时代以前，模型效果的提升有很大一部分来自于特征工程。随着模型进入NN时代，NN模型具备的拟合能力以及在数据红利的加持下，极大地减少了算法工程师们在特征工程上的精力开销，工作重点开始聚焦于模型结构。虽然理论上NN可以拟合一切函数，但在有限的数据和训练周期内，无法快速地逼近效果上限。在这种背景下，显式特征交叉重新得到大家的关注，围绕自动交叉特征，业界陆续迭代出FM/xDeepFM/DCN/CAN等模型，并取得了非常好的效果。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;在美团外卖场景，也经历了第一阶段的手动交叉特征，以及第二阶段的自动交叉特征。但在场景化建模中我们发现：交叉特征带来了信息增益，但往往也会带来“噪声”问题；比如具体到样本粒度来说，不同类型的样本所需要的有效交叉特征并不是完全一致，存在差异性。近两年业界的一些工作，如Fi-GNN、L0-SIGN、阿里FIVES等，也都在对应的业务中发现全量信息交叉引入噪声问题。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;因此，从迭代思路来看，希望能够引入更多的交叉特征，同时也减少噪声信息的引入，实现在样本粒度的“个性化”交叉特征。&lt;/span&gt;&lt;/section&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;2.1.2 图视角的特征交叉&lt;/span&gt;&lt;/h4&gt;&lt;section&gt;&lt;span&gt;特征交叉，可以抽象为“从全量特征集中，选择出K组特征两两组合，实现给模型带来高效非线性表达能力的目的”。本质上可以看做是特征-特征之间二部图的关系预测：将特征看作节点，特征之间的关联关系看作边，则可以将所有特征之间的关联关系构成一张图网络。两个节点连边的权重，可看作对应特征之间交叉关系的强弱。通过将此关系图嵌入到模型训练过程中，关系图中不同边权即反映了不同特征交叉的重要程度。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;每个样本中N个特征互相之间构成一个全连通图记为M，图中的每个顶点表示特征F，顶点之间的边表示任意两个特征Fi和Fj的关联度，记为M&amp;lt;i, j&amp;gt;。通过联合训练关系图和预估模型，更新参数矩阵M，使关系图的语义信息与预估模型保持相关性和一致性，主要过程如下图3所示：&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.23046875&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/hEx03cFgUsXMmG7zAdvWg5zD0CMNYsGfORa2jcNUee5yiaWCkqF9arpPYTtjauoAQOquics2QKJb704jqDKQtjaQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;figcaption&gt;&lt;span&gt;图3 特征交叉图建模过程&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;主要步骤可描述如下：&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Step1. 建立参数矩阵（&lt;/span&gt;&lt;span&gt;随机初始化得到&lt;/span&gt;&lt;span&gt;），对特征所对应的向量表示做点积，结果作为关联系数。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Step2. 对矩阵施加L0惩罚，用于限制矩阵M的参数尽量接近0，减少无用的场景交叉。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Step3. 参数矩阵0,1化，用于确定需要参与聚合的节点。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Step4. 图聚合，对于每个特征来说，与其存在交互的多个特征进行聚合操作，聚合方式使用Attention。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Step5. 将聚合后的特征向量表示，做为该特征新的向量表示，用在下游CTR预估的联合训练中。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;通过特征交叉系数抽象为图的边权重要性评估问题，使模型具备了对场景特征之间关联强弱的预测能力，从而能够更加高效地引入交叉特征，为用户的场景化建模提供更多的信息输入。&lt;/span&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;2.2 基于子图扩展的行为图建模&lt;/span&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;2.2.1 场景序列建模的痛点和图解决思路&lt;/span&gt;&lt;/h4&gt;&lt;section&gt;&lt;span&gt;在外卖算法模型迭代中，序列建模也经历了较长时间的迭代，从单场景短期Session建模到多场景用户长期行为兴趣建模，在多个方向上都做出了详尽的探索。序列建模能够在用户历史行为中，充分发掘用户的兴趣偏好，但是由于用户行为序列本身是“有偏采样”的反馈：不同用户所处的地理位置、商家供给情况、使用频次等方面存在着较大差异；且高低频用户的点击行为分布差异明显，呈现出高频用户行为丰富聚集、低频用户行为稀疏的特点。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;对于高频用户，可能会导致兴趣圈封闭导致模型建模无法跳脱既有的兴趣圈；对于低频用户，由于信息的缺乏导致其兴趣刻画不完整。因此，我们需要具备拓展用户兴趣边界的信息扩展能力、对单点信息的扩充能力；即寻找一种新的数据结构，打破二维线性限制，实现三维立体扩展，基于此种想法，我们从图的角度来重新思考用户行为建模：以私域线性行为序列作为兴趣刻画基础，以公域全局互联关系图作为兴趣补充，建立个体差异性与群体共性的连接。&lt;/span&gt;&lt;/section&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;2.2.2 行为POI子图设计&lt;/span&gt;&lt;/h4&gt;&lt;section&gt;&lt;span&gt;用户行为信息是指用户在平台的点击/下单活动记录，是最原始最直接的对于用户兴趣的刻画，尤其是针对行为稀疏用户来说，行为POI序列中任意节点都值得重视。但对于这部分用户，仅仅依靠个人行为POI很难建模兴趣，如果能够通过图的方式扩展用户行为，能够有机会跳脱个人私域行为限制，透过全局行为图捕捉不同场景下的潜在兴趣。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;我们基于用户Session行为构建了POI网络：在同一个Session里，用户所点击过的POI存在关联，那么可以将每个Session里的POI构建一个连通图；由于不同用户行为的POI是有重叠的，整个外卖场景下的不同POI簇之间通过这些重叠的POI链接，就可以形成一张POI网络。对于任意一个POI，我们都可以从POI行为网络中，寻找到该POI的一跳、二跳邻居，这些邻居可以作为POI信息的相关补充。这样，对于用户的行为兴趣刻画，不仅仅局限在用户已有的序列上，而是可以通过子图进一步扩展。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;相比传统序列建模方法，图网络建模可以利用全局用户行为互联的高阶网络结构，借助POI序列扩展用户兴趣：&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;对于行为稀疏用户，通过全局行为互联图，补充用户兴趣建模线索。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;缓解基于密集用户行为建模产生的马太效应，跳出历史行为探索潜在兴趣，提升推荐结果泛化性。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;具体的，针对用户行为序列中的每一个POI，都可以通过子图进行扩展，扩展后的子图通过卷积的方式形成POI的向量表示，如下图（&lt;/span&gt;&lt;span&gt;左&lt;/span&gt;&lt;span&gt;）所示。通过行为序列的扩展，使用户行为得到补充，从而得以跳出用户个人兴趣局限，丰富用户和POI的信息表达。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.2390625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/hEx03cFgUsXMmG7zAdvWg5zD0CMNYsGfOBGdsqyKBvgRMcGVyRD2p7EWTo7IyQxWBjtntQVpsqRJu0qW5ibOYgw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;figcaption&gt;&lt;span&gt;图4 子图卷积扩展到感知卷积&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;在POI子图的基础上，我们进一步思考如何有效地聚合不同POI，达到子图信息更加完整的表达。&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;建模不同POI之间强弱不同的关联关系，使用Attention结构动态分配确定POI在所属子图中的贡献度。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;考虑到POI子图是由Session构建的，用户的行为序列存在差异，相应地POI信息表达在不同用户序列中也存在差异，POI子图信息应该在不同行为上下文序列中自适应表达。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;为了捕捉这种差异性，在子图卷积的过程中，我们将中心节点与当前行为序列中其他节点做聚合，从而建模行为上下文场景关联性。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;中心节点不仅受到序列和子图影响，也受到当前候选POI的影响。因此在联合下游训练的过程中，我们将中心节点与样本Target POI进行聚合。&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.42138364779874216&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/hEx03cFgUsXMmG7zAdvWg5zD0CMNYsGfT2lYUdUqDtqZUqKTZ5Ntp21DOj7e4C0Ps406iaQ3x7jRm8qcicuOMLcQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;954&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;图5 不同子图聚合方式示例&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;section role=&quot;presentation&quot; data-formula=&quot;\begin{aligned}&amp;#10;Atten_1 = atten（W_{11} ·Node_{i} || W_{12}· Node_{center}） \\&amp;#10;Atten_2 = atten（W_{21} ·Node_{i} || W_{22}· Node_{avg}） \\&amp;#10;Atten_3 = atten（W_{31} ·Node_{i} || W_{32}· Node_{target}） \\&amp;#10;E_{i} = softmax（Atten_1 + Atten_2 + Atten_3）&amp;#10;\end{aligned}&amp;#10;&quot; data-formula-type=&quot;block-equation&quot;&gt;&lt;embed src=&quot;https://mmbiz.qpic.cn/mmbiz_svg/3a3QxMHZ8YyicHoJgRl1ValRVqxoap0xUQ2wLwhktGFDOPWZ1N8Th98Go8lfuibrJWOoE1gAuHibqrT8fsfmicVicrj5Jd4ic7Xic3h/0?wx_fmt=svg&quot; data-type=&quot;svg+xml&quot;/&gt;&lt;/section&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; focusable=&quot;false&quot; viewbox=&quot;0 -694 4372.6 851.8&quot; aria-hidden=&quot;true&quot;&gt;&lt;g stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; transform=&quot;matrix(1 0 0 -1 0 0)&quot;&gt;&lt;g data-mml-node=&quot;math&quot;&gt;&lt;g data-mml-node=&quot;mi&quot;&gt;&lt;path data-c=&quot;4E&quot; d=&quot;M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(888, 0)&quot;&gt;&lt;path data-c=&quot;6F&quot; d=&quot;M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(1373, 0)&quot;&gt;&lt;path data-c=&quot;64&quot; d=&quot;M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;msub&quot; transform=&quot;translate(1893, 0)&quot;&gt;&lt;g data-mml-node=&quot;mi&quot;&gt;&lt;path data-c=&quot;65&quot; d=&quot;M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;TeXAtom&quot; transform=&quot;translate(466, -150) scale(0.707)&quot; data-mjx-texclass=&quot;ORD&quot;&gt;&lt;g data-mml-node=&quot;mi&quot;&gt;&lt;path data-c=&quot;63&quot; d=&quot;M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(433, 0)&quot;&gt;&lt;path data-c=&quot;65&quot; d=&quot;M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(899, 0)&quot;&gt;&lt;path data-c=&quot;6E&quot; d=&quot;M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(1499, 0)&quot;&gt;&lt;path data-c=&quot;74&quot; d=&quot;M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(1860, 0)&quot;&gt;&lt;path data-c=&quot;65&quot; d=&quot;M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(2326, 0)&quot;&gt;&lt;path data-c=&quot;72&quot; d=&quot;M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z&quot;/&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/span&gt;&lt;span&gt;是当前子图中心节点Embedding；&lt;span&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; focusable=&quot;false&quot; viewbox=&quot;0 -694 3463.3 989&quot; aria-hidden=&quot;true&quot;&gt;&lt;g stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; transform=&quot;matrix(1 0 0 -1 0 0)&quot;&gt;&lt;g data-mml-node=&quot;math&quot;&gt;&lt;g data-mml-node=&quot;mi&quot;&gt;&lt;path data-c=&quot;4E&quot; d=&quot;M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(888, 0)&quot;&gt;&lt;path data-c=&quot;6F&quot; d=&quot;M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(1373, 0)&quot;&gt;&lt;path data-c=&quot;64&quot; d=&quot;M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;msub&quot; transform=&quot;translate(1893, 0)&quot;&gt;&lt;g data-mml-node=&quot;mi&quot;&gt;&lt;path data-c=&quot;65&quot; d=&quot;M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;TeXAtom&quot; transform=&quot;translate(466, -150) scale(0.707)&quot; data-mjx-texclass=&quot;ORD&quot;&gt;&lt;g data-mml-node=&quot;mi&quot;&gt;&lt;path data-c=&quot;61&quot; d=&quot;M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(529, 0)&quot;&gt;&lt;path data-c=&quot;76&quot; d=&quot;M173 380Q173 405 154 405Q130 405 104 376T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Q21 294 29 316T53 368T97 419T160 441Q202 441 225 417T249 361Q249 344 246 335Q246 329 231 291T200 202T182 113Q182 86 187 69Q200 26 250 26Q287 26 319 60T369 139T398 222T409 277Q409 300 401 317T383 343T365 361T357 383Q357 405 376 424T417 443Q436 443 451 425T467 367Q467 340 455 284T418 159T347 40T241 -11Q177 -11 139 22Q102 54 102 117Q102 148 110 181T151 298Q173 362 173 380Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(1014, 0)&quot;&gt;&lt;path data-c=&quot;67&quot; d=&quot;M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z&quot;/&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/span&gt;是行为序列节点Embedding平均；&lt;span&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; focusable=&quot;false&quot; viewbox=&quot;0 -694 4279.3 989&quot; aria-hidden=&quot;true&quot;&gt;&lt;g stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; transform=&quot;matrix(1 0 0 -1 0 0)&quot;&gt;&lt;g data-mml-node=&quot;math&quot;&gt;&lt;g data-mml-node=&quot;mi&quot;&gt;&lt;path data-c=&quot;4E&quot; d=&quot;M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(888, 0)&quot;&gt;&lt;path data-c=&quot;6F&quot; d=&quot;M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(1373, 0)&quot;&gt;&lt;path data-c=&quot;64&quot; d=&quot;M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;msub&quot; transform=&quot;translate(1893, 0)&quot;&gt;&lt;g data-mml-node=&quot;mi&quot;&gt;&lt;path data-c=&quot;65&quot; d=&quot;M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;TeXAtom&quot; transform=&quot;translate(466, -150) scale(0.707)&quot; data-mjx-texclass=&quot;ORD&quot;&gt;&lt;g data-mml-node=&quot;mi&quot;&gt;&lt;path data-c=&quot;74&quot; d=&quot;M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(361, 0)&quot;&gt;&lt;path data-c=&quot;61&quot; d=&quot;M33 157Q33 258 109 349T280 441Q331 441 370 392Q386 422 416 422Q429 422 439 414T449 394Q449 381 412 234T374 68Q374 43 381 35T402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487Q506 153 506 144Q506 138 501 117T481 63T449 13Q436 0 417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157ZM351 328Q351 334 346 350T323 385T277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q217 26 254 59T298 110Q300 114 325 217T351 328Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(890, 0)&quot;&gt;&lt;path data-c=&quot;72&quot; d=&quot;M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(1341, 0)&quot;&gt;&lt;path data-c=&quot;67&quot; d=&quot;M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(1818, 0)&quot;&gt;&lt;path data-c=&quot;65&quot; d=&quot;M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(2284, 0)&quot;&gt;&lt;path data-c=&quot;74&quot; d=&quot;M26 385Q19 392 19 395Q19 399 22 411T27 425Q29 430 36 430T87 431H140L159 511Q162 522 166 540T173 566T179 586T187 603T197 615T211 624T229 626Q247 625 254 615T261 596Q261 589 252 549T232 470L222 433Q222 431 272 431H323Q330 424 330 420Q330 398 317 385H210L174 240Q135 80 135 68Q135 26 162 26Q197 26 230 60T283 144Q285 150 288 151T303 153H307Q322 153 322 145Q322 142 319 133Q314 117 301 95T267 48T216 6T155 -11Q125 -11 98 4T59 56Q57 64 57 83V101L92 241Q127 382 128 383Q128 385 77 385H26Z&quot;/&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/span&gt;是样本目标节点Embedding；Attention函数是两层前馈神经网络，激活函数为LeakyReLU。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;离线训练时，是基于用户行为序列，对序列中每个POI作兴趣子图拓展；而子图生成时采用预采样（&lt;/span&gt;&lt;span&gt;Message Passing&lt;/span&gt;&lt;span&gt;）+联合训练聚合的方式；通过以上三种聚合方式，得到属于行为序列中POI对应的向量表示。由于这个过程不仅是扩展了POI，还将序列信息、候选POI信息考虑到了每个节点的表示中，我们称这种为子图感知卷积。通过子图感知卷积，使卷积的过程中，POI的向量表示与上下文信息产生关联，从而使POI的嵌入表示融合了更精确的兴趣信息。&lt;/span&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;2.3 基于元路径的场景图建模&lt;/span&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;2.3.1 从业务特点出发-元路径建模的初衷&lt;/span&gt;&lt;/h4&gt;&lt;section&gt;&lt;span&gt;我们对用户决策过程进行抽象，将用户User与商户POI在给定Context环境下的一次交互定义为一个事件（&lt;/span&gt;&lt;span&gt;Event&lt;/span&gt;&lt;span&gt;），多个用户和POI交互的结果定义为事件链（&lt;/span&gt;&lt;span&gt;EventChain&lt;/span&gt;&lt;span&gt;）。对于多个强相关的事件链（&lt;/span&gt;&lt;span&gt;不同事件链通过公共节点连接&lt;/span&gt;&lt;span&gt;），就构成了一个场景，而场景之间的User、POI主体又存在连接，这样延展开，实际上就构成了一个“场景”拓扑网络图，如下图所示：&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.25859375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/hEx03cFgUsXMmG7zAdvWg5zD0CMNYsGfBoPeueSunxhXGeOav5cfwJ7EdYKh2u8yMes5SUsBCQyjlic12O2iaV4Q/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;figcaption&gt;&lt;span&gt;图6 事件与事件链抽象示例&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;可以看到，实际上事件链组成的“场景”是一种异构图：比如具备某些属性（&lt;/span&gt;&lt;span&gt;消费频率、餐饮偏好等&lt;/span&gt;&lt;span&gt;）的用户U，在某个上下文C下（&lt;/span&gt;&lt;span&gt;时间、地点等&lt;/span&gt;&lt;span&gt;），点击/购买了具备某些属性（&lt;/span&gt;&lt;span&gt;品类、主营菜品等&lt;/span&gt;&lt;span&gt;）的商户P，这个决策过程实际上是个最简单的U-C-P元路径。事件链是在这个元路径的基础上继续扩展，得到的更长的元路径实例（&lt;/span&gt;&lt;span&gt;U-C1-P2-C2-U&#x27;&lt;/span&gt;&lt;span&gt;）。通过事件链，可以建立起场景要素的关系链接，而对场景的完整刻画，就是对场景要素表示和要素关系的抽取。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;至此，我们将场景化建模，抽象为异构图上元路径建模问题。接下来，我们将介绍如何在这个场景图上，实现对用户决策场景的建模。&lt;/span&gt;&lt;/section&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;2.3.2 到业务中去-元路径建模的实现&lt;/span&gt;&lt;/h4&gt;&lt;section&gt;&lt;span&gt;元路径UCPCU表达的语义为：不同用户在不同时空场景下，点了同一家商户，当然不同场景需求可以定义不同的元路径。为了进一步融合元路径中丰富的语义表达，仅仅依赖单一的元路径的话，所表达的语义会受到限制。我们从用户U出发，通过该元路径可以扩展出一系列的元路径实例，这些实例刻画了不同场景下，用户和POI的跨时空关联。整个建模过程分为以下几步：&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Step1. 用户和商户节点存在较多属性，相比节点拓扑结构包含更多语义信息。我们将属性信息看作节点，通过GraphSAGE的方式聚合到用户和商户表示中。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Step2. 从用户U出发，基于元路径，扩展出多条元路径的实例（&lt;/span&gt;&lt;span&gt;事件链&lt;/span&gt;&lt;span&gt;）。下图展示多条实例，包括：U-C1-P1, U-C2-P2-C3-U&#x27;，U-C2-P3-C4-U&#x27;&#x27;-C5-P4；通过扩展能够建立起用户U和商户P4的关联。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Step3. 元路径实例查询向量表示后进行拼接，并与样本中的用户（&lt;/span&gt;&lt;span&gt;Target User&lt;/span&gt;&lt;span&gt;）进行交互。多条候选元路径的设计，可以突破单一元路径依赖信息裁剪造成的信息缺失。交互的方式采取Attention，即计算当前用户与所有候选元路径的关联，并最终作用于下游预估中。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.23125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/hEx03cFgUsXMmG7zAdvWg5zD0CMNYsGf2CGWD2bfKdITQwP108EKKegAsbkTImkoLBR1BY8gJoZUicIEb3eNeSg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;图7 元路径建模场景化行为示例&lt;/span&gt;&lt;/p&gt;&lt;/figure&gt;&lt;span&gt;&lt;section role=&quot;presentation&quot; data-formula=&quot;&amp;#10;\begin{aligned}&amp;#10;context\_feature = E_{dc} = concat（cate\_fea\ |\ dense\_fea）  \\&amp;#10;metapath\_instance\_emb = E_{mie}= concat（E_{u} \ | \ E_{p}\ |\ E_{c}）&amp;#10;\end{aligned}&amp;#10;&amp;#10;&quot; data-formula-type=&quot;block-equation&quot;&gt;&lt;embed src=&quot;https://mmbiz.qpic.cn/mmbiz_svg/3a3QxMHZ8YyicHoJgRl1ValRVqxoap0xUKXbZNmf5D3HZvN6ibOwJXPshiaVFL4XdVlW3YicOhtX1gclicYFRfEMu8NwwAjvVsgTM/0?wx_fmt=svg&quot; data-type=&quot;svg+xml&quot;/&gt;&lt;/section&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;对于线上请求，检索同场景下Emie。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;section role=&quot;presentation&quot; data-formula=&quot;&amp;#10;\begin{aligned}&amp;#10;&amp;#10;E_{sub} = \sum Attenion（E_{mie}\ , \ E_{dc} ） · E_{mie}&amp;#10;&amp;#10;\end{aligned}&amp;#10;&amp;#10;&quot; data-formula-type=&quot;block-equation&quot;&gt;&lt;embed src=&quot;https://mmbiz.qpic.cn/mmbiz_svg/3a3QxMHZ8YyicHoJgRl1ValRVqxoap0xUTU0WiaWA5yRF55bicrsbzW4icwyNGBL8mRZr6iatpRICgBLjuN53aKQ9vvOQj9tqEiaSp/0?wx_fmt=svg&quot; data-type=&quot;svg+xml&quot;/&gt;&lt;/section&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;通过图网络技术，我们扩展了不同场景下的用户潜在兴趣，借助注意力机制捕捉当前决策，与不同元路径对应场景的关联性，从而实现场景化建模。&lt;/span&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;3. 工程实践落地&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;3.1 场景图CTR模型主结构&lt;/span&gt;&lt;/h3&gt;&lt;section&gt;&lt;span&gt;在模型结构设计的过程中，我们按照”低耦合、高内聚、可插拔、无依赖“的原则，将“行为子图拓展模块”、“元路径场景子图模块”、“特征图交叉模块”三个子方向迭代作为独立模块接入到模型中。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.5578125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/hEx03cFgUsXMmG7zAdvWg5zD0CMNYsGfC4cSUNqTePNwnngYDM0zWHrpCtsoJfaMXxHfXgCKFibZ3NoFyn5KIMQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;figcaption&gt;&lt;span&gt;图8 场景图CTR模型主结构&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;3.2 基于子图扩展的行为图联合训练&lt;/span&gt;&lt;/h3&gt;&lt;section&gt;&lt;span&gt;在“基于子图扩展的行为图建模”中，对于每个请求在线模块都需要进行“行为序列长度 * 邻居数”次向量查询和计算，当行为序列较长时对在线CTR预估服务来说会存在较大的RT挑战。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;考虑POI之间的&quot;全局行为互联图&quot;和用户的长期兴趣较为稳定，因此针对长期行为子图拓展采用基于行为POI和采样子图进行聚合不依赖候选Target POI，短期行为子图拓展方案仍然采用2.2.2中方案根据序列和候选Target POI动态计算，长短期POI使用不同的Embedding空间。基于此上线方案采取长期行为子图离线计算+在线查询的思想，离线计算用户长期行为序列子图Embedding并灌库，在线查询Redis获取子图Embedding参与后续计算。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;基于子图拓展的长期行为模块如下图所示：&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.82421875&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/hEx03cFgUsXMmG7zAdvWg5zD0CMNYsGfo7RGgoUzeEibvfTfHA8OpUpqc7ppmcQ4Q10GIVZMOUPUMahVwqlBsFQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;figcaption&gt;&lt;span&gt;图9 图联合训练离线在线示例&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;我们将整个过程分为三步，保证线上耗时不增加的核心在于Step2的子图拆分重构。因为线上Serving过程中行为子图Embedding表示不会发生变化，因此使用子图查询或聚合后查表，其结果是一致的。&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Step1. 端到端训练&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;strong/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;在原有CTR模型的基础上，针对POI行为序列进行子图查询扩展：每个POI申请从图引擎中进行邻域卷积采样操作，即从二阶邻居聚合到一阶邻居，再聚合到POI本身。&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Step2. 拆分子图查询模块，聚合Embedding，灌库&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;strong/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;训练完成后，将原有子图查询模块拆分，再对长期行为中全量POI做一次子图POI-Embedding聚合操作，得到行为POI的子图Embedding。灌库阶段，将长期行为子图POI的Embedding和其他特征的Embedding写入Redis存储中。&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Step3. &lt;strong&gt;对联合训练的模型进行重构导出生成新的线上Serving模型&lt;/strong&gt;&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;strong/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;将长期行为“子图扩展的行为图模块”中子图聚合计算重构为直接查询Embedding表征，线上从Step2灌库的结果中查取Embedding。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;这样避免线上大量卷积操作的耗时，线上实验验证，高峰期TP99与TP999新增模块耗时基本持平。&lt;/span&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;3.3 场景子图模块&lt;/span&gt;&lt;/h3&gt;&lt;section&gt;&lt;span&gt;基于元路径的场景图建模是采用元路径Metapath的方式来表示CTR任务样本中的用户子图和商家子图，采样子图来自预选构建好的User、POI、Context（&lt;/span&gt;&lt;span&gt;Context节点包含了蜂窝、餐段信息&lt;/span&gt;&lt;span&gt;）异构行为场景图。&lt;/span&gt;&lt;/section&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;3.3.1 离线异构图构建&lt;/span&gt;&lt;/h4&gt;&lt;section&gt;&lt;span&gt;由于Context会同时连接User与POI，在异构图上Context节点会成为超级节点（&lt;/span&gt;&lt;span&gt;能够连接一个蜂窝内几乎全部的User和POI&lt;/span&gt;&lt;span&gt;），POI类型节点也可能成为超级节点（&lt;/span&gt;&lt;span&gt;连接区域内所有Context节点&lt;/span&gt;&lt;span&gt;）；当出现了普遍的超级节点后，会导致图上游走采样困难、噪声加剧。我们在设计构建Context节点以及异构边时防止了这一问题：&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Step1. Context节点作为时空上下文，贯穿用户和门店；细化Context节点（&lt;/span&gt;&lt;span&gt;比如包含蜂窝、餐段、品类&lt;/span&gt;&lt;span&gt;），那么User与Context的连接边、Context与POI的连接边都会大大减少。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Step2. 不同User可能通过Context节点跳转到不同POI上，为了防止采样时从User节点出发的Path跳转到不相关的POI上，Context节点最好能够体现用户兴趣（&lt;/span&gt;&lt;span&gt;品类信息其实就是一种&lt;/span&gt;&lt;span&gt;）。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Step3. 对于边权有所限制，能够避免Context类型节点成为超级节点，POI的问题也会解决。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;3.3.2 元路径采样建模&lt;/span&gt;&lt;/h4&gt;&lt;section&gt;&lt;span&gt;用户兴趣、行为相对是分散的，从User节点出发，沿着边能够跳转到不同Context上去，得到相对广泛的实例，而Metapath采样得到的实例可以视作是User决策场景表征集合，具体过程如下：&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;Step1. 以用户子图中U-C-P-C-U这样的路径为例，采样出N份实例，按用户节点扩散的第一个Context分类存储，如得到M组实例，公式如下。其中Ci是每个分组的实例数，Uuid: &amp;lt;Context1: [Metapath1, Metapath2]; Context2: [Metapath3, Metapath4]; ··· ; ContextM: [Metapath5, Metapath6]&amp;gt;。&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;&lt;section role=&quot;presentation&quot; data-formula=&quot;N = \sum_{i=1}^{M} C_{i}&amp;#10;&quot; data-formula-type=&quot;block-equation&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; focusable=&quot;false&quot; viewbox=&quot;0 -1733 4841.2 2978.9&quot; aria-hidden=&quot;true&quot;&gt;&lt;g stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; transform=&quot;matrix(1 0 0 -1 0 0)&quot;&gt;&lt;g data-mml-node=&quot;math&quot;&gt;&lt;g data-mml-node=&quot;mi&quot;&gt;&lt;path data-c=&quot;4E&quot; d=&quot;M234 637Q231 637 226 637Q201 637 196 638T191 649Q191 676 202 682Q204 683 299 683Q376 683 387 683T401 677Q612 181 616 168L670 381Q723 592 723 606Q723 633 659 637Q635 637 635 648Q635 650 637 660Q641 676 643 679T653 683Q656 683 684 682T767 680Q817 680 843 681T873 682Q888 682 888 672Q888 650 880 642Q878 637 858 637Q787 633 769 597L620 7Q618 0 599 0Q585 0 582 2Q579 5 453 305L326 604L261 344Q196 88 196 79Q201 46 268 46H278Q284 41 284 38T282 19Q278 6 272 0H259Q228 2 151 2Q123 2 100 2T63 2T46 1Q31 1 31 10Q31 14 34 26T39 40Q41 46 62 46Q130 49 150 85Q154 91 221 362L289 634Q287 635 234 637Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mo&quot; transform=&quot;translate(1165.8, 0)&quot;&gt;&lt;path data-c=&quot;3D&quot; d=&quot;M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;munderover&quot; transform=&quot;translate(2221.6, 0)&quot;&gt;&lt;g data-mml-node=&quot;mo&quot;&gt;&lt;path data-c=&quot;2211&quot; d=&quot;M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;TeXAtom&quot; transform=&quot;translate(148.2, -1087.9) scale(0.707)&quot; data-mjx-texclass=&quot;ORD&quot;&gt;&lt;g data-mml-node=&quot;mi&quot;&gt;&lt;path data-c=&quot;69&quot; d=&quot;M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mo&quot; transform=&quot;translate(345, 0)&quot;&gt;&lt;path data-c=&quot;3D&quot; d=&quot;M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mn&quot; transform=&quot;translate(1123, 0)&quot;&gt;&lt;path data-c=&quot;31&quot; d=&quot;M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z&quot;/&gt;&lt;/g&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;TeXAtom&quot; transform=&quot;translate(350.4, 1150) scale(0.707)&quot; data-mjx-texclass=&quot;ORD&quot;&gt;&lt;g data-mml-node=&quot;mi&quot;&gt;&lt;path data-c=&quot;4D&quot; d=&quot;M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z&quot;/&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;msub&quot; transform=&quot;translate(3832.2, 0)&quot;&gt;&lt;g data-mml-node=&quot;mi&quot;&gt;&lt;path data-c=&quot;43&quot; d=&quot;M50 252Q50 367 117 473T286 641T490 704Q580 704 633 653Q642 643 648 636T656 626L657 623Q660 623 684 649Q691 655 699 663T715 679T725 690L740 705H746Q760 705 760 698Q760 694 728 561Q692 422 692 421Q690 416 687 415T669 413H653Q647 419 647 422Q647 423 648 429T650 449T651 481Q651 552 619 605T510 659Q484 659 454 652T382 628T299 572T226 479Q194 422 175 346T156 222Q156 108 232 58Q280 24 350 24Q441 24 512 92T606 240Q610 253 612 255T628 257Q648 257 648 248Q648 243 647 239Q618 132 523 55T319 -22Q206 -22 128 53T50 252Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;TeXAtom&quot; transform=&quot;translate(715, -150) scale(0.707)&quot; data-mjx-texclass=&quot;ORD&quot;&gt;&lt;g data-mml-node=&quot;mi&quot;&gt;&lt;path data-c=&quot;69&quot; d=&quot;M184 600Q184 624 203 642T247 661Q265 661 277 649T290 619Q290 596 270 577T226 557Q211 557 198 567T184 600ZM21 287Q21 295 30 318T54 369T98 420T158 442Q197 442 223 419T250 357Q250 340 236 301T196 196T154 83Q149 61 149 51Q149 26 166 26Q175 26 185 29T208 43T235 78T260 137Q263 149 265 151T282 153Q302 153 302 143Q302 135 293 112T268 61T223 11T161 -11Q129 -11 102 10T74 74Q74 91 79 106T122 220Q160 321 166 341T173 380Q173 404 156 404H154Q124 404 99 371T61 287Q60 286 59 284T58 281T56 279T53 278T49 278T41 278H27Q21 284 21 287Z&quot;/&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/section&gt;&lt;/span&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;3.4 效果收益&lt;/span&gt;&lt;/h3&gt;&lt;section&gt;&lt;span&gt;子图拓展联合训练离线AUC+2千分点；特征交叉子图模块离线AUC+1千分点；场景子图交互离线AUC+2.5千分点。&lt;/span&gt;&lt;/section&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;3.4.1 高低频场景感知&lt;/span&gt;&lt;/h4&gt;&lt;section&gt;&lt;span&gt;通过图建模设计，我们的模型能够对高低频场景感知，从而提升场景下对应用户的效果。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;具体地，在外卖展示广告CTR预估业务中，分析场景化图算法在不同频次的用户表现情况：统计高频（&lt;/span&gt;&lt;span&gt;过去一个月在美团外卖点击POI次数&amp;gt;150次&lt;/span&gt;&lt;span&gt;）和低频（&lt;/span&gt;&lt;span&gt;过去一个月在外卖点击POI次数&amp;lt;15次&lt;/span&gt;&lt;span&gt;）用户，比较实验组相比对照组（&lt;/span&gt;&lt;span&gt;与未采用场景图的Base模型AB实验&lt;/span&gt;&lt;span&gt;）的线上指标（&lt;/span&gt;&lt;span&gt;点击率, CTR/商品交易额（Gross Merchandise Volume, GMV&lt;/span&gt;&lt;span&gt;）。同时，我们还按照高低频用户分别统计了三级品类的人均曝光数量，对比基线的人均曝光数量。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.29442970822281167&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsXMmG7zAdvWg5zD0CMNYsGf4dZsa4Gf3KBoBRm03vYKNOYzo7iaX7WfkpCTgwLavWNmI0y0JCMal7w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;754&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;从上表结果可以看出：&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;低频和高频用户的CTR和GMV均有提升，证明感知子图卷积能够有效捕捉高低频场景，实现场景化下用户兴趣刻画。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;低频和高频用户人均曝光品类数量均有提升，并且高频用户的人均品类增加更多，说明具备更好的兴趣挖掘探索能力，能够帮助高频场景用户跳脱已有的兴趣圈。&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;3.4.2 特定时空场景感知&lt;/span&gt;&lt;/h4&gt;&lt;section&gt;&lt;span&gt;为验证场景图模型对于不同场景的识别和刻画能力，进一步对比引入场景图联合建模对比无场景图在时间品类和空间需求下的感知变化（&lt;/span&gt;&lt;span&gt;以下多组统计结果均为多天/同时段累计结果&lt;/span&gt;&lt;span&gt;）。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;3.4.2.1 时间品类场景&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;奶茶品类是下午时段的热销品类，从曝光转化比来看在下午茶时段较高且时段效应明显，我们统计了某业务奶茶品类上多天同时段，曝光数量占该时间段总曝光数量的比例，并比较实验组相比基线的涨幅情况，从时段上看，实验组在下午茶时间段（14-16时）奶茶曝光比例上升，而晚间正餐期间曝光比例减少，说明场景图模型的品类时段感知能力得到加强并且在流量选择上趋向优质流量，模型上线后在奶茶品类上的整体后验CTR指标表现正向。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;figcaption&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.54765625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/hEx03cFgUsXMmG7zAdvWg5zD0CMNYsGfFTpF7zVGAPoFniaJWYwk04fldNtyYMK7bT8JKxS6JH4Vp8kJ36HVGtw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;figcaption&gt;&lt;span&gt;图10 奶茶品类分时段曝光涨幅对比&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;3.4.2.2 空间需求场景&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;外卖上的用户需求和行为具有明显的周期效应：即工作日和非工作日，用户的行为具备较大差异。例如，在非工作日，用户多数是在家（&lt;/span&gt;&lt;span&gt;小区&lt;/span&gt;&lt;span&gt;）而不是写字楼，会有更大的倾向在美团外卖上选购菜品、添置生活用品等（&lt;/span&gt;&lt;span&gt;转化曝光比更高&lt;/span&gt;&lt;span&gt;）。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;我们以某业务超市便利的品类曝光为例，我们统计了从周一到周日连续7天，超市便利曝光占当天的总曝光量占比，按照实验组和对照组对比曝光占比情况。从图中可以看出，实验组曝光在周一、周二减少，周末上升，说明模型捕捉到了工作日和非工作日下，超市便利的购物场景区别，模型上线后在超时便利品类的整体后验CTR指标也表现正向。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;figcaption&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.5857142857142857&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/hEx03cFgUsXMmG7zAdvWg5zD0CMNYsGfRcjtusVoLnribmE1ib0iaSrGcUs01RkTCibte7X6Nq3eG0tVyicgYIia03Wg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;840&quot;/&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;figcaption&gt;&lt;span&gt;图11 超市便利分天曝光对比&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;4. 总结和展望&lt;/span&gt;&lt;/h2&gt;&lt;section&gt;&lt;span&gt;与传统电商推荐不同，外卖推荐呈现出场景化的特点：供给受LBS强约束、用户决策链路短、易受所处环境影响，因此场景化建模是外卖推荐亟需解决的问题。图网络技术已经在学术界和工业界进行了较为深入的探索，在美团外卖场景化建模中遇到的挑战，我们也通过图技术进行了相应的优化求解，分别通过场景特征图交叉、场景序列子图扩展、元路径场景图，在交叉特征去噪、突破用户兴趣封闭圈、完整场景图刻画方面进行了探索。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;在算法落地上，考虑到线上的耗时问题，我们在Serving阶段拆分重构长期行为子图，在不改变模型结果的情况下减少了计算复杂度，满足了线上的性能要求。图技术的场景化落地虽然取得了一定的收益，但仍然存在一些问题需要解决，例如特征图交叉在算力约束下，只能满足部分特征交叉；对于场景的元路径刻画仍然依赖于先验人工定义，尚未走上“自动驾驶”之路，未来我们会持续进行探索。&lt;/span&gt;&lt;/section&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;5. 作者简介&lt;/span&gt;&lt;/h2&gt;&lt;section&gt;&lt;span&gt;任建、张伟、雨枫、黄坤、慧楠、鹏业、张波，均来自美团外卖广告技术团队。&lt;/span&gt;&lt;/section&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;6. 参考资料&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;[1] Li F, Chen Z, Wang P, et al. Graph intention network for click-through rate prediction in sponsored search[C]//Proceedings of the 42nd international ACM SIGIR conference on research and development in information retrieval. 2019: 961-964.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;[2] Han H, Zhang M, Hou M, et al. STGCN: a spatial-temporal aware graph learning method for POI recommendation[C]//2020 IEEE International Conference on Data Mining （ICDM）. IEEE, 2020: 1052-1057.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;[3] Yang T, Zhang L, Shi C, et al. Gated Hypergraph Neural Network for Scene-Aware Recommendation[C]//International Conference on Database Systems for Advanced Applications. Springer, Cham, 2022: 199-215.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;[4] Wu L, Li Z, Zhao H, et al. Learning the implicit semantic representation on graph-structured data[C]//International Conference on Database Systems for Advanced Applications. Springer, Cham, 2021: 3-19.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;[5] Xie Y, Wang Z, Li Y, et al. Fives: Feature interaction via edge search for large-scale tabular data[C]//Proceedings of the 27th ACM SIGKDD Conference on Knowledge Discovery &amp;amp; Data Mining. 2021: 3795-3805.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;[6] Chang J, Gao C, Zheng Y, et al. Sequential recommendation with graph neural networks[C]//Proceedings of the 44th International ACM SIGIR Conference on Research and Development in Information Retrieval. 2021: 378-387.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;[7] Shao Z, Xu Y, Wei W, et al. Heterogeneous Graph Neural Network with Multi-view Representation Learning[J]. arXiv preprint arXiv:2108.13650, 2021.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;[8] Li Z, Cui Z, Wu S, et al. Fi-gnn: Modeling feature interactions via graph neural networks for ctr prediction[C]//Proceedings of the 28th ACM International Conference on Information and Knowledge Management. 2019: 539-548.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;[9] Fu X, Zhang J, Meng Z, et al. Magnn: Metapath aggregated graph neural network for heterogeneous graph embedding[C]//Proceedings of The Web Conference 2020. 2020: 2331-2341.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;[10] Wang Y, Xu H, Yu Y, et al. Ensemble Multi-Relational Graph Neural Networks[J]. arXiv preprint arXiv:2205.12076, 2022.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;----------  END  ----------&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;招聘信息&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section data-source=&quot;bj.96weixin.com&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;美团外卖展示广告算法团队长期招聘算法高级工程师/技术专家，负责广告多个方向（&lt;/span&gt;&lt;span&gt;召回/预估/创意/机制/创新&lt;/span&gt;&lt;span&gt;）的算法研发工作，坐标北京。欢迎感兴趣的同学加入我们。可投简历至：&lt;/span&gt;&lt;span&gt;huangkun13@meituan.com&lt;/span&gt;&lt;span&gt;（&lt;/span&gt;&lt;span&gt;邮件主题请注明 — 美团外卖展示广告算法组&lt;/span&gt;&lt;span&gt;）。&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;也许你还想看&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;  | &lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651768703&amp;amp;idx=1&amp;amp;sn=07892efc82a88db2320588128ef7557a&amp;amp;chksm=bd121e328a6597244f0956d572b165c0f995930b5db40ec3b28e4fed1d51d05409cfacb3e157&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;美团图神经网络训练框架的实践和探索&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;/&gt;&lt;/strong&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651768703&amp;amp;idx=1&amp;amp;sn=07892efc82a88db2320588128ef7557a&amp;amp;chksm=bd121e328a6597244f0956d572b165c0f995930b5db40ec3b28e4fed1d51d05409cfacb3e157&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;美团图神经网络训练框架的实践和探索&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;美团图神经网络训练框架的实践和探索&lt;/a&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;  | &lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651761476&amp;amp;idx=1&amp;amp;sn=3fb9acf85ba97961f337b9af6fbf3b0b&amp;amp;chksm=bd1272098a65fb1f2bf5ee9c412343b0c9720eebdf4ba88d807a9a64ecdb69ae5a2e42a5c421&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;美团图数据库平台建设及业务实践&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;/&gt;&lt;/strong&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651761476&amp;amp;idx=1&amp;amp;sn=3fb9acf85ba97961f337b9af6fbf3b0b&amp;amp;chksm=bd1272098a65fb1f2bf5ee9c412343b0c9720eebdf4ba88d807a9a64ecdb69ae5a2e42a5c421&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;美团图数据库平台建设及业务实践&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;美团图数据库平台建设及业务实践&lt;/a&gt;&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;  |&lt;/strong&gt; &lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651753013&amp;amp;idx=1&amp;amp;sn=695f259b1235fcc9e878196377319532&amp;amp;chksm=bd1253788a65da6e3af981aa287a5f47178bfcef480d50b2d44fe5c20cea9842d08ed86581e4&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;KDD Cup 2020 自动图学习比赛冠军技术方案及在美团广告的实践&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;KDD Cup 2020 自动图学习比赛冠军技术方案及在美团广告的实践&lt;/a&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;活动推荐&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;🎈&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;清华美团联合研究院图神经网络主题学术沙龙来了！&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;9月14日10:00-11:00，特邀北京邮电大学石川教授在线分享《开放环境下图神经网络初探》，分享将介绍异质图、动态图、稀疏图、对抗图上图神经网络模型的设计。期待感兴趣的小伙伴们共同交流学习。扫描下方二维码添加小助手微信，回复关键词「0914」进活动微信群交流，开播会有提醒噢~&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;541&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;220&quot; data-ratio=&quot;0.3864696734059098&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsVKMiaNW0Hib1NvmNYfQtaJb2XILTcEzT8xictWuAEW6QY6Ixf6A8XrQrthicJCtkWgzuju3UeWPMCdUg/640?wx_fmt=png&quot; data-w=&quot;2572&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;阅读更多&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765958&amp;amp;idx=1&amp;amp;sn=8201546812e5a95a2bee9dffc6d12f00&amp;amp;chksm=bd12658b8a65ec9de2f5be1e96796dfb3c8f1a374d4b7bd91266072f557caf8118d4ddb72b07&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;前‍端&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;前端&lt;/a&gt;&lt;span&gt;&lt;strong&gt; |&lt;/strong&gt;&lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://t.1yb.co/jo7v&quot; textvalue=&quot; 安全&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;strong&gt; &lt;/strong&gt; &lt;/a&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765981&amp;amp;idx=1&amp;amp;sn=c2dd86f15dee2cbbc89e27677d985060&amp;amp;chksm=bd1265908a65ec86d4d08f7600d1518b61c90f6453074f9b308c96861c045712280a73751c73&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;算‍法&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;算法&lt;/a&gt;&lt;span&gt;&lt;strong&gt; |&lt;/strong&gt; &lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765982&amp;amp;idx=1&amp;amp;sn=231b41f653ac7959f3e3b8213dcec2b0&amp;amp;chksm=bd1265938a65ec85630c546169444d56377bc2f11401d251da7ca50e5d07e353aa01580c7216&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;后‍端&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;后端&lt;/a&gt;&lt;span&gt;&lt;strong&gt; | &lt;/strong&gt;&lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765964&amp;amp;idx=1&amp;amp;sn=ab6d8db147234fe57f27dd46eec40fef&amp;amp;chksm=bd1265818a65ec9749246dd1a2eb3bf7798772cc4d5b4283b15eae2f80bc6db63a1471a9e61e&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;数‍据&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;数据&lt;/a&gt;&lt;/section&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765965&amp;amp;idx=1&amp;amp;sn=37e0c56c8b080146ce5249243bfd84d8&amp;amp;chksm=bd1265808a65ec96d3a2b2c87c6e27c910d49cb6b149970fb2db8bf88045a0a85fed2e6a0b84&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;安‍全&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;安全&lt;/a&gt;&lt;span&gt;&lt;strong&gt; | &lt;/strong&gt;&lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765972&amp;amp;idx=1&amp;amp;sn=afe02ec92762c1ce18740d03324c4ac3&amp;amp;chksm=bd1265998a65ec8f10d5f58d0f3681ddfc5325137218e568e1cda3a50e427749edb5c6a7dcf5&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;And‍roid&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;Android&lt;/a&gt;&lt;span&gt;&lt;strong&gt; |&lt;/strong&gt; &lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765973&amp;amp;idx=1&amp;amp;sn=32a23bf1d278dda0398f993ab60a697e&amp;amp;chksm=bd1265988a65ec8e630ef4d24b4946ab6bd7e66702c1d712481cf3c471468a059c470a14c30d&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;iO‍S&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;iOS&lt;/a&gt;&lt;span&gt; &lt;strong&gt; |&lt;/strong&gt; &lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765963&amp;amp;idx=1&amp;amp;sn=a3de9ef267d07d94118c1611776a4b28&amp;amp;chksm=bd1265868a65ec906592d25ad65f2a8516338d07ec3217059e6975fc131fc0107d66a8cd2612&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;运‍维&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;运维&lt;/a&gt;&lt;span&gt;&lt;strong&gt; | &lt;/strong&gt;&lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765974&amp;amp;idx=1&amp;amp;sn=763c1e37d04acffd0142a2852ecfb000&amp;amp;chksm=bd12659b8a65ec8dfcfeb2028ef287fae7c38f134a665375ba420556ce5d2e4cf398147bd12e&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;测‍试&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;测试&lt;/span&gt;&lt;/a&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mp-common-profile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MjM5NjQ5MTI5OA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsVGibnsaEib3aNlqF0tOrA2RGEmNSbia2nnohE4Tpf95UyTiaSjDVbHRfY8WNBeTuLLTaVdSckkNyEx1Q/0?wx_fmt=png&quot; data-nickname=&quot;美团技术团队&quot; data-alias=&quot;meituantech&quot; data-signature=&quot;10000+工程师，如何支撑中国领先的生活服务电子商务平台？数亿消费者、数百万商户、2000多个行业、几千亿交易额背后是哪些技术在支撑？这里是美团、大众点评、美团外卖、美团配送、美团优选等技术团队的对外窗口。&quot; data-from=&quot;0&quot; data-is_biz_ban=&quot;0&quot;/&gt;&lt;/section&gt;&lt;/div&gt;

          

          
          &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>