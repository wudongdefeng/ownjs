<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>1052836b6515a19eb721922f7b0d3ec6</guid>
<title>优质网站同好者周刊（第 085 期） | 倾城博客</title>
<link>https://toutiao.io/k/juv1ebb</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;content&quot;&gt;&lt;p&gt;&lt;a href=&quot;https://nicelinks.site/?utm_source=weekly&quot;&gt;倾城之链&lt;/a&gt;作为一个开放平台，旨在云集全球&lt;strong&gt;优秀网站&lt;/strong&gt;，探索互联网中更广阔的世界。此周刊，将汇聚过去一周&lt;a href=&quot;https://nicelinks.site/?utm_source=weekly&quot;&gt;倾城&lt;/a&gt;所收录的内容，以飨同好；欢迎推荐或自荐（仅限有独立域名的网站，可以是二级域名）。您如果要了解收录要求，请参见&lt;a href=&quot;https://nicelinks.site/about?utm_source=weekly&quot;&gt;关于倾城&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;&lt;strong&gt;备注&lt;/strong&gt;：本周刊&lt;strong&gt;每周五&lt;/strong&gt;生成，首发于个人微信公众号&lt;a href=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI5MDIwMzM2Mg==&amp;amp;action=getalbum&amp;amp;album_id=1530765143352082433&amp;amp;scene=173&amp;amp;from_msgid=2650641087&amp;amp;from_itemidx=1&amp;amp;count=3#wechat_redirect&quot;&gt;晚晴幽草轩&lt;/a&gt;、博客&lt;a href=&quot;https://www.jeffjade.com&quot;&gt;晚晴幽草轩&lt;/a&gt;，以及&lt;a href=&quot;https://forum.lovejade.cn/&quot;&gt;悠然宜想亭&lt;/a&gt;社区；此一键生成脚本基于 &lt;a href=&quot;https://nicelinks.site/post/602d30aad099ff5688618591&quot;&gt;Deno&lt;/a&gt; 编写，并在 Github 开源：&lt;a href=&quot;https://github.com/nicejade/nicelinks-weekly&quot;&gt;nicejade/nicelinks-weekly&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;&lt;strong&gt;标签&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/tags/%E5%88%86%E4%BA%AB&quot;&gt;&lt;code&gt;分享&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E5%88%9B%E4%B8%9A%E8%80%85&quot;&gt;&lt;code&gt;创业者&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E5%AD%A6%E4%B9%A0&quot;&gt;&lt;code&gt;学习&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Starter Story interviews successful entrepreneurs and shares the stories behind their businesses. In each interview, we ask how they got started, how they grew, and how they run their business today.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/www.starterstory.com.png?x-oss-process=style/png2jpg&quot; alt=&quot;倾城之链 - Starter Story: Learn How People Are Starting Successful Businesses&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;推荐语&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/redirect?url=https://www.starterstory.com/&quot;&gt;Starter Story&lt;/a&gt;，是一个分享创业故事的网站，以便了解人们&lt;strong&gt;如何开始成功的企业&lt;/strong&gt;（Pat Walls 于 2017 年 11 月创立）；该团队会采访成功的企业家，并分享了他们企业背后的故事。在每次采访中，都会问他们是&lt;strong&gt;如何开始的&lt;/strong&gt;，&lt;strong&gt;如何成长的&lt;/strong&gt;，以及他们今天是如何经营他们的企业的。这些故事鼓舞人心，还为创业提供了具体的&lt;strong&gt;建议&lt;/strong&gt;和&lt;strong&gt;见解&lt;/strong&gt;。通过分享这些故事，Starter Story 团队希望帮助其他人入门（截止 2022 年 9 月，Starter Story 整理了很多创业新项目，有 3800+ 个案例研究，涉及为数千名建立业务的创始人）。如今，比以往任何时候，都更容易开展业务、或副业并在网上赚钱（似乎）。如果您对该内容感兴趣，可选择订阅（邮箱），以在您的收件箱中获取我们的新内容。您也有创业旅程，当然也可以考虑在 &lt;a href=&quot;https://nicelinks.site/redirect?url=https://www.starterstory.com/&quot;&gt;Starter Story&lt;/a&gt; 分享，以便更多朋友了解。&lt;/p&gt;&lt;p&gt;── 出自&lt;a href=&quot;https://nicelinks.site/post/633582e73423870b914df97c&quot;&gt;倾城之链 - Starter Story: Learn How People Are Starting Successful Businesses&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;标签&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/tags/%E5%A4%B4%E5%83%8F&quot;&gt;&lt;code&gt;头像&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/3D&quot;&gt;&lt;code&gt;3D&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E5%8D%A1%E9%80%9A&quot;&gt;&lt;code&gt;卡通&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Peeps Avatar Builder by UI8.net&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/peeps.ui8.net.png?x-oss-process=style/png2jpg&quot; alt=&quot;倾城之链 - Peeps Avatar Builder by UI8.net&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;推荐语&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/redirect?url=https://peeps.ui8.net/&quot;&gt;Peeps&lt;/a&gt; 是 UI8 团队为您带来的交互式 &lt;a href=&quot;https://nicelinks.site/tags/&quot;&gt;3D&lt;/a&gt; 虚拟化身构建器（卡通化）。此构建器的初始版本， 100% 免费用于个人和商业项目。你可以在社交档案、社交媒体帖子、设计项目或任何你可以使用友好面孔的地方使用 Peeps。你唯一不能做的事就是转售或再分配它们。&lt;/p&gt;&lt;p&gt;首先，通过选择不同的 Expression（表情）、Head（头）、Eyebrows（眉毛）、Sunglasses（太阳镜）、Clothes（衣服）、Necklaces（项链）、Earrings（耳环）、Tattoo（纹身）、等定制您的头像。此外还设有 Randomize（随机）选项；Peeps 为您提供超过 286654464 种可能性。一旦您对创建满意，单击下载按钮即可获得 png 格式文件。Peeps 与 &lt;a href=&quot;https://nicelinks.site/post/631cb6d692583d0ec9c367bf&quot;&gt;Ava Maker&lt;/a&gt; 功能类似，只不过增加 3D 效果，更具生动性；如果您有创建 3D 卡通虚拟头像的需求，Peeps 是「倾城君」强烈推荐的首选工具。&lt;/p&gt;&lt;p&gt;── 出自&lt;a href=&quot;https://nicelinks.site/post/633531873423870b914df533&quot;&gt;倾城之链 - Peeps Avatar Builder by UI8.net&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;标签&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/tags/%E8%BF%9C%E7%A8%8B&quot;&gt;&lt;code&gt;远程&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E5%B7%A5%E4%BD%9C&quot;&gt;&lt;code&gt;工作&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E7%A4%BE%E5%8C%BA&quot;&gt;&lt;code&gt;社区&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;RemotelyHQ.com - Immersive &amp;amp; Fun Virtual Activities for Remote Workers. Build a Strong Foundation through Exploration, Play &amp;amp; Collaboration.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/remotelyhq.com.png?x-oss-process=style/png2jpg&quot; alt=&quot;倾城之链 - Virtual Team Building Activities | Bring Together Your Virtual Team&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;推荐语&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/redirect?url=https://remotelyhq.com/&quot;&gt;RemotelyHQ.com&lt;/a&gt;，一个基于 Avatar（头像） 的社交中心，提供会议、社交游戏和活动（免费可用）；为&lt;strong&gt;远程工作者&lt;/strong&gt;提供沉浸式和有趣的虚拟活动；详细了解您的同事，让每个人都感觉自己是团队的一员。提供存在感和数字饮水机来连接您的团队。通过探索、游戏和协作，以有趣方式，来建立更牢固的社会关系。RemotelyHQ 活动旨在提高团队绩效、生产力和“感觉良好的氛围”。其官原话描述为：Remotely 存在是为了帮助分布式团队成员更多地了解彼此，并让他们感觉自己是一个有凝聚力的团队。&lt;/p&gt;&lt;p&gt;&lt;strong&gt;为什么要 Remotely&lt;/strong&gt; ？官方给出以下几点理由：&lt;/p&gt;&lt;h3 id=&quot;简单的-2-分钟设置&quot;&gt;&lt;a href=&quot;#%E7%AE%80%E5%8D%95%E7%9A%84-2-%E5%88%86%E9%92%9F%E8%AE%BE%E7%BD%AE&quot; aria-label=&quot;简单的 2 分钟设置 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;简单的 2 分钟设置&lt;/h3&gt;&lt;p&gt;您无需花费数小时计划社交活动。只需向您的团队发送一个虚拟主题公园的链接，选择您的活动，然后玩得开心。&lt;/p&gt;&lt;h3 id=&quot;社交且有意义&quot;&gt;&lt;a href=&quot;#%E7%A4%BE%E4%BA%A4%E4%B8%94%E6%9C%89%E6%84%8F%E4%B9%89&quot; aria-label=&quot;社交且有意义 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;社交且有意义&lt;/h3&gt;&lt;p&gt;琐事测验没有任何问题；但 Remotely 专为虚拟团队设计，可在休闲但有意义的环境中相互联系。这些社交活动让每个人都发挥出最好的一面。&lt;/p&gt;&lt;h3 id=&quot;开心的小瞬间&quot;&gt;&lt;a href=&quot;#%E5%BC%80%E5%BF%83%E7%9A%84%E5%B0%8F%E7%9E%AC%E9%97%B4&quot; aria-label=&quot;开心的小瞬间 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;开心的小瞬间&lt;/h3&gt;&lt;p&gt;告别模糊的背景和变焦疲劳。相反，用你独特的头像为活动盛装打扮。稍后，通过整个团队的快照捕捉并分享事件的记忆。&lt;/p&gt;&lt;h3 id=&quot;自然互动&quot;&gt;&lt;a href=&quot;#%E8%87%AA%E7%84%B6%E4%BA%92%E5%8A%A8&quot; aria-label=&quot;自然互动 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;自然互动&lt;/h3&gt;&lt;p&gt;空间声音和近距离音频模拟了面对面会议的体验。你甚至可以跳来跳去互相打拳。&lt;/p&gt;&lt;p&gt;员工报告说，有意义的团队活动，可能会让他们在工作中保持更长时间。强烈的社区意识，可以培养忠诚度和更高的工作满意度。感觉有社会联系的员工不太可能经历倦怠（似乎如此）。Remotely 官方网站讲到：一起玩游戏 30 分钟可以提高团队绩效。它甚至胜过传统的团队建设活动！（目前鲜有这方面经历，不好评判）。&lt;/p&gt;&lt;p&gt;值得一提的是，Remotely 在 &lt;a href=&quot;https://nicelinks.site/post/5f40d0bf15435e0906a0a26f&quot;&gt;Product Hunt&lt;/a&gt; 已拥有 1200+ 点赞（居当天产品第二名），可见网友对它的喜爱。值此非常时期，内有新能源人按时充电，外有元宇宙、Web3 如火如荼（含 VR、AR、XR），更有灵活就业、远程工作“蓬勃发展”，各类因素相互促进，在未来类似虚拟应用，似乎颇有大行其道之势，感兴趣朋友/团队不妨尝试体验下。&lt;/p&gt;&lt;p&gt;── 出自&lt;a href=&quot;https://nicelinks.site/post/6334464a3423870b914dedb0&quot;&gt;倾城之链 - Virtual Team Building Activities | Bring Together Your Virtual Team&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;标签&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/tags/%E8%A7%86%E9%A2%91&quot;&gt;&lt;code&gt;视频&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E5%AD%97%E5%B9%95&quot;&gt;&lt;code&gt;字幕&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E5%85%8D%E8%B4%B9&quot;&gt;&lt;code&gt;免费&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;关键字&lt;/strong&gt;：字幕说, 自媒体语音合成, 字幕生成工具, 带字幕的语音合成工具, 在线语音合成, 在线配音, 音文对齐, 免费在线配音, 免费生成字幕, 免费语音合成, 视频合成, 自动生成视频&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;字幕说是自媒体人都在用的在线语音合成、字幕及视频生成工具，制作视频无需出镜，免费在线配音且提供同步字幕。免费获得如同真人一般的配音，语音及字幕视频在线合成。适合自媒体人快速试错，快速试验自己的想法。逼真的语音合成与匹配的字幕，大大缩短了视频制作的时间。&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/subspeak.top.png?x-oss-process=style/png2jpg&quot; alt=&quot;倾城之链 - 字幕说 | 免费在线文字转语音|视频合成|音文对齐工具&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;推荐语&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/redirect?url=https://subspeak.top/&quot;&gt;字幕说&lt;/a&gt; 是一款在线语音合成、字幕及视频生成工具；支持免费在线合成如同真人一般的配音，语音及字幕视频；自媒体人还可免费在线配音获取同步字幕，制作视频无需出镜。强大的功能，适合自媒体人快速试错，快速试验自己的想法。逼真的语音合成与匹配的字幕，大大缩短了视频制作的时间。&lt;/p&gt;&lt;h3 id=&quot;语音合成&quot;&gt;&lt;a href=&quot;#%E8%AF%AD%E9%9F%B3%E5%90%88%E6%88%90&quot; aria-label=&quot;语音合成 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;语音合成&lt;/h3&gt;&lt;p&gt;只需要输入文案，即可轻松快速制作多发言人参与的音频及同步字幕文件。支持多音字、多发言人、繁简转换、字幕翻译等功能。全部用户千字免费使用。&lt;/p&gt;&lt;h3 id=&quot;视频合成&quot;&gt;&lt;a href=&quot;#%E8%A7%86%E9%A2%91%E5%90%88%E6%88%90&quot; aria-label=&quot;视频合成 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;视频合成&lt;/h3&gt;&lt;p&gt;与字幕说语音合成互相配合，通过语音任务构建视频。简单轻松添加图片、视频到字幕对应位置，轻松获得带有字幕的视频生胚。&lt;/p&gt;&lt;h3 id=&quot;音文对齐&quot;&gt;&lt;a href=&quot;#%E9%9F%B3%E6%96%87%E5%AF%B9%E9%BD%90&quot; aria-label=&quot;音文对齐 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;音文对齐&lt;/h3&gt;&lt;p&gt;将您的文案与录制的音频上传到字幕说，免费自动生成带有时间轴匹配的字幕文件。适合影视解说、科普、新闻、教程等提前备稿的媒体工作者，免去语音识别造成的错别字修改烦恼。&lt;/p&gt;&lt;p&gt;字幕说不仅仅专注于语音及字幕合成。在这里，你可以使用&lt;code&gt;音文对齐&lt;/code&gt;、在线视频编辑、在线语音修复等强大功能，提高工作效率。如果您感兴趣，可以参见字幕说&lt;a href=&quot;https://nicelinks.site/redirect?url=https://subspeak.top/v2/submit/index#tools&quot;&gt;全部功能&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;── 出自&lt;a href=&quot;https://nicelinks.site/post/63333118a4b42b03c5d6d92a&quot;&gt;倾城之链 - 字幕说 | 免费在线文字转语音|视频合成|音文对齐工具&lt;/a&gt;&lt;/p&gt;&lt;p&gt;对倾城之链感兴趣的朋友，可通过 Web，小程序，快应用等渠道进行访问(后续将支持更多，如 VsCode 插件，Chrome 扩展等)。您有任何问题，欢迎随时向我们反馈（您可以通过官网反馈渠道，或添加如下客服微信），🤲 。&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;https://image.nicelinks.site/%E5%80%BE%E5%9F%8E%E4%B9%8B%E9%93%BE-%E5%BE%AE%E4%BF%A1-mini.jpeg&quot; alt=&quot;倾城之链 - 客服微信&quot;/&gt;&lt;/p&gt;&lt;h2 id=&quot;本期文末寄语&quot;&gt;&lt;a href=&quot;#%E6%9C%AC%E6%9C%9F%E6%96%87%E6%9C%AB%E5%AF%84%E8%AF%AD&quot; aria-label=&quot;本期文末寄语 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;本期文末寄语&lt;/h2&gt;&lt;p&gt;如果说，我今天获得的伟大事业并不是上帝恩赐的，那么，我可以将我的成功归功于三大力量的扶持：&lt;strong&gt;按照规律和原则办事&lt;/strong&gt;，可以使企业获得永久的生命；&lt;strong&gt;残酷而真实的竞争&lt;/strong&gt;，可以使自己在竞争中不断完善自身；&lt;strong&gt;在合作中实现获利和共赢&lt;/strong&gt;。── 《洛克菲勒写给儿子的 38 封信 · 其十四》&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://nicelinks.site/?utm_source=weekly&quot;&gt;倾城之链&lt;/a&gt;作为一个开放平台，旨在云集全球&lt;strong&gt;优秀网站&lt;/strong&gt;，探索互联网中更广阔的世界；在这里，你可以轻松发现、学习、分享更多有用或有趣的事物。&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://image.nicelinks.site/nicelinks-miniprogram-code.jpeg?imageView2/1/w/250/h/250/interlace/1/ignore-error/1&quot; alt=&quot;小程序码 - 倾城之链&quot;/&gt;&lt;/p&gt;&lt;h2 id=&quot;您可能感兴趣的文章&quot;&gt;&lt;a href=&quot;#%E6%82%A8%E5%8F%AF%E8%83%BD%E6%84%9F%E5%85%B4%E8%B6%A3%E7%9A%84%E6%96%87%E7%AB%A0&quot; aria-label=&quot;您可能感兴趣的文章 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;您可能感兴趣的文章&lt;/h2&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>83d9df22693db41ad9fad22130b99595</guid>
<title>独立开发变现周刊（第74期）：我的业余项目在3个月内月收入2500美元</title>
<link>https://toutiao.io/k/psiaoc7</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;markdown-body-box nuxt-content&quot;&gt;&lt;h1 id=&quot;独立开发变现周刊第74期我的业余项目在3个月内月收入2500美元&quot;&gt;&lt;a href=&quot;#%E7%8B%AC%E7%AB%8B%E5%BC%80%E5%8F%91%E5%8F%98%E7%8E%B0%E5%91%A8%E5%88%8A%E7%AC%AC74%E6%9C%9F%E6%88%91%E7%9A%84%E4%B8%9A%E4%BD%99%E9%A1%B9%E7%9B%AE%E5%9C%A83%E4%B8%AA%E6%9C%88%E5%86%85%E6%9C%88%E6%94%B6%E5%85%A52500%E7%BE%8E%E5%85%83&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;span class=&quot;icon icon-link&quot;/&gt;&lt;/a&gt;独立开发变现周刊（第74期）：我的业余项目在3个月内月收入2500美元&lt;/h1&gt;
&lt;p&gt;分享独立开发、产品变现相关内容，每周五发布。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;目录&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;1、dub.sh: 一个开源短链接服务&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;2、Cal.com: 为每个人安排日程的开源项目&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;3、1024code: 对编程初学者友好、即开即用的在线工具&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;4、我的业余项目在3个月内就达到了月收入2500美元&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;1dubsh-一个开源短链接服务&quot;&gt;&lt;a href=&quot;#1dubsh-%E4%B8%80%E4%B8%AA%E5%BC%80%E6%BA%90%E7%9F%AD%E9%93%BE%E6%8E%A5%E6%9C%8D%E5%8A%A1&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;span class=&quot;icon icon-link&quot;/&gt;&lt;/a&gt;1、dub.sh: 一个开源短链接服务&lt;/h2&gt;
&lt;p&gt;Dub是一个内置分析+免费自定义域的开源链接缩短器。内置Vercel边缘函数和Upstash Redis。
你可以方便的部署在自己服务器上。Bitly的替代者。&lt;/p&gt;
&lt;p&gt;以下是Dub提供的一些开箱即用的功能:&lt;/p&gt;
&lt;p&gt;1、内置的分析
Dub为您的链接提供了一个强大的分析仪表板，包括地理位置、设备和浏览器信息。&lt;/p&gt;
&lt;p&gt;2、自定义的域
你可以很容易地在Dub上配置自定义域-只需要添加一个A/CNAME记录到你的DNS提供程序，你就可以开始了。这是建立在Vercel Domains API之上的。&lt;/p&gt;
&lt;p&gt;技术栈：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Next.js – 框架&lt;/li&gt;
&lt;li&gt;Typescript – 语言&lt;/li&gt;
&lt;li&gt;Tailwind – CSS&lt;/li&gt;
&lt;li&gt;Upstash – 数据库&lt;/li&gt;
&lt;li&gt;NextAuth.js – 认证&lt;/li&gt;
&lt;li&gt;Vercel – 部署服务&lt;/li&gt;
&lt;li&gt;Stripe – 支付&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt=&quot;&quot; src=&quot;https://tva1.sinaimg.cn/large/e6c9d24ely1h6npa20vljj21po0u0776.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/steven-tey/dub&quot; rel=&quot;nofollow noopener noreferrer&quot; target=&quot;_blank&quot;&gt;dub.sh的开源代码库地址&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;开源代码，Github上有13K的Star，Calendly替代方案。你负责自己的数据、工作流程和外观。&lt;/p&gt;
&lt;p&gt;Calendly和其他调度工具非常棒。它大大简化了我们的生活。我们用它来参加商务会议、研讨会、瑜伽课，甚至和家人通电话。然而，大多数工具在控制和定制方面都非常有限。&lt;/p&gt;
&lt;p&gt;这就是Cal.com的用武之地。白标签的设计。api驱动的，可以部署在您自己的服务器上。完全由你控制的事件和数据。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;&quot; src=&quot;https://tva1.sinaimg.cn/large/e6c9d24ely1h6npaog50rj20ws0koq5j.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;&quot; src=&quot;https://tva1.sinaimg.cn/large/e6c9d24ely1h6npao4jn8j20vs0e10to.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/calcom/cal.com&quot; rel=&quot;nofollow noopener noreferrer&quot; target=&quot;_blank&quot;&gt;cal.com开源代码库地址&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;31024code-对编程初学者友好即开即用的在线工具&quot;&gt;&lt;a href=&quot;#31024code-%E5%AF%B9%E7%BC%96%E7%A8%8B%E5%88%9D%E5%AD%A6%E8%80%85%E5%8F%8B%E5%A5%BD%E5%8D%B3%E5%BC%80%E5%8D%B3%E7%94%A8%E7%9A%84%E5%9C%A8%E7%BA%BF%E5%B7%A5%E5%85%B7&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;span class=&quot;icon icon-link&quot;/&gt;&lt;/a&gt;3、1024code: 对编程初学者友好、即开即用的在线工具&lt;/h2&gt;
&lt;p&gt;1024Code 是一个免费的、协作式的、基于浏览器的 IDE 环境，支持 10 多种编程语言，支持 Spring 、Vue 、React 等框架，还支持很多图形库，是刚入门的程序员学习编程的工具。目前正在内测。&lt;/p&gt;
&lt;p&gt;在线多人协作：类似腾讯文档等在线协作文档的协作功能体验，1024Code 支持用户邀请多人同时加入一个代码空间协作编程。&lt;/p&gt;
&lt;p&gt;在线分享：分享代码空间链接，打开可查看项目文件并运行的“副本”代码空间&lt;/p&gt;
&lt;p&gt;Git 版本管理：Git Commit，管理你的代码版本。&lt;/p&gt;
&lt;p&gt;数据库：免费的云端数据库，代码空间的最佳搭档。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;&quot; src=&quot;https://tva1.sinaimg.cn/large/e6c9d24ely1h6npag4esyj21ir0u0tdr.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://1024code.com/&quot; rel=&quot;nofollow noopener noreferrer&quot; target=&quot;_blank&quot;&gt;1024code官网&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;4我的业余项目在3个月内就达到了月收入2500美元&quot;&gt;&lt;a href=&quot;#4%E6%88%91%E7%9A%84%E4%B8%9A%E4%BD%99%E9%A1%B9%E7%9B%AE%E5%9C%A83%E4%B8%AA%E6%9C%88%E5%86%85%E5%B0%B1%E8%BE%BE%E5%88%B0%E4%BA%86%E6%9C%88%E6%94%B6%E5%85%A52500%E7%BE%8E%E5%85%83&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;span class=&quot;icon icon-link&quot;/&gt;&lt;/a&gt;4、我的业余项目在3个月内就达到了月收入2500美元&lt;/h2&gt;
&lt;p&gt;Hi，我是 Valentin Wallyn，我是 Findymail 的创始人。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;&quot; src=&quot;https://tva1.sinaimg.cn/large/e6c9d24ely1h6npafuahqj20nm0ke408.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Findymail是一个高质量的电子邮件查找工具，它有一个自动化流，旨在帮助B2B销售人员更快地建立客户列表。&lt;/p&gt;
&lt;p&gt;从2022年5月开始，到现在9月份，月收入已经达到2500美元。&lt;/p&gt;
&lt;h3 id=&quot;你是怎么想到这个想法的&quot;&gt;&lt;a href=&quot;#%E4%BD%A0%E6%98%AF%E6%80%8E%E4%B9%88%E6%83%B3%E5%88%B0%E8%BF%99%E4%B8%AA%E6%83%B3%E6%B3%95%E7%9A%84&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;span class=&quot;icon icon-link&quot;/&gt;&lt;/a&gt;你是怎么想到这个想法的?&lt;/h3&gt;
&lt;p&gt;我一直都是一个创作者。16岁时，我在网上出售电子游戏中的数字货币，换取现金，赚了第一美元。我是通过使用bot软件自动完成游戏内的任务而创造这些游戏内货币。后来，机器人关闭了，但我开始学习编程，所以我开发了我的机器人软件，并将其提供给机器人社区。&lt;/p&gt;
&lt;p&gt;这是我的第一次产品体验，该软件是免费的，我通过捐赠(和使用该软件)赚钱。后面我发布了付费订阅的软件付费版本。在这个阶段，我在销售桌面端软件，因为SaaS不像现在这么流行。&lt;/p&gt;
&lt;p&gt;在享受大学时光的同时转向了其他事业。我在MMO(在线赚钱)领域尝试了许多内容，有些内容确实赚到了钱，而有些则一无所获。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;&quot; src=&quot;https://tva1.sinaimg.cn/large/e6c9d24ely1h6npafgmf4j21fw0suq5l.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;其中一些项目包括建立网站，因为我想为网站增加流量，所以我接触了SEO，了解了它是如何工作的。但我仍然是一个创作者，我想做软件，而不仅仅是网站。&lt;/p&gt;
&lt;p&gt;所以我在2020年开始了我在SEO领域的第一个SaaS, SEOwl，一个SEO监控工具。这是我将我喜欢的细分市场(SEO)与我的编程技能和兴趣结合在一起的方式，但我很难获得坚实的牵引，MRR增长缓慢。&lt;/p&gt;
&lt;p&gt;虽然还在运行，但这次冒险让我在2022年初开始了其他的商业想法。大约在22年2月或3月，我创建了Scrapybird(一个推特邮件清理工具)和Prospecdit(一个Reddit扩展自动化工具)。&lt;/p&gt;
&lt;p&gt;在这两个产品中，Scrapybird 迅速获得了关注，但我很快意识到这是一款“小众”产品。但我看到了一个不错的电子邮件查找器的机会，并开始做这方面的尝试。这就是Findymail诞生的原因，也是我目前关注的焦点。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;&quot; src=&quot;https://tva1.sinaimg.cn/large/e6c9d24ely1h6npaezw1jj20nm0adglq.jpg&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;介绍下你的产品的设计原型和制造过程&quot;&gt;&lt;a href=&quot;#%E4%BB%8B%E7%BB%8D%E4%B8%8B%E4%BD%A0%E7%9A%84%E4%BA%A7%E5%93%81%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%9E%8B%E5%92%8C%E5%88%B6%E9%80%A0%E8%BF%87%E7%A8%8B&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;span class=&quot;icon icon-link&quot;/&gt;&lt;/a&gt;介绍下你的产品的设计、原型和制造过程&lt;/h3&gt;
&lt;p&gt;产品的第一个版本是最基本的一个电子邮件查找器，可以获得两个文本框输入某人的名字和一个按钮获取该人的电子邮件地址。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;&quot; src=&quot;https://tva1.sinaimg.cn/large/e6c9d24ely1h6npab09ebj21sg0j2jtp.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;我很快便创造出了MVP，因为我能够重复使用自己在 Scrapybird 和 Prospecdit 中所创造的内容。像登录/注册/支付等内容都能够快速完成，这让我能够将少量的开发时间集中在核心功能上。&lt;/p&gt;
&lt;p&gt;然后我慢慢添加了自动化、文件丰富等功能，但其核心价值是第一个电子邮件查找/验证算法，它提供了高质量的数据。&lt;/p&gt;
&lt;h3 id=&quot;描述启动业务的过程&quot;&gt;&lt;a href=&quot;#%E6%8F%8F%E8%BF%B0%E5%90%AF%E5%8A%A8%E4%B8%9A%E5%8A%A1%E7%9A%84%E8%BF%87%E7%A8%8B&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;span class=&quot;icon icon-link&quot;/&gt;&lt;/a&gt;描述启动业务的过程&lt;/h3&gt;
&lt;p&gt;当时我正在运行另外4个不同的SaaS，所以没有任何“发布”，我慢慢构建了它。我复制了我的另一个产品Scrapybird的登陆页面，改变了logo，颜色和副本，我在几个小时内就有了一个登陆页面。在某个时刻，我把它添加到我的推特个人资料中，然后我开始在相关的地方谈论它，并做一些宣传。&lt;/p&gt;
&lt;p&gt;大部分的成本都是由我之前的工具分担的:像托管、客户关系管理和其他日常运行的工具已经由其他工具支付了。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;&quot; src=&quot;https://tva1.sinaimg.cn/large/e6c9d24ely1h6npaauap6j20nm0ai74v.jpg&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;是什么有效地吸引和留住了客户&quot;&gt;&lt;a href=&quot;#%E6%98%AF%E4%BB%80%E4%B9%88%E6%9C%89%E6%95%88%E5%9C%B0%E5%90%B8%E5%BC%95%E5%92%8C%E7%95%99%E4%BD%8F%E4%BA%86%E5%AE%A2%E6%88%B7&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;span class=&quot;icon icon-link&quot;/&gt;&lt;/a&gt;是什么有效地吸引和留住了客户?&lt;/h3&gt;
&lt;p&gt;推动增长最显著的是电子邮件。我使用我的另一个产品Scrapybird从Twitter上获取用户邮件(例如。大V的关注者或竞争对手的关注者)。&lt;/p&gt;
&lt;p&gt;我还使用Scrapybird获取来自有意向的用户，比如下面这条:&lt;/p&gt;
&lt;p&gt;我所要做的就是抓取回复者的邮件，我有99%的几率他们对冷邮件感兴趣，因为他们对这条关于冷邮件的推特采取了行动。我曾在小众领域的其它地方使用过这种策略，效果很好。&lt;/p&gt;
&lt;p&gt;我自己也做过这种吸引招数，比如这个:&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;&quot; src=&quot;https://tva1.sinaimg.cn/large/e6c9d24ely1h6npaaq6daj20nm0iu3zn.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;我只是给人们发送一个谷歌文档的链接，展示如何用Findymail做XYZ。&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;&quot; src=&quot;https://tva1.sinaimg.cn/large/e6c9d24ely1h6npaaksguj20nm0baq3n.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;我也更加认真地对待Twitter，开始更频繁地发布帖子(每天2条，每周1个Thread)，并在那里进行冷推广(每天5个私信)。&lt;/p&gt;
&lt;p&gt;这些都是能够带来最大发展的内容，但我也玩过其它内容:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Affiliates:我有一个Affiliates，带来了2-3个客户&lt;/li&gt;
&lt;li&gt;广告:我试着玩Twitter广告，但我认为我没有从中获得客户(虽然获得了点击)&lt;/li&gt;
&lt;li&gt;Linkedin:我也在Linkedin上做了一些拓展，但我还没有找到好方法。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt=&quot;&quot; src=&quot;https://tva1.sinaimg.cn/large/e6c9d24ely1h6npaah2c8j20nm0d2dgc.jpg&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;你未来的计划是什么&quot;&gt;&lt;a href=&quot;#%E4%BD%A0%E6%9C%AA%E6%9D%A5%E7%9A%84%E8%AE%A1%E5%88%92%E6%98%AF%E4%BB%80%E4%B9%88&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;span class=&quot;icon icon-link&quot;/&gt;&lt;/a&gt;你未来的计划是什么?&lt;/h3&gt;
&lt;p&gt;到今天为止，Findymail发展得非常好，所以我正在从我的一些其他产品过渡，以便能够有更多的时间在Findymail上，因为它似乎是一个更好的增长机会。&lt;/p&gt;
&lt;p&gt;我有几个我想添加的功能和“增长”的东西，想看看这个可以走多远!&lt;/p&gt;
&lt;h3 id=&quot;通过创业你学到了什么特别有用或有益的东西吗&quot;&gt;&lt;a href=&quot;#%E9%80%9A%E8%BF%87%E5%88%9B%E4%B8%9A%E4%BD%A0%E5%AD%A6%E5%88%B0%E4%BA%86%E4%BB%80%E4%B9%88%E7%89%B9%E5%88%AB%E6%9C%89%E7%94%A8%E6%88%96%E6%9C%89%E7%9B%8A%E7%9A%84%E4%B8%9C%E8%A5%BF%E5%90%97&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;span class=&quot;icon icon-link&quot;/&gt;&lt;/a&gt;通过创业，你学到了什么特别有用或有益的东西吗?&lt;/h3&gt;
&lt;p&gt;&lt;img alt=&quot;&quot; src=&quot;https://tva1.sinaimg.cn/large/e6c9d24ely1h6npaabwbkj20b40bkgma.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;对我来说，最大的创业经验是，在你增长之前，什么都不重要。与Findymail相比，我的第一个SaaS SEOwl的建立和运行花费了更多的时间，因为我花了很多时间在那些不能促进业务增长的事情上。&lt;/p&gt;
&lt;p&gt;比如：添加一个功能，调整logo，翻译访问量为零的博客页面。如果我能更早的和人交流，可能会避免这样的事。&lt;/p&gt;
&lt;p&gt;这就是为什么我最近的初创公司发展得更快:logo是一个表情符号，我只有一个登陆页面和一个核心产品，其他的一切都是我在有需要的时候开始行动，把它呈现在需要它的人面前。我相信会有时间做其他事情，但通常情况下，过早地关心所有事情是愚蠢的做法。&lt;/p&gt;
&lt;h3 id=&quot;对其他想要起步或刚刚起步的独立开发者有什么建议&quot;&gt;&lt;a href=&quot;#%E5%AF%B9%E5%85%B6%E4%BB%96%E6%83%B3%E8%A6%81%E8%B5%B7%E6%AD%A5%E6%88%96%E5%88%9A%E5%88%9A%E8%B5%B7%E6%AD%A5%E7%9A%84%E7%8B%AC%E7%AB%8B%E5%BC%80%E5%8F%91%E8%80%85%E6%9C%89%E4%BB%80%E4%B9%88%E5%BB%BA%E8%AE%AE&quot; aria-hidden=&quot;true&quot; tabindex=&quot;-1&quot;&gt;&lt;span class=&quot;icon icon-link&quot;/&gt;&lt;/a&gt;对其他想要起步或刚刚起步的独立开发者有什么建议?&lt;/h3&gt;
&lt;p&gt;&lt;img alt=&quot;&quot; src=&quot;https://tva1.sinaimg.cn/large/e6c9d24ely1h6npa27h3nj21ha0u00y4.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;所有的问题都归结于你的报价和流量。&lt;/p&gt;
&lt;p&gt;1、你需要一个好的报价&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;人们想要的东西(人们在谷歌上寻找这个吗?)&lt;/li&gt;
&lt;li&gt;B2B，不要太便宜(如果你的价格点是9美元/月，你将很难发展)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;2、然后你需要为它带来流量&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在你建造之前，你需要知道如何将流量吸引到它&lt;/li&gt;
&lt;li&gt;SEO、推广、社交媒体、广告……这些都可以。什么是有效的取决于你的产品和你的受众，但你至少需要一个有效的，你可以执行的&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;最简单的方法是通过主动联系:你会与潜在客户通电话，这样你就能更多地了解他们的问题，并相应地做出调整。如果在出问题的时候，用户不着急给你直接打电话，那么说明你的产品可能还没有抓住用户刚需。&lt;/p&gt;
&lt;p&gt;以上这些，你很幸运能尽早了解到这些点，这样就可以有效的调整自己的营销策略，避免花费几个月的时间在毫无价值的营销上!一旦一些客户渠道受影响，还可以继续拓展，或者寻找更多可扩展的渠道。&lt;/p&gt;
&lt;p&gt;本次周刊结束，欢迎大家投稿，我们下周见！&lt;/p&gt;&lt;/div&gt; &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>f0a72c53349bef3b80cd187f21da9d46</guid>
<title>基于kcp的帧同步服务器 - 知乎</title>
<link>https://toutiao.io/k/hhix00h</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;RichText ztext Post-RichText css-4em6pe&quot; options=&quot;[object Object]&quot; lazyloadimageprops=&quot;[object Object]&quot; usegifprops=&quot;[object Object]&quot;&gt;&lt;h2 data-first-child=&quot;&quot; id=&quot;h_561848282_0&quot; data-into-catalog-status=&quot;&quot;&gt;1.前置技能&lt;/h2&gt;&lt;p data-pid=&quot;D_f2AJIi&quot;&gt;需要了解tcp三握四挥 重发 避让 、熟悉kcp、对帧同步有一定了解，下面的内容才方便食用&lt;/p&gt;&lt;p data-pid=&quot;mSVw7BL6&quot;&gt;猜你想要：&lt;/p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://zhuanlan.zhihu.com/p/554252832&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic2.zhimg.com/v2-2f47fefd275699aa086681e5881c3af1_180x120.jpg&quot; data-image-width=&quot;700&quot; data-image-height=&quot;420&quot; data-text=&quot;灰派：kcp源码分析&quot; class=&quot;LinkCard new&quot;&gt;&lt;span class=&quot;LinkCard-contents&quot;&gt;&lt;span class=&quot;LinkCard-title loading&quot; data-text=&quot;true&quot;/&gt;&lt;span class=&quot;LinkCard-desc loading&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;LinkCard-image LinkCard-image--default&quot;/&gt;&lt;/a&gt;&lt;h2 id=&quot;h_561848282_1&quot; data-into-catalog-status=&quot;&quot;&gt;2. 目标&lt;/h2&gt;&lt;p data-pid=&quot;VhK8d4OG&quot;&gt;本文只讨论帧同步服务器相关的内容，前端一致性、网络抖动、预表现……都不在本文范围内。&lt;/p&gt;&lt;p data-pid=&quot;NlRZT2Q0&quot;&gt;实现一个帧同步服务器，主要包含以下功能&lt;/p&gt;&lt;ul&gt;&lt;li data-pid=&quot;WuhkZhTT&quot;&gt;可靠udp&lt;/li&gt;&lt;ul&gt;&lt;li data-pid=&quot;SN2LGCwZ&quot;&gt;可靠：这部分由kcp保证&lt;/li&gt;&lt;li data-pid=&quot;pU8yfXvp&quot;&gt;连接状态：连接、断开、心跳超时检查&lt;/li&gt;&lt;li data-pid=&quot;BjbMx5OZ&quot;&gt;fec：前向纠错，能够自己定制fec&lt;/li&gt;&lt;li data-pid=&quot;PH7Yps8s&quot;&gt;crc：校验&lt;/li&gt;&lt;/ul&gt;&lt;li data-pid=&quot;896QJbhh&quot;&gt;locksetp&lt;/li&gt;&lt;/ul&gt;&lt;p data-pid=&quot;llQWBwMe&quot;&gt;主要分为两大部分，可靠udp和lockstep，抛开lockstep，可靠udp可作为独立的底层通信框架。&lt;/p&gt;&lt;p data-pid=&quot;UYQLuVUg&quot;&gt;包装上近似于netty，例如channel面向连接、pipe消息处理管道、handler事件监听……优雅永不过时。&lt;/p&gt;&lt;h2 id=&quot;h_561848282_2&quot; data-into-catalog-status=&quot;&quot;&gt;2. KCP&lt;/h2&gt;&lt;p data-pid=&quot;REeBH72F&quot;&gt;kcp的优点不再赘述，官网上关于kcp的介绍和性能比较之书备矣。相比于kcp的原理，kcp的分层思想让我感到更惊喜。kcp只负责消息的拆包粘包、重发策略、流量控制等，可以看做kcp层，你可以自己封装发送/接收层，负责真正的发送和接收由你来决定，可以用udp，也可以用别的p，kcp层和发送/接收层之间可以封装fec层，每一层互不污染，封装好的话每一层可以插拔。&lt;/p&gt;&lt;p data-pid=&quot;HHmBlcmK&quot;&gt;下面是官方的图片&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-324a36d6d4cb4a342012236151728d0e_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;878&quot; data-rawheight=&quot;528&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic3.zhimg.com/v2-324a36d6d4cb4a342012236151728d0e_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;878&quot; data-rawheight=&quot;528&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic3.zhimg.com/v2-324a36d6d4cb4a342012236151728d0e_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-324a36d6d4cb4a342012236151728d0e_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p data-pid=&quot;o1LuC_RN&quot;&gt;层次分明，每一层各司其职，但是要想自由的扩展还不够。&lt;/p&gt;&lt;h2 id=&quot;h_561848282_3&quot; data-into-catalog-status=&quot;&quot;&gt;3.层次划分&lt;/h2&gt;&lt;p data-pid=&quot;kGT_tkU6&quot;&gt;我把结构划分为如下层次&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-68a75a5a919d50faa2372b658cf4ade4_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1508&quot; data-rawheight=&quot;1390&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic1.zhimg.com/v2-68a75a5a919d50faa2372b658cf4ade4_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1508&quot; data-rawheight=&quot;1390&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic1.zhimg.com/v2-68a75a5a919d50faa2372b658cf4ade4_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-68a75a5a919d50faa2372b658cf4ade4_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p data-pid=&quot;wiGchczs&quot;&gt;图中实线为发送的消息，虚线为ack包。以发送端为例&lt;/p&gt;&lt;ul&gt;&lt;li data-pid=&quot;PoQpYfLt&quot;&gt;state：状态控制，用于连接、断开、心跳超时检查&lt;/li&gt;&lt;li data-pid=&quot;O5inD87J&quot;&gt;Channel：理解以为一个连接，中间可以添加自定义的encode，对发送给这个Channel的消息进行压缩、加密等操作&lt;/li&gt;&lt;li data-pid=&quot;3qL2iKq6&quot;&gt;PackPipe：消息经过kcp后，会在kcp层累积，直到tick时把消息flush到PackPipe，此时的包已经是本帧内发送的消息和kcp重发的消息的集合，PackPipe对消息的集合进一步封包，比如fec，最后交给udp发送出去&lt;/li&gt;&lt;/ul&gt;&lt;p data-pid=&quot;oYlTb3ww&quot;&gt;接收端顺序相反。&lt;/p&gt;&lt;p data-pid=&quot;ohbsrNll&quot;&gt;在这套层次结构下，可以通过&lt;b&gt;配置kcp参数&lt;/b&gt;、&lt;b&gt;自定义encode/decode&lt;/b&gt;、&lt;b&gt;自定义packPipe/unpackPipe&lt;/b&gt;来满足不同游戏类型的网络特性。&lt;/p&gt;&lt;p data-pid=&quot;OCCRrKiy&quot;&gt;目前kcp和udp是写死的，作为非自定义的一层，其实也可以封装成pipe的一个环节，但是没必要过度封装。&lt;/p&gt;&lt;h2 id=&quot;h_561848282_4&quot; data-into-catalog-status=&quot;&quot;&gt;4. 连接状态&lt;/h2&gt;&lt;h3 id=&quot;h_561848282_5&quot; data-into-catalog-status=&quot;&quot;&gt;连接/断开&lt;/h3&gt;&lt;p data-pid=&quot;NFuprDZ-&quot;&gt;为了更符合上层逻辑所需的在线/离线的需求，把udp封装成有连接状态的样子，这样对上层逻辑更友好。而且做到了与tcp一致，未来可以更好的封装网络层，把udp、tcp、可靠udp封装到一起，对逻辑层暴露统一的接口。&lt;/p&gt;&lt;p data-pid=&quot;eY3mw7h6&quot;&gt;连接和断开的方式使用喜闻乐见的三次握手、四次挥手。介于kcp包的cmd只支持几种，不支持外部发送cmd消息，并且秉持着“尽量”不破坏kcp源码的原则，我在state做了如下操作&lt;/p&gt;&lt;ul&gt;&lt;li data-pid=&quot;BWEkHSL8&quot;&gt;连接和断开时发送自定义的SYN 、FIN状态包&lt;/li&gt;&lt;li data-pid=&quot;jgNM8ttA&quot;&gt;在kcp层注入一个ack回调函数，拦截是SYN、FIN的ack包，相当于state层有了接收ack包的能力，看上面的图，ack包在kcp层以下，上层感知不到。当然不拦截ack也可以，接收方就只能发一个状态包作为SYN ACK或FIN ACK，告诉发送方已经收到了SYN或FIN，由于状态包本身就是一个消息包，所以也会产生ack包，这样在连接和断开时就发送了双倍的包数。&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;h_561848282_6&quot; data-into-catalog-status=&quot;&quot;&gt;心跳&lt;/h3&gt;&lt;p data-pid=&quot;ISuDfdWn&quot;&gt;其实，三握四挥并不能保证状态完全正确，最后的保底错失就是心跳检查。&lt;/p&gt;&lt;p data-pid=&quot;dC7ckja5&quot;&gt;客户端state定时向服务器发送ping包，如果超过N次没收到服务端的ping ack包（ping ack也在ack回调函数中处理），则客户端断开连接。&lt;/p&gt;&lt;p data-pid=&quot;e3_9oDEx&quot;&gt;服务端state定时check，如果超过（N*客户端ping间隔），则断开连接&lt;/p&gt;&lt;h2 id=&quot;h_561848282_7&quot; data-into-catalog-status=&quot;&quot;&gt;5.通道 Channel&lt;/h2&gt;&lt;p data-pid=&quot;tWYOn6Uy&quot;&gt;channel是逻辑层发送/接收消息的主要操作对象，但只是单纯的一个连接封装，没有什么特殊的。encode/decode可以对消息进行加密、压缩、加装包头等，按需实现&lt;/p&gt;&lt;h2 id=&quot;h_561848282_8&quot; data-into-catalog-status=&quot;&quot;&gt;6.封包和解包PackPipe/UnpackPipe&lt;/h2&gt;&lt;p data-pid=&quot;Qzjn5aXY&quot;&gt;PackPipe/UnpackPipe操作的对象是这一帧中产生的消息和重发的消息的集合，位于KCP层和UDP层之间。在此层可以进行FEC、加装包头等操作，具体按需实现。&lt;/p&gt;&lt;p data-pid=&quot;7j7b950a&quot;&gt;pipe环节里可能（大部分）有增加包头的操作，那么这里注意了&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-cpp&quot;&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;pack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;buf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;len&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ikcpcb&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kcp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Channel&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;channel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;uint16_t&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getHeaderLen&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(){&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p data-pid=&quot;UttaFtmA&quot;&gt;加包头会造成buf的地址前移，如果新分配一块更大的新地址，会造成巨大的拷贝消耗。我的做法是在buf之前预留一定的长度，每个继承于PackPipe的子类实现getHeaderLen()接口，那么预先就知道了整个PackPipe中所有Pack的包头长度N，所以buf分配的时候（buf=buf+N），这个buf的来源于kcp创建时分配的，秉持着“尽量”不破坏kcp源码的原则，在kcp创建时，buf向后偏移N，相应的在kcp的flush的时候，超过mtu的分包判断也把N长度加进去了，修改痕迹非常微小，丝毫不破坏原则。&lt;/p&gt;&lt;p data-pid=&quot;SVTNlex8&quot;&gt;在上面代码中getHeaderLen()返回4，那么在pack中，buf前移了4字节，然后序列化包头到buf，同时len+=4，然后交个下一个Pack处理。在接收端unpack时，取出包头，相应的buf后移4字节，len-=4&lt;/p&gt;&lt;h3 id=&quot;h_561848282_9&quot; data-into-catalog-status=&quot;&quot;&gt;FEC&lt;/h3&gt;&lt;p data-pid=&quot;1Bd_1JQZ&quot;&gt;FEC是作为PackPipe/UnpackPipe管道中的一个环节。&lt;/p&gt;&lt;p data-pid=&quot;uGZmzAp9&quot;&gt;FEC（forward error correction）前向纠错。以一种悲观的态度发送消息，发送端不确定接收端是否能收到，所以发送端“多发送”一些尽量让接收端收到。跟悲观锁的很像，我不确定执行期间会不会有人使用我的资源，我先锁上，不让别人使用我的资源。&lt;/p&gt;&lt;p data-pid=&quot;Y6f6psQ7&quot;&gt;这种消极的人生观导致“多发送”了很多消息包。“多发送”是怎么发送呢，其实根据网络情况而定，没有最好的，只有更适合的。有且不限于以下几种&lt;/p&gt;&lt;ul&gt;&lt;li data-pid=&quot;QIzuxnwq&quot;&gt;里德-所罗门编码（Reed-Solomon code）：通过n份数据冗余出m份纠错数据，至多允许丢失m，剩下的任意n份数据能恢复成原始的n份数据。冗余出的纠错数据越多，越可靠，但是发送包也会增多，纠错数据少则相反。网上很多，详细原理自行查找。&lt;/li&gt;&lt;li data-pid=&quot;Ncv0LCB5&quot;&gt;冗余帧：发包时携带前n帧的包。例如n=2，当发送f1包时，发送f1；当发送f2包时，发送f1 f2，当发送f3包时，发送f1 f2 f3；当发送f4包时，发送f2 f3 f4，当……&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-8081d0dbc8240de118da59188ca347da_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1091&quot; data-rawheight=&quot;426&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic3.zhimg.com/v2-8081d0dbc8240de118da59188ca347da_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1091&quot; data-rawheight=&quot;426&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic3.zhimg.com/v2-8081d0dbc8240de118da59188ca347da_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-8081d0dbc8240de118da59188ca347da_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h3 id=&quot;h_561848282_10&quot; data-into-catalog-status=&quot;&quot;&gt;CRC&lt;/h3&gt;&lt;p data-pid=&quot;8rI12Amw&quot;&gt;循环冗余校验码，用来的校验包内容的合法性。在网络传输过程中由于未知原因导致包数据错误。原理是发送方和接收方约定一个除数，发送方对原始数据模二除法的方式得到校验码，接收方根据原始数据和校验码的组合模二除法约定的除数，如果能整除则数据合法。网多自查。&lt;/p&gt;&lt;p data-pid=&quot;QGaXQhcl&quot;&gt;CRC可以实现在PackPipe/UnpackPipe中，是对kcp包的封包和解包，由于CRC是必须的，所以我内置了CrcPackPipe/CrcUnpackPipe。&lt;/p&gt;&lt;h2 id=&quot;h_561848282_11&quot; data-into-catalog-status=&quot;&quot;&gt;7. LockStep锁帧&lt;/h2&gt;&lt;h3 id=&quot;h_561848282_12&quot; data-into-catalog-status=&quot;&quot;&gt;7.1 buffer&lt;/h3&gt;&lt;p data-pid=&quot;xkR0CzpQ&quot;&gt;这一部分的实现仁者见仁，主要流程就是锁帧、合包、转发。说一下数据结构的实现方式。&lt;/p&gt;&lt;p data-pid=&quot;sSxaXeEE&quot;&gt;因为要缓存帧数据，为了不让数据太离散，又怕预分配的内存不够或者过多，所以需要整块的内存并且支持扩容。所以数据结构如下&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-e5a9891b3218ca6de48e06dca6c340b2_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1770&quot; data-rawheight=&quot;421&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic3.zhimg.com/v2-e5a9891b3218ca6de48e06dca6c340b2_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1770&quot; data-rawheight=&quot;421&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic3.zhimg.com/v2-e5a9891b3218ca6de48e06dca6c340b2_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-e5a9891b3218ca6de48e06dca6c340b2_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p data-pid=&quot;tphe_z3b&quot;&gt;bufferList是支持扩容的，当一个buffer不够的时候再申请一块内存&lt;/p&gt;&lt;p data-pid=&quot;WjQ9tRBN&quot;&gt;frameList是一个vector，用vector的扩容就可以了。frameList的索引就是帧号，每一个元素指向buffer中一块内存的起始位置，起始位置之间就是这一帧收到的全部玩家的帧数据。可以看到，第4帧的数据超过了第一个buffer所剩内存的长度，那么直接把剩余这部分丢弃，直接使用新申请的buffer。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;/p&gt;&lt;p data-pid=&quot;ri05xl6o&quot;&gt;// -------补充------------&lt;/p&gt;&lt;p data-pid=&quot;JxcgGf6F&quot;&gt;frameList也改用类似bufferList的结构，考虑到每次vector扩容都要复制旧数据，一场对局下来要复制很多。frameList和bufferList抽象成一个模板类。&lt;/p&gt;&lt;h3 id=&quot;h_561848282_13&quot; data-into-catalog-status=&quot;&quot;&gt;7.2 一致性检查&lt;/h3&gt;&lt;p data-pid=&quot;EjtkUZkN&quot;&gt;目的是为了检查多个客户端的数据一致性，及时发现，客户端及时上报错误信息，排查问题。&lt;/p&gt;&lt;p data-pid=&quot;RGFwzdEq&quot;&gt;由于前端的调用顺序、计算、随机等问题可能产生客户端之间数据不一致的情况。所以客户端初始化一个crc值，每次数据变化都用当前crc和变化的数据计算出新的crc。发送帧消息的时候一同发送给服务器，服务器检测多个客户端在同一帧的crc如果不一致，则通知给所有前端上传错误信息（客户端会保留几帧之内栈的信息）。&lt;/p&gt;&lt;p class=&quot;ztext-empty-paragraph&quot;&gt;&lt;/p&gt;&lt;h2 id=&quot;h_561848282_14&quot; data-into-catalog-status=&quot;&quot;&gt;参考文献&lt;/h2&gt;&lt;p data-pid=&quot;vsFViO_T&quot;&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/skywind3000/kcp&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;skywind3000/kcp: KCP - A Fast and Reliable ARQ Protocol (github.com)&lt;/a&gt;&lt;/p&gt;&lt;p data-pid=&quot;r4-d6ioc&quot;&gt;&lt;a href=&quot;https://zhuanlan.zhihu.com/p/554252832&quot; class=&quot;internal&quot;&gt;kcp源码分析 - 知乎 (zhihu.com)&lt;/a&gt;&lt;/p&gt;&lt;p/&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>2846130bec2452c6a931a212b58978fb</guid>
<title>Doris在蔚来汽车的应用</title>
<link>https://toutiao.io/k/c6mezri</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                           autoTypeSetting24psection&amp;#10;                          &quot; id=&quot;js_content&quot;&gt;&lt;section data-id=&quot;21706&quot; data-tools=&quot;小蚂蚁编辑器&quot; powered-by=&quot;xmyeditor.com&quot; data-md5=&quot;57ed6&quot; draggable=&quot;false&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;section data-id=&quot;21707&quot; data-tools=&quot;小蚂蚁编辑器&quot; powered-by=&quot;xmyeditor.com&quot; data-md5=&quot;5fd1d&quot; draggable=&quot;false&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;171&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.2962962962962963&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPjEiaHJxqDmK1A3mMfG1gkKQYrmIlZfM9y2Nw5eVmphL2iaicJzotM6Qw6BJiaJPaag8tibNN7V1lGHU5Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;4050&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;hr/&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;328&quot; data-backw=&quot;578&quot; data-ratio=&quot;0.47148148148148145&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPg5uZSQKuohGHiaFPXq9WicX5cA4aYDfBic7WFmACuoTmBBHhp27XqYFXGCiaVlSzrPagIZXQ741uznCg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot; title=&quot;截屏2022-07-05 下午6.22.56.png&quot;/&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section draggable=&quot;false&quot;&gt;&lt;section data-width=&quot;100%&quot; data-darkmode-bgcolor-16008590572276=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16008590572276=&quot;rgb(255, 255, 255)&quot;&gt;&lt;section data-darkmode-bgcolor-16008590572276=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16008590572276=&quot;rgb(255, 255, 255)&quot; data-style=&quot;margin-bottom: -10px; margin-left: -8px; max-width: 100%; width: 18px; height: 18px; border-top: 8px solid rgb(54, 65, 173); border-left: 8px solid rgb(54, 65, 173); box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible;&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-bgopacity=&quot;50%&quot; data-darkmode-bgcolor-16008590572276=&quot;rgb(33, 33, 33)&quot; data-darkmode-original-bgcolor-16008590572276=&quot;rgb(247, 247, 247)&quot; data-style=&quot;max-width: 100%; width: 543.333px; background: rgb(247, 247, 247); box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible;&quot;&gt;&lt;section data-darkmode-bgcolor-16008590572276=&quot;rgb(33, 33, 33)&quot; data-darkmode-original-bgcolor-16008590572276=&quot;rgb(247, 247, 247)&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;分享嘉宾&lt;/span&gt;&lt;span&gt;：唐怀东 蔚来汽车 数据团队负责人&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;编辑整理：罗庆新 IBM&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;出品平台：DataFunTalk&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-width=&quot;100%&quot; data-darkmode-bgcolor-16008590572276=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16008590572276=&quot;rgb(255, 255, 255)&quot;&gt;&lt;section data-darkmode-bgcolor-16008590572276=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16008590572276=&quot;rgb(255, 255, 255)&quot; data-style=&quot;max-width: 100%; width: 18px; height: 18px; border-bottom: 8px solid rgb(54, 65, 173); border-right: 8px solid rgb(54, 65, 173); box-sizing: border-box !important; overflow-wrap: break-word !important; visibility: visible;&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;导读：&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;本次分享的题目是Doris在蔚来汽车的应用&lt;/span&gt;，&lt;span&gt;主要包括以下几大部分：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;OLAP在&lt;/span&gt;蔚来&lt;span&gt;的发展&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;Doris作为统一O&lt;/span&gt;&lt;span&gt;LAP&lt;/span&gt;&lt;span&gt;数仓&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;Doris在运营平台上的实践&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;经验总结&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;01&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;O&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;LAP&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;在蔚来的发展&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;第一部分，介绍一下OLAP在蔚来汽车的发展。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;325&quot; data-backw=&quot;578&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPg5uZSQKuohGHiaFPXq9WicX5ibsrDKclNkicccpca424PvibiagrZrLM1fibtO2IRVj02ibFp9PUkIPo3ia5w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1. 2017年引入Druid&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在当时可选择的OLAP存储和查询引擎并不多，比较常见的有Druid、Kylin。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我们优先引入Druid的原因是以前有使用经验比较熟悉。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;而Kylin&lt;/span&gt;&lt;span&gt;预计算&lt;/span&gt;&lt;span&gt;虽然&lt;/span&gt;&lt;span&gt;具有极高的查询效率优势，但是：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;2. 2019年引入TiDB&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;开始引入TiDB的场景是分布式OLTP。随着TiFlash分析引擎的引入，其OLAP能力逐渐增强，OLTP和OLAP两者结合具有非常大的优势。TiDB对MySQL的兼容性做得非常好，OLTP的数据进来后，直接进行OLAP分析和查询，相对来说路径会短很多，所以它可以在某些场景得到很大的应用。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;3. 2021年引入Doris&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这得益于最近几年国内在基础架构和基础技术上的发力，无论Doris还是其他一些存储，包括我们研究过的时序数据库TDengine，这是国内发展越来越好的地方。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;下面详细说一下我们公司为什么会选择Doris，以及为什么我们是从这个路径过来。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;325&quot; data-backw=&quot;578&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPg5uZSQKuohGHiaFPXq9WicX50RQabaXSdVS9RqiaTIXBCNd1fVGUwFVMmXMXEodu7eKrV6astMl4xng/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;产品的优点、缺点、技术使用成本、协议、性能和运维成本，这几个方向决定了我们的技术选型。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;第一，Druid的优势很明显&lt;/span&gt;&lt;span&gt;，支持实时和离线数据接入，列式存储，高并发，查询效率非常高。&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;其缺点也很明显：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;第二，TiDB是一个OLTP+OLAP的成熟引擎。&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;第三，我们重点关注的Doris，其优点完全满足我们的诉求。&lt;/span&gt;&lt;/strong&gt;&lt;span/&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;高并发，我们比较看重这点&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;同时支持实时和离线&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;支持明细和聚合&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;支持一定程度的更新&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;物化视图的能力能极大的加速查询效率&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;兼容MySQL协议，所以开发和使用成本比较低&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;性能满足我们的要求&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;运维成本比较低&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;span&gt;最后提一下Clickhouse，我们之前也调研过，也尝试想去使用它。其单机性能极强，但是：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;02&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;Doris作为统一OLAP数仓&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;325&quot; data-backw=&quot;578&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPg5uZSQKuohGHiaFPXq9WicX5b11VcV1f787j7XKyadHt0pdjYcvT2VXYxLzNM1X2aUCjMwBGicy4F4g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这张图基本上就是从数据源到数据接入、数据计算、数据仓库、数据服务以及应用。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1. 数据&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;源&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;蔚来的场景下，数据源不仅仅指业务系统的数据，还有埋点数据、设备数据、车辆数据等等。数据会通过一种接入方式接入到大数据平台。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;2. 数据接入&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我们所有的数据源并不都是采用这一种接入方式。对于一些业务系统的数据，可以开启CDC捕捉变化的数据，然后转换成一个数据流存储到Kafka，接续再进行流式的计算。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;对于有些数据只能通过批量的方式直接进入到我们的分布式存储。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;3. &lt;/span&gt;&lt;span&gt;数据计算&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;我们没有采用流批一体，&lt;/span&gt;&lt;strong&gt;&lt;span&gt;采用的是Lambda架构&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;，而不是Kappa架构。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Lambda架构其实是离线和实时分两条路径，这个是和我们本身的业务场景有关系的：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;4. &lt;/span&gt;&lt;span&gt;数据仓库&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;数据计算到数仓，这两条线路我们没有采用Flink或Spark Doris Connector，Flink用Routine Load，而Spark用Broker Load并不是直接去写的，这有一定的使用场景和原因。像Spark这一块我们生成的数据，其实还是会留一份到Hive做一些其他场景的使用。这样计算一次，就可以同时在多个地方去使用。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Flink也类似。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;5. 数据服务&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;Doris后面是一个One Service，业界在数据服务化这一块做的其实是非常多的。通过注册数据源或灵活配置的方式，自动生成API，对API进行流量的控制和权限的控制，这样它的灵活性会极大提高。有些公司的One Service还增加了编排能力，借助于k8s&lt;/span&gt; &lt;span&gt;serverless方案，能把整个服务做得非常灵活和丰富。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;6. 数据应用&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;应用可以是报表应用，也可以直接提供一些服务。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;我们主要有两类使用场景：&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;03&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;Doris在运营平台上的实践&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1. CDP运营平台的架构&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;325&quot; data-backw=&quot;578&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPg5uZSQKuohGHiaFPXq9WicX5icMEuQ1AUQ7JPQiaBXdEARXte7WzcBlNDhDz4tibqyBEhiaiciaE7mCFWPHg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;接下来介绍Doris在运营平台上的实践，这是我们一个真实的使用场景。互联网公司基本上都会做一个自己的CDP，它包括几个模块：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;为了闭环，我们运营计划还有个效果分析，这样从闭环完整性的角度来说，做到有动作、有效果、有反馈。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;Doris在这里面起到了&lt;/span&gt;&lt;strong&gt;&lt;span&gt;最重要的作用&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;，包括：&lt;/span&gt;&lt;strong&gt;&lt;span&gt;标签存储&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;、&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;人群存储&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;、&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;效果分析&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;标签分为基础标签和用户行为的基础数据，在此基础之上，我们可以灵活自定义其他标签。换一个维度考虑，标签还分为实时的标签和离线的标签。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2. CDP存储选型的考量点&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;我们从&lt;/span&gt;&lt;strong&gt;&lt;span&gt;5个维度&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;去考量CDP存储的选型。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;①&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;离线和实时统一&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;如前所述标签有离线标签，有实时标签，我们这个实时其实还是一个准实时的场景。对于有些数据，准实时已足够满足我们的需求，大量的标签还是离线的标签，采用的方式就是Doris的Routine Load和Broker Load。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;181&quot; data-backw=&quot;578&quot; data-ratio=&quot;0.3125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPg5uZSQKuohGHiaFPXq9WicX5n1xTllsDE1G2znxPRBUW4YzgXIBred4L45XrqNibsvichS58IjFppl9A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;另外同一张表上，不同列更新的频率也是不一样的。例如用户的基础标签，我们可能对用户的身份需要实时的更新，因为用户的身份是时刻变化的，它的变化的频率，我们不可能做成T+1，否则整个使用场景就会极大的受限。但对于有些标签离线就可以，例如用户的性别、年龄等基础标签，T+1就足够。但我们为什么期望把这种基础用户的原子标签放在一张表，这是因为一张表，维护成本会很低。再者后期自定义标签时，表的数量会极大的减少，这样对于整体性能的提升有极大好处。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;②&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;高效圈选&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;用户运营有了标签，第二步就是圈人，圈选就是根据标签的不同组合，把符合标签条件的所有人筛选出来，这时会有不同标签条件组合的查询、这个查询在Doris引入向量化之后有比较明显的提升。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;79&quot; data-backw=&quot;578&quot; data-ratio=&quot;0.1359375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPg5uZSQKuohGHiaFPXq9WicX5hMf90fO7UuIgwcDrvOnxhUjmIGIEVibhDibaLOL398w1ibxKHl3wEJ4ZA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;③&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;高效聚合&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;前面提到的用户洞察或群体洞察以及效果分析统计，需要对数据做统计分析，并不是单一的按用户ID获取标签的这种简单场景，它读取的数据量和查询效率，对我们这个标签的分布、群体的分布、效果分析的统计都有很大的影响，&lt;/span&gt;&lt;strong&gt;&lt;span&gt;Doris的功能特点：&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;211&quot; data-backw=&quot;578&quot; data-ratio=&quot;0.365625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPg5uZSQKuohGHiaFPXq9WicX556lxDuL0fYEibqXPI64Z8htFqAcdILGibOwpqBwjBnSOKAUNSR7haicaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;span/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;③&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;多表关联&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我们的CDP可能和业界一些场景的CDP不太一样，因为有些场景的CDP标签都是提前算好的，不存在自定义标签的场景。而我们只做原子标签，或者说用户基础行为数据的统计。把灵活性留给使用CDP的用户，他可以根据自己的业务场景去自定义标签，这时候会发现底层的数据是分散在不同的数据库表里，如果做自定义的标签的建设，势必需要做表的关联。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我们选择Doris一个非常非常重要的原因，就是多表关联的能力。我们通过性能测试，目前能够满足我们的要求，而这块确实给用户提供了非常强大的能力。因为标签是动态的且符合业务场景。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;133&quot; data-backw=&quot;578&quot; data-ratio=&quot;0.23046875&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPg5uZSQKuohGHiaFPXq9WicX5mJEibC2xy7dWGibibIURJBzicibkJx11C5q5ibTibOFgG0HqEfXlt2vlWMgkA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;④&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;联邦查询&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;用户触达成功与否我们会记录到TiDB。因为我们做用户运营，如果仅仅是一个通知，可能只影响用户体验，如果涉及到钱例如发放积分或优惠券，任务执行就要做到不重不漏，这种OLTP场景用TiDB比较合适。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;然后我们做效果分析，我们要知道运营计划执行到什么程度，是否达成目标，其分布情况等等。所以需要把任务执行情况和人群圈选相结合才能进行分析，就会用到Doris和TiDB的关联，外表关联进行查询。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;开始我们设想标签体量比较小，保存到es可能比较合适，通过我们的测试这块没有上线，后面会解释其原因。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;136&quot; data-backw=&quot;578&quot; data-ratio=&quot;0.23515625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPg5uZSQKuohGHiaFPXq9WicX5QvDcOYjy0FIUIpB0bSuEfUMeTyhe74RTsJAUdtumDzO6PD2gAicqDbA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;04&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;经验总结&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;第一个是&lt;/span&gt;&lt;strong&gt;&lt;span&gt;bitmap&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;，我们还没有达到那么大的体量，无法发挥其效率。如果体量达到一定程度，用bitmap会有很好的性能提升。计算UV场景，Id全集大于5000万，可以考虑bitmap聚合。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;第二个是&lt;/span&gt;&lt;strong&gt;&lt;span&gt;ES外表&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;，单表查询下推效率还是很好的。但聚合查询效率比较低，ES不适合聚合查询，会把ES明细全读到Doris，然后聚合；ES也不适合多表关联，读取大量数据，会引发ES频繁GC。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;第三个是&lt;/span&gt;&lt;strong&gt;&lt;span&gt;分批更新列&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;，为了减少表的数量和提升join表的性能，设计表尽量精简尽量聚合，相同类型的事实都放在一起。但相同类型的字段可能更新频率不同，有些字段需要天级更新，有些字段可能需要小时级更新，单独更新某一列就是一个明显的诉求。Doris聚合模型单独更新某些列的解决方案是使用REPLACE_IF_NOT_NULL。注意:用null替换原来的非null值是做不到的,可以把所有的null替换成有意义的默认值，例如unknown。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;第四个&lt;/span&gt;&lt;strong&gt;&lt;span&gt;在线服务&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;，Doris同一份数据，同时服务在线离线场景，容易互相影响。尽量用另外单独的技术方案提供在线服务。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;还有未来的展望，主要是用Manager更好的去管理Doris，还有资源隔离，避免互相影响。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;05&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;问答环节&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Q1&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;span&gt;：&lt;/span&gt;&lt;span&gt;实时和离线同时更新同一张表不同列，会有冲突问题吗？你们这边是怎么解决的？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;A1&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;没有发现冲突问题，我们使用REPLACE_IF_NOT_NULL的方式更新&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Q2&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;：运营平台的标签是如何存储的？&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;A2&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;标签存储在Doris，包括两类，一类是基础标签，没有任何逻辑判断的原子标签，一类是用户行为的分析统计，例如对用户的APP操作行为进行聚合，其本质上也是事实数据。不同的行为存储到不同的表中，更上层的定制标签用定时任务进行抽取、计算和再存储，提前定义好自定义标签的表结构，名字额外的映射，然后直接更新数据即可。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Q3&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;：运营平台存储类似于用户位置、用户性别等不同标签，是多表分开存储还是用大宽表，此外建表我们如何选择明细模型还是聚合模型，存储和查询上有什么建议？&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;A3&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;我们是根据场景分开存储的，前面提及的用户基础或原子标签，像用户信息可以是一张表。而不同的行为会存储到不同的地方，互不影响。选型我们非常看重Doris的多表关联能力，自定义标签需要多表关联生成。自定义标签的表和列会提前定义好，名字用额外的表做映射。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Q4&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;：标签表的结构是怎么设计的？怎么设计标签的自定义属性？&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;A4&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;基础数据我们是先算好的，有多少种行为，有多少基础的原子标签会提前定义好。自定义标签我们是先建一个大宽表，其本身默认是没有含义的，如果定制一个标签，占用一个column即可。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Q5&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;：你们公司的数仓全部基于Doris吗？是否分层？&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;A5&lt;/span&gt;&lt;span&gt;：&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;span/&gt;&lt;strong&gt;&lt;span/&gt;&lt;/strong&gt;&lt;span&gt;&lt;span&gt;并不是所有的数仓全用Doris，我们公司的车辆明细数据的体量非常大，用户的使用场景非常灵活，他们要经常自己去写udf查询数据，没有办法提前固化，所以一些离线场景是用Hive。Doris适用场景还是实时的OLAP场景，Web或A&lt;/span&gt;PP仪表盘上展示指标，直接查询数仓不合适。我们对不同的场景的分层是不一样的，实时很少分很多层，基本上没有特殊需求，包括明细加上最终的聚合。离线主要是根据使用场景或查询要求的不同，我们也会分层。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;channels_iframe_wrp wxw_wechannel_card_not_horizontal&quot;&gt;&lt;mpvideosnap class=&quot;js_uneditable custom_select_card channels_iframe videosnap_video_iframe&quot; data-pluginname=&quot;videosnap&quot; data-id=&quot;export/UzFfAgtgekIEAQAAAAAAib0PkB_4igAAAAstQy6ubaLX4KHWvLEZgBPEt6MkEARcD5mDzNPgMIsZq5LrdD9zpZ8Erdr9ZfHo&quot; data-url=&quot;https://findermp.video.qq.com/251/20304/stodownload?encfilekey=rjD5jyTuFrIpZ2ibE8T7YmwgiahniaXswqzCITZU1iaJv2ywFZMACePJwiaYDTOAgPG04YMWZzv1nErqPGdy907feLdWLG7bc7ISJiaVQaiaEPNq2pGkCqm8BgibZQ&amp;amp;adaptivelytrans=0&amp;amp;bizid=1023&amp;amp;dotrans=0&amp;amp;hy=SH&amp;amp;idx=1&amp;amp;m=&amp;amp;scene=0&amp;amp;token=AxricY7RBHdWqRoCaMHgKfkroXTKUCOYeHqQyibpB5ib2Usxibx1KAGezUXrgUIURyLpkddF2K51X6g&quot; data-headimgurl=&quot;http://wx.qlogo.cn/finderhead/Q3auHgzwzM65dPMvw5LV1YKkNSOYWPNEiax9tdVpZs627Us6C2b4W9A/0&quot; data-username=&quot;v2_060000231003b20faec8c7e18a1ec3ddcb0ceb33b07771cd1cb5408d3b3fdc0ac1072c28df1a@finder&quot; data-nickname=&quot;DataFunTalk&quot; data-desc=&quot;多维分析架构峰会精彩问答&quot; data-nonceid=&quot;9663216517600391026&quot; data-type=&quot;video&quot; data-width=&quot;1080&quot; data-height=&quot;1440&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;今天的分享就到这里，谢谢大家。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;span&gt;在文末分享、点赞、在看，给个3连击呗~&lt;/span&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;span&gt;&lt;strong data-md5=&quot;9a9a0&quot;&gt;&lt;span&gt;01&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;/&lt;/span&gt;&lt;/strong&gt;&lt;strong data-md5=&quot;9a9a0&quot;&gt;&lt;span&gt;分享嘉宾&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;section label=&quot;Powered by xmyeditor.com&quot; data-id=&quot;6336&quot; powered-by=&quot;xmyeditor.com&quot; data-md5=&quot;055ee&quot;&gt;&lt;section data-tools=&quot;小蚂蚁编辑器&quot; powered-by=&quot;xmyeditor.com&quot; data-md5=&quot;055ee&quot;&gt;&lt;section powered-by=&quot;xmyeditor.com&quot; data-md5=&quot;055ee&quot;&gt;&lt;section powered-by=&quot;xmyeditor.com&quot; data-md5=&quot;055ee&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPjEiaHJxqDmK1A3mMfG1gkKQO0MxMOUOtFv5W2Cia5xBNN7mhTPyx2vnfph8ZvBpG6iaQSFCdw4eUtwA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1024&quot;/&gt;&lt;/section&gt;&lt;section powered-by=&quot;xmyeditor.com&quot; data-md5=&quot;055ee&quot;&gt;&lt;section powered-by=&quot;xmyeditor.com&quot; data-md5=&quot;055ee&quot;&gt;&lt;p powered-by=&quot;xmyeditor.com&quot; data-md5=&quot;055ee&quot;&gt;&lt;span&gt;&lt;strong&gt;唐怀东&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xmyeditor.com&quot; data-md5=&quot;055ee&quot;&gt;&lt;p powered-by=&quot;xmyeditor.com&quot; data-md5=&quot;055ee&quot;&gt;&lt;span&gt;&lt;strong data-md5=&quot;44f44&quot;&gt;蔚来汽车&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xmyeditor.com&quot; data-md5=&quot;055ee&quot;&gt;&lt;p powered-by=&quot;xmyeditor.com&quot; data-md5=&quot;055ee&quot;&gt;&lt;span&gt;&lt;span&gt;数据团队负责人&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-id=&quot;46143&quot; data-type=&quot;lspecial02&quot; data-tools=&quot;小蚂蚁编辑器&quot; powered-by=&quot;xmyeditor.com&quot; data-md5=&quot;44f44&quot;&gt;&lt;section powered-by=&quot;xmyeditor.com&quot; data-md5=&quot;44f44&quot;&gt;&lt;section powered-by=&quot;xmyeditor.com&quot; data-md5=&quot;44f44&quot;&gt;&lt;section powered-by=&quot;xmyeditor.com&quot; data-md5=&quot;44f44&quot;&gt;&lt;hr/&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;本科毕业于北京邮电大学，硕士毕业于中国科学院。曾在Yahoo北京研发中心，负责新闻推荐效果分析指标看板开发，以及在猎豹移动，负责新闻推荐算法。目前在蔚来汽车，负责大数据平台&amp;amp;中台建设。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong data-md5=&quot;9a9a0&quot;&gt;&lt;span&gt;02&lt;span&gt;/&lt;/span&gt;&lt;/span&gt;&lt;span&gt;免费下载资料&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;704&quot; data-backw=&quot;578&quot; data-ratio=&quot;0.47148148148148145&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPg5uZSQKuohGHiaFPXq9WicX5tEf7SIANvlNfW6D9E6ZJ7436I11aQajKPBEECUjHoHiaMsgIzOxkibTQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot; title=&quot;大数据专题书.png&quot;/&gt;&lt;/p&gt;&lt;section draggable=&quot;false&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong data-md5=&quot;9a9a0&quot;&gt;&lt;span&gt;03&lt;/span&gt;&lt;/strong&gt;&lt;strong data-md5=&quot;9a9a0&quot;&gt;&lt;span&gt;/&lt;/span&gt;&lt;/strong&gt;&lt;strong data-md5=&quot;9a9a0&quot;&gt;&lt;span&gt;报名看直播 免费领PPT&lt;/span&gt;&lt;/strong&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;1028&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.7777777777777777&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPjEiaHJxqDmK1A3mMfG1gkKQhYvI45oG6AvPUTEIBcia26IbfGc2ic1wkv0bjXib22vibIoqicEEJdfvENQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;section draggable=&quot;false&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong data-md5=&quot;9a9a0&quot;&gt;&lt;span&gt;04&lt;/span&gt;&lt;/strong&gt;&lt;strong data-md5=&quot;9a9a0&quot;&gt;&lt;span&gt;/&lt;/span&gt;&lt;/strong&gt;&lt;strong data-md5=&quot;9a9a0&quot;&gt;&lt;span&gt;关于我们&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section draggable=&quot;false&quot;&gt;&lt;section draggable=&quot;false&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;DataFun：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;专注于大数据、人工智能技术应用的分享与交流。发起于2017年，在北京、上海、深圳、杭州等城市举办超过100+线下和100+线上沙龙、论坛及峰会，已邀请超过2000位专家和学者参与分享。其公众号 DataFunTalk 累计生产原创文章800+，百万+阅读，15万+精准粉丝&lt;span&gt;。&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section draggable=&quot;false&quot;&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mp-common-profile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzU1NTMyOTI4Mw==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/zHbzQPKIBPh87SyjsEtoRFs9iaLyPXYh9ls0BcsiaPDnFkg72xgLsvku13ZRYibyq93DgRoCaTaTkbJj7Hia4dvI1w/0?wx_fmt=png&quot; data-nickname=&quot;DataFunTalk&quot; data-alias=&quot;datafuntalk&quot; data-signature=&quot;专注于大数据、人工智能技术应用的分享与交流。致力于成就百万数据科学家。定期组织技术分享直播，并整理大数据、推荐/搜索算法、广告算法、NLP 自然语言处理算法、智能风控、自动驾驶、机器学习/深度学习等技术应用文章。&quot; data-from=&quot;0&quot; data-is_biz_ban=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;🧐 &lt;/span&gt;&lt;span&gt;&lt;strong&gt;分享、点赞、在看&lt;/strong&gt;&lt;span&gt;，给个&lt;/span&gt;&lt;strong&gt;3连击&lt;/strong&gt;&lt;span&gt;呗！&lt;strong&gt;👇&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;

          
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>30107d6837c58aaaa63b0ad1a0adf6b5</guid>
<title>树模型决策的可解释性与微调(Python)</title>
<link>https://toutiao.io/k/7x66r8b</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mp-common-profile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzUzODYwMDAzNA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/sz_mmbiz_png/NOM5HN2icXzy3oUJC81lHlcGDwlibYtVXDSYeqoFaryPvqlHlNBibLibKGcA9jyVJFAIoKenjxqSpItzhBLqR9DBMw/0?wx_fmt=png&quot; data-nickname=&quot;Python数据科学&quot; data-alias=&quot;PyDataScience&quot; data-signature=&quot;以Python为核心语言，专攻于「数据科学」领域，文章涵盖数据分析，数据挖掘，机器学习等干货内容，分享大量数据挖掘实战项目分析和讲解，以及海量的学习资源。&quot; data-from=&quot;0&quot; data-is_biz_ban=&quot;0&quot;/&gt;&lt;/section&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;一、树模型的解释性&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;集成学习树模型因为其强大的非线性能力及解释性，在表格类数据挖掘等任务中应用频繁且表现优异。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;模型解释性对于某些领域（如金融风控）是极为看重的，对于树模型的解释性，我们常常可以通过输出树模型的结构或使用shap等解释性框架的方法：&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;graphviz 输出树结构&lt;/span&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;&lt;span&gt;# 需要先安装https://graphviz.org/download/&lt;/span&gt;&lt;br/&gt;import os&lt;br/&gt;os.environ[&lt;span&gt;&quot;PATH&quot;&lt;/span&gt;] += os.pathsep + &lt;span&gt;&#x27;D:/Program Files/Graphviz/bin/&#x27;&lt;/span&gt;   &lt;span&gt;# 安装路径&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; k &lt;span&gt;in&lt;/span&gt; range(n_estimators):  &lt;span&gt;#遍历n_estimators棵树的结构&lt;/span&gt;&lt;br/&gt;    ax = lightgbm.plot_tree(lgb, tree_index=k, figsize=(30,20), show_info=[&lt;span&gt;&#x27;split_gain&#x27;&lt;/span&gt;,&lt;span&gt;&#x27;internal_value&#x27;&lt;/span&gt;,&lt;span&gt;&#x27;internal_count&#x27;&lt;/span&gt;,&lt;span&gt;&#x27;internal_weight&#x27;&lt;/span&gt;,&lt;span&gt;&#x27;leaf_count&#x27;&lt;/span&gt;,&lt;span&gt;&#x27;leaf_weight&#x27;&lt;/span&gt;,&lt;span&gt;&#x27;data_percentage&#x27;&lt;/span&gt;])&lt;br/&gt;plt.show()&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.46774193548387094&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTuozeic7IDic8B9M1kbUqiasW9iboRia8WEe7s627EvT743jUH5S8PIvv083dhqcdUftZ1icOYbhxsSkeIw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;section&gt;&lt;span&gt;输出树的决策路径是很直接的方法，但对于大规模（树的数目&amp;gt;3基本就比较绕了）的集成树模型来说，决策就太过于复杂了，最终决策要每棵树累加起来，很难理解。。&lt;/span&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;相关树的可解释工作，可参考如下论文：&lt;/span&gt;&lt;span&gt;https://www.cs.sjtu.edu.cn/~kzhu/papers/kzhu-infocode.pdf&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;接下介绍下常用的几种框架的方法辅助去解释模型：&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;shap框架解释性&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;SHAP基于Shapley值，Shapley值是经济学家Lloyd Shapley提出的博弈论概念。它的核心思想是计算特征对模型输出的边际贡献，再从全局和局部两个层面对“黑盒模型”进行解释。如下几行代码就可以展示该模型的变量对于决策的影响，以Insterest历史利率为例，利率特征值越高（蓝色为低，红色为高），对应shap值越高，说明决策结果越趋近1（在本例金融风控项目里面也就是数值越大，越容易违约）&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;&lt;span&gt;## 本文代码请见 https://github.com/aialgorithm/Blog/tree/master/projects/%E6%B5%B7%E5%A4%96%E9%87%91%E8%9E%8D%E9%A3%8E%E6%8E%A7%E5%AE%9E%E8%B7%B5&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;### 需要先pip install shap&lt;/span&gt;&lt;br/&gt;import shap&lt;br/&gt;&lt;br/&gt;explainer = shap.TreeExplainer(lgb)&lt;br/&gt;shap_values = explainer.shap_values(pd.concat([train_x,test_x]))&lt;br/&gt;shap.summary_plot(shap_values[1], pd.concat([train_x,test_x]),max_display=5,plot_size=(5,5)) &lt;span&gt;#特征重要性可视化&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6959896507115135&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTuozeic7IDic8B9M1kbUqiasW9ZEGSQiceLGnuc0vgkjgsQO2FBja6CI6xIoiaNrNs1iaZNhtibc0tD0qvtg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;773&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;其他模型可解释性框架&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;在可解释性领域，最早出名的方法之一是LIME。它可以帮助解释机器学习模型正在学习什么以及为什么他们以某种方式预测。Lime目前支持对表格的数据，文本分类器和图像分类器的解释。&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;知道为什么模型会以这种方式进行预测对于调整算法是至关重要的。借助LIME的解释，能够理解为什么模型以这种方式运行。如果模型没有按照计划运行，那么很可能在数据准备阶段就犯了错误。&lt;/span&gt;&lt;/section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3125&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTuozeic7IDic8B9M1kbUqiasW9Bp4OuHVtdNPuPehrpeuxwAhc8vh7ACAvt8BcAYn39xLytRVGjyK1QQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1024&quot;/&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;“ Shapash是一个使机器学习对每个人都可以进行解释和理解Python库。Shapash提供了几种类型的可视化，显示了每个人都能理解的明确标签。数据科学家可以更轻松地理解他们的模型并分享结果。最终用户可以使用最标准的摘要来理解模型是如何做出判断的。”&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;Shapash库可以生成交互式仪表盘，并收集了许多可视化图表。与外形/石灰解释性有关。它可以使用SHAP/Lime作为后端，也就是说它只提供了更好看的图表。&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;使用Shapash构建特征贡献图&lt;/span&gt;&lt;/section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8181818181818182&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTuozeic7IDic8B9M1kbUqiasW9ZZtdiaUMGl6g0WKC7Ua1rsT1uh6PCxdzRDkHpjppdQFZMXQN8YV1lwQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;352&quot;/&gt;&lt;section&gt;&lt;span&gt;InterpretML是一个开源的Python包，它向研究人员提供机器学习可解释性算法。InterpretML支持训练可解释模型(glassbox)，以及解释现有的ML管道(blackbox)&lt;/span&gt;&lt;/section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8181818181818182&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTuozeic7IDic8B9M1kbUqiasW9GBKlYmlBntqm1HAva6ZedzbMTVXzVNkszqb1LAibKrrgU9UaZ8NyDvw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;352&quot;/&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;ELI5是一个可以帮助调试机器学习分类器并解释它们的预测的Python库。目前支持以下机器学习框架：scikit-learn、XGBoost、LightGBM CatBoost、Keras&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;ELI5有两种主要的方法来解释分类或回归模型：检查模型参数并说明模型是如何全局工作的；检查模型的单个预测并说明什么模型会做出这样的决定。&lt;/span&gt;&lt;/section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8523985239852399&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTuozeic7IDic8B9M1kbUqiasW9ia6JXJE2hQw94DdelztHCs2V0QvTP5K3t8ImIgsTA8FymOLdzuCJEMQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;271&quot;/&gt;&lt;section&gt;&lt;span&gt;OmniXAI (Omni explained AI的简称)，是Salesforce最近开发并开源的Python库。它提供全方位可解释的人工智能和可解释的机器学习能力来解决实践中机器学习模型在产生中需要判断的几个问题。对于需要在ML过程的各个阶段解释各种类型的数据、模型和解释技术的数据科学家、ML研究人员，OmniXAI希望提供一个一站式的综合库，使可解释的AI变得简单。&lt;/span&gt;&lt;/section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4282258064516129&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTuozeic7IDic8B9M1kbUqiasW97RnbnMaP0WFibgR6T1mdIWdGWZwXRA8SOvibNJyPCoe7CYreicTEq1eTg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;二、微调树模型结构以符合业务解释性&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;但是树模型的解释性也是有局限的，再了解树模型的决策逻辑后，不像逻辑回归（LR）可以较为轻松的调节特征分箱及模型去符合业务逻辑（如收入越低的人通常越可能信用卡逾期，模型决策时可能持相反的逻辑，这时就需要调整了）。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;我们一旦发现树结构或shap值不符合业务逻辑，由于树模型学习通常较复杂，想要依照业务逻辑去调整树结构就有点棘手了，所有很多时候只能推倒原来的模型，数据清洗、筛选、特征选择等 重新学习一个新的模型，直到特征决策在业务上面解释得通。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;在此，本文简单探讨一个可以快速对lightgbm树模型结构进行调整的方法。&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;lightgbm结构&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;首先导出lightgbm单棵树的结构及相应的模型文件：&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;&lt;span&gt;# 本文代码 (https://github.com/aialgorithm/Blog)&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;model.booster_.save_model(&lt;span&gt;&quot;lgbmodel.txt&quot;&lt;/span&gt;) &lt;span&gt;# 导出模型文件&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.46774193548387094&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTuozeic7IDic8B9M1kbUqiasW9DXXfkUQU9wKGRFzxSGKXa1vLUVVxkM6nicdnJwLPLjicXV6xtq3icYVUw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;/figure&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;tree&lt;br/&gt;version=v3&lt;br/&gt;num_class=1&lt;br/&gt;num_tree_per_iteration=1&lt;br/&gt;label_index=0&lt;br/&gt;max_feature_idx=36&lt;br/&gt;objective=binary sigmoid:1&lt;br/&gt;feature_names=total_loan year_of_loan interest monthly_payment class work_year house_exist censor_status use post_code region debt_loan_ratio del_in_18month scoring_low scoring_high known_outstanding_loan known_dero pub_dero_bankrup recircle_b recircle_u initial_list_status app_type title policy_code f0 f1 f2 f3 f4 early_return early_return_amount early_return_amount_3mon issue_date_y issue_date_m issue_date_diff employer_type industry&lt;br/&gt;feature_infos=[818.18181819999995:47272.727270000003] [3:5] [4.7789999999999999:33.978999999999999] [30.440000000000001:1503.8900000000001] [0:6] [0:10] [0:4] [0:2] [0:13] [0:901] [0:49] [0:509.3672727] [0:15] [540:910.90909090000002] [585:1131.818182] [1:59] [0:12] [0:9999] [0:779021] [0:120.6153846] [0:1] [0:1] [0:60905] none [0:9999] [0:9999] [0:9999] [2:9999] [0:9999] [0:5] [0:17446] [0:4821.8999999999996] [2007:2018] [1:12] [2830:6909] -1:4:3:2:0:1:5 -1:13:11:3:1:2:10:7:8:12:0:4:5:9:6&lt;br/&gt;tree_sizes=770&lt;br/&gt;&lt;br/&gt;Tree=0&lt;br/&gt;num_leaves=6&lt;br/&gt;num_cat=0&lt;br/&gt;split_feature=30 2 16 15 2&lt;br/&gt;split_gain=3093.94 124.594 59.0243 46.1935 42.6584&lt;br/&gt;threshold=1.0000000180025095e-35 9.9675000000000029 1.5000000000000002 17.500000000000004 15.961500000000003&lt;br/&gt;decision_type=2 2 2 2 2&lt;br/&gt;left_child=1 -1 3 -2 -3&lt;br/&gt;right_child=2 4 -4 -5 -6&lt;br/&gt;leaf_value=0.023461476907437533 -0.17987415362524772 0.10323905611372351 -0.026732447730002745 -0.10633877114664755 0.14703056722907529&lt;br/&gt;leaf_weight=147.41318297386169 569.9415502846241 502.41849474608898 30.554571613669395 100.48724548518658 399.18497054278851&lt;br/&gt;leaf_count=544 3633 1325 133 543 822&lt;br/&gt;internal_value=-5.60284e-08 0.108692 -0.162658 -0.168852 0.122628&lt;br/&gt;internal_weight=0 1049.02 700.983 670.429 901.603&lt;br/&gt;internal_count=7000 2691 4309 4176 2147&lt;br/&gt;is_linear=0&lt;br/&gt;shrinkage=1&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;end of trees&lt;br/&gt;&lt;br/&gt;feature_importances:&lt;br/&gt;interest=2&lt;br/&gt;known_outstanding_loan=1&lt;br/&gt;known_dero=1&lt;br/&gt;early_return_amount=1&lt;br/&gt;&lt;br/&gt;parameters:&lt;br/&gt;[boosting: gbdt]&lt;br/&gt;[objective: binary]&lt;br/&gt;[metric: auc]&lt;br/&gt;[tree_learner: serial]&lt;br/&gt;[device_type: cpu]&lt;br/&gt;[data: ]&lt;br/&gt;[valid: ]&lt;br/&gt;[num_iterations: 1]&lt;br/&gt;[learning_rate: 0.1]&lt;br/&gt;[num_leaves: 6]&lt;br/&gt;[num_threads: -1]&lt;br/&gt;[deterministic: 0]&lt;br/&gt;[force_col_wise: 0]&lt;br/&gt;[force_row_wise: 0]&lt;br/&gt;[histogram_pool_size: -1]&lt;br/&gt;[max_depth: -1]&lt;br/&gt;[min_data_in_leaf: 20]&lt;br/&gt;[min_sum_hessian_in_leaf: 0.001]&lt;br/&gt;[bagging_fraction: 1]&lt;br/&gt;[pos_bagging_fraction: 1]&lt;br/&gt;[neg_bagging_fraction: 1]&lt;br/&gt;[bagging_freq: 0]&lt;br/&gt;[bagging_seed: 7719]&lt;br/&gt;[feature_fraction: 1]&lt;br/&gt;[feature_fraction_bynode: 1]&lt;br/&gt;[feature_fraction_seed: 2437]&lt;br/&gt;[extra_trees: 0]&lt;br/&gt;[extra_seed: 11797]&lt;br/&gt;[early_stopping_round: 0]&lt;br/&gt;[first_metric_only: 0]&lt;br/&gt;[max_delta_step: 0]&lt;br/&gt;[lambda_l1: 0]&lt;br/&gt;[lambda_l2: 0]&lt;br/&gt;[linear_lambda: 0]&lt;br/&gt;[min_gain_to_split: 0]&lt;br/&gt;[drop_rate: 0.1]&lt;br/&gt;[max_drop: 50]&lt;br/&gt;[skip_drop: 0.5]&lt;br/&gt;[xgboost_dart_mode: 0]&lt;br/&gt;[uniform_drop: 0]&lt;br/&gt;[drop_seed: 21238]&lt;br/&gt;[top_rate: 0.2]&lt;br/&gt;[other_rate: 0.1]&lt;br/&gt;[min_data_per_group: 100]&lt;br/&gt;[max_cat_threshold: 32]&lt;br/&gt;[cat_l2: 10]&lt;br/&gt;[cat_smooth: 10]&lt;br/&gt;[max_cat_to_onehot: 4]&lt;br/&gt;[top_k: 20]&lt;br/&gt;[monotone_constraints: ]&lt;br/&gt;[monotone_constraints_method: basic]&lt;br/&gt;[monotone_penalty: 0]&lt;br/&gt;[feature_contri: ]&lt;br/&gt;[forcedsplits_filename: ]&lt;br/&gt;[refit_decay_rate: 0.9]&lt;br/&gt;[cegb_tradeoff: 1]&lt;br/&gt;[cegb_penalty_split: 0]&lt;br/&gt;[cegb_penalty_feature_lazy: ]&lt;br/&gt;[cegb_penalty_feature_coupled: ]&lt;br/&gt;[path_smooth: 0]&lt;br/&gt;[interaction_constraints: ]&lt;br/&gt;[verbosity: -1]&lt;br/&gt;[saved_feature_importance_type: 0]&lt;br/&gt;[linear_tree: 0]&lt;br/&gt;[max_bin: 255]&lt;br/&gt;[max_bin_by_feature: ]&lt;br/&gt;[min_data_in_bin: 3]&lt;br/&gt;[bin_construct_sample_cnt: 200000]&lt;br/&gt;[data_random_seed: 38]&lt;br/&gt;[is_enable_sparse: 1]&lt;br/&gt;[enable_bundle: 1]&lt;br/&gt;[use_missing: 1]&lt;br/&gt;[zero_as_missing: 0]&lt;br/&gt;[feature_pre_filter: 1]&lt;br/&gt;[pre_partition: 0]&lt;br/&gt;[two_round: 0]&lt;br/&gt;[header: 0]&lt;br/&gt;[label_column: ]&lt;br/&gt;[weight_column: ]&lt;br/&gt;[group_column: ]&lt;br/&gt;[ignore_column: ]&lt;br/&gt;[categorical_feature: 35,36]&lt;br/&gt;[forcedbins_filename: ]&lt;br/&gt;[precise_float_parser: 0]&lt;br/&gt;[objective_seed: 8855]&lt;br/&gt;[num_class: 1]&lt;br/&gt;[is_unbalance: 0]&lt;br/&gt;[scale_pos_weight: 1]&lt;br/&gt;[sigmoid: 1]&lt;br/&gt;[boost_from_average: 1]&lt;br/&gt;[reg_sqrt: 0]&lt;br/&gt;[alpha: 0.9]&lt;br/&gt;[fair_c: 1]&lt;br/&gt;[poisson_max_delta_step: 0.7]&lt;br/&gt;[tweedie_variance_power: 1.5]&lt;br/&gt;[lambdarank_truncation_level: 30]&lt;br/&gt;[lambdarank_norm: 1]&lt;br/&gt;[label_gain: ]&lt;br/&gt;[eval_at: ]&lt;br/&gt;[multi_error_top_k: 1]&lt;br/&gt;[auc_mu_weights: ]&lt;br/&gt;[num_machines: 1]&lt;br/&gt;[local_listen_port: 12400]&lt;br/&gt;[time_out: 120]&lt;br/&gt;[machine_list_filename: ]&lt;br/&gt;[machines: ]&lt;br/&gt;[gpu_platform_id: -1]&lt;br/&gt;[gpu_device_id: -1]&lt;br/&gt;[gpu_use_dp: 0]&lt;br/&gt;[num_gpu: 1]&lt;br/&gt;&lt;br/&gt;end of parameters&lt;br/&gt;&lt;br/&gt;pandas_categorical:[[&lt;span&gt;&quot;\u4e0a\u5e02\u4f01\u4e1a&quot;&lt;/span&gt;, &lt;span&gt;&quot;\u4e16\u754c\u4e94\u767e\u5f3a&quot;&lt;/span&gt;, &lt;span&gt;&quot;\u5e7c\u6559\u4e0e\u4e2d\u5c0f\u5b66\u6821&quot;&lt;/span&gt;, &lt;span&gt;&quot;\u653f\u5e9c\u673a\u6784&quot;&lt;/span&gt;, &lt;span&gt;&quot;\u666e\u901a\u4f01\u4e1a&quot;&lt;/span&gt;, &lt;span&gt;&quot;\u9ad8\u7b49\u6559\u80b2\u673a\u6784&quot;&lt;/span&gt;], [&lt;span&gt;&quot;\u4ea4\u901a\u8fd0\u8f93\u3001\u4ed3\u50a8\u548c\u90ae\u653f\u4e1a&quot;&lt;/span&gt;, &lt;span&gt;&quot;\u4f4f\u5bbf\u548c\u9910\u996e\u4e1a&quot;&lt;/span&gt;, &lt;span&gt;&quot;\u4fe1\u606f\u4f20\u8f93\u3001\u8f6f\u4ef6\u548c\u4fe1\u606f\u6280\u672f\u670d\u52a1\u4e1a&quot;&lt;/span&gt;, &lt;span&gt;&quot;\u516c\u5171\u670d\u52a1\u3001\u793e\u4f1a\u7ec4\u7ec7&quot;&lt;/span&gt;, &lt;span&gt;&quot;\u519c\u3001\u6797\u3001\u7267\u3001\u6e14\u4e1a&quot;&lt;/span&gt;, &lt;span&gt;&quot;\u5236\u9020\u4e1a&quot;&lt;/span&gt;, &lt;span&gt;&quot;\u56fd\u9645\u7ec4\u7ec7&quot;&lt;/span&gt;, &lt;span&gt;&quot;\u5efa\u7b51\u4e1a&quot;&lt;/span&gt;, &lt;span&gt;&quot;\u623f\u5730\u4ea7\u4e1a&quot;&lt;/span&gt;, &lt;span&gt;&quot;\u6279\u53d1\u548c\u96f6\u552e\u4e1a&quot;&lt;/span&gt;, &lt;span&gt;&quot;\u6587\u5316\u548c\u4f53\u80b2\u4e1a&quot;&lt;/span&gt;, &lt;span&gt;&quot;\u7535\u529b\u3001\u70ed\u529b\u751f\u4ea7\u4f9b\u5e94\u4e1a&quot;&lt;/span&gt;, &lt;span&gt;&quot;\u91c7\u77ff\u4e1a&quot;&lt;/span&gt;, &lt;span&gt;&quot;\u91d1\u878d\u4e1a&quot;&lt;/span&gt;]]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;lightgbm集成多棵二叉树的树模型，以如下一颗二叉树的一个父节点及其两个叶子分支具体解释（其他树及节点依此类推）， 下面内部节点是以&lt;/span&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;在金融风控领域是很注重决策的可解释性，有时我们可能发现某一个叶子节点的决策是不符合业务解释性的。比如，业务上认为利率越高 违约概率应该越低，那我们上图的节点就是不符合业务经验的（注：这里只是假设，实际上图节点的决策 还是符合业务经验的）&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;那么这时最快微调树模型的办法就是直接对这个模型的这个叶子节点剪枝掉，只保留内部节点做决策。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;那么，如何快速地对lightgbm手动调整树结构（如剪枝）呢？&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;lightgbm手动剪枝&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;&lt;span&gt;这里有个取巧的剪枝办法，可以在保留原始树结构的前提下，修改特定叶子节点的分数值为他们上级父节点的分数值，那逻辑上就等同于“剪枝”了&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;剪枝前&lt;/span&gt;&lt;/p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4703296703296703&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTuozeic7IDic8B9M1kbUqiasW9Qz6qUaePNY7BOEQ1icwxmcBCriaSUvM0cYiaRaTLXibc9ia92QwGDY0vlmQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;455&quot;/&gt;&lt;p&gt;&lt;span&gt;对应的测试集的模型效果&lt;/span&gt;&lt;/p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.0724191063174114&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTuozeic7IDic8B9M1kbUqiasW9t5ghoNtv2qsvmaAZLicaib7zTfvmxsjebSMRL8NleNHFAiaUEib5icU1Lag/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;649&quot;/&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;剪枝后 （修改叶子节点为父节点的分数）&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;可以手动修改下模型文件对应叶子节点的分数值：&lt;/span&gt;&lt;/section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3419354838709677&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTuozeic7IDic8B9M1kbUqiasW9vYsFbe60sXHZs2YMXUfsLnMAMnicrtTS2iaKCOb22bwalFMB0Pro9fVA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot;/&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.42926239419588874&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTuozeic7IDic8B9M1kbUqiasW9Fngr5e8gYpjNT3aUTZQLq75QmrokwMn3icT8icJkQ7B9QiadfibT7hZNsg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;827&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;我们再验证下剪枝前后，测试集的模型效果差异：auc降了1%，ks变化不大；&lt;/span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.06451612903225806&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eyibF6kJBjTuozeic7IDic8B9M1kbUqiasW9TUaMDIr2Aemt2eLEQN76hBldjl4xBm8wWAzzyT2wM0FJicAO1KR2hMQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;775&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;通过剪枝去优化模型复杂度或者去符合合理业务经验，对模型带来都是正则化效果模型可以减少统计噪音的影响（减少过拟合），有更好的泛化效果。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5091666666666667&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/eyibF6kJBjTuIPwS7FopFX54SpBX97VarEKbrgnk8CicEFmqwh6ibmj8iaicAO5k4BCibI0lzuYicHraYgEXQm86ibRFFA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1200&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;当然本方法建立在小规模集成学习的树模型，如果动则几百上千颗的大规模树模型，人为调整每一颗的树结构，这也不现实。。&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mp-common-profile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzUzODYwMDAzNA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/sz_mmbiz_png/NOM5HN2icXzy3oUJC81lHlcGDwlibYtVXDSYeqoFaryPvqlHlNBibLibKGcA9jyVJFAIoKenjxqSpItzhBLqR9DBMw/0?wx_fmt=png&quot; data-nickname=&quot;Python数据科学&quot; data-alias=&quot;PyDataScience&quot; data-signature=&quot;以Python为核心语言，专攻于「数据科学」领域，文章涵盖数据分析，数据挖掘，机器学习等干货内容，分享大量数据挖掘实战项目分析和讲解，以及海量的学习资源。&quot; data-from=&quot;0&quot; data-is_biz_ban=&quot;0&quot;/&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;&lt;strong&gt;推荐阅读&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzUzODYwMDAzNA==&amp;amp;action=getalbum&amp;amp;album_id=1699019347278561282#wechat_redirect&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot;&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;1. &lt;/span&gt;pandas100个骚操作&lt;/em&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;2. &lt;/em&gt;&lt;em&gt;&lt;span&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzUzODYwMDAzNA==&amp;amp;action=getalbum&amp;amp;album_id=2217035551810125830#wechat_redirect&quot; textvalue=&quot;pandas数据清洗&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot;&gt;pandas数据清洗&lt;/a&gt;&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;3 &lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzUzODYwMDAzNA==&amp;amp;action=getalbum&amp;amp;album_id=1838255778403581970#wechat_redirect&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot;&gt;&lt;span&gt;&lt;em&gt;机器学习原创系列&lt;/em&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>