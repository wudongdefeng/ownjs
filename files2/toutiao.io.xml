<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>8631613f34e07b1ff2bd64cb8a728f6f</guid>
<title>ä¸ƒæ­¥åˆ¶ä½œç²¾ç®€é•œåƒï¼ŒSo easy</title>
<link>https://toutiao.io/k/s48j8ku</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;æ–‡ç« æ¥è‡ªé»„åº†å…µè€å¸ˆçš„ç½‘æ˜“èœ‚å·¢ã€Šç©è½¬ Docker é•œåƒã€‹ç³»åˆ—https://github.com/bingohuang/play-docker-imagesï¼ŒåŸæœ¬åˆ†ä¸ºä¸Šä¸‹ä¸¤ç¯‡ï¼Œè¿™é‡Œç”±ç”Ÿæ€å›æ•´åˆæˆä¸€ç¯‡ä¾¿äºé˜…è¯»ã€‚å¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;strong&gt;ç›®å½•&lt;/strong&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;ä»‹ç»&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;é•œåƒå±‚(Layers)&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;åˆ¶ä½œæ­¥éª¤&lt;/p&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;lab-1ï¼šåˆå§‹åŒ–æ„å»º Redis é•œåƒ&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;lab-2ï¼šä¼˜åŒ–åŸºç¡€é•œåƒ&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;lab-3ï¼šä¸²è” Dockerfile æŒ‡ä»¤&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;lab-4ï¼šå‹ç¼©ä½ çš„é•œåƒ&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;lab-5ï¼šä½¿ç”¨æœ€ç²¾ç®€çš„ base image&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;lab-6ï¼šæå–åŠ¨æ€é“¾æ¥çš„ .so æ–‡ä»¶&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;lab-7ï¼šä¸º Go åº”ç”¨æ„å»ºç²¾ç®€é•œåƒ&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;p&gt;æ€»ç»“&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;å‚è€ƒ&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ä½œè€…ç®€ä»‹ï¼š&lt;/strong&gt; é»„åº†å…µï¼Œæ¯•ä¸šäºæµ™å¤§ï¼Œå·¥ä½œäºç½‘æ˜“ï¼Œä»äº‹äº‘è®¡ç®—ã€Dockerå’ŒGoç›¸å…³å¼€å‘åŠå¸ƒé“å·¥ä½œï¼›å–œæ¬¢å¼€æºï¼Œä¹äºåˆ†äº«ï¼Œå‹¤äºå¸ƒé“ï¼ŒæŠ˜è…¾è¿‡å¼€æºå°å·¥å…·ï¼Œåˆ¶ä½œè¿‡Dockerè¯¾ç¨‹ï¼Œåˆ†äº«è¿‡ Gopher Meetupã€‚æˆ‘çš„ Github è´¦å·ï¼šhttps://github.com/bingohuangï¼Œæ¬¢è¿ä¸€èµ·æ¥ &lt;code&gt;å†™ Go ç© Docker&lt;/code&gt;ï¼&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-fileid=&quot;100000304&quot; data-ratio=&quot;0.8055555555555556&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/otNtibX96l9ibwMmqp4H0uRMU8ib3Rar6K6Tq2792RY1EBs7ibI50bXpz3KssjHmxsM6daT6ZribO47ibUCpjmUG97Ng/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;792&quot;/&gt;&lt;figcaption&gt;img&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä»‹ç»&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‰æ®µæ—¶é—´ç½‘æ˜“èœ‚å·¢æ›¾ç»æ¨å‡ºèœ‚å·¢ &lt;code&gt;Logo&lt;/code&gt; Tæ¤ï¼Œç”¨çš„æ­£æ˜¯ Docker é•œåƒåˆ¶ä½œï¼Œæœ€ç¥å¥‡çš„æ˜¯ï¼Œå®ƒæœ€ç»ˆçš„é•œåƒå¤§å°åªæœ‰ &lt;code&gt;585&lt;/code&gt; å­—èŠ‚ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;$Â dockerÂ imagesÂ |Â grepÂ hub.c.163.com/public/logo&lt;br/&gt;REPOSITORYÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â TAGÂ Â Â Â Â Â Â Â Â Â Â IMAGEÂ IDÂ Â Â Â Â Â Â Â Â CREATEDÂ Â Â Â Â Â Â SIZE&lt;br/&gt;hub.c.163.com/public/logoÂ Â Â Â Â Â Â latestÂ Â Â Â Â Â Â Â 6fbdd13cd204Â Â Â Â Â 11Â daysÂ agoÂ Â Â 585Â B&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰äº›é•œåƒéƒ½ä¸æ˜¯æˆ‘ä»¬è‡ªå·±æ¥æ‰“åŒ…çš„ï¼ˆæ¯”å¦‚ä¸‹è½½å…¬å…±é•œåƒï¼‰ï¼Œé‚£æ˜¯å¦æœ‰ä¸€äº›é€šç”¨çš„ç²¾ç®€ Docker é•œåƒçš„æ‰‹æ®µå‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œç”šè‡³æœ‰çš„é•œåƒå¯ä»¥ç²¾ç®€ 98%ã€‚ç²¾ç®€é•œåƒå¤§å°çš„å¥½å¤„ä¸è¨€è€Œå–»ï¼Œæ—¢èŠ‚çœäº†å­˜å‚¨ç©ºé—´ï¼Œåˆèƒ½èŠ‚çœå¸¦å®½ï¼ŒåŠ å¿«ä¼ è¾“ç­‰ã€‚é‚£å¥½ï¼Œæ¥ä¸‹æ¥å°±è¯·è·Ÿéšæˆ‘æ¥å­¦ä¹ æ€ä¹ˆåˆ¶ä½œç²¾ç®€ Docker é•œåƒã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é•œåƒå±‚(Layers)&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å¼€å§‹åˆ¶ä½œé•œåƒä¹‹å‰ï¼Œé¦–å…ˆäº†è§£ä¸‹é•œåƒçš„åŸç†ï¼Œè€Œè¿™å…¶ä¸­æœ€é‡è¦çš„æ¦‚å¿µå°±æ˜¯&lt;code&gt;é•œåƒå±‚(Layers)&lt;/code&gt;ã€‚é•œåƒå±‚ä¾èµ–äºä¸€ç³»åˆ—çš„åº•å±‚æŠ€æœ¯ï¼Œæ¯”å¦‚æ–‡ä»¶ç³»ç»Ÿ(filesystems)ã€å†™æ—¶å¤åˆ¶(copy-on-write)ã€è”åˆæŒ‚è½½(union mounts)ç­‰ï¼Œå¹¸è¿çš„æ˜¯ä½ å¯ä»¥åœ¨å¾ˆå¤šåœ°æ–¹å­¦ä¹ åˆ°&lt;span&gt;è¿™äº›æŠ€æœ¯&lt;/span&gt;&lt;sup&gt;[1]&lt;/sup&gt;ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°æŠ€æœ¯ç»†èŠ‚ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-fileid=&quot;100000305&quot; data-ratio=&quot;0.75&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/otNtibX96l9ibwMmqp4H0uRMU8ib3Rar6K6y1jCKRUD4KmGicxiauzaCuiaEJ2HLakOY1ZmlvoXn6cYFTTgGL0ibXgyHA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;800&quot;/&gt;&lt;figcaption&gt;img&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ€»çš„æ¥è¯´ï¼Œä½ æœ€éœ€è¦è®°ä½è¿™ç‚¹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;åœ¨ Dockerfile ä¸­ï¼ŒÂ æ¯ä¸€æ¡æŒ‡ä»¤éƒ½ä¼šåˆ›å»ºä¸€ä¸ªé•œåƒå±‚ï¼Œç»§è€Œä¼šå¢åŠ æ•´ä½“é•œåƒçš„å¤§å°ã€‚&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸¾ä¾‹æ¥è¯´ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;FROM&lt;/span&gt;Â busybox&lt;br/&gt;&lt;span&gt;RUN&lt;/span&gt;&lt;span&gt;Â mkdirÂ /tmp/foo&lt;/span&gt;&lt;br/&gt;&lt;span&gt;RUN&lt;/span&gt;&lt;span&gt;Â ddÂ &lt;span&gt;if&lt;/span&gt;=/dev/zeroÂ of=/tmp/foo/barÂ bs=1048576Â count=100&lt;/span&gt;&lt;br/&gt;&lt;span&gt;RUN&lt;/span&gt;&lt;span&gt;Â rmÂ /tmp/foo/bar&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»¥ä¸Š Dockerfile å¹²äº†å‡ ä»¶äº‹ï¼š&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;åŸºäºä¸€ä¸ªå®˜æ–¹çš„åŸºç¡€é•œåƒ busybox(åªæœ‰1Må¤š)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹(/tmp/foo)å’Œä¸€ä¸ªæ–‡ä»¶(bar)ï¼Œè¯¥æ–‡ä»¶åˆ†é…äº†100Må¤§å°&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å†æŠŠè¿™ä¸ªå¤§æ–‡ä»¶åˆ é™¤&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®é™…ä¸Šå®ƒæœ€ç»ˆä»€ä¹ˆä¹Ÿæ²¡åšï¼Œæˆ‘ä»¬æŠŠå®ƒæ„å»ºæˆé•œåƒï¼ˆæ„å»ºå¯ä»¥å‚è€ƒ&lt;span&gt;ä¸€æœŸ&lt;/span&gt;&lt;sup&gt;[2]&lt;/sup&gt;ï¼‰ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;dockerÂ buildÂ -tÂ busybox:&lt;span&gt;test&lt;/span&gt;Â .&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å†è®©æˆ‘ä»¬æ¥å¯¹æ¯”ä¸‹åŸç”Ÿçš„ busybox é•œåƒå¤§å°å’Œæˆ‘ä»¬ç”Ÿæˆçš„é•œåƒå¤§å°ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;$Â dockerÂ imagesÂ |Â grepÂ busybox&lt;br/&gt;busyboxÂ Â Â Â &lt;span&gt;test&lt;/span&gt;Â Â Â Â Â 896c63dbdb96Â Â Â Â 2Â secondsÂ agoÂ Â Â Â 106Â MB&lt;br/&gt;busyboxÂ Â Â Â latestÂ Â Â 2b8fd9751c4cÂ Â Â Â 9Â weeksÂ agoÂ Â Â Â Â Â 1.093Â MB&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡ºä¹æ„æ–™çš„æ˜¯ï¼Œå´ç”Ÿæˆäº† 106 MB çš„é•œåƒã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤šå‡ºäº† 100 Mï¼Œè¿™æ˜¯ä¸ºä½•ï¼Ÿè¿™ç‚¹å’Œ Git ç±»ä¼¼ï¼ˆéƒ½ç”¨åˆ°äº†Copy-On-WriteæŠ€æœ¯ï¼‰ï¼Œæˆ‘ç”¨ git åšäº†å¦‚ä¸‹ä¸¤æ¬¡æäº¤ï¼ˆæ·»åŠ äº†åˆåˆ é™¤ï¼‰ï¼Œè¯·é—® &lt;code&gt;A_VERY_LARGE_FILE&lt;/code&gt; è¿˜åœ¨ git ä»“åº“ä¸­å—ï¼Ÿ&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;$Â gitÂ addÂ Â A_VERY_LARGE_FILE&lt;br/&gt;$Â gitÂ commit&lt;br/&gt;$Â gitÂ rmÂ Â A_VERY_LARGE_FILE&lt;br/&gt;$Â gitÂ commit&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç­”æ¡ˆæ˜¯:åœ¨çš„ï¼Œå¹¶ä¸”ä¼šå ç”¨ä»“åº“çš„å¤§å°ã€‚Git ä¼šä¿å­˜æ¯ä¸€æ¬¡æäº¤çš„æ–‡ä»¶ç‰ˆæœ¬ï¼Œè€Œ Dockerfile ä¸­æ¯ä¸€æ¡æŒ‡ä»¤éƒ½å¯èƒ½å¢åŠ æ•´ä½“é•œåƒçš„å¤§å°ï¼Œå³ä½¿å®ƒæœ€ç»ˆä»€ä¹ˆäº‹æƒ…éƒ½æ²¡åšã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;åˆ¶ä½œæ­¥éª¤&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº†è§£äº†é•œåƒå±‚çŸ¥è¯†ï¼Œæœ‰åŠ©äºæˆ‘ä»¬æ¥ä¸‹æ¥åˆ¶ä½œç²¾ç®€é•œåƒã€‚è¿™é‡Œå¼€å§‹ï¼Œä»¥æœ€å¸¸ç”¨çš„å¼€æºç¼“å­˜è½¯ä»¶ &lt;code&gt;Redis&lt;/code&gt; ä¸ºä¾‹ï¼Œä»ä¸€æ­¥æ­¥è¯•éªŒï¼Œæ¥ä»‹ç»å¦‚ä½•åˆ¶ä½œæ›´ç²¾ç®€çš„ Docker é•œåƒã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;lab-1ï¼šåˆå§‹åŒ–æ„å»º Redis é•œåƒ&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ç›´æ¥ä¸Š &lt;code&gt;Dockerfile&lt;/code&gt; ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;FROM&lt;/span&gt;Â ubuntu:trusty&lt;br/&gt;&lt;span&gt;ENV&lt;/span&gt;Â VERÂ Â Â Â Â &lt;span&gt;3.0&lt;/span&gt;.&lt;span&gt;0&lt;/span&gt;&lt;br/&gt;&lt;span&gt;ENV&lt;/span&gt;Â TARBALLÂ http://download.redis.io/releases/redis-$VER.tar.gz&lt;br/&gt;&lt;span&gt;#Â ==&amp;gt;Â InstallÂ curlÂ andÂ helperÂ tools...&lt;/span&gt;&lt;br/&gt;&lt;span&gt;RUN&lt;/span&gt;&lt;span&gt;Â apt-getÂ update&lt;/span&gt;&lt;br/&gt;&lt;span&gt;RUN&lt;/span&gt;&lt;span&gt;Â apt-getÂ installÂ -yÂ Â curlÂ makeÂ gcc&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â ==&amp;gt;Â Download,Â compile,Â andÂ install...&lt;/span&gt;&lt;br/&gt;&lt;span&gt;RUN&lt;/span&gt;&lt;span&gt;Â curlÂ -LÂ &lt;span&gt;$TARBALL&lt;/span&gt;Â |Â tarÂ zxv&lt;/span&gt;&lt;br/&gt;&lt;span&gt;WORKDIR&lt;/span&gt;&lt;span&gt;Â Â redis-&lt;span&gt;$VER&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;RUN&lt;/span&gt;&lt;span&gt;Â make&lt;/span&gt;&lt;br/&gt;&lt;span&gt;RUN&lt;/span&gt;&lt;span&gt;Â makeÂ install&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#...&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â ==&amp;gt;Â CleanÂ up...&lt;/span&gt;&lt;br/&gt;&lt;span&gt;WORKDIR&lt;/span&gt;&lt;span&gt;Â /&lt;/span&gt;&lt;br/&gt;&lt;span&gt;RUN&lt;/span&gt;&lt;span&gt;Â apt-getÂ removeÂ -yÂ --auto-removeÂ curlÂ makeÂ gcc&lt;/span&gt;&lt;br/&gt;&lt;span&gt;RUN&lt;/span&gt;&lt;span&gt;Â apt-getÂ clean&lt;/span&gt;&lt;br/&gt;&lt;span&gt;RUN&lt;/span&gt;&lt;span&gt;Â rmÂ -rfÂ /var/lib/apt/lists/*Â Â /redis-&lt;span&gt;$VER&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#...&lt;/span&gt;&lt;br/&gt;&lt;span&gt;CMD&lt;/span&gt;&lt;span&gt;Â [&lt;span&gt;&quot;redis-server&quot;&lt;/span&gt;]&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»“åˆæ³¨é‡Šï¼Œè¯»èµ·æ¥å¹¶ä¸å›°éš¾ï¼Œç”¨åˆ°çš„éƒ½æ˜¯å¸¸è§„çš„å‡ ä¸ªå‘½ä»¤ï¼Œç®€è¦ä»‹ç»å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;FROMï¼šé¡¶å¤´å†™ï¼ŒæŒ‡å®šä¸€ä¸ªåŸºç¡€é•œåƒï¼Œæ­¤å¤„åŸºäº &lt;code&gt;ubuntu:trusty&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ENVï¼šè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œè¿™é‡Œè®¾ç½®äº† &lt;code&gt;VER&lt;/code&gt; å’Œ &lt;code&gt;TARBALL&lt;/code&gt; ä¸¤ä¸ªç¯å¢ƒå˜é‡&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;RUNï¼šæœ€å¸¸ç”¨çš„ Dockerfile æŒ‡ä»¤ï¼Œç”¨äºè¿è¡Œå„ç§å‘½ä»¤ï¼Œè¿™é‡Œè°ƒç”¨äº† 8 æ¬¡ RUN æŒ‡ä»¤&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;WORKDIRï¼šæŒ‡å®šå·¥ä½œç›®å½•ï¼Œç›¸å½“äºæŒ‡ä»¤ &lt;code&gt;cd&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;CMDï¼šæŒ‡å®šé•œåƒé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ï¼Œæ­¤å¤„é»˜è®¤æ‰§è¡Œ redis-server å‘½ä»¤æ¥å¯åŠ¨ redis&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æ‰§è¡Œæ„å»ºï¼š&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;$Â dockerÂ buildÂ Â -tÂ redis:lab-1Â Â .&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;em&gt;æ³¨ï¼šå›½å†…ç½‘ç»œï¼Œæ›´æ–°ä¸‹è½½å¯èƒ½ä¼šè¾ƒæ…¢&lt;/em&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æŸ¥çœ‹å¤§å°ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Lab&lt;/th&gt;&lt;th&gt;iamge&lt;/th&gt;&lt;th&gt;Base&lt;/th&gt;&lt;th&gt;Lang&lt;/th&gt;&lt;th&gt;.red[*]&lt;/th&gt;&lt;th&gt;Size (MB)&lt;/th&gt;&lt;th&gt;Â Â  Memo&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;1&lt;/td&gt;&lt;td&gt;redis&lt;/td&gt;&lt;td&gt;&lt;code&gt;ubuntu&lt;/code&gt;&lt;/td&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;dyn&lt;/td&gt;&lt;td&gt;347.3&lt;/td&gt;&lt;td&gt;Â Â  base ubuntu&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŠ¨è¾„å°±æœ‰ 300å¤š M çš„å¤§å°ï¼Œä¸èƒ½å¿ï¼Œä¸‹é¢æˆ‘ä»¬å¼€å§‹ä¸€æ­¥æ­¥ä¼˜åŒ–ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;lab-2ï¼šä¼˜åŒ–åŸºç¡€é•œåƒ&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ç²¾ç®€1ï¼šé€‰ç”¨æ›´å°çš„åŸºç¡€é•œåƒã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¸¸ç”¨çš„ Linux ç³»ç»Ÿé•œåƒä¸€èˆ¬æœ‰ &lt;code&gt;ubuntu&lt;/code&gt;ã€&lt;code&gt;centos&lt;/code&gt;ã€&lt;code&gt;debian&lt;/code&gt;ï¼Œå…¶ä¸­&lt;code&gt;debian&lt;/code&gt; æ›´è½»é‡ï¼Œè€Œä¸”å¤Ÿç”¨ï¼Œå¯¹æ¯”å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;REPOSITORYÂ Â Â Â Â Â Â Â Â Â TAGÂ Â Â Â Â Â Â Â IMAGEÂ IDÂ Â Â Â Â Â Â Â Â VIRTUALÂ SIZE&lt;br/&gt;---------------Â Â Â Â Â ------Â Â Â Â Â ------------Â Â Â Â Â ------------&lt;br/&gt;centosÂ Â Â Â Â Â Â Â Â Â Â Â Â Â 7Â Â Â Â Â Â Â Â Â Â 214a4932132aÂ Â Â Â Â 215.7Â MB&lt;br/&gt;centosÂ Â Â Â Â Â Â Â Â Â Â Â Â Â 6Â Â Â Â Â Â Â Â Â Â f6808a3e4d9eÂ Â Â Â Â 202.6Â MB&lt;br/&gt;ubuntuÂ Â Â Â Â Â Â Â Â Â Â Â Â Â trustyÂ Â Â Â Â d0955f21bf24Â Â Â Â Â 188.3Â MB&lt;br/&gt;ubuntuÂ Â Â Â Â Â Â Â Â Â Â Â Â Â preciseÂ Â Â Â 9c5e4be642b7Â Â Â Â Â 131.9Â MB&lt;br/&gt;debianÂ Â Â Â Â Â Â Â Â Â Â Â Â Â jessieÂ Â Â Â Â 65688f7c61c4Â Â Â Â Â 122.8Â MB&lt;br/&gt;debianÂ Â Â Â Â Â Â Â Â Â Â Â Â Â wheezyÂ Â Â Â Â 1265e16d0c28Â Â Â Â Â 84.96Â MB&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ›¿æ¢ &lt;code&gt;debian:jessie&lt;/code&gt; ä½œä¸ºæˆ‘ä»¬çš„åŸºç¡€é•œåƒã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ä¼˜åŒ– Dockerfileï¼š&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;FROM&lt;/span&gt;Â debian:jessie&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#...&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æ‰§è¡Œæ„å»ºï¼š&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;$Â dockerÂ buildÂ Â -tÂ redis:lab-2Â Â .&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æŸ¥çœ‹å¤§å°ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Lab&lt;/th&gt;&lt;th&gt;image&lt;/th&gt;&lt;th&gt;Base&lt;/th&gt;&lt;th&gt;Lang&lt;/th&gt;&lt;th&gt;.red[*]&lt;/th&gt;&lt;th&gt;Size (MB)&lt;/th&gt;&lt;th&gt;Â Â  Memo&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;01&lt;/td&gt;&lt;td&gt;redis&lt;/td&gt;&lt;td&gt;&lt;code&gt;ubuntu&lt;/code&gt;&lt;/td&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;dyn&lt;/td&gt;&lt;td&gt;347.3&lt;/td&gt;&lt;td&gt;Â Â  base ubuntu&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;02&lt;/td&gt;&lt;td&gt;redis&lt;/td&gt;&lt;td&gt;&lt;code&gt;debian&lt;/code&gt;&lt;/td&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;dyn&lt;/td&gt;&lt;td&gt;305.7&lt;/td&gt;&lt;td&gt;Â Â  base debian&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡å°‘äº†42Mï¼Œç¨æœ‰æˆæ•ˆï¼Œä½†å¹¶ä¸æ˜æ˜¾ã€‚ç»†å¿ƒçš„åŒå­¦åº”è¯¥å‘ç°ï¼Œåªæœ‰ 122 MB çš„ &lt;code&gt;debian&lt;/code&gt; åŸºç¡€é•œåƒï¼Œæ„å»ºåå¢åŠ åˆ°äº† 305 MBï¼Œçœ‹æ¥è¿™é‡Œé¢è‚¯å®šæœ‰ä¼˜åŒ–çš„ç©ºé—´ï¼Œå¦‚ä½•ä¼˜åŒ–å°±è¦ç”¨åˆ°æˆ‘ä»¬å¼€å¤´è¯´åˆ°çš„ &lt;code&gt;Image Layer&lt;/code&gt; çŸ¥è¯†äº†ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;lab-3ï¼šä¸²è” Dockerfile æŒ‡ä»¤&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ç²¾ç®€2ï¼šä¸²è”ä½ çš„ Dockerfile æŒ‡ä»¤ï¼ˆä¸€èˆ¬æ˜¯ &lt;code&gt;RUN&lt;/code&gt; æŒ‡ä»¤ï¼‰ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Dockerfile ä¸­çš„ RUN æŒ‡ä»¤é€šè¿‡ &lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt; å’Œ &lt;code&gt;/&lt;/code&gt; æ”¯æŒå°†å‘½ä»¤ä¸²è”åœ¨ä¸€èµ·ï¼Œæœ‰æ—¶èƒ½è¾¾åˆ°æ„æƒ³ä¸åˆ°çš„ç²¾ç®€æ•ˆæœã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ä¼˜åŒ– Dockerfileï¼š&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;FROM&lt;/span&gt;Â debian:jessie&lt;br/&gt;&lt;br/&gt;&lt;span&gt;ENV&lt;/span&gt;Â VERÂ Â Â Â Â &lt;span&gt;3.0&lt;/span&gt;.&lt;span&gt;0&lt;/span&gt;&lt;br/&gt;&lt;span&gt;ENV&lt;/span&gt;Â TARBALLÂ http://download.redis.io/releases/redis-$VER.tar.gz&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;RUN&lt;/span&gt;&lt;span&gt;Â &lt;span&gt;echo&lt;/span&gt;Â &lt;span&gt;&quot;==&amp;gt;Â InstallÂ curlÂ andÂ helperÂ tools...&quot;&lt;/span&gt;Â Â &amp;amp;&amp;amp;Â \&lt;br/&gt;Â Â Â Â apt-getÂ updateÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &amp;amp;&amp;amp;Â \&lt;br/&gt;Â Â Â Â apt-getÂ installÂ -yÂ Â curlÂ makeÂ gccÂ Â Â &amp;amp;&amp;amp;Â \&lt;br/&gt;Â Â Â Â \&lt;br/&gt;Â Â Â Â &lt;span&gt;echo&lt;/span&gt;Â &lt;span&gt;&quot;==&amp;gt;Â Download,Â compile,Â andÂ install...&quot;&lt;/span&gt;Â Â &amp;amp;&amp;amp;Â \&lt;br/&gt;Â Â Â Â curlÂ -LÂ &lt;span&gt;$TARBALL&lt;/span&gt;Â |Â tarÂ zxvÂ Â &amp;amp;&amp;amp;Â \&lt;br/&gt;Â Â Â Â &lt;span&gt;cd&lt;/span&gt;Â redis-&lt;span&gt;$VER&lt;/span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &amp;amp;&amp;amp;Â \&lt;br/&gt;Â Â Â Â makeÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &amp;amp;&amp;amp;Â \&lt;br/&gt;Â Â Â Â makeÂ installÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &amp;amp;&amp;amp;Â \&lt;br/&gt;Â Â Â Â ...&lt;/span&gt;&lt;br/&gt;Â Â Â Â echoÂ &lt;span&gt;&quot;==&amp;gt;Â CleanÂ up...&quot;&lt;/span&gt;Â Â &amp;amp;&amp;amp;Â \&lt;br/&gt;Â Â Â Â apt-getÂ removeÂ -yÂ --auto-removeÂ curlÂ makeÂ gccÂ Â &amp;amp;&amp;amp;Â \&lt;br/&gt;Â Â Â Â apt-getÂ cleanÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &amp;amp;&amp;amp;Â \&lt;br/&gt;Â Â Â Â rmÂ -rfÂ /var/lib/apt/lists/*Â Â /redis-$VER&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#...&lt;/span&gt;&lt;br/&gt;&lt;span&gt;CMD&lt;/span&gt;&lt;span&gt;Â [&lt;span&gt;&quot;redis-server&quot;&lt;/span&gt;]&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ„å»ºï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;$Â dockerÂ buildÂ Â -tÂ redis:lab-3Â Â .&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æŸ¥çœ‹å¤§å°ï¼š&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Lab&lt;/th&gt;&lt;th&gt;Image&lt;/th&gt;&lt;th&gt;Base&lt;/th&gt;&lt;th&gt;Lang&lt;/th&gt;&lt;th&gt;.red[*]&lt;/th&gt;&lt;th&gt;Size (MB)&lt;/th&gt;&lt;th&gt;Â Â  Memo&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;01&lt;/td&gt;&lt;td&gt;redis&lt;/td&gt;&lt;td&gt;&lt;code&gt;ubuntu&lt;/code&gt;&lt;/td&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;dyn&lt;/td&gt;&lt;td&gt;347.3&lt;/td&gt;&lt;td&gt;Â Â  base ubuntu&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;02&lt;/td&gt;&lt;td&gt;redis&lt;/td&gt;&lt;td&gt;&lt;code&gt;debian&lt;/code&gt;&lt;/td&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;dyn&lt;/td&gt;&lt;td&gt;305.7&lt;/td&gt;&lt;td&gt;Â Â  base debian&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;03&lt;/td&gt;&lt;td&gt;redis&lt;/td&gt;&lt;td&gt;&lt;code&gt;debian&lt;/code&gt;&lt;/td&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;dyn&lt;/td&gt;&lt;td&gt;151.4&lt;/td&gt;&lt;td&gt;Â Â  cmd chaining&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å“‡ï¼ä¸€ä¸‹å­å‡å°‘äº† 50%ï¼Œæ•ˆæœæ˜æ˜¾å•Šï¼è¿™æ˜¯æœ€å¸¸ç”¨çš„ä¸€ä¸ªç²¾ç®€æ‰‹æ®µäº†ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;lab-4ï¼šå‹ç¼©ä½ çš„é•œåƒ&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ä¼˜åŒ–3ï¼šè¯•ç€ç”¨å‘½ä»¤æˆ–å·¥å…·å‹ç¼©ä½ çš„é•œåƒã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;docker è‡ªå¸¦çš„ä¸€äº›å‘½ä»¤è¿˜èƒ½ååŠ©å‹ç¼©é•œåƒï¼Œæ¯”å¦‚ &lt;code&gt;export&lt;/code&gt; å’Œ &lt;code&gt;import&lt;/code&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;$Â dockerÂ runÂ -dÂ redis:lab-3&lt;br/&gt;$Â dockerÂ &lt;span&gt;export&lt;/span&gt;Â 71b1c0ad0a2bÂ |Â dockerÂ importÂ -Â redis:lab-4&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†éº»çƒ¦çš„æ˜¯éœ€è¦å…ˆå°†å®¹å™¨è¿è¡Œèµ·æ¥ï¼Œè€Œä¸”è¿™ä¸ªè¿‡ç¨‹ä¸­ä½ ä¼šä¸¢å¤±é•œåƒåŸæœ‰çš„ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚ï¼šå¯¼å‡ºç«¯å£ï¼Œç¯å¢ƒå˜é‡ï¼Œé»˜è®¤æŒ‡ä»¤ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ä¸€èˆ¬é€šè¿‡å‘½ä»¤è¡Œæ¥ç²¾ç®€é•œåƒéƒ½æ˜¯å®éªŒæ€§çš„ï¼Œé‚£ä¹ˆè¿™é‡Œå†æ¨èä¸€ä¸ªå°å·¥å…·ï¼š&lt;span&gt;docker-squash&lt;/span&gt;&lt;sup&gt;[3]&lt;/sup&gt;ã€‚ç”¨èµ·æ¥æ›´ç®€å•æ–¹ä¾¿ï¼Œå¹¶ä¸”ä¸ä¼šä¸¢å¤±åŸæœ‰é•œåƒçš„è‡ªå¸¦ä¿¡æ¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ä¸‹è½½å®‰è£…ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;https://github.com/jwilder/docker-squash#installation&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;å‹ç¼©æ“ä½œï¼š&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;$Â dockerÂ saveÂ redis:lab-3Â \&lt;br/&gt;Â Â |Â sudoÂ docker-squashÂ -verboseÂ -tÂ redis:lab-4Â Â \&lt;br/&gt;Â Â |Â dockerÂ load&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;em&gt;æ³¨ï¼šè¯¥å·¥å…·åœ¨ Mac ä¸‹å¹¶ä¸å¥½ä½¿ï¼Œè¯·åœ¨ Linux ä¸‹ä½¿ç”¨&lt;/em&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;å¯¹æ¯”å¤§å°ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Lab&lt;/th&gt;&lt;th&gt;Image&lt;/th&gt;&lt;th&gt;Base&lt;/th&gt;&lt;th&gt;PL&lt;/th&gt;&lt;th&gt;.red[*]&lt;/th&gt;&lt;th&gt;Size (MB)&lt;/th&gt;&lt;th&gt;Â Â  Memo&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;01&lt;/td&gt;&lt;td&gt;redis&lt;/td&gt;&lt;td&gt;&lt;code&gt;ubuntu&lt;/code&gt;&lt;/td&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;dyn&lt;/td&gt;&lt;td&gt;347.3&lt;/td&gt;&lt;td&gt;Â Â  base ubuntu&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;02&lt;/td&gt;&lt;td&gt;redis&lt;/td&gt;&lt;td&gt;&lt;code&gt;debian&lt;/code&gt;&lt;/td&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;dyn&lt;/td&gt;&lt;td&gt;305.7&lt;/td&gt;&lt;td&gt;Â Â  base debian&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;03&lt;/td&gt;&lt;td&gt;redis&lt;/td&gt;&lt;td&gt;&lt;code&gt;debian&lt;/code&gt;&lt;/td&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;dyn&lt;/td&gt;&lt;td&gt;151.4&lt;/td&gt;&lt;td&gt;Â Â  cmd chaining&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;04&lt;/td&gt;&lt;td&gt;redis&lt;/td&gt;&lt;td&gt;&lt;code&gt;debian&lt;/code&gt;&lt;/td&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;dyn&lt;/td&gt;&lt;td&gt;151.4&lt;/td&gt;&lt;td&gt;Â Â  docker-squash&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¥½å§ï¼Œä»è¿™é‡Œçœ‹èµ·æ¥å¹¶æ²¡æœ‰å¤ªå¤§ä½œç”¨ï¼Œæ‰€ä»¥æˆ‘åªèƒ½è¯´&lt;code&gt;è¯•ç€&lt;/code&gt;ï¼Œè€Œä¸è¦æŠ¥å¤ªå¤§æœŸæœ›ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;lab-5ï¼šä½¿ç”¨æœ€ç²¾ç®€çš„ base image&lt;span/&gt;&lt;/h3&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-fileid=&quot;100000303&quot; data-ratio=&quot;0.75&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/otNtibX96l9ibwMmqp4H0uRMU8ib3Rar6K6mMHg3xYCb7QCfotOVZNeBmiaZKLI1oVKHbibrQOna5cyMEV0GE3v53JA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;640&quot;/&gt;&lt;figcaption&gt;img&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨ &lt;code&gt;scratch&lt;/code&gt; æˆ–è€… &lt;code&gt;busybox&lt;/code&gt; ä½œä¸ºåŸºç¡€é•œåƒã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…³äº scratchï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ä¸€ä¸ªç©ºé•œåƒï¼Œåªèƒ½ç”¨äºæ„å»ºé•œåƒï¼Œé€šè¿‡ &lt;code&gt;FROM scratch&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åœ¨æ„å»ºä¸€äº›åŸºç¡€é•œåƒï¼Œæ¯”å¦‚ &lt;code&gt;debian&lt;/code&gt; ã€ &lt;code&gt;busybox&lt;/code&gt;ï¼Œéå¸¸æœ‰ç”¨&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç”¨äºæ„å»ºè¶…å°‘é•œåƒï¼Œæ¯”å¦‚æ„å»ºä¸€ä¸ªåŒ…å«æ‰€æœ‰åº“çš„äºŒè¿›åˆ¶æ–‡ä»¶&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…³äº &lt;code&gt;busybox&lt;/code&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;åªæœ‰ 1~5M çš„å¤§å°&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åŒ…å«äº†å¸¸ç”¨çš„ UNIX å·¥å…·&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;éå¸¸æ–¹ä¾¿æ„å»ºå°é•œåƒ&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™äº›è¶…å°çš„åŸºç¡€é•œåƒï¼Œç»“åˆèƒ½ç”Ÿæˆé™æ€åŸç”Ÿ ELF æ–‡ä»¶çš„ç¼–è¯‘è¯­è¨€ï¼Œæ¯”å¦‚C/C++ï¼Œæ¯”å¦‚ Goï¼Œç‰¹åˆ«æ–¹ä¾¿æ„å»ºè¶…å°çš„é•œåƒã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;cloudcomb-logoï¼ˆCè¯­è¨€å¼€å‘ï¼‰ å°±æ˜¯ç”¨åˆ°äº†è¯¥åŸç†ï¼Œæ‰èƒ½æ„å»ºå‡º 585 å­—èŠ‚çš„é•œåƒã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;redis&lt;/code&gt; åŒæ ·ä½¿ç”¨ Cè¯­è¨€ å¼€å‘ï¼Œçœ‹æ¥ä¹Ÿæœ‰å¾ˆå¤§çš„ä¼˜åŒ–ç©ºé—´ï¼Œä¸‹é¢è¿™ä¸ªå®éªŒï¼Œè®©æˆ‘ä»¬ä»‹ç»å…·ä½“çš„æ“ä½œæ–¹æ³•ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;lab-6ï¼šæå–åŠ¨æ€é“¾æ¥çš„ .so æ–‡ä»¶&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®éªŒä¸Šä¸‹æ–‡ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;$Â catÂ /etc/os-release&lt;br/&gt;&lt;br/&gt;NAME=&lt;span&gt;&quot;Ubuntu&quot;&lt;/span&gt;&lt;br/&gt;VERSION=&lt;span&gt;&quot;14.04.2Â LTS,Â TrustyÂ Tahr&quot;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;$Â unameÂ -a&lt;br/&gt;LinuxÂ localhostÂ 3.13.0-46-genericÂ &lt;span&gt;#77-UbuntuÂ SMP&lt;/span&gt;&lt;br/&gt;MonÂ MarÂ 2Â 18:23:39Â UTCÂ 2015&lt;br/&gt;x86_64Â x86_64Â x86_64Â GNU/Linux&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;éš†é‡æ¨å‡º lddï¼šæ‰“å°å…±äº«çš„ä¾èµ–åº“&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;$Â lddÂ Â redis-3.0.0/src/redis-server&lt;br/&gt;Â Â Â Â linux-vdso.so.1Â =&amp;gt;Â Â (0x00007fffde365000)&lt;br/&gt;Â Â Â Â libm.so.6Â =&amp;gt;Â /lib/x86_64-linux-gnu/libm.so.6Â (0x00007f307d5aa000)&lt;br/&gt;Â Â Â Â libpthread.so.0Â =&amp;gt;Â /lib/x86_64-linux-gnu/libpthread.so.0Â (0x00007f307d38c000)&lt;br/&gt;Â Â Â Â libc.so.6Â =&amp;gt;Â /lib/x86_64-linux-gnu/libc.so.6Â (0x00007f307cfc6000)&lt;br/&gt;Â Â Â Â /lib64/ld-linux-x86-64.so.2Â (0x00007f307d8b9000)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°†æ‰€æœ‰éœ€è¦çš„ .so æ–‡ä»¶æ‰“åŒ…ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;$Â tarÂ ztvfÂ rootfs.tar.gz&lt;br/&gt;4485167Â Â 2015-04-21Â 22:54Â Â usr/&lt;span&gt;local&lt;/span&gt;/bin/redis-server&lt;br/&gt;1071552Â Â 2015-02-25Â 16:56Â Â lib/x86_64-linux-gnu/libm.so.6&lt;br/&gt;Â 141574Â Â 2015-02-25Â 16:56Â Â lib/x86_64-linux-gnu/libpthread.so.0&lt;br/&gt;1840928Â Â 2015-02-25Â 16:56Â Â lib/x86_64-linux-gnu/libc.so.6&lt;br/&gt;Â 149120Â Â 2015-02-25Â 16:56Â Â lib64/ld-linux-x86-64.so.2&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å†åˆ¶ä½œæˆ Dockerfileï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;FROM&lt;/span&gt;Â scratch&lt;br/&gt;&lt;span&gt;ADD&lt;/span&gt;&lt;span&gt;Â Â rootfs.tar.gzÂ Â /&lt;/span&gt;&lt;br/&gt;&lt;span&gt;COPY&lt;/span&gt;&lt;span&gt;Â redis.confÂ Â Â Â Â /etc/redis/redis.conf&lt;/span&gt;&lt;br/&gt;&lt;span&gt;EXPOSE&lt;/span&gt;Â &lt;span&gt;6379&lt;/span&gt;&lt;br/&gt;&lt;span&gt;CMD&lt;/span&gt;&lt;span&gt;Â [&lt;span&gt;&quot;redis-server&quot;&lt;/span&gt;]&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰§è¡Œæ„å»ºï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;$Â dockerÂ buildÂ Â -tÂ redis-05Â Â .&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æŸ¥çœ‹å¤§å°ï¼š&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Lab&lt;/th&gt;&lt;th&gt;&lt;br/&gt;&lt;/th&gt;&lt;th&gt;Base&lt;/th&gt;&lt;th&gt;PL&lt;/th&gt;&lt;th&gt;.red[*]&lt;/th&gt;&lt;th&gt;Size (MB)&lt;/th&gt;&lt;th&gt;Â Â  Memo&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;01&lt;/td&gt;&lt;td&gt;redis&lt;/td&gt;&lt;td&gt;&lt;code&gt;ubuntu&lt;/code&gt;&lt;/td&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;dyn&lt;/td&gt;&lt;td&gt;347.3&lt;/td&gt;&lt;td&gt;Â Â  base ubuntu&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;02&lt;/td&gt;&lt;td&gt;redis&lt;/td&gt;&lt;td&gt;&lt;code&gt;debian&lt;/code&gt;&lt;/td&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;dyn&lt;/td&gt;&lt;td&gt;305.7&lt;/td&gt;&lt;td&gt;Â Â  base debian&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;03&lt;/td&gt;&lt;td&gt;redis&lt;/td&gt;&lt;td&gt;&lt;code&gt;debian&lt;/code&gt;&lt;/td&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;dyn&lt;/td&gt;&lt;td&gt;151.4&lt;/td&gt;&lt;td&gt;Â Â  cmd chaining&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;04&lt;/td&gt;&lt;td&gt;redis&lt;/td&gt;&lt;td&gt;&lt;code&gt;debian&lt;/code&gt;&lt;/td&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;dyn&lt;/td&gt;&lt;td&gt;151.4&lt;/td&gt;&lt;td&gt;Â Â  docker-squash&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;05&lt;/td&gt;&lt;td&gt;redis&lt;/td&gt;&lt;td&gt;&lt;code&gt;scratch&lt;/code&gt;&lt;/td&gt;&lt;td&gt;C&lt;/td&gt;&lt;td&gt;dyn&lt;/td&gt;&lt;td&gt;7.73&lt;/td&gt;&lt;td&gt;Â Â  rootfs: .so&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å“‡ï¼æ˜¾è‘—æé«˜å•¦ï¼&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æµ‹è¯•ä¸€ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;$Â dockerÂ runÂ -dÂ --nameÂ redis-05Â redis-05&lt;br/&gt;&lt;br/&gt;$Â redis-cliÂ Â -hÂ Â \&lt;br/&gt;Â Â $(dockerÂ inspectÂ -fÂ &lt;span&gt;&#x27;{{.NetworkSettings.IPAddress}}&#x27;&lt;/span&gt;Â redis-05)&lt;br/&gt;&lt;br/&gt;$Â redis-benchmarkÂ Â -hÂ Â \&lt;br/&gt;Â Â $(dockerÂ inspectÂ -fÂ &lt;span&gt;&#x27;{{.NetworkSettings.IPAddress}}&#x27;&lt;/span&gt;Â redis-05)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ€»ç»“ä¸€ä¸‹ï¼š&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ç”¨ &lt;code&gt;ldd&lt;/code&gt; æŸ¥å‡ºæ‰€éœ€çš„ .so æ–‡ä»¶&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å°†æ‰€æœ‰ä¾èµ–å‹ç¼©æˆ &lt;code&gt;rootfs.tar&lt;/code&gt; æˆ– &lt;code&gt;rootfs.tar.gz&lt;/code&gt;ï¼Œä¹‹åæ‰“è¿› &lt;code&gt;scratch&lt;/code&gt; åŸºç¡€é•œåƒ&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;lab-7ï¼šä¸º Go åº”ç”¨æ„å»ºç²¾ç®€é•œåƒ&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Go è¯­è¨€å¤©ç”Ÿå°±æ–¹ä¾¿ç”¨æ¥æ„å»ºç²¾ç®€é•œåƒï¼Œå¾—ç›Šäºå®ƒèƒ½æ–¹ä¾¿çš„æ‰“åŒ…æˆåŒ…å«é™æ€é“¾æ¥çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰“ä¸ªæ¯”æ–¹ï¼Œä½ æœ‰ä¸€ä¸ª 4 MB å¤§å°çš„åŒ…å«é™æ€é“¾æ¥çš„ Go äºŒè¿›åˆ¶ï¼Œå¹¶ä¸”å°†å…¶æ‰“è¿› scratch è¿™æ ·çš„åŸºç¡€é•œåƒï¼Œä½ å¾—åˆ°çš„é•œåƒå¤§å°ä¹Ÿåªæœ‰åŒºåŒºçš„ 4 MBã€‚è¿™å¯æ˜¯åŒ…å«åŒæ ·åŠŸèƒ½çš„ Ruby ç¨‹åºçš„ç™¾åˆ†ä¹‹ä¸€å•Šã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œå†ç»™å¤§å®¶ä»‹ç»ä¸€ä¸ªéå¸¸å¥½ç”¨å¼€æºçš„ Go ç¼–è¯‘å·¥å…·ï¼šgolang-builderï¼Œå¹¶ç»™å¤§å®¶å®é™…æ¼”ç¤ºä¸€ä¸ªä¾‹å­&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¨‹åºä»£ç ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;package&lt;/span&gt;Â mainÂ &lt;span&gt;//Â importÂ &quot;github.com/CenturyLinkLabs/hello&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â &lt;span&gt;&quot;fmt&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â fmt.Println(&lt;span&gt;&quot;HelloÂ World&quot;&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Dockerfileï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;FROM&lt;/span&gt;Â scratch&lt;br/&gt;&lt;span&gt;COPY&lt;/span&gt;&lt;span&gt;Â helloÂ /&lt;/span&gt;&lt;br/&gt;&lt;span&gt;ENTRYPOINT&lt;/span&gt;&lt;span&gt;Â [&lt;span&gt;&quot;/hello&quot;&lt;/span&gt;]&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šè¿‡ golang-builder æ‰“åŒ…æˆé•œåƒï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;dockerÂ runÂ --rmÂ \&lt;br/&gt;Â Â Â Â -vÂ $(&lt;span&gt;pwd&lt;/span&gt;):/srcÂ \&lt;br/&gt;Â Â Â Â -vÂ /var/run/docker.sock:/var/run/docker.sockÂ \&lt;br/&gt;Â Â Â Â centurylink/golang-builder&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æŸ¥çœ‹é•œåƒå¤§å°(Macä¸‹æµ‹è¯•)ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;$Â dockerÂ images&lt;br/&gt;REPOSITORYÂ Â Â TAGÂ Â Â Â Â Â IMAGEÂ IDÂ Â Â Â Â Â Â CREATEDÂ Â Â Â Â Â Â Â Â Â VIRTUALÂ SIZE&lt;br/&gt;helloÂ Â Â Â Â Â Â Â latestÂ Â Â 1a42948d3224Â Â Â 24Â secondsÂ agoÂ Â Â 1.59Â MB&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å“‡ï¼è¿™ä¹ˆçœåŠ›ï¼Œå°±èƒ½åˆ›å»ºå‡  M å¤§å°çš„é•œåƒï¼ŒGo ç®€ä»‹å°±æ˜¯ä¸º Docker é•œåƒé‡èº«å®šåšçš„ï¼&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æ€»ç»“&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬ä»‹ç»äº†é•œåƒå±‚çš„çŸ¥è¯†ï¼Œå¹¶ä¸”é€šè¿‡å®éªŒï¼Œä»‹ç»ä¸‰ç§å¦‚ä½•ç²¾ç®€é•œåƒçš„æŠ€å·§ã€‚è¿™é‡Œä¸»è¦ä»‹ç»äº†ä¸‰ç§ç²¾ç®€æ–¹æ³•ï¼šé€‰ç”¨æ›´ç²¾å°çš„é•œåƒï¼Œä¸²è” Dockerfile è¿è¡ŒæŒ‡ä»¤ï¼Œä»¥åŠè¯•ç€å‹ç¼©ä½ çš„é•œåƒã€‚é€šè¿‡è¿™å‡ ä¸ªæŠ€å·§ï¼Œå·²ç»å¯ä»¥å°† 300M å¤§å°çš„é•œåƒå‹ç¼©åˆ° 150Mï¼Œå‹ç¼©ç‡50%åˆ°98%ï¼Œæ•ˆæœè¿˜æ˜¯ä¸é”™ã€‚&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ä¼˜åŒ–åŸºç¡€é•œåƒ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸²æ¥ Dockerfile å‘½ä»¤ï¼š&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å‹ç¼© Docker images&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¼˜åŒ–ç¨‹åºä¾èµ–&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é€‰ç”¨æ›´åˆé€‚çš„å¼€å‘è¯­è¨€&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;br/&gt;&lt;/h2&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;æ–‡ç« çš„æœ€åï¼Œæ’æ’­ä¸€ä¸ªç¦åˆ©&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åŒåä¸€å¿«åˆ°äº†ï¼Œ&lt;/span&gt;&lt;span&gt;é˜¿é‡Œäº‘ä¹Ÿå¼€å§‹ææ´»åŠ¨äº†&lt;/span&gt;&lt;span&gt;ï¼Œåˆšå¥½æˆ‘è¿™è¾¹å¯ä»¥å¸¦å¤§å®¶&lt;/span&gt;&lt;strong&gt;ç™½PiaoÂ &lt;/strong&gt;&lt;span&gt;é˜¿é‡Œäº‘çš„æœåŠ¡å™¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¯´ç™½äº†å°±æ˜¯å¤§å®¶Â &lt;/span&gt;&lt;span&gt;&lt;strong&gt;å¯ä»¥ä¸€åˆ†é’±ä¸èŠ±ï¼Œå°±å¯ä»¥é¢†åˆ°æœåŠ¡å™¨&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ï¼Œè§„æ ¼æ˜¯ 2c2mï¼ˆ2vcpu 2G memoryï¼‰ çš„æœºå™¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ˜¨å¤©åœ¨&lt;/span&gt;&lt;span&gt;æœ‹å‹åœˆ&lt;/span&gt;&lt;span&gt;å‘äº†ä¸‹ï¼Œ&lt;/span&gt;&lt;span&gt;å·²ç»æœ‰ 400 äººæŠ¥åå‚ä¸äº†ï¼Œ&lt;/span&gt;&lt;span&gt;ä»Šå¤©&lt;/span&gt;&lt;span&gt;å€Ÿ&lt;/span&gt;&lt;span&gt;è¿™ç¯‡æ–‡ç« å†è¯´ä¸€ä¸‹ï¼Œ&lt;/span&gt;&lt;span&gt;æœ‰æƒ³&lt;/span&gt;&lt;span&gt;å‚åŠ çš„æœ‹å‹ï¼Œ&lt;/span&gt;&lt;span&gt;å¯ä»¥åŠ æˆ‘ä¸‹å¾®ä¿¡ï¼Œå¤‡æ³¨ã€&lt;strong&gt;æœåŠ¡å™¨&lt;/strong&gt;ã€&lt;/span&gt;&lt;span&gt;ï¼Œæˆ‘&lt;/span&gt;&lt;span&gt;ç»Ÿä¸€&lt;/span&gt;&lt;span&gt;æ‹‰ç¾¤ï¼Œ&lt;/span&gt;&lt;span&gt;å¸¦å¤§å®¶ä¸€èµ·&lt;/span&gt;&lt;span&gt;è–…ç¾Šæ¯›ã€‚&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100002183&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/QB6G4ZoE1844XggiaKk4CnSJBGTia3z9sVPlARYFdQGHibxh6jpthSCmhUhGuM1EIiavAGxg5p7ibRXDvPB6pFt8jEg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;430&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‚è€ƒ&lt;/h2&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;scratch in Docker Hub&lt;/span&gt;&lt;sup&gt;[4]&lt;/sup&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;Make FROM scratch a special cased &#x27;no-base&#x27; spec&lt;/span&gt;&lt;sup&gt;[5]&lt;/sup&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;vDSO (virtual dynamic shared object)&lt;/span&gt;&lt;sup&gt;[6]&lt;/sup&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;Small Docker Images For Go Apps&lt;/span&gt;&lt;sup&gt;[7]&lt;/sup&gt; (with &lt;span&gt;golang-builder&lt;/span&gt;&lt;sup&gt;[8]&lt;/sup&gt;)&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;Building Docker Images for Static Go Binaries&lt;/span&gt;&lt;sup&gt;[9]&lt;/sup&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;Dockerfile Best Practices - take 2&lt;/span&gt;&lt;sup&gt;[10]&lt;/sup&gt; - by Michael Crosby, 2014-03-09.&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;Optimizing Docker Images&lt;/span&gt;&lt;sup&gt;[11]&lt;/sup&gt; - by Brian DeHamer, 2014-07-28.&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;Squashing Docker Images&lt;/span&gt;&lt;sup&gt;[12]&lt;/sup&gt; - by Jason Wilder, 2014-08-19.&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å‚è€ƒèµ„æ–™&lt;/span&gt;&lt;/h3&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;span&gt;[1]&lt;/span&gt;&lt;p&gt;è¿™äº›æŠ€æœ¯: &lt;em&gt;https://docs.docker.com/engine/userguide/storagedriver/imagesandcontainers/&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[2]&lt;/span&gt;&lt;p&gt;ä¸€æœŸ: &lt;em&gt;https://github.com/bingohuang/play-docker-images/tree/master/stage-01&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[3]&lt;/span&gt;&lt;p&gt;docker-squash: &lt;em&gt;https://github.com/jwilder/docker-squash&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[4]&lt;/span&gt;&lt;p&gt;scratch in Docker Hub: &lt;em&gt;https://registry.hub.docker.com/_/scratch/&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[5]&lt;/span&gt;&lt;p&gt;Make FROM scratch a special cased &#x27;no-base&#x27; spec: &lt;em&gt;https://github.com/docker/docker/pull/8827&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[6]&lt;/span&gt;&lt;p&gt;vDSO (virtual dynamic shared object): &lt;em&gt;http://en.wikipedia.org/wiki/VDSO&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[7]&lt;/span&gt;&lt;p&gt;Small Docker Images For Go Apps: &lt;em&gt;http://www.centurylinklabs.com/small-docker-images-for-go-apps/&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[8]&lt;/span&gt;&lt;p&gt;golang-builder: &lt;em&gt;https://github.com/CenturyLinkLabs/golang-builder&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[9]&lt;/span&gt;&lt;p&gt;Building Docker Images for Static Go Binaries: &lt;em&gt;https://medium.com/@kelseyhightower/optimizing-docker-images-for-static-binaries-b5696e26eb07&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[10]&lt;/span&gt;&lt;p&gt;Dockerfile Best Practices - take 2: &lt;em&gt;http://crosbymichael.com/dockerfile-best-practices-take-2.html&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[11]&lt;/span&gt;&lt;p&gt;Optimizing Docker Images: &lt;em&gt;http://www.centurylinklabs.com/optimizing-docker-images/&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[12]&lt;/span&gt;&lt;p&gt;Squashing Docker Images: &lt;em&gt;http://jasonwilder.com/blog/2014/08/19/squashing-docker-images/&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>83aac753bab2b124a21d4a7222ab3ff1</guid>
<title>æœ€è¿‘å¾ˆç«ç«ç«ç«çš„ GitHub é¡¹ç›®</title>
<link>https://toutiao.io/k/3l64knj</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;p data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;span&gt;è€é€›æ¯ä¸ªæœˆéƒ½ä¼šç›˜ç‚¹å½“å‰æœˆä»½æœ€ç«çš„å¼€æºé¡¹ç›®ï¼Œæœ¬ç¯‡æ–‡ç« å°±æ˜¯åæœˆä»½ Star æ”€å‡æœ€å¤šçš„çš„å¼€æºé¡¹ç›®ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;1.Â ç”µå•†å¤§ä¿ƒè„šæœ¬&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;2.Â åŸºäº Js çš„æ¸¸æˆå¼•æ“&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;3.Â BugÂ å‚åº“&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;4.Â é«˜åˆ†è®¡ç®—æœºä¹¦å•&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;5.Â å¼€æºç‰©è”ç½‘å¹³å°&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;6.Â K8S å¯è§†åŒ–é¢æ¿&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;7.Â ç¡¬æ ¸ç³»ç»Ÿç®¡ç†å·¥å…·&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;8.Â å¼ºå¤§çš„çº¿ç¨‹æ± é¡¹ç›®&lt;/span&gt;&lt;/section&gt;&lt;h1 data-key=&quot;fd245a0b20464c4d835251e573a6be6f&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-paragraph-type=&quot;ignored&quot;&gt;&lt;hr/&gt;&lt;/section&gt;&lt;/h1&gt;&lt;section&gt;&lt;span&gt;01&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ä»»åŠ¡è„šæœ¬&lt;/span&gt;&lt;/section&gt;&lt;h1&gt;&lt;span&gt;å½“ä½ æƒ³å®Œæˆä¸€ä»¶é‡å¤åŠ³åŠ¨çš„äº‹æƒ…ï¼Œå°±å…ˆå» GitHub å»çœ‹çœ‹æœ‰æ²¡æœ‰é»‘ç§‘æŠ€ã€‚æœ€è¿‘åŒåä¸€å¤§ä¿ƒï¼ŒGitHub ä¸Šä¸€ä¸ªä»»åŠ¡è‡ªåŠ¨è„šæœ¬ç™»ä¸Šäº†æ¦œå•ï¼Œè¯¥é¡¹ç›®æ˜¯åŸºäºAutoJsç¼–å†™çš„ä»»åŠ¡è‡ªåŠ¨å®Œæˆè„šæœ¬ï¼Œå¯ä»¥å¸®åŠ©ä½ åœ¨ 618ã€åŒåä¸€ã€æ·˜å®ã€äº¬ä¸œã€èµšå–µç³–ã€èµšæ±ªæ±ªå¸æ´»åŠ¨ä¸­å´­éœ²å¤´è§’ã€‚&lt;/span&gt;&lt;/h1&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100022368&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.44356578001437813&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwOWLicYpJXHBwMgD2LRUQ4EsoyaMTRlpCT7IER3VpDRfoNfbdGnvU1Z7GHNLYy1NqnqDUicaZNeOUA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2782&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;02&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;LittleJS&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;LittleJS æ˜¯ä¸€ä¸ªè¶…è½»é‡çº§çš„ 2D JavaScript æ¸¸æˆå¼•æ“ï¼Œå…·æœ‰å¿«é€Ÿçš„ WebGL æ¸²æŸ“ã€‚å®ƒè¢«è®¾è®¡ä¸ºå°å·§ã€ç®€å•ä¸”æ˜“äºä½¿ç”¨ï¼Œé€‚ç”¨äºä» game jams åˆ°å•†ä¸šå‘å¸ƒçš„å„ç§åº”ç”¨ç¨‹åºã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¯¥å¼•æ“æ‹¥æœ‰åˆ¶ä½œé«˜è´¨é‡æ¸¸æˆæ‰€éœ€çš„ä¸€åˆ‡ï¼ŒåŒ…æ‹¬å¿«é€Ÿæ¸²æŸ“ã€ç‰©ç†ã€ç²’å­ã€éŸ³æ•ˆã€éŸ³ä¹ã€é”®ç›˜/é¼ æ ‡/æ¸¸æˆæ‰‹æŸ„è¾“å…¥å¤„ç†ã€æ›´æ–°/æ¸²æŸ“å¾ªç¯å’Œè°ƒè¯•å·¥å…·ã€‚ğŸš‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100022369&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/ePw3ZeGRruwOWLicYpJXHBwMgD2LRUQ4ET5icic7bCSmqZ1x3SicRSEroroauOib52heqUyrOt238bstnSUicnS16qEw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;960&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;03&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;GrowingBugs&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;ä¸€ä¸ªä¸æ–­å¢é•¿çš„ bug å­˜å‚¨åº“ï¼Œç§°ä¸º GrowingBugsã€‚åœ¨è¿™ä¸ªå‚åº“ä¸­ï¼Œ&lt;span&gt;æ¯ä¸ªé”™è¯¯éƒ½ç”±ä¸€ä¸ªé”™è¯¯ç‰ˆæœ¬ã€ä¸€ä¸ªä¿®å¤ç‰ˆæœ¬ã€ä¸€ä¸ªç®€æ´çš„è¡¥ä¸ï¼ˆä»…é™é”™è¯¯ä¿®å¤æ›´æ”¹ï¼‰å’Œä¸€ä¸ªæˆ–å¤šä¸ªè§¦å‘æµ‹è¯•ç”¨ä¾‹ç»„æˆã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100022370&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.6642685851318945&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwOWLicYpJXHBwMgD2LRUQ4EtJJzI1T14BJN86yK0dr9YskdA6tNe18iapDBqDqbpQDvsibf4kMHWreg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1668&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;04&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;é«˜åˆ†è®¡ç®—æœºä¹¦å•&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;è¿™ä¸ªä»“åº“æ—¶ä¸€ä¸ªä¹¦å•ç´¢å¼•ï¼Œç»¼åˆäº†è±†ç“£ goodreads ç»¼åˆè¯„åˆ†çš„è®¡ç®—æœºä¹¦ç±ä¹¦å•ã€‚è¯¥ä»“åº“åŒ…å«è®¡ç®—æœºï¼Œäº’è”ç½‘æœ‰å…³çš„å‡ ä¹æ‰€æœ‰ä¹¦ç±ï¼Œæ ¹æ®ä¸åŒç‰ˆæœ¬ï¼Œä¸¤ä¸ªå¹³å°çš„æ€»è¯„ä»·äººæ•°å’Œè¯„åˆ†æ±‚å‡ºå¹³å‡åˆ†ï¼ŒæŒ‰ä»é«˜åˆ°ä½æ’åˆ—ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¸Œæœ›èƒ½å¯¹å¯»æ‰¾ç»å…¸è®¡ç®—æœºä¹¦ç±çš„æœ‹å‹æä¾›å¸®åŠ©ï¼Œæ’åºä»…ä¾›å‚è€ƒï¼Œè¯„åˆ†çš„é«˜ä½ä¸ä¸€å®šä»£è¡¨ä¹¦ç±çš„çœŸæ­£è´¨é‡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100022372&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.7123947051744886&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwOWLicYpJXHBwMgD2LRUQ4E3HsB3bJgVvAVEKrNttogclYVE3syrnzFU0xBibcZLeCictuSpVvNzmJg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1662&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;05&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ç‰©è”ç½‘å¼€æºå¹³å°&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;DGIOT&lt;/em&gt;Â æ˜¯å›½å†…é¦–æ¬¾è½»é‡çº§å¼€æºå·¥ä¸šç‰©è”ç½‘æŒç»­é›†æˆå¹³å°ï¼ŒDG-IoTå›¢é˜Ÿ2016å¹´ä¹‹å‰ï¼Œåœ¨äº’è”ç½‘å’Œç§»åŠ¨äº’è”ç½‘çˆ¬å‘å¤šå¹´ï¼Œ2016å¹´å¼€å§‹è¿›å…¥ç‰©è”ç½‘çˆ¬å‘ï¼Œå¸Œæœ›é€šè¿‡è¿™ä¸ªå¼€æºå¹³å°æŠŠå¤šå¹´çˆ¬å‘ç»éªŒå…±äº«å‡ºæ¥ï¼Œè®©å¤šå­¦ç§‘äº¤å‰çš„å·¥ä¸šäº’è”ç½‘é¡¹ç›®å˜å¾—æ›´ç®€å•ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;1. è®©ä¸°å¯Œå·¥ç¨‹äººå‘˜å¯ä»¥é€šè¿‡è§†çª—äº¤äº’å¯ä»¥å®Œæˆéœ€æ±‚è¾ƒç®€å•çš„å·¥ä¸šäº’è”ç½‘é¡¹ç›®&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2. è®©å¹¿å¤§çš„åˆçº§å‰ç«¯å·¥ç¨‹å¸ˆé€šè¿‡serverlessçš„æ–¹å¼å¯ä»¥æ‰¿æ¥éœ€æ±‚è¾ƒå¤æ‚çš„å·¥ä¸šäº’è”ç½‘é¡¹ç›®&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;3. è®©Pythonã€Javaã€Goã€Cåˆçº§åå°å·¥ç¨‹å¸ˆé€šè¿‡webç¼–ç¨‹å¼€å‘é€šé“æ¥æ‰¿æ¥å¤æ‚çš„å·¥ä¸šäº’è”ç½‘é¡¹ç›®&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100022378&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.8862068965517241&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwOWLicYpJXHBwMgD2LRUQ4EEjtaB8pyibGppgI2Ofiaj1aSWMG3WkexiaYDz6GKTQHAYw6q2WksDBXjQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1160&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;06&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;K8Så¯è§†åŒ–ç®¡ç†é¢æ¿&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;KubePi æ˜¯ä¸€æ¬¾ç®€å•æ˜“ç”¨çš„å¼€æº Kubernetes å¯è§†åŒ–ç®¡ç†é¢æ¿ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;KubePi å…è®¸ç®¡ç†å‘˜å¯¼å…¥å¤šä¸ª Kubernetes é›†ç¾¤ï¼Œå¹¶ä¸”é€šè¿‡æƒé™æ§åˆ¶ï¼Œå°†ä¸åŒ clusterã€namespace çš„æƒé™åˆ†é…ç»™æŒ‡å®šç”¨æˆ·ã€‚å®ƒå…è®¸å¼€å‘äººå‘˜ç®¡ç† Kubernetes é›†ç¾¤ä¸­è¿è¡Œçš„åº”ç”¨ç¨‹åºå¹¶å¯¹å…¶è¿›è¡Œæ•…éšœæ’æŸ¥ï¼Œä¾›å¼€å‘äººå‘˜æ›´å¥½åœ°å¤„ç† Kubernetes é›†ç¾¤ä¸­çš„å¤æ‚æ€§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100022371&quot; data-ratio=&quot;0.5675&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwOWLicYpJXHBwMgD2LRUQ4EGOccaFQ6rpPKN0e1by7Chy456TCMxLEyG3r40zL2139j1VWXWGRpicg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1600&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100022376&quot; data-ratio=&quot;0.568407960199005&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwOWLicYpJXHBwMgD2LRUQ4Echia19PzLiaMtu4lwM4vF7cUPiaZ5hzSIfibN07yicBfjkdwVd995T3lIkQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1608&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;07&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ç¡¬æ ¸çš„ç³»ç»Ÿå·¥å…·&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100022375&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.464808362369338&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwOWLicYpJXHBwMgD2LRUQ4EnFqia230iaXmIQiaaRDA2Lubg8aByDgicTdBk2NdWtMMvK5NrIvPQbX8Eg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2870&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸€æ¬¾å…è´¹ã€åŠŸèƒ½å¼ºå¤§çš„å¤šç”¨é€”å·¥å…·ï¼Œå¯å¸®åŠ©æ‚¨ç›‘æ§ç³»ç»Ÿèµ„æºã€è°ƒè¯•è½¯ä»¶å’Œæ£€æµ‹æ¶æ„è½¯ä»¶ã€‚&lt;span&gt;å½“æ— æ³•ç¼–è¾‘æˆ–åˆ é™¤æ–‡ä»¶æ—¶ï¼Œè¯¥å¼€æºé¡¹ç›®èƒ½å¤Ÿå¸®ä½ å‘ç°å“ªäº›è¿›ç¨‹æ­£åœ¨ä½¿ç”¨è¯¥æ–‡ä»¶ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100022374&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.30615384615384617&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwOWLicYpJXHBwMgD2LRUQ4EbRb4zbwDQpRibDMajVhbsqIgFlXkrdr2HZicFz0VlsRjYwrEj6mJnxCw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;650&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æŸ¥çœ‹å“ªäº›ç¨‹åºå…·æœ‰æ´»åŠ¨çš„ç½‘ç»œè¿æ¥ï¼Œä¹Ÿå¯ä»¥å…³é—­å®ƒä»¬ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100022373&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.46177847113884557&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwOWLicYpJXHBwMgD2LRUQ4E4p6HJa8QIicic9bbR8TAAAodibWjBlHTxnnVY5SUCxSdnEKMhyiar9l3Jg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;641&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;08&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å¼ºå¤§çš„åŠ¨æ€çº¿ç¨‹æ± &lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;å¼ºå¤§çš„åŠ¨æ€çº¿ç¨‹æ± ï¼šHippoï¼Œå¹¶é™„å¸¦ç›‘æ§æŠ¥è­¦åŠŸèƒ½ï¼ˆæ²¡æœ‰ä¾èµ–ä¸­é—´ä»¶ï¼‰ï¼Œå®Œå…¨éµå¾ªé˜¿é‡Œå·´å·´ç¼–ç è§„èŒƒã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;çº¿ç¨‹æ± åœ¨ä¸šåŠ¡ç³»ç»Ÿåº”è¯¥éƒ½æœ‰ä½¿ç”¨åˆ°ï¼Œå¸®åŠ©ä¸šåŠ¡æµç¨‹æå‡æ•ˆç‡ä»¥åŠç®¡ç†çº¿ç¨‹ï¼Œå¤šæ•°åœºæ™¯åº”ç”¨äºå¤§é‡çš„å¼‚æ­¥ä»»åŠ¡å¤„ç†è™½ç„¶çº¿ç¨‹æ± æä¾›äº†æˆ‘ä»¬è®¸å¤šä¾¿åˆ©ï¼Œä½†ä¹Ÿå¹¶éå°½å–„å°½ç¾ï¼Œä¹Ÿå­˜åœ¨å¾ˆå¤šé—®é¢˜å¯èƒ½éœ€è¦å‘å¸ƒä¸šåŠ¡ç³»ç»Ÿæ¥è§£å†³ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Hippo å¾ˆå¥½è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå®ƒå°†ä¸šåŠ¡ä¸­æ‰€æœ‰çº¿ç¨‹æ± ç»Ÿä¸€ç®¡ç†ï¼Œé‡åˆ°ä¸Šè¿°é—®é¢˜ä¸éœ€è¦å‘å¸ƒç³»ç»Ÿå°±å¯ä»¥æ›¿æ¢çº¿ç¨‹æ± å‚æ•°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Hippo æŒ‰ç…§ç§Ÿæˆ·ã€é¡¹ç›®ã€çº¿ç¨‹æ± çš„ç»´åº¦åˆ’åˆ†ã€‚å†åŠ ä¸Šç³»ç»Ÿæƒé™ï¼Œè®©ä¸åŒçš„å¼€å‘ã€ç®¡ç†äººå‘˜è´Ÿè´£è‡ªå·±ç³»ç»Ÿçš„çº¿ç¨‹æ± æ“ä½œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;100022377&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.8807692307692307&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruwOWLicYpJXHBwMgD2LRUQ4ExiaS8WtJibgXRp7TTZM08eH8nFT4TalnjWgBNJXfadAL1gUdYviavA29w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;780&quot;/&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;æ¬¢è¿å…³æ³¨å…¬ä¼—å· é€›é€›GitHub å›å¤ã€Œ1028ã€ä¸‹è½½æœ¬æœŸæ‰€æœ‰é¡¹ç›®ã€‚&lt;/span&gt;&lt;span&gt;æœ€åï¼Œé˜²æ­¢æ‰¾ä¸åˆ°æœ¬ç¯‡æ–‡ç« ï¼Œå¯ä»¥æ”¶è—ç‚¹èµï¼Œæ–¹ä¾¿ç¿»é˜…æŸ¥æ‰¾ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-paragraph-type=&quot;ignored&quot;&gt;&lt;hr/&gt;&lt;/section&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section&gt;&lt;span&gt;æ¨èé˜…è¯»&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;1.Â &lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUxNjg4NDEzNA==&amp;amp;mid=2247498662&amp;amp;idx=1&amp;amp;sn=0087c4f3b79ba3420e917e9b42d45eda&amp;amp;chksm=f9a2286fced5a1794eb9a73d0be7c2e16eaceabf3a0420647c40cb4202bd116d9a15dd57c008&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; hasload=&quot;1&quot; wah-hotarea=&quot;click&quot;&gt;GitHub ä¸Šæœ‰ä»€ä¹ˆå¥½ç©çš„é¡¹ç›®ï¼Ÿ&lt;/a&gt;&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;2.&lt;/span&gt;&lt;/em&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUxNjg4NDEzNA==&amp;amp;mid=2247505125&amp;amp;idx=1&amp;amp;sn=d7da4f44bdbd4f439e02c316810e75c2&amp;amp;chksm=f9a2072cced58e3aaeff8543f8f1ea050d4b04f7a1d730482aacd4db8cc9372ae1d103a56a56&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;æ¨è 7 ä¸ªçƒ­é—¨ç”µå•† GitHub é¡¹ç›®&lt;/a&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;3.&lt;/span&gt;&lt;/em&gt;Â &lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUxNjg4NDEzNA==&amp;amp;mid=2247505087&amp;amp;idx=1&amp;amp;sn=51e6b3db9d95ea2683f3bff5645c83e2&amp;amp;chksm=f9a20776ced58e60658b56869e9496196acf7ffb08fff639a913ecd770745567b4c6e7870db2&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;å¥³æœ‹å‹è®©æˆ‘å†™ 1 ä¸‡å­—æ£€è®¨&lt;/a&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;4.&lt;/span&gt;&lt;/em&gt;Â &lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUxNjg4NDEzNA==&amp;amp;mid=2247504912&amp;amp;idx=1&amp;amp;sn=5f800a1753d03014052ce50b548d5c0d&amp;amp;chksm=f9a207d9ced58ecf146bac5e034a503d1c17b3f755a8a16b9cca190f4c590d368dee3040f5ef&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;GitHub ä¸Š 7 ä¸ª yyds ç®—æ³•é¡¹ç›®&lt;/a&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;172&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;172&quot; data-fileid=&quot;100022379&quot; data-ratio=&quot;1.005449591280654&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ePw3ZeGRruxW7LMX2Iz5DfjRIbFTS7UROhxibBmicicT0HpjIh1yniaJJibSnLFuicMHRx5NEdiaOh2OOACfr6MvR38ibQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;734&quot;/&gt;Â &lt;/section&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>7356d038928d1b94b0edfa59b58b1242</guid>
<title>åå°æ—¶å†™å‡ºä¸€ä¸ªæ´»åŠ¨é€šçŸ¥çš„å¾®ä¿¡å°ç¨‹åº</title>
<link>https://toutiao.io/k/x94g7dn</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;entry-inner&quot;&gt;
                                                    
&lt;p&gt;ç†Ÿæ‚‰æˆ‘çš„äººéƒ½çŸ¥é“ï¼Œæˆ‘ä»¬æ¯å‘¨éƒ½ä¼šä¸¾åŠä¸€æ¬¡åˆ†å¸ƒå¼ç³»ç»Ÿè¯é¢˜çš„è®¨è®ºï¼ˆå¯¹æ´»åŠ¨æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å‚è€ƒè¿™ä¸ªç½‘å€ï¼š&lt;a href=&quot;https://donggeitnote.com/2021/07/24/topic-introduction/&quot;&gt;https://donggeitnote.com/2021/07/24/topic-introduction/&lt;/a&gt;ï¼Œå½“ç„¶è¿™ä¸ªä¸æ˜¯æˆ‘ä»¬ä»Šå¤©è®¨è®ºçš„é‡ç‚¹ï¼‰ï¼Œè¿™ä¸ªè®¨è®ºçš„æ´»åŠ¨å®‰æ’ä¼šå‘å¸ƒåˆ°å„ä¸ªå¾®ä¿¡ç¾¤ï¼Œè¿™æ ·æ„Ÿå…´è¶£çš„åŒå­¦å°±å¯ä»¥æ¥å‚åŠ äº†ã€‚åœ¨ä¸Šå‘¨äº”å› ä¸ºæˆ‘ä¸ªäººçš„å¤±è¯¯ï¼Œæ²¡æœ‰æ›´æ–°æ´»åŠ¨é€šçŸ¥ä¸­çš„æ—¶é—´ï¼Œäºæ˜¯å°±å¯¼è‡´è¿™ä¸ªæ´»åŠ¨çš„æ¶ˆæ¯éœ€è¦é‡æ–°å‘å¸ƒï¼Œè¿™å…¶å®ç»™å¸®å¿™å‘å¸ƒæ´»åŠ¨çš„åŒå­¦å¸¦æ¥äº†å¾ˆå¤§çš„å›°æ‰°ã€‚è™½ç„¶æœ€åä¹Ÿè§£å†³äº†é—®é¢˜ï¼Œä½†æ˜¯è¿‡ç¨‹å¹¶ä¸æ˜¯å¾ˆå¼€å¿ƒã€‚æ‰€ä»¥æˆ‘å°±æƒ³åº”è¯¥å†™ä¸ªå°ç¨‹åºæ¥é€šçŸ¥ä¸€ä¸‹ï¼Œè¿™æ ·ä¸€æ–¹é¢å¯ä»¥è§£å†³æˆ‘ä»¬é‡åˆ°çš„é—®é¢˜ï¼Œæ¯”å¦‚å“ªæ¬¡çš„æ—¶é—´å†å†™é”™äº†ï¼Œæˆ‘ä»¬åªè¦æ›´æ–°ä¸€ä¸‹å°ç¨‹åºå†…çš„å†…å®¹å°±å¯ä»¥äº†ã€‚å¦å¤–ä¸€æ–¹é¢ä¹Ÿå¯ä»¥è®©ä¸€äº›ä¸»åŠ¨æƒ³äº†è§£è®¨è®ºè¯é¢˜çš„åŒå­¦èƒ½å¤Ÿæœ‰ä¸€ä¸ªç»Ÿä¸€çš„åœ°æ–¹æ¥å‘ç°è¯é¢˜ã€‚è¯´åšå°±åšï¼Œä¸€åˆ°å‘¨å…­æˆ‘å°±å¼€å§‹æ¥ç€æ‰‹æè¿™ä»¶äº‹æƒ…äº†ã€‚&lt;/p&gt;



&lt;h1&gt;éœ€æ±‚åˆ†æ&lt;/h1&gt;



&lt;p&gt;éœ€æ±‚å¤§æ¦‚æ˜¯æˆ‘ä»¬ç¬¬ä¸€æ­¥éœ€è¦äº†è§£æ¸…æ¥šçš„ä¸œè¥¿ï¼Œåœ¨çœŸæ­£ç€æ‰‹ä¹‹å‰ï¼Œæˆ‘æŠŠæœ€åŸºæœ¬çš„éœ€æ±‚ç®€å•åˆ—äº†ä¸€ä¸‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;



&lt;h2&gt;æ´»åŠ¨ç®¡ç†é¡µé¢&lt;/h2&gt;



&lt;p&gt;è¿™ä¸ªé¡µé¢æ˜¯è®©æ´»åŠ¨å‘å¸ƒè€…ç®¡ç†å·²ç»åˆ›å»ºçš„æ´»åŠ¨ä»¥åŠå‘å¸ƒæ–°çš„æ´»åŠ¨ï¼Œä¸»è¦çš„åŠŸèƒ½åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š&lt;/p&gt;



&lt;ol type=&quot;1&quot;&gt;&lt;li&gt;æ˜¾ç¤ºå·²ç»åˆ›å»ºçš„æ´»åŠ¨åˆ—è¡¨&lt;/li&gt;&lt;li&gt;åˆ›å»ºæ–°çš„æ´»åŠ¨&lt;/li&gt;&lt;li&gt;ä¿®æ”¹å·²ç»åˆ›å»ºçš„æ´»åŠ¨&lt;/li&gt;&lt;li&gt;åˆ é™¤å·²ç»åˆ›å»ºçš„æ´»åŠ¨&lt;/li&gt;&lt;/ol&gt;



&lt;h2&gt;æ´»åŠ¨æ˜¾ç¤ºé¡µé¢&lt;/h2&gt;



&lt;p&gt;è¿™ä¸ªé¡µé¢ä¸»è¦æ˜¯è®©æ´»åŠ¨çš„å‚ä¸è€…çŸ¥é“æœ‰å“ªäº›æ´»åŠ¨ï¼Œéƒ½ä¼šåœ¨ä»€ä¹ˆæ—¶å€™ä¸¾è¡Œï¼Œæƒ³å‚åŠ çš„è¯è¿˜å¯ä»¥è®¾ç½®ç›¸å…³çš„æé†’ï¼Œæ‰€ä»¥ä¸»è¦çš„åŠŸèƒ½ä¼šåŒ…å«ä¸‹é¢è¿™äº›&lt;/p&gt;



&lt;ol type=&quot;1&quot;&gt;&lt;li&gt;æ˜¾ç¤ºå³å°†ä¸¾è¡Œçš„æ´»åŠ¨&lt;/li&gt;&lt;li&gt;è®¾ç½®æ´»åŠ¨çš„æé†’&lt;/li&gt;&lt;li&gt;å–æ¶ˆæ´»åŠ¨çš„æé†’&lt;/li&gt;&lt;li&gt;æ˜¾ç¤ºæ´»åŠ¨çš„è¯¦æƒ…&lt;/li&gt;&lt;/ol&gt;



&lt;h2&gt;æ´»åŠ¨æé†’&lt;/h2&gt;



&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªåå°è¿è¡Œçš„ç¨‹åºï¼Œä¸»è¦ç”¨æ¥åœ¨æ´»åŠ¨å³å°†å¼€å§‹ä¹‹å‰é€šçŸ¥å·²ç»è®¾ç½®æé†’äº†çš„åŒå­¦ã€‚&lt;/p&gt;



&lt;h1&gt;å‡†å¤‡&lt;/h1&gt;



&lt;p&gt;ææ‡‚äº†éœ€æ±‚ä¹‹åï¼Œåœ¨æ­£å¼å†™ä»£ç ä¹‹å‰æˆ‘ä»¬è¿˜æœ‰ä¸€äº›å·¥ä½œéœ€è¦å»åšï¼š&lt;/p&gt;



&lt;p&gt;é¦–å…ˆæˆ‘ä»¬éœ€è¦å»æ³¨å†Œä¸€ä¸ªå°ç¨‹åºï¼Œç›¸åº”çš„ç½‘å€æ˜¯ï¼š&lt;a href=&quot;https://mp.weixin.qq.com/cgi-bin/wx&quot;&gt;https://mp.weixin.qq.com/cgi-bin/wx&lt;/a&gt;ï¼Œç‚¹å‡»å‰å¾€æ³¨å†Œå°±å¯ä»¥äº†ï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ï¼Œå¤§å®¶æŒ‰æ­¥æ“ä½œå°±å¯ä»¥äº†ã€‚è¿™é‡Œåæ§½ä¸€ä¸‹å°±æ˜¯ä¸€ä¸ªé‚®ç®±åªèƒ½æ³¨å†Œä¸€ä¸ªå°ç¨‹åºæ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘è¿˜å¾—å†ç”³è¯·ä¸€ä¸ªæ–°çš„é‚®ç®±æ¥æ³¨å†Œå°ç¨‹åºï¼Œå•¥æ—¶å¾®ä¿¡èƒ½æŠŠè¿™ä¸ªç®€å•çš„é—®é¢˜è§£å†³å°±æ–¹ä¾¿å¤šäº†ã€‚&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-40.png&quot; alt=&quot;&quot; class=&quot;wp-image-1068&quot; srcset=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-40.png 624w, https://donggeitnote.com/wp-content/uploads/2021/10/image-40-294x300.png 294w&quot; sizes=&quot;(max-width: 624px) 100vw, 624px&quot;/&gt;&lt;/figure&gt;



&lt;p&gt;åœ¨æ³¨å†Œäº†å°ç¨‹åºä¹‹åï¼Œæˆ‘ä»¬éœ€è¦ä¸‹è½½å¾®ä¿¡å¼€å‘è€…å·¥å…·ï¼Œå¯ä»¥åœ¨è¿™ä¸ªé¡µé¢ä¸‹è½½&lt;a href=&quot;https://developers.weixin.qq.com/miniprogram/dev/devtools/devtools.html&quot;&gt;https://developers.weixin.qq.com/miniprogram/dev/devtools/devtools.html&lt;/a&gt;ï¼Œ å½“ç„¶å‡å¦‚ä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥æŠŠç›¸å…³çš„å†…å®¹è¯»ä¸€ä¸‹ï¼Œç†Ÿæ‚‰ä¸€ä¸‹è¿™ä¸ªå·¥å…·å¦‚ä½•ä½¿ç”¨ã€‚è¿™ä¸ªå·¥å…·æ‰“å¼€ä¹‹åï¼Œå¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­ï¼š&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-41.png&quot; alt=&quot;&quot; class=&quot;wp-image-1069&quot; srcset=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-41.png 624w, https://donggeitnote.com/wp-content/uploads/2021/10/image-41-300x213.png 300w&quot; sizes=&quot;(max-width: 624px) 100vw, 624px&quot;/&gt;&lt;/figure&gt;



&lt;h1&gt;å¾®ä¿¡å°ç¨‹åºæ€»ä½“æ¶æ„&lt;/h1&gt;



&lt;p&gt;åœ¨å‡†å¤‡å¥½äº†ç›¸å…³çš„å·¥å…·ä¹‹åï¼ŒçœŸæ­£åŠ¨æ‰‹å†™ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å†æ¥ç®€å•äº†è§£ä¸€ä¸‹å¾®ä¿¡å°ç¨‹åºçš„æ€»ä½“æ¶æ„ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¤§æ¦‚çŸ¥é“è‡ªå·±éœ€è¦å®ç°äº›ä»€ä¹ˆã€‚å¾®ä¿¡å°ç¨‹åºçš„æ€»ä½“æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¶å®å¾®ä¿¡å·²ç»å¸®æˆ‘ä»¬åšå¥½äº†æ‰€æœ‰çš„æ¶æ„ç›¸å…³çš„å†…å®¹ï¼Œæ¯”å¦‚æˆ‘ä»¬é€šå¸¸è¯´çš„è´Ÿè½½å‡è¡¡ï¼Œé›†ç¾¤å®¹é”™ï¼ŒCDNåŠ é€Ÿï¼ŒRedis cacheï¼Œç›‘æ§ç³»ç»Ÿç­‰ç­‰ï¼Œæˆ‘ä»¬æ‰€è¦åšçš„å…¶å®å¾ˆç®€å•ï¼Œåªè¦å®ç°å°ç¨‹åºçš„å‰ç«¯é¡µé¢å’Œåç«¯æ•°æ®åº“ä»¥åŠä¸¤è€…ä¹‹é—´çš„äº¤äº’ï¼Œä¹Ÿå°±æ˜¯å¸¸è¯´çš„APIå±‚å°±å¯ä»¥äº†ã€‚è¿™èƒŒåçš„å…¶å®ƒæ‰€æœ‰çš„å’Œæ¶æ„ï¼Œéƒ¨ç½²ç›¸å…³çš„ä¸œè¥¿éƒ½ä¸éœ€è¦ç‰¹åˆ«åœ¨æ„ã€‚&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-42.png&quot; alt=&quot;&quot; class=&quot;wp-image-1070&quot; srcset=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-42.png 624w, https://donggeitnote.com/wp-content/uploads/2021/10/image-42-300x203.png 300w&quot; sizes=&quot;(max-width: 624px) 100vw, 624px&quot;/&gt;&lt;/figure&gt;



&lt;h1&gt;ç”¨æˆ·ID&lt;/h1&gt;



&lt;p&gt;åœ¨äº†è§£äº†ç›¸å…³çš„æ¶æ„ä¹‹åï¼Œæˆ‘ä»¬å¿ƒç†æœ‰åº•ï¼Œå°±å¯ä»¥çœŸæ­£ç€æ‰‹å¼€å§‹å†™ä»£ç äº†ã€‚è¿™é‡Œæˆ‘ä»¬é¦–å…ˆæ¥æ€è€ƒä¸€ä¸‹ä¸Šæ–‡æåˆ°çš„æ´»åŠ¨ç®¡ç†é¡µé¢å¦‚ä½•å®ç°ï¼Œæˆ‘ä»¬é¢„æƒ³ä¸­çš„è¿™ä¸ªé¡µé¢æ˜¯å¦‚ä¸‹å›¾æ‰€ç¤ºçš„ï¼Œå®ƒåŒ…å«äº†å‡ ä¸ªéƒ¨åˆ†ï¼Œé¦–å…ˆèƒ½å¤Ÿåˆ—å‡ºå·²ç»åˆ›å»ºçš„æ´»åŠ¨åˆ—è¡¨ï¼Œå…¶æ¬¡èƒ½å¤Ÿä¿®æ”¹è¿™ä¸ªæ´»åŠ¨ï¼ˆç‚¹å‡»ç¬”è¿™ä¸ªå›¾æ ‡ï¼‰ï¼Œå½“ç„¶è¿˜å¿…é¡»è¦èƒ½å¤Ÿåˆ›å»ºæ–°çš„æ´»åŠ¨ã€‚&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-43.png&quot; alt=&quot;&quot; class=&quot;wp-image-1071&quot; srcset=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-43.png 419w, https://donggeitnote.com/wp-content/uploads/2021/10/image-43-300x151.png 300w&quot; sizes=&quot;(max-width: 419px) 100vw, 419px&quot;/&gt;&lt;/figure&gt;



&lt;p&gt;æˆ‘ä»¬æ¥æƒ³ä¸€ä¸‹è¿™ä¸ªé¡µé¢çš„å®ç°ï¼Œè‚¯å®šæ˜¯éœ€è¦ä¸€ä¸ªAPIæ¥å¾—åˆ°æ‰€æœ‰çš„æ´»åŠ¨ï¼Œæˆ‘ä»¬å‡è®¾è¿™ä¸ªAPIåå­—æ˜¯GetActivities()ï¼Œåªè¦æˆ‘ä»¬é€šè¿‡è¿™ä¸ªAPIæŠŠæ•°æ®åº“ä¸­æ‰€æœ‰ç¬¦åˆè¦æ±‚çš„æ´»åŠ¨è¿”å›åˆ°å‰ç«¯ä¹‹åï¼Œå°±åªæ˜¯ä¸€ä¸ªåˆ—è¡¨æ˜¾ç¤ºçš„é—®é¢˜äº†ã€‚&lt;/p&gt;



&lt;p&gt;è¿™é‡Œæ¯”è¾ƒéš¾çš„ä¸€ä¸ªé—®é¢˜å°±åœ¨äºç¬¦åˆè¦æ±‚çš„æ´»åŠ¨åˆ—è¡¨ï¼Œæˆ‘ä»¬æœ€åˆçš„è®¾è®¡æ˜¯å¸Œæœ›æ´»åŠ¨åˆ›å»ºè€…åªèƒ½çœ‹åˆ°/ä¿®æ”¹åˆ›å»ºçš„æ´»åŠ¨ã€‚ è¿™å°±éœ€è¦ä¸€ä¸ªç”¨æˆ·IDæ¥æ ‡è¯†è¿™ä¸ªæ´»åŠ¨çš„åˆ›å»ºè€…ï¼Œå½“æˆ‘ç¿»å¼€å¾®ä¿¡å°ç¨‹åºçš„å¼€å‘æ–‡æ¡£æ—¶ï¼Œä¼šå‘ç°å…¶å®è¿™é‡Œæœ‰ä¸¤ä¸ªIDå¯ä»¥ä½¿ç”¨ï¼Œä¸€ä¸ªæ˜¯openIdï¼Œä¸€ä¸ªæ˜¯UnionIdã€‚&lt;/p&gt;



&lt;ul&gt;&lt;li&gt;ç®€å•æ¥è¯´openIdæ˜¯å¯¹äºå°ç¨‹åºæ¥è¯´çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åŒä¸€ä¸ªç”¨æˆ·åœ¨æ‰“å¼€å¾®ä¿¡å°ç¨‹åºçš„æ—¶å€™éƒ½ä¼šæ˜¯è¿™ä¸€ä¸ªidï¼Œå®ƒä¸éœ€è¦ç”¨æˆ·æ“ä½œå’Œæˆæƒã€‚&lt;/li&gt;&lt;li&gt;è€ŒUnionIdåˆ™æ˜¯åŒä¸€ä¸ªç”¨æˆ·åœ¨ä½ æ‰€å¼€å‘çš„æ‰€æœ‰çš„APPåŒ…æ‹¬å¾®ä¿¡å°ç¨‹åºï¼Œå¾®ä¿¡å…¬ä¼—å·ï¼Œappç­‰ä¹‹é—´ç»Ÿä¸€çš„IDæ ‡è¯†ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åœ¨å°ç¨‹åºï¼Œå…¬ä¼—å·ç­‰ä¹‹é—´äº¤äº’æ•°æ®äº†ã€‚å½“ç„¶å°ç¨‹åºï¼Œå…¬ä¼—å·å¿…é¡»æ˜¯åŒä¸€ä¸ªä¸»ä½“æ‰è¡Œã€‚&lt;/li&gt;&lt;/ul&gt;



&lt;p&gt;é‚£ä¹ˆå›å½’åˆ°æˆ‘ä»¬çš„å°ç¨‹åºï¼Œæˆ‘ä»¬å…¶å®å¹¶ä¸éœ€è¦åœ¨å¤šä¸ªåº”ç”¨ä¹‹é—´è¿›è¡Œæ•°æ®äº¤äº’ã€‚æ‰€ä»¥ç†æ‰€å½“ç„¶é€‰æ‹©openIdå°±å¯ä»¥äº†ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç®€å•çš„äº‘å‡½æ•°æ¥å®ç°OpenIdçš„è·å–ï¼Œç›¸å…³çš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-44.png&quot; alt=&quot;&quot; class=&quot;wp-image-1072&quot;/&gt;&lt;/figure&gt;



&lt;p&gt;æˆ‘ä»¬è·å–äº†éœ€è¦çš„openIdä¹‹åï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦è€ƒè™‘ï¼Œé‚£å°±æ˜¯ä»€ä¹ˆæ—¶å€™æ¥è·å–OpenIdï¼Œå¯ä»¥é¢„è§çš„æ˜¯æˆ‘ä»¬å¤§æ¦‚åœ¨æ•´ä¸ªç¨‹åºçš„è¿è¡Œè¿‡ç¨‹ä¸­éƒ½éœ€è¦ä½¿ç”¨è¿™ä¸ªidï¼Œé‚£ä¹ˆæŠŠå®ƒä¿å­˜åˆ°ä¸€ä¸ªå…¨å±€çš„åœ°æ–¹æ˜¾ç„¶æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ–¹æ³•ã€‚æˆ‘ä»¬å¯ä»¥åœ¨app.jsçš„onLaunchæ¥è·å–ï¼Œå¹¶å®ƒä¿å­˜åˆ°ä¸€ä¸ªå…¨å±€å˜é‡ä¸­ã€‚&lt;/p&gt;



&lt;h1&gt;è·å–æ´»åŠ¨åˆ—è¡¨&lt;/h1&gt;



&lt;p&gt;åœ¨æœ‰äº†OpenIdä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ¥è·å–å·²ç»åˆ›å»ºçš„æ´»åŠ¨åˆ—è¡¨äº†ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸Šæ–‡æåˆ°çš„GetActivities() APIã€‚è¿™é‡Œæœ‰ä¸¤ç§å®ç°:&lt;/p&gt;



&lt;ol type=&quot;1&quot;&gt;&lt;li&gt;GetActivities(OpenId)ï¼Œè¿™ç§å®ç°ä¸­æŠŠOpenIdä½œä¸ºå‚æ•°ä¼ ç»™åç«¯ï¼Œç„¶åè¿”å›çš„ç»“æœåªåŒ…å«OpenIdåˆ›å»ºçš„æ´»åŠ¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœï¼Œç›´æ¥ä»¥åˆ—è¡¨çš„æ–¹æ³•æ˜¾ç¤ºå‡ºæ¥å³å¯ã€‚&lt;/li&gt;&lt;li&gt;GetActivities()ï¼Œè·å–æ‰€æœ‰äººåˆ›å»ºçš„æ´»åŠ¨ï¼Œç„¶ååœ¨å‰ç«¯åœ¨æ ¹æ®openIdæ¥filterå‡ºæ¥ç®¡ç†è€…è‡ªå·±åˆ›å»ºçš„æ´»åŠ¨ï¼Œç„¶åå†æ˜¾ç¤ºã€‚&lt;/li&gt;&lt;/ol&gt;



&lt;p&gt;è¿™ä¸¤ç§æ–¹æ³•å„æœ‰å…¶ä¼˜ç¼ºç‚¹ï¼Œå‰è€…çš„å¥½å¤„å°±æ˜¯å®ƒåªéœ€è¦è¿”å›ç®¡ç†è€…åˆ›å»ºçš„æ´»åŠ¨å³å¯ï¼Œæ²¡æœ‰é¢å¤–çš„è¿”å›ã€‚ä½†æ˜¯é—®é¢˜å°±æ˜¯åœ¨è¿™ä¸ªrequestå‘é€ä¹‹å‰ï¼Œå®ƒå°±éœ€è¦openIdï¼Œè€Œæˆ‘ä»¬ä¸Šæ–‡çš„OpenIdå…¶å®æ˜¯ä¸€ä¸ªå¼‚æ­¥è°ƒç”¨ï¼Œå®ƒä»€ä¹ˆæ—¶å€™èƒ½å¤Ÿè¿”å›å¹¶ä¸ç¡®å®šã€‚ä¹Ÿå°±æ˜¯è¯´ä»performanceçš„è§’åº¦æ¥è¯´ï¼Œè¿™ä¸ªGetActivites(OpenId)åªèƒ½åœ¨ä¸Šé¢çš„getOpenIdè¿”å›ä¹‹åæ‰èƒ½æ‰§è¡Œã€‚&lt;/p&gt;



&lt;p&gt;è€Œç¬¬äºŒç§æ–¹æ³•åˆ™å¯ä»¥è§£å†³ç¬¬ä¸€ç§æ–¹æ³•çš„é—®é¢˜ï¼Œå®ƒä¸éœ€è¦ç­‰å¾…OpenIdçš„è¿”å›ï¼Œåªè¦åœ¨å¾—åˆ°responseåšfilterä¹‹å‰å¾—åˆ°OpenIdå³å¯ã€‚å½“ç„¶å®ƒæœ¬èº«çš„é—®é¢˜ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå°±æ˜¯å®ƒéœ€è¦è¿”å›æ‰€æœ‰äººåˆ›å»ºçš„æ´»åŠ¨ï¼Œè¿™ä¸ªresponseæœ‰å¯èƒ½ä¼šæœ‰å¾ˆå¤šæ²¡æœ‰å¿…è¦å†…å®¹ã€‚&lt;/p&gt;



&lt;p&gt;é‚£ä¹ˆæˆ‘ä»¬è¿™é‡Œä¼šé€‰æ‹©å“ªä¸€ç§æ–¹æ¡ˆå‘¢ï¼Ÿæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©çš„æ˜¯ç¬¬äºŒç§æ–¹æ¡ˆï¼ŒåŸå› æ˜¯ä»æˆ‘ä»¬çš„è§’åº¦æ¥çœ‹ï¼Œå…¶å®åˆ›å»ºçš„æ´»åŠ¨é‡ä¸ä¼šå¾ˆå¤šï¼Œä¸€å‘¨ä¹Ÿå°±ä¸ä¼šè¶…è¿‡åä¸ªï¼Œè€Œä¸”å¾ˆå¤šæ—¶å€™éƒ½æ˜¯ä¸€ä¸ªäººåˆ›å»ºçš„ï¼Œæ‰€ä»¥å³ä½¿é€‰æ‹©ç¬¬ä¸€ç§æ–¹æ¡ˆï¼Œå¯èƒ½ä¹Ÿä¸èƒ½å¾—åˆ°ç¬¬ä¸€ç§æ–¹æ¡ˆçš„å¥½å¤„ã€‚æ‰€ä»¥è¿™ä¸ªæœ€ç»ˆæ–¹æ¡ˆçš„é€‰æ‹©è¿˜æ˜¯éœ€è¦çœ‹ä½ è‡ªå·±çš„ä½¿ç”¨åœºæ™¯æ˜¯æ€ä¹ˆæ ·çš„æ¥æœ€ç»ˆå†³å®šã€‚&lt;/p&gt;



&lt;p&gt;æ‹¿åˆ°activitiesä¹‹åå†åšfilterï¼Œï¼ˆå‰æä¹Ÿè¿˜æ˜¯è¦åˆ¤æ–­ä¸€ä¸‹openIdæ˜¯å¦æ˜¯å·²ç»å­˜åœ¨äº†ï¼‰&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-45.png&quot; alt=&quot;&quot; class=&quot;wp-image-1073&quot; srcset=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-45.png 346w, https://donggeitnote.com/wp-content/uploads/2021/10/image-45-300x124.png 300w&quot; sizes=&quot;(max-width: 346px) 100vw, 346px&quot;/&gt;&lt;/figure&gt;



&lt;h1&gt;åˆ›å»ºæ´»åŠ¨&lt;/h1&gt;



&lt;p&gt;åˆ›å»ºæ´»åŠ¨çš„é¡µé¢å¤§æ¦‚å¦‚ä¸‹æ‰€ç¤ºï¼Œä¸»è¦å°±æ˜¯åŒ…å«æ´»åŠ¨ä¸»é¢˜ï¼Œæ—¶é—´ï¼Œæ˜ŸæœŸï¼Œä»¥åŠæè¿°ã€‚&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-46.png&quot; alt=&quot;&quot; class=&quot;wp-image-1074&quot; srcset=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-46.png 336w, https://donggeitnote.com/wp-content/uploads/2021/10/image-46-173x300.png 173w&quot; sizes=&quot;(max-width: 336px) 100vw, 336px&quot;/&gt;&lt;/figure&gt;



&lt;p&gt;ä»UIçš„è§’åº¦æ¥è¯´ï¼Œè¿™ä¸ªæ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«éœ€è¦æ³¨æ„çš„ï¼Œå°±æ˜¯è¿™é‡Œå¯èƒ½ä¼šæœ‰ä¸€äº›bindçš„æ“ä½œï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬ä¿®æ”¹äº†æ—¶é—´ï¼Œé‚£ä¹ˆæ˜ŸæœŸä¹Ÿéœ€è¦è·Ÿç€ä¿®æ”¹ï¼Œæˆ‘æƒ³è¿™ä¸ªå¯¹äºå†™è¿‡å‰ç«¯ä»£ç çš„åŒå­¦æ¥è¯´åº”è¯¥ä¼šæ¯”è¾ƒç®€å•ã€‚å®ƒä¸»è¦é€šè¿‡è¿™æ ·ç±»ä¼¼bindchangeçš„æ“ä½œæ¥å®ç°ï¼š&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-47.png&quot; alt=&quot;&quot; class=&quot;wp-image-1075&quot; srcset=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-47.png 624w, https://donggeitnote.com/wp-content/uploads/2021/10/image-47-300x103.png 300w&quot; sizes=&quot;(max-width: 624px) 100vw, 624px&quot;/&gt;&lt;/figure&gt;



&lt;p&gt;åœ¨åˆ›å»ºæ´»åŠ¨ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¼šåœ¨åç«¯æ•°æ®åº“ä¸­æ’å…¥ä¸€æ¡ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„æ•°æ®ï¼š&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-48.png&quot; alt=&quot;&quot; class=&quot;wp-image-1076&quot; srcset=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-48.png 257w, https://donggeitnote.com/wp-content/uploads/2021/10/image-48-234x300.png 234w&quot; sizes=&quot;(max-width: 257px) 100vw, 257px&quot;/&gt;&lt;/figure&gt;



&lt;p&gt;åº”è¯¥æ¯ä¸€ä¸ªpropertyéƒ½æ¯”è¾ƒæ¸…æ¥šï¼Œä½ ä¹Ÿè®¸ä¼šé—®è¿™é‡Œçš„applyMembersæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬æ¥æ¥ç€çœ‹ï¼š&lt;/p&gt;



&lt;h1&gt;æé†’çš„è®¾ç½®&lt;/h1&gt;



&lt;p&gt;åœ¨æ´»åŠ¨åˆ›å»ºå¹¶èƒ½å¤Ÿæ˜¾ç¤ºä¹‹åï¼Œä¸€ä¸ªå¾ˆé‡è¦çš„åŠŸèƒ½å°±æ˜¯èƒ½å¤ŸåŠæ—¶æé†’ç›¸å…³çš„ç”¨æˆ·æ´»åŠ¨å³å°†å¼€å§‹ã€‚è¿™é‡Œçš„é¡µé¢å¤§æ¦‚å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-49.png&quot; alt=&quot;&quot; class=&quot;wp-image-1077&quot; srcset=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-49.png 421w, https://donggeitnote.com/wp-content/uploads/2021/10/image-49-300x300.png 300w, https://donggeitnote.com/wp-content/uploads/2021/10/image-49-150x150.png 150w, https://donggeitnote.com/wp-content/uploads/2021/10/image-49-80x80.png 80w, https://donggeitnote.com/wp-content/uploads/2021/10/image-49-320x320.png 320w&quot; sizes=&quot;(max-width: 421px) 100vw, 421px&quot;/&gt;&lt;/figure&gt;



&lt;p&gt;ä¸Šé¢æ˜¯æ´»åŠ¨çš„æ˜¾ç¤ºï¼Œè¿™ä¸ªå¾ˆå¥½åšï¼Œä¸€ä¸ªGetActivities()çš„APIå¾—åˆ°æ‰€æœ‰çš„æ´»åŠ¨ï¼Œç„¶åæ˜¾ç¤ºå°±å¯ä»¥äº†ã€‚è¿™é‡Œéœ€è¦è€ƒè™‘çš„æ˜¯å¦‚ä½•å®ç°è¿™ä¸ªè®¾ç½®æé†’çš„åŠŸèƒ½ã€‚è¿™ä¸ªåŠŸèƒ½åŒ…å«ä¸¤ä¸ªæ–¹é¢ï¼Œä¸€ä¸ªæ–¹é¢å°±æ˜¯èƒ½å¤Ÿé€šè¿‡ä¸€å®šçš„æœºåˆ¶å‘é€æé†’ç»™ç”¨æˆ·ï¼›å¦ä¸€ä¸ªæ–¹é¢å°±æ˜¯å¦‚ä½•çŸ¥é“å“ªäº›ç”¨æˆ·è®¾ç½®äº†æé†’ï¼Œå¹¶ä¸”åœ¨æ­£ç¡®çš„æ—¶é—´å‘é€æé†’ã€‚&lt;/p&gt;



&lt;p&gt;å‰è€…é€šçŸ¥çš„æœºåˆ¶è‚¯å®šå°±æ˜¯éœ€è¦å¾®ä¿¡å°ç¨‹åºæ¥æ”¯æŒäº†ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„â€œè®¢é˜…æ¶ˆæ¯â€çš„åŠŸèƒ½ï¼Œä½ å¯ä»¥åœ¨å¾®ä¿¡å°ç¨‹åºåå°çœ‹åˆ°è¿™ä¸ªé€‰é¡¹ï¼š&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-50.png&quot; alt=&quot;&quot; class=&quot;wp-image-1078&quot; srcset=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-50.png 258w, https://donggeitnote.com/wp-content/uploads/2021/10/image-50-150x150.png 150w, https://donggeitnote.com/wp-content/uploads/2021/10/image-50-80x80.png 80w&quot; sizes=&quot;(max-width: 258px) 100vw, 258px&quot;/&gt;&lt;/figure&gt;



&lt;p&gt;è¦ä½¿ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œä½ éœ€è¦å…ˆé€‰ç”¨ä¸€ä¸ªæ¨¡æ¿æˆ–è€…è‡ªå·±åˆ›å»ºä¸€ä¸ªæ¨¡æ¿ï¼Œç›®å‰å°ç¨‹åºçš„å…¬å…±æ¨¡æ¿åº“æœ‰50ä¸ªå¸¸è§çš„è®¢é˜…æ¨¡æ¿ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œæˆ‘ä»¬çš„åœºæ™¯ä¹Ÿå¾ˆé€šç”¨ï¼Œæ²¡æœ‰ä»€ä¹ˆç‰¹æ®Šçš„åœ°æ–¹ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥é€‰æ‹©å…¶ä¸­ä¸€ä¸ªã€‚&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-51.png&quot; alt=&quot;&quot; class=&quot;wp-image-1079&quot; srcset=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-51.png 624w, https://donggeitnote.com/wp-content/uploads/2021/10/image-51-300x199.png 300w&quot; sizes=&quot;(max-width: 624px) 100vw, 624px&quot;/&gt;&lt;/figure&gt;



&lt;p&gt;è¿™é‡Œå‡å¦‚ä½ ä»”ç»†è§‚å¯Ÿï¼Œå¯ä»¥å‘ç°å…¶å®æ˜¯æ”¯æŒä¸¤ç§è®¢é˜…æ¨¡å¼çš„ï¼š&lt;/p&gt;



&lt;ol type=&quot;1&quot;&gt;&lt;li&gt;ä¸€æ¬¡æ€§è®¢é˜…ï¼šä¹Ÿå°±æ˜¯ç”¨æˆ·æˆæƒä¸€æ¬¡ï¼Œä½ å¯ä»¥å‘é€ä¸€æ¬¡é€šçŸ¥ã€‚&lt;/li&gt;&lt;li&gt;é•¿æœŸè®¢é˜…ï¼šç”¨æˆ·æˆæƒä¸€æ¬¡ï¼Œä½ å¯ä»¥å‘é€æ— é™æ¬¡é€šçŸ¥ã€‚&lt;/li&gt;&lt;/ol&gt;



&lt;p&gt;ç›®å‰å‘ä¸ªäººå¼€å‘è€…å¼€æ”¾çš„æ˜¯ä¸€æ¬¡æ€§è®¢é˜…ï¼Œé•¿æœŸè®¢é˜…æˆ‘ä»¬å¹¶ä¸èƒ½ä½¿ç”¨ï¼Œæ‰€ä»¥å¯ä»¥å¿½ç•¥ã€‚å½“ä½ é€‰æ‹©äº†æ¨¡æ¿ä¹‹åï¼Œå°±ä¼šæœ‰ä¸€ä¸ªæ¨¡æ¿çš„IDï¼ˆtemplateIdï¼‰ï¼Œè¿™ä¸ªidå°±å¯ä»¥ç”¨æ¥è¿›è¡Œè®¢é˜…å’Œå‘é€äº†ã€‚&lt;/p&gt;



&lt;p&gt;ç›¸å…³çš„è®¢é˜…ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-52.png&quot; alt=&quot;&quot; class=&quot;wp-image-1080&quot;/&gt;&lt;/figure&gt;



&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´æœ‰ç”¨æˆ·ç‚¹å‡»äº†è®¾ç½®æé†’ä¹‹åï¼Œæˆ‘ä»¬å°±éœ€è¦è°ƒç”¨è¿™ä¸ªå‡½æ•°æ¥æ³¨å†Œåˆ°ç›¸å…³çš„templateIdä¸­ã€‚åŒæ—¶æˆ‘ä»¬éœ€è¦æŠŠè¿™ä¸ªç”¨æˆ·çš„idåŠ å…¥åˆ°æˆ‘ä»¬ä¸Šæ–‡æåˆ°çš„appplyMembersåˆ—è¡¨ä¸­ï¼Œä»è€Œæˆ‘ä»¬å¯ä»¥çŸ¥é“å“ªäº›ç”¨æˆ·è®¾ç½®äº†æé†’äº†ã€‚&lt;/p&gt;



&lt;p&gt;é‚£ä¹ˆåœ¨ç”¨æˆ·è®¾ç½®äº†æé†’ä¹‹åï¼Œæˆ‘ä»¬æ€ä¹ˆæ‰å¯ä»¥ç»™å¯¹åº”çš„ç”¨æˆ·å‘é€æé†’å‘¢ï¼Ÿè¿™é‡Œæœ‰ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªæ˜¯æ€ä¹ˆçŸ¥é“ä½•æ—¶å‘é€ï¼Œè¿™å°±éœ€è¦æˆ‘ä»¬æœ‰ä¸€ä¸ªç±»ä¼¼å®šæ—¶å™¨çš„ä»»åŠ¡ä¸€ç›´åœ¨åå°è¿è¡Œï¼Œçœ‹å“ªä¸ªactivityå·²ç»è¦å¼€å§‹äº†ï¼Œç„¶åå†³å®šæ˜¯å¦è¦å‘é€æé†’ã€‚&lt;/p&gt;



&lt;p&gt;è¦å®ç°è¿™ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å°ç¨‹åºä¸­çš„å®šæ—¶è§¦å‘å™¨åŠŸèƒ½ã€‚å®ƒä¸»è¦å°±æ˜¯ä¼šå®šæ—¶æ‰§è¡Œä¸€ä¸ªäº‘å‡½æ•°ï¼Œæœ‰äº†è¿™ä¸ªåŠŸèƒ½ä¹‹åå°±æ–¹ä¾¿äº†ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œåœ¨ç›¸å…³çš„äº‘å‡½æ•°ä¸­åŠ å…¥è¿™ä¸ªå®šæ—¶è§¦å‘å™¨ï¼Œè¿™é‡Œæ¯15åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡è¿™ä¸ªå‡½æ•°ã€‚ç›¸å…³å®šæ—¶å™¨çš„ä½¿ç”¨ï¼Œå¤§å®¶å¯ä»¥å‚è§å¾®ä¿¡çš„å®˜æ–¹æ–‡æ¡£ï¼šhttps://developers.weixin.qq.com/miniprogram/dev/wxcloud/guide/functions/triggers.html&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-53.png&quot; alt=&quot;&quot; class=&quot;wp-image-1081&quot;/&gt;&lt;/figure&gt;



&lt;p&gt;è¿™æ ·æ¯15åˆ†é’Ÿä¼šæ£€æŸ¥ä¸€æ¬¡çœ‹æ˜¯å¦æœ‰æ´»åŠ¨è¦å¼€å§‹äº†ï¼Œå¦‚æœæœ‰ï¼Œåˆ™ä¼šå‘é€é€šçŸ¥ï¼Œå‘é€é€šçŸ¥å¯ä»¥ä½¿ç”¨ä¸‹é¢å‡½æ•°æ¥å®ç°ï¼š&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-54.png&quot; alt=&quot;&quot; class=&quot;wp-image-1082&quot; srcset=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-54.png 365w, https://donggeitnote.com/wp-content/uploads/2021/10/image-54-252x300.png 252w&quot; sizes=&quot;(max-width: 365px) 100vw, 365px&quot;/&gt;&lt;/figure&gt;



&lt;p&gt;è¿™é‡Œçš„templateIdå°±æ˜¯æˆ‘ä»¬ä¹‹å‰æ³¨å†Œçš„templateIdï¼Œéœ€è¦æ³¨æ„çš„æ—¶å€™å®ƒçš„æ¶ˆæ¯æ˜¯æœ‰ä¸€äº›é•¿åº¦é™åˆ¶çš„ï¼Œåªèƒ½å‘é€20ä¸ªå­—ç¬¦ï¼Œæœ€ç»ˆçš„æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-55.png&quot; alt=&quot;&quot; class=&quot;wp-image-1083&quot; srcset=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-55.png 393w, https://donggeitnote.com/wp-content/uploads/2021/10/image-55-300x180.png 300w&quot; sizes=&quot;(max-width: 393px) 100vw, 393px&quot;/&gt;&lt;/figure&gt;



&lt;h1&gt;ç›‘æ§&lt;/h1&gt;



&lt;p&gt;è‡³æ­¤ï¼Œå°ç¨‹åºçš„å¼€å‘éƒ¨åˆ†å°±åŸºæœ¬å®Œæˆäº†ï¼Œæˆ‘ä»¬æœ€åæ¥èŠä¸€èŠç›‘æ§ç›¸å…³çš„å†…å®¹ã€‚å°±æ˜¯ä½ çš„å°ç¨‹åºçš„ä½¿ç”¨æƒ…å†µï¼Œä½ å¯ä»¥é€šè¿‡å¼€å‘å·¥å…·ä¸­çš„äº‘å¼€å‘å¹³å°æ¥ç›‘æ§ï¼š&lt;/p&gt;



&lt;p&gt;è¿™æ˜¯æ•´ä½“çš„çŠ¶å†µï¼š&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-56.png&quot; alt=&quot;&quot; class=&quot;wp-image-1084&quot; srcset=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-56.png 624w, https://donggeitnote.com/wp-content/uploads/2021/10/image-56-300x114.png 300w&quot; sizes=&quot;(max-width: 624px) 100vw, 624px&quot;/&gt;&lt;/figure&gt;



&lt;p&gt;èµ„æºä½¿ç”¨çš„æƒ…å†µï¼Œè¿™ä¸ªæ¯”è¾ƒé‡è¦ï¼Œä½ å¯ä»¥æ ¹æ®è¿™ä¸ªæ¥è¯„æµ‹ä½ çš„ç”¨æˆ·é‡ï¼Œç„¶åè¯„ä¼°æ˜¯å¦éœ€è¦ä»˜è´¹è¿è¡Œã€‚&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-57.png&quot; alt=&quot;&quot; class=&quot;wp-image-1085&quot; srcset=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-57.png 624w, https://donggeitnote.com/wp-content/uploads/2021/10/image-57-300x48.png 300w&quot; sizes=&quot;(max-width: 624px) 100vw, 624px&quot;/&gt;&lt;/figure&gt;



&lt;p&gt;å½“ç„¶ä»å¼€å‘è€…è§’åº¦æ¥çœ‹ï¼Œä½ è€Œå·²å¯ä»¥çœ‹å„ä¸ªäº‘å‡½æ•°æ‰§è¡Œçš„çŠ¶å†µï¼Œæ¯”å¦‚æˆ‘ä»¬ä¸Šé¢çš„æ¯15åˆ†é’Ÿè¿è¡Œçš„å‡½æ•°çš„æ‰§è¡Œæƒ…å†µå¦‚ä¸‹ï¼š&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-58.png&quot; alt=&quot;&quot; class=&quot;wp-image-1086&quot; srcset=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-58.png 276w, https://donggeitnote.com/wp-content/uploads/2021/10/image-58-221x300.png 221w&quot; sizes=&quot;(max-width: 276px) 100vw, 276px&quot;/&gt;&lt;/figure&gt;



&lt;p&gt;è¿™é‡Œä½ åŸºæœ¬å¯ä»¥ç›‘æ§ä½ æ‰€æœ‰ä½ æƒ³çŸ¥é“çš„ä¸œè¥¿ï¼Œç”šè‡³å¯ä»¥ç›´æ¥ä¿®æ”¹æ•°æ®åº“ï¼Œå“ˆå“ˆã€‚&lt;/p&gt;



&lt;figure class=&quot;wp-block-image size-large&quot;&gt;&lt;img src=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-59.png&quot; alt=&quot;&quot; class=&quot;wp-image-1087&quot; srcset=&quot;https://donggeitnote.com/wp-content/uploads/2021/10/image-59.png 485w, https://donggeitnote.com/wp-content/uploads/2021/10/image-59-300x111.png 300w&quot; sizes=&quot;(max-width: 485px) 100vw, 485px&quot;/&gt;&lt;/figure&gt;



&lt;h1&gt;æ€»ç»“&lt;/h1&gt;



&lt;p&gt;è‡³æ­¤ï¼Œæˆ‘ä»¬å°±æŠŠè¿™ä¸ªèŠ±äº†æˆ‘10ä¸ªå°æ—¶è‚å‡ºæ¥çš„å°ç¨‹åºå†™æ³•å‘Šè¯‰å¤§å®¶äº†ï¼Œå…·ä½“çš„å°ç¨‹åºåå­—å°±ä¸è¯´äº†ï¼Œå¦åˆ™è¢«ä½ ä»¬å»å°è¯•ä¹‹åï¼Œæˆ‘ä»¬çš„å…è´¹é¢åº¦å°±ä¸å¤Ÿç”¨äº†ï¼Œå¸Œæœ›å¯¹å†™å°ç¨‹åºæ„Ÿå…´è¶£çš„åŒå­¦èƒ½æœ‰æ‰€å¸®åŠ©ã€‚&lt;/p&gt;
                                                    &lt;nav class=&quot;pagination group&quot;&gt;
                      &lt;/nav&gt;
        &lt;/div&gt;

        
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>e92c589169bdb6d30fc38cba86272862</guid>
<title>æ€§èƒ½ä¼˜åŒ–ï¼šå¦‚ä½•æ›´å¿«åœ°æ¥æ”¶æ•°æ®</title>
<link>https://toutiao.io/k/xcgimf8</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;RichText ztext Post-RichText css-hnrfcf&quot; options=&quot;[object Object]&quot;&gt;&lt;p&gt;ä»ç½‘å¡åˆ°åº”ç”¨ç¨‹åºï¼Œæ•°æ®åŒ…ä¼šç»è¿‡ä¸€ç³»åˆ—ç»„ä»¶ï¼Œå…¶ä¸­é©±åŠ¨åšäº†ä»€ä¹ˆï¼Ÿå†…æ ¸åšäº†ä»€ä¹ˆï¼Ÿä¸ºäº†ä¼˜åŒ–ï¼Œæˆ‘ä»¬åˆèƒ½åšäº›ä»€ä¹ˆï¼Ÿæ•´ä¸ªè¿‡ç¨‹ä¸­æ¶‰åŠåˆ°è¯¸å¤šç»†å¾®å¯è°ƒçš„è½¯ç¡¬ä»¶å‚æ•°ï¼Œå¹¶ä¸”ç›¸äº’å½±å“ï¼Œä¸å­˜åœ¨ä¸€åŠ³æ°¸é€¸çš„â€œé“¶å¼¹â€ã€‚æœ¬æ–‡ä¸­åˆæ‹äº‘ç³»ç»Ÿå¼€å‘é«˜çº§å·¥ç¨‹å¸ˆæ¨é¹å°†ç»“åˆè‡ªå·±çš„çš„å®è·µç»éªŒï¼Œä»‹ç»åœ¨æ·±å…¥ç†è§£åº•å±‚æœºåˆ¶çš„åŸºç¡€ä¸Šå¦‚ä½•åšå‡ºâ€œåœºæ™¯åŒ–â€çš„æœ€ä¼˜é…ç½®ã€‚&lt;/p&gt;&lt;blockquote&gt;æ–‡ç« æ ¹æ®æ¨é¹åœ¨åˆæ‹äº‘ Open Talk æŠ€æœ¯æ²™é¾™åŒ—äº¬ç«™ä¸»é¢˜æ¼”è®²ã€Šæ€§èƒ½ä¼˜åŒ–ï¼šæ›´å¿«åœ°æ¥æ”¶æ•°æ®ã€‹æ•´ç†è€Œæˆï¼Œç°åœºè§†é¢‘åŠ PPT å¯ä¸‹æ‹‰æ–‡æœ«ç‚¹å‡»é˜…è¯»åŸæ–‡æŸ¥çœ‹ã€‚&lt;/blockquote&gt;&lt;p&gt;å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯åˆæ‹äº‘å¼€å‘å·¥ç¨‹å¸ˆæ¨é¹ï¼Œåœ¨åˆæ‹äº‘å·¥ä½œå·²æœ‰å››å¹´æ—¶é—´ï¼ŒæœŸé—´ä¸€ç›´ä»äº‹ CDN åº•å±‚ç³»ç»Ÿå¼€å‘çš„å·¥ä½œï¼Œè´Ÿè´£è°ƒåº¦ã€ç¼“å­˜ã€è´Ÿè½½å‡è¡¡ç­‰ CDNçš„æ ¸å¿ƒç»„ä»¶ï¼Œå¾ˆé«˜å…´æ¥è·Ÿå¤§å®¶åˆ†äº«åœ¨ç½‘ç»œæ•°æ®å¤„ç†æ–¹é¢çš„ç»éªŒå’Œæ„Ÿå—ã€‚ä»Šå¤©åˆ†äº«çš„ä¸»é¢˜æ˜¯ã€Šå¦‚ä½•æ›´å¿«åœ°æ¥æ”¶æ•°æ®ã€‹ï¼Œä¸»è¦ä»‹ç»åŠ é€Ÿç½‘ç»œæ•°æ®å¤„ç†çš„æ–¹æ³•å’Œå®è·µã€‚å¸Œæœ›èƒ½å¸®åŠ©å¤§å®¶æ›´å¥½çš„äº†è§£å¦‚ä½•åœ¨ç³»ç»Ÿçš„å±‚é¢ï¼Œå°½é‡åœ¨åº”ç”¨ç¨‹åºæ— æ„Ÿçš„æƒ…å†µä¸‹åšåˆ°æè‡´çš„ä¼˜åŒ–ã€‚è¨€å½’æ­£ä¼ ï¼Œè¿›å…¥ä¸»é¢˜ã€‚&lt;/p&gt;&lt;p&gt;é¦–å…ˆéœ€è¦æ¸…æ¥šåœ¨å°è¯•åšä»»ä½•ä¼˜åŒ–çš„æ—¶å€™ï¼Œæƒ³åˆ°çš„ç¬¬ä¸€ä»¶äº‹æƒ…åº”è¯¥æ˜¯ä»€ä¹ˆï¼Ÿä¸ªäººè§‰å¾—æ˜¯è¡¡é‡æŒ‡æ ‡ã€‚åšä»»ä½•æ”¹åŠ¨æˆ–ä¼˜åŒ–ä¹‹å‰ï¼Œéƒ½è¦æ˜ç¡®åœ°çŸ¥é“ï¼Œæ˜¯æ€æ ·çš„æŒ‡æ ‡åæ˜ å‡ºäº†å½“å‰çš„é—®é¢˜ã€‚é‚£ä¹ˆåœ¨åšäº†ç›¸åº”çš„è°ƒæ•´æˆ–æ”¹åŠ¨ä¹‹åï¼Œä¹Ÿæ‰èƒ½é€šè¿‡æŒ‡æ ‡å»éªŒè¯å®é™…æ•ˆæœä¸ä½œç”¨ã€‚&lt;/p&gt;&lt;p&gt;é’ˆå¯¹è¦åˆ†äº«çš„ä¸»é¢˜ï¼Œæœ‰ä¸€ä¸ªå›´ç»•ä¸Šé¢æŒ‡æ ‡æ ¸å¿ƒçš„åŸºæœ¬åŸåˆ™ã€‚åœ¨ç½‘ç»œå±‚é¢åšä¼˜åŒ–ï¼Œå½’æ ¹ç»“åº•åªéœ€è¦çœ‹ä¸€ç‚¹ï¼Œå‡å¦‚å¯ä»¥åšåˆ°ç½‘ç»œæ ˆçš„æ¯ä¸ªå±‚æ¬¡ï¼ŒåŠ å…¥èƒ½ç›‘æ§åˆ°å¯¹åº”å±‚æ¬¡çš„ä¸¢åŒ…ç‡ï¼Œè¿™æ ·æ ¸å¿ƒçš„æŒ‡æ ‡ï¼Œå°±å¯ä»¥æ˜ç¡®åœ°çŸ¥é“é—®é¢˜å‡ºåœ¨å“ªä¸€å±‚ã€‚æœ‰äº†æ˜ç¡®å¯ç›‘æ§çš„æŒ‡æ ‡ï¼Œä¹‹ååšç›¸åº”çš„è°ƒæ•´ä¸å®é™…æ•ˆæœçš„éªŒè¯ä¹Ÿå°±å¾ˆç®€å•äº†ã€‚å½“ç„¶ä¸Šè¿°ä¸¤ç‚¹ç›¸å¯¹æœ‰ç‚¹è™šï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ¯”è¾ƒå¹²çš„éƒ¨åˆ†äº†ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-31788060ba64420840bc3acc09064678_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1026&quot; data-rawheight=&quot;652&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic1.zhimg.com/v2-31788060ba64420840bc3acc09064678_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1026&quot; data-rawheight=&quot;652&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic1.zhimg.com/v2-31788060ba64420840bc3acc09064678_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-31788060ba64420840bc3acc09064678_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå½“æ”¶åˆ°ä¸€ä¸ªæ•°æ®åŒ…ï¼Œä»è¿›å…¥ç½‘å¡ï¼Œä¸€ç›´åˆ°è¾¾åº”ç”¨å±‚ï¼Œæ€»çš„æ•°æ®æµç¨‹æœ‰å¾ˆå¤šã€‚åœ¨å½“å‰é˜¶æ®µï¼Œæ— éœ€å…³æ³¨æ¯ä¸ªæµç¨‹ï¼Œç•™æ„å…¶ä¸­å‡ ä¸ªæ ¸å¿ƒçš„å…³é”®è·¯å¾„å³å¯ï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt;ç¬¬ä¸€ä¸ªï¼Œæ•°æ®åŒ…åˆ°è¾¾ç½‘å¡ï¼›&lt;/li&gt;&lt;li&gt;ç¬¬äºŒä¸ªï¼Œç½‘å¡åœ¨æ”¶åˆ°æ•°æ®åŒ…æ—¶ï¼Œå®ƒéœ€è¦äº§ç”Ÿä¸€ä¸ªä¸­æ–­ï¼Œå‘Šè¯‰ CPU æ•°æ®å·²ç»åˆ°äº†ï¼›&lt;/li&gt;&lt;li&gt;ç¬¬ä¸‰æ­¥ï¼Œå†…æ ¸ä»è¿™ä¸ªæ—¶å€™å¼€å§‹è¿›è¡Œæ¥ç®¡ï¼ŒæŠŠæ•°æ®ä»ç½‘å¡ä¸­æ‹¿å‡ºæ¥ï¼Œäº¤åˆ°åé¢å†…æ ¸çš„åè®®æ ˆå»å¤„ç†ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;ä»¥ä¸Šæ˜¯ä¸‰ä¸ªå…³é”®çš„è·¯å¾„ã€‚ä¸Šå›¾ä¸­å³è¾¹çš„æ‰‹ç»˜å›¾æŒ‡çš„å°±æ˜¯è¿™ä¸‰ä¸ªæ­¥éª¤ï¼Œå¹¶æœ‰æ„åŒºåˆ†äº†ä¸¤ä¸ªé¢œè‰²ã€‚ä¹‹æ‰€ä»¥è¿™ä¹ˆåŒºåˆ†æ˜¯å› ä¸º&lt;b&gt;æ¥ä¸‹æ¥ä¼šæŒ‰è¿™ä¸¤éƒ¨åˆ†è¿›è¡Œåˆ†äº«ï¼Œä¸€æ˜¯ä¸Šå±‚é©±åŠ¨éƒ¨åˆ†ï¼ŒäºŒæ˜¯ä¸‹å±‚æ¶‰åŠåˆ°å†…æ ¸çš„éƒ¨åˆ†ã€‚&lt;/b&gt;å½“ç„¶å†…æ ¸æ¯”è¾ƒå¤šï¼Œé€šç¯‡åªæ¶‰åŠåˆ°å†…æ ¸ç½‘ç»œå­ç³»ç»Ÿï¼Œæ›´å…·ä½“æ¥è¯´æ˜¯å†…æ ¸è·Ÿé©±åŠ¨äº¤äº’éƒ¨åˆ†çš„å†…å®¹ã€‚&lt;/p&gt;&lt;h2&gt;&lt;br/&gt;ç½‘å¡é©±åŠ¨&lt;/h2&gt;&lt;p&gt;ç½‘å¡é©±åŠ¨çš„éƒ¨åˆ†ï¼Œç½‘å¡æ˜¯ç¡¬ä»¶ï¼Œé©±åŠ¨ï¼ˆdriverï¼‰æ˜¯è½¯ä»¶ï¼ŒåŒ…æ‹¬äº†ç½‘å¡é©±åŠ¨éƒ¨åˆ†çš„å¤§éƒ¨åˆ†ã€‚è¿™éƒ¨åˆ†å¯ç®€å•åˆ†å››ä¸ªç‚¹ï¼Œä¾æ¬¡æ˜¯åˆå§‹åŒ–ã€å¯åŠ¨ã€ç›‘æ§ä¸è°ƒä¼˜é©±åŠ¨å®ƒçš„åˆå§‹åŒ–æµç¨‹&lt;/p&gt;&lt;p&gt;&lt;b&gt;ç½‘å¡é©±åŠ¨-åˆå§‹åŒ– &lt;/b&gt;&lt;/p&gt;&lt;p&gt;é©±åŠ¨åˆå§‹åŒ–çš„è¿‡ç¨‹å’Œç¡¬ä»¶ç›¸å…³ï¼Œæ— éœ€è¿‡åˆ†å…³æ³¨ã€‚ä½†éœ€æ³¨æ„ä¸€ç‚¹å°±æ˜¯æ³¨å†Œ ethool çš„ä¸€ç³»åˆ—æ“ä½œï¼Œè¿™ä¸ªå·¥å…·å¯ä»¥å¯¹ç½‘å¡åšå„ç§å„æ ·çš„æ“ä½œï¼Œä¸æ­¢å¯ä»¥è¯»å–ç½‘å¡çš„é…ç½®ï¼Œè¿˜å¯ä»¥æ›´æ”¹ç½‘å¡çš„é…ç½®å‚æ•°ï¼Œæ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å·¥å…·ã€‚&lt;/p&gt;&lt;p&gt;é‚£å®ƒæ˜¯å¦‚ä½•æ§åˆ¶ç½‘å¡çš„å‘¢ï¼Ÿæ¯ä¸ªç½‘å¡çš„é©±åŠ¨åœ¨åˆå§‹åŒ–æ—¶ï¼Œé€šè¿‡æ¥å£ï¼Œå»æ³¨å†Œæ”¯æŒ ethool å·¥å…·çš„ä¸€ç³»åˆ—æ“ä½œã€‚ethool æ˜¯ä¸€å¥—å¾ˆé€šç”¨çš„æ¥å£ï¼Œæ¯”å¦‚è¯´å®ƒæ”¯æŒ 100 ä¸ªåŠŸèƒ½ï¼Œä½†æ¯ä¸ªå‹å·çš„ç½‘å¡ï¼Œåªèƒ½æ”¯æŒä¸€ä¸ªå­é›†ã€‚æ‰€ä»¥å…·ä½“æ”¯æŒå“ªäº›åŠŸèƒ½ï¼Œä¼šåœ¨è¿™ä¸€æ­¥è¿›è¡Œå£°æ˜ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-2d0afc79ffc5a1c3d62383e2ba827274_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1057&quot; data-rawheight=&quot;589&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic1.zhimg.com/v2-2d0afc79ffc5a1c3d62383e2ba827274_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1057&quot; data-rawheight=&quot;589&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic1.zhimg.com/v2-2d0afc79ffc5a1c3d62383e2ba827274_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-2d0afc79ffc5a1c3d62383e2ba827274_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;ä¸Šå›¾æˆªå–çš„éƒ¨åˆ†ï¼Œæ˜¯åœ¨åˆå§‹åŒ–æ—¶ç»“æ„ä½“çš„èµ‹å€¼ã€‚å‰é¢ä¸¤ä¸ªå¯ä»¥ç®€å•çœ‹ä¸€ä¸‹ï¼Œé©±åŠ¨åœ¨åˆå§‹åŒ–çš„æ—¶å€™ä¼šå‘Šè¯‰å†…æ ¸ï¼Œå¦‚æœæƒ³è¦æ“ä½œè¿™å—ç½‘å¡å¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œå…¶ä¸­æœ€ä¸»è¦çš„æ˜¯å¯åŠ¨å’Œå…³é—­ï¼Œæœ‰ç”¨ ifconfig å·¥å…·æ“ä½œç½‘å¡çš„åº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰ï¼Œå½“ç”¨ ifconfigup/downä¸€å¼ ç½‘å¡çš„æ—¶å€™ï¼Œè°ƒç”¨çš„éƒ½æ˜¯å®ƒåˆå§‹åŒ–æ—¶æŒ‡å®šçš„è¿™å‡ ä¸ªå‡½æ•°ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;ç½‘å¡é©±åŠ¨-å¯åŠ¨&lt;/b&gt;&lt;/p&gt;&lt;p&gt;é©±åŠ¨åˆå§‹åŒ–è¿‡ç¨‹ä¹‹åå°±æ˜¯å¯åŠ¨ï¼ˆopenï¼‰ä¸­çš„æµç¨‹äº†ï¼Œä¸€å…±åˆ†ä¸ºå››æ­¥ï¼šåˆ†é… rx/tx é˜Ÿåˆ—å†…å­˜ã€&lt;/p&gt;&lt;p&gt;å¼€å¯ NAPIã€æ³¨å†Œä¸­æ–­å¤„ç†å‡½æ•°ã€å¼€å¯ä¸­æ–­ã€‚å…¶ä¸­æ³¨å†Œä¸­æ–­å¤„ç†å‡½æ•°å’Œå¼€å¯ä¸­æ–­æ˜¯ç†æ‰€å½“ç„¶çš„ï¼Œä»»ä½•ä¸€ä¸ªç¡¬ä»¶æ¥å…¥åˆ°æœºå™¨ä¸Šéƒ½éœ€è¦åšè¿™ä¸ªæ“ä½œã€‚å½“åé¢æ”¶åˆ°ä¸€äº›äº‹ä»¶æ—¶ï¼Œå®ƒéœ€è¦é€šè¿‡ä¸­æ–­å»é€šçŸ¥ç³»ç»Ÿï¼Œç„¶åå¼€å¯ä¸­æ–­ã€‚&lt;/p&gt;&lt;p&gt;ç¬¬äºŒæ­¥çš„ NAPI åé¢ä¼šè¯¦ç»†è¯´æ˜ï¼Œè¿™é‡Œå…ˆé‡ç‚¹å…³æ³¨å¯åŠ¨è¿‡ç¨‹ä¸­å¯¹å†…å­˜çš„åˆ†é…ã€‚ç½‘å¡åœ¨æ”¶åˆ°æ•°æ®æ—¶ï¼Œéƒ½å¿…é¡»æŠŠæ•°æ®ä»é“¾è·¯å±‚æ‹·è´åˆ°æœºå™¨çš„å†…å­˜é‡Œï¼Œè€Œè¿™å—å†…å­˜å°±æ˜¯ç½‘å¡åœ¨å¯åŠ¨æ—¶ï¼Œé€šè¿‡æ¥å£å‘å†…æ ¸ã€å‘æ“ä½œç³»ç»Ÿç”³è¯·è€Œæ¥çš„ã€‚å†…å­˜ä¸€æ—¦ç”³è¯·ä¸‹æ¥ï¼Œåœ°å€ç¡®å®šä¹‹åï¼Œåç»­ç½‘å¡åœ¨æ”¶åˆ°æ•°æ®çš„æ—¶å€™ï¼Œå°±å¯ä»¥ç›´æ¥é€šè¿‡ DMA çš„æœºåˆ¶ï¼Œç›´æ¥æŠŠæ•°æ®åŒ…ä¼ é€åˆ°å†…å­˜å›ºå®šçš„åœ°å€ä¸­å»ï¼Œç”šè‡³ä¸éœ€è¦ CPU çš„å‚ä¸ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-92836b80b7002489b2cc8e9b2001aabb_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;601&quot; data-rawheight=&quot;423&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic4.zhimg.com/v2-92836b80b7002489b2cc8e9b2001aabb_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;601&quot; data-rawheight=&quot;423&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic4.zhimg.com/v2-92836b80b7002489b2cc8e9b2001aabb_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-92836b80b7002489b2cc8e9b2001aabb_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;åˆ°é˜Ÿåˆ—å†…å­˜çš„åˆ†é…å¯ä»¥çœ‹ä¸‹ä¸Šå›¾ï¼Œå¾ˆæ—©ä¹‹å‰çš„ç½‘å¡éƒ½æ˜¯å•é˜Ÿåˆ—çš„æœºåˆ¶ï¼Œä½†ç°ä»£çš„ç½‘å¡å¤§å¤šéƒ½æ˜¯å¤šé˜Ÿåˆ—çš„ã€‚å¥½å¤„å°±æ˜¯æœºå™¨ç½‘å¡çš„æ•°æ®æ¥æ”¶å¯ä»¥è¢«è´Ÿè½½å‡è¡¡åˆ°å¤šä¸ª CPU ä¸Šï¼Œå› æ­¤ä¼šæä¾›å¤šä¸ªé˜Ÿåˆ—ï¼Œè¿™é‡Œå…ˆæœ‰ä¸ªæ¦‚å¿µåé¢ä¼šè¯¦ç»†è¯´æ˜ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-2b6298f60c2e08d3b9e0f3011a8e2911_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;752&quot; data-rawheight=&quot;536&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic2.zhimg.com/v2-2b6298f60c2e08d3b9e0f3011a8e2911_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;752&quot; data-rawheight=&quot;536&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic2.zhimg.com/v2-2b6298f60c2e08d3b9e0f3011a8e2911_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-2b6298f60c2e08d3b9e0f3011a8e2911_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;ä¸‹é¢æ¥è¯¦ç»†ä»‹ç»å¯åŠ¨è¿‡ç¨‹ä¸­çš„ç¬¬äºŒæ­¥ NAPIï¼Œè¿™æ˜¯ç°ä»£ç½‘ç»œæ•°æ®åŒ…å¤„ç†æ¡†æ¶ä¸­éå¸¸é‡è¦çš„ä¸€ä¸ªæ‰©å±•ã€‚ä¹‹æ‰€ä»¥ç°åœ¨èƒ½æ”¯æŒ10Gã€20Gã€25Gç­‰éå¸¸é«˜é€Ÿçš„ç½‘å¡ï¼ŒNAPI æœºåˆ¶èµ·åˆ°äº†éå¸¸å¤§çš„ä½œç”¨ã€‚å½“ç„¶ NAPI å¹¶ä¸å¤æ‚ï¼Œå…¶æ ¸å¿ƒå°±ä¸¤ç‚¹ï¼šä¸­æ–­ã€è½®å¾ªã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç½‘å¡åœ¨æ¥æ”¶æ•°æ®æ—¶è‚¯å®šæ˜¯æ”¶ä¸€ä¸ªåŒ…ï¼Œäº§ç”Ÿä¸€ä¸ªä¸­æ–­ï¼Œç„¶ååœ¨ä¸­æ–­å¤„ç†å‡½æ•°çš„æ—¶å€™å°†åŒ…å¤„ç†æ‰ã€‚å¤„åœ¨æ”¶åŒ…ã€å¤„ç†ä¸­æ–­ï¼Œä¸‹ä¸€ä¸ªæ”¶åŒ…ï¼Œå†å¤„ç†ä¸­æ–­ï¼Œè¿™æ ·çš„å¾ªç¯ä¸­ã€‚è€Œ NAPI æœºåˆ¶ä¼˜åŠ¿åœ¨äºåªéœ€è¦ä¸€æ¬¡ä¸­æ–­ï¼Œæ”¶åˆ°ä¹‹åå°±å¯ä»¥é€šè¿‡è½®å¾ªçš„æ–¹å¼ï¼ŒæŠŠé˜Ÿåˆ—å†…å­˜ä¸­æ‰€æœ‰çš„æ•°æ®éƒ½æ‹¿èµ°ï¼Œè¾¾åˆ°éå¸¸é«˜æ•ˆçš„çŠ¶æ€ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;ç½‘å¡é©±åŠ¨-ç›‘æ§&lt;/b&gt;&lt;/p&gt;&lt;p&gt;æ¥ä¸‹æ¥å°±æ˜¯åœ¨é©±åŠ¨è¿™å±‚å¯ä»¥åšçš„ç›‘æ§äº†ï¼Œéœ€è¦å»å…³æ³¨å…¶ä¸­ä¸€äº›æ•°æ®çš„æ¥æºã€‚&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ sudo ethtool -S eth0
NIC statistics:
     rx_packets: 597028087
     tx_packets: 5924278060
     rx_bytes: 112643393747
     tx_bytes: 990080156714
     rx_broadcast: 96
     tx_broadcast: 116
     rx_multicast:20294528
     .... &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é¦–å…ˆéå¸¸é‡è¦çš„æ˜¯ethool å·¥å…·ï¼Œå®ƒå¯ä»¥æ‹¿åˆ°ç½‘å¡ä¸­ç»Ÿè®¡çš„æ•°æ®ã€æ¥æ”¶çš„åŒ…æ•°é‡ã€å¤„ç†çš„æµé‡ç­‰ç­‰å¸¸è§„çš„ä¿¡æ¯ï¼Œè€Œæˆ‘ä»¬æ›´å¤šçš„æ˜¯éœ€è¦å…³æ³¨åˆ°å¼‚å¸¸ä¿¡æ¯ã€‚&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ cat /sys/class/net/eth0/statistics/rx_dropped
2&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€šè¿‡ sysfs çš„æ¥å£ï¼Œå¯ä»¥çœ‹åˆ°ç½‘å¡çš„ä¸¢åŒ…æ•°ï¼Œè¿™å°±æ˜¯ç³»ç»Ÿå‡ºç°å¼‚å¸¸çš„ä¸€ä¸ªæ ‡å¿—ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-4b742b0dcda2b39a2e0443c7626e4ee8_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1097&quot; data-rawheight=&quot;163&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic1.zhimg.com/v2-4b742b0dcda2b39a2e0443c7626e4ee8_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1097&quot; data-rawheight=&quot;163&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic1.zhimg.com/v2-4b742b0dcda2b39a2e0443c7626e4ee8_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-4b742b0dcda2b39a2e0443c7626e4ee8_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;ä¸‰ä¸ªé€”å¾„æ‹¿åˆ°çš„ä¿¡æ¯ä¸å‰é¢å·®ä¸å¤šï¼Œåªæ˜¯æ ¼å¼æœ‰äº›ä¹±ï¼Œä»…åšäº†è§£å³å¯ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-14f2ef2437cddbb2823e26b8381324e9_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1213&quot; data-rawheight=&quot;624&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic2.zhimg.com/v2-14f2ef2437cddbb2823e26b8381324e9_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1213&quot; data-rawheight=&quot;624&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic2.zhimg.com/v2-14f2ef2437cddbb2823e26b8381324e9_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-14f2ef2437cddbb2823e26b8381324e9_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;ä¸Šå›¾æ˜¯è¦åˆ†äº«çš„ä¸€ä¸ªçº¿ä¸Šæ¡ˆä¾‹ã€‚å½“æ—¶ä¸šåŠ¡ä¸Šå‡ºç°å¼‚å¸¸ï¼Œç»è¿‡æ’æŸ¥æœ€åæ˜¯æ€€ç–‘åˆ°ç½‘å¡è¿™å±‚ï¼Œä¸ºæ­¤éœ€è¦åšè¿›ä¸€æ­¥çš„åˆ†æã€‚é€šè¿‡ ifconfig å·¥å…·å¯ä»¥å¾ˆç›´è§‚çš„æŸ¥çœ‹åˆ°ç½‘å¡çš„ä¸€äº›ç»Ÿè®¡æ•°æ®ï¼Œå›¾ä¸­å¯ä»¥çœ‹åˆ°ç½‘å¡çš„ errors æ•°æ®æŒ‡æ ‡éå¸¸é«˜ï¼Œæ˜æ˜¾å‡ºç°äº†é—®é¢˜ã€‚ä½†æ›´æœ‰æ„æ€çš„ä¸€ç‚¹æ˜¯ï¼Œ errors å³è¾¹æœ€åçš„ frame æŒ‡æ ‡æ•°å€¼è·Ÿå®ƒå®Œå…¨ç›¸åŒã€‚å› ä¸º errors æŒ‡æ ‡æ˜¯ç½‘å¡ä¸­å¾ˆå¤šé”™è¯¯ç´¯åŠ ä¹‹åçš„æŒ‡æ ‡ï¼Œä¸å®ƒç›¸é‚»çš„ droppedã€overruns è¿™ä¿©ä¸ªæŒ‡æ ‡éƒ½æ˜¯é›¶ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨å½“æ—¶çš„çŠ¶æ€ä¸‹ï¼Œç½‘å¡çš„é”™è¯¯å¤§éƒ¨åˆ†æ¥è‡ª frameã€‚&lt;/p&gt;&lt;p&gt;å½“ç„¶è¿™åªæ˜¯ç¬æ—¶çš„çŠ¶æ€ï¼Œä¸Šå›¾ä¸­ä¸‹é¢éƒ¨åˆ†æ˜¯ç›‘æ§æ•°æ®ï¼Œå¯ä»¥æ˜æ˜¾çœ‹åˆ°æ³¢åŠ¨çš„å˜åŒ–ï¼Œç¡®å®æ˜¯æŸä¸€å°æœºå™¨å¼‚å¸¸äº†ã€‚frame é”™è¯¯ä¸€èˆ¬æ˜¯åœ¨ç½‘å¡æ”¶åˆ°æ•°æ®åŒ…ï¼Œè¿›è¡Œ RCR æ ¡éªŒæ—¶å¤±è´¥å¯¼è‡´çš„ã€‚å½“æ”¶åˆ°æ•°æ®åŒ…ï¼Œä¼šå¯¹è¯¥åŒ…ä¸­çš„å†…å®¹åšæ ¡éªŒï¼Œå½“å‘ç°è·Ÿå·²ç»å­˜ä¸‹æ¥çš„æ ¡éªŒä¸åŒ¹é…ï¼Œè¯´æ˜åŒ…æ˜¯æŸåçš„ï¼Œå› æ­¤ä¼šç›´æ¥å°†å…¶ä¸¢æ‰ã€‚&lt;/p&gt;&lt;p&gt;è¿™ä¸ªåŸå› æ˜¯æ¯”è¾ƒå¥½åˆ†æçš„ï¼Œä¸¤ç‚¹ä¸€çº¿ï¼Œæœºå™¨çš„ç½‘å¡é€šè¿‡ç½‘çº¿æ¥åˆ°ä¸Šè”äº¤æ¢æœºã€‚å½“è¿™é‡Œå‡ºç°é—®é¢˜ï¼Œä¸æ˜¯ç½‘çº¿å°±æ˜¯æœºå™¨æœ¬èº«çš„ç½‘å¡é—®é¢˜ï¼Œæˆ–è€…æ˜¯å¯¹ç«¯äº¤æ¢æœºçš„ç«¯å£ï¼Œä¹Ÿå°±æ˜¯ä¸Šè”äº¤æ¢æœºç«¯å£å‡ºç°é—®é¢˜ã€‚å½“ç„¶æŒ‰ç¬¬ä¸€ä¼˜å…ˆçº§å»åˆ†æï¼Œåè°ƒè¿ç»´å»æ›´æ¢äº†æœºå™¨å¯¹åº”çš„ç½‘çº¿ï¼Œåé¢çš„æŒ‡æ ‡æƒ…å†µä¹Ÿåæ˜ å‡ºäº†æ•ˆæœï¼ŒæŒ‡æ ‡ç›´æ¥çªé™ç›´åˆ°å®Œå…¨æ¶ˆå¤±ï¼Œé”™è¯¯ä¹Ÿå°±ä¸å¤å­˜åœ¨äº†ï¼Œå¯¹åº”ä¸Šå±‚çš„ä¸šåŠ¡ä¹Ÿå¾ˆå¿«æ¢å¤äº†æ­£å¸¸ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;ç½‘å¡é©±åŠ¨-è°ƒä¼˜&lt;/b&gt;&lt;/p&gt;&lt;p&gt;è¯´å®Œç›‘æ§ä¹‹åæ¥çœ‹ä¸‹æœ€åçš„è°ƒä¼˜ã€‚åœ¨è¿™ä¸ªå±‚é¢èƒ½è°ƒæ•´çš„ä¸œè¥¿ä¸å¤šï¼Œä¸»è¦æ˜¯é’ˆå¯¹ç½‘å¡å¤šé˜Ÿåˆ—çš„è°ƒæ•´ï¼Œæ¯”è¾ƒç›´è§‚ã€‚è°ƒæ•´é˜Ÿåˆ—æ•°ç›®ã€å¤§å°ï¼Œå„é˜Ÿåˆ—é—´çš„æƒé‡ï¼Œç”šè‡³æ˜¯è°ƒæ•´å“ˆå¸Œçš„å­—æ®µï¼Œéƒ½æ˜¯å¯ä»¥çš„ã€‚&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ sudo ethtool -l eth0
Channel parameters for eth0:
Pre-set maximums:
RX:   0
TX:   0
Other:    0
Combined: 8
Current hardware settings:
RX:   0
TX:   0
Other:    0
Combined: 4&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šå›¾æ˜¯é’ˆå¯¹å¤šé˜Ÿåˆ—çš„è°ƒæ•´ã€‚ä¸ºäº†è¯´æ˜åˆšæ‰çš„æ¦‚å¿µï¼Œä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æœ‰ä¸ª web server ç»‘å®šåˆ°äº† CPU2ï¼Œè€Œæœºå™¨æœ‰å¤šä¸ª CPUï¼Œè¿™ä¸ªæœºå™¨çš„ç½‘å¡ä¹Ÿæ˜¯å¤šé˜Ÿåˆ—çš„ï¼Œå…¶ä¸­æŸä¸ªé˜Ÿåˆ—ä¼šè¢« CPU2 å¤„ç†ã€‚è¿™ä¸ªæ—¶å€™å°±ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºç½‘å¡æœ‰å¤šä¸ªé˜Ÿåˆ—ï¼Œæ‰€ä»¥ 80 ç«¯å£çš„æµé‡åªä¼šè¢«åˆ†é…åˆ°å…¶ä¸­ä¸€ä¸ªé˜Ÿåˆ—ä¸Šå»ã€‚å‡å¦‚è¿™ä¸ªé˜Ÿåˆ—ä¸æ˜¯ç”± CPU2 å¤„ç†çš„ï¼Œå°±ä¼šæ¶‰åŠåˆ°ä¸€äº›æ•°æ®çš„è…¾æŒªã€‚åº•å±‚æŠŠæ•°æ®æ¥æ”¶ä¸Šæ¥åå†äº¤ç»™åº”ç”¨å±‚çš„æ—¶å€™ï¼Œéœ€è¦æŠŠè¿™ä¸ªæ•°æ®ç§»åŠ¨ä¸€ä¸‹ã€‚å¦‚æœæœ¬æ¥åœ¨ CPU1 å¤„ç†çš„ï¼Œéœ€è¦æŒªåˆ° CPU2 å»ï¼Œè¿™æ—¶ä¼šæ¶‰åŠåˆ° CPU cache çš„å¤±æ•ˆï¼Œè¿™å¯¹é«˜é€Ÿè¿è½¬çš„ CPU æ¥è¯´æ˜¯ä»£ä»·å¾ˆé«˜çš„æ“ä½œã€‚&lt;/p&gt;&lt;p&gt;é‚£ä¹ˆè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡å‰é¢æåˆ°çš„å·¥å…·ï¼Œç‰¹æ„æŠŠ 80 ç«¯å£ tcp æ•°æ®æµé‡å¯¼å‘åˆ°å¯¹åº” CPU2 å¤„ç†çš„ç½‘å¡é˜Ÿåˆ—ã€‚è¿™ä¹ˆåšçš„æ•ˆæœæ˜¯æ•°æ®åŒ…ä»åˆ°è¾¾ç½‘å¡å¼€å§‹ï¼Œåˆ°å†…æ ¸å¤„ç†å®Œå†åˆ°é€è¾¾åº”ç”¨å±‚ï¼Œéƒ½æ˜¯åŒä¸€ä¸ª CPUã€‚è¿™æ ·æœ€å¤§çš„å¥½å¤„å°±æ˜¯ç¼“å­˜ï¼ŒCPU çš„ cache å§‹ç»ˆæ˜¯çƒ­çš„ï¼Œå¦‚æ­¤æ•´ä½“ä¸‹æ¥ï¼Œå®ƒçš„å»¶è¿Ÿã€æ•ˆæœä¹Ÿä¼šéå¸¸å¥½ã€‚å½“ç„¶è¿™ä¸ªä¾‹å­å¹¶ä¸å®é™…ï¼Œä¸»è¦æ˜¯ä¸ºäº†è¯´æ˜èƒ½åšåˆ°çš„ä¸€ä¸ªæ•ˆæœã€‚&lt;/p&gt;&lt;h2&gt;&lt;b&gt;å†…æ ¸ç½‘ç»œå­ç³»ç»Ÿ&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;è¯´å®Œäº†æ•´ä¸ªç½‘å¡é©±åŠ¨éƒ¨åˆ†ï¼Œæ¥ä¸‹æ¥æ˜¯è®²è§£å†…æ ¸å­ç³»ç»Ÿéƒ¨åˆ†ï¼Œè¿™å—ä¼šåˆ†ä¸ºè½¯ä¸­æ–­ä¸ç½‘ç»œå­ç³»ç»Ÿåˆå§‹åŒ–ä¸¤éƒ¨åˆ†æ¥åˆ†äº«ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;è½¯ä¸­æ–­&lt;/b&gt;&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic4.zhimg.com/v2-5d12edfde7eaff899116de9a1d3df3c3_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;912&quot; data-rawheight=&quot;362&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic4.zhimg.com/v2-5d12edfde7eaff899116de9a1d3df3c3_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;912&quot; data-rawheight=&quot;362&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic4.zhimg.com/v2-5d12edfde7eaff899116de9a1d3df3c3_r.jpg&quot; data-actualsrc=&quot;https://pic4.zhimg.com/v2-5d12edfde7eaff899116de9a1d3df3c3_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;ä¸Šå›¾çš„ NETDEV æ˜¯ linux ç½‘ç»œå­ç³»ç»Ÿæ¯å¹´éƒ½ä¼šå¼€çš„ä¸€ä¸ªåˆ†ä¼šï¼Œå…¶ä¸­æ¯”è¾ƒæœ‰æ„æ€çš„ç‚¹æ˜¯æ¯å¹´å¤§ä¼šä¸¾åŠçš„å±Šæ•°ä¼šä»¥ä¸€ä¸ªç‰¹æ®Šå­—ç¬¦æ¥è¡¨ç¤ºã€‚å›¾ä¸­æ˜¯åŠåˆ°äº† 0X15 å±Šï¼Œæƒ³å¿…ä¹Ÿéƒ½å‘ç°è¿™æ˜¯ 16 è¿›åˆ¶çš„æ•°å­—ï¼Œ0X15 åˆšå¥½å°±æ˜¯ 21 å¹´ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæå®¢èŒƒã€‚å¯¹ç½‘ç»œå­ç³»ç»Ÿæ„Ÿå…´è¶£çš„å¯ä»¥å»å…³æ³¨ä¸€ä¸‹ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-45b823a5f80ba9a8297ddc490ab1d3ea_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;823&quot; data-rawheight=&quot;638&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic3.zhimg.com/v2-45b823a5f80ba9a8297ddc490ab1d3ea_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;823&quot; data-rawheight=&quot;638&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic3.zhimg.com/v2-45b823a5f80ba9a8297ddc490ab1d3ea_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-45b823a5f80ba9a8297ddc490ab1d3ea_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;è¨€å½’æ­£ä¼ ï¼Œå†…æ ¸å»¶æ—¶ä»»åŠ¡æœ‰å¤šç§æœºåˆ¶ï¼Œè€Œè½¯ä¸­æ–­åªæ˜¯å…¶ä¸­ä¸€ç§ã€‚ä¸Šå›¾æ˜¯ linux çš„åŸºæœ¬ç»“æ„ï¼Œä¸Šå±‚æ˜¯ç”¨æˆ·æ€ï¼Œä¸­é—´æ˜¯å†…æ ¸ï¼Œä¸‹å±‚æ˜¯ç¡¬ä»¶ï¼Œå¾ˆæŠ½è±¡çš„ä¸€ä¸ªåˆ†å±‚ã€‚ç”¨æˆ·æ€å’Œå†…æ ¸æ€ä¹‹é—´ä¼šæœ‰ä¸¤ç§äº¤äº’çš„æ–¹å¼ï¼šé€šè¿‡ç³»ç»Ÿè°ƒç”¨ï¼Œæˆ–è€…é€šè¿‡å¼‚å¸¸å¯ä»¥é™·å…¥åˆ°å†…æ ¸æ€é‡Œé¢ã€‚é‚£åº•å±‚çš„ç¡¬ä»¶è·Ÿå†…æ ¸åˆæ˜¯æ€ä¹ˆäº¤äº’çš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸­æ–­ï¼Œç¡¬ä»¶è·Ÿå†…æ ¸äº¤äº’çš„æ—¶å€™å¿…é¡»é€šè¿‡ä¸­æ–­ï¼Œå¤„ç†ä»»ä½•äº‹ä»¶éƒ½éœ€è¦äº§ç”Ÿä¸€ä¸ªä¸­æ–­ä¿¡å·æ¥å‘ŠçŸ¥ CPU ä¸å†…æ ¸ã€‚&lt;/p&gt;&lt;p&gt;ä¸è¿‡è¿™æ ·çš„æœºåˆ¶ä¸€èˆ¬æƒ…å†µä¸‹ä¹Ÿè®¸æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯å¯¹ç½‘ç»œæ•°æ®æ¥è¯´ï¼Œä¸€ä¸ªæ•°æ®æŠ¥ä¸€ä¸ªä¸­æ–­ï¼Œè¿™æ ·ä¼šæœ‰å¾ˆæ˜æ˜¾çš„ä¸¤ä¸ªé—®é¢˜ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;é—®é¢˜ä¸€ï¼šä¸­æ–­åœ¨å¤„ç†æœŸé—´ï¼Œä¼šå±è”½ä¹‹å‰çš„ä¸­æ–­ä¿¡å·ã€‚å½“ä¸€ä¸ªä¸­æ–­å¤„ç†çš„æ—¶é—´å¾ˆé•¿ï¼Œåœ¨å¤„ç†æœŸé—´æ”¶åˆ°çš„ä¸­æ–­ä¿¡å·éƒ½ä¼šä¸¢æ‰ã€‚&lt;/b&gt;å¦‚æœå¤„ç†ä¸€ä¸ªåŒ…ç”¨äº†åç§’ï¼Œåœ¨è¿™åç§’æœŸé—´åˆæ”¶åˆ°äº†äº”ä¸ªæ•°æ®åŒ…ï¼Œä½†å› ä¸ºä¸­æ–­ä¿¡å·ä¸¢äº†ï¼Œå³ä¾¿å‰é¢çš„å¤„ç†å®Œäº†ï¼Œåé¢çš„æ•°æ®åŒ…ä¹Ÿä¸ä¼šå†å¤„ç†äº†ã€‚å¯¹åº”åˆ° tcp è¿™è¾¹ï¼Œå‡å¦‚å®¢æˆ·ç«¯ç»™æœåŠ¡ç«¯å‘äº†ä¸€ä¸ªæ•°æ®åŒ…ï¼Œå‡ ç§’åå¤„ç†å®Œäº†ï¼Œä½†åœ¨å¤„ç†æœŸé—´å®¢æˆ·ç«¯åˆå‘äº†åç»­çš„ä¸‰ä¸ªåŒ…ï¼Œä½†æ˜¯æœåŠ¡ç«¯åé¢å¹¶ä¸çŸ¥é“ï¼Œä»¥ä¸ºåªæ”¶åˆ°äº†ä¸€ä¸ªåŒ…ï¼Œè¿™æ—¶å®¢æˆ·ç«¯åˆåœ¨ç­‰å¾…æœåŠ¡ç«¯çš„å›åŒ…ï¼Œå¦‚æ­¤ä¼šå¯¼è‡´ä¸¤è¾¹éƒ½å¡ä½äº†ï¼Œä¹Ÿè¯´æ˜äº†ä¿¡å·ä¸¢å¤±æ˜¯ä¸€ä¸ªæå…¶ä¸¥é‡çš„é—®é¢˜ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;é—®é¢˜äºŒï¼šä¸€ä¸ªæ•°æ®åŒ…è§¦å‘ä¸€æ¬¡ä¸­æ–­å¤„ç†çš„è¯ï¼Œå½“æœ‰å¤§é‡çš„æ•°æ®åŒ…åˆ°æ¥åï¼Œå°±ä¼šäº§ç”Ÿéå¸¸å¤§é‡çš„ä¸­æ–­ã€‚&lt;/b&gt;å¦‚æœè¾¾åˆ°äº† 10 ä¸‡ã€50 ä¸‡ã€ç”šè‡³ç™¾ä¸‡çš„ ppsï¼Œé‚£ CPU å°±éœ€è¦å¤„ç†å¤§é‡çš„ç½‘ç»œä¸­æ–­ï¼Œä¹Ÿå°±ä¸ç”¨å¹²å…¶ä»–äº‹æƒ…äº†ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;è€Œé’ˆå¯¹ä»¥ä¸Šä¸¤ç‚¹é—®é¢˜çš„è§£å†³æ–¹æ³•å°±æ˜¯è®©ä¸­æ–­å¤„ç†å°½å¯èƒ½çš„çŸ­ã€‚&lt;/b&gt;å…·ä½“æ¥è¯´ï¼Œä¸èƒ½åœ¨ä¸­æ–­å¤„ç†å‡½æ•°ï¼Œåªèƒ½æŠŠå®ƒæªå‡ºæ¥ï¼Œäº¤åˆ°è½¯ä¸­æ–­æœºåˆ¶é‡Œã€‚è¿™æ ·ä¹‹åçš„å®é™…ç»“æœæ˜¯ç¡¬ä»¶çš„ä¸­æ–­å¤„ç†åšçš„äº‹æƒ…å°±å¾ˆå°‘äº†ï¼Œå°†æ¥æ”¶æ•°æ®ç­‰ä¸€äº›å¿…é¡»çš„äº‹æƒ…äº¤åˆ°è½¯ä¸­æ–­å»å®Œæˆï¼Œè¿™ä¹Ÿæ˜¯è½¯ä¸­æ–­å­˜åœ¨çš„æ„ä¹‰ã€‚&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;static struct smp_hotplug_thread softirq_threads = {
  .store              = &amp;amp;ksoftirqd,
  .thread_should_run  = ksoftirqd_should_run,
  .thread_fn          = run_ksoftirqd,
  .thread-comm        = â€œksoftirqd/%uâ€,
};

static _init int spawn_ksoftirqd(void)
{
  regiter_cpu_notifier(&amp;amp;cpu_nfb);
  
  BUG_ON(smpboot_register_percpu_thread(&amp;amp;softirq_threads));

  return 0;
}
early_initcall(spawn_ksoftirqd);&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è½¯ä¸­æ–­æœºåˆ¶æ˜¯é€šè¿‡å†…æ ¸çš„çº¿ç¨‹æ¥å®ç°çš„ã€‚å›¾ä¸­æ˜¯å¯¹åº”çš„ä¸€ä¸ªå†…æ ¸çº¿ç¨‹ã€‚æœåŠ¡å™¨ CPU éƒ½ä¼šæœ‰ä¸€ä¸ª ksoftirqd è¿™æ ·çš„å†…æ ¸çº¿ç¨‹ï¼Œå¤š CPU çš„æœºå™¨ä¼šç›¸å¯¹åº”çš„æœ‰å¤šä¸ªçº¿ç¨‹ã€‚å›¾ä¸­ç»“æ„ä½“æœ€åä¸€ä¸ªæˆå‘˜ ksoftirqd/ï¼Œå¦‚æœæœ‰ä¸‰ä¸ª CPU å¯¹åº”å°±ä¼šæœ‰ /0/1/2 ä¸‰ä¸ªå†…æ ¸çº¿ç¨‹ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-e69ad0277289d40e2598ef63d7a79091_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1035&quot; data-rawheight=&quot;490&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic2.zhimg.com/v2-e69ad0277289d40e2598ef63d7a79091_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1035&quot; data-rawheight=&quot;490&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic2.zhimg.com/v2-e69ad0277289d40e2598ef63d7a79091_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-e69ad0277289d40e2598ef63d7a79091_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;è½¯ä¸­æ–­æœºåˆ¶çš„ä¿¡æ¯åœ¨ softirqs ä¸‹é¢å¯ä»¥çœ‹åˆ°ã€‚è½¯ä¸­æ–­å¹¶ä¸å¤šåªæœ‰å‡ ç§ï¼Œå…¶ä¸­éœ€è¦å…³æ³¨çš„ï¼Œè·Ÿç½‘ç»œç›¸å…³çš„å°±æ˜¯ NET-TX å’Œ NET-RXï¼Œç½‘ç»œæ•°æ®æ”¶å‘çš„ä¸¤ç§åœºæ™¯ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;å†…æ ¸åˆå§‹åŒ–&lt;/b&gt;&lt;/p&gt;&lt;p&gt;é“ºå«å®Œè½¯ä¸­æ–­ä¹‹åï¼Œä¸‹é¢æ¥çœ‹å†…æ ¸åˆå§‹åŒ–çš„æµç¨‹ã€‚ä¸»è¦ä¸ºä¸¤æ­¥ï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt;é’ˆå¯¹æ¯ä¸ª CPUï¼Œåˆ›å»ºä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œè¿™ä¸Šé¢æŒ‚äº†éå¸¸å¤šçš„æˆå‘˜ï¼Œä¸åé¢çš„å¤„ç†å¯†åˆ‡ç›¸å…³ï¼›&lt;/li&gt;&lt;li&gt;æ³¨å†Œä¸€ä¸ªè½¯ä¸­æ–­å¤„ç†å‡½æ•°ï¼Œå¯¹åº”ä¸Šé¢çœ‹åˆ°çš„ NET-TX å’Œ NET-RX è¿™ä¸¤ä¸ªè½¯ä¸­æ–­çš„å¤„ç†å‡½æ•°ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-14f3a0f0efddba26ebf4d0b056dee11d_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;885&quot; data-rawheight=&quot;626&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic2.zhimg.com/v2-14f3a0f0efddba26ebf4d0b056dee11d_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;885&quot; data-rawheight=&quot;626&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic2.zhimg.com/v2-14f3a0f0efddba26ebf4d0b056dee11d_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-14f3a0f0efddba26ebf4d0b056dee11d_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;ä¸Šå›¾æ˜¯æ‰‹ç»˜çš„ä¸€ä¸ªæ•°æ®åŒ…çš„å¤„ç†æµç¨‹ï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt;ç¬¬ä¸€æ­¥ç½‘å¡æ”¶åˆ°äº†æ•°æ®åŒ…ï¼›&lt;/li&gt;&lt;li&gt;ç¬¬äºŒæ­¥æŠŠæ•°æ®åŒ…é€šè¿‡ DMA æ‹·åˆ°äº†å†…å­˜é‡Œé¢ï¼›&lt;/li&gt;&lt;li&gt;ç¬¬ä¸‰æ­¥äº§ç”Ÿäº†ä¸€ä¸ªä¸­æ–­å‘Šè¯‰ CPU å¹¶å¼€å§‹å¤„ç†ä¸­æ–­ã€‚é‡ç‚¹çš„ä¸­æ–­å¤„ç†å¯åˆ†ä¸ºä¸¤æ­¥ï¼šä¸€æ˜¯å°†ä¸­æ–­ä¿¡å·å±è”½äº†ï¼ŒäºŒæ˜¯å”¤é†’ NAPI æœºåˆ¶ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;static irqreturn_t igb_msix_ring(int irq, void *data)
{
  struct igb_q_vector *q_vector = data;
  
  /* Write the ITR value calculated from the previous interrupt. */
  igb_write_itr(q_vector);
  
  napi_schedule(&amp;amp;q_vector-&amp;gt;napi);
  
  return IRO_HANDLED;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šé¢çš„ä»£ç æ˜¯ igb ç½‘å¡é©±åŠ¨ä¸­æ–­å¤„ç†å‡½æ•°åšçš„äº‹æƒ…ã€‚å¦‚æœçœç•¥æ‰å¼€å§‹çš„å˜é‡å£°æ˜å’Œåé¢çš„è¿”å›ï¼Œè¿™ä¸ªä¸­æ–­å¤„ç†å‡½æ•°åªæœ‰ä¸¤è¡Œä»£ç ï¼Œéå¸¸çŸ­ã€‚éœ€è¦å…³æ³¨çš„æ˜¯ç¬¬äºŒä¸ªï¼Œåœ¨ç¡¬ä»¶ä¸­æ–­å¤„ç†å‡½æ•°ä¸­ï¼Œåªç”¨æ¿€æ´»å¤–éƒ¨ NIPA è½¯ä¸­æ–­å¤„ç†æœºåˆ¶ï¼Œæ— éœ€åšå…¶ä»–ä»»ä½•äº‹æƒ…ã€‚å› æ­¤è¿™ä¸ªä¸­æ–­å¤„ç†å‡½æ•°ä¼šè¿”å›çš„éå¸¸å¿«ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;NIPI æ¿€æ´»&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;/* Called with irq disabled */
static inline void ____napi_schedule(struct softnet_data *sd, struct napi_struct *napi)
{
  list_add_tail(&amp;amp;napi-&amp;gt;poll_list, &amp;amp;sd-&amp;gt;poll_list);
  _raise_softirq_irqoff(NET_RX_SOFTIRQ);
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;NIPI çš„æ¿€æ´»ä¹Ÿå¾ˆç®€å•ï¼Œä¸»è¦ä¸ºä¸¤æ­¥ã€‚å†…æ ¸ç½‘ç»œç³»ç»Ÿåœ¨åˆå§‹åŒ–çš„æ—¶æ¯ä¸ª CPU éƒ½ä¼šæœ‰ä¸€ä¸ªç»“æ„ä½“ï¼Œå®ƒä¼šæŠŠé˜Ÿåˆ—å¯¹åº”çš„ä¿¡æ¯æ’å…¥åˆ°ç»“æ„ä½“çš„é“¾è¡¨é‡Œã€‚æ¢å¥è¯è¯´ï¼Œæ¯ä¸ªç½‘å¡é˜Ÿåˆ—åœ¨æ”¶åˆ°æ•°æ®çš„æ—¶å€™ï¼Œéœ€è¦æŠŠè‡ªå·±çš„é˜Ÿåˆ—ä¿¡æ¯å‘Šè¯‰å¯¹åº”çš„ CPUï¼Œå°†è¿™ä¸¤ä¸ªä¿¡æ¯ç»‘å®šèµ·æ¥ï¼Œä¿è¯æŸä¸ª CPU å¤„ç†æŸä¸ªé˜Ÿåˆ—ã€‚&lt;/p&gt;&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜è¦ä¸è§¦å‘ç¡¬ä¸­æ–­ä¸€æ ·ï¼Œéœ€è¦è§¦å‘è½¯ä¸­æ–­ã€‚ä¸‹å›¾å°†å¾ˆå¤šæ­¥éª¤æ”¾åˆ°äº†ä¸€å—ï¼Œå‰é¢è®²è¿‡çš„å°±ä¸å†èµ˜è¿°äº†ã€‚å›¾ä¸­è¦å…³æ³¨çš„æ˜¯è½¯ä¸­æ–­æ˜¯æ€ä¹ˆè§¦å‘çš„ã€‚ä¸ç¡¬ä¸­æ–­å·®ä¸å¤šï¼Œè½¯ä¸­æ–­ä¹Ÿæœ‰ä¸­æ–­çš„å‘é‡è¡¨ã€‚æ¯ä¸ªä¸­æ–­å·ï¼Œéƒ½ä¼šå¯¹åº”ä¸€ä¸ªå¤„ç†å‡½æ•°ï¼Œå½“éœ€è¦å¤„ç†æŸä¸ªä¸­æ–­ï¼Œåªéœ€è¦åœ¨å¯¹åº”çš„ä¸­æ–­å‘é‡è¡¨é‡Œæ‰¾å°±å¥½äº†ï¼Œè·Ÿç¡¬ä¸­æ–­çš„å¤„ç†æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-2abc67a748c4bc68d58cc530d1580fa2_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1200&quot; data-rawheight=&quot;806&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic3.zhimg.com/v2-2abc67a748c4bc68d58cc530d1580fa2_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1200&quot; data-rawheight=&quot;806&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic3.zhimg.com/v2-2abc67a748c4bc68d58cc530d1580fa2_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-2abc67a748c4bc68d58cc530d1580fa2_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;æ•°æ®æ¥æ”¶-ç›‘æ§&lt;/b&gt;&lt;/p&gt;&lt;p&gt;è¯´å®Œäº†è¿ä½œæœºåˆ¶ï¼Œå†æ¥çœ‹çœ‹æœ‰å“ªäº›åœ°æ–¹å¯ä»¥åšç›‘æ§ã€‚åœ¨ proc ä¸‹é¢æœ‰å¾ˆå¤šä¸œè¥¿ï¼Œå¯ä»¥çœ‹åˆ°ä¸­æ–­çš„å¤„ç†æƒ…å†µã€‚ç¬¬ä¸€åˆ—å°±æ˜¯ä¸­æ–­å·ï¼Œæ¯ä¸ªè®¾å¤‡éƒ½æœ‰ç‹¬ç«‹çš„ä¸­æ–­å·ï¼Œè¿™æ˜¯å†™æ­»çš„ã€‚å¯¹ç½‘ç»œæ¥è¯´åªéœ€è¦å…³æ³¨ç½‘å¡å¯¹åº”çš„ä¸­æ–­å·ï¼Œå›¾ä¸­æ˜¯ 65ã€66ã€67ã€68 ç­‰ã€‚å½“ç„¶çœ‹å®é™…çš„æ•°å­—å¹¶æ²¡æœ‰æ„ä¹‰ï¼Œè€Œæ˜¯éœ€è¦çœ‹å®ƒçš„åˆ†å¸ƒæƒ…å†µï¼Œä¸­æ–­æ˜¯ä¸æ˜¯è¢«ä¸åŒ CPU åœ¨å¤„ç†ï¼Œå¦‚æœæ‰€æœ‰çš„ä¸­æ–­éƒ½æ˜¯è¢«ä¸€ä¸ª CPU å¤„ç†ï¼Œé‚£ä¹ˆå°±éœ€è¦åšäº›è°ƒæ•´ï¼ŒæŠŠå®ƒåˆ†æ•£å¼€ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-1ed00a346e9f9b1cb9256e2e9ccd5326_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1092&quot; data-rawheight=&quot;398&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic3.zhimg.com/v2-1ed00a346e9f9b1cb9256e2e9ccd5326_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1092&quot; data-rawheight=&quot;398&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic3.zhimg.com/v2-1ed00a346e9f9b1cb9256e2e9ccd5326_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-1ed00a346e9f9b1cb9256e2e9ccd5326_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;æ•°æ®æ¥æ”¶-è°ƒä¼˜&lt;/b&gt;&lt;/p&gt;&lt;p&gt;ä¸­æ–­å¯ä»¥åšçš„è°ƒæ•´æœ‰ä¸¤ä¸ªï¼šä¸€æ˜¯ä¸­æ–­åˆå¹¶ï¼ŒäºŒæ˜¯ä¸­æ–­äº²å’Œæ€§ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;è‡ªé€‚åº”ä¸­æ–­åˆå¹¶&lt;/b&gt;&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;rx-usecsï¼š&lt;/b&gt;æ•°æ®å¸§åˆ°è¾¾åï¼Œå»¶è¿Ÿå¤šé•¿æ—¶é—´äº§ç”Ÿä¸­æ–­ä¿¡å·ï¼Œå•ä½å¾®ç§’&lt;/li&gt;&lt;li&gt;&lt;b&gt;rx-framesï¼š&lt;/b&gt;è§¦å‘ä¸­æ–­å‰ç§¯ç´¯æ•°æ®å¸§çš„æœ€å¤§ä¸ªæ•°&lt;/li&gt;&lt;li&gt;&lt;b&gt;rx-usecs-irqï¼š&lt;/b&gt;å¦‚æœæœ‰ä¸­æ–­å¤„ç†æ­£åœ¨æ‰§è¡Œï¼Œå½“å‰ä¸­æ–­å»¶è¿Ÿå¤šä¹…é€è¾¾ &lt;b&gt;CPU&lt;/b&gt;&lt;/li&gt;&lt;li&gt;&lt;b&gt;rx-frames-irqï¼š&lt;/b&gt;å¦‚æœæœ‰ä¸­æ–­å¤„ç†æ­£åœ¨æ‰§è¡Œï¼Œæœ€å¤šç§¯ç´¯å¤šå°‘ä¸ªæ•°æ®å¸§&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;ä¸Šé¢åˆ—çš„éƒ½æ˜¯ç¡¬ä»¶ç½‘å¡æ”¯æŒçš„åŠŸèƒ½ã€‚NAPI æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸­æ–­åˆå¹¶çš„æœºåˆ¶ï¼Œå‡å¦‚æœ‰å¾ˆå¤šåŒ…çš„åˆ°æ¥ï¼ŒNAPI å°±å¯ä»¥åšåˆ°åªäº§ç”Ÿä¸€ä¸ªä¸­æ–­ï¼Œå› æ­¤ä¸éœ€è¦ç¡¬ä»¶æ¥å¸®åŠ©åšä¸­æ–­åˆå¹¶ï¼Œå®é™…æ•ˆæœæ˜¯è·Ÿ NAPI æ˜¯ç›¸åŒçš„ï¼Œéƒ½æ˜¯å‡å°‘äº†æ€»çš„ä¸­æ–­æ•°é‡ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;ä¸­æ–­äº²å’Œæ€§&lt;/b&gt;&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;$ sudo bash -c â€˜echo 1 &amp;gt; /proc/irq/8/smp_affinityâ€™&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ªä¸ç½‘å¡å¤šé˜Ÿåˆ—æ˜¯å¯†åˆ‡ç›¸å…³çš„ã€‚å¦‚æœç½‘å¡æœ‰å¤šä¸ªé˜Ÿåˆ—ï¼Œå°±èƒ½æ‰‹åŠ¨æ¥æ˜ç¡®æŒ‡å®šç”±å“ªä¸ª CPU æ¥å¤„ç†ï¼Œå‡è¡¡çš„æŠŠæ•°æ®å¤„ç†çš„è´Ÿè½½åˆ†æ•£åˆ°æœºå™¨çš„å¯ç”¨ CPU ä¸Šã€‚é…ç½®ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œåªéœ€æŠŠæ•°å­—å†™å…¥åˆ° /proc å¯¹åº”çš„è¿™ä¸ªæ–‡ä»¶ä¸­å°±å¯ä»¥äº†ã€‚è¿™æ˜¯ä¸ªä½æ•°ç»„ï¼Œè½¬æˆäºŒè¿›åˆ¶åå°±ä¼šæœ‰å¯¹åº”çš„ CPU å»å¤„ç†ã€‚å¦‚æœå†™ä¸ª 1ï¼Œå¯èƒ½å°±æ˜¯ CPU0 æ¥å¤„ç†ï¼›å¦‚æœå†™ä¸ª 4ï¼Œè½¬åŒ–æˆäºŒè¿›åˆ¶æ˜¯ 100ï¼Œé‚£ä¹ˆå°±ä¼šäº¤ç»™ CPU2 å»å¤„ç†ã€‚&lt;/p&gt;&lt;p&gt;å¦å¤–æœ‰ä¸ªå°é—®é¢˜éœ€è¦æ³¨æ„ï¼Œå¾ˆå¤šå‘è¡Œç‰ˆå¯èƒ½ä¼šè‡ªå¸¦ä¸€ä¸ª irqbalance çš„å®ˆæŠ¤è¿›ç¨‹ï¼ˆ&lt;a href=&quot;https://link.zhihu.com/?target=http%3A//irqbalance.github.io/irqbalance&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;http://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;irqbalance.github.io/ir&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;qbalance&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;/&gt;&lt;/a&gt;ï¼‰ï¼Œä¼šå°†æ‰‹åŠ¨ä¸­æ–­å‡è¡¡çš„è®¾ç½®ç»™è¦†ç›–æ‰ã€‚è¿™ä¸ªç¨‹åºåšçš„æ ¸å¿ƒäº‹æƒ…å°±æ˜¯æŠŠä¸Šé¢æ‰‹åŠ¨è®¾ç½®æ–‡ä»¶çš„æ“ä½œæ”¾åˆ°ç¨‹åºé‡Œï¼Œæœ‰å…´è¶£å¯ä»¥å»çœ‹ä¸‹å®ƒçš„ä»£ç ï¼ˆ&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/Irqbalance/irqbalance/blob/master/activate.c&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/Irqbalance/i&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;rqbalance/blob/master/activate.c&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;/&gt;&lt;/a&gt;ï¼‰ï¼Œä¹Ÿæ˜¯æŠŠè¿™ä¸ªæ–‡ä»¶æ‰“å¼€ï¼Œå†™å¯¹åº”çš„æ•°å­—è¿›å»å°±å¯ä»¥äº†ã€‚ &lt;/p&gt;&lt;p&gt;&lt;b&gt;å†…æ ¸-æ•°æ®å¤„ç†&lt;/b&gt;&lt;/p&gt;&lt;p&gt;æœ€åæ˜¯æ•°æ®å¤„ç†éƒ¨åˆ†äº†ã€‚å½“æ•°æ®åˆ°è¾¾ç½‘å¡ï¼Œè¿›å…¥é˜Ÿåˆ—å†…å­˜åï¼Œå°±éœ€è¦å†…æ ¸ä»é˜Ÿåˆ—å†…å­˜ä¸­å°†æ•°æ®æ‹‰å‡ºæ¥ã€‚å¦‚æœæœºå™¨çš„ PPS è¾¾åˆ°äº†åä¸‡ç”šè‡³ç™¾ä¸‡ï¼Œè€Œ CPU åªå¤„ç†ç½‘ç»œæ•°æ®çš„è¯ï¼Œé‚£å…¶ä»–åŸºæœ¬çš„ä¸šåŠ¡é€»è¾‘ä¹Ÿå°±ä¸ç”¨å¹²äº†ï¼Œå› æ­¤ä¸èƒ½è®©æ•°æ®åŒ…çš„å¤„ç†ç‹¬å æ•´ä¸ª CPUï¼Œè€Œæ ¸å¿ƒç‚¹æ˜¯æ€ä¹ˆå»åšé™åˆ¶ã€‚&lt;/p&gt;&lt;p&gt;é’ˆå¯¹ä¸Šè¿°é—®é¢˜ä¸»è¦æœ‰ä¸¤æ–¹é¢çš„é™åˆ¶ï¼šæ•´ä½“çš„é™åˆ¶å’Œå•æ¬¡çš„é™åˆ¶&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;while (!list_empty(&amp;amp;sd-&amp;gt;poll_list)){
  struct napi_struct *n;
  int work,weight;
  
  /* If softirq window is exhausted then punt.
   * Allow this to run for 2 jiffies since which will allow
   * an average latency of 1.5/HZ.
   */
   if (unlikely(budget &amp;lt;= 0 || time_after_eq(jiffies, time_limit)))
   goto softnet_break;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ•´ä½“é™åˆ¶å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯ä¸€ä¸ª CPU å¯¹åº”ä¸€ä¸ªé˜Ÿåˆ—ã€‚å¦‚æœ CPU çš„æ•°é‡æ¯”é˜Ÿåˆ—æ•°é‡å°‘ï¼Œé‚£ä¹ˆä¸€ä¸ª CPU å¯èƒ½éœ€è¦å¤„ç†å¤šä¸ªé˜Ÿåˆ—ã€‚&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;weight = n-&amp;gt;weight;

work = 0;
if (test_bit(NAPI_STATE_SCHED, &amp;amp;n-&amp;gt;state)) {
        work = n-&amp;gt;poll(n,weight);
        trace_napi_poll(n);
}

WARN_ON_ONCE(work &amp;gt; weight);

budget -= work;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å•æ¬¡é™åˆ¶åˆ™æ˜¯é™åˆ¶ä¸€ä¸ªé˜Ÿåˆ—åœ¨ä¸€è½®é‡Œå¤„ç†åŒ…çš„æ•°é‡ã€‚è¾¾åˆ°é™åˆ¶ä¹‹åå°±åœä¸‹æ¥ï¼Œç­‰å¾…ä¸‹ä¸€è½®çš„å¤„ç†ã€‚&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;softnet_break:
  sd-&amp;gt;time_squeeze++;
  _raise_softirq_irqoff(NET_RX_SOFTIRQ);
  goto out;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è€Œåœä¸‹æ¥å°±æ˜¯å¾ˆå…³é”®çš„èŠ‚ç‚¹ï¼Œå¹¸è¿çš„æ˜¯æœ‰å¯¹åº”çš„æŒ‡æ ‡è®°å½•ï¼Œæœ‰ time-squeeze è¿™æ ·ä¸­æ–­çš„è®¡æ•°ï¼Œæ‹¿åˆ°è¿™ä¸ªä¿¡æ¯å°±å¯ä»¥åˆ¤æ–­å‡ºæœºå™¨çš„ç½‘ç»œå¤„ç†æ˜¯å¦æœ‰ç“¶é¢ˆï¼Œè¢«è¿«ä¸­æ–­çš„é¢‘ç‡é«˜ä½ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-337c4da7806a0ab9d52df871c5864192_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1280&quot; data-rawheight=&quot;274&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic3.zhimg.com/v2-337c4da7806a0ab9d52df871c5864192_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1280&quot; data-rawheight=&quot;274&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic3.zhimg.com/v2-337c4da7806a0ab9d52df871c5864192_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-337c4da7806a0ab9d52df871c5864192_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;ä¸Šå›¾æ˜¯ç›‘æ§ CPU æŒ‡æ ‡çš„æ•°æ®ï¼Œæ ¼å¼å¾ˆç®€å•ï¼Œæ¯è¡Œå¯¹åº”ä¸€ä¸ª CPUï¼Œæ•°å€¼ä¹‹é—´ç”¨ç©ºæ ¼åˆ†å‰²ï¼Œè¾“å‡ºæ ¼å¼ä¸º 16 è¿›åˆ¶ã€‚é‚£ä¹ˆæ¯ä¸€åˆ—æ•°å€¼åˆä»£è¡¨ä»€ä¹ˆå‘¢ï¼Ÿå¾ˆä¸å¹¸ï¼Œè¿™ä¸ªæ²¡æœ‰æ–‡æ¡£ï¼Œåªèƒ½é€šè¿‡æ£€æŸ¥ä½¿ç”¨çš„å†…æ ¸ç‰ˆæœ¬ï¼Œç„¶åå»çœ‹å¯¹åº”çš„ä»£ç ã€‚&lt;/p&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;code class=&quot;language-text&quot;&gt;seq_printfï¼ˆseq,
     &quot;%08x %08x %08x %08x %08x %08x %08x %08x %08x %08x %08x\n&quot;,
     sd-&amp;gt;processed, sd-&amp;gt;dropped, sd-&amp;gt;time_squeeze, 0,
     0, 0, 0, 0, /* was fastroute */
     sd-&amp;gt;cpu_collision, sd-&amp;gt;received_rps, flow_limit_countï¼‰;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸‹é¢è¯´æ˜äº†æ–‡ä»¶ä¸­æ¯ä¸ªå­—æ®µéƒ½æ˜¯æ€ä¹ˆæ¥çš„ï¼Œå®é™…æƒ…å†µå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œå› ä¸ºéšç€å†…æ ¸ç‰ˆæœ¬çš„è¿­ä»£ï¼Œå­—æ®µçš„æ•°é‡ä»¥åŠå­—æ®µçš„é¡ºåºéƒ½æœ‰å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œå…¶ä¸­ä¸ç½‘ç»œæ•°æ®å¤„ç†è¢«ä¸­æ–­æ¬¡æ•°ç›¸å…³çš„å°±æ˜¯ squeeze å­—æ®µï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt; * sd-&amp;gt;processed          å¤„ç†çš„åŒ…æ•°é‡ï¼ˆå¤šç½‘å¡ bond æ¨¡å¼å¯èƒ½å¤šäºå®é™…çš„æ”¶åŒ…æ•°é‡ï¼‰&lt;/li&gt;&lt;li&gt; * sd-&amp;gt;dropped             ä¸¢åŒ…æ•°é‡ï¼Œå› ä¸ºé˜Ÿåˆ—æ»¡äº†&lt;/li&gt;&lt;li&gt; * sd-&amp;gt;time_spueeze      è½¯ä¸­æ–­å¤„ç† net_rx_action è¢«è¿«æ‰“æ–­çš„æ¬¡æ•°&lt;/li&gt;&lt;li&gt; * sd-&amp;gt;cpu_collision       å‘é€æ•°æ®æ—¶è·å–è®¾å¤‡é”å†²çªï¼Œæ¯”å¦‚å¤šä¸ª CPU åŒæ—¶å‘é€æ•°æ®&lt;/li&gt;&lt;li&gt; * sd-&amp;gt;received_rps       å½“å‰ CPU è¢«å”¤é†’çš„æ¬¡æ•°ï¼ˆé€šè¿‡å¤„ç†å™¨é—´ä¸­æ–­ï¼‰&lt;/li&gt;&lt;li&gt;* sd-&amp;gt;flow_limit_count    è§¦å‘ flow limit çš„æ¬¡æ•°&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;ä¸‹å›¾æ˜¯ä¸šåŠ¡ä¸­é‡åˆ°ç›¸å…³é—®é¢˜çš„æ¡ˆä¾‹ï¼Œæœ€åæ’æŸ¥åˆ° CPU å±‚é¢ã€‚å›¾ä¸€æ˜¯ TOP å‘½ä»¤çš„è¾“å‡ºï¼Œæ˜¾ç¤ºäº†æ¯ä¸ª CPU çš„ä½¿ç”¨é‡ï¼Œå…¶ä¸­çº¢æ¡†æ ‡å‡ºçš„ CPU4 çš„ä½¿ç”¨ç‡å­˜åœ¨ç€å¼‚å¸¸ï¼Œå°¤å…¶æ˜¯å€’æ•°ç¬¬äºŒåˆ—çš„ SI å ç”¨è¾¾åˆ°äº† 89%ã€‚SI æ˜¯ softirq çš„ç¼©å†™ï¼Œè¡¨ç¤º CPU èŠ±åœ¨è½¯ä¸­æ–­å¤„ç†ä¸Šçš„æ—¶é—´å æ¯”ï¼Œè€Œå›¾ä¸­ CPU4 åœ¨æ—¶é—´å æ¯”ä¸Šæ˜æ˜¾è¿‡é«˜ã€‚å›¾äºŒåˆ™æ˜¯å¯¹åº”å›¾ä¸€çš„è¾“å‡ºç»“æœï¼ŒCPU4 å¯¹åº”çš„æ˜¯ç¬¬äº”è¡Œï¼Œå…¶ä¸­ç¬¬ä¸‰åˆ—æ•°å€¼æ˜æ˜¾é«˜äºå…¶ä»– CPUï¼Œè¡¨æ˜å®ƒåœ¨å¤„ç†ç½‘ç»œæ•°æ®çš„æ—¶è¢«é¢‘ç¹çš„æ‰“æ–­ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-d8ef117a14c9bb6073d240208e509e34_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;668&quot; data-rawheight=&quot;657&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic1.zhimg.com/v2-d8ef117a14c9bb6073d240208e509e34_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;668&quot; data-rawheight=&quot;657&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic1.zhimg.com/v2-d8ef117a14c9bb6073d240208e509e34_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-d8ef117a14c9bb6073d240208e509e34_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-73e2e677a8473fce69ad4a8a36cdce71_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;804&quot; data-rawheight=&quot;638&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic2.zhimg.com/v2-73e2e677a8473fce69ad4a8a36cdce71_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;804&quot; data-rawheight=&quot;638&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic2.zhimg.com/v2-73e2e677a8473fce69ad4a8a36cdce71_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-73e2e677a8473fce69ad4a8a36cdce71_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;p&gt;é’ˆå¯¹ä¸Šé¢çš„é—®é¢˜æ¨æ–­ CPU4 å­˜åœ¨ä¸€å®šçš„æ€§èƒ½è¡°é€€ï¼Œä¹Ÿè®¸æ˜¯è´¨é‡ä¸è¿‡å…³æˆ–å…¶ä»–çš„åŸå› ã€‚ä¸ºäº†éªŒè¯æ˜¯å¦æ˜¯æ€§èƒ½è¡°é€€ï¼Œå†™äº†ä¸€ä¸ªç®€å•çš„ python è„šæœ¬ï¼Œä¸€ä¸ªä¸€ç›´å»ç´¯åŠ çš„æ­»å¾ªç¯ã€‚æ¯æ¬¡è¿è¡Œæ—¶ï¼ŒæŠŠè¿™æ®µè„šæœ¬ç»‘å®šåˆ°æŸä¸ª CPU ä¸Šï¼Œç„¶åè§‚å¯Ÿä¸åŒ CPU è€—æ—¶çš„å¯¹æ¯”ã€‚æœ€åå¯¹æ¯”ç»“æœä¹Ÿæ˜¾ç¤º CPU4 çš„è€—æ—¶æ¯”å…¶ä»–çš„ CPU é«˜äº†å‡ å€ï¼Œä¹ŸéªŒè¯äº†ä¹‹å‰çš„æ¨æ–­ã€‚ä¹‹ååè°ƒè¿ç»´æ›´æ¢äº† CPUï¼Œæ„å‘æŒ‡æ ‡ä¹Ÿå°±æ¢å¤æ­£å¸¸äº†ã€‚&lt;/p&gt;&lt;h2&gt;&lt;b&gt;æ€»ç»“&lt;/b&gt;&lt;/h2&gt;&lt;p&gt;ä»¥ä¸Šæ‰€æœ‰æ“ä½œéƒ½åªæ˜¯åœ¨æ•°æ®åŒ…ä»ç½‘å¡åˆ°äº†å†…æ ¸å±‚ï¼Œè¿˜æ²¡åˆ°å¸¸è§çš„åè®®ï¼Œåªæ˜¯å®Œæˆäº†ä¸‡é‡Œé•¿å¾ç¬¬ä¸€æ­¥ï¼Œåé¢è¿˜æœ‰ä¸€ç³»åˆ—çš„æ­¥éª¤ï¼Œä¾‹å¦‚æ•°æ®åŒ…çš„å‹ç¼©ï¼ˆGROï¼‰ã€ç½‘å¡å¤šé˜Ÿåˆ—è½¯ä»¶ï¼ˆRPSï¼‰è¿˜æœ‰ RFS åœ¨è´Ÿè½½å‡è¡¡çš„åŸºç¡€ä¸Šè€ƒè™‘æµçš„ç‰¹å¾ï¼Œå°±æ˜¯ IP ç«¯å£å››å…ƒç»„çš„ç‰¹å¾ï¼Œæœ€åæ‰æ˜¯æŠŠæ•°æ®é€’äº¤åˆ° IP å±‚ï¼Œä»¥åŠåˆ°ç†Ÿæ‚‰çš„ TCP å±‚ã€‚&lt;/p&gt;&lt;p&gt;æ€»çš„æ¥è¯´ï¼Œä»Šå¤©çš„åˆ†äº«éƒ½æ˜¯å›´ç»•é©±åŠ¨æ¥åšçš„ï¼Œæˆ‘æƒ³å¼ºè°ƒçš„æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒç‚¹åœ¨äºæŒ‡æ ‡ï¼Œä¸èƒ½æµ‹é‡ä¹Ÿå°±å¾ˆéš¾å»æ”¹å–„ï¼Œè¦æœ‰æŒ‡æ ‡çš„å­˜åœ¨ï¼Œè¿™æ ·ä¸€åˆ‡çš„ä¼˜åŒ–æ‰æœ‰æ„ä¹‰ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;ç°åœºè§†é¢‘ã€PPTè¯·æˆ³ï¼š&lt;/b&gt;&lt;/p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://link.zhihu.com/?target=https%3A//www.upyun.com/opentalk/461.html&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-image=&quot;https://pic4.zhimg.com/v2-dbe7f56d0bf38ef5c8e35ae759458897_180x120.jpg&quot; data-image-width=&quot;960&quot; data-image-height=&quot;540&quot; data-text=&quot;æ€§èƒ½ä¼˜åŒ– - å¦‚ä½•æ›´å¿«çš„æ”¶å‘æ•°æ®&quot; class=&quot;LinkCard new&quot;&gt;&lt;span class=&quot;LinkCard-contents&quot;&gt;&lt;span class=&quot;LinkCard-title loading&quot; data-text=&quot;true&quot;/&gt;&lt;span class=&quot;LinkCard-desc loading&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;LinkCard-image LinkCard-image--default&quot;/&gt;&lt;/a&gt;&lt;p/&gt;&lt;p/&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>16c749e7d45c2e73cf64cf775386b9e7</guid>
<title>Redis æ ¸å¿ƒåŸç†ä¸å®è·µï¼šRediså¯åŠ¨è¿‡ç¨‹æºç åˆ†æ</title>
<link>https://toutiao.io/k/tiiu7yc</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section&gt;&lt;p&gt;RedisæœåŠ¡å™¨è´Ÿè´£æ¥æ”¶å¤„ç†ç”¨æˆ·è¯·æ±‚ï¼Œä¸ºç”¨æˆ·æä¾›æœåŠ¡ã€‚&lt;br/&gt;RedisæœåŠ¡å™¨çš„å¯åŠ¨å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;redis-server&lt;/span&gt;Â &lt;span&gt;[Â configfileÂ ]&lt;/span&gt;Â &lt;span&gt;[Â optionsÂ ]&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;configfileå‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶ã€‚optionså‚æ•°æŒ‡å®šå¯åŠ¨é…ç½®é¡¹ï¼Œå®ƒå¯ä»¥è¦†ç›–é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®é¡¹ï¼Œå¦‚&lt;/p&gt;&lt;pre&gt;&lt;code&gt;redis-serverÂ /&lt;span&gt;path&lt;/span&gt;/to/redis.confÂ &lt;span&gt;--portÂ 7777Â --protected-modeÂ no&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¯¥å‘½ä»¤å¯åŠ¨RedisæœåŠ¡ï¼Œå¹¶æŒ‡å®šäº†é…ç½®æ–‡ä»¶/path/to/redis.confï¼Œç»™å‡ºäº†ä¸¤ä¸ªå¯åŠ¨é…ç½®é¡¹ï¼športã€protected-modeã€‚&lt;/p&gt;&lt;p&gt;æœ¬æ–‡é€šè¿‡é˜…è¯»Redisæºç ï¼Œåˆ†æRediså¯åŠ¨è¿‡ç¨‹ï¼Œå†…å®¹æ‘˜è‡ªæ–°ä¹¦ã€ŠRedisæ ¸å¿ƒåŸç†ä¸å®è·µã€‹ã€‚&lt;br/&gt;æœ¬æ–‡æ¶‰åŠRedisçš„å¾ˆå¤šæ¦‚å¿µï¼Œå¦‚äº‹ä»¶å¾ªç¯å™¨ã€ACLã€Moduleã€LUAã€æ…¢æ—¥å¿—ç­‰ï¼Œè¿™äº›åŠŸèƒ½åœ¨ä½œè€…æ–°ä¹¦ã€ŠRedisæ ¸å¿ƒåŸç†ä¸å®è·µã€‹åšäº†è¯¦å°½åˆ†æï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥å‚è€ƒæœ¬ä¹¦ã€‚&lt;/p&gt;&lt;h2&gt;&lt;span&gt;æœåŠ¡å™¨å®šä¹‰&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;æç¤ºï¼šæœ¬ç« ä»£ç å¦‚æ— ç‰¹æ®Šè¯´æ˜ï¼Œå‡åœ¨server.hã€server.cä¸­ã€‚&lt;/p&gt;&lt;p&gt;Redisä¸­å®šä¹‰äº†server.h/redisServerç»“æ„ä½“ï¼Œå­˜å‚¨RedisæœåŠ¡å™¨ä¿¡æ¯ï¼ŒåŒ…æ‹¬æœåŠ¡å™¨é…ç½®é¡¹å’Œè¿è¡Œæ—¶æ•°æ®ï¼ˆå¦‚ç½‘ç»œè¿æ¥ä¿¡æ¯ã€æ•°æ®åº“redisDbã€å‘½ä»¤è¡¨ã€å®¢æˆ·ç«¯ä¿¡æ¯ã€ä»æœåŠ¡å™¨ä¿¡æ¯ã€ç»Ÿè®¡ä¿¡æ¯ç­‰æ•°æ®ï¼‰ã€‚&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;redisServer&lt;/span&gt;Â {&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;pid_t&lt;/span&gt;Â pid;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;br/&gt;Â Â Â Â &lt;span&gt;pthread_t&lt;/span&gt;Â main_thread_id;Â Â Â Â Â Â Â Â Â &lt;br/&gt;Â Â Â Â &lt;span&gt;char&lt;/span&gt;Â *configfile;Â Â Â Â Â Â Â Â Â Â Â &lt;br/&gt;Â Â Â Â &lt;span&gt;char&lt;/span&gt;Â *executable;Â Â Â Â Â Â Â Â Â Â Â &lt;br/&gt;Â Â Â Â &lt;span&gt;char&lt;/span&gt;Â **exec_argv;Â Â Â Â &lt;br/&gt;Â Â Â Â ...&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;redisServerä¸­çš„å±æ€§å¾ˆå¤šï¼Œè¿™é‡Œä¸ä¸€ä¸€åˆ—ä¸¾ï¼Œç­‰åˆ°åˆ†æå…·ä½“åŠŸèƒ½æ—¶å†è¯´æ˜ç›¸å…³çš„serverå±æ€§ã€‚&lt;br/&gt;server.hä¸­å®šä¹‰äº†ä¸€ä¸ªredisServerå…¨å±€å˜é‡ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;extern&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;redisServer&lt;/span&gt;Â &lt;span&gt;server&lt;/span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœ¬ä¹¦è¯´åˆ°çš„serverå˜é‡ï¼Œå¦‚æ— ç‰¹æ®Šè¯´æ˜ï¼Œéƒ½æ˜¯æŒ‡è¯¥redisServerå…¨å±€å˜é‡ã€‚ä¾‹å¦‚ï¼Œç¬¬1éƒ¨åˆ†è¯´è¿‡server.list_max_ziplist_sizeç­‰å±æ€§ï¼Œæ­£æ˜¯æŒ‡è¯¥å˜é‡çš„å±æ€§ã€‚&lt;br/&gt;å¯ä»¥ä½¿ç”¨INFOå‘½ä»¤è·å–æœåŠ¡å™¨çš„ä¿¡æ¯ï¼Œè¯¥å‘½ä»¤ä¸»è¦è¿”å›ä»¥ä¸‹ä¿¡æ¯ï¼š&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;serverï¼šæœ‰å…³RedisæœåŠ¡å™¨çš„å¸¸è§„ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;clientsï¼šå®¢æˆ·ç«¯è¿æ¥ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;memoryï¼šå†…å­˜æ¶ˆè€—ç›¸å…³ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;persistenceï¼šRDBå’ŒAOFæŒä¹…åŒ–ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;statsï¼šå¸¸è§„ç»Ÿè®¡ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;replicationï¼šä¸»/å‰¯æœ¬å¤åˆ¶ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;cpuï¼šCPUæ¶ˆè€—ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;commandstatsï¼šRedis å‘½ä»¤ç»Ÿè®¡ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;clusterï¼šRedis Clusteré›†ç¾¤ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;modulesï¼šModulesæ¨¡å—ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;keyspaceï¼šæ•°æ®åº“ç›¸å…³çš„ç»Ÿè®¡ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;errorstatsï¼šRedisé”™è¯¯ç»Ÿè®¡ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;INFOå‘½ä»¤å“åº”å†…å®¹ä¸­é™¤äº†memoryå’Œcpuç­‰ç»Ÿè®¡æ•°æ®ï¼Œå…¶ä»–æ•°æ®å¤§éƒ¨åˆ†éƒ½ä¿å­˜åœ¨redisServerä¸­ã€‚&lt;/p&gt;&lt;h2&gt;&lt;span&gt;mainå‡½æ•°&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;server.c/mainå‡½æ•°è´Ÿè´£å¯åŠ¨RedisæœåŠ¡ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(&lt;span&gt;int&lt;/span&gt;Â argc,Â &lt;span&gt;char&lt;/span&gt;Â **argv)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â ...&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [1]&lt;/span&gt;&lt;br/&gt;Â Â Â Â server.sentinel_modeÂ =Â checkForSentinelMode(argc,argv);&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [2]&lt;/span&gt;&lt;br/&gt;Â Â Â Â initServerConfig();&lt;br/&gt;Â Â Â Â ACLInit();Â &lt;br/&gt;&lt;br/&gt;Â Â Â Â moduleInitModulesSystem();&lt;br/&gt;Â Â Â Â tlsInit();&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [3]&lt;/span&gt;&lt;br/&gt;Â Â Â Â server.executableÂ =Â getAbsolutePath(argv[&lt;span&gt;0&lt;/span&gt;]);&lt;br/&gt;Â Â Â Â server.exec_argvÂ =Â zmalloc(&lt;span&gt;sizeof&lt;/span&gt;(&lt;span&gt;char&lt;/span&gt;*)*(argc+&lt;span&gt;1&lt;/span&gt;));&lt;br/&gt;Â Â Â Â server.exec_argv[argc]Â =Â &lt;span&gt;NULL&lt;/span&gt;;&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â (jÂ =Â &lt;span&gt;0&lt;/span&gt;;Â jÂ &amp;lt;Â argc;Â j++)Â server.exec_argv[j]Â =Â zstrdup(argv[j]);&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [4]&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (server.sentinel_mode)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â initSentinelConfig();&lt;br/&gt;Â Â Â Â Â Â Â Â initSentinel();&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [5]&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (&lt;span&gt;strstr&lt;/span&gt;(argv[&lt;span&gt;0&lt;/span&gt;],&lt;span&gt;&quot;redis-check-rdb&quot;&lt;/span&gt;)Â !=Â &lt;span&gt;NULL&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â Â Â redis_check_rdb_main(argc,argv,&lt;span&gt;NULL&lt;/span&gt;);&lt;br/&gt;Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (&lt;span&gt;strstr&lt;/span&gt;(argv[&lt;span&gt;0&lt;/span&gt;],&lt;span&gt;&quot;redis-check-aof&quot;&lt;/span&gt;)Â !=Â &lt;span&gt;NULL&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â Â Â redis_check_aof_main(argc,argv);&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â more&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã€1ã€‘æ£€æŸ¥è¯¥RedisæœåŠ¡å™¨æ˜¯å¦ä»¥sentinelæ¨¡å¼å¯åŠ¨ã€‚&lt;br/&gt;ã€2ã€‘initServerConfigå‡½æ•°å°†redisServerä¸­è®°å½•é…ç½®é¡¹çš„å±æ€§åˆå§‹åŒ–ä¸ºé»˜è®¤å€¼ã€‚ACLInitå‡½æ•°åˆå§‹åŒ–ACLæœºåˆ¶ï¼ŒmoduleInitModulesSystemå‡½æ•°åˆå§‹åŒ–Moduleæœºåˆ¶ã€‚&lt;br/&gt;ã€3ã€‘è®°å½•Redisç¨‹åºå¯æ‰§è¡Œè·¯å¾„åŠå¯åŠ¨å‚æ•°ï¼Œä»¥ä¾¿åç»­é‡å¯æœåŠ¡å™¨ã€‚&lt;br/&gt;ã€4ã€‘å¦‚æœä»¥Sentinelæ¨¡å¼å¯åŠ¨ï¼Œåˆ™åˆå§‹åŒ–Sentinelæœºåˆ¶ã€‚&lt;br/&gt;ã€5ã€‘å¦‚æœå¯åŠ¨ç¨‹åºæ˜¯redis-check-rdbæˆ–redis-check-aofï¼Œåˆ™æ‰§è¡Œredis_check_rdb_mainæˆ–redis_check_aof_mainå‡½æ•°ï¼Œå®ƒä»¬å°è¯•æ£€éªŒå¹¶ä¿®å¤RDBã€AOFæ–‡ä»¶åä¾¿é€€å‡ºç¨‹åºã€‚&lt;br/&gt;Redisç¼–è¯‘å®Œæˆåï¼Œä¼šç”Ÿæˆ5ä¸ªå¯æ‰§è¡Œç¨‹åºï¼š&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;redis-serverï¼šRedisæ‰§è¡Œç¨‹åºã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;redis-sentinelï¼šRedis Sentinelæ‰§è¡Œç¨‹åºã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;redis-cliï¼šRediså®¢æˆ·ç«¯ç¨‹åºã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;redis-benchmarkï¼šRedisæ€§èƒ½å‹æµ‹å·¥å…·ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;redis-check-aofã€redis-check-rdbï¼šç”¨äºæ£€éªŒå’Œä¿®å¤RDBã€AOFæŒä¹…åŒ–æ–‡ä»¶çš„å·¥å…·ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;ç»§ç»­åˆ†æmainå‡½æ•°ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(&lt;span&gt;int&lt;/span&gt;Â argc,Â &lt;span&gt;char&lt;/span&gt;Â **argv)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â ...&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (argcÂ &amp;gt;=Â &lt;span&gt;2&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â jÂ =Â &lt;span&gt;1&lt;/span&gt;;Â &lt;br/&gt;Â Â Â Â Â Â Â Â sdsÂ optionsÂ =Â sdsempty();&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;char&lt;/span&gt;Â *configfileÂ =Â &lt;span&gt;NULL&lt;/span&gt;;&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//Â [6]&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (&lt;span&gt;strcmp&lt;/span&gt;(argv[&lt;span&gt;1&lt;/span&gt;],Â &lt;span&gt;&quot;-v&quot;&lt;/span&gt;)Â ==Â &lt;span&gt;0&lt;/span&gt;Â ||&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;strcmp&lt;/span&gt;(argv[&lt;span&gt;1&lt;/span&gt;],Â &lt;span&gt;&quot;--version&quot;&lt;/span&gt;)Â ==Â &lt;span&gt;0&lt;/span&gt;)Â version();&lt;br/&gt;Â Â Â Â Â Â Â Â ...&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//Â [7]&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (argv[j][&lt;span&gt;0&lt;/span&gt;]Â !=Â &lt;span&gt;&#x27;-&#x27;&lt;/span&gt;Â ||Â argv[j][&lt;span&gt;1&lt;/span&gt;]Â !=Â &lt;span&gt;&#x27;-&#x27;&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â configfileÂ =Â argv[j];&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â server.configfileÂ =Â getAbsolutePath(configfile);&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â zfree(server.exec_argv[j]);&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â server.exec_argv[j]Â =Â zstrdup(server.configfile);&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â j++;&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â &lt;span&gt;//Â [8]&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;while&lt;/span&gt;(jÂ !=Â argc)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â ...&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//Â [9]&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (server.sentinel_modeÂ &amp;amp;&amp;amp;Â configfileÂ &amp;amp;&amp;amp;Â *configfileÂ ==Â &lt;span&gt;&#x27;-&#x27;&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â ...&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;exit&lt;/span&gt;(&lt;span&gt;1&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//Â [10]&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â resetServerSaveParams();&lt;br/&gt;Â Â Â Â Â Â Â Â loadServerConfig(configfile,options);&lt;br/&gt;Â Â Â Â Â Â Â Â sdsfree(options);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â ...&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã€6ã€‘å¯¹-vã€--versionã€--helpã€-hã€--test-memoryç­‰å‘½ä»¤è¿›è¡Œä¼˜å…ˆå¤„ç†ã€‚&lt;br/&gt;strcmpå‡½æ•°æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²str1ã€str2ï¼Œè‹¥str1=str2ï¼Œåˆ™è¿”å›é›¶ï¼›è‹¥str1&lt;str2/&gt;&amp;lt;/str2ï¼Œåˆ™è¿”å›è´Ÿæ•°ï¼›è‹¥str1&amp;gt;&amp;lt;/str2ï¼Œåˆ™è¿”å›è´Ÿæ•°ï¼›è‹¥str1&amp;gt;str2ï¼Œåˆ™è¿”å›æ­£æ•°ã€‚&lt;br/&gt;ã€7ã€‘å¦‚æœå¯åŠ¨å‘½ä»¤çš„ç¬¬äºŒä¸ªå‚æ•°ä¸æ˜¯ä»¥â€œ--â€å¼€å§‹çš„ï¼Œåˆ™æ˜¯é…ç½®æ–‡ä»¶å‚æ•°ï¼Œå°†é…ç½®æ–‡ä»¶è·¯å¾„è½¬åŒ–ä¸ºç»å¯¹è·¯å¾„ï¼Œå­˜å…¥server.configfileä¸­ã€‚&lt;br/&gt;ã€8ã€‘è¯»å–å¯åŠ¨å‘½ä»¤ä¸­çš„å¯åŠ¨é…ç½®é¡¹ï¼Œå¹¶å°†å®ƒä»¬æ‹¼æ¥åˆ°ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­ã€‚&lt;br/&gt;ã€9ã€‘ä»¥Sentinelæ¨¡å¼å¯åŠ¨ï¼Œå¿…é¡»æŒ‡å®šé…ç½®æ–‡ä»¶ï¼Œå¦åˆ™ç›´æ¥æŠ¥é”™é€€å‡ºã€‚&lt;br/&gt;ã€10ã€‘config.c/resetServerSaveParamså‡½æ•°é‡ç½®server.saveparamså±æ€§ï¼ˆè¯¥å±æ€§å­˜æ”¾RDB SAVEé…ç½®ï¼‰ã€‚config.c/loadServerConfigå‡½æ•°ä»é…ç½®æ–‡ä»¶ä¸­åŠ è½½æ‰€æœ‰é…ç½®é¡¹ï¼Œå¹¶ä½¿ç”¨å¯åŠ¨å‘½ä»¤é…ç½®é¡¹è¦†ç›–é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®é¡¹ã€‚&amp;lt;/str2ï¼Œåˆ™è¿”å›è´Ÿæ•°ï¼›è‹¥str1&amp;gt;&lt;/p&gt;&lt;p&gt;æç¤ºï¼šconfig.cä¸­çš„configsæ•°ç»„å®šä¹‰äº†å¤§å¤šæ•°é…ç½®é€‰é¡¹ä¸serverå±æ€§çš„å¯¹åº”å…³ç³»ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;standardConfigÂ configs[]Â =Â {&lt;br/&gt;Â Â Â Â createBoolConfig(&lt;span&gt;&quot;rdbchecksum&quot;&lt;/span&gt;,Â &lt;span&gt;NULL&lt;/span&gt;,Â IMMUTABLE_CONFIG,Â server.rdb_checksum,Â &lt;span&gt;1&lt;/span&gt;,Â &lt;span&gt;NULL&lt;/span&gt;,Â &lt;span&gt;NULL&lt;/span&gt;),&lt;br/&gt;Â Â Â Â createBoolConfig(&lt;span&gt;&quot;daemonize&quot;&lt;/span&gt;,Â &lt;span&gt;NULL&lt;/span&gt;,Â IMMUTABLE_CONFIG,Â server.daemonize,Â &lt;span&gt;0&lt;/span&gt;,Â &lt;span&gt;NULL&lt;/span&gt;,Â &lt;span&gt;NULL&lt;/span&gt;),&lt;br/&gt;Â Â Â Â ...&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é…ç½®é¡¹rdbchecksumå¯¹åº”server.rdb_checksumå±æ€§ï¼Œé»˜è®¤å€¼ä¸º1ï¼ˆå³boolå€¼yesï¼‰ï¼Œå…¶ä»–é…ç½®é¡¹ä»¥æ­¤ç±»æ¨ã€‚å¦‚æœè¯»è€…éœ€è¦æŸ¥æ‰¾é…ç½®é¡¹å¯¹åº”çš„serverå±æ€§å’Œé»˜è®¤å€¼ï¼Œåˆ™å¯ä»¥ä»ä¸­æŸ¥æ‰¾ã€‚&lt;/p&gt;&lt;p&gt;ä¸‹é¢ç»§ç»­åˆ†æmainå‡½æ•°ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(&lt;span&gt;int&lt;/span&gt;Â argc,Â &lt;span&gt;char&lt;/span&gt;Â **argv)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â ...&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [11]Â Â Â Â &lt;/span&gt;&lt;br/&gt;Â Â Â Â server.supervisedÂ =Â redisIsSupervised(server.supervised_mode);&lt;br/&gt;Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â backgroundÂ =Â server.daemonizeÂ &amp;amp;&amp;amp;Â !server.supervised;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (background)Â daemonize();&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [12]&lt;/span&gt;&lt;br/&gt;Â Â Â Â serverLog(LL_WARNING,Â &lt;span&gt;&quot;oO0OoO0OoO0OoÂ RedisÂ isÂ startingÂ oO0OoO0OoO0Oo&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â ...&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [13]&lt;/span&gt;&lt;br/&gt;Â Â Â Â initServer();&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (backgroundÂ ||Â server.pidfile)Â createPidFile();&lt;br/&gt;Â Â Â Â ...&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (!server.sentinel_mode)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â ...&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//Â [14]&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â moduleLoadFromQueue();&lt;br/&gt;Â Â Â Â Â Â Â Â ACLLoadUsersAtStartup();&lt;br/&gt;Â Â Â Â Â Â Â Â InitServerLast();&lt;br/&gt;Â Â Â Â Â Â Â Â loadDataFromDisk();&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (server.cluster_enabled)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (verifyClusterConfigWithData()Â ==Â C_ERR)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ...&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;exit&lt;/span&gt;(&lt;span&gt;1&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â ...&lt;br/&gt;Â Â Â Â }Â &lt;span&gt;else&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//Â [15]&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â InitServerLast();&lt;br/&gt;Â Â Â Â Â Â Â Â sentinelIsRunning();&lt;br/&gt;Â Â Â Â Â Â Â Â ...&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â ...&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [16]&lt;/span&gt;&lt;br/&gt;Â Â Â Â redisSetCpuAffinity(server.server_cpulist);&lt;br/&gt;Â Â Â Â setOOMScoreAdj(&lt;span&gt;-1&lt;/span&gt;);&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [17]&lt;/span&gt;&lt;br/&gt;Â Â Â Â aeMain(server.el);&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [18]&lt;/span&gt;&lt;br/&gt;Â Â Â Â aeDeleteEventLoop(server.el);&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã€11ã€‘server.supervisedå±æ€§æŒ‡å®šæ˜¯å¦ä»¥upstartæœåŠ¡æˆ–systemdæœåŠ¡å¯åŠ¨Redisã€‚å¦‚æœé…ç½®äº†server.daemonizeä¸”æ²¡æœ‰é…ç½®server.supervisedï¼Œåˆ™ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼å¯åŠ¨Redisã€‚&lt;br/&gt;ã€12ã€‘æ‰“å°å¯åŠ¨æ—¥å¿—ã€‚&lt;br/&gt;ã€13ã€‘initServerå‡½æ•°åˆå§‹åŒ–Redisè¿è¡Œæ—¶æ•°æ®ï¼ŒcreatePidFileå‡½æ•°åˆ›å»ºpidæ–‡ä»¶ã€‚&lt;br/&gt;ã€14ã€‘å¦‚æœéSentinelæ¨¡å¼å¯åŠ¨ï¼Œåˆ™å®Œæˆä»¥ä¸‹æ“ä½œï¼š&lt;br/&gt;ï¼ˆ1ï¼‰moduleLoadFromQueueå‡½æ•°åŠ è½½é…ç½®æ–‡ä»¶æŒ‡å®šçš„Moduleæ¨¡å—ï¼›&lt;br/&gt;ï¼ˆ2ï¼‰ACLLoadUsersAtStartupå‡½æ•°åŠ è½½ACLç”¨æˆ·æ§åˆ¶åˆ—è¡¨ï¼›&lt;br/&gt;ï¼ˆ3ï¼‰InitServerLastå‡½æ•°è´Ÿè´£åˆ›å»ºåå°çº¿ç¨‹ã€I/Oçº¿ç¨‹ï¼Œè¯¥æ­¥éª¤éœ€åœ¨Moduleæ¨¡å—åŠ è½½åå†æ‰§è¡Œï¼›&lt;br/&gt;ï¼ˆ4ï¼‰loadDataFromDiskå‡½æ•°ä»ç£ç›˜ä¸­åŠ è½½AOFæˆ–RDBæ–‡ä»¶ã€‚&lt;br/&gt;ï¼ˆ5ï¼‰å¦‚æœä»¥Clusteræ¨¡å¼å¯åŠ¨ï¼Œé‚£ä¹ˆè¿˜éœ€è¦éªŒè¯åŠ è½½çš„æ•°æ®æ˜¯å¦æ­£ç¡®ã€‚&lt;br/&gt;ã€15ã€‘å¦‚æœä»¥Sentinelæ¨¡å¼å¯åŠ¨ï¼Œåˆ™è°ƒç”¨sentinelIsRunningå‡½æ•°å¯åŠ¨Sentinelæœºåˆ¶ã€‚&lt;br/&gt;ã€16ã€‘å°½å¯èƒ½å°†Redisä¸»çº¿ç¨‹ç»‘å®šåˆ°server.server_cpulisté…ç½®çš„CPUåˆ—è¡¨ä¸Šï¼ŒRedis 4å¼€å§‹ä½¿ç”¨å¤šçº¿ç¨‹ï¼Œè¯¥æ“ä½œå¯ä»¥å‡å°‘ä¸å¿…è¦çš„çº¿ç¨‹åˆ‡æ¢ï¼Œæé«˜æ€§èƒ½ã€‚&lt;br/&gt;ã€17ã€‘å¯åŠ¨äº‹ä»¶å¾ªç¯å™¨ã€‚äº‹ä»¶å¾ªç¯å™¨æ˜¯Redisä¸­çš„é‡è¦ç»„ä»¶ã€‚åœ¨Redisè¿è¡ŒæœŸé—´ï¼Œç”±äº‹ä»¶å¾ªç¯å™¨æä¾›æœåŠ¡ã€‚&lt;br/&gt;ã€18ã€‘æ‰§è¡Œåˆ°è¿™é‡Œï¼Œè¯´æ˜RedisæœåŠ¡å·²åœæ­¢ï¼ŒaeDeleteEventLoopå‡½æ•°æ¸…é™¤äº‹ä»¶å¾ªç¯å™¨ä¸­çš„äº‹ä»¶ï¼Œæœ€åé€€å‡ºç¨‹åºã€‚&lt;/p&gt;&lt;h2&gt;&lt;span&gt;Redisåˆå§‹åŒ–è¿‡ç¨‹&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;ä¸‹é¢çœ‹ä¸€ä¸‹initServerå‡½æ•°ï¼Œå®ƒè´Ÿè´£åˆå§‹åŒ–Redisè¿è¡Œæ—¶æ•°æ®ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;initServer&lt;/span&gt;&lt;span&gt;(&lt;span&gt;void&lt;/span&gt;)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â j;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [1]&lt;/span&gt;&lt;br/&gt;Â Â Â Â signal(SIGHUP,Â SIG_IGN);&lt;br/&gt;Â Â Â Â signal(SIGPIPE,Â SIG_IGN);&lt;br/&gt;Â Â Â Â setupSignalHandlers();&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [2]&lt;/span&gt;&lt;br/&gt;Â Â Â Â makeThreadKillable();&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [3]&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (server.syslog_enabled)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â openlog(server.syslog_ident,Â LOG_PIDÂ |Â LOG_NDELAYÂ |Â LOG_NOWAIT,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â server.syslog_facility);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [4]&lt;/span&gt;&lt;br/&gt;Â Â Â Â server.aof_stateÂ =Â server.aof_enabledÂ ?Â AOF_ONÂ :Â AOF_OFF;&lt;br/&gt;Â Â Â Â server.hzÂ =Â server.config_hz;&lt;br/&gt;Â Â Â Â server.pidÂ =Â getpid();&lt;br/&gt;Â Â Â Â ...&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [5]&lt;/span&gt;&lt;br/&gt;Â Â Â Â createSharedObjects();&lt;br/&gt;Â Â Â Â adjustOpenFilesLimit();&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [6]&lt;/span&gt;&lt;br/&gt;Â Â Â Â server.elÂ =Â aeCreateEventLoop(server.maxclients+CONFIG_FDSET_INCR);&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (server.elÂ ==Â &lt;span&gt;NULL&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â ...&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;exit&lt;/span&gt;(&lt;span&gt;1&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â more&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã€1ã€‘è®¾ç½®UNIXä¿¡å·å¤„ç†å‡½æ•°ï¼Œä½¿RedisæœåŠ¡å™¨æ”¶åˆ°SIGINTä¿¡å·åé€€å‡ºç¨‹åºã€‚&lt;br/&gt;ã€2ã€‘è®¾ç½®çº¿ç¨‹éšæ—¶å“åº”CANCELä¿¡å·ï¼Œç»ˆæ­¢çº¿ç¨‹ï¼Œä»¥ä¾¿åœæ­¢ç¨‹åºã€‚&lt;br/&gt;ã€3ã€‘å¦‚æœå¼€å¯äº†Unixç³»ç»Ÿæ—¥å¿—ï¼Œåˆ™è°ƒç”¨openlogå‡½æ•°ä¸Unixç³»ç»Ÿæ—¥å¿—å»ºç«‹è¾“å‡ºè¿æ¥ï¼Œä»¥ä¾¿è¾“å‡ºç³»ç»Ÿæ—¥å¿—ã€‚&lt;br/&gt;ã€4ã€‘åˆå§‹åŒ–serverä¸­è´Ÿè´£å­˜å‚¨è¿è¡Œæ—¶æ•°æ®çš„ç›¸å…³å±æ€§ã€‚&lt;br/&gt;ã€5ã€‘createSharedObjectså‡½æ•°åˆ›å»ºå…±äº«æ•°æ®é›†ï¼Œè¿™äº›æ•°æ®å¯åœ¨å„åœºæ™¯ä¸­å…±äº«ä½¿ç”¨ï¼Œå¦‚å°æ•°å­—0ï½9999ã€å¸¸ç”¨å­—ç¬¦ä¸²+OK\r\nï¼ˆå‘½ä»¤å¤„ç†æˆåŠŸå“åº”å­—ç¬¦ä¸²ï¼‰ã€+PONG\r\nï¼ˆpingå‘½ä»¤å“åº”å­—ç¬¦ä¸²ï¼‰ã€‚adjustOpenFilesLimitå‡½æ•°å°è¯•ä¿®æ”¹ç¯å¢ƒå˜é‡ï¼Œæé«˜ç³»ç»Ÿå…è®¸æ‰“å¼€çš„æ–‡ä»¶æè¿°ç¬¦ä¸Šé™ï¼Œé¿å…ç”±äºå¤§é‡å®¢æˆ·ç«¯è¿æ¥ï¼ˆSocketæ–‡ä»¶æè¿°ç¬¦ï¼‰å¯¼è‡´é”™è¯¯ã€‚&lt;br/&gt;ã€6ã€‘åˆ›å»ºäº‹ä»¶å¾ªç¯å™¨ã€‚&lt;br/&gt;UNIXç¼–ç¨‹ï¼šä¿¡å·ä¹Ÿç§°ä¸ºè½¯ä¸­æ–­ï¼Œä¿¡å·æ˜¯UNIXæä¾›çš„ä¸€ç§å¤„ç†å¼‚æ­¥äº‹ä»¶çš„æ–¹æ³•ï¼Œç¨‹åºé€šè¿‡è®¾ç½®å›è°ƒå‡½æ•°å‘Šè¯‰ç³»ç»Ÿå†…æ ¸ï¼Œåœ¨ä¿¡å·äº§ç”Ÿåè¦åšä»€ä¹ˆæ“ä½œã€‚ç³»ç»Ÿä¸­å¾ˆå¤šåœºæ™¯ä¼šäº§ç”Ÿä¿¡å·ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ç”¨æˆ·æŒ‰ä¸‹æŸäº›ç»ˆç«¯é”®ï¼Œä½¿ç»ˆç«¯äº§ç”Ÿä¿¡å·ã€‚ä¾‹å¦‚ï¼Œç”¨æˆ·åœ¨ç»ˆç«¯æŒ‰ä¸‹äº†ä¸­æ–­é”®ï¼ˆä¸€èˆ¬ä¸ºCtrl+Cç»„åˆé”®ï¼‰ï¼Œä¼šå‘é€SIGINTä¿¡å·é€šçŸ¥ç¨‹åºåœæ­¢è¿è¡Œã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ç³»ç»Ÿä¸­å‘ç”Ÿäº†æŸäº›ç‰¹å®šäº‹ä»¶ï¼Œä¾‹å¦‚ï¼Œå½“alarmå‡½æ•°è®¾ç½®çš„å®šæ—¶å™¨è¶…æ—¶ï¼Œå†…æ ¸å‘é€SIGALRMä¿¡å·ï¼Œæˆ–è€…ä¸€ä¸ªè¿›ç¨‹ç»ˆæ­¢æ—¶ï¼Œå†…æ ¸å‘é€SIGCLDä¿¡å·ç»™å…¶çˆ¶è¿›ç¨‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æŸäº›ç¡¬ä»¶å¼‚å¸¸ï¼Œä¾‹å¦‚ï¼Œé™¤æ•°ä¸º0ã€æ— æ•ˆçš„å†…å­˜å¼•ç”¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;ç¨‹åºä¸­ä½¿ç”¨å‡½æ•°å‘é€ä¿¡å·ï¼Œä¾‹å¦‚ï¼Œè°ƒç”¨killå‡½æ•°å°†ä»»æ„ä¿¡å·å‘é€ç»™å¦ä¸€ä¸ªè¿›ç¨‹ã€‚&lt;br/&gt;æ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥è‡ªè¡Œæ·±å…¥äº†è§£UNIXç¼–ç¨‹ç›¸å…³å†…å®¹ã€‚&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;æ¥ç€åˆ†æinitServerå‡½æ•°ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;initServer&lt;/span&gt;&lt;span&gt;(&lt;span&gt;void&lt;/span&gt;)&lt;/span&gt;Â &lt;/span&gt;{Â Â Â Â &lt;br/&gt;Â Â Â Â server.dbÂ =Â zmalloc(&lt;span&gt;sizeof&lt;/span&gt;(redisDb)*server.dbnum);&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [7]&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (server.portÂ !=Â &lt;span&gt;0&lt;/span&gt;Â &amp;amp;&amp;amp;&lt;br/&gt;Â Â Â Â Â Â Â Â listenToPort(server.port,server.ipfd,&amp;amp;server.ipfd_count)Â ==Â C_ERR)&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;exit&lt;/span&gt;(&lt;span&gt;1&lt;/span&gt;);&lt;br/&gt;Â Â Â Â ...&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [8]&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â (jÂ =Â &lt;span&gt;0&lt;/span&gt;;Â jÂ &amp;lt;Â server.dbnum;Â j++)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â server.db[j].dictÂ =Â dictCreate(&amp;amp;dbDictType,&lt;span&gt;NULL&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â server.db[j].expiresÂ =Â dictCreate(&amp;amp;keyptrDictType,&lt;span&gt;NULL&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â ...&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [9]&lt;/span&gt;&lt;br/&gt;Â Â Â Â evictionPoolAlloc();Â &lt;br/&gt;Â Â Â Â server.pubsub_channelsÂ =Â dictCreate(&amp;amp;keylistDictType,&lt;span&gt;NULL&lt;/span&gt;);&lt;br/&gt;Â Â Â Â server.pubsub_patternsÂ =Â listCreate();&lt;br/&gt;Â Â Â Â ...&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã€7ã€‘å¦‚æœé…ç½®äº†server.portï¼Œåˆ™å¼€å¯TCP SocketæœåŠ¡ï¼Œæ¥æ”¶ç”¨æˆ·è¯·æ±‚ã€‚å¦‚æœé…ç½®äº†server.tls_ portï¼Œåˆ™å¼€å¯TLS SocketæœåŠ¡ï¼ŒRedis 6.0å¼€å§‹æ”¯æŒTLSè¿æ¥ã€‚å¦‚æœé…ç½®äº†server.unixsocketï¼Œåˆ™å¼€å¯UNIX SocketæœåŠ¡ã€‚å¦‚æœä¸Šé¢3ä¸ªé€‰é¡¹éƒ½æ²¡æœ‰é…ç½®ï¼Œåˆ™æŠ¥é”™é€€å‡ºã€‚&lt;br/&gt;ã€8ã€‘åˆå§‹åŒ–æ•°æ®åº“server.dbï¼Œç”¨äºå­˜å‚¨æ•°æ®ã€‚&lt;br/&gt;ã€9ã€‘evictionPoolAllocå‡½æ•°åˆå§‹åŒ–LRU/LFUæ ·æœ¬æ± ï¼Œç”¨äºå®ç°LRU/LFUè¿‘ä¼¼ç®—æ³•ã€‚&lt;/p&gt;&lt;p&gt;initServerå‡½æ•°ç»§ç»­åˆå§‹åŒ–serverä¸­å­˜å‚¨è¿è¡Œæ—¶æ•°æ®çš„ç›¸å…³å±æ€§ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;initServer&lt;/span&gt;&lt;span&gt;(&lt;span&gt;void&lt;/span&gt;)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â ...&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [10]&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (aeCreateTimeEvent(server.el,Â &lt;span&gt;1&lt;/span&gt;,Â serverCron,Â &lt;span&gt;NULL&lt;/span&gt;,Â &lt;span&gt;NULL&lt;/span&gt;)Â ==Â AE_ERR)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â serverPanic(&lt;span&gt;&quot;Can&#x27;tÂ createÂ eventÂ loopÂ timers.&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;exit&lt;/span&gt;(&lt;span&gt;1&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [11]&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â (jÂ =Â &lt;span&gt;0&lt;/span&gt;;Â jÂ &amp;lt;Â server.ipfd_count;Â j++)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (aeCreateFileEvent(server.el,Â server.ipfd[j],Â AE_READABLE,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â acceptTcpHandler,&lt;span&gt;NULL&lt;/span&gt;)Â ==Â AE_ERR)&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â serverPanic(&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;&quot;UnrecoverableÂ errorÂ creatingÂ server.ipfdÂ fileÂ event.&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â ...&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [12]&lt;/span&gt;&lt;br/&gt;Â Â Â Â aeSetBeforeSleepProc(server.el,beforeSleep);&lt;br/&gt;Â Â Â Â aeSetAfterSleepProc(server.el,afterSleep);&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [13]&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (server.aof_stateÂ ==Â AOF_ON)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â server.aof_fdÂ =Â open(server.aof_filename,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â O_WRONLY|O_APPEND|O_CREAT,&lt;span&gt;0644&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â ...&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [14]&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (server.arch_bitsÂ ==Â &lt;span&gt;32&lt;/span&gt;Â &amp;amp;&amp;amp;Â server.maxmemoryÂ ==Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â ...&lt;br/&gt;Â Â Â Â Â Â Â Â server.maxmemoryÂ =Â &lt;span&gt;3072L&lt;/span&gt;L*(&lt;span&gt;1024&lt;/span&gt;*&lt;span&gt;1024&lt;/span&gt;);Â &lt;span&gt;/*Â 3Â GBÂ */&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â server.maxmemory_policyÂ =Â MAXMEMORY_NO_EVICTION;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â [15]&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (server.cluster_enabled)Â clusterInit();&lt;br/&gt;Â Â Â Â replicationScriptCacheInit();&lt;br/&gt;Â Â Â Â scriptingInit(&lt;span&gt;1&lt;/span&gt;);&lt;br/&gt;Â Â Â Â slowlogInit();&lt;br/&gt;Â Â Â Â latencyMonitorInit();&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã€10ã€‘åˆ›å»ºä¸€ä¸ªæ—¶é—´äº‹ä»¶ï¼Œæ‰§è¡Œå‡½æ•°ä¸ºserverCronï¼Œè´Ÿè´£å¤„ç†Redisä¸­çš„å®šæ—¶ä»»åŠ¡ï¼Œå¦‚æ¸…ç†è¿‡æœŸæ•°æ®ã€ç”ŸæˆRDBæ–‡ä»¶ç­‰ã€‚&lt;br/&gt;ã€11ã€‘åˆ†åˆ«ä¸ºTCP Socketã€TSL Socksã€UNIX Socketæ³¨å†Œç›‘å¬AE_READABLEç±»å‹çš„æ–‡ä»¶äº‹ä»¶ï¼Œäº‹ä»¶å¤„ç†å‡½æ•°åˆ†åˆ«ä¸ºacceptTcpHandlerã€acceptTLSHandlerã€acceptUnixHandlerï¼Œè¿™äº›å‡½æ•°è´Ÿè´£æ¥æ”¶Socketä¸­çš„æ–°è¿æ¥ï¼Œæœ¬ä¹¦åç»­ä¼šè¯¦ç»†åˆ†æacceptTcpHandlerå‡½æ•°ã€‚&lt;br/&gt;ã€12ã€‘æ³¨å†Œäº‹ä»¶å¾ªç¯å™¨çš„é’©å­å‡½æ•°ï¼Œäº‹ä»¶å¾ªç¯å™¨åœ¨æ¯æ¬¡é˜»å¡å‰åéƒ½ä¼šè°ƒç”¨é’©å­å‡½æ•°ã€‚&lt;br/&gt;ã€13ã€‘å¦‚æœå¼€å¯äº†AOFï¼Œåˆ™é¢„å…ˆæ‰“å¼€AOFæ–‡ä»¶ã€‚&lt;br/&gt;ã€14ã€‘å¦‚æœRedisè¿è¡Œåœ¨32ä½æ“ä½œç³»ç»Ÿä¸Šï¼Œç”±äº32ä½æ“ä½œç³»ç»Ÿå†…å­˜ç©ºé—´é™åˆ¶ä¸º4GBï¼Œæ‰€ä»¥å°†Redisä½¿ç”¨å†…å­˜é™åˆ¶ä¸º3GBï¼Œé¿å…RedisæœåŠ¡å™¨å› å†…å­˜ä¸è¶³è€Œå´©æºƒã€‚&lt;br/&gt;ã€15ã€‘å¦‚æœä»¥Clusteræ¨¡å¼å¯åŠ¨ï¼Œåˆ™è°ƒç”¨clusterInitå‡½æ•°åˆå§‹åŒ–Clusteræœºåˆ¶ã€‚&lt;/p&gt;&lt;p&gt;æ€»ç»“ï¼š&lt;/p&gt;&lt;p&gt;æ–‡ç« æœ€åï¼Œä»‹ç»ä¸€ä¸‹æ–°ä¹¦ã€ŠRedisæ ¸å¿ƒåŸç†ä¸å®è·µã€‹ï¼Œæœ¬ä¹¦é€šè¿‡æ·±å…¥åˆ†æRedis 6.0æºç ï¼Œæ€»ç»“äº†Redisæ ¸å¿ƒåŠŸèƒ½çš„è®¾è®¡ä¸å®ç°ã€‚é€šè¿‡é˜…è¯»æœ¬ä¹¦ï¼Œè¯»è€…å¯ä»¥æ·±å…¥ç†è§£Rediså†…éƒ¨æœºåˆ¶åŠæœ€æ–°ç‰¹æ€§ï¼Œå¹¶å­¦ä¹ åˆ°Redisç›¸å…³çš„æ•°æ®ç»“æ„ä¸ç®—æ³•ã€Unixç¼–ç¨‹ã€å­˜å‚¨ç³»ç»Ÿè®¾è®¡ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿæ¶æ„ç­‰ä¸€ç³»åˆ—çŸ¥è¯†ã€‚&lt;br/&gt;ç»è¿‡è¯¥ä¹¦ç¼–è¾‘åŒæ„ï¼Œæˆ‘ä¼šç»§ç»­åœ¨ä¸ªäººæŠ€æœ¯å…¬ä¼—å·ï¼ˆbinecyï¼‰å‘å¸ƒä¹¦ä¸­éƒ¨åˆ†ç« èŠ‚å†…å®¹ï¼Œä½œä¸ºä¹¦çš„é¢„è§ˆå†…å®¹ï¼Œæ¬¢è¿å¤§å®¶æŸ¥é˜…ï¼Œè°¢è°¢ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¹¦ç±è¯¦æƒ…ï¼š&lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzI2MDQzMTU2MA==&amp;amp;mid=2247484112&amp;amp;idx=1&amp;amp;sn=c7d2d153a65a72fb3cd074803c7c2fbc&amp;amp;chksm=ea688977dd1f0061831cae4f5361182603b2e5778cae8aa0fc8f7e92ab75bc08c81afd717e6c&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;æ–°ä¹¦ä»‹ç» -- ã€ŠRedisæ ¸å¿ƒåŸç†ä¸å®è·µã€‹&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>