<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>56bfb8b40a0a108fbd63229c9d6073fc</guid>
<title>å¬å”ä¸€å¥åŠï¼Œæ¶ˆæ¯é˜Ÿåˆ—çš„æ°´å¤ªæ·±ï¼Œä½ æŠŠæ¡ä¸ä½</title>
<link>https://toutiao.io/k/obo72ks</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;è¿™æ˜¯Jamçš„ç¬¬ &lt;/span&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot;&gt;156Â &lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ç¯‡åŸåˆ›åˆ†äº«&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span/&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.05&quot; data-type=&quot;png&quot; data-w=&quot;640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/6rXsLrncBqzrqzaZMY3L9QQQLr2beXVha4MicumtStMbcghJUPIVwPlHALTGTkkmpGicPYQbQObXGWIZr9NvjAtw/640?wx_fmt=png&quot;/&gt;   å¾ˆå¤šäººåœ¨åšæ¶æ„è®¾è®¡æ—¶å¾€å¾€ä¼šâ€œè¿‡åº¦è®¾è®¡â€,ç®€å•é—®é¢˜å¤æ‚åŒ–ï¼Œä¸Šæ¥å°±å¼•ä¸€å †ä¸­é—´ä»¶ï¼Œæˆ‘æƒ³å¤§æ¦‚åŸå› ä¸»è¦æœ‰ä¸‹é¢ä¸¤ç‚¹ï¼š&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ä¸ºäº†ç§€ï¼ˆå­¦ï¼‰æŠ€æœ¯è€Œæ¶æ„&lt;br/&gt;æˆ‘ä»¬å¸¸è¯´æŠ€æœ¯æ˜¯ä¸ºä¸šåŠ¡æœåŠ¡çš„ï¼Œä¸èƒ½ä¸ºäº†æŠ€æœ¯è€ŒæŠ€æœ¯ï¼Œä¸ºäº†ç§€æŠ€æœ¯å¼•å…¥ä¸€å †å¤æ‚æ¶æ„è¿™æ˜¯è¦ä¸å¾—çš„ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;è€ƒè™‘é—®é¢˜ä¸å…¨é¢ï¼Œæˆ–è€…è¯´å¹¿åº¦ä¸å¤Ÿï¼Œä¸çŸ¥é“å¦‚ä½•ç®€å•åŒ–&lt;br/&gt;ä¸¾ä¸ªæ —å­ï¼Œå‡è®¾æœ‰ä¸€ä¸ªé«˜å¹¶å‘çš„ç”¨æˆ·å¹³å°éœ€è¦å¤„ç†æ³¨å†Œï¼ˆå†™ï¼‰åŠç™»å½•æŸ¥è¯¢ï¼ˆè¯»ï¼‰åŠŸèƒ½ï¼Œåœ¨æ•°æ®åº“å±‚åšäº†ä¸»ä»åŒæ­¥ã€‚&lt;br/&gt;&lt;br/&gt;æœ‰äººä¸ºäº†è§£å†³ä¸»ä»åŒæ­¥å»¶æ—¶é—®é¢˜å¼•å…¥äº†ä¸€ä¸ªRedisï¼Œæƒ³å®ç°å†™ä¸»åº“çš„æ—¶å€™åŒæ—¶å†™Redisï¼Œç„¶åè¯»çš„æ—¶å€™ç›´æ¥è¯»Redisï¼Œç”¨ä»¥é¿å…äº†ä¸»ä»å»¶æ—¶åŒæ­¥é—®é¢˜ï¼Œè¿™å°±æ˜¯å…¸å‹çš„è€ƒè™‘é—®é¢˜ä¸å…¨é¢ï¼Œè¿™è™½ç„¶å¯ä»¥è§£å†³ä¸»ä»å»¶æ—¶é—®é¢˜ï¼Œä½†æ˜¯åˆä¼šå¯¼è‡´åŒå†™ä¸€è‡´æ€§äº‹åŠ¡é—®é¢˜çš„äº§ç”Ÿï¼Œé‚£ä¸å¦‚ç›´æ¥æŠŠä¸»ä»åŒæ­¥çš„æ–¹å¼æ”¹æˆå¼ºåŒæ­¥å¤åˆ¶ç›´æ¥ä»æ•°æ®åº“å±‚é¢ä¿è¯äº†ä¸€è‡´æ€§ã€‚&lt;br/&gt;&lt;br/&gt;é‚£ä½ å¯èƒ½ä¼šè¯´æ”¹æˆå¼ºåŒæ­¥å¤åˆ¶ä¸æ˜¯ä¼šå¢åŠ å“åº”æ—¶é—´è¿›è€Œå½±å“ç³»ç»Ÿååé‡å—ï¼Œé‚£å’±è¿˜å¯ä»¥å¯¹ç”¨æˆ·åšä¸ªåˆ†åº“ï¼Œå¤šåšå‡ ä¸ªä¸»ä»åŒæ­¥å‡ºæ¥ä¸å°±å¯ä»¥äº†å—ï¼Ÿ&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯¶è¯¶è¯¶ï¼Œè·‘é¢˜äº†ï¼Œä»Šå¤©å’±ä¸æ˜¯è¯´æ¶ˆæ¯é˜Ÿåˆ—å—ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å“¦ï¼Œè¨€å½’æ­£ä¼ ã€‚ä»Šå¤©æˆ‘ä»¬è¯´è¯´æ¶ˆæ¯é˜Ÿåˆ—çš„é—®é¢˜ï¼Œå¸Œæœ›çœ‹å®Œæœ¬æ–‡å¤§å®¶åœ¨å¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—çš„æ—¶å€™å…ˆæƒ³ä¸€æƒ³ï¼Œæ˜¯ä¸æ˜¯ä¸€å®šè¦å¼•å…¥ï¼Ÿå¼•å…¥æ¶ˆæ¯é˜Ÿåˆ—åäº§ç”Ÿçš„é—®é¢˜èƒ½ä¸èƒ½è§£å†³ï¼Ÿ&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ¶ˆæ¯é˜Ÿåˆ—çš„ä½œç”¨&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å¾®æœåŠ¡å¼€å‘ä¸­æˆ‘ä»¬ç»å¸¸ä¼šå¼•å…¥æ¶ˆæ¯ä¸­é—´ä»¶å®ç°ä¸šåŠ¡è§£è€¦ï¼Œæ‰§è¡Œå¼‚æ­¥æ“ä½œï¼Œ ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä½¿ç”¨æ¶ˆæ¯ä¸­é—´ä»¶çš„å¥½å¤„å’Œå¼Šç«¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é¦–å…ˆéœ€è¦è‚¯å®šæ˜¯ä½¿ç”¨æ¶ˆæ¯ç»„ä»¶æœ‰å¾ˆå¤šå¥½å¤„ï¼Œå…¶ä¸­æœ€æ ¸å¿ƒçš„ä¸‰ä¸ªæ˜¯ï¼šè§£è€¦ã€å¼‚æ­¥ã€å‰Šå³°ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;è§£è€¦&lt;/strong&gt;ï¼šå®¢æˆ·ç«¯åªè¦è®²è¯·æ±‚å‘é€ç»™ç‰¹å®šçš„é€šé“å³å¯ï¼Œä¸éœ€è¦æ„ŸçŸ¥æ¥æ”¶è¯·æ±‚å®ä¾‹çš„æƒ…å†µã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;å¼‚æ­¥&lt;/strong&gt;ï¼šå°†æ¶ˆæ¯å†™å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œéå¿…è¦çš„ä¸šåŠ¡é€»è¾‘ä»¥å¼‚æ­¥çš„æ–¹å¼è¿è¡Œï¼ŒåŠ å¿«å“åº”é€Ÿåº¦ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;å‰Šå³°&lt;/strong&gt;ï¼šæ¶ˆæ¯ä¸­é—´ä»¶åœ¨æ¶ˆæ¯è¢«æ¶ˆè´¹ä¹‹å‰ä¸€ç›´ç¼“å­˜æ¶ˆæ¯ï¼Œæ¶ˆæ¯å¤„ç†ç«¯å¯ä»¥æŒ‰ç…§è‡ªå·±å¤„ç†çš„å¹¶å‘é‡ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ…¢æ…¢å¤„ç†æ¶ˆæ¯ï¼Œä¸ä¼šä¸€ç¬é—´å‹å®ä¸šåŠ¡ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ç„¶æ¶ˆæ¯ä¸­é—´ä»¶å¹¶ä¸æ˜¯é“¶å¼¹ï¼Œå¼•å…¥æ¶ˆæ¯æœºåˆ¶åä¹Ÿä¼šæœ‰å¦‚ä¸‹ä¸€äº›å¼Šç«¯ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;æ½œåœ¨çš„æ€§èƒ½ç“¶é¢ˆ&lt;/strong&gt;ï¼šæ¶ˆæ¯ä»£ç†å¯èƒ½ä¼šå­˜åœ¨æ€§èƒ½ç“¶é¢ˆã€‚å¹¸è¿çš„æ˜¯ç›®å‰ä¸»æµçš„æ¶ˆæ¯ä¸­é—´ä»¶éƒ½æ”¯æŒé«˜åº¦çš„æ¨ªå‘æ‰©å±•ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;æ½œåœ¨çš„å•ç‚¹æ•…éšœ&lt;/strong&gt;ï¼šæ¶ˆæ¯ä»£ç†çš„é«˜å¯ç”¨æ€§è‡³å…³é‡è¦ï¼Œå¦åˆ™ç³»ç»Ÿæ•´ä½“çš„å¯é æ€§å°†å—åˆ°å½±å“ï¼Œå¹¸è¿çš„æ˜¯å¤§å¤šæ•°æ¶ˆæ¯ä¸­é—´ä»¶éƒ½æ˜¯é«˜å¯ç”¨çš„ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;é¢å¤–çš„æ“ä½œå¤æ‚æ€§&lt;/strong&gt;ï¼šæ¶ˆæ¯ç³»ç»Ÿæ˜¯ä¸€ä¸ªå¿…é¡»ç‹¬ç«‹å®‰è£…ã€é…ç½®å’Œè¿ç»´çš„ç³»ç»Ÿç»„ä»¶ï¼Œå¢åŠ äº†è¿ç»´çš„å¤æ‚åº¦ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™äº›å¼Šç«¯æˆ‘ä»¬å€ŸåŠ©æ¶ˆæ¯ä¸­é—´ä»¶æœ¬èº«æä¾›çš„æ‰©å±•ã€é«˜å¯ç”¨èƒ½åŠ›å¯ä»¥è§£å†³ï¼Œä½†æ˜¯è¦çœŸæ­£ç”¨å¥½æ¶ˆæ¯ä¸­é—´ä»¶æˆ‘ä»¬è¿˜éœ€è¦å…³æ³¨å¯èƒ½ä¼šé‡åˆ°çš„ä¸€äº›è®¾è®¡éš¾é¢˜ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ¶ˆæ¯é˜Ÿåˆ—çš„è®¾è®¡éš¾é¢˜&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å¤„ç†å¹¶å‘å’Œé¡ºåºæ¶ˆæ¯&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸ºäº†æé«˜æ¶ˆæ¯å¤„ç†çš„èƒ½åŠ›ä»¥åŠåº”ç”¨ç¨‹åºçš„ååé‡ï¼Œä¸€èˆ¬ä¼šå°†æ¶ˆè´¹è€…éƒ¨ç½²å¤šä¸ªå®ä¾‹èŠ‚ç‚¹ã€‚é‚£ä¹ˆå¸¦æ¥çš„æŒ‘æˆ˜å°±æ˜¯Â &lt;strong&gt;å¦‚ä½•ç¡®ä¿æ¯ä¸ªæ¶ˆæ¯åªè¢«å¤„ç†ä¸€æ¬¡ï¼Œå¹¶ä¸”æ˜¯æŒ‰ç…§ä»–ä»¬çš„å‘é€é¡ºåºæ¥å¤„ç†çš„ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¾‹å¦‚ï¼šå‡è®¾æœ‰3ä¸ªç›¸åŒçš„æ¥æ”¶æ–¹å®ä¾‹ä»åŒä¸€ä¸ªç‚¹å¯¹ç‚¹é€šé“è¯»å–æ¶ˆæ¯ï¼Œå‘é€æ–¹æŒ‰é¡ºåºå‘å¸ƒäº† &lt;code&gt;Order Created&lt;/code&gt;ã€&lt;code&gt;Order Updated&lt;/code&gt; å’Œ &lt;code&gt;Order Cancelled&lt;/code&gt; è¿™3ä¸ªäº‹ä»¶æ¶ˆæ¯ã€‚ç®€å•çš„æ¶ˆæ¯å®ç°å¯èƒ½å°±ä¼šåŒäº‹è®²æ¯ä¸ªæ¶ˆæ¯ç»™ä¸åŒçš„æ¥æ”¶æ–¹ã€‚è‹¥ç”±äºç½‘ç»œé—®é¢˜å¯¼è‡´å»¶è¿Ÿï¼Œæ¶ˆæ¯å¯èƒ½æ²¡æœ‰æŒ‰ç…§ä»–ä»¬å‘å‡ºæ—¶çš„é¡ºåºè¢«å¤„ç†ï¼Œè¿™å°†å¯¼è‡´å¥‡æ€ªçš„è¡Œä¸ºï¼ŒæœåŠ¡å®ä¾‹å¯èƒ½åœ¨å¦ä¸€ä¸ªæœåŠ¡å™¨å¤„ç† &lt;code&gt;Order Created&lt;/code&gt; æ¶ˆæ¯ä¹‹å‰å¤„ç† &lt;code&gt;Order Cancelled&lt;/code&gt;æ¶ˆæ¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Kafka ä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨åˆ†ç‰‡ï¼ˆåˆ†åŒºï¼‰é€šé“ã€‚æ•´ä½“è§£å†³æ–¹æ¡ˆåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ä¸€ä¸ªä¸»é¢˜é€šé“ç”±å¤šä¸ªåˆ†ç‰‡ç»„æˆï¼Œæ¯ä¸ªåˆ†ç‰‡çš„è¡Œä¸ºç±»ä¼¼ä¸€ä¸ªé€šé“ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å‘é€æ–¹åœ¨æ¶ˆæ¯å¤´éƒ¨æŒ‡å®šåˆ†ç‰‡é”®å¦‚orderIdï¼ŒKafkaä½¿ç”¨åˆ†ç‰‡é”®å°†æ¶ˆæ¯åˆ†é…ç»™ç‰¹å®šçš„åˆ†ç‰‡ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å°†æ¥æ”¶æ–¹çš„å¤šä¸ªå®ä¾‹ç»„åˆåœ¨ä¸€èµ·ï¼Œå¹¶å°†ä»–ä»¬è§†ä¸ºç›¸åŒçš„é€»è¾‘æ¥æ”¶æ–¹ï¼ˆæ¶ˆè´¹è€…ç»„ï¼‰ã€‚kafkaå°†æ¯ä¸ªåˆ†ç‰‡åˆ†é…ç»™å•ä¸ªæ¥æ”¶å™¨ï¼Œå®ƒåœ¨æ¥æ”¶æ–¹å¯åŠ¨å’Œå…³é—­æ—¶é‡æ–°åˆ†é…åˆ†ç‰‡ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.41875&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PxMzT0Oibf4iayMvgxttQ19lYM82uMqboNc828uf261U6CXqoUVMlQt1Oxz0HcIltRvHl6shqR3yCsncgOw1ica4g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;800&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;br/&gt;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ¯ä¸ªOrderäº‹ä»¶æ¶ˆæ¯éƒ½å°†orderIdä½œä¸ºå…¶åˆ†ç‰‡é”®ã€‚ç‰¹å®šè®¢å•çš„æ¯ä¸ªäº‹ä»¶éƒ½å‘å¸ƒåˆ°åŒä¸€ä¸ªåˆ†ç‰‡ã€‚è€Œä¸”è¯¥åˆ†ç‰‡ä¸­çš„æ¶ˆæ¯å§‹ç»ˆç”±åŒä¸€ä¸ªæ¥æ”¶æ–¹å®ä¾‹è¯»å–ï¼Œå› æ­¤è¿™æ ·å°±èƒ½å¤Ÿä¿è¯æŒ‰é¡ºåºå¤„ç†è¿™äº›æ¶ˆæ¯ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å¤„ç†é‡å¤æ¶ˆæ¯&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¼•å…¥æ¶ˆæ¯æ¶æ„å¿…é¡»è¦è§£å†³çš„å¦ä¸€ä¸ªæŒ‘æˆ˜æ˜¯å¤„ç†é‡å¤æ¶ˆæ¯ã€‚åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œæ¶ˆæ¯ä»£ç†åº”è¯¥åªä¼ é€’ä¸€æ¬¡æ¶ˆæ¯ï¼Œä½†ä¿è¯æ¶ˆæ¯æœ‰ä¸”ä»…æœ‰ä¸€æ¬¡çš„æ¶ˆæ¯ä¼ é€’çš„æˆæœ¬é€šå¸¸å¾ˆé«˜ã€‚ç›¸åï¼Œå¾ˆå¤šæ¶ˆæ¯ç»„ä»¶æ‰¿è¯ºè‡³å°‘ä¿è¯æˆåŠŸä¼ é€’ä¸€æ¬¡æ¶ˆæ¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ¶ˆæ¯ç»„ä»¶åªä¼šä¼ é€’ä¸€æ¬¡æ¶ˆæ¯ã€‚ä½†æ˜¯å½“å®¢æˆ·ç«¯ã€ç½‘ç»œæˆ–æ¶ˆæ¯ç»„ä»¶æ•…éšœå¯èƒ½å¯¼è‡´æ¶ˆæ¯è¢«å¤šæ¬¡ä¼ é€’ã€‚å‡è®¾å®¢æˆ·ç«¯åœ¨å¤„ç†æ¶ˆæ¯åå‘é€ç¡®è®¤æ¶ˆæ¯å‰ï¼Œä»–çš„æ•°æ®åº“å´©æºƒäº†ï¼Œè¿™æ—¶æ¶ˆæ¯ç»„ä»¶å°†å†æ¬¡å‘é€æœªç¡®è®¤çš„æ¶ˆæ¯ï¼Œåœ¨æ•°æ®åº“é‡æ–°å¯åŠ¨æ—¶å‘è¯¥å®¢æˆ·ç«¯å‘é€ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤„ç†é‡å¤æ¶ˆæ¯æœ‰ä»¥ä¸‹ä¸¤ç§ä¸åŒçš„æ–¹æ³•ï¼š&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;ç¼–å†™å¹‚ç­‰æ¶ˆæ¯å¤„ç†å™¨&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœåº”ç”¨ç¨‹åºå¤„ç†æ¶ˆæ¯çš„é€»è¾‘æ˜¯æ»¡è¶³å¹‚ç­‰çš„ï¼Œé‚£ä¹ˆé‡å¤æ¶ˆæ¯å°±æ˜¯æ— å®³çš„ã€‚ç¨‹åºçš„å¹‚ç­‰æ€§æ˜¯æŒ‡ï¼Œå³ä½¿è¿™ä¸ªåº”ç”¨è¢«ç›¸åŒè¾“å…¥å‚æ•°å¤šæ¬¡é‡å¤è°ƒç”¨æ—¶ï¼Œä¹Ÿä¸ä¼šäº§ç”Ÿé¢å¤–çš„æ•ˆæœã€‚ä¾‹å¦‚ï¼šå–æ¶ˆä¸€ä¸ªå·²ç»å–æ¶ˆçš„è®¢å•ï¼Œå°±æ˜¯ä¸€ä¸ªå¹‚ç­‰æ€§æ“ä½œã€‚åŒæ ·ï¼Œåˆ›å»ºä¸€ä¸ªå·²ç»å­˜åœ¨çš„è®¢å•æ“ä½œä¹Ÿå¿…æ˜¯è¿™æ ·ã€‚æ»¡è¶³å¹‚ç­‰çš„æ¶ˆæ¯å¤„ç†ç¨‹åºå¯ä»¥è¢«æ”¾å¿ƒçš„æ‰§è¡Œå¤šæ¬¡ï¼Œåªè¦æ¶ˆæ¯ç»„ä»¶åœ¨ä¼ é€’æ¶ˆæ¯æ—¶ä¿æŒç›¸åŒçš„æ¶ˆæ¯é¡ºåºã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯ä¸å¹¸çš„æ˜¯ï¼Œåº”ç”¨ç¨‹åºé€šå¸¸ä¸æ˜¯å¹‚ç­‰çš„ã€‚æˆ–è€…ä½ ç°åœ¨æ­£åœ¨ä½¿ç”¨çš„æ¶ˆæ¯ç»„ä»¶åœ¨é‡æ–°ä¼ é€’æ¶ˆæ¯æ—¶ä¸ä¼šä¿ç•™æ’åºã€‚é‡å¤æˆ–æ— åºæ¶ˆæ¯å¯èƒ½ä¼šå¯¼è‡´é”™è¯¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ éœ€è¦ç¼–å†™è·Ÿè¸ªæ¶ˆæ¯å¹¶ä¸¢å¼ƒé‡å¤æ¶ˆæ¯çš„æ¶ˆæ¯å¤„ç†ç¨‹åºã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;è·Ÿè¸ªæ¶ˆæ¯å¹¶ä¸¢å¼ƒé‡å¤æ¶ˆæ¯&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€ƒè™‘ä¸€ä¸ªæˆæƒæ¶ˆè´¹è€…ä¿¡ç”¨å¡çš„æ¶ˆæ¯å¤„ç†ç¨‹åºã€‚å®ƒå¿…é¡»ä¸ºæ¯ä¸ªè®¢å•ä»…æ‰§è¡Œä¸€æ¬¡ä¿¡ç”¨å¡æˆæƒæ“ä½œã€‚è¿™æ®µåº”ç”¨ç¨‹åºæ¯æ¬¡è°ƒç”¨æ—¶éƒ½ä¼šäº§ç”Ÿä¸åŒçš„æ•ˆæœã€‚å¦‚æœé‡å¤æ¶ˆæ¯å¯¼è‡´æ¶ˆæ¯å¤„ç†ç¨‹åºå¤šæ¬¡æ‰§è¡Œè¯¥é€»è¾‘ï¼Œåˆ™åº”ç”¨ç¨‹åºçš„è¡Œä¸ºå°†ä¸æ­£ç¡®ã€‚æ‰§è¡Œæ­¤ç±»åº”ç”¨ç¨‹åºé€»è¾‘çš„æ¶ˆæ¯å¤„ç†ç¨‹åºå¿…é¡»é€šè¿‡æ£€æµ‹å’Œä¸¢å¼ƒé‡å¤æ¶ˆæ¯è€Œè®©å®ƒæˆä¸ºå¹‚ç­‰çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆæ˜¯æ¶ˆæ¯æ¥æ”¶æ–¹ä½¿ç”¨ message id è·Ÿè¸ªä»–å·²å¤„ç†çš„æ¶ˆæ¯å¹¶ä¸¢å¼ƒä»»ä½•é‡å¤é¡¹ã€‚ä¾‹å¦‚ï¼Œåœ¨æ•°æ®åº“è¡¨ä¸­å­˜å‚¨å®ƒæ¶ˆè´¹çš„æ¯æ¡æ¶ˆæ¯çš„ message idã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.4696969696969697&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PxMzT0Oibf4iayMvgxttQ19lYM82uMqboNpJox7MnVRhzCk2DicL2Ak5ljIp4GCtESv4PTHqzGjm91xF152sFn29Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;792&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;br/&gt;å½“æ¥æ”¶æ–¹å¤„ç†æ¶ˆæ¯æ—¶ï¼Œå®ƒå°†æ¶ˆæ¯çš„ message id ä½œä¸ºåˆ›å»ºå’Œå˜æ›´ä¸šåŠ¡å®ä½“çš„äº‹åŠ¡çš„ä¸€éƒ¨åˆ†è®°å½•åœ¨æ•°æ®è¡¨é‡Œã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ¥æ”¶æ–¹å°†åŒ…å«message id çš„è¡Œæ’å…¥ PROCESSED_MESSAGEè¡¨ã€‚å¦‚æœæ¶ˆæ¯æ˜¯é‡å¤çš„ï¼Œåˆ™INSERTå°†å¤±è´¥ï¼Œæ¥æ”¶æ–¹å¯ä»¥é€‰æ‹©ä¸¢å¼ƒè¯¥æ¶ˆæ¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯æ¶ˆæ¯å¤„ç†ç¨‹åºåœ¨åº”ç”¨ç¨‹åºè¡¨ï¼Œè€Œä¸æ˜¯ä¸“é—¨è¡¨ä¸­è®°å½• message idã€‚å½“æ—¶ç”¨å…·æœ‰å—é™äº‹åŠ¡æ¨¡å‹çš„NoSQLæ•°æ®åº“æ—¶ï¼Œæ­¤æ–¹æ³•ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸º NoSQLæ•°æ®åº“é€šå¸¸ä¸æ”¯æŒå°†é’ˆå¯¹ä¸¤ä¸ªè¡¨çš„æ›´æ–°ä½œä¸ºæ•°æ®åº“äº‹åŠ¡ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å¤„ç†äº‹åŠ¡æ€§æ¶ˆæ¯&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœåŠ¡é€šå¸¸éœ€è¦åœ¨æ›´æ–°æ•°æ®åº“çš„äº‹åŠ¡ä¸­å‘å¸ƒæ¶ˆæ¯ï¼Œæ•°æ®åº“æ›´æ–°å’Œæ¶ˆæ¯å‘é€éƒ½å¿…é¡»åœ¨äº‹åŠ¡ä¸­è¿›è¡Œï¼Œå¦åˆ™æœåŠ¡å¯èƒ½ä¼šæ›´æ–°æ•°æ®åº“ç„¶ååœ¨å‘é€æ¶ˆæ¯ä¹‹å‰å´©æºƒã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæœåŠ¡ä¸ä»¥åŸå­æ–¹å¼æ‰§è¡Œè€…ä¸¤ä¸ªæ“ä½œï¼Œåˆ™ç±»ä¼¼çš„æ•…éšœå¯èƒ½ä½¿ç³»ç»Ÿå¤„äºä¸ä¸€è‡´çŠ¶æ€ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹å¸¸ç”¨çš„ä¿è¯äº‹åŠ¡æ¶ˆæ¯çš„ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼Œæœ€åå†çœ‹çœ‹ç°ä»£æ¶ˆæ¯ç»„ä»¶RocketMQçš„äº‹åŠ¡æ€§æ¶ˆæ¯è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;ä½¿ç”¨æ•°æ®åº“è¡¨ä½œä¸ºæ¶ˆæ¯é˜Ÿåˆ—&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœä½ çš„åº”ç”¨ç¨‹åºæ­£åœ¨ä½¿ç”¨å…³ç³»å‹æ•°æ®åº“ï¼Œè¦ä¿è¯æ•°æ®çš„æ›´æ–°å’Œæ¶ˆæ¯å‘é€ä¹‹é—´çš„äº‹åŠ¡å¯ä»¥ç›´æ¥ä½¿ç”¨Â &lt;strong&gt;äº‹åŠ¡æ€§å‘ä»¶ç®±æ¨¡å¼ï¼ŒTransactional Outbox&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5447530864197531&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PxMzT0Oibf4iayMvgxttQ19lYM82uMqboNUn8CpCOO9P5PqUp4JMuTwYPlKShzlP5BRUHcib6o4YOo0GnlaLWcLUA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;648&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;br/&gt;æ­¤æ¨¡å¼ä½¿ç”¨æ•°æ®åº“è¡¨ä½œä¸ºä¸´æ—¶æ¶ˆæ¯é˜Ÿåˆ—ã€‚å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå‘é€æ¶ˆæ¯çš„æœåŠ¡æœ‰ä¸ªOUTBOXæ•°æ®è¡¨ï¼Œåœ¨è¿›è¡ŒINSERTã€UPDATEã€DELETE ä¸šåŠ¡æ“ä½œæ—¶ä¹Ÿä¼šç»™OUTBOXæ•°æ®è¡¨INSERTä¸€æ¡æ¶ˆæ¯è®°å½•ï¼Œè¿™æ ·å¯ä»¥ä¿è¯åŸå­æ€§ï¼Œå› ä¸ºè¿™æ˜¯åŸºäºæœ¬åœ°çš„ACIDäº‹åŠ¡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;OUTBOXè¡¨å……å½“ä¸´æ—¶æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç„¶åæˆ‘ä»¬åœ¨å¼•å…¥ä¸€ä¸ªæ¶ˆæ¯ä¸­ç»§ï¼ˆMessageRelayï¼‰çš„æœåŠ¡ï¼Œç”±ä»–ä»OUTBOXè¡¨ä¸­è¯»å–æ•°æ®å¹¶å‘å¸ƒæ¶ˆæ¯åˆ°æ¶ˆæ¯ç»„ä»¶ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¶ˆæ¯ä¸­ç»§çš„å®ç°å¯ä»¥å¾ˆç®€å•ï¼Œåªéœ€è¦é€šè¿‡å®šæ—¶ä»»åŠ¡å®šæœŸä»OUTBOXè¡¨ä¸­æ‹‰å–æœ€æ–°æœªå‘å¸ƒçš„æ•°æ®ï¼Œè·å–åˆ°æ•°æ®åå°†æ•°æ®å‘é€ç»™æ¶ˆæ¯ç»„ä»¶ï¼Œæœ€åå°†å®Œæˆå‘é€çš„æ¶ˆæ¯ä»OUTBOXè¡¨ä¸­åˆ é™¤å³å¯ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;ä½¿ç”¨äº‹åŠ¡æ—¥å¿—å‘å¸ƒäº‹ä»¶&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦å¤–ä¸€ç§ä¿è¯äº‹åŠ¡æ€§æ¶ˆæ¯çš„æ–¹å¼æ˜¯åŸºäºæ•°æ®åº“çš„äº‹åŠ¡æ—¥å¿—ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„æ•°æ®å˜æ›´æ•è·ï¼ŒChange Data Captureï¼Œç®€ç§°CDCã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸€èˆ¬æ•°æ®åº“åœ¨æ•°æ®å‘ç”Ÿå˜æ›´çš„æ—¶å€™éƒ½ä¼šè®°å½•äº‹åŠ¡æ—¥å¿—ï¼ˆTransaction Logï¼‰ï¼Œæ¯”å¦‚MySQLçš„binlogã€‚äº‹åŠ¡æ—¥å¿—å¯ä»¥ç®€å•çš„ç†è§£æˆæ•°æ®åº“æœ¬åœ°çš„ä¸€ä¸ªæ–‡ä»¶é˜Ÿåˆ—ï¼Œå®ƒä¸»è¦è®°å½•æŒ‰æ—¶é—´é¡ºåºå‘ç”Ÿçš„æ•°æ®åº“è¡¨å˜æ›´è®°å½•ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œæˆ‘ä»¬åˆ©ç”¨alibabaå¼€æºçš„ç»„ä»¶canalç»“åˆMySQLæ¥è¯´æ˜ä¸‹è¿™ç§æ¨¡å¼çš„å·¥ä½œåŸç†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ›´å¤šæ“ä½œè¯´æ˜å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://github.com/alibaba/canal&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;canalå·¥ä½œåŸç†&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;canal æ¨¡æ‹Ÿ MySQL slave çš„äº¤äº’åè®®ï¼ŒæŠŠè‡ªå·±ä¼ªè£…æˆä¸€ä¸ªMySQLçš„ slaveèŠ‚ç‚¹ ï¼Œå‘ MySQL master å‘é€dump åè®®ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;MySQL master æ”¶åˆ° dump è¯·æ±‚ï¼Œå¼€å§‹æ¨é€ binary log ç»™ slave (å³ canal )ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;canal è§£æ binary log å¯¹è±¡(åŸå§‹ä¸º byte æµ)ï¼Œç„¶åå¯ä»¥å°†è§£æåçš„æ•°æ®ç›´æ¥å‘é€ç»™æ¶ˆæ¯ç»„ä»¶ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;RocketMQäº‹åŠ¡æ¶ˆæ¯è§£å†³æ–¹æ¡ˆ&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Apache RocketMQåœ¨4.3.0ç‰ˆä¸­å·²ç»æ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡æ¶ˆæ¯ï¼ŒRocketMQé‡‡ç”¨äº†2PCçš„æ€æƒ³æ¥å®ç°äº†æäº¤äº‹åŠ¡æ¶ˆæ¯ï¼ŒåŒæ—¶å¢åŠ ä¸€ä¸ªè¡¥å¿é€»è¾‘æ¥å¤„ç†äºŒé˜¶æ®µè¶…æ—¶æˆ–è€…å¤±è´¥çš„æ¶ˆæ¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.4503464203233256&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/PxMzT0Oibf4iayMvgxttQ19lYM82uMqboNJI9MzqA4yvCR4mVs8XK1iaDb3Suu7dYSSZ3YiaeWumtauAjRXTQIbN7Q/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;866&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;br/&gt;RocketMQå®ç°äº‹åŠ¡æ¶ˆæ¯ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šæ­£å¸¸äº‹åŠ¡çš„å‘é€åŠæäº¤ã€äº‹åŠ¡ä¿¡æ¯çš„è¡¥å¿æµç¨‹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ•´ä½“æµç¨‹ä¸ºï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;æ­£å¸¸äº‹åŠ¡å‘é€ä¸æäº¤é˜¶æ®µ&lt;br/&gt;1ã€ç”Ÿäº§è€…å‘é€ä¸€ä¸ªåŠæ¶ˆæ¯ç»™MQServerï¼ˆåŠæ¶ˆæ¯æ˜¯æŒ‡æ¶ˆè´¹è€…æš‚æ—¶ä¸èƒ½æ¶ˆè´¹çš„æ¶ˆæ¯ï¼‰&lt;br/&gt;2ã€æœåŠ¡ç«¯å“åº”æ¶ˆæ¯å†™å…¥ç»“æœï¼ŒåŠæ¶ˆæ¯å‘é€æˆåŠŸ&lt;br/&gt;3ã€å¼€å§‹æ‰§è¡Œæœ¬åœ°äº‹åŠ¡&lt;br/&gt;4ã€æ ¹æ®æœ¬åœ°äº‹åŠ¡çš„æ‰§è¡ŒçŠ¶æ€æ‰§è¡ŒCommitæˆ–è€…Rollbackæ“ä½œ&lt;br/&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;äº‹åŠ¡ä¿¡æ¯çš„è¡¥å¿æµç¨‹&lt;br/&gt;1ã€å¦‚æœMQServeré•¿æ—¶é—´æ²¡æ”¶åˆ°æœ¬åœ°äº‹åŠ¡çš„æ‰§è¡ŒçŠ¶æ€ä¼šå‘ç”Ÿäº§è€…å‘èµ·ä¸€ä¸ªç¡®è®¤å›æŸ¥çš„æ“ä½œè¯·æ±‚&lt;br/&gt;2ã€ç”Ÿäº§è€…æ”¶åˆ°ç¡®è®¤å›æŸ¥è¯·æ±‚åï¼Œæ£€æŸ¥æœ¬åœ°äº‹åŠ¡çš„æ‰§è¡ŒçŠ¶æ€&lt;br/&gt;3ã€æ ¹æ®æ£€æŸ¥åçš„ç»“æœæ‰§è¡ŒCommitæˆ–è€…Rollbackæ“ä½œ
è¡¥å¿é˜¶æ®µä¸»è¦æ˜¯ç”¨äºè§£å†³ç”Ÿäº§è€…åœ¨å‘é€Commitæˆ–è€…Rollbackæ“ä½œæ—¶å‘ç”Ÿè¶…æ—¶æˆ–å¤±è´¥çš„æƒ…å†µã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ç”Ÿäº§è€…ä½¿ç”¨RocketMQå‘é€äº‹åŠ¡æ¶ˆæ¯çš„æ—¶å€™æˆ‘ä»¬ä¹Ÿä¼šå€Ÿé‰´ç¬¬ä¸€ç§æ–¹æ¡ˆå³è‡ªå»ºä¸€å¼ äº‹åŠ¡æ—¥å¿—è¡¨ï¼Œç„¶ååœ¨æ‰§è¡Œæœ¬åœ°äº‹åŠ¡çš„æ—¶å€™åŒæ—¶ç”Ÿæˆä¸€æ¡äº‹åŠ¡æ—¥å¿—è®°å½•ï¼Œè®©æœ¬åœ°äº‹åŠ¡ä¸æ—¥å¿—äº‹åŠ¡åœ¨åŒä¸€ä¸ªæ–¹æ³•ä¸­ï¼ŒåŒæ—¶æ·»åŠ  &lt;code&gt;@Transactional&lt;/code&gt; æ³¨è§£ï¼Œä¿è¯ä¸¤ä¸ªæ“ä½œäº‹åŠ¡æ˜¯ä¸€ä¸ªåŸå­æ“ä½œã€‚&lt;strong&gt;è¿™æ ·å¦‚æœäº‹åŠ¡æ—¥å¿—è¡¨ä¸­æœ‰è¿™ä¸ªæœ¬åœ°äº‹åŠ¡çš„ä¿¡æ¯ï¼Œé‚£å°±ä»£è¡¨æœ¬åœ°äº‹åŠ¡æ‰§è¡ŒæˆåŠŸï¼Œéœ€è¦Commitï¼Œç›¸åå¦‚æœæ²¡æœ‰å¯¹åº”çš„äº‹åŠ¡æ—¥å¿—ï¼Œåˆ™è¡¨ç¤ºæ²¡æ‰§è¡ŒæˆåŠŸï¼Œéœ€è¦Rollbackã€‚&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>b5cf4a3d57d8002a83f6982985193714</guid>
<title>Kafka ä¸ºä»€ä¹ˆè¦æŠ›å¼ƒ ZooKeeperï¼Ÿ</title>
<link>https://toutiao.io/k/bbulcom</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½ å¥½ï¼Œæˆ‘æ˜¯ yesã€‚ï¼ˆå…ˆè¯´ä¸‹å“ˆï¼Œä»Šå¤©æ–‡æœ«é€ä¸‰æœ¬ç¡¬æ ¸çš„ä¹¦ï¼&lt;span&gt;ï¼‰&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ä¸Šä¸ªæœˆ 30 å·ï¼Œ confluent å‘å¸ƒäº†ä¸€ç¯‡æ–‡ç« ï¼Œæ–‡ç« ä¸Šè¯´åœ¨ Kafka 2.8 ç‰ˆæœ¬ä¸Šå°†æ”¯æŒå†…éƒ¨çš„ quorum æœåŠ¡æ¥æ›¿æ¢ ZooKeeper çš„å·¥ä½œã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.3561320754716981&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCs7kBPMYcm38xMC3e1qtKMeFoLAL7ab1ZLNzRDZTwBe5O7LibbAdLaZQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;848&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶å®å»å¹´æˆ‘å†™çš„&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzkxNTE3NjQ3MA==&amp;amp;mid=2247485752&amp;amp;idx=1&amp;amp;sn=53ae862abc0eddaf21a3e628706e0a67&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;Kafkaæ§åˆ¶å™¨äº‹ä»¶å¤„ç†å…¨æµç¨‹&lt;/a&gt;è¿™ç¯‡æ–‡ç« å·²ç»æåˆ°è¿™ä¸€ç‚¹ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.3298662704309064&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCjWtLiaoxXdBo70B8TfSJO7C28dwtmkgOJjfs8w3icGyh3NTABsr2Qqmg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;673&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»Šå¤©å†ç¨å¾®å±•å¼€æ¥è¯´è¯´ã€‚&lt;/p&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ZooKeeper çš„ä½œç”¨&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ZooKeeper æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼åè°ƒæœåŠ¡æ¡†æ¶ï¼Œä½ ä¹Ÿå¯ä»¥è®¤ä¸ºå®ƒæ˜¯ä¸€ä¸ªå¯ä»¥ä¿è¯ä¸€è‡´æ€§çš„åˆ†å¸ƒå¼(å°é‡)å­˜å‚¨ç³»ç»Ÿã€‚ç‰¹åˆ«é€‚åˆå­˜å‚¨ä¸€äº›å…¬å…±çš„é…ç½®ä¿¡æ¯ã€é›†ç¾¤çš„ä¸€äº›å…ƒæ•°æ®ç­‰ç­‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ƒæœ‰æŒä¹…èŠ‚ç‚¹å’Œä¸´æ—¶èŠ‚ç‚¹ï¼Œè€Œä¸´æ—¶èŠ‚ç‚¹è¿™ä¸ªç©æ„å†é…åˆ Watcher æœºåˆ¶å°±å¾ˆæœ‰ç”¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹çš„å®¢æˆ·ç«¯ä¸ ZooKeeper æ–­è¿ä¹‹åï¼Œè¿™ä¸ªä¸´æ—¶èŠ‚ç‚¹å°±ä¼šæ¶ˆå¤±ï¼Œå¹¶ä¸”è®¢é˜…äº†èŠ‚ç‚¹çŠ¶æ€å˜æ›´çš„å®¢æˆ·ç«¯ä¼šæ”¶åˆ°è¿™ä¸ªèŠ‚ç‚¹çŠ¶æ€å˜æ›´çš„é€šçŸ¥ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.6635416666666667&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCC5a3JaxhWJZ5sOcjd2JiaZtuZzBvzpXkBC7jBkFyLPSTTPxVFwtEDGQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;960&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥é›†ç¾¤ä¸­æŸä¸€æœåŠ¡ä¸Šçº¿æˆ–è€…ä¸‹çº¿ï¼Œéƒ½å¯ä»¥è¢«æ£€æµ‹åˆ°ã€‚å› æ­¤å¯ä»¥ç”¨æ¥å®ç°æœåŠ¡å‘ç°ï¼Œä¹Ÿå¯ä»¥å®ç°æ•…éšœè½¬ç§»çš„ç›‘å¬æœºåˆ¶ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Kafka å°±æ˜¯å¼ºä¾èµ–äº ZooKeeperï¼Œæ²¡æœ‰ ZooKeeper çš„è¯ Kafka éƒ½æ— æ³•è¿è¡Œã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ZooKeeper ä¸º Kafka æä¾›äº†å…ƒæ•°æ®çš„ç®¡ç†ï¼Œä¾‹å¦‚ä¸€äº› Broker çš„ä¿¡æ¯ã€ä¸»é¢˜æ•°æ®ã€åˆ†åŒºæ•°æ®ç­‰ç­‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æ¯ä¸ª Broker å¯åŠ¨çš„æ—¶å€™ï¼Œéƒ½ä¼šå’Œ ZooKeeper è¿›è¡Œäº¤äº’ï¼Œè¿™æ · ZooKeeper å°±å­˜å‚¨äº†é›†ç¾¤ä¸­æ‰€æœ‰çš„ä¸»é¢˜ã€é…ç½®ã€å‰¯æœ¬ç­‰ä¿¡æ¯ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.58397365532382&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCFwfPMXfqe0u0K8NdTDK8e78XHcSWwxR6H8hQBgDicLleNDmoUAuwLaQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;911&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿˜æœ‰ä¸€äº›é€‰ä¸¾ã€æ‰©å®¹ç­‰æœºåˆ¶ä¹Ÿéƒ½ä¾èµ– ZooKeeper ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¾‹å¦‚æ§åˆ¶å™¨çš„é€‰ä¸¾ï¼šæ¯ä¸ª Broker å¯åŠ¨éƒ½ä¼šå°è¯•åœ¨ ZooKeeper æ³¨å†Œ&lt;code&gt;/controller&lt;/code&gt;ä¸´æ—¶èŠ‚ç‚¹æ¥ç«é€‰æ§åˆ¶å™¨ï¼Œç¬¬ä¸€ä¸ªåˆ›å»º&lt;code&gt;/controller&lt;/code&gt;èŠ‚ç‚¹çš„ Broker ä¼šè¢«æŒ‡å®šä¸ºæ§åˆ¶å™¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç«äº‰å¤±è´¥çš„èŠ‚ç‚¹ä¹Ÿä¼šä¾èµ– watcher æœºåˆ¶ï¼Œç›‘å¬è¿™ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœæ§åˆ¶å™¨å®•æœºäº†ï¼Œé‚£ä¹ˆå…¶å®ƒ Broker ä¼šç»§ç»­æ¥äº‰æŠ¢ï¼Œå®ç°æ§åˆ¶å™¨çš„ failoverã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»ä¸Šé¢å°±å¯ä»¥å¾—çŸ¥ ZooKeeper å¯¹ Kafka æ¥è¯´ï¼Œ&lt;span&gt;å¾ˆé‡è¦&lt;/span&gt;ã€‚&lt;/p&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;é‚£ä¸ºä»€ä¹ˆè¦æŠ›å¼ƒ ZooKeeper&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è½¯ä»¶æ¶æ„éƒ½æ˜¯æ¼”è¿›çš„ï¼Œä¹‹æ‰€ä»¥è¦å˜æ›´é‚£è‚¯å®šæ˜¯å› ä¸ºå‡ºç°äº†ç“¶é¢ˆã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å…ˆæ¥çœ‹çœ‹è¿ç»´çš„å±‚é¢çš„é—®é¢˜ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é¦–å…ˆèº«ä¸ºä¸€ä¸ªä¸­é—´ä»¶ï¼Œéœ€è¦ä¾èµ–å¦ä¸€ä¸ªä¸­é—´ä»¶ï¼Œè¿™å°±æ„Ÿè§‰æœ‰ç‚¹å¥‡æ€ªã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½ è¦è¯´ä¾èµ– Netty è¿™ç§ï¼Œé‚£è‚¯å®šæ˜¯æ²¡é—®é¢˜çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯ Kafka çš„è¿è¡Œéœ€è¦æä¾› ZooKeeper é›†ç¾¤ï¼Œè¿™å…¶å®æœ‰ç‚¹æ€ªæ€ªçš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°±ç­‰äºå¦‚æœä½ å…¬å¸è¦ä¸Š Kafka å°±å¾—è·Ÿç€ä¸Š ZooKeeper ï¼Œè¢«åŠ¨äº†å¢åŠ äº†è¿ç»´çš„å¤æ‚åº¦ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¥½æ¯”ä½ å»å•†åœºä¹°è¡£æœï¼Œè¦ä¹°ä¸ªä¸Šè¡£ï¼ŒæœåŠ¡å‘˜è¯´ä¸å•å–ï¼Œè¦ä¹°å°±å¾—ä¹°ä¸€å¥—ï¼Œè¿™é’±æ˜¯ä¸æ˜¯å¤šèŠ±äº†ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥è¿ç»´äººå‘˜ä¸ä»…å¾—ç…§é¡¾ Kafka é›†ç¾¤ï¼Œè¿˜å¾—ç…§é¡¾ ZooKeeper é›†ç¾¤ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å†çœ‹æ€§èƒ½å±‚é¢çš„é—®é¢˜ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ZooKeeper æœ‰ä¸ªç‰¹ç‚¹ï¼Œ&lt;span&gt;å¼ºä¸€è‡´æ€§&lt;/span&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœ ZooKeeper é›†ç¾¤çš„æŸä¸ªèŠ‚ç‚¹çš„æ•°æ®å‘ç”Ÿå˜æ›´ï¼Œåˆ™ä¼šé€šçŸ¥å…¶å®ƒ ZooKeeper èŠ‚ç‚¹åŒæ—¶æ‰§è¡Œæ›´æ–°ï¼Œå°±å¾—ç­‰ç€å¤§å®¶(è¶…è¿‡åŠæ•°)éƒ½å†™å®Œäº†æ‰è¡Œï¼Œè¿™å†™å…¥çš„æ€§èƒ½å°±æ¯”è¾ƒå·®äº†ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.43358395989974935&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCcJiaTXWI5FAv27Y4ybEP92Hl5pIKPMRojObf7uicxbwb0WcBQpDjiaWvg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;798&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç„¶åçœ‹åˆ°ä¸Šé¢æˆ‘è¯´çš„&lt;span&gt;å°é‡&lt;/span&gt;å­˜å‚¨ç³»ç»Ÿäº†å§ï¼Œä¸€èˆ¬è€Œè¨€ï¼ŒZooKeeper åªé€‚ç”¨äºå­˜å‚¨ä¸€äº›ç®€å•çš„é…ç½®æˆ–è€…æ˜¯é›†ç¾¤çš„å…ƒæ•°æ®ï¼Œä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„å­˜å‚¨ç³»ç»Ÿã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœå†™å…¥çš„æ•°æ®é‡è¿‡å¤§ï¼ŒZooKeeper çš„æ€§èƒ½å’Œç¨³å®šæ€§å°±ä¼šä¸‹é™ï¼Œå¯èƒ½å¯¼è‡´ Watch çš„å»¶æ—¶æˆ–ä¸¢å¤±ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥åœ¨ Kafka é›†ç¾¤æ¯”è¾ƒå¤§ï¼Œåˆ†åŒºæ•°å¾ˆå¤šçš„æ—¶å€™ï¼ŒZooKeeper å­˜å‚¨çš„å…ƒæ•°æ®å°±ä¼šå¾ˆå¤šï¼Œæ€§èƒ½å°±å·®äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿˜æœ‰ï¼ŒZooKeeper ä¹Ÿæ˜¯åˆ†å¸ƒå¼çš„ï¼Œä¹Ÿéœ€è¦é€‰ä¸¾ï¼Œå®ƒçš„é€‰ä¸¾ä¹Ÿä¸å¿«ï¼Œè€Œä¸”å‘ç”Ÿé€‰ä¸¾çš„é‚£æ®µæ—¶å€™æ˜¯ä¸æä¾›æœåŠ¡çš„ï¼&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;åŸºäº ZooKeeper çš„æ€§èƒ½é—®é¢˜ Kafka ä¹‹å‰å°±åšäº†ä¸€äº›å‡çº§ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¾‹å¦‚ä»¥å‰ Consumer çš„ä½ç§»æ•°æ®æ˜¯ä¿å­˜åœ¨ ZooKeeper ä¸Šçš„ï¼Œæ‰€ä»¥å½“æäº¤ä½ç§»æˆ–è€…è·å–ä½ç§»çš„æ—¶å€™éƒ½éœ€è¦è®¿é—® ZooKeeper ï¼Œè¿™é‡ä¸€å¤§ ZooKeeper å°±é¡¶ä¸ä½ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥åé¢å¼•å…¥äº†ä½ç§»ä¸»é¢˜(Topicæ˜¯__consumer_offsets)ï¼Œå°†ä½ç§»çš„æäº¤å’Œè·å–å½“åšæ¶ˆæ¯ä¸€æ ·æ¥å¤„ç†ï¼Œå­˜å‚¨åœ¨æ—¥å¿—ä¸­ï¼Œé¿å…äº†é¢‘ç¹è®¿é—® ZooKeeper æ€§èƒ½å·®çš„é—®é¢˜ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿˜æœ‰åƒä¸€äº›å¤§å…¬å¸ï¼Œå¯èƒ½è¦æ”¯æŒç™¾ä¸‡åˆ†åŒºçº§åˆ«ï¼Œè¿™ç›®å‰çš„ Kafka å•é›†ç¾¤æ¶æ„ä¸‹æ˜¯æ— æ³•æ”¯æŒç¨³å®šè¿è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯ç›®å‰å•é›†ç¾¤å¯ä»¥æ‰¿è½½çš„åˆ†åŒºæ•°æœ‰é™ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ Kafka éœ€è¦å» ZooKeeper ã€‚&lt;/p&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ‰€ä»¥æ²¡äº† Zookeeper ä¹‹åçš„ Kafka çš„æ€æ ·çš„ï¼Ÿ&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ²¡äº† Zookeeper çš„ Kafka &lt;span&gt;å°±&lt;/span&gt;æŠŠå…ƒæ•°æ®å­˜å‚¨åˆ°è‡ªå·±å†…éƒ¨äº†ï¼Œåˆ©ç”¨ä¹‹å‰çš„ Log å­˜å‚¨æœºåˆ¶æ¥ä¿å­˜å…ƒæ•°æ®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°±å’Œä¸Šé¢è¯´åˆ°çš„ä½ç§»ä¸»é¢˜ä¸€æ ·ï¼Œä¼šæœ‰ä¸€ä¸ªå…ƒæ•°æ®ä¸»é¢˜ï¼Œå…ƒæ•°æ®ä¼šåƒæ™®é€šæ¶ˆæ¯ä¸€æ ·ä¿å­˜åœ¨ Log ä¸­ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥å…ƒæ•°æ®å’Œä¹‹å‰çš„ä½ç§»ä¸€æ ·ï¼Œåˆ©ç”¨ç°æœ‰çš„æ¶ˆæ¯å­˜å‚¨æœºåˆ¶ç¨åŠ æ”¹é€ æ¥å®ç°äº†åŠŸèƒ½ï¼Œå®Œç¾ï¼&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç„¶åè¿˜æäº†ä¸ª KRaft æ¥å®ç° Controller Quorumã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.4740740740740741&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eSdk75TK4nHQJOTMnuMpLPx77KCicwSYCRnHmuO1ia5O5QWaPzvfIk41j4gAaA0AazMGicyJJqLzq3CXhHvJCZ4UQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;675&quot;/&gt;&lt;figcaption&gt;å›¾æ¥è‡ª confluent&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªåè®®æ˜¯åŸºäº Raft çš„ï¼Œåè®®å…·ä½“å°±ä¸å±•å¼€äº†ï¼Œå°±ç†è§£ä¸ºå®ƒèƒ½è§£å†³ Controller Â Leader çš„é€‰ä¸¾ï¼Œå¹¶ä¸”è®©æ‰€æœ‰èŠ‚ç‚¹è¾¾æˆå…±è¯†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ä¹‹å‰åŸºäº Zookeeper å®ç°çš„&lt;span&gt;å•ä¸ª&lt;/span&gt; Controller åœ¨åˆ†åŒºæ•°å¤ªå¤§çš„æ—¶å€™è¿˜æœ‰ä¸ªé—®é¢˜ï¼Œæ•…éšœè½¬ç§»å¤ªæ…¢äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ Controller å˜æ›´çš„æ—¶å€™ï¼Œéœ€è¦é‡æ–°åŠ è½½æ‰€æœ‰çš„å…ƒæ•°æ®åˆ°æ–°çš„ Controller èº«ä¸Šï¼Œå¹¶ä¸”éœ€è¦æŠŠè¿™äº›å…ƒæ•°æ®åŒæ­¥ç»™é›†ç¾¤å†…çš„æ‰€æœ‰ Brokerã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€Œ Controller Quorum ä¸­çš„ Leader é€‰ä¸¾åˆ‡æ¢åˆ™å¾ˆå¿«ï¼Œå› ä¸ºå…ƒæ•°æ®éƒ½å·²ç»åœ¨ quorum ä¸­åŒæ­¥äº†ï¼Œä¹Ÿå°±æ˜¯ quorum çš„ Broker éƒ½å·²ç»æœ‰å…¨éƒ¨äº†å…ƒæ•°æ®ï¼Œæ‰€ä»¥ä¸éœ€è¦é‡æ–°åŠ è½½å…ƒæ•°æ®ï¼&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¹¶ä¸”å…¶å®ƒ Broker å·²ç»åŸºäº Log å­˜å‚¨äº†ä¸€äº›å…ƒæ•°æ®ï¼Œæ‰€ä»¥åªéœ€è¦å¢é‡æ›´æ–°å³å¯ï¼Œä¸éœ€è¦å…¨é‡äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ³¢æ”¹é€ ä¸‹æ¥å°±è§£å†³äº†ä¹‹å‰å…ƒæ•°æ®è¿‡å¤šçš„é—®é¢˜ï¼Œå¯ä»¥æ”¯æŒæ›´å¤šçš„åˆ†åŒºï¼&lt;/p&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æœ€å&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯èƒ½çœ‹åˆ°è¿™é‡Œæœ‰äººä¼šè¯´ï¼Œé‚£ä¸ºä½•ä¸€å¼€å§‹ä¸è¿™ä¹ˆå®ç°ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å› ä¸º ZooKeeper æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”ç»è¿‡éªŒè¯çš„å·¥å…·ï¼Œåœ¨æ—©æœŸåˆ©ç”¨å®ƒæ¥å®ç°ä¸€äº›åŠŸèƒ½ï¼Œå¤šç®€å•å“Ÿï¼Œéƒ½ä¸éœ€è¦è‡ªå·±å®ç°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¦ä¸æ˜¯ ZooKeeper çš„æœºåˆ¶å¯¼è‡´äº†è¿™ä¸ªç“¶é¢ˆï¼Œä¹Ÿä¸å¯èƒ½ä¼šæœ‰è¿™ä¸ªæ”¹é€ çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è½¯ä»¶å°±æ˜¯è¿™æ ·ï¼Œæ²¡å¿…è¦é‡å¤é€ è½®å­ï¼Œåˆé€‚å°±å¥½ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‚è€ƒèµ„æ–™ï¼š&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;em&gt;https://www.confluent.io/blog/kafka-without-zookeeper-a-sneakpeek/&lt;/em&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;em&gt;https://time.geekbang.org/column/article/253202&lt;/em&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;em&gt;https://www.infoq.cn/article/PHF3gFjUTDhWmctg6kXe&lt;/em&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;hr data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¥½äº†ï¼Œä»Šå¤©é€çš„ä¹¦æ˜¯ã€Šæ·±å…¥è§£æJavaè™šæ‹ŸæœºHotSpotã€‹ï¼Œçœ‹åå­—æ˜¯ä¸æ˜¯å°±å¾ˆç¡¬æ ¸ï¼Ÿ&lt;/p&gt;&lt;section&gt;&lt;mpcps frameborder=&quot;0&quot; class=&quot;js_editor_cps&quot; data-datakey=&quot;1618841465330_0.05325699300929054&quot; data-uid=&quot;1618841465328&quot; data-type=&quot;1&quot; data-product=&quot;&quot; data-templateid=&quot;list&quot; data-pid=&quot;29177012&quot; data-categoryid=&quot;3&quot; data-appuin=&quot;3084391334&quot;/&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯¥ä¹¦ä»¥æºç åˆ†æä¸ºåŸºç¡€ï¼Œä»è¿è¡Œæ—¶ã€åƒåœ¾å›æ”¶å™¨ã€å³æ—¶ç¼–è¯‘ä¸‰ä¸ªç»´åº¦å…¨é¢è§£æÂ &lt;span&gt;HotSpot&lt;/span&gt; VMÂ çš„åº•å±‚å®ç°å’Œå·¥ä½œæœºåˆ¶~&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ¬¡æˆ‘å’Œåç« åˆä½œï¼Œé€&lt;span&gt;ä¸‰æœ¬&lt;/span&gt;å“Ÿï¼&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç•™è¨€ç‚¹èµæœ€é«˜çš„å‰ä¸¤å&lt;/span&gt;å„å¾—ä¸€æœ¬ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ‹å‹åœˆåˆ°æ—¶å€™æŠ½ä¸€æœ¬&lt;/span&gt;ï¼ŒåŠ æˆ‘å¾®ä¿¡å¥½å‹å³å¯ï¼šyes_oba&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4æœˆ22å·æ™šä¸Š20ç‚¹æ•´æˆªæ­¢&lt;/span&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äº†æƒ³è¦ä¹°ä¹¦çš„è¯è®°å¾—ç”¨æˆ‘æ¨æ–‡çš„å½“å½“ä¼˜æƒ ç ï¼Œè§æ¨æ–‡æ¬¡æ¡ã€‚&lt;/p&gt;&lt;hr/&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æˆ‘æ˜¯ yesï¼Œä»ä¸€ç‚¹ç‚¹åˆ°äº¿ç‚¹ç‚¹ï¼Œæˆ‘ä»¬ä¸‹ç¯‡è§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>20433318b4e1792954ef3d88004ff997</guid>
<title>å­—èŠ‚è·³åŠ¨å¼‚æ„åœºæ™¯ä¸‹çš„é«˜å¯ç”¨å»ºè®¾å®è·µ</title>
<link>https://toutiao.io/k/jwzcso7</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;section data-mpa-template=&quot;t&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;section data-mpa-category=&quot;æ¨¡æ¿&quot; data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;ç‚¹å‡»ä¸Šæ–¹ğŸ‘†&lt;span data-mid=&quot;&quot;&gt;è“å­—&lt;/span&gt;å…³æ³¨æˆ‘ä»¬ï¼&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-backh=&quot;161&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.2777777777777778&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/fgbJnuXT4EpMWYL57q1A4NBibz06jylFkOZkW3LWp3dIYj2dPb4WE5IYibpPqOkicloJw4ro84599blfDbiaaSYkUg/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;648&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot;&gt;&lt;section label=&quot;powered by 135editor.com&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;å­—èŠ‚è·³åŠ¨æœ‰ä¼—å¤šçš„ APP å’ŒæœåŠ¡ï¼Œå¦‚ä½•ç”¨æ··æ²Œå·¥ç¨‹çš„æ–¹å¼ä¿è¯è¿™äº›ç³»ç»Ÿå’ŒæœåŠ¡çš„é«˜å¯ç”¨ï¼Ÿæœ¬æ–‡è¯¦ç»†ä»‹ç»äº†å­—èŠ‚è·³åŠ¨æ··æ²Œå·¥ç¨‹æŠ€æœ¯çš„æ¼”è¿›å’Œç³»ç»Ÿé«˜å¯ç”¨å»ºè®¾å®è·µã€‚&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section&gt;&lt;span&gt;ä½œè€…ï½œé‚µè‚²äº®ï¼ŒåŸºç¡€æ¶æ„å›¢é˜Ÿç³»ç»Ÿæ²»ç†æ–¹å‘è´Ÿè´£äºº&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;æœ¬æ–‡ä¸»è¦ä¸ºå¤§å®¶ä»‹ç»å­—èŠ‚è·³åŠ¨åœ¨é«˜å¯ç”¨å»ºè®¾ä¸Šçš„ä¸€äº›æ€è€ƒå’Œè½åœ°ç»éªŒã€‚å…ˆç»™å¤§å®¶ç®€å•ä»‹ç»ä¸€ä¸‹ç³»ç»Ÿæ²»ç†å›¢é˜Ÿæ˜¯åšä»€ä¹ˆçš„ã€‚ç³»ç»Ÿæ²»ç†å›¢é˜Ÿåœ¨åŸºç¡€æ¶æ„å›¢é˜Ÿå†…éƒ¨ï¼Œä¸»è¦è´Ÿè´£å­—èŠ‚è·³åŠ¨&lt;strong&gt;ç ”å‘çš„é—­ç¯ç”Ÿæ€&lt;/strong&gt;ï¼šä»æœåŠ¡å¼€å‘ï¼Œåˆ°å¤§è§„æ¨¡å¾®æœåŠ¡æ¶æ„ä¸‹çš„è”è°ƒã€å¼€å‘ä»¥åŠå¯¹åº”çš„å‘å¸ƒï¼Œå†åˆ°ä¸Šçº¿ä»¥åçš„å¾®æœåŠ¡æ²»ç†ã€å¯¹åº”çš„æµé‡è°ƒåº¦ã€å®¹é‡åˆ†æï¼Œä»¥åŠåˆ°æœ€åé€šè¿‡æ··æ²Œå·¥ç¨‹çš„å»ºè®¾å¸®åŠ©ä¸šåŠ¡æå‡é«˜å¯ç”¨èƒ½åŠ›ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;æ¥ä¸‹æ¥å°±è¿›å…¥æ­£é¢˜ã€‚é¦–å…ˆä»‹ç»ä¸€ä¸‹å­—èŠ‚è·³åŠ¨æ··æ²Œå·¥ç¨‹å»ºè®¾çš„èƒŒæ™¯ã€‚å¤§å®¶çŸ¥é“å­—èŠ‚è·³åŠ¨æœ‰å¾ˆå¤š APPï¼Œæˆ‘ä»¬æœ‰éå¸¸å¤šçš„æœåŠ¡ï¼Œè¿™äº›æœåŠ¡å¤§è‡´å¯ä»¥åˆ†æˆä¸‰ä¸ªç±»å‹ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;åœ¨çº¿æœåŠ¡&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šå¤§å®¶å¯ä»¥ç†è§£æˆæ”¯æŒæŠ–éŸ³ã€è¥¿ç“œè§†é¢‘ç­‰çš„åç«¯æœåŠ¡ã€‚è¿™äº›æœåŠ¡çš„ç‰¹ç‚¹æ˜¯å®ƒä»¬è·‘åœ¨æˆ‘ä»¬è‡ªå»ºçš„å¤§è§„æ¨¡ K8s ä¸Šçš„ PaaS é›†ç¾¤ä¸Šï¼Œè¿™æ˜¯ä¸€å¥—éå¸¸å¤§çš„å¾®æœåŠ¡æ¶æ„ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;ç¦»çº¿æœåŠ¡&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šåŒ…æ‹¬ä¸€äº›æ¨èæ¨¡å‹çš„ trainingï¼Œå¤§æ•°æ®çš„ report è®¡ç®—ç­‰ç­‰ï¼Œéƒ½å±äºç¦»çº¿æœåŠ¡ã€‚å®ƒä»¬ä¾èµ–å¤§è§„æ¨¡çš„å­˜å‚¨å’Œè®¡ç®—çš„èƒ½åŠ›ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;åŸºç¡€æ¶æ„&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šæ‰¿è½½äº†å­—èŠ‚ä¸­å›½çš„æ‰€æœ‰ä¸šåŠ¡çº¿ï¼Œå‘ä¸Šæä¾›ä¸€å¥— PaaS åŒ–çš„èƒ½åŠ›ï¼ŒåŒ…æ‹¬è®¡ç®—å’Œå­˜å‚¨ç­‰ï¼Œæ”¯æ’‘å„ç§ä¸šåŠ¡ä¸åŒçš„ä½¿ç”¨åœºæ™¯ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;ä¸åŒçš„æœåŠ¡ä½“ç³»å¯¹é«˜å¯ç”¨çš„å…³æ³¨åº¦å¹¶ä¸ä¸€æ ·ã€‚æˆ‘ä»¬ç®€å•åšä¸€ä¸‹åˆ†æï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;åœ¨çº¿æœåŠ¡&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼š&lt;strong&gt;æœ¬èº«æ˜¯æ— çŠ¶æ€æœåŠ¡&lt;/strong&gt;ï¼Œè¿è¡Œåœ¨ K8s å®¹å™¨ä¸Šï¼Œå…¶å­˜å‚¨éƒ½åœ¨å¤–éƒ¨çš„ MySQLã€Redisã€‚è¿™äº›æ— çŠ¶æ€æœåŠ¡å¾ˆæ–¹ä¾¿åšæ‰©å®¹ï¼Œåœ¨å‘ç”Ÿæ•…éšœæ—¶èƒ½å°½å¯èƒ½å®¹é”™ï¼Œå½“ç„¶ä¹Ÿå¯èƒ½ä¼šåšä¸€äº›é™çº§ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;ç¦»çº¿æœåŠ¡&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼š&lt;strong&gt;æœ‰çŠ¶æ€æœåŠ¡ï¼Œå¾ˆå…³æ³¨è®¡ç®—çš„çŠ¶æ€&lt;/strong&gt;ã€‚å¤§æ•°æ®çš„è®¡ç®—æœåŠ¡ç‰¹ç‚¹æ˜¯è¿è¡Œæ—¶é—´å¾ˆé•¿ï¼ŒTrainingã€model çš„æ—¶é—´éƒ½ç‰¹åˆ«é•¿ã€‚å®ƒèƒ½å®¹å¿ä¸€äº›é”™è¯¯ï¼ˆå¦‚æœæŸæ¬¡ job æŒ‚äº†ï¼Œå¯ä»¥è¿›è¡Œ retryï¼‰ï¼Œå…¶æ›´å¤šçŠ¶æ€çš„ä¸€è‡´æ€§ã€æ•°æ®çš„å®Œæ•´æ€§æ˜¯ä¾èµ–åº•å±‚å­˜å‚¨ç³»ç»Ÿçš„æ”¯æŒã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨ç¦»çº¿æœåŠ¡çš„é«˜å¯ç”¨å»ºè®¾ï¼Œå¾ˆå¤§è§„æ¨¡ä¾èµ–äºæ•´ä¸ªåŸºç¡€æ¶æ„æä¾›çš„é«˜å¯ç”¨èƒ½åŠ›ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;åŸºç¡€æ¶æ„&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼š&lt;strong&gt;åŸºç¡€æ¶æ„æœ¬èº«æ˜¯æœ‰çŠ¶æ€çš„&lt;/strong&gt;ï¼Œå®ƒæ˜¯è¿›è¡Œå¤§è§„æ¨¡å­˜å‚¨ã€è®¡ç®—çš„å¹³å°ï¼Œå¯èƒ½ä¼šé‡åˆ°ä¸€äº›ç½‘ç»œæ•…éšœã€ç£ç›˜æ•…éšœç­‰ç°å¤©é¹…äº‹ä»¶ï¼Œè¿™å…¶ä¸­æˆ‘ä»¬å…³æ³¨è¾ƒå¤šçš„æ˜¯æ•°æ®ä¸€è‡´æ€§ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;åº”å¯¹ä¸åŒçš„æœåŠ¡ç±»å‹ï¼Œç³»ç»Ÿæ²»ç†å›¢é˜Ÿè´Ÿè´£é«˜å¯ç”¨çš„åŒå­¦æå‡ºäº†ä¸åŒçš„è§£å†³æ–¹æ¡ˆã€‚åœ¨è¿™é‡Œå…ˆç»™å¤§å®¶ä»‹ç»æˆ‘ä»¬åº”å¯¹åœ¨çº¿æœåŠ¡ï¼ˆæ— çŠ¶æ€æœåŠ¡ï¼‰æ—¶æ··æ²Œå·¥ç¨‹çš„æ¼”è¿›ã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;åœ¨çº¿æœåŠ¡çš„æ··æ²Œå·¥ç¨‹æ¼”è¿›&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;æ··æ²Œå·¥ç¨‹å¹³å° 1.0 æ¶æ„&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;æˆ‘ä»¬è®¤ä¸ºæˆ‘ä»¬çš„æ··æ²Œå·¥ç¨‹å¹³å° 1.0 ç‰ˆæœ¬è¿˜ä¸æ˜¯ä¸€ä¸ªæ··æ²Œå·¥ç¨‹ç³»ç»Ÿï¼Œæ›´å¤šçš„æ˜¯ä¸€ä¸ª&lt;strong&gt;æ•…éšœæ³¨å…¥ç³»ç»Ÿ&lt;/strong&gt;ã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-backh=&quot;332&quot; data-backw=&quot;503&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.6600397614314115&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/fgbJnuXT4EoRMvCiaz1pkUia2jDRI4LobqYTsTO9y3wFgoKZ7rcxAEROYsc6ZXguNd7m83nSwRmPDY6tl7HacoIw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;503&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;ä¸Šå›¾æ˜¯æˆ‘ä»¬è¿™ä¸ªå¹³å° 1.0 ç‰ˆæœ¬çš„æ¶æ„ã€‚è¿™ä¸ªå¹³å°é¢å‘ç”¨æˆ·æä¾›å¯è§†åŒ–ç•Œé¢ï¼Œå¯è¿›è¡Œæ•…éšœæ³¨å…¥å’Œä¸€äº›ç®€å•çš„é…ç½®ã€‚åœ¨åº•å±‚ç‰©ç†æœºä¸Šæˆ‘ä»¬è£…äº† Agentã€‚Agent è¿è¡Œåœ¨å®¿ä¸»æœºä¸Šï¼Œå¯å®ç°å®¹å™¨é—´ç½‘ç»œç›¸å…³çš„æ•…éšœæ³¨å…¥ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å¯¹äºæœåŠ¡ç¨³æ€ï¼Œæˆ‘ä»¬åœ¨åšæ··æ²Œæ¼”ç»ƒçš„æ—¶å€™ï¼Œåœ¨å¹³å°ä¸Šå¯ä»¥æ³¨å…¥ä¸€äº› metricsï¼Œç”¨æˆ·å¯ä»¥å†™ä¸€ä¸ª bosun è¯­å¥å»æŸ¥è¯¢ metricsï¼Œæˆ‘ä»¬æä¾›ä¸€ä¸ªé˜ˆå€¼ï¼Œç³»ç»Ÿå°±ä¼šè½®è¯¢è¿™ä¸ª metrics æ¥åˆ¤å®šæœåŠ¡æ˜¯å¦è¾¾åˆ°ç¨³å®šçš„çŠ¶æ€ã€‚å¦‚æœè¶…å‡ºè¾¹ç•Œï¼Œæˆ‘ä»¬å°±è¿›è¡Œæ•…éšœæ¢å¤ã€‚å¦‚æœæ²¡æœ‰è¶…å‡ºè¾¹ç•Œï¼Œå°±ç»§ç»­æ¼”ç»ƒï¼Œçœ‹æ˜¯å¦èƒ½è¾¾åˆ°é¢„æœŸã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ä¸ºä»€ä¹ˆè¿™ä¸ªç³»ç»Ÿä¸èƒ½ç§°ä¹‹ä¸ºä¸€ä¸ªæ··æ²Œå·¥ç¨‹çš„ç³»ç»Ÿï¼ŸNetflix çš„ Principle of Chaos å¯¹æ··æ²Œå·¥ç¨‹çš„å®šä¹‰ï¼ˆ&lt;/span&gt;&lt;span&gt;http://principlesofchaos.org/&lt;/span&gt;&lt;span&gt;ï¼‰ æœ‰äº”å¤§åŸåˆ™ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å»ºç«‹ä¸€ä¸ªå›´ç»•ç¨³å®šçŠ¶æ€è¡Œä¸ºçš„å‡è¯´&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å¤šæ ·åŒ–çœŸå®ä¸–ç•Œçš„äº‹ä»¶&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œå®éªŒ&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æŒç»­è‡ªåŠ¨åŒ–è¿è¡Œå®éªŒ&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æœ€å°åŒ–çˆ†ç‚¸åŠå¾„æ§åˆ¶&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;å¯¹æ¯”ä»¥ä¸Šäº”ä¸ªåŸåˆ™ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸ºä»€ä¹ˆè¯´è¿™ä¸ªå¹³å°åªæ˜¯ä¸ªæ•…éšœæ³¨å…¥ç³»ç»Ÿã€‚&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é¦–å…ˆæ•´ä½“çš„ç¨³æ€è¿˜ç›¸å¯¹æ¯”è¾ƒç®€é™‹ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å®é™…çš„å¾®æœåŠ¡æ¶æ„ä¸­ä¼šå­˜åœ¨å„ç§æ•…éšœï¼Œè¿™ä¸ªå¹³å°ä¸­åªåšåˆ°äº†æ¯”è¾ƒç®€å•çš„æ•…éšœæ³¨å…¥ï¼Œå¦‚æ•…éšœå»¶è¿Ÿã€æ–­ç½‘ç­‰ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;åœ¨ç”Ÿäº§ç¯å¢ƒè¿›è¡Œæ¼”ç»ƒæ˜¯å½“æ—¶èƒ½åšåˆ°çš„äº‹æƒ…ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å› ä¸ºç¨³æ€æ¯”è¾ƒç®€é™‹ï¼Œæ‰€ä»¥å¾ˆéš¾çœŸæ­£è¯„ä¼°è¿™ä¸ªç³»ç»Ÿæ˜¯ä¸æ˜¯ç¨³å®šï¼Œç³»ç»Ÿä¹Ÿæ— æ³•è‡ªåŠ¨åŒ–è¿è¡Œå®éªŒã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æ•´ä¸ªç³»ç»Ÿå£°æ˜ scale çš„ scope åšçš„ä¸æ˜¯ç‰¹åˆ«å¥½ã€‚å¦å¤–å½“æ—¶æŠ€æœ¯å®ç°çš„ç»“æ„æ˜¯åœ¨ç‰©ç†æœºçš„å®¿ä¸»æœºä¸Šåšæ•…éšœæ³¨å…¥ï¼Œæœ¬èº«æœ‰ä¸€å®šçš„éšæ‚£ï¼Œçˆ†ç‚¸åŠå¾„æ§åˆ¶åšå¾—ä¹Ÿä¸æ˜¯ç‰¹åˆ«å¥½ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;æ··æ²Œå·¥ç¨‹å¹³å° 2.0 æ¶æ„&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;åœ¨ 2019 å¹´çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¼€å§‹æƒ³æŠŠæ··æ²Œå·¥ç¨‹å¹³å° 1.0 ç‰ˆæœ¬æ¼”è¿›åˆ°ä¸‹ä¸€ä»£ï¼Œå¸Œæœ›èƒ½å¤Ÿåšä¸€ä¸ªçœŸæ­£ç¬¦åˆæ··æ²Œå·¥ç¨‹æ ‡å‡†çš„ç³»ç»Ÿï¼Œå› æ­¤æœ‰äº†å¹³å°çš„ 2.0 ç‰ˆæœ¬ï¼Œæˆ‘ä»¬è®¤ä¸ºå®ƒæ˜¯å­—èŠ‚è·³åŠ¨çœŸæ­£æ„ä¹‰ä¸Šçš„ç¬¬ä¸€ä¸ªæ··æ²Œå·¥ç¨‹ç³»ç»Ÿã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-backh=&quot;543&quot; data-backw=&quot;558&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.9740034662045061&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/fgbJnuXT4EoRMvCiaz1pkUia2jDRI4Lobq3iaH5IfGlSThZR1VdtLbNsQ5LOwzsG6B9Mia0tU1XJZgMib3GfJbWNmCQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;577&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;æ··æ²Œå·¥ç¨‹å¹³å° 2.0 ç‰ˆæœ¬çš„ä¸€äº›å‡çº§ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;æ¶æ„å‡çº§&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šå¼•å…¥äº†ä¸€ä¸ª&lt;strong&gt;æ•…éšœä¸­å¿ƒå±‚&lt;/strong&gt;ï¼Œè§£è€¦äº†ä¸šåŠ¡é€»è¾‘å’Œåº•å±‚æ•…éšœæ³¨å…¥ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;æ•…éšœæ³¨å…¥&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šéšç€ &lt;strong&gt;Service Mesh &lt;/strong&gt;æ›´å¤§è§„æ¨¡çš„åº”ç”¨ï¼Œç½‘ç»œè°ƒç”¨ç›¸å…³çš„æ•…éšœæ›´å¤šåŸºäº sidecar å®ç°ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;ç¨³å®šæ€§æ¨¡å‹&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šè¿™ä¸ªé˜¶æ®µæˆ‘ä»¬ä¹Ÿæ„å»ºäº†ä¸€ä¸ª&lt;strong&gt;ç¨³æ€ç³»ç»Ÿ&lt;/strong&gt;ï¼ŒåŸºäºæœåŠ¡çš„å…³é”®æŒ‡æ ‡å’Œæœºå™¨å­¦ä¹ ç­‰ç®—æ³•å®ç°ç¨³æ€è®¡ç®—ã€‚æˆ‘ä»¬éå¸¸å…³æ³¨ç¨³æ€ç³»ç»Ÿï¼Œè®¤ä¸º&lt;strong&gt;çœŸæ­£çš„è‡ªåŠ¨åŒ–æ¼”ç»ƒæ˜¯ä¸éœ€è¦äººå·¥å¹²é¢„çš„&lt;/strong&gt;ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªç³»ç»Ÿæ¥è¯†åˆ«è¢«æ¼”ç»ƒçš„ç³»ç»Ÿæ˜¯å¦ç¨³å®šã€‚å¦‚æœç³»ç»Ÿåªçœ‹åˆ°ä¸€å † metricsï¼Œå®ƒå¾ˆéš¾ç›´æ¥å»è®¤çŸ¥ç³»ç»Ÿçš„ç¨³å®šæ€§ã€‚æˆ‘ä»¬å¸Œæœ›é€šè¿‡ä¸€äº›ç‰¹å®šç®—æ³•å°†è¿™äº› metrics èšåˆæˆä¸€ä¸ªç™¾åˆ†ä½æŒ‡æ ‡ï¼Œå‡è®¾è¿™ä¸ªæŒ‡æ ‡è¾¾åˆ° 90 åˆ†ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºå®ƒæ˜¯ç¨³å®šçš„ã€‚åæ–‡è¿˜ä¼šå†ä»‹ç»æˆ‘ä»¬æ€ä¹ˆåœ¨è¿™ä¸ªç¨³æ€ç³»ç»Ÿé‡Œé¢åšç®—æ³•çš„æŠ•å…¥ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;æ•…éšœä¸­å¿ƒæ¶æ„&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;æˆ‘ä»¬çš„æ•…éšœä¸­å¿ƒå€Ÿé‰´äº† K8s çš„æ¶æ„ã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-backh=&quot;207&quot; data-backw=&quot;558&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.3707865168539326&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/fgbJnuXT4EoRMvCiaz1pkUia2jDRI4LobqZ1BHBQa8HwFP8hDZ4ibM3mzD8cR3a0oSibUicicxrjMurz25Gt2mItLvmw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;712&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;æ··æ²Œå·¥ç¨‹å¹³å° 1.0 ç³»ç»Ÿæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå‡è®¾é€šè¿‡ Agent åœ¨ K8s é‡ŒæˆåŠŸæ³¨å…¥äº†ä¸€ä¸ªå»¶è¿Ÿæ•…éšœã€‚ä½† K8s æœ¬èº«æœ‰å¼¹æ€§è°ƒåº¦èƒ½åŠ›ï¼Œå¦‚æœå¾ˆä¸å¹¸åœ¨æ¼”ç»ƒè¿‡ç¨‹ä¸­è¿™ä¸ªæœåŠ¡ crash äº†ï¼ŒK8s ä¼šè‡ªåŠ¨åœ¨å¦å¤–ä¸€ä¸ªæœºå™¨ä¸ŠæŠŠè¿™ä¸ª Pod å¯èµ·æ¥ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œä½ ä»¥ä¸ºæ•…éšœæ¼”ç»ƒæ˜¯æˆåŠŸçš„ï¼Œä½†å…¶å®æ²¡æœ‰æˆåŠŸï¼Œè€Œæ˜¯é‡æ–°èµ·äº†æ–°çš„æœåŠ¡ã€‚æ•…éšœä¸­å¿ƒå¯ä»¥åœ¨å®¹å™¨å‘ç”Ÿæ¼‚ç§»çš„æ—¶å€™ç»§ç»­æ³¨å…¥æ•…éšœã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;æ‰€ä»¥æˆ‘ä»¬æ˜¯&lt;strong&gt;ä¸€å¥—å£°æ˜å¼çš„ APIï¼Œå£°æ˜çš„ä¸æ˜¯è¦æ³¨å…¥ä»€ä¹ˆæ•…éšœï¼Œè€Œæ˜¯æè¿°æœåŠ¡å™¨çš„ä¸€ç§çŠ¶æ€&lt;/strong&gt;ï¼Œä¾‹å¦‚ A è·Ÿ B ä¹‹é—´çš„ç½‘ç»œæ˜¯æ–­å¼€çš„ï¼Œé‚£ä¹ˆåœ¨ä»»ä½•çŠ¶æ€ä¸‹æ•…éšœä¸­å¿ƒè¦ä¿è¯ A å’Œ B æ˜¯æ–­å¼€çŠ¶æ€ã€‚å…¶æ¬¡ï¼Œæ•´ä¸ªç³»ç»Ÿå€Ÿé‰´ K8s çš„æ¶æ„ï¼Œæœ‰ä¸°å¯Œçš„ controller æ”¯æŒåº•å±‚ä¸åŒçš„æ•…éšœæ³¨å…¥èƒ½åŠ›ã€‚åœ¨å¯¹ä¸šåŠ¡çš„å¿«é€Ÿéœ€æ±‚çš„æ”¯æŒè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬åœ¨ controller é‡Œèƒ½å¾ˆå¿«æ¥å…¥ Chaos Meshã€Chaos Blade ç­‰å¼€æºé¡¹ç›®ã€‚æˆ‘ä»¬è‡ªå·±ä¹ŸåŸç”Ÿåšäº†ä¸€äº› controllerï¼Œæ¯”å¦‚ service mesh controllerï¼Œagent controllerï¼ŒæœåŠ¡å‘ç°çš„ controller ç­‰ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;çˆ†ç‚¸åŠå¾„æ§åˆ¶&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å‰é¢æåˆ°æ•…éšœä¸­å¿ƒæ˜¯é€šè¿‡å£°æ˜å¼ API æ³¨å…¥æ•…éšœï¼Œæˆ‘ä»¬å°±éœ€è¦å®šä¹‰æ•…éšœæ³¨å…¥ modelã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages&quot; data-backh=&quot;241&quot; data-backw=&quot;558&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.4322429906542056&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/fgbJnuXT4EoRMvCiaz1pkUia2jDRI4LobqYHxafzDsr1hfkYJY1w4NrammzynAibZMSPVibcXuzpwj8K4ibMhjmQlWA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;856&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-backh=&quot;271&quot; data-backw=&quot;558&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.48503937007874015&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/fgbJnuXT4EoRMvCiaz1pkUia2jDRI4LobqXdcFQMZ5z1on5I1PuBfnjDtuX44gZrjjuSy3M1D4jaJMpThSgH5C3Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;635&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;Target&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šè¡¨ç¤ºè¦æ³¨å…¥æ•…éšœçš„ç›®æ ‡æœåŠ¡ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;Scope Filter&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šå¯¹äºçˆ†ç‚¸åŠå¾„æ§åˆ¶ï¼Œå¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿè®©ä¸šåŠ¡å»å¸®åŠ©å£°æ˜å¸Œæœ›æ¼”ç»ƒçš„ scopeï¼Œæˆ‘ä»¬ç§°ä¸º Scope Filterã€‚é€šè¿‡ Scope Filter èƒ½å®šä¹‰æ•…éšœæ³¨å…¥çš„ç›®æ ‡ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªæœºæˆ¿ï¼Œä¸€ä¸ªé›†ç¾¤ï¼Œä¸€ä¸ªå¯ç”¨åŒºï¼Œç”šè‡³ç²¾ç¡®åˆ°å®ä¾‹çº§åˆ«ä¹ƒè‡³æµé‡çº§åˆ«ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;Dependency&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šå®ƒæ˜¯æ‰€æœ‰å¯èƒ½å½±å“æœåŠ¡æœ¬èº«çš„å¼‚å¸¸æ¥æºï¼ŒåŒ…æ‹¬ä¸­é—´ä»¶ï¼ŒæŸä¸‹æ¸¸æœåŠ¡ï¼Œä¹ŸåŒ…æ‹¬æ‰€ä¾èµ–çš„ CPUã€ç£ç›˜ã€ç½‘ç»œç­‰ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;Action&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šæ•…éšœäº‹ä»¶ï¼Œå³å‘ç”Ÿäº†ä½•ç§æ•…éšœï¼Œæ¯”å¦‚ä¸‹æ¸¸æœåŠ¡è¿”å›æ‹’ç»ã€å‘ç”Ÿä¸¢åŒ…ï¼›åˆæ¯”å¦‚ç£ç›˜å†™å¼‚å¸¸ã€CPU è¢«æŠ¢å ç­‰ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;æ‰€ä»¥åœ¨æ•…éšœä¸­å¿ƒå£°æ˜æ•…éšœæ—¶ï¼Œéœ€è¦æè¿°ä¸Šè¿°å†…å®¹ï¼Œè¡¨æ˜ä¸šåŠ¡å¸Œæœ›ç³»ç»Ÿä¸­æ˜¯æ€æ ·çš„æ•…éšœçŠ¶æ€ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;ç¨³æ€ç³»ç»Ÿ&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ç¨³æ€ç³»ç»Ÿä¼šæ¶‰åŠä¸€äº›ç®—æ³•çš„å·¥ä½œï¼Œè¿™é‡Œä¸»è¦ä»‹ç»ä¸‰ä¸ªç®—æ³•çš„åœºæ™¯ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;æ—¶åºåºåˆ—çš„åŠ¨æ€åˆ†æ&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šæˆ‘ä»¬å«ç¨³æ€ç®—æ³•ï¼Œå¯ä»¥å°è¯•åˆ†ææœåŠ¡æ˜¯å¦ç¨³å®šã€‚å…¶ä¸­ä½¿ç”¨äº†é˜ˆå€¼æ£€æµ‹ã€3 Sigma åŸåˆ™ã€ç¨€ç–è§„åˆ™ç­‰ç®—æ³•ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;AB å¯¹æ¯”ç¨³æ€åˆ†æ&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šå€Ÿé‰´äº† Netflix åœ¨ç”¨çš„æ›¼-æƒ ç‰¹å°¼ U æ£€éªŒï¼Œå¤§å®¶å¯ä»¥çœ‹ä¸€äº›ç›¸å…³ paper å’Œæ–‡ç« ä»‹ç»ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;æ£€æµ‹æœºåˆ¶&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šä½¿ç”¨æŒ‡æ ‡æ³¢åŠ¨ä¸€è‡´æ€§æ£€æµ‹ç®—æ³•ï¼Œç”¨æ¥åˆ†æå¼ºå¼±ä¾èµ–ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;é€šè¿‡ä»¥ä¸Šè¿™äº›ç®—æ³•ï¼ˆè¿˜æœ‰å…¶ä»–ç®—æ³•ï¼‰ï¼Œç¨³æ€ç³»ç»Ÿèƒ½å¤Ÿå»å¾ˆå¥½åœ°åˆ»ç”»ç³»ç»Ÿç¨³å®šæ€§ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;è‡ªåŠ¨åŒ–æ¼”ç»ƒ&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;æˆ‘ä»¬å°†è‡ªåŠ¨åŒ–æ¼”ç»ƒå®šä¹‰ä¸ºå®Œå…¨ä¸éœ€è¦äººå·¥å¹²é¢„ï¼Œç”±ç³»ç»Ÿè¿›è¡Œæ•…éšœæ³¨å…¥ï¼Œåœ¨æ³¨å…¥è¿‡ç¨‹ã€æ¼”å˜è¿‡ç¨‹ä¸­åˆ†ææœåŠ¡çš„ç¨³å®šæ€§ï¼Œéšæ—¶æ­¢æŸæˆ–æ‹¿åˆ°ç»“æœã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;æˆ‘ä»¬ç°åœ¨è¿›è¡Œè‡ªåŠ¨åŒ–æ¼”ç»ƒæœ‰è¿™æ ·ä¸€äº›å‰æï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;èƒ½å¤Ÿæ˜ç¡®æ¼”ç»ƒçš„å®é™…åœºæ™¯çš„ç›®æ ‡ï¼›&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é€šè¿‡ç¨³æ€ç³»ç»Ÿï¼Œå¯¹ç¨³æ€å‡è®¾å…·å¤‡è‡ªåŠ¨åŒ–åˆ¤æ–­èƒ½åŠ›ï¼›&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;èƒ½å¤Ÿé€šè¿‡å£°æ˜å¼ APIã€Scope Filter æ§åˆ¶æ··æ²Œæ¼”ç»ƒçš„å½±å“èŒƒå›´ï¼Œå®éªŒè¿‡ç¨‹ç”Ÿäº§æŸå¤±æå°ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;è‡ªåŠ¨åŒ–æ¼”ç»ƒç›®å‰ä¸»è¦çš„åº”ç”¨åœºæ™¯æ˜¯å¼ºå¼±ä¾èµ–åˆ†æï¼ŒåŒ…æ‹¬ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å¼ºå¼±ä¾èµ–ç°çŠ¶ä¸ä¸šåŠ¡æ ‡æ³¨æ˜¯å¦ä¸€è‡´ï¼›&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å¼±ä¾èµ–è¶…æ—¶æ˜¯å¦ä¼šæ‹–å®æ•´ä½“é“¾è·¯ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ç°åœ¨æˆ‘ä»¬å†æ¥å›é¡¾ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬è®¤ä¸ºæ··æ²Œå·¥ç¨‹å¹³å° 2.0 ç‰ˆæœ¬æ˜¯ä¸€ä¸ªæ··æ²Œå·¥ç¨‹ç³»ç»Ÿã€‚è¿˜æ˜¯å¯¹æ¯”å‰æ–‡æåˆ°çš„äº”ä¸ªåŸåˆ™ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å»ºç«‹ä¸€ä¸ªå›´ç»•ç¨³å®šçŠ¶æ€çš„å‡è¯´ï¼šé€šè¿‡ç¨³æ€ç³»ç»Ÿå·²ç»å¼€å¯äº†ç¨³æ€å‡è¯´çš„æ¼”è¿›ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å¤šæ ·åŒ–çœŸå®ä¸–ç•Œçš„äº‹ä»¶ï¼šç°åœ¨æ•…éšœåˆ†å±‚ä¸Šæ›´åŠ åˆç†ï¼Œè¡¥å……äº†å¤§é‡ä¸­é—´ä»¶æ•…éšœå’Œåº•å±‚æ•…éšœã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œè¯•éªŒï¼šè¿™ä¸€ç‚¹åœ¨ 1.0 æ—¶æœŸå°±å®ç°äº†ï¼Œ2.0 ä¸­è¿›è¡Œäº†æ‰©å±•ï¼Œå¯æ”¯æŒç”Ÿäº§ç¯å¢ƒã€é¢„å‘ç¯å¢ƒã€æœ¬åœ°æµ‹è¯•ç¯å¢ƒçš„å„ç§æ•…éšœæ¼”ä¹ ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æŒç»­è‡ªåŠ¨åŒ–è¿è¡Œè¯•éªŒï¼šæä¾› csvã€sdkã€api ç­‰èƒ½åŠ›ï¼Œè®©ä¸šåŠ¡çº¿åœ¨è‡ªå·±å¸Œæœ›çš„æœåŠ¡å‘å¸ƒæµç¨‹ä¸­æŒç»­è·ŸåŠŸèƒ½åšæ•´åˆã€‚æˆ‘ä»¬ä¹Ÿæä¾›äº† API èƒ½åŠ›ï¼Œå¸®åŠ©ä¸šåŠ¡çº¿åœ¨éœ€è¦çš„ç¯å¢ƒåšæ•…éšœæ³¨å…¥ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æœ€å°åŒ–çˆ†ç‚¸åŠå¾„ï¼šæä¾›å£°æ˜å¼ API çš„èƒ½åŠ›ï¼Œå…¶ä¸­ä¸€ä¸ªåŸå› å°±æ˜¯ä¸ºäº†æ§åˆ¶çˆ†ç‚¸åŠå¾„ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;æ”¯æ’‘åº•å±‚ç³»ç»Ÿæ¼”ç»ƒçš„åŸºç¡€è®¾æ–½æ··æ²Œå¹³å°&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;å‰é¢æåˆ°äº†ç¦»çº¿æœåŠ¡å¾ˆå¤§ç¨‹åº¦ä¸Šä¾èµ–åº•å±‚çŠ¶æ€çš„ä¸€è‡´æ€§ï¼Œæ‰€ä»¥å¦‚æœæŠŠåŸºç¡€æ¶æ„ä¸­å­˜å‚¨ã€è®¡ç®—åšå¥½ï¼Œå°±èƒ½å¤Ÿå¾ˆå¥½åœ°æ”¯æ’‘ä¸šåŠ¡ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªæ–°çš„åŸºç¡€è®¾æ–½æ··æ²Œå¹³å°æ¥åšä¸€äº›å†…éƒ¨çš„å®éªŒæ€§å°è¯•ã€‚å¯¹äºåŸºç¡€æ¶æ„çš„æ··æ²Œå·¥ç¨‹ï¼Œæˆ‘ä»¬è¦æ‰“ç ´ä¸€ä¸‹æ··æ²Œå·¥ç¨‹çš„ä¸€äº›æ ‡å‡†åŸåˆ™ã€‚&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é¦–å…ˆé’ˆå¯¹åŸºç¡€æ¶æ„çš„æ··æ²Œå·¥ç¨‹ä¸å¤ªé€‚åˆåœ¨ç”Ÿäº§ç¯å¢ƒæ¼”ç»ƒï¼Œå› ä¸ºå®ƒä¾èµ–äºåº•å±‚çš„æ•…éšœæ³¨å…¥ï¼Œå½±å“é¢éå¸¸å¤§ï¼Œçˆ†ç‚¸åŠå¾„ä¸å¥½æ§åˆ¶ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;åœ¨è‡ªåŠ¨åŒ–æ¼”ç»ƒä¸Šï¼Œä¸šåŠ¡æ–¹éœ€è¦æ›´åŠ çµæ´»çš„èƒ½åŠ›ï¼Œè¿›ä¸€æ­¥è·Ÿä»–ä»¬çš„ CI/CD æ‰“é€šï¼Œä¹Ÿéœ€è¦æ›´åŠ å¤æ‚çš„ç¼–æ’éœ€æ±‚ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å¯¹äºç¨³æ€æ¨¡å‹ï¼Œ&lt;strong&gt;é™¤äº†ç¨³å®šæ€§ä¹‹å¤–ï¼Œæˆ‘ä»¬æ›´å…³æ³¨ä¸€è‡´æ€§&lt;/strong&gt;ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;è¦æ”¯æŒç¦»çº¿ç¯å¢ƒçš„æ··æ²Œå·¥ç¨‹ï¼Œè¯¥åŸºç¡€è®¾æ–½æ··æ²Œå¹³å°ç»™äº†æˆ‘ä»¬ä¸€ä¸ªå®‰å…¨çš„ç¯å¢ƒï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿåœ¨é‡Œé¢å±•å¼€æ‰‹è„šåšæ›´å¤šçš„æ•…éšœæ³¨å…¥ï¼Œæ¯”å¦‚ CPUã€Memoryã€File system ç­‰ç³»ç»Ÿèµ„æºæ•…éšœï¼›æ‹’ç»ã€ä¸¢åŒ…ç­‰ç½‘ç»œæ•…éšœï¼›ä»¥åŠåŒ…æ‹¬æ—¶é’Ÿè·³å˜ã€è¿›ç¨‹è¢«æ€ã€ä»£ç çº§å¼‚å¸¸ã€æ–‡ä»¶ç³»ç»Ÿçº§æ–¹æ³• error hook åœ¨å†…çš„å…¶ä»–æ•…éšœã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å¯¹äºè‡ªåŠ¨åŒ–æ¼”ç»ƒçš„è‡ªåŠ¨åŒ–ç¼–æ’ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡è¿™ä¸ªå¹³å°ç»™ç”¨æˆ·æ›´åŠ çµæ´»çš„ç¼–æ’èƒ½åŠ›ï¼Œä¾‹å¦‚ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ä¸²å¹¶è¡Œä»»åŠ¡æ‰§è¡Œ&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;éšæ—¶æš‚åœ &amp;amp; æ–­ç‚¹æ¢å¤&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;åŸºç¡€è®¾æ–½ä¸»ä»èŠ‚ç‚¹è¯†åˆ«&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;æˆ‘ä»¬ä¹Ÿæä¾›äº†ä¸€äº›&lt;strong&gt;æ’ä»¶èƒ½åŠ›&lt;/strong&gt;ï¼Œè®©ä¸€äº›ç»„ä»¶å›¢é˜Ÿèƒ½å¤Ÿæ›´çµæ´»åœ°æ³¨å…¥æ•…éšœã€‚æœ‰çš„ä¸šåŠ¡å›¢é˜Ÿå¯èƒ½åœ¨è‡ªå·±çš„ç³»ç»Ÿé‡Œå·²ç»åŸ‹ç‚¹äº†ä¸€äº› hookï¼Œä»–ä»¬å¸Œæœ›è¿™ä¸ªç³»ç»Ÿèƒ½å¤Ÿæ›´ç›´æ¥åœ°å¸®åŠ©æ³¨å…¥æ•…éšœï¼ŒåŒæ—¶ä¹Ÿå¸Œæœ›å¤ç”¨æˆ‘ä»¬çš„ç¼–æ’ä½“ç³»å’Œå¹³å°ä½“ç³»ã€‚æˆ‘ä»¬é€šè¿‡ hook çš„æ–¹å¼ï¼Œä¸šåŠ¡å›¢é˜Ÿåªéœ€å®ç°å¯¹åº”çš„ hookï¼Œå°±èƒ½å¤Ÿæ³¨å…¥ç‰¹å®šçš„æ•…éšœï¼Œç„¶åç»§ç»­ä½¿ç”¨æˆ‘ä»¬çš„æ•´å¥—ç¼–æ’ä½“ç³»å’Œå¹³å°ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages&quot; data-backh=&quot;331&quot; data-backw=&quot;558&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5927672955974843&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/fgbJnuXT4EoRMvCiaz1pkUia2jDRI4LobqIrk8FwpibQvBNiaDRrLibLfauvOOu8EOibA6TNynqPU7aO1jLTFO9FCBtA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1272&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span/&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;ä»æ··æ²Œå·¥ç¨‹åˆ°ç³»ç»Ÿé«˜å¯ç”¨å»ºè®¾&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;æˆ‘ä»¬æœ€å¼€å§‹åš Chaos Engineering çš„æ—¶å€™ï¼Œå¯¹å›¢é˜Ÿçš„ä½¿å‘½å®šä½æ˜¯åœ¨å­—èŠ‚è·³åŠ¨è½åœ°æ··æ²Œå·¥ç¨‹ã€‚ä½†æ˜¯å½“æˆ‘ä»¬åšå‡ºä¸€äº›èƒ½åŠ›æ‰¾ä¸šåŠ¡çº¿ä½¿ç”¨çš„æ—¶å€™ï¼Œä¼šå‘ç°ä¸šåŠ¡çº¿å¯¹æ­¤å¹¶æ²¡æœ‰ä»€ä¹ˆéœ€æ±‚ã€‚åæ¥æˆ‘ä»¬åŠªåŠ›æ€è€ƒä¹‹åè°ƒæ•´äº†å›¢é˜Ÿçš„ä½¿å‘½ï¼š&lt;strong&gt;é€šè¿‡æ··æ²Œå·¥ç¨‹æˆ–è€…å…¶ä»–ä¸€äº›æ‰‹æ®µå¸®åŠ©ä¸šåŠ¡æ¨è¿›é«˜å¯ç”¨å»ºè®¾&lt;/strong&gt;ã€‚è°ƒæ•´ä¹‹åæˆ‘ä»¬å°±ä»è¿‡å»ç ”ç©¶ Chaos Engineering çš„ä¸šç•Œå‘å±•ï¼Œå˜æˆäº†è¦å»è´´ç€ä¸šåŠ¡ç†è§£ä¸šåŠ¡çš„é«˜å¯ç”¨ã€‚æˆ‘ä»¬å¦‚ä½•å¸®åŠ©ä¸šåŠ¡è¿›è¡Œé«˜å¯ç”¨å»ºè®¾å‘¢ï¼Ÿ&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;ä»€ä¹ˆæ˜¯é«˜å¯ç”¨&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;æˆ‘ä»¬ç”¨ä¸‹é¢è¿™ä¸ªå…¬å¼æ¥è¿›è¡Œç†è§£é«˜å¯ç”¨ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages&quot; data-backh=&quot;79&quot; data-backw=&quot;558&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.14169215086646278&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/fgbJnuXT4EoRMvCiaz1pkUia2jDRI4LobqIYgRQT78NGzjRmic89UfNYu2TZp6sz4X9Wj8UmsTJqkFa3smve8AANA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;981&quot;/&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;MTTRï¼ˆMean Time To Repairï¼‰ï¼šå¹³å‡ä¿®å¤æ—¶é—´&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;MTBFï¼ˆMean Time Between Failureï¼‰ï¼šå¹³å‡å¤±æ•ˆé—´éš”æ—¶é—´&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Nï¼šäº‹æ•…å‘ç”Ÿæ¬¡æ•°&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Sï¼šå½±å“èŒƒå›´&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;è¿™ä¸ªå…¬å¼çš„å€¼æ˜æ˜¾å°äº 1ï¼Œç®—å‡ºæ¥åº”è¯¥æ˜¯æ‰€è°“çš„ä¸‰ä¸ªä¹ã€äº”ä¸ªä¹ã€‚è¦è®© A çš„å€¼è¶³å¤Ÿå¤§ï¼Œéœ€è¦ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;MTTR*N*S çš„å€¼è¶³å¤Ÿå°ã€‚æ‰€ä»¥éœ€è¦é™ä½ MTTRï¼Œé™ä½äº‹æ•…å‘ç”Ÿæ¬¡æ•°ï¼Œç¼©å°æ•…éšœèŒƒå›´ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;MTBF çš„å€¼å˜å¤§ã€‚å³å°½å¯èƒ½æ‹‰å¼€ä¸¤æ¬¡æ•…éšœä¹‹é—´çš„é—´éš”ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;å¦‚ä½•é™ä½ MTTRã€Nã€S å‘¢ï¼Ÿ&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;é™ä½æ•…éšœå½±å“èŒƒå›´ï¼ˆSï¼‰&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å½“é¢å‘ç”Ÿäº§æ¶æ„çš„æ•…éšœå‘ç”Ÿçš„æ—¶å€™ï¼Œè¦é™ä½æ•…éšœå½±å“èŒƒå›´ï¼Œä»æ¶æ„ä¾§å¯ä»¥é‡‡ç”¨ä¸€äº›è®¾è®¡æ‰‹æ®µï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å•å…ƒåŒ–è®¾è®¡ï¼šç”¨æˆ·è¯·æ±‚éš”ç¦»&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å¤šæœºæˆ¿éƒ¨ç½²ï¼šç³»ç»Ÿèµ„æºéš”ç¦»&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æ ¸å¿ƒä¸šåŠ¡ç‹¬ç«‹éƒ¨ç½²ï¼šä¸šåŠ¡åŠŸèƒ½éš”ç¦»&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å¼‚æ­¥åŒ–å¤„ç†&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;åœ¨è¿™é‡Œï¼Œæ··æ²Œå·¥ç¨‹å¯ä»¥åšçš„äº‹æƒ…æ˜¯å¸®åŠ© SRE å›¢é˜ŸéªŒè¯è¿™äº›æ¶æ„è®¾è®¡æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å‡å°‘æ•…éšœå‘ç”Ÿæ¬¡æ•°ï¼ˆNï¼‰Â &lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;è¿™é‡Œè¦é‡æ–°å®šä¹‰ä¸€ä¸‹æ•…éšœã€‚Failure æ˜¯ä¸å¯é¿å…çš„ï¼Œæˆ‘ä»¬è¦å°½å¯èƒ½åœ¨è½¯ä»¶ç³»ç»Ÿçš„æ¶æ„å±‚é¿å… Failure è½¬æ¢æˆ Errorã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å¦‚ä½•é™ä½ä» Failure åˆ° Error çš„è½¬æ¢ç‡ï¼Ÿæœ€é‡è¦çš„æ˜¯åŠ å¼ºç³»ç»Ÿçš„å®¹é”™æ€§ï¼ŒåŒ…æ‹¬ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;éƒ¨ç½²ï¼šå¼‚åœ°å¤šæ´»ï¼Œæµé‡çµæ´»è°ƒåº¦ï¼ŒæœåŠ¡å…œåº•ï¼Œé¢„æ¡ˆç®¡ç†ï¼›&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æœåŠ¡æ²»ç†ï¼šè¶…æ—¶é…ç½®ï¼Œç†”æ–­ fail fastã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;è¿™å…¶ä¸­æ··æ²Œå·¥ç¨‹èµ·åˆ°çš„ä½œç”¨å¸®åŠ©éªŒè¯ç³»ç»Ÿå®¹é”™èƒ½åŠ›ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;é™ä½å¹³å‡ä¿®å¤æ—¶é—´ï¼ˆMTTRï¼‰&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages&quot; data-backh=&quot;201&quot; data-backw=&quot;558&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.36042692939244664&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/fgbJnuXT4EoRMvCiaz1pkUia2jDRI4LobqFySaxJl9LGOoCDMHNyO0nvIF3neQOxCOgwrEQVvYplhqicAdQIIeDGg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1218&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ä¸Šå›¾å±•ç¤ºäº† MTTR æ¶‰åŠçš„ä¸€äº›å› ç´ ï¼šFail Notificationã€è¯Šæ–­ã€ä¿®å¤ã€æµ‹è¯•ã€æœ€ç»ˆä¸Šçº¿ç­‰æ‰€éœ€çš„æ—¶é—´ã€‚è¦é™ä½ MTTR å¯ä»¥å¯¹æ¯ä¸ªæ¶‰åŠçš„å› ç´ åŠ å…¥ä¸€äº›è®¾è®¡æ‰‹æ®µï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å……åˆ†çš„ç›‘æ§å‘Šè­¦è¦†ç›–ã€‚éœ€è¦æ¨åŠ¨ä¸šåŠ¡è¿›è¡Œå‘Šè­¦çš„æ²»ç†ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;åœ¨å‘Šè­¦å……åˆ†è¦†ç›–çš„åŒæ—¶ä¿è¯å‘Šè­¦çš„å‡†ç¡®æ€§ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é«˜æ•ˆå®šä½ï¼ŒåŠ å¼ºæ’éšœèƒ½åŠ›ã€‚ç›®å‰æˆ‘ä»¬è·Ÿå†…éƒ¨çš„ AIOps å›¢é˜Ÿåˆä½œï¼Œåšè¿›ä¸€æ­¥çš„æ™ºèƒ½åŒ–éšœç¢åˆ†æï¼Œé™ä½è¯Šæ–­æ—¶é—´ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å¿«é€Ÿæ­¢æŸé¢„æ¡ˆã€‚ä»ä¿®å¤åˆ°æµ‹è¯•å†åˆ°æœ€ç»ˆä¸Šçº¿ï¼Œéœ€è¦æœ‰ä¸€ä¸ªé¢„æ¡ˆç³»ç»Ÿï¼Œæ ¹æ®è¯Šæ–­çš„æ•…éšœç‰¹å¾å¤‡æœ‰é¢„æ¡ˆåº“ï¼Œåšåˆ°ç‚¹å‡»æŒ‰é’®å³å¯é€‰æ‹©å‡†ç¡®çš„é¢„æ¡ˆåšæ¢å¤ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;è¿™å…¶ä¸­æ··æ²Œå·¥ç¨‹å¯åšçš„æ˜¯è¿›è¡Œåº”æ€¥å“åº”æ¼”ç»ƒã€‚&lt;strong&gt;å…¶å®æ¼”ç»ƒä¸åªæ˜¯é’ˆå¯¹ç³»ç»Ÿï¼Œä¹Ÿæ˜¯æ¼”ç»ƒç»„ç»‡é‡Œæ¯ä¸ªäººçš„åº”æ€¥èƒ½åŠ›&lt;/strong&gt;ã€‚å½“é¢ä¸´äº‹æ•…æ—¶ï¼Œå›¢é˜Ÿå¯ä»¥æœ‰ä¸€å¥—æ ‡å‡†çš„ workflow å»å‘ç°é—®é¢˜ã€å®šä½é—®é¢˜ã€è§£å†³é—®é¢˜ï¼Œè¿™ä¹Ÿæ··æ²Œå·¥ç¨‹ç³»ç»Ÿå¸Œæœ›æ¼”ç»ƒè¾¾åˆ°çš„æ•ˆæœã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;åç»­è§„åˆ’&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;æœ€åä»‹ç»ä¸€ä¸‹æˆ‘ä»¬åœ¨é«˜å¯ç”¨ã€æ··æ²Œå·¥ç¨‹æ–¹é¢çš„åç»­è§„åˆ’ï¼Œä¸»è¦æœ‰ä¸‰ä¸ªæ–¹é¢ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æ•…éšœç²¾ç»†åŒ–èƒ½åŠ›å»ºè®¾&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ä¸°å¯Œæ··æ²Œå·¥ç¨‹çš„ä½¿ç”¨åœºæ™¯&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ç»§ç»­æ¢ç´¢è‡ªåŠ¨åŒ–åœºæ™¯&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é™ä½ç”¨æˆ·æ¥å…¥å’Œä½¿ç”¨æˆæœ¬ï¼Œæ‰“é€ è½»é‡çº§å¹³å°&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æ‰©å±•æ··æ²Œå·¥ç¨‹å†…æ¶µ&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å›å½’å¯ç”¨æ€§è§†è§’ï¼ŒæŒç»­æ¢ç´¢æ··æ²Œå·¥ç¨‹ä¸é«˜å¯ç”¨çš„å…³ç³»&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å»ºç«‹æ•…éšœé¢„ç®—æœºåˆ¶ï¼Œé€šè¿‡é‡åŒ–æ•…éšœæŸå¤±è¿›è¡Œé¢„æµ‹å’Œåˆ†æï¼Œä»è€ŒååŠ©å†³ç­–åœ¨æ··æ²Œå·¥ç¨‹çš„æŠ•å…¥&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;å…³æ³¨ğŸ‘‡ğŸ‘‡å…¬ä¼—å·ï¼Œåå°å›å¤ã€&lt;/span&gt;&lt;span&gt;&lt;strong&gt;é«˜å¯ç”¨&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ã€‘è·å–æœ¬æ–‡å¯¹åº”çš„&lt;/span&gt;&lt;strong&gt;&lt;span&gt; PPT&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzkwNTIwNzc3OQ==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/fgbJnuXT4ErBsjJWvAQyvqOmbNdIicSf7GteicpXfENm6O5ZZAUqIZlMc2j7kib6A9XVvhMfEfUwvg3YFx7EiasiaPw/0?wx_fmt=png&quot; data-nickname=&quot;ç«å±±å¼•æ“å¼€å‘è€…ç¤¾åŒº&quot; data-alias=&quot;&quot; data-signature=&quot;ç«å±±å¼•æ“æ˜¯å­—èŠ‚è·³åŠ¨æ——ä¸‹çš„æ•°å­—æœåŠ¡ä¸æ™ºèƒ½ç§‘æŠ€å“ç‰Œï¼ŒåŸºäºå…¬å¸æœåŠ¡æ•°äº¿ç”¨æˆ·çš„å¤§æ•°æ®ã€äººå·¥æ™ºèƒ½å’ŒåŸºç¡€æœåŠ¡ç­‰èƒ½åŠ›ï¼Œä¸ºä¼ä¸šå®¢æˆ·æä¾›ç³»ç»ŸåŒ–å…¨é“¾è·¯è§£å†³æ–¹æ¡ˆï¼ŒåŠ©åŠ›ä¼ä¸šåŠ¡å®åœ°åˆ›æ–°ï¼Œå®ç°ä¸šåŠ¡æŒç»­å¿«é€Ÿçš„å¢é•¿ã€‚&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-backh=&quot;321&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5553997194950911&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/fgbJnuXT4EoRMvCiaz1pkUia2jDRI4LobqcoY2TbkgJL0iaoFWXF2lnm29QwndK5eto1aOblStj1lkxX8UmialrO1A/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;713&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;ç«å±±å¼•æ“å“ç‰Œå‘å¸ƒä¼š&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;span&gt;å°†äº 6 æœˆ 10Â æ—¥ä¸¾è¡Œï¼Œä¸ºå¤§å®¶&lt;span&gt;æ­ç§˜å­—èŠ‚è·³åŠ¨ 9 å¹´å¢é•¿èƒŒåçš„æŠ€æœ¯åŸåŠ›&lt;/span&gt;ï¼ç‚¹å‡»ã€&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;é˜…è¯»åŸæ–‡&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;ã€‘ç«‹å³é¢„çº¦ï¼Œä¸€èµ·æ­ä¹˜ã€Œå¢é•¿å¼•æ“ã€èˆ±ï½&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>375e4592e20148307cc5a8cdfc671af1</guid>
<title>é¢è¯•ä¾ƒé›†åˆï¼šLinkedBlockingQueue ç¯‡</title>
<link>https://toutiao.io/k/dlbbh09</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;é¢è¯•å®˜ï¼šå¥½äº†ï¼ŒèŠå®Œäº†&lt;/strong&gt;&lt;/span&gt;&lt;code&gt;ArrayBlockingQueue&lt;/code&gt;&lt;strong&gt;&lt;span&gt;ï¼Œæˆ‘ä»¬æ¥ç€è¯´è¯´&lt;/span&gt;&lt;/strong&gt;&lt;code&gt;LinkedBlockingQueue&lt;/code&gt;&lt;span&gt;&lt;strong&gt;å§&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Hydraï¼šè¿˜çœŸæ˜¯ä¸ç»™äººå–˜å£æ°”çš„æœºä¼šï¼Œ&lt;code&gt;LinkedBlockingQueue&lt;/code&gt;æ˜¯ä¸€ä¸ªåŸºäºé“¾è¡¨çš„é˜»å¡é˜Ÿåˆ—ï¼Œå†…éƒ¨æ˜¯ç”±èŠ‚ç‚¹&lt;code&gt;Node&lt;/code&gt;æ„æˆï¼Œæ¯ä¸ªè¢«åŠ å…¥é˜Ÿåˆ—çš„å…ƒç´ éƒ½ä¼šè¢«å°è£…æˆä¸‹é¢çš„&lt;code&gt;Node&lt;/code&gt;èŠ‚ç‚¹ï¼Œå¹¶ä¸”èŠ‚ç‚¹ä¸­æœ‰æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;Node&lt;/span&gt;&amp;lt;&lt;span&gt;E&lt;/span&gt;&amp;gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â EÂ item;&lt;br/&gt;Â Â Â Â Node&amp;lt;E&amp;gt;Â next;&lt;br/&gt;Â Â Â Â Node(EÂ x)Â {Â itemÂ =Â x;Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;LinkedBlockingQueue&lt;/code&gt;ä¸­çš„å…³é”®å±æ€§æœ‰ä¸‹é¢è¿™äº›ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â capacity;&lt;span&gt;//é˜Ÿåˆ—å®¹é‡&lt;/span&gt;&lt;br/&gt;&lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â AtomicIntegerÂ countÂ =Â &lt;span&gt;new&lt;/span&gt;Â AtomicInteger();&lt;span&gt;//é˜Ÿåˆ—ä¸­å…ƒç´ æ•°é‡&lt;/span&gt;&lt;br/&gt;&lt;span&gt;transient&lt;/span&gt;Â Node&amp;lt;E&amp;gt;Â head;&lt;span&gt;//å¤´èŠ‚ç‚¹&lt;/span&gt;&lt;br/&gt;&lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;transient&lt;/span&gt;Â Node&amp;lt;E&amp;gt;Â last;&lt;span&gt;//å°¾èŠ‚ç‚¹&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//å‡ºé˜Ÿé”&lt;/span&gt;&lt;br/&gt;&lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â ReentrantLockÂ takeLockÂ =Â &lt;span&gt;new&lt;/span&gt;Â ReentrantLock();&lt;br/&gt;&lt;span&gt;//å‡ºé˜Ÿçš„ç­‰å¾…æ¡ä»¶å¯¹è±¡&lt;/span&gt;&lt;br/&gt;&lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â ConditionÂ notEmptyÂ =Â takeLock.newCondition();&lt;br/&gt;&lt;span&gt;//å…¥é˜Ÿé”&lt;/span&gt;&lt;br/&gt;&lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â ReentrantLockÂ putLockÂ =Â &lt;span&gt;new&lt;/span&gt;Â ReentrantLock();&lt;br/&gt;&lt;span&gt;//å…¥é˜Ÿçš„ç­‰å¾…æ¡ä»¶å¯¹è±¡&lt;/span&gt;&lt;br/&gt;&lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â ConditionÂ notFullÂ =Â putLock.newCondition();&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ„é€ å‡½æ•°åˆ†ä¸ºæŒ‡å®šé˜Ÿåˆ—é•¿åº¦å’Œä¸æŒ‡å®šé˜Ÿåˆ—é•¿åº¦ä¸¤ç§ï¼Œä¸æŒ‡å®šæ—¶é˜Ÿåˆ—æœ€å¤§é•¿åº¦æ˜¯&lt;code&gt;int&lt;/code&gt;çš„æœ€å¤§å€¼ã€‚å½“ç„¶äº†ï¼Œä½ è¦æ˜¯çœŸå­˜è¿™ä¹ˆå¤šçš„å…ƒç´ ï¼Œå¾ˆæœ‰å¯èƒ½ä¼šå¼•èµ·å†…å­˜æº¢å‡ºï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;LinkedBlockingQueue&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;this&lt;/span&gt;(Integer.MAX_VALUE);&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;LinkedBlockingQueue&lt;/span&gt;&lt;span&gt;(&lt;span&gt;int&lt;/span&gt;Â capacity)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (capacityÂ &amp;lt;=Â &lt;span&gt;0&lt;/span&gt;)Â &lt;span&gt;throw&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â IllegalArgumentException();&lt;br/&gt;Â Â Â Â &lt;span&gt;this&lt;/span&gt;.capacityÂ =Â capacity;&lt;br/&gt;Â Â Â Â lastÂ =Â headÂ =Â &lt;span&gt;new&lt;/span&gt;Â Node&amp;lt;E&amp;gt;(&lt;span&gt;null&lt;/span&gt;);&lt;br/&gt;}Â &lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿˜æœ‰å¦ä¸€ç§åœ¨åˆå§‹åŒ–æ—¶å°±å¯ä»¥å°†é›†åˆä½œä¸ºå‚æ•°ä¼ å…¥çš„æ„é€ æ–¹æ³•ï¼Œå®ç°éå¸¸å¥½ç†è§£ï¼Œåªæ˜¯å¾ªç¯è°ƒç”¨äº†åé¢ä¼šè®²åˆ°çš„&lt;code&gt;enqueue&lt;/code&gt;å…¥é˜Ÿæ–¹æ³•ï¼Œè¿™é‡Œæš‚ä¸”ç•¥è¿‡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨&lt;code&gt;LinkedBlockingQueue&lt;/code&gt;ä¸­ï¼Œé˜Ÿåˆ—çš„å¤´ç»“ç‚¹&lt;code&gt;head&lt;/code&gt;æ˜¯ä¸å­˜å…ƒç´ çš„ï¼Œå®ƒçš„&lt;code&gt;item&lt;/code&gt;æ˜¯&lt;code&gt;null&lt;/code&gt;ï¼Œ&lt;code&gt;next&lt;/code&gt;æŒ‡å‘çš„å…ƒç´ æ‰æ˜¯çœŸæ­£çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå®ƒä¹Ÿæœ‰ä¸¤ä¸ªç”¨äºé˜»å¡ç­‰å¾…çš„&lt;code&gt;Condition&lt;/code&gt;æ¡ä»¶å¯¹è±¡ã€‚ä¸ä¹‹å‰çš„&lt;code&gt;ArrayBlockingQueue&lt;/code&gt;ä¸åŒï¼Œè¿™é‡Œå‡ºé˜Ÿå’Œå…¥é˜Ÿä½¿ç”¨äº†ä¸åŒçš„é”&lt;code&gt;takeLock&lt;/code&gt;å’Œ&lt;code&gt;putLock&lt;/code&gt;ã€‚é˜Ÿåˆ—çš„ç»“æ„æ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.2599502487562189&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zpom4BeZSicbHMNJReUCPWD7YZicg2iazjBOLtPUicUJlaPfPw4nfgpribCdM9qqY8Z0Tpib5S5VW8zjUYoBMc789Ccw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;804&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;span&gt;é¢è¯•å®˜ï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨ä¸¤æŠŠé”ï¼Œä¹‹å‰&lt;/span&gt;&lt;/strong&gt;&lt;code&gt;ArrayBlockingQueue&lt;/code&gt;&lt;strong&gt;&lt;span&gt;ä½¿ç”¨ä¸€æŠŠé”ï¼Œä¸æ˜¯ä¹Ÿå¯ä»¥ä¿è¯çº¿ç¨‹çš„å®‰å…¨ä¹ˆï¼Ÿ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Hydraï¼šä½¿ç”¨ä¸¤æŠŠé”ï¼Œå¯ä»¥ä¿è¯å…ƒç´ çš„æ’å…¥å’Œåˆ é™¤å¹¶ä¸äº’æ–¥ï¼Œä»è€Œèƒ½å¤ŸåŒæ—¶è¿›è¡Œï¼Œè¾¾åˆ°æé«˜ååé‡çš„çš„æ•ˆæœ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;é¢è¯•å®˜ï¼šå—¯ï¼Œé‚£è¿˜æ˜¯è€è§„çŸ©ï¼Œå…ˆè¯´æ’å…¥æ–¹æ³•æ˜¯æ€ä¹ˆå®ç°çš„å§&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Hydraï¼šè¿™æ¬¡å°±ä¸æçˆ¶ç±»&lt;code&gt;AbstractQueue&lt;/code&gt;çš„&lt;code&gt;add&lt;/code&gt;æ–¹æ³•äº†ï¼Œåæ­£å®ƒè°ƒç”¨çš„ä¹Ÿæ˜¯å­ç±»çš„æ’å…¥æ–¹æ³•&lt;code&gt;offer&lt;/code&gt;ï¼Œæˆ‘ä»¬å°±ç›´æ¥æ¥çœ‹&lt;code&gt;offer&lt;/code&gt;æ–¹æ³•çš„æºç ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;boolean&lt;/span&gt;Â &lt;span&gt;offer&lt;/span&gt;&lt;span&gt;(EÂ e)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (eÂ ==Â &lt;span&gt;null&lt;/span&gt;)Â &lt;span&gt;throw&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â NullPointerException();&lt;br/&gt;Â Â Â Â &lt;span&gt;final&lt;/span&gt;Â AtomicIntegerÂ countÂ =Â &lt;span&gt;this&lt;/span&gt;.count;&lt;span&gt;//é˜Ÿåˆ—ä¸­å…ƒç´ ä¸ªæ•°&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (count.get()Â ==Â capacity)&lt;span&gt;//å·²æ»¡&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;false&lt;/span&gt;;&lt;br/&gt;Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â cÂ =Â -&lt;span&gt;1&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Node&amp;lt;E&amp;gt;Â nodeÂ =Â &lt;span&gt;new&lt;/span&gt;Â Node&amp;lt;E&amp;gt;(e);&lt;br/&gt;Â Â Â Â &lt;span&gt;final&lt;/span&gt;Â ReentrantLockÂ putLockÂ =Â &lt;span&gt;this&lt;/span&gt;.putLock;&lt;br/&gt;Â Â Â Â putLock.lock();&lt;br/&gt;Â Â Â Â &lt;span&gt;try&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//å¹¶å‘æƒ…å†µï¼Œå†æ¬¡åˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦å·²æ»¡&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (count.get()Â &amp;lt;Â capacity)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â enqueue(node);&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//æ³¨æ„è¿™é‡Œè·å–çš„æ˜¯æœªæ·»åŠ å…ƒç´ å‰çš„å¯¹åˆ—é•¿åº¦&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â cÂ =Â count.getAndIncrement();&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (cÂ +Â &lt;span&gt;1&lt;/span&gt;Â &amp;lt;Â capacity)&lt;span&gt;//æœªæ»¡&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â notFull.signal();&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â }Â &lt;span&gt;finally&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â putLock.unlock();&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (cÂ ==Â &lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â Â Â signalNotEmpty();&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â cÂ &amp;gt;=Â &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;offer&lt;/code&gt;æ–¹æ³•ä¸­ï¼Œé¦–å…ˆåˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦å·²æ»¡ï¼Œæœªæ»¡æƒ…å†µä¸‹å°†å…ƒç´ å°è£…æˆ&lt;code&gt;Node&lt;/code&gt;å¯¹è±¡ï¼Œå°è¯•è·å–æ’å…¥é”ï¼Œåœ¨è·å–é”åä¼šå†è¿›è¡Œä¸€æ¬¡é˜Ÿåˆ—å·²æ»¡åˆ¤æ–­ï¼Œå¦‚æœå·²æ»¡åˆ™ç›´æ¥é‡Šæ”¾é”ã€‚åœ¨æŒæœ‰é”ä¸”é˜Ÿåˆ—æœªæ»¡çš„æƒ…å†µä¸‹ï¼Œè°ƒç”¨&lt;code&gt;enqueue&lt;/code&gt;å…¥é˜Ÿæ–¹æ³•ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;enqueue&lt;/code&gt;æ–¹æ³•çš„å®ç°ä¹Ÿéå¸¸çš„ç®€å•ï¼Œå°†å½“å‰å°¾èŠ‚ç‚¹çš„&lt;code&gt;next&lt;/code&gt;æŒ‡é’ˆæŒ‡å‘æ–°èŠ‚ç‚¹ï¼Œå†æŠŠ&lt;code&gt;last&lt;/code&gt;æŒ‡å‘æ–°èŠ‚ç‚¹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;enqueue&lt;/span&gt;&lt;span&gt;(Node&amp;lt;E&amp;gt;Â node)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â lastÂ =Â last.nextÂ =Â node;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”»ä¸€å¼ å›¾ï¼Œæ–¹ä¾¿ä½ ç†è§£ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.3181818181818182&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/zpom4BeZSicbHMNJReUCPWD7YZicg2iazjB7dVNXwG9IwKibXCkicH94Zjo2ssvxqRfuWVaPjB77JJGbf2z6pgtWTqA/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;880&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å®Œæˆå…¥é˜Ÿåï¼Œåˆ¤æ–­é˜Ÿåˆ—æ˜¯å¦å·²æ»¡ï¼Œå¦‚æœæœªæ»¡åˆ™è°ƒç”¨&lt;code&gt;notFull.signal()&lt;/code&gt;ï¼Œå”¤é†’ç­‰å¾…å°†å…ƒç´ æ’å…¥é˜Ÿåˆ—çš„çº¿ç¨‹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;span&gt;é¢è¯•å®˜ï¼šæˆ‘è®°å¾—åœ¨&lt;/span&gt;&lt;/strong&gt;&lt;code&gt;ArrayBlockingQueue&lt;/code&gt;&lt;strong&gt;&lt;span&gt;é‡Œæ’å…¥å…ƒç´ åï¼Œæ˜¯è°ƒç”¨çš„&lt;/span&gt;&lt;/strong&gt;&lt;code&gt;notEmpty.signal()&lt;/code&gt;&lt;span&gt;&lt;strong&gt;ï¼Œæ€ä¹ˆè¿™é‡Œè¿˜ä¸ä¸€æ ·äº†ï¼Ÿ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Hydraï¼šè¯´åˆ°è¿™ï¼Œå°±ä¸å¾—ä¸å†æä¸€ä¸‹ä½¿ç”¨ä¸¤æŠŠé”æ¥åˆ†åˆ«æ§åˆ¶æ’å…¥å’Œè·å–å…ƒç´ çš„å¥½å¤„äº†ã€‚åœ¨&lt;code&gt;ArrayBlockingQueue&lt;/code&gt;ä¸­ï¼Œä½¿ç”¨äº†åŒä¸€æŠŠé”å¯¹å…¥é˜Ÿå’Œå‡ºé˜Ÿè¿›è¡Œæ§åˆ¶ï¼Œé‚£ä¹ˆå¦‚æœåœ¨æ’å…¥å…ƒç´ åå†å”¤é†’æ’å…¥çº¿ç¨‹ï¼Œé‚£ä¹ˆå¾ˆæœ‰å¯èƒ½ç­‰å¾…è·å–å…ƒç´ çš„çº¿ç¨‹å°±ä¸€ç›´å¾—ä¸åˆ°å”¤é†’ï¼Œé€ æˆç­‰å¾…æ—¶é—´è¿‡é•¿ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€Œåœ¨&lt;code&gt;LinkedBlockingQueue&lt;/code&gt;ä¸­ï¼Œåˆ†åˆ«ä½¿ç”¨äº†å…¥é˜Ÿé”&lt;code&gt;putLock&lt;/code&gt;å’Œå‡ºé˜Ÿé”&lt;code&gt;takeLock&lt;/code&gt;ï¼Œæ’å…¥çº¿ç¨‹å’Œè·å–çº¿ç¨‹æ˜¯ä¸ä¼šäº’æ–¥çš„ã€‚æ‰€ä»¥æ’å…¥çº¿ç¨‹å¯ä»¥åœ¨è¿™é‡Œä¸æ–­çš„å”¤é†’å…¶ä»–çš„æ’å…¥çº¿ç¨‹ï¼Œè€Œæ— éœ€æ‹…å¿ƒæ˜¯å¦ä¼šä½¿è·å–çº¿ç¨‹ç­‰å¾…æ—¶é—´è¿‡é•¿ï¼Œä»è€Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†ååé‡ã€‚å½“ç„¶äº†ï¼Œå› ä¸º&lt;code&gt;offer&lt;/code&gt;æ–¹æ³•æ˜¯éé˜»å¡çš„ï¼Œå¹¶ä¸ä¼šæŒ‚èµ·é˜»å¡çº¿ç¨‹ï¼Œæ‰€ä»¥è¿™é‡Œå”¤é†’çš„æ˜¯é˜»å¡æ’å…¥çš„&lt;code&gt;put&lt;/code&gt;æ–¹æ³•çš„çº¿ç¨‹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;é¢è¯•å®˜ï¼šé‚£æ¥ç€å¾€ä¸‹çœ‹ï¼Œä¸ºä»€ä¹ˆè¦åœ¨&lt;/strong&gt;&lt;/span&gt;&lt;code&gt;c&lt;/code&gt;&lt;span&gt;&lt;strong&gt;ç­‰äº0çš„æƒ…å†µä¸‹æ‰å»å”¤é†’&lt;/strong&gt;&lt;/span&gt;&lt;code&gt;notEmpty&lt;/code&gt;&lt;span&gt;&lt;strong&gt;ä¸­çš„ç­‰å¾…è·å–å…ƒç´ çš„çº¿ç¨‹ï¼Ÿ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Hydraï¼šå…¶å®è·å–å…ƒç´ çš„æ–¹æ³•å’Œä¸Šé¢æ’å…¥å…ƒç´ çš„æ–¹æ³•æ˜¯ä¸€ä¸ªæ¨¡å¼çš„ï¼Œåªè¦æœ‰ä¸€ä¸ªè·å–çº¿ç¨‹åœ¨æ‰§è¡Œæ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šä¸æ–­çš„é€šè¿‡&lt;code&gt;notEmpty.signal()&lt;/code&gt;å”¤é†’å…¶ä»–çš„è·å–çº¿ç¨‹ã€‚åªæœ‰å½“&lt;code&gt;c&lt;/code&gt;ç­‰äº0æ—¶ï¼Œæ‰è¯æ˜ä¹‹å‰é˜Ÿåˆ—ä¸­å·²ç»æ²¡æœ‰å…ƒç´ ï¼Œè¿™æ—¶å€™è·å–çº¿ç¨‹æ‰å¯èƒ½ä¼šè¢«é˜»å¡ï¼Œåœ¨è¿™ä¸ªæ—¶å€™æ‰éœ€è¦è¢«å”¤é†’ã€‚ä¸Šé¢çš„è¿™äº›å¯ä»¥ç”¨ä¸€å¼ å›¾æ¥è¯´æ˜ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.6583850931677019&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/zpom4BeZSicbHMNJReUCPWD7YZicg2iazjBjT5eUcUIAP5Tz6Lg2V8jkHJAX75s3JetJ3IrpvdMEkgKN4PEkTe2vQ/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;805&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±äºæˆ‘ä»¬ä¹‹å‰è¯´è¿‡ï¼Œé˜Ÿåˆ—ä¸­çš„&lt;code&gt;head&lt;/code&gt;èŠ‚ç‚¹å¯ä»¥è®¤ä¸ºæ˜¯ä¸å­˜å‚¨æ•°æ®çš„æ ‡å¿—æ€§èŠ‚ç‚¹ï¼Œæ‰€ä»¥å¯ä»¥ç®€å•çš„è®¤ä¸ºå‡ºé˜Ÿæ—¶ç›´æ¥å–å‡ºç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œå½“ç„¶è¿™ä¸ªè¿‡ç¨‹ä¸æ˜¯éå¸¸çš„ä¸¥è°¨ï¼Œæˆ‘ä¼šåœ¨åé¢è®²è§£å‡ºé˜Ÿçš„è¿‡ç¨‹ä¸­å†è¿›è¡Œè¡¥å……è¯´æ˜ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;é¢è¯•å®˜ï¼šé‚£ä¹ˆé˜»å¡æ–¹æ³•&lt;/strong&gt;&lt;/span&gt;&lt;code&gt;put&lt;/code&gt;&lt;strong&gt;&lt;span&gt;å’Œå®ƒæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Hydraï¼š&lt;code&gt;put&lt;/code&gt;å’Œ&lt;code&gt;offer&lt;/code&gt;æ–¹æ³•æ•´ä½“æ€è·¯ä¸€è‡´ï¼Œä¸åŒçš„æ˜¯åŠ é”æ˜¯ä½¿ç”¨çš„æ˜¯å¯è¢«ä¸­æ–­çš„æ–¹å¼ï¼Œå¹¶ä¸”å½“é˜Ÿåˆ—ä¸­å…ƒç´ å·²æ»¡æ—¶ï¼Œå°†çº¿ç¨‹åŠ å…¥&lt;code&gt;notFull&lt;/code&gt;ç­‰å¾…é˜Ÿåˆ—ä¸­è¿›è¡Œç­‰å¾…ï¼Œä»£ç ä¸­ä½“ç°åœ¨ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;while&lt;/span&gt;Â (count.get()Â ==Â capacity)Â {&lt;br/&gt;Â Â Â Â notFull.await();&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªè¿‡ç¨‹ä½“ç°åœ¨ä¸Šé¢é‚£å¼ å›¾çš„&lt;code&gt;notFull&lt;/code&gt;ç­‰å¾…é˜Ÿåˆ—ä¸­çš„å…ƒç´ ä¸Šï¼Œå°±ä¸é‡å¤è¯´æ˜äº†ã€‚å¦å¤–ï¼Œå’Œ&lt;code&gt;put&lt;/code&gt;æ–¹æ³•æ¯”è¾ƒç±»ä¼¼çš„ï¼Œè¿˜æœ‰ä¸€ä¸ªæºå¸¦ç­‰å¾…æ—¶é—´å‚æ•°çš„&lt;code&gt;offer&lt;/code&gt;æ–¹æ³•ï¼Œå¯ä»¥è¿›è¡Œæœ‰é™æ—¶é—´å†…çš„é˜»å¡æ·»åŠ ï¼Œå½“è¶…æ—¶åæ”¾å¼ƒæ’å…¥å…ƒç´ ï¼Œæˆ‘ä»¬åªçœ‹å’Œ&lt;code&gt;offer&lt;/code&gt;æ–¹æ³•ä¸åŒéƒ¨åˆ†çš„ä»£ç ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;boolean&lt;/span&gt;Â &lt;span&gt;offer&lt;/span&gt;&lt;span&gt;(EÂ e,Â &lt;span&gt;long&lt;/span&gt;Â timeout,Â TimeUnitÂ unit)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â ...&lt;br/&gt;Â Â Â Â &lt;span&gt;long&lt;/span&gt;Â nanosÂ =Â unit.toNanos(timeout);&lt;span&gt;//è½¬æ¢ä¸ºçº³ç§’&lt;/span&gt;&lt;br/&gt;Â Â Â Â ...&lt;br/&gt;Â Â Â Â &lt;span&gt;while&lt;/span&gt;Â (count.get()Â ==Â capacity)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (nanosÂ &amp;lt;=Â &lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;false&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â nanosÂ =Â notFull.awaitNanos(nanos);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â enqueue(&lt;span&gt;new&lt;/span&gt;Â Node&amp;lt;E&amp;gt;(e));Â Â Â Â &lt;br/&gt;Â Â Â Â ...&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;awaitNanos&lt;/code&gt;æ–¹æ³•åœ¨&lt;code&gt;await&lt;/code&gt;æ–¹æ³•çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†è¶…æ—¶è·³å‡ºçš„æœºåˆ¶ï¼Œä¼šåœ¨å¾ªç¯ä¸­è®¡ç®—æ˜¯å¦åˆ°è¾¾é¢„è®¾çš„è¶…æ—¶æ—¶é—´ã€‚å¦‚æœåœ¨åˆ°è¾¾è¶…æ—¶æ—¶é—´å‰è¢«å”¤é†’ï¼Œé‚£ä¹ˆä¼šè¿”å›è¶…æ—¶æ—¶é—´å‡å»å·²ç»æ¶ˆè€—çš„æ—¶é—´ã€‚æ— è®ºæ˜¯è¢«å…¶ä»–çº¿ç¨‹å”¤é†’è¿”å›ï¼Œè¿˜æ˜¯åˆ°è¾¾æŒ‡å®šçš„è¶…æ—¶æ—¶é—´è¿”å›ï¼Œåªè¦æ–¹æ³•è¿”å›å€¼å°äºç­‰äº0ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºå®ƒå·²ç»è¶…æ—¶ï¼Œæœ€ç»ˆç›´æ¥è¿”å›&lt;code&gt;false&lt;/code&gt;ç»“æŸã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.46511627906976744&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/zpom4BeZSicbHMNJReUCPWD7YZicg2iazjBGFN6oNp4OvU99HoY7rIPsdmj02cgwZyofKCWUQgnzicCocgTOvxP7lg/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;860&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;é¢è¯•å®˜ï¼šè´¹è¿™ä¹ˆå¤§é¡¿åŠŸå¤«æ‰æŠŠæ’å…¥è®²æ˜ç™½ï¼Œæˆ‘å…ˆå–å£æ°´ï¼Œä½ æ¥ç€è¯´è·å–å…ƒç´ æ–¹æ³•&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Hydraï¼šâ€¦â€¦é‚£å…ˆçœ‹éé˜»å¡çš„&lt;code&gt;poll&lt;/code&gt;æ–¹æ³•&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â EÂ &lt;span&gt;poll&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;final&lt;/span&gt;Â AtomicIntegerÂ countÂ =Â &lt;span&gt;this&lt;/span&gt;.count;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (count.get()Â ==Â &lt;span&gt;0&lt;/span&gt;)&lt;span&gt;//é˜Ÿåˆ—ä¸ºç©º&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;Â Â Â Â EÂ xÂ =Â &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â cÂ =Â -&lt;span&gt;1&lt;/span&gt;;&lt;br/&gt;Â Â Â Â &lt;span&gt;final&lt;/span&gt;Â ReentrantLockÂ takeLockÂ =Â &lt;span&gt;this&lt;/span&gt;.takeLock;&lt;br/&gt;Â Â Â Â takeLock.lock();&lt;br/&gt;Â Â Â Â &lt;span&gt;try&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (count.get()Â &amp;gt;Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;span&gt;//é˜Ÿåˆ—éç©º&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â xÂ =Â dequeue();&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//å‡ºé˜Ÿå‰é˜Ÿåˆ—é•¿é˜Ÿ&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â cÂ =Â count.getAndDecrement();&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (cÂ &amp;gt;Â &lt;span&gt;1&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â notEmpty.signal();&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â }Â &lt;span&gt;finally&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â takeLock.unlock();&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (cÂ ==Â capacity)&lt;br/&gt;Â Â Â Â Â Â Â Â signalNotFull();&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â x;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡ºé˜Ÿçš„é€»è¾‘å’Œå…¥é˜Ÿçš„éå¸¸ç›¸ä¼¼ï¼Œå½“é˜Ÿåˆ—éç©ºæ—¶å°±æ‰§è¡Œ&lt;code&gt;dequeue&lt;/code&gt;è¿›è¡Œå‡ºé˜Ÿæ“ä½œï¼Œå®Œæˆå‡ºé˜Ÿåå¦‚æœé˜Ÿåˆ—ä»ç„¶éç©ºï¼Œé‚£ä¹ˆå”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸­æŒ‚èµ·çš„è·å–å…ƒç´ çš„çº¿ç¨‹ã€‚å¹¶ä¸”å½“å‡ºé˜Ÿå‰çš„å…ƒç´ æ•°é‡ç­‰äºé˜Ÿåˆ—é•¿åº¦æ—¶ï¼Œåœ¨å‡ºé˜Ÿåå”¤é†’ç­‰å¾…é˜Ÿåˆ—ä¸Šçš„æ·»åŠ çº¿ç¨‹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡ºé˜Ÿæ–¹æ³•&lt;code&gt;dequeue&lt;/code&gt;çš„æºç å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;private&lt;/span&gt;Â EÂ &lt;span&gt;dequeue&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Node&amp;lt;E&amp;gt;Â hÂ =Â head;&lt;br/&gt;Â Â Â Â Node&amp;lt;E&amp;gt;Â firstÂ =Â h.next;&lt;br/&gt;Â Â Â Â h.nextÂ =Â h;Â &lt;span&gt;//Â helpÂ GC&lt;/span&gt;&lt;br/&gt;Â Â Â Â headÂ =Â first;&lt;br/&gt;Â Â Â Â EÂ xÂ =Â first.item;&lt;br/&gt;Â Â Â Â first.itemÂ =Â &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â x;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¹‹å‰æåˆ°è¿‡ï¼Œå¤´èŠ‚ç‚¹&lt;code&gt;head&lt;/code&gt;å¹¶ä¸å­˜å‚¨æ•°æ®ï¼Œå®ƒçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ‰æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚åœ¨å‡ºé˜Ÿæ“ä½œä¸­ï¼Œå…ˆå¾—åˆ°å¤´ç»“ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹&lt;code&gt;first&lt;/code&gt;èŠ‚ç‚¹ï¼Œå°†å½“å‰å¤´ç»“ç‚¹çš„&lt;code&gt;next&lt;/code&gt;æŒ‡é’ˆæŒ‡å‘è‡ªå·±ï¼Œä»£ç ä¸­æœ‰ä¸€ä¸ªç®€å•çš„æ³¨é‡Šæ˜¯&lt;code&gt;help gc&lt;/code&gt;ï¼Œä¸ªäººç†è§£è¿™é‡Œæ˜¯ä¸ºäº†é™ä½&lt;code&gt;gc&lt;/code&gt;ä¸­çš„å¼•ç”¨è®¡æ•°ï¼Œæ–¹ä¾¿å®ƒæ›´æ—©è¢«å›æ”¶ã€‚ä¹‹åå†å°†æ–°çš„å¤´èŠ‚ç‚¹æŒ‡å‘&lt;code&gt;first&lt;/code&gt;ï¼Œå¹¶è¿”å›æ¸…ç©ºä¸º&lt;code&gt;null&lt;/code&gt;å‰çš„å†…å®¹ã€‚ä½¿ç”¨å›¾æ¥è¡¨ç¤ºæ˜¯è¿™æ ·çš„ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.3584905660377358&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/zpom4BeZSicbHMNJReUCPWD7YZicg2iazjBI3fquOrcUnwwrZ6uRPUHVgRqWFqRfC8aWGyrIjQytfcSWzcArbewIA/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;795&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;span&gt;é¢è¯•å®˜ï¼šï¼ˆçœ‹çœ‹æ‰‹è¡¨ï¼‰&lt;/span&gt;&lt;/strong&gt;&lt;code&gt;take&lt;/code&gt;&lt;span&gt;&lt;strong&gt;æ–¹æ³•çš„æ•´ä½“é€»è¾‘ä¹Ÿå·®ä¸å¤šï¼Œèƒ½ç®€å•æ¦‚æ‹¬ä¸€ä¸‹å—&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Hydraï¼šé˜»å¡æ–¹æ³•&lt;code&gt;take&lt;/code&gt;æ–¹æ³•å’Œ&lt;code&gt;poll&lt;/code&gt;çš„æ€è·¯åŸºæœ¬ä¸€è‡´ï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥è¢«ä¸­æ–­çš„é˜»å¡è·å–æ–¹æ³•ï¼Œåœ¨é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œä¼šæŒ‚èµ·å½“å‰çº¿ç¨‹ï¼Œå°†å®ƒæ·»åŠ åˆ°æ¡ä»¶å¯¹è±¡&lt;code&gt;notEmpty&lt;/code&gt;çš„ç­‰å¾…é˜Ÿåˆ—ä¸­ï¼Œç­‰å¾…å…¶ä»–çº¿ç¨‹å”¤é†’ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;span&gt;é¢è¯•å®˜ï¼šå†ç»™ä½ ä¸€å¥è¯çš„æ—¶é—´ï¼Œæ€»ç»“ä¸€ä¸‹å®ƒå’Œ&lt;/span&gt;&lt;/strong&gt;&lt;code&gt;ArrayBlockingQueue&lt;/code&gt;&lt;strong&gt;&lt;span&gt;çš„å¼‚åŒï¼Œæˆ‘è¦ä¸‹ç­å›å®¶äº†&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Hydraï¼šå¥½å§ï¼Œæˆ‘æ€»ç»“ä¸€ä¸‹ï¼Œæœ‰ä¸‹é¢å‡ ç‚¹ï¼š&lt;/p&gt;&lt;section&gt;1ã€é˜Ÿåˆ—é•¿åº¦ä¸åŒï¼Œ&lt;code&gt;ArrayBlockingQueue&lt;/code&gt;åˆ›å»ºæ—¶éœ€æŒ‡å®šé•¿åº¦å¹¶ä¸”ä¸å¯ä¿®æ”¹ï¼Œè€Œ&lt;code&gt;LinkedBlockingQueue&lt;/code&gt;å¯ä»¥æŒ‡å®šä¹Ÿå¯ä»¥ä¸æŒ‡å®šé•¿åº¦&lt;/section&gt;&lt;section&gt;2ã€å­˜å‚¨æ–¹å¼ä¸åŒï¼Œ&lt;code&gt;ArrayBlockingQueue&lt;/code&gt;ä½¿ç”¨æ•°ç»„ï¼Œè€Œ&lt;code&gt;LinkedBlockingQueue&lt;/code&gt;ä½¿ç”¨&lt;code&gt;Node&lt;/code&gt;èŠ‚ç‚¹çš„é“¾è¡¨&lt;/section&gt;&lt;section&gt;3ã€&lt;code&gt;ArrayBlockingQueue&lt;/code&gt;ä½¿ç”¨ä¸€æŠŠé”æ¥æ§åˆ¶å…ƒç´ çš„æ’å…¥å’Œç§»é™¤ï¼Œè€Œ&lt;code&gt;LinkedBlockingQueue&lt;/code&gt;å°†å…¥é˜Ÿé”å’Œå‡ºé˜Ÿé”åˆ†ç¦»ï¼Œæé«˜äº†å¹¶å‘æ€§èƒ½&lt;/section&gt;&lt;section&gt;4ã€&lt;code&gt;ArrayBlockingQueue&lt;/code&gt;é‡‡ç”¨æ•°ç»„å­˜å‚¨å…ƒç´ ï¼Œå› æ­¤åœ¨æ’å…¥å’Œç§»é™¤è¿‡ç¨‹ä¸­ä¸éœ€è¦ç”Ÿæˆé¢å¤–å¯¹è±¡ï¼Œ&lt;code&gt;LinkedBlockingQueue&lt;/code&gt;ä¼šç”Ÿæˆæ–°çš„&lt;code&gt;Node&lt;/code&gt;èŠ‚ç‚¹ï¼Œå¯¹&lt;code&gt;gc&lt;/code&gt;ä¼šæœ‰å½±å“&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;é¢è¯•å®˜ï¼šæ˜å¤©ä¸Šåˆ9ç‚¹ï¼Œè€åœ°æ–¹ï¼Œæˆ‘ä»¬æŠŠé˜Ÿåˆ—é—®é¢˜è´¯å½»åˆ°åº•&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Hydraï¼šâ€¦â€¦&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>c1bc1d74937a43c6b9fff6a91f94cc23</guid>
<title>Goroutine Local Storage çš„ä¸€äº›å®ç°æ–¹æ¡ˆå’Œå¿…è¦æ€§è®¨è®º</title>
<link>https://toutiao.io/k/18kb0os</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;Javaçš„ThreadLocalæ˜¯Javaä¸ºæ¯ä¸ªçº¿ç¨‹æä¾›çš„ä¸“ç”¨å­˜å‚¨ï¼ŒæŠŠä¸€äº›ä¿¡æ¯æ”¾åœ¨ThreadLocalä¸Šï¼Œå¯ä»¥ç”¨äºæ¥ç®€åŒ–ä¸Šå±‚åº”ç”¨çš„APIä½¿ç”¨ã€‚ä¸€ä¸ªæ˜¾è‘—çš„åº”ç”¨åœºæ™¯æ˜¯ï¼Œæœ‰äº†ThreadLocalåï¼Œå°±ä¸éœ€è¦åœ¨è°ƒç”¨æ ˆé‡Œçš„æ¯ä¸ªå‡½æ•°ä¸Šéƒ½å¢åŠ é¢å¤–çš„å‚æ•°æ¥ä¼ é€’ä¸€äº›ä¸è°ƒç”¨é“¾å’Œæ—¥å¿—é“¾è·¯è¿½è¸ªç›¸å…³çš„ä¸Šä¸‹æ–‡ä¿¡æ¯äº†ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Go Team é’ˆå¯¹å¢åŠ LocalStorageçš„ææ¡ˆï¼Œæ˜ç¡®è¯´æ˜è¿‡ï¼Œä»–ä»¬æ›´æ¨èæ˜¾å¼åœ°ä½¿ç”¨ Context å‚æ•°è€Œä¸æ˜¯ä½¿ç”¨LocalStorageæ¥è¿›è¡Œä¸Šä¸‹æ–‡ä¿¡æ¯çš„ä¼ é€’ã€‚ç¤¾åŒºé‡Œå€’æ˜¯æœ‰å‡ ä¸ªGLSï¼ˆGoroutine Local Storageï¼‰çš„å®ç°æ–¹æ¡ˆï¼Œ&lt;strong&gt;æˆ‘ä»¬å›¢é˜Ÿä¹Ÿåœ¨ç³»ç»Ÿé‡Œä½¿ç”¨äº†GLSï¼Œåº”ç”¨åå¹¶æ²¡æœ‰æ˜æ˜¾çš„æ€§èƒ½é™ä½ï¼Œä¸»è¦è¿˜æ˜¯ä¸æƒ³åœ¨æ¯ä¸ªå‡½æ•°å®šä¹‰ä¸Šéƒ½æ·»åŠ å‚æ•°æ¥ä¼ é€’ç”¨æ¥åšæ—¥å¿—é“¾è·¯è¿½è¸ªçš„TraceIdï¼Œä½†æ˜¯å¹¶ä¸å»ºè®®ä¸šåŠ¡é€»è¾‘ä¾èµ–è¿™äº›ä¸‰æ–¹çš„GLSåº“&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å…³äºæ˜¯å¦éœ€è¦å¢åŠ GLSçš„è®¨è®ºä»¥åŠGLSå¸¦æ¥çš„æ€§èƒ½å’Œä¸å…¼å®¹é—®é¢˜è¿˜æ˜¯æŒºå¤šçš„ï¼Œæ­£å¥½çœ‹åˆ°ä¸€ç¯‡æ–‡ç« å¯¹ Go è¯­è¨€æ˜¯å¦è¯¥å¼•å…¥GLSçš„è®¨è®ºè¿›è¡Œäº†æ€»ç»“ï¼Œåœ¨è¿™é‡Œåˆ†äº«ç»™å¤§å®¶ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;åŸæ–‡ä½œè€…ï¼šå…°é™µå­&lt;/p&gt;&lt;p&gt;åŸæ–‡é“¾æ¥ï¼šhttp://lanlingzi.cn/post/technical/2016/0813_go_gls/&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Â èƒŒæ™¯&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ€è¿‘åœ¨è®¾è®¡è°ƒç”¨é“¾ä¸æ—¥å¿—è·Ÿè¸ªçš„APIï¼Œå‘ç°ç›¸æ¯”äºJavaä¸C++ï¼ŒGoè¯­è¨€ä¸­æ²¡æœ‰åŸç”Ÿçš„çº¿ç¨‹ï¼ˆåç¨‹ï¼‰ä¸Šä¸‹æ–‡ï¼Œä¹Ÿä¸æ”¯æŒTLSï¼ˆThread Local Storageï¼‰ï¼Œæ›´æ²¡æœ‰æš´éœ²APIè·å–Goroutineçš„Idï¼ˆåé¢ç®€ç§°&lt;code&gt;GoId&lt;/code&gt;ï¼‰ã€‚è¿™å¯¼è‡´æ— æ³•åƒJavaä¸€æ ·ï¼ŒæŠŠä¸€äº›ä¿¡æ¯æ”¾åœ¨TLSä¸Šï¼Œç”¨äºæ¥ç®€åŒ–ä¸Šå±‚åº”ç”¨çš„APIä½¿ç”¨ï¼šä¸éœ€è¦åœ¨è°ƒç”¨æ ˆçš„å‡½æ•°ä¸­é€šè¿‡ä¼ é€’å‚æ•°æ¥ä¼ é€’è°ƒç”¨é“¾ä¸æ—¥å¿—è·Ÿè¸ªçš„ä¸€äº›ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨Javaä¸C++ä¸­ï¼ŒTLSæ˜¯ä¸€ç§æœºåˆ¶ï¼ŒæŒ‡å­˜å‚¨åœ¨çº¿ç¨‹ç¯å¢ƒå†…çš„ä¸€ä¸ªç»“æ„ï¼Œç”¨æ¥å­˜æ”¾è¯¥çº¿ç¨‹å†…ç‹¬äº«çš„æ•°æ®ã€‚è¿›ç¨‹å†…çš„çº¿ç¨‹ä¸èƒ½è®¿é—®ä¸å±äºè‡ªå·±çš„TLSï¼Œè¿™å°±ä¿è¯äº†TLSå†…çš„æ•°æ®åœ¨çº¿ç¨‹å†…æ˜¯å…¨å±€å…±äº«çš„ï¼Œè€Œå¯¹äºçº¿ç¨‹å¤–å´æ˜¯ä¸å¯è§çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨Javaä¸­ï¼ŒJDKåº“æä¾›&lt;code&gt;Thread.CurrentThread()&lt;/code&gt;æ¥è·å–å½“å‰çº¿ç¨‹å¯¹è±¡ï¼Œæä¾›&lt;code&gt;ThreadLocal&lt;/code&gt;æ¥å­˜å‚¨ä¸è·å–çº¿ç¨‹å±€éƒ¨å˜é‡ã€‚ç”±äºJavaèƒ½é€šè¿‡&lt;code&gt;Thread.CurrentThread()&lt;/code&gt;è·å–å½“å‰çº¿ç¨‹ï¼Œå…¶å®ç°çš„æ€è·¯å°±å¾ˆç®€å•äº†ï¼Œåœ¨ThreadLocalç±»ä¸­æœ‰ä¸€ä¸ªMapï¼Œç”¨äºå­˜å‚¨æ¯ä¸€ä¸ªçº¿ç¨‹çš„å˜é‡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ThreadLocalçš„APIæä¾›äº†å¦‚ä¸‹çš„4ä¸ªæ–¹æ³•ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;public T get()&lt;br/&gt;protected  T initialValue()&lt;br/&gt;public void remove()&lt;br/&gt;public void set(T value)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;T get()&lt;/code&gt;:è¿”å›æ­¤çº¿ç¨‹å±€éƒ¨å˜é‡çš„å½“å‰çº¿ç¨‹å‰¯æœ¬ä¸­çš„å€¼ï¼Œå¦‚æœè¿™æ˜¯çº¿ç¨‹ç¬¬ä¸€æ¬¡è°ƒç”¨è¯¥æ–¹æ³•ï¼Œåˆ™åˆ›å»ºå¹¶åˆå§‹åŒ–æ­¤å‰¯æœ¬ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;protected T initialValue()&lt;/code&gt;: è¿”å›æ­¤çº¿ç¨‹å±€éƒ¨å˜é‡çš„å½“å‰çº¿ç¨‹çš„åˆå§‹å€¼ã€‚æœ€å¤šåœ¨æ¯æ¬¡è®¿é—®çº¿ç¨‹æ¥è·å¾—æ¯ä¸ªçº¿ç¨‹å±€éƒ¨å˜é‡æ—¶è°ƒç”¨æ­¤æ–¹æ³•ä¸€æ¬¡ï¼Œå³çº¿ç¨‹ç¬¬ä¸€æ¬¡ä½¿ç”¨&lt;code&gt;get()&lt;/code&gt;æ–¹æ³•è®¿é—®å˜é‡çš„æ—¶å€™ã€‚å¦‚æœçº¿ç¨‹å…ˆäº&lt;code&gt;get&lt;/code&gt;æ–¹æ³•è°ƒç”¨&lt;code&gt;set(T)&lt;/code&gt;æ–¹æ³•ï¼Œåˆ™ä¸ä¼šåœ¨çº¿ç¨‹ä¸­å†è°ƒç”¨&lt;code&gt;initialValue&lt;/code&gt;æ–¹æ³•ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;void remove()&lt;/code&gt;: ç§»é™¤æ­¤çº¿ç¨‹å±€éƒ¨å˜é‡çš„å€¼ã€‚è¿™å¯èƒ½æœ‰åŠ©äºå‡å°‘çº¿ç¨‹å±€éƒ¨å˜é‡çš„å­˜å‚¨éœ€æ±‚ã€‚å¦‚æœå†æ¬¡è®¿é—®æ­¤çº¿ç¨‹å±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆåœ¨é»˜è®¤æƒ…å†µä¸‹å®ƒå°†æ‹¥æœ‰å…¶ &lt;code&gt;initialValue&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;void set(T value)&lt;/code&gt;å°†æ­¤çº¿ç¨‹å±€éƒ¨å˜é‡çš„å½“å‰çº¿ç¨‹å‰¯æœ¬ä¸­çš„å€¼è®¾ç½®ä¸ºæŒ‡å®šå€¼ã€‚è®¸å¤šåº”ç”¨ç¨‹åºä¸éœ€è¦è¿™é¡¹åŠŸèƒ½ï¼Œå®ƒä»¬åªä¾èµ–äº&lt;code&gt;initialValue()&lt;/code&gt;æ–¹æ³•æ¥è®¾ç½®çº¿ç¨‹å±€éƒ¨å˜é‡çš„å€¼ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨Goè¯­è¨€ä¸­ï¼Œè€ŒGoogleæä¾›çš„è§£å†³æ–¹æ³•æ˜¯é‡‡ç”¨&lt;code&gt;golang.org/x/net/context&lt;/code&gt;åŒ…æ¥ä¼ é€’GoRoutineçš„ä¸Šä¸‹æ–‡ã€‚å¯¹Goçš„Contextçš„æ·±å…¥äº†è§£å¯å‚è€ƒæˆ‘ä¹‹å‰çš„åˆ†æï¼š&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNTY5MzU2MA==&amp;amp;mid=2247484263&amp;amp;idx=1&amp;amp;sn=9e51fea77e661353a85583137eb5dedd&amp;amp;chksm=fa80d2f0cdf75be6d6183edfdec4413ae1ecb63873063851f4e32004c50fbec7765d8aa9113e&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ç†è§£Go Contextæœºåˆ¶&quot; data-itemshowtype=&quot;11&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;ç†è§£Go Contextæœºåˆ¶&lt;/a&gt;ã€‚&lt;code&gt;Context&lt;/code&gt;ä¹Ÿæ˜¯èƒ½å­˜å‚¨Goroutineä¸€äº›æ•°æ®è¾¾åˆ°å…±äº«ï¼Œä½†å®ƒæä¾›çš„æ¥å£æ˜¯&lt;code&gt;WithValue&lt;/code&gt;å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„&lt;code&gt;Context&lt;/code&gt;å¯¹è±¡ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;func WithValue(parent Context, key interface{}, val interface{}) Context {&lt;br/&gt;return &amp;amp;valueCtx{parent, key, val}&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;type valueCtx struct {&lt;br/&gt;Context&lt;br/&gt;key, val interface{}&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;func (c *valueCtx) Value(key interface{}) interface{} {&lt;br/&gt;if c.key == key {&lt;br/&gt;return c.val&lt;br/&gt;}&lt;br/&gt;return c.Context.Value(key)&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»ä¸Šé¢ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œ&lt;code&gt;Context&lt;/code&gt;è®¾ç½®ä¸€æ¬¡Valueï¼Œå°±ä¼šäº§ç”Ÿä¸€ä¸ª&lt;code&gt;Context&lt;/code&gt;å¯¹è±¡ï¼Œè·å–Valueæ˜¯å…ˆæ‰¾å½“å‰&lt;code&gt;Context&lt;/code&gt;å­˜å‚¨çš„å€¼ï¼Œè‹¥æ²¡æœ‰å†å‘çˆ¶ä¸€çº§æŸ¥æ‰¾ã€‚è·å–&lt;code&gt;Value&lt;/code&gt;å¯ä»¥è¯´æ˜¯å¤šGoroutineè®¿é—®å®‰å…¨ï¼Œå› ä¸ºå®ƒçš„æ¥å£è®¾è®¡ä¸Šï¼Œæ˜¯åªä¸€ä¸ªGoroutine&lt;strong&gt;ä¸€æ¬¡&lt;/strong&gt;è®¾ç½®&lt;code&gt;Key/Value&lt;/code&gt;ï¼Œå…¶å®ƒå¤šGoroutineåªèƒ½è¯»å–&lt;code&gt;Key&lt;/code&gt;çš„&lt;code&gt;Value&lt;/code&gt;ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ä¸ºä»€ä¹ˆæ— è·å–GoIdæ¥å£&lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;This, among other reasons, to prevent programmers for simulating thread local storage using the goroutine id as a key.&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®˜æ–¹è¯´ï¼Œå°±ä¸ºäº†é¿å…é‡‡ç”¨&lt;code&gt;Goroutine Id&lt;/code&gt;å½“æˆ&lt;code&gt;Thread Local Storage&lt;/code&gt;çš„&lt;code&gt;Key&lt;/code&gt;ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;Please donâ€™t use goroutine local storage. Itâ€™s highly discouraged. In fact, IIRC, we used to expose Goid, but it is hidden since we donâ€™t want people to do this.&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”¨æˆ·ç»å¸¸ä½¿ç”¨GoIdæ¥å®ç°&lt;code&gt;goroutine local storage&lt;/code&gt;ï¼Œè€ŒGoè¯­è¨€ä¸å¸Œæœ›ç”¨æˆ·ä½¿ç”¨&lt;code&gt;goroutine local storage&lt;/code&gt;ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;when goroutine goes away, its goroutine local storage wonâ€™t be GCed. (you can get goid for the current goroutine, but you canâ€™t get a list of all running goroutines)&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸å»ºè®®ä½¿ç”¨&lt;code&gt;goroutine local storage&lt;/code&gt;çš„åŸå› æ˜¯ç”±äºä¸å®¹æ˜“GCï¼Œè™½ç„¶èƒ½è·å½“å‰çš„GoIdï¼Œä½†ä¸èƒ½è·å–å…¶å®ƒæ­£åœ¨è¿è¡Œçš„Goroutineã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;what if handler spawns goroutine itself? the new goroutine suddenly loses access to your goroutine local storage. You can guarantee that your own code wonâ€™t spawn other goroutines, but in general you canâ€™t make sure the standard library or any 3rd party code wonâ€™t do that.&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦ä¸€ä¸ªé‡è¦çš„åŸå› æ˜¯ç”±äºäº§ç”Ÿä¸€ä¸ªGoroutineéå¸¸åœ°å®¹æ˜“ï¼ˆè€Œçº¿ç¨‹é€šç”¨ä¼šé‡‡ç”¨çº¿ç¨‹æ± ï¼‰ï¼Œæ–°äº§ç”Ÿçš„Goroutineä¼šå¤±å»è®¿é—®&lt;code&gt;goroutine local storage&lt;/code&gt;ã€‚éœ€è¦ä¸Šå±‚åº”ç”¨ä¿è¯ä¸ä¼šäº§ç”Ÿæ–°çš„Goroutineï¼Œä½†æˆ‘ä»¬å¾ˆéš¾ç¡®ä¿æ ‡å‡†åº“æˆ–ç¬¬ä¸‰åº“ä¸ä¼šè¿™æ ·åšã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;thread local storage is invented to help reuse bad/legacy code that assumes global state, Go doesnâ€™t have legacy code like that, and you really should design your code so that state is passed explicitly and not as global (e.g. resort to goroutine local storage)&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;TLSçš„åº”ç”¨æ˜¯å¸®åŠ©é‡ç”¨ç°æœ‰é‚£äº›ä¸å¥½ï¼ˆé—ç•™ï¼‰çš„é‡‡ç”¨å…¨å±€çŠ¶æ€çš„ä»£ç ã€‚è€ŒGoè¯­è¨€å»ºè®®æ˜¯é‡æ–°è®¾è®¡ä»£ç ï¼Œé‡‡ç”¨æ˜¾ç¤ºåœ°ä¼ é€’çŠ¶æ€è€Œä¸æ˜¯é‡‡ç”¨å…¨å±€çŠ¶æ€ï¼ˆä¾‹å¦‚é‡‡ç”¨&lt;code&gt;goroutine local storage&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å…¶å®ƒæ‰‹æ®µè·å–GoId&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è™½ç„¶Goè¯­è¨€æœ‰æ„è¯†åœ°éšè—GoIdï¼Œä½†ç›®å‰è¿˜æ˜¯æœ‰æ‰‹æ®µæ¥è·å–GoIdï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ä¿®æ”¹æºä»£ç æš´éœ²GoIdï¼Œä½†Goè¯­è¨€å¯èƒ½éšæ—¶ä¿®æ”¹æºç ï¼Œå¯¼è‡´ä¸å…¼å®¹&lt;/p&gt;&lt;p&gt;åœ¨æ ‡å‡†åº“çš„&lt;code&gt;runtime/proc.go&lt;/code&gt;ï¼ˆGo 1.6.3ï¼‰ä¸­çš„&lt;code&gt;newextram&lt;/code&gt;å‡½æ•°ï¼Œä¼šäº§ç”Ÿä¸ªGoIdï¼š&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;mp.lockedg = gp&lt;br/&gt;gp.lockedm = mp&lt;br/&gt;gp.goid = int64(atomic.Xadd64(&amp;amp;sched.goidgen, 1))&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;é€šè¿‡&lt;code&gt;runtime.Stack&lt;/code&gt;æ¥åˆ†æStackè¾“å‡ºä¿¡æ¯è·å–GoIdã€‚&lt;/p&gt;&lt;p&gt;åœ¨æ ‡å‡†åº“çš„&lt;code&gt;runtime/mprof.go&lt;/code&gt;ï¼ˆGo 1.6.3ï¼‰ä¸­ï¼Œ&lt;code&gt;runtime.Stack&lt;/code&gt;ä¼šè·å–gpå¯¹è±¡(åŒ…å«GoId)å¹¶è¾“å‡ºæ•´ä¸ªStackä¿¡æ¯ï¼š&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;func Stack(buf []byte, all bool) int {&lt;br/&gt;    if all {&lt;br/&gt;        stopTheWorld(&quot;stack trace&quot;)&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    n := 0&lt;br/&gt;    if len(buf) &amp;gt; 0 {&lt;br/&gt;        gp := getg()&lt;br/&gt;        sp := getcallersp(unsafe.Pointer(&amp;amp;buf))&lt;br/&gt;        pc := getcallerpc(unsafe.Pointer(&amp;amp;buf))&lt;br/&gt;        systemstack(func() {&lt;br/&gt;            g0 := getg()&lt;br/&gt;            g0.m.traceback = 1&lt;br/&gt;            g0.writebuf = buf[0:0:len(buf)]&lt;br/&gt;            goroutineheader(gp)&lt;br/&gt;            traceback(pc, sp, 0, gp)&lt;br/&gt;            if all {&lt;br/&gt;                tracebackothers(gp)&lt;br/&gt;            }&lt;br/&gt;            g0.m.traceback = 0&lt;br/&gt;            n = len(g0.writebuf)&lt;br/&gt;            g0.writebuf = nil&lt;br/&gt;        })&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    if all {&lt;br/&gt;        startTheWorld()&lt;br/&gt;    }&lt;br/&gt;    return n&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»æ–‡ä»¶åå°±å¯ä»¥çœ‹å‡ºï¼Œ&lt;code&gt;runtime/mprof.go&lt;/code&gt;æ˜¯ç”¨äºåšProfileåˆ†æï¼Œè·å–Stackè‚¯å®šæ€§èƒ½ä¸ä¼šå¤ªå¥½ã€‚ä»ä¸Šé¢çš„ä»£ç æ¥çœ‹ï¼Œè‹¥ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šä¸ºtrueï¼Œè¿˜ä¼šSTWï¼Œä¸šåŠ¡ç³»ç»Ÿæ— è®ºå¦‚ä½•éƒ½æ— æ³•æ¥å—ã€‚è‹¥Goè¯­è¨€ä¿®æ”¹äº†Stackçš„è¾“å‡ºï¼Œåˆ†æStackä¿¡æ¯ä¹Ÿä¼šå¯¼è‡´æ— æ³•æ­£å¸¸è·å–GoIdã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;é€šç”¨&lt;code&gt;runtime.Callers&lt;/code&gt;æ¥ç»™è°ƒç”¨Stackæ¥æ‰“æ ‡ç­¾&lt;/p&gt;&lt;p&gt;ä»£ç å‚è€ƒï¼šhttps://github.com/jtolds/gls/blob/master/stack_tags_main.go#L43&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;é€šè¿‡å†…è”cæˆ–è€…å†…è”æ±‡ç¼–&lt;/p&gt;&lt;p&gt;goç‰ˆæœ¬1.5ï¼Œx86_64arcä¸‹æ±‡ç¼–ï¼Œä¼°è®¡ä¹Ÿä¸é€šç”¨&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;// func GoID() int64&lt;br/&gt;TEXT s3lib GoID(SB),NOSPLIT,$0-8&lt;br/&gt;MOVQ TLS, CX&lt;br/&gt;MOVQ 0(CX)(TLS*1), AX&lt;br/&gt;MOVQ AX, ret+0(FP)&lt;br/&gt;RET&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å¼€æºgoroutine local storageå®ç°&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åªè¦æœ‰æœºåˆ¶è·å–GoIdï¼Œå°±å¯ä»¥åƒJavaä¸€æ ·æ¥é‡‡ç”¨å…¨å±€çš„mapå®ç°&lt;code&gt;goroutine local storage&lt;/code&gt;ï¼Œåœ¨Githubä¸Šæœç´¢ä¸€ä¸‹ï¼Œå‘ç°æœ‰ä¸¤ä¸ªï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;tylerb/gls&lt;/p&gt;&lt;p&gt;GoIdæ˜¯é€šè¿‡&lt;code&gt;runtime.Stack&lt;/code&gt;æ¥åˆ†æStackè¾“å‡ºä¿¡æ¯è·å–GoIdã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;jtolds/gls&lt;/p&gt;&lt;p&gt;GoIdæ˜¯é€šç”¨&lt;code&gt;runtime.Callers&lt;/code&gt;æ¥ç»™è°ƒç”¨Stackæ¥æ‰“æ ‡ç­¾&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¬¬äºŒä¸ªæœ‰äººåœ¨2013å¹´æµ‹è¯•è¿‡æ€§èƒ½ï¼Œæ•°æ®å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;BenchmarkGetValue 500000 2953 ns/opÂ &lt;/p&gt;&lt;p&gt;BenchmarkSetValues 500000 4050 ns/op&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šé¢çš„æµ‹è¯•ç»“æœçœ‹ä¼¼è¿˜ä¸é”™ï¼Œä½†&lt;code&gt;goroutine local storage&lt;/code&gt;å®ç°æ— å¤–ä¹æ˜¯&lt;code&gt;map+RWMutex&lt;/code&gt;ï¼Œå­˜åœ¨æ€§èƒ½ç“¶é¢ˆï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;Goroutineä¸åƒThreadï¼Œå®ƒçš„ä¸ªæ•°å¯ä»¥ä¸Šåä¸‡å¹¶å‘ï¼Œå½“è¿™ä¹ˆå¤šçš„GoroutineåŒæ—¶ç«äº‰åŒä¸€æŠŠé”æ—¶ï¼Œæ€§èƒ½ä¼šæ€¥å‰§æ¶åŒ–ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;GoIdæ˜¯é€šè¿‡åˆ†æè°ƒç”¨Stackçš„ä¿¡æ¯æ¥è·å–ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªé«˜æˆæœ¬çš„è°ƒç”¨ï¼Œä¸€ä¸ªå­—ï¼šæ…¢ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ç®¡æ€ä¹ˆæ ·ï¼Œæ²¡æœ‰å®˜æ–¹çš„GLSï¼Œçš„ç¡®ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œç¬¬ä¸‰æ–¹å®ç°åˆå­˜åœ¨æ€§èƒ½ä¸ä¸å…¼å®¹é£é™©ã€‚è¿&lt;code&gt;jtolds/gls&lt;/code&gt;ä½œè€…ä¹Ÿè´´å‡ºå…¶å®ƒäººçš„è¯„ä»·ï¼š&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;â€œWow, thatâ€™s horrifying.â€&lt;/p&gt;&lt;p&gt;â€œThis is the most terrible thing I have seen in a very long time.â€&lt;/p&gt;&lt;p&gt;â€œWhere is it getting a context from? Is this serializing all the requests? What the heck is the client being bound to? What are these tags? Why does he need callers? Oh god no. No no no.â€&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å°ç»“&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Goè¯­è¨€å®˜æ–¹è®¤ä¸ºTLSæ¥å­˜å‚¨å…¨å±€çŠ¶æ€æ˜¯ä¸å¥½çš„è®¾è®¡ï¼Œè€Œæ˜¯è¦æ˜¾ç¤ºåœ°ä¼ é€’çŠ¶æ€ã€‚Googleç»™çš„è§£å†³æ–¹æ³•æ˜¯&lt;code&gt;golang.org/x/net/context&lt;/code&gt;ã€‚&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzUzNTY5MzU2MA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4pGhLz2xEbRFHnAQon2QLYgbBibCJo1ibJHesLWshPJeRibateRtAqkaf6BgjlbhYiaxHLq6Zu07CRPw/0?wx_fmt=png&quot; data-nickname=&quot;ç½‘ç®¡å¨biå¨&quot; data-alias=&quot;kevin_tech&quot; data-signature=&quot;æ¯å‘¨åˆ†äº«æŠ€æœ¯ç±»åŸåˆ›æ–‡ç« &quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>