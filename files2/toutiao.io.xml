<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>9690e298037583a31ba522f9ce99862c</guid>
<title>Git å…¨æ ˆå¼€å‘ä½¿ç”¨æŒ‡å—</title>
<link>https://toutiao.io/k/v4gks4h</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¸€ã€GitåŸºç¡€&lt;/h1&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.418&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsGnZGkxDd3iaMynLAgW4AmSKP5CkVtMNODbDrKmKpKRKDucsLHPFRJfg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;500&quot;/&gt;&lt;figcaption&gt;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1ã€Gitç®€ä»‹&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Gitæ˜¯ä¸€ç§åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œç”±Linuxä¹‹çˆ¶Linuså¼€å‘ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€è°“åˆ†å¸ƒå¼ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿï¼Œå°±æ˜¯åœ¨æ¯ä¸€å°æœºå™¨ä¸Šéƒ½æœ‰ä¸€ä¸ªå®Œæ•´çš„ä»“åº“ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;1.129848229342327&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsg6aFmxb2ahPaZCBic5bg1icuFDu61RBLicRic94YSP0e4hz6PWKJXfUsVw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;593&quot;/&gt;&lt;figcaption&gt;image-20201229212250725&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2ã€Gitå®˜ç½‘&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Gitå®˜ç½‘ï¼š&lt;span&gt;?&lt;/span&gt;git&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5438175270108043&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsZ7A7Yk2g9Y1CB7W4gj6fPMq1icBmKscmlPalAyKZibmhMFu5nPk9tjwQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1666&quot;/&gt;&lt;figcaption&gt;image-20201229212543426&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å®˜ç½‘ä¸Šå¯ä»¥è·å–Gitçš„å®‰è£…è½¯ä»¶ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä¸‹è½½ã€Šprogitã€‹â€”â€”è¿™æ˜¯æœ€æ£’çš„Gitå­¦ä¹ èµ„æ–™ï¼Œè€Œä¸”æœ‰ä¸­æ–‡ç‰ˆæœ¬ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3ã€Gitå®‰è£…&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä» &lt;code&gt;https://git-scm.com/downloads&lt;/code&gt;å®˜æ–¹ä¸‹è½½åœ°å€ä¸‹è½½å¯¹åº”çš„æ“ä½œç³»ç»Ÿç‰ˆæœ¬ä¸€æ­¥æ­¥å®‰è£…å³å¯ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5664516129032258&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsnNbxY9mTWnicxSOlA93uhMNA2QHXw3vPD6iafBsDXaa7arpAmHZyDudQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1550&quot;/&gt;&lt;figcaption&gt;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;4ã€GitåŸºæœ¬é…ç½®&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®‰è£…å®Œæˆä¹‹åï¼Œåœ¨ä»»æ„ç›®å½•ä¸‹ï¼Œå³é”® &lt;code&gt;Git Bash Here&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;1.4619883040935673&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsNnrnh2iaOF9s7TbcQDjj7PJ7UgZ5cBLJ4Mzib4ZT5PrmfIicsfBjhtCaQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;342&quot;/&gt;&lt;figcaption&gt;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¨å±€é…ç½®é‚®ç®±å’Œç”¨æˆ·åï¼ˆ&lt;code&gt;â€“global&lt;/code&gt;è¡¨ç¤ºå…¨å±€é…ç½®ï¼Œä¹Ÿå¯ä»¥ä¸é…ç½®ï¼Œæ¯ä¸ªä»“åº“å•ç‹¬é…ç½®ï¼‰&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;$Â gitÂ configÂ --globalÂ user.nameÂ &lt;span&gt;&quot;test&quot;&lt;/span&gt;&lt;br/&gt;$Â gitÂ configÂ --globalÂ user.emailÂ &lt;span&gt;test&lt;/span&gt;@qq.com&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;5ã€GitåŸºæœ¬æ¦‚å¿µ&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;5.1ã€Gitå·¥ä½œåŒºåŸŸ&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Gitæœ‰å››ä¸ªå·¥ä½œåŒºåŸŸï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;å·¥ä½œåŒº&lt;/p&gt;&lt;p&gt;ç®€å•è¯´å·¥ä½œåŒºå°±æ˜¯æˆ‘ä»¬é¡¹ç›®çš„ç›®å½•ã€‚&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.31901840490797545&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPslricuQWbNeic1FUKjOnecjLp3icX5LN3ae3Zg1JUXyO4b94X4ibdlrTyeA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;815&quot;/&gt;&lt;figcaption&gt;image-20201229220303023&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ä»“åº“åŒº/æœ¬åœ°ä»“åº“&lt;/p&gt;&lt;p&gt;å·¥ä½œåŒºæœ‰ä¸€ä¸ª&lt;code&gt;.git&lt;/code&gt;ç›®å½•ï¼Œå…¶å®è¿™ä¸ªä¸æ˜¯å·¥ä½œåŒºï¼Œæ˜¯Gitçš„ç‰ˆæœ¬åº“ï¼Œå­˜å‚¨äº†Gitä»“åº“çš„æ‰€æœ‰ç‰ˆæœ¬ä¿¡æ¯&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.4585365853658537&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsWDa1nl0rOpGIricjNCma1cscsJCl6iaeb12EV6iaCWkB7L0BS004eIcbA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;820&quot;/&gt;&lt;figcaption&gt;image-20201229220345268&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.5109170305676856&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsSPI4yEHibmamVDLLuGP5srAUc78Elsma8XHzSpVsDAjNf7NyLZjiaVicg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;458&quot;/&gt;&lt;figcaption&gt;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;æš‚å­˜åŒº&lt;/p&gt;&lt;p&gt;æš‚å­˜åŒºåŸŸæ˜¯ä¸€ä¸ªæ–‡ä»¶ï¼Œä¿å­˜äº†ä¸‹æ¬¡å°†æäº¤çš„æ–‡ä»¶åˆ—è¡¨ä¿¡æ¯ï¼Œä¸€èˆ¬åœ¨ Git ä»“åº“ç›®å½•ä¸­ã€‚æœ‰æ—¶å€™ä¹Ÿè¢«ç§°ä½œâ€œç´¢å¼•â€ï¼Œ&lt;/p&gt;&lt;p&gt;ä¸è¿‡ä¸€èˆ¬è¯´æ³•è¿˜æ˜¯å«æš‚å­˜åŒºåŸŸã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;è¿œç¨‹ä»“åº“&lt;/p&gt;&lt;p&gt;å¯¹äºåˆ†å¸ƒå¼ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿï¼Œè¿œç¨‹ä»“åº“ä¸æ˜¯å¿…é¡»å­˜åœ¨çš„ï¼Œä½†æ˜¯é€šå¸¸é¡¹ç›®éƒ½ä¼šæœ‰è¿œç¨‹ä»“åº“ã€‚ä¾‹å¦‚&lt;code&gt;Github&lt;/code&gt;å°±æ˜¯æˆ‘ä»¬éå¸¸ç†Ÿæ‚‰çš„è¿œç¨‹ä»“åº“ã€‚&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.5057332528666264&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsOTGdFv4Y4ZNRnFYQb9uxZ3a8Xxc7uS9VgWt9Cugibdgp61d8QJLmMng/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1657&quot;/&gt;&lt;figcaption&gt;image-20201229221144078&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;åŸºæœ¬çš„Gitå·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;åœ¨å·¥ä½œç›®å½•ä¿®æ”¹æ–‡ä»¶&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æš‚å­˜æ–‡ä»¶ï¼Œå°†æ–‡ä»¶å¿«ç…§æ”¾å…¥æš‚å­˜åŒº&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æäº¤æ›´æ–°ï¼Œæ‰¾åˆ°æš‚å­˜åŒºçš„æ–‡ä»¶ï¼Œå°†å¿«ç…§æ°¸ä¹…æ€§å­˜å‚¨åˆ°åˆ° Git ä»“åº“åŒºï¼ˆæœ¬åœ°ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å°†æœ¬åœ°ä»“åº“çš„å˜æ›´æ¨é€åˆ°è¿œç¨‹ä»“åº“&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»¥ä¸Šå‡ ä¸ªåŒºåŸŸçš„å…³ç³»å¯ä»¥ç”¨ä¸‹å›¾è¡¨ç¤ºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.2901023890784983&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPslFN1bZ8pPolGS3aKibZWEZ6kLicmmaMJYgGTjdFp6G9Bka0G1cWA2B8w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1172&quot;/&gt;&lt;figcaption&gt;img&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;5.2ã€Gitåˆ†æ”¯&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ†æ”¯æ˜¯ä¸ºäº†å°†ä¿®æ”¹è®°å½•çš„æ•´ä¸ªæµç¨‹åˆ†å¼€å­˜å‚¨ï¼Œè®©åˆ†å¼€çš„åˆ†æ”¯ä¸å—å…¶å®ƒåˆ†æ”¯çš„å½±å“ï¼Œæ‰€ä»¥åœ¨åŒä¸€ä¸ªæ•°æ®åº“é‡Œå¯ä»¥åŒæ—¶è¿›è¡Œå¤šä¸ªä¸åŒçš„ä¿®æ”¹ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.8209982788296041&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPs4Gc1QzoUIuEj77xa7uWbxlQ2EIqkVtSuHtuTSGebU9saCHcibNMY8Yw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;581&quot;/&gt;&lt;figcaption&gt;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Git ä¸ºæˆ‘ä»¬è‡ªåŠ¨åˆ›å»ºçš„ç¬¬ä¸€ä¸ªåˆ†æ”¯ï¼Œä¹Ÿå«ä¸»åˆ†æ”¯ï¼Œä¸€èˆ¬å…¶å®ƒåˆ†æ”¯å¼€å‘å®Œæˆåéƒ½è¦åˆå¹¶åˆ° master&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;1.4881889763779528&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPscib3R0PACFbvV2R5IjUmByxibpv6nKyUSLZ8tyQosInwU0bXib5KbRUxQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;254&quot;/&gt;&lt;figcaption&gt;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;5.3ã€Gitæ–‡ä»¶çŠ¶æ€&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨gitä¸­ï¼Œæ–‡ä»¶ä¸»è¦æœ‰å››ç§çŠ¶æ€ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.4125&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsibX49DiaZCrCJCqEBRkLMibjBALxBIAHNcqX7RAL8ibdO6dHa5KFRyKzvA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;800&quot;/&gt;&lt;figcaption&gt;Life Cycle&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;Untracked&lt;/strong&gt;: æœªè·Ÿè¸ª, æ­¤æ–‡ä»¶åœ¨æ–‡ä»¶å¤¹ä¸­, ä½†å¹¶æ²¡æœ‰åŠ å…¥åˆ°gitåº“, ä¸å‚ä¸ç‰ˆæœ¬æ§åˆ¶. é€šè¿‡&lt;code&gt;git add&lt;/code&gt; çŠ¶æ€å˜ä¸º&lt;code&gt;Staged&lt;/code&gt;.&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;Unmodify&lt;/strong&gt;ï¼ˆCommitted): æ–‡ä»¶å·²ç»å…¥åº“, æœªä¿®æ”¹, å³ç‰ˆæœ¬åº“ä¸­çš„æ–‡ä»¶å¿«ç…§å†…å®¹ä¸æ–‡ä»¶å¤¹ä¸­å®Œå…¨ä¸€è‡´. è¿™ç§ç±»å‹çš„æ–‡ä»¶æœ‰ä¸¤ç§å»å¤„, å¦‚æœå®ƒè¢«ä¿®æ”¹, è€Œå˜ä¸º&lt;code&gt;Modified&lt;/code&gt;. å¦‚æœä½¿ç”¨&lt;code&gt;git rm&lt;/code&gt;ç§»å‡ºç‰ˆæœ¬åº“, åˆ™æˆä¸º&lt;code&gt;Untracked&lt;/code&gt;æ–‡ä»¶&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;Modified&lt;/strong&gt;: æ–‡ä»¶å·²ä¿®æ”¹, ä»…ä»…æ˜¯ä¿®æ”¹, å¹¶æ²¡æœ‰è¿›è¡Œå…¶ä»–çš„æ“ä½œ. è¿™ä¸ªæ–‡ä»¶ä¹Ÿæœ‰ä¸¤ä¸ªå»å¤„, é€šè¿‡&lt;code&gt;git add&lt;/code&gt;å¯è¿›å…¥æš‚å­˜&lt;code&gt;staged&lt;/code&gt;çŠ¶æ€, ä½¿ç”¨&lt;code&gt;git checkout&lt;/code&gt; åˆ™ä¸¢å¼ƒä¿®æ”¹è¿‡, è¿”å›åˆ°&lt;code&gt;unmodify&lt;/code&gt;çŠ¶æ€, è¿™ä¸ª&lt;code&gt;git checkout&lt;/code&gt;å³ä»åº“ä¸­å–å‡ºæ–‡ä»¶, è¦†ç›–å½“å‰ä¿®æ”¹&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;strong&gt;Staged&lt;/strong&gt;: æš‚å­˜çŠ¶æ€. æ‰§è¡Œ&lt;code&gt;git commit&lt;/code&gt;åˆ™å°†ä¿®æ”¹åŒæ­¥åˆ°åº“ä¸­, è¿™æ—¶åº“ä¸­çš„æ–‡ä»¶å’Œæœ¬åœ°æ–‡ä»¶åˆå˜ä¸ºä¸€è‡´, æ–‡ä»¶ä¸º&lt;code&gt;Unmodify&lt;/code&gt;çŠ¶æ€. æ‰§è¡Œ&lt;code&gt;git reset HEAD filename&lt;/code&gt;å–æ¶ˆæš‚å­˜, æ–‡ä»¶çŠ¶æ€ä¸º&lt;code&gt;Modified&lt;/code&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;äºŒã€Gitåº”ç”¨å®è·µ&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çœ‹å®Œä¸Šé¢çš„GitåŸºç¡€ï¼Œä½ å¯èƒ½æœ‰ä¸€äº›è¿·æƒ‘ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»¥å®é™…å·¥ä½œä¸­å¼€å‘çš„æµç¨‹æ¥åŠ æ·±å¯¹Gitçš„ç†è§£å§ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1ã€å…‹éš†é¡¹ç›®&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥é€šè¿‡åœ¨å·¥ä½œåŒºä½¿ç”¨&lt;code&gt;git init&lt;/code&gt;æ¥åˆå§‹åŒ–ä¸€ä¸ªGitä»“åº“ï¼Œä½†é€šå¸¸å¼€å‘ä¸­æˆ‘ä»¬ä¸ä¼šè¿™æ ·åšï¼Œå› ä¸ºå®é™…çš„é¡¹ç›®å¤§éƒ¨åˆ†å·²ç»è¿›è¡Œäº†éƒ¨åˆ†å¼€å‘ï¼Œå¹¶è¿›è¡Œäº†ç‰ˆæœ¬ç®¡ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆåšçš„æ˜¯ä»è¿œç¨‹ä»“åº“å…‹éš†é¡¹ç›®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œæˆ‘ä»Giteeï¼ˆä¸€èˆ¬å¼€å‘é¡¹ç›®çš„è¿œç¨‹ä»“åº“æ˜¯éƒ¨ç½²åœ¨å†…ç½‘çš„GitLabï¼‰ &lt;code&gt;fork&lt;/code&gt;äº†ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œå°†è¿™ä¸ªé¡¹ç›®ä½œä¸ºè¿œç¨‹ä»“åº“çš„é¡¹ç›®ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5059985885673959&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsicT2gyuGaym35WI6iaiaCB2Eia4gIicenaend6qicRualvv8yk7cia9nH8cqQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1417&quot;/&gt;&lt;figcaption&gt;image-20201229214855118&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç‚¹å‡»&lt;code&gt;å…‹éš†ä¸‹è½½&lt;/code&gt;ï¼Œå¯ä»¥çœ‹åˆ°é¡¹ç›®çš„è·¯å¾„ï¼Œ&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;HTTPS&lt;/code&gt;æ˜¯å‡­æ®å¼çš„è·¯å¾„ï¼Œä½¿ç”¨æ­¤è·¯å¾„ï¼Œå‘è¿œç¨‹ä»“åº“æ¨é€ä»£ç çš„æ—¶å€™éœ€è¦å‡­æ®ï¼ˆè´¦å·å¯†ç ï¼‰ï¼›&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;è¿™ç§æ–¹å¼å‘è¿œç¨‹ä»“åº“æäº¤ï¼Œä¼šè¦æ±‚è´¦å·å¯†ç ï¼Œè¾“å…¥å®Œæˆä¹‹åï¼ŒWin10æ“ä½œç³»ç»Ÿå¯ä»¥é€‰æ‹©è®°ä½å‡­æ®ï¼Œè¿™æ ·å°±ä¸ç”¨æ¯ä¸€æ¬¡éƒ½è¾“å…¥äº†ï¼ŒWin10æ“ä½œç³»ç»Ÿç®¡ç†å‡­æ® &lt;code&gt;æ§åˆ¶é¢æ¿ â†’ ç”¨æˆ·å¸æˆ· â†’ å‡­æ®ç®¡ç†å™¨ â†’ Windowså‡­æ®&lt;/code&gt;&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.5&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPs2ptrKYcqr35qEZTuQdD13QzAGIkyRxmHM5gDHP0vpaToQKyssLS3DA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1062&quot;/&gt;&lt;figcaption&gt;image-20201230174621550&lt;/figcaption&gt;&lt;/figure&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;SSH&lt;/code&gt;æ˜¯ç§˜é’¥å¼çš„è·¯å¾„ï¼Œå‘è¿œç¨‹ä»“åº“æ¨é€ä»£ç çš„æ—¶å€™ï¼Œéœ€è¦æœ¬åœ°çš„ç§é’¥å’Œè¿œç¨‹ä»“åº“çš„å…¬é’¥å¯¹åº”ã€‚&lt;/p&gt;&lt;p&gt;SSHé…ç½®å¯ä»¥å‚è€ƒ &lt;span&gt;?&lt;/span&gt;Windowsé…ç½®Githubã€Giteeå…±å­˜çš„Gitç¯å¢ƒï¼Œè¿™é‡Œå°±ä¸è¯¦ç»†å±•å¼€è®²è§£ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘å·²ç»è¿›è¡Œäº†å…¬ç§é’¥çš„é…ç½®ï¼Œæ‰€ä»¥è¿™é‡Œé€‰æ‹©SSHã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5513513513513514&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsBF0sYbP7DiaIhicPCYn9PJLUO0rP2QmNAlUiciaEDia8Zmia9ocaXEBykgUw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;370&quot;/&gt;&lt;figcaption&gt;image-20201229215107233&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨&lt;code&gt;git clone&lt;/code&gt;å‘½ä»¤å…‹éš†é¡¹ç›®&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.3076923076923077&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsWlPNJFJp9l8icX2zYbfxDVEQQAwq2XeKNnCibYQc3lcrFH12zcU1BVQw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;598&quot;/&gt;&lt;figcaption&gt;image-20201229215845069&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2ã€ä»£ç ç®¡ç†&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é¡¹ç›®å·²ç»æˆåŠŸå…‹éš†ï¼Œæ¥ä¸‹æ¥è¦è¿›è¡Œæˆ‘ä»¬çš„å¼€å‘äº†ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.1ã€åˆ›å»ºåˆ†æ”¯&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šå¸¸å¼€å‘ä¸æ˜¯åœ¨&lt;code&gt;Master&lt;/code&gt;åˆ†æ”¯ä¸Šï¼Œè€Œæ˜¯åœ¨å¼€å‘åˆ†æ”¯ä¸Šï¼Œä½¿ç”¨ &lt;code&gt;git branch develop&lt;/code&gt;åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.21536351165980797&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPswYKH2rUrLVHVib7sMNCabBGw3vZyka3pSia9h4kgCQkRjgVCKLJslSPw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;729&quot;/&gt;&lt;figcaption&gt;image-20201229222931344&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥é€šè¿‡&lt;code&gt;git branch&lt;/code&gt;å‘½ä»¤åˆ—å‡ºæ‰€æœ‰åˆ†æ”¯ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.13010590015128592&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsrNY3GY7NFHPvXgEASsTaDmrUJKfo86SQ3T7SqMoRdOsuGKpa9dbibEw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;661&quot;/&gt;&lt;figcaption&gt;image-20201229223057016&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ–°å»ºçš„åˆ†æ”¯ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.2ã€åˆ‡æ¢åˆ†æ”¯&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨&lt;code&gt;git checkout develop&lt;/code&gt;å‘½ä»¤åˆ‡æ¢åˆ°æ–°å»ºçš„developåˆ†æ”¯ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.10510046367851623&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsTBIFhoGakWrqmHZtl6jIwT7zKFfB3iasqZYddFrlz4KweBugCtpEEGg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;647&quot;/&gt;&lt;figcaption&gt;image-20201229223325328&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.3ã€æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†developåˆ†æ”¯ä¸Šè¿›è¡Œä¸€äº›å¼€å‘æ“ä½œï¼Œæˆ‘è¿™é‡Œå¯¹ redeme è¿›è¡Œäº†ä¸€äº›ä¿®æ”¹ï¼Œéœ€è¦æŠŠä¿®æ”¹æ·»åŠ åˆ°æš‚å­˜åŒºã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;é¦–å…ˆé€šè¿‡ &lt;code&gt;git status&lt;/code&gt;å‘½ä»¤æŸ¥çœ‹å·¥ä½œåŒºæ–‡ä»¶çŠ¶æ€&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.2621502209131075&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsa2xzYicUovHrfVX3vuGiagSDJsqTNf8WtVCpyC1rfsSwWoPy82MeJb9Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;679&quot;/&gt;&lt;figcaption&gt;image-20201229223653744&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;æ¥ä¸‹æ¥ä½¿ç”¨ &lt;code&gt;git add README.md&lt;/code&gt;å‘½ä»¤ï¼ˆå¯ä»¥ä½¿ç”¨&lt;code&gt;git add .&lt;/code&gt;æ·»åŠ æ‰€æœ‰ä¿®æ”¹ï¼‰å°†æ›´æ”¹æ·»åŠ åˆ°æš‚å­˜åŒº&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.2548148148148148&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsl5l307O3ZwjEvpE8EQ7XV4Jia6o9PnEKbk10vWDo4DfaV8brDW9ic4tQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;675&quot;/&gt;&lt;figcaption&gt;image-20201229223945199&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥çœ‹åˆ°æ–‡ä»¶å·²ç»æ·»åŠ ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.4ã€æäº¤ä¿®æ”¹åˆ°ä»“åº“&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥ä¸‹æ¥ä½¿ç”¨&lt;code&gt;git commit -m &quot;ğŸ˜€ä¿®æ”¹äº†redeme&quot;&lt;/code&gt;ï¼Œå°†ä¿®æ”¹æäº¤åˆ°ä»“åº“&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.1398176291793313&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsb83XofjTCfLZTE3KcdKIq5QAKM6sSANep0VaEE2icich3o1icevHrFK5Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;658&quot;/&gt;&lt;figcaption&gt;image-20201229224319159&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œæˆ‘ä»¬çš„æäº¤ä¿¡æ¯å°½é‡éµå¾ªæŸç§è§„èŒƒï¼Œä¾‹å¦‚åœ¨æäº¤ä¿¡æ¯ä¸­ä½“ç°æœ¬æ¬¡æäº¤çš„ç±»å‹ï¼š&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;feat&lt;/strong&gt; ï¼šæ–°åŠŸèƒ½&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;fix&lt;/strong&gt; : bugä¿®å¤&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;docs&lt;/strong&gt; :æ–‡æ¡£å˜æ›´&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;style&lt;/strong&gt; :ä¸æ ·å¼ç›¸å…³çš„æ‰€æœ‰å˜åŠ¨&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;refactor&lt;/strong&gt; :æ—¢ä¸æ˜¯bugä¿®å¤ä¹Ÿæœªæ·»åŠ åŠŸèƒ½çš„ä»£ç æ›´æ”¹&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;test&lt;/strong&gt; :ä¸æµ‹è¯•æœ‰å…³æ‰€æœ‰å˜åŠ¨&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;chore&lt;/strong&gt; :æ”¹å˜äº†æ„å»ºä»»åŠ¡ï¼Œç¨‹åºåŒ…ç®¡ç†å™¨é…ç½®ç­‰&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è§„èŒƒè€Œç²¾ç¡®çš„æäº¤ä¿¡æ¯ä¸ä»…èƒ½å¸®åŠ©æˆ‘ä»¬çš„åŒäº‹å¿«é€Ÿäº†è§£æˆ‘ä»¬çš„æäº¤ï¼Œä¹Ÿå¯¹æˆ‘ä»¬è‡ªå·±çš„å¼€å‘å’Œé‡æ„æœ‰å¾ˆå¤§çš„å¸®åŠ©ã€‚æˆ‘å–œæ¬¢ç”¨è¡¨æƒ…åŒ…æ ‡æ³¨æäº¤ç±»å‹ï¼Œè¿™æ ·ä»è¿œç¨‹ä»“åº“çœ‹æäº¤è®°å½•æ¯”è¾ƒå¥½çœ‹ğŸ˜„&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5636363636363636&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPs59jEb0mgzRs2CTbhPxejTx4NFFKXc3oqPhiaib9ebzVxXiaUsWx1GNHQA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;880&quot;/&gt;&lt;figcaption&gt;åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥é€šè¿‡&lt;code&gt;git log&lt;/code&gt;å‘½ä»¤æŸ¥çœ‹æäº¤å†å²ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.4012820512820513&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsBbc3m37OfaBUd1J9Rp1tibUib7vGVEgMVDTHEaUdIGGyLj26RRMz06WQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;780&quot;/&gt;&lt;figcaption&gt;image-20201229224851871&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.5ã€æ¨é€ä¿®æ”¹åˆ°è¿œç¨‹ä»“åº“&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥ä½¿ç”¨&lt;code&gt;git push origin develop&lt;/code&gt;å‘½ä»¤å°†ä¿®æ”¹æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œåœ¨æ¨é€ä¹‹å‰ï¼Œé€šå¸¸é€šè¿‡&lt;code&gt;git pull origin develop&lt;/code&gt;ï¼ˆæœ¬å®ä¾‹è¿œç¨‹ä»“åº“ä¸å­˜åœ¨developåˆ†æ”¯ï¼Œæ‰€ä»¥ç›´æ¥æ¨é€ï¼‰å‘½ä»¤æ¥æ‹‰å–è¿œç¨‹ä»“åº“â€”â€”è¿™ä¸ªæ˜¯ä¸ºäº†é¿å…æœ¬åœ°ç‰ˆæœ¬è½åçš„æƒ…å†µï¼Œå½“ç„¶å¦‚æœå†²çªä½ ä¹Ÿå¯ä»¥å¼ºåˆ¶æäº¤ï¼Œåªæ˜¯ä½ çš„åŒäº‹ä¼šåšå‡ºä»€ä¹ˆè¿‡æ¿€è¡Œä¸ºä¸æ•¢ä¿è¯ã€‚ğŸ˜‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.3502673796791444&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsKkllwzd8z2BY0TKAwSUJ9p645sBIja9MgRk58m5FcyNFVdUXTElKcA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;748&quot;/&gt;&lt;figcaption&gt;image-20201229231704254&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æˆ‘ä»¬çš„è¿œç¨‹ä»“åº“å°±å¯ä»¥çœ‹åˆ°è¿™æ¬¡æäº¤äº†ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5484922575387123&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPskupyKZ4O4TldqFpFL3PJC4xsaTniah2B4MTn7YQY01yEVhyX21ye7qw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1227&quot;/&gt;&lt;figcaption&gt;image-20201229231807331&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.6ã€åˆå¹¶åˆ†æ”¯&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ€ç»ˆæˆ‘ä»¬çš„æäº¤éƒ½æ˜¯è¦åˆå¹¶åˆ°&lt;code&gt;master&lt;/code&gt;åˆ†æ”¯çš„ï¼Œé¦–å…ˆåˆ‡æ¢åˆ°&lt;code&gt;master&lt;/code&gt;åˆ†æ”¯ï¼Œæ¥ç€é€šè¿‡å‘½ä»¤ï¼Œ&lt;code&gt;git merge develop&lt;/code&gt;å‘½ä»¤ï¼Œå°†&lt;code&gt;develop&lt;/code&gt;åˆ†æ”¯åˆå¹¶åˆ°&lt;code&gt;master&lt;/code&gt;ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.19089574155653452&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsHV8JZzicz1fjgDNBqcezquibHmfREZBf6Uz4egUENBnHqWpOU6dAcqlA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;681&quot;/&gt;&lt;figcaption&gt;image-20201229232122731&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬è¿™ä¸ªåˆ†æ”¯æ˜¯æ²¡æœ‰å†²çªçš„ï¼Œå¯èƒ½åœ¨åˆå¹¶çš„è¿‡ç¨‹ä¸­ä¼šå‡ºç°å†²çªçš„æƒ…å†µï¼Œå¯ä»¥é€šè¿‡ &lt;code&gt;git status&lt;/code&gt; æŸ¥çœ‹å†²çªçš„æ–‡ä»¶ï¼Œæ‰‹åŠ¨è§£å†³å†²çªã€‚å½“ç„¶ï¼Œå¯ä»¥å€ŸåŠ©ä¸€äº›å¼€å‘å·¥å…·æ¥å®Œæˆè¿™ä¸ªå·¥ä½œï¼Œä¸‹æ–‡å†è®²ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.7ã€ç‰ˆæœ¬å›é€€&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡å¦‚è¯´ï¼Œæˆ‘ä»¬å‘ç°è¿™æ¬¡æäº¤ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œå¯ä»¥é€šè¿‡ &lt;code&gt;git reset --hard HEAD^&lt;/code&gt; å›é€€åˆ°ä¸Šä¸€æ¬¡æäº¤&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.1083969465648855&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsE1C0SGs0hMK4IueSHQnupU8qYZFtbtfEFnHFBq0CMBABwy92QNzS9A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;655&quot;/&gt;&lt;figcaption&gt;image-20201229232415498&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.8ã€æ‰“æ ‡ç­¾&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡å¦‚æˆ‘ä»¬è¦å‘å¸ƒä¸€ä¸ªç‰ˆæœ¬ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šç»™è¿™æ¬¡æäº¤æ‰“ä¸€ä¸ªæ ‡ç­¾ &lt;code&gt;git tag publish/0.0.1&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.2222222222222222&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsjS8Dm7bkmlyG0ZjugPOEt4r1IgtMOiahLU0bG1VG8w4pKazunlfBA7Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;657&quot;/&gt;&lt;figcaption&gt;image-20201229232931444&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥é€šè¿‡&lt;code&gt;git tag&lt;/code&gt;å‘½ä»¤æ¥æŸ¥çœ‹æˆ‘ä»¬æ‰“çš„æ ‡ç­¾ã€‚&lt;/p&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¸‰ã€Gitå¸¸ç”¨å‘½ä»¤&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ä¸Šé¢æœ‰è¿™æ ·ä¸€å¼ å›¾ç‰‡ï¼ŒåŸºæœ¬ä¸Šæ—¥å¸¸ä½¿ç”¨è®°ä½è¿™6ä¸ªå‘½ä»¤å°±å¯ä»¥äº†ï¼Œä½†æ˜¯è¦æƒ³ç†Ÿç»ƒä½¿ç”¨ï¼Œå¯èƒ½å°±éœ€è¦è®°ä½æ›´å¤šå‘½ä»¤äº†ï¼Œè¿™é‡Œæ•´ç†äº†ä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.2901023890784983&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPslFN1bZ8pPolGS3aKibZWEZ6kLicmmaMJYgGTjdFp6G9Bka0G1cWA2B8w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1172&quot;/&gt;&lt;figcaption&gt;img&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1ã€åˆå§‹åŒ–ä»“åº“&lt;/span&gt;&lt;/h2&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;Â Â Â Â &lt;span&gt;#Â åœ¨å½“å‰ç›®å½•æ–°å»ºä¸€ä¸ªGitä»£ç åº“&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ init&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œå°†å…¶åˆå§‹åŒ–ä¸ºGitä»£ç åº“&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ initÂ [project-name]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â ä¸‹è½½ä¸€ä¸ªé¡¹ç›®å’Œå®ƒçš„æ•´ä¸ªä»£ç å†å²&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ &lt;span&gt;clone&lt;/span&gt;Â [url]&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2ã€é…ç½®&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Gitçš„è®¾ç½®æ–‡ä»¶ä¸º.gitconfigï¼Œå®ƒå¯ä»¥åœ¨ç”¨æˆ·ä¸»ç›®å½•ä¸‹ï¼ˆå…¨å±€é…ç½®ï¼‰ï¼Œä¹Ÿå¯ä»¥åœ¨é¡¹ç›®ç›®å½•ä¸‹ï¼ˆé¡¹ç›®é…ç½®ï¼‰ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;Â Â Â Â &lt;span&gt;#Â æ˜¾ç¤ºå½“å‰çš„Gité…ç½®&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ configÂ --list&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æ˜¾ç¤ºÂ GitÂ çš„æŸä¸€é¡¹é…ç½®&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ configÂ &amp;lt;key&amp;gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â ç¼–è¾‘Gité…ç½®æ–‡ä»¶&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ configÂ -eÂ [--global]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â è®¾ç½®æäº¤ä»£ç æ—¶çš„ç”¨æˆ·ä¿¡æ¯ï¼Œé€‰æ‹©globalå³å…¨å±€é…ç½®&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ configÂ [--global]Â user.nameÂ &lt;span&gt;&quot;[name]&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ configÂ [--global]Â user.emailÂ &lt;span&gt;&quot;[emailÂ address]&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3ã€å¢åŠ /åˆ é™¤æ–‡ä»¶&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œçš„å¢åŠ /åˆ é™¤æ–‡ä»¶æŒ‡çš„æ˜¯å‘æš‚å­˜åŒºå¢åŠ /åˆ é™¤æ–‡ä»¶ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;Â Â Â Â &lt;span&gt;#Â æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€ï¼ŒæŸ¥çœ‹å½“å‰å·¥ä½œåŒºæ–°å¢ã€æ›´æ”¹æˆ–åˆ é™¤çš„æ–‡ä»¶&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ status&lt;br/&gt;Â Â Â Â Â &lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æ·»åŠ æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºï¼Œå¯ä»¥æ·»åŠ å¤šä¸ªæ–‡ä»¶ï¼Œä¸­é—´ä»¥ç©ºæ ¼éš”å¼€&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ addÂ [file1]Â [file2]Â ...&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æ·»åŠ æŒ‡å®šç›®å½•åˆ°æš‚å­˜åŒºï¼ŒåŒ…æ‹¬å­ç›®å½•&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ addÂ [dir]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æ·»åŠ å½“å‰ç›®å½•çš„æ‰€æœ‰æ–‡ä»¶åˆ°æš‚å­˜åŒº&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ addÂ .&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æ·»åŠ æ¯ä¸ªå˜åŒ–å‰ï¼Œéƒ½ä¼šè¦æ±‚ç¡®è®¤&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â å¯¹äºåŒä¸€ä¸ªæ–‡ä»¶çš„å¤šå¤„å˜åŒ–ï¼Œå¯ä»¥å®ç°åˆ†æ¬¡æäº¤&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ addÂ -p&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â åˆ é™¤å·¥ä½œåŒºæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™æ¬¡åˆ é™¤æ”¾å…¥æš‚å­˜åŒº&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ rmÂ [file1]Â [file2]Â ...&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â åœæ­¢è¿½è¸ªæŒ‡å®šæ–‡ä»¶ï¼Œä½†è¯¥æ–‡ä»¶ä¼šä¿ç•™åœ¨å·¥ä½œåŒº&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ rmÂ --cachedÂ [file]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æ”¹åæ–‡ä»¶ï¼Œå¹¶ä¸”å°†è¿™ä¸ªæ”¹åæ”¾å…¥æš‚å­˜åŒº&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ mvÂ [file-original]Â [file-renamed]&lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â &lt;span&gt;#Â ä¸´æ—¶ä¿å­˜ä¿®æ”¹ï¼Œå¯è·¨åˆ†æ”¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â saveä¸ºå¯é€‰é¡¹&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ stashÂ [saveÂ message]&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æ‰€æœ‰ä¿å­˜çš„è®°å½•åˆ—è¡¨&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ stashÂ list&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æ¢å¤å·¥ä½œè¿›åº¦åˆ°å·¥ä½œåŒºï¼Œæ­¤å‘½ä»¤çš„stash@{num}æ˜¯å¯é€‰é¡¹ï¼Œåœ¨å¤šä¸ªå·¥ä½œè¿›åº¦ä¸­å¯ä»¥é€‰æ‹©æ¢å¤ï¼Œä¸å¸¦æ­¤é¡¹åˆ™é»˜è®¤æ¢å¤æœ€è¿‘çš„ä¸€æ¬¡è¿›åº¦ç›¸å½“äºgitÂ stashÂ popÂ stash@{0}&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ stashÂ popÂ [stash@{num}]&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æ¢å¤å·¥ä½œè¿›åº¦åˆ°å·¥ä½œåŒºä¸”è¯¥å·¥ä½œè¿›åº¦å¯é‡å¤æ¢å¤ï¼Œæ­¤å‘½ä»¤çš„stash@{num}æ˜¯å¯é€‰é¡¹ï¼Œåœ¨å¤šä¸ªå·¥ä½œè¿›åº¦ä¸­å¯ä»¥é€‰æ‹©æ¢å¤ï¼Œä¸å¸¦æ­¤é¡¹åˆ™é»˜è®¤æ¢å¤æœ€è¿‘çš„ä¸€æ¬¡è¿›åº¦ç›¸å½“äºgitÂ stashÂ applyÂ stash@{0}&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ stashÂ applyÂ [stash@{num}]&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â åˆ é™¤ä¸€æ¡ä¿å­˜çš„å·¥ä½œè¿›åº¦ï¼Œæ­¤å‘½ä»¤çš„stash@{num}æ˜¯å¯é€‰é¡¹ï¼Œåœ¨å¤šä¸ªå·¥ä½œè¿›åº¦ä¸­å¯ä»¥é€‰æ‹©åˆ é™¤ï¼Œä¸å¸¦æ­¤é¡¹åˆ™é»˜è®¤åˆ é™¤æœ€è¿‘çš„ä¸€æ¬¡è¿›åº¦ç›¸å½“äºgitÂ stashÂ dropÂ stash@{0}&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ stashÂ dropÂ stash@{num}Â &lt;br/&gt;Â Â Â Â &lt;span&gt;#Â åˆ é™¤æ‰€æœ‰ä¿å­˜&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ stashÂ clear&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;4ã€ä»£ç æäº¤&lt;/span&gt;&lt;/h2&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;Â Â Â Â &lt;span&gt;#Â æäº¤æš‚å­˜åŒºåˆ°ä»“åº“åŒºï¼Œå¦‚æœä¸åŠ -mï¼Œä¼šè¿›å…¥vimç¼–è¾‘å™¨&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ commitÂ -mÂ [message]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æäº¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°ä»“åº“åŒº&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ commitÂ [file1]Â [file2]Â ...Â -mÂ [message]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æäº¤å·¥ä½œåŒºè‡ªä¸Šæ¬¡commitä¹‹åçš„å˜åŒ–ï¼Œç›´æ¥åˆ°ä»“åº“åŒº&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ commitÂ -a&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æäº¤æ—¶æ˜¾ç¤ºæ‰€æœ‰diffä¿¡æ¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ commitÂ -v&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â ä½¿ç”¨ä¸€æ¬¡æ–°çš„commitï¼Œæ›¿ä»£ä¸Šä¸€æ¬¡æäº¤&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â å¦‚æœä»£ç æ²¡æœ‰ä»»ä½•æ–°å˜åŒ–ï¼Œåˆ™ç”¨æ¥æ”¹å†™ä¸Šä¸€æ¬¡commitçš„æäº¤ä¿¡æ¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ commitÂ --amendÂ -mÂ [message]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â é‡åšä¸Šä¸€æ¬¡commitï¼Œå¹¶åŒ…æ‹¬æŒ‡å®šæ–‡ä»¶çš„æ–°å˜åŒ–&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ commitÂ --amendÂ [file1]Â [file2]Â ...&lt;br/&gt;Â Â Â Â &lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;5ã€åˆ†æ”¯&lt;/span&gt;&lt;/h2&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;Â Â Â Â &lt;span&gt;#Â åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ branch&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â åˆ—å‡ºæ‰€æœ‰è¿œç¨‹åˆ†æ”¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ branchÂ -r&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â åˆ—å‡ºæ‰€æœ‰æœ¬åœ°åˆ†æ”¯å’Œè¿œç¨‹åˆ†æ”¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ branchÂ -a&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä½†ä¾ç„¶åœç•™åœ¨å½“å‰åˆ†æ”¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ branchÂ [branch-name]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œå¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ checkoutÂ -bÂ [branch]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŒ‡å®šcommit&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ branchÂ [branch]Â [commit]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼Œä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯å»ºç«‹è¿½è¸ªå…³ç³»&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ branchÂ --trackÂ [branch]Â [remote-branch]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â åˆ‡æ¢åˆ°æŒ‡å®šåˆ†æ”¯ï¼Œå¹¶æ›´æ–°å·¥ä½œåŒº&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ checkoutÂ [branch-name]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â åˆ‡æ¢åˆ°ä¸Šä¸€ä¸ªåˆ†æ”¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ checkoutÂ -&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â å»ºç«‹è¿½è¸ªå…³ç³»ï¼Œåœ¨ç°æœ‰åˆ†æ”¯ä¸æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ä¹‹é—´&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ branchÂ --&lt;span&gt;set&lt;/span&gt;-upstreamÂ [branch]Â [remote-branch]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â åˆå¹¶æŒ‡å®šåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ mergeÂ [branch]&lt;br/&gt;Â Â Â &lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æŸ¥çœ‹åˆ†æ”¯åˆå¹¶çŠ¶æ€&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â Â gitÂ rerereÂ status&lt;br/&gt;Â Â Â &lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æ˜¾ç¤ºåˆå¹¶å†²çªè§£å†³æ–¹æ¡ˆçš„å½“å‰çŠ¶æ€â€”â€”å¼€å§‹è§£å†³å‰ä¸è§£å†³åçš„æ ·å­&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â Â gitÂ rerereÂ diff&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â é€‰æ‹©ä¸€ä¸ªcommitï¼Œåˆå¹¶è¿›å½“å‰åˆ†æ”¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ cherry-pickÂ [commit]&lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â &lt;span&gt;#åˆ†æ”¯é‡å‘½å&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ gitÂ branchÂ -mÂ [oldName]Â Â [newName]&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â åˆ é™¤åˆ†æ”¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ branchÂ -dÂ [branch-name]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â åˆ é™¤è¿œç¨‹åˆ†æ”¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ pushÂ originÂ --deleteÂ [branch-name]&lt;br/&gt;Â Â Â Â $Â gitÂ branchÂ -drÂ [remote/branch]&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;6ã€æ ‡ç­¾&lt;/span&gt;&lt;/h2&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;Â Â Â Â &lt;span&gt;#Â åˆ—å‡ºæ‰€æœ‰tag&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ tag&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æ–°å»ºä¸€ä¸ªtagåœ¨å½“å‰commit&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ tagÂ [tag]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æ–°å»ºä¸€ä¸ªtagåœ¨æŒ‡å®šcommit&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ tagÂ [tag]Â [commit]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â åˆ é™¤æœ¬åœ°tag&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ tagÂ -dÂ [tag]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â åˆ é™¤è¿œç¨‹tag&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ pushÂ originÂ :refs/tags/[tagName]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æŸ¥çœ‹tagä¿¡æ¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ showÂ [tag]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æäº¤æŒ‡å®štag&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ pushÂ [remote]Â [tag]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æäº¤æ‰€æœ‰tag&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ pushÂ [remote]Â --tags&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â æ–°å»ºä¸€ä¸ªåˆ†æ”¯ï¼ŒæŒ‡å‘æŸä¸ªtag&lt;/span&gt;&lt;br/&gt;Â Â Â Â $Â gitÂ checkoutÂ -bÂ [branch]Â [tag]&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;7ã€æŸ¥çœ‹ä¿¡æ¯&lt;/span&gt;&lt;/h2&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#Â æ˜¾ç¤ºæœ‰å˜æ›´çš„æ–‡ä»¶&lt;/span&gt;&lt;br/&gt;$Â gitÂ status&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„ç‰ˆæœ¬å†å²&lt;/span&gt;&lt;br/&gt;$Â gitÂ &lt;span&gt;log&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºcommitå†å²ï¼Œä»¥åŠæ¯æ¬¡commitå‘ç”Ÿå˜æ›´çš„æ–‡ä»¶&lt;/span&gt;&lt;br/&gt;$Â gitÂ &lt;span&gt;log&lt;/span&gt;Â --&lt;span&gt;stat&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æœç´¢æäº¤å†å²ï¼Œæ ¹æ®å…³é”®è¯&lt;/span&gt;&lt;br/&gt;$Â gitÂ &lt;span&gt;log&lt;/span&gt;Â -SÂ [keyword]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œæ¯ä¸ªcommitå æ®ä¸€è¡Œ&lt;/span&gt;&lt;br/&gt;$Â gitÂ &lt;span&gt;log&lt;/span&gt;Â [tag]Â HEADÂ --pretty=format:%s&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºæŸä¸ªcommitä¹‹åçš„æ‰€æœ‰å˜åŠ¨ï¼Œå…¶&quot;æäº¤è¯´æ˜&quot;å¿…é¡»ç¬¦åˆæœç´¢æ¡ä»¶&lt;/span&gt;&lt;br/&gt;$Â gitÂ &lt;span&gt;log&lt;/span&gt;Â [tag]Â HEADÂ --grepÂ feature&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºæŸä¸ªæ–‡ä»¶çš„ç‰ˆæœ¬å†å²ï¼ŒåŒ…æ‹¬æ–‡ä»¶æ”¹å&lt;/span&gt;&lt;br/&gt;$Â gitÂ &lt;span&gt;log&lt;/span&gt;Â --followÂ [file]&lt;br/&gt;$Â gitÂ whatchangedÂ [file]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶ç›¸å…³çš„æ¯ä¸€æ¬¡diff&lt;/span&gt;&lt;br/&gt;$Â gitÂ &lt;span&gt;log&lt;/span&gt;Â -pÂ [file]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºè¿‡å»5æ¬¡æäº¤&lt;/span&gt;&lt;br/&gt;$Â gitÂ &lt;span&gt;log&lt;/span&gt;Â -5Â --prettyÂ --oneline&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºæ‰€æœ‰æäº¤è¿‡çš„ç”¨æˆ·ï¼ŒæŒ‰æäº¤æ¬¡æ•°æ’åº&lt;/span&gt;&lt;br/&gt;$Â gitÂ shortlogÂ -sn&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶æ˜¯ä»€ä¹ˆäººåœ¨ä»€ä¹ˆæ—¶é—´ä¿®æ”¹è¿‡&lt;/span&gt;&lt;br/&gt;$Â gitÂ blameÂ [file]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºæš‚å­˜åŒºå’Œå·¥ä½œåŒºçš„å·®å¼‚&lt;/span&gt;&lt;br/&gt;$Â gitÂ diff&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºæš‚å­˜åŒºå’Œä¸Šä¸€ä¸ªcommitçš„å·®å¼‚&lt;/span&gt;&lt;br/&gt;$Â gitÂ diffÂ --cachedÂ [file]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºå·¥ä½œåŒºä¸å½“å‰åˆ†æ”¯æœ€æ–°commitä¹‹é—´çš„å·®å¼‚&lt;/span&gt;&lt;br/&gt;$Â gitÂ diffÂ HEAD&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºä¸¤æ¬¡æäº¤ä¹‹é—´çš„å·®å¼‚&lt;/span&gt;&lt;br/&gt;$Â gitÂ diffÂ [first-branch]...[second-branch]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºä»Šå¤©ä½ å†™äº†å¤šå°‘è¡Œä»£ç &lt;/span&gt;&lt;br/&gt;$Â gitÂ diffÂ --shortstatÂ &lt;span&gt;&quot;@{0Â dayÂ ago}&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºæŸæ¬¡æäº¤çš„å…ƒæ•°æ®å’Œå†…å®¹å˜åŒ–&lt;/span&gt;&lt;br/&gt;$Â gitÂ showÂ [commit]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºæŸæ¬¡æäº¤å‘ç”Ÿå˜åŒ–çš„æ–‡ä»¶&lt;/span&gt;&lt;br/&gt;$Â gitÂ showÂ --name-onlyÂ [commit]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºæŸæ¬¡æäº¤æ—¶ï¼ŒæŸä¸ªæ–‡ä»¶çš„å†…å®¹&lt;/span&gt;&lt;br/&gt;$Â gitÂ showÂ [commit]:[filename]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºå½“å‰åˆ†æ”¯çš„æœ€è¿‘å‡ æ¬¡æäº¤&lt;/span&gt;&lt;br/&gt;$Â gitÂ reflog&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;8ã€è¿œç¨‹åŒæ­¥&lt;/span&gt;&lt;/h2&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#Â å…‹éš†è¿œç¨‹ä»“åº“&lt;/span&gt;&lt;br/&gt;$Â gitÂ &lt;span&gt;clone&lt;/span&gt;Â [url]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â ä¸‹è½½è¿œç¨‹ä»“åº“çš„æ‰€æœ‰å˜åŠ¨&lt;/span&gt;&lt;br/&gt;$Â gitÂ fetchÂ [remote]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºæ‰€æœ‰è¿œç¨‹ä»“åº“&lt;/span&gt;&lt;br/&gt;$Â gitÂ remoteÂ -v&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ˜¾ç¤ºæŸä¸ªè¿œç¨‹ä»“åº“çš„ä¿¡æ¯&lt;/span&gt;&lt;br/&gt;$Â gitÂ remoteÂ showÂ [remote]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â å¢åŠ ä¸€ä¸ªæ–°çš„è¿œç¨‹ä»“åº“ï¼Œå¹¶å‘½å&lt;/span&gt;&lt;br/&gt;$Â gitÂ remoteÂ addÂ [shortname]Â [url]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â å–å›è¿œç¨‹ä»“åº“çš„å˜åŒ–ï¼Œå¹¶ä¸æœ¬åœ°åˆ†æ”¯åˆå¹¶&lt;/span&gt;&lt;br/&gt;$Â gitÂ pullÂ [remote]Â [branch]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ‹‰å–è¿œç¨‹åˆ†æ”¯ï¼ŒåŒæ—¶åˆ›å»ºæœ¬åœ°åˆ†æ”¯&lt;/span&gt;&lt;br/&gt;$Â gitÂ fetchÂ [remote]Â è¿œç¨‹åˆ†æ”¯åx:æœ¬åœ°åˆ†æ”¯åx&lt;br/&gt;&lt;span&gt;#Â æ‹‰å–è¿œç¨‹åˆ†æ”¯ï¼ŒåŒæ—¶åˆ›å»ºæœ¬åœ°åˆ†æ”¯ï¼Œä¸”åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯&lt;/span&gt;&lt;br/&gt;$Â gitÂ checkoutÂ -bÂ [branch]Â [origin/è¿œç¨‹åˆ†æ”¯å]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â gitÂ pullç›¸å½“äºä»¥ä¸‹ä¸¤æ­¥&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â 1ã€æ‹‰å–è¿œç¨‹åˆ†æ”¯&lt;/span&gt;&lt;br/&gt;$Â gitÂ fetchÂ [remote]Â [branch]&lt;br/&gt;&lt;span&gt;#Â 2ã€åˆå¹¶åˆ°å½“å‰åˆ†æ”¯&lt;/span&gt;&lt;br/&gt;gitÂ mergeÂ [remote/branch]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â ä¸Šä¼ æœ¬åœ°æŒ‡å®šåˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“&lt;/span&gt;&lt;br/&gt;$Â gitÂ pushÂ [remote]Â [branch]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â å¼ºè¡Œæ¨é€å½“å‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“ï¼Œå³ä½¿æœ‰å†²çª&lt;/span&gt;&lt;br/&gt;$Â gitÂ pushÂ [remote]Â --force&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ¨é€æ‰€æœ‰åˆ†æ”¯åˆ°è¿œç¨‹ä»“åº“&lt;/span&gt;&lt;br/&gt;$Â gitÂ pushÂ [remote]Â --all&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ›´æ–°è¿œç¨‹åˆ†æ”¯åˆ—è¡¨&lt;/span&gt;&lt;br/&gt;$Â gitÂ remoteÂ updateÂ [remote]Â --prune&lt;br/&gt;$Â gitÂ remoteÂ updateÂ [remote]Â -p&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â åˆ é™¤å’Œè¿œç¨‹ä»“åº“çš„å…³è”&lt;/span&gt;&lt;br/&gt;$Â gitÂ remoteÂ rmÂ [remote]&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;9ã€æ’¤é”€&lt;/span&gt;&lt;/h2&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#Â æ¢å¤æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶åˆ°å·¥ä½œåŒº&lt;/span&gt;&lt;br/&gt;$Â gitÂ checkoutÂ [file]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ¢å¤æŸä¸ªcommitçš„æŒ‡å®šæ–‡ä»¶åˆ°æš‚å­˜åŒºå’Œå·¥ä½œåŒº&lt;/span&gt;&lt;br/&gt;$Â gitÂ checkoutÂ [commit]Â [file]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ¢å¤æš‚å­˜åŒºçš„æ‰€æœ‰æ–‡ä»¶åˆ°å·¥ä½œåŒº&lt;/span&gt;&lt;br/&gt;$Â gitÂ checkoutÂ .&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â é‡ç½®æš‚å­˜åŒºçš„æŒ‡å®šæ–‡ä»¶ï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´ï¼Œä½†å·¥ä½œåŒºä¸å˜&lt;/span&gt;&lt;br/&gt;$Â gitÂ resetÂ [file]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â é‡ç½®æš‚å­˜åŒºä¸å·¥ä½œåŒºï¼Œä¸ä¸Šä¸€æ¬¡commitä¿æŒä¸€è‡´&lt;/span&gt;&lt;br/&gt;$Â gitÂ resetÂ --hard&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â é‡ç½®å½“å‰åˆ†æ”¯çš„æŒ‡é’ˆä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºï¼Œä½†å·¥ä½œåŒºä¸å˜&lt;/span&gt;&lt;br/&gt;$Â gitÂ resetÂ [commit]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â Â å›é€€åˆ°ä¸Šä¸€æ¬¡æäº¤&lt;/span&gt;&lt;br/&gt;$Â gitÂ resetÂ --hardÂ HEAD^&lt;br/&gt;&lt;span&gt;#Â é‡ç½®å½“å‰åˆ†æ”¯çš„HEADä¸ºæŒ‡å®šcommitï¼ŒåŒæ—¶é‡ç½®æš‚å­˜åŒºå’Œå·¥ä½œåŒºï¼Œä¸æŒ‡å®šcommitä¸€è‡´&lt;/span&gt;&lt;br/&gt;$Â gitÂ resetÂ --hardÂ [commit]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â é‡ç½®å½“å‰HEADä¸ºæŒ‡å®šcommitï¼Œä½†ä¿æŒæš‚å­˜åŒºå’Œå·¥ä½œåŒºä¸å˜&lt;/span&gt;&lt;br/&gt;$Â gitÂ resetÂ --keepÂ [commit]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æ–°å»ºä¸€ä¸ªcommitï¼Œç”¨æ¥æ’¤é”€æŒ‡å®šcommit&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â åè€…çš„æ‰€æœ‰å˜åŒ–éƒ½å°†è¢«å‰è€…æŠµæ¶ˆï¼Œå¹¶ä¸”åº”ç”¨åˆ°å½“å‰åˆ†æ”¯&lt;/span&gt;&lt;br/&gt;$Â gitÂ revertÂ [commit]&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â æš‚æ—¶å°†æœªæäº¤çš„å˜åŒ–ç§»é™¤ï¼Œç¨åå†ç§»å…¥&lt;/span&gt;&lt;br/&gt;$Â gitÂ stash&lt;br/&gt;$Â gitÂ stashÂ pop&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å››ã€åœ¨å¼€å‘å·¥å…·ä¸­ä½¿ç”¨Git&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨Gitä¸­ä¸€äº›æ“ä½œä¾‹å¦‚&lt;code&gt;è§£å†³å†²çª&lt;/code&gt;ã€&lt;code&gt;åˆ†æ”¯æ¯”è¾ƒ&lt;/code&gt;ç­‰ç­‰ä½¿ç”¨å›¾å½¢åŒ–çš„æ“ä½œå¯èƒ½ä¼šæ›´åŠ æ–¹ä¾¿å¿«æ·ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;TortoiseGitæ˜¯ä¸€æ¬¾ä¸é”™çš„å›¾å½¢åŒ–Gitå·¥å…·ï¼Œæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œä¸‹è½½åœ°å€ï¼šhttps://tortoisegit.org/download/&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5429945880938064&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPseJpOnK3BpCqOkhkJJqbVnf5ox0RAibRbPRXBopnzh4MyV9FpwSTgX5w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1663&quot;/&gt;&lt;figcaption&gt;image-20201230175941903&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ç„¶ï¼Œä½¿ç”¨å¼€å‘å·¥å…·é›†æˆGitï¼Œä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1ã€åœ¨IDEAä¸­ä½¿ç”¨Git&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;IDEAæ˜¯å½“å‰æœ€å¥½ç”¨çš„Javaå¼€å‘IDEï¼ŒIDEAé»˜è®¤é›†æˆäº†å¯¹Gitçš„æ”¯æŒï¼Œåªéœ€è¦é…ç½®è®¾ç½®æ‰§è¡Œç¨‹åºå³å¯ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;1.1ã€é…ç½®Git&lt;span/&gt;&lt;/h3&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;File&lt;/code&gt; --&amp;gt; &lt;code&gt;Settings&lt;/code&gt;--&amp;gt; &lt;code&gt;Version Control&lt;/code&gt; --&amp;gt; &lt;code&gt;Git&lt;/code&gt;,ä¿®æ”¹Gitæ‰§è¡Œè·¯å¾„ä¸ºè‡ªå·±å®‰è£…çš„Gitè·¯å¾„ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.6578094620868438&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsfhMPL1sviamZmn9mpAXr8ryeFqKp3DtY4GWvyCPzhbtPfabbcWEbQsQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1543&quot;/&gt;&lt;figcaption&gt;image-20201226170425899&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.4922322158626329&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPs5EsGJGr45K8DIgHugQIvUTtDlkeYX30ibicWOQr4MibTvicZ153nS33IFA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1223&quot;/&gt;&lt;figcaption&gt;image-20201226170737431&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;1.2ã€è¿œç¨‹æ“ä½œ&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Ideaä¸­å¯ä»¥éå¸¸ä¾¿æ·çš„è¿›è¡Œè¿œç¨‹ä»“åº“ç›¸å…³çš„æ“ä½œã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;1.2.1ã€æ‹‰å–ä»£ç &lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šè¿‡Ideaå¯ä»¥ç›´æ¥æ‹‰å–è¿œç¨‹ä»“åº“çš„ä»£ç &lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;File&lt;/code&gt; --&amp;gt; &lt;code&gt;New&lt;/code&gt; ---&amp;gt; &lt;code&gt;Project From Version Controller&lt;/code&gt; --&amp;gt; &lt;code&gt;Git&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.3169456066945607&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPscBLrxxXGnJ2QwSZibYt88TPBhTc14N6fBFn8S7SyPddG5YSNBPlaXmQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;956&quot;/&gt;&lt;figcaption&gt;image-20210101122023216&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.2864385297845374&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPswbWAFAjrRUx1zVuF7Twl7YhFZviaTOHGWHCj1fcELXX4bEg1icpAavTg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;789&quot;/&gt;&lt;figcaption&gt;image-20210101122201172&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ ·è¿œç¨‹ä»“åº“çš„ä»£ç å°±å…‹éš†åˆ°äº†æœ¬åœ°ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;1.2.2ã€æ‹‰å–è¿œç¨‹åˆ†æ”¯&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šé¢æˆ‘ä»¬æ‹‰å–çš„æ˜¯è¿œç¨‹ä»“åº“ä¸»å¹²ä»£ç ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‹‰å–è¿œç¨‹åˆ†æ”¯ä»£ç ã€‚å³ä¸‹è§’ï¼Œç‚¹å¼€åˆ†æ”¯ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;1.1827956989247312&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsfItCDZgTwDk0cMknbtTicspBv8A0jVd9DJzkuW6l4UfJIKic7fZuXDBQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;279&quot;/&gt;&lt;figcaption&gt;image-20210101122607056&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥çœ‹åˆ° &lt;code&gt;Remote Branchs&lt;/code&gt;,ä¸‹é¢å°±æ˜¯è¿œç¨‹ä»“åº“çš„åˆ†æ”¯ã€‚ç‚¹å‡»è¿œç¨‹åˆ†æ”¯ï¼Œ&lt;code&gt;Checkout As&lt;/code&gt;,å°±å¯ä»¥æŠŠè¿œç¨‹åˆ†æ”¯æ‹‰åˆ°æœ¬åœ°äº†ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.637987012987013&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsrde1WvGfMXVYibPMlPbzBusVKbeYZaWS4up3dSdpVhOiaxRHgJhNr2pQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;616&quot;/&gt;&lt;figcaption&gt;image-20210101124703962&lt;/figcaption&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;1.2.3ã€æ›´æ–°ä»£ç &lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬åœ¨æäº¤ä»£ç å‰æœ€å¥½å…ˆæ›´æ–°ä¸‹è¿œç¨‹ä»“åº“çš„ä»£ç åˆ°æœ¬åœ°ä»“åº“ï¼Œè¿™æ ·å¯ä»¥å‡å°‘ä¸å¿…è¦çš„å†²çªï¼Œæ›´æ–°updateå¯ä»¥ç›´æ¥é€šè¿‡å¿«æ·é”® &lt;code&gt;Ctrl + T&lt;/code&gt;ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å·¥å…·æ ä¸ŠæŒ‰é”®æ¥å®ç°:&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.1801665404996215&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsibfpHrGZXia6val4tIYWXqVPPG4B8lnibTGq7njCk171C7gf8EjiaEOAeg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1321&quot;/&gt;&lt;figcaption&gt;image-20210101125000452&lt;/figcaption&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;1.2.4ã€æäº¤/æ¨é€ä»£ç &lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨IDEAä¸­å¼€å‘å¥½è‡ªå·±çš„ä»£ç ä¹‹åå¦‚ä½•æäº¤åˆ°è¿œç¨‹ä»“åº“å‘¢ï¼Ÿ&lt;code&gt;å³é”®é¡¹ç›®&lt;/code&gt;--&amp;gt;&lt;code&gt;Git&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.8677298311444653&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPskgQZmTvZs5TaBdO6sSrmUHs06AJMIxDKc04VEGRqFlFZHibssSTrQ1w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1066&quot;/&gt;&lt;figcaption&gt;image-20210101125217192&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;1.Commit Directory&lt;/strong&gt;ï¼šcommitä»£ç (å°†stageåŒºçš„æš‚å­˜æ–‡ä»¶æäº¤åˆ°å½“å‰åˆ†æ”¯çš„æœ¬åœ°ä»“åº“ï¼Œå¹¶æ¸…ç©ºstageåŒº)ï¼Œä¹Ÿå¯ä»¥pushä»£ç ï¼ˆæŠŠæœ¬åœ°ä»“åº“çš„æ–‡ä»¶åŒæ­¥åˆ°è¿œç¨‹ä»“åº“ï¼‰ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.8478444632290786&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsBg4ibfJBSFvMfPoxIyKK1BFTHR2WIQ2ic3zsHSlg3OpAnqX5Wgh5q4ibQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1183&quot;/&gt;&lt;figcaption&gt;image-20210101125736901&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;Commitå¯¹åº”Gitçš„Commitå‘½ä»¤,commitåˆ°æœ¬åœ°ä»“åº“&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;Commit and Pushä¹Ÿå°±æ˜¯Commitå’Œpushï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨è¿™é‡Œcommitåˆ°æœ¬åœ°ä»“åº“ä¹‹åï¼Œå†pushåˆ°è¿œç¨‹ä»“åº“ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;åœ¨IDEAä¸­ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°æ–‡ä»¶è¢«æ ‡è¯†ç€ä¸åŒé¢œè‰²ï¼šçº¢è‰²ï¼Œç»¿è‰²ï¼Œè“è‰²ã€‚å®ƒä»¬åˆ†åˆ«ä»£è¡¨ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;çº¢è‰²ï¼šæœªè¢«ç‰ˆæœ¬æ§åˆ¶çš„æ–‡ä»¶ï¼Œå³æœªæ·»åŠ åˆ°ç‰ˆæœ¬æ§åˆ¶çš„æ–‡ä»¶ï¼Œä¾‹å¦‚æˆ‘ä»¬æ·»åŠ åˆ°&lt;strong&gt;ignore&lt;/strong&gt;ä¸­çš„æ–‡ä»¶ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ç»¿è‰²ï¼šæ–°åŠ å…¥ç‰ˆæœ¬çš„æ–‡ä»¶ï¼Œå³æˆ‘ä»¬æ–°åˆ›å»ºçš„æ–‡ä»¶ï¼Œè¿˜æœªæäº¤åˆ°è¿œç¨‹ä»“åº“ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;è“è‰²ï¼šä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼Œå³è¿œç¨‹ä»“åº“ä¸­å·²æœ‰è¯¥æ–‡ä»¶ï¼Œæˆ‘ä»¬è¿™æ¬¡å¯¹å®ƒè¿›è¡Œäº†ä¿®æ”¹ï¼Œä½†æ˜¯è¿˜æœªæäº¤ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œå†æ¥ç€çœ‹çœ‹å‡ ä¸ªæŒ‰é”®çš„ä½œç”¨ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.33852544132917967&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsFTNvgmnTzujFviaS7SdULmqlF1HxBX7zAfGzL6hAro3uw0RGYo2kCjw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;963&quot;/&gt;&lt;figcaption&gt;image-20210101130202600&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;2.Add&lt;/strong&gt;ï¼šæŠŠæœ¬åœ°æ–‡ä»¶ä»å·¥ä½œç›®å½•æ·»åŠ åˆ°æœ¬åœ°ä»“åº“çš„stageåŒºï¼Œå¯¹åº”Gitçš„Addå‘½ä»¤ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;3.Compare with Branchâ€¦&lt;/strong&gt;ï¼šä¸è¿œç¨‹åˆ†æ”¯æ¯”è¾ƒã€‚æˆ‘ä»¬æäº¤å‰å¯ä»¥é€šè¿‡æ­¤åŠŸèƒ½æ¯”è¾ƒä¸‹æˆ‘ä»¬å·¥ä½œç›®å½•ä¸­ä»£ç å’Œè¿œç¨‹åˆ†æ”¯ä»£ç çš„å¼‚åŒã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;4.Show History&lt;/strong&gt;ï¼šæŸ¥çœ‹å†å²ä¿®æ”¹ç‰ˆæœ¬è®°å½•ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;5.Revert&lt;/strong&gt;ï¼šå›æ»šï¼Œä¼šå°†ä½ çš„æœ¬åœ°ä¿®æ”¹å›æ»šã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;6.Repository&lt;/strong&gt;ï¼šå„ç§ä»“åº“å‘½ä»¤ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5936599423631124&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPskWZOSIX50ebvLkspuiapOe2ZMGAh0tG60YJCuMVPAvDZFj3X6ncPia4Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;694&quot;/&gt;&lt;figcaption&gt;image-20210101130400728&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;1.3ã€åˆ†æ”¯ç®¡ç†&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;1.3.1ã€æ–°å»ºåˆ†æ”¯&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç‚¹å‡»New Branchå¯ä»¥æ–°å»ºåˆ†æ”¯&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.4369287020109689&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPs0IKDIWWz1PAvCZK1yg4GLy1BKCpMMWcHibon89HU0Q1bqoMPlNr2CzA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;547&quot;/&gt;&lt;figcaption&gt;image-20210101122733992&lt;/figcaption&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;1.3.2ã€åˆ†æ”¯åˆ‡æ¢/æ¯”è¾ƒ/åˆå¹¶/é‡å‘½å/åˆ é™¤&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨Ideaä¸­è¿™äº›åŠŸèƒ½çš„ä½¿ç”¨ä¹Ÿå¸¸ç®€å•ï¼Œç‚¹å‡»åˆ†æ”¯ï¼Œç‚¹å‡»è¦æ“ä½œçš„åˆ†æ”¯ï¼Œå°±å¯ä»¥çœ‹åˆ°è¿™äº›é€‰é¡¹&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.7368421052631579&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsicaY8EIvicLka2G9FUsXMLLhf1iaQ3W1P7zVDPJ96vZuw2re4DOGNQBqA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;912&quot;/&gt;&lt;figcaption&gt;image-20210101123418491&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;1.4ã€æŸ¥çœ‹æäº¤å†å²&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å†&lt;code&gt;Version Controller&lt;/code&gt;é‡Œ&lt;code&gt;log&lt;/code&gt;å¯ä»¥æŸ¥çœ‹æäº¤å†å²&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.4140030441400304&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPssLFahCQI6Lib4kRibv3tkdoWdR1qicw5vQw9Nlmk7ib3NpylibrmXXgBCUg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1314&quot;/&gt;&lt;figcaption&gt;image-20210101130638650&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;1.5ã€åˆå¹¶ï¼ˆå¤„ç†å†²çªï¼‰&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šé¢æˆ‘ä»¬æäº†åˆ†æ”¯åˆå¹¶ï¼Œå¯ä»¥ä»æœ¬åœ°åˆ†æ”¯åˆå¹¶ï¼Œä¹Ÿå¯ä»¥ä»è¿œç¨‹ä»“åº“åˆå¹¶ï¼Œä¸€èˆ¬ä¸¤ä¸ªå¹¶è¡Œå¼€å‘çš„åˆ†æ”¯åˆå¹¶éƒ½æ˜¯ä¼šæœ‰å†²çªï¼ŒIdeaä¸­åˆå¹¶å†²çªæ˜¯éå¸¸æ–¹ä¾¿çš„ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;åœ¨åˆå¹¶è¿‡ç¨‹ä¸­å‘ç”Ÿäº†å†²çªï¼ŒIdeaä¼šæç¤ºå†²çªï¼Œé€‰æ‹©&lt;code&gt;Merge&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.9719626168224299&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsIl7Pib77srIXKSJ6lpPZYicgQSz8ra9iape71Kickff4ibYOUiawx6PqUaSQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;856&quot;/&gt;&lt;figcaption&gt;image-20210101131209085&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;Ideaæä¾›äº†ä¸‰ä¸ªåˆ†æ ï¼Œæˆ‘ä»¬å¯ä»¥ç‚¹å‡»ç®­å¤´ï¼Œå¾ˆæ–¹ä¾¿åœ°å¤„ç†å†²çª&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5948002536461636&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsdMF49vR1MkUFWqkp1MGID2CJYmx1MXLbDITkcAChvW1cQzX1mvvHUg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1577&quot;/&gt;&lt;figcaption&gt;image-20210101131313411&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å¦‚æœåˆå¹¶æ—¶æ²¡æœ‰å¤„ç†ï¼Œä¹Ÿå¯ä»¥åœ¨&lt;code&gt;Version Controller&lt;/code&gt;ä¸­å¤„ç†&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.21986754966887417&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsrlWFDftQLjsGQicZYuPMu3WlodVxUznp2anSxHibekh3jyfTb3scickEQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;755&quot;/&gt;&lt;figcaption&gt;image-20210101131750519&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2ã€åœ¨VS Codeä¸­ä½¿ç”¨Git&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;VS Codeæ˜¯å½“å‰æœ€æµè¡Œçš„å‰ç«¯å¼€å‘å·¥å…·ï¼ŒVS Codeå¯¹Gitçš„æ”¯æŒä¸æ˜¯é‚£ä¹ˆå¼ºå¤§ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡æ’ä»¶æ¥å¢å¼ºGitåŠŸèƒ½ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.1ã€åŸºæœ¬ä½¿ç”¨&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.1.1ã€åŸºæœ¬ç•Œé¢&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘çš„VS Codeé…ç½®äº†ä¸­æ–‡åŒ…ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç‚¹å‡»å·¦ä¾§Gitæ ‡è¯†ï¼Œå¯ä»¥çœ‹åˆ°å¾ˆå¤šçš„æ“ä½œã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.7633832976445396&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPs95u4uBiaJSS9B5vm9QgiczzW3HMUbX318TtVOVowcsELhTDRSgxIXdsg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;934&quot;/&gt;&lt;figcaption&gt;image-20210101133222496&lt;/figcaption&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.1.2ã€æ–‡ä»¶çŠ¶æ€&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“å¯¹æ–‡ä»¶è¿›è¡Œä¿®æ”¹åï¼Œæœ‰ä¸‰ç§çŠ¶æ€&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5746835443037974&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsnpNITOfrYxISDLNCoFG1oLh7IShtK3pibYwO1K971uGxpN0ZHkc4B7A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;395&quot;/&gt;&lt;figcaption&gt;alt&lt;/figcaption&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;M æ˜¯ modify çš„ç¼©å†™å³è¯¥æ–‡ä»¶å­˜åœ¨ä¿®æ”¹&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;D æ˜¯ delete çš„ç¼©å†™å³è¯¥æ–‡ä»¶è¢«åˆ é™¤äº†&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;U æ˜¯ Update çš„ç¼©å†™å³è¯¥æ–‡ä»¶æ˜¯æ–°æ·»åŠ &lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.1.3ã€æäº¤ä»£ç &lt;span/&gt;&lt;/h4&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.6398601398601399&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPs1EW0DkQ9tecEdnMghmOMTQWdYansrOM8aOr9BlhIRcR0wzCk1wXT7g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;572&quot;/&gt;&lt;figcaption&gt;image-20210101134246844&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ–‡ä»¶æŒ‰é’®çš„çš„æ„æ€ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å¦‚æœæ˜¯æ–°æ·»åŠ çš„æ–‡ä»¶ï¼Œæ”¾å¼ƒä¿®æ”¹å°±ä¼šæç¤ºå½»åº•åˆ é™¤æ–‡ä»¶ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¦‚æœæ˜¯åˆ é™¤çš„æ–‡ä»¶ï¼Œé€‰æ‹©æ”¾å¼ƒä¿®æ”¹å°±ä¼šä»ä»“åº“ä¸­æ¢å¤æ–‡ä»¶ (å†ä¹Ÿä¸ç”¨æ‹…å¿ƒè¯¯åˆ çš„æ–‡ä»¶æ‰¾ä¸åˆ°äº†)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç‚¹å‡» + å·ç¡®è®¤æ–‡ä»¶çš„ä¿®æ”¹å°±ä¼šæåˆ° stash Changes ä¸Š &lt;code&gt;(å¯¹åº” git add å‘½ä»¤)&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.7319587628865979&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPskEfkt10ddjsjibGJqaJgUeK5XHKUV1xygpymcph5ibrUzuwLJsUwvStA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;485&quot;/&gt;&lt;figcaption&gt;image-20210101134415788&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¡®è®¤äº†æ–‡ä»¶ä¹‹åï¼Œåœ¨è¾“å…¥æ¡†è¾“å…¥è¿™æ¬¡æ›´æ–°çš„å†…å®¹ï¼Œç„¶åç‚¹å‡»æ‰“å‹¾å°±å¯ä»¥ä¿å­˜è¿™ä¸€æ¬¡æ›´æ–°äº† &lt;code&gt;(å¯¹åº” git commit å‘½ä»¤)&lt;/code&gt;å¦‚æœå½“å‰æ‰€æœ‰çš„ Changes éƒ½è¦ commit ï¼Œé‚£å¯ä»¥ç›´æ¥è¾“å…¥ä¸Šä¼ çš„ä¿¡æ¯å¹¶ä¸”æ‰“å‹¾å°±å¯ä»¥å¿«é€Ÿ commit äº†ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.1.4ã€æ¨é€ä»£ç &lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®Œæˆæäº¤ä»¥åï¼Œvscode çš„å·¦ä¸‹è§’å°±ä¼šå‡ºç°ä¸Šç®­å¤´çš„æ•°å­—ä¸º 1 (ä¸Šç®­å¤´æ˜¯ push çš„æ›´æ–°ï¼Œä¸‹ç®­å¤´æ˜¯å¯ä»¥ pull çš„æ›´æ–°)
å½“ç„¶å¦‚æœä¹‹å‰æ²¡æœ‰ push è¿‡ä»£ç çš„è¯ï¼Œè¿™ä¸ªå¯èƒ½ä¼šæ²¡æœ‰æ•°å­—æ˜¾ç¤ºã€‚è¿™ä¸ªæ—¶å€™å°±å¯ä»¥å°†ä»£ç æ¨é€åˆ° è¿œç¨‹ä»“åº“ä¸Šäº† &lt;code&gt;(å¯¹åº” git push å‘½ä»¤)&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;1.7307001795332135&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsl8VicHhvkcQkJs28eh3AF4EDvsUic3vlFbz9WbcfH9jmriaIkVEbwib49g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;557&quot;/&gt;&lt;figcaption&gt;image-20210101135322345&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;OKï¼Œè¿œç¨‹ä»“åº“å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„æäº¤äº†ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.33528980190755686&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsSMXiaKmNSrhBViclUfWChAiansvo6jO8GD27O9hYGjia4Mtata1zHq4OMg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1363&quot;/&gt;&lt;figcaption&gt;image-20210101135531641&lt;/figcaption&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.1.5ã€æ‹‰å–ä»£ç &lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¹Ÿå¯ä»¥é€šè¿‡ vscode å·¦ä¸‹è§’çš„ä¸‹ç®­å¤´çœ‹åˆ°ä»“åº“æ˜¯å¦å¯ä»¥ æ‹‰å–ï¼Œç„¶åç‚¹å‡»èœå•çš„ git pull è¿›è¡Œä»“åº“æ›´æ–° (å¯¹åº” &lt;code&gt;git pull&lt;/code&gt; å‘½ä»¤)&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.43154761904761907&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPs08cetJIXPCCV8x7J2xRgola8Nyw8Nm3peM7Fhf0eAnAAGt0CfiaGfXg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;672&quot;/&gt;&lt;br/&gt;&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.1.5ã€åˆ†æ”¯åˆ‡æ¢&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;vscode å¯ä»¥ç›´æ¥åœ¨å·¦ä¸‹è§’åˆ›å»ºåˆ†æ”¯ï¼Œä¹Ÿå¯ä»¥åˆ‡æ¢åˆ†æ”¯ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.6784722222222223&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsIKXMbKjB9vclDzibGeiclXst0cCl1ibnNxKURIicNtopX8Z5bxZsCLo7Tg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1440&quot;/&gt;&lt;figcaption&gt;image-20210101135941565&lt;/figcaption&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ä¸Šé¢çš„åŠŸèƒ½æ»¡è¶³äº†åŸºæœ¬è¦æ±‚ï¼Œå¦‚æœè¿˜éœ€è¦&lt;code&gt;ä»£ç æ¯”å¯¹&lt;/code&gt;ï¼Œ&lt;code&gt;è§£å†³å†²çª&lt;/code&gt;ï¼Œå¯ä»¥é€‰æ‹©æ’ä»¶ï¼Œç›®å‰å…¬è®¤çš„æœ€å¥½ç”¨çš„æ’ä»¶æ˜¯GitLensã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.2ã€ä½¿ç”¨Gitæ’ä»¶&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.2.1ã€å®‰è£…GitLens&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰“å¼€æ’ä»¶å•†åº—ï¼Œæœç´¢ &lt;code&gt;GitLens&lt;/code&gt;,å®‰è£…å³å¯ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.49973780807551127&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsfPJ1jZSodPxdYurQaAy3ehWXVbTZsdwY79HhX9peaG6S1ue5S31Ckg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1907&quot;/&gt;&lt;figcaption&gt;image-20210101140524655&lt;/figcaption&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.2.2ã€GitLensåŸºæœ¬ä½¿ç”¨&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®‰è£…å®Œæˆä¹‹åä¾§è¾¹çš„å·¥å…·æ ä¼šå¤šå‡ºä¸€ä¸ª git åˆ†æ”¯å›¾æ ‡ï¼Œç‚¹å‡»å°±å¯ä»¥æŸ¥çœ‹æ›´è¯¦ç»†çš„ä¿¡æ¯äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;1.745583038869258&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsJkMcSibPK8u3CunWy6R29XiaiaoooA9kTOHJbXSsibtQ4oGBrA8cAPAexg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;566&quot;/&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ç¬¬ä¸€ä¸ªæŠ˜å é¢æ¿æŸ¥çœ‹æ‰€æœ‰æäº¤&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¬¬äºŒä¸ªæŠ˜å é¢æ¿æŸ¥çœ‹å½“å‰æ‰“å¼€æ–‡ä»¶çš„å†å²&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¬¬ä¸‰ä¸ªæŠ˜å é¢æ¿æŸ¥çœ‹åˆ†æ”¯&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¬¬å››ä¸ªæŠ˜å é¢æ¿æŸ¥çœ‹è¿œç¨‹&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¬¬äº”ä¸ªæŠ˜å é¢æ¿æŸ¥çœ‹stashçš„æ–‡ä»¶&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¬¬å…­ä¸ªæŠ˜å é¢æ¿æŸ¥çœ‹æ ‡ç­¾&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¬¬ä¸ƒä¸ªæŠ˜å é¢æ¿å¯ä»¥æ¯”è¾ƒä¸åŒçš„åˆ†æ”¯æ ‡ç­¾çš„æ–‡ä»¶åŒºåˆ«&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;br/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŒæ—¶å‘ç°ï¼Œæ¯ä¸€è¡Œä»£ç éƒ½ä¼šæ˜¾ç¤ºæäº¤äººå’Œæäº¤ä¿¡æ¯&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5202156334231806&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsmkHRZjjqWjxrQLKo4oE84y9pbMBqgWt9dJjzEa8pnlG41r0XQT1M1g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1113&quot;/&gt;&lt;figcaption&gt;image-20210101142124359&lt;/figcaption&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.2.3ã€æŸ¥çœ‹æ›´æ”¹&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¿®æ”¹æ–‡ä»¶åï¼ŒGitlens ä¾§è¾¹ä¼šæœ‰é¢œè‰²å—å‘Šè¯‰ä½ ä»£ç çš„æ›´æ–°æƒ…å†µï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.9106529209621993&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsm3dukXMVou6ARkkvWlOIpxE1q8A7TkpLfhtBNSlqv24BVq6DKUu3ibg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;582&quot;/&gt;&lt;figcaption&gt;image-20210101142959836&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å³ä¸Šè§’ç‚¹å‡»&lt;code&gt;æŸ¥çœ‹æ›´æ”¹&lt;/code&gt;,å¯ä»¥æŸ¥çœ‹å½“å‰æ–‡ä»¶çš„æ›´æ”¹ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.2669172932330827&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPs2Kk8FYzO4uRL5h2hhnNalzibgrWh2s0BvCEXOpgibJicpDygB0wAE7hDg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;266&quot;/&gt;&lt;figcaption&gt;image-20210101142700430&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.6095487246566383&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPs1ssZFykExvtbWiaqfRFJickKHMBA5uK4mQcJCiaiaOh9pTfibJUaa8pZ3tQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1529&quot;/&gt;&lt;figcaption&gt;image-20210101143105278&lt;/figcaption&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;2.2.4ã€å¤„ç†å†²çª&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;VScode å†…ç½®çš„ git ä¼šå‘Šè¯‰ä½ æœ‰å†²çªçš„æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ Gitlens å¯ä»¥å¿«é€Ÿè°ƒæ•´å†²çªã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5159151193633952&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsatYSIEfSe5GvQEHGIqNroQqe6IqjJDlo0xzVwENAVSgb8R17JTNGkg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1508&quot;/&gt;&lt;figcaption&gt;image-20210101145429996&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.47978793903247186&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/PMZOEonJxWeMUNOCN9s1ouvnYvJkibQPsW53Z9QomOq8Kzn6NzPocO0JIoMmTpOwtsHXyWlfcd73YVpiaZPAoZOg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1509&quot;/&gt;&lt;figcaption&gt;image-20210101145525530&lt;/figcaption&gt;&lt;/figure&gt;&lt;br data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;br data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;big&gt;å‚è€ƒ&lt;/big&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ã€1ã€‘ï¼š&lt;span&gt;?&lt;/span&gt;Git ä»å…¥é—¨åˆ°æ”¾ä¸ä¸‹&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ã€2ã€‘ï¼š&lt;span&gt;?&lt;/span&gt;å¸¸ç”¨Gitå‘½ä»¤æ•´ç†&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ã€3ã€‘ï¼š&lt;span&gt;?&lt;/span&gt;Gitåˆ†æ”¯ç®¡ç†ç­–ç•¥&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ã€4ã€‘ï¼š&lt;span&gt;?&lt;/span&gt;vue-blog&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ã€5ã€‘ï¼šã€Šprogitã€‹&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ã€6ã€‘ï¼š&lt;span&gt;?&lt;/span&gt;Windowsé…ç½®Githubã€Giteeå…±å­˜çš„Gitç¯å¢ƒ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ã€7ã€‘ï¼š&lt;span&gt;?&lt;/span&gt;VScode ç»“åˆgitçš„å…¨é¢ä½¿ç”¨æµç¨‹ï¼ˆä¸Šï¼‰&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ã€8ã€‘ï¼š&lt;span&gt;?&lt;/span&gt;VScode ç»“åˆgitçš„å…¨é¢ä½¿ç”¨æµç¨‹ï¼ˆä¸‹ï¼‰&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>5baa1f9a457f12ac07040f06d02593b7</guid>
<title>ä¸€ç§æ¯”ç‰¹çº§åˆ«çš„æ•°æ®äº¤æ¢æ ¼å¼</title>
<link>https://toutiao.io/k/v6zcjxw</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;body id=&quot;readabilityBody&quot;&gt;
  &lt;div class=&quot;document&quot;&gt;
    
      
      &lt;div class=&quot;documentwrapper&quot;&gt;
        &lt;div class=&quot;bodywrapper&quot;&gt;
          

          &lt;div class=&quot;body&quot; role=&quot;main&quot;&gt;
            
  &lt;div class=&quot;section&quot; id=&quot;the-bit-level-data-interchange-format&quot;&gt;
&lt;h1&gt;ä¸€ç§æ¯”ç‰¹çº§åˆ«çš„æ•°æ®äº¤æ¢æ ¼å¼&lt;a class=&quot;headerlink&quot; href=&quot;#the-bit-level-data-interchange-format&quot; title=&quot;æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜&quot;&gt;Â¶&lt;/a&gt;&lt;/h1&gt;
&lt;img alt=&quot;https://img.shields.io/badge/license-BSD3-brightgreen&quot; src=&quot;https://img.shields.io/badge/license-BSD3-brightgreen&quot;/&gt;
&lt;a class=&quot;reference external image-reference&quot; href=&quot;https://github.com/hit9/bitproto/actions?query=workflow%3A%22bitproto+ci%22&quot;&gt;&lt;img alt=&quot;https://github.com/hit9/bitproto/workflows/bitproto%20ci/badge.svg&quot; src=&quot;https://github.com/hit9/bitproto/workflows/bitproto%20ci/badge.svg&quot;/&gt;&lt;/a&gt;
&lt;a class=&quot;reference external image-reference&quot; href=&quot;https://bitproto.readthedocs.io/en/latest/?badge=latest&quot;&gt;&lt;img alt=&quot;https://readthedocs.org/projects/bitproto/badge/?version=latest&quot; src=&quot;https://readthedocs.org/projects/bitproto/badge/?version=latest&quot;/&gt;&lt;/a&gt;
&lt;a class=&quot;reference external image-reference&quot; href=&quot;https://saythanks.io/to/hit9@icloud.com&quot;&gt;&lt;img alt=&quot;https://img.shields.io/badge/Say%20Thanks-!-1EAEDB.svg&quot; src=&quot;https://img.shields.io/badge/Say%20Thanks-!-1EAEDB.svg&quot;/&gt;&lt;/a&gt;
&lt;div class=&quot;section&quot; id=&quot;introduction&quot;&gt;

&lt;p&gt;bitproto æ˜¯ä¸€ç§å¿«é€Ÿçš„ã€è½»é‡çš„ã€æ˜“ç”¨çš„ç”¨æ¥åºåˆ—åŒ–ç»“æ„åŒ–æ•°æ®çš„æ¯”ç‰¹çº§åˆ«æ•°æ®äº¤æ¢æ ¼å¼ã€‚&lt;/p&gt;
&lt;p&gt;bitproto çš„åè®®æè¿°è¯­æ³•å’Œè‘—åçš„ &lt;a class=&quot;reference external&quot; href=&quot;https://developers.google.com/protocol-buffers&quot;&gt;protocol buffers&lt;/a&gt; ç±»ä¼¼ï¼Œåªä¸è¿‡æ˜¯æ¯”ç‰¹çº§åˆ«çš„:&lt;/p&gt;
&lt;div class=&quot;highlight-bitproto notranslate&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span/&gt;&lt;span class=&quot;kd&quot;&gt;message&lt;/span&gt; &lt;span class=&quot;ni&quot;&gt;Data&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;uint3&lt;/span&gt; &lt;span class=&quot;ni&quot;&gt;the&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;uint3&lt;/span&gt; &lt;span class=&quot;ni&quot;&gt;bit&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;uint5&lt;/span&gt; &lt;span class=&quot;ni&quot;&gt;level&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;3&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;uint4&lt;/span&gt; &lt;span class=&quot;ni&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;4&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;uint11&lt;/span&gt; &lt;span class=&quot;ni&quot;&gt;interchange&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;6&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;uint6&lt;/span&gt; &lt;span class=&quot;ni&quot;&gt;format&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;7&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// 32 bits =&amp;gt; 4B&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä¸Šé¢çš„ &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;Data&lt;/span&gt;&lt;/code&gt; æ˜¯ä¸€ä¸ªæ¶ˆæ¯ï¼Œå®ƒç”± 7 ä¸ªå­—æ®µæ„æˆï¼Œåœ¨ç¼–ç åä¼šå ç”¨ 4 ä¸ªå­—èŠ‚ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸€å¼ å›¾ç‰‡å±•ç¤ºäº†ç¼–ç åçš„å­—èŠ‚æµä¸­æ•°æ®å­—æ®µçš„åˆ†å¸ƒæƒ…å†µ:&lt;/p&gt;
&lt;img alt=&quot;_images/data-encoding-sample.png&quot; class=&quot;align-center&quot; src=&quot;_images/data-encoding-sample.png&quot;/&gt;
&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;features&quot;&gt;

&lt;ul class=&quot;simple&quot;&gt;
&lt;li&gt;&lt;p&gt;æ”¯æŒæ¯”ç‰¹çº§åˆ«çš„æ•°æ®åºåˆ—åŒ–&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æ”¯æŒåè®®çš„ &lt;a class=&quot;reference internal&quot; href=&quot;language.html#language-guide-extensibility&quot;&gt;&lt;span class=&quot;std std-ref&quot;&gt;æ‰©å±•æ€§&lt;/span&gt;&lt;/a&gt;ã€å‘åå…¼å®¹è®¾è®¡&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;dl class=&quot;simple&quot;&gt;
&lt;dt&gt;éå¸¸å®¹æ˜“ &lt;a class=&quot;reference internal&quot; href=&quot;quickstart.html#quickstart&quot;&gt;&lt;span class=&quot;std std-ref&quot;&gt;ä¸Šæ‰‹&lt;/span&gt;&lt;/a&gt;:&lt;/dt&gt;&lt;dd&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class=&quot;reference internal&quot; href=&quot;language.html#language-guide&quot;&gt;&lt;span class=&quot;std std-ref&quot;&gt;åè®®çš„è¯­æ³•&lt;/span&gt;&lt;/a&gt; ç±»ä¼¼è‘—åçš„ protobuf.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;ç”Ÿæˆçš„ä»£ç å…·æœ‰éå¸¸ç®€å•çš„ API&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;/li&gt;
&lt;li&gt;&lt;dl class=&quot;simple&quot;&gt;
&lt;dt&gt;æ”¯æŒä»¥ä¸‹ç¼–ç¨‹è¯­è¨€&lt;/dt&gt;&lt;dd&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æå¿«çš„ç¼–è§£ç æ€§èƒ½ (&lt;a class=&quot;reference internal&quot; href=&quot;performance.html#performance-benchmark&quot;&gt;&lt;span class=&quot;std std-ref&quot;&gt;æ€§èƒ½å‹æµ‹&lt;/span&gt;&lt;/a&gt;).&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;code-example&quot;&gt;
&lt;h2&gt;ä»£ç ç¤ºä¾‹&lt;a class=&quot;headerlink&quot; href=&quot;#code-example&quot; title=&quot;æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜&quot;&gt;Â¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;ä¸€ä¸ªåœ¨ C è¯­è¨€ä¸­ç¼–ç  bitproto æ¶ˆæ¯çš„ä»£ç ç¤ºä¾‹:&lt;/p&gt;
&lt;div class=&quot;highlight-c notranslate&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span/&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Data&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{};&lt;/span&gt;
&lt;span class=&quot;kt&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BYTES_LENGTH_DATA&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;EncodeData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;ä¸‹é¢çš„æ˜¯ä¸€ä¸ªè§£ç çš„ä¾‹å­:&lt;/p&gt;
&lt;div class=&quot;highlight-c notranslate&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre&gt;&lt;span/&gt;&lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Data&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{};&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;DecodeData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;éå¸¸ç®€å•ï¼Œä¸æ˜¯å—?&lt;/p&gt;
&lt;p&gt;å¯¹äº Go å’Œ Python è¯­è¨€ï¼Œbitproto çš„ç¼–è§£ç çš„ä»£ç ä¹Ÿæ˜¯ç±»ä¼¼çš„ã€‚ä½ å¯ä»¥å‰å¾€ &lt;a class=&quot;reference internal&quot; href=&quot;quickstart.html#quickstart&quot;&gt;&lt;span class=&quot;std std-ref&quot;&gt;å¿«é€Ÿå¼€å§‹çš„æ–‡æ¡£&lt;/span&gt;&lt;/a&gt; è·å–è¿›ä¸€æ­¥çš„å¼•å¯¼å†…å®¹ã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;why-bitproto&quot;&gt;
&lt;h2&gt;ä¸ºä»€ä¹ˆä¼šæœ‰ bitproto ?&lt;a class=&quot;headerlink&quot; href=&quot;#why-bitproto&quot; title=&quot;æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜&quot;&gt;Â¶&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;å·²ç»æœ‰ protobuf äº†ï¼Œä¸ºä»€ä¹ˆè¦åš bitproto å‘¢?&lt;/p&gt;
&lt;div class=&quot;section&quot; id=&quot;origin&quot;&gt;

&lt;p&gt;bitproto æœ€åˆæ˜¯æˆ‘åœ¨å’Œå¾®å‹æ§åˆ¶å™¨ä¸Šçš„åµŒå…¥å¼ç¨‹åºæ‰“äº¤é“çš„æ—¶å€™åˆ›ä½œçš„ã€‚åœ¨åµŒå…¥å¼çš„ç¯å¢ƒä¸­ï¼Œç»å¸¸ä¼šæœ‰è®¸å¤šå¼€å‘ä¸Šçš„çº¦æŸ:&lt;/p&gt;
&lt;ul class=&quot;simple&quot;&gt;
&lt;li&gt;&lt;p&gt;ç´§å‡‘çš„é€šä¿¡é‡&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å—é™åˆ¶çš„å›ºä»¶å¤§å°&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æœ€å¥½ä¸è¦æœ‰åŠ¨æ€å†…å­˜çš„ä½¿ç”¨&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Protobuf å¤©ç”Ÿä¸æ˜¯ä¸ºäº†åµŒå…¥å¼é¢†åŸŸçš„ï¼Œå®ƒæ²¡æœ‰å¼€ç®±å³ç”¨çš„çº¯ C è¯­è¨€çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;scenario&quot;&gt;

&lt;p&gt;å¯¹äºä»¥ä¸‹çš„åœºæ™¯ï¼Œæ˜¯æ¨èä½¿ç”¨ bitproto ï¼Œè€Œé protobuf çš„:&lt;/p&gt;

&lt;p&gt;å¯¹äºå…¶ä»–åœºæ™¯ï¼Œåˆ™æ¨èè€ƒè™‘ protobuf ï¼Œè€Œä¸æ˜¯ bitproto .&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;vs-protobuf&quot;&gt;
&lt;h3&gt;å’Œ Protobuf ç›¸æ¯”&lt;a class=&quot;headerlink&quot; href=&quot;#vs-protobuf&quot; title=&quot;æ°¸ä¹…é“¾æ¥è‡³æ ‡é¢˜&quot;&gt;Â¶&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;bitproto å’Œ protobuf çš„ä¸åŒç‚¹æœ‰:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;bitproto æ”¯æŒæ¯”ç‰¹çº§åˆ«çš„æ•°æ®åºåˆ—åŒ–ï¼Œç±»ä¼¼ C è¯­è¨€ä¸­çš„ &lt;a class=&quot;reference external&quot; href=&quot;https://en.wikipedia.org/wiki/Bit_field&quot;&gt;bit fields&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;bitproto ä¸ä½¿ç”¨ä»»ä½•åŠ¨æ€å†…å­˜ã€‚å¾ˆå°‘æœ‰ &lt;a class=&quot;reference external&quot; href=&quot;https://github.com/protocolbuffers/protobuf/blob/master/docs/third_party.md&quot;&gt;protobuf çš„ C è¯­è¨€å®ç°&lt;/a&gt; æ”¯æŒè¿™ç‚¹ï¼Œé™¤äº† &lt;a class=&quot;reference external&quot; href=&quot;https://jpa.kapsi.fi/nanopb&quot;&gt;nanopb&lt;/a&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;bitproto ä¸æ”¯æŒå˜é•¿æ•°æ®ï¼Œæ‰€æœ‰ç±»å‹éƒ½æ˜¯å®šé•¿çš„.&lt;/p&gt;
&lt;p&gt;bitproto ä¸ä¼šæŠŠä»»ä½•ç±»å‹ä¿¡æ¯æˆ–è€…åå°„ä¿¡æ¯ç¼–ç åˆ°å­—èŠ‚æµä¸­ã€‚å®ƒåªç¼–ç æ•°æ®æœ¬èº«ï¼Œç¼–ç åçš„æ•°æ®æ’åˆ—å°±å’Œå†…å­˜ä¸­ä¸€æ ·ï¼Œå®šé•¿ä¸”ä¸å¸¦æœ‰ä»»ä½•å­—èŠ‚ç¼éš™ï¼Œå°±åƒåœ¨C è¯­è¨€ä¸­è®¾ç½® &lt;a class=&quot;reference external&quot; href=&quot;https://stackoverflow.com/a/11772340&quot;&gt;ç»“æ„ä½“çš„å¯¹é½ä¸º 1 å­—èŠ‚&lt;/a&gt; ä¸€æ ·ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Protobuf å¯¹äº &lt;a class=&quot;reference external&quot; href=&quot;https://developers.google.com/protocol-buffers/docs/overview#backwards_compatibility&quot;&gt;å‘åå…¼å®¹&lt;/a&gt; çš„ç‰¹æ€§æ”¯æŒçš„å¾ˆå¥½ã€‚å¯¹äº bitprotoï¼Œç›´åˆ° &lt;a class=&quot;reference internal&quot; href=&quot;changelog.html#version-0-4-0&quot;&gt;&lt;span class=&quot;std std-ref&quot;&gt;v0.4.0&lt;/span&gt;&lt;/a&gt; è¿™éƒ½æ˜¯å…¶ä¸€ä¸ªä¸»è¦çš„ç¼ºç‚¹ã€‚è‡ªä»è¿™ä¸ªç‰ˆæœ¬ä¹‹åï¼Œbitproto é€šè¿‡åœ¨ç¼–ç åçš„å­—èŠ‚æµå¤´éƒ¨æ–°å¢ä¸¤ä¸ªå­—èŠ‚çš„æ–¹å¼å®ç°äº† &lt;a class=&quot;reference internal&quot; href=&quot;language.html#language-guide-extensibility&quot;&gt;&lt;span class=&quot;std std-ref&quot;&gt;æ‰©å±•æ€§&lt;/span&gt;&lt;/a&gt; çš„æ”¯æŒï¼Œè¿™ä¸¤ä¸ªå­—èŠ‚å­˜å‚¨äº†ç›¸å…³æ¶ˆæ¯çš„å ç”¨å­—èŠ‚æ•°çš„å¤šå°‘ã€‚è¿™ä¸ªè®¾è®¡æ‰“ç ´äº† bitproto ä¼ ç»Ÿçš„ç¼–ç ç»“æ„çš„è®¾è®¡ï¼Œå› ä¸ºæ–°å¢äº†ä¸€äº›å¯¹äºç¼–ç å¤§å°çš„åå°„ä¿¡æ¯ï¼Œå› æ­¤è¿™ä¸ªåŠŸèƒ½è¢«è®¾è®¡ä¸ºå¯é€‰çš„ã€‚&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class=&quot;section&quot; id=&quot;shortcomes&quot;&gt;

&lt;p&gt;å·²çŸ¥çš„ bitproto çš„ç¼ºç‚¹å¦‚ä¸‹:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;bitproto ä¸æ”¯æŒå˜é•¿æ•°æ®ç±»å‹ã€‚ ä¸¾ä¾‹æ¥è¯´ï¼Œä¸€ä¸ª &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;uint37&lt;/span&gt;&lt;/code&gt; ç±»å‹çš„æ•°æ®æ°¸è¿œåœ¨ç¼–ç åå ç”¨ 37 ä¸ªæ¯”ç‰¹ï¼Œå³ä½¿ä½ èµ‹å€¼å®ƒä¸€ä¸ªè¯¸å¦‚ &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;1&lt;/span&gt;&lt;/code&gt; è¿™æ ·å¾ˆå°çš„å€¼ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ„å‘³ç€ï¼Œå¦‚æœæœ‰æ„ä¹‰çš„æ•°æ®å ç”¨ç±»å‹çš„å æ¯”è¾ƒå°çš„æ—¶å€™ï¼Œç¼–ç åçš„æ•°æ®ä¸­ä¼šæœ‰å¾ˆå¤šé›¶å­—èŠ‚ã€‚æ¯”å¦‚ï¼Œå½“ä¸€ä¸ªå¤§å°ä¸º &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;n&lt;/span&gt;&lt;/code&gt; ä¸ªå­—èŠ‚çš„ç±»å‹åªè¢«ä½¿ç”¨äº†å…¶ä¸­ä¸€ä¸ªå­—èŠ‚çš„æ—¶å€™ï¼Œä¼šæœ‰ &lt;code class=&quot;docutils literal notranslate&quot;&gt;&lt;span class=&quot;pre&quot;&gt;n-1&lt;/span&gt;&lt;/code&gt; ä¸ªå­—èŠ‚ä¼šæ˜¯é›¶å­—èŠ‚ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å¹¶ä¸ç‰¹åˆ«å…³å¿ƒè¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºåœ¨åµŒå…¥å¼è®¾å¤‡ä¸Šçš„é€šä¿¡é‡ä¸€èˆ¬ä¸ä¼šæœ‰å¤šå°‘å­—èŠ‚ã€‚è¿™é‡Œçš„åè®®è‡ªèº«ä¸€èˆ¬è¦è®¾è®¡åœ°ç´§å‡‘ä¸€äº›ã€‚å¦‚æœä½ çœŸçš„æ¯”è¾ƒå…³å¿ƒè¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ &lt;a class=&quot;reference external&quot; href=&quot;https://zlib.net/&quot;&gt;zlib&lt;/a&gt; ç±»ä¼¼çš„å‹ç¼©æœºåˆ¶ï¼Œåœ¨æ¶ˆæ¯ç¼–ç åè¿›è¡Œä¸€æ¬¡åè®®å‹ç¼©ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;bitproto æ— æ³•åŒæ—¶æä¾› &lt;a class=&quot;reference internal&quot; href=&quot;performance.html#performance-optimization-mode&quot;&gt;&lt;span class=&quot;std std-ref&quot;&gt;æœ€ä½³çš„æ€§èƒ½&lt;/span&gt;&lt;/a&gt; å’Œ &lt;a class=&quot;reference internal&quot; href=&quot;language.html#language-guide-extensibility&quot;&gt;&lt;span class=&quot;std std-ref&quot;&gt;æ‰©å±•æ€§èƒ½åŠ›&lt;/span&gt;&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;bitproto ä¸­è®¾è®¡äº†ä¸€ç§ &lt;a class=&quot;reference internal&quot; href=&quot;performance.html#performance-optimization-mode&quot;&gt;&lt;span class=&quot;std std-ref&quot;&gt;ä¼˜åŒ–æ¨¡å¼&lt;/span&gt;&lt;/a&gt; ï¼Œè¿™ä¸ªæ¨¡å¼ä¸‹ï¼Œç¼–è¯‘å™¨ä¼šç›´æ¥ç”Ÿæˆç›´ç™½çš„ç¼–è§£ç çš„è¯­å¥ï¼Œä»¥è¾¾åˆ°æ›´å¥½çš„ç¼–è§£ç æ€§èƒ½ã€‚å› ä¸º bitproto ä¸­æ‰€æœ‰çš„ç±»å‹éƒ½æ˜¯å®šé•¿çš„ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ç”Ÿæˆé˜¶æ®µå°±æ¸…æ¥šåœ°çŸ¥é“å¦‚ä½•å¯¹å…¶è¿›è¡Œç¼–è§£ç ã€‚å‹æµ‹çš„ç»“æœè¡¨æ˜ï¼Œè¿™ä¸ªæ¨¡å¼å¸¦æ¥äº†å·¨å¤§çš„æ€§èƒ½æå‡ï¼Œä¸è¿‡ç›®å‰ä¸ºæ­¢æˆ‘è¿˜æ²¡æœ‰æƒ³åˆ°ä¸€ä¸ªåŠæ³•æ¥æ”¯æŒ bitproto çš„æ‰©å±•æ€§åŠŸèƒ½å’Œè¿™ä¸ªæ€§èƒ½ä¼˜åŒ–æ¨¡å¼ä¸€èµ·å·¥ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;/div&gt;


          &lt;/div&gt;
          
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;p class=&quot;clearer&quot;/&gt;
  &lt;/div&gt;
    

    

    
  &lt;/body&gt;
&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>b708db62a7d97f5e8761529087efef88</guid>
<title>Redis é›†ç¾¤æ­å»ºå¾ˆ easy</title>
<link>https://toutiao.io/k/m4mw3sc</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section&gt;&lt;h3&gt;&lt;span&gt;å‰è¨€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h3&gt;&lt;p&gt;å“¨å…µæ¨¡å¼è™½ç„¶è®©è¯»å†™åˆ†ç¦»æ›´åŠ é«˜å¯ç”¨ï¼Œä½†å•å°æœåŠ¡å™¨ç”±äºæœ¬èº«çš„å†…å­˜å’ŒCPUç“¶é¢ˆï¼Œå¯¹äºé«˜å¹¶å‘å’Œå¤§æ•°æ®ä¸šåŠ¡çš„åº”ç”¨åœºæ™¯è¿˜æ˜¯è¿œè¿œä¸èƒ½æ»¡è¶³ï¼›å¯¹äºè¿™ç§æƒ…å†µï¼Œæœ‰ç‚¹ç»éªŒçš„å°ä¼™ä¼´ä¼šæ¯«ä¸çŠ¹è±«çš„æƒ³åˆ°é›†ç¾¤ï¼Œæä»–å¥½å‡ ä¸ªèŠ‚ç‚¹ï¼Œè´Ÿè½½å‡è¡¡å†åŠ ä¸Šæ•…éšœè½¬ç§»ï¼Œå²‚ä¸ç¾å“‰ã€‚æ˜¯çš„ï¼Œå°±æ˜¯è¿™ä¸ªç†ï¼Œæ¥ä¸‹æ¥ç©ç©ã€‚&lt;/p&gt;&lt;h3&gt;&lt;span&gt;æ­£æ–‡&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;é›†ç¾¤&lt;/strong&gt;ï¼Œç›¸ä¿¡è¿™ä¸ªè¯å°ä¼™ä¼´åº”è¯¥å¬çš„è€³æœµèµ·èŒ§å­äº†å§ï¼›å¤šæå‡ å°æœåŠ¡å™¨ï¼Œè®©è¯·æ±‚/å‘½ä»¤å¹³å‡åˆ†å‘åˆ°å„ä¸ªæœåŠ¡å™¨ï¼Œé¿å…å•å°æœåŠ¡å™¨æ‰¿è½½è¿‡å¤§å‹åŠ›ï¼›å¯¹äºRedisé›†ç¾¤æ¥è¯´ï¼Œä¸ºäº†å®ç°è‡ªåŠ¨æ•…éšœè½¬ç§»ï¼Œè¿˜éœ€è¦åœ¨æ¯ä¸ªä¸»èŠ‚ç‚¹ä¸Šå¢åŠ ä¸€ä¸ªæˆ–å¤šä¸ªä»èŠ‚ç‚¹ï¼Œå½“ä¸»èŠ‚ç‚¹å‘ç”Ÿæ•…éšœæ—¶ï¼Œä»èŠ‚ç‚¹è‡ªåŠ¨è¡¥ä¸Šï¼Œå®ç°é«˜å¯ç”¨ã€‚&lt;/p&gt;&lt;p&gt;æ€»çš„æ¥è¯´ï¼ŒRedisé›†ç¾¤æœ‰ä»¥ä¸‹ä½œç”¨ï¼š&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;å¤šä¸»èŠ‚ç‚¹çš„å®ç°å¯ä»¥&lt;strong&gt;åº”å¯¹é«˜å¹¶å‘åœºæ™¯&lt;/strong&gt;ï¼Œå¹¶å‘é‡å¢å¤§ï¼ŒèŠ‚ç‚¹å¯ä»¥éšæ—¶æ‰©å±•æ»¡è¶³éœ€æ±‚ï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;å¤šä¸»èŠ‚ç‚¹çš„å®ç°å¯ä»¥&lt;strong&gt;å­˜å‚¨æ›´å¤šçš„æ•°æ®&lt;/strong&gt;ï¼Œå› ä¸ºæ•°æ®å‡åŒ€åˆ†å¸ƒåˆ°å„ä¸ªèŠ‚ç‚¹ï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;å¤šä¸»èŠ‚ç‚¹æ­é…å¤šä»èŠ‚ç‚¹çš„å®ç°è®©&lt;strong&gt;é«˜å¯ç”¨æ›´åŠ ç¨³å®š&lt;/strong&gt;ï¼Œå³å½“æœ‰ä¸»èŠ‚ç‚¹å‘ç”Ÿæ•…éšœæ—¶ï¼Œå¯¹åº”ä¸‹é¢çš„ä»èŠ‚ç‚¹ä¼šå‡çº§ä¸ºä¸»èŠ‚ç‚¹ï¼Œæ­£å¸¸æä¾›åŠŸèƒ½ï¼›&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;è€è§„çŸ©ä¸å˜ï¼Œä¸€è¾¹å®æ“ä¸€è¾¹æ€»ç»“ï¼Œæ¥ä¸‹æ¥æ­å»ºä¸€ä¸ª3ä¸»3ä»çš„é›†ç¾¤ï¼Œè¿™æ˜¯æœ€ç®€å•çš„ã€‚&lt;strong&gt;Redisé›†ç¾¤ä¸­æœ€å°‘éœ€è¦3ä¸ªä¸»èŠ‚ç‚¹&lt;/strong&gt;ï¼Œå†åŠ ä¸Šä¸ºäº†å®ç°é«˜å¯ç”¨ï¼Œæ¯ä¸ªä¸»èŠ‚ç‚¹è‡³å°‘å¾—è·Ÿä¸€ä¸ªä»èŠ‚ç‚¹ï¼Œä¸ç„¶ä¸€ä¸ªä¸»èŠ‚ç‚¹æŒ‚äº†ï¼Œæ‰¾ä¸åˆ°å®Œæ•´çš„æ•°æ®ï¼Œæ•´ä¸ªé›†ç¾¤å°±ä¸èƒ½ç”¨äº†ï¼›è‡³äºä¸ºä»€ä¹ˆä¼šæ‰¾ä¸åˆ°å®Œæ•´çš„æ•°æ®ï¼Œä¸‹é¢ä¼šèŠåˆ°ã€‚&lt;/p&gt;&lt;p&gt;æ¥ä¸‹æ¥è¦æ­å»ºçš„é›†ç¾¤ç¯å¢ƒå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.4256410256410256&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChQGMXn5rDBSaZwDJ9AibYEibtQUlE7QADIW0W9LxKETojVKZicLVYV9VcC0ezFJJOFKeNIxOn1LL3mXA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;585&quot;/&gt;&lt;/p&gt;&lt;figure&gt;&lt;figcaption/&gt;&lt;/figure&gt;&lt;p&gt;ç®€è¦è¯´æ˜ï¼š&lt;/p&gt;&lt;p&gt;è¿™é‡Œé›†ç¾¤æ–¹æ¡ˆä½¿ç”¨redis-cliè‡ªåŠ¨æŒ‡å®šä¸»ä»å…³ç³»(å°ä¼™ä¼´çš„ä¸»ä»å…³ç³»å¯èƒ½ä¼šå’Œæˆ‘è¿™ä¸ä¸€æ ·å“¦)ï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨æŒ‡å®šï¼›åæ­£æ€è·¯éƒ½ä¸€æ ·ï¼›&lt;/p&gt;&lt;p&gt;ä»¥ä¸‹æ¼”ç¤ºåœ¨åŒä¸€å°æœºå™¨ä¸Šï¼Œé€šè¿‡ç«¯å£åŒºåˆ†å„ä¸ªèŠ‚ç‚¹ï¼›åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨ä¸åŒçš„æœåŠ¡å™¨ã€‚&lt;/p&gt;&lt;h4&gt;&lt;span&gt;æ¡ˆä¾‹æ¼”ç¤º&lt;/span&gt;&lt;/h4&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;å‡†å¤‡å…­ä¸ªèŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶ï¼Œå¼€å¯é›†ç¾¤ç›¸å…³é…ç½®&lt;/strong&gt;ï¼›&lt;/p&gt;&lt;p&gt;æ‹·è´æœ€åˆé»˜è®¤çš„é…ç½®æ–‡ä»¶ï¼Œç„¶åè¿›è¡Œæ›´æ”¹ï¼Œä¸»è¦æ›´æ”¹ä»¥ä¸‹é¡¹ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;portÂ 6370Â &lt;span&gt;#Â æŒ‡å®šRedisèŠ‚ç‚¹ç«¯å£&lt;/span&gt;&lt;br/&gt;pidfileÂ /var/run/redis_6370.pidÂ &lt;span&gt;#Â æŒ‡å®šå¯¹åº”è¿›ç¨‹æ–‡ä»¶&lt;/span&gt;&lt;br/&gt;dbfilenameÂ dump6370.rdbÂ &lt;span&gt;#Â æ¯ä¸ªèŠ‚ç‚¹çš„rdbæŒä¹…åŒ–æ–‡ä»¶&lt;/span&gt;&lt;br/&gt;cluster-enabledÂ yesÂ &lt;span&gt;#Â å¼€å¯é›†ç¾¤ï¼Œè¿™ä¸ªæ¯”è¾ƒé‡è¦&lt;/span&gt;&lt;br/&gt;cluster-config-fileÂ nodes-6370.confÂ &lt;span&gt;#æŒ‡å®šæ¯ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤é…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªæ¯”è¾ƒé‡è¦&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»¥ä¸Šé…ç½®æ–‡ä»¶å†…å®¹åœ¨å…¶ä»–èŠ‚ç‚¹(6370,6371,6380,6381,6390,6391)éƒ½éœ€è¦è¿›è¡Œä¿®æ”¹ï¼Œåªæ˜¯å°†å…¶ä¸­6370æ”¹ä¸ºå¯¹åº”èŠ‚ç‚¹çš„ç«¯å£å³å¯ï¼Œç›®çš„å°±æ˜¯ä¸ºäº†ä¸åŒèŠ‚ç‚¹ä½¿ç”¨ä¸åŒç«¯å£å¹¶åŒºåˆ†ç”¨åˆ°çš„ä¸åŒæ–‡ä»¶å³å¯ï¼›æ¯”å¦‚éœ€è¦ä¿®æ”¹6371èŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;portÂ 6371Â &lt;span&gt;#Â æŒ‡å®šRedisèŠ‚ç‚¹ç«¯å£&lt;/span&gt;&lt;br/&gt;pidfileÂ /var/run/redis_6371.pidÂ &lt;span&gt;#Â æŒ‡å®šå¯¹åº”è¿›ç¨‹æ–‡ä»¶&lt;/span&gt;&lt;br/&gt;dbfilenameÂ dump6371.rdbÂ &lt;span&gt;#Â æ¯ä¸ªèŠ‚ç‚¹çš„rdbæŒä¹…åŒ–æ–‡ä»¶&lt;/span&gt;&lt;br/&gt;cluster-enabledÂ yesÂ &lt;span&gt;#Â å¼€å¯é›†ç¾¤ï¼Œè¿™ä¸ªæ¯”è¾ƒé‡è¦&lt;/span&gt;&lt;br/&gt;cluster-config-fileÂ nodes-6371.confÂ &lt;span&gt;#æŒ‡å®šæ¯ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤é…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªæ¯”è¾ƒé‡è¦&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶ä¸­&lt;strong&gt;cluster-enabled&lt;/strong&gt;å’Œ&lt;strong&gt;cluster-config-file&lt;/strong&gt;æ˜¯é›†ç¾¤é…ç½®çš„é‡ç‚¹ã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;å¯åŠ¨å…­ä¸ªèŠ‚ç‚¹ï¼Œåˆšå¼€å§‹å„ä¸ªèŠ‚ç‚¹æ˜¯ç›¸äº’ç‹¬ç«‹çš„&lt;/strong&gt;ï¼›&lt;/p&gt;&lt;p&gt;å‡†å¤‡å¥½é…ç½®æ–‡ä»¶ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨redis-serveræŒ‡å®šé…ç½®æ–‡ä»¶å¯åŠ¨èŠ‚ç‚¹å•¦ï¼Œå¦‚æœèŠ‚ç‚¹å¤šï¼Œå°ä¼™ä¼´å¯ä»¥ç¼–å†™è„šæœ¬å“¦ï¼›&lt;/p&gt;&lt;pre&gt;&lt;code&gt;./redis-serverÂ ZoeCluster/redis6370.confÂ &lt;span&gt;#Â å¯åŠ¨6370èŠ‚ç‚¹&lt;/span&gt;&lt;br/&gt;./redis-serverÂ ZoeCluster/redis6371.confÂ &lt;span&gt;#Â å¯åŠ¨6371èŠ‚ç‚¹&lt;/span&gt;&lt;br/&gt;./redis-serverÂ ZoeCluster/redis6380.confÂ &lt;span&gt;#Â å¯åŠ¨6380èŠ‚ç‚¹&lt;/span&gt;&lt;br/&gt;./redis-serverÂ ZoeCluster/redis6381.confÂ &lt;span&gt;#Â å¯åŠ¨6381èŠ‚ç‚¹&lt;/span&gt;&lt;br/&gt;./redis-serverÂ ZoeCluster/redis6390.confÂ &lt;span&gt;#Â å¯åŠ¨6390èŠ‚ç‚¹&lt;/span&gt;&lt;br/&gt;./redis-serverÂ ZoeCluster/redis6391.confÂ &lt;span&gt;#Â å¯åŠ¨6391èŠ‚ç‚¹&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯åŠ¨æ•ˆæœå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.34392523364485983&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChQGMXn5rDBSaZwDJ9AibYEibtCiak9JBXuAmYeRCZWnRYjplIYUC2QGLgo3gxKQgznic7Ps3HBgvZjOpQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1070&quot;/&gt;&lt;/p&gt;&lt;figure&gt;&lt;figcaption/&gt;&lt;/figure&gt;&lt;p&gt;è¿™æ ·åªæ˜¯å°†å„ä¸ªèŠ‚ç‚¹å¯åŠ¨èµ·æ¥ï¼Œé›†ç¾¤å…³ç³»è¿˜æ²¡åˆ›å»ºå‘¢ï¼Œå¦‚æœä¸ä¿¡ï¼Œå¯ä»¥ä½¿ç”¨redis-cliè¿æ¥ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹æŸ¥çœ‹é›†ç¾¤ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;figure&gt;&lt;figcaption&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.4627151051625239&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChQGMXn5rDBSaZwDJ9AibYEibtCHAetSrvbMibwMP8VLrBGcTh5HRSPsraIyEuN7V9Z2ictQWLsXEjIk6g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;523&quot;/&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;å¦‚ä¸Šå›¾ï¼Œcluster-sizeä¸º0ï¼Œé›†ç¾¤çš„å…³é”®ï¼Œæ§½ä¹Ÿè¿˜æ²¡æœ‰åˆ†é…ï¼›é‚£æ¥ä¸‹æ¥è‚¯å®šæ˜¯è¦å°†å„èŠ‚ç‚¹çš„é›†ç¾¤å…³ç³»æèµ·æ¥ï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;å»ºç«‹èŠ‚ç‚¹é›†ç¾¤å…³ç³»&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;ç”±äºæˆ‘ä½¿ç”¨çš„Redisç‰ˆæœ¬æ˜¯5.0ï¼Œç›´æ¥å¯ä»¥ä½¿ç”¨&lt;strong&gt;redis-cli&lt;/strong&gt;å°±å¯ä»¥è¿›è¡Œé›†ç¾¤æ­å»ºï¼Œåœ¨æ­¤ç‰ˆæœ¬ä¹‹å‰éƒ½æ¨èä½¿ç”¨redis-trib.rbè¿›è¡Œç›¸å…³æ“ä½œï¼Œè¿™ä¸ªæ˜¯ä¸€ä¸ªRubyè„šæœ¬ï¼Œéœ€è¦å®‰è£…ç›¸å…³ç¯å¢ƒï¼Œå°ä¼™ä¼´å¯ä»¥ä¸‹æ¥å°è¯•ï¼›&lt;/p&gt;&lt;p&gt;ä½¿ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;./redis-cliÂ --clusterÂ createÂ --cluster-replicasÂ 1Â 127.0.0.1:6370Â 127.0.0.1:6380Â 127.0.0.1:6390Â 127.0.0.1:6371Â 127.0.0.1:6381Â 127.0.0.1:6391&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å‚æ•°ç®€ä»‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;strong&gt;-- cluster&lt;/strong&gt; : æŒ‡å®šæ˜¯ç”¨äºåˆ›å»ºé›†ç¾¤ç¯å¢ƒï¼›&lt;/p&gt;&lt;p&gt;&lt;strong&gt;-a&lt;/strong&gt;ï¼šå¯†ç ï¼Œå³å¦‚æœæœ‰å¯†ç ï¼Œå¯ä»¥é€šè¿‡-aä¼ å‚ï¼Œè¿™é‡Œæ²¡æœ‰è®¾ç½®å¯†ç ï¼›&lt;/p&gt;&lt;p&gt;&lt;strong&gt;--cluster-replicas&lt;/strong&gt;ï¼šè¿™é‡Œè®¾ç½®ä¸º1, ç”¨äºé…ç½®ä¸»èŠ‚ç‚¹ä¸Šçš„ä»èŠ‚ç‚¹æ•°ï¼Œ1å°±ä»£è¡¨ä¸€ä¸»ä¸€ä»ï¼Œ2å°±ä»£è¡¨ä¸€ä¸»äºŒä»ï¼Œä¾æ¬¡ç±»æ¨ï¼›&lt;/p&gt;&lt;p&gt;&lt;strong&gt;åé¢çš„æ˜¯èŠ‚ç‚¹IP:èŠ‚ç‚¹ç«¯å£&lt;/strong&gt;ï¼Œä¸€èˆ¬å‰é¢çš„æ˜¯ä¸»èŠ‚ç‚¹ï¼Œåé¢çš„æ˜¯ä»èŠ‚ç‚¹ï¼›&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.5256241787122208&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChQGMXn5rDBSaZwDJ9AibYEibtCgspickZWrRVMc4dJcdXYibOIYQXSJZicbxkWTkT4lyJj1WWV7KN0szLQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;761&quot;/&gt;&lt;br/&gt;&lt;figcaption/&gt;&lt;/figure&gt;&lt;p&gt;å¦‚æœåŒæ„é›†ç¾¤æ–¹æ¡ˆï¼Œç„¶åå°±å¼€å§‹è¿›è¡Œç›¸å…³æ“ä½œï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.6461748633879781&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChQGMXn5rDBSaZwDJ9AibYEibtpVGql3GJlhoeXcaqPd7w7c3MyDbBhsU2mUUiaMVsWSwUDJvIh96oHzw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;732&quot;/&gt;&lt;br/&gt;&lt;figcaption/&gt;&lt;/figure&gt;&lt;p&gt;åŒæ ·ï¼Œå¯ä»¥è¿æ¥åˆ°ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼ŒæŸ¥çœ‹é›†ç¾¤æƒ…å†µï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.751937984496124&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChQGMXn5rDBSaZwDJ9AibYEibtNVWeiaUHtXicsOl1JqkLiae6BC9FseMWvjaFZVo4XcdjQ6D8niarFwTOlA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;645&quot;/&gt;&lt;br/&gt;&lt;figcaption/&gt;&lt;/figure&gt;&lt;p&gt;æ³¨ï¼šå…³äºä¸»ä»èŠ‚ç‚¹ä¹‹é—´çš„ä¸»ä»å¤åˆ¶è¿‡ç¨‹å°±ä¸åœ¨è¿™è¯´äº†ï¼Œå’Œä¹‹å‰è¯´è¿‡çš„ä¸»ä»å¤åˆ¶ä¸€æ ·ï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;æ¼”ç¤ºè®¿é—®æ“ä½œ&lt;/strong&gt;ï¼›&lt;/p&gt;&lt;p&gt;ä½¿ç”¨redis-cliè¿æ¥ä»»æ„èŠ‚ç‚¹å†™å…¥æ•°æ®ï¼Œå¦‚æœä¸æŒ‡å®šé›†ç¾¤è¿æ¥çš„è¯ï¼Œä¼šå†™å…¥æ•°æ®å¤±è´¥ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.160676532769556&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChQGMXn5rDBSaZwDJ9AibYEibtFN8ibRQHzrY5kplcq4am540YgbpeicjRIyLsURiaibjSibiaKuO7q7r9Mic2Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;473&quot;/&gt;&lt;/p&gt;&lt;figure&gt;&lt;figcaption/&gt;&lt;/figure&gt;&lt;p&gt;ç”±äºé›†ç¾¤ç¯å¢ƒä¸‹ï¼Œæ•°æ®çš„å­˜å‚¨ä½ç½®æ˜¯æ ¹æ®Keyæ¥è®¡ç®—è€Œæ¥çš„(è¿™é‡Œç‰µæ¶‰åˆ°ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•)ï¼Œä½¿å¾—æ•°æ®å¯ä»¥å‡åŒ€åˆ†é…åˆ°å„èŠ‚ç‚¹ä¸Šï¼Œæ‰€ä»¥åœ¨redis-cliè¿æ¥çš„æ—¶å€™éœ€è¦æŒ‡å®šé›†ç¾¤æ¨¡å¼ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.18149466192170818&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChQGMXn5rDBSaZwDJ9AibYEibtUa2KAzicPLjOUcbzl5GKc0AMHutrJK9VweibVic1gNPuKnoicSkT7XDzMw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;562&quot;/&gt;&lt;br/&gt;&lt;figcaption/&gt;&lt;/figure&gt;&lt;p&gt;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒæŒ‡å®šé›†ç¾¤æ¨¡å¼ä¹‹åå°±å¯ä»¥æ­£å¸¸å­˜å–äº†ï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;æ•…éšœæ¼”ç¤º&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;æ—¢ç„¶é›†ç¾¤ç¯å¢ƒï¼Œè‚¯å®šå°‘ä¸äº†è¦å¥½å¥½æµ‹æµ‹ï¼›&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ¨¡æ‹Ÿä»èŠ‚ç‚¹æŒ‚æ‰&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;æ‰¾ä¸ªä»èŠ‚ç‚¹åœæ‰è¯•è¯•ï¼Œè¿™é‡Œåœæ‰6371èŠ‚ç‚¹ï¼Œæ ¹æ®åˆ›å»ºé›†ç¾¤ä¿¡æ¯çŸ¥é“ï¼Œå®ƒçš„ä¸»èŠ‚ç‚¹æ˜¯6390ï¼›&lt;/p&gt;&lt;p&gt;ä¸»èŠ‚ç‚¹æ˜¾ç¤ºä»èŠ‚ç‚¹æ–­å¼€è¿æ¥ï¼Œçœ‹çœ‹å®ƒçš„ä¸»èŠ‚ç‚¹ååº”ï¼š&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.08100929614873838&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChQGMXn5rDBSaZwDJ9AibYEibtTRnjq4pDfMtW003rmMIF22obdYtJKrIa2Yic4Y7CDAp6WCENUdCrHXA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;753&quot;/&gt;&lt;br/&gt;&lt;figcaption/&gt;&lt;/figure&gt;&lt;p&gt;å…¶ä»–é›†ç¾¤èŠ‚ç‚¹åªæ˜¯å°†ä»èŠ‚ç‚¹æ ‡è®°ä¸ºfailingçŠ¶æ€ï¼Œå³ä¸‹çº¿çŠ¶æ€ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.077733860342556&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChQGMXn5rDBSaZwDJ9AibYEibtRNCljcXOAsD7NaDK7yAOiaMvY8fCos0MXujmhxI3xyaPAIovfI9Sgnw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;759&quot;/&gt;&lt;br/&gt;&lt;figcaption/&gt;&lt;/figure&gt;&lt;p&gt;å¯¹äºå­˜å–æ•°æ®ä¹Ÿä¸å—å½±å“ï¼Œè¿™é‡Œå°±ä¸æˆªå›¾äº†ï¼Œå°ä¼™ä¼´è‡ªè¡Œå°è¯•å§ï¼›&lt;/p&gt;&lt;p&gt;å½“æ•…éšœçš„ä»èŠ‚ç‚¹6371é‡æ–°è¿ä¸Šæ—¶ï¼Œä¸»èŠ‚ç‚¹æ¢å¤ä¸»ä»å…³ç³»ï¼Œå¹¶è¿›è¡Œä¸»ä»å¤åˆ¶æ“ä½œï¼›å…¶ä»–é›†ç¾¤èŠ‚ç‚¹ä¼šæ¸…é™¤åŸæ¥æ ‡è®°çš„ä¸‹çº¿çŠ¶æ€ï¼Œå°†å…¶æ”¹ä¸ºä¸Šçº¿ï¼›&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ¨¡æ‹Ÿä¸»èŠ‚ç‚¹æŒ‚æ‰&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;è¿™é‡Œå°±æ‰‹åŠ¨å°†6390è¿™ä¸ªèŠ‚ç‚¹åœæ‰ï¼Œä¼šæœ‰æ€æ ·çš„ååº”å‘¢ï¼Ÿ&lt;/p&gt;&lt;p&gt;è‡ªèº«ä»èŠ‚ç‚¹ä¼š&lt;strong&gt;æ¯éš”ä¸€ç§’æ£€æµ‹è¿æ¥&lt;/strong&gt;ï¼Œå¦‚æœè¶…æ—¶(é»˜è®¤æ˜¯15ç§’)ï¼Œ&lt;strong&gt;ä¼šé€‰ä¸¾ä»èŠ‚ç‚¹åšä¸ºé›†ç¾¤çš„ä¸»èŠ‚ç‚¹æ¥æä¾›æœåŠ¡&lt;/strong&gt;ï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.6972477064220184&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChQGMXn5rDBSaZwDJ9AibYEibthwcA5LGWC6QPq3SnAVtkWmXyNRvWa5NMGdib6dgHWB5nicy2IawKGoBg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;763&quot;/&gt;&lt;br/&gt;&lt;figcaption/&gt;&lt;/figure&gt;&lt;p&gt;æ•°æ®å­˜å–æœ€ç»ˆè¿˜æ˜¯ä¸å—å½±å“ï¼›&lt;/p&gt;&lt;p&gt;å¯¹äºå…¶ä»–é›†ç¾¤èŠ‚ç‚¹ï¼Œå°†æ•…éšœèŠ‚ç‚¹æ ‡è®°ä¸ºfailingï¼Œè®©æ–°ä¸Šä»»çš„ä¸»èŠ‚ç‚¹æä¾›æœåŠ¡ï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.1874180865006553&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChQGMXn5rDBSaZwDJ9AibYEibtR2IPDu32D0kqicNic4SojwVialAzyHlQVSQQTrXicr8eGWMk9KMvxGwNOQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;763&quot;/&gt;&lt;br/&gt;&lt;figcaption/&gt;&lt;/figure&gt;&lt;p&gt;å­˜å–æ•°æ®ä¹Ÿæ˜¯ä¸å—å½±å“çš„ï¼›&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æŒ‚æ‰çš„ä¸»èŠ‚ç‚¹6390å¦‚æœæ¢å¤ï¼Œé‚£å®ƒåªèƒ½å˜ä¸º6371çš„ä»èŠ‚ç‚¹å•¦ï¼Œå¹¶è¿›è¡Œç›¸å…³ä¸»ä»å¤åˆ¶æ“ä½œ&lt;/strong&gt;ï¼›è€Œé›†ç¾¤çš„å…¶ä»–èŠ‚ç‚¹åªæ˜¯å°†å…¶åŸæœ‰çš„FailçŠ¶æ€æ¸…é™¤ï¼Œè¡¨ç¤ºå¯ä»¥æ­£å¸¸è¿æ¥ï¼›&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;Redisé›†ç¾¤å°±æ˜¯è¿™æ ·ç®€å•ï¼Œåªè¦æ€è·¯å¯¹ï¼Œå°±æ˜¯æ‰‹å·¥æ´»ï¼›å°ä¼™ä¼´å¯ä»¥ç¼–å†™è„šæœ¬è‡ªåŠ¨æ‰§è¡Œå“¦ï¼›&lt;/p&gt;&lt;p&gt;æ¥ä¸‹æ¥è¯´è¯´é›†ç¾¤æ•°æ®çš„å­˜å‚¨ï¼›&lt;/p&gt;&lt;h4&gt;&lt;span&gt;æ•°æ®å­˜å‚¨ç®€å•åˆ†æ&lt;/span&gt;&lt;/h4&gt;&lt;p&gt;åœ¨Redisé›†ç¾¤ç¯å¢ƒä¸­ï¼Œæ•°æ®çš„å­˜å‚¨ä½ç½®æ˜¯æ ¹æ®å¯¹Keyçš„Hashè®¡ç®—è¿›è¡ŒæŒ‡å®šçš„ï¼›Redisé›†ç¾¤ä¸ºäº†åœ¨èŠ‚ç‚¹æ”¹å˜æ—¶ä¿è¯æ•°æ®åˆ†å¸ƒå‡åŒ€ï¼Œå¼•å…¥äº†æ§½(slot)ä½œä¸ºè¿ç§»çš„åŸºæœ¬å•ä½ï¼Œæ§½è§£è€¦äº†æ•°æ®å’Œå®é™…èŠ‚ç‚¹çš„å…³ç³»ï¼Œä½¿å¾—å®é™…èŠ‚ç‚¹æ•°çš„æ”¹å˜å¯¹ç³»ç»Ÿå½±å“è¾ƒå°ï¼›&lt;/p&gt;&lt;p&gt;åœ¨æ•´ä¸ªé›†ç¾¤ä¸­ï¼Œ&lt;strong&gt;æ§½(slot)æ€»å…±æœ‰16384ï¼Œä¼šå°†å…¶å‡åŒ€åˆ†é…åˆ°é›†ç¾¤çš„ä¸»èŠ‚ç‚¹ä¸Š&lt;/strong&gt;ï¼Œå…¶ä¸­æ¯ä¸€ä»½æ§½å¯¹åº”ä¸€ä¸ªå­˜å‚¨ç©ºé—´(è¿™é‡Œçš„å­˜å‚¨ç©ºé—´å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå®¹å™¨ï¼Œæ˜¯å¯ä»¥å­˜å¾ˆå¤šæ•°æ®çš„)ï¼Œä»¥ä¸Šé›†ç¾¤ç¯å¢ƒçš„æ§½åˆ†é…å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.21913043478260869&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChQGMXn5rDBSaZwDJ9AibYEibt8w357o9Dibic0OcL8E6l9BwT451r6B3xiavvJvpGKJyvBBCM28MqBMibeQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1150&quot;/&gt;&lt;/p&gt;&lt;figure&gt;&lt;figcaption/&gt;&lt;/figure&gt;&lt;p&gt;å­˜å‚¨æ•°æ®çš„è¿‡ç¨‹ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;è¿æ¥6380ä¸»èŠ‚ç‚¹ï¼Œæ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.15849056603773584&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChQGMXn5rDBSaZwDJ9AibYEibtdp49uOxKxooOrevwZEGzAf8AIO2ryljxMsSI5dG6W0gqMnPszLwSHQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;530&quot;/&gt;&lt;/p&gt;&lt;figure&gt;&lt;figcaption/&gt;&lt;/figure&gt;&lt;p&gt;å…·ä½“è¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.6013289036544851&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChQGMXn5rDBSaZwDJ9AibYEibt7GeUEpmu1ictzxwtTWneNj4k2hFHDODRCjGzyCc9tS5lZYibgibibwdn3g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;602&quot;/&gt;&lt;/p&gt;&lt;figure&gt;&lt;figcaption/&gt;&lt;/figure&gt;&lt;p&gt;&lt;strong&gt;ç®€è¦è¯´æ˜ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å®¢æˆ·ç«¯å‘èµ·å‘½ä»¤ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æœåŠ¡å™¨å°†Keyè¿›è¡ŒCRC16è®¡ç®—ï¼Œå¹¶ä¸æ€»æ§½ä½è®¡ç®—å‡ºKeyéœ€è¦å­˜å‚¨çš„ä½ç½®ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;è¿™é‡Œæ¨¡æ‹Ÿçš„Keyä¸ºzoeï¼Œè®¡ç®—å‡ºçš„æ§½ä½ä¸º14588ï¼Œä¸åœ¨6380è¿™ä¸ªèŠ‚ç‚¹ä¸Šï¼Œé›†ç¾¤èŠ‚ç‚¹ä¼šå°†å…¶é‡å®šå‘åˆ°å¯¹åº”æ§½ä½çš„èŠ‚ç‚¹ä¸Šï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ç„¶åæ‰¾åˆ°6371ä¸Šçš„14588æ§½ä½è¿›è¡Œæ•°æ®å­˜å‚¨ï¼›ï¼ˆæ³¨ï¼Œè¿™é‡Œçš„6371å·²ç»æ˜¯ä¸»èŠ‚ç‚¹äº†ï¼Œå› ä¸ºä¸Šé¢åšè¿‡ä¸€æ¬¡æ•…éšœè½¬ç§»æ¨¡æ‹Ÿï¼‰ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;é‚£é›†ç¾¤èŠ‚ç‚¹æ˜¯å¦‚ä½•çŸ¥é“å…¶ä»–èŠ‚ç‚¹çš„æ§½èŒƒå›´å’Œå…¶ä»–ä¿¡æ¯å‘¢ï¼Ÿ&lt;/p&gt;&lt;p&gt;é‚£æ˜¯å› ä¸ºå„èŠ‚ç‚¹ä¹‹é—´æœ‰é€šè®¯ï¼Œé€šè®¯ç«¯å£æ˜¯å¯¹åº”çš„redisç«¯å£+10000ï¼Œæ¯”å¦‚èŠ‚ç‚¹6371çš„é›†ç¾¤é€šè®¯ç«¯å£ä¸º16371ï¼ˆå¦‚æœå¤šå°æœºå™¨ï¼Œåˆ«å¿˜äº†é˜²ç«å¢™æ”¾å¼€è¿™ä¸ªç«¯å£å“¦ï¼‰ï¼Œå¯ä»¥é€šè¿‡&lt;strong&gt;cluster nodes&lt;/strong&gt;çœ‹åˆ°ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.2070524412296564&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChQGMXn5rDBSaZwDJ9AibYEibtLFIV1jpvicMDnSpttMg8RtgiatUtMffJvPJKUkQ3Gvg4Q0HlSicJOMEkg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1106&quot;/&gt;&lt;/p&gt;&lt;figure&gt;&lt;figcaption/&gt;&lt;/figure&gt;&lt;p&gt;å¹¶ä¸”å°†å„èŠ‚ç‚¹çš„ä¿¡æ¯ä¿å­˜åœ¨è‡ªå·±å¯¹åº”çš„é›†ç¾¤é…ç½®æ–‡ä»¶ä¸­ï¼Œè¿™ä¸ªé›†ç¾¤æ–‡ä»¶åæ˜¯é€šè¿‡é…ç½®é¡¹&lt;strong&gt;cluster-config-file&lt;/strong&gt;æŒ‡å®šçš„ï¼Œåœ¨é›†ç¾¤èŠ‚ç‚¹å¯åŠ¨æ—¶ä¼šæ£€æŸ¥è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºï¼Œå¦‚æœå­˜åœ¨ï¼Œå°±åŠ è½½é‡Œé¢çš„ç›¸å…³é…ç½®ä¿¡æ¯ï¼›é‡Œé¢æœ‰å“ªäº›ä¿¡æ¯ï¼Œéšä¾¿æ‰¾ä¸ªèŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶çœ‹ä¸€ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.2321270962047661&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChQGMXn5rDBSaZwDJ9AibYEibtPj1iaViblBAx8feq4T9htzicHs7ic2GMwwhTMCuddictCDMHvnqSFWpROLw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1133&quot;/&gt;&lt;/p&gt;&lt;figure&gt;&lt;figcaption/&gt;&lt;/figure&gt;&lt;p&gt;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå„èŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶ä¸­è®°å½•äº†å…¶ä»–èŠ‚ç‚¹çš„ä¸»ä»å…³ç³»ï¼Œåˆ†é…çš„æ§½ä½ï¼Œå„èŠ‚ç‚¹çš„çŠ¶æ€ï¼›è¿™æ ·çš„è¯ï¼Œé›†ç¾¤å…³ç³»å°±ç®—é‡æ–°å¯åŠ¨ä¹Ÿè¿˜å­˜åœ¨ã€‚&lt;/p&gt;&lt;h4&gt;&lt;span&gt;é›†ç¾¤ä¼¸ç¼©(èŠ‚ç‚¹å¢åˆ )æ¼”ç¤º&lt;/span&gt;&lt;/h4&gt;&lt;p&gt;åœ¨å®é™…åº”ç”¨åœºæ™¯ä¸­ï¼Œä¼šæ ¹æ®ä¸šåŠ¡éœ€è¦ï¼Œå¯¹é›†ç¾¤è¿›è¡Œä¼¸ç¼©ï¼Œå³èŠ‚ç‚¹çš„å¢åˆ ï¼›ä¸šåŠ¡å¹¶å‘å¤§äº†åŠ èŠ‚ç‚¹è¿›è¡Œæ‰©å±•ï¼Œ Â èŠ‚ç‚¹éœ€è¦è°ƒæ•´æ—¶å¯èƒ½éœ€è¦è¿›èŠ‚ç‚¹åˆ é™¤ï¼›&lt;/p&gt;&lt;p&gt;&lt;strong&gt;åŠ èŠ‚ç‚¹&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;è¿™é‡Œè¿›è¡ŒèŠ‚ç‚¹æ‰©å±•ï¼ŒåŠ ä¸€ä¸ª6360ä¸»èŠ‚ç‚¹ï¼Œ6361ä½œä¸º6360çš„ä»èŠ‚ç‚¹ï¼›å‚ç…§ä»¥ä¸Šé›†ç¾¤æ­å»ºæ—¶é…ç½®æ–‡ä»¶æ›´æ”¹ï¼Œç„¶åå°†å…¶éƒ½å¯åŠ¨ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;6360èŠ‚ç‚¹&lt;/p&gt;&lt;pre&gt;&lt;code&gt;portÂ 6360Â &lt;span&gt;#Â æŒ‡å®šRedisèŠ‚ç‚¹ç«¯å£&lt;/span&gt;&lt;br/&gt;pidfileÂ /var/run/redis_6360.pidÂ &lt;span&gt;#Â æŒ‡å®šå¯¹åº”è¿›ç¨‹æ–‡ä»¶&lt;/span&gt;&lt;br/&gt;dbfilenameÂ dump6360.rdbÂ &lt;span&gt;#Â æ¯ä¸ªèŠ‚ç‚¹çš„rdbæŒä¹…åŒ–æ–‡ä»¶&lt;/span&gt;&lt;br/&gt;cluster-enabledÂ yesÂ &lt;span&gt;#Â å¼€å¯é›†ç¾¤ï¼Œè¿™ä¸ªæ¯”è¾ƒé‡è¦&lt;/span&gt;&lt;br/&gt;cluster-config-fileÂ nodes-6360.confÂ &lt;span&gt;#æŒ‡å®šæ¯ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤é…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªæ¯”è¾ƒé‡è¦&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;6361èŠ‚ç‚¹&lt;/p&gt;&lt;pre&gt;&lt;code&gt;portÂ 6361Â &lt;span&gt;#Â æŒ‡å®šRedisèŠ‚ç‚¹ç«¯å£&lt;/span&gt;&lt;br/&gt;pidfileÂ /var/run/redis_6361.pidÂ &lt;span&gt;#Â æŒ‡å®šå¯¹åº”è¿›ç¨‹æ–‡ä»¶&lt;/span&gt;&lt;br/&gt;dbfilenameÂ dump6361.rdbÂ &lt;span&gt;#Â æ¯ä¸ªèŠ‚ç‚¹çš„rdbæŒä¹…åŒ–æ–‡ä»¶&lt;/span&gt;&lt;br/&gt;cluster-enabledÂ yesÂ &lt;span&gt;#Â å¼€å¯é›†ç¾¤ï¼Œè¿™ä¸ªæ¯”è¾ƒé‡è¦&lt;/span&gt;&lt;br/&gt;cluster-config-fileÂ nodes-6361.confÂ &lt;span&gt;#æŒ‡å®šæ¯ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤é…ç½®æ–‡ä»¶ï¼Œè¿™ä¸ªæ¯”è¾ƒé‡è¦&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸¤ä¸ªèŠ‚ç‚¹éƒ½å¯åŠ¨ï¼Œç„¶åå°†6360åŠ å…¥åˆ°é›†ç¾¤ä¸»èŠ‚ç‚¹ä¸­ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;./redis-cliÂ --clusterÂ add-nodeÂ 127.0.0.1:6360Â 127.0.0.1:6370&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ³¨ï¼šå…¶ä¸­127.0.0.1:6360æ˜¯éœ€è¦åŠ å…¥çš„æ–°å¢èŠ‚ç‚¹ï¼Œ127.0.0.1:6370æ˜¯ç°æœ‰é›†ç¾¤ä¸­çš„ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼›&lt;/p&gt;&lt;p&gt;å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æµ‹é›†ç¾¤çŠ¶æ€ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;./redis-cliÂ --clusterÂ checkÂ 127.0.0.1:6370Â Â &lt;span&gt;#Â åé¢çš„åœ°å€æ˜¯ä»»æ„çš„é›†ç¾¤èŠ‚ç‚¹&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°6360å·²ç»åŠ å…¥åˆ°é›†ç¾¤ç¯å¢ƒä¸­ï¼Œä½†ç°åœ¨è¿˜æ²¡æœ‰ä»èŠ‚ç‚¹å’Œæ§½åˆ†é…ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥å…ˆå°†6361ä½œä¸º6360çš„ä»èŠ‚ç‚¹åŠ å…¥ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;./redis-cliÂ --clusterÂ add-nodeÂ --cluster-slaveÂ --cluster-master-idÂ eaa814dc56beb0d5edb6a4fbb14f1384e78d4764Â 127.0.0.1:6361Â 127.0.0.1:6370Â &lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å‚æ•°è¯´æ˜ï¼š&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;--cluster-slave : Â æ„æ€å°±æ˜¯åŠ å…¥çš„æ˜¯ä»èŠ‚ç‚¹ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;--cluster-master-idï¼šåé¢ç´§è·Ÿä¸»èŠ‚ç‚¹çš„idï¼Œè¿™é‡Œå°±æ˜¯6360çš„èŠ‚ç‚¹idï¼›é€šè¿‡cluster nodeså¯ä»¥æŸ¥çœ‹åˆ°èŠ‚ç‚¹idï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;127.0.0.1:6361ï¼šéœ€è¦åŠ å…¥çš„ä»èŠ‚ç‚¹ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;127.0.0.1:6370ï¼šç°æœ‰é›†ç¾¤çš„ä»»æ„ä¸»èŠ‚ç‚¹ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;ç°åœ¨è¿˜å·®æ§½åˆ†é…äº†ï¼Œå¦‚æœéœ€è¦ç›´æ¥å°†16384ä¸ªæ§½å¹³å‡åˆ†é…åˆ°æ‰€æœ‰èŠ‚ç‚¹è¯ï¼Œç›´æ¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;./redis-cliÂ --clusterÂ rebalanceÂ --cluster-thresholdÂ 1Â --cluster-use-empty-mastersÂ 127.0.0.1:6370&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨å‘½ä»¤./redis-cli --cluster check 127.0.0.1:6370æŸ¥çœ‹åˆ†é…ç»“æœï¼Œå¦‚ä¸‹å›¾ï¼Œåªæˆªäº†éƒ¨åˆ†ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.4025974025974026&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/qQ1zuvjsChQGMXn5rDBSaZwDJ9AibYEibtjjPZyy9cgOvia1zukwsEBBsPrl47lwhqTb7LnYKEOfJSSOd1g3Du0EQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;847&quot;/&gt;&lt;/p&gt;&lt;figure&gt;&lt;figcaption/&gt;&lt;/figure&gt;&lt;p&gt;å¦‚æœä¸æƒ³å‡åŒ€åˆ†é…ï¼Œæ ¹æ®è‡ªå®šä¹‰éœ€è¦è¿›è¡Œé…ç½®ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä¼šæç¤ºä¸€æ­¥ä¸€æ­¥é…ç½®ï¼›&lt;/p&gt;&lt;pre&gt;&lt;code&gt;./redis-cliÂ --clusterÂ reshardÂ 127.0.0.1:6360Â &lt;span&gt;#åé¢æ˜¯æ–°åŠ å…¥çš„ä¸»èŠ‚ç‚¹Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;#Â ä¹Ÿå¯ä»¥æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤ç›´æ¥é…ç½®æƒ³è¦çš„æ•°æ®&lt;/span&gt;&lt;br/&gt;./redis-cliÂ --clusterÂ reshardÂ --cluster-fromÂ allÂ --cluster-toÂ éœ€è¦åˆ†é…æ§½çš„èŠ‚ç‚¹idÂ --cluster-slotsÂ 1000Â --cluster-yesÂ 127.0.0.1:6370Â &lt;span&gt;#Â 1000Â æŒ‡åˆ†é…çš„æ§½æ•°&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œå°±ä¸æˆªå›¾æ¼”ç¤ºäº†ï¼Œç•™ç»™å°ä¼™ä¼´è‡ªå·±åŠ¨æ‰‹æ“ä½œå§ï¼›&lt;/p&gt;&lt;p&gt;&lt;strong&gt;åˆ é™¤èŠ‚ç‚¹&lt;/strong&gt;&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;å…ˆå¯¹èŠ‚ç‚¹è¿›è¡Œåˆ†ç‰‡å·¥ä½œï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±ï¼Œå³å°†æŒ‡å®šèŠ‚ç‚¹ä¸Šçš„æ§½åˆ†é…åˆ°å…¶ä»–èŠ‚ç‚¹ï¼›&lt;br/&gt;&lt;code&gt;./redis-cli --cluster reshard è¦åˆ é™¤èŠ‚ç‚¹ip:port&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;ç§»é™¤èŠ‚ç‚¹ï¼Œæ¨èå…ˆåˆ é™¤ä»èŠ‚ç‚¹ï¼Œå†åˆ é™¤ä¸»èŠ‚ç‚¹ï¼›&lt;/p&gt;&lt;p&gt;&lt;code&gt;./redis-cli --cluster del-node èŠ‚ç‚¹ip:port èŠ‚ç‚¹id&lt;/code&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h4&gt;&lt;span&gt;é›†ç¾¤é…ç½®é¡¹&lt;/span&gt;&lt;/h4&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;cluster-enabled(æ˜¯å¦å¼€å¯é›†ç¾¤æ¨¡å¼)&lt;/strong&gt;ï¼šè®¾ç½®ä¸ºyesï¼Œå°†è¯¥èŠ‚ç‚¹å¼€å¯ä¸ºé›†ç¾¤æ¨¡å¼ï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;cluster-config-file(è®¾ç½®æ¯ä¸ªé›†ç¾¤èŠ‚ç‚¹å¯¹åº”çš„é…ç½®æ–‡ä»¶åç§°)&lt;/strong&gt;ï¼šæ–‡ä»¶æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œä¸ç”¨æ‰‹åŠ¨åˆ›å»ºï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;cluster-node-timeout(è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œå³é›†ç¾¤èŠ‚ç‚¹ä¸å¯ç”¨çš„æœ€å¤§æ—¶é—´ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ—¶é—´å°±è®¤ä¸ºè¯¥èŠ‚ç‚¹ä¸å¯ç”¨)&lt;/strong&gt;ï¼šé»˜è®¤ä¸º15000(ä»¥æ¯«ç§’ä¸ºå•ä½)ï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;cluster-migration-barrier(é…ç½®ä¸€ä¸ªä¸»æœºæœ€å°‘å¯ç”¨çš„ä»æœºçš„ä¸ªæ•°)&lt;/strong&gt;ï¼šé»˜è®¤æ˜¯1,è¡¨ç¤ºä¸€ä¸ªä¸»æœºçš„ä»æœºè¿ç§»ä¹‹åï¼Œè‡³å°‘å¾—æœ‰ä¸€ä¸ªä»æœºå¯ç”¨ï¼Œå¦åˆ™ä¸è¿›è¡ŒèŠ‚ç‚¹è¿ç§»ï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;cluster-require-full-coverage(é…ç½®é›†ç¾¤æœåŠ¡çš„å¯ç”¨æ€§)&lt;/strong&gt;ï¼šé»˜è®¤yeså¼€å¯ï¼Œå³é›†ç¾¤æ²¡å®Œå…¨è¦†ç›–æ‰€æœ‰slotï¼Œé›†ç¾¤å°±æŒ‚äº†ï¼›è®¾ç½®ä¸ºnoï¼Œå°±ç®—æ§½æ²¡æœ‰å…¨åˆ†é…ï¼Œä¹Ÿèƒ½æä¾›æœåŠ¡ï¼Œéœ€è¦è‡ªå·±ä¿è¯æ§½åˆ†é…ï¼›&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h3&gt;&lt;p&gt;åˆ°è¿™é›†ç¾¤çš„æ­å»ºå°±å®Œå•¦ï¼Œæœ¬æ¥æƒ³ç€å†™ç€å¾ˆç®€å•çš„ï¼Œæ²¡æƒ³åˆ°åˆå¹²äº†4000å­—ï¼›å¯¹äºé›†ç¾¤ï¼Œä½¿ç”¨æœ‰ä¸€äº›é™åˆ¶ï¼Œæ¯”å¦‚Keyså‘½ä»¤åªèƒ½é’ˆå¯¹å½“å‰èŠ‚ç‚¹ï¼Œéœ€è¦é’ˆå¯¹å¤šèŠ‚ç‚¹çš„æƒ…å†µè¿›è¡Œå¤„ç†ï¼›é›†ç¾¤ä¸­å„èŠ‚ç‚¹åªæ”¯æŒdb0æ•°æ®åº“ï¼Œå…¶ä»–æ•°æ®åº“ä¸æ”¯æŒç­‰ç­‰ï¼›æ‰€ä»¥ä½¿ç”¨è¦æ³¨æ„å“¦ï¼Œåç»­æŠ½æ—¶é—´å•ç‹¬æ•´ç†ä¸€ç¯‡æ³¨æ„äº‹é¡¹å§ï¼Œç¯‡å¹…æœ‰ç‚¹é•¿ï¼Œä¸ç»§ç»­èŠå•¦ï¼›Â  ä¸‹ç¯‡è¯´è¯´ç†Ÿæ‚‰çš„ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©å§ï¼›&lt;/p&gt;&lt;p&gt;ä¸€ä¸ªè¢«ç¨‹åºæä¸‘çš„å¸…å°ä¼™ï¼Œå…³æ³¨&quot;Codeç»¼è‰ºåœˆ&quot;ï¼Œè·Ÿæˆ‘ä¸€èµ·å­¦~~~&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>7265826b4cf7232b2813d6ef71363c9b</guid>
<title>etcdï¼šä»åº”ç”¨åœºæ™¯åˆ°å®ç°åŸç†çš„å…¨æ–¹ä½è§£è¯»ï¼ˆä¿®è®¢ç‰ˆï¼‰</title>
<link>https://toutiao.io/k/u032bu3</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;article-typo&quot; data-v-73a3988a=&quot;&quot;&gt;
&lt;h2 id=&quot;heading0&quot; data-id-_70babbacb6e1=&quot;1&quot;&gt;ç»å…¸åº”ç”¨åœºæ™¯&lt;/h2&gt;
&lt;p&gt;è¦é—® etcd æ˜¯ä»€ä¹ˆï¼Ÿå¾ˆå¤šäººç¬¬ä¸€ååº”å¯èƒ½æ˜¯ä¸€ä¸ªé”®å€¼å­˜å‚¨ä»“åº“ï¼Œå´æ²¡æœ‰é‡è§†å®˜æ–¹å®šä¹‰çš„ååŠå¥ï¼Œç”¨äºé…ç½®å…±äº«å’ŒæœåŠ¡å‘ç°ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A highly-available key value store for shared configuration and service discovery.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å®é™…ä¸Šï¼Œetcd ä½œä¸ºä¸€ä¸ªå—åˆ° ZooKeeper ä¸ doozer å¯å‘è€Œå‚¬ç”Ÿçš„é¡¹ç›®ï¼Œé™¤äº†æ‹¥æœ‰ä¸ä¹‹ç±»ä¼¼çš„åŠŸèƒ½å¤–ï¼Œæ›´ä¸“æ³¨äºä»¥ä¸‹å››ç‚¹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç®€å•ï¼šåŸºäº HTTP+JSON çš„ API è®©ä½ ç”¨ curl å°±å¯ä»¥è½»æ¾ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;å®‰å…¨ï¼šå¯é€‰ SSL å®¢æˆ·è®¤è¯æœºåˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;å¿«é€Ÿï¼šæ¯ä¸ªå®ä¾‹æ¯ç§’æ”¯æŒä¸€åƒæ¬¡å†™æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;å¯ä¿¡ï¼šä½¿ç”¨ Raft ç®—æ³•å……åˆ†å®ç°äº†åˆ†å¸ƒå¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;éšç€äº‘è®¡ç®—çš„ä¸æ–­å‘å±•ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ¶‰åŠåˆ°çš„é—®é¢˜è¶Šæ¥è¶Šå—åˆ°äººä»¬é‡è§†ã€‚å—é˜¿é‡Œä¸­é—´ä»¶å›¢é˜Ÿå¯¹&lt;a href=&quot;http://jm-blog.aliapp.com/?p=1232&quot; rel=&quot;noopener nofollow&quot; target=&quot;_blank&quot;&gt;Â ZooKeeper å…¸å‹åº”ç”¨åœºæ™¯ä¸€è§ˆ&lt;/a&gt;ä¸€æ–‡çš„å¯å‘ï¼Œç¬”è€…æ ¹æ®è‡ªå·±çš„ç†è§£ä¹Ÿæ€»ç»“äº†ä¸€äº› etcd çš„ç»å…¸ä½¿ç”¨åœºæ™¯ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹ etcd è¿™ä¸ªåŸºäº Raft å¼ºä¸€è‡´æ€§ç®—æ³•çš„åˆ†å¸ƒå¼å­˜å‚¨ä»“åº“èƒ½ç»™æˆ‘ä»¬å¸¦æ¥å“ªäº›å¸®åŠ©ã€‚&lt;/p&gt;
&lt;p&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ•°æ®åˆ†ä¸ºæ§åˆ¶æ•°æ®å’Œåº”ç”¨æ•°æ®ã€‚ä½¿ç”¨ etcd çš„åœºæ™¯é»˜è®¤å¤„ç†çš„æ•°æ®éƒ½æ˜¯æ§åˆ¶æ•°æ®ï¼Œå¯¹äºåº”ç”¨æ•°æ®ï¼Œåªæ¨èæ•°æ®é‡å¾ˆå°ï¼Œä½†æ˜¯æ›´æ–°è®¿é—®é¢‘ç¹çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;h3 id=&quot;heading1&quot; data-id-_bfaa1f32e9e3=&quot;1&quot;&gt;åœºæ™¯ä¸€ï¼šæœåŠ¡å‘ç°ï¼ˆService Discoveryï¼‰&lt;/h3&gt;
&lt;p&gt;æœåŠ¡å‘ç°è¦è§£å†³çš„ä¹Ÿæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æœ€å¸¸è§çš„é—®é¢˜ä¹‹ä¸€ï¼Œå³åœ¨åŒä¸€ä¸ªåˆ†å¸ƒå¼é›†ç¾¤ä¸­çš„è¿›ç¨‹æˆ–æœåŠ¡ï¼Œè¦å¦‚ä½•æ‰èƒ½æ‰¾åˆ°å¯¹æ–¹å¹¶å»ºç«‹è¿æ¥ã€‚æœ¬è´¨ä¸Šæ¥è¯´ï¼ŒæœåŠ¡å‘ç°å°±æ˜¯æƒ³è¦äº†è§£é›†ç¾¤ä¸­æ˜¯å¦æœ‰è¿›ç¨‹åœ¨ç›‘å¬ udp æˆ– tcp ç«¯å£ï¼Œå¹¶ä¸”é€šè¿‡åå­—å°±å¯ä»¥æŸ¥æ‰¾å’Œè¿æ¥ã€‚è¦è§£å†³æœåŠ¡å‘ç°çš„é—®é¢˜ï¼Œéœ€è¦æœ‰ä¸‹é¢ä¸‰å¤§æ”¯æŸ±ï¼Œç¼ºä¸€ä¸å¯ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä¸€ä¸ªå¼ºä¸€è‡´æ€§ã€é«˜å¯ç”¨çš„æœåŠ¡å­˜å‚¨ç›®å½•ã€‚åŸºäº Raft ç®—æ³•çš„ etcd å¤©ç”Ÿå°±æ˜¯è¿™æ ·ä¸€ä¸ªå¼ºä¸€è‡´æ€§é«˜å¯ç”¨çš„æœåŠ¡å­˜å‚¨ç›®å½•ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€ç§æ³¨å†ŒæœåŠ¡å’Œç›‘æ§æœåŠ¡å¥åº·çŠ¶æ€çš„æœºåˆ¶ã€‚ç”¨æˆ·å¯ä»¥åœ¨ etcd ä¸­æ³¨å†ŒæœåŠ¡ï¼Œå¹¶ä¸”å¯¹æ³¨å†Œçš„æœåŠ¡è®¾ç½®&lt;code&gt;key TTL&lt;/code&gt;ï¼Œå®šæ—¶ä¿æŒæœåŠ¡çš„å¿ƒè·³ä»¥è¾¾åˆ°ç›‘æ§å¥åº·çŠ¶æ€çš„æ•ˆæœã€‚&lt;/li&gt;
&lt;li&gt;ä¸€ç§æŸ¥æ‰¾å’Œè¿æ¥æœåŠ¡çš„æœºåˆ¶ã€‚é€šè¿‡åœ¨ etcd æŒ‡å®šçš„ä¸»é¢˜ä¸‹æ³¨å†Œçš„æœåŠ¡ä¹Ÿèƒ½åœ¨å¯¹åº”çš„ä¸»é¢˜ä¸‹æŸ¥æ‰¾åˆ°ã€‚ä¸ºäº†ç¡®ä¿è¿æ¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸ªæœåŠ¡æœºå™¨ä¸Šéƒ½éƒ¨ç½²ä¸€ä¸ª Proxy æ¨¡å¼çš„ etcdï¼Œè¿™æ ·å°±å¯ä»¥ç¡®ä¿èƒ½è®¿é—® etcd é›†ç¾¤çš„æœåŠ¡éƒ½èƒ½äº’ç›¸è¿æ¥ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;img src=&quot;https://static001.infoq.cn/resource/image/1b/7d/1beabef5a1168cdc43766903e65f907d.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾ 1 æœåŠ¡å‘ç°ç¤ºæ„å›¾&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬æ¥çœ‹æœåŠ¡å‘ç°å¯¹åº”çš„å…·ä½“åœºæ™¯ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¾®æœåŠ¡ååŒå·¥ä½œæ¶æ„ä¸­ï¼ŒæœåŠ¡åŠ¨æ€æ·»åŠ ã€‚éšç€ Docker å®¹å™¨çš„æµè¡Œï¼Œå¤šç§å¾®æœåŠ¡å…±åŒåä½œï¼Œæ„æˆä¸€ä¸ªç›¸å¯¹åŠŸèƒ½å¼ºå¤§çš„æ¶æ„çš„æ¡ˆä¾‹è¶Šæ¥è¶Šå¤šã€‚é€æ˜åŒ–çš„åŠ¨æ€æ·»åŠ è¿™äº›æœåŠ¡çš„éœ€æ±‚ä¹Ÿæ—¥ç›Šå¼ºçƒˆã€‚é€šè¿‡æœåŠ¡å‘ç°æœºåˆ¶ï¼Œåœ¨ etcd ä¸­æ³¨å†ŒæŸä¸ªæœåŠ¡åå­—çš„ç›®å½•ï¼Œåœ¨è¯¥ç›®å½•ä¸‹å­˜å‚¨å¯ç”¨çš„æœåŠ¡èŠ‚ç‚¹çš„ IPã€‚åœ¨ä½¿ç”¨æœåŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œåªè¦ä»æœåŠ¡ç›®å½•ä¸‹æŸ¥æ‰¾å¯ç”¨çš„æœåŠ¡èŠ‚ç‚¹å»ä½¿ç”¨å³å¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://static001.infoq.cn/resource/image/e7/d8/e7d6918c1c9b7c9f2829779966ffb5d8.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾ 2 å¾®æœåŠ¡ååŒå·¥ä½œ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PaaS å¹³å°ä¸­åº”ç”¨å¤šå®ä¾‹ä¸å®ä¾‹æ•…éšœé‡å¯é€æ˜åŒ–ã€‚PaaS å¹³å°ä¸­çš„åº”ç”¨ä¸€èˆ¬éƒ½æœ‰å¤šä¸ªå®ä¾‹ï¼Œé€šè¿‡åŸŸåï¼Œä¸ä»…å¯ä»¥é€æ˜çš„å¯¹è¿™å¤šä¸ªå®ä¾‹è¿›è¡Œè®¿é—®ï¼Œè€Œä¸”è¿˜å¯ä»¥åšåˆ°è´Ÿè½½å‡è¡¡ã€‚ä½†æ˜¯åº”ç”¨çš„æŸä¸ªå®ä¾‹éšæ—¶éƒ½æœ‰å¯èƒ½æ•…éšœé‡å¯ï¼Œè¿™æ—¶å°±éœ€è¦åŠ¨æ€çš„é…ç½®åŸŸåè§£æï¼ˆè·¯ç”±ï¼‰ä¸­çš„ä¿¡æ¯ã€‚é€šè¿‡ etcd çš„æœåŠ¡å‘ç°åŠŸèƒ½å°±å¯ä»¥è½»æ¾è§£å†³è¿™ä¸ªåŠ¨æ€é…ç½®çš„é—®é¢˜ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://static001.infoq.cn/resource/image/ec/68/ecea22c641122ee933e4d1a2f4c6ce68.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾ 3 äº‘å¹³å°å¤šå®ä¾‹é€æ˜åŒ–&lt;/p&gt;
&lt;h3 id=&quot;heading2&quot; data-id-_609cf3a969c5=&quot;1&quot;&gt;åœºæ™¯äºŒï¼šæ¶ˆæ¯å‘å¸ƒä¸è®¢é˜…&lt;/h3&gt;
&lt;p&gt;åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œæœ€é€‚ç”¨çš„ä¸€ç§ç»„ä»¶é—´é€šä¿¡æ–¹å¼å°±æ˜¯æ¶ˆæ¯å‘å¸ƒä¸è®¢é˜…ã€‚å³æ„å»ºä¸€ä¸ªé…ç½®å…±äº«ä¸­å¿ƒï¼Œæ•°æ®æä¾›è€…åœ¨è¿™ä¸ªé…ç½®ä¸­å¿ƒå‘å¸ƒæ¶ˆæ¯ï¼Œè€Œæ¶ˆæ¯ä½¿ç”¨è€…åˆ™è®¢é˜…ä»–ä»¬å…³å¿ƒçš„ä¸»é¢˜ï¼Œä¸€æ—¦ä¸»é¢˜æœ‰æ¶ˆæ¯å‘å¸ƒï¼Œå°±ä¼šå®æ—¶é€šçŸ¥è®¢é˜…è€…ã€‚é€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥åšåˆ°åˆ†å¸ƒå¼ç³»ç»Ÿé…ç½®çš„é›†ä¸­å¼ç®¡ç†ä¸åŠ¨æ€æ›´æ–°ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åº”ç”¨ä¸­ç”¨åˆ°çš„ä¸€äº›é…ç½®ä¿¡æ¯æ”¾åˆ° etcd ä¸Šè¿›è¡Œé›†ä¸­ç®¡ç†ã€‚è¿™ç±»åœºæ™¯çš„ä½¿ç”¨æ–¹å¼é€šå¸¸æ˜¯è¿™æ ·ï¼šåº”ç”¨åœ¨å¯åŠ¨çš„æ—¶å€™ä¸»åŠ¨ä» etcd è·å–ä¸€æ¬¡é…ç½®ä¿¡æ¯ï¼ŒåŒæ—¶ï¼Œåœ¨ etcd èŠ‚ç‚¹ä¸Šæ³¨å†Œä¸€ä¸ª Watcher å¹¶ç­‰å¾…ï¼Œä»¥åæ¯æ¬¡é…ç½®æœ‰æ›´æ–°çš„æ—¶å€™ï¼Œetcd éƒ½ä¼šå®æ—¶é€šçŸ¥è®¢é˜…è€…ï¼Œä»¥æ­¤è¾¾åˆ°è·å–æœ€æ–°é…ç½®ä¿¡æ¯çš„ç›®çš„ã€‚&lt;/li&gt;
&lt;li&gt;åˆ†å¸ƒå¼æœç´¢æœåŠ¡ä¸­ï¼Œç´¢å¼•çš„å…ƒä¿¡æ¯å’ŒæœåŠ¡å™¨é›†ç¾¤æœºå™¨çš„èŠ‚ç‚¹çŠ¶æ€å­˜æ”¾åœ¨ etcd ä¸­ï¼Œä¾›å„ä¸ªå®¢æˆ·ç«¯è®¢é˜…ä½¿ç”¨ã€‚ä½¿ç”¨ etcd çš„&lt;code&gt;key TTL&lt;/code&gt;åŠŸèƒ½å¯ä»¥ç¡®ä¿æœºå™¨çŠ¶æ€æ˜¯å®æ—¶æ›´æ–°çš„ã€‚&lt;/li&gt;
&lt;li&gt;åˆ†å¸ƒå¼æ—¥å¿—æ”¶é›†ç³»ç»Ÿã€‚è¿™ä¸ªç³»ç»Ÿçš„æ ¸å¿ƒå·¥ä½œæ˜¯æ”¶é›†åˆ†å¸ƒåœ¨ä¸åŒæœºå™¨çš„æ—¥å¿—ã€‚æ”¶é›†å™¨é€šå¸¸æ˜¯æŒ‰ç…§åº”ç”¨ï¼ˆæˆ–ä¸»é¢˜ï¼‰æ¥åˆ†é…æ”¶é›†ä»»åŠ¡å•å…ƒï¼Œå› æ­¤å¯ä»¥åœ¨ etcd ä¸Šåˆ›å»ºä¸€ä¸ªä»¥åº”ç”¨ï¼ˆä¸»é¢˜ï¼‰å‘½åçš„ç›®å½• Pï¼Œå¹¶å°†è¿™ä¸ªåº”ç”¨ï¼ˆä¸»é¢˜ç›¸å…³ï¼‰çš„æ‰€æœ‰æœºå™¨ ipï¼Œä»¥å­ç›®å½•çš„å½¢å¼å­˜å‚¨åˆ°ç›®å½• P ä¸Šï¼Œç„¶åè®¾ç½®ä¸€ä¸ª etcd é€’å½’çš„ Watcherï¼Œé€’å½’å¼çš„ç›‘æ§åº”ç”¨ï¼ˆä¸»é¢˜ï¼‰ç›®å½•ä¸‹æ‰€æœ‰ä¿¡æ¯çš„å˜åŠ¨ã€‚è¿™æ ·å°±å®ç°äº†æœºå™¨ IPï¼ˆæ¶ˆæ¯ï¼‰å˜åŠ¨çš„æ—¶å€™ï¼Œèƒ½å¤Ÿå®æ—¶é€šçŸ¥åˆ°æ”¶é›†å™¨è°ƒæ•´ä»»åŠ¡åˆ†é…ã€‚&lt;/li&gt;
&lt;li&gt;ç³»ç»Ÿä¸­ä¿¡æ¯éœ€è¦åŠ¨æ€è‡ªåŠ¨è·å–ä¸äººå·¥å¹²é¢„ä¿®æ”¹ä¿¡æ¯è¯·æ±‚å†…å®¹çš„æƒ…å†µã€‚é€šå¸¸æ˜¯æš´éœ²å‡ºæ¥å£ï¼Œä¾‹å¦‚ JMX æ¥å£ï¼Œæ¥è·å–ä¸€äº›è¿è¡Œæ—¶çš„ä¿¡æ¯ã€‚å¼•å…¥ etcd ä¹‹åï¼Œå°±ä¸ç”¨è‡ªå·±å®ç°ä¸€å¥—æ–¹æ¡ˆäº†ï¼Œåªè¦å°†è¿™äº›ä¿¡æ¯å­˜æ”¾åˆ°æŒ‡å®šçš„ etcd ç›®å½•ä¸­å³å¯ï¼Œetcd çš„è¿™äº›ç›®å½•å°±å¯ä»¥é€šè¿‡ HTTP çš„æ¥å£åœ¨å¤–éƒ¨è®¿é—®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://static001.infoq.cn/resource/image/5f/0b/5fb77bf6f5751c45f44cbe9df8ee250b.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾ 4 æ¶ˆæ¯å‘å¸ƒä¸è®¢é˜…&lt;/p&gt;
&lt;h3 id=&quot;heading3&quot; data-id-_c71c97b14031=&quot;1&quot;&gt;åœºæ™¯ä¸‰ï¼šè´Ÿè½½å‡è¡¡&lt;/h3&gt;
&lt;p&gt;åœ¨&lt;code&gt;åœºæ™¯ä¸€&lt;/code&gt;ä¸­ä¹Ÿæåˆ°äº†è´Ÿè½½å‡è¡¡ï¼Œæœ¬æ–‡æ‰€æŒ‡çš„è´Ÿè½½å‡è¡¡å‡ä¸ºè½¯è´Ÿè½½å‡è¡¡ã€‚åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸ºäº†ä¿è¯æœåŠ¡çš„é«˜å¯ç”¨ä»¥åŠæ•°æ®çš„ä¸€è‡´æ€§ï¼Œé€šå¸¸éƒ½ä¼šæŠŠæ•°æ®å’ŒæœåŠ¡éƒ¨ç½²å¤šä»½ï¼Œä»¥æ­¤è¾¾åˆ°å¯¹ç­‰æœåŠ¡ï¼Œå³ä½¿å…¶ä¸­çš„æŸä¸€ä¸ªæœåŠ¡å¤±æ•ˆäº†ï¼Œä¹Ÿä¸å½±å“ä½¿ç”¨ã€‚ç”±æ­¤å¸¦æ¥çš„åå¤„æ˜¯æ•°æ®å†™å…¥æ€§èƒ½ä¸‹é™ï¼Œè€Œå¥½å¤„åˆ™æ˜¯æ•°æ®è®¿é—®æ—¶çš„è´Ÿè½½å‡è¡¡ã€‚å› ä¸ºæ¯ä¸ªå¯¹ç­‰æœåŠ¡èŠ‚ç‚¹ä¸Šéƒ½å­˜æœ‰å®Œæ•´çš„æ•°æ®ï¼Œæ‰€ä»¥ç”¨æˆ·çš„è®¿é—®æµé‡å°±å¯ä»¥åˆ†æµåˆ°ä¸åŒçš„æœºå™¨ä¸Šã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;etcd æœ¬èº«åˆ†å¸ƒå¼æ¶æ„å­˜å‚¨çš„ä¿¡æ¯è®¿é—®æ”¯æŒè´Ÿè½½å‡è¡¡ã€‚etcd é›†ç¾¤åŒ–ä»¥åï¼Œæ¯ä¸ª etcd çš„æ ¸å¿ƒèŠ‚ç‚¹éƒ½å¯ä»¥å¤„ç†ç”¨æˆ·çš„è¯·æ±‚ã€‚æ‰€ä»¥ï¼ŒæŠŠæ•°æ®é‡å°ä½†æ˜¯è®¿é—®é¢‘ç¹çš„æ¶ˆæ¯æ•°æ®ç›´æ¥å­˜å‚¨åˆ° etcd ä¸­ä¹Ÿæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œå¦‚ä¸šåŠ¡ç³»ç»Ÿä¸­å¸¸ç”¨çš„äºŒçº§ä»£ç è¡¨ï¼ˆåœ¨è¡¨ä¸­å­˜å‚¨ä»£ç ï¼Œåœ¨ etcd ä¸­å­˜å‚¨ä»£ç æ‰€ä»£è¡¨çš„å…·ä½“å«ä¹‰ï¼Œä¸šåŠ¡ç³»ç»Ÿè°ƒç”¨æŸ¥è¡¨çš„è¿‡ç¨‹ï¼Œå°±éœ€è¦æŸ¥æ‰¾è¡¨ä¸­ä»£ç çš„å«ä¹‰ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨ etcd ç»´æŠ¤ä¸€ä¸ªè´Ÿè½½å‡è¡¡èŠ‚ç‚¹è¡¨ã€‚etcd å¯ä»¥ç›‘æ§ä¸€ä¸ªé›†ç¾¤ä¸­å¤šä¸ªèŠ‚ç‚¹çš„çŠ¶æ€ï¼Œå½“æœ‰ä¸€ä¸ªè¯·æ±‚å‘è¿‡æ¥åï¼Œå¯ä»¥è½®è¯¢å¼çš„æŠŠè¯·æ±‚è½¬å‘ç»™å­˜æ´»ç€çš„å¤šä¸ªçŠ¶æ€ã€‚ç±»ä¼¼ KafkaMQï¼Œé€šè¿‡ ZooKeeper æ¥ç»´æŠ¤ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„è´Ÿè½½å‡è¡¡ã€‚åŒæ ·ä¹Ÿå¯ä»¥ç”¨ etcd æ¥åš ZooKeeper çš„å·¥ä½œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://static001.infoq.cn/resource/image/67/be/6782904921fa103f42f30113fbf0babe.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾ 5 è´Ÿè½½å‡è¡¡&lt;/p&gt;
&lt;h3 id=&quot;heading4&quot; data-id-_a4f68b44ee9a=&quot;1&quot;&gt;åœºæ™¯å››ï¼šåˆ†å¸ƒå¼é€šçŸ¥ä¸åè°ƒ&lt;/h3&gt;
&lt;p&gt;è¿™é‡Œè¯´åˆ°çš„åˆ†å¸ƒå¼é€šçŸ¥ä¸åè°ƒï¼Œä¸æ¶ˆæ¯å‘å¸ƒå’Œè®¢é˜…æœ‰äº›ç›¸ä¼¼ã€‚éƒ½ç”¨åˆ°äº† etcd ä¸­çš„ Watcher æœºåˆ¶ï¼Œé€šè¿‡æ³¨å†Œä¸å¼‚æ­¥é€šçŸ¥æœºåˆ¶ï¼Œå®ç°åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ä¸åŒç³»ç»Ÿä¹‹é—´çš„é€šçŸ¥ä¸åè°ƒï¼Œä»è€Œå¯¹æ•°æ®å˜æ›´åšåˆ°å®æ—¶å¤„ç†ã€‚å®ç°æ–¹å¼é€šå¸¸æ˜¯è¿™æ ·ï¼šä¸åŒç³»ç»Ÿéƒ½åœ¨ etcd ä¸Šå¯¹åŒä¸€ä¸ªç›®å½•è¿›è¡Œæ³¨å†Œï¼ŒåŒæ—¶è®¾ç½® Watcher è§‚æµ‹è¯¥ç›®å½•çš„å˜åŒ–ï¼ˆå¦‚æœå¯¹å­ç›®å½•çš„å˜åŒ–ä¹Ÿæœ‰éœ€è¦ï¼Œå¯ä»¥è®¾ç½®é€’å½’æ¨¡å¼ï¼‰ï¼Œå½“æŸä¸ªç³»ç»Ÿæ›´æ–°äº† etcd çš„ç›®å½•ï¼Œé‚£ä¹ˆè®¾ç½®äº† Watcher çš„ç³»ç»Ÿå°±ä¼šæ”¶åˆ°é€šçŸ¥ï¼Œå¹¶ä½œå‡ºç›¸åº”å¤„ç†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€šè¿‡ etcd è¿›è¡Œä½è€¦åˆçš„å¿ƒè·³æ£€æµ‹ã€‚æ£€æµ‹ç³»ç»Ÿå’Œè¢«æ£€æµ‹ç³»ç»Ÿé€šè¿‡ etcd ä¸ŠæŸä¸ªç›®å½•å…³è”è€Œéç›´æ¥å…³è”èµ·æ¥ï¼Œè¿™æ ·å¯ä»¥å¤§å¤§å‡å°‘ç³»ç»Ÿçš„è€¦åˆæ€§ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡ etcd å®Œæˆç³»ç»Ÿè°ƒåº¦ã€‚æŸç³»ç»Ÿæœ‰æ§åˆ¶å°å’Œæ¨é€ç³»ç»Ÿä¸¤éƒ¨åˆ†ç»„æˆï¼Œæ§åˆ¶å°çš„èŒè´£æ˜¯æ§åˆ¶æ¨é€ç³»ç»Ÿè¿›è¡Œç›¸åº”çš„æ¨é€å·¥ä½œã€‚ç®¡ç†äººå‘˜åœ¨æ§åˆ¶å°ä½œçš„ä¸€äº›æ“ä½œï¼Œå®é™…ä¸Šæ˜¯ä¿®æ”¹äº† etcd ä¸ŠæŸäº›ç›®å½•èŠ‚ç‚¹çš„çŠ¶æ€ï¼Œè€Œ etcd å°±æŠŠè¿™äº›å˜åŒ–é€šçŸ¥ç»™æ³¨å†Œäº† Watcher çš„æ¨é€ç³»ç»Ÿå®¢æˆ·ç«¯ï¼Œæ¨é€ç³»ç»Ÿå†ä½œå‡ºç›¸åº”çš„æ¨é€ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡ etcd å®Œæˆå·¥ä½œæ±‡æŠ¥ã€‚å¤§éƒ¨åˆ†ç±»ä¼¼çš„ä»»åŠ¡åˆ†å‘ç³»ç»Ÿï¼Œå­ä»»åŠ¡å¯åŠ¨åï¼Œåˆ° etcd æ¥æ³¨å†Œä¸€ä¸ªä¸´æ—¶å·¥ä½œç›®å½•ï¼Œå¹¶ä¸”å®šæ—¶å°†è‡ªå·±çš„è¿›åº¦è¿›è¡Œæ±‡æŠ¥ï¼ˆå°†è¿›åº¦å†™å…¥åˆ°è¿™ä¸ªä¸´æ—¶ç›®å½•ï¼‰ï¼Œè¿™æ ·ä»»åŠ¡ç®¡ç†è€…å°±èƒ½å¤Ÿå®æ—¶çŸ¥é“ä»»åŠ¡è¿›åº¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://static001.infoq.cn/resource/image/38/97/38bee3d541dd88e6f772e64beab92697.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾ 6 åˆ†å¸ƒå¼ååŒå·¥ä½œ&lt;/p&gt;
&lt;h3 id=&quot;heading5&quot; data-id-_b65ea27e3e42=&quot;1&quot;&gt;åœºæ™¯äº”ï¼šåˆ†å¸ƒå¼é”&lt;/h3&gt;
&lt;p&gt;å› ä¸º etcd ä½¿ç”¨ Raft ç®—æ³•ä¿æŒäº†æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼ŒæŸæ¬¡æ“ä½œå­˜å‚¨åˆ°é›†ç¾¤ä¸­çš„å€¼å¿…ç„¶æ˜¯å…¨å±€ä¸€è‡´çš„ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å®ç°åˆ†å¸ƒå¼é”ã€‚é”æœåŠ¡æœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼Œä¸€æ˜¯ä¿æŒç‹¬å ï¼ŒäºŒæ˜¯æ§åˆ¶æ—¶åºã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¿æŒç‹¬å å³æ‰€æœ‰è·å–é”çš„ç”¨æˆ·æœ€ç»ˆåªæœ‰ä¸€ä¸ªå¯ä»¥å¾—åˆ°ã€‚etcd ä¸ºæ­¤æä¾›äº†ä¸€å¥—å®ç°åˆ†å¸ƒå¼é”åŸå­æ“ä½œ CASï¼ˆ&lt;code&gt;CompareAndSwap&lt;/code&gt;ï¼‰çš„ APIã€‚é€šè¿‡è®¾ç½®&lt;code&gt;prevExist&lt;/code&gt;å€¼ï¼Œå¯ä»¥ä¿è¯åœ¨å¤šä¸ªèŠ‚ç‚¹åŒæ—¶å»åˆ›å»ºæŸä¸ªç›®å½•æ—¶ï¼Œåªæœ‰ä¸€ä¸ªæˆåŠŸã€‚è€Œåˆ›å»ºæˆåŠŸçš„ç”¨æˆ·å°±å¯ä»¥è®¤ä¸ºæ˜¯è·å¾—äº†é”ã€‚&lt;/li&gt;
&lt;li&gt;æ§åˆ¶æ—¶åºï¼Œå³æ‰€æœ‰æƒ³è¦è·å¾—é”çš„ç”¨æˆ·éƒ½ä¼šè¢«å®‰æ’æ‰§è¡Œï¼Œä½†æ˜¯è·å¾—é”çš„é¡ºåºä¹Ÿæ˜¯å…¨å±€å”¯ä¸€çš„ï¼ŒåŒæ—¶å†³å®šäº†æ‰§è¡Œé¡ºåºã€‚etcd ä¸ºæ­¤ä¹Ÿæä¾›äº†ä¸€å¥— APIï¼ˆè‡ªåŠ¨åˆ›å»ºæœ‰åºé”®ï¼‰ï¼Œå¯¹ä¸€ä¸ªç›®å½•å»ºå€¼æ—¶æŒ‡å®šä¸º&lt;code&gt;POST&lt;/code&gt;åŠ¨ä½œï¼Œè¿™æ · etcd ä¼šè‡ªåŠ¨åœ¨ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªå½“å‰æœ€å¤§çš„å€¼ä¸ºé”®ï¼Œå­˜å‚¨è¿™ä¸ªæ–°çš„å€¼ï¼ˆå®¢æˆ·ç«¯ç¼–å·ï¼‰ã€‚åŒæ—¶è¿˜å¯ä»¥ä½¿ç”¨ API æŒ‰é¡ºåºåˆ—å‡ºæ‰€æœ‰å½“å‰ç›®å½•ä¸‹çš„é”®å€¼ã€‚æ­¤æ—¶è¿™äº›é”®çš„å€¼å°±æ˜¯å®¢æˆ·ç«¯çš„æ—¶åºï¼Œè€Œè¿™äº›é”®ä¸­å­˜å‚¨çš„å€¼å¯ä»¥æ˜¯ä»£è¡¨å®¢æˆ·ç«¯çš„ç¼–å·ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://static001.infoq.cn/resource/image/46/dc/46ff86e2e2c2157bc3f0409845f0e1dc.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾ 7 åˆ†å¸ƒå¼é”&lt;/p&gt;
&lt;h3 id=&quot;heading6&quot; data-id-_786c41d1edb6=&quot;1&quot;&gt;åœºæ™¯å…­ï¼šåˆ†å¸ƒå¼é˜Ÿåˆ—&lt;/h3&gt;
&lt;p&gt;åˆ†å¸ƒå¼é˜Ÿåˆ—çš„å¸¸è§„ç”¨æ³•ä¸åœºæ™¯äº”ä¸­æ‰€æè¿°çš„åˆ†å¸ƒå¼é”çš„æ§åˆ¶æ—¶åºç”¨æ³•ç±»ä¼¼ï¼Œå³åˆ›å»ºä¸€ä¸ªå…ˆè¿›å…ˆå‡ºçš„é˜Ÿåˆ—ï¼Œä¿è¯é¡ºåºã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ç§æ¯”è¾ƒæœ‰æ„æ€çš„å®ç°æ˜¯åœ¨ä¿è¯é˜Ÿåˆ—è¾¾åˆ°æŸä¸ªæ¡ä»¶æ—¶å†ç»Ÿä¸€æŒ‰é¡ºåºæ‰§è¡Œã€‚è¿™ç§æ–¹æ³•çš„å®ç°å¯ä»¥åœ¨ /queue è¿™ä¸ªç›®å½•ä¸­å¦å¤–å»ºç«‹ä¸€ä¸ª /queue/condition èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;condition å¯ä»¥è¡¨ç¤ºé˜Ÿåˆ—å¤§å°ã€‚æ¯”å¦‚ä¸€ä¸ªå¤§çš„ä»»åŠ¡éœ€è¦å¾ˆå¤šå°ä»»åŠ¡å°±ç»ªçš„æƒ…å†µä¸‹æ‰èƒ½æ‰§è¡Œï¼Œæ¯æ¬¡æœ‰ä¸€ä¸ªå°ä»»åŠ¡å°±ç»ªï¼Œå°±ç»™è¿™ä¸ª condition æ•°å­—åŠ  1ï¼Œç›´åˆ°è¾¾åˆ°å¤§ä»»åŠ¡è§„å®šçš„æ•°å­—ï¼Œå†å¼€å§‹æ‰§è¡Œé˜Ÿåˆ—é‡Œçš„ä¸€ç³»åˆ—å°ä»»åŠ¡ï¼Œæœ€ç»ˆæ‰§è¡Œå¤§ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;condition å¯ä»¥è¡¨ç¤ºæŸä¸ªä»»åŠ¡åœ¨ä¸åœ¨é˜Ÿåˆ—ã€‚è¿™ä¸ªä»»åŠ¡å¯ä»¥æ˜¯æ‰€æœ‰æ’åºä»»åŠ¡çš„é¦–ä¸ªæ‰§è¡Œç¨‹åºï¼Œä¹Ÿå¯ä»¥æ˜¯æ‹“æ‰‘ç»“æ„ä¸­æ²¡æœ‰ä¾èµ–çš„ç‚¹ã€‚é€šå¸¸ï¼Œå¿…é¡»æ‰§è¡Œè¿™äº›ä»»åŠ¡åæ‰èƒ½æ‰§è¡Œé˜Ÿåˆ—ä¸­çš„å…¶ä»–ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;condition è¿˜å¯ä»¥è¡¨ç¤ºå…¶å®ƒçš„ä¸€ç±»å¼€å§‹æ‰§è¡Œä»»åŠ¡çš„é€šçŸ¥ã€‚å¯ä»¥ç”±æ§åˆ¶ç¨‹åºæŒ‡å®šï¼Œå½“ condition å‡ºç°å˜åŒ–æ—¶ï¼Œå¼€å§‹æ‰§è¡Œé˜Ÿåˆ—ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;https://static001.infoq.cn/resource/image/a0/73/a08ce82fb3bee55d0e31d6e2d062a273.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾ 8 åˆ†å¸ƒå¼é˜Ÿåˆ—&lt;/p&gt;
&lt;h3 id=&quot;heading7&quot; data-id-_6453e8491990=&quot;1&quot;&gt;åœºæ™¯ä¸ƒï¼šé›†ç¾¤ç›‘æ§ä¸ Leader ç«é€‰&lt;/h3&gt;
&lt;p&gt;é€šè¿‡ etcd æ¥è¿›è¡Œç›‘æ§å®ç°èµ·æ¥éå¸¸ç®€å•å¹¶ä¸”å®æ—¶æ€§å¼ºã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å‰é¢å‡ ä¸ªåœºæ™¯å·²ç»æåˆ° Watcher æœºåˆ¶ï¼Œå½“æŸä¸ªèŠ‚ç‚¹æ¶ˆå¤±æˆ–æœ‰å˜åŠ¨æ—¶ï¼ŒWatcher ä¼šç¬¬ä¸€æ—¶é—´å‘ç°å¹¶å‘ŠçŸ¥ç”¨æˆ·ã€‚&lt;/li&gt;
&lt;li&gt;èŠ‚ç‚¹å¯ä»¥è®¾ç½®&lt;code&gt;TTL key&lt;/code&gt;ï¼Œæ¯”å¦‚æ¯éš” 30s å‘é€ä¸€æ¬¡å¿ƒè·³ä½¿ä»£è¡¨è¯¥æœºå™¨å­˜æ´»çš„èŠ‚ç‚¹ç»§ç»­å­˜åœ¨ï¼Œå¦åˆ™èŠ‚ç‚¹æ¶ˆå¤±ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™æ ·å°±å¯ä»¥ç¬¬ä¸€æ—¶é—´æ£€æµ‹åˆ°å„èŠ‚ç‚¹çš„å¥åº·çŠ¶æ€ï¼Œä»¥å®Œæˆé›†ç¾¤çš„ç›‘æ§è¦æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼Œä½¿ç”¨åˆ†å¸ƒå¼é”ï¼Œå¯ä»¥å®Œæˆ Leader ç«é€‰ã€‚è¿™ç§åœºæ™¯é€šå¸¸æ˜¯ä¸€äº›é•¿æ—¶é—´ CPU è®¡ç®—æˆ–è€…ä½¿ç”¨ IO æ“ä½œçš„æœºå™¨ï¼Œåªéœ€è¦ç«é€‰å‡ºçš„ Leader è®¡ç®—æˆ–å¤„ç†ä¸€æ¬¡ï¼Œå°±å¯ä»¥æŠŠç»“æœå¤åˆ¶ç»™å…¶ä»–çš„ Followerã€‚ä»è€Œé¿å…é‡å¤åŠ³åŠ¨ï¼ŒèŠ‚çœè®¡ç®—èµ„æºã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªçš„ç»å…¸åœºæ™¯æ˜¯æœç´¢ç³»ç»Ÿä¸­å»ºç«‹å…¨é‡ç´¢å¼•ã€‚å¦‚æœæ¯ä¸ªæœºå™¨éƒ½è¿›è¡Œä¸€éç´¢å¼•çš„å»ºç«‹ï¼Œä¸ä½†è€—æ—¶è€Œä¸”å»ºç«‹ç´¢å¼•çš„ä¸€è‡´æ€§ä¸èƒ½ä¿è¯ã€‚é€šè¿‡åœ¨ etcd çš„ CAS æœºåˆ¶åŒæ—¶åˆ›å»ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ›å»ºæˆåŠŸçš„æœºå™¨ä½œä¸º Leaderï¼Œè¿›è¡Œç´¢å¼•è®¡ç®—ï¼Œç„¶åæŠŠè®¡ç®—ç»“æœåˆ†å‘åˆ°å…¶å®ƒèŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://static001.infoq.cn/resource/image/2d/8c/2dc062ceed9f882ab99ff41f1ca7b18c.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾ 9 Leader ç«é€‰&lt;/p&gt;
&lt;h3 id=&quot;heading8&quot; data-id-_63c0b0fc2d89=&quot;1&quot;&gt;åœºæ™¯å…«ï¼šä¸ºä»€ä¹ˆç”¨ etcd è€Œä¸ç”¨ ZooKeeperï¼Ÿ&lt;/h3&gt;
&lt;p&gt;é˜…è¯»äº†&lt;a href=&quot;http://jm-blog.aliapp.com/?p=1232&quot; rel=&quot;noopener nofollow&quot; target=&quot;_blank&quot;&gt;â€œZooKeeper å…¸å‹åº”ç”¨åœºæ™¯ä¸€è§ˆâ€&lt;/a&gt;ä¸€æ–‡çš„è¯»è€…å¯èƒ½ä¼šå‘ç°ï¼Œetcd å®ç°çš„è¿™äº›åŠŸèƒ½ï¼ŒZooKeeper éƒ½èƒ½å®ç°ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆè¦ç”¨ etcd è€Œéç›´æ¥ä½¿ç”¨ ZooKeeper å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç›¸è¾ƒä¹‹ä¸‹ï¼ŒZooKeeper æœ‰å¦‚ä¸‹ç¼ºç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¤æ‚ã€‚ZooKeeper çš„éƒ¨ç½²ç»´æŠ¤å¤æ‚ï¼Œç®¡ç†å‘˜éœ€è¦æŒæ¡ä¸€ç³»åˆ—çš„çŸ¥è¯†å’ŒæŠ€èƒ½ï¼›è€Œ Paxos å¼ºä¸€è‡´æ€§ç®—æ³•ä¹Ÿæ˜¯ç´ æ¥ä»¥å¤æ‚éš¾æ‡‚è€Œé—»åäºä¸–ï¼›å¦å¤–ï¼ŒZooKeeper çš„ä½¿ç”¨ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦å®‰è£…å®¢æˆ·ç«¯ï¼Œå®˜æ–¹åªæä¾›äº† Java å’Œ C ä¸¤ç§è¯­è¨€çš„æ¥å£ã€‚&lt;/li&gt;
&lt;li&gt;Java ç¼–å†™ã€‚è¿™é‡Œä¸æ˜¯å¯¹ Java æœ‰åè§ï¼Œè€Œæ˜¯ Java æœ¬èº«å°±åå‘äºé‡å‹åº”ç”¨ï¼Œå®ƒä¼šå¼•å…¥å¤§é‡çš„ä¾èµ–ã€‚è€Œè¿ç»´äººå‘˜åˆ™æ™®éå¸Œæœ›ä¿æŒå¼ºä¸€è‡´ã€é«˜å¯ç”¨çš„æœºå™¨é›†ç¾¤å°½å¯èƒ½ç®€å•ï¼Œç»´æŠ¤èµ·æ¥ä¹Ÿä¸æ˜“å‡ºé”™ã€‚&lt;/li&gt;
&lt;li&gt;å‘å±•ç¼“æ…¢ã€‚Apache åŸºé‡‘ä¼šé¡¹ç›®ç‰¹æœ‰çš„&lt;a href=&quot;http://www.infoworld.com/article/2612082/open-source-software/has-apache-lost-its-way-.html&quot; rel=&quot;noopener nofollow&quot; target=&quot;_blank&quot;&gt;â€œApache Wayâ€&lt;/a&gt;åœ¨å¼€æºç•Œé¥±å—äº‰è®®ï¼Œå…¶ä¸­ä¸€å¤§åŸå› å°±æ˜¯ç”±äºåŸºé‡‘ä¼šåºå¤§çš„ç»“æ„ä»¥åŠæ¾æ•£çš„ç®¡ç†å¯¼è‡´é¡¹ç›®å‘å±•ç¼“æ…¢ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è€Œ etcd ä½œä¸ºä¸€ä¸ªåèµ·ä¹‹ç§€ï¼Œå…¶ä¼˜ç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç®€å•ã€‚ä½¿ç”¨ Go è¯­è¨€ç¼–å†™éƒ¨ç½²ç®€å•ï¼›ä½¿ç”¨ HTTP ä½œä¸ºæ¥å£ä½¿ç”¨ç®€å•ï¼›ä½¿ç”¨ Raft ç®—æ³•ä¿è¯å¼ºä¸€è‡´æ€§è®©ç”¨æˆ·æ˜“äºç†è§£ã€‚&lt;/li&gt;
&lt;li&gt;æ•°æ®æŒä¹…åŒ–ã€‚etcd é»˜è®¤æ•°æ®ä¸€æ›´æ–°å°±è¿›è¡ŒæŒä¹…åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;å®‰å…¨ã€‚etcd æ”¯æŒ SSL å®¢æˆ·ç«¯å®‰å…¨è®¤è¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æœ€åï¼Œetcd ä½œä¸ºä¸€ä¸ªå¹´è½»çš„é¡¹ç›®ï¼ŒçœŸæ­£å‘Šè¯‰è¿­ä»£å’Œå¼€å‘ä¸­ï¼Œè¿™æ—¢æ˜¯ä¸€ä¸ªä¼˜ç‚¹ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªç¼ºç‚¹ã€‚ä¼˜ç‚¹æ˜¯å®ƒçš„æœªæ¥å…·æœ‰æ— é™çš„å¯èƒ½æ€§ï¼Œç¼ºç‚¹æ˜¯æ— æ³•å¾—åˆ°å¤§é¡¹ç›®é•¿æ—¶é—´ä½¿ç”¨çš„æ£€éªŒã€‚ç„¶è€Œï¼Œç›®å‰ CoreOSã€Kubernetes å’Œ CloudFoundry ç­‰çŸ¥åé¡¹ç›®å‡åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨äº† etcdï¼Œæ‰€ä»¥æ€»çš„æ¥è¯´ï¼Œetcd å€¼å¾—ä½ å»å°è¯•ã€‚&lt;/p&gt;
&lt;h2 id=&quot;heading9&quot; data-id-_e3d406434ded=&quot;1&quot;&gt;etcd å®ç°åŸç†è§£è¯»&lt;/h2&gt;
&lt;p&gt;ä¸Šä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬æ¦‚æ‹¬äº†è®¸å¤š etcd çš„ç»å…¸åœºæ™¯ï¼Œè¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†ä» etcd çš„æ¶æ„å¼€å§‹ï¼Œæ·±å…¥åˆ°æºç ä¸­è§£æ etcdã€‚&lt;/p&gt;
&lt;h3 id=&quot;heading10&quot; data-id-_d48784aacabf=&quot;1&quot;&gt;1 æ¶æ„&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://static001.infoq.cn/resource/image/cf/94/cf0851c4bcbd2555d09674e7e2a07394.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾ 10 etcd æ¶æ„å›¾&lt;/p&gt;
&lt;p&gt;ä» etcd çš„æ¶æ„å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œetcd ä¸»è¦åˆ†ä¸ºå››ä¸ªéƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HTTP Serverï¼š ç”¨äºå¤„ç†ç”¨æˆ·å‘é€çš„ API è¯·æ±‚ä»¥åŠå…¶å®ƒ etcd èŠ‚ç‚¹çš„åŒæ­¥ä¸å¿ƒè·³ä¿¡æ¯è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;Storeï¼šç”¨äºå¤„ç† etcd æ”¯æŒçš„å„ç±»åŠŸèƒ½çš„äº‹åŠ¡ï¼ŒåŒ…æ‹¬æ•°æ®ç´¢å¼•ã€èŠ‚ç‚¹çŠ¶æ€å˜æ›´ã€ç›‘æ§ä¸åé¦ˆã€äº‹ä»¶å¤„ç†ä¸æ‰§è¡Œç­‰ç­‰ï¼Œæ˜¯ etcd å¯¹ç”¨æˆ·æä¾›çš„å¤§å¤šæ•° API åŠŸèƒ½çš„å…·ä½“å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;Raftï¼šRaft å¼ºä¸€è‡´æ€§ç®—æ³•çš„å…·ä½“å®ç°ï¼Œæ˜¯ etcd çš„æ ¸å¿ƒã€‚&lt;/li&gt;
&lt;li&gt;WALï¼šWrite Ahead Logï¼ˆé¢„å†™å¼æ—¥å¿—ï¼‰ï¼Œæ˜¯ etcd çš„æ•°æ®å­˜å‚¨æ–¹å¼ã€‚é™¤äº†åœ¨å†…å­˜ä¸­å­˜æœ‰æ‰€æœ‰æ•°æ®çš„çŠ¶æ€ä»¥åŠèŠ‚ç‚¹çš„ç´¢å¼•ä»¥å¤–ï¼Œetcd å°±é€šè¿‡ WAL è¿›è¡ŒæŒä¹…åŒ–å­˜å‚¨ã€‚WAL ä¸­ï¼Œæ‰€æœ‰çš„æ•°æ®æäº¤å‰éƒ½ä¼šäº‹å…ˆè®°å½•æ—¥å¿—ã€‚Snapshot æ˜¯ä¸ºäº†é˜²æ­¢æ•°æ®è¿‡å¤šè€Œè¿›è¡Œçš„çŠ¶æ€å¿«ç…§ï¼›Entry è¡¨ç¤ºå­˜å‚¨çš„å…·ä½“æ—¥å¿—å†…å®¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€šå¸¸ï¼Œä¸€ä¸ªç”¨æˆ·çš„è¯·æ±‚å‘é€è¿‡æ¥ï¼Œä¼šç»ç”± HTTP Server è½¬å‘ç»™ Store è¿›è¡Œå…·ä½“çš„äº‹åŠ¡å¤„ç†ï¼Œå¦‚æœæ¶‰åŠåˆ°èŠ‚ç‚¹çš„ä¿®æ”¹ï¼Œåˆ™äº¤ç»™ Raft æ¨¡å—è¿›è¡ŒçŠ¶æ€çš„å˜æ›´ã€æ—¥å¿—çš„è®°å½•ï¼Œç„¶åå†åŒæ­¥ç»™åˆ«çš„ etcd èŠ‚ç‚¹ä»¥ç¡®è®¤æ•°æ®æäº¤ï¼Œæœ€åè¿›è¡Œæ•°æ®çš„æäº¤ï¼Œå†æ¬¡åŒæ­¥ã€‚&lt;/p&gt;
&lt;h3 id=&quot;heading11&quot; data-id-_f512c848bc02=&quot;1&quot;&gt;2 æ–°ç‰ˆ etcd é‡è¦å˜æ›´åˆ—è¡¨&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;è·å¾—äº† IANA è®¤è¯çš„ç«¯å£ï¼Œ2379 ç”¨äºå®¢æˆ·ç«¯é€šä¿¡ï¼Œ2380 ç”¨äºèŠ‚ç‚¹é€šä¿¡ï¼Œä¸åŸå…ˆçš„ï¼ˆ4001 peers / 7001 clientsï¼‰å…±ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªèŠ‚ç‚¹å¯ç›‘å¬å¤šä¸ªå¹¿æ’­åœ°å€ã€‚ç›‘å¬çš„åœ°å€ç”±åŸæ¥çš„ä¸€ä¸ªæ‰©å±•åˆ°å¤šä¸ªï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€æ±‚å®ç°æ›´åŠ å¤æ‚çš„é›†ç¾¤ç¯å¢ƒï¼Œå¦‚ä¸€ä¸ªæ˜¯å…¬ç½‘ IPï¼Œä¸€ä¸ªæ˜¯è™šæ‹Ÿæœºï¼ˆå®¹å™¨ï¼‰ä¹‹ç±»çš„ç§æœ‰ IPã€‚&lt;/li&gt;
&lt;li&gt;etcd å¯ä»¥ä»£ç†è®¿é—® leader èŠ‚ç‚¹çš„è¯·æ±‚ï¼Œæ‰€ä»¥å¦‚æœä½ å¯ä»¥è®¿é—®ä»»ä½•ä¸€ä¸ª etcd èŠ‚ç‚¹ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥æ— è§†ç½‘ç»œçš„æ‹“æ‰‘ç»“æ„å¯¹æ•´ä¸ªé›†ç¾¤è¿›è¡Œè¯»å†™æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;etcd é›†ç¾¤å’Œé›†ç¾¤ä¸­çš„èŠ‚ç‚¹éƒ½æœ‰äº†è‡ªå·±ç‹¬ç‰¹çš„ IDã€‚è¿™æ ·å°±é˜²æ­¢å‡ºç°é…ç½®æ··æ·†ï¼Œä¸æ˜¯æœ¬é›†ç¾¤çš„å…¶ä»– etcd èŠ‚ç‚¹å‘æ¥çš„è¯·æ±‚å°†è¢«å±è”½ã€‚&lt;/li&gt;
&lt;li&gt;etcd é›†ç¾¤å¯åŠ¨æ—¶çš„é…ç½®ä¿¡æ¯ç›®å‰å˜ä¸ºå®Œå…¨å›ºå®šï¼Œè¿™æ ·æœ‰åŠ©äºç”¨æˆ·æ­£ç¡®é…ç½®å’Œå¯åŠ¨ã€‚&lt;/li&gt;
&lt;li&gt;è¿è¡Œæ—¶èŠ‚ç‚¹å˜åŒ– (Runtime Reconfiguration)ã€‚ç”¨æˆ·ä¸éœ€è¦é‡å¯ etcd æœåŠ¡å³å¯å®ç°å¯¹ etcd é›†ç¾¤ç»“æ„è¿›è¡Œå˜æ›´ã€‚å¯åŠ¨åå¯ä»¥åŠ¨æ€å˜æ›´é›†ç¾¤é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;é‡æ–°è®¾è®¡å’Œå®ç°äº† Raft ç®—æ³•ï¼Œä½¿å¾—è¿è¡Œé€Ÿåº¦æ›´å¿«ï¼Œæ›´å®¹æ˜“ç†è§£ï¼ŒåŒ…å«æ›´å¤šæµ‹è¯•ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;Raft æ—¥å¿—ç°åœ¨æ˜¯ä¸¥æ ¼çš„åªèƒ½å‘åè¿½åŠ ã€é¢„å†™å¼æ—¥å¿—ç³»ç»Ÿï¼Œå¹¶ä¸”åœ¨æ¯æ¡è®°å½•ä¸­éƒ½åŠ å…¥äº† CRC æ ¡éªŒç ã€‚&lt;/li&gt;
&lt;li&gt;å¯åŠ¨æ—¶ä½¿ç”¨çš„ _etcd/* å…³é”®å­—ä¸å†æš´éœ²ç»™ç”¨æˆ·&lt;/li&gt;
&lt;li&gt;åºŸå¼ƒé›†ç¾¤è‡ªåŠ¨è°ƒæ•´åŠŸèƒ½çš„ standby æ¨¡å¼ï¼Œè¿™ä¸ªåŠŸèƒ½ä½¿å¾—ç”¨æˆ·ç»´æŠ¤é›†ç¾¤æ›´å›°éš¾ã€‚&lt;/li&gt;
&lt;li&gt;æ–°å¢ Proxy æ¨¡å¼ï¼Œä¸åŠ å…¥åˆ° etcd ä¸€è‡´æ€§é›†ç¾¤ä¸­ï¼Œçº¯ç²¹è¿›è¡Œä»£ç†è½¬å‘ã€‚&lt;/li&gt;
&lt;li&gt;ETCD_NAMEï¼ˆ-nameï¼‰å‚æ•°ç›®å‰æ˜¯å¯é€‰çš„ï¼Œä¸å†ç”¨äºå”¯ä¸€æ ‡è¯†ä¸€ä¸ªèŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;æ‘’å¼ƒé€šè¿‡é…ç½®æ–‡ä»¶é…ç½® etcd å±æ€§çš„æ–¹å¼ï¼Œä½ å¯ä»¥ç”¨ç¯å¢ƒå˜é‡çš„æ–¹å¼ä»£æ›¿ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡è‡ªå‘ç°æ–¹å¼å¯åŠ¨é›†ç¾¤å¿…é¡»è¦æä¾›é›†ç¾¤å¤§å°ï¼Œè¿™æ ·æœ‰åŠ©äºç”¨æˆ·ç¡®å®šé›†ç¾¤å®é™…å¯åŠ¨çš„èŠ‚ç‚¹æ•°é‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;heading12&quot; data-id-_b1f9b82d782d=&quot;1&quot;&gt;3 etcd æ¦‚å¿µè¯æ±‡è¡¨&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Raftï¼šetcd æ‰€é‡‡ç”¨çš„ä¿è¯åˆ†å¸ƒå¼ç³»ç»Ÿå¼ºä¸€è‡´æ€§çš„ç®—æ³•ã€‚&lt;/li&gt;
&lt;li&gt;Nodeï¼šä¸€ä¸ª Raft çŠ¶æ€æœºå®ä¾‹ã€‚&lt;/li&gt;
&lt;li&gt;Memberï¼š ä¸€ä¸ª etcd å®ä¾‹ã€‚å®ƒç®¡ç†ç€ä¸€ä¸ª Nodeï¼Œå¹¶ä¸”å¯ä»¥ä¸ºå®¢æˆ·ç«¯è¯·æ±‚æä¾›æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;Clusterï¼šç”±å¤šä¸ª Member æ„æˆå¯ä»¥ååŒå·¥ä½œçš„ etcd é›†ç¾¤ã€‚&lt;/li&gt;
&lt;li&gt;Peerï¼šå¯¹åŒä¸€ä¸ª etcd é›†ç¾¤ä¸­å¦å¤–ä¸€ä¸ª Member çš„ç§°å‘¼ã€‚&lt;/li&gt;
&lt;li&gt;Clientï¼š å‘ etcd é›†ç¾¤å‘é€ HTTP è¯·æ±‚çš„å®¢æˆ·ç«¯ã€‚&lt;/li&gt;
&lt;li&gt;WALï¼šé¢„å†™å¼æ—¥å¿—ï¼Œetcd ç”¨äºæŒä¹…åŒ–å­˜å‚¨çš„æ—¥å¿—æ ¼å¼ã€‚&lt;/li&gt;
&lt;li&gt;snapshotï¼šetcd é˜²æ­¢ WAL æ–‡ä»¶è¿‡å¤šè€Œè®¾ç½®çš„å¿«ç…§ï¼Œå­˜å‚¨ etcd æ•°æ®çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;Proxyï¼šetcd çš„ä¸€ç§æ¨¡å¼ï¼Œä¸º etcd é›†ç¾¤æä¾›åå‘ä»£ç†æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;Leaderï¼šRaft ç®—æ³•ä¸­é€šè¿‡ç«é€‰è€Œäº§ç”Ÿçš„å¤„ç†æ‰€æœ‰æ•°æ®æäº¤çš„èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;Followerï¼šç«é€‰å¤±è´¥çš„èŠ‚ç‚¹ä½œä¸º Raft ä¸­çš„ä»å±èŠ‚ç‚¹ï¼Œä¸ºç®—æ³•æä¾›å¼ºä¸€è‡´æ€§ä¿è¯ã€‚&lt;/li&gt;
&lt;li&gt;Candidateï¼šå½“ Follower è¶…è¿‡ä¸€å®šæ—¶é—´æ¥æ”¶ä¸åˆ° Leader çš„å¿ƒè·³æ—¶è½¬å˜ä¸º Candidate å¼€å§‹ç«é€‰ã€‚&lt;/li&gt;
&lt;li&gt;Termï¼šæŸä¸ªèŠ‚ç‚¹æˆä¸º Leader åˆ°ä¸‹ä¸€æ¬¡ç«é€‰æ—¶é—´ï¼Œç§°ä¸ºä¸€ä¸ª Termã€‚&lt;/li&gt;
&lt;li&gt;Indexï¼šæ•°æ®é¡¹ç¼–å·ã€‚Raft ä¸­é€šè¿‡ Term å’Œ Index æ¥å®šä½æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;heading13&quot; data-id-_291d097b31b5=&quot;1&quot;&gt;4 é›†ç¾¤åŒ–åº”ç”¨å®è·µ&lt;/h3&gt;
&lt;p&gt;etcd ä½œä¸ºä¸€ä¸ªé«˜å¯ç”¨é”®å€¼å­˜å‚¨ç³»ç»Ÿï¼Œå¤©ç”Ÿå°±æ˜¯ä¸ºé›†ç¾¤åŒ–è€Œè®¾è®¡çš„ã€‚ç”±äº Raft ç®—æ³•åœ¨åšå†³ç­–æ—¶éœ€è¦å¤šæ•°èŠ‚ç‚¹çš„æŠ•ç¥¨ï¼Œæ‰€ä»¥ etcd ä¸€èˆ¬éƒ¨ç½²é›†ç¾¤æ¨èå¥‡æ•°ä¸ªèŠ‚ç‚¹ï¼Œæ¨èçš„æ•°é‡ä¸º 3ã€5 æˆ–è€… 7 ä¸ªèŠ‚ç‚¹æ„æˆä¸€ä¸ªé›†ç¾¤ã€‚&lt;/p&gt;
&lt;h4 id=&quot;heading14&quot; data-id-_015a2678be32=&quot;1&quot;&gt;4.1 é›†ç¾¤å¯åŠ¨&lt;/h4&gt;
&lt;p&gt;etcd æœ‰ä¸‰ç§é›†ç¾¤åŒ–å¯åŠ¨çš„é…ç½®æ–¹æ¡ˆï¼Œåˆ†åˆ«ä¸ºé™æ€é…ç½®å¯åŠ¨ã€etcd è‡ªèº«æœåŠ¡å‘ç°ã€é€šè¿‡ DNS è¿›è¡ŒæœåŠ¡å‘ç°ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡é…ç½®å†…å®¹çš„ä¸åŒï¼Œä½ å¯ä»¥å¯¹ä¸åŒçš„æ–¹å¼è¿›è¡Œé€‰æ‹©ã€‚å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¿™ä¹Ÿæ˜¯æ–°ç‰ˆ etcd åŒºåˆ«äºæ—§ç‰ˆçš„ä¸€å¤§ç‰¹æ€§ï¼Œå®ƒæ‘’å¼ƒäº†ä½¿ç”¨é…ç½®æ–‡ä»¶è¿›è¡Œå‚æ•°é…ç½®çš„åšæ³•ï¼Œè½¬è€Œä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°æˆ–è€…ç¯å¢ƒå˜é‡çš„åšæ³•æ¥é…ç½®å‚æ•°ã€‚&lt;/p&gt;
&lt;h5 id=&quot;heading15&quot; data-id-_82a2ee20a6ff=&quot;1&quot;&gt;4.1.1. é™æ€é…ç½®&lt;/h5&gt;
&lt;p&gt;è¿™ç§æ–¹å¼æ¯”è¾ƒé€‚ç”¨äºç¦»çº¿ç¯å¢ƒï¼Œåœ¨å¯åŠ¨æ•´ä¸ªé›†ç¾¤ä¹‹å‰ï¼Œä½ å°±å·²ç»é¢„å…ˆæ¸…æ¥šæ‰€è¦é…ç½®çš„é›†ç¾¤å¤§å°ï¼Œä»¥åŠé›†ç¾¤ä¸Šå„èŠ‚ç‚¹çš„åœ°å€å’Œç«¯å£ä¿¡æ¯ã€‚é‚£ä¹ˆå¯åŠ¨æ—¶ï¼Œä½ å°±å¯ä»¥é€šè¿‡é…ç½®&lt;code&gt;initial-cluster&lt;/code&gt;å‚æ•°è¿›è¡Œ etcd é›†ç¾¤çš„å¯åŠ¨ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ¯ä¸ª etcd æœºå™¨å¯åŠ¨æ—¶ï¼Œé…ç½®ç¯å¢ƒå˜é‡æˆ–è€…æ·»åŠ å¯åŠ¨å‚æ•°çš„æ–¹å¼å¦‚ä¸‹ã€‚&lt;/p&gt;

&lt;table class=&quot;hljs-ln&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;ETCD_INITIAL_CLUSTER=&lt;span class=&quot;hljs-string&quot;&gt;&quot;infra0=http://10.0.1.10:2380,infra1=http://10.0.1.11:2380,infra2=http://10.0.1.12:2380&quot;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-attr&quot;&gt;ETCD_INITIAL_CLUSTER_STATE=new&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;

&lt;/tbody&gt;

&lt;/table&gt;
&lt;p&gt;å‚æ•°æ–¹æ³•ï¼š&lt;/p&gt;

&lt;table class=&quot;hljs-ln&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-initial-cluster&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;infra0=http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.10:&lt;span class=&quot;hljs-number&quot;&gt;2380,http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.11:&lt;span class=&quot;hljs-number&quot;&gt;2380,infra2=http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.12:&lt;span class=&quot;hljs-number&quot;&gt;2380 \&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-initial-cluster-state new&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;

&lt;/tbody&gt;

&lt;/table&gt;
&lt;p&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ&lt;code&gt;-initial-cluster&lt;/code&gt;å‚æ•°ä¸­é…ç½®çš„ url åœ°å€å¿…é¡»ä¸å„ä¸ªèŠ‚ç‚¹å¯åŠ¨æ—¶è®¾ç½®çš„&lt;code&gt;initial-advertise-peer-urls&lt;/code&gt;å‚æ•°ç›¸åŒã€‚ï¼ˆ&lt;code&gt;initial-advertise-peer-urls&lt;/code&gt;å‚æ•°è¡¨ç¤ºèŠ‚ç‚¹ç›‘å¬å…¶ä»–èŠ‚ç‚¹åŒæ­¥ä¿¡å·çš„åœ°å€ï¼‰&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æ‰€åœ¨çš„ç½‘ç»œç¯å¢ƒé…ç½®äº†å¤šä¸ª etcd é›†ç¾¤ï¼Œä¸ºäº†é¿å…æ„å¤–å‘ç”Ÿï¼Œæœ€å¥½ä½¿ç”¨&lt;code&gt;-initial-cluster-token&lt;/code&gt;å‚æ•°ä¸ºæ¯ä¸ªé›†ç¾¤å•ç‹¬é…ç½®ä¸€ä¸ª token è®¤è¯ã€‚è¿™æ ·å°±å¯ä»¥ç¡®ä¿æ¯ä¸ªé›†ç¾¤å’Œé›†ç¾¤çš„æˆå‘˜éƒ½æ‹¥æœ‰ç‹¬ç‰¹çš„ IDã€‚&lt;/p&gt;
&lt;p&gt;ç»¼ä¸Šæ‰€è¿°ï¼Œå¦‚æœä½ è¦é…ç½®åŒ…å« 3 ä¸ª etcd èŠ‚ç‚¹çš„é›†ç¾¤ï¼Œé‚£ä¹ˆä½ åœ¨ä¸‰ä¸ªæœºå™¨ä¸Šçš„å¯åŠ¨å‘½ä»¤åˆ†åˆ«å¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;

&lt;table class=&quot;hljs-ln&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;$ etcd -name infra0 -initial-advertise-peer-urls http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.10:&lt;span class=&quot;hljs-number&quot;&gt;2380 \&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-listen-peer-urls http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.10:&lt;span class=&quot;hljs-number&quot;&gt;2380 \&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-initial-cluster-token etcd-cluster-&lt;span class=&quot;hljs-number&quot;&gt;1 \&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-initial-cluster infra0=http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.10:&lt;span class=&quot;hljs-number&quot;&gt;2380,infra1=http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.11:&lt;span class=&quot;hljs-number&quot;&gt;2380,infra2=http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.12:&lt;span class=&quot;hljs-number&quot;&gt;2380 \&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-initial-cluster-state new&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;$ etcd -name infra1 -initial-advertise-peer-urls http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.11:&lt;span class=&quot;hljs-number&quot;&gt;2380 \&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-listen-peer-urls http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.11:&lt;span class=&quot;hljs-number&quot;&gt;2380 \&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-initial-cluster-token etcd-cluster-&lt;span class=&quot;hljs-number&quot;&gt;1 \&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-initial-cluster infra0=http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.10:&lt;span class=&quot;hljs-number&quot;&gt;2380,infra1=http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.11:&lt;span class=&quot;hljs-number&quot;&gt;2380,infra2=http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.12:&lt;span class=&quot;hljs-number&quot;&gt;2380 \&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-initial-cluster-state new&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;$ etcd -name infra2 -initial-advertise-peer-urls http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.12:&lt;span class=&quot;hljs-number&quot;&gt;2380 \&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-listen-peer-urls http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.12:&lt;span class=&quot;hljs-number&quot;&gt;2380 \&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-initial-cluster-token etcd-cluster-&lt;span class=&quot;hljs-number&quot;&gt;1 \&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-initial-cluster infra0=http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.10:&lt;span class=&quot;hljs-number&quot;&gt;2380,infra1=http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.11:&lt;span class=&quot;hljs-number&quot;&gt;2380,infra2=http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.12:&lt;span class=&quot;hljs-number&quot;&gt;2380 \&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-initial-cluster-state new&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;

&lt;/tbody&gt;

&lt;/table&gt;
&lt;p&gt;åœ¨åˆå§‹åŒ–å®Œæˆåï¼Œetcd è¿˜æä¾›åŠ¨æ€å¢ã€åˆ ã€æ”¹ etcd é›†ç¾¤èŠ‚ç‚¹çš„åŠŸèƒ½ï¼Œè¿™ä¸ªéœ€è¦ç”¨åˆ°&lt;code&gt;etcdctl&lt;/code&gt;å‘½ä»¤è¿›è¡Œæ“ä½œã€‚&lt;/p&gt;
&lt;h5 id=&quot;heading16&quot; data-id-_dec809e17976=&quot;1&quot;&gt;4.1.2. etcd è‡ªå‘ç°æ¨¡å¼&lt;/h5&gt;
&lt;p&gt;é€šè¿‡è‡ªå‘ç°çš„æ–¹å¼å¯åŠ¨ etcd é›†ç¾¤éœ€è¦äº‹å…ˆå‡†å¤‡ä¸€ä¸ª etcd é›†ç¾¤ã€‚å¦‚æœä½ å·²ç»æœ‰ä¸€ä¸ª etcd é›†ç¾¤ï¼Œé¦–å…ˆä½ å¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤è®¾å®šé›†ç¾¤çš„å¤§å°ï¼Œå‡è®¾ä¸º 3.&lt;/p&gt;

&lt;table class=&quot;hljs-ln&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;$ curl -X PUT http:&lt;span class=&quot;hljs-regexp&quot;&gt;//myetcd.local&lt;span class=&quot;hljs-regexp&quot;&gt;/v2/keys&lt;span class=&quot;hljs-regexp&quot;&gt;/discovery/&lt;span class=&quot;hljs-number&quot;&gt;6c007a14875d53d9bf0ef5a6fc0257c817f0fb83&lt;span class=&quot;hljs-regexp&quot;&gt;/_config/size -d value=&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;

&lt;/tbody&gt;

&lt;/table&gt;
&lt;p&gt;ç„¶åä½ è¦æŠŠè¿™ä¸ª url åœ°å€&lt;code&gt;http://myetcd.local/v2/keys/discovery/6c007a14875d53d9bf0ef5a6fc0257c817f0fb83&lt;/code&gt;ä½œä¸º&lt;code&gt;-discovery&lt;/code&gt;å‚æ•°æ¥å¯åŠ¨ etcdã€‚èŠ‚ç‚¹ä¼šè‡ªåŠ¨ä½¿ç”¨&lt;code&gt;http://myetcd.local/v2/keys/discovery/6c007a14875d53d9bf0ef5a6fc0257c817f0fb83&lt;/code&gt;ç›®å½•è¿›è¡Œ etcd çš„æ³¨å†Œå’Œå‘ç°æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æœ€ç»ˆä½ åœ¨æŸä¸ªæœºå™¨ä¸Šå¯åŠ¨ etcd çš„å‘½ä»¤å¦‚ä¸‹ã€‚&lt;/p&gt;

&lt;table class=&quot;hljs-ln&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;$ etcd -name infra0 -initial-advertise-peer-urls http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.10:&lt;span class=&quot;hljs-number&quot;&gt;2380 \&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-listen-peer-urls http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;10.0.&lt;span class=&quot;hljs-number&quot;&gt;1.10:&lt;span class=&quot;hljs-number&quot;&gt;2380 \&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-discovery http:&lt;span class=&quot;hljs-regexp&quot;&gt;//myetcd.local&lt;span class=&quot;hljs-regexp&quot;&gt;/v2/keys&lt;span class=&quot;hljs-regexp&quot;&gt;/discovery/&lt;span class=&quot;hljs-number&quot;&gt;6c007a14875d53d9bf0ef5a6fc0257c817f0fb83&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;

&lt;/tbody&gt;

&lt;/table&gt;
&lt;p&gt;å¦‚æœä½ æœ¬åœ°æ²¡æœ‰å¯ç”¨çš„ etcd é›†ç¾¤ï¼Œetcd å®˜ç½‘æä¾›äº†ä¸€ä¸ªå¯ä»¥å…¬ç½‘è®¿é—®çš„ etcd å­˜å‚¨åœ°å€ã€‚ä½ å¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤å¾—åˆ° etcd æœåŠ¡çš„ç›®å½•ï¼Œå¹¶æŠŠå®ƒä½œä¸º&lt;code&gt;-discovery&lt;/code&gt;å‚æ•°ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;table class=&quot;hljs-ln&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;$ curl http:&lt;span class=&quot;hljs-regexp&quot;&gt;//discovery.etcd.io/new?size=&lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;http:&lt;span class=&quot;hljs-regexp&quot;&gt;//discovery.etcd.io/&lt;span class=&quot;hljs-number&quot;&gt;3e86b59982e49066c5d813af1c2e2579cbf573de&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;

&lt;/tbody&gt;

&lt;/table&gt;
&lt;p&gt;åŒæ ·çš„ï¼Œå½“ä½ å®Œæˆäº†é›†ç¾¤çš„åˆå§‹åŒ–åï¼Œè¿™äº›ä¿¡æ¯å°±å¤±å»äº†ä½œç”¨ã€‚å½“ä½ éœ€è¦å¢åŠ èŠ‚ç‚¹æ—¶ï¼Œéœ€è¦ä½¿ç”¨&lt;code&gt;etcdctl&lt;/code&gt;æ¥è¿›è¡Œæ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å®‰å…¨ï¼Œè¯·åŠ¡å¿…æ¯æ¬¡å¯åŠ¨æ–° etcd é›†ç¾¤æ—¶ï¼Œéƒ½ä½¿ç”¨æ–°çš„ discovery token è¿›è¡Œæ³¨å†Œã€‚å¦å¤–ï¼Œå¦‚æœä½ åˆå§‹åŒ–æ—¶å¯åŠ¨çš„èŠ‚ç‚¹è¶…è¿‡äº†æŒ‡å®šçš„æ•°é‡ï¼Œå¤šä½™çš„èŠ‚ç‚¹ä¼šè‡ªåŠ¨è½¬åŒ–ä¸º Proxy æ¨¡å¼çš„ etcdã€‚&lt;/p&gt;
&lt;h5 id=&quot;heading17&quot; data-id-_1cdb57a888c9=&quot;1&quot;&gt;4.1.3. DNS è‡ªå‘ç°æ¨¡å¼&lt;/h5&gt;
&lt;p&gt;etcd è¿˜æ”¯æŒä½¿ç”¨ DNS SRV è®°å½•è¿›è¡Œå¯åŠ¨ã€‚å…³äº DNS SRV è®°å½•å¦‚ä½•è¿›è¡ŒæœåŠ¡å‘ç°ï¼Œå¯ä»¥å‚é˜…&lt;a href=&quot;http://tools.ietf.org/html/rfc2782&quot; rel=&quot;noopener nofollow&quot; target=&quot;_blank&quot;&gt;Â RFC2782Â &lt;/a&gt;ï¼Œæ‰€ä»¥ï¼Œä½ è¦åœ¨ DNS æœåŠ¡å™¨ä¸Šè¿›è¡Œç›¸åº”çš„é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;(1) å¼€å¯ DNS æœåŠ¡å™¨ä¸Š SRV è®°å½•æŸ¥è¯¢ï¼Œå¹¶æ·»åŠ ç›¸åº”çš„åŸŸåè®°å½•ï¼Œä½¿å¾—æŸ¥è¯¢åˆ°çš„ç»“æœç±»ä¼¼å¦‚ä¸‹ã€‚&lt;/p&gt;

&lt;table class=&quot;hljs-ln&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;$ dig +noall +answer SRV _etcd-server._tcp&lt;span class=&quot;hljs-selector-class&quot;&gt;.example&lt;span class=&quot;hljs-selector-class&quot;&gt;.com&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;_etcd-server._tcp&lt;span class=&quot;hljs-selector-class&quot;&gt;.example&lt;span class=&quot;hljs-selector-class&quot;&gt;.com. &lt;span class=&quot;hljs-number&quot;&gt;300 IN SRV &lt;span class=&quot;hljs-number&quot;&gt;0 &lt;span class=&quot;hljs-number&quot;&gt;0 &lt;span class=&quot;hljs-number&quot;&gt;2380 infra0&lt;span class=&quot;hljs-selector-class&quot;&gt;.example&lt;span class=&quot;hljs-selector-class&quot;&gt;.com.&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;_etcd-server._tcp&lt;span class=&quot;hljs-selector-class&quot;&gt;.example&lt;span class=&quot;hljs-selector-class&quot;&gt;.com. &lt;span class=&quot;hljs-number&quot;&gt;300 IN SRV &lt;span class=&quot;hljs-number&quot;&gt;0 &lt;span class=&quot;hljs-number&quot;&gt;0 &lt;span class=&quot;hljs-number&quot;&gt;2380 infra1&lt;span class=&quot;hljs-selector-class&quot;&gt;.example&lt;span class=&quot;hljs-selector-class&quot;&gt;.com.&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;_etcd-server._tcp&lt;span class=&quot;hljs-selector-class&quot;&gt;.example&lt;span class=&quot;hljs-selector-class&quot;&gt;.com. &lt;span class=&quot;hljs-number&quot;&gt;300 IN SRV &lt;span class=&quot;hljs-number&quot;&gt;0 &lt;span class=&quot;hljs-number&quot;&gt;0 &lt;span class=&quot;hljs-number&quot;&gt;2380 infra2&lt;span class=&quot;hljs-selector-class&quot;&gt;.example&lt;span class=&quot;hljs-selector-class&quot;&gt;.com.&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;

&lt;/tbody&gt;

&lt;/table&gt;
&lt;p&gt;(2) åˆ†åˆ«ä¸ºå„ä¸ªåŸŸåé…ç½®ç›¸å…³çš„ A è®°å½•æŒ‡å‘ etcd æ ¸å¿ƒèŠ‚ç‚¹å¯¹åº”çš„æœºå™¨ IPã€‚ä½¿å¾—æŸ¥è¯¢ç»“æœç±»ä¼¼å¦‚ä¸‹ã€‚&lt;/p&gt;

&lt;table class=&quot;hljs-ln&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;$ dig +noall +answer infra0.example.com infra1.example.com infra2.example.com&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;infra0.example.com. &lt;span class=&quot;hljs-number&quot;&gt;300 IN A &lt;span class=&quot;hljs-number&quot;&gt;10.0&lt;span class=&quot;hljs-number&quot;&gt;.1&lt;span class=&quot;hljs-number&quot;&gt;.10&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;infra1.example.com. &lt;span class=&quot;hljs-number&quot;&gt;300 IN A &lt;span class=&quot;hljs-number&quot;&gt;10.0&lt;span class=&quot;hljs-number&quot;&gt;.1&lt;span class=&quot;hljs-number&quot;&gt;.11&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;infra2.example.com. &lt;span class=&quot;hljs-number&quot;&gt;300 IN A &lt;span class=&quot;hljs-number&quot;&gt;10.0&lt;span class=&quot;hljs-number&quot;&gt;.1&lt;span class=&quot;hljs-number&quot;&gt;.12&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;

&lt;/tbody&gt;

&lt;/table&gt;
&lt;p&gt;åšå¥½äº†ä¸Šè¿°ä¸¤æ­¥ DNS çš„é…ç½®ï¼Œå°±å¯ä»¥ä½¿ç”¨ DNS å¯åŠ¨ etcd é›†ç¾¤äº†ã€‚é…ç½® DNS è§£æçš„ url å‚æ•°ä¸º&lt;code&gt;-discovery-srv&lt;/code&gt;ï¼Œå…¶ä¸­æŸä¸€ä¸ªèŠ‚ç‚¹åœ°å¯åŠ¨å‘½ä»¤å¦‚ä¸‹ã€‚&lt;/p&gt;

&lt;table class=&quot;hljs-ln&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;$ etcd -name infra0 \&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-&lt;span class=&quot;ruby&quot;&gt;discovery-srv example.com \&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-&lt;span class=&quot;ruby&quot;&gt;initial-advertise-peer-urls &lt;span class=&quot;hljs-symbol&quot;&gt;http:/&lt;span class=&quot;hljs-regexp&quot;&gt;/infra0.example.com:2380 \&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-&lt;span class=&quot;ruby&quot;&gt;initial-cluster-token etcd-cluster-1 \&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-&lt;span class=&quot;ruby&quot;&gt;initial-cluster-state new \&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-&lt;span class=&quot;ruby&quot;&gt;&lt;span class=&quot;hljs-regexp&quot;&gt;advertise-client-urls http:/&lt;span class=&quot;hljs-regexp&quot;&gt;/infra0.example.com:2379 \&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-&lt;span class=&quot;ruby&quot;&gt;&lt;span class=&quot;hljs-regexp&quot;&gt;listen-client-urls http:/&lt;span class=&quot;hljs-regexp&quot;&gt;/infra0.example.com:2379 \&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;-&lt;span class=&quot;ruby&quot;&gt;&lt;span class=&quot;hljs-regexp&quot;&gt;listen-peer-urls http:/&lt;span class=&quot;hljs-regexp&quot;&gt;/infra0.example.com:2380&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;

&lt;/tr&gt;

&lt;/tbody&gt;

&lt;/table&gt;
&lt;p&gt;å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥æŠŠèŠ‚ç‚¹çš„åŸŸåæ”¹æˆ IP æ¥å¯åŠ¨ã€‚&lt;/p&gt;
&lt;h4 id=&quot;heading18&quot; data-id-_ca205368e7bd=&quot;1&quot;&gt;4.2 å…³é”®éƒ¨åˆ†æºç è§£æ&lt;/h4&gt;
&lt;p&gt;etcd çš„å¯åŠ¨æ˜¯ä»ä¸»ç›®å½•ä¸‹çš„&lt;code&gt;main.go&lt;/code&gt;å¼€å§‹çš„ï¼Œç„¶åè¿›å…¥&lt;code&gt;etcdmain/etcd.go&lt;/code&gt;ï¼Œè½½å…¥é…ç½®å‚æ•°ã€‚å¦‚æœè¢«é…ç½®ä¸º Proxy æ¨¡å¼ï¼Œåˆ™è¿›å…¥ startProxy å‡½æ•°ï¼Œå¦åˆ™è¿›å…¥ startEtcdï¼Œå¼€å¯ etcd æœåŠ¡æ¨¡å—å’Œ http è¯·æ±‚å¤„ç†æ¨¡å—ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¯åŠ¨ http ç›‘å¬æ—¶ï¼Œä¸ºäº†ä¿æŒä¸é›†ç¾¤å…¶ä»– etcd æœºå™¨ï¼ˆpeersï¼‰ä¿æŒè¿æ¥ï¼Œéƒ½é‡‡ç”¨çš„&lt;code&gt;transport.NewTimeoutListener&lt;/code&gt;å¯åŠ¨æ–¹å¼ï¼Œè¿™æ ·åœ¨è¶…è¿‡æŒ‡å®šæ—¶é—´æ²¡æœ‰è·å¾—å“åº”æ—¶å°±ä¼šå‡ºç°è¶…æ—¶é”™è¯¯ã€‚è€Œåœ¨ç›‘å¬ client è¯·æ±‚æ—¶ï¼Œé‡‡ç”¨çš„æ˜¯&lt;code&gt;transport.NewKeepAliveListener&lt;/code&gt;ï¼Œæœ‰åŠ©äºè¿æ¥çš„ç¨³å®šã€‚&lt;/p&gt;
&lt;p&gt;åœ¨&lt;code&gt;etcdmain/etcd.go&lt;/code&gt;ä¸­çš„ setupCluster å‡½æ•°å¯ä»¥çœ‹åˆ°ï¼Œæ ¹æ®ä¸åŒ etcd çš„å‚æ•°ï¼Œå¯åŠ¨é›†ç¾¤çš„æ–¹æ³•ç•¥æœ‰ä¸åŒï¼Œä½†æ˜¯æœ€ç»ˆéœ€è¦çš„å°±æ˜¯ä¸€ä¸ª IP ä¸ç«¯å£æ„æˆçš„å­—ç¬¦ä¸²ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨é™æ€é…ç½®çš„å¯åŠ¨æ–¹å¼ä¸­ï¼Œé›†ç¾¤çš„æ‰€æœ‰ä¿¡æ¯éƒ½å·²ç»åœ¨ç»™å‡ºï¼Œæ‰€ä»¥ç›´æ¥è§£æç”¨é€—å·éš”å¼€çš„é›†ç¾¤ url ä¿¡æ¯å°±å¥½äº†ã€‚&lt;/p&gt;
&lt;p&gt;DNS å‘ç°çš„æ–¹å¼ç±»ä¼¼ï¼Œä¼šé¢„å…ˆå‘é€ä¸€ä¸ª tcp çš„ SRV è¯·æ±‚ï¼Œå…ˆæŸ¥çœ‹&lt;code&gt;etcd-server-ssl._tcp.example.com&lt;/code&gt;ä¸‹æ˜¯å¦æœ‰é›†ç¾¤çš„åŸŸåä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™å»æŸ¥çœ‹&lt;code&gt;etcd-server._tcp.example.com&lt;/code&gt;ã€‚æ ¹æ®æ‰¾åˆ°çš„åŸŸåï¼Œè§£æå‡ºå¯¹åº”çš„ IP å’Œç«¯å£ï¼Œå³é›†ç¾¤çš„ url ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;è¾ƒä¸ºå¤æ‚æ˜¯ etcd å¼çš„è‡ªå‘ç°å¯åŠ¨ã€‚é¦–å…ˆå°±ç”¨è‡ªèº«å•ä¸ªçš„ url æ„æˆä¸€ä¸ªé›†ç¾¤ï¼Œç„¶ååœ¨å¯åŠ¨çš„è¿‡ç¨‹ä¸­æ ¹æ®å‚æ•°è¿›å…¥&lt;code&gt;discovery/discovery.go&lt;/code&gt;æºç çš„&lt;code&gt;JoinCluster&lt;/code&gt;å‡½æ•°ã€‚å› ä¸ºæˆ‘ä»¬äº‹å…ˆæ˜¯çŸ¥é“å¯åŠ¨æ—¶ä½¿ç”¨çš„ etcd çš„ token åœ°å€çš„ï¼Œé‡Œé¢åŒ…å«äº†é›†ç¾¤å¤§å° (size) ä¿¡æ¯ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹å…¶å®æ˜¯ä¸ªä¸æ–­ç›‘æµ‹ä¸ç­‰å¾…çš„è¿‡ç¨‹ã€‚å¯åŠ¨çš„ç¬¬ä¸€æ­¥å°±æ˜¯åœ¨è¿™ä¸ª etcd çš„ token ç›®å½•ä¸‹æ³¨å†Œè‡ªèº«çš„ä¿¡æ¯ï¼Œç„¶åå†ç›‘æµ‹ token ç›®å½•ä¸‹æ‰€æœ‰èŠ‚ç‚¹çš„æ•°é‡ï¼Œå¦‚æœæ•°é‡æ²¡æœ‰è¾¾æ ‡ï¼Œåˆ™å¾ªç¯ç­‰å¾…ã€‚å½“æ•°é‡è¾¾åˆ°è¦æ±‚æ—¶ï¼Œæ‰ç»“æŸï¼Œè¿›å…¥æ­£å¸¸çš„å¯åŠ¨è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;é…ç½® etcd è¿‡ç¨‹ä¸­é€šå¸¸è¦ç”¨åˆ°ä¸¤ç§ url åœ°å€å®¹æ˜“æ··æ·†ï¼Œä¸€ç§ç”¨äº etcd é›†ç¾¤åŒæ­¥ä¿¡æ¯å¹¶ä¿æŒè¿æ¥ï¼Œé€šå¸¸ç§°ä¸º peer-urlsï¼›å¦å¤–ä¸€ç§ç”¨äºæ¥æ”¶ç”¨æˆ·ç«¯å‘æ¥çš„ HTTP è¯·æ±‚ï¼Œé€šå¸¸ç§°ä¸º client-urlsã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;peer-urls&lt;/code&gt;ï¼šé€šå¸¸ç›‘å¬çš„ç«¯å£ä¸º&lt;code&gt;2380&lt;/code&gt;ï¼ˆè€ç‰ˆæœ¬ä½¿ç”¨çš„ç«¯å£ä¸º&lt;code&gt;7001&lt;/code&gt;ï¼‰ï¼ŒåŒ…æ‹¬æ‰€æœ‰å·²ç»åœ¨é›†ç¾¤ä¸­æ­£å¸¸å·¥ä½œçš„æ‰€æœ‰èŠ‚ç‚¹çš„åœ°å€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;client-urls&lt;/code&gt;ï¼šé€šå¸¸ç›‘å¬çš„ç«¯å£ä¸º&lt;code&gt;2379&lt;/code&gt;ï¼ˆè€ç‰ˆæœ¬ä½¿ç”¨çš„ç«¯å£ä¸º&lt;code&gt;4001&lt;/code&gt;ï¼‰ï¼Œä¸ºé€‚åº”å¤æ‚çš„ç½‘ç»œç¯å¢ƒï¼Œæ–°ç‰ˆ etcd ç›‘å¬å®¢æˆ·ç«¯è¯·æ±‚çš„ url ä»åŸæ¥çš„ 1 ä¸ªå˜ä¸ºç°åœ¨å¯é…ç½®çš„å¤šä¸ªã€‚è¿™æ · etcd å¯ä»¥é…åˆå¤šå—ç½‘å¡åŒæ—¶ç›‘å¬ä¸åŒç½‘ç»œä¸‹çš„è¯·æ±‚ã€‚&lt;/li&gt;

&lt;/ul&gt;
&lt;h4 id=&quot;heading19&quot; data-id-_f39217fd6523=&quot;1&quot;&gt;4.3 è¿è¡Œæ—¶èŠ‚ç‚¹å˜æ›´&lt;/h4&gt;
&lt;p&gt;etcd é›†ç¾¤å¯åŠ¨å®Œæ¯•åï¼Œå¯ä»¥åœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­å¯¹é›†ç¾¤è¿›è¡Œé‡æ„ï¼ŒåŒ…æ‹¬æ ¸å¿ƒèŠ‚ç‚¹çš„å¢åŠ ã€åˆ é™¤ã€è¿ç§»ã€æ›¿æ¢ç­‰ã€‚è¿è¡Œæ—¶é‡æ„ä½¿å¾— etcd é›†ç¾¤æ— é¡»é‡å¯å³å¯æ”¹å˜é›†ç¾¤çš„é…ç½®ï¼Œè¿™ä¹Ÿæ˜¯æ–°ç‰ˆ etcd åŒºåˆ«äºæ—§ç‰ˆåŒ…å«çš„æ–°ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;åªæœ‰å½“é›†ç¾¤ä¸­å¤šæ•°èŠ‚ç‚¹æ­£å¸¸çš„æƒ…å†µä¸‹ï¼Œä½ æ‰å¯ä»¥è¿›è¡Œè¿è¡Œæ—¶çš„é…ç½®ç®¡ç†ã€‚å› ä¸ºé…ç½®æ›´æ”¹çš„ä¿¡æ¯ä¹Ÿä¼šè¢« etcd å½“æˆä¸€ä¸ªä¿¡æ¯å­˜å‚¨å’ŒåŒæ­¥ï¼Œå¦‚æœé›†ç¾¤å¤šæ•°èŠ‚ç‚¹æŸåï¼Œé›†ç¾¤å°±å¤±å»äº†å†™å…¥æ•°æ®çš„èƒ½åŠ›ã€‚æ‰€ä»¥åœ¨é…ç½® etcd é›†ç¾¤æ•°é‡æ—¶ï¼Œå¼ºçƒˆæ¨èè‡³å°‘é…ç½® 3 ä¸ªæ ¸å¿ƒèŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;h5 id=&quot;heading20&quot; data-id-_43e6d3c7ab97=&quot;1&quot;&gt;4.3.1. èŠ‚ç‚¹è¿ç§»ã€æ›¿æ¢&lt;/h5&gt;
&lt;p&gt;å½“ä½ èŠ‚ç‚¹æ‰€åœ¨çš„æœºå™¨å‡ºç°ç¡¬ä»¶æ•…éšœï¼Œæˆ–è€…èŠ‚ç‚¹å‡ºç°å¦‚æ•°æ®ç›®å½•æŸåç­‰é—®é¢˜ï¼Œå¯¼è‡´èŠ‚ç‚¹æ°¸ä¹…æ€§çš„ä¸å¯æ¢å¤æ—¶ï¼Œå°±éœ€è¦å¯¹èŠ‚ç‚¹è¿›è¡Œè¿ç§»æˆ–è€…æ›¿æ¢ã€‚å½“ä¸€ä¸ªèŠ‚ç‚¹å¤±æ•ˆä»¥åï¼Œå¿…é¡»å°½å¿«ä¿®å¤ï¼Œå› ä¸º etcd é›†ç¾¤æ­£å¸¸è¿è¡Œçš„å¿…è¦æ¡ä»¶æ˜¯é›†ç¾¤ä¸­å¤šæ•°èŠ‚ç‚¹éƒ½æ­£å¸¸å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;è¿ç§»ä¸€ä¸ªèŠ‚ç‚¹éœ€è¦è¿›è¡Œå››æ­¥æ“ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æš‚åœæ­£åœ¨è¿è¡Œç€çš„èŠ‚ç‚¹ç¨‹åºè¿›ç¨‹&lt;/li&gt;
&lt;li&gt;æŠŠæ•°æ®ç›®å½•ä»ç°æœ‰æœºå™¨æ‹·è´åˆ°æ–°æœºå™¨&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ api æ›´æ–° etcd ä¸­å¯¹åº”èŠ‚ç‚¹æŒ‡å‘æœºå™¨çš„ url è®°å½•æ›´æ–°ä¸ºæ–°æœºå™¨çš„ ip&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨åŒæ ·çš„é…ç½®é¡¹å’Œæ•°æ®ç›®å½•ï¼Œåœ¨æ–°çš„æœºå™¨ä¸Šå¯åŠ¨ etcdã€‚&lt;/li&gt;

&lt;/ul&gt;
&lt;h5 id=&quot;heading21&quot; data-id-_7611bda5c9da=&quot;1&quot;&gt;4.3.2. èŠ‚ç‚¹å¢åŠ &lt;/h5&gt;
&lt;p&gt;å¢åŠ èŠ‚ç‚¹å¯ä»¥è®© etcd çš„é«˜å¯ç”¨æ€§æ›´å¼ºã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœä½ æœ‰ 3 ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆæœ€å¤šå…è®¸ 1 ä¸ªèŠ‚ç‚¹å¤±æ•ˆï¼›å½“ä½ æœ‰ 5 ä¸ªèŠ‚ç‚¹æ—¶ï¼Œå°±å¯ä»¥å…è®¸æœ‰ 2 ä¸ªèŠ‚ç‚¹å¤±æ•ˆã€‚åŒæ—¶ï¼Œå¢åŠ èŠ‚ç‚¹è¿˜å¯ä»¥è®© etcd é›†ç¾¤å…·æœ‰æ›´å¥½çš„è¯»æ€§èƒ½ã€‚å› ä¸º etcd çš„èŠ‚ç‚¹éƒ½æ˜¯å®æ—¶åŒæ­¥çš„ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½å­˜å‚¨äº†æ‰€æœ‰çš„ä¿¡æ¯ï¼Œæ‰€ä»¥å¢åŠ èŠ‚ç‚¹å¯ä»¥ä»æ•´ä½“ä¸Šæå‡è¯»çš„ååé‡ã€‚&lt;/p&gt;
&lt;p&gt;å¢åŠ ä¸€ä¸ªèŠ‚ç‚¹éœ€è¦è¿›è¡Œä¸¤æ­¥æ“ä½œï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨é›†ç¾¤ä¸­æ·»åŠ è¿™ä¸ªèŠ‚ç‚¹çš„ url è®°å½•ï¼ŒåŒæ—¶è·å¾—é›†ç¾¤çš„ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨è·å¾—çš„é›†ç¾¤ä¿¡æ¯å¯åŠ¨æ–° etcd èŠ‚ç‚¹ã€‚&lt;/li&gt;

&lt;/ul&gt;
&lt;h5 id=&quot;heading22&quot; data-id-_4088fdd97f25=&quot;1&quot;&gt;4.3.3. èŠ‚ç‚¹ç§»é™¤&lt;/h5&gt;
&lt;p&gt;æœ‰æ—¶ä½ ä¸å¾—ä¸åœ¨æé«˜ etcd çš„å†™æ€§èƒ½å’Œå¢åŠ é›†ç¾¤é«˜å¯ç”¨æ€§ä¸Šè¿›è¡Œæƒè¡¡ã€‚Leader èŠ‚ç‚¹åœ¨æäº¤ä¸€ä¸ªå†™è®°å½•æ—¶ï¼Œä¼šæŠŠè¿™ä¸ªæ¶ˆæ¯åŒæ­¥åˆ°æ¯ä¸ªèŠ‚ç‚¹ä¸Šï¼Œå½“å¾—åˆ°å¤šæ•°èŠ‚ç‚¹çš„åŒæ„åé¦ˆåï¼Œæ‰ä¼šçœŸæ­£å†™å…¥æ•°æ®ã€‚æ‰€ä»¥èŠ‚ç‚¹è¶Šå¤šï¼Œå†™å…¥æ€§èƒ½è¶Šå·®ã€‚åœ¨èŠ‚ç‚¹è¿‡å¤šæ—¶ï¼Œä½ å¯èƒ½éœ€è¦ç§»é™¤ä¸€ä¸ªæˆ–å¤šä¸ªã€‚&lt;/p&gt;
&lt;p&gt;ç§»é™¤èŠ‚ç‚¹éå¸¸ç®€å•ï¼Œåªéœ€è¦ä¸€æ­¥æ“ä½œï¼Œå°±æ˜¯æŠŠé›†ç¾¤ä¸­è¿™ä¸ªèŠ‚ç‚¹çš„è®°å½•åˆ é™¤ã€‚ç„¶åå¯¹åº”æœºå™¨ä¸Šçš„è¯¥èŠ‚ç‚¹å°±ä¼šè‡ªåŠ¨åœæ­¢ã€‚&lt;/p&gt;
&lt;h5 id=&quot;heading23&quot; data-id-_94468eeb582c=&quot;1&quot;&gt;4.3.4. å¼ºåˆ¶æ€§é‡å¯é›†ç¾¤&lt;/h5&gt;
&lt;p&gt;å½“é›†ç¾¤è¶…è¿‡åŠæ•°çš„èŠ‚ç‚¹éƒ½å¤±æ•ˆæ—¶ï¼Œå°±éœ€è¦é€šè¿‡æ‰‹åŠ¨çš„æ–¹å¼ï¼Œå¼ºåˆ¶æ€§è®©æŸä¸ªèŠ‚ç‚¹ä»¥è‡ªå·±ä¸º Leaderï¼Œåˆ©ç”¨åŸæœ‰æ•°æ®å¯åŠ¨ä¸€ä¸ªæ–°é›†ç¾¤ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶ä½ éœ€è¦è¿›è¡Œä¸¤æ­¥æ“ä½œã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤‡ä»½åŸæœ‰æ•°æ®åˆ°æ–°æœºå™¨ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨&lt;code&gt;-force-new-cluster&lt;/code&gt;åŠ å¤‡ä»½çš„æ•°æ®é‡æ–°å¯åŠ¨èŠ‚ç‚¹&lt;/li&gt;

&lt;/ul&gt;
&lt;p&gt;æ³¨æ„ï¼šå¼ºåˆ¶æ€§é‡å¯æ˜¯ä¸€ä¸ªè¿«ä¸å¾—å·²çš„é€‰æ‹©ï¼Œå®ƒä¼šç ´åä¸€è‡´æ€§åè®®ä¿è¯çš„å®‰å…¨æ€§ï¼ˆå¦‚æœæ“ä½œæ—¶é›†ç¾¤ä¸­å°šæœ‰å…¶å®ƒèŠ‚ç‚¹åœ¨æ­£å¸¸å·¥ä½œï¼Œå°±ä¼šå‡ºé”™ï¼‰ï¼Œæ‰€ä»¥åœ¨æ“ä½œå‰è¯·åŠ¡å¿…è¦ä¿å­˜å¥½æ•°æ®ã€‚&lt;/p&gt;
&lt;h3 id=&quot;heading24&quot; data-id-_41464b0b45d8=&quot;1&quot;&gt;5 Proxy æ¨¡å¼&lt;/h3&gt;
&lt;p&gt;Proxy æ¨¡å¼ä¹Ÿæ˜¯æ–°ç‰ˆ etcd çš„ä¸€ä¸ªé‡è¦å˜æ›´ï¼Œetcd ä½œä¸ºä¸€ä¸ªåå‘ä»£ç†æŠŠå®¢æˆ·çš„è¯·æ±‚è½¬å‘ç»™å¯ç”¨çš„ etcd é›†ç¾¤ã€‚è¿™æ ·ï¼Œä½ å°±å¯ä»¥åœ¨æ¯ä¸€å°æœºå™¨éƒ½éƒ¨ç½²ä¸€ä¸ª Proxy æ¨¡å¼çš„ etcd ä½œä¸ºæœ¬åœ°æœåŠ¡ï¼Œå¦‚æœè¿™äº› etcd Proxy éƒ½èƒ½æ­£å¸¸è¿è¡Œï¼Œé‚£ä¹ˆä½ çš„æœåŠ¡å‘ç°å¿…ç„¶æ˜¯ç¨³å®šå¯é çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://static001.infoq.cn/resource/image/fd/0f/fd17db8d2165fb60009b77bd4810410f.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾ 11 Proxy æ¨¡å¼ç¤ºæ„å›¾&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ Proxy å¹¶ä¸æ˜¯ç›´æ¥åŠ å…¥åˆ°ç¬¦åˆå¼ºä¸€è‡´æ€§çš„ etcd é›†ç¾¤ä¸­ï¼Œä¹ŸåŒæ ·çš„ï¼ŒProxy å¹¶æ²¡æœ‰å¢åŠ é›†ç¾¤çš„å¯é æ€§ï¼Œå½“ç„¶ä¹Ÿæ²¡æœ‰é™ä½é›†ç¾¤çš„å†™å…¥æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h4 id=&quot;heading25&quot; data-id-_beb06e8e4252=&quot;1&quot;&gt;5.1 Proxy å–ä»£ Standby æ¨¡å¼çš„åŸå› &lt;/h4&gt;
&lt;p&gt;é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦æœ‰ Proxy æ¨¡å¼è€Œä¸æ˜¯ç›´æ¥å¢åŠ  etcd æ ¸å¿ƒèŠ‚ç‚¹å‘¢ï¼Ÿå®é™…ä¸Š etcd æ¯å¢åŠ ä¸€ä¸ªæ ¸å¿ƒèŠ‚ç‚¹ï¼ˆpeerï¼‰ï¼Œéƒ½ä¼šå¢åŠ  Leader èŠ‚ç‚¹ä¸€å®šç¨‹åº¦çš„åŒ…æ‹¬ç½‘ç»œã€CPU å’Œç£ç›˜çš„è´Ÿæ‹…ï¼Œå› ä¸ºæ¯æ¬¡ä¿¡æ¯çš„å˜åŒ–éƒ½éœ€è¦è¿›è¡ŒåŒæ­¥å¤‡ä»½ã€‚å¢åŠ  etcd çš„æ ¸å¿ƒèŠ‚ç‚¹å¯ä»¥è®©æ•´ä¸ªé›†ç¾¤å…·æœ‰æ›´é«˜çš„å¯é æ€§ï¼Œä½†æ˜¯å½“æ•°é‡è¾¾åˆ°ä¸€å®šç¨‹åº¦ä»¥åï¼Œå¢åŠ å¯é æ€§å¸¦æ¥çš„å¥½å¤„å°±å˜å¾—ä¸é‚£ä¹ˆæ˜æ˜¾ï¼Œåå€’æ˜¯é™ä½äº†é›†ç¾¤å†™å…¥åŒæ­¥çš„æ€§èƒ½ã€‚å› æ­¤ï¼Œå¢åŠ ä¸€ä¸ªè½»é‡çº§çš„ Proxy æ¨¡å¼ etcd èŠ‚ç‚¹æ˜¯å¯¹ç›´æ¥å¢åŠ  etcd æ ¸å¿ƒèŠ‚ç‚¹çš„ä¸€ä¸ªæœ‰æ•ˆä»£æ›¿ã€‚&lt;/p&gt;
&lt;p&gt;ç†Ÿæ‚‰ 0.4.6 è¿™ä¸ªæ—§ç‰ˆæœ¬ etcd çš„ç”¨æˆ·ä¼šå‘ç°ï¼ŒProxy æ¨¡å¼å®é™…ä¸Šæ˜¯å–ä»£äº†åŸå…ˆçš„ Standby æ¨¡å¼ã€‚Standby æ¨¡å¼é™¤äº†è½¬å‘ä»£ç†çš„åŠŸèƒ½ä»¥å¤–ï¼Œè¿˜ä¼šåœ¨æ ¸å¿ƒèŠ‚ç‚¹å› ä¸ºæ•…éšœå¯¼è‡´æ•°é‡ä¸è¶³çš„æ—¶å€™ï¼Œä» Standby æ¨¡å¼è½¬ä¸ºæ­£å¸¸èŠ‚ç‚¹æ¨¡å¼ã€‚è€Œå½“é‚£ä¸ªæ•…éšœçš„èŠ‚ç‚¹æ¢å¤æ—¶ï¼Œå‘ç° etcd çš„æ ¸å¿ƒèŠ‚ç‚¹æ•°é‡å·²ç»è¾¾åˆ°çš„é¢„å…ˆè®¾ç½®çš„å€¼ï¼Œå°±ä¼šè½¬ä¸º Standby æ¨¡å¼ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯æ–°ç‰ˆ etcd ä¸­ï¼Œåªä¼šåœ¨æœ€åˆå¯åŠ¨ etcd é›†ç¾¤æ—¶ï¼Œå‘ç°æ ¸å¿ƒèŠ‚ç‚¹çš„æ•°é‡å·²ç»æ»¡è¶³è¦æ±‚æ—¶ï¼Œè‡ªåŠ¨å¯ç”¨ Proxy æ¨¡å¼ï¼Œåä¹‹åˆ™å¹¶æœªå®ç°ã€‚ä¸»è¦åŸå› å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;etcd æ˜¯ç”¨æ¥ä¿è¯é«˜å¯ç”¨çš„ç»„ä»¶ï¼Œå› æ­¤å®ƒæ‰€éœ€è¦çš„ç³»ç»Ÿèµ„æºï¼ˆåŒ…æ‹¬å†…å­˜ã€ç¡¬ç›˜å’Œ CPU ç­‰ï¼‰éƒ½åº”è¯¥å¾—åˆ°å……åˆ†ä¿éšœä»¥ä¿è¯é«˜å¯ç”¨ã€‚ä»»ç”±é›†ç¾¤çš„è‡ªåŠ¨å˜æ¢éšæ„åœ°æ”¹å˜æ ¸å¿ƒèŠ‚ç‚¹ï¼Œæ— æ³•è®©æœºå™¨ä¿è¯æ€§èƒ½ã€‚æ‰€ä»¥ etcd å®˜æ–¹é¼“åŠ±å¤§å®¶åœ¨å¤§å‹é›†ç¾¤ä¸­ä¸ºè¿è¡Œ etcd å‡†å¤‡ä¸“æœ‰æœºå™¨é›†ç¾¤ã€‚&lt;/li&gt;
&lt;li&gt;å› ä¸º etcd é›†ç¾¤æ˜¯æ”¯æŒé«˜å¯ç”¨çš„ï¼Œéƒ¨åˆ†æœºå™¨æ•…éšœå¹¶ä¸ä¼šå¯¼è‡´åŠŸèƒ½å¤±æ•ˆã€‚æ‰€ä»¥æœºå™¨å‘ç”Ÿæ•…éšœæ—¶ï¼Œç®¡ç†å‘˜æœ‰å……åˆ†çš„æ—¶é—´å¯¹æœºå™¨è¿›è¡Œæ£€æŸ¥å’Œä¿®å¤ã€‚&lt;/li&gt;
&lt;li&gt;è‡ªåŠ¨è½¬æ¢ä½¿å¾— etcd é›†ç¾¤å˜å¾—å¤æ‚ï¼Œå°¤å…¶æ˜¯å¦‚ä»Š etcd æ”¯æŒå¤šç§ç½‘ç»œç¯å¢ƒçš„ç›‘å¬å’Œäº¤äº’ã€‚åœ¨ä¸åŒç½‘ç»œé—´è¿›è¡Œè½¬æ¢ï¼Œæ›´å®¹æ˜“å‘ç”Ÿé”™è¯¯ï¼Œå¯¼è‡´é›†ç¾¤ä¸ç¨³å®šã€‚&lt;/li&gt;

&lt;/ul&gt;
&lt;p&gt;åŸºäºä¸Šè¿°åŸå› ï¼Œç›®å‰ Proxy æ¨¡å¼æœ‰è½¬å‘ä»£ç†åŠŸèƒ½ï¼Œè€Œä¸ä¼šè¿›è¡Œè§’è‰²è½¬æ¢ã€‚&lt;/p&gt;
&lt;h4 id=&quot;heading26&quot; data-id-_c6345a341035=&quot;1&quot;&gt;5.2 å…³é”®éƒ¨åˆ†æºç è§£æ&lt;/h4&gt;
&lt;p&gt;ä»ä»£ç ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒProxy æ¨¡å¼çš„æœ¬è´¨å°±æ˜¯èµ·ä¸€ä¸ª HTTP ä»£ç†æœåŠ¡å™¨ï¼ŒæŠŠå®¢æˆ·å‘åˆ°è¿™ä¸ªæœåŠ¡å™¨çš„è¯·æ±‚è½¬å‘ç»™åˆ«çš„ etcd èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;etcd ç›®å‰æ”¯æŒè¯»å†™çš†å¯å’Œåªè¯»ä¸¤ç§æ¨¡å¼ã€‚é»˜è®¤æƒ…å†µä¸‹æ˜¯è¯»å†™çš†å¯ï¼Œå°±æ˜¯æŠŠè¯»ã€å†™ä¸¤ç§è¯·æ±‚éƒ½è¿›è¡Œè½¬å‘ã€‚è€Œåªè¯»æ¨¡å¼åªè½¬å‘è¯»çš„è¯·æ±‚ï¼Œå¯¹æ‰€æœ‰å…¶ä»–è¯·æ±‚è¿”å› 501 é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œé™¤äº†å¯åŠ¨è¿‡ç¨‹ä¸­å› ä¸ºè®¾ç½®äº†&lt;code&gt;proxy&lt;/code&gt;å‚æ•°ä¼šä½œä¸º Proxy æ¨¡å¼å¯åŠ¨ã€‚åœ¨ etcd é›†ç¾¤åŒ–å¯åŠ¨æ—¶ï¼ŒèŠ‚ç‚¹æ³¨å†Œè‡ªèº«çš„æ—¶å€™ç›‘æµ‹åˆ°é›†ç¾¤çš„å®é™…èŠ‚ç‚¹æ•°é‡å·²ç»ç¬¦åˆè¦æ±‚ï¼Œé‚£ä¹ˆå°±ä¼šé€€åŒ–ä¸º Proxy æ¨¡å¼ã€‚&lt;/p&gt;
&lt;h3 id=&quot;heading27&quot; data-id-_98db346be8d1=&quot;1&quot;&gt;6 æ•°æ®å­˜å‚¨&lt;/h3&gt;
&lt;p&gt;etcd çš„å­˜å‚¨åˆ†ä¸ºå†…å­˜å­˜å‚¨å’ŒæŒä¹…åŒ–ï¼ˆç¡¬ç›˜ï¼‰å­˜å‚¨ä¸¤éƒ¨åˆ†ï¼Œå†…å­˜ä¸­çš„å­˜å‚¨é™¤äº†é¡ºåºåŒ–çš„è®°å½•ä¸‹æ‰€æœ‰ç”¨æˆ·å¯¹èŠ‚ç‚¹æ•°æ®å˜æ›´çš„è®°å½•å¤–ï¼Œè¿˜ä¼šå¯¹ç”¨æˆ·æ•°æ®è¿›è¡Œç´¢å¼•ã€å»ºå †ç­‰æ–¹ä¾¿æŸ¥è¯¢çš„æ“ä½œã€‚è€ŒæŒä¹…åŒ–åˆ™ä½¿ç”¨é¢„å†™å¼æ—¥å¿—ï¼ˆWALï¼šWrite Ahead Logï¼‰è¿›è¡Œè®°å½•å­˜å‚¨ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ WAL çš„ä½“ç³»ä¸­ï¼Œæ‰€æœ‰çš„æ•°æ®åœ¨æäº¤ä¹‹å‰éƒ½ä¼šè¿›è¡Œæ—¥å¿—è®°å½•ã€‚åœ¨ etcd çš„æŒä¹…åŒ–å­˜å‚¨ç›®å½•ä¸­ï¼Œæœ‰ä¸¤ä¸ªå­ç›®å½•ã€‚ä¸€ä¸ªæ˜¯ WALï¼Œå­˜å‚¨ç€æ‰€æœ‰äº‹åŠ¡çš„å˜åŒ–è®°å½•ï¼›å¦ä¸€ä¸ªåˆ™æ˜¯ snapshotï¼Œç”¨äºå­˜å‚¨æŸä¸€ä¸ªæ—¶åˆ» etcd æ‰€æœ‰ç›®å½•çš„æ•°æ®ã€‚é€šè¿‡ WAL å’Œ snapshot ç›¸ç»“åˆçš„æ–¹å¼ï¼Œetcd å¯ä»¥æœ‰æ•ˆçš„è¿›è¡Œæ•°æ®å­˜å‚¨å’ŒèŠ‚ç‚¹æ•…éšœæ¢å¤ç­‰æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;æ—¢ç„¶æœ‰äº† WAL å®æ—¶å­˜å‚¨äº†æ‰€æœ‰çš„å˜æ›´ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦ snapshot å‘¢ï¼Ÿéšç€ä½¿ç”¨é‡çš„å¢åŠ ï¼ŒWAL å­˜å‚¨çš„æ•°æ®ä¼šæš´å¢ï¼Œä¸ºäº†é˜²æ­¢ç£ç›˜å¾ˆå¿«å°±çˆ†æ»¡ï¼Œetcd é»˜è®¤æ¯ 10000 æ¡è®°å½•åšä¸€æ¬¡ snapshotï¼Œç»è¿‡ snapshot ä»¥åçš„ WAL æ–‡ä»¶å°±å¯ä»¥åˆ é™¤ã€‚è€Œé€šè¿‡ API å¯ä»¥æŸ¥è¯¢çš„å†å² etcd æ“ä½œé»˜è®¤ä¸º 1000 æ¡ã€‚&lt;/p&gt;
&lt;p&gt;é¦–æ¬¡å¯åŠ¨æ—¶ï¼Œetcd ä¼šæŠŠå¯åŠ¨çš„é…ç½®ä¿¡æ¯å­˜å‚¨åˆ°&lt;code&gt;data-dir&lt;/code&gt;å‚æ•°æŒ‡å®šçš„æ•°æ®ç›®å½•ä¸­ã€‚é…ç½®ä¿¡æ¯åŒ…æ‹¬æœ¬åœ°èŠ‚ç‚¹çš„ IDã€é›†ç¾¤ ID å’Œåˆå§‹æ—¶é›†ç¾¤ä¿¡æ¯ã€‚ç”¨æˆ·éœ€è¦é¿å… etcd ä»ä¸€ä¸ªè¿‡æœŸçš„æ•°æ®ç›®å½•ä¸­é‡æ–°å¯åŠ¨ï¼Œå› ä¸ºä½¿ç”¨è¿‡æœŸçš„æ•°æ®ç›®å½•å¯åŠ¨çš„èŠ‚ç‚¹ä¼šä¸é›†ç¾¤ä¸­çš„å…¶ä»–èŠ‚ç‚¹äº§ç”Ÿä¸ä¸€è‡´ï¼ˆå¦‚ï¼šä¹‹å‰å·²ç»è®°å½•å¹¶åŒæ„ Leader èŠ‚ç‚¹å­˜å‚¨æŸä¸ªä¿¡æ¯ï¼Œé‡å¯ååˆå‘ Leader èŠ‚ç‚¹ç”³è¯·è¿™ä¸ªä¿¡æ¯ï¼‰ã€‚æ‰€ä»¥ï¼Œä¸ºäº†æœ€å¤§åŒ–é›†ç¾¤çš„å®‰å…¨æ€§ï¼Œä¸€æ—¦æœ‰ä»»ä½•æ•°æ®æŸåæˆ–ä¸¢å¤±çš„å¯èƒ½æ€§ï¼Œä½ å°±åº”è¯¥æŠŠè¿™ä¸ªèŠ‚ç‚¹ä»é›†ç¾¤ä¸­ç§»é™¤ï¼Œç„¶ååŠ å…¥ä¸€ä¸ªä¸å¸¦æ•°æ®ç›®å½•çš„æ–°èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;h4 id=&quot;heading28&quot; data-id-_718ba3ca2bb8=&quot;1&quot;&gt;6.1 é¢„å†™å¼æ—¥å¿—ï¼ˆWALï¼‰&lt;/h4&gt;
&lt;p&gt;WALï¼ˆWrite Ahead Logï¼‰æœ€å¤§çš„ä½œç”¨æ˜¯è®°å½•äº†æ•´ä¸ªæ•°æ®å˜åŒ–çš„å…¨éƒ¨å†ç¨‹ã€‚åœ¨ etcd ä¸­ï¼Œæ‰€æœ‰æ•°æ®çš„ä¿®æ”¹åœ¨æäº¤å‰ï¼Œéƒ½è¦å…ˆå†™å…¥åˆ° WAL ä¸­ã€‚ä½¿ç”¨ WAL è¿›è¡Œæ•°æ®çš„å­˜å‚¨ä½¿å¾— etcd æ‹¥æœ‰ä¸¤ä¸ªé‡è¦åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ•…éšœå¿«é€Ÿæ¢å¤ï¼š å½“ä½ çš„æ•°æ®é­åˆ°ç ´åæ—¶ï¼Œå°±å¯ä»¥é€šè¿‡æ‰§è¡Œæ‰€æœ‰ WAL ä¸­è®°å½•çš„ä¿®æ”¹æ“ä½œï¼Œå¿«é€Ÿä»æœ€åŸå§‹çš„æ•°æ®æ¢å¤åˆ°æ•°æ®æŸåå‰çš„çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;æ•°æ®å›æ»šï¼ˆundoï¼‰/ é‡åšï¼ˆredoï¼‰ï¼šå› ä¸ºæ‰€æœ‰çš„ä¿®æ”¹æ“ä½œéƒ½è¢«è®°å½•åœ¨ WAL ä¸­ï¼Œéœ€è¦å›æ»šæˆ–é‡åšï¼Œåªéœ€è¦æ–¹å‘æˆ–æ­£å‘æ‰§è¡Œæ—¥å¿—ä¸­çš„æ“ä½œå³å¯ã€‚&lt;/li&gt;

&lt;/ul&gt;
&lt;h4 id=&quot;heading29&quot; data-id-_3babebda5b98=&quot;1&quot;&gt;WAL ä¸ snapshot åœ¨ etcd ä¸­çš„å‘½åè§„åˆ™&lt;/h4&gt;
&lt;p&gt;åœ¨ etcd çš„æ•°æ®ç›®å½•ä¸­ï¼ŒWAL æ–‡ä»¶ä»¥&lt;code&gt;$seq-$index.wal&lt;/code&gt;çš„æ ¼å¼å­˜å‚¨ã€‚æœ€åˆå§‹çš„ WAL æ–‡ä»¶æ˜¯&lt;code&gt;0000000000000000-0000000000000000.wal&lt;/code&gt;ï¼Œè¡¨ç¤ºæ˜¯æ‰€æœ‰ WAL æ–‡ä»¶ä¸­çš„ç¬¬ 0 ä¸ªï¼Œåˆå§‹çš„ Raft çŠ¶æ€ç¼–å·ä¸º 0ã€‚è¿è¡Œä¸€æ®µæ—¶é—´åå¯èƒ½éœ€è¦è¿›è¡Œæ—¥å¿—åˆ‡åˆ†ï¼ŒæŠŠæ–°çš„æ¡ç›®æ”¾åˆ°ä¸€ä¸ªæ–°çš„ WAL æ–‡ä»¶ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾ï¼Œå½“é›†ç¾¤è¿è¡Œåˆ° Raft çŠ¶æ€ä¸º 20 æ—¶ï¼Œéœ€è¦è¿›è¡Œ WAL æ–‡ä»¶çš„åˆ‡åˆ†æ—¶ï¼Œä¸‹ä¸€ä»½ WAL æ–‡ä»¶å°±ä¼šå˜ä¸º&lt;code&gt;0000000000000001-0000000000000021.wal&lt;/code&gt;ã€‚å¦‚æœåœ¨ 10 æ¬¡æ“ä½œååˆè¿›è¡Œäº†ä¸€æ¬¡æ—¥å¿—åˆ‡åˆ†ï¼Œé‚£ä¹ˆåä¸€æ¬¡çš„ WAL æ–‡ä»¶åä¼šå˜ä¸º&lt;code&gt;0000000000000002-0000000000000031.wal&lt;/code&gt;ã€‚å¯ä»¥çœ‹åˆ°&lt;code&gt;-&lt;/code&gt;ç¬¦å·å‰é¢çš„æ•°å­—æ˜¯æ¯æ¬¡åˆ‡åˆ†åè‡ªå¢ 1ï¼Œè€Œ&lt;code&gt;-&lt;/code&gt;ç¬¦å·åé¢çš„æ•°å­—åˆ™æ˜¯æ ¹æ®å®é™…å­˜å‚¨çš„ Raft èµ·å§‹çŠ¶æ€æ¥å®šã€‚&lt;/p&gt;
&lt;p&gt;snapshot çš„å­˜å‚¨å‘½ååˆ™æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œä»¥&lt;code&gt;$term-$index.wal&lt;/code&gt;æ ¼å¼è¿›è¡Œå‘½åå­˜å‚¨ã€‚term å’Œ index å°±è¡¨ç¤ºå­˜å‚¨ snapshot æ—¶æ•°æ®æ‰€åœ¨çš„ raft èŠ‚ç‚¹çŠ¶æ€ï¼Œå½“å‰çš„ä»»æœŸç¼–å·ä»¥åŠæ•°æ®é¡¹ä½ç½®ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h4 id=&quot;heading30&quot; data-id-_b8848329893c=&quot;1&quot;&gt;6.2 å…³é”®éƒ¨åˆ†æºç è§£æ&lt;/h4&gt;
&lt;p&gt;ä»ä»£ç é€»è¾‘ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒWAL æœ‰ä¸¤ç§æ¨¡å¼ï¼Œè¯»æ¨¡å¼ï¼ˆreadï¼‰å’Œæ•°æ®æ·»åŠ ï¼ˆappendï¼‰æ¨¡å¼ï¼Œä¸¤ç§æ¨¡å¼ä¸èƒ½åŒæ—¶æˆç«‹ã€‚ä¸€ä¸ªæ–°åˆ›å»ºçš„ WAL æ–‡ä»¶å¤„äº append æ¨¡å¼ï¼Œå¹¶ä¸”ä¸ä¼šè¿›å…¥åˆ° read æ¨¡å¼ã€‚ä¸€ä¸ªæœ¬æ¥å­˜åœ¨çš„ WAL æ–‡ä»¶è¢«æ‰“å¼€çš„æ—¶å€™å¿…ç„¶æ˜¯ read æ¨¡å¼ï¼Œå¹¶ä¸”åªæœ‰åœ¨æ‰€æœ‰è®°å½•éƒ½è¢«è¯»å®Œçš„æ—¶å€™ï¼Œæ‰èƒ½è¿›å…¥ append æ¨¡å¼ï¼Œè¿›å…¥ append æ¨¡å¼åä¹Ÿä¸ä¼šå†è¿›å…¥ read æ¨¡å¼ã€‚è¿™æ ·åšæœ‰åŠ©äºä¿è¯æ•°æ®çš„å®Œæ•´ä¸å‡†ç¡®ã€‚&lt;/p&gt;
&lt;p&gt;é›†ç¾¤åœ¨è¿›å…¥åˆ°&lt;code&gt;etcdserver/server.go&lt;/code&gt;çš„&lt;code&gt;NewServer&lt;/code&gt;å‡½æ•°å‡†å¤‡å¯åŠ¨ä¸€ä¸ª etcd èŠ‚ç‚¹æ—¶ï¼Œä¼šæ£€æµ‹æ˜¯å¦å­˜åœ¨ä»¥å‰çš„é—ç•™ WAL æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;æ£€æµ‹çš„ç¬¬ä¸€æ­¥æ˜¯æŸ¥çœ‹ snapshot æ–‡ä»¶å¤¹ä¸‹æ˜¯å¦æœ‰ç¬¦åˆè§„èŒƒçš„æ–‡ä»¶ï¼Œè‹¥æ£€æµ‹åˆ° snapshot æ ¼å¼æ˜¯ v0.4 çš„ï¼Œåˆ™è°ƒç”¨å‡½æ•°å‡çº§åˆ° v0.5ã€‚ä» snapshot ä¸­è·å¾—é›†ç¾¤çš„é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ tokenã€å…¶ä»–èŠ‚ç‚¹çš„ä¿¡æ¯ç­‰ç­‰ï¼Œç„¶åè½½å…¥ WAL ç›®å½•çš„å†…å®¹ï¼Œä»å°åˆ°å¤§è¿›è¡Œæ’åºã€‚æ ¹æ® snapshot ä¸­å¾—åˆ°çš„ term å’Œ indexï¼Œæ‰¾åˆ° WAL ç´§æ¥ç€ snapshot ä¸‹ä¸€æ¡çš„è®°å½•ï¼Œç„¶åå‘åæ›´æ–°ï¼Œç›´åˆ°æ‰€æœ‰ WAL åŒ…çš„ entry éƒ½å·²ç»éå†å®Œæ¯•ï¼ŒEntry è®°å½•åˆ° ents å˜é‡ä¸­å­˜å‚¨åœ¨å†…å­˜é‡Œã€‚æ­¤æ—¶ WAL å°±è¿›å…¥ append æ¨¡å¼ï¼Œä¸ºæ•°æ®é¡¹æ·»åŠ è¿›è¡Œå‡†å¤‡ã€‚&lt;/p&gt;
&lt;p&gt;å½“ WAL æ–‡ä»¶ä¸­æ•°æ®é¡¹å†…å®¹è¿‡å¤§è¾¾åˆ°è®¾å®šå€¼ï¼ˆé»˜è®¤ä¸º 10000ï¼‰æ—¶ï¼Œä¼šè¿›è¡Œ WAL çš„åˆ‡åˆ†ï¼ŒåŒæ—¶è¿›è¡Œ snapshot æ“ä½œã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥åœ¨&lt;code&gt;etcdserver/server.go&lt;/code&gt;çš„&lt;code&gt;snapshot&lt;/code&gt;å‡½æ•°ä¸­çœ‹åˆ°ã€‚æ‰€ä»¥ï¼Œå®é™…ä¸Šæ•°æ®ç›®å½•ä¸­æœ‰ç”¨çš„ snapshot å’Œ WAL æ–‡ä»¶å„åªæœ‰ä¸€ä¸ªï¼Œé»˜è®¤æƒ…å†µä¸‹ etcd ä¼šå„ä¿ç•™ 5 ä¸ªå†å²æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;h3 id=&quot;heading31&quot; data-id-_cde55fa46139=&quot;1&quot;&gt;7 Raft&lt;/h3&gt;
&lt;p&gt;æ–°ç‰ˆ etcd ä¸­ï¼Œraft åŒ…å°±æ˜¯å¯¹ Raft ä¸€è‡´æ€§ç®—æ³•çš„å…·ä½“å®ç°ã€‚å…³äº Raft ç®—æ³•çš„è®²è§£ï¼Œç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šæ–‡ç« ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥å»é˜…è¯»ä¸€ä¸‹&lt;a href=&quot;https://ramcloud.stanford.edu/raft.pdf&quot; rel=&quot;noopener nofollow&quot; target=&quot;_blank&quot;&gt;Â Raft ç®—æ³•è®ºæ–‡&lt;/a&gt;éå¸¸ç²¾å½©ã€‚æœ¬æ–‡åˆ™ä¸å†å¯¹ Raft ç®—æ³•è¿›è¡Œè¯¦ç»†æè¿°ï¼Œè€Œæ˜¯ç»“åˆ etcdï¼Œé’ˆå¯¹ç®—æ³•ä¸­ä¸€äº›å…³é”®å†…å®¹ä»¥é—®ç­”çš„å½¢å¼è¿›è¡Œè®²è§£ã€‚æœ‰å…³ Raft ç®—æ³•çš„æœ¯è¯­å¦‚æœä¸ç†è§£ï¼Œå¯ä»¥å‚è§æ¦‚å¿µè¯æ±‡è¡¨ä¸€èŠ‚ã€‚&lt;/p&gt;
&lt;h4 id=&quot;heading32&quot; data-id-_076e14740b6e=&quot;1&quot;&gt;7.1 Raft å¸¸è§é—®ç­”ä¸€è§ˆ&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Raft ä¸­ä¸€ä¸ª Termï¼ˆä»»æœŸï¼‰æ˜¯ä»€ä¹ˆæ„æ€ï¼ŸÂ Raft ç®—æ³•ä¸­ï¼Œä»æ—¶é—´ä¸Šï¼Œä¸€ä¸ªä»»æœŸè®²å³ä»ä¸€æ¬¡ç«é€‰å¼€å§‹åˆ°ä¸‹ä¸€æ¬¡ç«é€‰å¼€å§‹ã€‚ä»åŠŸèƒ½ä¸Šè®²ï¼Œå¦‚æœ Follower æ¥æ”¶ä¸åˆ° Leader èŠ‚ç‚¹çš„å¿ƒè·³ä¿¡æ¯ï¼Œå°±ä¼šç»“æŸå½“å‰ä»»æœŸï¼Œå˜ä¸º Candidate å‘èµ·ç«é€‰ï¼Œæœ‰åŠ©äº Leader èŠ‚ç‚¹æ•…éšœæ—¶é›†ç¾¤çš„æ¢å¤ã€‚å‘èµ·ç«é€‰æŠ•ç¥¨æ—¶ï¼Œä»»æœŸå€¼å°çš„èŠ‚ç‚¹ä¸ä¼šç«é€‰æˆåŠŸã€‚å¦‚æœé›†ç¾¤ä¸å‡ºç°æ•…éšœï¼Œé‚£ä¹ˆä¸€ä¸ªä»»æœŸå°†æ— é™å»¶ç»­ä¸‹å»ã€‚è€ŒæŠ•ç¥¨å‡ºç°å†²çªä¹Ÿæœ‰å¯èƒ½ç›´æ¥è¿›å…¥ä¸‹ä¸€ä»»å†æ¬¡ç«é€‰ã€‚&lt;img src=&quot;https://static001.infoq.cn/resource/image/74/e0/740e703fb347a074addb3be1e10d33e0.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾ 12 Term ç¤ºæ„å›¾&lt;/p&gt;

&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Raft çŠ¶æ€æœºæ˜¯æ€æ ·åˆ‡æ¢çš„ï¼ŸÂ Raft åˆšå¼€å§‹è¿è¡Œæ—¶ï¼ŒèŠ‚ç‚¹é»˜è®¤è¿›å…¥ Follower çŠ¶æ€ï¼Œç­‰å¾… Leader å‘æ¥å¿ƒè·³ä¿¡æ¯ã€‚è‹¥ç­‰å¾…è¶…æ—¶ï¼Œåˆ™çŠ¶æ€ç”± Follower åˆ‡æ¢åˆ° Candidate è¿›å…¥ä¸‹ä¸€è½® term å‘èµ·ç«é€‰ï¼Œç­‰åˆ°æ”¶åˆ°é›†ç¾¤å¤šæ•°èŠ‚ç‚¹çš„æŠ•ç¥¨æ—¶ï¼Œè¯¥èŠ‚ç‚¹è½¬å˜ä¸º Leaderã€‚Leader èŠ‚ç‚¹æœ‰å¯èƒ½å‡ºç°ç½‘ç»œç­‰æ•…éšœï¼Œå¯¼è‡´åˆ«çš„èŠ‚ç‚¹å‘èµ·æŠ•ç¥¨æˆä¸ºæ–° term çš„ Leaderï¼Œæ­¤æ—¶åŸå…ˆçš„è€ Leader èŠ‚ç‚¹ä¼šåˆ‡æ¢ä¸º Followerã€‚Candidate åœ¨ç­‰å¾…å…¶å®ƒèŠ‚ç‚¹æŠ•ç¥¨çš„è¿‡ç¨‹ä¸­å¦‚æœå‘ç°åˆ«çš„èŠ‚ç‚¹å·²ç»ç«é€‰æˆåŠŸæˆä¸º Leader äº†ï¼Œä¹Ÿä¼šåˆ‡æ¢ä¸º Follower èŠ‚ç‚¹ã€‚&lt;img src=&quot;https://static001.infoq.cn/resource/image/16/3b/167e2a4f72b05a18425e7ab3baf7a03b.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾ 13 Raft çŠ¶æ€æœº&lt;/p&gt;

&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚ä½•ä¿è¯æœ€çŸ­æ—¶é—´å†…ç«é€‰å‡º Leaderï¼Œé˜²æ­¢ç«é€‰å†²çªï¼ŸÂ åœ¨ Raft çŠ¶æ€æœºä¸€å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ Candidate çŠ¶æ€ä¸‹ï¼Œ æœ‰ä¸€ä¸ª times outï¼Œè¿™é‡Œçš„ times out æ—¶é—´æ˜¯ä¸ªéšæœºå€¼ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯ä¸ªæœºå™¨æˆä¸º Candidate ä»¥åï¼Œè¶…æ—¶å‘èµ·æ–°ä¸€è½®ç«é€‰çš„æ—¶é—´æ˜¯å„ä¸ç›¸åŒçš„ï¼Œè¿™å°±ä¼šå‡ºç°ä¸€ä¸ªæ—¶é—´å·®ã€‚åœ¨æ—¶é—´å·®å†…ï¼Œå¦‚æœ Candidate1 æ”¶åˆ°çš„ç«é€‰ä¿¡æ¯æ¯”è‡ªå·±å‘èµ·çš„ç«é€‰ä¿¡æ¯ term å€¼å¤§ï¼ˆå³å¯¹æ–¹ä¸ºæ–°ä¸€è½® termï¼‰ï¼Œå¹¶ä¸”æ–°ä¸€è½®æƒ³è¦æˆä¸º Leader çš„ Candidate2 åŒ…å«äº†æ‰€æœ‰æäº¤çš„æ•°æ®ï¼Œé‚£ä¹ˆ Candidate1 å°±ä¼šæŠ•ç¥¨ç»™ Candidate2ã€‚è¿™æ ·å°±ä¿è¯äº†åªæœ‰å¾ˆå°çš„æ¦‚ç‡ä¼šå‡ºç°ç«é€‰å†²çªã€‚&lt;/p&gt;

&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚ä½•é˜²æ­¢åˆ«çš„ Candidate åœ¨é—æ¼éƒ¨åˆ†æ•°æ®çš„æƒ…å†µä¸‹å‘èµ·æŠ•ç¥¨æˆä¸º Leaderï¼ŸÂ Raft ç«é€‰çš„æœºåˆ¶ä¸­ï¼Œä½¿ç”¨éšæœºå€¼å†³å®šè¶…æ—¶æ—¶é—´ï¼Œç¬¬ä¸€ä¸ªè¶…æ—¶çš„èŠ‚ç‚¹å°±ä¼šæå‡ term ç¼–å·å‘èµ·æ–°ä¸€è½®æŠ•ç¥¨ï¼Œä¸€èˆ¬æƒ…å†µä¸‹åˆ«çš„èŠ‚ç‚¹æ”¶åˆ°ç«é€‰é€šçŸ¥å°±ä¼šæŠ•ç¥¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœå‘èµ·ç«é€‰çš„èŠ‚ç‚¹åœ¨ä¸Šä¸€ä¸ª term ä¸­ä¿å­˜çš„å·²æäº¤æ•°æ®ä¸å®Œæ•´ï¼ŒèŠ‚ç‚¹å°±ä¼šæ‹’ç»æŠ•ç¥¨ç»™å®ƒã€‚é€šè¿‡è¿™ç§æœºåˆ¶å°±å¯ä»¥é˜²æ­¢é—æ¼æ•°æ®çš„èŠ‚ç‚¹æˆä¸º Leaderã€‚&lt;/p&gt;

&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Raft æŸä¸ªèŠ‚ç‚¹å®•æœºåä¼šå¦‚ä½•ï¼ŸÂ é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœæ˜¯ Follower èŠ‚ç‚¹å®•æœºï¼Œå¦‚æœå‰©ä½™å¯ç”¨èŠ‚ç‚¹æ•°é‡è¶…è¿‡åŠæ•°ï¼Œé›†ç¾¤å¯ä»¥å‡ ä¹æ²¡æœ‰å½±å“çš„æ­£å¸¸å·¥ä½œã€‚å¦‚æœæ˜¯ Leader èŠ‚ç‚¹å®•æœºï¼Œé‚£ä¹ˆ Follower å°±æ”¶ä¸åˆ°å¿ƒè·³è€Œè¶…æ—¶ï¼Œå‘èµ·ç«é€‰è·å¾—æŠ•ç¥¨ï¼Œæˆä¸ºæ–°ä¸€è½® term çš„ Leaderï¼Œç»§ç»­ä¸ºé›†ç¾¤æä¾›æœåŠ¡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼›etcd ç›®å‰æ²¡æœ‰ä»»ä½•æœºåˆ¶ä¼šè‡ªåŠ¨å»å˜åŒ–æ•´ä¸ªé›†ç¾¤æ€»å…±çš„èŠ‚ç‚¹æ•°é‡ï¼Œå³å¦‚æœæ²¡æœ‰äººä¸ºçš„è°ƒç”¨ APIï¼Œetcd å®•æœºåçš„èŠ‚ç‚¹ä»ç„¶è¢«è®¡ç®—ä¸ºæ€»èŠ‚ç‚¹æ•°ä¸­ï¼Œä»»ä½•è¯·æ±‚è¢«ç¡®è®¤éœ€è¦è·å¾—çš„æŠ•ç¥¨æ•°éƒ½æ˜¯è¿™ä¸ªæ€»æ•°çš„åŠæ•°ä»¥ä¸Šã€‚&lt;img src=&quot;https://static001.infoq.cn/resource/image/6c/59/6c0d225b6ab0cbb4a89afd4b12de0c59.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å›¾ 14 èŠ‚ç‚¹å®•æœº&lt;/p&gt;

&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆ Raft ç®—æ³•åœ¨ç¡®å®šå¯ç”¨èŠ‚ç‚¹æ•°é‡æ—¶ä¸éœ€è¦è€ƒè™‘æ‹œå åº­å°†å†›é—®é¢˜ï¼ŸÂ æ‹œå åº­é—®é¢˜ä¸­æå‡ºï¼Œå…è®¸ n ä¸ªèŠ‚ç‚¹å®•æœºè¿˜èƒ½æä¾›æ­£å¸¸æœåŠ¡çš„åˆ†å¸ƒå¼æ¶æ„ï¼Œéœ€è¦çš„æ€»èŠ‚ç‚¹æ•°é‡ä¸º 3n+1ï¼Œè€Œ Raft åªéœ€è¦ 2n+1 å°±å¯ä»¥äº†ã€‚å…¶ä¸»è¦åŸå› åœ¨äºï¼Œæ‹œå åº­å°†å†›é—®é¢˜ä¸­å­˜åœ¨æ•°æ®æ¬ºéª—çš„ç°è±¡ï¼Œè€Œ etcd ä¸­å‡è®¾æ‰€æœ‰çš„èŠ‚ç‚¹éƒ½æ˜¯è¯šå®çš„ã€‚etcd åœ¨ç«é€‰å‰éœ€è¦å‘Šè¯‰åˆ«çš„èŠ‚ç‚¹è‡ªèº«çš„ term ç¼–å·ä»¥åŠå‰ä¸€è½® term æœ€ç»ˆç»“æŸæ—¶çš„ index å€¼ï¼Œè¿™äº›æ•°æ®éƒ½æ˜¯å‡†ç¡®çš„ï¼Œå…¶ä»–èŠ‚ç‚¹å¯ä»¥æ ¹æ®è¿™äº›å€¼å†³å®šæ˜¯å¦æŠ•ç¥¨ã€‚å¦å¤–ï¼Œetcd ä¸¥æ ¼é™åˆ¶ Leader åˆ° Follower è¿™æ ·çš„æ•°æ®æµå‘ä¿è¯æ•°æ®ä¸€è‡´ä¸ä¼šå‡ºé”™ã€‚&lt;/p&gt;

&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”¨æˆ·ä»é›†ç¾¤ä¸­å“ªä¸ªèŠ‚ç‚¹è¯»å†™æ•°æ®ï¼ŸÂ Raft ä¸ºäº†ä¿è¯æ•°æ®çš„å¼ºä¸€è‡´æ€§ï¼Œæ‰€æœ‰çš„æ•°æ®æµå‘éƒ½æ˜¯ä¸€ä¸ªæ–¹å‘ï¼Œä» Leader æµå‘ Followerï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰ Follower çš„æ•°æ®å¿…é¡»ä¸ Leader ä¿æŒä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´ä¼šè¢«è¦†ç›–ã€‚å³æ‰€æœ‰ç”¨æˆ·æ›´æ–°æ•°æ®çš„è¯·æ±‚éƒ½æœ€å…ˆç”± Leader è·å¾—ï¼Œç„¶åå­˜ä¸‹æ¥é€šçŸ¥å…¶ä»–èŠ‚ç‚¹ä¹Ÿå­˜ä¸‹æ¥ï¼Œç­‰åˆ°å¤§å¤šæ•°èŠ‚ç‚¹åé¦ˆæ—¶å†æŠŠæ•°æ®æäº¤ã€‚ä¸€ä¸ªå·²æäº¤çš„æ•°æ®é¡¹æ‰æ˜¯ Raft çœŸæ­£ç¨³å®šå­˜å‚¨ä¸‹æ¥çš„æ•°æ®é¡¹ï¼Œä¸å†è¢«ä¿®æ”¹ï¼Œæœ€åå†æŠŠæäº¤çš„æ•°æ®åŒæ­¥ç»™å…¶ä»– Followerã€‚å› ä¸ºæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ Raft å·²æäº¤æ•°æ®å‡†ç¡®çš„å¤‡ä»½ï¼ˆæœ€åçš„æƒ…å†µä¹Ÿåªæ˜¯å·²æäº¤æ•°æ®è¿˜æœªå®Œå…¨åŒæ­¥ï¼‰ï¼Œæ‰€ä»¥è¯»çš„è¯·æ±‚ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹éƒ½å¯ä»¥å¤„ç†ã€‚&lt;/p&gt;

&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;etcd å®ç°çš„ Raft ç®—æ³•æ€§èƒ½å¦‚ä½•ï¼ŸÂ å•å®ä¾‹èŠ‚ç‚¹æ”¯æŒæ¯ç§’ 1000 æ¬¡æ•°æ®å†™å…¥ã€‚èŠ‚ç‚¹è¶Šå¤šï¼Œç”±äºæ•°æ®åŒæ­¥æ¶‰åŠåˆ°ç½‘ç»œå»¶è¿Ÿï¼Œä¼šæ ¹æ®å®é™…æƒ…å†µè¶Šæ¥è¶Šæ…¢ï¼Œè€Œè¯»æ€§èƒ½ä¼šéšä¹‹å˜å¼ºï¼Œå› ä¸ºæ¯ä¸ªèŠ‚ç‚¹éƒ½èƒ½å¤„ç†ç”¨æˆ·è¯·æ±‚ã€‚&lt;/p&gt;

&lt;/li&gt;

&lt;/ul&gt;
&lt;h4 id=&quot;heading33&quot; data-id-_48853afd60f6=&quot;1&quot;&gt;7.2 å…³é”®éƒ¨åˆ†æºç è§£æ&lt;/h4&gt;
&lt;p&gt;åœ¨ etcd ä»£ç ä¸­ï¼ŒNode ä½œä¸º Raft çŠ¶æ€æœºçš„å…·ä½“å®ç°ï¼Œæ˜¯æ•´ä¸ªç®—æ³•çš„å…³é”®ï¼Œä¹Ÿæ˜¯äº†è§£ç®—æ³•çš„å…¥å£ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ etcd ä¸­ï¼Œå¯¹ Raft ç®—æ³•çš„è°ƒç”¨å¦‚ä¸‹ï¼Œä½ å¯ä»¥åœ¨&lt;code&gt;etcdserver/raft.go&lt;/code&gt;ä¸­çš„&lt;code&gt;startNode&lt;/code&gt;æ‰¾åˆ°ï¼š&lt;/p&gt;

&lt;table class=&quot;hljs-ln&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;storage := raft.NewMemoryStorage()&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;n := raft.StartNode(&lt;span class=&quot;hljs-number&quot;&gt;0x01, []&lt;span class=&quot;hljs-built_in&quot;&gt;int64{&lt;span class=&quot;hljs-number&quot;&gt;0x02, &lt;span class=&quot;hljs-number&quot;&gt;0x03}, &lt;span class=&quot;hljs-number&quot;&gt;3, &lt;span class=&quot;hljs-number&quot;&gt;1, storage)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;

&lt;/tbody&gt;

&lt;/table&gt;
&lt;p&gt;é€šè¿‡è¿™æ®µä»£ç å¯ä»¥äº†è§£åˆ°ï¼ŒRaft åœ¨è¿è¡Œè¿‡ç¨‹è®°å½•æ•°æ®å’ŒçŠ¶æ€éƒ½æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œä»£ç ä¸­&lt;code&gt;raft.StartNode&lt;/code&gt;å¯åŠ¨çš„ Node å°±æ˜¯ Raft çŠ¶æ€æœº Nodeã€‚å¯åŠ¨äº†ä¸€ä¸ª Node èŠ‚ç‚¹åï¼ŒRaft ä¼šåšå¦‚ä¸‹äº‹é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œä½ éœ€è¦æŠŠä»é›†ç¾¤çš„å…¶ä»–æœºå™¨ä¸Šæ”¶åˆ°çš„ä¿¡æ¯æ¨é€åˆ° Node èŠ‚ç‚¹ï¼Œä½ å¯ä»¥åœ¨&lt;code&gt;etcdserver/server.go&lt;/code&gt;ä¸­çš„&lt;code&gt;Process&lt;/code&gt;å‡½æ•°çœ‹åˆ°ã€‚&lt;/p&gt;

&lt;table class=&quot;hljs-ln&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;func (s *EtcdServer) &lt;span class=&quot;hljs-constructor&quot;&gt;Process(&lt;span class=&quot;hljs-params&quot;&gt;ctx &lt;span class=&quot;hljs-params&quot;&gt;context.Context, &lt;span class=&quot;hljs-params&quot;&gt;m &lt;span class=&quot;hljs-params&quot;&gt;raftpb.Message) error {&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;if m.Type&lt;span class=&quot;hljs-operator&quot;&gt; == raftpb.MsgApp {&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;s.stats.&lt;span class=&quot;hljs-constructor&quot;&gt;RecvAppendReq(&lt;span class=&quot;hljs-params&quot;&gt;types.ID(&lt;span class=&quot;hljs-params&quot;&gt;m.From).&lt;span class=&quot;hljs-constructor&quot;&gt;String(), m.&lt;span class=&quot;hljs-constructor&quot;&gt;Size())&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;}&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;return s.node.&lt;span class=&quot;hljs-constructor&quot;&gt;Step(&lt;span class=&quot;hljs-params&quot;&gt;ctx, &lt;span class=&quot;hljs-params&quot;&gt;m)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;}&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;

&lt;/tbody&gt;

&lt;/table&gt;
&lt;p&gt;åœ¨æ£€æµ‹å‘æ¥è¯·æ±‚çš„æœºå™¨æ˜¯å¦æ˜¯é›†ç¾¤ä¸­çš„èŠ‚ç‚¹ï¼Œè‡ªèº«èŠ‚ç‚¹æ˜¯å¦æ˜¯ Followerï¼ŒæŠŠå‘æ¥è¯·æ±‚çš„æœºå™¨ä½œä¸º Leaderï¼Œå…·ä½“å¯¹ Node èŠ‚ç‚¹ä¿¡æ¯çš„æ¨é€å’Œå¤„ç†åˆ™é€šè¿‡&lt;code&gt;node.Step()&lt;/code&gt;å‡½æ•°å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;å…¶æ¬¡ï¼Œä½ éœ€è¦æŠŠæ—¥å¿—é¡¹å­˜å‚¨èµ·æ¥ï¼Œåœ¨ä½ çš„åº”ç”¨ä¸­æ‰§è¡Œæäº¤çš„æ—¥å¿—é¡¹ï¼Œç„¶åæŠŠå®Œæˆä¿¡å·å‘é€ç»™é›†ç¾¤ä¸­çš„å…¶å®ƒèŠ‚ç‚¹ï¼Œå†é€šè¿‡&lt;code&gt;node.Ready()&lt;/code&gt;ç›‘å¬ç­‰å¾…ä¸‹ä¸€æ¬¡ä»»åŠ¡æ‰§è¡Œã€‚æœ‰ä¸€ç‚¹éå¸¸é‡è¦ï¼Œä½ å¿…é¡»ç¡®ä¿åœ¨ä½ å‘é€å®Œæˆæ¶ˆæ¯ç»™å…¶ä»–èŠ‚ç‚¹ä¹‹å‰ï¼Œä½ çš„æ—¥å¿—é¡¹å†…å®¹å·²ç»ç¡®åˆ‡ç¨³å®šçš„å­˜å‚¨ä¸‹æ¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œä½ éœ€è¦ä¿æŒä¸€ä¸ªå¿ƒè·³ä¿¡å·&lt;code&gt;Tick()&lt;/code&gt;ã€‚Raft æœ‰ä¸¤ä¸ªå¾ˆé‡è¦çš„åœ°æ–¹ç”¨åˆ°è¶…æ—¶æœºåˆ¶ï¼šå¿ƒè·³ä¿æŒå’Œ Leader ç«é€‰ã€‚éœ€è¦ç”¨æˆ·åœ¨å…¶ raft çš„ Node èŠ‚ç‚¹ä¸Šå‘¨æœŸæ€§çš„è°ƒç”¨ Tick() å‡½æ•°ï¼Œä»¥ä¾¿ä¸ºè¶…æ—¶æœºåˆ¶æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;ç»¼ä¸Šæ‰€è¿°ï¼Œæ•´ä¸ª raft èŠ‚ç‚¹çš„çŠ¶æ€æœºå¾ªç¯ç±»ä¼¼å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;table class=&quot;hljs-ln&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;for {&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-attribute&quot;&gt;select {&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-attribute&quot;&gt; case &amp;lt;-s.Ticker:&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;n&lt;span class=&quot;hljs-variable&quot;&gt;.Tick()&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;case rd := &amp;lt;-s&lt;span class=&quot;hljs-variable&quot;&gt;.Node&lt;span class=&quot;hljs-variable&quot;&gt;.Ready():&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;saveToStorage(rd&lt;span class=&quot;hljs-variable&quot;&gt;.State, rd&lt;span class=&quot;hljs-variable&quot;&gt;.Entries)&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;send(rd&lt;span class=&quot;hljs-variable&quot;&gt;.Messages)&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;process(rd&lt;span class=&quot;hljs-variable&quot;&gt;.CommittedEntries)&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;s&lt;span class=&quot;hljs-variable&quot;&gt;.Node&lt;span class=&quot;hljs-variable&quot;&gt;.Advance()&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;case &amp;lt;-s&lt;span class=&quot;hljs-variable&quot;&gt;.done:&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;return&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;}&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;}&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;

&lt;/tbody&gt;

&lt;/table&gt;
&lt;p&gt;è€Œè¿™ä¸ªçŠ¶æ€æœºçœŸå®å­˜åœ¨çš„ä»£ç ä½ç½®ä¸º&lt;code&gt;etcdserver/server.go&lt;/code&gt;ä¸­çš„&lt;code&gt;run&lt;/code&gt;å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹çŠ¶æ€æœºè¿›è¡ŒçŠ¶æ€å˜æ›´ï¼ˆå¦‚ç”¨æˆ·æ•°æ®æ›´æ–°ç­‰ï¼‰åˆ™æ˜¯è°ƒç”¨&lt;code&gt;n.Propose(ctx, data)&lt;/code&gt;å‡½æ•°ï¼Œåœ¨å­˜å‚¨æ•°æ®æ—¶ï¼Œä¼šå…ˆè¿›è¡Œåºåˆ—åŒ–æ“ä½œã€‚è·å¾—å¤§å¤šæ•°å…¶ä»–èŠ‚ç‚¹çš„ç¡®è®¤åï¼Œæ•°æ®ä¼šè¢«æäº¤ï¼Œå­˜ä¸ºå·²æäº¤çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;ä¹‹å‰æåˆ° etcd é›†ç¾¤çš„å¯åŠ¨éœ€è¦å€ŸåŠ©åˆ«çš„ etcd é›†ç¾¤æˆ–è€… DNSï¼Œè€Œå¯åŠ¨å®Œæ¯•åè¿™äº›&lt;code&gt;å¤–åŠ›&lt;/code&gt;å°±ä¸éœ€è¦äº†ï¼Œetcd ä¼šæŠŠè‡ªèº«é›†ç¾¤çš„ä¿¡æ¯ä½œä¸ºçŠ¶æ€å­˜å‚¨èµ·æ¥ã€‚æ‰€ä»¥è¦å˜æ›´è‡ªèº«é›†ç¾¤èŠ‚ç‚¹æ•°é‡å®é™…ä¸Šä¹Ÿéœ€è¦åƒç”¨æˆ·æ•°æ®å˜æ›´é‚£æ ·æ·»åŠ æ•°æ®æ¡ç›®åˆ° Raft çŠ¶æ€æœºä¸­ã€‚è¿™ä¸€åˆ‡ç”±&lt;code&gt;n.ProposeConfChange(ctx, cc)&lt;/code&gt;å®ç°ã€‚å½“é›†ç¾¤é…ç½®ä¿¡æ¯å˜æ›´çš„è¯·æ±‚åŒæ ·å¾—åˆ°å¤§å¤šæ•°èŠ‚ç‚¹çš„ç¡®è®¤åé¦ˆåï¼Œå†è¿›è¡Œé…ç½®å˜æ›´çš„æ­£å¼æ“ä½œï¼Œä»£ç å¦‚ä¸‹ã€‚&lt;/p&gt;

&lt;table class=&quot;hljs-ln&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;var cc raftpb.ConfChange&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;cc.&lt;span class=&quot;hljs-constructor&quot;&gt;Unmarshal(&lt;span class=&quot;hljs-params&quot;&gt;data)&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;n.&lt;span class=&quot;hljs-constructor&quot;&gt;ApplyConfChange(&lt;span class=&quot;hljs-params&quot;&gt;cc)&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;/td&gt;

&lt;/tr&gt;

&lt;/tbody&gt;

&lt;/table&gt;
&lt;p&gt;æ³¨æ„ï¼šä¸€ä¸ª ID å”¯ä¸€æ€§çš„è¡¨ç¤ºäº†ä¸€ä¸ªé›†ç¾¤ï¼Œæ‰€ä»¥ä¸ºäº†é¿å…ä¸åŒ etcd é›†ç¾¤æ¶ˆæ¯æ··ä¹±ï¼ŒID éœ€è¦ç¡®ä¿å”¯ä¸€æ€§ï¼Œä¸èƒ½é‡å¤ä½¿ç”¨æ—§çš„ token æ•°æ®ä½œä¸º IDã€‚&lt;/p&gt;
&lt;h3 id=&quot;heading34&quot; data-id-_31bb4a305454=&quot;1&quot;&gt;8 Store&lt;/h3&gt;
&lt;p&gt;Store è¿™ä¸ªæ¨¡å—é¡¾åæ€ä¹‰ï¼Œå°±åƒä¸€ä¸ªå•†åº—æŠŠ etcd å·²ç»å‡†å¤‡å¥½çš„å„é¡¹åº•å±‚æ”¯æŒåŠ å·¥èµ·æ¥ï¼Œä¸ºç”¨æˆ·æä¾›äº”èŠ±å…«é—¨çš„ API æ”¯æŒï¼Œå¤„ç†ç”¨æˆ·çš„å„é¡¹è¯·æ±‚ã€‚è¦ç†è§£ Storeï¼Œåªéœ€è¦ä» etcd çš„ API å…¥æ‰‹å³å¯ã€‚V2å‚è€ƒ&lt;a href=&quot;https://github.com/etcd-io/etcd/blob/v3.4.14/Documentation/v2/api.md&quot; target=&quot;_blank&quot;&gt;Â etcd çš„ API åˆ—è¡¨&lt;/a&gt;ï¼Œ&lt;a href=&quot;https://github.com/etcd-io/etcd/blob/v3.4.14/Documentation/demo.md&quot; target=&quot;_blank&quot;&gt;V3å‘½ä»¤è¡Œå‚è€ƒè¿™&lt;/a&gt;ï¼Œ &lt;a href=&quot;https://github.com/etcd-io/etcd/blob/v3.4.14/Documentation/dev-guide/api_grpc_gateway.md&quot; target=&quot;_blank&quot;&gt;v3 HTTP å‚è€ƒè¿™&lt;/a&gt;ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰å¦‚ä¸‹ API æ˜¯å¯¹ etcd å­˜å‚¨çš„é”®å€¼è¿›è¡Œçš„æ“ä½œï¼Œäº¦å³ Store æä¾›çš„å†…å®¹ã€‚API ä¸­æåˆ°çš„ç›®å½•ï¼ˆDirectoryï¼‰å’Œé”®ï¼ˆKeyï¼‰ï¼Œä¸Šæ–‡ä¸­ä¹Ÿå¯èƒ½ç§°ä¸º etcd èŠ‚ç‚¹ï¼ˆNodeï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ã€€ã€€å¯¹äºæ–°ç‰ˆæœ¬çš„ etcd serverï¼Œé»˜è®¤æ˜¯åœç”¨ V2çš„ HTTP APIçš„ï¼Œéœ€è¦çš„è¯ï¼Œå¯ä»¥åŠ å‚æ•°ï¼š--enable-v2 ã€‚ä»¥ä¸‹æ˜¯åŸºäº V2çš„å®è·µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;ä¸º etcd å­˜å‚¨çš„é”®èµ‹å€¼ &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;curl -s http:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;127.0.0.1:2379/v2/keys/message -XPUT -d value=&quot;Hello world&quot; |jq .&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Â &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;&lt;span&gt;{
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;action&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;set&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;node&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: {
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/message&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Hello world&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;modifiedIndex&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;9&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;createdIndex&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;9&lt;/span&gt;&lt;span&gt;
  },
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;prevNode&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: {
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/message&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Hello world&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;modifiedIndex&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;8&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;createdIndex&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;8&lt;/span&gt;&lt;span&gt;
  }
}&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Â &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;table class=&quot;hljs-ln&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;åé¦ˆçš„å†…å®¹å«ä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;- action: åˆšåˆšè¿›è¡Œçš„åŠ¨ä½œåç§°ã€‚&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;- &lt;span class=&quot;hljs-type&quot;&gt;node&lt;span class=&quot;hljs-built_in&quot;&gt;.key: è¯·æ±‚çš„ HTTP è·¯å¾„ã€‚etcd ä½¿ç”¨ä¸€ä¸ªç±»ä¼¼æ–‡ä»¶ç³»ç»Ÿçš„æ–¹å¼æ¥åæ˜ é”®å€¼å­˜å‚¨çš„å†…å®¹ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;- &lt;span class=&quot;hljs-type&quot;&gt;node.value: åˆšåˆšè¯·æ±‚çš„é”®æ‰€å­˜å‚¨çš„å†…å®¹ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;- &lt;span class=&quot;hljs-type&quot;&gt;node.createdIndex: etcd èŠ‚ç‚¹æ¯æ¬¡æœ‰å˜åŒ–æ—¶éƒ½ä¼šè‡ªå¢çš„ä¸€ä¸ªå€¼ï¼Œé™¤äº†ç”¨æˆ·è¯·æ±‚å¤–ï¼Œetcd å†…éƒ¨è¿è¡Œï¼ˆå¦‚å¯åŠ¨ã€é›†ç¾¤ä¿¡æ¯å˜åŒ–ç­‰ï¼‰ä¹Ÿä¼šå¯¹èŠ‚ç‚¹æœ‰å˜åŠ¨è€Œå¼•èµ·è¿™ä¸ªå€¼çš„å˜åŒ–ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;- &lt;span class=&quot;hljs-type&quot;&gt;node.modifiedIndex: ç±»ä¼¼ &lt;span class=&quot;hljs-type&quot;&gt;node.createdIndexï¼Œèƒ½å¼•èµ· modifiedIndex å˜åŒ–çš„æ“ä½œåŒ…æ‹¬ set, &lt;span class=&quot;hljs-keyword&quot;&gt;delete, &lt;span class=&quot;hljs-keyword&quot;&gt;update, create, compareAndSwap &lt;span class=&quot;hljs-keyword&quot;&gt;and compareAndDeleteã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;- æŸ¥è¯¢ etcd æŸä¸ªé”®å­˜å‚¨çš„å€¼&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;curl http://&lt;span class=&quot;hljs-number&quot;&gt;127.0.&lt;span class=&quot;hljs-number&quot;&gt;0.&lt;span class=&quot;hljs-number&quot;&gt;1:&lt;span class=&quot;hljs-number&quot;&gt;2379/v2/keys/message&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Â &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¿®æ”¹é”®å€¼ï¼šä¸åˆ›å»ºæ–°å€¼å‡ ä¹ç›¸åŒï¼Œä½†æ˜¯åé¦ˆæ—¶ä¼šæœ‰ä¸€ä¸ª&lt;code&gt;prevNode&lt;/code&gt;å€¼ååº”äº†ä¿®æ”¹å‰å­˜å‚¨çš„å†…å®¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;curl -s http:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;127.0.0.1:2379/v2/keys/message -XPUT -d value=&quot;Hello etcd&quot; | jq .&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;&lt;span&gt;{
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;action&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;set&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;node&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: {
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/message&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Hello etcd&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;modifiedIndex&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;12&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;createdIndex&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;12&lt;/span&gt;&lt;span&gt;
  },
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;prevNode&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: {
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/message&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Hello etcd&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;modifiedIndex&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;11&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;createdIndex&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;11&lt;/span&gt;&lt;span&gt;
  }
}&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;






&lt;ul&gt;
&lt;li&gt;è‡ªåŠ¨åœ¨ç›®å½•ä¸‹åˆ›å»ºæœ‰åºé”®ã€‚åœ¨å¯¹åˆ›å»ºçš„ç›®å½•ä½¿ç”¨&lt;code&gt;POST&lt;/code&gt;å‚æ•°ï¼Œä¼šè‡ªåŠ¨åœ¨è¯¥ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªä»¥ createdIndex å€¼ä¸ºé”®çš„å€¼ï¼Œè¿™æ ·å°±ç›¸å½“äºä»¥åˆ›å»ºæ—¶é—´å…ˆåä¸¥æ ¼æ’åºäº†ã€‚è¿™ä¸ª API å¯¹åˆ†å¸ƒå¼é˜Ÿåˆ—è¿™ç±»åœºæ™¯éå¸¸æœ‰ç”¨ã€‚Â &lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;curl -s http:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;127.0.0.1:2379/v2/keys/queue -XPOST -d value=Job1 |jq .&lt;br/&gt;&lt;/span&gt;
&lt;span&gt;{
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;action&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;node&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: {
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/queue/00000000000000000021&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Job1&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;modifiedIndex&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;21&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;createdIndex&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;21&lt;/span&gt;&lt;span&gt;
  }
}&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;curl -s http:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;127.0.0.1:2379/v2/keys/queue -XPOST -d value=Job1 |jq .&lt;br/&gt;&lt;/span&gt;
&lt;span&gt;{
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;action&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;create&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;node&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: {
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/queue/00000000000000000022&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Job1&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;modifiedIndex&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;22&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;createdIndex&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;22&lt;/span&gt;&lt;span&gt;
  }
}&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;æŒ‰é¡ºåºåˆ—å‡ºæ‰€æœ‰åˆ›å»ºçš„æœ‰åºé”®curl -s &lt;span&gt;&#x27;&lt;/span&gt;&lt;span&gt;http://127.0.0.1:2379/v2/keys/queue?recursive=true&amp;amp;sorted=true&lt;/span&gt;&lt;span&gt;&#x27;&lt;/span&gt;&lt;span&gt; |&lt;/span&gt;&lt;span&gt; jq .&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;





&lt;table class=&quot;hljs-ln&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-bullet&quot;&gt;- è‡ªåŠ¨åŒ– CASï¼ˆCompare-and-Swapï¼‰æ“ä½œï¼šetcd å¼ºä¸€è‡´æ€§æœ€ç›´è§‚çš„è¡¨ç°å°±æ˜¯è¿™ä¸ª APIï¼Œé€šè¿‡è®¾å®šæ¡ä»¶ï¼Œé˜»æ­¢èŠ‚ç‚¹äºŒæ¬¡åˆ›å»ºæˆ–ä¿®æ”¹ã€‚å³ç”¨æˆ·çš„æŒ‡ä»¤è¢«æ‰§è¡Œå½“ä¸”ä»…å½“ CAS çš„æ¡ä»¶æˆç«‹ã€‚æ¡ä»¶æœ‰ä»¥ä¸‹å‡ ä¸ªã€‚ &lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-bullet&quot;&gt; - prevValue å…ˆå‰èŠ‚ç‚¹çš„å€¼ï¼Œå¦‚æœå€¼ä¸æä¾›çš„å€¼ç›¸åŒæ‰å…è®¸æ“ä½œã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-bullet&quot;&gt; - prevIndex å…ˆå‰èŠ‚ç‚¹çš„ç¼–å·ï¼Œç¼–å·ä¸æä¾›çš„æ ¡éªŒç¼–å·ç›¸åŒæ‰å…è®¸æ“ä½œã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-bullet&quot;&gt; - prevExist å…ˆå‰èŠ‚ç‚¹æ˜¯å¦å­˜åœ¨ã€‚å¦‚æœå­˜åœ¨åˆ™ä¸å…è®¸æ“ä½œã€‚è¿™ä¸ªå¸¸å¸¸è¢«ç”¨äºåˆ†å¸ƒå¼é”çš„å”¯ä¸€è·å–ã€‚&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;å‡è®¾å…ˆè¿›è¡Œäº†å¦‚ä¸‹æ“ä½œï¼šè®¾å®šäº† foo çš„å€¼ã€‚&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Â &lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;curl -s http:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;127.0.0.1:2379/v2/keys/foo\?prevExist\=false -XPUT -d value=three |jq .&lt;br/&gt;&lt;br/&gt;&lt;/span&gt;
&lt;span&gt;{
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;errorCode&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;105&lt;/span&gt;&lt;span&gt;,
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;message&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Key already exists&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;cause&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/foo&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
  &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;: &lt;span&gt;28&lt;/span&gt;&lt;span&gt;
}&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Â &lt;/p&gt;

&lt;table class=&quot;hljs-ln&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;å°±ä¼šè¿”å›åˆ›å»ºå¤±è´¥çš„é”™è¯¯ã€‚&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;- æ¡ä»¶åˆ é™¤ï¼ˆCompare-and-Deleteï¼‰ï¼šä¸ CAS ç±»ä¼¼ï¼Œæ¡ä»¶æˆç«‹åæ‰èƒ½åˆ é™¤ã€‚&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;- åˆ›å»ºç›®å½•&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;curl http:&lt;span class=&quot;hljs-regexp&quot;&gt;//&lt;span class=&quot;hljs-number&quot;&gt;127.0.&lt;span class=&quot;hljs-number&quot;&gt;0.1:&lt;span class=&quot;hljs-number&quot;&gt;2379&lt;span class=&quot;hljs-regexp&quot;&gt;/v2/keys/dir -XPUT -d dir=true&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;




&lt;table class=&quot;hljs-ln&quot;&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;ç›¸ä¿¡çœ‹å®Œè¿™ä¹ˆå¤š APIï¼Œè¯»è€…å·²ç»å¯¹ Store çš„å·¥ä½œå†…å®¹åŸºæœ¬äº†è§£äº†ã€‚å®ƒå¯¹ etcd ä¸‹å­˜å‚¨çš„æ•°æ®è¿›è¡ŒåŠ å·¥ï¼Œåˆ›å»ºå‡ºå¦‚æ–‡ä»¶ç³»ç»Ÿèˆ¬çš„æ ‘çŠ¶ç»“æ„ä¾›ç”¨æˆ·å¿«é€ŸæŸ¥è¯¢ã€‚å®ƒæœ‰ä¸€ä¸ª&lt;span class=&quot;hljs-code&quot;&gt;`Watcher`ç”¨äºèŠ‚ç‚¹å˜æ›´çš„å®æ—¶åé¦ˆï¼Œè¿˜éœ€è¦ç»´æŠ¤ä¸€ä¸ª&lt;span class=&quot;hljs-code&quot;&gt;`WatcherHub`å¯¹æ‰€æœ‰&lt;span class=&quot;hljs-code&quot;&gt;`Watcher`è®¢é˜…è€…è¿›è¡Œé€šçŸ¥çš„æ¨é€ã€‚åŒæ—¶ï¼Œå®ƒè¿˜ç»´æŠ¤äº†ä¸€ä¸ªç”±å®šæ—¶é”®æ„æˆçš„å°é¡¶å †ï¼Œå¿«é€Ÿè¿”å›ä¸‹ä¸€ä¸ªè¦è¶…æ—¶çš„é”®ã€‚æœ€åï¼Œæ‰€æœ‰è¿™äº› API çš„è¯·æ±‚éƒ½ä»¥äº‹ä»¶çš„å½¢å¼å­˜å‚¨åœ¨äº‹ä»¶é˜Ÿåˆ—ä¸­ç­‰å¾…å¤„ç†ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-section&quot;&gt;### 9 æ€»ç»“&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;é€šè¿‡ä»åº”ç”¨åœºæ™¯åˆ°æºç åˆ†æçš„ä¸€ç³»åˆ—å›é¡¾ï¼Œæˆ‘ä»¬äº†è§£åˆ° etcd å¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„åˆ†å¸ƒå¼é”®å€¼å­˜å‚¨ç³»ç»Ÿã€‚å®ƒè§£å†³äº†åˆ†å¸ƒå¼åœºæ™¯ä¸­æœ€ä¸ºå¸¸è§çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œä¸ºæœåŠ¡å‘ç°æä¾›äº†ä¸€ä¸ªç¨³å®šé«˜å¯ç”¨çš„æ¶ˆæ¯æ³¨å†Œä»“åº“ï¼Œä¸ºä»¥å¾®æœåŠ¡ååŒå·¥ä½œçš„æ¶æ„æä¾›äº†æ— é™çš„å¯èƒ½ã€‚ç›¸ä¿¡åœ¨ä¸ä¹…çš„å°†æ¥ï¼Œé€šè¿‡ etcd æ„å»ºèµ·æ¥çš„å¤§å‹ç³»ç»Ÿä¼šè¶Šæ¥è¶Šå¤šã€‚&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-section&quot;&gt;### 10 ä½œè€…ç®€ä»‹&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;å­™å¥æ³¢ï¼Œ[&lt;span class=&quot;hljs-string&quot;&gt;æµ™æ±Ÿå¤§å­¦ SEL å®éªŒå®¤ç¡•å£«ç ”ç©¶ç”Ÿ](&lt;span class=&quot;hljs-link&quot;&gt;http://www.sel.zju.edu.cn)ï¼Œç›®å‰åœ¨äº‘å¹³å°å›¢é˜Ÿä»äº‹ç§‘ç ”å’Œå¼€å‘å·¥ä½œã€‚æµ™å¤§å›¢é˜Ÿå¯¹ PaaSã€Dockerã€å¤§æ•°æ®å’Œä¸»æµå¼€æºäº‘è®¡ç®—æŠ€æœ¯æœ‰æ·±å…¥çš„ç ”ç©¶å’ŒäºŒæ¬¡å¼€å‘ç»éªŒï¼Œå›¢é˜Ÿç°å°†éƒ¨åˆ†æŠ€æœ¯æ–‡ç« è´¡çŒ®å‡ºæ¥ï¼Œå¸Œæœ›èƒ½å¯¹è¯»è€…æœ‰æ‰€å¸®åŠ©ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-section&quot;&gt;### å‚è€ƒæ–‡çŒ®&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-bullet&quot;&gt;1. &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;https://&lt;span class=&quot;hljs-attr&quot;&gt;github.com/&lt;span class=&quot;hljs-attr&quot;&gt;coreos/&lt;span class=&quot;hljs-attr&quot;&gt;etcd&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-bullet&quot;&gt;2. &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;https://&lt;span class=&quot;hljs-attr&quot;&gt;groups.google.com/&lt;span class=&quot;hljs-attr&quot;&gt;forum/#!&lt;span class=&quot;hljs-attr&quot;&gt;topic/&lt;span class=&quot;hljs-attr&quot;&gt;etcd-dev/&lt;span class=&quot;hljs-attr&quot;&gt;wmndjzBNdZo&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-bullet&quot;&gt;3. &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;http://&lt;span class=&quot;hljs-attr&quot;&gt;jm-blog.aliapp.com/?&lt;span class=&quot;hljs-attr&quot;&gt;p=&lt;span class=&quot;hljs-string&quot;&gt;1232&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-bullet&quot;&gt;4. &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;http://&lt;span class=&quot;hljs-attr&quot;&gt;progrium.com/&lt;span class=&quot;hljs-attr&quot;&gt;blog/&lt;span class=&quot;hljs-attr&quot;&gt;2014/&lt;span class=&quot;hljs-attr&quot;&gt;07/&lt;span class=&quot;hljs-attr&quot;&gt;29/&lt;span class=&quot;hljs-attr&quot;&gt;understanding-modern-service-discovery-with-docker/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-bullet&quot;&gt;5. &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;http://&lt;span class=&quot;hljs-attr&quot;&gt;devo.ps/&lt;span class=&quot;hljs-attr&quot;&gt;blog/&lt;span class=&quot;hljs-attr&quot;&gt;zookeeper-vs-doozer-vs-etcd/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-bullet&quot;&gt;6. &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;http://&lt;span class=&quot;hljs-attr&quot;&gt;jasonwilder.com/&lt;span class=&quot;hljs-attr&quot;&gt;blog/&lt;span class=&quot;hljs-attr&quot;&gt;2014/&lt;span class=&quot;hljs-attr&quot;&gt;02/&lt;span class=&quot;hljs-attr&quot;&gt;04/&lt;span class=&quot;hljs-attr&quot;&gt;service-discovery-in-the-cloud/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-bullet&quot;&gt;7. &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;http://&lt;span class=&quot;hljs-attr&quot;&gt;www.infoworld.com/&lt;span class=&quot;hljs-attr&quot;&gt;article/&lt;span class=&quot;hljs-attr&quot;&gt;2612082/&lt;span class=&quot;hljs-attr&quot;&gt;open-source-software/&lt;span class=&quot;hljs-attr&quot;&gt;has-apache-lost-its-way-.html&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-bullet&quot;&gt;8. &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;http://&lt;span class=&quot;hljs-attr&quot;&gt;en.wikipedia.org/&lt;span class=&quot;hljs-attr&quot;&gt;wiki/&lt;span class=&quot;hljs-attr&quot;&gt;WAL&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-bullet&quot;&gt;9. &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;http://&lt;span class=&quot;hljs-attr&quot;&gt;www.infoq.com/&lt;span class=&quot;hljs-attr&quot;&gt;cn/&lt;span class=&quot;hljs-attr&quot;&gt;articles/&lt;span class=&quot;hljs-attr&quot;&gt;coreos-analyse-etcd&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-bullet&quot;&gt;10. &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;http://&lt;span class=&quot;hljs-attr&quot;&gt;www.activestate.com/&lt;span class=&quot;hljs-attr&quot;&gt;blog/&lt;span class=&quot;hljs-attr&quot;&gt;2014/&lt;span class=&quot;hljs-attr&quot;&gt;05/&lt;span class=&quot;hljs-attr&quot;&gt;service-discovery-solutions&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-bullet&quot;&gt;11. &lt;span class=&quot;xml&quot;&gt;&lt;span class=&quot;hljs-tag&quot;&gt;&amp;lt;&lt;span class=&quot;hljs-name&quot;&gt;https://&lt;span class=&quot;hljs-attr&quot;&gt;ramcloud.stanford.edu/&lt;span class=&quot;hljs-attr&quot;&gt;raft.pdf&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;&lt;span class=&quot;hljs-bullet&quot;&gt;- - - - - -&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;æ„Ÿè°¢ [&lt;span class=&quot;hljs-string&quot;&gt;éƒ­è•¾](&lt;span class=&quot;hljs-link&quot;&gt;http://www.infoq.com/cn/author/%E9%83%AD%E8%95%BE) å¯¹æœ¬æ–‡çš„ç­–åˆ’å’Œå®¡æ ¡ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;Â &lt;/td&gt;





&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&quot;hljs-ln-numbers&quot;&gt;Â &lt;/td&gt;
&lt;td class=&quot;hljs-ln-code&quot;&gt;
&lt;p class=&quot;hljs-ln-line&quot;&gt;ç»™ InfoQ ä¸­æ–‡ç«™æŠ•ç¨¿æˆ–è€…å‚ä¸å†…å®¹ç¿»è¯‘å·¥ä½œï¼Œè¯·é‚®ä»¶è‡³ [&lt;span class=&quot;hljs-string&quot;&gt;editors@cn.infoq.com](&lt;span class=&quot;hljs-link&quot;&gt;mailto:editors@cn.infoq.com)ã€‚ä¹Ÿæ¬¢è¿å¤§å®¶é€šè¿‡æ–°æµªå¾®åšï¼ˆ[&lt;span class=&quot;hljs-string&quot;&gt;@InfoQ](&lt;span class=&quot;hljs-link&quot;&gt;http://www.weibo.com/infoqchina)ï¼‰æˆ–è€…è…¾è®¯å¾®åšï¼ˆ[&lt;span class=&quot;hljs-string&quot;&gt;@InfoQ](&lt;span class=&quot;hljs-link&quot;&gt;http://t.qq.com/infoqchina)ï¼‰å…³æ³¨æˆ‘ä»¬ï¼Œå¹¶ä¸æˆ‘ä»¬çš„ç¼–è¾‘å’Œå…¶ä»–è¯»è€…æœ‹å‹äº¤æµã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;





&lt;/td&gt;





&lt;/tr&gt;





&lt;/tbody&gt;





&lt;/table&gt;





&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>415c1f48dc9a345b73b317a631da79a3</guid>
<title>C++ æ¨¡æ¿å‚æ•°ï¼šæŒ‰å€¼ä¼ é€’ vs æŒ‰å¼•ç”¨ä¼ é€’</title>
<link>https://toutiao.io/k/47y0xnb</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;æŒ‰å€¼ä¼ é€’&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æŒ‰å¼•ç”¨ä¼ é€’&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å¼•ç”¨ä¸ä¼š Decay&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¼ é€’ const reference&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¼ é€’ nonconst reference&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¼ é€’ universal reference&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;ä½¿ç”¨ std::ref()å’Œ std::cref()&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åŒºåˆ†æŒ‡é’ˆå’Œæ•°ç»„&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¤„ç†è¿”å›å€¼&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ¨¡æ¿å‚æ•°å£°æ˜çš„æ¨è&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;std::make_pair()æ¨¡æ¿å‚æ•°å†å²æ¼”è¿›&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æŒ‰å€¼ä¼ é€’&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤§å¤šæ•°äººä¸å–œæ¬¢å°†å‚æ•°è®¾ç½®ä¸ºæŒ‰å€¼ä¼ é€’çš„åŸå› æ˜¯æ€•å‚æ•°æ‹·è´çš„è¿‡ç¨‹ä¸­å¸¦æ¥çš„æ€§èƒ½é—®é¢˜ï¼Œä½†æ˜¯ä¸æ˜¯æ‰€æœ‰æŒ‰å€¼ä¼ é€’éƒ½ä¼šæœ‰å‚æ•°æ‹·è´ï¼Œæ¯”å¦‚ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;template&lt;/span&gt;&amp;lt;&lt;span&gt;typename&lt;/span&gt;Â T&amp;gt;&lt;br/&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;printV&lt;/span&gt;Â &lt;span&gt;(TÂ arg)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;...&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;std&lt;/span&gt;::&lt;span&gt;string&lt;/span&gt;Â &lt;span&gt;returnString&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;&lt;span&gt;std&lt;/span&gt;::&lt;span&gt;string&lt;/span&gt;Â sÂ =Â &lt;span&gt;&quot;hi&quot;&lt;/span&gt;;&lt;br/&gt;printV(s);Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â copyÂ constructor&lt;/span&gt;&lt;br/&gt;printV(&lt;span&gt;std&lt;/span&gt;::&lt;span&gt;string&lt;/span&gt;(&lt;span&gt;&quot;hi&quot;&lt;/span&gt;));Â Â Â Â Â Â Â Â &lt;span&gt;//Â copyingÂ usuallyÂ optimizedÂ awayÂ (ifÂ not,Â moveÂ constructor)&lt;/span&gt;&lt;br/&gt;printV(returnString());Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â copyingÂ usuallyÂ optimizedÂ awayÂ (ifÂ not,Â moveÂ constructor)&lt;/span&gt;&lt;br/&gt;printV(&lt;span&gt;std&lt;/span&gt;::move(s));Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â moveÂ constructor&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬é€ä¸€çœ‹ä¸€ä¸‹ä¸Šé¢çš„ 4 ä¸ªè°ƒç”¨ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ç¬¬ä¸€ä¸ª : æˆ‘ä»¬ä¼ é€’äº†ä¸€ä¸ª lvalueï¼Œè¿™ä¼šä½¿ç”¨ std::string çš„&lt;code&gt;copy constructor&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¬¬äºŒå’Œç¬¬ä¸‰ä¸ª : è¿™é‡Œä¼ é€’çš„æ˜¯ prvalue(éšæ‰‹åˆ›å»ºçš„ä¸´æ—¶å¯¹è±¡æˆ–è€…å‡½æ•°è¿”å›çš„ä¸´æ—¶å¯¹è±¡)ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç¼–è¯‘å™¨ä¼šè¿›è¡Œå‚æ•°ä¼ é€’çš„ä¼˜åŒ–ï¼Œä¸ä¼šå¯¼è‡´&lt;code&gt;copy constructor&lt;/code&gt; ï¼ˆ&lt;strong&gt;è¿™ä¸ªä¹Ÿæ˜¯ C++17 çš„æ–°ç‰¹æ€§ï¼š&lt;span&gt;Mandatory Copy Elision or Passing Unmaterialized Objects&lt;/span&gt;&lt;sup&gt;[1]&lt;/sup&gt;ï¼‰&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¬¬å››ä¸ª : ä¼ é€’çš„æ˜¯ xvalue(ä¸€ä¸ªä½¿ç”¨è¿‡ std::move åçš„å¯¹è±¡)ï¼Œè¿™ä¼šè°ƒç”¨&lt;code&gt;move constructor&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è™½ç„¶ä¸Šé¢ 4 ç§æƒ…å†µåªæœ‰ç¬¬ä¸€ç§æ‰ä¼šè°ƒç”¨&lt;code&gt;copy constructor&lt;/code&gt;ï¼Œä½†æ˜¯è¿™ç§æƒ…å†µæ‰æ˜¯æœ€å¸¸è§çš„ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Decay&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ä¹‹å‰çš„æ–‡ç« ä»‹ç»è¿‡ï¼Œå½“æ¨¡æ¿å‚æ•°æ˜¯å€¼ä¼ é€’æ—¶ï¼Œä¼šé€ æˆå‚æ•° decay:&lt;/strong&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ä¸¢å¤± const å’Œ volatile å±æ€§ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸¢å¤±å¼•ç”¨ç±»å‹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¼ é€’æ•°ç»„æ—¶ï¼Œæ¨¡æ¿å‚æ•°ä¼š decay æˆæŒ‡é’ˆã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;template&lt;/span&gt;&amp;lt;&lt;span&gt;typename&lt;/span&gt;Â T&amp;gt;&lt;br/&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;printV&lt;/span&gt;Â &lt;span&gt;(TÂ arg)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;...&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;std&lt;/span&gt;::&lt;span&gt;string&lt;/span&gt;Â &lt;span&gt;const&lt;/span&gt;Â cÂ =Â &lt;span&gt;&quot;hi&quot;&lt;/span&gt;;&lt;br/&gt;printV(c);Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â cÂ decaysÂ soÂ thatÂ argÂ hasÂ typeÂ std::string&lt;/span&gt;&lt;br/&gt;printV(&lt;span&gt;&quot;hi&quot;&lt;/span&gt;);Â Â Â Â &lt;span&gt;//Â decaysÂ toÂ pointerÂ soÂ thatÂ argÂ hasÂ typeÂ charÂ const*&lt;/span&gt;&lt;br/&gt;&lt;span&gt;int&lt;/span&gt;Â arr[&lt;span&gt;4&lt;/span&gt;];&lt;br/&gt;printV(arr);Â Â Â Â &lt;span&gt;//Â decaysÂ toÂ pointerÂ soÂ thatÂ argÂ hasÂ typeÂ charÂ const*&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ç§æ–¹å¼æœ‰ä¼˜ç‚¹ä¹Ÿæœ‰ç¼ºç‚¹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ä¼˜ç‚¹ï¼šèƒ½å¤Ÿç»Ÿä¸€å¤„ç† decay åçš„æŒ‡é’ˆï¼Œè€Œä¸å¿…åŒºåˆ†æ˜¯&lt;code&gt;char const*&lt;/code&gt;è¿˜æ˜¯ç±»ä¼¼&lt;code&gt;const char[13]&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¼ºç‚¹ï¼šæ— æ³•åŒºåˆ†ä¼ é€’çš„æ˜¯ä¸€ä¸ªæ•°ç»„è¿˜æ˜¯ä¸€ä¸ªæŒ‡å‘å•ä¸€å…ƒç´ çš„æŒ‡é’ˆï¼Œå› ä¸º decay åçš„ç±»å‹éƒ½æ˜¯&lt;code&gt;char const*&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æŒ‰å¼•ç”¨ä¼ é€’&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æŒ‰å¼•ç”¨ä¼ é€’ä¸ä¼šæ‹·è´å‚æ•°ï¼Œä¹Ÿä¸ä¼šæœ‰ä¸Šé¢æåˆ°çš„ decayã€‚è¿™çœ‹èµ·æ¥å¾ˆç¾å¥½ï¼Œä½†æ˜¯æœ‰æ—¶å€™ä¹Ÿä¼šæœ‰é—®é¢˜ï¼š&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¼ é€’ const reference&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;template&lt;/span&gt;&amp;lt;&lt;span&gt;typename&lt;/span&gt;Â T&amp;gt;&lt;br/&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;printR&lt;/span&gt;Â &lt;span&gt;(&lt;span&gt;const&lt;/span&gt;Â T&amp;amp;Â arg)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;...&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;std&lt;/span&gt;::&lt;span&gt;string&lt;/span&gt;Â &lt;span&gt;returnString&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;&lt;span&gt;std&lt;/span&gt;::&lt;span&gt;string&lt;/span&gt;Â sÂ =Â &lt;span&gt;&quot;hi&quot;&lt;/span&gt;;&lt;br/&gt;printR(s);Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â noÂ copy&lt;/span&gt;&lt;br/&gt;printR(&lt;span&gt;std&lt;/span&gt;::&lt;span&gt;string&lt;/span&gt;(&lt;span&gt;&quot;hi&quot;&lt;/span&gt;));Â Â Â Â Â &lt;span&gt;//Â noÂ copy&lt;/span&gt;&lt;br/&gt;printR(returnString());Â Â Â Â Â Â Â &lt;span&gt;//Â noÂ copy&lt;/span&gt;&lt;br/&gt;printR(&lt;span&gt;std&lt;/span&gt;::move(s));Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â noÂ copy&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿˜æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œä½†æ˜¯å½“æ¨¡æ¿å‚æ•°å£°æ˜æ”¹ä¸º&lt;code&gt;const T&amp;amp;&lt;/code&gt;åï¼Œæ‰€æœ‰çš„è°ƒç”¨éƒ½ä¸ä¼šæœ‰æ‹·è´ã€‚é‚£ä¹ˆå“ªé‡Œä¼šæœ‰é—®é¢˜å‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤§å®¶éƒ½çŸ¥é“ï¼Œä¼ é€’å¼•ç”¨æ—¶ï¼Œå®é™…ä¼ é€’çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶ä¸çŸ¥é“è°ƒç”¨è€…ä¼šé’ˆå¯¹è¿™ä¸ªåœ°å€åšä»€ä¹ˆæ“ä½œã€‚ç†è®ºä¸Šï¼Œè°ƒç”¨è€…å¯ä»¥éšæ„æ”¹å˜è¿™ä¸ªåœ°å€æŒ‡å‘çš„å€¼ï¼ˆè¿™é‡Œè™½ç„¶å£°æ˜ä¸º constï¼Œä½†æ˜¯ä»ç„¶æœ‰&lt;code&gt;const_cast&lt;/code&gt;å¯ä»¥å»é™¤ constï¼‰ã€‚å› æ­¤ï¼Œç¼–è¯‘å™¨ä¼šå‡è®¾æ‰€æœ‰è¯¥åœ°å€çš„ç¼“å­˜ï¼ˆé€šå¸¸ä¸ºå¯„å­˜å™¨ï¼‰åœ¨è¯¥å‡½æ•°è°ƒç”¨åéƒ½ä¼šå¤±æ•ˆï¼Œå¦‚æœè¦ä½¿ç”¨è¯¥åœ°å€çš„å€¼ï¼Œä¼šé‡æ–°ä»å†…å­˜ä¸­è½½å…¥ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å¼•ç”¨ä¸ä¼š Decay&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¹‹å‰æ–‡ç« ä»‹ç»è¿‡ï¼ŒæŒ‰å¼•ç”¨ä¼ é€’ä¸ä¼š decayã€‚å› æ­¤å¦‚æœä¼ é€’çš„æ•°ç»„ï¼Œé‚£ä¹ˆæ¨æ–­å‚æ•°ç±»å‹æ—¶ä¸ä¼š decay æˆæŒ‡é’ˆï¼Œå¹¶ä¸” const å’Œ volatile éƒ½ä¼šè¢«ä¿ç•™ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;template&lt;/span&gt;&amp;lt;&lt;span&gt;typename&lt;/span&gt;Â T&amp;gt;&lt;br/&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;printR&lt;/span&gt;Â &lt;span&gt;(TÂ &lt;span&gt;const&lt;/span&gt;&amp;amp;Â arg)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;...&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;std&lt;/span&gt;::&lt;span&gt;string&lt;/span&gt;Â &lt;span&gt;const&lt;/span&gt;Â cÂ =Â &lt;span&gt;&quot;hi&quot;&lt;/span&gt;;&lt;br/&gt;printR(c);Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â TÂ deducedÂ asÂ std::string,Â argÂ isÂ std::stringÂ const&amp;amp;&lt;/span&gt;&lt;br/&gt;printR(&lt;span&gt;&quot;hi&quot;&lt;/span&gt;);Â Â Â Â Â Â &lt;span&gt;//Â TÂ deducedÂ asÂ char[3],Â argÂ isÂ charÂ const(&amp;amp;)[3]&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;int&lt;/span&gt;Â arr[&lt;span&gt;4&lt;/span&gt;];&lt;br/&gt;printR(arr);Â Â Â Â Â Â Â &lt;span&gt;//Â TÂ deducedÂ asÂ int[4],Â argÂ isÂ intÂ const(&amp;amp;)[4]&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å› æ­¤ï¼Œåœ¨ printR å‡½æ•°å†…é€šè¿‡ T å£°æ˜çš„å˜é‡æ²¡æœ‰ const å±æ€§ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¼ é€’ nonconst reference&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæƒ³æ”¹å˜å‚æ•°çš„å€¼å¹¶ä¸”ä¸å¸Œæœ›æ‹·è´ï¼Œé‚£ä¹ˆä¼šä½¿ç”¨è¿™ç§æƒ…å†µã€‚ä½†æ˜¯è¿™æ—¶æˆ‘ä»¬ä¸èƒ½ç»‘å®š prvalue å’Œ xvalue ç»™ä¸€ä¸ª nonconst referenceï¼ˆè¿™æ˜¯ c++çš„ä¸€ä¸ª&lt;span&gt;è§„åˆ™&lt;/span&gt;&lt;sup&gt;[2]&lt;/sup&gt;ï¼‰&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;template&lt;/span&gt;&amp;lt;&lt;span&gt;typename&lt;/span&gt;Â T&amp;gt;&lt;br/&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;outR&lt;/span&gt;Â &lt;span&gt;(T&amp;amp;Â arg)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;...&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;std&lt;/span&gt;::&lt;span&gt;string&lt;/span&gt;Â &lt;span&gt;returnString&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;&lt;span&gt;std&lt;/span&gt;::&lt;span&gt;string&lt;/span&gt;Â sÂ =Â &lt;span&gt;&quot;hi&quot;&lt;/span&gt;;&lt;br/&gt;outR(s);Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â OK:Â TÂ deducedÂ asÂ std::string,Â argÂ isÂ std::string&amp;amp;&lt;/span&gt;&lt;br/&gt;outR(&lt;span&gt;std&lt;/span&gt;::&lt;span&gt;string&lt;/span&gt;(&lt;span&gt;&quot;hi&quot;&lt;/span&gt;));Â Â Â Â Â Â Â &lt;span&gt;//Â ERROR:Â notÂ allowedÂ toÂ passÂ aÂ temporaryÂ (prvalue)&lt;/span&gt;&lt;br/&gt;outR(returnString());Â Â Â Â Â Â Â Â &lt;span&gt;//Â ERROR:Â notÂ allowedÂ toÂ passÂ aÂ temporaryÂ (prvalue)&lt;/span&gt;&lt;br/&gt;outR(&lt;span&gt;std&lt;/span&gt;::move(s));Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â ERROR:Â notÂ allowedÂ toÂ passÂ anÂ xvalue&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŒæ ·ï¼Œè¿™ç§æƒ…å†µä¸ä¼šå‘ç”Ÿ decay:&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;int&lt;/span&gt;Â arr[&lt;span&gt;4&lt;/span&gt;];&lt;br/&gt;outR(arr);Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â OK:Â TÂ deducedÂ asÂ int[4],Â argÂ isÂ int(&amp;amp;)[4]&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¼ é€’ universal reference&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªä¹Ÿæ˜¯å£°æ˜å‚æ•°ä¸ºå¼•ç”¨çš„ä¸€ä¸ªé‡è¦åœºæ™¯ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;template&lt;/span&gt;&amp;lt;&lt;span&gt;typename&lt;/span&gt;Â T&amp;gt;&lt;br/&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;passR&lt;/span&gt;Â &lt;span&gt;(T&amp;amp;&amp;amp;Â arg)&lt;/span&gt;Â &lt;/span&gt;{Â &lt;span&gt;//Â argÂ declaredÂ asÂ forwardingÂ reference&lt;/span&gt;&lt;br/&gt;...&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;std&lt;/span&gt;::&lt;span&gt;string&lt;/span&gt;Â sÂ =Â &lt;span&gt;&quot;hi&quot;&lt;/span&gt;;&lt;br/&gt;passR(s);Â Â Â Â Â Â Â Â &lt;span&gt;//Â OK:Â TÂ deducedÂ asÂ std::string&amp;amp;Â (alsoÂ theÂ typeÂ ofÂ arg)&lt;/span&gt;&lt;br/&gt;passR(&lt;span&gt;std&lt;/span&gt;::&lt;span&gt;string&lt;/span&gt;(&lt;span&gt;&quot;hi&quot;&lt;/span&gt;));Â Â Â Â Â &lt;span&gt;//Â OK:Â TÂ deducedÂ asÂ std::string,Â argÂ isÂ std::string&amp;amp;&amp;amp;&lt;/span&gt;&lt;br/&gt;passR(returnString());Â Â Â Â Â Â Â Â &lt;span&gt;//Â OK:Â TÂ deducedÂ asÂ std::string,Â argÂ isÂ std::string&amp;amp;&amp;amp;&lt;/span&gt;&lt;br/&gt;passR(&lt;span&gt;std&lt;/span&gt;::move(s));Â Â Â Â Â Â Â &lt;span&gt;//Â OK:Â TÂ deducedÂ asÂ std::string,Â argÂ isÂ std::string&amp;amp;&amp;amp;&lt;/span&gt;&lt;br/&gt;passR(arr);Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â OK:Â TÂ deducedÂ asÂ int(&amp;amp;)[4]Â (alsoÂ theÂ typeÂ ofÂ arg)&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯è¿™é‡Œéœ€è¦é¢å¤–æ³¨æ„ä¸€ä¸‹ï¼Œè¿™æ˜¯ T éšå¼è¢«å£°æ˜ä¸ºå¼•ç”¨çš„å”¯ä¸€æƒ…å†µï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;template&lt;/span&gt;Â &amp;lt;&lt;span&gt;typename&lt;/span&gt;Â T&amp;gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;passR&lt;/span&gt;&lt;span&gt;(TÂ &amp;amp;&amp;amp;arg)&lt;/span&gt;Â &lt;/span&gt;{Â Â Â Â Â &lt;span&gt;//Â argÂ isÂ aÂ forwardingÂ reference&lt;/span&gt;&lt;br/&gt;Â Â TÂ x;Â Â Â Â Â Â Â Â &lt;span&gt;//Â forÂ passedÂ lvalues,Â xÂ isÂ aÂ reference,Â whichÂ requiresÂ anÂ initializer&lt;/span&gt;&lt;br/&gt;Â Â ...&lt;br/&gt;}&lt;br/&gt;foo(&lt;span&gt;42&lt;/span&gt;);Â Â Â Â &lt;span&gt;//Â OK:Â TÂ deducedÂ asÂ int&lt;/span&gt;&lt;br/&gt;&lt;span&gt;int&lt;/span&gt;Â i;&lt;br/&gt;foo(i);Â Â Â Â &lt;span&gt;//Â ERROR:Â TÂ deducedÂ asÂ int&amp;amp;,Â whichÂ makesÂ theÂ declarationÂ ofÂ xÂ inÂ passR()Â invalid&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä½¿ç”¨ std::ref()å’Œ std::cref()&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸»è¦ç”¨æ¥â€œå–‚â€reference ç»™å‡½æ•°æ¨¡æ¿ï¼Œåè€…åŸæœ¬ä»¥æŒ‰å€¼ä¼ é€’çš„æ–¹å¼æ¥å—å‚æ•°ï¼Œè¿™å¾€å¾€å…è®¸å‡½æ•°æ¨¡æ¿å¾—ä»¥æ“ä½œ reference è€Œä¸éœ€è¦å¦å†™ç‰¹åŒ–ç‰ˆæœ¬ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;template&lt;/span&gt;Â &amp;lt;&lt;span&gt;typename&lt;/span&gt;Â T&amp;gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;foo&lt;/span&gt;Â &lt;span&gt;(TÂ val)&lt;/span&gt;Â &lt;/span&gt;;&lt;br/&gt;&lt;br/&gt;...&lt;br/&gt;&lt;span&gt;int&lt;/span&gt;Â x;&lt;br/&gt;fooÂ (&lt;span&gt;std&lt;/span&gt;:Â :ref(x));&lt;br/&gt;fooÂ (&lt;span&gt;std&lt;/span&gt;:Â :cref(x));&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªç‰¹æ€§è¢« C++æ ‡å‡†åº“è¿ç”¨äºå„ä¸ªåœ°æ–¹ï¼Œä¾‹å¦‚:&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;make_pair()&lt;/code&gt;ç”¨æ­¤ç‰¹æ€§äºæ˜¯èƒ½å¤Ÿåˆ›å»ºä¸€ä¸ª pair&amp;lt;&amp;gt; of references.&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;make_tuple()&lt;/code&gt;ç”¨æ­¤ç‰¹æ€§äºæ˜¯èƒ½å¤Ÿåˆ›å»ºä¸€ä¸ª tuple&amp;lt;&amp;gt; of references.&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;Binder&lt;/code&gt;ç”¨æ­¤ç‰¹æ€§äºæ˜¯èƒ½å¤Ÿç»‘å®š(bind) reference.&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;Thread&lt;/code&gt;ç”¨æ­¤ç‰¹æ€§äºæ˜¯èƒ½å¤Ÿä»¥ by reference å½¢å¼ä¼ é€’å®å‚ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ³¨æ„ std::ref()ä¸æ˜¯çœŸçš„å°†å‚æ•°å˜ä¸ºå¼•ç”¨ï¼Œåªæ˜¯åˆ›å»ºäº†ä¸€ä¸ª std::reference_wrapper&amp;lt;&amp;gt;å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å¼•ç”¨äº†åŸå§‹çš„å˜é‡ï¼Œç„¶åå°† std::reference_wrapper&amp;lt;&amp;gt;ä¼ ç»™äº†å‚æ•°ã€‚&lt;strong&gt;std::reference_wrapper&amp;lt;&amp;gt;æ”¯æŒçš„ä¸€ä¸ªé‡è¦æ“ä½œæ˜¯ï¼šå‘åŸå§‹ç±»å‹çš„éšå¼è½¬æ¢ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#&lt;span&gt;include&lt;/span&gt;Â &lt;span&gt;&amp;lt;functional&amp;gt;Â //Â forÂ std::cref()&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#&lt;span&gt;include&lt;/span&gt;Â &lt;span&gt;&amp;lt;string&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#&lt;span&gt;include&lt;/span&gt;Â &lt;span&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;printString&lt;/span&gt;&lt;span&gt;(&lt;span&gt;std&lt;/span&gt;::&lt;span&gt;string&lt;/span&gt;Â &lt;span&gt;const&lt;/span&gt;&amp;amp;Â s)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;std&lt;/span&gt;::&lt;span&gt;cout&lt;/span&gt;Â &amp;lt;&amp;lt;Â sÂ &amp;lt;&amp;lt;Â &lt;span&gt;&#x27;\n&#x27;&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;template&lt;/span&gt;&amp;lt;&lt;span&gt;typename&lt;/span&gt;Â T&amp;gt;&lt;br/&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;printT&lt;/span&gt;Â &lt;span&gt;(TÂ arg)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â printString(arg);Â Â Â Â Â &lt;span&gt;//Â mightÂ convertÂ argÂ backÂ toÂ std::string&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;std&lt;/span&gt;::&lt;span&gt;string&lt;/span&gt;Â sÂ =Â &lt;span&gt;&quot;hello&quot;&lt;/span&gt;;&lt;br/&gt;Â Â printT(s);Â &lt;span&gt;//Â printÂ sÂ passedÂ byÂ value&lt;/span&gt;&lt;br/&gt;Â Â printT(&lt;span&gt;std&lt;/span&gt;::cref(s));Â &lt;span&gt;//Â printÂ sÂ passedÂ &quot;asÂ ifÂ byÂ reference&quot;&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;åŒºåˆ†æŒ‡é’ˆå’Œæ•°ç»„&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‰é¢è¯´è¿‡ï¼ŒæŒ‰å€¼ä¼ é€’çš„ä¸€ä¸ªç¼ºç‚¹æ˜¯ï¼Œæ— æ³•åŒºåˆ†è°ƒç”¨å‚æ•°æ˜¯æ•°ç»„è¿˜æ˜¯æŒ‡é’ˆï¼Œå› ä¸ºæ•°ç»„ä¼š decay æˆæŒ‡é’ˆã€‚é‚£å¦‚æœæœ‰éœ€è¦åŒºåˆ†çš„éœ€æ±‚ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;template&lt;/span&gt;Â &amp;lt;&lt;span&gt;typename&lt;/span&gt;Â T,Â &lt;span&gt;typename&lt;/span&gt;Â =Â &lt;span&gt;std&lt;/span&gt;::&lt;span&gt;enable_if_t&lt;/span&gt;&amp;lt;&lt;span&gt;std&lt;/span&gt;::is_array_v&amp;lt;T&amp;gt;&amp;gt;&amp;gt;&lt;br/&gt;&lt;span&gt;void&lt;/span&gt;Â foo(TÂ &amp;amp;&amp;amp;arg1,Â TÂ &amp;amp;&amp;amp;arg2)Â {&lt;br/&gt;Â Â ...&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;std::enable_if&lt;/code&gt;åé¢ä¼šä»‹ç»ï¼Œå®ƒçš„æ„æ€æ˜¯ï¼Œå‡å¦‚ä¸ç¬¦åˆ enable_if è®¾ç½®çš„æ¡ä»¶ï¼Œé‚£ä¹ˆè¯¥æ¨¡æ¿ä¼šè¢«ç¦ç”¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶å®ç°åœ¨åŸºæœ¬ä¸Šä¹Ÿä¸ç”¨åŸå§‹æ•°ç»„å’Œå­—ç¬¦ä¸²äº†ï¼Œéƒ½ç”¨ std::stringã€std::vectorã€std::arrayã€‚ä½†æ˜¯å‡å¦‚å†™æ¨¡æ¿çš„è¯ï¼Œè¿™äº›å› ç´ è¿˜æ˜¯éœ€è¦è€ƒè™‘è¿›å»ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å¤„ç†è¿”å›å€¼&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸€èˆ¬åœ¨ä¸‹é¢æƒ…å†µä¸‹ï¼Œè¿”å›å€¼ä¼šè¢«å£°æ˜ä¸ºå¼•ç”¨ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;è¿”å›å®¹å™¨æˆ–è€…å­—ç¬¦ä¸²ä¸­çš„å…ƒç´ (eg. operator[]ã€front())&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¿®æ”¹ç±»æˆå‘˜å˜é‡&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é“¾å¼è°ƒç”¨(operator&amp;lt;&amp;lt;ã€operator&amp;gt;&amp;gt;ã€operator=)&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯å°†è¿”å›å€¼å£°æ˜ä¸ºå¼•ç”¨éœ€è¦æ ¼å¤–å°å¿ƒï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;auto&lt;/span&gt;Â sÂ =Â &lt;span&gt;std&lt;/span&gt;::make_shared&amp;lt;&lt;span&gt;std&lt;/span&gt;::&lt;span&gt;string&lt;/span&gt;&amp;gt;(&lt;span&gt;&quot;whatever&quot;&lt;/span&gt;);&lt;br/&gt;&lt;span&gt;auto&lt;/span&gt;&amp;amp;Â cÂ =Â (*s)[&lt;span&gt;0&lt;/span&gt;];&lt;br/&gt;s.reset();&lt;br/&gt;&lt;span&gt;std&lt;/span&gt;::&lt;span&gt;cout&lt;/span&gt;Â &amp;lt;&amp;lt;Â c;Â Â Â Â Â &lt;span&gt;//Â run-timeÂ ERROR&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç¡®ä¿è¿”å›å€¼ä¸ºå€¼ä¼ é€’&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœä½ ç¡®å®æƒ³å°†è¿”å›å€¼å£°æ˜ä¸ºå€¼ä¼ é€’ï¼Œä»…ä»…å£°æ˜ T æ˜¯ä¸å¤Ÿçš„ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;forwarding reference çš„æƒ…å†µï¼Œè¿™ä¸ªä¸Šé¢è®¨è®ºè¿‡&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;template&lt;/span&gt;&amp;lt;&lt;span&gt;typename&lt;/span&gt;Â T&amp;gt;&lt;br/&gt;TÂ &lt;span&gt;retR&lt;/span&gt;&lt;span&gt;(T&amp;amp;&amp;amp;Â p)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â T{...};Â Â Â Â Â Â Â Â &lt;span&gt;//Â OOPS:Â returnsÂ byÂ referenceÂ whenÂ calledÂ forÂ lvalues&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;template&lt;/span&gt;&amp;lt;&lt;span&gt;typename&lt;/span&gt;Â T&amp;gt;Â Â &lt;span&gt;//Â Note:Â TÂ mightÂ becomeÂ aÂ reference&lt;/span&gt;&lt;br/&gt;&lt;span&gt;TÂ &lt;span&gt;retV&lt;/span&gt;&lt;span&gt;(TÂ p)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â T{...};Â &lt;span&gt;//Â OOPS:Â returnsÂ aÂ referenceÂ ifÂ TÂ isÂ aÂ reference&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;int&lt;/span&gt;Â x;&lt;br/&gt;retV&amp;lt;&lt;span&gt;int&lt;/span&gt;&amp;amp;&amp;gt;(x);Â Â Â Â Â &lt;span&gt;//Â retT()Â instantiatedÂ forÂ TÂ asÂ int&amp;amp;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ï¼Œæœ‰ä¸¤ç§æ–¹æ³•æ˜¯å®‰å…¨çš„ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;std::remove_reference&amp;lt;&amp;gt; :&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;template&lt;/span&gt;&amp;lt;&lt;span&gt;typename&lt;/span&gt;Â T&amp;gt;&lt;br/&gt;&lt;span&gt;typename&lt;/span&gt;Â &lt;span&gt;std&lt;/span&gt;::remove_reference&amp;lt;T&amp;gt;::&lt;span&gt;typeÂ &lt;span&gt;retV&lt;/span&gt;&lt;span&gt;(TÂ p)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â T{...};Â Â Â Â Â &lt;span&gt;//Â alwaysÂ returnsÂ byÂ value&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;template&lt;/span&gt;&amp;lt;&lt;span&gt;typename&lt;/span&gt;Â T&amp;gt;&lt;br/&gt;&lt;span&gt;auto&lt;/span&gt;Â &lt;span&gt;retV&lt;/span&gt;&lt;span&gt;(TÂ p)&lt;/span&gt;Â Â &lt;/span&gt;{Â Â Â Â Â &lt;span&gt;//Â by-valueÂ returnÂ typeÂ deducedÂ byÂ compiler&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â T{...};Â Â Â Â Â Â &lt;span&gt;//Â alwaysÂ returnsÂ byÂ value&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¹‹å‰æ–‡ç« è®¨è®ºè¿‡ auto æ¨æ–­ç±»å‹çš„è§„åˆ™ï¼Œä¼šå¿½ç•¥å¼•ç”¨ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æ¨¡æ¿å‚æ•°å£°æ˜çš„æ¨è&lt;/h2&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;æŒ‰å€¼ä¼ é€’&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;æ•°ç»„å’Œå­—ç¬¦ä¸²ä¼š decayã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ€§èƒ½é—®é¢˜(å¯ä»¥ä½¿ç”¨ std::ref å’Œ std::cref æ¥é¿å…ï¼Œä½†æ˜¯è¦å°å¿ƒè¿™ä¹ˆåšæ˜¯æœ‰æ•ˆçš„)ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;æŒ‰å¼•ç”¨ä¼ é€’&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;æ€§èƒ½æ›´å¥½ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;éœ€è¦ forwarding referencesï¼Œå¹¶ä¸”æ³¨æ„æ­¤æ—¶æ¨¡æ¿å‚æ•°ä¸ºéšå¼çš„å¼•ç”¨ç±»å‹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;éœ€è¦å¯¹å‚æ•°æ˜¯æ•°ç»„å’Œå­—ç¬¦ä¸²çš„æƒ…å†µé¢å¤–å…³æ³¨ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¸€èˆ¬æ€§å»ºè®®&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹åº”æ¨¡æ¿å‚æ•°ï¼Œä¸€èˆ¬å»ºè®®å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨æŒ‰å€¼ä¼ é€’ã€‚ç†ç”±ï¼š&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ç®€å•ï¼Œå°¤å…¶æ˜¯å¯¹äºå‚æ•°æ˜¯æ•°ç»„å’Œå­—ç¬¦ä¸²çš„æƒ…å†µã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¯¹äºå°å¯¹è±¡è€Œè¨€ï¼Œæ€§èƒ½ä¹Ÿä¸é”™ã€‚è°ƒç”¨è€…å¯ä»¥ä½¿ç”¨ std::ref å’Œ std::cref.&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;æœ‰å¦‚ä¸‹ç†ç”±æ—¶ï¼Œä½¿ç”¨æŒ‰å¼•ç”¨ä¼ é€’ï¼š&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;éœ€è¦å‡½æ•°æ”¹å˜å‚æ•°çš„å€¼ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;éœ€è¦ perfect forwardingã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ‹·è´å‚æ•°çš„æ€§èƒ½ä¸å¥½ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;å¦‚æœä½ å¯¹è‡ªå·±çš„ç¨‹åºè¶³å¤Ÿäº†è§£ï¼Œå½“ç„¶å¯ä»¥ä¸éµå®ˆä¸Šé¢çš„å»ºè®®ï¼Œä½†æ˜¯ä¸è¦ä»…å‡­ç›´è§‰å°±å¯¹æ€§èƒ½åšè¯„ä¼°ã€‚æœ€å¥½çš„æ–¹æ³•æ˜¯ï¼šæµ‹è¯•ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¸è¦å°†æ¨¡æ¿å‚æ•°è®¾è®¡çš„å¤ªé€šç”¨&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯”å¦‚ä½ çš„æ¨¡æ¿å‡½æ•°åªæƒ³æ¥å— vectorï¼Œé‚£ä¹ˆå®Œå…¨å¯ä»¥å®šä¹‰æˆï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;template&lt;/span&gt;&amp;lt;&lt;span&gt;typename&lt;/span&gt;Â T&amp;gt;&lt;br/&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;printVector&lt;/span&gt;Â &lt;span&gt;(&lt;span&gt;const&lt;/span&gt;Â &lt;span&gt;std&lt;/span&gt;::&lt;span&gt;vector&lt;/span&gt;&amp;lt;T&amp;gt;&amp;amp;Â v)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â ...&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œå°±æ²¡æœ‰å¿…è¦å®šä¹‰ä¸º&lt;code&gt;const T&amp;amp; v&lt;/code&gt;.&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;std::make_pair()æ¨¡æ¿å‚æ•°å†å²æ¼”è¿›&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;std::make_pair()&lt;/code&gt;æ˜¯ä¸€ä¸ªå¾ˆå¥½æ¼”ç¤ºæ¨¡æ¿å‚æ•°æœºåˆ¶çš„ä¾‹å­ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;åœ¨ C++98 ä¸­ï¼Œ&lt;code&gt;make_pair&amp;lt;&amp;gt;()&lt;/code&gt;çš„å‚æ•°è¢«è®¾è®¡ä¸ºæŒ‰å¼•ç”¨ä¼ é€’æ¥é¿å…ä¸å¿…è¦çš„æ‹·è´ï¼š&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;template&lt;/span&gt;&amp;lt;&lt;span&gt;typename&lt;/span&gt;Â T1,Â &lt;span&gt;typename&lt;/span&gt;Â T2&amp;gt;&lt;br/&gt;pair&amp;lt;T1,T2&amp;gt;Â &lt;span&gt;make_pair&lt;/span&gt;Â &lt;span&gt;(T1Â &lt;span&gt;const&lt;/span&gt;&amp;amp;Â a,Â T2Â &lt;span&gt;const&lt;/span&gt;&amp;amp;Â b)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â pair&amp;lt;T1,T2&amp;gt;(a,b);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯å½“ä½¿ç”¨å­˜å‚¨ä¸åŒé•¿åº¦çš„å­—ç¬¦ä¸²æˆ–è€…æ•°ç»„æ—¶ï¼Œè¿™æ ·åšä¼šå¯¼è‡´ä¸¥é‡çš„é—®é¢˜ã€‚è¿™ä¸ªé—®é¢˜è®°å½•åœ¨&lt;span&gt;See C++ library issue 181 [LibIssue181]&lt;/span&gt;&lt;sup&gt;[3]&lt;/sup&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;template&lt;/span&gt;&amp;lt;&lt;span&gt;typename&lt;/span&gt;Â T1,Â &lt;span&gt;typename&lt;/span&gt;Â T2&amp;gt;&lt;br/&gt;pair&amp;lt;T1,T2&amp;gt;Â &lt;span&gt;make_pair&lt;/span&gt;Â &lt;span&gt;(T1Â a,Â T2Â b)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â pair&amp;lt;T1,T2&amp;gt;(a,b);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;C++11 å¼•å…¥äº†ç§»åŠ¨è¯­ä¹‰ï¼Œäºæ˜¯å®šä¹‰åˆæ”¹ä¸º(çœŸå®å®šä¹‰è¦æ¯”è¿™ä¸ªå¤æ‚ä¸€äº›)ï¼š&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;template&lt;/span&gt;Â &amp;lt;&lt;span&gt;typename&lt;/span&gt;Â T1,Â &lt;span&gt;typename&lt;/span&gt;Â T2&amp;gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;constexpr&lt;/span&gt;Â pair&amp;lt;&lt;span&gt;typename&lt;/span&gt;Â decay&amp;lt;T1&amp;gt;::type,Â &lt;span&gt;typename&lt;/span&gt;Â decay&amp;lt;T2&amp;gt;::type&amp;gt;&lt;br/&gt;&lt;span&gt;make_pair&lt;/span&gt;&lt;span&gt;(T1Â &amp;amp;&amp;amp;a,Â T2Â &amp;amp;&amp;amp;b)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â pair&amp;lt;&lt;span&gt;typename&lt;/span&gt;Â decay&amp;lt;T1&amp;gt;::type,Â &lt;span&gt;typename&lt;/span&gt;Â decay&amp;lt;T2&amp;gt;::type&amp;gt;(&lt;br/&gt;Â Â Â Â Â Â forward&amp;lt;T1&amp;gt;(a),Â forward&amp;lt;T2&amp;gt;(b));&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ ‡å‡†åº“ä¸­ perfect forward å’Œ std::decay æ˜¯å¸¸è§çš„æ­é…ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;(å®Œ)&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å‚è€ƒèµ„æ–™&lt;/span&gt;&lt;/h3&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;span&gt;[1]&lt;/span&gt;&lt;p&gt;Mandatory Copy Elision or Passing Unmaterialized Objects: &lt;em&gt;http://www.cplusplus2017.info/c17-guaranted-copy-elision/&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[2]&lt;/span&gt;&lt;p&gt;è§„åˆ™: &lt;em&gt;https://stackoverflow.com/questions/1565600/how-come-a-non-const-reference-cannot-bind-to-a-temporary-object&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;[3]&lt;/span&gt;&lt;p&gt;See C++ library issue 181 [LibIssue181]: &lt;em&gt;https://cplusplus.github.io/LWG/issue181&lt;/em&gt;&lt;/p&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>