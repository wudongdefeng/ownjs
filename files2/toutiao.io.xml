<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>ea98bbbf4a8715aa97dc73942cff23b8</guid>
<title>SQL 常用脚本大全</title>
<link>https://toutiao.io/k/5nnfmun</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content js_underline_content             autoTypeSetting24psection&amp;#10;            &quot; id=&quot;js_content&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;pre&gt;&lt;section data-class=&quot;mb-formate mb-quickformate-head&quot;&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;👇点击“&lt;/span&gt;&lt;span&gt;大数据技术团队&lt;/span&gt;&lt;span&gt;”，一键关注&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mp-common-profile class=&quot;custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mp-common-profile&quot; data-from=&quot;0&quot; data-id=&quot;MzA3MDAxNzY4OQ==&quot; data-alias=&quot;DT_lovers&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/pDnsbKziazM71Wp5E3LrgBz5VRytf1tvicemrRrlaXXtyicVxEQoAib2OnvVOPrdexUqepsEicxNOu6SCCiczgQ3h0wg/0?wx_fmt=png&quot; data-nickname=&quot;大数据技术团队&quot; data-signature=&quot;专注大数据、数据分析、数据仓库、数据中台、数据科学、Flink，AI人工智能与面试经验，副业赚钱与职业规划。&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;上一篇：&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzA3MDAxNzY4OQ==&amp;amp;mid=2247496763&amp;amp;idx=1&amp;amp;sn=7e0d99bd5fdf2a7e313d872c7b029d89&amp;amp;chksm=9ec183cda9b60adb960f0b6e22824ed47c16e8f87d23e88f3c6a0d7f3d9b9bf81e50f5481b72&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;Spark大数据开发中最佳实践&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; hasload=&quot;1&quot;&gt;Spark大数据开发中最佳实践&lt;/a&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;strong/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/pre&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;1、行转列的用法PIVOT&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;CREATE&lt;/span&gt; &lt;span&gt;table&lt;/span&gt; &lt;span&gt;test&lt;/span&gt;&lt;br/&gt;(&lt;span&gt;id&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;,&lt;span&gt;name&lt;/span&gt; &lt;span&gt;nvarchar&lt;/span&gt;(&lt;span&gt;20&lt;/span&gt;),&lt;span&gt;quarter&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;,&lt;span&gt;number&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;insert&lt;/span&gt; &lt;span&gt;into&lt;/span&gt; &lt;span&gt;test&lt;/span&gt; &lt;span&gt;values&lt;/span&gt;(&lt;span&gt;1&lt;/span&gt;,N&lt;span&gt;&#x27;苹果&#x27;&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;1000&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;insert&lt;/span&gt; &lt;span&gt;into&lt;/span&gt; &lt;span&gt;test&lt;/span&gt; &lt;span&gt;values&lt;/span&gt;(&lt;span&gt;1&lt;/span&gt;,N&lt;span&gt;&#x27;苹果&#x27;&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;2000&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;insert&lt;/span&gt; &lt;span&gt;into&lt;/span&gt; &lt;span&gt;test&lt;/span&gt; &lt;span&gt;values&lt;/span&gt;(&lt;span&gt;1&lt;/span&gt;,N&lt;span&gt;&#x27;苹果&#x27;&lt;/span&gt;,&lt;span&gt;3&lt;/span&gt;,&lt;span&gt;4000&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;insert&lt;/span&gt; &lt;span&gt;into&lt;/span&gt; &lt;span&gt;test&lt;/span&gt; &lt;span&gt;values&lt;/span&gt;(&lt;span&gt;1&lt;/span&gt;,N&lt;span&gt;&#x27;苹果&#x27;&lt;/span&gt;,&lt;span&gt;4&lt;/span&gt;,&lt;span&gt;5000&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;insert&lt;/span&gt; &lt;span&gt;into&lt;/span&gt; &lt;span&gt;test&lt;/span&gt; &lt;span&gt;values&lt;/span&gt;(&lt;span&gt;2&lt;/span&gt;,N&lt;span&gt;&#x27;梨子&#x27;&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;3000&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;insert&lt;/span&gt; &lt;span&gt;into&lt;/span&gt; &lt;span&gt;test&lt;/span&gt; &lt;span&gt;values&lt;/span&gt;(&lt;span&gt;2&lt;/span&gt;,N&lt;span&gt;&#x27;梨子&#x27;&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;3500&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;insert&lt;/span&gt; &lt;span&gt;into&lt;/span&gt; &lt;span&gt;test&lt;/span&gt; &lt;span&gt;values&lt;/span&gt;(&lt;span&gt;2&lt;/span&gt;,N&lt;span&gt;&#x27;梨子&#x27;&lt;/span&gt;,&lt;span&gt;3&lt;/span&gt;,&lt;span&gt;4200&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;insert&lt;/span&gt; &lt;span&gt;into&lt;/span&gt; &lt;span&gt;test&lt;/span&gt; &lt;span&gt;values&lt;/span&gt;(&lt;span&gt;2&lt;/span&gt;,N&lt;span&gt;&#x27;梨子&#x27;&lt;/span&gt;,&lt;span&gt;4&lt;/span&gt;,&lt;span&gt;5500&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;select&lt;/span&gt; * &lt;span&gt;from&lt;/span&gt; &lt;span&gt;test&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;结果：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6666666666666666&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;306&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qEUh5WRfId9Co9egticO1ibAGsXK24scIu5V8FNWjScqdo6xIlKdCEz2FY3qxeDsRNKJib3Jt8mFLUFA/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;ID&lt;/span&gt;,&lt;span&gt;NAME&lt;/span&gt;,&lt;br/&gt;[&lt;span&gt;1&lt;/span&gt;] &lt;span&gt;as&lt;/span&gt; &lt;span&gt;&#x27;一季度&#x27;&lt;/span&gt;,&lt;br/&gt;[&lt;span&gt;2&lt;/span&gt;] &lt;span&gt;as&lt;/span&gt; &lt;span&gt;&#x27;二季度&#x27;&lt;/span&gt;,&lt;br/&gt;[&lt;span&gt;3&lt;/span&gt;] &lt;span&gt;as&lt;/span&gt; &lt;span&gt;&#x27;三季度&#x27;&lt;/span&gt;,&lt;br/&gt;[&lt;span&gt;4&lt;/span&gt;] &lt;span&gt;as&lt;/span&gt; &lt;span&gt;&#x27;四季度&#x27;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;from&lt;/span&gt;&lt;br/&gt;&lt;span&gt;test&lt;/span&gt;&lt;br/&gt;&lt;span&gt;pivot&lt;/span&gt;&lt;br/&gt;(&lt;br/&gt;&lt;span&gt;sum&lt;/span&gt;(&lt;span&gt;number&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; &lt;span&gt;quarter&lt;/span&gt; &lt;span&gt;in&lt;/span&gt;&lt;br/&gt;([&lt;span&gt;1&lt;/span&gt;],[&lt;span&gt;2&lt;/span&gt;],[&lt;span&gt;3&lt;/span&gt;],[&lt;span&gt;4&lt;/span&gt;])&lt;br/&gt;)&lt;br/&gt;&lt;span&gt;as&lt;/span&gt; pvt&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;结果：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6666666666666666&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;485&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qEUh5WRfId9Co9egticO1ibAGh2Sq6gfoAdGcgJaPeTqibfQF8TADnJc3sb8Ylf4DepLWudJXmF1FnZA/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2、列转行的用法UNPIOVT&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;create&lt;/span&gt; &lt;span&gt;table&lt;/span&gt; test2&lt;br/&gt;(&lt;span&gt;id&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;,&lt;span&gt;name&lt;/span&gt; &lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;20&lt;/span&gt;), Q1 &lt;span&gt;int&lt;/span&gt;, Q2 &lt;span&gt;int&lt;/span&gt;, Q3 &lt;span&gt;int&lt;/span&gt;, Q4 &lt;span&gt;int&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;insert&lt;/span&gt; &lt;span&gt;into&lt;/span&gt; test2 &lt;span&gt;values&lt;/span&gt;(&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;&#x27;苹果&#x27;&lt;/span&gt;,&lt;span&gt;1000&lt;/span&gt;,&lt;span&gt;2000&lt;/span&gt;,&lt;span&gt;4000&lt;/span&gt;,&lt;span&gt;5000&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;insert&lt;/span&gt; &lt;span&gt;into&lt;/span&gt; test2 &lt;span&gt;values&lt;/span&gt;(&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;&#x27;梨子&#x27;&lt;/span&gt;,&lt;span&gt;3000&lt;/span&gt;,&lt;span&gt;3500&lt;/span&gt;,&lt;span&gt;4200&lt;/span&gt;,&lt;span&gt;5500&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;select&lt;/span&gt; * &lt;span&gt;from&lt;/span&gt; test2&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;结果：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6666666666666666&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;383&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qEUh5WRfId9Co9egticO1ibAGP24a8l7jiaGejGOZ5ibiaEHJIbovb5aGntkkODllicY2UPtJrlnKPGq7Jw/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;--列转行&lt;/span&gt;&lt;br/&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;id&lt;/span&gt;,&lt;span&gt;name&lt;/span&gt;,&lt;span&gt;quarter&lt;/span&gt;,&lt;span&gt;number&lt;/span&gt;&lt;br/&gt;&lt;span&gt;from&lt;/span&gt;&lt;br/&gt;test2&lt;br/&gt;&lt;span&gt;unpivot&lt;/span&gt;&lt;br/&gt;(&lt;br/&gt;&lt;span&gt;number&lt;/span&gt;&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; &lt;span&gt;quarter&lt;/span&gt; &lt;span&gt;in&lt;/span&gt;&lt;br/&gt;([Q1],[Q2],[Q3],[Q4])&lt;br/&gt;)&lt;br/&gt;&lt;span&gt;as&lt;/span&gt; unpvt&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;结果：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6666666666666666&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;311&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qEUh5WRfId9Co9egticO1ibAGlXPX8Y7uOJwwQicSaHrKEO8ibTN4coLibia4Bhvf9HXsxoiaJqVxqkCSNyg/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;3、字符串替换SUBSTRING/REPLACE&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;REPLACE&lt;/span&gt;(&lt;span&gt;&#x27;abcdefg&#x27;&lt;/span&gt;,&lt;span&gt;SUBSTRING&lt;/span&gt;(&lt;span&gt;&#x27;abcdefg&#x27;&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;4&lt;/span&gt;),&lt;span&gt;&#x27;**&#x27;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;结果：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6666666666666666&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;130&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qEUh5WRfId9Co9egticO1ibAGNqnZ8Vsx2yyGqD7woXIjToruQl1gibJQZn91u5vDhH0ofjYcvdwKqTA/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;REPLACE&lt;/span&gt;(&lt;span&gt;&#x27;13512345678&#x27;&lt;/span&gt;,&lt;span&gt;SUBSTRING&lt;/span&gt;(&lt;span&gt;&#x27;13512345678&#x27;&lt;/span&gt;,&lt;span&gt;4&lt;/span&gt;,&lt;span&gt;11&lt;/span&gt;),&lt;span&gt;&#x27;********&#x27;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;结果：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6666666666666666&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;167&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qEUh5WRfId9Co9egticO1ibAGWAV8GzhLI6gibiajCnxUnlbQXVG1hF7Wn0IvNLsTJJToQmSHx2jQvTew/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;REPLACE&lt;/span&gt;(&lt;span&gt;&#x27;12345678@qq.com&#x27;&lt;/span&gt;,&lt;span&gt;&#x27;1234567&#x27;&lt;/span&gt;,&lt;span&gt;&#x27;******&#x27;&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;结果：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6666666666666666&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;197&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qEUh5WRfId9Co9egticO1ibAGFXe6dF4MO0pBoAPwenoSy3PBzhewUztEOutlrSRqh3FalQNia0O6OibQ/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;4、查询一个表内相同纪录 HAVING&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;如果一个ID可以区分的话，可以这么写&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;SELECT&lt;/span&gt; * &lt;span class=&quot;code-snippet__keyword&quot;&gt;FROM&lt;/span&gt; HR.Employees&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;结果：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6666666666666666&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;842&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qEUh5WRfId9Co9egticO1ibAGNgU6wTu9ImglkGNfomXHiacRwjuMTQvaV8uIT8I95eWBABBHB5Ik1ng/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;select&lt;/span&gt; * &lt;span&gt;from&lt;/span&gt; HR.Employees&lt;br/&gt;&lt;span&gt;where&lt;/span&gt; title &lt;span&gt;in&lt;/span&gt; (&lt;br/&gt;&lt;span&gt;select&lt;/span&gt; title &lt;span&gt;from&lt;/span&gt; HR.Employees&lt;br/&gt;&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; title&lt;br/&gt;&lt;span&gt;having&lt;/span&gt; &lt;span&gt;count&lt;/span&gt;(&lt;span&gt;1&lt;/span&gt;)&amp;gt;&lt;span&gt;1&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;span&gt;结果：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6666666666666666&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;829&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qEUh5WRfId9Co9egticO1ibAGNVgibw1uGwJ5fPUpHNpnN9TGjfRP2GKBvFXeCD6ceibeXfqiawQWp8Nibg/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;对比一下发现，ID为1,2的被过滤掉了，因为他们只有一条记录&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;如果几个ID才能区分的话，可以这么写&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;select&lt;/span&gt; * &lt;span&gt;from&lt;/span&gt; HR.Employees&lt;br/&gt;&lt;span&gt;where&lt;/span&gt; title+titleofcourtesy &lt;span&gt;in&lt;/span&gt;&lt;br/&gt;(&lt;span&gt;select&lt;/span&gt; title+titleofcourtesy&lt;br/&gt;&lt;span&gt;from&lt;/span&gt; HR.Employees&lt;br/&gt;&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; title,titleofcourtesy&lt;br/&gt;&lt;span&gt;having&lt;/span&gt; &lt;span&gt;count&lt;/span&gt;(&lt;span&gt;1&lt;/span&gt;)&amp;gt;&lt;span&gt;1&lt;/span&gt;)&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;span&gt;结果：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6666666666666666&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;829&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qEUh5WRfId9Co9egticO1ibAG4tkXiaic86fZiabKcArIfy8NZPYMoGcPqHrH2OWevQVYGKjfgJ18ibquZQ/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;title在和titleofcourtesy进行拼接后符合条件的就只有ID为6,7,8,9的了&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;5、把多行SQL数据变成一条多列数据，即新增列&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;br/&gt; &lt;span&gt;id&lt;/span&gt;,&lt;br/&gt; &lt;span&gt;name&lt;/span&gt;,&lt;br/&gt; &lt;span&gt;SUM&lt;/span&gt;(&lt;span&gt;CASE&lt;/span&gt; &lt;span&gt;WHEN&lt;/span&gt; &lt;span&gt;quarter&lt;/span&gt;=&lt;span&gt;1&lt;/span&gt; &lt;span&gt;THEN&lt;/span&gt; &lt;span&gt;number&lt;/span&gt; &lt;span&gt;ELSE&lt;/span&gt; &lt;span&gt;0&lt;/span&gt; &lt;span&gt;END&lt;/span&gt;) &lt;span&gt;&#x27;一季度&#x27;&lt;/span&gt;,&lt;br/&gt; &lt;span&gt;SUM&lt;/span&gt;(&lt;span&gt;CASE&lt;/span&gt; &lt;span&gt;WHEN&lt;/span&gt; &lt;span&gt;quarter&lt;/span&gt;=&lt;span&gt;2&lt;/span&gt; &lt;span&gt;THEN&lt;/span&gt; &lt;span&gt;number&lt;/span&gt; &lt;span&gt;ELSE&lt;/span&gt; &lt;span&gt;0&lt;/span&gt; &lt;span&gt;END&lt;/span&gt;) &lt;span&gt;&#x27;二季度&#x27;&lt;/span&gt;,&lt;br/&gt; &lt;span&gt;SUM&lt;/span&gt;(&lt;span&gt;CASE&lt;/span&gt; &lt;span&gt;WHEN&lt;/span&gt; &lt;span&gt;quarter&lt;/span&gt;=&lt;span&gt;3&lt;/span&gt; &lt;span&gt;THEN&lt;/span&gt; &lt;span&gt;number&lt;/span&gt; &lt;span&gt;ELSE&lt;/span&gt; &lt;span&gt;0&lt;/span&gt; &lt;span&gt;END&lt;/span&gt;) &lt;span&gt;&#x27;三季度&#x27;&lt;/span&gt;,&lt;br/&gt; &lt;span&gt;SUM&lt;/span&gt;(&lt;span&gt;CASE&lt;/span&gt; &lt;span&gt;WHEN&lt;/span&gt; &lt;span&gt;quarter&lt;/span&gt;=&lt;span&gt;4&lt;/span&gt; &lt;span&gt;THEN&lt;/span&gt; &lt;span&gt;number&lt;/span&gt; &lt;span&gt;ELSE&lt;/span&gt; &lt;span&gt;0&lt;/span&gt; &lt;span&gt;END&lt;/span&gt;) &lt;span&gt;&#x27;四季度&#x27;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;FROM&lt;/span&gt; &lt;span&gt;test&lt;/span&gt;&lt;br/&gt;&lt;span&gt;GROUP&lt;/span&gt; &lt;span&gt;BY&lt;/span&gt; &lt;span&gt;id&lt;/span&gt;,&lt;span&gt;name&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;结果：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-copyright=&quot;0&quot; data-ratio=&quot;0.6666666666666666&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;485&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qEUh5WRfId9Co9egticO1ibAGh2Sq6gfoAdGcgJaPeTqibfQF8TADnJc3sb8Ylf4DepLWudJXmF1FnZA/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我们将原来的4列增加到了6列。细心的朋友可能发现了这个结果和上面的行转列怎么一模一样？其实上面的行转列是省略写法，这种是比较通用的写法。 &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;6、表复制&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;语法1：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;Insert INTO table(field1,field2,...) values(value1,value2,...)&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;语法2：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;Insert into Table2(field1,field2,...) select value1,value2,... from &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Table1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;（要求目标表Table2必须存在，由于目标表Table2已经存在，所以我们除了插入源表Table1的字段外，还可以插入常量。）&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;语法3：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;SELECT vale1, value2 into Table2 from Table1&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;（要求目标表Table2不存在，因为在插入时会自动创建表Table2，并将Table1中指定字段数据复制到Table2中。）&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;语法4：&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;使用导入导出功能进行全表复制。如果是使用【编写查询以指定要传输的数据】，那么在大数据表的复制就会有问题？因为复制到一定程度就不再动了，内存爆了？它也没有写入到表中。而使用上面3种语法直接执行是会马上刷新到数据库表中的，你刷新一下mdf文件就知道了。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;7、利用带关联子查询Update语句更新数据&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;--方法1：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Update&lt;/span&gt; Table1&lt;br/&gt;&lt;span&gt;set&lt;/span&gt; c = (&lt;span&gt;select&lt;/span&gt; c &lt;span&gt;from&lt;/span&gt; Table2 &lt;span&gt;where&lt;/span&gt; a = Table1.a)&lt;br/&gt;&lt;span&gt;where&lt;/span&gt; c &lt;span&gt;is&lt;/span&gt; &lt;span&gt;null&lt;/span&gt; &lt;br/&gt;&lt;br/&gt;&lt;span&gt;--方法2：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;update&lt;/span&gt;  A&lt;br/&gt;&lt;span&gt;set&lt;/span&gt;  newqiantity=B.qiantity&lt;br/&gt;&lt;span&gt;from&lt;/span&gt;  A,B&lt;br/&gt;&lt;span&gt;where&lt;/span&gt;  A.bnum=B.bnum&lt;br/&gt;&lt;br/&gt;&lt;span&gt;--方法3：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;update&lt;/span&gt;&lt;br/&gt;(&lt;span&gt;select&lt;/span&gt; A.bnum ,A.newqiantity,B.qiantity &lt;span&gt;from&lt;/span&gt; A&lt;br/&gt;&lt;span&gt;left&lt;/span&gt; &lt;span&gt;join&lt;/span&gt; B &lt;span&gt;on&lt;/span&gt; A.bnum=B.bnum) &lt;span&gt;AS&lt;/span&gt; C&lt;br/&gt;&lt;span&gt;set&lt;/span&gt; C.newqiantity = C.qiantity&lt;br/&gt;&lt;span&gt;where&lt;/span&gt; C.bnum =&lt;span&gt;&#x27;001&#x27;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;8、连接远程服务器&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;--方法1：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;select&lt;/span&gt; *  &lt;span&gt;from&lt;/span&gt; openrowset(&lt;br/&gt;&lt;span&gt;&#x27;SQLOLEDB&#x27;&lt;/span&gt;,&lt;br/&gt;&lt;span&gt;&#x27;server=192.168.0.1;uid=sa;pwd=password&#x27;&lt;/span&gt;,&lt;br/&gt;&lt;span&gt;&#x27;SELECT * FROM dbo.test&#x27;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;--方法2：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;select&lt;/span&gt; *  &lt;span&gt;from&lt;/span&gt; openrowset(&lt;br/&gt;&lt;span&gt;&#x27;SQLOLEDB&#x27;&lt;/span&gt;,&lt;br/&gt;&lt;span&gt;&#x27;192.168.0.1&#x27;&lt;/span&gt;;&lt;br/&gt;&#x27;sa&#x27;;&lt;br/&gt;&#x27;password&#x27;,&lt;br/&gt;&#x27;&lt;span&gt;SELECT&lt;/span&gt; * &lt;span&gt;FROM&lt;/span&gt; dbo.test&lt;span&gt;&#x27;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;当然也可以参考以前的示例，建立DBLINK进行远程连接&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;9、Date 和 Time 样式 CONVERT&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;h2&gt;&lt;span&gt;CONVERT() 函数是把日期转换为新数据类型的通用函数。&lt;br/&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;CONVERT() 函数可以用不同的格式显示日期/时间数据。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;语法&lt;/span&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;span&gt;CONVERT(data_type(length),data_to_be_converted,style)&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;span&gt;data_type(length) 规定目标数据类型（带有可选的长度）。data_to_be_converted 含有需要转换的值。style 规定日期/时间的输出格式。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;可以使用的 style 值：&lt;/span&gt;&lt;/p&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;th&gt;&lt;span&gt;Style ID&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;Style 格式&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;100 或者 0&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;mon dd yyyy hh:miAM （或者 PM）&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;101&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;mm/dd/yy&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;102&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;yy.mm.dd&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;103&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;dd/mm/yy&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;104&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;dd.mm.yy&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;105&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;dd-mm-yy&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;106&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;dd mon yy&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;107&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;Mon dd, yy&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;108&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;hh:mm:ss&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;109 或者 9&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;mon dd yyyy hh:mi:ss:mmmAM（或者 PM）&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;110&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;mm-dd-yy&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;111&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;yy/mm/dd&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;112&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;yymmdd&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;113 或者 13&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;dd mon yyyy hh:mm:ss:mmm(24h)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;114&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;hh:mi:ss:mmm(24h)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;120 或者 20&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;yyyy-mm-dd hh:mi:ss(24h)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;121 或者 21&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;yyyy-mm-dd hh:mi:ss.mmm(24h)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;126&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;yyyy-mm-ddThh:mm:ss.mmm（没有空格）&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;130&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;dd mon yyyy hh:mi:ss:mmmAM&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;131&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;dd/mm/yy hh:mi:ss:mmmAM&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;100&lt;/span&gt;), &lt;span&gt;GETDATE&lt;/span&gt;(), &lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;12&lt;/span&gt;  &lt;span&gt;7&lt;/span&gt; &lt;span&gt;2020&lt;/span&gt;  &lt;span&gt;9&lt;/span&gt;:&lt;span&gt;33&lt;/span&gt;PM&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;100&lt;/span&gt;), &lt;span&gt;GETDATE&lt;/span&gt;(), &lt;span&gt;1&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;12&lt;/span&gt;/&lt;span&gt;07&lt;/span&gt;/&lt;span&gt;20&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;100&lt;/span&gt;), &lt;span&gt;GETDATE&lt;/span&gt;(), &lt;span&gt;2&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;20.12&lt;/span&gt;&lt;span&gt;.07&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;100&lt;/span&gt;), &lt;span&gt;GETDATE&lt;/span&gt;(), &lt;span&gt;3&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;07&lt;/span&gt;/&lt;span&gt;12&lt;/span&gt;/&lt;span&gt;20&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;100&lt;/span&gt;), &lt;span&gt;GETDATE&lt;/span&gt;(), &lt;span&gt;4&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;07.12&lt;/span&gt;&lt;span&gt;.20&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;100&lt;/span&gt;), &lt;span&gt;GETDATE&lt;/span&gt;(), &lt;span&gt;5&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;07&lt;/span&gt;&lt;span&gt;-12&lt;/span&gt;&lt;span&gt;-20&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;100&lt;/span&gt;), &lt;span&gt;GETDATE&lt;/span&gt;(), &lt;span&gt;6&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;07&lt;/span&gt; &lt;span&gt;12&lt;/span&gt; &lt;span&gt;20&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;100&lt;/span&gt;), &lt;span&gt;GETDATE&lt;/span&gt;(), &lt;span&gt;7&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;12&lt;/span&gt; &lt;span&gt;07&lt;/span&gt;, &lt;span&gt;20&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;100&lt;/span&gt;), &lt;span&gt;GETDATE&lt;/span&gt;(), &lt;span&gt;8&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;21&lt;/span&gt;:&lt;span&gt;33&lt;/span&gt;:&lt;span&gt;18&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;100&lt;/span&gt;), &lt;span&gt;GETDATE&lt;/span&gt;(), &lt;span&gt;9&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;12&lt;/span&gt;  &lt;span&gt;7&lt;/span&gt; &lt;span&gt;20&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;  &lt;span&gt;9&lt;/span&gt;:&lt;span&gt;33&lt;/span&gt;:&lt;span&gt;18&lt;/span&gt;:&lt;span&gt;780&lt;/span&gt;PM&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;100&lt;/span&gt;), &lt;span&gt;GETDATE&lt;/span&gt;(), &lt;span&gt;10&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;12&lt;/span&gt;&lt;span&gt;-0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt;&lt;span&gt;-&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;100&lt;/span&gt;), &lt;span&gt;GETDATE&lt;/span&gt;(), &lt;span&gt;11&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;/&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;12&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;20&lt;/span&gt;120&lt;span&gt;7&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;13&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt; &lt;span&gt;12&lt;/span&gt; &lt;span&gt;20&lt;span&gt;20&lt;/span&gt;&lt;/span&gt; &lt;span&gt;21&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;780&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;14&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;21&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;780&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;20&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;20&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;&lt;span&gt;-12&lt;/span&gt;&lt;span&gt;-0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt; &lt;span&gt;21&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;21&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;20&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;&lt;span&gt;-12&lt;/span&gt;&lt;span&gt;-0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt; &lt;span&gt;21&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;18.780&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;22&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;12&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;&lt;span&gt; PM&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;23&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;20&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;&lt;span&gt;-12&lt;/span&gt;&lt;span&gt;-0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;24&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;21&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;25&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;20&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;&lt;span&gt;-12&lt;/span&gt;&lt;span&gt;-0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt; &lt;span&gt;21&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;18.780&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;12&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&lt;span&gt;7&lt;/span&gt;&lt;/span&gt; &lt;span&gt;20&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;&lt;span&gt;PM&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;101&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;12&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;20&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;102&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;20&lt;span&gt;20&lt;/span&gt;.12&lt;/span&gt;&lt;span&gt;.0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;103&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;20&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;104&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;0&lt;span&gt;7&lt;/span&gt;.12&lt;/span&gt;&lt;span&gt;.20&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;105&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt;&lt;span&gt;-12&lt;/span&gt;&lt;span&gt;-20&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;106&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt; &lt;span&gt;12&lt;/span&gt; &lt;span&gt;20&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;107&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;12&lt;/span&gt; &lt;span&gt;0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;20&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;108&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;21&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;109&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;12&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&lt;span&gt;7&lt;/span&gt;&lt;/span&gt; &lt;span&gt;20&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;780&lt;/span&gt;&lt;span&gt;PM&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;110&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;12&lt;/span&gt;&lt;span&gt;-0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt;&lt;span&gt;-20&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;111&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;20&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;112&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;20&lt;span&gt;20&lt;/span&gt;120&lt;span&gt;7&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;113&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt; &lt;span&gt;12&lt;/span&gt; &lt;span&gt;20&lt;span&gt;20&lt;/span&gt;&lt;/span&gt; &lt;span&gt;21&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;780&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;114&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;21&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;780&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;120&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;20&lt;span&gt;20&lt;/span&gt;&lt;/span&gt;&lt;span&gt;-12&lt;/span&gt;&lt;span&gt;-0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt; &lt;span&gt;21&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;&lt;span&gt;), &lt;/span&gt;&lt;span&gt;GETDATE&lt;/span&gt;&lt;span&gt;(), &lt;/span&gt;&lt;span&gt;121&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;2020&lt;/span&gt;&lt;span&gt;-12&lt;/span&gt;&lt;span&gt;-0&lt;span&gt;7&lt;/span&gt;&lt;/span&gt; &lt;span&gt;21&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;18.780&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;h3&gt;&lt;span&gt;&lt;strong&gt;10、SQL中的相除&lt;/strong&gt;&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;方法一&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;--SQL中的相除&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;br/&gt;&lt;span&gt;CASE&lt;/span&gt; &lt;span&gt;WHEN&lt;/span&gt; &lt;span&gt;ISNULL&lt;/span&gt;(A-B,&lt;span&gt;0&lt;/span&gt;)=&lt;span&gt;0&lt;/span&gt; &lt;span&gt;THEN&lt;/span&gt; &lt;span&gt;&#x27;&#x27;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;ELSE&lt;/span&gt; &lt;span&gt;CAST&lt;/span&gt;(&lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;DECIMAL&lt;/span&gt;(&lt;span&gt;18&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;),A*&lt;span&gt;100.0&lt;/span&gt;/(A-B)) &lt;span&gt;AS&lt;/span&gt; &lt;span&gt;VARCHAR&lt;/span&gt;(&lt;span&gt;10&lt;/span&gt;))+&lt;span&gt;&#x27;%&#x27;&lt;/span&gt;  &lt;br/&gt;&lt;span&gt;END&lt;/span&gt; &lt;span&gt;AS&lt;/span&gt; &lt;span&gt;&#x27;百分数&#x27;  --FROM 表&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;这里我们先要判断被除数是否为0，如果为0给出一个想输出的结果，这里我们返回空白(是字符类型，不是NULL)，在不为0的时候就给出具体的计算公式，然后转换成字符类型再和“%”进行拼接。例如：&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;br/&gt;&lt;span&gt;CASE&lt;/span&gt; &lt;span&gt;WHEN&lt;/span&gt; &lt;span&gt;ISNULL&lt;/span&gt;(&lt;span&gt;5&lt;/span&gt;&lt;span&gt;-2&lt;/span&gt;,&lt;span&gt;0&lt;/span&gt;)=&lt;span&gt;0&lt;/span&gt; &lt;span&gt;THEN&lt;/span&gt; &lt;span&gt;&#x27;&#x27;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;ELSE&lt;/span&gt; &lt;span&gt;CAST&lt;/span&gt;(&lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;DECIMAL&lt;/span&gt;(&lt;span&gt;18&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;),&lt;span&gt;5&lt;/span&gt;*&lt;span&gt;100.0&lt;/span&gt;/(&lt;span&gt;5&lt;/span&gt;&lt;span&gt;-2&lt;/span&gt;)) &lt;span&gt;AS&lt;/span&gt; &lt;span&gt;VARCHAR&lt;/span&gt;(&lt;span&gt;10&lt;/span&gt;))+&lt;span&gt;&#x27;%&#x27;&lt;/span&gt;  &lt;br/&gt;&lt;span&gt;END&lt;/span&gt; &lt;span&gt;AS&lt;/span&gt; &lt;span&gt;&#x27;百分数&#x27;  --FROM 表&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;返回的结果：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5187165775401069&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;187&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qFyciaK84RPaZSHrZ45up5oiamZQeXQsKJZmlENZDY1s2wQ4OsgiaCrzn2BfHgHlAz6f6UONcHe13GzQ/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;方法二&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;br/&gt;(&lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;VARCHAR&lt;/span&gt;(&lt;span&gt;20&lt;/span&gt;),&lt;span&gt;ROUND&lt;/span&gt;(&lt;span&gt;41&lt;/span&gt;*&lt;span&gt;100.0&lt;/span&gt;/&lt;span&gt;88&lt;/span&gt;,&lt;span&gt;3&lt;/span&gt;))+&lt;span&gt;&#x27;%&#x27;&lt;/span&gt;) &lt;span&gt;AS&lt;/span&gt; &lt;span&gt;&#x27;百分比&#x27;&lt;/span&gt; &lt;br/&gt;&lt;span&gt;--FROM A&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;执行结果：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4732142857142857&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;224&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qFyciaK84RPaZSHrZ45up5oianyC3dy1hlG9uyx7EPQK0c7Bz2lDa44SBZGAiaLQpW7Lnm6T4fSGpgBg/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;11、四舍五入ROUND函数&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ROUND ( numeric_expression , length [ ,function ] )&lt;br data-filtered=&quot;filtered&quot;/&gt;function 必须为 tinyint、smallint  或 int。&lt;br data-filtered=&quot;filtered&quot;/&gt;如果省略 function 或其值为 0（默认值），则将舍入 numeric_expression。&lt;br data-filtered=&quot;filtered&quot;/&gt;如果指定了0以外的值，则将截断 numeric_expression。&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;ROUND&lt;/span&gt;(&lt;span&gt;150.45648&lt;/span&gt;, &lt;span&gt;2&lt;/span&gt;);&lt;br/&gt;&lt;span&gt;--保留小数点后两位，需要四舍五入&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;150.46000&lt;br/&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;ROUND&lt;/span&gt;(&lt;span&gt;150.45648&lt;/span&gt;, &lt;span&gt;2&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;);&lt;br/&gt;&lt;span&gt;--保留小数点后两位，0为默认值，表示进行四舍五入&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;150.46000&lt;br/&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;ROUND&lt;/span&gt;(&lt;span&gt;150.45648&lt;/span&gt;, &lt;span&gt;2&lt;/span&gt;, &lt;span&gt;1&lt;/span&gt;);&lt;br/&gt;&lt;span&gt;--保留小数点后两位，不需要四舍五入，这里除0以外都是有同样的效果，&lt;br/&gt;--与Oracle的TRUNC函数效果相同&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;150.45000&lt;br/&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;ROUND&lt;/span&gt;(&lt;span&gt;150.45648&lt;/span&gt;, &lt;span&gt;2&lt;/span&gt;, &lt;span&gt;2&lt;/span&gt;);&lt;br/&gt;&lt;span&gt;--保留小数点后两位，不需要四舍五入，这里除0以外都是有同样的效果，&lt;br/&gt;--与Oracle的TRUNC函数效果相同&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;150.45000&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;12、对字段出现NULL值的处理&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;方法一&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;--CASE&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;br/&gt;&lt;span&gt;CASE&lt;/span&gt; &lt;span&gt;WHEN&lt;/span&gt;  &lt;span&gt;&#x27;字段名&#x27;&lt;/span&gt; &lt;span&gt;IS&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt; &lt;span&gt;THEN&lt;/span&gt; &lt;span&gt;&#x27;NULL&#x27;&lt;/span&gt; &lt;br/&gt;&lt;span&gt;ELSE&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;VARCHAR&lt;/span&gt;(&lt;span&gt;20&lt;/span&gt;),&lt;span&gt;&#x27;字段名1&#x27;&lt;/span&gt;) &lt;span&gt;END&lt;/span&gt; &lt;br/&gt;&lt;span&gt;AS&lt;/span&gt; &lt;span&gt;&#x27;NewName&#x27;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;字段名&lt;span&gt;1&lt;br/&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;CASE&lt;/span&gt; &lt;span&gt;WHEN&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt; &lt;span&gt;IS&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt; &lt;span&gt;THEN&lt;/span&gt; &lt;span&gt;&#x27;N&#x27;&lt;/span&gt; &lt;br/&gt;&lt;span&gt;ELSE&lt;/span&gt; &lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;VARCHAR&lt;/span&gt;(&lt;span&gt;20&lt;/span&gt;),&lt;span&gt;NULL&lt;/span&gt;) &lt;span&gt;END&lt;/span&gt; &lt;br/&gt;&lt;span&gt;AS&lt;/span&gt; &lt;span&gt;&#x27;NewName&#x27;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;N&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;方法二&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;--SQL Server 2005：COALESCE&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;COALESCE&lt;/span&gt;(&lt;span&gt;&#x27;字符串类型字段&#x27;&lt;/span&gt;,&lt;span&gt;&#x27;N&#x27;&lt;/span&gt;) &lt;span&gt;AS&lt;/span&gt; &lt;span&gt;&#x27;NewName&#x27;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;字符串类型字段&lt;br/&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;COALESCE&lt;/span&gt;(&lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;VARCHAR&lt;/span&gt;(&lt;span&gt;20&lt;/span&gt;),&lt;span&gt;&#x27;非字符串类型字段&#x27;&lt;/span&gt;),&lt;span&gt;&#x27;N&#x27;&lt;/span&gt;) &lt;span&gt;AS&lt;/span&gt; &lt;span&gt;&#x27;NewName&#x27;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;非字符串类型字段&lt;br/&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;COALESCE&lt;/span&gt;(&lt;span&gt;CONVERT&lt;/span&gt;(&lt;span&gt;VARCHAR&lt;/span&gt;(&lt;span&gt;20&lt;/span&gt;),&lt;span&gt;NULL&lt;/span&gt;),&lt;span&gt;&#x27;N&#x27;&lt;/span&gt;) &lt;span&gt;AS&lt;/span&gt; &lt;span&gt;&#x27;NewName&#x27;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;N&lt;br/&gt;&lt;br/&gt;&lt;span&gt;--COALESCE,返回其参数中的第一个非空表达式&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;COALESCE&lt;/span&gt;(&lt;span&gt;NULL&lt;/span&gt;,&lt;span&gt;NULL&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;,&lt;span&gt;NULL&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;1&lt;br/&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;COALESCE&lt;/span&gt;(&lt;span&gt;NULL&lt;/span&gt;,&lt;span&gt;11&lt;/span&gt;,&lt;span&gt;12&lt;/span&gt;,&lt;span&gt;13&lt;/span&gt;,&lt;span&gt;NULL&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;11&lt;br/&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;COALESCE&lt;/span&gt;(&lt;span&gt;111&lt;/span&gt;,&lt;span&gt;112&lt;/span&gt;,&lt;span&gt;113&lt;/span&gt;,&lt;span&gt;114&lt;/span&gt;,&lt;span&gt;NULL&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;--结果：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;111&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;13、COUNT的几种情况&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;--以下三种方法均可统计出表的记录数&lt;/span&gt;&lt;br/&gt;&lt;span&gt;--第一种&lt;/span&gt;&lt;br/&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;count&lt;/span&gt;(*) &lt;span&gt;from&lt;/span&gt; tablename&lt;br/&gt;&lt;br/&gt;&lt;span&gt;--第二种&lt;/span&gt;&lt;br/&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;count&lt;/span&gt;(&lt;span&gt;ID&lt;/span&gt;) &lt;span&gt;from&lt;/span&gt; tablename&lt;br/&gt;&lt;br/&gt;&lt;span&gt;--第三种,1换成其它值也是可以的&lt;/span&gt;&lt;br/&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;count&lt;/span&gt;(&lt;span&gt;1&lt;/span&gt;) &lt;span&gt;from&lt;/span&gt; tablename&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;14、UNION ALL多表插入&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;把两个相同结构的表union后插入到一个新表中，&lt;br/&gt;当然两个以上的相同结构的表也是可以的，&lt;br/&gt;这里的相同是指两个或多个表的列数和每个对应列的类型相同，&lt;br/&gt;列名称可以不同&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;select&lt;/span&gt; *&lt;br/&gt;&lt;span&gt;into&lt;/span&gt; table_new&lt;br/&gt;&lt;span&gt;from&lt;/span&gt; table_1&lt;br/&gt;&lt;span&gt;union&lt;/span&gt; all&lt;br/&gt;&lt;span&gt;select&lt;/span&gt; * &lt;span&gt;from&lt;/span&gt; table_2&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;15、查看数据库缓存的SQL&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;use&lt;/span&gt; &lt;span&gt;master&lt;/span&gt;&lt;br/&gt;&lt;span&gt;declare&lt;/span&gt; @dbid &lt;span&gt;int&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Select&lt;/span&gt; @dbid = dbid &lt;span&gt;from&lt;/span&gt; sysdatabases&lt;br/&gt;&lt;span&gt;where&lt;/span&gt; &lt;span&gt;name&lt;/span&gt; = &lt;span&gt;&#x27;SQL_ROAD&#x27;&lt;/span&gt;&lt;span&gt;--修改成数据库的名称&lt;br/&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;select&lt;/span&gt;&lt;br/&gt;dbid,UseCounts ,RefCounts,CacheObjtype,ObjType,&lt;br/&gt;DB_Name(dbid) &lt;span&gt;as&lt;/span&gt; DatabaseName,&lt;span&gt;SQL&lt;/span&gt;&lt;br/&gt;&lt;span&gt;from&lt;/span&gt; syscacheobjects&lt;br/&gt;&lt;span&gt;where&lt;/span&gt; dbid=@dbid&lt;br/&gt;&lt;span&gt;order&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; dbid,useCounts &lt;span&gt;desc&lt;/span&gt;,objtype&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;我们可以看到数据库中当前正在运行的SQL有哪些&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;16、删除计划缓存&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;--删除整个数据库的计划缓存&lt;/span&gt;&lt;br/&gt;DBCC FREEPROCCACHE&lt;br/&gt;&lt;br/&gt;&lt;span&gt;--删除某个数据库的计划缓存&lt;/span&gt;&lt;br/&gt;&lt;span&gt;USE&lt;/span&gt; &lt;span&gt;master&lt;/span&gt;&lt;br/&gt;&lt;span&gt;DECLARE&lt;/span&gt; @dbid &lt;span&gt;INT&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; @dbid=dbid &lt;span&gt;FROM&lt;/span&gt; sysdatabases &lt;span&gt;WHERE&lt;/span&gt; &lt;span&gt;NAME&lt;/span&gt; = &lt;span&gt;&#x27;SQL_ROAD&#x27;&lt;/span&gt;&lt;br/&gt;DBCC FLUSHPROCINDB (@dbid)&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;span&gt;&lt;strong&gt;17、SQL换行&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;span&gt;SQL的换行&lt;br/&gt;制表符 CHAR(9)&lt;br/&gt;换行符 CHAR(10)&lt;br/&gt;回车 CHAR(13)&lt;/span&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;PRINT&lt;/span&gt; &lt;span&gt;&#x27;SQL&#x27;&lt;/span&gt;+CHAR(&lt;span&gt;13&lt;/span&gt;)+&lt;span&gt;&#x27;ROAD&#x27;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;PRINT&lt;/span&gt; &lt;span&gt;&#x27;SQL&#x27;&lt;/span&gt;+CHAR(&lt;span&gt;10&lt;/span&gt;)+&lt;span&gt;&#x27;ROAD&#x27;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;PRINT&lt;/span&gt; &lt;span&gt;&#x27;SQL&#x27;&lt;/span&gt;+CHAR(&lt;span&gt;9&lt;/span&gt;)+&lt;span&gt;&#x27;ROAD&#x27;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;span&gt;执行结果：&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5581395348837209&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;172&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qFyciaK84RPaZSHrZ45up5oiadXJdfzcmXIk6a9KYRZQbJUUXYU0iacceC3AO2zvbpHR2ia086dZB2o9A/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;如果将查询结果以文本格式显示，而不是网格格式显示，&lt;span&gt;SELECT语句也适用，我们先将查询结果改成以文本格式显示&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.1163141993957704&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;662&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qFyciaK84RPaZSHrZ45up5oiaISsNqcBSG57Qz8VvL899IyY1vyPEXdf672afR40W7MPGIHRm6ukAwQ/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;--以文本格式显示结果&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;&#x27;SQL&#x27;&lt;/span&gt;+ &lt;span&gt;CHAR&lt;/span&gt;(&lt;span&gt;10&lt;/span&gt;)+&lt;span&gt;&#x27;ROAD&#x27;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;&#x27;SQL&#x27;&lt;/span&gt;+ &lt;span&gt;CHAR&lt;/span&gt;(&lt;span&gt;13&lt;/span&gt;)+&lt;span&gt;&#x27;ROAD&#x27;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt; &lt;span&gt;&#x27;SQL&#x27;&lt;/span&gt; + &lt;span&gt;CHAR&lt;/span&gt;(&lt;span&gt;10&lt;/span&gt;) + &lt;span&gt;CHAR&lt;/span&gt;(&lt;span&gt;13&lt;/span&gt;) + &lt;span&gt;&#x27;ROAD&#x27;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;结果如下：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.7727272727272727&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;242&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qFyciaK84RPaZSHrZ45up5oiaQJmqMDrMS9JNokTyW9wQDMspTs4npINXE1jLcIAnlx14at98ibuaeLg/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;18、TRUNCATE 与 DELETE&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;TRUNCATE 是SQL中的一个删除数据表内容的语句，用法是：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;TRUNCATE TABLE [Table Name] 速度快,而且效率高,因为: &lt;br/&gt;TRUNCATE TABLE 在功能上与不带 WHERE 子句的 DELETE 语句相同：二者均删除表中的全部行。但 TRUNCATE TABLE 比 DELETE 速度快，且使用的系统和事务日志资源少。 &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;DELETE 语句每次删除一行，并在事务日志中为所删除的每行记录一项。TRUNCATE TABLE 通过释放存储表数据所用的数据页来删除数据，并且只在事务日志中记录页的释放。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;br/&gt;TRUNCATE TABLE 删除表中的所有行，但表结构及其列、约束、索引等保持不变。新行标识所用的计数值重置为该列的种子。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;如果想保留标识计数值，请改用 DELETE。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;如果要删除表定义及其数据，请使用 DROP TABLE 语句。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt; &lt;br/&gt;对于由 FOREIGN KEY 约束引用的表，不能使用 TRUNCATE TABLE，而应使用不带 WHERE 子句的 DELETE 语句。由于 TRUNCATE TABLE 不记录在日志中，所以它不能激活触发器。TRUNCATE TABLE 不能用于参与了索引视图的表。 &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;19、常用系统检测脚本&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;--查看内存状态&lt;/span&gt;&lt;br/&gt;dbcc memorystatus&lt;br/&gt;&lt;br/&gt;&lt;span&gt;--查看哪个引起的阻塞，blk&lt;/span&gt;&lt;br/&gt;EXEC sp_who active&lt;br/&gt;&lt;br/&gt;&lt;span&gt;--查看锁住了那个资源id，objid&lt;/span&gt;&lt;br/&gt;EXEC sp_lock&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;还有如何查看查询分析器的SPID，可以在查询分析器的状态栏看到，比如sa(57),这就表示当前查询分析器SPID为57,这样在使用profile的时候就可以指定当前窗体进行监控。状态栏在查询窗口的右下角。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.07045454545454545&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;440&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qFyciaK84RPaZSHrZ45up5oiaWddPkLbOdrI97mBtG4MEDNpUA8T0BB3QuApGqEv1gickrjSictryeUnA/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;20、获取脚本的执行时间&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;declare&lt;/span&gt; @&lt;span&gt;timediff&lt;/span&gt; datetime&lt;br/&gt;&lt;span&gt;select&lt;/span&gt; @&lt;span&gt;timediff&lt;/span&gt;=&lt;span&gt;getdate&lt;/span&gt;()&lt;br/&gt;&lt;span&gt;select&lt;/span&gt; * &lt;span&gt;from&lt;/span&gt; Suppliers&lt;br/&gt;print &lt;span&gt;&#x27;耗时:&#x27;&lt;/span&gt;+ &lt;span&gt;convert&lt;/span&gt;(&lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;10&lt;/span&gt;),&lt;span&gt;datediff&lt;/span&gt;(ms,@&lt;span&gt;timediff&lt;/span&gt;,&lt;span&gt;getdate&lt;/span&gt;()))&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;结果如下：&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6333333333333333&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;150&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qFyciaK84RPaZSHrZ45up5oiakepAA3RtDXzYcfdtT6jwChvM6FsUkZM0m7EV955HbXEkQ5gc7jpqRA/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;在状态栏是不会精确到毫秒的，只能精确到秒&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.0757238307349666&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;449&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/icbViakEeV5qFyciaK84RPaZSHrZ45up5oiasRS9zHodhLMPN3xnB68Q5R3olVelZA1dQIKibcbhjvOAkqKZeuvVW8w/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;这个脚本可以更加有效的查看SQL代码的执行效率。&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mp-common-profile class=&quot;custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mp-common-profile&quot; data-from=&quot;0&quot; data-id=&quot;MzA3MDAxNzY4OQ==&quot; data-alias=&quot;DT_lovers&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/pDnsbKziazM71Wp5E3LrgBz5VRytf1tvicemrRrlaXXtyicVxEQoAib2OnvVOPrdexUqepsEicxNOu6SCCiczgQ3h0wg/0?wx_fmt=png&quot; data-nickname=&quot;大数据技术团队&quot; data-signature=&quot;专注大数据、数据分析、数据仓库、数据中台、数据科学、Flink，AI人工智能与面试经验，副业赚钱与职业规划。&quot;/&gt;&lt;/section&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;希望这篇文章可以&lt;span&gt;帮&lt;/span&gt;到你~&lt;br/&gt;&lt;/span&gt;&lt;/figure&gt;&lt;section&gt;&lt;span&gt;欢迎大家点个&lt;/span&gt;&lt;span&gt;在看&lt;/span&gt;&lt;span&gt;，分享至朋友圈&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;pre&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;strong data-darkmode-bgcolor-15923650965579=&quot;rgb(36, 36, 36)&quot; data-darkmode-original-bgcolor-15923650965579=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-15923650965579=&quot;rgb(230, 230, 230)&quot; data-darkmode-original-color-15923650965579=&quot;rgb(0, 0, 0)&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;span data-style=&quot;caret-color: red; font-size: 15px; color: rgb(0, 122, 170);&quot; data-darkmode-bgcolor-15923650965579=&quot;rgb(36, 36, 36)&quot; data-darkmode-original-bgcolor-15923650965579=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-15923650965579=&quot;rgb(21, 189, 255)&quot; data-darkmode-original-color-15923650965579=&quot;rgb(0, 122, 170)&quot;&gt;&lt;img class=&quot;__bg_gif rich_pages wxw-img&quot; data-ratio=&quot;0.08658008658008658&quot; data-type=&quot;gif&quot; data-w=&quot;462&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/XVbUB37bCmAE7DFc2slTaY80fZSWeicgEfGFjfdZOReaAHD4m0PwmuiazjEzytmy3KTKs6jDiavlmv9xQ4FfvRqoA/640?wx_fmt=gif&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&quot;/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;★ 数据模型：&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg3NjIyNjQwMg==&amp;amp;mid=2247504150&amp;amp;idx=2&amp;amp;sn=58a171262fe761cdd3e732eecf7310a2&amp;amp;chksm=cf37e31bf8406a0d9a1d5dcc9d7aa84941fc0b2d1d7a72d5c9deebb6872a03653f8748ed6cec&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; hasload=&quot;1&quot; wah-hotarea=&quot;click&quot;&gt;数据模型维度建模&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;★ &lt;/span&gt;数据标准：&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg3NjIyNjQwMg==&amp;amp;mid=2247497719&amp;amp;idx=2&amp;amp;sn=2d7bcb0a8afd3c70921b765d4ed30666&amp;amp;chksm=cf37c5faf8404ceced30db12d356ca117b2a1b32640a87a33a59fd4e47f8af5c38b05834056e&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;11&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; hasload=&quot;1&quot; wah-hotarea=&quot;click&quot;&gt;数据指标体系建设&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;★ &lt;/span&gt;数据质量：&lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg3NjIyNjQwMg==&amp;amp;mid=2247497140&amp;amp;idx=1&amp;amp;sn=8366164572f12302ef4d2a1617a10c98&amp;amp;chksm=cf37c7b9f8404eafe94804448877aa9bf24839094fba6eee54b27d92da921f5928fd11c2fc14&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; hasload=&quot;1&quot; wah-hotarea=&quot;click&quot;&gt;数据质量缺失数据处理&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;★ &lt;/span&gt;数据服务：&lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg3NjIyNjQwMg==&amp;amp;mid=2247498856&amp;amp;idx=2&amp;amp;sn=736ca25458df220deb1865040aadd135&amp;amp;chksm=cf37ce65f8404773253e06596879d860c5467b972d411f96b00fbd4f2e59b9c6df90481b72c6&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; hasload=&quot;1&quot; wah-hotarea=&quot;click&quot;&gt;大数据平台服务化实践&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;★ &lt;/span&gt;数据安全：&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg3NjIyNjQwMg==&amp;amp;mid=2247500692&amp;amp;idx=2&amp;amp;sn=05dfddecad4c6d693332efe0d58b8723&amp;amp;chksm=cf37f199f840788f73cef868d5425aabfa0f89cfdf78f19f7fb2c2ba1e4fad21f1df976db1d5&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;11&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; hasload=&quot;1&quot; wah-hotarea=&quot;click&quot;&gt;大数据之安全体系建设&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;★ &lt;/span&gt;主数据：&lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg3NjIyNjQwMg==&amp;amp;mid=2247504294&amp;amp;idx=2&amp;amp;sn=81e452c95ba30f91a60d0fb22482ba3c&amp;amp;chksm=cf37e3abf8406abd8305f4a7e1330b0d9c994f3adc14d5d12d1e12425c749713c963b9b95b09&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; hasload=&quot;1&quot; wah-hotarea=&quot;click&quot;&gt;主数据管理项目建设落地&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;★ &lt;/span&gt;数据生命周期：&lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg3NjIyNjQwMg==&amp;amp;mid=2247504487&amp;amp;idx=1&amp;amp;sn=28c80a7a5a3f183b572e5f7cf500f1e8&amp;amp;chksm=cf37e06af840697cc23a1cef01f227e7ee824114960d2253e87722c362322dfd5babb43be15b&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; hasload=&quot;1&quot; wah-hotarea=&quot;click&quot;&gt;同步之道&amp;amp;加载策略&lt;/a&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;热点推荐：&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=Mzg3NjIyNjQwMg==&amp;amp;mid=2247516702&amp;amp;idx=1&amp;amp;sn=a91398a9633f2c1c4ceabbb693efe40b&amp;amp;chksm=cf37b013f8403905a76ed4034cfe0d408b8a8e383036fa5d7d2f54a4b7a367b675a523190dbf&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;数据仓库与Python大数据 | 2021年度最受欢迎的10篇干货文章&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;&lt;strong&gt;2021年度最受欢迎的10篇干货文章&lt;/strong&gt;&lt;/a&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;img class=&quot;rich_pages wxw-img __bg_gif&quot; data-ratio=&quot;0.5975422427035331&quot; data-type=&quot;gif&quot; data-w=&quot;651&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/1OYP1AZw0W05cCrwvmo0OiaORB5oZsfgqREgo5iauj2Okxf9K7icTzOfp17oll4PiaY80h2ooykMHn1PJv2FWJnteA/640?wx_fmt=gif&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;人间真爱，&lt;/span&gt;&lt;span&gt;在看&lt;/span&gt;&lt;span&gt;在看&lt;/span&gt;&lt;span&gt;在看&lt;/span&gt;&lt;span&gt;~（&lt;/span&gt;&lt;span&gt;疯狂暗示！&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span/&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;mp-style-type data-value=&quot;3&quot;/&gt;&lt;/p&gt;&lt;/div&gt;

          
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>91432bf5b8197a12fb438ab40b2ef868</guid>
<title>聊聊 Spring 中最常用的 11 个扩展点</title>
<link>https://toutiao.io/k/7m8gu5r</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;大家好，我是楼仔呀。&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;之前给大家写过一篇 Bean 的生命周期，非常受欢迎，里面其实介绍了 Bean 生命周期中所有的扩展点。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;今天给大家带来的文章，可以作为 Spring 扩展点的补充，一共 11 个，&lt;span&gt;工作中会经常用到，如果用得好，很可能&lt;/span&gt;&lt;span&gt;会事半功倍哈。&lt;/span&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;前言&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们一说到spring，可能第一个想到的是 &lt;code&gt;IOC&lt;/code&gt;（控制反转） 和 &lt;code&gt;AOP&lt;/code&gt;（面向切面编程）。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;没错，它们是spring的基石，得益于它们的优秀设计，使得spring能够从众多优秀框架中脱颖而出。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;除此之外，我们在使用spring的过程中，有没有发现它的&lt;code&gt;扩展能力非常强&lt;/code&gt;。由于这个优势的存在，让spring拥有强大的包容能力，让很多第三方应用能够轻松投入spring的怀抱。比如：rocketmq、mybatis、redis等。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;今天跟大家一起聊聊，在Spring中最常用的11个扩展点。&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.9602836879432625&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ibJZVicC7nz5iaDcuvJ3nHO9icHddBSomYUxDmwa9TMnkpXkojB1z60Dh8Dtib4P74A3c1cmHS3ZnCS9UFQqfaMcJGg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1410&quot;/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;1.自定义拦截器&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;spring mvc拦截器根spring拦截器相比，它里面能够获取&lt;code&gt;HttpServletRequest&lt;/code&gt;和&lt;code&gt;HttpServletResponse&lt;/code&gt;等web对象实例。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;spring mvc拦截器的顶层接口是：&lt;code&gt;HandlerInterceptor&lt;/code&gt;，包含三个方法：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;preHandle 目标方法执行前执行&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;postHandle 目标方法执行后执行&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;afterCompletion 请求完成时执行&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;为了方便我们一般情况会用&lt;code&gt;HandlerInterceptor&lt;/code&gt;接口的实现类&lt;code&gt;HandlerInterceptorAdapter&lt;/code&gt;类。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;假如有权限认证、日志、统计的场景，可以使用该拦截器。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;第一步，继承&lt;code&gt;HandlerInterceptorAdapter&lt;/code&gt;类定义拦截器：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;AuthInterceptor&lt;/span&gt; &lt;span&gt;extends&lt;/span&gt; &lt;span&gt;HandlerInterceptorAdapter&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt; &lt;span&gt;preHandle&lt;/span&gt;&lt;span&gt;(HttpServletRequest request, HttpServletResponse response, Object handler)&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;throws&lt;/span&gt; Exception &lt;/span&gt;{&lt;br/&gt;        String requestUrl = request.getRequestURI();&lt;br/&gt;        &lt;span&gt;if&lt;/span&gt; (checkAuth(requestUrl)) {&lt;br/&gt;            &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;;&lt;br/&gt;        }&lt;br/&gt;&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;;&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt; &lt;span&gt;checkAuth&lt;/span&gt;&lt;span&gt;(String requestUrl)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;===权限校验===&quot;&lt;/span&gt;);&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;;&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;第二步，将该拦截器注册到spring容器：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@Configuration&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;WebAuthConfig&lt;/span&gt; &lt;span&gt;extends&lt;/span&gt; &lt;span&gt;WebMvcConfigurerAdapter&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt; &lt;br/&gt;    &lt;span&gt;@Bean&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; AuthInterceptor &lt;span&gt;getAuthInterceptor&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; AuthInterceptor();&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;addInterceptors&lt;/span&gt;&lt;span&gt;(InterceptorRegistry registry)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        registry.addInterceptor(&lt;span&gt;new&lt;/span&gt; AuthInterceptor());&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;第三步，在请求接口时spring mvc通过该拦截器，能够自动拦截该接口，并且校验权限。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;2.获取Spring容器对象&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在我们日常开发中，经常需要从Spring容器中获取Bean，但你知道如何获取Spring容器对象吗？&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;2.1 BeanFactoryAware接口&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@Service&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;PersonService&lt;/span&gt; &lt;span&gt;implements&lt;/span&gt; &lt;span&gt;BeanFactoryAware&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;    &lt;span&gt;private&lt;/span&gt; BeanFactory beanFactory;&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;setBeanFactory&lt;/span&gt;&lt;span&gt;(BeanFactory beanFactory)&lt;/span&gt; &lt;span&gt;throws&lt;/span&gt; BeansException &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;this&lt;/span&gt;.beanFactory = beanFactory;&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;add&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        Person person = (Person) beanFactory.getBean(&lt;span&gt;&quot;person&quot;&lt;/span&gt;);&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;实现&lt;code&gt;BeanFactoryAware&lt;/code&gt;接口，然后重写&lt;code&gt;setBeanFactory&lt;/code&gt;方法，就能从该方法中获取到spring容器对象。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;2.2 ApplicationContextAware接口&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@Service&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;PersonService2&lt;/span&gt; &lt;span&gt;implements&lt;/span&gt; &lt;span&gt;ApplicationContextAware&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;    &lt;span&gt;private&lt;/span&gt; ApplicationContext applicationContext;&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;setApplicationContext&lt;/span&gt;&lt;span&gt;(ApplicationContext applicationContext)&lt;/span&gt; &lt;span&gt;throws&lt;/span&gt; BeansException &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;this&lt;/span&gt;.applicationContext = applicationContext;&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;add&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        Person person = (Person) applicationContext.getBean(&lt;span&gt;&quot;person&quot;&lt;/span&gt;);&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;实现&lt;code&gt;ApplicationContextAware&lt;/code&gt;接口，然后重写&lt;code&gt;setApplicationContext&lt;/code&gt;方法，也能从该方法中获取到spring容器对象。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;2.3 ApplicationListener接口&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@Service&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;PersonService3&lt;/span&gt; &lt;span&gt;implements&lt;/span&gt; &lt;span&gt;ApplicationListener&lt;/span&gt;&amp;lt;&lt;span&gt;ContextRefreshedEvent&lt;/span&gt;&amp;gt; &lt;/span&gt;{&lt;br/&gt;    &lt;span&gt;private&lt;/span&gt; ApplicationContext applicationContext;&lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;onApplicationEvent&lt;/span&gt;&lt;span&gt;(ContextRefreshedEvent event)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        applicationContext = event.getApplicationContext();&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;add&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        Person person = (Person) applicationContext.getBean(&lt;span&gt;&quot;person&quot;&lt;/span&gt;);&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;3.全局异常处理&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;以前我们在开发接口时，如果出现异常，为了给用户一个更友好的提示，例如：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@RequestMapping&lt;/span&gt;(&lt;span&gt;&quot;/test&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;@RestController&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;TestController&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@GetMapping&lt;/span&gt;(&lt;span&gt;&quot;/add&quot;&lt;/span&gt;)&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; String &lt;span&gt;add&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;int&lt;/span&gt; a = &lt;span&gt;10&lt;/span&gt; / &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;&quot;成功&quot;&lt;/span&gt;;&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如果不做任何处理请求add接口结果直接报错：&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.2833333333333333&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ibJZVicC7nz5iaDcuvJ3nHO9icHddBSomYUxuR5ZfQIjHZVVqwroDTtO8xiaVWQuY90wQD8fXYdGSACmOicnEzpfPic8A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;what？用户能直接看到错误信息？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这种交互方式给用户的体验非常差，为了解决这个问题，我们通常会在接口中捕获异常：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@GetMapping&lt;/span&gt;(&lt;span&gt;&quot;/add&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt; String &lt;span&gt;add&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;    String result = &lt;span&gt;&quot;成功&quot;&lt;/span&gt;;&lt;br/&gt;    &lt;span&gt;try&lt;/span&gt; {&lt;br/&gt;        &lt;span&gt;int&lt;/span&gt; a = &lt;span&gt;10&lt;/span&gt; / &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;    } &lt;span&gt;catch&lt;/span&gt; (Exception e) {&lt;br/&gt;        result = &lt;span&gt;&quot;数据异常&quot;&lt;/span&gt;;&lt;br/&gt;    }&lt;br/&gt;    &lt;span&gt;return&lt;/span&gt; result;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;接口改造后，出现异常时会提示：“数据异常”，对用户来说更友好。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;看起来挺不错的，但是有问题。。。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如果只是一个接口还好，但是如果项目中有成百上千个接口，都要加上异常捕获代码吗？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;答案是否定的，这时全局异常处理就派上用场了：&lt;code&gt;RestControllerAdvice&lt;/code&gt;。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@RestControllerAdvice&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;GlobalExceptionHandler&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@ExceptionHandler&lt;/span&gt;(Exception&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;br/&gt;    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;String&lt;/span&gt; &lt;span&gt;handleException&lt;/span&gt;(&lt;span&gt;Exception&lt;/span&gt; &lt;span&gt;e&lt;/span&gt;) &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;if&lt;/span&gt; (e &lt;span&gt;instanceof&lt;/span&gt; ArithmeticException) {&lt;br/&gt;            &lt;span&gt;return&lt;/span&gt; &lt;span&gt;&quot;数据异常&quot;&lt;/span&gt;;&lt;br/&gt;        }&lt;br/&gt;        &lt;span&gt;if&lt;/span&gt; (e &lt;span&gt;instanceof&lt;/span&gt; Exception) {&lt;br/&gt;            &lt;span&gt;return&lt;/span&gt; &lt;span&gt;&quot;服务器内部异常&quot;&lt;/span&gt;;&lt;br/&gt;        }&lt;br/&gt;        retur nnull;&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;只需在&lt;code&gt;handleException&lt;/code&gt;方法中处理异常情况，业务接口中可以放心使用，不再需要捕获异常（有人统一处理了）。真是爽歪歪。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;4.类型转换器&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;spring目前支持3中类型转换器：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;Converter&amp;lt;S,T&amp;gt;：将 S 类型对象转为 T 类型对象&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ConverterFactory&amp;lt;S, R&amp;gt;：将 S 类型对象转为 R 类型及子类对象&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;GenericConverter：它支持多个source和目标类型的转化，同时还提供了source和目标类型的上下文，这个上下文能让你实现基于属性上的注解或信息来进行类型转换。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这3种类型转换器使用的场景不一样，我们以&lt;code&gt;Converter&amp;lt;S,T&amp;gt;为&lt;/code&gt;例。假如：接口中接收参数的实体对象中，有个字段的类型是Date，但是实际传参的是字符串类型：2021-01-03 10:20:15，要如何处理呢？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;第一步，定义一个实体User：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@Data&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;User&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;private&lt;/span&gt; Long id;&lt;br/&gt;    &lt;span&gt;private&lt;/span&gt; String name;&lt;br/&gt;    &lt;span&gt;private&lt;/span&gt; Date registerDate;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;第二步，实现&lt;code&gt;Converter&lt;/code&gt;接口：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;DateConverter&lt;/span&gt; &lt;span&gt;implements&lt;/span&gt; &lt;span&gt;Converter&lt;/span&gt;&amp;lt;&lt;span&gt;String&lt;/span&gt;, &lt;span&gt;Date&lt;/span&gt;&amp;gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;private&lt;/span&gt; SimpleDateFormat simpleDateFormat = &lt;span&gt;new&lt;/span&gt; SimpleDateFormat(&lt;span&gt;&quot;yyyy-MM-dd HH:mm:ss&quot;&lt;/span&gt;);&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; Date &lt;span&gt;convert&lt;/span&gt;&lt;span&gt;(String source)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;if&lt;/span&gt; (source != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !&lt;span&gt;&quot;&quot;&lt;/span&gt;.equals(source)) {&lt;br/&gt;            &lt;span&gt;try&lt;/span&gt; {&lt;br/&gt;                simpleDateFormat.parse(source);&lt;br/&gt;            } &lt;span&gt;catch&lt;/span&gt; (ParseException e) {&lt;br/&gt;                e.printStackTrace();&lt;br/&gt;            }&lt;br/&gt;        }&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;第三步，将新定义的类型转换器注入到spring容器中：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@Configuration&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;WebConfig&lt;/span&gt; &lt;span&gt;extends&lt;/span&gt; &lt;span&gt;WebMvcConfigurerAdapter&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;addFormatters&lt;/span&gt;&lt;span&gt;(FormatterRegistry registry)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        registry.addConverter(&lt;span&gt;new&lt;/span&gt; DateConverter());&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;第四步，调用接口&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@RequestMapping&lt;/span&gt;(&lt;span&gt;&quot;/user&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;@RestController&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;UserController&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@RequestMapping&lt;/span&gt;(&lt;span&gt;&quot;/save&quot;&lt;/span&gt;)&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; String &lt;span&gt;save&lt;/span&gt;&lt;span&gt;(@RequestBody User user)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;&quot;success&quot;&lt;/span&gt;;&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;请求接口时User对象中registerDate字段会被自动转换成Date类型。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;5.导入配置&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;有时我们需要在某个配置类中引入另外一些类，被引入的类也加到spring容器中。这时可以使用&lt;code&gt;@Import&lt;/code&gt;注解完成这个功能。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如果你看过它的源码会发现，引入的类支持三种不同类型。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;但是我认为最好将普通类和@Configuration注解的配置类分开讲解，所以列了四种不同类型：&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.30185185185185187&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ibJZVicC7nz5iaDcuvJ3nHO9icHddBSomYUxiclRH4kP1BV372N3MRDmMicxaLvBhSicAKfqmGNHh0zBf8weickJ9uHl2Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;5.1 普通类&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这种引入方式是最简单的，被引入的类会被实例化bean对象。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;A&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;@Import&lt;/span&gt;(A&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;br/&gt;@&lt;span&gt;Configuration&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; &lt;span&gt;TestConfiguration&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;通过&lt;code&gt;@Import&lt;/code&gt;注解引入A类，spring就能自动实例化A对象，然后在需要使用的地方通过&lt;code&gt;@Autowired&lt;/code&gt;注解注入即可：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@Autowired&lt;/span&gt;&lt;br/&gt;&lt;span&gt;private&lt;/span&gt; A a;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;是不是挺让人意外的？不用加&lt;code&gt;@Bean&lt;/code&gt;注解也能实例化bean。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;5.2 配置类&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这种引入方式是最复杂的，因为&lt;code&gt;@Configuration&lt;/code&gt;注解还支持多种组合注解，比如：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;@Import&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;@ImportResource&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;@PropertySource等。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;A&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;B&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;@Import&lt;/span&gt;(B&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;br/&gt;@&lt;span&gt;Configuration&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; &lt;span&gt;AConfiguration&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@Bean&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; A &lt;span&gt;a&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; A();&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;@Import&lt;/span&gt;(AConfiguration&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;br/&gt;@&lt;span&gt;Configuration&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; &lt;span&gt;TestConfiguration&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;通过@Import注解引入@Configuration注解的配置类，会把该配置类相关&lt;code&gt;@Import&lt;/code&gt;、&lt;code&gt;@ImportResource&lt;/code&gt;、&lt;code&gt;@PropertySource&lt;/code&gt;等注解引入的类进行递归，一次性全部引入。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;5.3 ImportSelector&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这种引入方式需要实现&lt;code&gt;ImportSelector&lt;/code&gt;接口：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;AImportSelector&lt;/span&gt; &lt;span&gt;implements&lt;/span&gt; &lt;span&gt;ImportSelector&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; String CLASS_NAME = &lt;span&gt;&quot;com.sue.cache.service.test13.A&quot;&lt;/span&gt;;&lt;br/&gt;    &lt;br/&gt; &lt;span&gt;public&lt;/span&gt; String[] selectImports(AnnotationMetadata importingClassMetadata) {&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; String[]{CLASS_NAME};&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;@Import&lt;/span&gt;(AImportSelector&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;br/&gt;@&lt;span&gt;Configuration&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; &lt;span&gt;TestConfiguration&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这种方式的好处是&lt;code&gt;selectImports&lt;/code&gt;方法返回的是数组，意味着可以同时引入多个类，还是非常方便的。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;5.4 ImportBeanDefinitionRegistrar&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这种引入方式需要实现&lt;code&gt;ImportBeanDefinitionRegistrar&lt;/code&gt;接口：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;AImportBeanDefinitionRegistrar&lt;/span&gt; &lt;span&gt;implements&lt;/span&gt; &lt;span&gt;ImportBeanDefinitionRegistrar&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;registerBeanDefinitions&lt;/span&gt;&lt;span&gt;(AnnotationMetadata importingClassMetadata, BeanDefinitionRegistry registry)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        RootBeanDefinition rootBeanDefinition = &lt;span&gt;new&lt;/span&gt; RootBeanDefinition(A&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;/span&gt;;&lt;br/&gt;        registry.registerBeanDefinition(&lt;span&gt;&quot;a&quot;&lt;/span&gt;, rootBeanDefinition);&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;@Import&lt;/span&gt;(AImportBeanDefinitionRegistrar&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;br/&gt;@&lt;span&gt;Configuration&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; &lt;span&gt;TestConfiguration&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这种方式是最灵活的，能在&lt;code&gt;registerBeanDefinitions&lt;/code&gt;方法中获取到&lt;code&gt;BeanDefinitionRegistry&lt;/code&gt;容器注册对象，可以手动控制BeanDefinition的创建和注册。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;6.项目启动时&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;有时候我们需要在项目启动时定制化一些附加功能，比如：加载一些系统参数、完成初始化、预热本地缓存等，该怎么办呢？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;好消息是springboot提供了：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;CommandLineRunner&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ApplicationRunner&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这两个接口帮助我们实现以上需求。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;它们的用法还是挺简单的，以&lt;code&gt;ApplicationRunner&lt;/code&gt;接口为例：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@Component&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;TestRunner&lt;/span&gt; &lt;span&gt;implements&lt;/span&gt; &lt;span&gt;ApplicationRunner&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@Autowired&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;private&lt;/span&gt; LoadDataService loadDataService;&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;run&lt;/span&gt;&lt;span&gt;(ApplicationArguments args)&lt;/span&gt; &lt;span&gt;throws&lt;/span&gt; Exception &lt;/span&gt;{&lt;br/&gt;        loadDataService.load();&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;实现&lt;code&gt;ApplicationRunner&lt;/code&gt;接口，重写&lt;code&gt;run&lt;/code&gt;方法，在该方法中实现自己定制化需求。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如果项目中有多个类实现了ApplicationRunner接口，他们的执行顺序要怎么指定呢？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;答案是使用&lt;code&gt;@Order(n)&lt;/code&gt;注解，n的值越小越先执行。当然也可以通过&lt;code&gt;@Priority&lt;/code&gt;注解指定顺序。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;7.修改BeanDefinition&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;Spring IOC在实例化Bean对象之前，需要先读取Bean的相关属性，保存到&lt;code&gt;BeanDefinition&lt;/code&gt;对象中，然后通过BeanDefinition对象，实例化Bean对象。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如果想修改BeanDefinition对象中的属性，该怎么办呢？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;答：我们可以实现&lt;code&gt;BeanFactoryPostProcessor&lt;/code&gt;接口。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@Component&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;MyBeanFactoryPostProcessor&lt;/span&gt; &lt;span&gt;implements&lt;/span&gt; &lt;span&gt;BeanFactoryPostProcessor&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;    &lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;postProcessBeanFactory&lt;/span&gt;&lt;span&gt;(ConfigurableListableBeanFactory configurableListableBeanFactory)&lt;/span&gt; &lt;span&gt;throws&lt;/span&gt; BeansException &lt;/span&gt;{&lt;br/&gt;        DefaultListableBeanFactory defaultListableBeanFactory = (DefaultListableBeanFactory) configurableListableBeanFactory;&lt;br/&gt;        BeanDefinitionBuilder beanDefinitionBuilder = BeanDefinitionBuilder.genericBeanDefinition(User&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;/span&gt;;&lt;br/&gt;        beanDefinitionBuilder.addPropertyValue(&lt;span&gt;&quot;id&quot;&lt;/span&gt;, &lt;span&gt;123&lt;/span&gt;);&lt;br/&gt;        beanDefinitionBuilder.addPropertyValue(&lt;span&gt;&quot;name&quot;&lt;/span&gt;, &lt;span&gt;&quot;苏三说技术&quot;&lt;/span&gt;);&lt;br/&gt;        defaultListableBeanFactory.registerBeanDefinition(&lt;span&gt;&quot;user&quot;&lt;/span&gt;, beanDefinitionBuilder.getBeanDefinition());&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在postProcessBeanFactory方法中，可以获取BeanDefinition的相关对象，并且修改该对象的属性。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;8.初始化Bean前后&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;有时，你想在初始化Bean前后，实现一些自己的逻辑。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这时可以实现：&lt;code&gt;BeanPostProcessor&lt;/code&gt;接口。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;该接口目前有两个方法：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;postProcessBeforeInitialization 该在初始化方法之前调用。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;postProcessAfterInitialization 该方法再初始化方法之后调用。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;例如：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@Component&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;MyBeanPostProcessor&lt;/span&gt; &lt;span&gt;implements&lt;/span&gt; &lt;span&gt;BeanPostProcessor&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; Object &lt;span&gt;postProcessAfterInitialization&lt;/span&gt;&lt;span&gt;(Object bean, String beanName)&lt;/span&gt; &lt;span&gt;throws&lt;/span&gt; BeansException &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;if&lt;/span&gt; (bean &lt;span&gt;instanceof&lt;/span&gt; User) {&lt;br/&gt;            ((User) bean).setUserName(&lt;span&gt;&quot;苏三说技术&quot;&lt;/span&gt;);&lt;br/&gt;        }&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; bean;&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如果spring中存在User对象，则将它的userName设置成：苏三说技术。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;其实，我们经常使用的注解，比如：@Autowired、@Value、@Resource、@PostConstruct等，是通过AutowiredAnnotationBeanPostProcessor和CommonAnnotationBeanPostProcessor实现的。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;9.初始化方法&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;目前spring中使用比较多的初始化bean的方法有：&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;使用@PostConstruct注解&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;实现InitializingBean接口&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;9.1 使用@PostConstruct注解&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@Service&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;AService&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;    &lt;span&gt;@PostConstruct&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;init&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;===初始化===&quot;&lt;/span&gt;);&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在需要初始化的方法上增加&lt;code&gt;@PostConstruct&lt;/code&gt;注解，这样就有初始化的能力。&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;9.2 实现InitializingBean接口&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@Service&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;BService&lt;/span&gt; &lt;span&gt;implements&lt;/span&gt; &lt;span&gt;InitializingBean&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;afterPropertiesSet&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; &lt;span&gt;throws&lt;/span&gt; Exception &lt;/span&gt;{&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;===初始化===&quot;&lt;/span&gt;);&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;实现&lt;code&gt;InitializingBean&lt;/code&gt;接口，重写&lt;code&gt;afterPropertiesSet&lt;/code&gt;方法，该方法中可以完成初始化功能。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;10.关闭容器前&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;有时候，我们需要在关闭spring容器前，做一些额外的工作，比如：关闭资源文件等。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这时可以实现&lt;code&gt;DisposableBean&lt;/code&gt;接口，并且重写它的&lt;code&gt;destroy&lt;/code&gt;方法：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@Service&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;DService&lt;/span&gt; &lt;span&gt;implements&lt;/span&gt; &lt;span&gt;InitializingBean&lt;/span&gt;, &lt;span&gt;DisposableBean&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt; &lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;destroy&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; &lt;span&gt;throws&lt;/span&gt; Exception &lt;/span&gt;{&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;DisposableBean destroy&quot;&lt;/span&gt;);&lt;br/&gt;    }&lt;br/&gt; &lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;afterPropertiesSet&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; &lt;span&gt;throws&lt;/span&gt; Exception &lt;/span&gt;{&lt;br/&gt;        System.out.println(&lt;span&gt;&quot;InitializingBean afterPropertiesSet&quot;&lt;/span&gt;);&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这样spring容器销毁前，会调用该destroy方法，做一些额外的工作。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;通常情况下，我们会同时实现InitializingBean和DisposableBean接口，重写初始化方法和销毁方法。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;11.自定义作用域&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们都知道spring默认支持的&lt;code&gt;Scope&lt;/code&gt;只有两种：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;singleton 单例，每次从spring容器中获取到的bean都是同一个对象。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;prototype 多例，每次从spring容器中获取到的bean都是不同的对象。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;spring web又对Scope进行了扩展，增加了：&lt;/p&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;RequestScope 同一次请求从spring容器中获取到的bean都是同一个对象。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;SessionScope 同一个会话从spring容器中获取到的bean都是同一个对象。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;即便如此，有些场景还是无法满足我们的要求。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;比如，我们想在同一个线程中从spring容器获取到的bean都是同一个对象，该怎么办？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这就需要自定义Scope了。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;第一步实现Scope接口：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;ThreadLocalScope&lt;/span&gt; &lt;span&gt;implements&lt;/span&gt; &lt;span&gt;Scope&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;    &lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; ThreadLocal THREAD_LOCAL_SCOPE = &lt;span&gt;new&lt;/span&gt; ThreadLocal();&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; Object &lt;span&gt;get&lt;/span&gt;&lt;span&gt;(String name, ObjectFactory&amp;lt;?&amp;gt; objectFactory)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        Object value = THREAD_LOCAL_SCOPE.get();&lt;br/&gt;        &lt;span&gt;if&lt;/span&gt; (value != &lt;span&gt;null&lt;/span&gt;) {&lt;br/&gt;            &lt;span&gt;return&lt;/span&gt; value;&lt;br/&gt;        }&lt;br/&gt;&lt;br/&gt;        Object object = objectFactory.getObject();&lt;br/&gt;        THREAD_LOCAL_SCOPE.set(object);&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; object;&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; Object &lt;span&gt;remove&lt;/span&gt;&lt;span&gt;(String name)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        THREAD_LOCAL_SCOPE.remove();&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;registerDestructionCallback&lt;/span&gt;&lt;span&gt;(String name, Runnable callback)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; Object &lt;span&gt;resolveContextualObject&lt;/span&gt;&lt;span&gt;(String key)&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;    }&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; String &lt;span&gt;getConversationId&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;第二步将新定义的Scope注入到spring容器中：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@Component&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;ThreadLocalBeanFactoryPostProcessor&lt;/span&gt; &lt;span&gt;implements&lt;/span&gt; &lt;span&gt;BeanFactoryPostProcessor&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;postProcessBeanFactory&lt;/span&gt;&lt;span&gt;(ConfigurableListableBeanFactory beanFactory)&lt;/span&gt; &lt;span&gt;throws&lt;/span&gt; BeansException &lt;/span&gt;{&lt;br/&gt;        beanFactory.registerScope(&lt;span&gt;&quot;threadLocalScope&quot;&lt;/span&gt;, &lt;span&gt;new&lt;/span&gt; ThreadLocalScope());&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;第三步使用新定义的Scope：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@Scope&lt;/span&gt;(&lt;span&gt;&quot;threadLocalScope&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;@Service&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;&lt;span&gt;class&lt;/span&gt; &lt;span&gt;CService&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;    &lt;span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;add&lt;/span&gt;&lt;span&gt;()&lt;/span&gt; &lt;/span&gt;{&lt;br/&gt;    }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>6d36a4e47be172af7f436976aa8cd08c</guid>
<title>我的建议是：给想出这个方案并落地的大佬，绩效拉满，连升两级，附加 20 个月年终奖！</title>
<link>https://toutiao.io/k/hbcavwf</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;事情是这样的，我在 V2EX 看到了一个链接：&lt;/span&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdnice编辑器&quot;&gt;&lt;p&gt;&lt;span&gt;https://www.v2ex.com/t/887582?p=1&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4180887372013652&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ELQw2WCMgt3Xb6QlNsvbgs8loR1Vy7rJV9ibegAd6J2u2AE3D3C45BxXs1NwBpoEjHU41ZDiaLozbGej1sGfqW1A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1172&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;图片里面说第一个链接的域名是高德地图的，我验证了一下，确实是这样的：&lt;/span&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.24378109452736318&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ELQw2WCMgt3Xb6QlNsvbgs8loR1Vy7rJMicEibK2vjgR072l5ZpWNCEQoKCNZgHBmicuN3F5NJ1YA8lXX8Wvwkliag/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;804&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;现在访问整个地址，直接 404 了，应该是之前可以访问，现在不行了。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;但是这个链接一看就是短链接嘛，应该是高德提供的短链接服务，然后这个短链最终重定向到了拼多多的砍一刀链接。&lt;/span&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5042492917847026&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ELQw2WCMgt3Xb6QlNsvbgs8loR1Vy7rJnp2E9vcK0nfFeUubEEx4DxDibUwmibDhejFs5icpYBI9ibzS2LrrKqoN5w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;353&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;第二个域名不能直接访问，但是有评论反馈说是联通的在线客服服务：&lt;/span&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.09176915799432356&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ELQw2WCMgt3Xb6QlNsvbgs8loR1Vy7rJ0D5TmMrASfgTyoal4EibjibkeBFiabic146vomOOQ39fLI1cHQKNwxSISA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1057&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;但是不重要了，反正看起来就和拼多多毫无关系。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;还有人在下面反馈遇到过用其他域名的：&lt;/span&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.19304347826086957&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ELQw2WCMgt3Xb6QlNsvbgs8loR1Vy7rJsDLRo1SHiaZbvGDuJjIxMGcBxCxb0ZL7lTJyr7tHeKl3gfkW1PROFIQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1150&quot;/&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.12268314210061783&quot; data-type=&quot;png&quot; data-w=&quot;1133&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ELQw2WCMgt3Xb6QlNsvbgs8loR1Vy7rJrViacMZr25110yQOyXKWaWpTjWFsTBvAIMWw1KEN8HSt3ibC9FdEMTMQ/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.140625&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ELQw2WCMgt3Xb6QlNsvbgs8loR1Vy7rJqfKOXTc0FGesKiaVvKS2XKfRbQicDE26HT2ribzJHAWlqyOkfunUpdbhQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;768&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;反正就是遍地开花，都是知名域名。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;甚至还有 QQ 的域名：&lt;/span&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.10690633869441817&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ELQw2WCMgt3Xb6QlNsvbgs8loR1Vy7rJg1Bh5EZ6WBYZCYLtibrSXuHmc12CB8FmDOl7QxmIic5ZRLNawmvTNZcA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1057&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;微信疯起来，说不定连自己都封。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;这场景，让我想起了一段经典的对话。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;拼多多：是谁杀了我，而我又杀了谁？&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;微信：是我，杀了我？&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;拼多多：动手吧。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;那么问题就来了：拼多多为什么要这样做？&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;在这个帖子下面有个回答一针见血的指出了原因：&lt;/span&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.29830917874396135&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ELQw2WCMgt3Xb6QlNsvbgs8loR1Vy7rJpWkfSYN84RkvQdqMlnQXKlmCqSBHHYs4aaiaL1eNBz3UsCkR5mrs6qA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;828&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;我看到这个回答之后，拍着大腿，直呼妙啊：&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;这个操作，直接就是一波秀翻全场。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;你想，假设有个找你借了钱的、没还钱的、多年不联系的微信好友，突然给你发来一个微信消息。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;你以为时隔多年后他终于想起了欠你的 100 元钱。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;结果一看是拼多多砍一刀。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;一气之下，怒火中烧，反手就是一个举报，然后微信就把链接给他封了。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;但是这个域名，你封的是高德啊，和我拼多多有什么关系？&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;你说它这个操作流氓吧，也谈不上，顶多就是利用了某些服务的功能，把这些功能稍微的扩展了一下，来做一些不能说，不好说，最好别说的事情。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;也就是，灰产。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;这可不是我说的，是网友在帖子下面的评论：&lt;/span&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5431472081218274&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ELQw2WCMgt3Xb6QlNsvbgs8loR1Vy7rJos1nChE2aM2licXCOKX3TZfTichSZlXfcUNQ1Ktyr5jT6W1A72cb3JzQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;394&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;我把思路打开了一下，这个倒是确实让我想起了前两个月我遇到的一个诈骗局。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;当时是手机里面收到一个短信，说某某机构可以退学费了，加 QQ 群办理退费。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;然而我根本就没有在这个机构上报过名，但是我确实是知道这个机构跑路了，我就想看看到底是个什么局。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;于是潜入到群里了解了一下，最终拿到了一个连接，让我要下载一个 APP，在 APP 里面可以退费。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;这个 APP 不用想，肯定就是那种黑产相关的 APP，让你一个劲儿的充钱，充 1000 返 5000 的那种。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;所以我没有下载。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;但是我就转变了一下思路，想着看看能不能打入敌人内部，于是我给群里面的一个说自己已经退费了的“托儿”发去私信：&lt;/span&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-croporisrc=&quot;https://mmbiz.qpic.cn/mmbiz_png/ELQw2WCMgt3Xb6QlNsvbgs8loR1Vy7rJaPehvPamcp8nRfoqicdY8NjBaeuQR2q4icTRrUAKdtkt4EFKiaE4bZIrQ/640?wx_fmt=png&quot; data-cropx1=&quot;49&quot; data-cropx2=&quot;403&quot; data-cropy1=&quot;0&quot; data-cropy2=&quot;309&quot; data-ratio=&quot;0.8704225352112676&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/YOkhPCLwLC8h9fYxymmXkeLic37T4lvsIiczicjdpXpdqujNakw9zYN7x3icz19nhpWR1NVADJT2CpENVj4bhgVbJw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;355&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;真的是哔了狗了，她居然还嘲讽我。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;一气之下，我想着分析了一下那个链接，看看能不能挖出点什么。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;但是能力有限，没发现啥有价值的东西，挖了一会就反手来了一波举报。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;我发现它们的这个链接，中间就用短链接做了一次重定向。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;其实从本质上讲，和拼多多用的是类似的技术，只不过它的最终落地页是一些违法乱纪的东西。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;但是拼多多不一样啊，拼多多这个就是砍一刀而已，它只是令人厌恶，从法律上讲，这是合法的商业行为，拉新又不违法。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;只不过它用别人的域名干这事，违不违法我就不清楚了。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;然后，我们再仔细想想这个问题：拼多多为什么要这样做？&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;前面说了，是因为怕微信把域名给封了。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;说实在的，微信封域名确实很严格，有时候甚至容易误杀，本来我一个好好的链接，内容向善向美的，隔几天就打不开了，就被封了。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.9155405405405406&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ELQw2WCMgt3Xb6QlNsvbgs8loR1Vy7rJyPdeGv7gkv6C2WdYPzUFFdiaXonR9ibP4ibZfDDIBibq5Yic1YHTlPYrP6A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;296&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;而且对于拼多多这类连接微信就发过文，明文表示：不可以。&lt;/span&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5506872852233677&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ELQw2WCMgt3Xb6QlNsvbgs8loR1Vy7rJdDiaUUKvKYVfQCWwsmJe9wyv1tlCibtGqcuZqQqOFHo7Vib5Csj8V17ow/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1164&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;我搜索了一下，发现甚至还基于微信的这个封锁机制产生了一个产业链，专门有公司就是研究这玩意，然后给你弄一个不容易被封的链接，背后有他们自己的技术方案。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;拼多多这种本来就有技术傍身的公司，更加不会放过微信这么大的生态圈了，&lt;span&gt;一定会想方设法的搞一些骚操作出来。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;所以，这一波，其实是用魔法打败魔法。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;而且，这么多域名，其中不乏大厂的域名，朋友们，你说这是什么？&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;这就是我们日日夜夜都挂在嘴边的高可用啊，这是真正的高可用，想杀都杀不掉。&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;想到这个方案并完成落地的拼多多大佬，这不得连升两级，这绩效不得拉满了？&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>bb4fb5751b8e3a974b141492abe05bab</guid>
<title>Go 编码规范</title>
<link>https://toutiao.io/k/n79dj1x</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;container-lg px-3 my-5 markdown-body&quot;&gt;
      
      
      

      &lt;h1 id=&quot;go-style&quot;&gt;Go Style&lt;/h1&gt;

&lt;p&gt;https://google.github.io/styleguide/go&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;index&quot;&gt;Overview&lt;/a&gt; | &lt;a href=&quot;guide&quot;&gt;Guide&lt;/a&gt; | &lt;a href=&quot;decisions&quot;&gt;Decisions&lt;/a&gt; |
&lt;a href=&quot;best-practices&quot;&gt;Best practices&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;&lt;a id=&quot;about&quot;/&gt;&lt;/p&gt;

&lt;h2 id=&quot;about&quot;&gt;About&lt;/h2&gt;

&lt;p&gt;The Go Style Guide and accompanying documents codify the current best approaches
for writing readable and idiomatic Go. Adherence to the Style Guide is not
intended to be absolute, and these documents will never be exhaustive. Our
intention is to minimize the guesswork of writing readable Go so that newcomers
to the language can avoid common mistakes. The Style Guide also serves to unify
the style guidance given by anyone reviewing Go code at Google.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;Document&lt;/th&gt;
      &lt;th&gt;Link&lt;/th&gt;
      &lt;th&gt;Primary Audience&lt;/th&gt;
      &lt;th&gt;&lt;a href=&quot;#normative&quot;&gt;Normative&lt;/a&gt;&lt;/th&gt;
      &lt;th&gt;&lt;a href=&quot;#canonical&quot;&gt;Canonical&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Style Guide&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;https://google.github.io/styleguide/go/guide&lt;/td&gt;
      &lt;td&gt;Everyone&lt;/td&gt;
      &lt;td&gt;Yes&lt;/td&gt;
      &lt;td&gt;Yes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Style Decisions&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;https://google.github.io/styleguide/go/decisions&lt;/td&gt;
      &lt;td&gt;Readability Mentors&lt;/td&gt;
      &lt;td&gt;Yes&lt;/td&gt;
      &lt;td&gt;No&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;strong&gt;Best Practices&lt;/strong&gt;&lt;/td&gt;
      &lt;td&gt;https://google.github.io/styleguide/go/best-practices&lt;/td&gt;
      &lt;td&gt;Anyone interested&lt;/td&gt;
      &lt;td&gt;No&lt;/td&gt;
      &lt;td&gt;No&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;&lt;a id=&quot;docs&quot;/&gt;&lt;/p&gt;

&lt;h3 id=&quot;documents&quot;&gt;Documents&lt;/h3&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;The &lt;strong&gt;&lt;a href=&quot;https://google.github.io/styleguide/go/guide&quot;&gt;Style Guide&lt;/a&gt;&lt;/strong&gt; outlines
the foundation of Go style at Google. This document is definitive and is
used as the basis for the recommendations in Style Decisions and Best
Practices.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://google.github.io/styleguide/go/decisions&quot;&gt;Style Decisions&lt;/a&gt;&lt;/strong&gt; is a
more verbose document that summarizes decisions on specific style points and
discusses the reasoning behind the decisions where appropriate.&lt;/p&gt;

    &lt;p&gt;These decisions may occasionally change based on new data, new language
features, new libraries, or emerging patterns, but it is not expected that
individual Go programmers at Google should keep up-to-date with this
document.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://google.github.io/styleguide/go/best-practices&quot;&gt;Best Practices&lt;/a&gt;&lt;/strong&gt;
documents some of the patterns that have evolved over time that solve common
problems, read well, and are robust to code maintenance needs.&lt;/p&gt;

    &lt;p&gt;These best practices are not canonical, but Go programmers at Google are
encouraged to use them where possible to keep the codebase uniform and
consistent.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;These documents intend to:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Agree on a set of principles for weighing alternate styles&lt;/li&gt;
  &lt;li&gt;Codify settled matters of Go style&lt;/li&gt;
  &lt;li&gt;Document and provide canonical examples for Go idioms&lt;/li&gt;
  &lt;li&gt;Document the pros and cons of various style decisions&lt;/li&gt;
  &lt;li&gt;Help minimize surprises in Go readability reviews&lt;/li&gt;
  &lt;li&gt;Help readability mentors use consistent terminology and guidance&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;These documents do &lt;strong&gt;not&lt;/strong&gt; intend to:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Be an exhaustive list of comments that can be given in a readability review&lt;/li&gt;
  &lt;li&gt;List all of the rules everyone is expected to remember and follow at all
times&lt;/li&gt;
  &lt;li&gt;Replace good judgment in the use of language features and style&lt;/li&gt;
  &lt;li&gt;Justify large-scale changes to get rid of style differences&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;There will always be differences from one Go programmer to another and from one
team’s codebase to another. However, it is in the best interest of Google and
Alphabet that our codebase be as consistent as possible. (See
&lt;a href=&quot;guide#consistency&quot;&gt;guide&lt;/a&gt; for more on consistency.) To that end, feel free to
make style improvements as you see fit, but you do not need to nit-pick every
violation of the Style Guide that you find. In particular, these documents may
change over time, and that is no reason to cause extra churn in existing
codebases; it suffices to write new code using the latest best practices and
address nearby issues over time.&lt;/p&gt;

&lt;p&gt;It is important to recognize that issues of style are inherently personal and
that there are always inherent trade-offs. Much of the guidance in these
documents is subjective, but just like with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;gofmt&lt;/code&gt;, there is significant value
in the uniformity they provide. As such, style recommendations will not be
changed without due discourse, Go programmers at Google are encouraged to follow
the style guide even where they might disagree.&lt;/p&gt;

&lt;p&gt;&lt;a id=&quot;definitions&quot;/&gt;&lt;/p&gt;

&lt;h2 id=&quot;definitions&quot;&gt;Definitions&lt;/h2&gt;

&lt;p&gt;The following words, which are used throughout the style documents, are defined
below:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Canonical&lt;/strong&gt;: Establishes prescriptive and enduring rules
&lt;a id=&quot;canonical&quot;/&gt;&lt;/p&gt;

    &lt;p&gt;Within these documents, “canonical” is used to describe something that is
considered a standard that all code (old and new) should follow and that is
not expected to change substantially over time. Principles in the canonical
documents should be understood by authors and reviewers alike, so everything
included within a canonical document must meet a high bar. As such,
canonical documents are generally shorter and prescribe fewer elements of
style than non-canonical documents.&lt;/p&gt;

    &lt;p&gt;https://google.github.io/styleguide/go#canonical&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Normative&lt;/strong&gt;: Intended to establish consistency &lt;a id=&quot;normative&quot;/&gt;&lt;/p&gt;

    &lt;p&gt;Within these documents, “normative” is used to describe something that is an
agreed-upon element of style for use by Go code reviewers, in order that the
suggestions, terminology, and justifications are consistent. These elements
may change over time, and these documents will reflect such changes so that
reviewers can remain consistent and up-to-date. Authors of Go code are not
expected to be familiar with the normative documents, but the documents will
frequently be used as a reference by reviewers in readability reviews.&lt;/p&gt;

    &lt;p&gt;https://google.github.io/styleguide/go#normative&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;Idiomatic&lt;/strong&gt;: Common and familiar &lt;a id=&quot;idiomatic&quot;/&gt;&lt;/p&gt;

    &lt;p&gt;Within these documents, “idiomatic” is used to refer to something that is
prevalent in Go code and has become a familiar pattern that is easy to
recognize. In general, an idiomatic pattern should be preferred to something
unidiomatic if both serve the same purpose in context, as this is what will
be the most familiar to readers.&lt;/p&gt;

    &lt;p&gt;https://google.github.io/styleguide/go#idiomatic&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;a id=&quot;references&quot;/&gt;&lt;/p&gt;

&lt;h2 id=&quot;additional-references&quot;&gt;Additional references&lt;/h2&gt;

&lt;p&gt;This guide assumes the reader is familiar with &lt;a href=&quot;https://go.dev/doc/effective_go&quot;&gt;Effective Go&lt;/a&gt;, as it provides a
common baseline for Go code across the entire Go community.&lt;/p&gt;

&lt;p&gt;Below are some additional resources for those looking to self-educate about Go
style and for reviewers looking to provide further linkable context in their
reviews. Participants in the Go readability process are not expected to be
familiar with these resources, but they may arise as context in readability
reviews.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;External References&lt;/strong&gt;&lt;/p&gt;



&lt;p&gt;&lt;strong&gt;Relevant Testing-on-the-Toilet articles&lt;/strong&gt;&lt;/p&gt;



&lt;p&gt;&lt;strong&gt;Additional External Writings&lt;/strong&gt;&lt;/p&gt;







      
      
      
    &lt;/div&gt;
    
    
  &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>248914062e6f6c1cf857e47de9efb47c</guid>
<title>运维自动化之任务系统分享</title>
<link>https://toutiao.io/k/lngrzap</link>
<content:encoded>&lt;div&gt;&lt;div&gt;

          
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>