<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>9e68f96d6f43288819b895750e32705a</guid>
<title>é¢è¯•å®˜ï¼šä¸ºä»€ä¹ˆ Go çš„è´Ÿè½½å› å­æ˜¯ 6.5ï¼Ÿ</title>
<link>https://toutiao.io/k/mwuuo10</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ç…é±¼ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ€è¿‘æˆ‘æœ‰ä¸€ä¸ªæœ‹å‹ï¼Œåœ¨ç½‘ä¸Šçœ‹åˆ°ä¸€ä¸ªæœ‰è¶£çš„&lt;strong&gt;æ®µå­&lt;/strong&gt;ï¼Œå¼•å‘äº†æˆ‘ä¸€äº›å…´è¶£ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5602536997885835&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/KVl0giak5ib4iaLMulj7LUetkJFyS01S7TqI4Ne3zaLaoDN0EibvVh1mqvRt01VmA5LNjnEp0maDgwmC8Rrib5Mfe4A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;946&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¬è¯´æ˜¯åœ¨æœ€åçš„é—²èŠã€å¹æ°´ã€èŠäººç”Ÿã€ä¹±æ‰¯ç¯èŠ‚äº†ï¼Œä¸æ˜¯åœ¨æŠ€æœ¯ç¯èŠ‚äº†ï¼Œæ‰€ä»¥å¤§å®¶ä¹Ÿä¸ç”¨å¤ªåœ¨æ„ä»€ä¹ˆæŠ€æœ¯è¯„ä¼°æ³•åˆ™ï¼ˆåˆ«æ ï¼‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç…é±¼ä½œä¸ºä¸€åæŠ€æœ¯å·ä¸»ï¼Œ&lt;strong&gt;çœ‹åˆ°è¿™é‡Œçš„ 6.5ï¼Œå°±æƒ³ç»™å¤§å®¶æŒ–ä¸€æŒ–&lt;/strong&gt;ï¼Œè¿™åˆ°åº•æ˜¯ä½•ç‰©ï¼Œå’Œå¤§å®¶ä¸€åŒå­¦ä¹ å’Œå¢é•¿çŸ¥è¯†ï¼&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;6.5 æ˜¯ä»€ä¹ˆ&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®é™…ä¸Šåœ¨ Go è¯­è¨€ä¸­ï¼Œå°±å­˜åœ¨ 6.5 è¿™ä¸€æ¦‚å¿µï¼Œä¸ map å­˜åœ¨ç›´æ¥å…³ç³»ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦å…ˆäº†è§£ map çš„åŸºæœ¬æ•°æ®ç»“æ„ï¼Œå†ä»‹ç» 6.5 çš„èƒŒæ™¯å’Œç”±æ¥ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¼€å§‹å­¦ä¹  6.5 çš„å‰ä¸–ä»Šç”Ÿå§ï¼&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;äº†è§£ map åº•å±‚&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¥å‰åœ¨å†™ã€Šæ·±å…¥ç†è§£ Go mapï¼šåˆå§‹åŒ–å’Œè®¿é—®å…ƒç´ ã€‹æ—¶æœ‰ä»‹ç»è¿‡ map çš„åŸºç¡€æ•°æ®ç»“æ„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŸºæœ¬ç»“æ„å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;1.086&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/KVl0giak5ib4iaLMulj7LUetkJFyS01S7TqUsKoqG4C5WKHu5Dms3ibLvkbXP3DsOibFjlTFsVlH0QUcIpW2pjUTHOw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1000&quot;/&gt;&lt;figcaption&gt;map åŸºæœ¬æ•°æ®ç»“æ„&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­é‡è¦çš„ä¸€ä¸ªåŸºæœ¬å•ä½æ˜¯ hmapï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;type&lt;/span&gt;Â hmapÂ &lt;span&gt;struct&lt;/span&gt;Â {&lt;br/&gt;Â countÂ Â Â Â Â &lt;span&gt;int&lt;/span&gt;&lt;br/&gt;Â flagsÂ Â Â Â Â &lt;span&gt;uint8&lt;/span&gt;&lt;br/&gt;Â BÂ Â Â Â Â Â Â Â Â &lt;span&gt;uint8&lt;/span&gt;&lt;br/&gt;Â noverflowÂ &lt;span&gt;uint16&lt;/span&gt;&lt;br/&gt;Â hash0Â Â Â Â Â &lt;span&gt;uint32&lt;/span&gt;&lt;br/&gt;Â bucketsÂ Â Â Â unsafe.Pointer&lt;br/&gt;Â oldbucketsÂ unsafe.Pointer&lt;br/&gt;Â nevacuateÂ Â &lt;span&gt;uintptr&lt;/span&gt;&lt;br/&gt;Â extraÂ *mapextra&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt;Â mapextraÂ &lt;span&gt;struct&lt;/span&gt;Â {&lt;br/&gt;Â overflowÂ Â Â Â *[]*bmap&lt;br/&gt;Â oldoverflowÂ *[]*bmap&lt;br/&gt;Â nextOverflowÂ *bmap&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;countï¼šmap çš„å¤§å°ï¼Œä¹Ÿå°±æ˜¯ len() çš„å€¼ï¼Œä»£æŒ‡ map ä¸­çš„é”®å€¼å¯¹ä¸ªæ•°ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;flagsï¼šçŠ¶æ€æ ‡è¯†ï¼Œä¸»è¦æ˜¯ goroutine å†™å…¥å’Œæ‰©å®¹æœºåˆ¶çš„ç›¸å…³çŠ¶æ€æ§åˆ¶ã€‚å¹¶å‘è¯»å†™çš„åˆ¤æ–­æ¡ä»¶ä¹‹ä¸€å°±æ˜¯è¯¥å€¼ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Bï¼š&lt;strong&gt;æ¡¶ï¼Œæœ€å¤§å¯å®¹çº³çš„å…ƒç´ æ•°é‡ï¼Œå€¼ä¸º è´Ÿè½½å› å­ï¼ˆé»˜è®¤ 6.5ï¼‰ * 2 ^ Bï¼Œæ˜¯ 2 çš„æŒ‡æ•°&lt;/strong&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;noverflowï¼šæº¢å‡ºæ¡¶çš„æ•°é‡ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;hash0ï¼šå“ˆå¸Œå› å­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;bucketsï¼šä¿å­˜å½“å‰æ¡¶æ•°æ®çš„æŒ‡é’ˆåœ°å€ï¼ˆæŒ‡å‘ä¸€æ®µè¿ç»­çš„å†…å­˜åœ°å€ï¼Œä¸»è¦å­˜å‚¨é”®å€¼å¯¹æ•°æ®ï¼‰ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;oldbucketsï¼Œä¿å­˜æ—§æ¡¶çš„æŒ‡é’ˆåœ°å€ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;nevacuateï¼šè¿ç§»è¿›åº¦ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;extraï¼šåŸæœ‰ buckets æ»¡è½½åï¼Œä¼šå‘ç”Ÿæ‰©å®¹åŠ¨ä½œï¼Œåœ¨ Go çš„æœºåˆ¶ä¸­ä½¿ç”¨äº†å¢é‡æ‰©å®¹ï¼Œå¦‚ä¸‹ä¸ºç»†é¡¹ï¼š&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;overflow ä¸º hmap.buckets ï¼ˆå½“å‰ï¼‰æº¢å‡ºæ¡¶çš„æŒ‡é’ˆåœ°å€ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;oldoverflow ä¸º hmap.oldbuckets ï¼ˆæ—§ï¼‰æº¢å‡ºæ¡¶çš„æŒ‡é’ˆåœ°å€ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;nextOverflow ä¸ºç©ºé—²æº¢å‡ºæ¡¶çš„æŒ‡é’ˆåœ°å€ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬å…³æ³¨åˆ° hmap çš„ B å­—æ®µï¼Œå…¶å€¼å°±æ˜¯ 6.5ï¼Œä»–å°±æ˜¯æˆ‘ä»¬åœ¨è‹¦è‹¦å¯»æ‰¾çš„ 6.5ï¼Œä½†ä»–åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä»€ä¹ˆæ˜¯è´Ÿè½½å› å­&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;B å€¼ï¼Œè¿™é‡Œå°±æ¶‰åŠåˆ°ä¸€ä¸ªæ¦‚å¿µï¼š&lt;strong&gt;è´Ÿè½½å› å­ï¼ˆload factorï¼‰ï¼Œç”¨äºè¡¡é‡å½“å‰å“ˆå¸Œè¡¨ä¸­ç©ºé—´å ç”¨ç‡çš„æ ¸å¿ƒæŒ‡æ ‡&lt;/strong&gt;ï¼Œä¹Ÿå°±æ˜¯æ¯ä¸ª bucket æ¡¶å­˜å‚¨çš„å¹³å‡å…ƒç´ ä¸ªæ•°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦å¤–è´Ÿè½½å› å­&lt;strong&gt;ä¸æ‰©å®¹ã€è¿ç§»&lt;/strong&gt;ç­‰é‡æ–°æ•£åˆ—ï¼ˆrehashï¼‰è¡Œä¸ºæœ‰ç›´æ¥å…³ç³»ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œä¼šä¸æ–­åœ°è¿›è¡Œæ’å…¥ã€åˆ é™¤ç­‰ï¼Œä¼šå¯¼è‡´ bucket ä¸å‡ï¼Œå†…å­˜åˆ©ç”¨ç‡ä½ï¼Œéœ€è¦è¿ç§»ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œå‡ºç°è´Ÿè½½å› å­è¿‡å¤§ï¼Œéœ€è¦åšæ‰©å®¹ï¼Œè§£å†³ bucket è¿‡å¤§çš„é—®é¢˜ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è´Ÿè½½å› å­æ˜¯å“ˆå¸Œè¡¨ä¸­çš„ä¸€ä¸ªé‡è¦æŒ‡æ ‡ï¼Œåœ¨å„ç§ç‰ˆæœ¬çš„å“ˆå¸Œè¡¨å®ç°ä¸­éƒ½æœ‰ç±»ä¼¼çš„ä¸œè¥¿ï¼Œä¸»è¦ç›®çš„æ˜¯&lt;strong&gt;ä¸ºäº†å¹³è¡¡ buckets çš„å­˜å‚¨ç©ºé—´å¤§å°å’ŒæŸ¥æ‰¾å…ƒç´ æ—¶çš„æ€§èƒ½é«˜ä½&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æ¥è§¦å„ç§å“ˆå¸Œè¡¨æ—¶éƒ½å¯ä»¥å…³æ³¨ä¸€ä¸‹ï¼Œåšä¸åŒçš„å¯¹æ¯”ï¼Œçœ‹çœ‹å„å®¶çš„è€ƒé‡ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¸ºä»€ä¹ˆæ˜¯ 6.5&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;äº†è§£æ˜¯ä»€ä¹ˆåï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥æ·±æŒ–ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºä»€ä¹ˆ Go è¯­è¨€ä¸­å“ˆå¸Œè¡¨çš„è´Ÿè½½å› å­æ˜¯ 6.5ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯ 8 ï¼Œä¹Ÿä¸æ˜¯ 1ã€‚è¿™é‡Œé¢æœ‰å¯é çš„æ•°æ®æ”¯æ’‘å—ï¼Ÿ&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æµ‹è¯•æŠ¥å‘Š&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®é™…ä¸Šè¿™æ˜¯ Go å®˜æ–¹çš„ç»è¿‡è®¤çœŸçš„æµ‹è¯•å¾—å‡ºçš„æ•°å­—ï¼Œä¸€èµ·æ¥çœ‹çœ‹å®˜æ–¹çš„è¿™ä»½æµ‹è¯•æŠ¥å‘Šã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æŠ¥å‘Šä¸­å…±åŒ…å« 4 ä¸ªå…³é”®æŒ‡æ ‡ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;loadFactor&lt;/th&gt;&lt;th&gt;%overflow&lt;/th&gt;&lt;th&gt;bytes/entry&lt;/th&gt;&lt;th&gt;hitprobe&lt;/th&gt;&lt;th&gt;missprobe&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;4.00&lt;/td&gt;&lt;td&gt;2.13&lt;/td&gt;&lt;td&gt;20.77&lt;/td&gt;&lt;td&gt;3.00&lt;/td&gt;&lt;td&gt;4.00&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;4.50&lt;/td&gt;&lt;td&gt;4.05&lt;/td&gt;&lt;td&gt;17.30&lt;/td&gt;&lt;td&gt;3.25&lt;/td&gt;&lt;td&gt;4.50&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;5.00&lt;/td&gt;&lt;td&gt;6.85&lt;/td&gt;&lt;td&gt;14.77&lt;/td&gt;&lt;td&gt;3.50&lt;/td&gt;&lt;td&gt;5.00&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;5.50&lt;/td&gt;&lt;td&gt;10.55&lt;/td&gt;&lt;td&gt;12.94&lt;/td&gt;&lt;td&gt;3.75&lt;/td&gt;&lt;td&gt;5.50&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;6.00&lt;/td&gt;&lt;td&gt;15.27&lt;/td&gt;&lt;td&gt;11.67&lt;/td&gt;&lt;td&gt;4.00&lt;/td&gt;&lt;td&gt;6.00&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;6.50&lt;/td&gt;&lt;td&gt;20.90&lt;/td&gt;&lt;td&gt;10.79&lt;/td&gt;&lt;td&gt;4.25&lt;/td&gt;&lt;td&gt;6.50&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;7.00&lt;/td&gt;&lt;td&gt;27.14&lt;/td&gt;&lt;td&gt;10.15&lt;/td&gt;&lt;td&gt;4.50&lt;/td&gt;&lt;td&gt;7.00&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;7.50&lt;/td&gt;&lt;td&gt;34.03&lt;/td&gt;&lt;td&gt;9.73&lt;/td&gt;&lt;td&gt;4.75&lt;/td&gt;&lt;td&gt;7.50&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;8.00&lt;/td&gt;&lt;td&gt;41.10&lt;/td&gt;&lt;td&gt;9.40&lt;/td&gt;&lt;td&gt;5.00&lt;/td&gt;&lt;td&gt;8.00&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;loadFactorï¼šè´Ÿè½½å› å­ï¼Œä¹Ÿæœ‰å«è£…è½½å› å­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;%overflowï¼šæº¢å‡ºç‡ï¼Œæœ‰æº¢å‡º bukcet çš„ç™¾åˆ†æ¯”ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;bytes/entryï¼šæ¯å¯¹ key/elem çš„å¼€é”€å­—èŠ‚æ•°.&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;hitprobeï¼šæŸ¥æ‰¾ä¸€ä¸ªå­˜åœ¨çš„ key æ—¶ï¼Œè¦æŸ¥æ‰¾çš„å¹³å‡ä¸ªæ•°ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;missprobeï¼šæŸ¥æ‰¾ä¸€ä¸ªä¸å­˜åœ¨çš„ key æ—¶ï¼Œè¦æŸ¥æ‰¾çš„å¹³å‡ä¸ªæ•°ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é€‰æ‹©æ•°å€¼&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»“åˆæµ‹è¯•æŠ¥å‘Šä¸€çœ‹ï¼Œå¥½å®¶ä¼™ï¼Œä¸æµ‹ä¸çŸ¥é“ï¼Œä¸€æµ‹å“ä¸€è·³ï¼Œæœ‰ä¾æ®äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Go å®˜æ–¹å‘ç°ï¼š&lt;strong&gt;è´Ÿè½½å› å­å¤ªå¤§äº†ï¼Œä¼šæœ‰å¾ˆå¤šæº¢å‡ºçš„æ¡¶ã€‚å¤ªå°äº†ï¼Œå°±ä¼šæµªè´¹å¾ˆå¤šç©ºé—´&lt;/strong&gt;ï¼ˆtoo large and we have lots of overflow buckets, too small and we waste a lot of spaceï¼‰ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5058236272878536&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/KVl0giak5ib4iaLMulj7LUetkJFyS01S7TqwghNxRjViasYFrSkb45trFv1z3Z0BJT1yso6D59TnCqy1dojHScwtgA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1202&quot;/&gt;&lt;figcaption&gt;æ¥è‡ª Go å®˜æ–¹æºç è¯´æ˜&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ ¹æ®è¿™ä»½æµ‹è¯•ç»“æœå’Œè®¨è®ºï¼ŒGo å®˜æ–¹æŠŠ Go ä¸­çš„ map çš„è´Ÿè½½å› å­ç¡¬ç¼–ç ä¸º 6.5ï¼Œè¿™å°±æ˜¯ 6.5 çš„é€‰æ‹©ç¼˜ç”±ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ„å‘³ç€åœ¨ Go è¯­è¨€ä¸­ï¼Œ&lt;strong&gt;å½“ Bï¼ˆbucketï¼‰å¹³å‡æ¯ä¸ªå­˜å‚¨çš„å…ƒç´ å¤§äºæˆ–ç­‰äº 6.5 æ—¶ï¼Œå°±ä¼šè§¦å‘æ‰©å®¹è¡Œä¸º&lt;/strong&gt;ï¼Œè¿™æ˜¯ä½œä¸ºæˆ‘ä»¬ç”¨æˆ·å¯¹è¿™ä¸ªæ•°å€¼æœ€è¿‘çš„æ¥è§¦ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æ€»ç»“&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ä»Šå¤©è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å…ˆå¿«é€Ÿäº†è§£äº† Go è¯­è¨€ä¸­ map çš„åŸºæœ¬æ•°æ®ç»“æ„å’Œè®¾è®¡ï¼Œè¿™å’Œæˆ‘ä»¬è¦è§£é‡Šçš„é—®é¢˜ç´§å¯†ç›¸å…³ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç´§æ¥ç€é’ˆå¯¹å¼€å¤´æ‰€æå‡ºçš„ 6.5ï¼Œè¿›è¡Œäº†ä»‹ç»å’Œè¯´æ˜ï¼Œè¿™å…¶å®æ˜¯ map ä¸­çš„è´Ÿè½½å› å­ã€‚å…¶æ•°å€¼çš„ç¡®å®šæ¥æºäº Go å®˜æ–¹çš„æµ‹è¯•ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºä»€ä¹ˆæ˜¯ 6.5ï¼Œä½ æ‡‚äº†å—ï¼Ÿ&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å‚è€ƒ&lt;/h2&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;src/runtime/map.go&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ·±åº¦è§£ægolang map&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;golangä¸­mapåº•å±‚Bå€¼çš„è®¡ç®—é€»è¾‘&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/section&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzUxMDI4MDc1NA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/KVl0giak5ib4iac2xQZIq5icSiaTepuae8zLIUMiaxibbUM8ic735ewo6e89GRtjGbUBlgNYibwCjAicglQcvz6dCQ6yTKOw/0?wx_fmt=png&quot; data-nickname=&quot;è„‘å­è¿›ç…é±¼äº†&quot; data-alias=&quot;eddycjy&quot; data-signature=&quot;åˆ†äº«è®¡ç®—æœºåŸºç¡€ã€Go è¯­è¨€ã€å¾®æœåŠ¡æ¶æ„å’Œç³»ç»Ÿè®¾è®¡ï¼›è‘—æœ‰å›¾ä¹¦ã€ŠGo è¯­è¨€ç¼–ç¨‹ä¹‹æ—…ã€‹ã€‚&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;å…³æ³¨ç…é±¼ï¼Œå¸å–ä»–çš„çŸ¥è¯†Â ğŸ‘†&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;0.07106598984771574&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/486RHs1WbcgGib6o96dHbvGUGGwPicd8wusUGH1cXR29tM4bO0lNzialzkQhvU6m5ZUdaKibmcF2OQayjMe9Bia6iaXQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;394&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä½ å¥½ï¼Œæˆ‘æ˜¯ç…é±¼ã€‚é«˜ä¸€æŠ˜è…¾è¿‡å‰ç«¯ï¼Œå‚åŠ è¿‡å›½èµ›æ‹¿äº†å¥–ï¼Œå¤§å­¦æè¿‡ PHPã€‚ç°åœ¨æ•´ Goï¼Œåœ¨å…¬å¸è´Ÿè´£å¾®æœåŠ¡æ¶æ„ç­‰ç›¸å…³å·¥ä½œæ¨è¿›å’Œç ”å‘ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;span&gt;ä»å¤§å­¦å¼€å§‹é è‡ªå·±èµšç”Ÿæ´»è´¹å’Œå­¦è´¹ï¼Œåˆ°å‡ºç‰ˆ Go ç•…é”€ä¹¦ã€ŠGo è¯­è¨€ç¼–ç¨‹ä¹‹æ—…ã€‹ï¼Œå†åˆ°è·å¾— GOPï¼ˆGo é¢†åŸŸæœ€æœ‰è§‚ç‚¹ä¸“å®¶ï¼‰è£èª‰ï¼Œ&lt;/span&gt;&lt;strong&gt;&lt;span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUxMDI4MDc1NA==&amp;amp;mid=2247483854&amp;amp;idx=1&amp;amp;sn=ec422fbf4d846975f2930ddeb5e81373&amp;amp;chksm=f9041493ce739d85a4b987eece14da627206cdad798f645cc770868312e4a22b6df24804f186&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ç‚¹å‡»è“å­—æŸ¥çœ‹æˆ‘çš„å‡ºä¹¦ä¹‹è·¯&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;ç‚¹å‡»è“å­—æŸ¥çœ‹æˆ‘çš„å‡ºä¹¦ä¹‹è·¯&lt;/a&gt;&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ—¥å¸¸åˆ†äº«é«˜è´¨é‡æ–‡ç« ï¼Œè¾“å‡º Go é¢è¯•ã€å·¥ä½œç»éªŒã€æ¶æ„è®¾è®¡ï¼Œ&lt;span&gt;åŠ å¾®ä¿¡æ‹‰è¯»è€…äº¤æµç¾¤ï¼Œè®°å¾—ç‚¹èµï¼&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;
                &lt;/div&gt;

                

                



                
                &lt;div class=&quot;reward_qrcode_area reward_area tc&quot; id=&quot;js_reward_qrcode&quot;&gt;
                                &lt;p class=&quot;tips_global&quot; aria-hidden=&quot;true&quot; id=&quot;js_a11y_reward_qr_title&quot;&gt;Long-press QR code to transfer me a reward&lt;/p&gt;
                                                                &lt;p role=&quot;option&quot; aria-labelledby=&quot;js_a11y_reward_qr_word js_a11y_comma js_a11y_reward_qr_title js_a11y_reward_qr_money&quot; aria-describedby=&quot;js_a11y_reward_qr_tips &quot; class=&quot;reward_tips&quot; id=&quot;js_a11y_reward_qr_word&quot;&gt;æ¥ä¸€ä¸ªåé¦ˆï¼&lt;/p&gt;
                                &lt;span class=&quot;reward_qrcode_img_wrp&quot;&gt;&lt;img alt=&quot;èµèµäºŒç»´ç &quot; class=&quot;reward_qrcode_img&quot; id=&quot;js_reward_qrcode_img&quot;/&gt;&lt;/span&gt;
                                &lt;p aria-hidden=&quot;true&quot; id=&quot;js_a11y_reward_qr_tips&quot; class=&quot;tips_global&quot;&gt;As required by Apple&#x27;s new policy, the Reward feature has been disabled on Weixin for iOS. You can still reward an Official Account by transferring money via QR code.&lt;/p&gt;
                            &lt;/div&gt;
                                                                            
                              
            &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>8566a8fc21ff96055394150425955a68</guid>
<title>å¦‚ä½•ä¼˜é›…åœ°è®°å½•æ“ä½œæ—¥å¿—ï¼Ÿ</title>
<link>https://toutiao.io/k/l5h2n30</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;p data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;img class=&quot;rich_pages&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;48&quot; data-ratio=&quot;0.10078125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsUrXicw2VXTQTVVN5yxXWEacdY1ZdxTH195Pgibtib8EENJRMia3tzEnyVfgyfAgRibMssKqwlE186TLSw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;æ€»ç¬¬471&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;ç¯‡&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;2021å¹´ ç¬¬041ç¯‡&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;section data-role=&quot;outer&quot; label=&quot;Powered by 135editor.com&quot;&gt;&lt;section data-role=&quot;outer&quot; label=&quot;Powered by 135editor.com&quot;&gt;&lt;section data-tools=&quot;135ç¼–è¾‘å™¨&quot; data-id=&quot;127&quot;&gt;&lt;section data-tools=&quot;135ç¼–è¾‘å™¨&quot; data-id=&quot;127&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;img border=&quot;0&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;93&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;93&quot; data-ratio=&quot;0.9966329966329966&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsVLR21NicmyQxcmiaqQ2KOJJj2JLwgJL4KSbo7CcuMF1hLf4xFjGQiaDRhSPyERxWGChWYP47Oc4sKGA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;594&quot; data-width=&quot;100%&quot; opacity=&quot;&quot; title=&quot;undefined&quot;/&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot; data-style=&quot;text-align: left; font-size: 14px; color: inherit;&quot;&gt;&lt;section&gt;&lt;span&gt;æ“ä½œæ—¥å¿—å‡ ä¹å­˜åœ¨äºæ¯ä¸ªç³»ç»Ÿä¸­ï¼Œè€Œè¿™äº›ç³»ç»Ÿéƒ½æœ‰è®°å½•æ“ä½œæ—¥å¿—çš„ä¸€å¥— APIã€‚æ“ä½œæ—¥å¿—å’Œç³»ç»Ÿæ—¥å¿—ä¸ä¸€æ ·ï¼Œæ“ä½œæ—¥å¿—å¿…é¡»è¦åšåˆ°ç®€å•æ˜“æ‡‚ã€‚æ‰€ä»¥å¦‚ä½•è®©æ“ä½œæ—¥å¿—ä¸è·Ÿä¸šåŠ¡é€»è¾‘è€¦åˆï¼Œå¦‚ä½•è®©æ“ä½œæ—¥å¿—çš„å†…å®¹æ˜“äºç†è§£ï¼Œå¦‚ä½•è®©æ“ä½œæ—¥å¿—çš„æ¥å…¥æ›´åŠ ç®€å•ï¼Ÿä¸Šé¢è¿™äº›éƒ½æ˜¯æœ¬æ–‡è¦å›ç­”çš„é—®é¢˜ã€‚æˆ‘ä»¬ä¸»è¦å›´ç»•ç€å¦‚ä½•â€œä¼˜é›…â€åœ°è®°å½•æ“ä½œæ—¥å¿—å±•å¼€æè¿°ï¼Œå¸Œæœ›å¯¹ä»äº‹ç›¸å…³å·¥ä½œçš„åŒå­¦èƒ½å¤Ÿæœ‰æ‰€å¸®åŠ©æˆ–è€…å¯å‘ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;1. æ“ä½œæ—¥å¿—çš„ä½¿ç”¨åœºæ™¯&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;2. å®ç°æ–¹å¼&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;2.1 ä½¿ç”¨ Canal ç›‘å¬æ•°æ®åº“è®°å½•æ“ä½œæ—¥å¿—&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;2.2 é€šè¿‡æ—¥å¿—æ–‡ä»¶çš„æ–¹å¼è®°å½•&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;2.3 é€šè¿‡ LogUtil çš„æ–¹å¼è®°å½•æ—¥å¿—&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;2.4 æ–¹æ³•æ³¨è§£å®ç°æ“ä½œæ—¥å¿—&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;3. ä¼˜é›…åœ°æ”¯æŒ AOP ç”ŸæˆåŠ¨æ€çš„æ“ä½œæ—¥å¿—&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;4. ä»£ç å®ç°è§£æ&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;5. æ€»ç»“&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;1. æ“ä½œæ—¥å¿—çš„ä½¿ç”¨åœºæ™¯&lt;/span&gt;&lt;/h2&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-cropselx1=&quot;0&quot; data-cropselx2=&quot;558&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;103&quot; data-ratio=&quot;0.18588399720475193&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsXehNsNY76lXs1L1HwaLESxyp4WDCzpf9V5MbCTCN0czdptehicA5TUy0TCKoQoOfqzHUH7AtcDXdw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1431&quot;/&gt;&lt;figcaption&gt;&lt;span&gt;ä¾‹å­&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;ç³»ç»Ÿæ—¥å¿—å’Œæ“ä½œæ—¥å¿—çš„åŒºåˆ«&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;ç³»ç»Ÿæ—¥å¿—&lt;/strong&gt;ï¼šç³»ç»Ÿæ—¥å¿—ä¸»è¦æ˜¯ä¸ºå¼€å‘æ’æŸ¥é—®é¢˜æä¾›ä¾æ®ï¼Œä¸€èˆ¬æ‰“å°åœ¨æ—¥å¿—æ–‡ä»¶ä¸­ï¼›ç³»ç»Ÿæ—¥å¿—çš„å¯è¯»æ€§è¦æ±‚æ²¡é‚£ä¹ˆé«˜ï¼Œæ—¥å¿—ä¸­ä¼šåŒ…å«ä»£ç çš„ä¿¡æ¯ï¼Œæ¯”å¦‚åœ¨æŸä¸ªç±»çš„æŸä¸€è¡Œæ‰“å°äº†ä¸€ä¸ªæ—¥å¿—ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;æ“ä½œæ—¥å¿—&lt;/strong&gt;ï¼šä¸»è¦æ˜¯å¯¹æŸä¸ªå¯¹è±¡è¿›è¡Œæ–°å¢æ“ä½œæˆ–è€…ä¿®æ”¹æ“ä½œåè®°å½•ä¸‹è¿™ä¸ªæ–°å¢æˆ–è€…ä¿®æ”¹ï¼Œæ“ä½œæ—¥å¿—è¦æ±‚å¯è¯»æ€§æ¯”è¾ƒå¼ºï¼Œå› ä¸ºå®ƒä¸»è¦æ˜¯ç»™ç”¨æˆ·çœ‹çš„ï¼Œæ¯”å¦‚è®¢å•çš„ç‰©æµä¿¡æ¯ï¼Œç”¨æˆ·éœ€è¦çŸ¥é“åœ¨ä»€ä¹ˆæ—¶é—´å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ã€‚å†æ¯”å¦‚ï¼Œå®¢æœå¯¹å·¥å•çš„å¤„ç†è®°å½•ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;æ“ä½œæ—¥å¿—çš„è®°å½•æ ¼å¼å¤§æ¦‚åˆ†ä¸ºä¸‹é¢å‡ ç§ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å•çº¯çš„æ–‡å­—è®°å½•ï¼Œæ¯”å¦‚ï¼š2021-09-16 10:00 è®¢å•åˆ›å»ºã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ç®€å•çš„åŠ¨æ€çš„æ–‡æœ¬è®°å½•ï¼Œæ¯”å¦‚ï¼š2021-09-16 10:00 è®¢å•åˆ›å»ºï¼Œè®¢å•å·ï¼šNO.11089999ï¼Œå…¶ä¸­æ¶‰åŠå˜é‡è®¢å•å·â€œNO.11089999â€ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ä¿®æ”¹ç±»å‹çš„æ–‡æœ¬ï¼ŒåŒ…å«ä¿®æ”¹å‰å’Œä¿®æ”¹åçš„å€¼ï¼Œæ¯”å¦‚ï¼š2021-09-16 10:00 ç”¨æˆ·å°æ˜ä¿®æ”¹äº†è®¢å•çš„é…é€åœ°å€ï¼šä»â€œé‡‘ç¿ç¿å°åŒºâ€ä¿®æ”¹åˆ°â€œé“¶ç›ç›å°åŒºâ€ ï¼Œå…¶ä¸­æ¶‰åŠå˜é‡é…é€çš„åŸåœ°å€â€œé‡‘ç¿ç¿å°åŒºâ€å’Œæ–°åœ°å€â€œé“¶ç›ç›å°åŒºâ€ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ä¿®æ”¹è¡¨å•ï¼Œä¸€æ¬¡ä¼šä¿®æ”¹å¤šä¸ªå­—æ®µã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;2. å®ç°æ–¹å¼&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;2.1 ä½¿ç”¨ Canal ç›‘å¬æ•°æ®åº“è®°å½•æ“ä½œæ—¥å¿—&lt;/span&gt;&lt;/h3&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://github.com/alibaba/canal&quot; textvalue=&quot;Canal&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;Canal&lt;/span&gt;&lt;/a&gt;&lt;span&gt; æ˜¯ä¸€æ¬¾åŸºäº MySQL æ•°æ®åº“å¢é‡æ—¥å¿—è§£æï¼Œæä¾›å¢é‡æ•°æ®è®¢é˜…å’Œæ¶ˆè´¹çš„å¼€æºç»„ä»¶ï¼Œé€šè¿‡é‡‡ç”¨ç›‘å¬æ•°æ®åº“ Binlog çš„æ–¹å¼ï¼Œè¿™æ ·å¯ä»¥ä»åº•å±‚çŸ¥é“æ˜¯å“ªäº›æ•°æ®åšäº†ä¿®æ”¹ï¼Œç„¶åæ ¹æ®æ›´æ”¹çš„æ•°æ®è®°å½•æ“ä½œæ—¥å¿—ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯å’Œä¸šåŠ¡é€»è¾‘å®Œå…¨åˆ†ç¦»ã€‚ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼Œå±€é™æ€§å¤ªé«˜ï¼Œåªèƒ½é’ˆå¯¹æ•°æ®åº“çš„æ›´æ”¹åšæ“ä½œæ—¥å¿—è®°å½•ï¼Œå¦‚æœä¿®æ”¹æ¶‰åŠåˆ°å…¶ä»–å›¢é˜Ÿçš„ RPC çš„è°ƒç”¨ï¼Œå°±æ²¡åŠæ³•ç›‘å¬æ•°æ®åº“äº†ã€‚ä¸¾ä¸ªä¾‹å­ï¼šç»™ç”¨æˆ·å‘é€é€šçŸ¥ï¼Œé€šçŸ¥æœåŠ¡ä¸€èˆ¬éƒ½æ˜¯å…¬å¸å†…éƒ¨çš„å…¬å…±ç»„ä»¶ï¼Œè¿™æ—¶å€™åªèƒ½åœ¨è°ƒç”¨ RPC çš„æ—¶å€™æ‰‹å·¥è®°å½•å‘é€é€šçŸ¥çš„æ“ä½œæ—¥å¿—äº†ã€‚&lt;/span&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;2.2 é€šè¿‡æ—¥å¿—æ–‡ä»¶çš„æ–¹å¼è®°å½•&lt;/span&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;log.info(&lt;span&gt;&quot;è®¢å•åˆ›å»º&quot;&lt;/span&gt;)&lt;br/&gt;log.info(&lt;span&gt;&quot;è®¢å•å·²ç»åˆ›å»ºï¼Œè®¢å•ç¼–å·:{}&quot;&lt;/span&gt;,Â orderNo)&lt;br/&gt;log.info(&lt;span&gt;&quot;ä¿®æ”¹äº†è®¢å•çš„é…é€åœ°å€ï¼šä»â€œ{}â€ä¿®æ”¹åˆ°â€œ{}â€ï¼ŒÂ &quot;&lt;/span&gt;é‡‘ç¿ç¿å°åŒº&lt;span&gt;&quot;,Â &quot;&lt;/span&gt;é“¶ç›ç›å°åŒº&lt;span&gt;&quot;)&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;è¿™ç§æ–¹å¼çš„æ“ä½œè®°å½•éœ€è¦è§£å†³ä¸‰ä¸ªé—®é¢˜ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;é—®é¢˜ä¸€ï¼šæ“ä½œäººå¦‚ä½•è®°å½•&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å€ŸåŠ© SLF4J ä¸­çš„ MDC å·¥å…·ç±»ï¼ŒæŠŠæ“ä½œäººæ”¾åœ¨æ—¥å¿—ä¸­ï¼Œç„¶ååœ¨æ—¥å¿—ä¸­ç»Ÿä¸€æ‰“å°å‡ºæ¥ã€‚é¦–å…ˆåœ¨ç”¨æˆ·çš„æ‹¦æˆªå™¨ä¸­æŠŠç”¨æˆ·çš„æ ‡è¯† Put åˆ° MDC ä¸­ã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;@Component&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;UserInterceptor&lt;/span&gt;Â &lt;span&gt;extends&lt;/span&gt;Â &lt;span&gt;HandlerInterceptorAdapter&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;boolean&lt;/span&gt;Â &lt;span&gt;preHandle&lt;/span&gt;&lt;span&gt;(HttpServletRequestÂ request,Â HttpServletResponseÂ response,Â ObjectÂ handler)&lt;/span&gt;Â &lt;span&gt;throws&lt;/span&gt;Â ExceptionÂ &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;//è·å–åˆ°ç”¨æˆ·æ ‡è¯†&lt;/span&gt;&lt;br/&gt;Â Â Â Â StringÂ userNoÂ =Â getUserNo(request);&lt;br/&gt;Â Â Â Â &lt;span&gt;//æŠŠç”¨æˆ·Â IDÂ æ”¾åˆ°Â MDCÂ ä¸Šä¸‹æ–‡ä¸­&lt;/span&gt;&lt;br/&gt;Â Â Â Â MDC.put(&lt;span&gt;&quot;userId&quot;&lt;/span&gt;,Â userNo);&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;super&lt;/span&gt;.preHandle(request,Â response,Â handler);&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;private&lt;/span&gt;Â StringÂ &lt;span&gt;getUserNo&lt;/span&gt;&lt;span&gt;(HttpServletRequestÂ request)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â é€šè¿‡Â SSOÂ æˆ–è€…CookieÂ æˆ–è€…Â Authä¿¡æ¯è·å–åˆ°Â å½“å‰ç™»é™†çš„ç”¨æˆ·ä¿¡æ¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;å…¶æ¬¡ï¼ŒæŠŠ userId æ ¼å¼åŒ–åˆ°æ—¥å¿—ä¸­ï¼Œä½¿ç”¨ %X{userId} å¯ä»¥å–åˆ° MDC ä¸­ç”¨æˆ·æ ‡è¯†ã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&amp;lt;pattern&amp;gt;&lt;span&gt;&quot;%d{yyyy-MM-ddÂ HH:mm:ss.SSS}Â %tÂ %-5levelÂ %X{userId}Â %logger{30}.%method:%LÂ -Â %msg%n&quot;&lt;/span&gt;&amp;lt;/pattern&amp;gt;&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;é—®é¢˜äºŒï¼šæ“ä½œæ—¥å¿—å¦‚ä½•å’Œç³»ç»Ÿæ—¥å¿—åŒºåˆ†å¼€&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;é€šè¿‡é…ç½® Log çš„é…ç½®æ–‡ä»¶ï¼ŒæŠŠæœ‰å…³æ“ä½œæ—¥å¿—çš„ Log å•ç‹¬æ”¾åˆ°ä¸€æ—¥å¿—æ–‡ä»¶ä¸­ã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;//ä¸åŒä¸šåŠ¡æ—¥å¿—è®°å½•åˆ°ä¸åŒçš„æ–‡ä»¶&lt;br/&gt;&lt;span&gt;&amp;lt;&lt;span&gt;appender&lt;/span&gt;Â &lt;span&gt;name&lt;/span&gt;=&lt;span&gt;&quot;businessLogAppender&quot;&lt;/span&gt;Â &lt;span&gt;class&lt;/span&gt;=&lt;span&gt;&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;File&lt;/span&gt;&amp;gt;&lt;/span&gt;logs/business.log&lt;span&gt;&amp;lt;/&lt;span&gt;File&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;append&lt;/span&gt;&amp;gt;&lt;/span&gt;true&lt;span&gt;&amp;lt;/&lt;span&gt;append&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;filter&lt;/span&gt;Â &lt;span&gt;class&lt;/span&gt;=&lt;span&gt;&quot;ch.qos.logback.classic.filter.LevelFilter&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;level&lt;/span&gt;&amp;gt;&lt;/span&gt;INFO&lt;span&gt;&amp;lt;/&lt;span&gt;level&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;onMatch&lt;/span&gt;&amp;gt;&lt;/span&gt;ACCEPT&lt;span&gt;&amp;lt;/&lt;span&gt;onMatch&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;onMismatch&lt;/span&gt;&amp;gt;&lt;/span&gt;DENY&lt;span&gt;&amp;lt;/&lt;span&gt;onMismatch&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&amp;lt;/&lt;span&gt;filter&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;rollingPolicy&lt;/span&gt;Â &lt;span&gt;class&lt;/span&gt;=&lt;span&gt;&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;fileNamePattern&lt;/span&gt;&amp;gt;&lt;/span&gt;logs/ä¸šåŠ¡A.%d.%i.log&lt;span&gt;&amp;lt;/&lt;span&gt;fileNamePattern&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;maxHistory&lt;/span&gt;&amp;gt;&lt;/span&gt;90&lt;span&gt;&amp;lt;/&lt;span&gt;maxHistory&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;timeBasedFileNamingAndTriggeringPolicy&lt;/span&gt;Â &lt;span&gt;class&lt;/span&gt;=&lt;span&gt;&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;maxFileSize&lt;/span&gt;&amp;gt;&lt;/span&gt;10MB&lt;span&gt;&amp;lt;/&lt;span&gt;maxFileSize&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;&amp;lt;/&lt;span&gt;timeBasedFileNamingAndTriggeringPolicy&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&amp;lt;/&lt;span&gt;rollingPolicy&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;encoder&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;pattern&lt;/span&gt;&amp;gt;&lt;/span&gt;&quot;%d{yyyy-MM-ddÂ HH:mm:ss.SSS}Â %tÂ %-5levelÂ %X{userId}Â %logger{30}.%method:%LÂ -Â %msg%n&quot;&lt;span&gt;&amp;lt;/&lt;span&gt;pattern&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;charset&lt;/span&gt;&amp;gt;&lt;/span&gt;UTF-8&lt;span&gt;&amp;lt;/&lt;span&gt;charset&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&amp;lt;/&lt;span&gt;encoder&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;appender&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;br/&gt;&lt;span&gt;&amp;lt;&lt;span&gt;logger&lt;/span&gt;Â &lt;span&gt;name&lt;/span&gt;=&lt;span&gt;&quot;businessLog&quot;&lt;/span&gt;Â &lt;span&gt;additivity&lt;/span&gt;=&lt;span&gt;&quot;false&quot;&lt;/span&gt;Â &lt;span&gt;level&lt;/span&gt;=&lt;span&gt;&quot;INFO&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;appender-ref&lt;/span&gt;Â &lt;span&gt;ref&lt;/span&gt;=&lt;span&gt;&quot;businessLogAppender&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;logger&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;ç„¶ååœ¨ Java ä»£ç ä¸­å•ç‹¬çš„è®°å½•ä¸šåŠ¡æ—¥å¿—ã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;//è®°å½•ç‰¹å®šæ—¥å¿—çš„å£°æ˜&lt;/span&gt;&lt;br/&gt;&lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â LoggerÂ businessLogÂ =Â LoggerFactory.getLogger(&lt;span&gt;&quot;businessLog&quot;&lt;/span&gt;);&lt;br/&gt;Â &lt;br/&gt;&lt;span&gt;//æ—¥å¿—å­˜å‚¨&lt;/span&gt;&lt;br/&gt;businessLog.info(&lt;span&gt;&quot;ä¿®æ”¹äº†é…é€åœ°å€&quot;&lt;/span&gt;);&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;é—®é¢˜ä¸‰ï¼šå¦‚ä½•ç”Ÿæˆå¯è¯»æ‡‚çš„æ—¥å¿—æ–‡æ¡ˆ&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å¯ä»¥é‡‡ç”¨ LogUtil çš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥é‡‡ç”¨åˆ‡é¢çš„æ–¹å¼ç”Ÿæˆæ—¥å¿—æ¨¡æ¿ï¼Œåç»­å†…å®¹å°†ä¼šè¿›è¡Œä»‹ç»ã€‚è¿™æ ·å°±å¯ä»¥æŠŠæ—¥å¿—å•ç‹¬ä¿å­˜åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œç„¶åé€šè¿‡æ—¥å¿—æ”¶é›†å¯ä»¥æŠŠæ—¥å¿—ä¿å­˜åœ¨ ElasticsearchÂ æˆ–è€…æ•°æ®åº“ä¸­ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹å¦‚ä½•ç”Ÿæˆå¯è¯»çš„æ“ä½œæ—¥å¿—ã€‚&lt;/span&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;2.3 é€šè¿‡ LogUtil çš„æ–¹å¼è®°å½•æ—¥å¿—&lt;/span&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;Â Â LogUtil.log(orderNo,Â &lt;span&gt;&quot;è®¢å•åˆ›å»º&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;å°æ˜&quot;&lt;/span&gt;)&lt;br/&gt;Â Â LogUtil.log(orderNo,Â &lt;span&gt;&quot;è®¢å•åˆ›å»ºï¼Œè®¢å•å·&quot;&lt;/span&gt;+&lt;span&gt;&quot;NO.11089999&quot;&lt;/span&gt;,Â Â &lt;span&gt;&quot;å°æ˜&quot;&lt;/span&gt;)&lt;br/&gt;Â Â StringÂ templateÂ =Â &lt;span&gt;&quot;ç”¨æˆ·%sä¿®æ”¹äº†è®¢å•çš„é…é€åœ°å€ï¼šä»â€œ%sâ€ä¿®æ”¹åˆ°â€œ%sâ€&quot;&lt;/span&gt;&lt;br/&gt;Â Â LogUtil.log(orderNo,Â String.format(tempalte,Â &lt;span&gt;&quot;å°æ˜&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;é‡‘ç¿ç¿å°åŒº&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;é“¶ç›ç›å°åŒº&quot;&lt;/span&gt;),Â Â &lt;span&gt;&quot;å°æ˜&quot;&lt;/span&gt;)&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;è¿™é‡Œè§£é‡Šä¸‹ä¸ºä»€ä¹ˆè®°å½•æ“ä½œæ—¥å¿—çš„æ—¶å€™éƒ½ç»‘å®šäº†ä¸€ä¸ª OrderNoï¼Œå› ä¸ºæ“ä½œæ—¥å¿—è®°å½•çš„æ˜¯ï¼šæŸä¸€ä¸ªâ€œæ—¶é—´â€â€œè°â€å¯¹â€œä»€ä¹ˆâ€åšäº†ä»€ä¹ˆâ€œäº‹æƒ…â€ã€‚å½“æŸ¥è¯¢ä¸šåŠ¡çš„æ“ä½œæ—¥å¿—çš„æ—¶å€™ï¼Œä¼šæŸ¥è¯¢é’ˆå¯¹è¿™ä¸ªè®¢å•çš„çš„æ‰€æœ‰æ“ä½œï¼Œæ‰€ä»¥ä»£ç ä¸­åŠ ä¸Šäº† OrderNoï¼Œè®°å½•æ“ä½œæ—¥å¿—çš„æ—¶å€™éœ€è¦è®°å½•ä¸‹æ“ä½œäººï¼Œæ‰€ä»¥ä¼ äº†æ“ä½œäººâ€œå°æ˜â€è¿›æ¥ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/blockquote&gt;&lt;section&gt;&lt;span&gt;ä¸Šé¢çœ‹èµ·æ¥é—®é¢˜å¹¶ä¸å¤§ï¼Œåœ¨ä¿®æ”¹åœ°å€çš„ä¸šåŠ¡é€»è¾‘æ–¹æ³•ä¸­ä½¿ç”¨ä¸€è¡Œä»£ç è®°å½•äº†æ“ä½œæ—¥å¿—ï¼Œæ¥ä¸‹æ¥å†çœ‹ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ï¼š&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;private&lt;/span&gt;Â OnesIssueDOÂ &lt;span&gt;updateAddress&lt;/span&gt;&lt;span&gt;(updateDeliveryRequestÂ request)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â DeliveryOrderÂ deliveryOrderÂ =Â deliveryQueryService.queryOldAddress(request.getDeliveryOrderNo());&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æ›´æ–°æ´¾é€ä¿¡æ¯ï¼Œç”µè¯ï¼Œæ”¶ä»¶äººï¼Œåœ°å€&lt;/span&gt;&lt;br/&gt;Â Â Â Â doUpdate(request);&lt;br/&gt;Â Â Â Â StringÂ logContentÂ =Â getLogContent(request,Â deliveryOrder);&lt;br/&gt;Â Â Â Â LogUtils.logRecord(request.getOrderNo(),Â logContent,Â request.getOperator);&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â onesIssueDO;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;private&lt;/span&gt;Â StringÂ &lt;span&gt;getLogContent&lt;/span&gt;&lt;span&gt;(updateDeliveryRequestÂ request,Â DeliveryOrderÂ deliveryOrder)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â StringÂ templateÂ =Â &lt;span&gt;&quot;ç”¨æˆ·%sä¿®æ”¹äº†è®¢å•çš„é…é€åœ°å€ï¼šä»â€œ%sâ€ä¿®æ”¹åˆ°â€œ%sâ€&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â String.format(tempalte,Â request.getUserName(),Â deliveryOrder.getAddress(),Â request.getAddress);&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„ä¾‹å­ä½¿ç”¨äº†ä¸¤ä¸ªæ–¹æ³•ä»£ç ï¼Œå¤–åŠ ä¸€ä¸ª getLogContent çš„å‡½æ•°å®ç°äº†æ“ä½œæ—¥å¿—çš„è®°å½•ã€‚å½“ä¸šåŠ¡å˜å¾—å¤æ‚åï¼Œè®°å½•æ“ä½œæ—¥å¿—æ”¾åœ¨ä¸šåŠ¡ä»£ç ä¸­ä¼šå¯¼è‡´ä¸šåŠ¡çš„é€»è¾‘æ¯”è¾ƒç¹æ‚ï¼Œæœ€åå¯¼è‡´ LogUtils.logRecord() æ–¹æ³•çš„è°ƒç”¨å­˜åœ¨äºå¾ˆå¤šä¸šåŠ¡çš„ä»£ç ä¸­ï¼Œè€Œä¸”ç±»ä¼¼ getLogContent() è¿™æ ·çš„æ–¹æ³•ä¹Ÿæ•£è½åœ¨å„ä¸ªä¸šåŠ¡ç±»ä¸­ï¼Œå¯¹äºä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§æ¥è¯´æ˜¯ä¸€ä¸ªç¾éš¾ã€‚ä¸‹é¢ä»‹ç»ä¸‹å¦‚ä½•é¿å…è¿™ä¸ªç¾éš¾ã€‚&lt;/span&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;2.4 æ–¹æ³•æ³¨è§£å®ç°æ“ä½œæ—¥å¿—&lt;/span&gt;&lt;/h3&gt;&lt;section&gt;&lt;span&gt;ä¸ºäº†è§£å†³ä¸Šé¢é—®é¢˜ï¼Œä¸€èˆ¬é‡‡ç”¨ AOP çš„æ–¹å¼è®°å½•æ—¥å¿—ï¼Œè®©æ“ä½œæ—¥å¿—å’Œä¸šåŠ¡é€»è¾‘è§£è€¦ï¼Œæ¥ä¸‹æ¥çœ‹ä¸€ä¸ªç®€å•çš„ AOP æ—¥å¿—çš„ä¾‹å­ã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;@LogRecord&lt;/span&gt;(content=&lt;span&gt;&quot;ä¿®æ”¹äº†é…é€åœ°å€&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;modifyAddress&lt;/span&gt;&lt;span&gt;(updateDeliveryRequestÂ request)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æ›´æ–°æ´¾é€ä¿¡æ¯Â ç”µè¯ï¼Œæ”¶ä»¶äººã€åœ°å€&lt;/span&gt;&lt;br/&gt;Â Â Â Â doUpdate(request);&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;æˆ‘ä»¬å¯ä»¥åœ¨æ³¨è§£çš„æ“ä½œæ—¥å¿—ä¸Šè®°å½•å›ºå®šæ–‡æ¡ˆï¼Œè¿™æ ·ä¸šåŠ¡é€»è¾‘å’Œä¸šåŠ¡ä»£ç å¯ä»¥åšåˆ°è§£è€¦ï¼Œè®©æˆ‘ä»¬çš„ä¸šåŠ¡ä»£ç å˜å¾—çº¯å‡€èµ·æ¥ã€‚å¯èƒ½æœ‰åŒå­¦æ³¨æ„åˆ°ï¼Œä¸Šé¢çš„æ–¹å¼è™½ç„¶è§£è€¦äº†æ“ä½œæ—¥å¿—çš„ä»£ç ï¼Œä½†æ˜¯è®°å½•çš„æ–‡æ¡ˆå¹¶ä¸ç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸï¼Œæ–‡æ¡ˆæ˜¯é™æ€çš„ï¼Œæ²¡æœ‰åŒ…å«åŠ¨æ€çš„æ–‡æ¡ˆï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦è®°å½•çš„æ“ä½œæ—¥å¿—æ˜¯ï¼šç”¨æˆ·%sä¿®æ”¹äº†è®¢å•çš„é…é€åœ°å€ï¼Œä»â€œ%sâ€ä¿®æ”¹åˆ°â€œ%sâ€ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»‹ç»ä¸€ä¸‹å¦‚ä½•ä¼˜é›…åœ°ä½¿ç”¨ AOP ç”ŸæˆåŠ¨æ€çš„æ“ä½œæ—¥å¿—ã€‚&lt;/span&gt;&lt;/section&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3. ä¼˜é›…åœ°æ”¯æŒ AOP ç”ŸæˆåŠ¨æ€çš„æ“ä½œæ—¥å¿—&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.1 åŠ¨æ€æ¨¡æ¿&lt;/span&gt;&lt;/h3&gt;&lt;section&gt;&lt;span&gt;ä¸€æåˆ°åŠ¨æ€æ¨¡æ¿ï¼Œå°±ä¼šæ¶‰åŠåˆ°è®©å˜é‡é€šè¿‡å ä½ç¬¦çš„æ–¹å¼è§£ææ¨¡æ¿ï¼Œä»è€Œè¾¾åˆ°é€šè¿‡æ³¨è§£è®°å½•æ“ä½œæ—¥å¿—çš„ç›®çš„ã€‚æ¨¡æ¿è§£æçš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼Œè¿™é‡Œä½¿ç”¨äº† SpELï¼ˆ&lt;/span&gt;&lt;span&gt;Spring Expression Languageï¼ŒSpringè¡¨è¾¾å¼è¯­è¨€&lt;/span&gt;&lt;span&gt;ï¼‰æ¥å®ç°ã€‚æˆ‘ä»¬å¯ä»¥å…ˆå†™ä¸‹æœŸæœ›çš„è®°å½•æ—¥å¿—çš„æ–¹å¼ï¼Œç„¶åå†çœ‹çœ‹èƒ½å¦å®ç°è¿™æ ·çš„åŠŸèƒ½ã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;@LogRecord&lt;/span&gt;(contentÂ =Â &lt;span&gt;&quot;ä¿®æ”¹äº†è®¢å•çš„é…é€åœ°å€ï¼šä»â€œ#oldAddressâ€, ä¿®æ”¹åˆ°â€œ#request.addressâ€&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;modifyAddress&lt;/span&gt;&lt;span&gt;(updateDeliveryRequestÂ request,Â StringÂ oldAddress)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æ›´æ–°æ´¾é€ä¿¡æ¯Â ç”µè¯ï¼Œæ”¶ä»¶äººã€åœ°å€&lt;/span&gt;&lt;br/&gt;Â Â Â Â doUpdate(request);&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;é€šè¿‡ SpEL è¡¨è¾¾å¼å¼•ç”¨æ–¹æ³•ä¸Šçš„å‚æ•°ï¼Œå¯ä»¥è®©å˜é‡å¡«å……åˆ°æ¨¡æ¿ä¸­è¾¾åˆ°åŠ¨æ€çš„æ“ä½œæ—¥å¿—æ–‡æœ¬å†…å®¹ã€‚ä½†æ˜¯ç°åœ¨è¿˜æœ‰å‡ ä¸ªé—®é¢˜éœ€è¦è§£å†³ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æ“ä½œæ—¥å¿—éœ€è¦çŸ¥é“æ˜¯å“ªä¸ªæ“ä½œäººä¿®æ”¹çš„è®¢å•é…é€åœ°å€ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ä¿®æ”¹è®¢å•é…é€åœ°å€çš„æ“ä½œæ—¥å¿—éœ€è¦ç»‘å®šåœ¨é…é€çš„è®¢å•ä¸Šï¼Œä»è€Œå¯ä»¥æ ¹æ®é…é€è®¢å•å·æŸ¥è¯¢å‡ºå¯¹è¿™ä¸ªé…é€è®¢å•çš„æ‰€æœ‰æ“ä½œã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ä¸ºäº†åœ¨æ³¨è§£ä¸Šè®°å½•ä¹‹å‰çš„é…é€åœ°å€æ˜¯ä»€ä¹ˆï¼Œåœ¨æ–¹æ³•ç­¾åä¸Šæ·»åŠ äº†ä¸€ä¸ªå’Œä¸šåŠ¡æ— å…³çš„ oldAddress çš„å˜é‡ï¼Œè¿™æ ·å°±ä¸ä¼˜é›…äº†ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;ä¸ºäº†è§£å†³å‰ä¸¤ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæœŸæœ›çš„æ“ä½œæ—¥å¿—ä½¿ç”¨å½¢å¼æ”¹æˆä¸‹é¢çš„æ–¹å¼ï¼š&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;@LogRecord&lt;/span&gt;(&lt;br/&gt;Â Â Â Â Â contentÂ =Â &lt;span&gt;&quot;ä¿®æ”¹äº†è®¢å•çš„é…é€åœ°å€ï¼šä»â€œ#oldAddressâ€, ä¿®æ”¹åˆ°â€œ#request.addressâ€&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â operatorÂ =Â &lt;span&gt;&quot;#request.userName&quot;&lt;/span&gt;,Â bizNo=&lt;span&gt;&quot;#request.deliveryOrderNo&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;modifyAddress&lt;/span&gt;&lt;span&gt;(updateDeliveryRequestÂ request,Â StringÂ oldAddress)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æ›´æ–°æ´¾é€ä¿¡æ¯Â ç”µè¯ï¼Œæ”¶ä»¶äººã€åœ°å€&lt;/span&gt;&lt;br/&gt;Â Â Â Â doUpdate(request);&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;ä¿®æ”¹åçš„ä»£ç åœ¨æ³¨è§£ä¸Šæ·»åŠ ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯æ“ä½œäººï¼Œä¸€ä¸ªæ˜¯æ“ä½œæ—¥å¿—éœ€è¦ç»‘å®šçš„å¯¹è±¡ã€‚ä½†æ˜¯ï¼Œåœ¨æ™®é€šçš„ Web åº”ç”¨ä¸­ç”¨æˆ·ä¿¡æ¯éƒ½æ˜¯ä¿å­˜åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸Šä¸‹æ–‡çš„é™æ€æ–¹æ³•ä¸­ï¼Œæ‰€ä»¥ operator ä¸€èˆ¬æ˜¯è¿™æ ·çš„å†™æ³•ï¼ˆ&lt;/span&gt;&lt;span&gt;å‡å®šè·å–å½“å‰ç™»é™†ç”¨æˆ·çš„æ–¹å¼æ˜¯ UserContext.getCurrentUser()&lt;/span&gt;&lt;span&gt;ï¼‰ã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;operatorÂ =Â &lt;span&gt;&quot;#{T(com.meituan.user.UserContext).getCurrentUser()}&quot;&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;è¿™æ ·çš„è¯ï¼Œæ¯ä¸ª @LogRecord çš„æ³¨è§£ä¸Šçš„æ“ä½œäººéƒ½æ˜¯è¿™ä¹ˆé•¿ä¸€ä¸²ã€‚ä¸ºäº†é¿å…è¿‡å¤šçš„é‡å¤ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ³¨è§£ä¸Šçš„ operator å‚æ•°è®¾ç½®ä¸ºéå¿…å¡«ï¼Œè¿™æ ·ç”¨æˆ·å¯ä»¥å¡«å†™æ“ä½œäººã€‚ä½†æ˜¯ï¼Œå¦‚æœç”¨æˆ·ä¸å¡«å†™æˆ‘ä»¬å°±å– UserContext çš„ userï¼ˆ&lt;/span&gt;&lt;span&gt;ä¸‹æ–‡ä¼šä»‹ç»å¦‚ä½•å– user&lt;/span&gt;&lt;span&gt;ï¼‰ã€‚æœ€åï¼Œæœ€ç®€å•çš„æ—¥å¿—å˜æˆäº†ä¸‹é¢çš„å½¢å¼ï¼š&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;@LogRecord&lt;/span&gt;(contentÂ =Â &lt;span&gt;&quot;ä¿®æ”¹äº†è®¢å•çš„é…é€åœ°å€ï¼šä»â€œ#oldAddressâ€, ä¿®æ”¹åˆ°â€œ#request.addressâ€&quot;&lt;/span&gt;,Â &lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â bizNo=&lt;span&gt;&quot;#request.deliveryOrderNo&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;modifyAddress&lt;/span&gt;&lt;span&gt;(updateDeliveryRequestÂ request,Â StringÂ oldAddress)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æ›´æ–°æ´¾é€ä¿¡æ¯Â ç”µè¯ï¼Œæ”¶ä»¶äººã€åœ°å€&lt;/span&gt;&lt;br/&gt;Â Â Â Â doUpdate(request);&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦è§£å†³ç¬¬ä¸‰ä¸ªé—®é¢˜ï¼šä¸ºäº†è®°å½•ä¸šåŠ¡æ“ä½œè®°å½•æ·»åŠ äº†ä¸€ä¸ª oldAddress å˜é‡ï¼Œä¸ç®¡æ€ä¹ˆæ ·è¿™éƒ½ä¸æ˜¯ä¸€ä¸ªå¥½çš„å®ç°æ–¹å¼ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æŠŠ oldAddress å˜é‡ä»ä¿®æ”¹åœ°å€çš„æ–¹æ³•ç­¾åä¸Šå»æ‰ã€‚ä½†æ˜¯æ“ä½œæ—¥å¿—ç¡®å®éœ€è¦ oldAddress å˜é‡ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿ&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;è¦ä¹ˆå’Œäº§å“ç»ç† PK ä¸€ä¸‹ï¼Œè®©äº§å“ç»ç†æŠŠæ–‡æ¡ˆä»â€œä¿®æ”¹äº†è®¢å•çš„é…é€åœ°å€ï¼šä» xx ä¿®æ”¹åˆ° yyâ€ æ”¹ä¸º â€œä¿®æ”¹äº†è®¢å•çš„é…é€åœ°å€ä¸ºï¼šyyâ€ã€‚ä½†æ˜¯ä»ç”¨æˆ·ä½“éªŒä¸Šæ¥çœ‹ï¼Œç¬¬ä¸€ç§æ–‡æ¡ˆæ›´äººæ€§åŒ–ä¸€äº›ï¼Œæ˜¾ç„¶æˆ‘ä»¬ä¸ä¼š PK æˆåŠŸçš„ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¿…é¡»è¦æŠŠè¿™ä¸ª oldAddress æŸ¥è¯¢å‡ºæ¥ç„¶åä¾›æ“ä½œæ—¥å¿—ä½¿ç”¨äº†ã€‚è¿˜æœ‰ä¸€ç§è§£å†³åŠæ³•æ˜¯ï¼šæŠŠè¿™ä¸ªå‚æ•°æ”¾åˆ°æ“ä½œæ—¥å¿—çš„çº¿ç¨‹ä¸Šä¸‹æ–‡ä¸­ï¼Œä¾›æ³¨è§£ä¸Šçš„æ¨¡æ¿ä½¿ç”¨ã€‚æˆ‘ä»¬æŒ‰ç…§è¿™ä¸ªæ€è·¯å†æ”¹ä¸‹æ“ä½œæ—¥å¿—çš„å®ç°ä»£ç ã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;@LogRecord&lt;/span&gt;(contentÂ =Â &lt;span&gt;&quot;ä¿®æ”¹äº†è®¢å•çš„é…é€åœ°å€ï¼šä»â€œ#oldAddressâ€, ä¿®æ”¹åˆ°â€œ#request.addressâ€&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â bizNo=&lt;span&gt;&quot;#request.deliveryOrderNo&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;modifyAddress&lt;/span&gt;&lt;span&gt;(updateDeliveryRequestÂ request)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æŸ¥è¯¢å‡ºåŸæ¥çš„åœ°å€æ˜¯ä»€ä¹ˆ&lt;/span&gt;&lt;br/&gt;Â Â Â Â LogRecordContext.putVariable(&lt;span&gt;&quot;oldAddress&quot;&lt;/span&gt;,Â DeliveryService.queryOldAddress(request.getDeliveryOrderNo()));&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æ›´æ–°æ´¾é€ä¿¡æ¯Â ç”µè¯ï¼Œæ”¶ä»¶äººã€åœ°å€&lt;/span&gt;&lt;br/&gt;Â Â Â Â doUpdate(request);&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;è¿™æ—¶å€™å¯ä»¥çœ‹åˆ°ï¼ŒLogRecordContext è§£å†³äº†æ“ä½œæ—¥å¿—æ¨¡æ¿ä¸Šä½¿ç”¨æ–¹æ³•å‚æ•°ä»¥å¤–å˜é‡çš„é—®é¢˜ï¼ŒåŒæ—¶é¿å…äº†ä¸ºäº†è®°å½•æ“ä½œæ—¥å¿—ä¿®æ”¹æ–¹æ³•ç­¾åçš„è®¾è®¡ã€‚è™½ç„¶å·²ç»æ¯”ä¹‹å‰çš„ä»£ç å¥½äº†äº›ï¼Œä½†æ˜¯ä¾ç„¶éœ€è¦åœ¨ä¸šåŠ¡ä»£ç é‡Œé¢åŠ äº†ä¸€è¡Œä¸šåŠ¡é€»è¾‘æ— å…³çš„ä»£ç ï¼Œå¦‚æœæœ‰â€œå¼ºè¿«ç—‡â€çš„åŒå­¦è¿˜å¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¼šè®²è§£è‡ªå®šä¹‰å‡½æ•°çš„è§£å†³æ–¹æ¡ˆã€‚ä¸‹é¢å†çœ‹å¦ä¸€ä¸ªä¾‹å­ï¼š&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;@LogRecord&lt;/span&gt;(contentÂ =Â &lt;span&gt;&quot;ä¿®æ”¹äº†è®¢å•çš„é…é€å‘˜ï¼šä»â€œ#oldDeliveryUserIdâ€, ä¿®æ”¹åˆ°â€œ#request.userIdâ€&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â bizNo=&lt;span&gt;&quot;#request.deliveryOrderNo&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;modifyAddress&lt;/span&gt;&lt;span&gt;(updateDeliveryRequestÂ request)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æŸ¥è¯¢å‡ºåŸæ¥çš„åœ°å€æ˜¯ä»€ä¹ˆ&lt;/span&gt;&lt;br/&gt;Â Â Â Â LogRecordContext.putVariable(&lt;span&gt;&quot;oldDeliveryUserId&quot;&lt;/span&gt;,Â DeliveryService.queryOldDeliveryUserId(request.getDeliveryOrderNo()));&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æ›´æ–°æ´¾é€ä¿¡æ¯Â ç”µè¯ï¼Œæ”¶ä»¶äººã€åœ°å€&lt;/span&gt;&lt;br/&gt;Â Â Â Â doUpdate(request);&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;è¿™ä¸ªæ“ä½œæ—¥å¿—çš„æ¨¡æ¿æœ€åè®°å½•çš„å†…å®¹æ˜¯è¿™æ ·çš„æ ¼å¼ï¼šä¿®æ”¹äº†è®¢å•çš„é…é€å‘˜ï¼šä» â€œ10090â€ï¼Œä¿®æ”¹åˆ° â€œ10099â€ï¼Œæ˜¾ç„¶ç”¨æˆ·çœ‹åˆ°è¿™æ ·çš„æ“ä½œæ—¥å¿—æ˜¯ä¸æ˜ç™½çš„ã€‚ç”¨æˆ·å¯¹äºç”¨æˆ· ID æ˜¯ 10090 è¿˜æ˜¯ 10099 å¹¶ä¸äº†è§£ï¼Œç”¨æˆ·æœŸæœ›çœ‹åˆ°çš„æ˜¯ï¼šä¿®æ”¹äº†è®¢å•çš„é…é€å‘˜ï¼šä»â€œå¼ ä¸‰ï¼ˆ&lt;/span&gt;&lt;span&gt;18910008888&lt;/span&gt;&lt;span&gt;ï¼‰â€ï¼Œä¿®æ”¹åˆ°â€œå°æ˜ï¼ˆ&lt;/span&gt;&lt;span&gt;13910006666&lt;/span&gt;&lt;span&gt;ï¼‰â€ã€‚ç”¨æˆ·å…³å¿ƒçš„æ˜¯é…é€å‘˜çš„å§“åå’Œç”µè¯ã€‚ä½†æ˜¯æˆ‘ä»¬æ–¹æ³•ä¸­ä¼ é€’çš„å‚æ•°åªæœ‰é…é€å‘˜çš„ IDï¼Œæ²¡æœ‰é…é€å‘˜çš„å§“åå¯ç”µè¯ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸Šé¢çš„æ–¹æ³•ï¼ŒæŠŠç”¨æˆ·çš„å§“åå’Œç”µè¯æŸ¥è¯¢å‡ºæ¥ï¼Œç„¶åé€šè¿‡ LogRecordContext å®ç°ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ä½†æ˜¯ï¼Œâ€œå¼ºè¿«ç—‡â€æ˜¯ä¸æœŸæœ›æ“ä½œæ—¥å¿—çš„ä»£ç åµŒå…¥åœ¨ä¸šåŠ¡é€»è¾‘ä¸­çš„ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è€ƒè™‘å¦ä¸€ç§å®ç°æ–¹å¼ï¼šè‡ªå®šä¹‰å‡½æ•°ã€‚å¦‚æœæˆ‘ä»¬å¯ä»¥é€šè¿‡è‡ªå®šä¹‰å‡½æ•°æŠŠç”¨æˆ· ID è½¬æ¢ä¸ºç”¨æˆ·å§“åå’Œç”µè¯ï¼Œé‚£ä¹ˆå°±èƒ½è§£å†³è¿™ä¸€é—®é¢˜ï¼ŒæŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬æŠŠæ¨¡æ¿ä¿®æ”¹ä¸ºä¸‹é¢çš„å½¢å¼ï¼š&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;@LogRecord&lt;/span&gt;(contentÂ =Â &lt;span&gt;&quot;ä¿®æ”¹äº†è®¢å•çš„é…é€å‘˜ï¼šä»â€œ{deliveryUser{#oldDeliveryUserId}}â€, ä¿®æ”¹åˆ°â€œ{deveryUser{#request.userId}}â€&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â bizNo=&lt;span&gt;&quot;#request.deliveryOrderNo&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;modifyAddress&lt;/span&gt;&lt;span&gt;(updateDeliveryRequestÂ request)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æŸ¥è¯¢å‡ºåŸæ¥çš„åœ°å€æ˜¯ä»€ä¹ˆ&lt;/span&gt;&lt;br/&gt;Â Â Â Â LogRecordContext.putVariable(&lt;span&gt;&quot;oldDeliveryUserId&quot;&lt;/span&gt;,Â DeliveryService.queryOldDeliveryUserId(request.getDeliveryOrderNo()));&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æ›´æ–°æ´¾é€ä¿¡æ¯Â ç”µè¯ï¼Œæ”¶ä»¶äººã€åœ°å€&lt;/span&gt;&lt;br/&gt;Â Â Â Â doUpdate(request);&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;å…¶ä¸­ deliveryUser æ˜¯è‡ªå®šä¹‰å‡½æ•°ï¼Œä½¿ç”¨å¤§æ‹¬å·æŠŠ Spring çš„ SpEL è¡¨è¾¾å¼åŒ…è£¹èµ·æ¥ï¼Œè¿™æ ·åšçš„å¥½å¤„ï¼šä¸€æ˜¯æŠŠ Spring EL è¡¨è¾¾å¼å’Œè‡ªå®šä¹‰å‡½æ•°åŒºåˆ†å¼€ä¾¿äºè§£æï¼›äºŒæ˜¯å¦‚æœæ¨¡æ¿ä¸­ä¸éœ€è¦ SpEL è¡¨è¾¾å¼è§£æå¯ä»¥å®¹æ˜“çš„è¯†åˆ«å‡ºæ¥ï¼Œå‡å°‘ SpEL çš„è§£ææé«˜æ€§èƒ½ã€‚è¿™æ—¶å€™æˆ‘ä»¬å‘ç°ä¸Šé¢ä»£ç è¿˜å¯ä»¥ä¼˜åŒ–æˆä¸‹é¢çš„å½¢å¼ï¼š&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;@LogRecord&lt;/span&gt;(contentÂ =Â &lt;span&gt;&quot;ä¿®æ”¹äº†è®¢å•çš„é…é€å‘˜ï¼šä»â€œ{queryOldUser{#request.deliveryOrderNo()}}â€, ä¿®æ”¹åˆ°â€œ{deveryUser{#request.userId}}â€&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â bizNo=&lt;span&gt;&quot;#request.deliveryOrderNo&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;modifyAddress&lt;/span&gt;&lt;span&gt;(updateDeliveryRequestÂ request)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æ›´æ–°æ´¾é€ä¿¡æ¯Â ç”µè¯ï¼Œæ”¶ä»¶äººã€åœ°å€&lt;/span&gt;&lt;br/&gt;Â Â Â Â doUpdate(request);&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;è¿™æ ·å°±ä¸éœ€è¦åœ¨ modifyAddress æ–¹æ³•ä¸­é€šè¿‡ LogRecordContext.putVariable() è®¾ç½®è€çš„å¿«é€’å‘˜äº†ï¼Œé€šè¿‡ç›´æ¥æ–°åŠ ä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•° queryOldUser() å‚æ•°æŠŠæ´¾é€è®¢å•ä¼ é€’è¿›å»ï¼Œå°±èƒ½æŸ¥åˆ°ä¹‹å‰çš„é…é€äººäº†ï¼Œåªéœ€è¦è®©æ–¹æ³•çš„è§£æåœ¨ modifyAddress() æ–¹æ³•æ‰§è¡Œä¹‹å‰è¿è¡Œã€‚è¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬è®©ä¸šåŠ¡ä»£ç åˆå˜å¾—çº¯å‡€äº†èµ·æ¥ï¼ŒåŒæ—¶ä¹Ÿè®©â€œå¼ºè¿«ç—‡â€ä¸å†æ„Ÿåˆ°éš¾å—äº†ã€‚&lt;/span&gt;&lt;/section&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4. ä»£ç å®ç°è§£æ&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.1 ä»£ç ç»“æ„&lt;/span&gt;&lt;/h3&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-cropselx1=&quot;1&quot; data-cropselx2=&quot;381&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;280&quot; data-ratio=&quot;0.7357142857142858&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsXehNsNY76lXs1L1HwaLESxxB1clIphWXBh14KpvDXYacpJ8stVhwiaa8gMySwDH6ofDJSBeINeatg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;700&quot;/&gt;&lt;/figure&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ä¸Šé¢çš„æ“ä½œæ—¥å¿—ä¸»è¦æ˜¯é€šè¿‡ä¸€ä¸ª AOP æ‹¦æˆªå™¨å®ç°çš„ï¼Œæ•´ä½“ä¸»è¦åˆ†ä¸º AOP æ¨¡å—ã€æ—¥å¿—è§£ææ¨¡å—ã€æ—¥å¿—ä¿å­˜æ¨¡å—ã€Starter æ¨¡å—ï¼›ç»„ä»¶æä¾›äº†4ä¸ªæ‰©å±•ç‚¹ï¼Œåˆ†åˆ«æ˜¯ï¼šè‡ªå®šä¹‰å‡½æ•°ã€é»˜è®¤å¤„ç†äººã€ä¸šåŠ¡ä¿å­˜å’ŒæŸ¥è¯¢ï¼›ä¸šåŠ¡å¯ä»¥æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡ç‰¹æ€§å®šåˆ¶ç¬¦åˆè‡ªå·±ä¸šåŠ¡çš„é€»è¾‘ã€‚&lt;/span&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.2 æ¨¡å—ä»‹ç»&lt;/span&gt;&lt;/h3&gt;&lt;section&gt;&lt;span&gt;æœ‰äº†ä¸Šé¢çš„åˆ†æï¼Œå·²ç»å¾—å‡ºä¸€ç§æˆ‘ä»¬æœŸæœ›çš„æ“ä½œæ—¥å¿—è®°å½•çš„æ–¹å¼ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹å¦‚ä½•å®ç°ä¸Šé¢çš„é€»è¾‘ã€‚å®ç°ä¸»è¦åˆ†ä¸ºä¸‹é¢å‡ ä¸ªæ­¥éª¤ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;AOP æ‹¦æˆªé€»è¾‘&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;è§£æé€»è¾‘&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æ¨¡æ¿è§£æ&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;LogContext é€»è¾‘&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é»˜è®¤çš„ operator é€»è¾‘&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;è‡ªå®šä¹‰å‡½æ•°é€»è¾‘&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é»˜è®¤çš„æ—¥å¿—æŒä¹…åŒ–é€»è¾‘&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Starter å°è£…é€»è¾‘&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.2.1 AOP æ‹¦æˆªé€»è¾‘&lt;/span&gt;&lt;/h4&gt;&lt;section&gt;&lt;span&gt;è¿™å—é€»è¾‘ä¸»è¦æ˜¯ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œé’ˆå¯¹ @LogRecord æ³¨è§£åˆ†æå‡ºéœ€è¦è®°å½•çš„æ“ä½œæ—¥å¿—ï¼Œç„¶åæŠŠæ“ä½œæ—¥å¿—æŒä¹…åŒ–ï¼Œè¿™é‡ŒæŠŠæ³¨è§£å‘½åä¸º @LogRecordAnnotationã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬çœ‹ä¸‹æ³¨è§£çš„å®šä¹‰ï¼š&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;@Target&lt;/span&gt;({ElementType.METHOD})&lt;br/&gt;&lt;span&gt;@Retention&lt;/span&gt;(RetentionPolicy.RUNTIME)&lt;br/&gt;&lt;span&gt;@Inherited&lt;/span&gt;&lt;br/&gt;&lt;span&gt;@Documented&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;@interface&lt;/span&gt;Â LogRecordAnnotationÂ {&lt;br/&gt;Â Â Â Â &lt;span&gt;StringÂ &lt;span&gt;success&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;StringÂ &lt;span&gt;fail&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;span&gt;default&lt;/span&gt;Â &quot;&quot;&lt;/span&gt;;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;StringÂ &lt;span&gt;operator&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;span&gt;default&lt;/span&gt;Â &quot;&quot;&lt;/span&gt;;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;StringÂ &lt;span&gt;bizNo&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;StringÂ &lt;span&gt;category&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;span&gt;default&lt;/span&gt;Â &quot;&quot;&lt;/span&gt;;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;StringÂ &lt;span&gt;detail&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;span&gt;default&lt;/span&gt;Â &quot;&quot;&lt;/span&gt;;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;StringÂ &lt;span&gt;condition&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;span&gt;default&lt;/span&gt;Â &quot;&quot;&lt;/span&gt;;&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;æ³¨è§£ä¸­é™¤äº†ä¸Šé¢æåˆ°å‚æ•°å¤–ï¼Œè¿˜å¢åŠ äº† failã€categoryã€detailã€condition ç­‰å‚æ•°ï¼Œè¿™å‡ ä¸ªå‚æ•°æ˜¯ä¸ºäº†æ»¡è¶³ç‰¹å®šçš„åœºæ™¯ï¼Œåé¢è¿˜ä¼šç»™å‡ºå…·ä½“çš„ä¾‹å­ã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.6634844868735084&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsXehNsNY76lXs1L1HwaLESx9u9lj0hx2aROhb7VqiajrQBqLqVoOUGqYOwRsJF1hCXvauatHM1d1Iw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;838&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;ä¸ºäº†ä¿æŒç®€å•ï¼Œç»„ä»¶çš„å¿…å¡«å‚æ•°å°±ä¸¤ä¸ªã€‚ä¸šåŠ¡ä¸­çš„ AOP é€»è¾‘å¤§éƒ¨åˆ†æ˜¯ä½¿ç”¨ @Aspect æ³¨è§£å®ç°çš„ï¼Œä½†æ˜¯åŸºäºæ³¨è§£çš„ AOP åœ¨ Spring boot 1.5 ä¸­å…¼å®¹æ€§æ˜¯æœ‰é—®é¢˜çš„ï¼Œç»„ä»¶ä¸ºäº†å…¼å®¹ Spring boot1.5 çš„ç‰ˆæœ¬æˆ‘ä»¬æ‰‹å·¥å®ç° Spring çš„ AOP é€»è¾‘ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-cropselx1=&quot;0&quot; data-cropselx2=&quot;550&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;382&quot; data-ratio=&quot;0.6945454545454546&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsXehNsNY76lXs1L1HwaLESxguasPnQdjmQ7GEI5micOBcxrnPXo82a5D3gZMBvxw8UE8nib3TpGwPwg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;550&quot;/&gt;&lt;/figure&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;åˆ‡é¢é€‰æ‹© &lt;/span&gt;&lt;code&gt;&lt;span&gt;AbstractBeanFactoryPointcutAdvisor&lt;/span&gt;&lt;/code&gt;&lt;span&gt; å®ç°ï¼Œåˆ‡ç‚¹æ˜¯é€šè¿‡ &lt;/span&gt;&lt;code&gt;&lt;span&gt;StaticMethodMatcherPointcut&lt;/span&gt;&lt;/code&gt;&lt;span&gt; åŒ¹é…åŒ…å« &lt;/span&gt;&lt;code&gt;&lt;span&gt;LogRecordAnnotation&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ³¨è§£çš„æ–¹æ³•ã€‚é€šè¿‡å®ç° &lt;/span&gt;&lt;code&gt;&lt;span&gt;MethodInterceptor&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ¥å£å®ç°æ“ä½œæ—¥å¿—çš„å¢å¼ºé€»è¾‘ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ä¸‹é¢æ˜¯æ‹¦æˆªå™¨çš„åˆ‡ç‚¹é€»è¾‘ï¼š&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;LogRecordPointcut&lt;/span&gt;Â &lt;span&gt;extends&lt;/span&gt;Â &lt;span&gt;StaticMethodMatcherPointcut&lt;/span&gt;Â &lt;span&gt;implements&lt;/span&gt;Â &lt;span&gt;Serializable&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â LogRecordçš„è§£æç±»&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â LogRecordOperationSourceÂ logRecordOperationSource;&lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;boolean&lt;/span&gt;Â &lt;span&gt;matches&lt;/span&gt;&lt;span&gt;(@NonNullÂ MethodÂ method,Â @NonNullÂ Class&amp;lt;?&amp;gt;Â targetClass)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â è§£æÂ è¿™ä¸ªÂ methodÂ ä¸Šæœ‰æ²¡æœ‰Â @LogRecordAnnotationÂ æ³¨è§£ï¼Œæœ‰çš„è¯ä¼šè§£æå‡ºæ¥æ³¨è§£ä¸Šçš„å„ä¸ªå‚æ•°&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â !CollectionUtils.isEmpty(logRecordOperationSource.computeLogRecordOperations(method,Â targetClass));&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;setLogRecordOperationSource&lt;/span&gt;&lt;span&gt;(LogRecordOperationSourceÂ logRecordOperationSource)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;this&lt;/span&gt;.logRecordOperationSourceÂ =Â logRecordOperationSource;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;åˆ‡é¢çš„å¢å¼ºé€»è¾‘ä¸»è¦ä»£ç å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â ObjectÂ &lt;span&gt;invoke&lt;/span&gt;&lt;span&gt;(MethodInvocationÂ invocation)&lt;/span&gt;Â &lt;span&gt;throws&lt;/span&gt;Â ThrowableÂ &lt;/span&gt;{&lt;br/&gt;Â Â Â Â MethodÂ methodÂ =Â invocation.getMethod();&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â è®°å½•æ—¥å¿—&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â execute(invocation,Â invocation.getThis(),Â method,Â invocation.getArguments());&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;private&lt;/span&gt;Â ObjectÂ &lt;span&gt;execute&lt;/span&gt;&lt;span&gt;(MethodInvocationÂ invoker,Â ObjectÂ target,Â MethodÂ method,Â Object[]Â args)&lt;/span&gt;Â &lt;span&gt;throws&lt;/span&gt;Â ThrowableÂ &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Class&amp;lt;?&amp;gt;Â targetClassÂ =Â getTargetClass(target);&lt;br/&gt;Â Â Â Â ObjectÂ retÂ =Â &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;Â Â Â Â MethodExecuteResultÂ methodExecuteResultÂ =Â &lt;span&gt;new&lt;/span&gt;Â MethodExecuteResult(&lt;span&gt;true&lt;/span&gt;,Â &lt;span&gt;null&lt;/span&gt;,Â &lt;span&gt;&quot;&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â LogRecordContext.putEmptySpan();&lt;br/&gt;Â Â Â Â Collection&amp;lt;LogRecordOps&amp;gt;Â operationsÂ =Â &lt;span&gt;new&lt;/span&gt;Â ArrayList&amp;lt;&amp;gt;();&lt;br/&gt;Â Â Â Â Map&amp;lt;String,Â String&amp;gt;Â functionNameAndReturnMapÂ =Â &lt;span&gt;new&lt;/span&gt;Â HashMap&amp;lt;&amp;gt;();&lt;br/&gt;Â Â Â Â &lt;span&gt;try&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â operationsÂ =Â logRecordOperationSource.computeLogRecordOperations(method,Â targetClass);&lt;br/&gt;Â Â Â Â Â Â Â Â List&amp;lt;String&amp;gt;Â spElTemplatesÂ =Â getBeforeExecuteFunctionTemplate(operations);&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//ä¸šåŠ¡é€»è¾‘æ‰§è¡Œå‰çš„è‡ªå®šä¹‰å‡½æ•°è§£æ&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â functionNameAndReturnMapÂ =Â processBeforeExecuteFunctionTemplate(spElTemplates,Â targetClass,Â method,Â args);&lt;br/&gt;Â Â Â Â }Â &lt;span&gt;catch&lt;/span&gt;Â (ExceptionÂ e)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â log.error(&lt;span&gt;&quot;logÂ recordÂ parseÂ beforeÂ functionÂ exception&quot;&lt;/span&gt;,Â e);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;try&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â retÂ =Â invoker.proceed();&lt;br/&gt;Â Â Â Â }Â &lt;span&gt;catch&lt;/span&gt;Â (ExceptionÂ e)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â methodExecuteResultÂ =Â &lt;span&gt;new&lt;/span&gt;Â MethodExecuteResult(&lt;span&gt;false&lt;/span&gt;,Â e,Â e.getMessage());&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;try&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (!CollectionUtils.isEmpty(operations))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â recordExecute(ret,Â method,Â args,Â operations,Â targetClass,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â methodExecuteResult.isSuccess(),Â methodExecuteResult.getErrorMsg(),Â functionNameAndReturnMap);&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â }Â &lt;span&gt;catch&lt;/span&gt;Â (ExceptionÂ t)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//è®°å½•æ—¥å¿—é”™è¯¯ä¸è¦å½±å“ä¸šåŠ¡&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â log.error(&lt;span&gt;&quot;logÂ recordÂ parseÂ exception&quot;&lt;/span&gt;,Â t);&lt;br/&gt;Â Â Â Â }Â &lt;span&gt;finally&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â LogRecordContext.clear();&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (methodExecuteResult.throwableÂ !=Â &lt;span&gt;null&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;throw&lt;/span&gt;Â methodExecuteResult.throwable;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â ret;&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;æ‹¦æˆªé€»è¾‘çš„æµç¨‹ï¼š&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;1.4030710172744723&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsXehNsNY76lXs1L1HwaLESxz4XX5lXISsv5uiag5X5eM9PIMD9ktEv8HgKwV8U5dDibx6IWJE7fzibCA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;521&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;å¯ä»¥çœ‹åˆ°ï¼Œæ“ä½œæ—¥å¿—çš„è®°å½•æŒä¹…åŒ–æ˜¯åœ¨æ–¹æ³•æ‰§è¡Œå®Œä¹‹åæ‰§è¡Œçš„ï¼Œå½“æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ä¹‹åä¼šå…ˆæ•è·å¼‚å¸¸ï¼Œç­‰æ“ä½œæ—¥å¿—æŒä¹…åŒ–å®Œæˆåå†æŠ›å‡ºå¼‚å¸¸ã€‚åœ¨ä¸šåŠ¡çš„æ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œä¼šå¯¹æå‰è§£æçš„è‡ªå®šä¹‰å‡½æ•°æ±‚å€¼ï¼Œè§£å†³äº†å‰é¢æåˆ°çš„éœ€è¦æŸ¥è¯¢ä¿®æ”¹ä¹‹å‰çš„å†…å®¹ã€‚&lt;/span&gt;&lt;span/&gt;&lt;/section&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.2.2 è§£æé€»è¾‘&lt;/span&gt;&lt;/h4&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;æ¨¡æ¿è§£æ&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;Spring 3 ä¸­æä¾›äº†ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼šSpELï¼ŒSpEL åœ¨ Spring äº§å“ä¸­æ˜¯ä½œä¸ºè¡¨è¾¾å¼æ±‚å€¼çš„æ ¸å¿ƒåŸºç¡€æ¨¡å—ï¼Œå®ƒæœ¬èº«æ˜¯å¯ä»¥è„±ç¦» Spring ç‹¬ç«‹ä½¿ç”¨çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼š&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(String[]Â args)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â SpelExpressionParserÂ parserÂ =Â &lt;span&gt;new&lt;/span&gt;Â SpelExpressionParser();&lt;br/&gt;Â Â Â Â Â Â Â Â ExpressionÂ expressionÂ =Â parser.parseExpression(&lt;span&gt;&quot;#root.purchaseName&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â OrderÂ orderÂ =Â &lt;span&gt;new&lt;/span&gt;Â Order();&lt;br/&gt;Â Â Â Â Â Â Â Â order.setPurchaseName(&lt;span&gt;&quot;å¼ ä¸‰&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(expression.getValue(order));&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;è¿™ä¸ªæ–¹æ³•å°†æ‰“å° â€œå¼ ä¸‰â€ã€‚LogRecord è§£æçš„ç±»å›¾å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.6542893725992317&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsXehNsNY76lXs1L1HwaLESxGO8zJZoibAzrYg9Amez2aJ9vChyiaMG3txfbSicg8qboxfzdw0PQBRPpg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;781&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;è§£ææ ¸å¿ƒç±»&lt;/strong&gt;ï¼š&lt;/span&gt;&lt;code&gt;&lt;span&gt;LogRecordValueParser&lt;/span&gt;&lt;/code&gt;&lt;span&gt; é‡Œé¢å°è£…äº†è‡ªå®šä¹‰å‡½æ•°å’Œ SpEL è§£æç±» &lt;/span&gt;&lt;code&gt;&lt;span&gt;LogRecordExpressionEvaluator&lt;/span&gt;&lt;/code&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;span/&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;LogRecordExpressionEvaluator&lt;/span&gt;Â &lt;span&gt;extends&lt;/span&gt;Â &lt;span&gt;CachedExpressionEvaluator&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â Map&amp;lt;ExpressionKey,Â Expression&amp;gt;Â expressionCacheÂ =Â &lt;span&gt;new&lt;/span&gt;Â ConcurrentHashMap&amp;lt;&amp;gt;(&lt;span&gt;64&lt;/span&gt;);&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â Map&amp;lt;AnnotatedElementKey,Â Method&amp;gt;Â targetMethodCacheÂ =Â &lt;span&gt;new&lt;/span&gt;Â ConcurrentHashMap&amp;lt;&amp;gt;(&lt;span&gt;64&lt;/span&gt;);&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â StringÂ &lt;span&gt;parseExpression&lt;/span&gt;&lt;span&gt;(StringÂ conditionExpression,Â AnnotatedElementKeyÂ methodKey,Â EvaluationContextÂ evalContext)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â getExpression(&lt;span&gt;this&lt;/span&gt;.expressionCache,Â methodKey,Â conditionExpression).getValue(evalContext,Â String&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;code&gt;&lt;span&gt;LogRecordExpressionEvaluator&lt;/span&gt;&lt;/code&gt;&lt;span&gt; ç»§æ‰¿è‡ª &lt;/span&gt;&lt;code&gt;&lt;span&gt;CachedExpressionEvaluator&lt;/span&gt;&lt;/code&gt;&lt;span&gt; ç±»ï¼Œè¿™ä¸ªç±»é‡Œé¢æœ‰ä¸¤ä¸ª Mapï¼Œä¸€ä¸ªæ˜¯ expressionCache ä¸€ä¸ªæ˜¯ targetMethodCacheã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­å¯ä»¥çœ‹åˆ°ï¼ŒSpEL ä¼šè§£ææˆä¸€ä¸ª Expression è¡¨è¾¾å¼ï¼Œç„¶åæ ¹æ®ä¼ å…¥çš„ Object è·å–åˆ°å¯¹åº”çš„å€¼ï¼Œæ‰€ä»¥ expressionCache æ˜¯ä¸ºäº†ç¼“å­˜æ–¹æ³•ã€è¡¨è¾¾å¼å’Œ SpEL çš„ Expression çš„å¯¹åº”å…³ç³»ï¼Œè®©æ–¹æ³•æ³¨è§£ä¸Šæ·»åŠ çš„ SpEL è¡¨è¾¾å¼åªè§£æä¸€æ¬¡ã€‚ä¸‹é¢çš„ targetMethodCache æ˜¯ä¸ºäº†ç¼“å­˜ä¼ å…¥åˆ° Expression è¡¨è¾¾å¼çš„ Objectã€‚æ ¸å¿ƒçš„è§£æé€»è¾‘æ˜¯ä¸Šé¢æœ€åä¸€è¡Œä»£ç ã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;getExpression(&lt;span&gt;this&lt;/span&gt;.expressionCache,Â methodKey,Â conditionExpression).getValue(evalContext,Â String&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;/span&gt;;&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;code&gt;&lt;span&gt;getExpression&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ–¹æ³•ä¼šä» expressionCache ä¸­è·å–åˆ° @LogRecordAnnotation æ³¨è§£ä¸Šçš„è¡¨è¾¾å¼çš„è§£æ Expression çš„å®ä¾‹ï¼Œç„¶åè°ƒç”¨ &lt;/span&gt;&lt;code&gt;&lt;span&gt;getValue&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ–¹æ³•ï¼Œ&lt;/span&gt;&lt;code&gt;&lt;span&gt;getValue&lt;/span&gt;&lt;/code&gt;&lt;span&gt; ä¼ å…¥ä¸€ä¸ª evalContext å°±æ˜¯ç±»ä¼¼ä¸Šé¢ä¾‹å­ä¸­çš„ order å¯¹è±¡ã€‚å…¶ä¸­ Context çš„å®ç°å°†ä¼šåœ¨ä¸‹æ–‡ä»‹ç»ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;æ—¥å¿—ä¸Šä¸‹æ–‡å®ç°&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ä¸‹é¢çš„ä¾‹å­æŠŠå˜é‡æ”¾åˆ°äº† LogRecordContext ä¸­ï¼Œç„¶å SpEL è¡¨è¾¾å¼å°±å¯ä»¥é¡ºåˆ©çš„è§£ææ–¹æ³•ä¸Šä¸å­˜åœ¨çš„å‚æ•°äº†ï¼Œé€šè¿‡ä¸Šé¢çš„ SpEL çš„ä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œè¦æŠŠæ–¹æ³•çš„å‚æ•°å’Œ LogRecordContext ä¸­çš„å˜é‡éƒ½æ”¾åˆ° SpEL çš„ &lt;/span&gt;&lt;code&gt;&lt;span&gt;getValue&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ–¹æ³•çš„ Object ä¸­æ‰å¯ä»¥é¡ºåˆ©çš„è§£æè¡¨è¾¾å¼çš„å€¼ã€‚ä¸‹é¢çœ‹çœ‹å¦‚ä½•å®ç°ï¼š&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;@LogRecord&lt;/span&gt;(contentÂ =Â &lt;span&gt;&quot;ä¿®æ”¹äº†è®¢å•çš„é…é€å‘˜ï¼šä»â€œ{deveryUser{#oldDeliveryUserId}}â€, ä¿®æ”¹åˆ°â€œ{deveryUser{#request.getUserId()}}â€&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â bizNo=&lt;span&gt;&quot;#request.getDeliveryOrderNo()&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;modifyAddress&lt;/span&gt;&lt;span&gt;(updateDeliveryRequestÂ request)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æŸ¥è¯¢å‡ºåŸæ¥çš„åœ°å€æ˜¯ä»€ä¹ˆ&lt;/span&gt;&lt;br/&gt;Â Â Â Â LogRecordContext.putVariable(&lt;span&gt;&quot;oldDeliveryUserId&quot;&lt;/span&gt;,Â DeliveryService.queryOldDeliveryUserId(request.getDeliveryOrderNo()));&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æ›´æ–°æ´¾é€ä¿¡æ¯Â ç”µè¯ï¼Œæ”¶ä»¶äººã€åœ°å€&lt;/span&gt;&lt;br/&gt;Â Â Â Â doUpdate(request);&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;åœ¨ LogRecordValueParser ä¸­åˆ›å»ºäº†ä¸€ä¸ª EvaluationContextï¼Œç”¨æ¥ç»™ SpEL è§£ææ–¹æ³•å‚æ•°å’Œ Context ä¸­çš„å˜é‡ã€‚ç›¸å…³ä»£ç å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;EvaluationContextÂ evaluationContextÂ =Â expressionEvaluator.createEvaluationContext(method,Â args,Â targetClass,Â ret,Â errorMsg,Â beanFactory);&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;åœ¨è§£æçš„æ—¶å€™è°ƒç”¨ &lt;/span&gt;&lt;code&gt;&lt;span&gt;getValue&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ–¹æ³•ä¼ å…¥çš„å‚æ•° evalContextï¼Œå°±æ˜¯ä¸Šé¢è¿™ä¸ª EvaluationContext å¯¹è±¡ã€‚ä¸‹é¢æ˜¯ LogRecordEvaluationContext å¯¹è±¡çš„ç»§æ‰¿ä½“ç³»ï¼š&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-cropselx1=&quot;0&quot; data-cropselx2=&quot;440&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;457&quot; data-ratio=&quot;1.0386363636363636&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsXehNsNY76lXs1L1HwaLESxPy2ibjbGKbEyEbaSibS2slBW1Whcg3ibJyLWL0zx8FUGEQTq0xCgH3RbA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;440&quot;/&gt;&lt;/figure&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;LogRecordEvaluationContext åšäº†ä¸‰ä¸ªäº‹æƒ…ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æŠŠæ–¹æ³•çš„å‚æ•°éƒ½æ”¾åˆ° SpEL è§£æçš„ RootObject ä¸­ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æŠŠ LogRecordContext ä¸­çš„å˜é‡éƒ½æ”¾åˆ° RootObject ä¸­ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æŠŠæ–¹æ³•çš„è¿”å›å€¼å’Œ ErrorMsg éƒ½æ”¾åˆ° RootObject ä¸­ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;LogRecordEvaluationContext çš„ä»£ç å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;LogRecordEvaluationContext&lt;/span&gt;Â &lt;span&gt;extends&lt;/span&gt;Â &lt;span&gt;MethodBasedEvaluationContext&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;LogRecordEvaluationContext&lt;/span&gt;&lt;span&gt;(ObjectÂ rootObject,Â MethodÂ method,Â Object[]Â arguments,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ParameterNameDiscovererÂ parameterNameDiscoverer,Â ObjectÂ ret,Â StringÂ errorMsg)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â &lt;span&gt;//æŠŠæ–¹æ³•çš„å‚æ•°éƒ½æ”¾åˆ°Â SpELÂ è§£æçš„Â RootObjectÂ ä¸­&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â &lt;span&gt;super&lt;/span&gt;(rootObject,Â method,Â arguments,Â parameterNameDiscoverer);&lt;br/&gt;Â Â Â Â Â Â Â &lt;span&gt;//æŠŠÂ LogRecordContextÂ ä¸­çš„å˜é‡éƒ½æ”¾åˆ°Â RootObjectÂ ä¸­&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Map&amp;lt;String,Â Object&amp;gt;Â variablesÂ =Â LogRecordContext.getVariables();&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (variablesÂ !=Â &lt;span&gt;null&lt;/span&gt;Â &amp;amp;&amp;amp;Â variables.size()Â &amp;gt;Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â (Map.Entry&amp;lt;String,Â Object&amp;gt;Â entryÂ :Â variables.entrySet())Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â setVariable(entry.getKey(),Â entry.getValue());&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//æŠŠæ–¹æ³•çš„è¿”å›å€¼å’ŒÂ ErrorMsgÂ éƒ½æ”¾åˆ°Â RootObjectÂ ä¸­&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â setVariable(&lt;span&gt;&quot;_ret&quot;&lt;/span&gt;,Â ret);&lt;br/&gt;Â Â Â Â Â Â Â Â setVariable(&lt;span&gt;&quot;_errorMsg&quot;&lt;/span&gt;,Â errorMsg);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;ä¸‹é¢æ˜¯ LogRecordContext çš„å®ç°ï¼Œè¿™ä¸ªç±»é‡Œé¢é€šè¿‡ä¸€ä¸ª ThreadLocal å˜é‡ä¿æŒäº†ä¸€ä¸ªæ ˆï¼Œæ ˆé‡Œé¢æ˜¯ä¸ª Mapï¼ŒMap å¯¹åº”äº†å˜é‡çš„åç§°å’Œå˜é‡çš„å€¼ã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;LogRecordContext&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â InheritableThreadLocal&amp;lt;Stack&amp;lt;Map&amp;lt;String,Â Object&amp;gt;&amp;gt;&amp;gt;Â variableMapStackÂ =Â &lt;span&gt;new&lt;/span&gt;Â InheritableThreadLocal&amp;lt;&amp;gt;();&lt;br/&gt;Â Â Â &lt;span&gt;//å…¶ä»–çœç•¥....&lt;/span&gt;&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;ä¸Šé¢ä½¿ç”¨äº† InheritableThreadLocalï¼Œæ‰€ä»¥åœ¨çº¿ç¨‹æ± çš„åœºæ™¯ä¸‹ä½¿ç”¨ LogRecordContext ä¼šå‡ºç°é—®é¢˜ï¼Œå¦‚æœæ”¯æŒçº¿ç¨‹æ± å¯ä»¥ä½¿ç”¨é˜¿é‡Œå·´å·´å¼€æºçš„ TTL æ¡†æ¶ã€‚é‚£è¿™é‡Œä¸ºä»€ä¹ˆä¸ç›´æ¥è®¾ç½®ä¸€ä¸ª ThreadLocal&amp;lt;Map&amp;lt;String, Object&amp;gt;&amp;gt; å¯¹è±¡ï¼Œè€Œæ˜¯è¦è®¾ç½®ä¸€ä¸ª Stack ç»“æ„å‘¢ï¼Ÿæˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™ä¹ˆåšçš„åŸå› æ˜¯ä»€ä¹ˆã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;@LogRecord&lt;/span&gt;(contentÂ =Â &lt;span&gt;&quot;ä¿®æ”¹äº†è®¢å•çš„é…é€å‘˜ï¼šä»â€œ{deveryUser{#oldDeliveryUserId}}â€, ä¿®æ”¹åˆ°â€œ{deveryUser{#request.getUserId()}}â€&quot;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â bizNo=&lt;span&gt;&quot;#request.getDeliveryOrderNo()&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;modifyAddress&lt;/span&gt;&lt;span&gt;(updateDeliveryRequestÂ request)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æŸ¥è¯¢å‡ºåŸæ¥çš„åœ°å€æ˜¯ä»€ä¹ˆ&lt;/span&gt;&lt;br/&gt;Â Â Â Â LogRecordContext.putVariable(&lt;span&gt;&quot;oldDeliveryUserId&quot;&lt;/span&gt;,Â DeliveryService.queryOldDeliveryUserId(request.getDeliveryOrderNo()));&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â æ›´æ–°æ´¾é€ä¿¡æ¯Â ç”µè¯ï¼Œæ”¶ä»¶äººã€åœ°å€&lt;/span&gt;&lt;br/&gt;Â Â Â Â doUpdate(request);&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;ä¸Šé¢ä»£ç çš„æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.837620578778135&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsXehNsNY76lXs1L1HwaLESxLcgBXtru4cjE68q2vHorVRhyXziaAV8V2G2icZg7BUIExGO8Td0QfUlQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1244&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;çœ‹èµ·æ¥æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯ä½¿ç”¨ LogRecordAnnotation çš„æ–¹æ³•é‡Œé¢åµŒå¥—äº†å¦ä¸€ä¸ªä½¿ç”¨ LogRecordAnnotation æ–¹æ³•çš„æ—¶å€™ï¼Œæµç¨‹å°±å˜æˆä¸‹é¢çš„å½¢å¼ï¼š&lt;/span&gt;&lt;span/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.8894230769230769&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsXehNsNY76lXs1L1HwaLESxqGNT1JtY0uhKbK9CdeocO9X0UEficFLyn6xMGV0S1ZYlrMEG2OQkcZQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1248&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;å¯ä»¥çœ‹åˆ°ï¼Œå½“æ–¹æ³•äºŒæ‰§è¡Œäº†é‡Šæ”¾å˜é‡åï¼Œç»§ç»­æ‰§è¡Œæ–¹æ³•ä¸€çš„ logRecord é€»è¾‘ï¼Œæ­¤æ—¶è§£æçš„æ—¶å€™ ThreadLocal&amp;lt;Map&amp;lt;String, Object&amp;gt;&amp;gt;çš„ Map å·²ç»è¢«é‡Šæ”¾æ‰ï¼Œæ‰€ä»¥æ–¹æ³•ä¸€å°±è·å–ä¸åˆ°å¯¹åº”çš„å˜é‡äº†ã€‚æ–¹æ³•ä¸€å’Œæ–¹æ³•äºŒå…±ç”¨ä¸€ä¸ªå˜é‡ Map è¿˜æœ‰ä¸ªé—®é¢˜æ˜¯ï¼šå¦‚æœæ–¹æ³•äºŒè®¾ç½®äº†å’Œæ–¹æ³•ä¸€ç›¸åŒçš„å˜é‡ä¸¤ä¸ªæ–¹æ³•çš„å˜é‡å°±ä¼šè¢«ç›¸äº’è¦†ç›–ã€‚æ‰€ä»¥æœ€ç»ˆ LogRecordContext çš„å˜é‡çš„ç”Ÿå‘½å‘¨æœŸéœ€è¦æ˜¯ä¸‹é¢çš„å½¢å¼ï¼š&lt;/span&gt;&lt;span/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;1&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsXehNsNY76lXs1L1HwaLESxnf8JSC6vgFAUkGq7C4jlvPMPbBUotl6WnXtp79rL3C0vlfX6Ke2xXg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;371&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;LogRecordContext æ¯æ‰§è¡Œä¸€ä¸ªæ–¹æ³•éƒ½ä¼šå‹æ ˆä¸€ä¸ª Mapï¼Œæ–¹æ³•æ‰§è¡Œå®Œä¹‹åä¼š Pop æ‰è¿™ä¸ª Mapï¼Œä»è€Œé¿å…å˜é‡å…±äº«å’Œè¦†ç›–é—®é¢˜ã€‚&lt;/span&gt;&lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;é»˜è®¤æ“ä½œäººé€»è¾‘&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;åœ¨ LogRecordInterceptor ä¸­ IOperatorGetService æ¥å£ï¼Œè¿™ä¸ªæ¥å£å¯ä»¥è·å–åˆ°å½“å‰çš„ç”¨æˆ·ã€‚ä¸‹é¢æ˜¯æ¥å£çš„å®šä¹‰ï¼š&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;interface&lt;/span&gt;Â &lt;span&gt;IOperatorGetService&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â å¯ä»¥åœ¨é‡Œé¢å¤–éƒ¨çš„è·å–å½“å‰ç™»é™†çš„ç”¨æˆ·ï¼Œæ¯”å¦‚Â UserContext.getCurrentUser()&lt;br/&gt;Â Â Â Â Â *&lt;br/&gt;Â Â Â Â Â *Â &lt;span&gt;@return&lt;/span&gt;Â è½¬æ¢æˆOperatorè¿”å›&lt;br/&gt;Â Â Â Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;OperatorÂ &lt;span&gt;getUser&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;ä¸‹é¢ç»™å‡ºäº†ä»ç”¨æˆ·ä¸Šä¸‹æ–‡ä¸­è·å–ç”¨æˆ·çš„ä¾‹å­ï¼š&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;DefaultOperatorGetServiceImpl&lt;/span&gt;Â &lt;span&gt;implements&lt;/span&gt;Â &lt;span&gt;IOperatorGetService&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â OperatorÂ &lt;span&gt;getUser&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;//UserUtilsÂ æ˜¯è·å–ç”¨æˆ·ä¸Šä¸‹æ–‡çš„æ–¹æ³•&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â Optional.ofNullable(UserUtils.getUser())&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .map(aÂ -&amp;gt;Â &lt;span&gt;new&lt;/span&gt;Â Operator(a.getName(),Â a.getLogin()))&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â .orElseThrow(()-&amp;gt;&lt;span&gt;new&lt;/span&gt;Â IllegalArgumentException(&lt;span&gt;&quot;userÂ isÂ null&quot;&lt;/span&gt;));&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;ç»„ä»¶åœ¨è§£æ operator çš„æ—¶å€™ï¼Œå°±åˆ¤æ–­æ³¨è§£ä¸Šçš„ operator æ˜¯å¦æ˜¯ç©ºï¼Œå¦‚æœæ³¨è§£ä¸Šæ²¡æœ‰æŒ‡å®šï¼Œæˆ‘ä»¬å°±ä» IOperatorGetService çš„ getUser æ–¹æ³•è·å–äº†ã€‚å¦‚æœéƒ½è·å–ä¸åˆ°ï¼Œå°±ä¼šæŠ¥é”™ã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;StringÂ realOperatorIdÂ =Â &lt;span&gt;&quot;&quot;&lt;/span&gt;;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;Â (StringUtils.isEmpty(operatorId))Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (operatorGetService.getUser()Â ==Â &lt;span&gt;null&lt;/span&gt;Â ||Â StringUtils.isEmpty(operatorGetService.getUser().getOperatorId()))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;throw&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â IllegalArgumentException(&lt;span&gt;&quot;userÂ isÂ null&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â realOperatorIdÂ =Â operatorGetService.getUser().getOperatorId();&lt;br/&gt;}Â &lt;span&gt;else&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â spElTemplatesÂ =Â Lists.newArrayList(bizKey,Â bizNo,Â action,Â operatorId,Â detail);&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;è‡ªå®šä¹‰å‡½æ•°é€»è¾‘&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;è‡ªå®šä¹‰å‡½æ•°çš„ç±»å›¾å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.30807248764415157&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsXehNsNY76lXs1L1HwaLESxKrpOdFKJX6OIg0AqeCc5luGlJxkdgRUgYyNOHSCcWKVVZIRE0l0EIQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1214&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;ä¸‹é¢æ˜¯ IParseFunction çš„æ¥å£å®šä¹‰ï¼š&lt;/span&gt;&lt;code&gt;&lt;span&gt;executeBefore&lt;/span&gt;&lt;/code&gt;&lt;span&gt; å‡½æ•°ä»£è¡¨äº†è‡ªå®šä¹‰å‡½æ•°æ˜¯å¦åœ¨ä¸šåŠ¡ä»£ç æ‰§è¡Œä¹‹å‰è§£æï¼Œä¸Šé¢æåˆ°çš„æŸ¥è¯¢ä¿®æ”¹ä¹‹å‰çš„å†…å®¹ã€‚&lt;/span&gt;&lt;span/&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;interface&lt;/span&gt;Â &lt;span&gt;IParseFunction&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;default&lt;/span&gt;Â &lt;span&gt;boolean&lt;/span&gt;Â &lt;span&gt;executeBefore&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;false&lt;/span&gt;;&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;StringÂ &lt;span&gt;functionName&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;StringÂ &lt;span&gt;apply&lt;/span&gt;&lt;span&gt;(StringÂ value)&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;ParseFunctionFactory çš„ä»£ç æ¯”è¾ƒç®€å•ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯æŠŠæ‰€æœ‰çš„ IParseFunction æ³¨å…¥åˆ°å‡½æ•°å·¥å‚ä¸­ã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;ParseFunctionFactory&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;private&lt;/span&gt;Â Map&amp;lt;String,Â IParseFunction&amp;gt;Â allFunctionMap;&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;ParseFunctionFactory&lt;/span&gt;&lt;span&gt;(List&amp;lt;IParseFunction&amp;gt;Â parseFunctions)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (CollectionUtils.isEmpty(parseFunctions))Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â allFunctionMapÂ =Â &lt;span&gt;new&lt;/span&gt;Â HashMap&amp;lt;&amp;gt;();&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â (IParseFunctionÂ parseFunctionÂ :Â parseFunctions)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (StringUtils.isEmpty(parseFunction.functionName()))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;continue&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â allFunctionMap.put(parseFunction.functionName(),Â parseFunction);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â IParseFunctionÂ &lt;span&gt;getFunction&lt;/span&gt;&lt;span&gt;(StringÂ functionName)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â allFunctionMap.get(functionName);&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;boolean&lt;/span&gt;Â &lt;span&gt;isBeforeFunction&lt;/span&gt;&lt;span&gt;(StringÂ functionName)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â allFunctionMap.get(functionName)Â !=Â &lt;span&gt;null&lt;/span&gt;Â &amp;amp;&amp;amp;Â allFunctionMap.get(functionName).executeBefore();&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;DefaultFunctionServiceImpl çš„é€»è¾‘å°±æ˜¯æ ¹æ®ä¼ å…¥çš„å‡½æ•°åç§° functionName æ‰¾åˆ°å¯¹åº”çš„ IParseFunctionï¼Œç„¶åæŠŠå‚æ•°ä¼ å…¥åˆ° IParseFunction çš„ &lt;/span&gt;&lt;code&gt;&lt;span&gt;apply&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ–¹æ³•ä¸Šæœ€åè¿”å›å‡½æ•°çš„å€¼ã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;DefaultFunctionServiceImpl&lt;/span&gt;Â &lt;span&gt;implements&lt;/span&gt;Â &lt;span&gt;IFunctionService&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â ParseFunctionFactoryÂ parseFunctionFactory;&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;DefaultFunctionServiceImpl&lt;/span&gt;&lt;span&gt;(ParseFunctionFactoryÂ parseFunctionFactory)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;this&lt;/span&gt;.parseFunctionFactoryÂ =Â parseFunctionFactory;&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â StringÂ &lt;span&gt;apply&lt;/span&gt;&lt;span&gt;(StringÂ functionName,Â StringÂ value)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â IParseFunctionÂ functionÂ =Â parseFunctionFactory.getFunction(functionName);&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (functionÂ ==Â &lt;span&gt;null&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â value;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â function.apply(value);&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;boolean&lt;/span&gt;Â &lt;span&gt;beforeFunction&lt;/span&gt;&lt;span&gt;(StringÂ functionName)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â parseFunctionFactory.isBeforeFunction(functionName);&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.2.3 æ—¥å¿—æŒä¹…åŒ–é€»è¾‘&lt;/span&gt;&lt;/h4&gt;&lt;section&gt;&lt;span&gt;åŒæ ·åœ¨ LogRecordInterceptor çš„ä»£ç ä¸­å¼•ç”¨äº† ILogRecordServiceï¼Œè¿™ä¸ª Service ä¸»è¦åŒ…å«äº†æ—¥å¿—è®°å½•çš„æ¥å£ã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;interface&lt;/span&gt;Â &lt;span&gt;ILogRecordService&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â ä¿å­˜Â log&lt;br/&gt;Â Â Â Â Â *&lt;br/&gt;Â Â Â Â Â *Â &lt;span&gt;@param&lt;/span&gt;Â logRecordÂ æ—¥å¿—å®ä½“&lt;br/&gt;Â Â Â Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;record&lt;/span&gt;&lt;span&gt;(LogRecordÂ logRecord)&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;ä¸šåŠ¡å¯ä»¥å®ç°è¿™ä¸ªä¿å­˜æ¥å£ï¼Œç„¶åæŠŠæ—¥å¿—ä¿å­˜åœ¨ä»»ä½•å­˜å‚¨ä»‹è´¨ä¸Šã€‚è¿™é‡Œç»™äº†ä¸€ä¸ª 2.2 èŠ‚ä»‹ç»çš„é€šè¿‡ log.info ä¿å­˜åœ¨æ—¥å¿—æ–‡ä»¶ä¸­çš„ä¾‹å­ï¼Œä¸šåŠ¡å¯ä»¥æŠŠä¿å­˜è®¾ç½®æˆå¼‚æ­¥æˆ–è€…åŒæ­¥ï¼Œå¯ä»¥å’Œä¸šåŠ¡æ”¾åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­ä¿è¯æ“ä½œæ—¥å¿—å’Œä¸šåŠ¡çš„ä¸€è‡´æ€§ï¼Œä¹Ÿå¯ä»¥æ–°å¼€è¾Ÿä¸€ä¸ªäº‹åŠ¡ï¼Œä¿è¯æ—¥å¿—çš„é”™è¯¯ä¸å½±å“ä¸šåŠ¡çš„äº‹åŠ¡ã€‚ä¸šåŠ¡å¯ä»¥ä¿å­˜åœ¨ Elasticsearchã€æ•°æ®åº“æˆ–è€…æ–‡ä»¶ä¸­ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®æ—¥å¿—ç»“æ„å’Œæ—¥å¿—çš„å­˜å‚¨å®ç°ç›¸åº”çš„æŸ¥è¯¢é€»è¾‘ã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;@Slf&lt;/span&gt;4j&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;DefaultLogRecordServiceImpl&lt;/span&gt;Â &lt;span&gt;implements&lt;/span&gt;Â &lt;span&gt;ILogRecordService&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//Â Â Â Â @Transactional(propagationÂ =Â Propagation.REQUIRES_NEW)&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;record&lt;/span&gt;&lt;span&gt;(LogRecordÂ logRecord)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â log.info(&lt;span&gt;&quot;ã€logRecordã€‘log={}&quot;&lt;/span&gt;,Â logRecord);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.2.4 Starter é€»è¾‘å°è£…&lt;/span&gt;&lt;/h4&gt;&lt;section&gt;&lt;span&gt;ä¸Šé¢é€»è¾‘ä»£ç å·²ç»ä»‹ç»å®Œæ¯•ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥éœ€è¦æŠŠè¿™äº›ç»„ä»¶ç»„è£…èµ·æ¥ï¼Œç„¶åè®©ç”¨æˆ·å»ä½¿ç”¨ã€‚åœ¨ä½¿ç”¨è¿™ä¸ªç»„ä»¶çš„æ—¶å€™åªéœ€è¦åœ¨ Springboot çš„å…¥å£ä¸Šæ·»åŠ ä¸€ä¸ªæ³¨è§£ @EnableLogRecord(tenant = &quot;com.mzt.test&quot;)ã€‚å…¶ä¸­ tenant ä»£è¡¨ç§Ÿæˆ·ï¼Œæ˜¯ä¸ºäº†å¤šç§Ÿæˆ·ä½¿ç”¨çš„ã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;@SpringBootApplication&lt;/span&gt;(excludeÂ =Â DataSourceAutoConfiguration&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;br/&gt;@&lt;span&gt;EnableTransactionManagement&lt;/span&gt;&lt;br/&gt;@&lt;span&gt;EnableLogRecord&lt;/span&gt;(&lt;span&gt;tenant&lt;/span&gt;Â &lt;/span&gt;=Â &lt;span&gt;&quot;com.mzt.test&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;Main&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(String[]Â args)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â SpringApplication.run(Main&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;,Â &lt;span&gt;args&lt;/span&gt;)&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;æˆ‘ä»¬å†çœ‹ä¸‹ EnableLogRecord çš„ä»£ç ï¼Œä»£ç ä¸­ Import äº† &lt;/span&gt;&lt;code&gt;&lt;span&gt;LogRecordConfigureSelector.class&lt;/span&gt;&lt;/code&gt;&lt;span&gt;ï¼Œåœ¨ &lt;/span&gt;&lt;code&gt;&lt;span&gt;LogRecordConfigureSelector&lt;/span&gt;&lt;/code&gt;&lt;span&gt; ç±»ä¸­æš´éœ²äº† &lt;/span&gt;&lt;code&gt;&lt;span&gt;LogRecordProxyAutoConfiguration&lt;/span&gt;&lt;/code&gt;&lt;span&gt; ç±»ã€‚&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;@Target&lt;/span&gt;(ElementType.TYPE)&lt;br/&gt;&lt;span&gt;@Retention&lt;/span&gt;(RetentionPolicy.RUNTIME)&lt;br/&gt;&lt;span&gt;@Documented&lt;/span&gt;&lt;br/&gt;&lt;span&gt;@Import&lt;/span&gt;(LogRecordConfigureSelector&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â @&lt;span&gt;interface&lt;/span&gt;Â &lt;span&gt;EnableLogRecord&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;StringÂ &lt;span&gt;tenant&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â &lt;span&gt;AdviceModeÂ &lt;span&gt;mode&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;span&gt;default&lt;/span&gt;Â AdviceMode.PROXY&lt;/span&gt;;&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;code&gt;&lt;span&gt;LogRecordProxyAutoConfiguration&lt;/span&gt;&lt;/code&gt;&lt;span&gt; å°±æ˜¯è£…é…ä¸Šé¢ç»„ä»¶çš„æ ¸å¿ƒç±»äº†ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;@Configuration&lt;/span&gt;&lt;br/&gt;&lt;span&gt;@Slf&lt;/span&gt;4j&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;LogRecordProxyAutoConfiguration&lt;/span&gt;Â &lt;span&gt;implements&lt;/span&gt;Â &lt;span&gt;ImportAware&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;private&lt;/span&gt;Â AnnotationAttributesÂ enableLogRecord;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;@Bean&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;@Role&lt;/span&gt;(BeanDefinition.ROLE_INFRASTRUCTURE)&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â LogRecordOperationSourceÂ &lt;span&gt;logRecordOperationSource&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â LogRecordOperationSource();&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;@Bean&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;@ConditionalOnMissingBean&lt;/span&gt;(IFunctionService&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;br/&gt;Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;IFunctionService&lt;/span&gt;Â &lt;span&gt;functionService&lt;/span&gt;(&lt;span&gt;ParseFunctionFactory&lt;/span&gt;Â &lt;span&gt;parseFunctionFactory&lt;/span&gt;)Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â DefaultFunctionServiceImpl(parseFunctionFactory);&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;@Bean&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â ParseFunctionFactoryÂ &lt;span&gt;parseFunctionFactory&lt;/span&gt;&lt;span&gt;(@AutowiredÂ List&amp;lt;IParseFunction&amp;gt;Â parseFunctions)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â ParseFunctionFactory(parseFunctions);&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;@Bean&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;@ConditionalOnMissingBean&lt;/span&gt;(IParseFunction&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;br/&gt;Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;DefaultParseFunction&lt;/span&gt;Â &lt;span&gt;parseFunction&lt;/span&gt;()Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â DefaultParseFunction();&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;@Bean&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;@Role&lt;/span&gt;(BeanDefinition.ROLE_INFRASTRUCTURE)&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â BeanFactoryLogRecordAdvisorÂ &lt;span&gt;logRecordAdvisor&lt;/span&gt;&lt;span&gt;(IFunctionServiceÂ functionService)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â BeanFactoryLogRecordAdvisorÂ advisorÂ =&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;new&lt;/span&gt;Â BeanFactoryLogRecordAdvisor();&lt;br/&gt;Â Â Â Â advisor.setLogRecordOperationSource(logRecordOperationSource());&lt;br/&gt;Â Â Â Â advisor.setAdvice(logRecordInterceptor(functionService));&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â advisor;&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;@Bean&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;@Role&lt;/span&gt;(BeanDefinition.ROLE_INFRASTRUCTURE)&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â LogRecordInterceptorÂ &lt;span&gt;logRecordInterceptor&lt;/span&gt;&lt;span&gt;(IFunctionServiceÂ functionService)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â LogRecordInterceptorÂ interceptorÂ =Â &lt;span&gt;new&lt;/span&gt;Â LogRecordInterceptor();&lt;br/&gt;Â Â Â Â interceptor.setLogRecordOperationSource(logRecordOperationSource());&lt;br/&gt;Â Â Â Â interceptor.setTenant(enableLogRecord.getString(&lt;span&gt;&quot;tenant&quot;&lt;/span&gt;));&lt;br/&gt;Â Â Â Â interceptor.setFunctionService(functionService);&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â interceptor;&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;@Bean&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;@ConditionalOnMissingBean&lt;/span&gt;(IOperatorGetService&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;br/&gt;Â Â @&lt;span&gt;Role&lt;/span&gt;(&lt;span&gt;BeanDefinition&lt;/span&gt;.&lt;span&gt;ROLE_APPLICATION&lt;/span&gt;)&lt;br/&gt;Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;IOperatorGetService&lt;/span&gt;Â &lt;span&gt;operatorGetService&lt;/span&gt;()Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â DefaultOperatorGetServiceImpl();&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;@Bean&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;@ConditionalOnMissingBean&lt;/span&gt;(ILogRecordService&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;br/&gt;Â Â @&lt;span&gt;Role&lt;/span&gt;(&lt;span&gt;BeanDefinition&lt;/span&gt;.&lt;span&gt;ROLE_APPLICATION&lt;/span&gt;)&lt;br/&gt;Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;ILogRecordService&lt;/span&gt;Â &lt;span&gt;recordService&lt;/span&gt;()Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â DefaultLogRecordServiceImpl();&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;setImportMetadata&lt;/span&gt;&lt;span&gt;(AnnotationMetadataÂ importMetadata)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;this&lt;/span&gt;.enableLogRecordÂ =Â AnnotationAttributes.fromMap(&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â importMetadata.getAnnotationAttributes(EnableLogRecord&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;.&lt;span&gt;getName&lt;/span&gt;(),Â &lt;span&gt;false&lt;/span&gt;))&lt;/span&gt;;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (&lt;span&gt;this&lt;/span&gt;.enableLogRecordÂ ==Â &lt;span&gt;null&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â log.info(&lt;span&gt;&quot;@EnableCachingÂ isÂ notÂ presentÂ onÂ importingÂ class&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;è¿™ä¸ªç±»ç»§æ‰¿ ImportAware æ˜¯ä¸ºäº†æ‹¿åˆ° EnableLogRecord ä¸Šçš„ç§Ÿæˆ·å±æ€§ï¼Œè¿™ä¸ªç±»ä½¿ç”¨å˜é‡ logRecordAdvisor å’Œ logRecordInterceptor è£…é…äº† AOPï¼ŒåŒæ—¶æŠŠè‡ªå®šä¹‰å‡½æ•°æ³¨å…¥åˆ°äº† logRecordAdvisor ä¸­ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;å¯¹å¤–æ‰©å±•ç±»&lt;/strong&gt;ï¼šåˆ†åˆ«æ˜¯&lt;/span&gt;&lt;code&gt;&lt;span&gt;IOperatorGetService&lt;/span&gt;&lt;/code&gt;&lt;span&gt;ã€&lt;/span&gt;&lt;code&gt;&lt;span&gt;ILogRecordService&lt;/span&gt;&lt;/code&gt;&lt;span&gt;ã€&lt;/span&gt;&lt;code&gt;&lt;span&gt;IParseFunction&lt;/span&gt;&lt;/code&gt;&lt;span&gt;ã€‚ä¸šåŠ¡å¯ä»¥è‡ªå·±å®ç°ç›¸åº”çš„æ¥å£ï¼Œå› ä¸ºé…ç½®äº† @ConditionalOnMissingBeanï¼Œæ‰€ä»¥ç”¨æˆ·çš„å®ç°ç±»ä¼šè¦†ç›–ç»„ä»¶å†…çš„é»˜è®¤å®ç°ã€‚&lt;/span&gt;&lt;/section&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;5. æ€»ç»“&lt;/span&gt;&lt;/h2&gt;&lt;section&gt;&lt;span&gt;è¿™ç¯‡æ–‡ç« ä»‹ç»äº†æ“ä½œæ—¥å¿—çš„å¸¸è§å†™æ³•ï¼Œä»¥åŠå¦‚ä½•è®©æ“ä½œæ—¥å¿—çš„å®ç°æ›´åŠ ç®€å•ã€æ˜“æ‡‚ï¼Œé€šè¿‡ç»„ä»¶çš„å››ä¸ªæ¨¡å—ï¼Œä»‹ç»äº†ç»„ä»¶çš„å…·ä½“å®ç°ã€‚å¯¹äºä¸Šé¢çš„ç»„ä»¶ä»‹ç»ï¼Œå¤§å®¶å¦‚æœæœ‰ç–‘é—®ï¼Œä¹Ÿæ¬¢è¿åœ¨æ–‡æœ«ç•™è¨€ï¼Œæˆ‘ä»¬ä¼šè¿›è¡Œç­”ç–‘ã€‚&lt;/span&gt;&lt;/section&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;6. ä½œè€…ç®€ä»‹&lt;/span&gt;&lt;/h2&gt;&lt;section&gt;&lt;span&gt;ç«™é€šï¼Œ2020å¹´åŠ å…¥ç¾å›¢ï¼ŒåŸºç¡€ç ”å‘å¹³å°/ç ”å‘è´¨é‡åŠæ•ˆç‡éƒ¨å·¥ç¨‹å¸ˆã€‚&lt;/span&gt;&lt;/section&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;7. å‚è€ƒèµ„æ–™&lt;/span&gt;&lt;/h2&gt;&lt;section&gt;&lt;span&gt;----------Â  ENDÂ  ----------&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;æ‹›è˜ä¿¡æ¯&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section data-source=&quot;bj.96weixin.com&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;span&gt;ç¾å›¢ç ”å‘è´¨é‡åŠæ•ˆç‡éƒ¨ ï¼Œè‡´åŠ›äºå»ºè®¾ä¸šç•Œä¸€æµçš„æŒç»­äº¤ä»˜å¹³å°ï¼Œç°æ‹›è˜åŸºç¡€ç»„ä»¶æ–¹å‘ç›¸å…³çš„å·¥ç¨‹å¸ˆï¼Œåæ ‡åŒ—äº¬/ä¸Šæµ·ã€‚æ¬¢è¿æ„Ÿå…´è¶£çš„åŒå­¦åŠ å…¥ï¼Œå¤§å®¶å¯æŠ•é€’ç®€å†è‡³ï¼š&lt;/span&gt;&lt;span&gt;chao.yu@meituan.com&lt;/span&gt;&lt;span&gt;ï¼ˆ&lt;/span&gt;&lt;span&gt;é‚®ä»¶ä¸»é¢˜è¯·æ³¨æ˜ï¼šç¾å›¢ç ”å‘è´¨é‡åŠæ•ˆç‡éƒ¨&lt;/span&gt;&lt;span&gt;ï¼‰ã€‚&lt;/span&gt;&lt;strong/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;ä¹Ÿè®¸ä½ è¿˜æƒ³çœ‹&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;Â  |Â &lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651751273&amp;amp;idx=1&amp;amp;sn=388f666fd1bce3413d8564662b120b71&amp;amp;chksm=bd125a248a65d332417c729d9e434157236a41c380fb5ca5b2b3efa7bf6e980273cc544757a9&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;/&gt;&lt;/strong&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651751273&amp;amp;idx=1&amp;amp;sn=388f666fd1bce3413d8564662b120b71&amp;amp;chksm=bd125a248a65d332417c729d9e434157236a41c380fb5ca5b2b3efa7bf6e980273cc544757a9&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Logan Webï¼šå‰ç«¯æ—¥å¿—åœ¨Webç«¯çš„å®ç°&lt;/a&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;Â  |&lt;/strong&gt;&lt;/span&gt;Â &lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651748960&amp;amp;idx=1&amp;amp;sn=2bd11c883ecc787e634bc3c29dfbbe50&amp;amp;chksm=bd12a32d8a652a3b25f26de739555341937697e02f2f01017129514624cdb0dd2e2bdd844acb&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;Loganï¼šç¾å›¢å¼€æºç§»åŠ¨ç«¯åŸºç¡€æ—¥å¿—åº“&lt;/a&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;Â  |&lt;/strong&gt;Â &lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651747596&amp;amp;idx=2&amp;amp;sn=6e08a25d203c3e05461b3c1c5f238e82&amp;amp;chksm=bd12ac418a65255743ac6e7758b65f8d5369fde0bb902cee62bbe627f6a4bb307edf76287477&amp;amp;scene=21#wechat_redirect&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;AndroidåŠ¨æ€æ—¥å¿—ç³»ç»ŸHolmes&lt;/a&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;é˜…è¯»æ›´å¤š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;---&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://t.1yb.co/jo7r&quot; textvalue=&quot;å‰ç«¯&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;å‰ç«¯&lt;/a&gt;&lt;strong&gt;&lt;span&gt;Â |&lt;/span&gt;&lt;/strong&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://t.1yb.co/jo7v&quot; textvalue=&quot;Â å®‰å…¨&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;strong&gt;Â &lt;/strong&gt;Â &lt;/a&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://t.1yb.co/jsdG&quot; textvalue=&quot;ç®—æ³•&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;ç®—æ³•&lt;/a&gt;&lt;strong&gt;Â |&lt;/strong&gt;&lt;span&gt;Â &lt;a target=&quot;_blank&quot; href=&quot;https://t.1yb.co/jsWK&quot; textvalue=&quot;åç«¯&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;åç«¯&lt;/a&gt;&lt;/span&gt;&lt;strong&gt;&lt;span&gt;Â |Â &lt;/span&gt;&lt;/strong&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://t.1yb.co/jqRZ&quot; textvalue=&quot;æ•°æ®&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;æ•°æ®&lt;/a&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://t.1yb.co/jo7v&quot; textvalue=&quot;Â å®‰å…¨&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;å®‰å…¨&lt;/a&gt;&lt;strong&gt;Â |Â &lt;/strong&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://t.1yb.co/jui4&quot; textvalue=&quot;Android&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;Android&lt;/a&gt;&lt;strong&gt;Â |&lt;/strong&gt;Â &lt;a target=&quot;_blank&quot; href=&quot;https://t.1yb.co/jtXE&quot; textvalue=&quot;iOS&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;iOS&lt;/a&gt;Â &lt;strong&gt;Â |&lt;/strong&gt;Â &lt;a target=&quot;_blank&quot; href=&quot;https://t.1yb.co/jo7K&quot; textvalue=&quot;è¿ç»´&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;è¿ç»´&lt;/a&gt;&lt;strong&gt;Â |Â &lt;/strong&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://t.1yb.co/jtsX&quot; textvalue=&quot;æµ‹è¯•&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;æµ‹è¯•&lt;/a&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MjM5NjQ5MTI5OA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsVGibnsaEib3aNlqF0tOrA2RGEmNSbia2nnohE4Tpf95UyTiaSjDVbHRfY8WNBeTuLLTaVdSckkNyEx1Q/0?wx_fmt=png&quot; data-nickname=&quot;ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ&quot; data-alias=&quot;meituantech&quot; data-signature=&quot;10000+å·¥ç¨‹å¸ˆï¼Œå¦‚ä½•æ”¯æ’‘ä¸­å›½é¢†å…ˆçš„ç”Ÿæ´»æœåŠ¡ç”µå­å•†åŠ¡å¹³å°ï¼Ÿæ•°äº¿æ¶ˆè´¹è€…ã€æ•°ç™¾ä¸‡å•†æˆ·ã€2000å¤šä¸ªè¡Œä¸šã€å‡ åƒäº¿äº¤æ˜“é¢èƒŒåæ˜¯å“ªäº›æŠ€æœ¯åœ¨æ”¯æ’‘ï¼Ÿè¿™é‡Œæ˜¯ç¾å›¢ã€å¤§ä¼—ç‚¹è¯„ã€ç¾å›¢å¤–å–ã€ç¾å›¢é…é€ã€ç¾å›¢ä¼˜é€‰ç­‰æŠ€æœ¯å›¢é˜Ÿçš„å¯¹å¤–çª—å£ã€‚&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>ee6d035c98915430fd1d24d20bab616f</guid>
<title>è®¾è®¡æ¨¡å¼ç³»åˆ—ï¼šå·¥å‚æ¨¡å¼</title>
<link>https://toutiao.io/k/glcmo5r</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section&gt;&lt;p&gt;å·¥å‚æ¨¡å¼å±äºåˆ›å»ºå‹è®¾è®¡æ¨¡å¼ã€‚æ˜¯æ—¥å¸¸ä½¿ç”¨æ¯”è¾ƒå¤šçš„ä¸€ç§è®¾è®¡æ¨¡å¼ã€‚æ¯”å¦‚&lt;code&gt;Logback&lt;/code&gt;ï¼Œ&lt;code&gt;Spring&lt;/code&gt;ç­‰æ¡†æ¶ä¸­éƒ½å¤§é‡ä½¿ç”¨è¯¥è®¾è®¡æ¨¡å¼ã€‚&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzUzMzE4MDY0Nw==&amp;amp;mid=2247484174&amp;amp;idx=1&amp;amp;sn=5c382541660563b718ffde9470605110&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;ä¸Šç¯‡æ–‡ç« &lt;/a&gt;æåˆ°çš„&lt;strong&gt;ç®€å•å·¥å‚æ¨¡å¼&lt;/strong&gt;è™½ç„¶åœ¨ç®€å•ç³»ç»Ÿå¯ä»¥ç”¨ä¸€ç”¨ï¼Œä½†æ˜¯å› ä¸ºå·¥å‚ç±»æœ¬èº«åŒ…å«å¤ªå¤šä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸”å¦‚æœæƒ³å¢åŠ æ–°çš„å›¾è¡¨ç±»å‹ï¼Œéœ€è¦ä¿®æ”¹å·¥å‚ç±»ç­‰ç¼ºç‚¹ã€‚æ‰€ä»¥æˆ‘ä»¬çœŸæ­£ç”Ÿäº§ç³»ç»Ÿæ›´å¤šçš„ä½¿ç”¨å·¥å‚æ¨¡å¼ã€‚&lt;/p&gt;&lt;p&gt;å·¥å‚æ¨¡å¼ä¸ºæ¯ä¸€ä¸ªç±»éƒ½å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„å·¥å‚ç±»ï¼Œè¯¥å·¥å‚ç±»åªè´Ÿè´£åˆ›å»ºå•ä¸€çš„äº§å“ã€‚&lt;/p&gt;&lt;h4&gt;&lt;span&gt;ä¸¾ä¸ªä¾‹å­&lt;/span&gt;&lt;/h4&gt;&lt;p&gt;é€šè¿‡å·¥å‚æ¨¡å¼å®ç°æ—¥å¿—çš„åˆ›å»ºï¼Œä¸ºä¸åŒç§ç±»çš„&lt;code&gt;Logger&lt;/code&gt;åˆ†åˆ«åˆ›å»ºä¸åŒç±»å‹çš„å·¥å‚ã€‚&lt;/p&gt;&lt;p&gt;æ¥çœ‹ä¸€ä¸‹UMLå›¾:&lt;/p&gt;&lt;figure&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.6126482213438735&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/jmjNkE9L9QjriahfkJibne3GYBranOyKaGz3EiavYQwW0bfgdiacUO8Dlo99O6ZGVchClDibpvwq85RpocI4bGhqCog/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;759&quot;/&gt;&lt;/p&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;æ¥çœ‹ä¸€ä¸‹ä»£ç å¦‚ä½•å®ç°&lt;/p&gt;&lt;p&gt;å…ˆæ¥å®šä¹‰ä¸€ä¸ª&lt;code&gt;Logger&lt;/code&gt;æ¥å£ï¼Œä»¥åŠ&lt;code&gt;LoggerFactory&lt;/code&gt;æ¥å£&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;interface&lt;/span&gt;Â &lt;span&gt;Logger&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;writeLogger&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;interface&lt;/span&gt;Â &lt;span&gt;LoggerFactory&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;LoggerÂ &lt;span&gt;createLogger&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åˆ†åˆ«å®šä¹‰&lt;code&gt;FileLogger&lt;/code&gt;å’Œ&lt;code&gt;FileLoggerFactory&lt;/code&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;FileLogger&lt;/span&gt;Â &lt;span&gt;implements&lt;/span&gt;Â &lt;span&gt;Logger&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;writeLogger&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;FileÂ logger&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;FileLoggerFactory&lt;/span&gt;Â &lt;span&gt;implements&lt;/span&gt;Â &lt;span&gt;LoggerFactory&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â LoggerÂ &lt;span&gt;createLogger&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//ä¸åŒLoggerçš„ä¸ªæ€§åˆå§‹åŒ–å·¥ä½œ&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â LoggerÂ loggerÂ =Â Â &lt;span&gt;new&lt;/span&gt;Â FileLogger();&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â logger;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœæƒ³å¢åŠ æ–°çš„&lt;code&gt;Logger&lt;/code&gt;ç›´æ¥å®ç°&lt;code&gt;Logger&lt;/code&gt;å’Œ&lt;code&gt;LoggerFactory&lt;/code&gt;å°±å¥½äº†ï¼Œçœ‹ä¸€ä¸‹å®¢æˆ·ç«¯å¦‚ä½•ä½¿ç”¨&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;Client&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(String[]Â args)&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â LoggerÂ logger;&lt;br/&gt;Â Â Â Â Â Â Â Â LoggerFactoryÂ loggerFactory;&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â loggerFactoryÂ =Â &lt;span&gt;new&lt;/span&gt;Â FileLoggerFactory();&lt;br/&gt;Â Â Â Â Â Â Â Â loggerÂ =Â loggerFactory.createLogger();&lt;br/&gt;Â Â Â Â Â Â Â Â logger.writeLogger();&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;/h4&gt;&lt;p&gt;å·¥å‚æ¨¡å¼æ˜¯åˆ›å»ºå‹æ¨¡å¼ä¹‹ä¸€ï¼Œæ—¥å¸¸ä½¿ç”¨æ¯”è¾ƒå¤šï¼Œæ¯ç±»äº§å“éƒ½æœ‰å¯¹åº”çš„ä¸€ä¸ªå·¥å‚ç±»ã€‚å·¥å‚æ¨¡å¼æŠŠç®€å•å·¥å‚çš„å†…éƒ¨é€»è¾‘è¿ç§»åˆ°äº†å®¢æˆ·ç«¯ï¼Œå½“éœ€è¦å¯¹åŠŸèƒ½æ‰©å±•æ—¶ï¼Œåªéœ€è¦ä¿®æ”¹å®¢æˆ·ç«¯å°±OKäº†ã€‚&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ¨èé˜…è¯»&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzUzMzE4MDY0Nw==&amp;amp;mid=2247484022&amp;amp;idx=1&amp;amp;sn=d3176ea73e48360b64c3f50e8fd622bf&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;1. Javaå¹¶å‘ç¼–ç¨‹é‚£äº›äº‹å„¿(å)â€”â€”æœ€åçš„æ€»ç»“&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzUzMzE4MDY0Nw==&amp;amp;mid=2247484130&amp;amp;idx=1&amp;amp;sn=eb09dd99d1a8e892a3de73d898c04b0c&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;2. ç¨‹åºå‘˜åº”è¯¥æŒæ¡çš„å¸¸ç”¨ç½‘ç»œé—®é¢˜å®šä½å·¥å…·&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzUzMzE4MDY0Nw==&amp;amp;mid=2247483893&amp;amp;idx=1&amp;amp;sn=85f6a2063048cc244aedde3172444e32&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;3. Awkè¿™ä»¶ä¸Šå¤ç¥å…µä½ ä¼šç”¨äº†å—&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzUzMzE4MDY0Nw==&amp;amp;mid=2247483852&amp;amp;idx=1&amp;amp;sn=6efb0db3d5dff639fae2aaec978c2160&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;4. æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºä¸€å¥—ELKæ—¥å¿—æœç´¢è¿ç»´å¹³å°&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>c915cda33454c2e2db11ecfd2ae11ee5</guid>
<title>æµå¼è®¡ç®—æ¡†æ¶ MegFlow å¼€æºï¼Œå¸®åŠ©é“²å±å®˜å®ç°èŠ±æ ·å® æºº</title>
<link>https://toutiao.io/k/gll08ju</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;RichText ztext Post-RichText css-hnrfcf&quot; options=&quot;[object Object]&quot;&gt;&lt;p&gt;å…³äºç¨‹åºå‘˜ä¸ºä»€ä¹ˆå–œæ¬¢å…»çŒ«çš„å›ç­”ï¼Œç½‘å‹ä»¬ç»™å‡ºäº†å¾ˆå¤šç­”æ¡ˆï¼Œæ¯”å¦‚ä¸€è¾¹å¸çŒ«ä¸€è¾¹å†™ä»£ç ï¼Œæ•ˆç‡æ›´é«˜ï¼›å…»çŒ«ä¸å®¹æ˜“è„±å‘ï¼›æ›´å®¹æ˜“äº¤åˆ°å¥³æœ‹å‹â€¦â€¦&lt;/p&gt;&lt;p&gt;å½“ç„¶ï¼Œé™¤äº†å–œæ¬¢å…»çŒ«ï¼Œç¨‹åºå‘˜ä¹Ÿå–œæ¬¢å¼€è„‘æ´ï¼Œå‘æŒ¥è‡ªå·±çš„ä¸“é•¿ï¼Œç»™â€œçŒ«ä¸»å­ä»¬â€å®‰æ’ä¸Šå„ç§é«˜ç§‘æŠ€â€”â€”è‡ªåŠ¨æŠ•å–‚æœºã€è‡ªåŠ¨é¥®é£Ÿæœºã€è‡ªåŠ¨æŒ‰æ‘©ä»ªâ€¦â€¦ç”šè‡³åœ¨è®­æ¨¡å‹çš„æ—¶å€™ç”¨çŒ«æ¥åšæµ‹è¯•ï¼Œè¯†åˆ«çŒ«å’ªçš„æƒ…ç»ªã€å¬æ‡‚çŒ«å’ªè¯­è¨€ã€‚&lt;/p&gt;&lt;p&gt;ç°åœ¨å°±æœ‰ä¸€æ¬¾ AI åº”ç”¨ï¼Œç ”å‘åˆè¡·åªæ˜¯é“²å±å®˜ç¨‹åºå‘˜æƒ³è¦ä¸ºâ€œä¸»å­â€å®ç°çŒ«å’ªå›´æ è¯†åˆ«ï¼Œå¼€ç®±å³ç”¨èƒŒåçš„èƒ½åŠ›æ­£æ˜¯æ¥è‡ª MegFlow æµå¼è®¡ç®—æ¡†æ¶ã€‚&lt;/p&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic1.zhimg.com/v2-2e5486cadac557160bb941d71842d304_b.gif&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;600&quot; data-rawheight=&quot;1080&quot; data-thumbnail=&quot;https://pic1.zhimg.com/v2-2e5486cadac557160bb941d71842d304_b.jpg&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic1.zhimg.com/v2-2e5486cadac557160bb941d71842d304_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;600&quot; data-rawheight=&quot;1080&quot; data-thumbnail=&quot;https://pic1.zhimg.com/v2-2e5486cadac557160bb941d71842d304_b.jpg&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic1.zhimg.com/v2-2e5486cadac557160bb941d71842d304_r.jpg&quot; data-actualsrc=&quot;https://pic1.zhimg.com/v2-2e5486cadac557160bb941d71842d304_b.gif&quot;/&gt;&lt;/figure&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic2.zhimg.com/v2-a443300aac19e1b65e9d741bb47147f1_b.gif&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;744&quot; data-rawheight=&quot;1080&quot; data-thumbnail=&quot;https://pic2.zhimg.com/v2-a443300aac19e1b65e9d741bb47147f1_b.jpg&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic2.zhimg.com/v2-a443300aac19e1b65e9d741bb47147f1_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;744&quot; data-rawheight=&quot;1080&quot; data-thumbnail=&quot;https://pic2.zhimg.com/v2-a443300aac19e1b65e9d741bb47147f1_b.jpg&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic2.zhimg.com/v2-a443300aac19e1b65e9d741bb47147f1_r.jpg&quot; data-actualsrc=&quot;https://pic2.zhimg.com/v2-a443300aac19e1b65e9d741bb47147f1_b.gif&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;b&gt;è¿‘æ—¥ï¼Œæ—·è§†å¼€æºæ·±åº¦å­¦ä¹ æ¡†æ¶ MegEngine å¼€æºäº† &lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/MegEngine/MegFlow&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;MegFlow&lt;/a&gt; æµå¼è®¡ç®—æ¡†æ¶ï¼ŒåŠ©åŠ› AI ç®—æ³•å¼€å‘è€…å¿«é€Ÿå®Œæˆ AI æ¨¡å‹çš„è½åœ°åº”ç”¨ã€‚&lt;/b&gt;&lt;/p&gt;&lt;p&gt;MegFlow æ˜¯é¢å‘è®¡ç®—æœºè§†è§‰åº”ç”¨çš„æµå¼è®¡ç®—æ¡†æ¶ï¼Œæä¾›äº†ä¸€å¥—å¯å¿«é€Ÿå®Œæˆ AI åº”ç”¨éƒ¨ç½²çš„è§†è§‰è§£ææœåŠ¡æ–¹æ¡ˆã€‚AI åº”ç”¨å¼€å‘è€…å¯ä»¥åŸºäº MegFlow æä¾›çš„å›¾åƒå’Œè§†é¢‘è§£ææœåŠ¡ï¼Œæœ€å¿« 15 åˆ†é’Ÿå³å¯å®Œæˆå®¢åˆ¶åŒ–æ‰€éœ€åŠŸèƒ½ï¼Œä¾‹å¦‚å‘ç¥¨æ‰«æã€æ˜ç«æ£€æµ‹ç­‰ã€‚&lt;/p&gt;&lt;p&gt;å¸¸è§„çš„ AI ç®—æ³•äº¤ä»˜æµç¨‹ä¸€èˆ¬åˆ†ä¸ºæ¨¡å‹è®­ç»ƒã€SDK å°è£…ã€ä¸šåŠ¡é›†æˆå’Œäº¤ä»˜éªŒæ”¶å››ä¸ªæ­¥éª¤ï¼Œå†—é•¿ç¹æ‚ã€‚&lt;b&gt;è€Œ MegFlow æä¾›äº†ä¸€ç§æ›´ä¸ºç®€æ´çš„è§†è§‰åº”ç”¨è½åœ°æµç¨‹ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥ç”¨ Python æ­å»ºè®¡ç®—å›¾ï¼Œä¸å¿…å…³å¿ƒ C++ã€å›¾ä¼˜åŒ–ç›¸å…³é—®é¢˜ï¼Œçœå»äº† SDK å°è£…æµç¨‹ï¼Œå¯å¿«é€Ÿå®ç°ç®—æ³•äº¤ä»˜ã€‚&lt;/b&gt;&lt;/p&gt;&lt;p&gt;MegFlow é’ˆå¯¹ AI ç®—æ³•å·¥ç¨‹è½åœ°ä¸­çš„é¢‘å‘é—®é¢˜ï¼Œè¯¸å¦‚æ€§èƒ½è°ƒä¼˜ã€å®‰å…¨æ€§ã€æ¨¡å‹åŠ å¯†ç­‰ï¼Œéƒ½èƒ½æä¾›è¡Œä¹‹æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆå¹¶æœ‰æ•ˆæå‡äº†å·¥ç¨‹æ•ˆç‡ã€‚MegFlow æ‹¥æœ‰å®‰å…¨å¯é ã€ç®€å•æ˜“ç”¨ã€è¯­ä¹‰æ”¯æŒä¸°å¯Œç­‰ç‰¹æ€§ï¼Œå¯ä»¥å¸®åŠ© AI åº”ç”¨å¿«é€Ÿè½åœ°ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;å®‰å…¨å¯é &lt;/b&gt;&lt;/p&gt;&lt;p&gt;æŠ€æœ¯é€‰å‹ä¸Šï¼Œ MegFlow çš„ç ”å‘å›¢é˜Ÿè°ƒç ”äº†å¤šç§æŠ€æœ¯æ–¹æ¡ˆï¼Œæœ€ç»ˆé€‰æ‹©äº†å®‰å…¨ä¸”é›¶é¢å¤–å¼€é”€çš„ Rust å¼‚æ­¥ç”Ÿæ€ï¼Œä»åŸºç¡€ä¸Šä¿è¯äº† MegFlow çš„å®‰å…¨æ€§ä¸æ€§èƒ½ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;ç®€å•æ˜“ç”¨&lt;/b&gt;&lt;/p&gt;&lt;p&gt;MegFlow æ”¯æŒ Python æ’ä»¶ï¼Œä¸”ä»…éœ€è¦å¼€å‘è€…ç¼–å†™åŒæ­¥çš„ Python ç¨‹åºï¼Œå³å¯å®ç°å¯ä»¥è¢«MegFlow å¼‚æ­¥è°ƒåº¦çš„ Python æ’ä»¶ã€‚åŒæ—¶ MegFlow æä¾›äº†ä¸€å¥—åŸºäº Web UIçš„å¯è§†åŒ–è°ƒè¯•å·¥å…·ï¼Œå¯æœ‰æ•ˆæå‡æ¨¡å‹éƒ¨ç½²çš„å·¥ä½œæ•ˆç‡ã€‚&lt;/p&gt;&lt;p&gt;&lt;b&gt;è¯­ä¹‰æ”¯æŒä¸°å¯Œ&lt;/b&gt;&lt;/p&gt;&lt;p&gt;è¡¨è¾¾èƒ½åŠ›ä¸Šï¼ŒMegFlow æ”¯æŒé™æ€å›¾ã€åŠ¨æ€å›¾å’Œå…±äº«å›¾ï¼Œè¾…ä»¥ demuxã€reorderã€transformç­‰å‡½æ•°å¼è¯­ä¹‰çš„é€šç”¨æ’ä»¶ï¼Œä¸ºæ­å»ºå¤šæ ·åŒ–çš„ AI æœåŠ¡æä¾›äº†ä¸°å¯Œçš„è¯­ä¹‰æ”¯æŒã€‚&lt;/p&gt;&lt;p&gt;MegFlow ä½¿ç”¨ç›¸å…³ï¼Œæ¬¢è¿å‚è€ƒç¤¾åŒºå¼€å‘è€…çš„å®è·µæ–‡ç« ï¼š&lt;/p&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://zhuanlan.zhihu.com/p/408791160&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-text=&quot;SunnyCaseï¼šAI åº”ç”¨è½åœ°åˆ©å™¨ - MegFlow å°é²œ&quot; class=&quot;LinkCard new&quot;&gt;&lt;span class=&quot;LinkCard-contents&quot;&gt;&lt;span class=&quot;LinkCard-title loading&quot; data-text=&quot;true&quot;/&gt;&lt;span class=&quot;LinkCard-desc loading&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;LinkCard-image LinkCard-image--default&quot;/&gt;&lt;/a&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://zhuanlan.zhihu.com/p/409279000&quot; data-draft-node=&quot;block&quot; data-draft-type=&quot;link-card&quot; data-text=&quot;BBufï¼šMegFlowå°é²œæµ‹è¯•&quot; class=&quot;LinkCard new&quot;&gt;&lt;span class=&quot;LinkCard-contents&quot;&gt;&lt;span class=&quot;LinkCard-title loading&quot; data-text=&quot;true&quot;/&gt;&lt;span class=&quot;LinkCard-desc loading&quot;/&gt;&lt;/span&gt;&lt;span class=&quot;LinkCard-image LinkCard-image--default&quot;/&gt;&lt;/a&gt;&lt;p&gt;ç›®å‰ï¼ŒMegFlow å·²å†…ç½®äº†å¼€ç®±å³ç”¨çš„ AI åº”ç”¨ï¼Œå¦‚ç”µç“¶è½¦æ£€æµ‹å’Œå® ç‰©å›´æ æ£€æµ‹ï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt;ç”µç“¶è½¦æ£€æµ‹åº”ç”¨åˆ™ä¸ºç‰©ä¸šç®¡ç†è€…æä¾›äº†æ™ºèƒ½åŒ–ç®¡ç†å·¥å…·ï¼Œå¦‚æ‘„åƒå¤´æ£€æµ‹åˆ°ç”µç“¶è½¦è¿›å…¥ç”µæ¢¯ï¼Œç³»ç»Ÿä¼šå‘å‡ºé€šçŸ¥ï¼Œæé†’ç®¡ç†äººå‘˜ï¼Œæœ‰æ•ˆæ’é™¤èµ·ç«å®‰å…¨éšæ‚£ã€‚&lt;/li&gt;&lt;li&gt;å® ç‰©å›´æ æ£€æµ‹ç›®å‰æ”¯æŒçŒ«å’ªæ£€æµ‹ï¼Œæ³¨å†Œè¿‡çš„çŒ«å’ªç¦»å¼€å›´æ ä¼šå‘å‡ºå‘Šè­¦ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;figure data-size=&quot;normal&quot;&gt;&lt;noscript&gt;&lt;img src=&quot;https://pic3.zhimg.com/v2-2b6896ca06d6f5393b7db7d34e0192ba_b.jpg&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1020&quot; data-rawheight=&quot;1020&quot; class=&quot;origin_image zh-lightbox-thumb&quot; data-original=&quot;https://pic3.zhimg.com/v2-2b6896ca06d6f5393b7db7d34e0192ba_r.jpg&quot;/&gt;&lt;/noscript&gt;&lt;img src=&quot;&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;1020&quot; data-rawheight=&quot;1020&quot; class=&quot;origin_image zh-lightbox-thumb lazy&quot; data-original=&quot;https://pic3.zhimg.com/v2-2b6896ca06d6f5393b7db7d34e0192ba_r.jpg&quot; data-actualsrc=&quot;https://pic3.zhimg.com/v2-2b6896ca06d6f5393b7db7d34e0192ba_b.jpg&quot;/&gt;&lt;/figure&gt;&lt;h2&gt;é™„ï¼š&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/MegEngine&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/MegEngine&lt;/span&gt;&lt;span class=&quot;invisible&quot;/&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//github.com/MegEngine/megflow&quot; class=&quot; external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;/span&gt;&lt;span class=&quot;visible&quot;&gt;github.com/MegEngine/me&lt;/span&gt;&lt;span class=&quot;invisible&quot;&gt;gflow&lt;/span&gt;&lt;span class=&quot;ellipsis&quot;/&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;å®˜ç½‘ï¼š&lt;a href=&quot;https://link.zhihu.com/?target=https%3A//megengine.org.cn/&quot; class=&quot; wrap external&quot; target=&quot;_blank&quot; rel=&quot;nofollow noreferrer&quot;&gt;MegEngine-æ·±åº¦å­¦ä¹ ï¼Œç®€å•å¼€å‘&lt;/a&gt;&lt;/p&gt;&lt;p&gt;æ¬¢è¿åŠ å…¥ MegEngine æŠ€æœ¯äº¤æµ QQ ç¾¤ï¼š1029741705&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>be1b7a38998da92e9df65abfd9496470</guid>
<title>2021 å¹´é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹åŠå¾®è°ƒçš„æœ€æ–°è¿›å±•</title>
<link>https://toutiao.io/k/x3l6hpe</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Â Â Â Â å°½ç®¡è¿™åœ¨NLPä¸­æ•ˆæœä¸ä½³ï¼ˆHowardï¼†Ruderï¼Œ2018ï¼šhttps://www.aclweb.org/anthology/P18-1031/ï¼‰ï¼Œä½†è¿˜æœ‰å…¶ä»–ä¸€äº›å‚æ•°å­é›†å¯ä»¥æ›´æœ‰æ•ˆåœ°è¿›è¡Œå¾®è°ƒã€‚ä¾‹å¦‚ï¼ŒBen-Zakenï¼ˆ2020å¹´ï¼šhttps://nlp.biu.ac.il/~yogo/bitfit.pdfï¼‰ä»…é€šè¿‡å¾®è°ƒæ¨¡å‹çš„åæ‰§å‚æ•°å³å¯è·å¾—éå¸¸å¥½çš„æ•ˆæœã€‚&lt;/p&gt;&lt;p&gt;Â Â Â Â å¦ä¸€ç³»åˆ—å·¥ä½œæ˜¯åœ¨å¾®è°ƒæœŸé—´ä¿®å‰ªé¢„è®­ç»ƒæ¨¡å‹çš„å‚æ•°ã€‚æ­¤ç±»æ–¹æ³•ä½¿ç”¨ä¸åŒçš„æ ‡å‡†æ¥ä¿®å‰ªæƒé‡ï¼Œä¾‹å¦‚åŸºäºå…³äºæƒé‡é‡è¦æ€§çš„é›¶çº§æˆ–ä¸€é˜¶ä¿¡æ¯ï¼ˆSanhç­‰äººï¼Œ2020å¹´ï¼šhttps://papers.nips.cc/paper/2020/file/eae15aabaa768ae4a5993a8a4f4fa6e4-Paper.pdfï¼‰ã€‚ç”±äºå½“å‰ç¡¬ä»¶å¯¹ç¨€ç–æ¶æ„çš„æ”¯æŒæœ‰é™ï¼Œå› æ­¤ç›®å‰æœ€å¥½é‡‡ç”¨ç»“æ„ç¨€ç–çš„æ–¹æ³•ï¼Œå³ï¼Œå°†æ›´æ–°é›†ä¸­åœ¨ä¸€ç»„æœ‰é™çš„å±‚ï¼ŒçŸ©é˜µæˆ–å‘é‡ä¸­ã€‚ä¾‹å¦‚ï¼Œé¢„è®­ç»ƒæ¨¡å‹çš„æœ€åå‡ å±‚å·²è¡¨æ˜åœ¨å¾®è°ƒè¿‡ç¨‹ä¸­ç”¨é€”æœ‰é™ï¼Œå¯ä»¥éšæœºé‡æ–°åˆå§‹åŒ–ï¼ˆTamkinç­‰ï¼Œ2020ï¼šhttps://www.aclweb.org/anthology/2020.findings-emnlp.125/ï¼›Zhangç­‰ï¼Œ2021ï¼šhttps://openreview.net/forum?id=cO1IH43yUFï¼‰ï¼Œç”šè‡³å®Œå…¨åˆ é™¤ï¼ˆChungç­‰ï¼Œ2021ï¼šhttps://openreview.net/forum?id=xpFFI_NtgpWï¼‰ã€‚&lt;/p&gt;&lt;p&gt;Â Â Â Â ä¿®å‰ªæ–¹æ³•ç€é‡äºå‡å°‘ç‰¹å®šäºä»»åŠ¡çš„æ¨¡å‹çš„å‚æ•°æ€»æ•°ï¼Œè€Œå…¶ä»–å¤§å¤šæ•°æ–¹æ³•ç€é‡äºå‡å°‘å¯è®­ç»ƒå‚æ•°çš„æ•°é‡ï¼ŒåŒæ—¶ä¿ç•™ä¸€ä¸ªå‰¯æœ¬ã€‚Î¸ï¼ˆpre-trainedï¼‰ã€‚åä¸€ç§æ–¹æ³•ä¸­çš„æœ€æ–°æ–¹æ³•é€šå¸¸ä¸å®Œå…¨å¾®è°ƒçš„æ€§èƒ½ç›¸å½“ï¼ŒåŒæ—¶åªè®­ç»ƒæ¯ä¸ªä»»åŠ¡æ¨¡å‹å‚æ•°çš„çº¦0.5ï¼…ï¼ˆPfeifferç­‰ï¼Œ2020ï¼šhttps://www.aclweb.org/anthology/2020.emnlp-main.617/Â ;ï¼‰ã€‚&lt;/p&gt;&lt;p&gt;Â Â Â Â è¶Šæ¥è¶Šå¤šçš„è¯æ®è¡¨æ˜ï¼Œå¤§å‹çš„é¢„è®­ç»ƒè¯­è¨€æ¨¡å‹å¯ä»¥å¾ˆå¥½åœ°å‹ç¼©NLPä»»åŠ¡ï¼ˆLiç­‰äººï¼Œ2018å¹´:https://openreview.net/forum?id=ryup8-WCW; Gordonç­‰äººï¼Œ2020å¹´:https://www.aclweb.org/anthology/2020.repl4nlp-1.18/ï¼‰ã€‚è¿™äº›å®è·µè¯æ®ä»¥åŠå®ƒä»¬çš„ä¾¿åˆ©æ€§ï¼Œå¯ç”¨æ€§ï¼ˆPfeifferç­‰äººï¼Œ2020å¹´ï¼šhttps://www.aclweb.org/anthology/2020.emnlp-demos.7/ï¼‰ä»¥åŠæœ€è¿‘çš„ç»éªŒæˆåŠŸä½¿è¿™äº›æ–¹æ³•åœ¨è¿›è¡Œå®éªŒä»¥åŠåœ¨å®é™…ç¯å¢ƒä¸­éƒ½æœ‰æ”¶ç›Šã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;æ–‡æœ¬åˆ°æ–‡æœ¬çš„å¾®è°ƒ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Â Â Â Â è¿ç§»å­¦ä¹ çš„å¦ä¸€ä¸ªå‘å±•æ˜¯ä»è¯¸å¦‚BERTï¼ˆDevlinç­‰ï¼Œ2019ï¼šhttps://www.aclweb.org/anthology/N19-1423/ï¼‰å’ŒRoBERTaï¼ˆLiuç­‰ï¼Œ2019ï¼‰çš„æ©è”½è¯­è¨€æ¨¡å‹å‘è¯¸å¦‚T5ï¼ˆRaffelç­‰ï¼Œ2019ï¼‰çš„è¯­è¨€çš„è‡ªå›å½’æ¨¡å‹çš„è½¬å˜ã€‚GPT-3ï¼ˆBrownç­‰äººï¼Œ2020å¹´ï¼‰ã€‚è™½ç„¶è¿™ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥ç”¨äºä¸ºæ–‡æœ¬åˆ†é…ä¼¼ç„¶åº¦åˆ†æ•°ï¼ˆSalazarç­‰ï¼Œ2020ï¼‰ï¼Œä½†è‡ªå›å½’LMæ¨¡å‹æ›´å®¹æ˜“ä»ä¸­è¿›è¡Œé‡‡æ ·ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œè¢«maskedçš„LMé€šå¸¸ä»…é™äºå¡«ç©ºåœºæ™¯ï¼Œä¾‹å¦‚ï¼ˆPetroniç­‰ï¼Œ2019ï¼‰ã€‚&lt;/p&gt;&lt;p&gt;Â Â Â Â ä½¿ç”¨masked LMè¿›è¡Œå¾®è°ƒçš„æ ‡å‡†æ–¹æ³•æ˜¯ç”¨é’ˆå¯¹ç›®æ ‡ä»»åŠ¡å­¦ä¹ çš„éšæœºåˆå§‹åŒ–çš„ç‰¹å®šäºä»»åŠ¡çš„headæ›¿æ¢ç”¨äºMLMçš„è¾“å‡ºå±‚ï¼ˆDevlinç­‰äººï¼Œ2019å¹´ï¼šhttps://www.aclweb.org/anthology/N19-1423/ï¼‰ã€‚æˆ–è€…ï¼Œå¯ä»¥é€šè¿‡ä»¥å…‹éš†çš„æ–¹å¼å°†ä»»åŠ¡é‡é“¸ä¸ºMLMï¼Œæ¥é‡æ–°ä½¿ç”¨ç»è¿‡é¢„è®­ç»ƒçš„æ¨¡å‹çš„è¾“å‡ºå±‚ï¼ˆTalmorç­‰äººï¼Œ2020ï¼šhttps://www.aclweb.org/anthology/2020.tacl-1.48/ï¼›Schickå’ŒSchÃ¼tzeï¼Œ2021ï¼šhttps://arxiv.org/abs/2001.07676ï¼‰ã€‚ç±»ä¼¼åœ°ï¼Œè‡ªå›å½’LMé€šå¸¸ä»¥æ–‡æœ¬åˆ°æ–‡æœ¬æ ¼å¼æŠ•å°„ç›®æ ‡ä»»åŠ¡ï¼ˆMcCannç­‰ï¼Œ2018 ï¼šhttps://arxiv.org/abs/1806.08730; Raffelç­‰ï¼Œ2020ï¼šhttps://jmlr.org/papers/v21/20-074.html ; Paoliniç­‰ï¼Œ2021ï¼šhttps://openreview.net/forum?id=US-TP-xnXIï¼‰ã€‚åœ¨è¿™ä¸¤ç§åœºæ™¯ä¸­ï¼Œè¿™äº›æ¨¡å‹èƒ½å¤Ÿä»å…¶æ‰€æœ‰é¢„å…ˆè®­ç»ƒçš„çŸ¥è¯†ä¸­å—ç›Šï¼Œå¹¶ä¸”æ— éœ€ä»å¤´å¼€å§‹å­¦ä¹ ä»»ä½•æ–°å‚æ•°ï¼Œä»è€Œæé«˜äº†æ ·æœ¬æ•ˆç‡ã€‚&lt;/p&gt;&lt;p&gt;Â Â Â Â åœ¨æç«¯æƒ…å†µä¸‹ï¼Œå¦‚æœä¸å¯¹å‚æ•°è¿›è¡Œå¾®è°ƒï¼Œåˆ™æ ¹æ®é¢„è®­ç»ƒç›®æ ‡æ¥æ„æ¶ç›®æ ‡ä»»åŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ç‰¹å®šäºä»»åŠ¡çš„æç¤ºå’Œå°‘é‡ä»»åŠ¡æ ·æœ¬æ¥å®ç°é›¶é•œå¤´æˆ–å°‘é•œå¤´å­¦ä¹ ï¼ˆBrownç­‰äººï¼Œ2020ï¼šhttps://papers.nips.cc/paper/2020/file/1457c0d6bfcb4967418bfb8ac142f64a-Paper.pdfï¼‰ã€‚ä½†æ˜¯ï¼Œå°½ç®¡å¯ä»¥è¿›è¡Œè¿™æ ·çš„å°‘é‡å­¦ä¹ ï¼Œä½†è¿™å¹¶ä¸æ˜¯ä½¿ç”¨è¿™ç§æ¨¡å‹çš„æœ€æœ‰æ•ˆæ–¹æ³•ï¼ˆSchickå’ŒSchÃ¼tzeï¼Œ2020å¹´ï¼šhttps://arxiv.org/abs/2009.07118ï¼›æœ‰å…³ç®€è¦æ¦‚è¿°ï¼Œè¯·å‚é˜…æ­¤æ–‡ç« ï¼‰ã€‚æ²¡æœ‰æ›´æ–°çš„å­¦ä¹ éœ€è¦ä¸€ä¸ªå·¨å¤§çš„æ¨¡å‹ï¼Œå› ä¸ºè¯¥æ¨¡å‹éœ€è¦å®Œå…¨ä¾é å…¶ç°æœ‰çŸ¥è¯†ã€‚è¯¥æ¨¡å‹å¯ç”¨çš„ä¿¡æ¯é‡ä¹Ÿå—åˆ°å…¶ä¸Šä¸‹æ–‡çª—å£çš„é™åˆ¶ï¼Œå¹¶ä¸”æ˜¾ç¤ºæ¨¡å‹çš„æç¤ºéœ€è¦ä»”ç»†è®¾è®¡ã€‚&lt;/p&gt;&lt;p&gt;Â Â Â Â æ£€ç´¢å¢å¼ºï¼ˆæœ‰å…³æ¦‚è¿°ï¼Œè¯·å‚é˜…æœ¬æ–‡ï¼šhttps://ruder.io/research-highlights-2020/#2-retrieval-augmentationï¼‰å¯ç”¨äºå‡è½»å¤–éƒ¨çŸ¥è¯†çš„å­˜å‚¨è´Ÿæ‹…ï¼Œè€Œç¬¦å·æ–¹æ³•å¯ç”¨äºæ•™æˆç±»ä¼¼äºä»»åŠ¡ç‰¹å®šçš„æ¨¡å‹è§„åˆ™ï¼ˆAwasthiç­‰äººï¼Œ2020å¹´ï¼šhttps://openreview.net/forum?id=SkeuexBtDrï¼‰ã€‚é¢„å…ˆè®­ç»ƒçš„æ¨¡å‹ä¹Ÿå°†å˜å¾—æ›´å¤§ï¼Œæ›´å¼ºå¤§ï¼Œå¹¶ä¸”å¯èƒ½ä¼šè¿›è¡Œè¡Œä¸ºä¸Šçš„å¾®è°ƒï¼Œä»¥ä½¿å…¶åœ¨é›¶æ ·æœ¬åœºæ™¯ä¸‹è¡¨ç°å‡ºè‰²ã€‚ä½†æ˜¯ï¼Œå¦‚æœä¸è¿›è¡Œå¾®è°ƒï¼Œæ¨¡å‹æœ€ç»ˆé€‚åº”æ–°ä»»åŠ¡çš„èƒ½åŠ›å°†å—åˆ°é™åˆ¶ã€‚&lt;/p&gt;&lt;p&gt;Â Â Â Â å› æ­¤ï¼Œå¯¹äºå¤§å¤šæ•°å®é™…åœºæ™¯è€Œè¨€ï¼Œæœ€å¥½çš„å‰è¿›è·¯å¾„æ— ç–‘æ˜¯ä½¿ç”¨å‰é¢å„èŠ‚ä¸­æè¿°çš„æ–¹æ³•å¯¹æ¨¡å‹å‚æ•°çš„å…¨éƒ¨æˆ–å­é›†è¿›è¡Œå¾®è°ƒã€‚Â æ­¤å¤–ï¼Œæˆ‘ä»¬å°†è¶Šæ¥è¶Šå¤šåœ°çœ‹åˆ°é¢„è®­ç»ƒæ¨¡å‹çš„ç”Ÿæˆèƒ½åŠ›ã€‚è™½ç„¶å½“å‰çš„æ–¹æ³•é€šå¸¸é›†ä¸­äºä¿®æ”¹æ¨¡å‹çš„è‡ªç„¶è¯­è¨€è¾“å…¥ï¼Œä¾‹å¦‚é€šè¿‡è‡ªåŠ¨æç¤ºè®¾è®¡ï¼ˆSchickå’ŒSchÃ¼tzeï¼Œ2020ï¼šhttps://arxiv.org/abs/2009.07118ï¼‰ï¼Œä½†è¿™æ˜¯è°ƒèŠ‚æ­¤ç±»è‡ªç„¶è¾“å‡ºçš„æœ€æœ‰æ•ˆæ–¹æ³•ã€‚æ¨¡å‹å¯èƒ½ä¼šç›´æ¥ä½œç”¨äºå…¶éšè—çš„è¡¨ç¤ºä¸Šï¼ˆDathathriç­‰äººï¼Œ2020ï¼šhttps://openreview.net/forum?id=H1edEyBKDSï¼›è¯·å‚é˜…Lillian Wengçš„æ–‡ç« Â ä»¥äº†è§£å¯æ§æ–‡æœ¬ç”Ÿæˆæ–¹æ³•çš„æ¦‚è¿°ï¼šhttps://lilianweng.github.io/lil-log/2021/01/02/controllable-neural-text-generation.htmlï¼‰ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;å‡è½»å¾®è°ƒçš„ä¸ç¨³å®šæ€§&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Â Â Â Â å¾®è°ƒé¢„è®­ç»ƒæ¨¡å‹çš„ä¸€ä¸ªå®é™…é—®é¢˜æ˜¯ï¼Œä¸åŒè®­ç»ƒä¹‹é—´çš„æ€§èƒ½å¯èƒ½ä¼šå‘ç”Ÿå·¨å¤§å˜åŒ–ï¼Œå°¤å…¶æ˜¯åœ¨å°å‹æ•°æ®é›†ä¸Šï¼ˆPhangç­‰äººï¼Œ2018ï¼šhttps://arxiv.org/abs/1811.01088ï¼‰ã€‚Dodgeç­‰äººï¼ˆ2020å¹´ï¼šhttps://arxiv.org/abs/2002.06305ï¼‰å‘ç°ï¼Œè¾“å‡ºå±‚çš„æƒé‡åˆå§‹åŒ–å’Œè®­ç»ƒæ•°æ®çš„é¡ºåºéƒ½ä¼šå¯¼è‡´æ€§èƒ½å˜åŒ–ã€‚ç”±äºä¸ç¨³å®šé€šå¸¸åœ¨è®­ç»ƒçš„æ—©æœŸå°±å¾ˆæ˜æ˜¾ï¼Œå› æ­¤ä»–ä»¬å»ºè®®åœ¨è®­ç»ƒ20-30ï¼…ä¹‹åå°½æ—©åœæ­¢æœ€æ²¡æœ‰å¸Œæœ›çš„è®­ç»ƒã€‚Mosbachç­‰ï¼ˆ2021ï¼šhttps://openreview.net/forum?id=nzpLWnVAyahï¼‰å¦å¤–å»ºè®®åœ¨è°ƒæ•´BERTæ—¶ä½¿ç”¨è¾ƒå°çš„å­¦ä¹ ç‡å¹¶å¢åŠ epochæ•°ã€‚&lt;/p&gt;&lt;p&gt;Â Â Â Â æœ€è¿‘çš„è®¸å¤šæ–¹æ³•è¯•å›¾é€šè¿‡ä¾é åŸºäºå¯¹æŠ—æˆ–ä¿¡ä»»åŒºåŸŸçš„æ–¹æ³•æ¥å‡è½»å¾®è°ƒè¿‡ç¨‹ä¸­çš„ä¸ç¨³å®šæ€§ï¼ˆZhuç­‰äººï¼Œ2019ï¼šhttps://openreview.net/forum?id=BygzbyHFvBï¼›Jiangç­‰äººï¼Œ2020ï¼šhttps://www.aclweb.org/anthology/2020.acl-main.197/ï¼›Aghajanyanç­‰äººï¼Œ2021ï¼šhttps://openreview.net/forum?id=OQ08SN70M1Vï¼‰ã€‚æ­¤ç±»æ–¹æ³•é€šå¸¸ä½¿ç”¨é™åˆ¶æ›´æ–°æ­¥éª¤ä¹‹é—´å·®å¼‚çš„æ­£åˆ™åŒ–é¡¹æ¥å¢åŠ å¾®è°ƒæŸè€—ã€‚&lt;/p&gt;&lt;p&gt;Â Â Â Â æ ¹æ®ä¸Šä¸€èŠ‚çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥æå‡ºå¦ä¸€ç§å»ºè®®ä»¥æœ€å°åŒ–å¾®è°ƒè¿‡ç¨‹ä¸­çš„ä¸ç¨³å®šæ€§ï¼šé€šè¿‡å°†ç›®æ ‡ä»»åŠ¡ä»¥LMçš„å½¢å¼è¿›è¡Œæ¡†æ¶æˆ–ä½¿ç”¨è¡Œä¸ºå¾®è°ƒï¼Œé¿å…åœ¨å°å‹æ•°æ®é›†çš„ç›®æ ‡ä»»åŠ¡ä¸Šä½¿ç”¨éšæœºåˆå§‹åŒ–çš„è¾“å‡ºå±‚åœ¨ç‰¹å®šäºä»»åŠ¡çš„å¾®è°ƒä¹‹å‰å¯¹è¾“å‡ºå±‚è¿›è¡Œå¾®è°ƒã€‚å› æ­¤ï¼Œæ–‡æœ¬åˆ°æ–‡æœ¬æ¨¡å‹å¯¹äºåœ¨å°å‹æ•°æ®é›†ä¸Šè¿›è¡Œå¾®è°ƒæ›´ä¸ºå¥å£®ï¼Œä½†å®ƒä»¬åœ¨â€œå°‘æ ·æœ¬â€åœºæ™¯ä¸­ä¼šé‡åˆ°ä¸ç¨³å®šæ€§ï¼Œå¹¶ä¸”å¯¹å³æ—¶å’Œå°‘æ ·æœ¬å¾ˆæ•æ„Ÿï¼ˆZhaoç­‰äººï¼Œ2021å¹´ï¼šhttps://arxiv.org/abs/2102.09690ï¼‰ã€‚&lt;/p&gt;&lt;p&gt;Â Â Â Â æ€»ä½“è€Œè¨€ï¼Œéšç€æ¨¡å‹è¶Šæ¥è¶Šå¤šåœ°ç”¨äºå…·æœ‰è¾ƒå°‘æ ·æœ¬çš„å…·æœ‰æŒ‘æˆ˜æ€§çš„ä»»åŠ¡ï¼Œå› æ­¤å¼€å‘å¯¹å¯èƒ½çš„å˜åŒ–å…·æœ‰é²æ£’æ€§å¹¶ä¸”å¯ä»¥å¯é åœ°è¿›è¡Œå¾®è°ƒçš„æ–¹æ³•è‡³å…³é‡è¦ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>