<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>1a25341afebd2cdaff9a9647dc69fd17</guid>
<title>è®¤çŸ¥ç¯‡ï¼šCQRS æ¶æ„æ¨¡å¼çš„æœ¬è´¨</title>
<link>https://toutiao.io/k/7x40gqk</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;preview&quot;&gt;&lt;p&gt;&lt;strong&gt;ä½œè€…ï¼šäº¬ä¸œç§‘æŠ€ å€ªæ–°æ˜&lt;/strong&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;CQRSåªæ˜¯ä¸€ç§éå¸¸ç®€å•çš„æ¨¡å¼ï¼ˆpatternï¼‰ï¼ŒCQRSæœ¬èº«å¹¶ä¸æ˜¯ä¸€ç§æ¶æ„é£æ ¼ï¼Œå’Œæœ€ç»ˆä¸€è‡´æ€§/æ¶ˆæ¯/è¯»å†™åˆ†ç¦»/äº‹ä»¶æº¯æº/DDDç­‰æ²¡æœ‰å¿…ç„¶çš„è”ç³»ï¼Œå®ƒæœ€å¤§ä¼˜åŠ¿æ˜¯ç»™æˆ‘ä»¬å¸¦æ¥æ›´å¤šçš„æ¶æ„å±æ€§é€‰æ‹©&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2&gt;&lt;strong&gt;1 CQRS æœ¬è´¨&lt;/strong&gt;&lt;/h2&gt;

&lt;h3&gt;&lt;strong&gt;1.1 CQSï¼šå‘½ä»¤å’ŒæŸ¥è¯¢åˆ†ç¦»&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;å‘½ä»¤å’ŒæŸ¥è¯¢åˆ†ç¦»ï¼ŒCommand and Query Segregationï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯åœ¨ä»»ä½•ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•å¯ä»¥åˆ’åˆ†ä¸ºä¸¤ç±»&lt;/p&gt;

&lt;p&gt;â€¢æŸ¥è¯¢ï¼šè·å–æ•°æ®ï¼Œè¿”å›æŸ¥è¯¢æ•°æ®ï¼Œä½†ä¸æ”¹å˜æ•°æ®çŠ¶æ€&lt;/p&gt;

&lt;p&gt;â€¢å‘½ä»¤ï¼šæ”¹å˜æ•°æ®çŠ¶æ€ï¼Œä¸è¿”å›ä»»ä½•æ•°æ®&lt;/p&gt;

&lt;p&gt;åŸºäºCQSçš„æ€æƒ³ï¼Œä»»ä½•ä¸€ä¸ªæ–¹æ³•éƒ½å¯ä»¥æ‹†åˆ†ä¸ºå‘½ä»¤å’ŒæŸ¥è¯¢ä¸¤éƒ¨åˆ†ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;private int origin = 0;
private int add(int value)
{
    origin += value;
    return origin;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;ä¸Šè¿°æ–¹æ³•æ—¢æ”¹å˜äº†æ•°æ®ï¼Œåˆè¿”å›äº†æ•°æ®çŠ¶æ€ï¼Œå¦‚æœæŒ‰ç…§CQSçš„æ€æƒ³ï¼Œåˆ™è¯¥æ–¹æ³•å¯ä»¥æ‹†æˆCommandå’ŒQueryä¸¤éƒ¨åˆ†ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;private void add(int value)
{
    origin += value;
}
private int queryValue()
{
    return origin;
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;æ˜¯å¦ä¸¥æ ¼éµå¾ªä¸Šè¿°çº¦å®šå­˜åœ¨äº‰è®®ï¼Œå¯¹äºå‘½ä»¤ä¾§æ˜¯å¦è¿”å›æ•°æ®å®é™…ä¸šåŠ¡è¯‰æ±‚ä¸­å¹¶ä¸ä¸€å®šèƒ½å¤Ÿå®Œå…¨ç»Ÿä¸€ã€‚æ¯”å¦‚ï¼š&lt;/p&gt;

&lt;p&gt;â€¢&quot;&lt;strong&gt;å‡ºæ ˆ&lt;/strong&gt;&quot; æ“ä½œåŒæ—¶æ”¹å˜æ ˆçŠ¶æ€å’Œè¿”å›æ•°æ®&lt;/p&gt;

&lt;p&gt;â€¢æŸäº›ä¸šåŠ¡åœºæ™¯ä¸‹å¯èƒ½ä¼šæœ‰è¿”å›ä¸šåŠ¡ä¸»é”®çš„è¯‰æ±‚ï¼Œæ¯”å¦‚ä¸‹å•æ“ä½œè¿”å›è®¢å•å·&lt;/p&gt;

&lt;h3&gt;&lt;strong&gt;1.2 CQRSï¼šå‘½ä»¤å’ŒæŸ¥è¯¢èŒè´£åˆ†ç¦»&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;Command and Query &lt;strong&gt;Responsibility&lt;/strong&gt; Segregationï¼Œå³å‘½ä»¤æŸ¥è¯¢èŒè´£åˆ†ç¦»ï¼Œç”±Greg Youngæå‡º ã€‚CQRSåœ¨CQSåŸºç¡€ä¹‹ä¸Šï¼Œ&lt;strong&gt;å°†åˆ†ç¦»çš„çº§åˆ«ä»ä»£ç æ–¹æ³•çº§åˆ«æ‰©å±•åˆ°å¯¹è±¡çº§åˆ«&lt;/strong&gt;ã€‚CQRS æ¨¡å¼çš„åº”ç”¨éå¸¸ç®€å•ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2022-08-21-19-17ag9Dd17aYM17Apwq9.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;å‡è®¾æˆ‘ä»¬çš„æœåŠ¡ä¸º OrderServiceï¼Œåœ¨éCQRSæ¨¡å¼ä¸‹åŒæ—¶åŒ…å«äº†æŸ¥è¯¢å’Œæ›´æ–°æœåŠ¡æ¥å£ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;public class OrderService {
   //  æ ¹æ®idæŸ¥è¯¢è®¢å•
    Order getOrder(OrderId)
    // æŸ¥è¯¢å·²æ”¯ä»˜è®¢å•
    List&amp;lt;Order&amp;gt; getPayedOrders()
    // ä¸‹å•
    void placeOrder(Order)
    // å–æ¶ˆè®¢å•
    void cancelOrder(OrderId) 
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;åº”ç”¨CQRSæ¨¡å¼ä¹‹åçš„OrderServiceè¢«æ‹†åˆ†æˆäº†ä¸¤ä¸ªæ¥å£ï¼Œåˆ†åˆ«æ‰¿æ‹…æŸ¥è¯¢å’Œå†™èŒè´£ï¼š&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/**
å‘½ä»¤ä¾§æœåŠ¡
*/
public class OrderService {
    void placeOrder(PlaceOrderCommand command)
    void cancelOrder(CancelOrderCommand command)
}
/**
 æŸ¥è¯¢æœåŠ¡
*/
public class OrderQueryService{
    Order GetOrder(OrderId)
    List&amp;lt;Order&amp;gt; getPayedOrders()
}
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;strong&gt;ä»¥ä¸Šè¿™ç§ç®€å•çš„åˆ†ç¦»å°±æ˜¯CQRSæ¨¡å¼çš„å…¨éƒ¨äº†ï¼Œæ˜¯ä¸æ˜¯éå¸¸ç®€å•ï¼Ÿç¡®å®ï¼Œå•çº¯çš„çœ‹ï¼ŒCQRSçš„ç¡®å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;CQRSæœ€å¤§ä¼˜åŠ¿å°±æ˜¯&lt;strong&gt;åŸºäºè¿™ç§èŒè´£åˆ†ç¦»èƒ½å¸¦ç»™æˆ‘ä»¬æ›´å¤šçš„æ¶æ„å±æ€§é€‰æ‹©&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;â€¢â€œæŸ¥è¯¢â€ å’Œ â€œå‘½ä»¤â€ ä¸¤ä¾§è¿›è¡Œç‹¬ç«‹éƒ¨ç½²ä»¥è·å–æ›´å¥½çš„ä¼¸ç¼©æ€§&lt;/p&gt;

&lt;p&gt;â€¢â€œæŸ¥è¯¢â€ å’Œ â€œå‘½ä»¤â€ ä¸¤ä¾§ç‹¬ç«‹æ¶æ„è®¾è®¡&lt;/p&gt;

&lt;p&gt;â€¢â€œæŸ¥è¯¢â€ å’Œ â€œå‘½ä»¤â€ä¸¤ä¾§è¿›è¡Œç‹¬ç«‹æ•°æ®æ¨¡å‹è®¾è®¡&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;åŸºäºCQRSï¼Œæˆ‘ä»¬å¯ä»¥è¡ç”Ÿå‡ºæ›´å¤šçš„æ¶æ„å±æ€§ï¼Œç»“åˆå®é™…çš„ä¸šåŠ¡åœºæ™¯ï¼Œè¿›è¡Œå·®å¼‚åŒ–çš„æ¶æ„è®¾è®¡ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å›¢é˜Ÿå¼•å…¥CQRSæ¨¡å¼ä¹‹åï¼Œå¾€å¾€ä¸ä»…ä»…æ˜¯ç®€å•çš„åœ¨ç±»çš„èŒè´£å±‚é¢å¯¹è¯»å†™è¿›è¡Œåˆ†ç¦»ï¼Œä¸€èˆ¬ä¼šé‡‡ç”¨æ›´ä¸ºå¤æ‚çš„åº”ç”¨æ¶æ„é£æ ¼ï¼Œå¦‚ä¸‹æ˜¯å…¸å‹çš„CQRSæ¶æ„é£æ ¼ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2022-08-21-19-18am0Ih718ZX80NWXB.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;â€¢å‘½ä»¤ä¾§ï¼šå‘½ä»¤ä¾§å¼•å…¥å‘½ä»¤æ€»çº¿ä»¥æ”¯æŒå¯¹ä¸åŒå‘½ä»¤çš„çµæ´»è·¯ç”±ï¼›çªå‡ºé¢†åŸŸæ¨¡å‹çš„åº”ç”¨&lt;/p&gt;

&lt;p&gt;â€¢æŸ¥è¯¢ä¾§ï¼šå¼•å…¥æŸ¥è¯¢æ€»çº¿å¯¹æŸ¥è¯¢è¯·æ±‚è¿›è¡Œè·¯ç”±ï¼›è¯·æ±‚é“¾è·¯ä¸€èˆ¬ç›´æ¥è¿æ¥åˆ°å­˜å‚¨å±‚ï¼Œå®ç°ä¸åŒçš„å®šåˆ¶åŒ–æŸ¥è¯¢éœ€æ±‚&lt;/p&gt;

&lt;h2&gt;&lt;strong&gt;2 CQRSè¿·æ€&lt;/strong&gt;&lt;/h2&gt;

&lt;h3&gt;&lt;strong&gt;2.1 æ•°æ®æ¨¡å‹æ˜¯å¦è¦åˆ†ç¦»&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;CQRSå¼ºè°ƒå‘½ä»¤å’ŒæŸ¥è¯¢çš„èŒè´£åˆ†ç¦»ï¼Œä½†åœ¨åº•å±‚çš„æ•°æ®æ¨¡å‹å±‚é¢ï¼ŒCQRSå¹¶æ²¡æœ‰è¿›è¡Œå¼ºåˆ¶é™å®šï¼Œå³&lt;strong&gt;é‡‡ç”¨CQRSæ¨¡å¼å¹¶æ²¡æœ‰è¦æ±‚å¿…é¡»è¦è¿›è¡Œæ•°æ®æ¨¡å‹çš„åˆ†ç¦»&lt;/strong&gt;ã€‚æ˜¯å¦è¦è¿›è¡Œæ¨¡å‹åˆ†ç¦»å¼€å‘äººå‘˜éœ€è¦å…·ä½“æƒ…å†µå…·ä½“åˆ†æã€‚&lt;/p&gt;

&lt;p&gt;â€¢åˆ†ç¦»æ¨¡å‹ï¼šæŸ¥è¯¢ä¾§å’Œå†™ä¾§æ¨¡å‹ä¸äº’ç›¸å¹²æ‰°ï¼Œå„è‡ªåœ¨åº”ç”¨å±‚çš„å®ç°å¤æ‚åº¦æ¯”è¾ƒä½ã€‚ä½†ç”±äºæ¨¡å‹çš„åˆ†ç¦»ï¼Œå‘½ä»¤ä¾§å’ŒæŸ¥è¯¢ä¾§çš„æ•°æ®ä¸€è‡´æ€§éœ€è¦çº³å…¥è€ƒè™‘èŒƒå›´&lt;/p&gt;

&lt;p&gt;â€¢ä¸åˆ†ç¦»ï¼šä¸éœ€è¦è€ƒè™‘æ•°æ®ä¸€è‡´æ€§é—®é¢˜ï¼Œä½†ç”±äºæŸ¥è¯¢ä¾§å’Œå†™ä¾§å¯¹æ¨¡å‹çš„è¯‰æ±‚å¯èƒ½ä¸ä¸€è‡´ï¼Œæ¨¡å‹çš„è®¾è®¡å¾€å¾€éœ€è¦æŠ˜è¡·è€ƒè™‘ã€‚&lt;/p&gt;

&lt;h3&gt;&lt;strong&gt;2.2 CQRS å’Œ æ¶ˆæ¯æ¨¡å¼&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;CQRSå’Œæ¶ˆæ¯æ¨¡å¼æ²¡æœ‰å¿…ç„¶è”ç³»ï¼Œè½åœ°CQRS å¹¶ä¸ä¸€å®šéœ€è¦ä½¿ç”¨æ¶ˆæ¯æ¨¡å¼&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2022-08-21-19-20SEBb7n7zWULZhTM.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœæˆ‘ä»¬é‡‡ç”¨äº†CQRSæ¨¡å¼ï¼Œä½†æ˜¯å‘½ä»¤å’ŒæŸ¥è¯¢ä¸¤ä¾§åº•å±‚æ‰€ä¾èµ–çš„æ•°æ®æ¨¡å‹å¹¶æœªåˆ†ç¦»ï¼Œè€Œæ˜¯åŸºäºå…±äº«çš„æ•°æ®å­˜å‚¨å’Œæ•°æ®æ¨¡å‹ï¼Œå‘½ä»¤å’ŒæŸ¥è¯¢ä¹‹é—´ä¸éœ€è¦é¢å¤–çš„äº¤äº’ï¼Œå‘½ä»¤ä¾§çš„æ•°æ®æ›´æ–°å¯¹æŸ¥è¯¢ä¾§å®æ—¶å¯è§ã€‚åœ¨è¿™ç§æ¶æ„æ¨¡å¼ä¸‹ï¼Œä¸¤ä¾§åŸºäºå…±äº«çš„æ•°æ®å·²ç»å¤©ç„¶çš„é›†æˆåœ¨ä¸€èµ·ï¼Œä¸éœ€è¦é¢å¤–æœºåˆ¶è¿›è¡Œé€šä¿¡ï¼Œè‡ªç„¶ä¹Ÿæ— éœ€å¼•å…¥æ¶ˆæ¯äº†ã€‚å¦‚æœæˆ‘ä»¬é‡‡ç”¨CQRSæ¨¡å¼ï¼Œå¹¶ä¸”å‘½ä»¤å’ŒæŸ¥è¯¢ä¸¤ä¾§è¿›è¡Œäº†æ•°æ®æ¨¡å‹çš„åˆ†ç¦»ï¼ŒäºŒè€…å„è‡ªä¾èµ–ç‹¬ç«‹çš„æ•°æ®æ¨¡å‹ã€‚åŒæ—¶ï¼Œæ•°æ®å­˜å‚¨ä¹Ÿåˆ†å¼€éƒ¨ç½²ã€‚å‘½ä»¤ä¾§è´Ÿè´£æ•°æ®çš„æ›´æ–°ï¼Œè€ŒæŸ¥è¯¢ä¾§åªè´Ÿè´£æ•°æ®çš„æŸ¥è¯¢ï¼Œå¦‚ä½•å°†æ•°æ®çš„æ›´æ–°åŠæ—¶åŒæ­¥åˆ°æŸ¥è¯¢ä¾§æ˜¯éœ€è¦è§£å†³çš„é—®é¢˜ã€‚åœ¨è¿™ç§æ¶æ„æ¨¡å¼ä¸‹ï¼Œä½¿ç”¨æ¶ˆæ¯æ¨¡å¼ä½œä¸ºä¸¤ä¾§çš„é€šä¿¡æœºåˆ¶æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œå½“ç„¶ï¼Œè¿™å¹¶ä¸æ˜¯å”¯ä¸€çš„é€‰é¡¹ã€‚&lt;/p&gt;

&lt;h3&gt;&lt;strong&gt;2.3 CQRS å’Œ ESï¼ˆEvent Sourcing, äº‹ä»¶æº¯æº)&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;ES å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°çš„æ¦‚å¿µï¼Œåœ¨æœ€æ—©çš„é‡‘èç³»ç»Ÿä¸­å°±å·²ç»åº”ç”¨ã€‚è¦äº†è§£ESï¼Œæˆ‘ä»¬éœ€è¦å…ˆçœ‹çœ‹ä¼ ç»Ÿçš„æ•°æ®å­˜å‚¨ã€‚åœ¨ä¼ ç»Ÿåº”ç”¨ä¸­ï¼Œæ•°æ®åº“ä¾‹å¦‚MySQLï¼ˆå‡è®¾å­˜å‚¨ä»‹è´¨æ˜¯æ•°æ®åº“ï¼Œï¼‰ä¸­å­˜å‚¨çš„å§‹ç»ˆæ˜¯æ•°æ®çš„æœ€æ–°çš„çŠ¶æ€ã€‚ä¾‹å¦‚æˆ‘ä»¬å¯¹æŸæ¡ç”¨æˆ·çš„ä¿¡æ¯è¿›è¡Œäº†å¤šæ¬¡çš„ä¿®æ”¹æˆ–ç¼–è¾‘ï¼Œç„¶åä¿å­˜å°†æ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ã€‚æ— è®ºä½•æ—¶ï¼Œæ•°æ®åº“ä¸­éƒ½ä¼šè®°å½•æœ€åçš„ã€æœ€æ–°çš„ç”¨æˆ·çŠ¶æ€ã€‚æˆ‘ä»¬åªè¦æ ¹æ®idæˆ–å…¶ä»–ä¿¡æ¯æŸ¥è¯¢æ•°æ®åº“ä¸­ç›¸åº”çš„è®°å½•å°±èƒ½è·å–è¯¥ç”¨æˆ·çš„æœ€æ–°ä¿¡æ¯ã€‚è¿™æ˜¯åº”ç”¨ä¸­å…¸å‹çš„æ•°æ®å­˜å‚¨ç‰¹ç‚¹ã€‚&lt;/p&gt;

&lt;p&gt;å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºç‰¹å®šçš„æ•°æ®æ¨¡å‹è®¾è®¡ä»¥ä¿å­˜æ•°æ®çš„æ›´æ”¹è®°å½•ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ç§æ•°æ®å­˜å‚¨æ¨¡å¼çš„ç‰¹ç‚¹æ˜¯ç®€å•ï¼Œä¸éœ€è¦é¢å¤–çš„ç»´æŠ¤å¤æ‚çš„è®¾è®¡ï¼Œæˆ‘ä»¬èƒ½å¤Ÿéå¸¸å®¹æ˜“çš„è·å–æœ€æ–°çš„ç”¨æˆ·ä¿¡æ¯ã€‚ä½†æ˜¯ä¸å¹¸çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸¢å¤±äº†å†å²ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç”¨æˆ·çš„æ„å›¾ä¿¡æ¯ã€‚è€Œè¿™äº›ä¿¡æ¯åˆ™æœ‰åŠ©äºæˆ‘ä»¬è¿›è¡Œæ•°æ®å›æ»šã€ç”¨æˆ·è¡Œä¸ºåˆ†æä»¥åŠå¼€å‘è¿‡ç¨‹ä¸­çš„è°ƒè¯•ç­‰ç­‰ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3.cn-north-1.jdcloud-oss.com/shendengbucket1/2022-08-21-19-28jzAfoGmpPoCC28Q11.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;åœ¨ESæ¨¡å¼ä¸‹ï¼Œæ•°æ®åº“ä¸­å­˜å‚¨çš„ä¸åœ¨æ˜¯æ•°æ®æœ€æ–°çŠ¶æ€ï¼Œè€Œæ˜¯æ•°æ®çš„å˜æ›´è®°å½•ï¼Œæ›´å®˜æ–¹çš„è¯´æ³•æ˜¯ â€œäº‹ä»¶ï¼ˆEventï¼‰â€ã€‚æ•°æ®åº“ä¸­å­˜å‚¨çš„æ•°æ®å˜åŒ–çš„äº‹ä»¶æµã€‚æˆ‘ä»¬åŸºäºäº‹ä»¶æµå¯ä»¥å¯¹æœ€æ–°çŠ¶æ€è¿›è¡Œé‡å»ºï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä¾¿æ·çš„é‡ç°ä»»ä½•å†å²èŠ‚ç‚¹æ•°æ®ã€‚ESéœ€è¦è§£å†³å¤§é‡äº‹ä»¶çš„å­˜å‚¨å’Œé«˜æ•ˆçš„å®ä¾‹é‡å»ºé—®é¢˜ï¼Œåç»­å•ç‹¬çš„æ–‡ç« å†ä»‹ç»ESã€‚&lt;/p&gt;

&lt;h3&gt;&lt;strong&gt;2.4 CQRS å’Œ Eventual Consistencyï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰&lt;/strong&gt;&lt;/h3&gt;

&lt;p&gt;æœ€ç»ˆä¸€è‡´æ€§ä¹Ÿå¸¸å¸¸åœ¨æœåŠ¡ä¹‹é—´å¼•å…¥ï¼Œæœ€ç»ˆä¸€è‡´æ€§çš„ç›®çš„æ˜¯ä¸ºäº†æé«˜æ‰©å±•æ€§å’Œå¯ç”¨æ€§ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;CQRSå’Œæœ€ç»ˆä¸€è‡´æ€§åŒæ ·æ²¡æœ‰å¿…ç„¶çš„è”ç³»&lt;/strong&gt;ã€‚å¾€å¾€é‡‡ç”¨CQRSåï¼ŒæŸ¥è¯¢å’Œå‘½ä»¤ä¸¤ä¾§ä¼šé‡‡ç”¨ç‹¬ç«‹çš„æ•°æ®æ¨¡å‹ï¼Œåœ¨è¿™ç§æ¶æ„æ¨¡å¼ä¸‹ï¼Œå‘½ä»¤ä¾§çš„æ•°æ®å˜åŒ–ååŠæ—¶åŒæ­¥åˆ°æŸ¥è¯¢ä¾§ï¼Œä¸¤ä¾§æ•°æ®å¹¶éå®æ—¶ï¼Œåœ¨ä¸€å®šçš„å»¶æ—¶åä¸¤ä¾§æ•°æ®æœ€ç»ˆè¾¾æˆä¸€è‡´ã€‚&lt;/p&gt;

&lt;h2&gt;&lt;strong&gt;3 ç»“è¯­&lt;/strong&gt;&lt;/h2&gt;

&lt;p&gt;CQRSçš„æœ€å¤§ä¼˜åŠ¿åœ¨äº&lt;strong&gt;é€šè¿‡å°†å‘½ä»¤å’ŒæŸ¥è¯¢çš„èŒè´£åˆ†ç¦»ï¼Œä¸ºæ¶æ„å¸ˆæä¾›äº†æ›´å¤šçš„æ¶æ„å±æ€§é€‰æ‹©&lt;/strong&gt;ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æŸ¥è¯¢ä¾§å’Œå‘½ä»¤ä¾§è¿›è¡Œç‹¬ç«‹çš„æ¶æ„è®¾è®¡ã€‚å¯¹è±¡çº§åˆ«çš„èŒè´£åˆ†ç¦»å°±æ˜¯CQRSçš„å…¨éƒ¨äº†ï¼Œä½†åœ¨å®è·µä¸­æ¶Œç°å‡ºäº†å¾ˆå¤šæ›´ä¸ºçµæ´»ä¹Ÿæ›´ä¸ºå¤æ‚çš„æ¶æ„é£æ ¼ï¼Œæ¯”å¦‚æ€»çº¿çš„å¼•å…¥ã€æ•°æ®æ¨¡å‹çš„åˆ†ç¦»ã€ä¸€è‡´æ€§æŠ¥è¿™ä¸ªç­–ç•¥ã€äº‹ä»¶æº¯æºç­‰ç­‰ã€‚é¢å¤–çš„ç»„ä»¶æˆ–æŠ€æœ¯çš„å¼•å…¥å¿…ç„¶å¯¼è‡´å¤æ‚æ€§å’Œæˆæœ¬ä¸Šå‡ï¼Œè¿™äº›é€‰å‹çš„é‡‡çº³éœ€è¦å›¢é˜Ÿçš„æƒè¡¡ã€‚&lt;/p&gt;
&lt;/div&gt;
  &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>e751c0c908ba24b5df44a18af7f60398</guid>
<title>å†™ä¸ªç®€æ˜“ç‰ˆç§’æ€ç³»ç»Ÿç»ƒç»ƒæ‰‹</title>
<link>https://toutiao.io/k/wx34lhr</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸å†™æ–‡ç« è¿˜æœ‰ç‚¹ä¸è‡ªåœ¨ï¼Œå®Œäº†ğŸ˜‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»Šå¤©æ¥åˆ†äº«ä¸‹è¿™æ®µæ—¶é—´å­¦ä¹ çš„ä¸€ä¸ªç§’æ€é¡¹ç›®ï¼Œé»‘é©¬ç‚¹è¯„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¥½ä¹…æ²¡è·Ÿç€å­¦è¿™äº›ï¼Œæ„Ÿè§‰éå¸¸éå¸¸å¥½ç©ï¼Œåˆæƒ³æ£é¼“ç‚¹é¡¹ç›®ç©ç©äº† å“ˆå“ˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä¹Ÿç®€å•æ­å»ºäº†ä¸€ä¸ªï¼Œç”¨åˆ°äº†è¿™äº›æŠ€æœ¯ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;strong&gt;Springboot2 + Redis7 + Lua + Redisson + MySQL8 + RabbitMQ3.9 + MybatisPlus + Hutool&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­ &lt;strong&gt;Redis&lt;/strong&gt; å’Œ &lt;strong&gt;MySQL&lt;/strong&gt; éƒ½æ˜¯ä¹‹å‰æ­å»ºåœ¨äº‘ç«¯çš„ &lt;strong&gt;K8S&lt;/strong&gt; ä¸Šçš„ ä¸»ä» ç»“æ„ï¼Œç”¨ &lt;strong&gt;Traefik&lt;/strong&gt; åšæ€»ç½‘å…³ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;RabbitMQ&lt;/strong&gt; åˆ™æ˜¯ä¹‹å‰åœ¨æœ¬åœ°è™šæ‹Ÿæœºä¸Šç”¨ docker æ­å»ºçš„ ï¼Œè¿˜æœ‰ &lt;strong&gt;Prometheus&lt;/strong&gt; + Â &lt;strong&gt;Grafana&lt;/strong&gt; ç›‘æ§ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æ€è·¯&lt;span/&gt;&lt;/h3&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6524271844660194&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskMBxAFPnMqs9RaTPibpTiaO8m6Eyls2quJ2tzqI3Oq4099ImC7AuanZvA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1030&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;éšè—ç§’æ€åœ°å€&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªå°±æ˜¯å®ç°ä¸€ä¸ªç”¨æˆ·ä¸€ä¸ªåœ°å€ï¼Œç»™è„šæœ¬å·¥å…·åŠ ç‚¹éš¾åº¦ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ ¹æ®éœ€è¦ç”Ÿæˆè¿™ä¸ª pathï¼Œæ¯”å¦‚ç”¨ md5 æ··æ·†ä¸‹ ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç„¶åæ”¾åˆ° Â Redis ä¸­ Â key ï¼šç§’æ€æ´»åŠ¨ID+â€™pathâ€˜ + ç§’æ€å•†å“ID+ç”¨æˆ·ID , Â  value ï¼špath&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.22022160664819945&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskNo46vwPyWGHN7oJunyundPUsrtqs7icsiaeica0fbk1oCoD2NN6OWPdPA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;722&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çœŸå®çš„ç§’æ€åœ°å€å¦‚ä¸‹&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.10094637223974763&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskl49EY96iafRnjwALiciannuSaNUqmTp2icic54cLfwzShow1sviceFeeVoKw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;317&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;lua è„šæœ¬é¢„æ‰£åº“å­˜&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”¨ lua è„šæœ¬æ¥ä¿è¯è¿™ä¸ªæ“ä½œçš„åŸå­æ€§ï¼Œåˆ¤æ–­ åº“å­˜key å­˜ä¸å­˜åœ¨ï¼Œæ•°é‡å¤Ÿä¸å¤Ÿï¼Œå¤Ÿçš„è¯æ‰§è¡Œæ‰£å‡æ“ä½œ&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6043276661514683&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskXeXrYEAU1YnpObAGGln4icJDGjLjXA6K8jSk28u7WDBpN5ec4ibicSGgw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;647&quot;/&gt;&lt;figcaption&gt;bug&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘è¿™æ ·å†™çš„è„šæœ¬æ˜¯æœ‰é—®é¢˜çš„ï¼Œæ²¡æœ‰è¿›è¡Œ &lt;strong&gt;é‡å¤è®¢å•æ ¡éªŒ&lt;/strong&gt; ï¼Œ ä»¥åŠ set è¿™ä¸ª è®¢å•ä¿¡æ¯ åˆ° redis ä¸­ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ 3 æ­¥æ“ä½œåº”è¯¥æ˜¯åŸå­æ€§çš„ï¼Œ&lt;strong&gt;æ ¡éªŒï¼Œæ‰£å‡ï¼Œè®¾ç½®&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥å³ä¾¿ lua è„šæœ¬èƒ½ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œä½†æ˜¯å¹¶å‘æƒ…å†µä¸‹ä¼šå‡ºç° &lt;strong&gt;å°‘å–&lt;/strong&gt; çš„æƒ…å†µã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.18181818181818182&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskYk2zv65WXbSxGqJrKC00b8QvY37b4HSiaevz9VxONxD3zUg38PjWy2w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;242&quot;/&gt;&lt;figcaption&gt;æ¨¡æ‹ŸåŒä¸ªç”¨æˆ· 50 ä¸ªå¹¶å‘ï¼Œ&lt;span&gt;100ä¸ªåº“å­˜&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5172413793103449&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskwxkt9zXmvUejrPtiaWjJFZt5YbibE5tZJEiaHd5Ytr8DGGOlzI69d8Viaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;406&quot;/&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;br/&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.0268006700167505&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskkxXmop4LfGmKf3Bw2uALcHJYQKMZgNmKxhwGSKsOx2MUpibZLfSibD5A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;597&quot;/&gt;&lt;figcaption&gt;æ”¹æ­£ç‰ˆ&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ”¹æ­£åä¹Ÿå°±æ­£å¸¸äº†ï¼Œä¹‹å‰æˆ‘æ˜¯è€æƒ³ç€ è®¢å•ID çš„ç”Ÿæˆè¦ä» Â &lt;strong&gt;åˆ†å¸ƒå¼ID&lt;/strong&gt; ä¸­è·å–ï¼Œæƒ³å°½é‡è¾ƒå°‘è¿™ä¸ª ç½‘ç»œè¯·æ±‚ çš„ï¼Œä¸€ä¸å°å¿ƒå°±ç–å¿½äº†ã€‚ï¼ˆ&lt;strong&gt;ä»¥åå¾—å…ˆæŠŠ æ ¸å¿ƒæ€è·¯ å†™ä¸‹ï¼Œå†æ€è€ƒä¼˜åŒ–ï¼Œä¸èƒ½è¾¹å†™è¾¹æƒ³ä¼˜åŒ–äº†&lt;/strong&gt;ğŸ·ï¼‰&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;åˆ†å¸ƒå¼ID&lt;/strong&gt; ï¼Œæˆ‘ä¹‹å‰ç ”ç©¶è¿™ä¸ª &lt;strong&gt;ç¾å›¢Leaf&lt;/strong&gt; ä¹Ÿæ˜¯æƒ³ç®€å•æ­å»ºä¸€ä¸ªï¼Œå¥ˆä½•æ€»å–œæ¬¢å·æ‡’ğŸ·ï¼Œè¿™é‡Œæˆ‘æ˜¯ç”¨ Â &lt;strong&gt;Hutool&lt;/strong&gt; çš„ &lt;strong&gt;é›ªèŠ±ç®—æ³•&lt;/strong&gt; ç®€å•ç”Ÿæˆçš„ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.1498371335504886&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskdGFmhDlFRE68ASB5pn52q0lic6JB6hZPpicz2siaqYheoD2fXbhENicCZQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;614&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¿å­˜è®¢å•ä¿¡æ¯åˆ° Redis&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡º &lt;strong&gt;å¤§bug&lt;/strong&gt; ä¹‹å‰ï¼Œæˆ‘ä»¥ä¸ºè¿™é‡Œåªæ˜¯åš &lt;strong&gt;é‡å¤è®¢å•æ ¡éªŒ&lt;/strong&gt; çš„ï¼Œæ²¡æƒ³åˆ°ï¼Œè¿˜æœ‰è¿™ç§æƒ…å†µ ğŸ‘‡&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;MQ æŒ‚äº†&lt;/strong&gt;ï¼Œæ¶ˆæ¯è¿˜æ²¡å‘é€å‡ºå»ï¼Œç”šè‡³ä¸€å¼€å§‹å°±&lt;strong&gt;æ²¡è¿æ¥ä¸Š&lt;/strong&gt;çš„æƒ…å†µã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯”å¦‚ æˆ‘è¿™ä¸ªæœ¬æœºå’Œè™šæ‹Ÿæœº ä¼‘çœ åå¾—é‡å¯ä¸‹ &lt;strong&gt;è™šæ‹Ÿç½‘ç»œvm8&lt;/strong&gt;ï¼Œä¸ç„¶è¿ä¸ä¸Šå»ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.13386524822695037&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskmzmRDJ7QBuwHibHdibQrfVCcgaIQ8P9lpTwfKfNPyjicnfW7VuBIClC2w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1128&quot;/&gt;&lt;figcaption&gt;æ„æ–™ä¹‹å¤–~&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ï¼Œè¿™é‡Œå¾—å†™ä¸ªå°è„šæœ¬ï¼Œå°† è®¢å•ä¿¡æ¯ å‘é€åˆ° MQ ä¸­ï¼Œåœ¨ç´§æ€¥æƒ…å†µä¸‹èƒ½å¿«é€Ÿè¡¥æ•‘ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;åˆ†å¸ƒå¼é”&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›®å‰ç”¨ jvm çº§åˆ«çš„é”å…¶å®å°±è¶³å¤Ÿäº†ï¼Œä½†åé¢ä¸Šé›†ç¾¤è¿˜å¾—æ”¹ä»£ç ï¼Œå¹²è„†ä¸€é¼“ä½œæ°”ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6447688564476886&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskWib8Waic1px4jn2QpqknibN7zVLhYNXzWp4Vwen2rTzmJT4VRUcwJ2wIg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;411&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é”çš„ç²’åº¦ï¼Œä¸èƒ½å¤ªå¤§ï¼Œä¸»è¦é˜²æ­¢ç”¨æˆ·é‡å¤ä¸‹å•ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯”å¦‚&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ç¬¬ä¸€ç‰ˆ é”™è¯¯çš„ lua è„šæœ¬ä¸­ï¼Œå°±ä¼šå‡ºç° &lt;strong&gt;é‡å¤ä¸‹å•&lt;/strong&gt; çš„æƒ…å†µ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œå¤šä¸ªæ¶ˆè´¹è€…çš„æƒ…å†µï¼Œæ­¤æ—¶è°å…ˆæ‹¿åˆ°åˆ†å¸ƒå¼é”ï¼Œè°å°±å¯ä»¥æ¶ˆè´¹è¿™ä¸ªè®¢å•ï¼Œ&lt;strong&gt;é¿å…é‡å¤ä¸‹å•&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5778443113772455&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskE8xibs6gjdtMPbAnfXTWfhvRRC1OibZL8L5pXulqiaBakLicic4LCgET5vg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;334&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šè¿‡åˆ†å¸ƒå¼é”ï¼Œä¿è¯è¿™ä¸ªè®¢å•åªæœ‰ä¸€ä¸ªæ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œå³ä¾¿åœ¨å¤šä¸ªæ¶ˆè´¹è€…æ¨¡å¼ä¸‹ï¼Œä¹Ÿä¸ä¼šå‡ºç° &lt;strong&gt;é‡å¤ä¸‹å•&lt;/strong&gt; çš„æƒ…å†µã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŒæ—¶ï¼Œä¹Ÿå¯ä»¥é˜²æ­¢ä½¿ç”¨ Redis å‡ºç°æ„å¤–ï¼Œå°±åƒä¸Šé¢ &lt;strong&gt;é”™è¯¯ä½¿ç”¨ lua è„šæœ¬çš„æ¡ˆä¾‹&lt;/strong&gt;ï¼Œä»¥åŠ å¯èƒ½å­˜åœ¨çš„ key è¿‡æœŸç­‰é—®é¢˜å¯¼è‡´çš„é‡å¤ä¸‹å•é—®é¢˜ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ç„¶ï¼Œè¿™è¿˜ä¸æ˜¯ &lt;strong&gt;å…œåº•æ–¹æ¡ˆ&lt;/strong&gt; ï¼Œä¸‡ä¸€è¿™ä¸ª &lt;strong&gt;åˆ†å¸ƒå¼é”&lt;/strong&gt; ä¹Ÿå‡ºç°æ„å¤–äº†å‘¢ï¼Œæ‰€ä»¥ä¿é™©èµ·è§ï¼Œè¿˜éœ€è¦ç»™ è®¢å•è¡¨ å»ºç«‹ &lt;strong&gt;å”¯ä¸€ç´¢å¼•&lt;/strong&gt;ï¼ˆç”¨æˆ·id+å•†å“id)ï¼Œé æ•°æ®åº“æœ¬èº«ä¿è¯äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œå¦‚æœä¸ç”¨åˆ†å¸ƒå¼é”ï¼Œé‚£å°±å¾—ä»æ•°æ®åº“å±‚é¢å»ä¿è¯äº†ï¼Œå¾—ç”¨ select â€¦â€¦ for update å¼€å¯ &lt;strong&gt;æ‚²è§‚é”&lt;/strong&gt;ï¼Œé‚£æ•ˆç‡ä¼šè¿›ä¸€æ­¥é™ä½çš„ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;æ³¨æ„ï¼Œè¿™é‡Œä¹Ÿæ˜¯ &lt;strong&gt;ç¼“å­˜å‡»ç©¿&lt;/strong&gt; çš„å¸¸è§è§£å†³æ€è·¯ï¼Œåˆ†å¸ƒå¼é”ï¼ŒåŒé‡æ£€æŸ¥é”æ¨¡å¼ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;äº‹åŠ¡&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘è¿™é‡Œæ˜¯ç®€æ˜“ç‰ˆçš„ï¼Œæ²¡æœ‰æ¶‰åŠåˆ° åˆ†åº“åˆ†è¡¨ï¼Œæ‰€ä»¥ä¹Ÿè°ˆä¸ä¸Šè¿™ä¸ª åˆ†å¸ƒå¼äº‹åŠ¡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œæˆ‘ç”¨çš„ &lt;strong&gt;ç¼–ç¨‹å¼äº‹åŠ¡&lt;/strong&gt; ï¼Œæ¯•ç«Ÿ æ‰£å‡åº“å­˜å’Œä¿å­˜è®¢å• è¦åœ¨ä¸€ä¸ªäº‹åŠ¡é‡Œï¼Œç”¨æ³¨è§£çš„è¯è¿˜å¾—è€ƒè™‘è¿™ä¸ª&lt;strong&gt;å¤±æ•ˆ&lt;/strong&gt;çš„åœºæ™¯ï¼Œè·å–è¿™ä¸ªä»£ç†å¯¹è±¡å»æ‰§è¡Œï¼Œæ²¡æœ‰è¿™ä¸ª &lt;strong&gt;ç¼–ç¨‹å¼äº‹åŠ¡&lt;/strong&gt; æ¥å¾—æ–¹ä¾¿ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5637755102040817&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskTYowORKMd8NuEYZY4mCZe16OWbha0dY1jibY7uvGn5um8aGsIXZ6a6w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;784&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡è®¾ è®¢å•åœ¨è®¢å•åº“ä¸­ï¼Œå•†å“åœ¨å•†å“åº“ä¸­ï¼Œé‚£è¿™ç§æƒ…å†µä¸‹ï¼Œæ˜¯ä¸æ˜¯è¿˜å¾—è€ƒè™‘è¿™ä¸ª &lt;strong&gt;åˆ†å¸ƒå¼äº‹åŠ¡&lt;/strong&gt; å‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘å¯èƒ½è¿˜æ˜¯ä¸ä¼šé€‰æ‹©è¿™ä¸ª &lt;strong&gt;åˆ†å¸ƒå¼äº‹åŠ¡&lt;/strong&gt; ï¼Œæˆ‘ä¼šç›´æ¥å¾€ å•†å“åº“ ä¸­ å»ºç«‹ä¸€ä¸ª &lt;strong&gt;ç§’æ€è®¢å•è¡¨&lt;/strong&gt; Â æˆ–è€…åœ¨ &lt;strong&gt;è®¢å•åº“&lt;/strong&gt; ä¸­å»ºç«‹è¿™ä¸ª ç§’æ€å•†å“åº“å­˜è¡¨ï¼Œç”šè‡³ä¸“é—¨å¼„ä¸€ä¸ª &lt;strong&gt;ç§’æ€åº“&lt;/strong&gt; ï¼Œ &lt;strong&gt;å†—ä½™&lt;/strong&gt; ä¸€ä¸‹ï¼Œäº‹åå¦‚æœéœ€è¦åŒæ­¥åˆ°ç›¸åº”çš„ åº“è¡¨ ä¸­ï¼Œå†è¿›è¡Œç›¸å…³çš„æ“ä½œã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£å‡å¦‚è¿˜æœ‰ä¸ªç§¯åˆ†ç³»ç»Ÿå‘¢ ?&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯”å¦‚ æ”¯ä»˜å›è°ƒåï¼Œæ›´æ–°è®¢å•çŠ¶æ€çš„åŒæ—¶ï¼Œè¿˜è¦æ›´æ–°è¿™ä¸ªç”¨æˆ·ç§¯åˆ†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æˆ‘è¿˜æ˜¯ä¼šé€‰æ‹© MQ ï¼Œé€šè¿‡ MQ çš„å¯é æ€§ æ¥è¾¾åˆ°è¿™ä¸ª &lt;strong&gt;æœ€ç»ˆä¸€è‡´æ€§&lt;/strong&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4631268436578171&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskN64tFNB9YyWfym5jLWXbjUTm43koQ8pO6uMM5jHORe0ouCoWibY0j8A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;339&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…ˆå‘é€æ¶ˆæ¯åˆ°ç§¯åˆ†ç³»ç»Ÿï¼Œæ›´æ–°è®¢å•ä¿¡æ¯å•ç‹¬åœ¨äº‹åŠ¡ä¸­ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ˜¯åˆ†å¸ƒå¼äº‹åŠ¡ä¸­å¸¸è§çš„ä¸€ç§è§£å†³æ–¹æ¡ˆ &lt;strong&gt;åŸºäºMQå¯é æ€§æ¶ˆæ¯çš„æœ€ç»ˆä¸€è‡´æ€§æ–¹æ¡ˆ&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰æ—¶é—´å¯ä»¥å­¦ä¹ ä¸‹ Seata&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4850863422291994&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWsktEoicMUQjJicwB42V9w7b6fvEXnQMIFP6aUibjUnNmAHFFoQwyhYoicr8w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1274&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é‡è¯•æœºåˆ¶&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šå›¾å°† MySQL å’Œ MQ çš„æ“ä½œæ”¾ä¸€èµ·ï¼Œè¿˜å¾—å°å¿ƒè¿™ä¸ª MQ çš„å¼‚å¸¸ï¼Œå¯¼è‡´è¿™ä¸ª &lt;strong&gt;äº‹åŠ¡å›æ»š&lt;/strong&gt;ï¼Œä½†æ˜¯ ACK è¿˜æ˜¯æ­£å¸¸å‘å‡ºå»çš„æƒ…å†µã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œæˆ‘æœ€åè¿˜å°†å¼‚å¸¸æŠ›å‡ºå»ï¼Œæ˜¯ä¸ºäº†è§¦å‘è¿™ä¸ª &lt;strong&gt;é‡è¯•æœºåˆ¶&lt;/strong&gt; ï¼Œé…ç½®æ–‡ä»¶ä¸­ å¼€å¯ RabbitMQ æ¶ˆè´¹è€…é‡è¯•æœºåˆ¶å³å¯ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ACK å‰å‘ç”Ÿå¼‚å¸¸ï¼Œäº‹åŠ¡å›æ»šï¼Œè§¦å‘é‡è¯•æœºåˆ¶ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ACK ä¸­å‘ç”Ÿå¼‚å¸¸ï¼Œæ•è·ï¼Œä¸¢å¼ƒå¼‚å¸¸ï¼Œæäº¤äº‹åŠ¡ã€‚å†æ¬¡æ¶ˆè´¹æ—¶ï¼Œå‘ç°æ˜¯é‡å¤è®¢å•ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ACK åè¿˜æœ‰å¼‚å¸¸ï¼Œæœªæ•è·ï¼Œäº‹åŠ¡å›æ»šï¼Œä½†æ¶ˆæ¯å·²ç»è¢« ACKï¼Œè§¦å‘äº†é‡è¯•æœºåˆ¶ï¼Œåœ¨é‡è¯•æœŸé—´æ²¡æœ‰å¼‚å¸¸ï¼Œåˆ™æ­£å¸¸å¤„ç†ã€‚å¦‚æœé‡è¯•åè¿˜æœ‰å¼‚å¸¸ï¼Œåˆ™ä¼šå‡ºç° æ¶ˆæ¯ä¸¢å¤± çš„æƒ…å†µï¼Œè¿™åˆå¾— &lt;strong&gt;ç´§æ€¥å¤„ç†&lt;/strong&gt; äº†ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é˜²æ­¢è¶…å–&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰ä¸¤ä¸ªæ‰£å‡åŠ¨ä½œ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Redis é¢„æ‰£åº“å­˜ï¼Œè¿™é‡Œå¾—åœ¨ &lt;strong&gt;lua è„šæœ¬&lt;/strong&gt;ä¸­æ“ä½œã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4107142857142857&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskzbicBZuiaE1zTAZMk8Qzo5msQK0Zf6auoib12qKkPWAbGCwf8icYC3batA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;448&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;MySQL æ‰£å‡åº“å­˜ï¼Œè¿™é‡Œæ ¸å¿ƒå°±æ˜¯ &lt;strong&gt;ä¹è§‚é”çš„æ–¹å¼&lt;/strong&gt; Â a=a-1 where a &amp;gt; 0;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.1458966565349544&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWsk7vFSbQFljG9uFm6ialibjdoqUKvxLecR4Unp1YV0YOXxlzeyl0fWPgKw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;658&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç¼“å­˜&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œå†ç®€çŸ­å•°å—¦ä¸‹&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç¼“å­˜ç©¿é€&lt;span/&gt;&lt;/h4&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;é’ˆå¯¹ä¸å­˜åœ¨çš„ key ï¼Œå¯ä»¥ç”¨ &lt;strong&gt;å¸ƒéš†è¿‡æ»¤å™¨&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç¼“å­˜å‡»ç©¿&lt;span/&gt;&lt;/h4&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;key åˆšå¥½è¿‡æœŸï¼Œæˆ–è€… &lt;strong&gt;å•†å“æˆäº†çˆ†æ¬¾&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”¨ &lt;strong&gt;åˆ†å¸ƒå¼é”&lt;/strong&gt; ï¼Œ &lt;strong&gt;åŒé‡æ£€æŸ¥é”æ¨¡å¼&lt;/strong&gt; èƒ½è§£å†³ä¸Šé¢è¿™ä¸¤ç§æƒ…å†µï¼Œé”çš„ç²’åº¦ä¹Ÿæ˜¯è¿™ä¸ª å•†å“ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é’ˆå¯¹ Â key åˆšå¥½è¿‡æœŸ çš„æƒ…å†µï¼Œæˆ‘äº†è§£åˆ°ä¸€ç§æ–°çš„å¤„ç†æ€è·¯ï¼š&lt;strong&gt;é€»è¾‘è¿‡æœŸ&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸åœ¨ Redis ä¸­åˆ¤æ–­æ˜¯å¦è¿‡æœŸï¼Œåœ¨ ä»£ç  ä¸­è¿›è¡Œåˆ¤æ–­ï¼Œè¿‡æœŸçš„è¯è·å–é”ï¼Œå¼€çº¿ç¨‹å»æ›´æ–°ï¼Œä½†å®ç°èµ·æ¥æ¯”è¾ƒå¤æ‚ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç¼“å­˜é›ªå´©&lt;span/&gt;&lt;/h4&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å¤§é‡ key Â åŒæ—¶è¿‡æœŸï¼Œå¯ä»¥ &lt;strong&gt;ç»™ä¸åŒçš„Keyçš„TTLæ·»åŠ éšæœºå€¼&lt;/strong&gt; ï¼Œ&lt;strong&gt;ç»™ä¸šåŠ¡æ·»åŠ å¤šçº§ç¼“å­˜&lt;/strong&gt; Â ï¼Œ&lt;strong&gt;é™çº§é™æµç­–ç•¥å®‰æ’ä¸Š&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æ€»ç»“&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ°è¿™é‡Œï¼Œè¿™ä¸ªç®€æ˜“ç§’æ€ç³»ç»Ÿå°±ä»‹ç»å®Œäº†ï¼Œè‡³äº é™æµï¼Œç”¨æˆ·é‰´æƒï¼Œæ ‡è®° ï¼Œè®¢å•æ”¯ä»˜ï¼Œè¶…æ—¶å¤„ç†ï¼Œæ¶ˆæ¯çš„é¡ºåºæ€§ â€¦â€¦ å†åˆ°å¤§ä¸€ç‚¹çš„ é›†ç¾¤ï¼Œç¼“å­˜ä¸€è‡´æ€§ ç­‰ç­‰ä¸œè¥¿ï¼Œå¾—æŠ½ç©ºå†å®Œå–„ä¸‹äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­å»ºè¿‡ç¨‹ä¸­ï¼Œæœ€æœ‰æ„æ€çš„æ˜¯ï¼Œä¸€ç›´é˜²ç€ &lt;strong&gt;è¶…å–&lt;/strong&gt;ï¼Œç»“æœè¿˜å‡ºç°äº† &lt;strong&gt;å°‘å–&lt;/strong&gt; çš„åœºæ™¯ğŸ˜‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥è¿™ Redis é¢„æ‰£åº“å­˜ ä¹Ÿå¾—è°¨æ…å‘€ï¼Œ&lt;strong&gt;luaè„šæœ¬&lt;/strong&gt; ä¸‰åˆä¸€ç–—ç¨‹ï¼šæŸ¥ï¼Œæ‰£ï¼Œå­˜ ğŸ˜‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;MySQL ä¹Ÿä¸€æ ·ï¼Œ&lt;strong&gt;åˆ†å¸ƒå¼é”&lt;/strong&gt;ï¼Œ&lt;strong&gt;äº‹åŠ¡&lt;/strong&gt; ï¼ŒæŸ¥ï¼Œæ‰£ï¼Œå­˜&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.978021978021978&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskW2aXqQMxyUTmHfjaXDaWsyZzya59OY5rZBCp93KdEAl0ZbzicutSsKQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;182&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¸Œæœ›åˆ°æ—¶èƒ½æŠŠç¬”è®°ä¸­çš„æŠ€æœ¯éƒ½è¿‡ä¸€éã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3000898472596586&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskWIkxoIYcOFoQic4VicpPg1AoNB02Ie7jsFtEd3WZCwrWice2Qf6uo7U6A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1113&quot;/&gt;&lt;figcaption&gt;å­¦ä¹ ç¬”è®°&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢æ˜¯æˆ‘ç”¨ JMeter æµ‹è¯•çš„ä¸€äº›æ•°æ®æƒ…å†µğŸ‘‡&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;JMeter&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œä¸¤ä¸ª http è¯·æ±‚åˆ†åˆ«æ¨¡æ‹Ÿï¼Œ&lt;strong&gt;è·å–ç§’æ€åœ°å€&lt;/strong&gt;ï¼Œ&lt;strong&gt;å¼€å§‹ç§’æ€&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.34615384615384615&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskVqqDDCudY3JqLykP6PXas3XqymDLQPnurW8mOicj7DX3UWicSuE7Hjdw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;910&quot;/&gt;&lt;figcaption&gt;jmeter 500 ä¸ªå¹¶å‘ï¼Œ100 ä»¶åº“å­˜&lt;/figcaption&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æŠ¥å‘Šä¸€&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ª å¹³å‡å“åº” æ˜¯ 326 ms ï¼Œ 50 % çš„è¯·æ±‚æ˜¯ 245 msï¼Œ99% æ˜¯ 1342 ms ï¼Œæœ€å°æ˜¯ 21 msï¼Œæœ€å¤§æ˜¯ 1359 ms ï¼Œååé‡æ˜¯ 605/s ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.2655007949125596&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskgA7jV5tGicU9Ntpb4MKlEXaaQMicCZ6C5oibrbZicIj3JC0nMFflPzfiaUA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1258&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªæˆç»©ã€‚ã€‚ä¸€è¨€éš¾å°½ï¼Œè¿™è¿˜æ˜¯ç”¨äº† &lt;strong&gt;MQ å¼‚æ­¥ä¸‹å•&lt;/strong&gt; ï¼Œè¿˜æœ‰ &lt;strong&gt;å†…å­˜æ ‡è®°&lt;/strong&gt;ï¼Œ&lt;strong&gt;Redis é¢„æ‰£åº“å­˜&lt;/strong&gt; çš„ç»“æœï¼Œè€Œä¸”æ˜¯ &lt;strong&gt;é¢„çƒ­äº† JVM&lt;/strong&gt; çš„æƒ…å†µğŸ˜±&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æœ€å¤§çš„å¼€é”€åº”è¯¥æ˜¯ç½‘ç»œé—®é¢˜ï¼Œè¦è®¿é—® äº‘æœåŠ¡å™¨ K8S ä¸­çš„ Redis ä»¥åŠ æœ¬åœ°è™šæ‹Ÿæœºä¸Šçš„ MQã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ–è€…æ˜¯æˆ‘çš„è€ä¼™è®¡æ€§èƒ½é—®é¢˜ï¼Œåˆå¾—è·‘é¡¹ç›®ï¼Œè¿˜å¾—æµ‹è¯•ï¼Œè¿™ CPU ï¼Œå†…å­˜ï¼Œç½‘å¡ ä¼°è®¡ä¹Ÿå¿™åäº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç®€å•åˆ†æä¸‹ ğŸ‘‡&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;è·å–ç§’æ€åœ°å€&lt;/strong&gt; ï¼Œ è¿™é‡Œå°±è®¿é—®ä¸€æ¬¡ Redis Â ï¼Œæ‰§è¡Œ Set å‘½ä»¤ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;å¼€å§‹ç§’æ€&lt;/strong&gt; ä¸­ï¼Œæ¶‰åŠçš„ç½‘è·¯æ“ä½œæœ‰&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;æ ¡éªŒåœ°å€&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ˜¯å¦é‡å¤ä¸‹å•&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é¢„æ‰£åº“å­˜ lua è„šæœ¬&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å‘é€è®¢å•ä¿¡æ¯åˆ° Â MQï¼ˆè™šæ‹Ÿæœºä¸Šï¼‰&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åé¢æŠŠé¡¹ç›®æ­å»ºåˆ°äº‘æœåŠ¡å™¨ä¸Šå†æ¥æµ‹ä¸‹ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æŠ¥å‘ŠäºŒ&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œçœ‹åˆ° ç¬¬ä¸€ä¸ªè¯·æ±‚ çš„ RT éƒ½æ¯”ç¬¬äºŒä¸ªè¯·æ±‚çš„ å°ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3439922480620155&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskLeYR8tYB2dFibaBL77Q8icwuH3FpQ67t8mng1BBcjWmfbDw4KBNKTefQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1032&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Redis&lt;span/&gt;&lt;/h3&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.2700096432015429&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWsk61cxk0wjPUqTOrbuMXP7ylMibT1EPm74RxZ8EKhRHpgG3RPicfGg5kiag/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1037&quot;/&gt;&lt;figcaption&gt;Redis å†…å­˜ä½¿ç”¨æƒ…å†µï¼ˆæµ‹è¯•å‰ï¼‰&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.2632084534101825&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWsk68X2WxyVI2WTqLkScZPUhwOJBVwKPhFjvhibbYAZfXlG17mxjaDYib5A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1041&quot;/&gt;&lt;figcaption&gt;Redis å†…å­˜ä½¿ç”¨æƒ…å†µï¼ˆä½¿ç”¨åï¼‰&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥çœ‹åˆ°ï¼Œå†…å­˜å¤šäº† 0.1M å·¦å³ï¼Œè¿™æ˜¯å¤šäº† 601 ä¸ª key&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.18232044198895028&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskIgm4OdpVF47NxDbjGfibNOZW2Cbt9tw71dpA4BntiaztMT1Jq0DUCBWA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;181&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è‡³äºæ€ä¹ˆå¤šäº† 32 æ¡ client connection ï¼Œ åªèƒ½åšä¸ªç®€å•çš„æ¨æµ‹å…ˆäº†&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é¡¹ç›®ä¸­ä½¿ç”¨äº†è¿™ä¸ª redisson åšåˆ†å¸ƒå¼é”ï¼Œå ç”¨äº† 25 æ¡&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.10140845070422536&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskyroo5ayrsNQewWJAnNNKPdrz8ZuWib7457vZ257f4r4oS0eemv3bPwQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;710&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç®€å•çœ‹ä¸‹æºç &lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6103336921420882&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskm0S5sCPCejHBFxSuTJRpr2ic4QYgMXibicJlkRJzg918oXib9FuVYzJMUQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;929&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‹¿åˆ°æœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰è¿æ¥ï¼Œæ’æ‰ä¹‹å‰çš„ 5 æ¡ï¼Œåˆšå¥½å‰©ä¸‹ 32 æ¡ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskZYehc4DRRHHgaZKuawVIOcQib5ge4KcicjGNaTiaYTAeleX0dVcZiav3rw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1045&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œçœ‹åˆ°ä½¿ç”¨ resp3 çš„æœ‰ 7 æ¡ï¼Œåˆšå¥½ç¬¦åˆï¼Œåº”è¯¥æ˜¯ RedisTemplate ç›¸å…³åˆ›å»ºçš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œç®€å•çœ‹ä¸‹æºç ï¼Œ Â Redis 6 å¼€å§‹é»˜è®¤ä½¿ç”¨ RESP3 çš„åè®®çš„&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.49630314232902034&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskeZSLvvWxAJOL4P5A13KGFOC2UqJ1usicpDicTeBbJjrRqwEsugmib7ibLw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1082&quot;/&gt;&lt;/figure&gt;&lt;hr data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;RabbitMQ&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢æ˜¯ä» Prometheus + Â Grafana ç›‘æ§æˆªå–çš„&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.2212863705972435&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskdhQPkUyfXicIep5Wrwj6S8ibPMqVcBblcBD30nE8ibafFROiaaMeHgF6pA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1306&quot;/&gt;&lt;figcaption&gt;RabbitMQ ä½¿ç”¨æƒ…å†µï¼ˆæµ‹è¯•å‰ï¼‰&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.34782608695652173&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWsk4eE9ub4TKictnA6DS66u9wCCK1PaZsAu4uUFHzm1LhdfiawRc5a8Pv6Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1288&quot;/&gt;&lt;figcaption&gt;RabbitMQ ä½¿ç”¨æƒ…å†µï¼ˆæµ‹è¯•ä¸­ï¼‰&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œ å‘é€ç«¯å’Œæ¶ˆè´¹ç«¯ åœ¨ä¸€ä¸ªåº”ç”¨ä¸Šï¼Œå…±ç”¨ä¸€æ¡ connectionï¼Œ å‘é€ç«¯åˆ›å»ºäº† 24 ä¸ª channel ï¼Œ æ¶ˆè´¹ç«¯ 2 ä¸ªã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.49224806201550386&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskIpWhJvYKPkibsUbD8ia8dv8NWofBUxJicRQRZlILQZHzXWMbvyYKUicxCQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1290&quot;/&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.026993865030674847&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWsklyjOicDcv04Fk54fXSxHqicmzSg9GibcQQf4WUIqsMC3vlIxlesXoVDWg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;815&quot;/&gt;&lt;figcaption&gt;å‘é€ç«¯ç¬¬ä¸€æ¡ MQ æ•°æ®&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.02074688796680498&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskokXjtgIEq5kzXj1PMiaLCkB37tjicdxpgB0IibUFS3FdXORboBm74LO9Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;964&quot;/&gt;&lt;figcaption&gt;å‘é€ç«¯ç¬¬ä¸€æ¡ MQ æ•°æ®è¢« ACK&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»è¿™ä¸ªç›‘æ§å›¾å¯ä»¥çœ‹åˆ°ï¼Œæ¶ˆè´¹ç«¯å¼€å§‹æ¶ˆè´¹çš„æ—¶é—´ç‚¹å¤§æ¦‚æ˜¯ 16:47:00&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€Œç”Ÿäº§è€…å‘é€ç¬¬ä¸€æ¡æ¶ˆæ¯å’Œè¢«confirm çš„æ—¶é—´å¤§æ¦‚æ˜¯ 16:46:30 ï¼›è¿™ä¸ªæœ‰è¯¯å·®æ˜¯å› ä¸ºè¿™ä¸ªç›‘æ§è‡ªåŠ¨åˆ·æ–°çš„é¢‘ç‡æ˜¯ 15s ï¼Œç›®å‰æ˜¯æœ€å°çš„äº†ï¼ˆå¯èƒ½æ˜¯æˆ‘æŒ‘çš„æ¨¡æ¿é—®é¢˜ï¼Œæˆ–è€…æ˜¯è¿™å¹¶å‘å¤ªå°ğŸ˜‚ï¼‰&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.47109375&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWsk9RBu6pY47pYtjRVnH8Kw1WJWcYUZBa793C8Nwp9fUFVB8KTMnu6Hqw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;figcaption&gt;æ¶ˆè´¹è€…æ¶ˆè´¹èƒ½åŠ›ï¼Œå¤§æ¦‚æ¯ç§’ 2 ä¸ª ack&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3581973581973582&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskasom826P36euFrCB1RWD6eggpicnVgocsgvChicxRibnia6f2gr1GV5jkg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1287&quot;/&gt;&lt;figcaption&gt;channel&lt;/figcaption&gt;&lt;/figure&gt;&lt;hr data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;K8S&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;minikube èŠ‚ç‚¹ï¼Œä¸Šé¢è¿è¡Œäº† Redis ä¸»ä» , MySQL Â ä¸»ä»ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3507853403141361&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWsk7XJkDqLicckibLKxSnOWkrplrriaOzwPTgpZgozyketJvDTX3QBEeCxzQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1146&quot;/&gt;&lt;figcaption&gt;K8Sçš„æƒ…å†µï¼ˆæµ‹è¯•å‰ï¼‰&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.34748010610079577&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYFCrXCDGjoT0qRjZILCaWskSy7vtIR7oJ1bOVSXda3UESCLmviaWE6CprAA2eC54JuMyBicflrUib9lA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1131&quot;/&gt;&lt;figcaption&gt;K8Sçš„æƒ…å†µï¼ˆæµ‹è¯•åï¼‰&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŸºæœ¬æ²¡å˜åŒ–ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åé¢å†æŠŠ MQ å’Œ é•œåƒä»“åº“æ­å»ºä¸€ä¸‹ï¼Œç„¶åå†æŠŠé¡¹ç›®ä¸¢ä¸Šå»è·‘è·‘çœ‹çœ‹ ï¼Œåˆ°æ—¶å†çœ‹çœ‹è¿™ä¸ªæµ‹è¯•æŠ¥å‘Šã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;overï¼ğŸ·&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>89c28660e7044d2eedf42a7bd0e41c67</guid>
<title>è®°ä¸€æ¬¡ä½¿ç”¨ spring javaconfig è¸©åˆ°çš„å‘</title>
<link>https://toutiao.io/k/gbrmjgt</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content js_underline_content             &quot; id=&quot;js_content&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/yicuibYlvPgkrmjgxWuEElf7B5MONU9fk4E9ZtpA2e3Rr6sh6HKN9Y04ZzUZEwXLibMfOtbnYvmuiajaazEZiaNxKeQ/640?wx_fmt=png&quot; data-w=&quot;12&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/cz8RAibn0WasK0WJWkkUWuWuOp1K03k5vIrACgnOR18cvfGfRicwxNLlSOuHPzNCkxBHoNEvGXDot2LllicM0Sibibw/640?wx_fmt=png&quot; data-w=&quot;12&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;ç‚¹å‡»ä¸Šæ–¹&lt;span data-mid=&quot;&quot;&gt;è“å­—&lt;/span&gt;å…³æ³¨æˆ‘ä»¬&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/MrzbA5jTibCrh3749Yd0feA1ztCD48dibOicOK4CQqyZo2Ux07zIdSb070pfBbBJcG3a0w0KRKI8iaaicVRDhjXaMVA/640?wx_fmt=png&quot; data-w=&quot;12&quot;/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/u1f6iaiam5gpSRDHFrUx7fy0tc0h8vfDa7FTQL6Z7nFs6N0K0fiaYsD7IKzJochowfCBg6kxxjquqz1Vs1hgvfbtA/640?wx_fmt=png&quot; data-w=&quot;12&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;01&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;å‰è¨€&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸ºäº†ç®€åŒ–å¼€å‘ï¼Œæˆ‘éƒ¨é—¨ç»å¸¸ä¼šå°è£…ä¸€äº›é€šç”¨çš„ç±»åº“ç»™ä¸šåŠ¡ç ”å‘ä½¿ç”¨ï¼Œå› ä¸ºä¸šåŠ¡æ–¹çš„æ ¹åŒ…è·¯å¾„å¾ˆç»å¸¸å’Œæˆ‘ä»¬éƒ¨é—¨é¡¹ç›®çš„æ ¹åŒ…æ˜¯ä¸ä¸€æ ·çš„ï¼Œå› æ­¤æˆ‘ä»¬ä¼šè®©ä¸šåŠ¡æ–¹åœ¨ä½¿ç”¨æˆ‘ä»¬å°è£…çš„åŒ…æ—¶ï¼Œæ‰«æä¸€ä¸‹æˆ‘ä»¬çš„æ ¹åŒ…ï¼Œå½¢å¦‚ä¸‹&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;@&lt;span&gt;ComponentScan&lt;/span&gt;(&lt;span&gt;basePackages&lt;/span&gt;Â = {&quot;&lt;span&gt;com&lt;/span&gt;&lt;span&gt;.aaa&lt;/span&gt;&quot;,&quot;&lt;span&gt;com&lt;/span&gt;&lt;span&gt;.bbb&lt;/span&gt;&quot;})&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸è¿‡è¿™æ ·å°±å¯¼è‡´äº†ä¸šåŠ¡æ–¹æƒ³ä½¿ç”¨æˆ‘ä»¬çš„ç±»åº“ï¼Œå°±å¿…é¡»çŸ¥é“æˆ‘ä»¬çš„æ ¹åŒ…ã€‚è¿™å…¶å®æ˜¯ä¸€ç§é—´æ¥çš„è€¦åˆã€‚åé¢æˆ‘ä»¬å°±å…¨é¢ä½¿ç”¨springbootçš„è‡ªåŠ¨è£…é…ï¼Œè®©ä¸šåŠ¡æ–¹æ— éœ€çŸ¥é“æˆ‘ä»¬çš„æ ¹åŒ…ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æˆ‘ä»¬çš„ç±»åº“ã€‚ç„¶è€Œåœ¨æˆ‘ä»¬å°è£…çš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿé‡åˆ°ä¸€äº›å‘ã€‚æœ¬æ–‡å°±æ¥å¤ç›˜ä¸€æ¬¡æˆ‘ä»¬ä½¿ç”¨spring javaconfigè¸©åˆ°çš„å‘ã€‚æœ¬æ–‡ä¸»è¦æ˜¯demoç¤ºä¾‹æ¼”ç¤º&lt;/span&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;02&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;demoç¤ºä¾‹&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;å‡è®¾æˆ‘ä»¬å°è£…äº†ä¸€ä¸ªç±»åº“DemoServiceã€‚ç¤ºä¾‹å¦‚ä¸‹&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;DemoService&lt;/span&gt;Â {&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â DemoProperties demoProperties;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â String version;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;DemoService&lt;/span&gt;&lt;span&gt;(DemoProperties demoProperties)&lt;/span&gt;Â &lt;/span&gt;{&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;this&lt;/span&gt;.demoProperties = demoProperties;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â String &lt;span&gt;print&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;{&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;version:&quot;&lt;/span&gt;Â + version + &lt;span&gt;&quot;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&quot;&lt;/span&gt;Â + demoProperties;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â String &lt;span&gt;getVersion&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â version;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;setVersion&lt;/span&gt;&lt;span&gt;(String version)&lt;/span&gt;Â &lt;/span&gt;{&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;this&lt;/span&gt;.version = version;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;br mpa-from-tpl=&quot;t&quot;/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;DemoProperties ç±»å¦‚ä¸‹&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;@ConfigurationProperties&lt;/span&gt;(prefix = &lt;span&gt;&quot;demo.hello&quot;&lt;/span&gt;)&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;class&lt;/span&gt;Â DemoProperties {&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;String&lt;/span&gt;Â name;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;String&lt;/span&gt;Â getName() {&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â name;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â setName(&lt;span&gt;String&lt;/span&gt;Â name) {&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;this&lt;/span&gt;.name = name;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;String&lt;/span&gt;Â toString() {&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;DemoProperties{&quot;&lt;/span&gt;Â +&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;&quot;name=&#x27;&quot;&lt;/span&gt;Â + name + &lt;span&gt;&#x27;\&#x27;&#x27;&lt;/span&gt;Â +&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;&#x27;}&#x27;&lt;/span&gt;;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;br mpa-from-tpl=&quot;t&quot;/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æœ‰ä¸ªé’ˆå¯¹DemoServiceçš„æ‰©å±•åç½®å¤„ç†å™¨&lt;/span&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;DemoBeanFactoryPostProcessor&lt;/span&gt;Â &lt;span&gt;implements&lt;/span&gt;Â &lt;span&gt;BeanFactoryPostProcessor&lt;/span&gt;Â &lt;/span&gt;{&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;postProcessBeanFactory&lt;/span&gt;&lt;span&gt;(ConfigurableListableBeanFactory beanFactory)&lt;/span&gt;Â &lt;span&gt;throws&lt;/span&gt;Â BeansException &lt;/span&gt;{&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â BeanDefinition helloService = beanFactory.getBeanDefinition(&lt;span&gt;&quot;demoService&quot;&lt;/span&gt;);&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â helloService.getPropertyValues().add(&lt;span&gt;&quot;version&quot;&lt;/span&gt;,&lt;span&gt;&quot;V1&quot;&lt;/span&gt;);&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; demoService demoBeanFactoryPostProcessor&quot;&lt;/span&gt;);&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;br mpa-from-tpl=&quot;t&quot;/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;javaconfigé…ç½®å¦‚ä¸‹&lt;/span&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;@Configuration&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;span&gt;@EnableConfigurationProperties&lt;/span&gt;(DemoProperties.class)&lt;br mpa-from-tpl=&quot;t&quot;/&gt;public class DemoConfig implements InitializingBean {&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;@Autowired&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â private DemoProperties demoProperties;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;@Bean&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;@ConditionalOnMissingBean&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â public DemoService demoService(){&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â &lt;span&gt;DemoService&lt;/span&gt;(demoProperties);&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â @&lt;span&gt;PostConstruct&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;init&lt;/span&gt;(){&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;System&lt;/span&gt;&lt;span&gt;.out&lt;/span&gt;&lt;span&gt;.println&lt;/span&gt;(&lt;span&gt;&quot;æ¨¡æ‹Ÿä¸šåŠ¡åˆå§‹åŒ–ã€‚ã€‚ã€‚&quot;&lt;/span&gt;);&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â @&lt;span&gt;Bean&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â @&lt;span&gt;ConditionalOnMissingBean&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;DemoBeanFactoryPostProcessor&lt;/span&gt;Â &lt;span&gt;demoBeanFactoryPostProcessor&lt;/span&gt;(){&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â &lt;span&gt;DemoBeanFactoryPostProcessor&lt;/span&gt;();&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â @&lt;span&gt;Override&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;afterPropertiesSet&lt;/span&gt;() &lt;span&gt;throws&lt;/span&gt;Â &lt;span&gt;Exception&lt;/span&gt;Â {&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;System&lt;/span&gt;&lt;span&gt;.out&lt;/span&gt;&lt;span&gt;.println&lt;/span&gt;(&lt;span&gt;&quot;xxxxxxxx:&quot;&lt;/span&gt;Â + demoProperties);&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;br mpa-from-tpl=&quot;t&quot;/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é…ç½®çš„application.propertieså¦‚ä¸‹&lt;/span&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;server.port=8086&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;demo.hello.name=zhangsan&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¯åŠ¨ç±»å¦‚ä¸‹&lt;/span&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;@SpringBootApplication&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;DemoLoaderApplication&lt;/span&gt;Â &lt;span&gt;implements&lt;/span&gt;Â &lt;span&gt;ApplicationRunner&lt;/span&gt;Â &lt;/span&gt;{&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â &lt;span&gt;@Autowired&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â &lt;span&gt;private&lt;/span&gt;Â DemoService demoService;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(String[] args)&lt;/span&gt;Â &lt;/span&gt;{&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â SpringApplication.run(DemoLoaderApplication.class, args);&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â }&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;run&lt;/span&gt;&lt;span&gt;(ApplicationArguments args)&lt;/span&gt;Â &lt;span&gt;throws&lt;/span&gt;Â Exception &lt;/span&gt;{&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â System.out.println(demoService.print());&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â }&lt;br mpa-from-tpl=&quot;t&quot;/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;ä»¥ä¸Šå°±æ˜¯å®Œæ•´çš„ç¤ºä¾‹demoï¼Œçœ‹å®Œç¤ºä¾‹demoï¼Œå¯ä»¥å›ç­”å¦‚ä¸‹é—®é¢˜&lt;/p&gt;&lt;p&gt;1ã€javaconfigä¸­çš„&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;@&lt;span&gt;PostConstruct&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;init&lt;/span&gt;(&lt;span/&gt;)&lt;/span&gt;{&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â System.&lt;span&gt;out&lt;/span&gt;.println(&lt;span&gt;&quot;æ¨¡æ‹Ÿä¸šåŠ¡åˆå§‹åŒ–ã€‚ã€‚ã€‚&quot;&lt;/span&gt;);&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;æ˜¯å¦ä¼šæ‰§è¡Œï¼Ÿ&lt;/p&gt;&lt;p&gt;2ã€javaconfigä¸­çš„&lt;/p&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;@Override&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;afterPropertiesSet&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;span&gt;throws&lt;/span&gt;Â Exception &lt;/span&gt;{&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;xxxxxxxx:&quot;&lt;/span&gt;Â + demoProperties);&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;æ˜¯å¦ä¼šæ‰§è¡Œï¼Œå¦‚æœä¼šæ‰§è¡Œï¼ŒdemoPropertiesæ˜¯å¦æœ‰å€¼ï¼Ÿ&lt;/p&gt;&lt;p&gt;3ã€å¯åŠ¨ç±»ä¸­çš„&lt;/p&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;@&lt;span&gt;Override&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â public void run(ApplicationArguments args) throws Exception {&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;System&lt;/span&gt;&lt;span&gt;.out&lt;/span&gt;&lt;span&gt;.println&lt;/span&gt;(&lt;span&gt;demoService&lt;/span&gt;&lt;span&gt;.print&lt;/span&gt;());&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â }&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;æ‰“å°çš„å€¼æ˜¯å¤šå°‘ï¼Ÿ&lt;/p&gt;&lt;p&gt;demoServiceçš„printæ–¹æ³•å¦‚ä¸‹&lt;/p&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt;Â String &lt;span&gt;print&lt;/span&gt;(){&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;version:&quot;&lt;/span&gt;Â + version + &lt;span&gt;&quot;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&quot;&lt;/span&gt;Â + demoProperties;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹è¾“å‡ºçš„ç»“æœ&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6648501362397821&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/NW0r9OxcmxJSBicFEjBibbF3vnwwHibT9iae16Asl1SWgsetEBsKQs2C8TgrTicB6MG22hiaoPVsQBeSbhJgbjjk1rrA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;734&quot;/&gt;&lt;br data-filtered=&quot;filtered&quot;/&gt;ç”±è¾“å‡ºçš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°@PostConstructæ²¡ç”Ÿæ•ˆã€afterPropertiesSetæ–¹æ³•ç”Ÿæ•ˆï¼Œç”±afterPropertiesSetæ‰“å°çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºDemoProperties ä¾èµ–æ³¨å…¥å¤±æ•ˆï¼Œå³ @Autowiredå¤±æ•ˆï¼Œç”±printï¼ˆï¼‰æ–¹æ³•æˆ‘ä»¬å¯ä»¥å¾—å‡ºDemoBeanFactoryPostProcessorç”Ÿæ•ˆäº†&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;03&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;æ’å‘&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ç­”æ¡ˆå°±åœ¨æˆ‘æˆªå›¾åœˆçº¢çš„åœ°æ–¹&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.608274647887324&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/NW0r9OxcmxJSBicFEjBibbF3vnwwHibT9iael1z9HOVC84sIhQ9Zs45r4UXAhfoGaKMQCoY21DDDGibuAXicRgac3b0Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1136&quot;/&gt;&lt;br data-filtered=&quot;filtered&quot;/&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.38083333333333336&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/NW0r9OxcmxJSBicFEjBibbF3vnwwHibT9iaeNu4oHribRCYM1aiabhGwBFdWiaq0mcXcJEx4MI3cxfvEtuxjwLrp3z5sw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1200&quot;/&gt;&lt;br data-filtered=&quot;filtered&quot;/&gt;@PostConstructå’Œ@Autowiredå¤±æ•ˆçš„åŸå› æ˜¯springåœ¨è¿›è¡Œiocæ—¶ï¼Œä¼šå…ˆè°ƒç”¨beanå·¥å‚çš„åç½®å¤„ç†å™¨è¿›è¡ŒbeanFactoryå¢å¼ºï¼Œspringä¼šæ ¹æ®beanå·¥å‚çš„beanNameå»å–beanFactoryåç½®å¢å¼ºå™¨ï¼Œå¦‚æœbeanFactoryåç½®å¢å¼ºå™¨çš„beanæ­¤æ—¶è¿˜ä¸å­˜åœ¨ï¼Œspringå°±ä¼šèµ°doCreateBeanè¿›è¡Œåˆ›å»ºï¼Œåœ¨åˆ›å»ºçš„æ—¶å€™ï¼Œä¼šåˆ¤æ–­æ˜¯å¦éœ€è¦ä½¿ç”¨å·¥å‚æ–¹æ³•è¿›è¡Œå®ä¾‹åŒ–ï¼Œæˆ‘ä»¬ä½¿ç”¨@Beanæ—¶ï¼Œå®ƒé‡‡ç”¨å°±æ˜¯å·¥å‚æ–¹æ³•ã€‚åœ¨é€šè¿‡å·¥å‚å®ä¾‹æ–¹æ³•åˆ›å»ºbeanFactoryåç½®å¢å¼ºå™¨æ—¶ï¼Œä»–ä¼šè°ƒç”¨&lt;/p&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;org&lt;/span&gt;&lt;span&gt;.springframework&lt;/span&gt;&lt;span&gt;.beans&lt;/span&gt;&lt;span&gt;.factory&lt;/span&gt;&lt;span&gt;.support&lt;/span&gt;&lt;span&gt;.SimpleInstantiationStrategy&lt;/span&gt;&lt;span&gt;#instantiate&lt;/span&gt;(&lt;span&gt;org&lt;/span&gt;&lt;span&gt;.springframework&lt;/span&gt;&lt;span&gt;.beans&lt;/span&gt;&lt;span&gt;.factory&lt;/span&gt;&lt;span&gt;.support&lt;/span&gt;&lt;span&gt;.RootBeanDefinition&lt;/span&gt;, &lt;span&gt;java&lt;/span&gt;&lt;span&gt;.lang&lt;/span&gt;&lt;span&gt;.String&lt;/span&gt;, &lt;span&gt;org&lt;/span&gt;&lt;span&gt;.springframework&lt;/span&gt;&lt;span&gt;.beans&lt;/span&gt;&lt;span&gt;.factory&lt;/span&gt;&lt;span&gt;.BeanFactory&lt;/span&gt;, &lt;span&gt;java&lt;/span&gt;&lt;span&gt;.lang&lt;/span&gt;&lt;span&gt;.Object&lt;/span&gt;, &lt;span&gt;java&lt;/span&gt;&lt;span&gt;.lang&lt;/span&gt;&lt;span&gt;.reflect&lt;/span&gt;&lt;span&gt;.Method&lt;/span&gt;, &lt;span&gt;java&lt;/span&gt;&lt;span&gt;.lang&lt;/span&gt;&lt;span&gt;.Object&lt;/span&gt;...)&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.46662125340599453&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/NW0r9OxcmxJSBicFEjBibbF3vnwwHibT9iaeOBK9QYEUo2GT3S2YyoQOKRKO9aicJiaGMFco2tjHB3qgmGDn0yURbxgg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1468&quot;/&gt;&lt;br data-filtered=&quot;filtered&quot;/&gt;&lt;span&gt;æ­¤æ—¶factoryBeanå°±å¿…é¡»ä¸€å®šå¾—æœ‰å€¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚è€Œè¿™ä¸ªfactoryBeanå°±æ˜¯ç¤ºä¾‹ä¸­çš„DemoConfig ã€‚&lt;/span&gt;&lt;strong&gt;è¿™å°±æ„å‘³ç€DemoConfigåœ¨DemoBeanFactoryPostProcessoråœ¨å®ä¾‹åŒ–å‰ï¼Œå°±å¾—å…ˆåˆ›å»ºå¥½&lt;/strong&gt;&lt;span&gt;ã€‚è€Œæ­¤æ—¶&lt;/span&gt;&lt;br data-filtered=&quot;filtered&quot;/&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6406844106463878&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/NW0r9OxcmxJSBicFEjBibbF3vnwwHibT9iae0RU949jFjlcZNInH8V4dPw1bESY0VST8n4Rs9pbyvGtkddxCnP3LUw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1052&quot;/&gt;&lt;br data-filtered=&quot;filtered&quot;/&gt;&lt;span&gt;registerBeanPostProcessorsè¿˜æ²¡æ‰§è¡Œåˆ°ï¼Œæ„å‘³ç€å„ç§springçš„beanåç½®å¤„ç†å™¨è¿˜æ²¡å‡†å¤‡å¥½ã€‚æ¯”å¦‚è§£æ@Autowiredæ³¨è§£çš„AutowiredAnnotationBeanPostProcessorä»¥åŠè§£æ@PostConstructæ³¨è§£çš„CommonAnnotationBeanPostProcessoréƒ½è¿˜æ²¡å‡†å¤‡å¥½ã€‚å› æ­¤@Autowiredå’Œ@PostConstructè‡ªç„¶å°±ä¸ä¼šç”Ÿæ•ˆ&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;04&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;è§£å†³æ–¹æ³•&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;span/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;æ–¹æ³•ä¸€ï¼šDemoBeanFactoryPostProcessorçš„åˆ›å»ºæ–¹æ³•æ”¹ä¸ºé™æ€æ–¹æ³•&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;0.875&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/tnNTe6QOaYx4HLiasWDSSibkvBwkySahn1jUGyrqSWWsCrd8WeibGicCbaDB9b5K4cTlaCxcmzv2uyEWNrQke47Vag/640?wx_fmt=png&quot; data-w=&quot;48&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;@Bean&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;@ConditionalOnMissingBean&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â public static DemoBeanFactoryPostProcessor demoBeanFactoryPostProcessor(){&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â &lt;span&gt;DemoBeanFactoryPostProcessor&lt;/span&gt;();&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å› ä¸ºæ˜¯é™æ€æ–¹æ³•ï¼Œä»–ä¾èµ–å°±æ˜¯ç±»æœ¬èº«è€Œéç±»å®ä¾‹å¯¹è±¡ï¼ŒDemoConfigæ­¤æ—¶å°±ä¼šè®©æ­£å¸¸çš„spring beançš„ç”Ÿå‘½å‘¨æœŸæ¥&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;æ–¹æ³•äºŒï¼šDemoBeanFactoryPostProcessorå•ç‹¬ä½¿ç”¨ä¸€ä¸ªé…ç½®ç±»&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;0.875&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/tnNTe6QOaYx4HLiasWDSSibkvBwkySahn1jUGyrqSWWsCrd8WeibGicCbaDB9b5K4cTlaCxcmzv2uyEWNrQke47Vag/640?wx_fmt=png&quot; data-w=&quot;48&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;ç¤ºä¾‹&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;@Configuration&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;public class DemoBeanFactoryPostProcessorConfig {&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;@Bean&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;@ConditionalOnMissingBean&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â public DemoBeanFactoryPostProcessor demoBeanFactoryPostProcessor(){&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â &lt;span&gt;DemoBeanFactoryPostProcessor&lt;/span&gt;();&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;æ–¹æ³•ä¸‰ï¼šä½¿ç”¨@Importæ³¨å…¥&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;0.875&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/tnNTe6QOaYx4HLiasWDSSibkvBwkySahn1jUGyrqSWWsCrd8WeibGicCbaDB9b5K4cTlaCxcmzv2uyEWNrQke47Vag/640?wx_fmt=png&quot; data-w=&quot;48&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;@Configuration&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;span&gt;@EnableConfigurationProperties&lt;/span&gt;(DemoProperties.class)&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;span&gt;@Import&lt;/span&gt;(DemoBeanFactoryPostProcessor.class)&lt;br mpa-from-tpl=&quot;t&quot;/&gt;public class DemoConfig implements InitializingBean {&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;@Autowired&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â private DemoProperties demoProperties;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;@Bean&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;@ConditionalOnMissingBean&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â public DemoService demoService(){&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â &lt;span&gt;DemoService&lt;/span&gt;(demoProperties);&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;æ–¹æ³•å››ï¼šä½¿ç”¨@Component + @ComponentScan&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;img data-ratio=&quot;0.875&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/tnNTe6QOaYx4HLiasWDSSibkvBwkySahn1jUGyrqSWWsCrd8WeibGicCbaDB9b5K4cTlaCxcmzv2uyEWNrQke47Vag/640?wx_fmt=png&quot; data-w=&quot;48&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;@Component&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;DemoBeanFactoryPostProcessor&lt;/span&gt;Â &lt;span&gt;implements&lt;/span&gt;Â &lt;span&gt;BeanFactoryPostProcessor&lt;/span&gt;Â &lt;/span&gt;{&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;postProcessBeanFactory&lt;/span&gt;&lt;span&gt;(ConfigurableListableBeanFactory beanFactory)&lt;/span&gt;Â &lt;span&gt;throws&lt;/span&gt;Â BeansException &lt;/span&gt;{&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â BeanDefinition helloService = beanFactory.getBeanDefinition(&lt;span&gt;&quot;demoService&quot;&lt;/span&gt;);&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â helloService.getPropertyValues().add(&lt;span&gt;&quot;version&quot;&lt;/span&gt;,&lt;span&gt;&quot;V1&quot;&lt;/span&gt;);&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; demoService demoBeanFactoryPostProcessor&quot;&lt;/span&gt;);&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;br mpa-from-tpl=&quot;t&quot;/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-preserve=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;@Configuration&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;span&gt;@EnableConfigurationProperties&lt;/span&gt;(DemoProperties.class)&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;span&gt;@ComponentScan&lt;/span&gt;(basePackageClasses = DemoBeanFactoryPostProcessor.class)&lt;br mpa-from-tpl=&quot;t&quot;/&gt;public class DemoConfig implements InitializingBean {&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;@Autowired&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â private DemoProperties demoProperties;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;@Bean&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â &lt;span&gt;@ConditionalOnMissingBean&lt;/span&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â public DemoService demoService(){&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â &lt;span&gt;DemoService&lt;/span&gt;(demoProperties);&lt;br mpa-from-tpl=&quot;t&quot;/&gt;Â Â Â Â }&lt;br mpa-from-tpl=&quot;t&quot;/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;05&lt;/p&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-mid=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p data-mid=&quot;&quot;&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;strong/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;å…¶å®æœ¬æ–‡çš„è§£å†³æ€è·¯å°±æ˜¯å¯¹spring beançš„åˆ›å»ºè¿‡ç¨‹è¦æœ‰ä¸€å®šäº†è§£ã€‚å…¶æ¬¡æˆ‘ä»¬åœ¨åˆ©ç”¨springçš„æ‰©å±•ç‚¹æ—¶å€™ï¼Œæˆ‘ä»¬å¤šä½¿ç”¨springè‡ªå¸¦çš„å†…ç½®æ‰©å±•å¯¹è±¡ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨beanåˆå§‹åŒ–æ—¶ï¼Œè¦åšä¸€äº›æ‰©å±•æ—¶ï¼Œå°½é‡ä½¿ç”¨InitializingBeanè€Œéä½¿ç”¨@PostConstructã€‚è¿™æ ·å¯ä»¥é¿å…å½“å‡ºç°ä¸Šé¢ç¤ºä¾‹çš„å‘æ—¶ï¼Œå¯¼è‡´ä»£ç ä¸æ‰§è¡Œè€Œå‡ºç°bugï¼Œè€Œè¿™ç§bugå¾€å¾€éšè—æ¯”è¾ƒæ·±ã€‚å½“ç„¶å¦‚æœæœ‰è‡ªä¿¡ä¸ä¼šå‡ºç°è¿™ç§é—®é¢˜ï¼Œç”¨@PostConstructä¹Ÿæ˜¯å¯ä»¥ï¼Œæ¯•ç«Ÿç”¨æ³¨è§£çš„æ–¹å¼ç›¸å¯¹ä¹Ÿç®€æ´ä¸€äº›&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;

          
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>5818ccd39033cb7ef96f07aa6583d567</guid>
<title>è®°ä¸€æ¬¡çº¿ä¸Š FGC é—®é¢˜æ’æŸ¥</title>
<link>https://toutiao.io/k/jw0tejf</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content js_underline_content             autoTypeSetting24psection&amp;#10;            &quot; id=&quot;js_content&quot;&gt;&lt;section&gt;&lt;mp-common-profile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-weui-theme=&quot;light&quot; data-id=&quot;Mzg3MTIwNjY3MA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/VaAN3q859ylWmoHoic1N6VWVqet95D1VKZibeKjId2zCve2On5VBFRO6fMpdCYiaBgJstyKKxddFYEyOqhDSTCPWA/0?wx_fmt=png&quot; data-nickname=&quot;å’•å’•é¸¡æŠ€æœ¯ä¸“æ &quot; data-alias=&quot;guguji_fly&quot; data-signature=&quot;æ“…é•¿é£æ§é¢†åŸŸç³»ç»Ÿç ”å‘ï¼Œæœ‰ç€ä¸°å¯Œçš„å¤§å‹ç³»ç»Ÿè®¾è®¡ã€å¼€å‘å’Œè°ƒä¼˜çš„ç»éªŒï¼Œåœ¨ä¸æ–­æ¢ç´¢å’Œå­¦ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œç§¯ç´¯äº†å®è´µçš„ç¼–ç¨‹ç»éªŒï¼Œå¸Œæœ›æˆ‘åˆ†äº«çš„æ–‡ç« èƒ½å¤Ÿç»™æ¯ä¸€ä½è¯»è€…å¸¦æ¥å¸®åŠ©ï¼&quot; data-from=&quot;0&quot; data-is_biz_ban=&quot;0&quot;/&gt;&lt;/section&gt;&lt;h2&gt;å¼•è¨€&lt;/h2&gt;&lt;p&gt;æœ¬æ–‡è®°å½•ä¸€æ¬¡çº¿ä¸Š GC é—®é¢˜çš„æ’æŸ¥è¿‡ç¨‹ä¸æ€è·¯ï¼Œå¸Œæœ›å¯¹å„ä½è¯»è€…æœ‰æ‰€å¸®åŠ©ã€‚è¿‡ç¨‹ä¸­ä¹Ÿèµ°äº†ä¸€äº›å¼¯è·¯ï¼Œç°åœ¨æœ‰æ—¶é—´æ²‰æ·€ä¸‹æ¥æ€è€ƒå¹¶æ€»ç»“å‡ºæ¥åˆ†äº«ç»™å¤§å®¶ï¼Œå¸Œæœ›å¯¹å¤§å®¶ä»Šåæ’æŸ¥çº¿ä¸Š GC é—®é¢˜æœ‰å¸®åŠ©ã€‚&lt;/p&gt;&lt;h2&gt;èƒŒæ™¯&lt;/h2&gt;&lt;p&gt;æœåŠ¡æ–°åŠŸèƒ½å‘ç‰ˆä¸€å‘¨åä¸‹åˆï¼Œçªç„¶æ”¶åˆ° CMS GC å‘Šè­¦ï¼Œå¯¼è‡´å•å°èŠ‚ç‚¹è¢«æ‹‰å‡ºï¼Œéšåé›†ç¾¤å†…æ¯ä¸ªèŠ‚ç‚¹å…ˆåéƒ½å‘ç”Ÿäº†ä¸€æ¬¡ CMS GCï¼Œæ‹‰å‡ºåçš„èŠ‚ç‚¹åƒåœ¾å›æ”¶åæ¥å…¥æµé‡æ¢å¤æ­£å¸¸ï¼ˆäº‹åæ’æŸ¥å‘ç°è¢«é‡å¯äº†ï¼‰ã€‚&lt;/p&gt;&lt;p&gt;å‘Šè­¦ä¿¡æ¯å¦‚ä¸‹ï¼ˆå·²è„±æ•ï¼‰ï¼š&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;322&quot; data-backw=&quot;319&quot; data-ratio=&quot;1.0102827763496145&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/VaAN3q859ynOhF5Atoz92HrmEicafXLcUmC3WbxQibLnQn1XpCo9z5hX5LJ6diamWW5ooIyqPGLRU8YCPKrNBDRzw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;778&quot; title=&quot;null&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å¤šä¸ªèŠ‚ç‚¹å‡ ä¹åŒæ—¶å‘ç”Ÿ GC é—®é¢˜ï¼Œä¸”æ’æŸ¥è‡ªç„¶æµé‡ç›‘æ§åå‘ç°å¹¶æœªæœ‰æ˜æ˜¾å¢é«˜ï¼ŒåŸºæœ¬å¯ä»¥ç¡®å®šæ˜¯æœ‰ GC é—®é¢˜çš„ï¼Œéœ€è¦è§£å†³ã€‚&lt;/p&gt;&lt;h2&gt;æ’æŸ¥è¿‡ç¨‹&lt;/h2&gt;&lt;h3&gt;GC æ—¥å¿—æ’æŸ¥&lt;/h3&gt;&lt;p&gt;GC é—®é¢˜é¦–å…ˆæ’æŸ¥çš„åº”è¯¥æ˜¯ GC æ—¥å¿—ï¼Œæ—¥å¿—èƒ½èƒ½å¤Ÿæ¸…æ™°çš„åˆ¤å®šå‘ç”Ÿ GC çš„é‚£ä¸€åˆ»æ˜¯ä»€ä¹ˆå¯¼è‡´çš„ GCï¼Œé€šè¿‡åˆ†æ GC æ—¥å¿—ï¼Œèƒ½å¤Ÿæ¸…æ™°çš„å¾—å‡º GC å“ªä¸€éƒ¨åˆ†åœ¨å‡ºé—®é¢˜ï¼Œå¦‚ä¸‹æ˜¯ GC æ—¥å¿—ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;java&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;0.514&lt;/span&gt;: [GC (Allocation Failure) [PSYoungGen: &lt;span class=&quot;code-snippet__number&quot;&gt;4445&lt;/span&gt;K-&amp;gt;&lt;span class=&quot;code-snippet__number&quot;&gt;1386&lt;/span&gt;K(&lt;span class=&quot;code-snippet__number&quot;&gt;28672&lt;/span&gt;K)] &lt;span class=&quot;code-snippet__number&quot;&gt;168285&lt;/span&gt;K-&amp;gt;&lt;span class=&quot;code-snippet__number&quot;&gt;165234&lt;/span&gt;K(&lt;span class=&quot;code-snippet__number&quot;&gt;200704&lt;/span&gt;K), &lt;span class=&quot;code-snippet__number&quot;&gt;0.0036830&lt;/span&gt; secs] [Times: user=&lt;span class=&quot;code-snippet__number&quot;&gt;0.00&lt;/span&gt; sys=&lt;span class=&quot;code-snippet__number&quot;&gt;0.00&lt;/span&gt;, real=&lt;span class=&quot;code-snippet__number&quot;&gt;0.00&lt;/span&gt; secs]&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;0.518&lt;/span&gt;: [&lt;span class=&quot;code-snippet__function&quot;&gt;Full &lt;span class=&quot;code-snippet__title&quot;&gt;GC&lt;/span&gt; &lt;span class=&quot;code-snippet__params&quot;&gt;(Ergonomics)&lt;/span&gt; [PSYoungGen: 1386K-&amp;gt;0&lt;span class=&quot;code-snippet__title&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;28672&lt;/span&gt;K)&lt;/span&gt;] [ParOldGen: 163848K-&amp;gt;165101&lt;span class=&quot;code-snippet__title&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;172032&lt;/span&gt;K)&lt;/span&gt;] 165234K-&amp;gt;165101&lt;span class=&quot;code-snippet__title&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;200704&lt;/span&gt;K)&lt;/span&gt;, [Metaspace: 3509K-&amp;gt;3509&lt;span class=&quot;code-snippet__title&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;1056768&lt;/span&gt;K)&lt;/span&gt;], 0.0103061 secs] [Times: user&lt;/span&gt;=&lt;span class=&quot;code-snippet__number&quot;&gt;0.05&lt;/span&gt; sys=&lt;span class=&quot;code-snippet__number&quot;&gt;0.00&lt;/span&gt;, real=&lt;span class=&quot;code-snippet__number&quot;&gt;0.01&lt;/span&gt; secs]&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;0.528&lt;/span&gt;: [GC (Allocation Failure) [PSYoungGen: &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;K-&amp;gt;&lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;K(&lt;span class=&quot;code-snippet__number&quot;&gt;28672&lt;/span&gt;K)] &lt;span class=&quot;code-snippet__number&quot;&gt;165101&lt;/span&gt;K-&amp;gt;&lt;span class=&quot;code-snippet__number&quot;&gt;165101&lt;/span&gt;K(&lt;span class=&quot;code-snippet__number&quot;&gt;200704&lt;/span&gt;K), &lt;span class=&quot;code-snippet__number&quot;&gt;0.0019968&lt;/span&gt; secs] [Times: user=&lt;span class=&quot;code-snippet__number&quot;&gt;0.00&lt;/span&gt; sys=&lt;span class=&quot;code-snippet__number&quot;&gt;0.00&lt;/span&gt;, real=&lt;span class=&quot;code-snippet__number&quot;&gt;0.00&lt;/span&gt; secs]&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__number&quot;&gt;0.530&lt;/span&gt;: [&lt;span class=&quot;code-snippet__function&quot;&gt;Full &lt;span class=&quot;code-snippet__title&quot;&gt;GC&lt;/span&gt; &lt;span class=&quot;code-snippet__params&quot;&gt;(Allocation Failure)&lt;/span&gt; [PSYoungGen: 0K-&amp;gt;0&lt;span class=&quot;code-snippet__title&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;28672&lt;/span&gt;K)&lt;/span&gt;] [ParOldGen: 165101K-&amp;gt;165082&lt;span class=&quot;code-snippet__title&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;172032&lt;/span&gt;K)&lt;/span&gt;] 165101K-&amp;gt;165082&lt;span class=&quot;code-snippet__title&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;200704&lt;/span&gt;K)&lt;/span&gt;, [Metaspace: 3509K-&amp;gt;3509&lt;span class=&quot;code-snippet__title&quot;&gt;K&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(&lt;span class=&quot;code-snippet__number&quot;&gt;1056768&lt;/span&gt;K)&lt;/span&gt;], 0.0108352 secs] [Times: user&lt;/span&gt;=&lt;span class=&quot;code-snippet__number&quot;&gt;0.03&lt;/span&gt; sys=&lt;span class=&quot;code-snippet__number&quot;&gt;0.00&lt;/span&gt;, real=&lt;span class=&quot;code-snippet__number&quot;&gt;0.01&lt;/span&gt; secs]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;å¦‚ä¸Š GC æ—¥å¿—èƒ½å¾ˆæ˜æ˜¾å‘ç°å¯¼è‡´ Full GC çš„é—®é¢˜æ˜¯ï¼šFull GC ä¹‹åï¼Œæ–°ç”Ÿä»£å†…å­˜æ²¡æœ‰å˜åŒ–ï¼Œè€å¹´ä»£å†…å­˜ä½¿ç”¨ä» 165101K é™ä½åˆ° 165082K ï¼ˆå‡ ä¹æ²¡æœ‰å˜åŒ–ï¼‰ã€‚è¿™ä¸ªç¨‹åºæœ€åå†…å­˜æº¢å‡ºäº†ï¼Œå› ä¸ºæ²¡æœ‰å¯ç”¨çš„å †å†…å­˜åˆ›å»º 70m çš„å¤§å¯¹è±¡ã€‚&lt;/p&gt;&lt;p&gt;ä½†æ˜¯ï¼Œç”Ÿäº§ç¯å¢ƒæ€»æ˜¯æœ‰å¥‡å¥‡æ€ªæ€ªçš„é—®é¢˜ï¼Œç”±äºæœåŠ¡éƒ¨ç½²åœ¨ K8s å®¹å™¨ï¼Œä¸”è¿ç»´æœ‰å¯¹æœåŠ¡å¿ƒè·³æ£€æµ‹ï¼Œå½“ç¨‹åºè§¦å‘ Full GC æ—¶ï¼Œæ•´ä¸ªç³»ç»Ÿ Stop Worldï¼Œè¿ç»­å¤šæ¬¡å¿ƒè·³æ£€æµ‹å¤±è´¥ï¼Œåˆ™åˆ¤å®šä¸ºå½“å‰èŠ‚ç‚¹å¯èƒ½å‡ºæ•…éšœï¼ˆç¡¬ä»¶ã€ç½‘ç»œã€BUG ç­‰ç­‰é—®é¢˜ï¼‰ï¼Œåˆ™ç›´æ¥æ‹‰å‡ºå½“å‰èŠ‚ç‚¹ï¼Œå¹¶ç«‹å³é‡å»ºï¼Œæ­¤æ—¶ä¹‹å‰æ‰“å°çš„ GC æ—¥å¿—éƒ½æ˜¯åœ¨å½“å‰å®¹å™¨å·å†…ï¼Œä¸€æ—¦é‡å»ºï¼Œæ‰€æœ‰æ—¥å¿—å…¨éƒ¨ä¸¢å¤±ï¼Œä¹Ÿå°±æ— æ³•é€šè¿‡ GC æ—¥å¿—æ’æŸ¥é—®é¢˜äº†ã€‚&lt;/p&gt;&lt;h3&gt;JVM ç›‘æ§åŸ‹ç‚¹æ’æŸ¥&lt;/h3&gt;&lt;p&gt;ä¸Šè¿° GC æ—¥å¿—ä¸¢å¤±é—®é¢˜åŸºæœ¬æ— è§£ï¼Œå‘ç”Ÿ GC åˆ™ç«‹å³é‡å»ºï¼Œé™¤éäººä¸ºå¹²é¢„ï¼Œå¦åˆ™å¾ˆéš¾æ‹¿åˆ°å½“æ—¶çš„ GC æ—¥å¿—ï¼Œä¸”å¾ˆéš¾é¢„çŸ¥ä¸‹æ¬¡å‘ç”Ÿ GC é—®é¢˜æ—¶é—´ï¼ˆå¦‚æœèƒ½ä¸ŠæŠ¥ GC æ—¥å­å°±ä¸ä¼šæœ‰è¿™æ ·çš„é—®é¢˜ï¼Œäº‹åå‘ç°æœ‰ï¼Œä½†æ˜¯æˆ‘æ²¡æ‰¾åˆ°ã€‚ã€‚ï¼‰ã€‚&lt;/p&gt;&lt;p&gt;æ­¤æ—¶ï¼Œå¦ä¸€ç§åŠæ³•å°±æ˜¯é€šè¿‡ JVM åŸ‹ç‚¹ç›‘æ§æ¥æ’æŸ¥é—®é¢˜ã€‚ä¼ä¸šåº”ç”¨éƒ½ä¼šé…å¤‡å®Œå¤‡çš„ JVM ç›‘æ§çœ‹æ¿ï¼Œå°±æ˜¯ä¸ºäº†èƒ½æ¸…æ™°æ˜äº†çš„çœ‹åˆ°â€œ&lt;strong&gt;äº‹æ•…ç°åœº&lt;/strong&gt;â€ï¼Œé€šè¿‡ç›‘æ§ï¼Œå¯ä»¥æ¸…æ¥šçš„çœ‹åˆ° JVM å†…éƒ¨åœ¨æ—¶é—´çº¿ä¸Šæ˜¯å¦‚ä½•åˆ†é…å†…å­˜åŠå›æ”¶å†…å­˜çš„ã€‚&lt;/p&gt;&lt;p&gt;JVM ç›‘æ§ç”¨äºç›‘æ§é‡è¦çš„ JVM æŒ‡æ ‡ï¼ŒåŒ…æ‹¬å †å†…å­˜ã€éå †å†…å­˜ã€ç›´æ¥ç¼“å†²åŒºã€å†…å­˜æ˜ å°„ç¼“å†²åŒºã€GC ç´¯è®¡ä¿¡æ¯ã€çº¿ç¨‹æ•°ç­‰ã€‚&lt;/p&gt;&lt;p&gt;ä¸»è¦å…³æ³¨çš„æ ¸å¿ƒæŒ‡æ ‡å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;GCï¼ˆåƒåœ¾æ”¶é›†ï¼‰ç¬æ—¶å’Œç´¯è®¡è¯¦æƒ…&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;FullGC æ¬¡æ•°&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;YoungGC æ¬¡æ•°&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;FullGC è€—æ—¶&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;YoungGC è€—æ—¶&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;å †å†…å­˜è¯¦æƒ…&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;å †å†…å­˜æ€»å’Œ&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;å †å†…å­˜è€å¹´ä»£å­—èŠ‚æ•°&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;å †å†…å­˜å¹´è½»ä»£ Survivor åŒºå­—èŠ‚æ•°&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;å †å†…å­˜å¹´è½»ä»£ Eden åŒºå­—èŠ‚æ•°&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;å·²æäº¤å†…å­˜å­—èŠ‚æ•°&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;å…ƒç©ºé—´å…ƒç©ºé—´å­—èŠ‚æ•°&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;éå †å†…å­˜&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;éå †å†…å­˜æäº¤å­—èŠ‚æ•°&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;éå †å†…å­˜åˆå§‹å­—èŠ‚æ•°&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;éå †å†…å­˜æœ€å¤§å­—èŠ‚æ•°&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;ç›´æ¥ç¼“å†²åŒº&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;DirectBuffer æ€»å¤§å°ï¼ˆå­—èŠ‚ï¼‰&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;DirectBuffer ä½¿ç”¨å¤§å°ï¼ˆå­—èŠ‚ï¼‰&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;JVM çº¿ç¨‹æ•°&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;çº¿ç¨‹æ€»æ•°é‡&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;æ­»é”çº¿ç¨‹æ•°é‡&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;æ–°å»ºçº¿ç¨‹æ•°é‡&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;é˜»å¡çº¿ç¨‹æ•°é‡&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;å¯è¿è¡Œçº¿ç¨‹æ•°é‡&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;ç»ˆç»“çº¿ç¨‹æ•°é‡&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;é™æ—¶ç­‰å¾…çº¿ç¨‹æ•°é‡&lt;/span&gt;&lt;span&gt;Â Â Â Â &lt;span&gt;â€¢&lt;/span&gt;ç­‰å¾…ä¸­çº¿ç¨‹æ•°é‡&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;å‘ç”Ÿ GC é—®é¢˜ï¼Œé‡ç‚¹å…³æ³¨çš„å°±æ˜¯è¿™å‡ ä¸ªæŒ‡æ ‡ï¼Œå¤§è‡´å°±èƒ½åœˆå®š GC é—®é¢˜äº†ã€‚&lt;/p&gt;&lt;h4&gt;å †å†…å­˜æ’æŸ¥&lt;/h4&gt;&lt;p&gt;é¦–å…ˆæŸ¥çœ‹å †å†…å­˜ï¼Œç¡®è®¤æ˜¯å¦æœ‰&lt;strong&gt;å†…å­˜æº¢å‡º&lt;/strong&gt;ï¼ˆæŒ‡æ— æ³•ç”³è¯·è¶³å¤Ÿçš„å†…å­˜å¯¼è‡´ï¼‰ï¼Œå¯¹å†…ç›‘æ§å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;88&quot; data-backw=&quot;319&quot; data-ratio=&quot;0.27719821162444114&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/VaAN3q859ynOhF5Atoz92HrmEicafXLcUwCFCT0Z4Sj2EMyq863FEEuibtmBB6U8xyC6SVp6u73qP9ksUGujMPfQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1342&quot; title=&quot;null&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;span&gt;å¯ä»¥çœ‹åˆ°å‘ç”Ÿ Full GC åï¼Œå †å†…å­˜æ˜æ˜¾é™ä½äº†å¾ˆå¤šï¼Œä½†æ˜¯åœ¨æœªå‘ç”Ÿå¤§é‡ Full GC åä¹Ÿæœ‰å†…å­˜å›æ”¶åˆ°å’Œå…¨é‡ GC åŒç­‰ä½ç½®ï¼Œæ‰€ä»¥å¯ä»¥æ–­å®šå †å†…å­˜æ˜¯å¯ä»¥æ­£å¸¸å›æ”¶çš„ï¼Œä¸æ˜¯å¯¼è‡´å¤§é‡ Full GC çš„å…ƒå‡¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;h4&gt;éå †å†…å­˜æ’æŸ¥&lt;/h4&gt;&lt;p&gt;éå †å†…å­˜æŒ‡ Metaspace åŒºåŸŸï¼Œç›‘æ§åŸ‹ç‚¹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;88&quot; data-backw=&quot;319&quot; data-ratio=&quot;0.27596439169139464&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/VaAN3q859ynOhF5Atoz92HrmEicafXLcUnI2jhwel1s8cUDEY8gGteB6ic73XZU4oK5BbuUJWnxKhGuM2SfAVeOA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1348&quot; title=&quot;null&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å¯ä»¥çœ‹åˆ°å‘ç”Ÿå‘Šè­¦åï¼Œéå †å†…å­˜ç¬é—´å›æ”¶å¾ˆå¤šï¼ˆå› ä¸ºæœåŠ¡å™¨è¢«å¥åº·æ£€æŸ¥åˆ¤å®šå¤±æ•ˆåé‡å»ºï¼Œç›¸å½“äºé‡æ–°å¯åŠ¨ï¼ŒJVM é‡æ–°åˆå§‹åŒ–ï¼‰ï¼Œæ­¤å¤„å¦‚æœæœ‰ GC æ’æŸ¥ç»éªŒçš„äººä¸€å®šèƒ½ç«‹å³ç¬ƒå®šï¼Œmetaspace æ˜¯æœ‰é—®é¢˜çš„ã€‚&lt;/p&gt;&lt;p&gt;Metaspace æ˜¯ç”¨æ¥å¹²å˜›çš„ï¼ŸJDK8 çš„åˆ°æ¥ï¼ŒJVM ä¸å†æœ‰ PermGenï¼ˆæ°¸ä¹…ä»£ï¼‰ï¼Œä½†ç±»çš„å…ƒæ•°æ®ä¿¡æ¯ï¼ˆmetadataï¼‰è¿˜åœ¨ï¼Œåªä¸è¿‡ä¸å†æ˜¯å­˜å‚¨åœ¨è¿ç»­çš„å †ç©ºé—´ä¸Šï¼Œè€Œæ˜¯ç§»åŠ¨åˆ°å«åš â€œMetaspaceâ€ çš„æœ¬åœ°å†…å­˜ï¼ˆNative memoryï¼‰ä¸­ã€‚&lt;/p&gt;&lt;p&gt;é‚£ä¹ˆä½•æ—¶ä¼šåŠ è½½ç±»ä¿¡æ¯å‘¢ï¼Ÿ&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;ç¨‹åºè¿è¡Œæ—¶ï¼šå½“è¿è¡Œ Java ç¨‹åºæ—¶ï¼Œè¯¥ç¨‹åºæ‰€éœ€çš„ç±»å’Œæ–¹æ³•ã€‚&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;ç±»è¢«å¼•ç”¨æ—¶ï¼šå½“ç¨‹åºé¦–æ¬¡å¼•ç”¨æŸä¸ªç±»æ—¶ï¼ŒåŠ è½½è¯¥ç±»ã€‚&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;åå°„ï¼šå½“ä½¿ç”¨åå°„ API è®¿é—®æŸä¸ªç±»æ—¶ï¼ŒåŠ è½½è¯¥ç±»ã€‚&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;åŠ¨æ€ä»£ç†ï¼šå½“ä½¿ç”¨åŠ¨æ€ä»£ç†åˆ›å»ºä»£ç†å¯¹è±¡æ—¶ï¼ŒåŠ è½½è¯¥å¯¹è±¡æ‰€éœ€çš„ç±»ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;ç”±ä¸Šå¾—å‡ºç»“è®ºï¼Œå¦‚æœä¸€ä¸ªæœåŠ¡å†…æ²¡æœ‰å¤§é‡çš„åå°„æˆ–è€…åŠ¨æ€ä»£ç†ç­‰ç±»åŠ è½½éœ€æ±‚æ—¶ï¼Œè®²é“ç†ï¼Œç¨‹åºå¯åŠ¨åï¼Œç±»çš„åŠ è½½æ•°é‡åº”è¯¥æ˜¯æ³¢åŠ¨å¾ˆå°çš„ï¼ˆä¸æ’é™¤ä¸€äº›å¼‚å¸¸å †æ ˆåå°„æ—¶ä¹Ÿä¼šåŠ è½½ç±»å¯¼è‡´å¢åŠ ï¼‰ï¼Œä½†æ˜¯å¦‚ä¸Šç›‘æ§æ˜¾ç¤ºï¼ŒGC åï¼Œmetaspace çš„å†…å­˜ä½¿ç”¨é‡ä¸€ç›´ç¼“æ­¥å¢é•¿ï¼Œå³ç¨‹åºå†…ä¸åœåœ°åˆ¶é€ â€œç±»â€ã€‚&lt;/p&gt;&lt;p&gt;æŸ¥çœ‹ JVM åŠ è½½ç±»ç›‘æ§å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;88&quot; data-backw=&quot;319&quot; data-ratio=&quot;0.2746268656716418&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/VaAN3q859ynOhF5Atoz92HrmEicafXLcUQXWuflFQYDoMbBHKmAhTx9lJNR499iaEJGSJXGk1LR3m6VzQ1a4VDGA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1340&quot; title=&quot;null&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ç”±ä¸Šç›‘æ§ï¼Œç¡®å®æ˜¯åŠ è½½äº†å¤§é‡çš„ç±»ï¼Œæ•°é‡è¶‹åŠ¿å’Œéå †ä½¿ç”¨é‡è¶‹åŠ¿å»åˆã€‚&lt;/p&gt;&lt;p&gt;æŸ¥çœ‹å½“å‰ JVM è®¾ç½®çš„éå †å†…å­˜å¤§å°å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;556&quot; data-backw=&quot;319&quot; data-ratio=&quot;1.7415143603133159&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/VaAN3q859ynOhF5Atoz92HrmEicafXLcUH0UU5BP2NJxQC0hPwnRQ8CbszOibibAx5qNGqBYW4dlWAeXNMfFAbgtg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;766&quot; title=&quot;null&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;MetaspaceSize &amp;amp; MaxMetaspaceSize = 1024 Mï¼Œç”±ä¸Šé¢éå †å†…å­˜ä½¿ç”¨ç›‘æ§å¾—å‡ºï¼Œä½¿ç”¨é‡å·²æ¥è¿‘ 1000 Mï¼Œæ— æ³•åœ¨åˆ†é…è¶³å¤Ÿçš„å†…å­˜æ¥åŠ è½½ç±»ï¼Œæœ€ç»ˆå¯¼è‡´å‘ç”Ÿ Full GC é—®é¢˜ã€‚&lt;/p&gt;&lt;h3&gt;ç¨‹åºä»£ç æ’æŸ¥&lt;/h3&gt;&lt;p&gt;ç”±ä¸Šé¢æ’æŸ¥å¾—å‡ºçš„ç»“è®ºï¼š&lt;strong&gt;ç¨‹åºå†…åœ¨å¤§é‡çš„åˆ›å»ºç±»å¯¼è‡´éå †å†…å­˜è¢«æ‰“çˆ†&lt;/strong&gt;ã€‚ç»“åˆå½“å‰æœåŠ¡å†…å­˜åœ¨å¤§é‡ä½¿ç”¨ Groovy åŠ¨æ€è„šæœ¬åŠŸèƒ½ï¼Œå¤§æ¦‚ç‡åº”è¯¥æ˜¯åˆ›å»ºè„šæœ¬å‡ºäº†é—®é¢˜ï¼Œè„šæœ¬åˆ›å»ºåŠ¨æ€ç±»ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;java&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;static&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GroovyObject&lt;/span&gt;&lt;span&gt; buildGroovyObject&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;String&lt;/span&gt;&lt;span&gt; script&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;GroovyClassLoader&lt;/span&gt;&lt;span&gt; classLoader &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GroovyClassLoader&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;Class&lt;/span&gt;&lt;span&gt;&amp;lt;?&amp;gt;&lt;/span&gt;&lt;span&gt; groovyClass &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; classLoader&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;parseClass&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;GroovyObject&lt;/span&gt;&lt;span&gt; groovyObject &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;GroovyObject&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt; groovyClass&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;newInstance&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;        classLoader&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;clearCache&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;        log&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;info&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;groovy buildScript success: {}&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; groovyObject&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; groovyObject&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;Exception&lt;/span&gt;&lt;span&gt; e&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;RuntimeException&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;buildScript error&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; e&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;finally&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;            classLoader&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;close&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;IOException&lt;/span&gt;&lt;span&gt; e&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;            log&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;error&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;close GroovyClassLoader error&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; e&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;çº¿ä¸Šæ‰“å¼€æ—¥å¿—ï¼Œç¡®å®è¯æ˜äº†åœ¨ä¸åœçš„åˆ›å»ºç±»ã€‚&lt;/p&gt;&lt;p&gt;è„šæœ¬åˆ›å»ºç±»å¯¼è‡´å †å†…å­˜è¢«æ‰“çˆ†ï¼Œä¹‹é—´ä¹Ÿæ˜¯è¸©è¿‡å‘çš„ï¼Œé’ˆå¯¹åŒä¸€ä¸ªè„šæœ¬ï¼ˆMD5 å€¼ç›¸åŒï¼‰ï¼Œåˆ™ä¼šç›´æ¥æ‹¿ç¼“å­˜ï¼Œä¸ä¼šé‡å¤åˆ›å»ºç±»ï¼Œç¼“å­˜ check é€»è¾‘å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;java&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;static&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GroovyObject&lt;/span&gt;&lt;span&gt; buildScript&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;String&lt;/span&gt;&lt;span&gt; scriptId&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;String&lt;/span&gt;&lt;span&gt; script&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Validate&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;notEmpty&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;scriptId&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;scriptId is empty&quot;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Validate&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;notEmpty&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;scriptId&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;script is empty&quot;&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// å°è¯•ç¼“å­˜è·å–&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;String&lt;/span&gt;&lt;span&gt; currScriptMD5 &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;DigestUtils&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;md5DigestAsHex&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;getBytes&lt;/span&gt;&lt;span&gt;());&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;GROOVY_OBJECT_CACHE_MAP&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;containsKey&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;scriptId&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;            &lt;/span&gt;&lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span&gt; currScriptMD5&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;equals&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;GROOVY_OBJECT_CACHE_MAP&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;scriptId&lt;/span&gt;&lt;span&gt;).&lt;/span&gt;&lt;span&gt;getScriptMD5&lt;/span&gt;&lt;span&gt;()))&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;        log&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;info&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;groovyObjectCache hit, scriptId: {}&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; scriptId&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; GROOVY_OBJECT_CACHE_MAP&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;scriptId&lt;/span&gt;&lt;span&gt;).&lt;/span&gt;&lt;span&gt;getGroovyObject&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;// åˆ›å»º&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;GroovyObject&lt;/span&gt;&lt;span&gt; groovyObject &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; buildGroovyObject&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;// å¡å…¥ç¼“å­˜&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;        GROOVY_OBJECT_CACHE_MAP&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;put&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;scriptId&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;GroovyCacheData&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;builder&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;scriptMD5&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;currScriptMD5&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;groovyObject&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;groovyObject&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;                &lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;build&lt;/span&gt;&lt;span&gt;());&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;Exception&lt;/span&gt;&lt;span&gt; e&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;        &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;RuntimeException&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;String&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;format&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;scriptId: %s buildGroovyObject error&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; scriptId&lt;/span&gt;&lt;span&gt;),&lt;/span&gt;&lt;span&gt; e&lt;/span&gt;&lt;span&gt;);&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; GROOVY_OBJECT_CACHE_MAP&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;scriptId&lt;/span&gt;&lt;span&gt;).&lt;/span&gt;&lt;span&gt;getGroovyObject&lt;/span&gt;&lt;span&gt;();&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;æ­¤å¤„ä»£ç é€»è¾‘åœ¨ä¹‹å‰çš„æµ‹è¯•ä¸­éƒ½æ˜¯åå¤éªŒè¯è¿‡çš„ï¼Œä¸ä¼šå­˜åœ¨é—®é¢˜ï¼Œå³åªæœ‰ç¼“å­˜ Key å‡ºé—®é¢˜å¯¼è‡´äº†ç±»çš„é‡å¤åŠ è½½ã€‚ç»“åˆæœ€è¿‘ä¿®æ”¹ä¸Šçº¿çš„é€»è¾‘ï¼Œæ’æŸ¥åå‘ç°ï¼Œ&lt;strong&gt;scriptId å­˜åœ¨é‡å¤çš„å¯èƒ½ï¼Œå¯¼è‡´ä¸åŒè„šæœ¬ï¼Œç›¸åŒ scriptId ä¸åœé‡å¤åŠ è½½&lt;/strong&gt;ï¼ˆåŠ è½½çš„é¢‘æ¬¡ 10 åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡ï¼Œæ‰€ä»¥éå †ä½¿ç”¨ç¼“æ…¢ä¸Šå‡ï¼‰ã€‚&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ­¤å¤„åŸ‹äº†ä¸€ä¸ªå°å‘&lt;/strong&gt;ï¼šåŠ è½½çš„ç±»ä½¿ç”¨ Map å­˜å‚¨çš„ï¼Œå³åŒä¸€ä¸ª cacheKey è°ƒç”¨ Map.put() æ–¹æ³•ï¼Œé‡å¤åŠ è½½çš„ç±»ä¼šè¢«åé¢åŠ è½½çš„ç±»ç»™æ›¿æ¢æ‰ï¼Œå³ä¹‹å‰åŠ è½½çš„ç±»å·²ç»ä¸åœ¨è¢« Map æ‰€â€œæŒæœ‰â€ï¼Œä¼šè¢«åƒåœ¾å›æ”¶å™¨å›æ”¶æ‰ï¼ŒæŒ‰ç†æ¥è¯´ Metaspace ä¸åº”è¯¥ä¸€ç›´å¢é•¿ä¸‹å»ï¼ï¼Ÿ&lt;/p&gt;&lt;p&gt;æç¤ºï¼š&lt;strong&gt;ç±»åŠ è½½ä¸ Groovy ç±»åŠ è½½ã€Metaspace ä½•æ—¶ä¼šè¢«å›æ”¶ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;ç”±äºç¯‡å¹…åŸå› ï¼Œæœ¬æ–‡å°±ä¸åœ¨æ­¤å¤„ç»†ç©¶åŸå› äº†ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹è‡ªè¡Œ Google æˆ–è€…å…³æ³¨ä¸€ä¸‹æˆ‘ï¼Œåç»­æˆ‘å†ä¸“é—¨å¼€ä¸€ç« è¯¦è§£ä¸‹åŸå› ã€‚&lt;/p&gt;&lt;h2&gt;æ€»ç»“&lt;/h2&gt;&lt;p&gt;çŸ¥å…¶ç„¶çŸ¥å…¶æ‰€ä»¥ç„¶ã€‚&lt;/p&gt;&lt;p&gt;æƒ³è¦ç³»ç»Ÿæ€§åœ°æŒæ¡ GC é—®é¢˜å¤„ç†æ–¹æ³•ï¼Œè¿˜æ˜¯å¾—äº†è§£ GC çš„åŸºç¡€ï¼šåŸºç¡€æ¦‚å¿µã€å†…å­˜åˆ’åˆ†ã€åˆ†é…å¯¹è±¡ã€æ”¶é›†å¯¹è±¡ã€æ”¶é›†å™¨ç­‰ã€‚æŒæ¡å¸¸ç”¨çš„åˆ†æ GC é—®é¢˜çš„å·¥å…·ï¼Œå¦‚Â &lt;span&gt;gceasy.io&lt;sup&gt;[1]&lt;/sup&gt;&lt;/span&gt;Â åœ¨çº¿ GC æ—¥å¿—åˆ†æå·¥å…·ï¼Œæ­¤å¤„ç¬”è€…å‚ç…§äº†ç¾å›¢æŠ€æœ¯å›¢é˜Ÿæ–‡ç« Â &lt;span&gt;Java ä¸­ 9 ç§å¸¸è§çš„ CMS GC é—®é¢˜åˆ†æä¸è§£å†³&lt;sup&gt;[2]&lt;/sup&gt;&lt;/span&gt;Â æ”¶ç›ŠåŒªæµ…ï¼Œæ¨èå¤§å®¶é˜…è¯»ã€‚&lt;/p&gt;&lt;h3&gt;References&lt;/h3&gt;&lt;p&gt;&lt;code&gt;[1]&lt;/code&gt;Â gceasy.io:Â &lt;em&gt;https://gceasy.io/&lt;/em&gt;&lt;br/&gt;&lt;code&gt;[2]&lt;/code&gt;Â Java ä¸­ 9 ç§å¸¸è§çš„ CMS GC é—®é¢˜åˆ†æä¸è§£å†³:Â &lt;em&gt;https://tech.meituan.com/2020/11/12/java-9-cms-gc.html&lt;/em&gt;&lt;/p&gt;&lt;section&gt;&lt;mp-common-profile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;Mzg3MTIwNjY3MA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/VaAN3q859ylWmoHoic1N6VWVqet95D1VKZibeKjId2zCve2On5VBFRO6fMpdCYiaBgJstyKKxddFYEyOqhDSTCPWA/0?wx_fmt=png&quot; data-nickname=&quot;å’•å’•é¸¡æŠ€æœ¯ä¸“æ &quot; data-alias=&quot;guguji_fly&quot; data-signature=&quot;æ“…é•¿é£æ§é¢†åŸŸç³»ç»Ÿç ”å‘ï¼Œæœ‰ç€ä¸°å¯Œçš„å¤§å‹ç³»ç»Ÿè®¾è®¡ã€å¼€å‘å’Œè°ƒä¼˜çš„ç»éªŒï¼Œåœ¨ä¸æ–­æ¢ç´¢å’Œå­¦ä¹ çš„è¿‡ç¨‹ä¸­ï¼Œç§¯ç´¯äº†å®è´µçš„ç¼–ç¨‹ç»éªŒï¼Œå¸Œæœ›æˆ‘åˆ†äº«çš„æ–‡ç« èƒ½å¤Ÿç»™æ¯ä¸€ä½è¯»è€…å¸¦æ¥å¸®åŠ©ï¼&quot; data-from=&quot;0&quot; data-is_biz_ban=&quot;0&quot; data-weui-theme=&quot;light&quot;/&gt;&lt;/section&gt;&lt;h2&gt;å¾€æœŸç²¾å½©&lt;/h2&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=Mzg3MTIwNjY3MA==&amp;amp;mid=2247483756&amp;amp;idx=1&amp;amp;sn=ad2ed1bb69de534299aa3e8f22ddee97&amp;amp;scene=21#wechat_redirect&quot; title=&quot;ä» 0 åˆ° 1 æ™ºèƒ½é£æ§å†³ç­–å¼•æ“æ„å»º&quot; data-linktype=&quot;2&quot;&gt;ä» 0 åˆ° 1 æ™ºèƒ½é£æ§å†³ç­–å¼•æ“æ„å»º&lt;/a&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=Mzg3MTIwNjY3MA==&amp;amp;mid=2247483737&amp;amp;idx=1&amp;amp;sn=857c2fa9e3514e2da0d0a7298dfa7f7a&amp;amp;scene=21#wechat_redirect&quot; title=&quot;æ€§èƒ½ä¼˜åŒ–å¿…å¤‡â€”â€”ç«ç„°å›¾&quot; data-linktype=&quot;2&quot;&gt;æ€§èƒ½ä¼˜åŒ–å¿…å¤‡â€”â€”ç«ç„°å›¾&lt;/a&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=Mzg3MTIwNjY3MA==&amp;amp;mid=2247483745&amp;amp;idx=1&amp;amp;sn=e10bec68e51a8dca226cacce9a5258d5&amp;amp;scene=21#wechat_redirect&quot; title=&quot;æˆ‘æ˜¯æ€ä¹ˆå…¥è¡Œåšé£æ§çš„&quot; data-linktype=&quot;2&quot;&gt;æˆ‘æ˜¯æ€ä¹ˆå…¥è¡Œåšé£æ§çš„&lt;/a&gt;&lt;/span&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;æ¬¢è¿å…³æ³¨å…¬ä¼—å·ï¼šå’•å’•é¸¡æŠ€æœ¯ä¸“æ &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;ä¸ªäººæŠ€æœ¯åšå®¢ï¼šhttps:&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3435185185185185&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/VaAN3q859yl3FVnvL8iaQsBY76PNfeeEAibp11q60ibNNS04LsibAvpJEkPIno9qrxiaPcF1uDDUtM2icHAnJpyvK38Q/640?wx_fmt=png&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&amp;amp;wx_co=1&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;&lt;br/&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;mp-style-type data-value=&quot;3&quot;/&gt;&lt;/p&gt;&lt;/div&gt;

          
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>8ee264fd966e6878821012383963e47c</guid>
<title>å®æ—¶æ•°ä»“æ¶æ„åœ¨æµåˆ©è¯´çš„å®è·µ</title>
<link>https://toutiao.io/k/1a7x7ay</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;èƒŒæ™¯&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æµåˆ©è¯´æœ€å¼€å§‹çš„å®æ—¶æ•°ä»“æ˜¯åŸºäº Flink 1.9 æ­å»ºçš„ï¼Œå½¼æ—¶Flink SQL çš„ç”Ÿæ€ä¹Ÿä¸å¤Ÿæˆç†Ÿï¼Œæˆ‘ä»¬æŠ•å…¥äº†å¤§é‡çš„ç²¾åŠ›ï¼Œä½¿ç”¨ Yarn åšèµ„æºç®¡ç†ï¼Œä¿®æ”¹äº† SQL-Client ç­‰ç»„ä»¶ï¼Œä¼˜åŒ–æäº¤æ–¹å¼æ¥æé«˜å¼€å‘æ•ˆç‡ï¼Œä½†æ˜¯éšç€ Flink ç¤¾åŒºçš„å¿«é€Ÿå‘å±•ï¼Œæ­¤æ—¶ Flink 1.13 ç‰ˆæœ¬å·²ç»ç›¸å¯¹ç¨³å®šï¼ŒFlink SQL connector ä¹Ÿæ›´åŠ å®Œå–„ï¼Œå¯ä»¥å°† Flink on K8s èµ„æºç®¡ç†åº”ç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å®æ—¶æ•°ä»“ä¸­ Flink çš„ç‰ˆæœ¬å¾€å‰æ¨è¿›äº†ä¸€å¤§æ­¥ï¼Œå¹¶éšå³å¸¦åŠ¨äº†å…¶ä»–ç”Ÿæ€ç»„ä»¶çš„å¼•å…¥æˆ–å‡çº§ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å®æ—¶æ•°ä»“å¯ä»¥ä¸ºæˆ‘ä»¬å¸¦æ¥ä»€ä¹ˆ&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¾—ç›Šäºå¼€æºç¤¾åŒºå¯¹å®æ—¶è®¡ç®—çš„æ¨åŠ¨ï¼Œé’ˆå¯¹æˆ‘ä»¬å½“ä¸‹çš„æ•°æ®å¹³å°çš„æƒ…å†µï¼Œå®æ—¶æ•°ä»“èƒ½å¤Ÿä¸ºæˆ‘ä»¬è§£å†³çš„æ˜¯&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;æ•°æ®åŒæ­¥&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç§’çº§åˆ«å®æ—¶æ•°æ®å¤„ç†&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ‰“é€šæ¹–ä¸Šæ•°æ®è¾¾åˆ°å®æ—¶ç¦»çº¿ä¸€ä½“åŒ–&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æŠ€æœ¯æ–¹æ¡ˆé€‰å‹&lt;/span&gt;&lt;/h1&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ•°æ®å­˜å‚¨æ–¹æ¡ˆé€‰å‹&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç°åœ¨ä¸»æµçš„æ•°æ®ç³Šå­˜å‚¨æ–¹æ¡ˆä¸»è¦æœ‰ Deltaã€Hudi å’Œ Icebergï¼ŒDelta ä¸ Spark æ˜¯æ·±åº¦èåˆçš„ï¼Œä½†ç”±äºæˆ‘ä»¬å·²ç»é€‰å®šäº† Flink ä½œä¸ºå®æ—¶è®¡ç®—å¼•æ“ï¼Œæ•…æ•°æ®æ¹–å­˜å‚¨æ–¹æ¡ˆä¼šåœ¨ Hudi å’Œ Iceberg ä¸­è¿›è¡Œæ¯”è¾ƒï¼Œæ¯”è¾ƒçš„è¯¦æƒ…å¦‚ä¸‹ã€‚&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;æ¯”è¾ƒç»´åº¦&lt;/th&gt;&lt;th&gt;Hudi&lt;/th&gt;&lt;th&gt;Iceberg&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;äº‘å‚å•†æ”¯æŒç¨‹åº¦&lt;/td&gt;&lt;td&gt;é˜¿é‡Œäº‘ã€AWS&lt;/td&gt;&lt;td&gt;é˜¿é‡Œäº‘&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;å°æ–‡ä»¶åˆå¹¶&lt;/td&gt;&lt;td&gt;è‡ªåŠ¨å¤„ç†&lt;/td&gt;&lt;td&gt;V1 ç‰ˆæœ¬è¡¨æ”¯æŒï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ç¨³å®šæ€§&lt;/td&gt;&lt;td&gt;ç¨³å®š&lt;/td&gt;&lt;td&gt;ç¨³å®š&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;æ˜¯å¦æ”¯æŒsql&lt;/td&gt;&lt;td&gt;æ”¯æŒ&lt;/td&gt;&lt;td&gt;æ”¯æŒ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;æ›´æ–°åˆ é™¤æ”¯æŒæƒ…å†µ&lt;/td&gt;&lt;td&gt;æ”¯æŒ&lt;/td&gt;&lt;td&gt;V2 ç‰ˆæœ¬è¡¨æ”¯æŒ&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ä¸»æµæ‰§è¡Œå¼•æ“æ”¯æŒ&lt;/td&gt;&lt;td&gt;Flinkã€Sparkã€Trinoã€Presto&lt;/td&gt;&lt;td&gt;Flinkã€Sparkã€Trinoã€Presto&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;è¯­è¨€æ”¯æŒç¨‹åº¦&lt;/td&gt;&lt;td&gt;Javaã€Scalaã€Python åŠ SQL&lt;/td&gt;&lt;td&gt;Javaã€Scalaã€Python åŠ SQL&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±äº Iceberg V1 ç‰ˆæœ¬è¡¨ä¸æ”¯æŒ Upsert ï¼ŒIceberg V2ç‰ˆæœ¬æ”¯æŒ Upsert ä½†æ˜¯åœ¨å°æ–‡ä»¶åˆå¹¶æ—¶å­˜åœ¨é—®é¢˜ï¼Œä¸” Iceberg éœ€è¦é€šè¿‡é¢å¤–ä»»åŠ¡æ¥è¿›è¡Œå°æ–‡ä»¶åˆå¹¶ï¼Œæœ€ç»ˆé€‰æ‹© Hudi ä½œä¸ºæ•°æ®æ¹–å­˜å‚¨æ–¹æ¡ˆã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Flink å¼€å‘å¹³å°é€‰å‹&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“å‰æµåˆ©è¯´å¤§æ•°æ®ä½“ç³»ä¾æ‰˜äº Aliyun EMR é›†æˆ Hadoop ç¯å¢ƒï¼Œç»´æŠ¤å®æ—¶æ•°æ®è¿ç»´å¹³å°æˆæœ¬è¾ƒé«˜ï¼Œæ‰€ä»¥è°ƒç ”ä¹‹åé€‰æ‹©äº†é˜¿é‡Œäº‘å®æ—¶è®¡ç®— Flink ï¼ˆVVPï¼‰ä½œä¸ºæˆ‘ä»¬çš„å¼€å‘å¹³å°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬å…³æ³¨ VVP å…·å¤‡çš„èƒ½åŠ›ä¸»è¦æœ‰å¦‚ä¸‹å‡ ä¸ªæ–¹é¢ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;åŸºäº K8s è¿›è¡Œéƒ¨ç½²ï¼Œæ”¯æŒ Session å’Œ Appliction æ¨¡å¼æäº¤ä»»åŠ¡ï¼Œæ”¯æŒå¼¹æ€§ä¼¸ç¼©&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Flink SQL å¼€å‘ç•Œé¢ï¼Œäº¤äº’å¼çš„ Debug æ•°æ®è¾“å‡ºï¼Œä»£ç ç‰ˆæœ¬æ§åˆ¶&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é›†ç¾¤é«˜å¯ç”¨&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å…ƒæ•°æ®ç®¡ç†ï¼Œæ”¯æŒæ¥å…¥ç‹¬ç«‹çš„ Hive Metastore&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è‡ªå®šä¹‰ Connector å’Œ UDF&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Checkpoint æ”¯æŒè¯»å†™ OSS&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä»»åŠ¡ç›‘æ§æ”¯æŒå¤–éƒ¨çš„ Prometheus&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¤šç‰ˆæœ¬ä»»åŠ¡&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;VVP æé«˜äº†æˆ‘ä»¬çš„å¼€å‘æ•ˆç‡ï¼Œè®©æˆ‘ä»¬æ›´åŠ ä¸“æ³¨äºå®ç°æ•°æ®æ¶æ„ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç»´è¡¨å­˜å‚¨æ–¹æ¡ˆé€‰å‹&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Flink å®˜æ–¹æä¾› Connector çš„æ”¯æŒæƒ…å†µè§å®˜ç½‘ Supported Connectorsï¼Œæ ¹æ®ä¸šåŠ¡æƒ…å†µæ•´ç†å¦‚ä¸‹å‡ ç§ç±»å‹ã€‚&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Version&lt;/th&gt;&lt;th&gt;Source&lt;/th&gt;&lt;th&gt;Sink&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;JDBC&lt;/td&gt;&lt;td&gt;&lt;br/&gt;&lt;/td&gt;&lt;td&gt;Bounded Scan, Lookup&lt;/td&gt;&lt;td&gt;Streaming Sink, Batch Sink&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;HBase&lt;/td&gt;&lt;td&gt;1.4.x &amp;amp; 2.2.x&lt;/td&gt;&lt;td&gt;Bounded Scan, Lookup&lt;/td&gt;&lt;td&gt;Streaming Sink, Batch Sink&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Elasticsearch&lt;/td&gt;&lt;td&gt;6.x &amp;amp; 7.x&lt;/td&gt;&lt;td&gt;Not supported&lt;/td&gt;&lt;td&gt;Streaming Sink, Batch Sink&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»ä¸Šè¡¨ä¸­å¯ä»¥çœ‹å‡ºï¼ŒFlink å®˜æ–¹å·²ç»å¯ä»¥ä½¿ç”¨ JDBC å’Œ HBase ä½œä¸ºç»´è¡¨è¿›è¡Œ Lookup Joinï¼Œç‰¹æ€§å¦‚ä¸‹ã€‚&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;ä¼˜ç‚¹&lt;/th&gt;&lt;th&gt;ç¼ºç‚¹&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;JDBC&lt;/td&gt;&lt;td&gt;å®˜æ–¹æ”¯æŒï¼Œå¯ç›´æ¥ä½¿ç”¨ä¸šåŠ¡åº“ä½œä¸ºç»´è¡¨ï¼Œæ— éœ€æ•°æ®åŒæ­¥&lt;/td&gt;&lt;td&gt;ä¸šåŠ¡é«˜å³°æ—¶å¯¹æ•°æ®åº“æ€§èƒ½æœ‰è¾ƒå¤§æŸè€—ï¼Œå¯èƒ½å¯¹ä¸šåŠ¡é€ æˆå½±å“&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;HBase&lt;/td&gt;&lt;td&gt;å®˜æ–¹æ”¯æŒï¼Œåˆ†å¸ƒå¼æœåŠ¡ï¼Œå¯æ”¯æŒé«˜QPSï¼Œé€šè¿‡ RowKey å¯è¿›è¡Œå¿«é€Ÿæ£€ç´¢&lt;/td&gt;&lt;td&gt;ä»…æ”¯æŒé€šè¿‡ RowKey è¿›è¡Œå…³è”ï¼ŒFlink 1.13.x å¯¹åˆ é™¤æ“ä½œå­˜åœ¨ä¸€å®šäº‰è®®&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Elasticsearch&lt;/td&gt;&lt;td&gt;åˆ†å¸ƒå¼æœåŠ¡ï¼Œå¯æ”¯æŒé«˜ QPSï¼Œå¯é€šè¿‡å”¯ä¸€ Id è¿›è¡Œæ£€ç´¢ï¼Œä¹Ÿå¯é€šè¿‡å…¶ä»–å­—æ®µè¿›è¡Œå…³è”&lt;/td&gt;&lt;td&gt;å®˜æ–¹ä¸æ”¯æŒï¼Œç»´è¡¨è¿‡å¤§ï¼Œæ•ˆç‡è¾ƒ HBase ä½&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»¼ä¸Šï¼Œå› å†å²æ•°æ®ä¸­å­˜åœ¨éœ€è¦é€šè¿‡å¤šä¸ªå­—æ®µè¿›è¡Œå…³è”çš„æƒ…å†µï¼Œéœ€è¦é€šè¿‡éå”¯ä¸€ id è¿›è¡Œå…³è”ï¼Œå¦‚æœä½¿ç”¨ HBase éœ€å°†ä¸€ä»½æ•°æ®å­˜å‚¨ä¸ºå¤šä»½æ•°æ®ï¼Œä¼šé€ æˆä¸€å®šèµ„æºæµªè´¹ï¼Œä¸”ä¼šå¯¼è‡´ç³»ç»Ÿæ¯”è¾ƒå¤æ‚ï¼Œä¸åˆ©äºåç»­çš„ç»´æŠ¤å’Œç®¡ç†ã€‚å¯¹äº Elasticsearch æ£€ç´¢è¾ƒæ…¢ï¼Œå¯ä»¥åœ¨ä¸šåŠ¡å…è®¸çš„èŒƒå›´å†…ï¼Œé€šè¿‡ Cache æ¥è¿›è¡Œä¸€å®šç¨‹åº¦ä¼˜åŒ–ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Connector å¼€å‘&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŸºäºå®˜æ–¹æä¾›çš„æ–‡æ¡£ã€æ¥å£å’Œæˆ‘ä»¬çš„éœ€æ±‚ï¼Œæˆ‘ä»¬å¼€å‘äº† Flink-Elasticsearch-connector å¹¶åŒæ—¶æ”¯æŒ Source (Scan, Lookup)å’Œ Sink(Streaming Sink, Batch Sink)ï¼Œå³è¯»å–å’Œå†™å…¥æ•°æ®ã€‚&lt;/p&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å®æ—¶æ•°ä»“æ•´ä½“æ¶æ„&lt;/span&gt;&lt;/h1&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.7686746987951807&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/IJlqcHFxF3Yib8Zns3nBy1RnTia7rUfiaoI32LUEFOeSsQd8cw5LHALHcY3hgHcuaytF1jYUocmf06ngWKKcibNJBA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;830&quot;/&gt;&lt;span&gt;å®æ—¶æ•°ä»“æ¶æ„å›¾&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®æ—¶æ•°ä»“å¹³å°æ¶æ„å›¾å¦‚ä¸Šï¼Œå­˜å‚¨æ‰˜ç®¡äº Kafka å’Œ OSSï¼ŒOSS ä¸­çš„è¡¨ä¸»è¦æ˜¯ Hudi ç±»å‹ï¼ŒVVP æ˜¯é˜¿é‡Œäº‘æ‰˜ç®¡çš„å®æ—¶è®¡ç®—å¹³å°ï¼Œä¸»è¦æä¾›å¼€å‘ï¼Œè¿ç»´å’Œèµ„æºç®¡ç†ç­‰åŠŸèƒ½ï¼Œå®ç° Flink æ•°æ®å¼€å‘è¿ç»´ä¸€ä½“åŒ–ï¼Œæé«˜ä¸šåŠ¡å¼€å‘æ•ˆç‡ã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.49453125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/IJlqcHFxF3Yib8Zns3nBy1RnTia7rUfiaoIYZcY7nN6EVwCaKribXOehwtOEzLXEuLj5LvOAkHzuf6oyTBVrGgW1vw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;figcaption&gt;&lt;span&gt;å®æ—¶è®¡ç®—æ•°æ®æµå›¾&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®æ—¶è®¡ç®—æ•°æ®æµå›¾å¦‚ä¸Šï¼Œå‡ ä¸ªé‡è¦çš„å…³é”®ç‚¹ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;a. ä¸šåŠ¡æ•°æ®åº“å’Œæ—¥å¿—æ•°æ®åˆ†åˆ«é€šè¿‡ CDC å’Œ Flume çš„æ–¹å¼é‡‡é›†åˆ° Kafka ä½œä¸ºæºæ•°æ®ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;b. ç»´è¡¨æ•°æ®é€šè¿‡ Flink è¿æ¥å™¨åŒæ­¥å­˜å…¥ Elasticsearchï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;c. Flink Join ç»´è¡¨æ•°æ®è®¡ç®—å­˜å‚¨åˆ° Kafkaï¼Œ è¿™é‡Œé‡‡ç”¨ Kafka çš„åŸå› ä¸»è¦æ˜¯ User Profile Platformï¼ˆç”¨æˆ·ç”»åƒç³»ç»Ÿï¼‰å¯¹å®æ—¶æ€§è¦æ±‚è¾ƒé«˜ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;d. Flink ä»æºæ•°æ®ä¸­åŒæ­¥å­˜å…¥ Hudi å¹¶è¿›è¡Œåˆ†å±‚å¤„ç†è®¡ç®—ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;e. Hudi è¡¨çš„æ‰€æœ‰æºæ•°æ®ä¼šè‡ªåŠ¨åŒæ­¥åˆ°æµåˆ©è¯´ç‹¬ç«‹éƒ¨ç½²çš„ Hive Metastoreï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;f. ä½¿ç”¨ Trino å¼•æ“å¯¹æ•°æ®åšå®æ—¶åœ¨çº¿åˆ†æï¼ŒSuperset æŠ¥è¡¨å¯ä»¥è‡ªåŠ¨ç”Ÿæˆ Trino SQL æ¥è·å–ç»“æœï¼ŒSQL Buffetï¼ˆæµåˆ©è¯´æ•°æ®åˆ†æå¹³å°ï¼‰æäº¤è‡ªå®šä¹‰ SQL äº¤äº’å¼åˆ†æï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;g. Hudi çš„æ•°æ®ä¹Ÿå¯ä»¥è¢«å…¶ä»–ç³»ç»Ÿæ‰€ä½¿ç”¨ï¼Œä¾‹å¦‚æ•°æ®è´¨é‡ï¼Œæ•°æ®æŒ‡æ ‡ç­‰ã€‚&lt;/p&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ•°æ®å¼€å‘æ¡ˆä¾‹&lt;/span&gt;&lt;/h1&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ•°æ®æ¥å…¥&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é¦–å…ˆé€šè¿‡ CDC å°† Mysql çš„ Binlog å®æ—¶åŒæ­¥åˆ° Kafka å¯¹åº” Topic ä¸­ï¼Œç›¸åº”æ•°æ®æ ¼å¼ä¸º Debezium Jsonã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Hudi è¡¨æ¥å…¥å¼€å‘æµç¨‹&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨é˜¿é‡Œäº‘å®æ—¶è®¡ç®— Flink ä½œä¸ºæµå¼ä»»åŠ¡è°ƒåº¦å’Œä»»åŠ¡ç®¡ç†å¹³å°&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;é€šè¿‡ FlinkSQL å°†å†å²æ•°æ®åŒæ­¥åˆ° Hudi è¡¨ä¸­&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;--Â HudiÂ è¡¨Â DDLÂ è¯­å¥&lt;/span&gt;&lt;br/&gt;&lt;span&gt;CREATE&lt;/span&gt;Â &lt;span&gt;TABLE&lt;/span&gt;Â &lt;span&gt;IF&lt;/span&gt;Â &lt;span&gt;NOT&lt;/span&gt;Â &lt;span&gt;EXISTS&lt;/span&gt;Â &lt;span&gt;`catalog`&lt;/span&gt;.&lt;span&gt;`db_name`&lt;/span&gt;.&lt;span&gt;`table_name`&lt;/span&gt;Â (&lt;br/&gt;Â Â &lt;span&gt;id&lt;/span&gt;Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;BIGINT&lt;/span&gt;,&lt;br/&gt;Â Â xxxÂ Â Â Â Â Â Â Â Â Â &lt;span&gt;STRING&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;`data_date`&lt;/span&gt;Â &lt;span&gt;VARCHAR&lt;/span&gt;(&lt;span&gt;20&lt;/span&gt;),&lt;br/&gt;Â Â PRIMARYÂ &lt;span&gt;KEY&lt;/span&gt;Â (&lt;span&gt;id&lt;/span&gt;)Â &lt;span&gt;NOT&lt;/span&gt;Â &lt;span&gt;ENFORCED&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;span&gt;WITH&lt;/span&gt;Â (&lt;br/&gt;Â Â &lt;span&gt;&#x27;connector&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;hudi&#x27;&lt;/span&gt;,Â &lt;br/&gt;Â Â &lt;span&gt;&#x27;table.type&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;COPY_ON_WRITE&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&#x27;write.tasks&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;2&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&#x27;index.global.enabled&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;true&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&#x27;index.bootstrap.enabled&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;true&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&#x27;read.streaming.enabled&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;true&#x27;&lt;/span&gt;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;br/&gt;Â Â &lt;span&gt;&#x27;oss.endpoint&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;xxx&#x27;&lt;/span&gt;,Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;br/&gt;Â Â &lt;span&gt;&#x27;accessKeyId&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;xxx&#x27;&lt;/span&gt;,Â Â Â Â Â Â Â Â Â Â Â &lt;br/&gt;Â Â &lt;span&gt;&#x27;accessKeySecret&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;xxx&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&#x27;path&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;oss://xxx&#x27;&lt;/span&gt;,Â Â Â Â &lt;br/&gt;Â Â &lt;span&gt;&#x27;hive_sync.enable&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;true&#x27;&lt;/span&gt;,Â &lt;br/&gt;Â Â &lt;span&gt;&#x27;hive_sync.mode&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;hms&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&#x27;hive_sync.db&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;hudi&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&#x27;hive_sync.metastore.uris&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;xxx&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&#x27;hive_sync.table&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;xxx&#x27;&lt;/span&gt;,Â &lt;br/&gt;Â Â &lt;span&gt;&#x27;compaction.tasks&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;1&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&#x27;hoodie.cleaner.commits.retained&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;10&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&#x27;hoodie.datasource.write.precombine.field&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;updated_at&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&#x27;hoodie.datasource.write.recordkey.field&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;id&#x27;&lt;/span&gt;&lt;br/&gt;);&lt;br/&gt;&lt;br/&gt;&lt;span&gt;--Â DMLÂ è¯­å¥&lt;/span&gt;&lt;br/&gt;&lt;span&gt;INSERT&lt;/span&gt;Â &lt;span&gt;INTO&lt;/span&gt;Â &lt;span&gt;`catalog`&lt;/span&gt;.&lt;span&gt;`db_name`&lt;/span&gt;.&lt;span&gt;`table_name`&lt;/span&gt;Â &lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt;Â &lt;span&gt;id&lt;/span&gt;,&lt;br/&gt;Â Â Â Â xxx,&lt;br/&gt;Â Â Â Â &lt;span&gt;`data_date`&lt;/span&gt;Â &lt;br/&gt;&lt;span&gt;FROM&lt;/span&gt;Â kafka_streaming_table&lt;br/&gt;&lt;span&gt;WHERE&lt;/span&gt;Â &lt;span&gt;id&lt;/span&gt;Â !=Â &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;é€šè¿‡ Flink SQL ä»»åŠ¡å®æ—¶åŒæ­¥æ•°æ®åˆ° Hudi ï¼ˆä½¿ç”¨ COPY_ON_WRITE æ¨¡å¼ï¼‰ï¼Œæ—¶æ•ˆæ€§åœ¨åˆ†é’Ÿçº§åˆ«ï¼ˆCheckpoint æ—¶é—´æœ‰å…³ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Hudi è¡¨ä¸­å·²ç»æœ‰å†å²æ•°æ®æ—¶ï¼Œéœ€è¦æ”¯æŒæŒ‰ç…§ &#x27;PRIMARY KEY&#x27;Â  è¿›è¡Œå»é‡æ—¶&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é¦–æ¬¡æ¥å…¥æµå¼æ•°æ®éœ€è®¾ç½® &lt;code&gt;index.bootstrap.enabled=true&lt;/code&gt;ï¼Œä¿è¯æ•°æ®çš„å”¯ä¸€æ€§ï¼Œåç»­å¯ç›´æ¥é€šè¿‡çŠ¶æ€è¿›è¡Œæ¢å¤å³å¯&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è¦æ”¯æŒæ›´æ–°å’Œåˆ é™¤å¿…é¡»åœ¨ DDL ä¸­æŒ‡å®š PRIMARY KEYï¼Œæˆ–è€…åœ¨ Table Properties ä¸­è®¾ç½® &lt;code&gt;hoodie.datasource.write.recordkey.field=${YouPrimaryKey}&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;éœ€è¦æŒ‡å®šæ›´æ–°çš„ Precombine Key é¡»åœ¨ Table Properties ä¸­è®¾ç½® &lt;code&gt;hoodie.datasource.write.precombine.field=${YouPrecombineKey}&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è¡¨ä½¿ç”¨ COPY_ON_WRITE å¯¹è¯»å‹å¥½ï¼Œé€šè¿‡ &lt;code&gt;hoodie.cleaner.commits.retained&lt;/code&gt; æ¥è®¾ç½®ä¿ç•™çš„æ•°æ®å†å²ç‰ˆæœ¬æ•°é‡ï¼Œå¯¹å†å²è®°å½•è¿›è¡Œæ¸…ç†&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åŒæ­¥å…ƒæ•°æ®åˆ° Hive Metastore éœ€è®¾ç½®å¦‚ä¸‹å‚æ•°&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;å‚æ•°&lt;/th&gt;&lt;th&gt;ç±»å‹&lt;/th&gt;&lt;th&gt;å¤‡æ³¨&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;hive_sync.enable&lt;/td&gt;&lt;td&gt;Boolean&lt;/td&gt;&lt;td&gt;æ˜¯å¦å…è®¸è¿›è¡Œå…ƒæ•°æ®åŒæ­¥åˆ° Hive&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;hive_sync.mode&lt;/td&gt;&lt;td&gt;String&lt;/td&gt;&lt;td&gt;æŒ‡å®šå…ƒæ•°æ®åŒæ­¥é‡‡ç”¨ hmsï¼ˆHive Metastoreï¼‰&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;hive_sync.metastore.uris&lt;/td&gt;&lt;td&gt;String&lt;/td&gt;&lt;td&gt;Hive Metastore åœ°å€&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;hive_sync.db&lt;/td&gt;&lt;td&gt;String&lt;/td&gt;&lt;td&gt;åŒæ­¥åˆ°Â Hive Metastore ä¸­å¯¹åº”çš„æ•°æ®åº“å&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;hive_sync.table&lt;/td&gt;&lt;td&gt;String&lt;/td&gt;&lt;td&gt;åŒæ­¥åˆ°Â Hive Metastore ä¸­å¯¹åº”çš„è¡¨å&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ä¸šåŠ¡æ–¹å¯é€šè¿‡ Trino ç›´æ¥å¯¹ Hudi è¡¨è¿›è¡Œäº¤äº’å¼åœ¨çº¿æŸ¥è¯¢ï¼Œéœ€æ³¨æ„ç‰ˆæœ¬è¦æ”¯æŒå¯¹ Hudi è¡¨çš„è¯»å–ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„å¯¹åº” Trino ç‰ˆæœ¬ä¸º 359ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ES ç»´è¡¨æ¥å…¥&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°†å¼€å‘å¥½çš„è‡ªå®šä¹‰ Flink-Elasticsearch-connector æ‰“åŒ…ï¼Œä¸Šä¼ åˆ°é˜¿é‡Œäº‘å®æ—¶å¹³å°è¿›è¡Œæ³¨å†Œã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;é€šè¿‡ FlinkSQL è¯»å– Kafka ä¸­çš„æ•°æ®ï¼Œå†™å…¥åˆ° Elasticsearch ä¸­ï¼ŒFlink SQLè¯­å¥å¦‚ä¸‹&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;--Â ESÂ è¡¨Â DDLè¯­å¥&lt;br/&gt;DROPÂ TABLEÂ IFÂ EXISTSÂ es_dimension01;&lt;br/&gt;&lt;span&gt;CREATEÂ TABLEÂ IFÂ NOTÂ EXISTSÂ &lt;span&gt;es_dimension01&lt;/span&gt;&lt;span&gt;(&lt;br/&gt;Â Â Â Â idÂ Â Â Â Â Â Â Â Â Â Â Â Â STRING,&lt;br/&gt;Â Â Â Â xxxÂ Â Â Â Â Â Â Â Â Â Â Â STRING,&lt;br/&gt;Â Â Â Â PRIMARYÂ KEYÂ (id)&lt;/span&gt;Â NOTÂ ENFORCED&lt;br/&gt;)Â &lt;span&gt;WITH&lt;/span&gt;Â &lt;span&gt;(&lt;br/&gt;Â Â Â Â &lt;span&gt;&#x27;connector&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;elasticsearch6-lls&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â &lt;span&gt;&#x27;format&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;json&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â &lt;span&gt;&#x27;hosts&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;http://xxx:9200&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â &lt;span&gt;&#x27;index&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;es_dimension01&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â &lt;span&gt;&#x27;username&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;xxx&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â &lt;span&gt;&#x27;password&#x27;&lt;/span&gt;Â =Â &lt;span&gt;&#x27;xxx&#x27;&lt;/span&gt;&lt;br/&gt;)&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;&lt;br/&gt;--Â DMLÂ è¯»å–Â KafkaÂ å†™å‡ºåˆ°Â Elasticsearch&lt;br/&gt;INSERTÂ INTOÂ es_dimension01Â &lt;br/&gt;Â Â SELECTÂ id,Â &lt;br/&gt;Â Â Â Â xxx,&lt;br/&gt;Â Â FROMÂ kafka_xxx_dimension;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å…¶ä¸­ kafka_xxx_dimension ä¸­ä¸ºåŒæ­¥ binlog æ•°æ®ï¼ŒFlink è§£æå…¶ä¸­ Debezium Format æ•°æ®è½¬æ¢ä¸º RowData(å…¶ä¸­åŒ…å« RowKind â€” æ ‡è¯†è¯¥è¡Œæ•°æ®çš„æ“ä½œç±»å‹)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Elasticsearch-connector æ”¯æŒ upsertï¼Œé€šè¿‡è®¾ç½® es_dimension01 è¡¨è®¾å®š PRIMARY KEY å¯¹åº” Elasticsearch ä¸­çš„å”¯ä¸€ Id&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åœ¨è¿›è¡Œ upsert æ“ä½œæ—¶é€šè¿‡ Id å¯¹æ•°æ®è¿›è¡Œä¿®æ”¹å’Œåˆ é™¤æ“ä½œ&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ•°æ®å¤„ç†&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨ä¸€ä¸ªæ ‡ç­¾ä»»åŠ¡æ¥è¯´æ˜ä½¿ç”¨æµç¨‹ï¼Œè¯¥æ ‡ç­¾ä»»åŠ¡é€šè¿‡ Flink æ¶ˆè´¹ Kafka å¯¹åº” Topic ä¸­æ•°æ®ï¼Œé€šè¿‡å…³è” Elasticsearchç»´è¡¨è¿›è¡Œç»´åº¦è¡¥å…¨ï¼Œæœ€åå°†ç»“æœè¾“å‡ºåˆ°æŒ‡å®šçš„ Kafka topic ä¸­ï¼ŒDML è¯­å¥å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;INSERT&lt;/span&gt;Â &lt;span&gt;INTO&lt;/span&gt;Â kafka_sink&lt;br/&gt;&lt;span&gt;SELECT&lt;/span&gt;Â &lt;span&gt;cast&lt;/span&gt;Â (a.idÂ &lt;span&gt;as&lt;/span&gt;Â &lt;span&gt;BIGINT&lt;/span&gt;)Â &lt;span&gt;as&lt;/span&gt;Â &lt;span&gt;id&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&#x27;lable0&#x27;&lt;/span&gt;Â &lt;span&gt;AS&lt;/span&gt;Â lable,&lt;br/&gt;Â Â &lt;span&gt;CASE&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;WHEN&lt;/span&gt;Â f.idÂ &lt;span&gt;is&lt;/span&gt;Â &lt;span&gt;NOT&lt;/span&gt;Â &lt;span&gt;null&lt;/span&gt;Â &lt;span&gt;THEN&lt;/span&gt;Â f.start_secÂ *Â &lt;span&gt;1000&lt;/span&gt;Â &lt;span&gt;ELSE&lt;/span&gt;Â e.start_secÂ *Â &lt;span&gt;1000&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;END&lt;/span&gt;Â &lt;span&gt;AS&lt;/span&gt;Â sourceTime,&lt;br/&gt;Â Â &lt;span&gt;CASE&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;WHEN&lt;/span&gt;Â f.idÂ &lt;span&gt;is&lt;/span&gt;Â &lt;span&gt;NOT&lt;/span&gt;Â &lt;span&gt;null&lt;/span&gt;Â &lt;span&gt;THEN&lt;/span&gt;Â f.end_secÂ *Â &lt;span&gt;1000&lt;/span&gt;Â &lt;span&gt;ELSE&lt;/span&gt;Â e.end_secÂ *Â &lt;span&gt;1000&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;END&lt;/span&gt;Â &lt;span&gt;AS&lt;/span&gt;Â expiredAt,Â Â &lt;br/&gt;Â Â a.updated_atÂ &lt;span&gt;AS&lt;/span&gt;Â &lt;span&gt;updated&lt;/span&gt;,&lt;br/&gt;Â Â &lt;span&gt;&#x27;dmp&#x27;&lt;/span&gt;Â &lt;span&gt;as&lt;/span&gt;Â &lt;span&gt;type&lt;/span&gt;&lt;br/&gt;&lt;span&gt;FROM&lt;/span&gt;&lt;br/&gt;Â Â kafka_stream_sourceÂ a&lt;br/&gt;Â Â &lt;span&gt;JOIN&lt;/span&gt;Â es_llspay_order_itemsÂ &lt;span&gt;FOR&lt;/span&gt;Â SYSTEM_TIMEÂ &lt;span&gt;AS&lt;/span&gt;Â &lt;span&gt;OF&lt;/span&gt;Â a.proctimeÂ &lt;span&gt;AS&lt;/span&gt;Â b&lt;br/&gt;Â Â &lt;span&gt;ON&lt;/span&gt;Â a.idÂ =Â b.id&lt;br/&gt;Â Â &lt;span&gt;JOIN&lt;/span&gt;Â es_dimension01Â &lt;span&gt;FOR&lt;/span&gt;Â SYSTEM_TIMEÂ &lt;span&gt;AS&lt;/span&gt;Â &lt;span&gt;OF&lt;/span&gt;Â a.proctimeÂ &lt;span&gt;AS&lt;/span&gt;Â c&lt;br/&gt;Â Â &lt;span&gt;ON&lt;/span&gt;Â b.idÂ =Â c.id&lt;br/&gt;Â Â &lt;span&gt;JOIN&lt;/span&gt;Â es_dimension02Â &lt;span&gt;FOR&lt;/span&gt;Â SYSTEM_TIMEÂ &lt;span&gt;AS&lt;/span&gt;Â &lt;span&gt;OF&lt;/span&gt;Â a.proctimeÂ &lt;span&gt;AS&lt;/span&gt;Â d&lt;br/&gt;Â Â &lt;span&gt;ON&lt;/span&gt;Â a.idÂ =Â d.idÂ &lt;span&gt;LEFT&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;JOIN&lt;/span&gt;Â es_dimension03Â &lt;span&gt;FOR&lt;/span&gt;Â SYSTEM_TIMEÂ &lt;span&gt;AS&lt;/span&gt;Â &lt;span&gt;OF&lt;/span&gt;Â a.proctimeÂ &lt;span&gt;AS&lt;/span&gt;Â e&lt;br/&gt;Â Â &lt;span&gt;ON&lt;/span&gt;Â e.idÂ =Â d.idÂ &lt;span&gt;LEFT&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;JOIN&lt;/span&gt;Â kafka_stream_dimension01Â &lt;span&gt;AS&lt;/span&gt;Â f&lt;br/&gt;Â Â &lt;span&gt;ON&lt;/span&gt;Â &lt;span&gt;CAST&lt;/span&gt;Â (f.idÂ &lt;span&gt;AS&lt;/span&gt;Â &lt;span&gt;STRING&lt;/span&gt;)Â =Â d.id&lt;br/&gt;Â Â &lt;span&gt;AND&lt;/span&gt;Â a.proctimeÂ &lt;span&gt;between&lt;/span&gt;Â f.proctimeÂ -Â &lt;span&gt;interval&lt;/span&gt;Â &lt;span&gt;&#x27;1&#x27;&lt;/span&gt;Â &lt;span&gt;second&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;and&lt;/span&gt;Â f.proctimeÂ +Â &lt;span&gt;interval&lt;/span&gt;Â &lt;span&gt;&#x27;5&#x27;&lt;/span&gt;Â &lt;span&gt;second&lt;/span&gt;&lt;br/&gt;&lt;span&gt;WHERE&lt;/span&gt;&lt;br/&gt;Â Â c.name&lt;br/&gt;&lt;span&gt;LIKE&lt;/span&gt;Â &lt;span&gt;&#x27;%label1%&#x27;&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;OR&lt;/span&gt;Â c.name&lt;br/&gt;&lt;span&gt;LIKE&lt;/span&gt;Â &lt;span&gt;&#x27;%label2%&#x27;&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;AND&lt;/span&gt;Â (&lt;br/&gt;Â Â Â Â e.idÂ &lt;span&gt;IS&lt;/span&gt;Â &lt;span&gt;NOT&lt;/span&gt;Â &lt;span&gt;NULL&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;OR&lt;/span&gt;Â f.idÂ &lt;span&gt;IS&lt;/span&gt;Â &lt;span&gt;NOT&lt;/span&gt;Â &lt;span&gt;NULL&lt;/span&gt;&lt;br/&gt;Â Â );&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šé¢æ ‡ç­¾ä»»åŠ¡ä¸­ï¼Œkafka_stream_source ä¸ºæµè¡¨ï¼Œå¯¹åº”çš„ä¸º Kafka ä¸­çš„ topicï¼Œé€šè¿‡ Lookup Join ç»´è¡¨ es_dimension01ã€es_dimension02 å’Œ es_dimension03 è¿›è¡Œç»´åº¦è¡¥å…¨ï¼Œå› ä¸º es_dimension03 å¯¹åº”çš„è¡¨æ›´æ–°è¾ƒé¢‘ç¹ï¼Œä¸ºé¿å…æ•°æ®æœª Join æˆåŠŸï¼Œåœ¨è¿™é‡Œé€šè¿‡ Interval Join æµè¡¨ kafka_stream_dimension01 æ¥è¿›è¡Œè¡¥å¿ï¼Œå½“æµè¡¨ Â kafka_stream_dimension01 å’Œ es_dimension03 ä¸­æ•°æ®åŒæ—¶ Join åˆ°æ—¶ï¼Œä¼˜å…ˆä½¿ç”¨ kafka_stream_dimension01 ä¸­æ•°æ®ï¼Œå°½å¯èƒ½ä¿è¯æ•°æ®çš„å‡†ç¡®æ€§ï¼Œè¯¥æ ‡ç­¾ä»»åŠ¡çš„æ•´ä½“çš„å»¶è¿Ÿåœ¨ç§’çº§ï¼Œå¯ä¿è¯æ•°æ®çš„æ—¶æ•ˆæ€§ã€‚&lt;/p&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å±•æœ›&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®æ—¶æ•°ä»“ç›®å‰è¿˜ä¸èƒ½è§£å†³æ‰€æœ‰çš„è®¡ç®—å’Œå­˜å‚¨é—®é¢˜ï¼Œåªèƒ½æ ¹æ®ä¸šåŠ¡éœ€æ±‚åœºæ™¯æ¥é€‰æ‹©ç¦»çº¿è®¡ç®—è¿˜æ˜¯å®æ—¶è®¡ç®—ï¼Œå½“å‰æµåˆ©è¯´æ•´ä½“æ•°æ®æ¶æ„é‡‡ç”¨çš„æ˜¯ Lambda æ¶æ„ï¼Œä¸”ç¦»çº¿è®¡ç®—ä»¥ Spark 2.4.5 ä¸ºä¸»ï¼ˆç›®å‰ Hive ä»»åŠ¡æ•°é‡å·²ç»æ¸…é›¶ï¼Œç¦»çº¿è®¡ç®—å…¨é¢æ‹¥æŠ± Sparkï¼‰ï¼Œä»æœ€åˆ Hive 2.X åˆ° Spark 2.X ä¸€æ­¥æ­¥å‡çº§ä¸Šæ¥ï¼ŒHudi çš„å¼•å…¥è®©æˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„æŸ¥è¯¢å®æ—¶æ•°æ®ï¼Œæˆ‘ä»¬å¸Œæœ›æœªæ¥å‡çº§å®Œ Spark 3.X çš„æ—¶å€™ï¼ŒHudi å¯ä»¥ç»§ç»­ä½œä¸ºç¦»çº¿æ‰¹å¤„ç†çš„å­˜å‚¨ï¼Œè¿›è€Œå®ç°åœ¨æµåˆ©è¯´ç¦»çº¿å’Œå®æ—¶æ•°ä»“å­˜å‚¨æ–¹é¢çš„ç»Ÿä¸€ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>