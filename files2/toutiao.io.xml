<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>95315bb19ed690924320d2ad2bac8254</guid>
<title>ç¼“å­˜ç©¿é€ã€ç¼“å­˜å‡»ç©¿ã€ç¼“å­˜é›ªå´©</title>
<link>https://toutiao.io/k/laxldpe</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section class=&quot;&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.45233463035019456&quot; data-type=&quot;png&quot; data-w=&quot;1028&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sXFqMxQoVLFvjy33QIm6KV68BdT73EVpamYJia5K0IdYsEzs4ib73MlYSGmeT5wL1iaMXDBNEAqrPWPjhuibaQ0QrQ/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ¥¼ä»”ï¼&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»Šå¤©å†™çš„è¿™ä¸ªä¸»é¢˜å†…å®¹ï¼Œå…¶å®éå¸¸åŸºç¡€ï¼Œä½†æ˜¯&lt;strong&gt;ä½œä¸ºé«˜å¹¶å‘éå¸¸é‡è¦çš„å‡ ä¸ªåœºæ™¯ï¼Œç»å¯¹ç»•ä¸å¼€&lt;/strong&gt;ï¼Œä¼°è®¡å¤§å®¶é¢è¯•æ—¶ï¼Œä¹Ÿç»å¸¸ä¼šé‡åˆ°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªä¸»é¢˜çš„æ–‡ç« ï¼Œç½‘ä¸Šéå¸¸å¤šï¼Œæœ¬æ¥æƒ³ç›´æ¥è½¬è½½ä¸€ç¯‡ï¼Œä½†æ˜¯æ„Ÿè§‰æ²¡æœ‰åˆé€‚çš„ï¼Œè¦ä¹ˆæ–‡ç« ä¸å¤Ÿç²¾ç‚¼ï¼Œè¦ä¹ˆå°±æ˜¯ç²¾ç®€è¿‡å¤´ï¼Œæ‰€ä»¥è¿˜æ˜¯è‡ªå·±å†™ä¸€ç¯‡å§ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å†…å®¹è™½ç„¶åŸºç¡€ï¼Œä½†æˆ‘è¿˜æ˜¯ç§‰æ‰¿ä»¥å¾€çš„å†™ä½œé£æ ¼ï¼Œå‚è€ƒä¼—å¤šä¼˜ç§€çš„åšå®¢åï¼Œæ‰“ç®—å†™ä¸€ç¯‡èƒ½é€šä¿—æ˜“æ‡‚ï¼Œåˆä¸å¤±å…¨é¢çš„æ–‡ç« ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å‰è¨€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹æ­£å¸¸æƒ…å†µçš„æŸ¥è¯¢è¿‡ç¨‹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å…ˆæŸ¥è¯¢ Redisï¼Œå¦‚æœæŸ¥è¯¢æˆåŠŸï¼Œç›´æ¥è¿”å›ï¼ŒæŸ¥è¯¢ä¸å­˜åœ¨ï¼Œå»æŸ¥è¯¢ DBï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¦‚æœ DB æŸ¥è¯¢æˆåŠŸï¼Œæ•°æ®å›å†™ Redisï¼ŒæŸ¥è¯¢ä¸å­˜åœ¨ï¼Œç›´æ¥è¿”å›ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7459379615952733&quot; data-type=&quot;png&quot; data-w=&quot;677&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sXFqMxQoVLFvjy33QIm6KV68BdT73EVp0m8zibaiaPA5VRIfzU1HT95rqCI5TQuPlnwozoXXkAl63DiaDjfhZfquA/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç¼“å­˜ç©¿é€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å®šä¹‰ï¼šå½“æŸ¥è¯¢æ•°æ®åº“å’Œç¼“å­˜éƒ½æ— æ•°æ®æ—¶ï¼Œå› ä¸ºæ•°æ®åº“æŸ¥è¯¢æ— æ•°æ®ï¼Œå‡ºäºå®¹é”™è€ƒè™‘ï¼Œä¸ä¼šå°†ç»“æœä¿å­˜åˆ°ç¼“å­˜ä¸­ï¼Œå› æ­¤&lt;strong&gt;æ¯æ¬¡è¯·æ±‚éƒ½ä¼šå»æŸ¥è¯¢æ•°æ®åº“&lt;/strong&gt;ï¼Œè¿™ç§æƒ…å†µå°±å«åšç¼“å­˜ç©¿é€ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6910112359550562&quot; data-type=&quot;png&quot; data-w=&quot;712&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sXFqMxQoVLFvjy33QIm6KV68BdT73EVpKJ1r7KEiaRzXRyKyoXhz5f71NrPK1m4MiaOZiaxcnQplu9JZWOQCvBalg/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çº¢è‰²çš„çº¿æ¡ï¼Œå°±æ˜¯ç¼“å­˜ç©¿é€çš„åœºæ™¯ï¼Œ&lt;strong&gt;å½“æŸ¥è¯¢çš„ Key åœ¨ç¼“å­˜å’Œ DB ä¸­éƒ½ä¸å­˜åœ¨æ—¶ï¼Œå°±ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œæ¯”å¦‚æœ‰ä¸ªæ¥å£éœ€è¦æŸ¥è¯¢å•†å“ä¿¡æ¯ï¼Œå¦‚æœæœ‰æ¶æ„ç”¨æˆ·æ¨¡æ‹Ÿä¸å­˜åœ¨çš„å•†å“ ID å‘èµ·è¯·æ±‚ï¼Œç¬é—´å¹¶å‘é‡å¾ˆé«˜ï¼Œä¼°è®¡ä½ çš„ DB ä¼šç›´æ¥æŒ‚æ‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯èƒ½å¤§å®¶ç¬¬ä¸€ååº”å°±æ˜¯å¯¹å…¥å‚è¿›è¡Œæ­£åˆ™æ ¡éªŒï¼Œè¿‡æ»¤æ‰æ— æ•ˆè¯·æ±‚ï¼Œå¯¹ï¼è¿™ä¸ªæ²¡é”™ï¼Œé‚£æœ‰æ²¡æœ‰å…¶å®ƒæ›´å¥½çš„æ–¹æ¡ˆå‘¢ï¼Ÿ&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç¼“å­˜ç©ºå€¼&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“æˆ‘ä»¬ä»æ•°æ®åº“ä¸­æŸ¥è¯¢åˆ°ç©ºå€¼æ—¶ï¼Œ&lt;strong&gt;æˆ‘ä»¬å¯ä»¥å‘ç¼“å­˜ä¸­å›ç§ä¸€ä¸ªç©ºå€¼&lt;/strong&gt;ï¼Œä¸ºäº†é¿å…ç¼“å­˜è¢«é•¿æ—¶é—´å ç”¨ï¼Œéœ€è¦ç»™è¿™ä¸ªç©ºå€¼åŠ ä¸€ä¸ªæ¯”è¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´ï¼Œä¾‹å¦‚ 3~5 åˆ†é’Ÿã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7246192893401016&quot; data-type=&quot;png&quot; data-w=&quot;788&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sXFqMxQoVLFvjy33QIm6KV68BdT73EVpauvQ3SVngNmWIBZicTEmqGD4eSNKHdwlSw2sEfLycxjViaXCLyib9WI6w/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸è¿‡è¿™ä¸ªæ–¹æ¡ˆæœ‰ä¸ªé—®é¢˜ï¼Œå½“å¤§é‡æ— æ•ˆè¯·æ±‚ç©¿é€è¿‡æ¥æ—¶ï¼Œç¼“å­˜å†…å°±ä¼šæœ‰æœ‰å¤§é‡çš„ç©ºå€¼ç¼“å­˜ï¼Œå¦‚æœç¼“å­˜ç©ºé—´è¢«å æ»¡äº†ï¼Œè¿˜ä¼šå› å‰”é™¤æ‰ä¸€äº›å·²ç»è¢«ç¼“å­˜çš„ç”¨æˆ·ä¿¡æ¯ï¼Œåè€Œä¼šé€ æˆç¼“å­˜å‘½ä¸­ç‡çš„ä¸‹é™ï¼Œ&lt;strong&gt;æ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆï¼Œéœ€è¦è¯„ä¼°ç¼“å­˜å®¹é‡ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœç¼“å­˜ç©ºå€¼ä¸å¯å–ï¼Œè¿™æ—¶ä½ å¯ä»¥è€ƒè™‘ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å¸ƒéš†è¿‡æ»¤å™¨&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ç”±ä¸€ä¸ªå¯å˜é•¿åº¦ä¸º N çš„äºŒè¿›åˆ¶æ•°ç»„ä¸ä¸€ç»„æ•°é‡å¯å˜ M çš„å“ˆå¸Œå‡½æ•°æ„æˆï¼Œè¯´çš„ç®€å•ç²—æš´ä¸€ç‚¹ï¼Œå°±æ˜¯ä¸€ä¸ª Hash Mapã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŸç†ç›¸å½“ç®€å•ï¼šæ¯”å¦‚å…ƒç´  key=#3ï¼Œå‡å¦‚é€šè¿‡ Hash ç®—æ³•å¾—åˆ°ä¸€ä¸ªä¸º 9 çš„å€¼ï¼Œå°±å­˜åœ¨è¿™ä¸ª Hash Map çš„ç¬¬ 9 ä½å…ƒç´ ä¸­ï¼Œé€šè¿‡æ ‡è®° 1 æ ‡è¯†è¯¥ä½å·²ç»æœ‰æ•°æ®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ0 æ˜¯æ— æ•°æ®ï¼Œ1 æ˜¯æœ‰æ•°æ®ã€‚&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5160680529300568&quot; data-type=&quot;png&quot; data-w=&quot;529&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sXFqMxQoVLFvjy33QIm6KV68BdT73EVpB2jNHfB4ZgvQatxx9DU5MYaPNR6kajmrkVCzrWIlwiaKt2KN8bg9geA/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥é€šè¿‡è¯¥æ–¹æ³•ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªç»“è®ºï¼š&lt;strong&gt;åœ¨ Hash Map ä¸­ï¼Œæ ‡è®°çš„æ•°æ®ï¼Œä¸ä¸€å®šå­˜åœ¨ï¼Œä½†æ˜¯æ²¡æœ‰æ ‡è®°çš„æ•°æ®ï¼Œè‚¯å®šä¸å­˜åœ¨ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºä»€ä¹ˆâ€œæ ‡è®°çš„æ•°æ®ï¼Œä¸ä¸€å®šå­˜åœ¨â€å‘¢ï¼Ÿ&lt;strong&gt;å› ä¸º Hash å†²çªï¼&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯”å¦‚ Hash Map çš„é•¿åº¦ä¸º 100ï¼Œä½†æ˜¯ä½ æœ‰ 101 ä¸ªè¯·æ±‚ï¼Œå‡å¦‚ä½ è¿æ°”å¥½åˆ°çˆ†ï¼Œè¿™ 100 ä¸ªè¯·æ±‚åˆšå¥½å‡åŒ€æ‰“åœ¨é•¿åº¦ä¸º 100 çš„ Hash Map ä¸­ï¼Œæ­¤æ—¶ä½ çš„ Hash Map å·²ç»å…¨éƒ¨æ ‡è®°ä¸º 1ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;å½“ç¬¬ 101 ä¸ªè¯·æ±‚è¿‡æ¥æ—¶ï¼Œå°± 100% å‡ºç° Hash å†²çª&lt;/strong&gt;ï¼Œè™½ç„¶æˆ‘æ²¡æœ‰è¯·æ±‚è¿‡ï¼Œä½†æ˜¯å¾—åˆ°çš„æ ‡è®°å´ä¸º 1ï¼Œå¯¼è‡´å¸ƒéš†è¿‡æ»¤å™¨æ²¡æœ‰æ‹¦æˆªã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœéœ€è¦å‡å°‘è¯¯åˆ¤ï¼Œå¯ä»¥å¢åŠ  Hash Map çš„é•¿åº¦ï¼Œå¹¶é€‰æ‹©å´åˆ†åº¦æ›´é«˜çš„ Hash å‡½æ•°ï¼Œæ¯”å¦‚å¤šæ¬¡å¯¹ key è¿›è¡Œ hashã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é™¤äº† Hash å†²çªï¼Œ&lt;strong&gt;å¸ƒéš†è¿‡æ»¤å™¨å…¶å®ä¼šå¸¦æ¥ä¸€ä¸ªè‡´å‘½çš„é—®é¢˜ï¼šå¸ƒéš†è¿‡æ»¤å™¨æ›´æ–°å¤±è´¥ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯”å¦‚æœ‰ä¸€ä¸ªå•†å“ ID ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼Œå½“ DB ä¸­å­˜åœ¨æ—¶ï¼Œéœ€è¦åœ¨ Hash Map ä¸­æ ‡è®°ä¸€ä¸‹ï¼Œä½†æ˜¯ç”±äºç½‘ç»œåŸå› ï¼Œå¯¼è‡´æ ‡è®°å¤±è´¥ï¼Œé‚£ä¹ˆä¸‹æ¬¡è¿™ä¸ªå•†å“ ID é‡æ–°å‘èµ·è¯·æ±‚æ—¶ï¼Œè¯·æ±‚ä¼šè¢«å¸ƒéš†è¿‡æ»¤å™¨æ‹¦æˆªï¼Œæ¯”å¦‚è¿™ä¸ªæ˜¯åŒ11çš„çˆ†æ¬¾å•†å“åº“å­˜ï¼Œæ˜æ˜æœ‰ 10W ä»¶å•†å“ï¼Œä½ å´æç¤ºåº“å­˜ä¸å­˜åœ¨ï¼Œé¢†å¯¼å¯èƒ½ä¼šè¯´â€œæ˜å¤©ä½ å¯ä»¥ä¸ç”¨æ¥äº†â€ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æ‰€ä»¥å¦‚æœä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼Œåœ¨å¯¹ Hash Map è¿›è¡Œæ•°æ®æ›´æ–°æ—¶ï¼Œéœ€è¦ä¿è¯è¿™ä¸ªæ•°æ®èƒ½ 100% æ›´æ–°æˆåŠŸ&lt;/strong&gt;ï¼Œå¯ä»¥é€šè¿‡å¼‚æ­¥ã€é‡è¯•çš„æ–¹å¼ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ¡ˆæœ‰ä¸€å®šçš„å®ç°æˆæœ¬å’Œé£é™©ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç¼“å­˜å‡»ç©¿&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å®šä¹‰ï¼š&lt;strong&gt;æŸä¸ªçƒ­ç‚¹ç¼“å­˜åœ¨æŸä¸€æ—¶åˆ»æ°å¥½å¤±æ•ˆ&lt;/strong&gt;ï¼Œç„¶åæ­¤æ—¶åˆšå¥½æœ‰å¤§é‡çš„å¹¶å‘è¯·æ±‚ï¼Œæ­¤æ—¶è¿™äº›è¯·æ±‚å°†ä¼šç»™æ•°æ®åº“é€ æˆå·¨å¤§çš„å‹åŠ›ï¼Œè¿™ç§æƒ…å†µå°±å«åšç¼“å­˜å‡»ç©¿ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªå…¶å®å’Œâ€œç¼“å­˜ç©¿é€â€æµç¨‹å›¾ä¸€æ ·ï¼Œåªæ˜¯è¿™ä¸ªçš„å‡ºå‘ç‚¹æ˜¯â€œæŸä¸ªçƒ­ç‚¹ç¼“å­˜åœ¨æŸä¸€æ—¶åˆ»æ°å¥½å¤±æ•ˆâ€ï¼Œæ¯”å¦‚æŸä¸ªéå¸¸çƒ­é—¨çš„çˆ†æ¬¾å•†å“ï¼Œç¼“å­˜çªç„¶å¤±æ•ˆï¼Œæµé‡ç›´æ¥å…¨éƒ¨æ‰“åˆ° DBï¼Œ&lt;strong&gt;é€ æˆæŸä¸€æ—¶åˆ»æ•°æ®åº“è¯·æ±‚é‡è¿‡å¤§ï¼Œæ›´å¼ºè°ƒç¬æ—¶æ€§ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è§£å†³é—®é¢˜çš„æ–¹æ³•ä¸»è¦æœ‰ 2 ç§ï¼š&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;åˆ†å¸ƒå¼é”&lt;/strong&gt;ï¼šåªæœ‰æ‹¿åˆ°é”çš„ç¬¬ä¸€ä¸ªçº¿ç¨‹å»è¯·æ±‚æ•°æ®åº“ï¼Œç„¶åæ’å…¥ç¼“å­˜ï¼Œå½“ç„¶æ¯æ¬¡æ‹¿åˆ°é”çš„æ—¶å€™éƒ½è¦å»æŸ¥è¯¢ä¸€ä¸‹ç¼“å­˜æœ‰æ²¡æœ‰ï¼Œè¿™ç§åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œä¸ªäººä¸å¤ªå»ºè®®ç”¨åˆ†å¸ƒå¼é”ï¼Œä¼šå½±å“æŸ¥è¯¢æ•ˆç‡ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;è®¾ç½®æ°¸ä¸è¿‡æœŸ&lt;/strong&gt;ï¼šå¯¹äºæŸäº›çƒ­ç‚¹ç¼“å­˜ï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½®æ°¸ä¸è¿‡æœŸï¼Œè¿™æ ·å°±èƒ½ä¿è¯ç¼“å­˜çš„ç¨³å®šæ€§ï¼Œä½†éœ€è¦æ³¨æ„åœ¨æ•°æ®æ›´æ”¹ä¹‹åï¼Œè¦åŠæ—¶æ›´æ–°æ­¤çƒ­ç‚¹ç¼“å­˜ï¼Œä¸ç„¶å°±ä¼šé€ æˆæŸ¥è¯¢ç»“æœçš„è¯¯å·®ï¼Œæ¯”å¦‚çƒ­é—¨å•†å“ï¼Œéƒ½å…ˆé¢„çƒ­åˆ°æ•°æ®åº“ï¼Œåç»­å†ä¸‹çº¿æ‰ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç½‘ä¸Šè¿˜æœ‰â€œç¼“å­˜ç»­æœŸâ€çš„æ–¹å¼ï¼Œæ¯”å¦‚ç¼“å­˜ 30 åˆ†é’Ÿå¤±æ•ˆï¼Œå¯ä»¥æä¸ªå®šæ—¶ä»»åŠ¡ï¼Œæ¯ 20 åˆ†é’Ÿè·‘ä¸€æ¬¡ï¼Œæ„Ÿè§‰è¿™ç§æ–¹å¼ä¸ä¼¦ä¸ç±»ï¼Œä»…ä¾›å¤§å®¶å‚è€ƒã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç¼“å­˜é›ªå´©&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å®šä¹‰ï¼š&lt;strong&gt;åœ¨çŸ­æ—¶é—´å†…æœ‰å¤§é‡ç¼“å­˜åŒæ—¶è¿‡æœŸï¼Œå¯¼è‡´å¤§é‡çš„è¯·æ±‚ç›´æ¥æŸ¥è¯¢æ•°æ®åº“&lt;/strong&gt;ï¼Œä»è€Œå¯¹æ•°æ®åº“é€ æˆäº†å·¨å¤§çš„å‹åŠ›ï¼Œä¸¥é‡æƒ…å†µä¸‹å¯èƒ½ä¼šå¯¼è‡´æ•°æ®åº“å®•æœºçš„æƒ…å†µå«åšç¼“å­˜é›ªå´©ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœè¯´â€œç¼“å­˜å‡»ç©¿â€æ˜¯å•å…µåæŠ—ï¼Œé‚£â€œç¼“å­˜é›ªå´©â€å°±æ˜¯é›†ä½“èµ·ä¹‰äº†ï¼Œé‚£ä»€ä¹ˆæƒ…å†µä¼šå‡ºç°ç¼“å­˜é›ªå´©å‘¢ï¼Ÿ&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;çŸ­æ—¶é—´å†…æœ‰å¤§é‡ç¼“å­˜åŒæ—¶è¿‡æœŸï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¼“å­˜æœåŠ¡å®•æœºï¼Œå¯¼è‡´æŸä¸€æ—¶åˆ»å‘ç”Ÿå¤§è§„æ¨¡çš„ç¼“å­˜å¤±æ•ˆã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£ä¹ˆæœ‰å“ªäº›è§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿ&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;ç¼“å­˜æ·»åŠ éšæœºæ—¶é—´&lt;/strong&gt;ï¼šå¯åœ¨è®¾ç½®ç¼“å­˜æ—¶æ·»åŠ éšæœºæ—¶é—´ï¼Œæ¯”å¦‚ 0~60sï¼Œè¿™æ ·å°±å¯ä»¥æå¤§çš„é¿å…å¤§é‡çš„ç¼“å­˜åŒæ—¶å¤±æ•ˆï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;åˆ†å¸ƒå¼é”&lt;/strong&gt;ï¼šåŠ ä¸€ä¸ªåˆ†å¸ƒå¼é”ï¼Œç¬¬ä¸€ä¸ªè¯·æ±‚å°†æ•°æ®æŒä¹…åŒ–åˆ°ç¼“å­˜åï¼Œå…¶å®ƒçš„è¯·æ±‚æ‰èƒ½è¿›å…¥ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;é™æµå’Œé™çº§&lt;/strong&gt;ï¼šé€šè¿‡é™æµå’Œé™çº§ç­–ç•¥ï¼Œå‡å°‘è¯·æ±‚çš„æµé‡ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;é›†ç¾¤éƒ¨ç½²&lt;/strong&gt;ï¼šRedis é€šè¿‡é›†ç¾¤éƒ¨ç½²ã€ä¸»ä»ç­–ç•¥ï¼Œä¸»èŠ‚ç‚¹å®•æœºåï¼Œä¼šåˆ‡æ¢åˆ°ä»èŠ‚ç‚¹ï¼Œä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¼“å­˜æ·»åŠ éšæœºæ—¶é—´ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;//Â ç¼“å­˜åŸæœ¬çš„å¤±æ•ˆæ—¶é—´&lt;/span&gt;&lt;br/&gt;&lt;span&gt;int&lt;/span&gt;Â exTimeÂ =Â &lt;span&gt;10&lt;/span&gt;Â *Â &lt;span&gt;60&lt;/span&gt;;&lt;br/&gt;&lt;span&gt;//Â éšæœºæ•°ç”Ÿæˆç±»&lt;/span&gt;&lt;br/&gt;RandomÂ randomÂ =Â &lt;span&gt;new&lt;/span&gt;Â Random();&lt;br/&gt;&lt;span&gt;//Â ç¼“å­˜è®¾ç½®&lt;/span&gt;&lt;br/&gt;jedis.setex(cacheKey,Â exTimeÂ +Â random.nextInt(&lt;span&gt;1000&lt;/span&gt;)Â ,Â value);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ã€Œæ–‡ç« æ±‡æ€»ã€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;æ±‡æ€»ç›®å½•&lt;/strong&gt;ï¼š&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=Mzg3OTU5NzQ1Mw==&amp;amp;mid=2247487713&amp;amp;idx=1&amp;amp;sn=9661f1520e6237d18536ccf496f8793a&amp;amp;chksm=cf035203f874db157eb05a3909725daeadd4625b8702f358abe9d77dd52fefd08c50279ce771&amp;amp;token=1760780777&amp;amp;lang=zh_CN&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;æ¥¼ä»”åŸåˆ›ç²¾é€‰èŸèƒ&lt;/a&gt; ğŸ”¥ğŸ”¥ğŸ”¥&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;strong&gt;æ¨èç†ç”±&lt;/strong&gt;ï¼š&lt;span&gt;ä¸€ç™¾å¤šç¯‡åŸåˆ›å¥½æ–‡ï¼Œè¿‘ 2 å¹´çš„åšæŒï¼Œ&lt;/span&gt;&lt;strong&gt;æ— è®ºä½ æ˜¯å°ç™½ï¼Œè¿˜æ˜¯èµ„æ·±å¤§ä½¬ï¼Œæ€»èƒ½æ‰¾åˆ°å±äºä½ è‡ªå·±çš„æ®µä½ã€‚&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;Mzg3OTU5NzQ1Mw==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/sXFqMxQoVLFTdSvrrpJnCZ0Fp5Z1wKkhKFQBxTaFfxOpib3E2zgUu39BFbsBqqJbEpxicUvz3H6csoL2JQ9EP1yQ/0?wx_fmt=png&quot; data-nickname=&quot;æ¥¼ä»”&quot; data-alias=&quot;&quot; data-signature=&quot;7 å¹´ä¸€çº¿å¤§å‚ç»éªŒï¼ˆç™¾åº¦/å°ç±³/æ»´æ»´ï¼‰ï¼Œå¸¦ä½ è¿›å¤§å‚ï¼Œä¸é™äºJavaã€Goã€é«˜å¹¶å‘ã€æ¶æ„é€‰å‹ã€æ¶ˆæ¯é˜Ÿåˆ—ã€è®¾è®¡æ¨¡å¼ã€MySQLã€Redisã€DDDã€é¡¹ç›®ç®¡ç†ã€è½¯æŠ€èƒ½ç­‰ã€‚&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ã€Œå­¦ä¹ äº¤æµã€&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›®å‰æˆ‘ä»¬å·²ç»æˆç«‹å¤šä¸ªæŠ€æœ¯äº¤æµç¾¤ï¼&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é•¿æŒ‰äºŒç»´ç ï¼Œå›å¤ &lt;strong&gt;ã€ŒåŠ ç¾¤ã€&lt;/strong&gt;ï¼Œæ¬¢è¿ä¸€èµ·å­¦ä¹ äº¤æµå“ˆ~~ ğŸ‘ğŸ»ğŸ‘ğŸ»ğŸ‘ğŸ»&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5726210350584308&quot; data-type=&quot;png&quot; data-w=&quot;1198&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/sXFqMxQoVLFvjy33QIm6KV68BdT73EVp0ibd3XdurERqIhL1DWS0fhiaZqibDNekibaUlicLiaz60ibGPzZzWxv4PpZgQ/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å°½ä¿¡ä¹¦åˆ™ä¸å¦‚æ— ä¹¦ï¼Œå› ä¸ªäººèƒ½åŠ›æœ‰é™ï¼Œéš¾å…æœ‰ç–æ¼å’Œé”™è¯¯ä¹‹å¤„ï¼Œå¦‚å‘ç° bug æˆ–è€…æœ‰æ›´å¥½çš„å»ºè®®ï¼Œæ¬¢è¿æ‰¹è¯„æŒ‡æ­£ï¼Œä¸åæ„Ÿæ¿€ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>d92f47aaf67be316dca49b3f419d767e</guid>
<title>å›¾è§£Goå†…å­˜ç®¡ç†å™¨</title>
<link>https://toutiao.io/k/k4upoi5</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å…³äºGoçš„å†…å­˜åˆ†é…&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨&lt;code&gt;Go&lt;/code&gt;è¯­è¨€é‡Œï¼Œä»å†…å­˜çš„åˆ†é…åˆ°ä¸å†ä½¿ç”¨åå†…å­˜çš„å›æ”¶ç­‰ç­‰è¿™äº›å†…å­˜ç®¡ç†å·¥ä½œéƒ½æ˜¯ç”±&lt;code&gt;Go&lt;/code&gt;åœ¨åº•å±‚å®Œæˆçš„ã€‚è™½ç„¶å¼€å‘è€…åœ¨å†™ä»£ç æ—¶ä¸å¿…è¿‡åº¦å…³å¿ƒå†…å­˜ä»åˆ†é…åˆ°å›æ”¶è¿™ä¸ªè¿‡ç¨‹ï¼Œä½†æ˜¯&lt;code&gt;Go&lt;/code&gt;çš„å†…å­˜åˆ†é…ç­–ç•¥é‡Œæœ‰ä¸å°‘æœ‰æ„æ€çš„è®¾è®¡ï¼Œé€šè¿‡äº†è§£ä»–ä»¬æœ‰åŠ©äºæˆ‘ä»¬è‡ªèº«çš„æé«˜ï¼Œä¹Ÿè®©æˆ‘ä»¬èƒ½å†™å‡ºæ›´é«˜æ•ˆçš„&lt;code&gt;Go&lt;/code&gt;ç¨‹åºã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Goå†…å­˜ç®¡ç†çš„è®¾è®¡æ—¨åœ¨åœ¨å¹¶å‘ç¯å¢ƒä¸­å¿«é€Ÿè¿è¡Œï¼Œå¹¶ä¸åƒåœ¾å›æ”¶å™¨é›†æˆåœ¨ä¸€èµ·ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;package&lt;/span&gt;Â main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt;Â smallStructÂ &lt;span&gt;struct&lt;/span&gt;Â {&lt;br/&gt;Â Â Â a,Â bÂ &lt;span&gt;int64&lt;/span&gt;&lt;br/&gt;Â Â Â c,Â dÂ &lt;span&gt;float64&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;Â {&lt;br/&gt;Â Â Â smallAllocation()&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;//go:noinline&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt;Â &lt;span&gt;smallAllocation&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â *&lt;span&gt;smallStruct&lt;/span&gt;&lt;/span&gt;Â {&lt;br/&gt;Â Â Â &lt;span&gt;return&lt;/span&gt;Â &amp;amp;smallStruct{}&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡½æ•°ä¸Šé¢çš„æ³¨é‡Š&lt;code&gt;//go:noinline&lt;/code&gt;å°†ç¦æ­¢&lt;code&gt;Go&lt;/code&gt;å¯¹è¯¥å‡½æ•°è¿›è¡Œå†…è”ï¼Œè¿™æ ·&lt;code&gt;main&lt;/code&gt;å‡½æ•°å°±ä¼šä½¿ç”¨&lt;code&gt;smallAllocation&lt;/code&gt;å‡½æ•°è¿”å›çš„æŒ‡é’ˆå˜é‡ï¼Œå› ä¸ºè¢«å¤šä¸ªå‡½æ•°ä½¿ç”¨ï¼Œè¿”å›çš„è¿™ä¸ªå˜é‡å°†è¢«åˆ†é…åˆ°å †ä¸Šã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…³äºå†…è”çš„æ¦‚å¿µä¹‹å‰çš„æ–‡ç« æœ‰è¯´è¿‡ï¼š&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;strong&gt;å†…è”æ˜¯ä¸€ç§æ‰‹åŠ¨æˆ–ç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œç”¨äºå°†ç®€çŸ­å‡½æ•°çš„è°ƒç”¨æ›¿æ¢ä¸ºå‡½æ•°ä½“æœ¬èº«ã€‚è¿™ä¹ˆåšçš„åŸå› æ˜¯å®ƒå¯ä»¥æ¶ˆé™¤å‡½æ•°è°ƒç”¨æœ¬èº«çš„å¼€é”€ï¼Œä¹Ÿä½¿å¾—ç¼–è¯‘å™¨èƒ½æ›´é«˜æ•ˆåœ°æ‰§è¡Œå…¶ä»–çš„ä¼˜åŒ–ç­–ç•¥ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥å¦‚æœä¸Šé¢çš„ä¾‹å­ä¸å¹²é¢„ç¼–è¯‘å™¨çš„è¯ï¼Œç¼–è¯‘å™¨é€šè¿‡å†…è”å°†&lt;code&gt;smallAllocation&lt;/code&gt;å‡½æ•°ä½“é‡Œçš„å†…å®¹ç›´æ¥æ”¾åˆ°&lt;code&gt;main&lt;/code&gt;å‡½æ•°é‡Œï¼Œè¿™æ ·å°±ä¸ä¼šäº§ç”Ÿ&lt;code&gt;smallAllocation&lt;/code&gt;è¿™ä¸ªå‡½æ•°çš„è°ƒç”¨äº†ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½æ˜¯&lt;code&gt;main&lt;/code&gt;å‡½æ•°å†…è¿™ä¸ªèŒƒå›´ä½¿ç”¨çš„ï¼Œä¹Ÿå°±ä¸åœ¨éœ€è¦å°†å˜é‡å¾€å †ä¸Šåˆ†é…äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»§ç»­è¯´ä¸Šé¢é‚£ä¸ªä¾‹å­ï¼Œé€šè¿‡é€ƒé€¸åˆ†æå‘½ä»¤ &lt;strong&gt;go tool compile Â -m main.go&lt;/strong&gt; å¯ä»¥ç¡®è®¤æˆ‘ä»¬ä¸Šé¢çš„åˆ†æï¼Œ&lt;code&gt;&amp;amp;smallStruct{}&lt;/code&gt;ä¼šè¢«åˆ†é…åˆ°å †ä¸Šå»ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;âœÂ goÂ toolÂ compileÂ -mÂ main.go&lt;br/&gt;main.go:12:6:Â canÂ inlineÂ main&lt;br/&gt;main.go:10:9:Â &amp;amp;smallStructÂ literalÂ escapesÂ toÂ heap&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å€ŸåŠ©å‘½ä»¤&lt;strong&gt;go tool compile -S main.go&lt;/strong&gt;ï¼Œå¯ä»¥æ˜¾ç¤ºè¯¥ç¨‹åºçš„æ±‡ç¼–ä»£ç ï¼Œä¹Ÿå¯ä»¥æ˜ç¡®åœ°å‘æˆ‘ä»¬å±•ç¤ºå†…å­˜çš„åˆ†é…ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;0x001dÂ 00029Â (main.go:10)Â Â Â Â Â Â Â LEAQÂ Â Â Â type.&quot;&quot;.smallStruct(SB),Â AX&lt;br/&gt;0x0024Â 00036Â (main.go:10)Â Â Â Â Â Â Â PCDATAÂ Â $2,Â $0&lt;br/&gt;0x0024Â 00036Â (main.go:10)Â Â Â Â Â Â Â MOVQÂ Â Â Â AX,Â (SP)&lt;br/&gt;0x0028Â 00040Â (main.go:10)Â Â Â Â Â Â Â CALLÂ Â Â Â runtime.newobject(SB)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å†…ç½®å‡½æ•°&lt;code&gt;newobject&lt;/code&gt;ä¼šé€šè¿‡è°ƒç”¨å¦å¤–ä¸€ä¸ªå†…ç½®å‡½æ•°&lt;code&gt;mallocgc&lt;/code&gt;åœ¨å †ä¸Šåˆ†é…æ–°å†…å­˜ã€‚åœ¨Goé‡Œé¢æœ‰ä¸¤ç§å†…å­˜åˆ†é…ç­–ç•¥ï¼Œä¸€ç§é€‚ç”¨äºç¨‹åºé‡Œå°å†…å­˜å—çš„ç”³è¯·ï¼Œå¦ä¸€ç§é€‚ç”¨äºå¤§å†…å­˜å—çš„ç”³è¯·ï¼Œå¤§å†…å­˜å—æŒ‡çš„æ˜¯å¤§äº32KBã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢æˆ‘ä»¬æ¥ç»†èŠä¸€ä¸‹è¿™ä¸¤ç§ç­–ç•¥ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å°äº32KBå†…å­˜å—çš„åˆ†é…ç­–ç•¥&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ç¨‹åºé‡Œå‘ç”Ÿäº†&lt;code&gt;32kb&lt;/code&gt;ä»¥ä¸‹çš„å°å—å†…å­˜ç”³è¯·æ—¶ï¼ŒGoä¼šä»ä¸€ä¸ªå«åšçš„&lt;code&gt;mcache&lt;/code&gt;çš„æœ¬åœ°ç¼“å­˜ç»™ç¨‹åºåˆ†é…å†…å­˜ã€‚è¿™ä¸ªæœ¬åœ°ç¼“å­˜&lt;code&gt;mcache&lt;/code&gt;æŒæœ‰ä¸€ç³»åˆ—çš„å¤§å°ä¸º&lt;code&gt;32kb&lt;/code&gt;çš„å†…å­˜å—ï¼Œè¿™æ ·çš„ä¸€ä¸ªå†…å­˜å—é‡Œå«åš&lt;code&gt;mspan&lt;/code&gt;ï¼Œå®ƒæ˜¯è¦ç»™ç¨‹åºåˆ†é…å†…å­˜æ—¶çš„åˆ†é…å•å…ƒã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.687382297551789&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4ibYqZUwMxwOh3sQpHvQowB6XvZYknRxo5dhC3uvlOr0etLAibsgPm56FalO52ZQVdfat8aSUkQDQA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;531&quot;/&gt;&lt;figcaption&gt;ä»mcacheä¸­ç»™ç¨‹åºåˆ†é…å†…å­˜&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨Goçš„è°ƒåº¦å™¨æ¨¡å‹é‡Œï¼Œæ¯ä¸ªçº¿ç¨‹&lt;code&gt;M&lt;/code&gt;ä¼šç»‘å®šç»™ä¸€ä¸ªå¤„ç†å™¨&lt;code&gt;P&lt;/code&gt;ï¼Œåœ¨å•ä¸€ç²’åº¦çš„æ—¶é—´é‡Œåªèƒ½åšå¤šå¤„ç†è¿è¡Œä¸€ä¸ª&lt;code&gt;goroutine&lt;/code&gt;ï¼Œæ¯ä¸ª&lt;code&gt;P&lt;/code&gt;éƒ½ä¼šç»‘å®šä¸€ä¸ªä¸Šé¢è¯´çš„æœ¬åœ°ç¼“å­˜&lt;code&gt;mcache&lt;/code&gt;ã€‚å½“éœ€è¦è¿›è¡Œå†…å­˜åˆ†é…æ—¶ï¼Œå½“å‰è¿è¡Œçš„&lt;code&gt;goroutine&lt;/code&gt;ä¼šä»&lt;code&gt;mcache&lt;/code&gt;ä¸­æŸ¥æ‰¾å¯ç”¨çš„&lt;code&gt;mspan&lt;/code&gt;ã€‚ä»æœ¬åœ°&lt;code&gt;mcache&lt;/code&gt;é‡Œåˆ†é…å†…å­˜æ—¶ä¸éœ€è¦åŠ é”ï¼Œè¿™ç§åˆ†é…ç­–ç•¥æ•ˆç‡æ›´é«˜ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£ä¹ˆæœ‰äººå°±ä¼šé—®äº†ï¼Œæœ‰çš„å˜é‡å¾ˆå°å°±æ˜¯æ•°å­—ï¼Œæœ‰çš„å´æ˜¯ä¸€ä¸ªå¤æ‚çš„ç»“æ„ä½“ï¼Œç”³è¯·å†…å­˜æ—¶éƒ½åˆ†ç»™ä»–ä»¬ä¸€ä¸ª&lt;code&gt;mspan&lt;/code&gt;è¿™æ ·çš„å•å…ƒä¼šä¸ä¼šäº§ç”Ÿæµªè´¹ã€‚å…¶å®&lt;code&gt;mcache&lt;/code&gt;æŒæœ‰çš„è¿™ä¸€ç³»åˆ—çš„&lt;code&gt;mspan&lt;/code&gt;å¹¶ä¸éƒ½æ˜¯ç»Ÿä¸€å¤§å°çš„ï¼Œè€Œæ˜¯æŒ‰ç…§å¤§å°ï¼Œä»8å­—èŠ‚åˆ°32KBåˆ†äº†å¤§æ¦‚70ç±»çš„&lt;code&gt;msapn&lt;/code&gt;ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.9553349875930521&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4ibYqZUwMxwOh3sQpHvQowBgFDzQ6BtMd6o63YmyMYy2CwAOba6xqdpsfnUToEmziaBOvoXJ58KQ6Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;403&quot; class=&quot;rich_pages wxw-img&quot;/&gt;&lt;figcaption&gt;æŒ‰ç…§å¤§å°åˆ†ç±»çš„mspan&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°±æ–‡ç« å¼€å§‹çš„é‚£ä¸ªä¾‹å­æ¥è¯´ï¼Œé‚£ä¸ªç»“æ„ä½“çš„å¤§å°æ˜¯32å­—èŠ‚ï¼Œæ­£å¥½32å­—èŠ‚çš„è¿™ç§&lt;code&gt;mspan&lt;/code&gt;èƒ½æ»¡è¶³éœ€æ±‚ï¼Œé‚£ä¹ˆåˆ†é…å†…å­˜çš„æ—¶å€™å°±ä¼šç»™å®ƒåˆ†é…ä¸€ä¸ª32å­—èŠ‚å¤§å°çš„&lt;code&gt;mspan&lt;/code&gt;ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.687382297551789&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4ibYqZUwMxwOh3sQpHvQowBbImaUer9P3Fy91cNicyno4uIDBcw4scyt0z8lYePgJngA61diaLVF0bg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;531&quot;/&gt;&lt;figcaption&gt;alloc åˆ†é…å†…å­˜&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç°åœ¨ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå¥½å¥‡ï¼Œå¦‚æœåˆ†é…å†…å­˜æ—¶&lt;code&gt;mcachce&lt;/code&gt;é‡Œæ²¡æœ‰ç©ºé—²çš„32å­—èŠ‚çš„&lt;code&gt;mspan&lt;/code&gt;äº†è¯¥æ€ä¹ˆåŠï¼Ÿ&lt;code&gt;Go&lt;/code&gt;é‡Œè¿˜ä¸ºæ¯ç§ç±»åˆ«çš„&lt;code&gt;mspan&lt;/code&gt;ç»´æŠ¤ç€ä¸€ä¸ª&lt;code&gt;mcentral&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;mcentral&lt;/code&gt;çš„ä½œç”¨æ˜¯ä¸ºæ‰€æœ‰&lt;code&gt;mcache&lt;/code&gt;æä¾›åˆ‡åˆ†å¥½çš„&lt;code&gt;mspan&lt;/code&gt;èµ„æºã€‚æ¯ä¸ª&lt;code&gt;central&lt;/code&gt;ä¼šæŒæœ‰ä¸€ç§ç‰¹å®šå¤§å°çš„å…¨å±€&lt;code&gt;mspan&lt;/code&gt;åˆ—è¡¨ï¼ŒåŒ…æ‹¬å·²åˆ†é…å‡ºå»çš„å’Œæœªåˆ†é…å‡ºå»çš„ã€‚æ¯ä¸ª&lt;code&gt;mcentral&lt;/code&gt;å¯¹åº”ä¸€ç§&lt;code&gt;mspan&lt;/code&gt;ï¼Œå½“å·¥ä½œçº¿ç¨‹çš„&lt;code&gt;mcache&lt;/code&gt;ä¸­æ²¡æœ‰åˆé€‚ï¼ˆä¹Ÿå°±æ˜¯ç‰¹å®šå¤§å°çš„ï¼‰çš„&lt;code&gt;mspan&lt;/code&gt;æ—¶å°±ä¼šä»&lt;code&gt;mcentral&lt;/code&gt; å»è·å–ã€‚&lt;code&gt;mcentral&lt;/code&gt;è¢«æ‰€æœ‰çš„å·¥ä½œçº¿ç¨‹å…±åŒäº«æœ‰ï¼Œå­˜åœ¨å¤šä¸ª&lt;code&gt;goroutine&lt;/code&gt;ç«äº‰çš„æƒ…å†µï¼Œå› æ­¤ä»&lt;code&gt;mcentral&lt;/code&gt;è·å–èµ„æºæ—¶éœ€è¦åŠ é”ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;mcentral&lt;/code&gt;çš„å®šä¹‰å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;//runtime/mcentral.go&lt;br/&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt;Â mcentralÂ structÂ {&lt;br/&gt;Â Â Â Â //Â äº’æ–¥é”&lt;br/&gt;Â Â Â Â lockÂ mutexÂ &lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â //Â è§„æ ¼&lt;br/&gt;Â Â Â Â sizeclassÂ int32Â &lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â //Â å°šæœ‰ç©ºé—²objectçš„mspané“¾è¡¨&lt;br/&gt;Â Â Â Â nonemptyÂ mSpanListÂ &lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â //Â æ²¡æœ‰ç©ºé—²objectçš„mspané“¾è¡¨ï¼Œæˆ–è€…æ˜¯å·²è¢«mcacheå–èµ°çš„msapné“¾è¡¨&lt;br/&gt;Â Â Â Â emptyÂ mSpanListÂ &lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â //Â å·²ç´¯è®¡åˆ†é…çš„å¯¹è±¡ä¸ªæ•°&lt;br/&gt;Â Â Â Â nmallocÂ uint64Â &lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;mcentral&lt;/code&gt;é‡Œç»´æŠ¤ç€ä¸¤ä¸ªåŒå‘é“¾è¡¨ï¼Œ&lt;strong&gt;nonempty&lt;/strong&gt;è¡¨ç¤ºé“¾è¡¨é‡Œè¿˜æœ‰ç©ºé—²çš„&lt;code&gt;mspan&lt;/code&gt;å¾…åˆ†é…ã€‚&lt;strong&gt;empty&lt;/strong&gt;è¡¨ç¤ºè¿™æ¡é“¾è¡¨é‡Œçš„&lt;code&gt;mspan&lt;/code&gt;éƒ½è¢«åˆ†é…äº†&lt;code&gt;object&lt;/code&gt;ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7651122625215889&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4ibYqZUwMxwOh3sQpHvQowB4LP16QeDbtD6qEFycRENb5iaV8kVLUu9kCby1lyo5kPTJ6ekYGSwkeg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;579&quot;/&gt;&lt;figcaption&gt;mcentral&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœä¸Šé¢æˆ‘ä»¬é‚£ä¸ªç¨‹åºç”³è¯·å†…å­˜çš„æ—¶å€™ï¼Œ&lt;code&gt;mcache&lt;/code&gt;é‡Œå·²ç»æ²¡æœ‰åˆé€‚çš„ç©ºé—²&lt;code&gt;mspan&lt;/code&gt;äº†ï¼Œé‚£ä¹ˆå·¥ä½œçº¿ç¨‹å°±ä¼šåƒä¸‹å›¾è¿™æ ·å»&lt;code&gt;mcentral&lt;/code&gt;é‡Œå»ç”³è¯·ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç®€å•è¯´ä¸‹&lt;code&gt;mcache&lt;/code&gt;ä»&lt;code&gt;mcentral&lt;/code&gt;è·å–å’Œå½’è¿˜&lt;code&gt;mspan&lt;/code&gt;çš„æµç¨‹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;è·å– åŠ é”ï¼›ä»&lt;code&gt;nonempty&lt;/code&gt;é“¾è¡¨æ‰¾åˆ°ä¸€ä¸ªå¯ç”¨çš„&lt;code&gt;mspan&lt;/code&gt;ï¼›å¹¶å°†å…¶ä»&lt;code&gt;nonempty&lt;/code&gt;é“¾è¡¨åˆ é™¤ï¼›å°†å–å‡ºçš„&lt;code&gt;mspan&lt;/code&gt;åŠ å…¥åˆ°&lt;code&gt;empty&lt;/code&gt;é“¾è¡¨ï¼›å°†&lt;code&gt;mspan&lt;/code&gt;è¿”å›ç»™å·¥ä½œçº¿ç¨‹ï¼›è§£é”ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å½’è¿˜ åŠ é”ï¼›å°†&lt;code&gt;mspan&lt;/code&gt;ä»&lt;code&gt;empty&lt;/code&gt;é“¾è¡¨åˆ é™¤ï¼›å°†&lt;code&gt;mspan&lt;/code&gt;åŠ å…¥åˆ°&lt;code&gt;nonempty&lt;/code&gt;é“¾è¡¨ï¼›è§£é”ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.581081081081081&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4ibYqZUwMxwOh3sQpHvQowBvfL1SILd6E5mx20krFSFkXaXicDCXOKtMcngSEewiarukXELS57qYLog/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;666&quot;/&gt;&lt;figcaption&gt;ä»mcentralé‡Œç”³è¯·mspan&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“&lt;code&gt;mcentral&lt;/code&gt;æ²¡æœ‰ç©ºé—²çš„&lt;code&gt;mspan&lt;/code&gt;æ—¶ï¼Œä¼šå‘&lt;code&gt;mheap&lt;/code&gt;ç”³è¯·ã€‚è€Œ&lt;code&gt;mheap&lt;/code&gt;æ²¡æœ‰èµ„æºæ—¶ï¼Œä¼šå‘æ“ä½œç³»ç»Ÿç”³è¯·æ–°å†…å­˜ã€‚&lt;code&gt;mheap&lt;/code&gt;ä¸»è¦ç”¨äºå¤§å¯¹è±¡çš„å†…å­˜åˆ†é…ï¼Œä»¥åŠç®¡ç†æœªåˆ‡å‰²çš„&lt;code&gt;mspan&lt;/code&gt;ï¼Œç”¨äºç»™&lt;code&gt;mcentral&lt;/code&gt;åˆ‡å‰²æˆå°å¯¹è±¡ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.38380281690140844&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4ibYqZUwMxwOh3sQpHvQowBkwtqibfPPNMRNZoKxDTZ5fPibrmxOPpCussX9xHtlT4cicdct3XSibxCvA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;568&quot;/&gt;&lt;figcaption&gt;ä»heapä¸Šç”³è¯·å†…å­˜&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŒæ—¶æˆ‘ä»¬ä¹Ÿçœ‹åˆ°ï¼Œ&lt;code&gt;mheap&lt;/code&gt;ä¸­å«æœ‰æ‰€æœ‰è§„æ ¼çš„&lt;code&gt;mcentral&lt;/code&gt;ï¼Œæ‰€ä»¥ï¼Œå½“ä¸€ä¸ª&lt;code&gt;mcache&lt;/code&gt;ä»&lt;code&gt;mcentral&lt;/code&gt;ç”³è¯·&lt;code&gt;mspan&lt;/code&gt;æ—¶ï¼Œåªéœ€è¦åœ¨ç‹¬ç«‹çš„&lt;code&gt;mcentral&lt;/code&gt;ä¸­ä½¿ç”¨é”ï¼Œå¹¶ä¸ä¼šå½±å“ç”³è¯·å…¶ä»–è§„æ ¼çš„&lt;code&gt;mspan&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šé¢è¯´äº†æ¯ç§å°ºå¯¸çš„&lt;code&gt;mspan&lt;/code&gt;éƒ½æœ‰ä¸€ä¸ªå…¨å±€çš„åˆ—è¡¨å­˜æ”¾åœ¨&lt;code&gt;mcentral&lt;/code&gt;é‡Œä¾›æ‰€æœ‰çº¿ç¨‹ä½¿ç”¨ï¼Œæ‰€æœ‰&lt;code&gt;mcentral&lt;/code&gt;çš„é›†åˆåˆ™æ˜¯å­˜æ”¾äº&lt;code&gt;mheap&lt;/code&gt;ä¸­çš„ã€‚&lt;code&gt;mheap&lt;/code&gt;é‡Œçš„&lt;code&gt;arena&lt;/code&gt; åŒºåŸŸæ˜¯çœŸæ­£çš„å †åŒºï¼Œè¿è¡Œæ—¶ä¼šå°† &lt;code&gt;8KB&lt;/code&gt; çœ‹åšä¸€é¡µï¼Œè¿™äº›å†…å­˜é¡µä¸­å­˜å‚¨äº†æ‰€æœ‰åœ¨å †ä¸Šåˆå§‹åŒ–çš„å¯¹è±¡ã€‚è¿è¡Œæ—¶ä½¿ç”¨äºŒç»´çš„ runtime.heapArena æ•°ç»„ç®¡ç†æ‰€æœ‰çš„å†…å­˜ï¼Œæ¯ä¸ª runtime.heapArena éƒ½ä¼šç®¡ç† 64MB çš„å†…å­˜ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.706766917293233&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4ibYqZUwMxwOh3sQpHvQowBylDhdmic0LGrKsfdAE1ESHV3GCt1F9auPJJ9R8qJu2tuCaryPoyZ4Ow/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;399&quot; class=&quot;rich_pages wxw-img&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœ &lt;code&gt;arena&lt;/code&gt; åŒºåŸŸæ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼Œä¼šè°ƒç”¨ runtime.mheap.sysAlloc ä»æ“ä½œç³»ç»Ÿä¸­ç”³è¯·æ›´å¤šçš„å†…å­˜ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å¤§äº32KBå†…å­˜å—çš„åˆ†é…ç­–ç•¥&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Goæ²¡æ³•ä½¿ç”¨å·¥ä½œçº¿ç¨‹çš„æœ¬åœ°ç¼“å­˜&lt;code&gt;mcache&lt;/code&gt;å’Œå…¨å±€ä¸­å¿ƒç¼“å­˜&lt;code&gt;mcentral&lt;/code&gt;ä¸Šç®¡ç†è¶…è¿‡32KBçš„å†…å­˜åˆ†é…ï¼Œæ‰€ä»¥å¯¹äºé‚£äº›è¶…è¿‡32KBçš„å†…å­˜ç”³è¯·ï¼Œä¼šç›´æ¥ä»å †ä¸Š(&lt;code&gt;mheap&lt;/code&gt;)ä¸Šåˆ†é…å¯¹åº”çš„æ•°é‡çš„å†…å­˜é¡µï¼ˆæ¯é¡µå¤§å°æ˜¯8KBï¼‰ç»™ç¨‹åºã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3383742911153119&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4ibYqZUwMxwOh3sQpHvQowBv8NT2G2tibX9v3icjIGVRZsNxtnCgHibToeK6Iiaql8iadLakqAAarrX3FQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;529&quot;/&gt;&lt;figcaption&gt;ç›´æ¥ä»å †ä¸Šåˆ†é…å†…å­˜&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬æŠŠå†…å­˜åˆ†é…ç®¡ç†æ¶‰åŠçš„æ‰€æœ‰æ¦‚å¿µä¸²èµ·æ¥ï¼Œå¯ä»¥å‹¾ç”»å‡ºGoå†…å­˜ç®¡ç†çš„ä¸€ä¸ªå…¨å±€è§†å›¾ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5203883495145631&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4ibYqZUwMxwOh3sQpHvQowBZz5gbKtQbg119JrXsGT7WVsjBh3l7c3DE1Dk7P5tKsmer2cibibUYJibQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1030&quot;/&gt;&lt;figcaption&gt;Goå†…å­˜åˆ†é…çš„å…¨å±€ç¤ºæ„å›¾&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Goè¯­è¨€çš„å†…å­˜åˆ†é…éå¸¸å¤æ‚ï¼Œè¿™ä¸ªæ–‡ç« ä»ä¸€ä¸ªæ¯”è¾ƒç²—çš„è§’åº¦æ¥çœ‹Goçš„å†…å­˜åˆ†é…ï¼Œå¹¶æ²¡æœ‰æ·±å…¥ç»†èŠ‚ã€‚ä¸€èˆ¬è€Œè¨€ï¼Œäº†è§£å®ƒçš„åŸç†ï¼Œåˆ°è¿™ä¸ªç¨‹åº¦ä¹Ÿå°±å¯ä»¥äº†ï¼ˆåº”ä»˜é¢è¯•ï¼‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ€»ç»“èµ·æ¥å…³äºGoå†…å­˜åˆ†é…ç®¡ç†çš„ç­–ç•¥æœ‰å¦‚ä¸‹å‡ ç‚¹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;Goåœ¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œä¼šå‘æ“ä½œç³»ç»Ÿç”³è¯·ä¸€å¤§å—å†…å­˜ï¼Œç”±&lt;code&gt;mheap&lt;/code&gt;ç»“æ„å…¨å±€ç®¡ç†ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Goå†…å­˜ç®¡ç†çš„åŸºæœ¬å•å…ƒæ˜¯&lt;code&gt;mspan&lt;/code&gt;ï¼Œæ¯ç§&lt;code&gt;mspan&lt;/code&gt;å¯ä»¥åˆ†é…ç‰¹å®šå¤§å°çš„&lt;code&gt;object&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;mcache&lt;/code&gt;, &lt;code&gt;mcentral&lt;/code&gt;, &lt;code&gt;mheap&lt;/code&gt;æ˜¯&lt;code&gt;Go&lt;/code&gt;å†…å­˜ç®¡ç†çš„ä¸‰å¤§ç»„ä»¶ï¼Œ&lt;code&gt;mcache&lt;/code&gt;ç®¡ç†çº¿ç¨‹åœ¨æœ¬åœ°ç¼“å­˜çš„&lt;code&gt;mspan&lt;/code&gt;ï¼›&lt;code&gt;mcentral&lt;/code&gt;ç®¡ç†å…¨å±€çš„&lt;code&gt;mspan&lt;/code&gt;ä¾›æ‰€æœ‰çº¿ç¨‹ä½¿ç”¨ï¼›&lt;code&gt;mheap&lt;/code&gt;ç®¡ç†&lt;code&gt;Go&lt;/code&gt;çš„æ‰€æœ‰åŠ¨æ€åˆ†é…å†…å­˜ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸€èˆ¬å°å¯¹è±¡é€šè¿‡&lt;code&gt;mspan&lt;/code&gt;åˆ†é…å†…å­˜ï¼›å¤§å¯¹è±¡åˆ™ç›´æ¥ç”±&lt;code&gt;mheap&lt;/code&gt;åˆ†é…å†…å­˜ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;ç›¸å…³é˜…è¯»&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzUzNTY5MzU2MA==&amp;amp;mid=2247485579&amp;amp;idx=1&amp;amp;sn=f481cff4ffccacc186a020e45e884924&amp;amp;chksm=fa80d91ccdf7500ab984ecde7056aa29a2986c423557736c32bd251f2cb5d1ce1e54909753cc&amp;amp;token=1603590138&amp;amp;lang=zh_CN&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;Goå†…å­˜ç®¡ç†ä¹‹ä»£ç çš„é€ƒé€¸åˆ†æ&lt;/a&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzUzNTY5MzU2MA==&amp;amp;mid=2247484559&amp;amp;idx=1&amp;amp;sn=d639ce831d514c0f73f195f207c0583d&amp;amp;chksm=fa80d518cdf75c0e224697bd9f6f97ad94082f09591d2b9141974baf8a1054e9de0d895fb603&amp;amp;token=1603590138&amp;amp;lang=zh_CN&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;ä¸Šå‘¨å¹¶å‘é¢˜çš„è§£é¢˜æ€è·¯ä»¥åŠä»‹ç»Goè¯­è¨€è°ƒåº¦å™¨&lt;/a&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span/&gt;&lt;span&gt;å‚è€ƒé“¾æ¥&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt; Memory Management and Allocation&lt;/span&gt;&lt;sup&gt;[1]&lt;/sup&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å›¾è§£Goè¯­è¨€å†…å­˜åˆ†é…&lt;/span&gt;&lt;sup&gt;[2]&lt;/sup&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å†…å­˜åˆ†é…å™¨&lt;/span&gt;&lt;sup&gt;[3]&lt;/sup&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;/span&gt;&lt;/section&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzUzNTY5MzU2MA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/z4pQ0O5h0f4pGhLz2xEbRFHnAQon2QLYgbBibCJo1ibJHesLWshPJeRibateRtAqkaf6BgjlbhYiaxHLq6Zu07CRPw/0?wx_fmt=png&quot; data-nickname=&quot;ç½‘ç®¡å¨biå¨&quot; data-alias=&quot;kevin_tech&quot; data-signature=&quot;åˆ†äº«è½¯ä»¶å¼€å‘å’Œç³»ç»Ÿæ¶æ„è®¾è®¡åŸºç¡€ã€Go è¯­è¨€å’ŒKubernetesã€‚&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;p&gt;&lt;/p&gt;&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>5374318ab5f8c7f7184a8468a026f1f7</guid>
<title>garr ï¼šé«˜æ€§èƒ½ã€çº¿ç¨‹å®‰å…¨ã€æ— é”çš„ go æ•°æ®ç»“æ„é›†åˆ</title>
<link>https://toutiao.io/k/8y2p13x</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;article class=&quot;markdown-body entry-content container-lg&quot; itemprop=&quot;text&quot;&gt;&lt;h1 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-garr---go-libs-in-a-jar&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#garr---go-libs-in-a-jar&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Garr - Go libs in a Jar&lt;/h1&gt;
&lt;p dir=&quot;auto&quot;&gt;&lt;a href=&quot;https://pkg.go.dev/go.linecorp.com/garr&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/ef0553731b200a819d39d8cc7e7977fd6ba3fd2a6db5c6d654181db1ab735727/68747470733a2f2f706b672e676f2e6465762f62616467652f676f2e6c696e65636f72702e636f6d2f676172722e737667&quot; alt=&quot;Go Reference&quot; data-canonical-src=&quot;https://pkg.go.dev/badge/go.linecorp.com/garr.svg&quot;/&gt;&lt;/a&gt;
&lt;a target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; href=&quot;https://github.com/line/garr/actions/workflows/ci.yml/badge.svg&quot;&gt;&lt;img src=&quot;https://github.com/line/garr/actions/workflows/ci.yml/badge.svg&quot; alt=&quot;CI&quot;/&gt;&lt;/a&gt;
&lt;a href=&quot;https://goreportcard.com/report/go.linecorp.com/garr&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/edf4b843efd365f4f0bc23578ba03523946158a91ee7357d9b03811778dfcd79/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f676f2e6c696e65636f72702e636f6d2f67617272&quot; alt=&quot;Go Report Card&quot; data-canonical-src=&quot;https://goreportcard.com/badge/go.linecorp.com/garr&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p dir=&quot;auto&quot;&gt;Collection of high performance, thread-safe, lock-free go data structures.&lt;/p&gt;
&lt;ul dir=&quot;auto&quot;&gt;
&lt;li&gt;&lt;a href=&quot;/line/garr/blob/main/adder/README.md&quot;&gt;adder&lt;/a&gt; - Data structure to perform highly-performant sum under high contention. Inspired by &lt;a href=&quot;https://openjdk.java.net/&quot; rel=&quot;nofollow&quot;&gt;OpenJDK LongAdder&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/line/garr/blob/main/circuit-breaker/README.md&quot;&gt;circuit-breaker&lt;/a&gt; - Data structure to implement circuit breaker pattern to detect remote service failure/alive status.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/line/garr/blob/main/queue/README.md&quot;&gt;queue&lt;/a&gt; - Queue data structure, go implementation of &lt;code&gt;JDKLinkedQueue&lt;/code&gt; and &lt;code&gt;MutexLinkedQueue&lt;/code&gt; from &lt;code&gt;OpenJDK&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/line/garr/blob/main/retry/README.md&quot;&gt;retry&lt;/a&gt; - Controls backoff between attempts in a retry operation.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;/line/garr/blob/main/worker-pool/README.md&quot;&gt;worker-pool&lt;/a&gt; - Worker pool implementation in go to help perform multiple tasks concurrently with a fixed-but-expandable amount of workers.&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-usage&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#usage&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Usage&lt;/h1&gt;
&lt;h2 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-getting-started&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#getting-started&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Getting started&lt;/h2&gt;
&lt;div class=&quot;highlight highlight-source-shell notranslate position-relative overflow-auto&quot; data-snippet-clipboard-copy-content=&quot;go get -u go.linecorp.com/garr&quot;&gt;&lt;pre&gt;go get -u go.linecorp.com/garr&lt;/pre&gt;&lt;/div&gt;
&lt;h2 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-examples&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#examples&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Examples&lt;/h2&gt;
&lt;p dir=&quot;auto&quot;&gt;Please find detailed examples in each sub-package.&lt;/p&gt;
&lt;h3 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-adder&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#adder&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Adder&lt;/h3&gt;
&lt;div class=&quot;highlight highlight-source-go notranslate position-relative overflow-auto&quot; data-snippet-clipboard-copy-content=&quot;package main&amp;#10;&amp;#10;import (&amp;#10;&amp;quot;fmt&amp;quot;&amp;#10;&amp;quot;time&amp;quot;&amp;#10;&amp;#10;ga &amp;quot;go.linecorp.com/garr/adder&amp;quot;&amp;#10;)&amp;#10;&amp;#10;func main() {&amp;#10;// or ga.DefaultAdder() which uses jdk long-adder as default&amp;#10;adder := ga.NewLongAdder(ga.JDKAdderType) &amp;#10;&amp;#10;for i := 0; i &amp;lt; 100; i++ {&amp;#10;go func() {&amp;#10;adder.Add(123)&amp;#10;}()&amp;#10;}&amp;#10;&amp;#10;time.Sleep(3 * time.Second)&amp;#10;&amp;#10;// get total added value&amp;#10;fmt.Println(adder.Sum()) &amp;#10;}&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-k&quot;&gt;package&lt;/span&gt; main

&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; (
&lt;span class=&quot;pl-s&quot;&gt;&quot;fmt&quot;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&quot;time&quot;&lt;/span&gt;

ga &lt;span class=&quot;pl-s&quot;&gt;&quot;go.linecorp.com/garr/adder&quot;&lt;/span&gt;
)

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;main&lt;/span&gt;() {
&lt;span class=&quot;pl-c&quot;&gt;// or ga.DefaultAdder() which uses jdk long-adder as default&lt;/span&gt;
&lt;span class=&quot;pl-s1&quot;&gt;adder&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;ga&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;NewLongAdder&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;ga&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;JDKAdderType&lt;/span&gt;) 

&lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;; &lt;span class=&quot;pl-s1&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;100&lt;/span&gt;; &lt;span class=&quot;pl-s1&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;++&lt;/span&gt; {
&lt;span class=&quot;pl-k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt;() {
&lt;span class=&quot;pl-s1&quot;&gt;adder&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Add&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;123&lt;/span&gt;)
}()
}

&lt;span class=&quot;pl-s1&quot;&gt;time&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Sleep&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;time&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Second&lt;/span&gt;)

&lt;span class=&quot;pl-c&quot;&gt;// get total added value&lt;/span&gt;
&lt;span class=&quot;pl-s1&quot;&gt;fmt&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Println&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;adder&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Sum&lt;/span&gt;()) 
}&lt;/pre&gt;&lt;/div&gt;
&lt;h4 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-build-your-own-prometheus-counter-with-adder&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#build-your-own-prometheus-counter-with-adder&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Build your own Prometheus counter with Adder&lt;/h4&gt;
&lt;div class=&quot;highlight highlight-source-go notranslate position-relative overflow-auto&quot; data-snippet-clipboard-copy-content=&quot;package prom&amp;#10;&amp;#10;import (&amp;#10;ga &amp;quot;go.linecorp.com/garr/adder&amp;quot;&amp;#10;&amp;#10;&amp;quot;github.com/prometheus/client_golang/prometheus&amp;quot;&amp;#10;dto &amp;quot;github.com/prometheus/client_model/go&amp;quot;&amp;#10;)&amp;#10;&amp;#10;// NewCounterI64 creates a new CounterI64 based on the provided prometheus.CounterOpts.&amp;#10;func NewCounterI64(opts prometheus.CounterOpts) CounterI64 {&amp;#10;return CounterI64{counter: prometheus.NewCounter(opts)}&amp;#10;}&amp;#10;&amp;#10;// CounterI64 is optimized Prometheus Counter for int64 value type.&amp;#10;type CounterI64 struct {&amp;#10;val     ga.JDKAdder&amp;#10;counter prometheus.Counter&amp;#10;}&amp;#10;&amp;#10;// Value returns current value.&amp;#10;func (c *CounterI64) Value() int64 {&amp;#10;return c.val.Sum()&amp;#10;}&amp;#10;&amp;#10;// Reset value.&amp;#10;func (c *CounterI64) Reset() {&amp;#10;c.val.Reset()&amp;#10;}&amp;#10;&amp;#10;// Desc returns metric desc.&amp;#10;func (c *CounterI64) Desc() *prometheus.Desc {&amp;#10;return c.counter.Desc()&amp;#10;}&amp;#10;&amp;#10;// Inc by 1.&amp;#10;func (c *CounterI64) Inc() {&amp;#10;c.val.Add(1)&amp;#10;}&amp;#10;&amp;#10;// Add by variant.&amp;#10;func (c *CounterI64) Add(val int64) {&amp;#10;if val &amp;gt; 0 {&amp;#10;c.val.Add(val)&amp;#10;}&amp;#10;}&amp;#10;&amp;#10;// Write implements prometheus.Metric interface.&amp;#10;func (c *CounterI64) Write(out *dto.Metric) (err error) {&amp;#10;if err = c.counter.Write(out); err == nil {&amp;#10;value := float64(c.val.Sum())&amp;#10;out.Counter.Value = &amp;amp;value&amp;#10;}&amp;#10;return&amp;#10;}&amp;#10;&amp;#10;// Collect implements prometheus.Collector interface.&amp;#10;func (c *CounterI64) Collect(ch chan&amp;lt;- prometheus.Metric) {&amp;#10;ch &amp;lt;- c&amp;#10;}&amp;#10;&amp;#10;// Describe implements prometheus.Collector interface.&amp;#10;func (c *CounterI64) Describe(ch chan&amp;lt;- *prometheus.Desc) {&amp;#10;ch &amp;lt;- c.counter.Desc()&amp;#10;}&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-k&quot;&gt;package&lt;/span&gt; prom

&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; (
ga &lt;span class=&quot;pl-s&quot;&gt;&quot;go.linecorp.com/garr/adder&quot;&lt;/span&gt;

&lt;span class=&quot;pl-s&quot;&gt;&quot;github.com/prometheus/client_golang/prometheus&quot;&lt;/span&gt;
dto &lt;span class=&quot;pl-s&quot;&gt;&quot;github.com/prometheus/client_model/go&quot;&lt;/span&gt;
)

&lt;span class=&quot;pl-c&quot;&gt;// NewCounterI64 creates a new CounterI64 based on the provided prometheus.CounterOpts.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;NewCounterI64&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;opts&lt;/span&gt; prometheus.&lt;span class=&quot;pl-smi&quot;&gt;CounterOpts&lt;/span&gt;) &lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt; {
&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt;{&lt;span class=&quot;pl-c1&quot;&gt;counter&lt;/span&gt;: &lt;span class=&quot;pl-s1&quot;&gt;prometheus&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;NewCounter&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;opts&lt;/span&gt;)}
}

&lt;span class=&quot;pl-c&quot;&gt;// CounterI64 is optimized Prometheus Counter for int64 value type.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;struct&lt;/span&gt; {
&lt;span class=&quot;pl-c1&quot;&gt;val&lt;/span&gt;     ga.&lt;span class=&quot;pl-smi&quot;&gt;JDKAdder&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;counter&lt;/span&gt; prometheus.&lt;span class=&quot;pl-smi&quot;&gt;Counter&lt;/span&gt;
}

&lt;span class=&quot;pl-c&quot;&gt;// Value returns current value.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; (&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Value&lt;/span&gt;() &lt;span class=&quot;pl-smi&quot;&gt;int64&lt;/span&gt; {
&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;val&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Sum&lt;/span&gt;()
}

&lt;span class=&quot;pl-c&quot;&gt;// Reset value.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; (&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Reset&lt;/span&gt;() {
&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;val&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Reset&lt;/span&gt;()
}

&lt;span class=&quot;pl-c&quot;&gt;// Desc returns metric desc.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; (&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Desc&lt;/span&gt;() &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;prometheus.&lt;span class=&quot;pl-smi&quot;&gt;Desc&lt;/span&gt; {
&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;counter&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Desc&lt;/span&gt;()
}

&lt;span class=&quot;pl-c&quot;&gt;// Inc by 1.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; (&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Inc&lt;/span&gt;() {
&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;val&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Add&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;)
}

&lt;span class=&quot;pl-c&quot;&gt;// Add by variant.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; (&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Add&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;int64&lt;/span&gt;) {
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;val&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt; {
&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;val&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Add&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;val&lt;/span&gt;)
}
}

&lt;span class=&quot;pl-c&quot;&gt;// Write implements prometheus.Metric interface.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; (&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Write&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;dto.&lt;span class=&quot;pl-smi&quot;&gt;Metric&lt;/span&gt;) (&lt;span class=&quot;pl-s1&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;error&lt;/span&gt;) {
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;counter&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Write&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;out&lt;/span&gt;); &lt;span class=&quot;pl-s1&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
&lt;span class=&quot;pl-s1&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;float64&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;val&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Sum&lt;/span&gt;())
&lt;span class=&quot;pl-s1&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Counter&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;Value&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;pl-s1&quot;&gt;value&lt;/span&gt;
}
&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt;
}

&lt;span class=&quot;pl-c&quot;&gt;// Collect implements prometheus.Collector interface.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; (&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Collect&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;ch&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;chan&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;&amp;lt;-&lt;/span&gt; prometheus.&lt;span class=&quot;pl-smi&quot;&gt;Metric&lt;/span&gt;) {
&lt;span class=&quot;pl-s1&quot;&gt;ch&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt;
}

&lt;span class=&quot;pl-c&quot;&gt;// Describe implements prometheus.Collector interface.&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; (&lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;CounterI64&lt;/span&gt;) &lt;span class=&quot;pl-en&quot;&gt;Describe&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;ch&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;chan&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;prometheus.&lt;span class=&quot;pl-smi&quot;&gt;Desc&lt;/span&gt;) {
&lt;span class=&quot;pl-s1&quot;&gt;ch&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;c&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;counter&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Desc&lt;/span&gt;()
}&lt;/pre&gt;&lt;/div&gt;
&lt;h3 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-queue&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#queue&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Queue&lt;/h3&gt;
&lt;div class=&quot;highlight highlight-source-go notranslate position-relative overflow-auto&quot; data-snippet-clipboard-copy-content=&quot;package main&amp;#10;&amp;#10;import (&amp;#10;    &amp;quot;fmt&amp;quot;&amp;#10;&amp;#10;    &amp;quot;go.linecorp.com/garr/queue&amp;quot;&amp;#10;)&amp;#10;&amp;#10;func main() {&amp;#10;    q := queue.DefaultQueue() // default using jdk linked queue&amp;#10;&amp;#10;    // push&amp;#10;    q.Offer(123)&amp;#10;&amp;#10;    // return head queue but not remove&amp;#10;    head := q.Peak()&amp;#10;    fmt.Println(head)&amp;#10;&amp;#10;    // remove and return head queue&amp;#10;    polled := q.Poll()&amp;#10;    fmt.Println(polled)&amp;#10;}&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-k&quot;&gt;package&lt;/span&gt; main

&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; (
    &lt;span class=&quot;pl-s&quot;&gt;&quot;fmt&quot;&lt;/span&gt;

    &lt;span class=&quot;pl-s&quot;&gt;&quot;go.linecorp.com/garr/queue&quot;&lt;/span&gt;
)

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;main&lt;/span&gt;() {
    &lt;span class=&quot;pl-s1&quot;&gt;q&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;queue&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;DefaultQueue&lt;/span&gt;() &lt;span class=&quot;pl-c&quot;&gt;// default using jdk linked queue&lt;/span&gt;

    &lt;span class=&quot;pl-c&quot;&gt;// push&lt;/span&gt;
    &lt;span class=&quot;pl-s1&quot;&gt;q&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Offer&lt;/span&gt;(&lt;span class=&quot;pl-c1&quot;&gt;123&lt;/span&gt;)

    &lt;span class=&quot;pl-c&quot;&gt;// return head queue but not remove&lt;/span&gt;
    &lt;span class=&quot;pl-s1&quot;&gt;head&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;q&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Peak&lt;/span&gt;()
    &lt;span class=&quot;pl-s1&quot;&gt;fmt&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Println&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;head&lt;/span&gt;)

    &lt;span class=&quot;pl-c&quot;&gt;// remove and return head queue&lt;/span&gt;
    &lt;span class=&quot;pl-s1&quot;&gt;polled&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;q&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Poll&lt;/span&gt;()
    &lt;span class=&quot;pl-s1&quot;&gt;fmt&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Println&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;polled&lt;/span&gt;)
}&lt;/pre&gt;&lt;/div&gt;
&lt;h3 dir=&quot;auto&quot;&gt;&lt;a id=&quot;user-content-circuit-breaker&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#circuit-breaker&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Circuit Breaker&lt;/h3&gt;
&lt;div class=&quot;highlight highlight-source-go notranslate position-relative overflow-auto&quot; data-snippet-clipboard-copy-content=&quot;package main&amp;#10;&amp;#10;import (&amp;#10;    cbreaker &amp;quot;go.linecorp.com/garr/circuit-breaker&amp;quot;&amp;#10;)&amp;#10;&amp;#10;func makeRequest() error {&amp;#10;return nil&amp;#10;}&amp;#10;&amp;#10;func main() {&amp;#10;    cb := cbreaker.NewCircuitBreakerBuilder().&amp;#10;                        SetTicker(cbreaker.SystemTicker).&amp;#10;                        SetFailureRateThreshold(validFailureRateThreshold).&amp;#10;                        Build()&amp;#10;&amp;#10;    if cb.CanRequest() {&amp;#10;        err := makeRequest()&amp;#10;        if err != nil {&amp;#10;            cb.OnFailure()&amp;#10;        } else {&amp;#10;            cb.OnSuccess()&amp;#10;        }&amp;#10;    }&amp;#10;}&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-k&quot;&gt;package&lt;/span&gt; main

&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; (
    cbreaker &lt;span class=&quot;pl-s&quot;&gt;&quot;go.linecorp.com/garr/circuit-breaker&quot;&lt;/span&gt;
)

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;makeRequest&lt;/span&gt;() &lt;span class=&quot;pl-smi&quot;&gt;error&lt;/span&gt; {
&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;
}

&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;main&lt;/span&gt;() {
    &lt;span class=&quot;pl-s1&quot;&gt;cb&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;cbreaker&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;NewCircuitBreakerBuilder&lt;/span&gt;().
                        &lt;span class=&quot;pl-en&quot;&gt;SetTicker&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;cbreaker&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;SystemTicker&lt;/span&gt;).
                        &lt;span class=&quot;pl-en&quot;&gt;SetFailureRateThreshold&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;validFailureRateThreshold&lt;/span&gt;).
                        &lt;span class=&quot;pl-en&quot;&gt;Build&lt;/span&gt;()

    &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;cb&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;CanRequest&lt;/span&gt;() {
        &lt;span class=&quot;pl-s1&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;makeRequest&lt;/span&gt;()
        &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt; {
            &lt;span class=&quot;pl-s1&quot;&gt;cb&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;OnFailure&lt;/span&gt;()
        } &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;pl-s1&quot;&gt;cb&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;OnSuccess&lt;/span&gt;()
        }
    }
}&lt;/pre&gt;&lt;/div&gt;
&lt;/article&gt;
          &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>4d9f3d8a50d3da0b72b348fc85804780</guid>
<title>æŠ€æœ¯æ²Ÿé€šçš„4ä¸ªæŠ€å·§</title>
<link>https://toutiao.io/k/wpojnbl</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                                       &quot; id=&quot;js_content&quot;&gt;
            &lt;p&gt;&lt;span&gt;&lt;strong&gt;å½“åˆ«äººä¸»åŠ¨æ‰¾ä½ æ²Ÿé€š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“åˆ«äººæ‰¾ä½ è¯´ä¸€ä»¶äº‹æƒ…ï¼Œéœ€è¦ä½ å¸®å¿™çš„æ—¶å€™ã€‚è¦ç¡®ä¿é—®æ¸…æ¥šä»¥ä¸‹ä¿¡æ¯ï¼š&lt;/p&gt;&lt;p&gt;1ã€äº‹ä»¶èƒŒæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/p&gt;&lt;p&gt;2ã€é‡åˆ°çš„é—®é¢˜æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/p&gt;&lt;p&gt;3ã€éƒ½æ¶‰åŠå“ªäº›å›¢é˜Ÿæˆ–å“ªäº›äººï¼Ÿ&lt;/p&gt;&lt;p&gt;4ã€æœ‰ä»€ä¹ˆé£é™©ï¼Ÿ&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å½“æ–¹æ¡ˆæ²¡æœ‰å–å¾—å…±è¯†&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“ä¸¤ä¸ªäººæ–¹æ¡ˆä¸ä¸€è‡´æ—¶ï¼Œè‡ªå·±æå‡ºäº†æ–¹æ¡ˆAï¼Œé¢†å¯¼æå‡ºæ–¹æ¡ˆBã€‚Aå’ŒBéƒ½æœ‰ä¸€å®šçš„é—®é¢˜ï¼Œæ˜¯ä¸€é“å–èˆé¢˜ã€‚è¿™æ—¶å€™ä¸å…¶è®¨è®ºå–è°èˆè°ï¼Œä¸å¦‚è¿™ä¹ˆå›ç­”ï¼š&lt;/p&gt;&lt;p&gt;æˆ‘å†å›å»æƒ³æƒ³æœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ¡ˆã€‚&lt;/p&gt;&lt;p&gt;å¦‚æœè‡ªå·±æ˜¯é¢†å¯¼ï¼Œã€Šç¥ç›¾å±€ç‰¹å·¥ã€‹é‡Œç§‘å°”æ£®çš„æ€è·¯å¯ä»¥åšä¸€ä¸ªå¾ˆå¥½çš„å‚è€ƒï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.5625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2tk5ianItRl8ic20xHygMAiaj4XFdnA0LFzmNA0FYpedicwjveXibic33Hdlfr8PIP5m951orCMBsL3139BK355BPS6w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1920&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å½“åˆ†æ´¾ä»»åŠ¡æ—¶&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“ç»™ä¸‹å±åˆ†æ´¾ä»»åŠ¡æ—¶ï¼Œåˆ†æ´¾çš„éœ€è¦æ˜¯ä¸€ä¸ªå¾…è§£å†³çš„é—®é¢˜ï¼Œä¸è¦ç›´æ¥ç»™å‡ºè§£å†³æ–¹æ¡ˆã€‚å³ä½¿è‡ªå·±å¿ƒé‡Œæœ‰å¾ˆæˆç†Ÿçš„è§£å†³æ–¹æ¡ˆï¼Œä¹Ÿä¸è¦ç«‹å³è¯´å‡ºæ¥ã€‚ä¸‹å±å¦‚æœé’ˆå¯¹é—®é¢˜ç»™å‡ºäº†å’Œè‡ªå·±ä¸€è‡´çš„æ–¹æ¡ˆï¼Œè¿™å¾ˆå¥½ã€‚ä¹Ÿæœ‰å¯èƒ½ä¸‹å±ä¼šç»™å‡ºæ›´å¥½çš„æ–¹æ¡ˆï¼Œä¸€å¼€å§‹è‡ªèº«ç»™å‡ºçš„æ–¹æ¡ˆä¼šé™åˆ¶è¿™ç§å¯èƒ½æ€§ï¼ŒåŒæ—¶é™ä½ä¸‹å±çš„ä¸»è§‚èƒ½åŠ¨æ€§å’Œç²¾ç¥æŠ•å…¥ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;å½“ä¸‹å±ä¸»åŠ¨æ²Ÿé€šæ—¶&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“ä¸‹å±ä¸»åŠ¨æ²Ÿé€šå‘ç°äº†ä¸€ä¸ªç³»ç»Ÿé—®é¢˜æˆ–è€…ä¼˜åŒ–ç‚¹æ—¶ï¼Œä»–å¯èƒ½æ˜¯å¸¦ç€æ–¹æ¡ˆæ¥æ²Ÿé€šçš„ã€‚ä¸è¦å› ä¸ºæ–¹æ¡ˆæœ‰ä¸€äº›é—®é¢˜ï¼Œå¦è®¤äº†ç³»ç»Ÿå¯ä»¥ä¼˜åŒ–æœ¬èº«ã€‚å› ä¸ºè¿™ä¸ªä¸¾åŠ¨åŒæ—¶é™ä½äº†è‡ªå·±çš„æ ¼å±€ï¼šåªè§£å†³çœ¼å‰ä¸å¾—ä¸è§£å†³çš„é—®é¢˜ï¼Œé€ƒé¿æœªæ¥å¯èƒ½å‘ç”Ÿçš„é—®é¢˜ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong data-brushtype=&quot;text&quot;&gt;ç¼–ç¨‹ä¸€ç”Ÿ&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;å› ä¸ºå…¬ä¼—å·å¹³å°æ›´æ”¹äº†æ¨é€è§„åˆ™ï¼Œå¦‚æœä¸æƒ³é”™è¿‡å†…å®¹ï¼Œè®°å¾—è¯»å®Œç‚¹ä¸€ä¸‹â€œåœ¨çœ‹â€ï¼ŒåŠ ä¸ªâ€œæ˜Ÿæ ‡â€ï¼Œè¿™æ ·æ¯æ¬¡æ–°æ–‡ç« æ¨é€æ‰ä¼šç¬¬ä¸€æ—¶é—´å‡ºç°åœ¨ä½ çš„è®¢é˜…åˆ—è¡¨é‡Œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æƒ³çŸ¥é“è‡ªå·±é”™è¿‡äº†å“ªäº›æ›´æ–°ï¼Œå¯å‚è€ƒæˆ‘ä¸å®šæœŸæ›´æ–°çš„ã€Š&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzUzNjAxODg4MQ==&amp;amp;mid=2247487380&amp;amp;idx=2&amp;amp;sn=4e71d679e2c22f9c5af4ea3abc667b76&amp;amp;chksm=fafde53acd8a6c2c9d2fb5eb83de5e5a2e3f244a57fa275394d9d61a0cdfa154290fe7a21fe8&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ç³»åˆ—æ–‡ç« åˆ†ç±»æ±‡æ€»&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;&lt;em&gt;&lt;strong&gt;ç³»åˆ—æ–‡ç« åˆ†ç±»æ±‡æ€»&lt;/strong&gt;&lt;/em&gt;&lt;/a&gt;ã€‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;
          &lt;/div&gt;

          

          



           
                                
                    
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>6f96b97e33d01158fe41279c9ba490ef</guid>
<title>ç§ç§äººå®¶ç”¨SpringBootå†™çš„åç«¯APIæ¥å£ï¼Œé‚£å«ä¸€ä¸ªä¼˜é›…ï¼</title>
<link>https://toutiao.io/k/279qnem</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;æ—¥å¸¸å·¥ä½œä¸­ï¼Œæˆ‘ä»¬å¼€å‘æ¥å£æ—¶ï¼Œä¸€èˆ¬éƒ½ä¼šæ¶‰åŠåˆ°&lt;strong&gt;å‚æ•°æ ¡éªŒã€å¼‚å¸¸å¤„ç†ã€å°è£…ç»“æœè¿”å›&lt;/strong&gt;ç­‰å¤„ç†ã€‚å¦‚æœæ¯ä¸ªåç«¯å¼€å‘åœ¨å‚æ•°æ ¡éªŒã€å¼‚å¸¸å¤„ç†ç­‰éƒ½æ˜¯å„å†™å„çš„ï¼Œæ²¡æœ‰ç»Ÿä¸€å¤„ç†çš„è¯ï¼Œä»£ç å°±ä¸ä¼˜é›…ï¼Œä¹Ÿä¸å®¹æ˜“ç»´æŠ¤ã€‚æ‰€ä»¥ï¼Œä½œä¸ºä¸€ååˆæ ¼çš„åç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œæˆ‘ä»¬éœ€è¦&lt;strong&gt;ç»Ÿä¸€æ ¡éªŒå‚æ•°ï¼Œç»Ÿä¸€å¼‚å¸¸å¤„ç†ã€ç»Ÿä¸€ç»“æœè¿”å›&lt;/strong&gt;ï¼Œè®©ä»£ç æ›´åŠ è§„èŒƒã€å¯è¯»æ€§æ›´å¼ºã€æ›´å®¹æ˜“ç»´æŠ¤ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ä½¿ç”¨æ³¨è§£ï¼Œä¼˜é›…è¿›è¡Œå‚æ•°æ ¡éªŒ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç»Ÿä¸€ç»“æœè¿”å›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç»Ÿä¸€å¼‚å¸¸å¤„ç†&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å” å¨å‡ å¥&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1. ä½¿ç”¨æ³¨è§£ï¼Œç»Ÿä¸€å‚æ•°æ ¡éªŒ&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡è®¾&lt;strong&gt;å°ç”°èº&lt;/strong&gt;å®ç°ä¸€ä¸ªæ³¨å†Œç”¨æˆ·çš„åŠŸèƒ½ï¼Œåœ¨controller å±‚ï¼Œä»–ä¼šå…ˆè¿›è¡Œæ ¡éªŒå‚æ•°ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;@RestController&lt;/span&gt;&lt;br/&gt;&lt;span&gt;@RequestMapping&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;UserController&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@RequestMapping&lt;/span&gt;(&lt;span&gt;&quot;addUser&quot;&lt;/span&gt;)&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â StringÂ &lt;span&gt;addUser&lt;/span&gt;&lt;span&gt;(UserParamÂ userParam)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (StringUtils.isEmpty(userParam.getUserName()))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (StringUtils.isEmpty(userParam.getPhone()))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;æ‰‹æœºå·ä¸èƒ½ä¸ºç©º&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (userParam.getPhone().length()Â &amp;gt;Â &lt;span&gt;11&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;æ‰‹æœºå·ä¸èƒ½è¶…è¿‡11&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (StringUtils.isEmpty(userParam.getEmail()))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;é‚®ç®±ä¸èƒ½ä¸ºç©º&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//çœç•¥å…¶ä»–å‚æ•°æ ¡éªŒ&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//todoÂ æ’å…¥ç”¨æˆ·ä¿¡æ¯è¡¨&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;SUCCESS&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»¥ä¸Šä»£ç æœ‰ä»€ä¹ˆé—®é¢˜å˜›ï¼Ÿ&lt;strong&gt;å…¶å®æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œå°±æ˜¯æ ¡éªŒæœ‰ç‚¹è¾£çœ¼ç›&lt;/strong&gt;ã€‚æ­£å¸¸çš„æ·»åŠ ç”¨æˆ·ä¸šåŠ¡è¿˜æ²¡å†™ï¼Œå‚æ•°æ ¡éªŒå°±ä¸€å¤§å †å•¦ã€‚å‡è®¾åæ¥ï¼Œå°ç”°èºåˆæ¥äº†ä¸€ä¸ªéœ€æ±‚ï¼šç¼–è¾‘ç”¨æˆ·ä¿¡æ¯ã€‚å®ç°ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯å‰ï¼Œä¹Ÿæ˜¯å…ˆæ ¡éªŒä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;@RequestMapping&lt;/span&gt;(&lt;span&gt;&quot;editUser&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â StringÂ &lt;span&gt;editUser&lt;/span&gt;&lt;span&gt;(UserParamÂ userParam)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (StringUtils.isEmpty(userParam.getUserName()))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (StringUtils.isEmpty(userParam.getPhone()))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;æ‰‹æœºå·ä¸èƒ½ä¸ºç©º&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (userParam.getPhone().length()Â &amp;gt;Â &lt;span&gt;11&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;æ‰‹æœºå·ä¸èƒ½è¶…è¿‡11&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (StringUtils.isEmpty(userParam.getEmail()))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;é‚®ç®±ä¸èƒ½ä¸ºç©º&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//çœç•¥å…¶ä»–å‚æ•°æ ¡éªŒ&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//todoÂ ç¼–è¾‘ç”¨æˆ·ä¿¡æ¯è¡¨&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;SUCCESS&quot;&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ³¨è§£çš„æ–¹å¼ï¼Œæ¥è¿›è¡Œå‚æ•°æ ¡éªŒï¼Œè¿™æ ·ä»£ç æ›´åŠ ç®€æ´ï¼Œä¹Ÿæ–¹ä¾¿ç»Ÿä¸€ç®¡ç†ã€‚å®é™…ä¸Šï¼Œ &lt;code&gt;spring boot&lt;/code&gt;æœ‰ä¸ª&lt;code&gt;validation&lt;/code&gt;çš„ç»„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿æ¥å³ç”¨ã€‚å¼•å…¥è¿™ä¸ªåŒ…å³å¯ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;&lt;span&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;org.springframework.boot&lt;span&gt;&amp;lt;/&lt;span&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;spring-boot-starter-validation&lt;span&gt;&amp;lt;/&lt;span&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¼•å…¥åŒ…åï¼Œå‚æ•°æ ¡éªŒå°±éå¸¸ç®€æ´å•¦ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;UserParam&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@NotNull&lt;/span&gt;(messageÂ =Â &lt;span&gt;&quot;ç”¨æˆ·åä¸èƒ½ä¸ºç©º&quot;&lt;/span&gt;)&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â StringÂ userName;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@NotNull&lt;/span&gt;(messageÂ =Â &lt;span&gt;&quot;æ‰‹æœºå·ä¸èƒ½ä¸ºç©º&quot;&lt;/span&gt;)&lt;br/&gt;Â Â Â Â &lt;span&gt;@Max&lt;/span&gt;(valueÂ =Â &lt;span&gt;11&lt;/span&gt;)&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â StringÂ phone;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@NotNull&lt;/span&gt;(messageÂ =Â &lt;span&gt;&quot;é‚®ç®±ä¸èƒ½ä¸ºç©º&quot;&lt;/span&gt;)&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â StringÂ email;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç„¶ååœ¨&lt;code&gt;UserParam&lt;/code&gt;å‚æ•°å¯¹è±¡ä¸­ï¼ŒåŠ å…¥&lt;code&gt;@Validated&lt;/code&gt;æ³¨è§£å“ˆï¼ŒæŠŠé”™è¯¯ä¿¡æ¯æ¥æ”¶åˆ°&lt;code&gt;BindingResult&lt;/code&gt;å¯¹è±¡ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Â Â Â Â &lt;span&gt;@RequestMapping&lt;/span&gt;(&lt;span&gt;&quot;addUser&quot;&lt;/span&gt;)&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â StringÂ &lt;span&gt;addUser&lt;/span&gt;&lt;span&gt;(@ValidatedÂ UserParamÂ userParam,Â BindingResultÂ result)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;br/&gt;Â Â Â Â Â Â Â Â List&amp;lt;FieldError&amp;gt;Â fieldErrorsÂ =Â result.getFieldErrors();&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (!fieldErrors.isEmpty())Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â fieldErrors.get(&lt;span&gt;0&lt;/span&gt;).getDefaultMessage();&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//todoÂ æ’å…¥ç”¨æˆ·ä¿¡æ¯è¡¨&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;SUCCESS&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2. æ¥å£ç»Ÿä¸€å“åº”å¯¹è±¡è¿”å›&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœä½ åœ¨ä½ ä»¬é¡¹ç›®ä»£ç ä¸­ï¼Œçœ‹åˆ°controller å±‚æŠ¥æ–‡è¿”å›ç»“æœï¼Œæœ‰è¿™æ ·çš„ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;@RequestMapping&lt;/span&gt;(&lt;span&gt;&quot;/hello&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â StringÂ &lt;span&gt;getStr&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;hello,æ¡ç”°èºçš„å°ç”·å­©&quot;&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;//è¿”å›&lt;/span&gt;&lt;br/&gt;hello,æ¡ç”°èºçš„å°ç”·å­©&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¹Ÿæœ‰è¿™æ ·çš„ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;@RequestMapping&lt;/span&gt;(&lt;span&gt;&quot;queryUser&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â UserVoÂ &lt;span&gt;queryUser&lt;/span&gt;&lt;span&gt;(StringÂ userId)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â UserVo(&lt;span&gt;&quot;666&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;æ¡ç”°èºçš„å°ç”·å­©&quot;&lt;/span&gt;);&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;//è¿”å›:&lt;/span&gt;&lt;br/&gt;{&lt;span&gt;&quot;userId&quot;&lt;/span&gt;:&lt;span&gt;&quot;666&quot;&lt;/span&gt;,&lt;span&gt;&quot;name&quot;&lt;/span&gt;:&lt;span&gt;&quot;æ¡ç”°èºçš„å°ç”·å­©&quot;&lt;/span&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ˜¾ç„¶ï¼Œå¦‚æœæ¥å£è¿”å›ç»“æœä¸ç»Ÿä¸€ï¼Œå‰ç«¯å¤„ç†å°±ä¸æ–¹ä¾¿ï¼Œæˆ‘ä»¬ä»£ç ä¹Ÿä¸å¥½ç»´æŠ¤ã€‚å†æ¯”å¦‚&lt;strong&gt;å°ç”°èº&lt;/strong&gt;å–œæ¬¢ç”¨&lt;code&gt;Result&lt;/code&gt;å¤„ç†ç»“æœï¼Œ&lt;strong&gt;å¤§ç”°èº&lt;/strong&gt;å–œæ¬¢ç”¨&lt;code&gt;Response&lt;/code&gt;å¤„ç†ç»“æœï¼Œå¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œè¿™äº›ä»£ç æœ‰å¤šä¹±ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ä½œä¸ºåç«¯å¼€å‘ï¼Œæˆ‘ä»¬é¡¹ç›®çš„å“åº”ç»“æœï¼Œéœ€è¦&lt;strong&gt;ç»Ÿä¸€æ ‡å‡†çš„è¿”å›æ ¼å¼&lt;/strong&gt;ã€‚ä¸€èˆ¬ä¸€ä¸ªæ ‡å‡†çš„å“åº”æŠ¥æ–‡å¯¹è±¡ï¼Œéƒ½æœ‰å“ªäº›å±æ€§å‘¢ï¼Ÿ&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;code ï¼šå“åº”çŠ¶æ€ç &lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;message ï¼šå“åº”ç»“æœæè¿°&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;dataï¼šè¿”å›çš„æ•°æ®&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å“åº”çŠ¶æ€ç ä¸€èˆ¬ç”¨æšä¸¾è¡¨ç¤ºå“ˆï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;enum&lt;/span&gt;Â CodeEnumÂ {&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**æ“ä½œæˆåŠŸ**/&lt;/span&gt;&lt;br/&gt;Â Â Â Â SUCCESS(&lt;span&gt;&quot;0000&quot;&lt;/span&gt;,&lt;span&gt;&quot;æ“ä½œæˆåŠŸ&quot;&lt;/span&gt;),&lt;br/&gt;Â Â Â Â &lt;span&gt;/**æ“ä½œå¤±è´¥**/&lt;/span&gt;&lt;br/&gt;Â Â Â Â ERROR(&lt;span&gt;&quot;9999&quot;&lt;/span&gt;,&lt;span&gt;&quot;æ“ä½œå¤±è´¥&quot;&lt;/span&gt;),;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â è‡ªå®šä¹‰çŠ¶æ€ç &lt;br/&gt;Â Â Â Â Â **/&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â StringÂ code;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**è‡ªå®šä¹‰æè¿°**/&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â StringÂ message;&lt;br/&gt;&lt;br/&gt;Â Â Â Â CodeEnum(StringÂ code,Â StringÂ message){&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;this&lt;/span&gt;.codeÂ =Â code;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;this&lt;/span&gt;.messageÂ =Â message;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â StringÂ &lt;span&gt;getCode&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â code;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â StringÂ &lt;span&gt;getMessage&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â message;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å› ä¸ºè¿”å›çš„æ•°æ®ç±»å‹ä¸æ˜¯ç¡®å®šçš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ³›å‹ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;/**&lt;br/&gt;Â *Â &lt;span&gt;@author&lt;/span&gt;Â æ¡ç”°èºçš„å°ç”·å­©&lt;br/&gt;Â *Â &lt;span&gt;@param&lt;/span&gt;Â &amp;lt;T&amp;gt;&lt;br/&gt;Â */&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;BaseResponse&lt;/span&gt;&amp;lt;&lt;span&gt;T&lt;/span&gt;&amp;gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â å“åº”çŠ¶æ€ç ï¼ˆ0000è¡¨ç¤ºæˆåŠŸï¼Œ9999è¡¨ç¤ºå¤±è´¥&lt;br/&gt;Â Â Â Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â StringÂ code;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â å“åº”ç»“æœæè¿°&lt;br/&gt;Â Â Â Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â StringÂ message;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â è¿”å›çš„æ•°æ®&lt;br/&gt;Â Â Â Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â TÂ data;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â æˆåŠŸè¿”å›&lt;br/&gt;Â Â Â Â Â *Â &lt;span&gt;@param&lt;/span&gt;Â data&lt;br/&gt;Â Â Â Â Â *Â &lt;span&gt;@param&lt;/span&gt;Â &amp;lt;T&amp;gt;&lt;br/&gt;Â Â Â Â Â *Â &lt;span&gt;@return&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &amp;lt;T&amp;gt;Â &lt;span&gt;BaseResponse&amp;lt;T&amp;gt;Â &lt;span&gt;success&lt;/span&gt;&lt;span&gt;(TÂ data)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â BaseResponse&amp;lt;T&amp;gt;Â response=Â &lt;span&gt;new&lt;/span&gt;Â BaseResponse&amp;lt;&amp;gt;();&lt;br/&gt;Â Â Â Â Â Â Â Â response.setCode(CodeEnum.SUCCESS.getCode());&lt;br/&gt;Â Â Â Â Â Â Â Â response.setMessage(CodeEnum.SUCCESS.getMessage());&lt;br/&gt;Â Â Â Â Â Â Â Â response.setData(data);&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â response;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;/**&lt;br/&gt;Â Â Â Â Â *Â Â å¤±è´¥è¿”å›&lt;br/&gt;Â Â Â Â Â *Â &lt;span&gt;@param&lt;/span&gt;Â code&lt;br/&gt;Â Â Â Â Â *Â &lt;span&gt;@param&lt;/span&gt;Â message&lt;br/&gt;Â Â Â Â Â *Â &lt;span&gt;@param&lt;/span&gt;Â &amp;lt;T&amp;gt;&lt;br/&gt;Â Â Â Â Â *Â &lt;span&gt;@return&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â */&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &amp;lt;T&amp;gt;Â &lt;span&gt;BaseResponse&amp;lt;T&amp;gt;Â &lt;span&gt;fail&lt;/span&gt;&lt;span&gt;(StringÂ code,Â StringÂ message)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â BaseResponse&amp;lt;T&amp;gt;Â responseÂ =Â &lt;span&gt;new&lt;/span&gt;Â BaseResponse&amp;lt;&amp;gt;();&lt;br/&gt;Â Â Â Â Â Â Â Â response.setCode(code);&lt;br/&gt;Â Â Â Â Â Â Â Â response.setMessage(message);&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â response;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;setCode&lt;/span&gt;&lt;span&gt;(StringÂ code)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;this&lt;/span&gt;.codeÂ =Â code;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;setMessage&lt;/span&gt;&lt;span&gt;(StringÂ message)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;this&lt;/span&gt;.messageÂ =Â message;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;setData&lt;/span&gt;&lt;span&gt;(TÂ data)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;this&lt;/span&gt;.dataÂ =Â data;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰äº†ç»Ÿä¸€çš„å“åº”ä½“ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¼˜åŒ–ä¸€ä¸‹controller å±‚çš„ä»£ç å•¦ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;@RequestMapping&lt;/span&gt;(&lt;span&gt;&quot;/hello&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â BaseResponse&amp;lt;String&amp;gt;Â &lt;span&gt;getStr&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â BaseResponse.success(&lt;span&gt;&quot;hello,æ¡ç”°èºçš„å°ç”·å­©&quot;&lt;/span&gt;);&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;//output&lt;/span&gt;&lt;br/&gt;{&lt;span&gt;&quot;code&quot;&lt;/span&gt;:&lt;span&gt;&quot;0000&quot;&lt;/span&gt;,&lt;span&gt;&quot;message&quot;&lt;/span&gt;:&lt;span&gt;&quot;æ“ä½œæˆåŠŸ&quot;&lt;/span&gt;,&lt;span&gt;&quot;data&quot;&lt;/span&gt;:&lt;span&gt;&quot;hello,æ¡ç”°èºçš„å°ç”·å­©&quot;&lt;/span&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;@RequestMapping&lt;/span&gt;(&lt;span&gt;&quot;queryUser&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â BaseResponse&amp;lt;UserVo&amp;gt;Â &lt;span&gt;queryUser&lt;/span&gt;&lt;span&gt;(StringÂ userId)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â BaseResponse.success(&lt;span&gt;new&lt;/span&gt;Â UserVo(&lt;span&gt;&quot;666&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;æ¡ç”°èºçš„å°ç”·å­©&quot;&lt;/span&gt;));&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;//output&lt;/span&gt;&lt;br/&gt;{&lt;span&gt;&quot;code&quot;&lt;/span&gt;:&lt;span&gt;&quot;0000&quot;&lt;/span&gt;,&lt;span&gt;&quot;message&quot;&lt;/span&gt;:&lt;span&gt;&quot;æ“ä½œæˆåŠŸ&quot;&lt;/span&gt;,&lt;span&gt;&quot;data&quot;&lt;/span&gt;:{&lt;span&gt;&quot;userId&quot;&lt;/span&gt;:&lt;span&gt;&quot;666&quot;&lt;/span&gt;,&lt;span&gt;&quot;name&quot;&lt;/span&gt;:&lt;span&gt;&quot;æ¡ç”°èºçš„å°ç”·å­©&quot;&lt;/span&gt;}}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3. ç»Ÿä¸€å¼‚å¸¸å¤„ç†&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯è‡ªå®šä¹‰ç»Ÿä¸€çš„å¼‚å¸¸ç±»ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;BizException&lt;/span&gt;Â &lt;span&gt;extends&lt;/span&gt;Â &lt;span&gt;RuntimeException&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â StringÂ retCode;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â StringÂ retMessage;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;BizException&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;super&lt;/span&gt;();&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;BizException&lt;/span&gt;&lt;span&gt;(StringÂ retCode,Â StringÂ retMessage)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;this&lt;/span&gt;.retCodeÂ =Â retCode;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;this&lt;/span&gt;.retMessageÂ =Â retMessage;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â StringÂ &lt;span&gt;getRetCode&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â retCode;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â StringÂ &lt;span&gt;getRetMessage&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â retMessage;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨controller å±‚ï¼Œå¾ˆå¯èƒ½ä¼šæœ‰ç±»ä¼¼ä»£ç ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;@RequestMapping&lt;/span&gt;(&lt;span&gt;&quot;/query&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â BaseResponse&amp;lt;UserVo&amp;gt;Â &lt;span&gt;queryUserInfo&lt;/span&gt;&lt;span&gt;(UserParamÂ userParam)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â &lt;span&gt;try&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â BaseResponse.success(userService.queryUserInfo(userParam));&lt;br/&gt;Â Â Â Â }Â &lt;span&gt;catch&lt;/span&gt;Â (BizExceptionÂ e)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//doSomething&lt;/span&gt;&lt;br/&gt;Â Â Â Â }Â &lt;span&gt;catch&lt;/span&gt;Â (ExceptionÂ e)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//doSomething&lt;/span&gt;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â BaseResponse.fail(CodeEnum.ERROR.getCode(),CodeEnum.ERROR.getMessage());&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™å—ä»£ç ï¼Œæ²¡ä»€ä¹ˆé—®é¢˜å“ˆï¼Œä½†æ˜¯å¦‚æœ&lt;code&gt;try...catch&lt;/code&gt;å¤ªå¤šï¼Œä¸æ˜¯å¾ˆä¼˜é›…ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥å€ŸåŠ©æ³¨è§£&lt;code&gt;@RestControllerAdvice&lt;/code&gt;ï¼Œè®©ä»£ç æ›´ä¼˜é›…ã€‚&lt;code&gt;@RestControllerAdvice&lt;/code&gt;æ˜¯ä¸€ä¸ªåº”ç”¨äº&lt;code&gt;Controller&lt;/code&gt;å±‚çš„åˆ‡é¢æ³¨è§£ï¼Œå®ƒä¸€èˆ¬é…åˆ&lt;code&gt;@ExceptionHandler&lt;/code&gt;æ³¨è§£ä¸€èµ·ä½¿ç”¨ï¼Œä½œä¸ºé¡¹ç›®çš„å…¨å±€å¼‚å¸¸å¤„ç†ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹demoä»£ç å“ˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿˜æ˜¯åŸæ¥çš„&lt;code&gt;UserController&lt;/code&gt;ï¼Œå’Œä¸€ä¸ªä¼šæŠ›å‡ºå¼‚å¸¸çš„userServiceçš„æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;@RestController&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;UserController&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Autowired&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â UserServiceÂ userService;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@RequestMapping&lt;/span&gt;(&lt;span&gt;&quot;/query&quot;&lt;/span&gt;)&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â BaseResponse&amp;lt;UserVo&amp;gt;Â &lt;span&gt;queryUserInfo1&lt;/span&gt;&lt;span&gt;(UserParamÂ userParam)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â BaseResponse.success(userService.queryUserInfo(userParam));&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;@Service&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;UserServiceImpl&lt;/span&gt;Â &lt;span&gt;implements&lt;/span&gt;Â &lt;span&gt;UserService&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;//æŠ›å‡ºå¼‚å¸¸&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â UserVoÂ &lt;span&gt;queryUserInfo&lt;/span&gt;&lt;span&gt;(UserParamÂ userParam)&lt;/span&gt;Â &lt;span&gt;throws&lt;/span&gt;Â BizExceptionÂ &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;throw&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â BizException(&lt;span&gt;&quot;6666&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;æµ‹è¯•å¼‚å¸¸ç±»&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬å†å®šä¹‰ä¸€ä¸ªå…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼Œç”¨&lt;code&gt;@RestControllerAdvice&lt;/code&gt;æ³¨è§£ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;@RestControllerAdvice&lt;/span&gt;(annotationsÂ =Â RestController&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;ControllerExceptionHandler&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬æœ‰æƒ³è¦æ‹¦æˆªçš„å¼‚å¸¸ç±»å‹ï¼Œæ¯”å¦‚æƒ³æ‹¦æˆª&lt;code&gt;BizException&lt;/code&gt;ç±»å‹ï¼Œå°±æ–°å¢ä¸€ä¸ªæ–¹æ³•ï¼Œä½¿ç”¨&lt;code&gt;@ExceptionHandler&lt;/code&gt;æ³¨è§£ä¿®é¥°ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;@RestControllerAdvice&lt;/span&gt;(annotationsÂ =Â RestController&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;ControllerExceptionHandler&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@ExceptionHandler&lt;/span&gt;(BizException&lt;span&gt;.&lt;span&gt;class&lt;/span&gt;)&lt;br/&gt;Â Â Â Â @&lt;span&gt;ResponseBody&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;BaseResponse&lt;/span&gt;&amp;lt;&lt;span&gt;Void&lt;/span&gt;&amp;gt;Â &lt;span&gt;handler&lt;/span&gt;(&lt;span&gt;BizException&lt;/span&gt;Â &lt;span&gt;e&lt;/span&gt;)Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;è¿›å…¥ä¸šåŠ¡å¼‚å¸¸&quot;&lt;/span&gt;+e.getRetCode()+e.getRetMessage());&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â BaseResponse.fail(CodeEnum.ERROR.getCode(),Â CodeEnum.ERROR.getMessage());&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å” å¨å‡ å¥&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬æ–‡å¤§å®¶å­¦åˆ°äº†å“ªäº›çŸ¥è¯†å‘¢ï¼Ÿ&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ä¸ºäº†å†™å‡ºæ›´ä¼˜é›…ã€æ›´ç®€æ´ã€æ›´å®¹æ˜“ç»´æŠ¤çš„ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦ç»Ÿä¸€å‚æ•°æ ¡éªŒã€ç»Ÿä¸€å“åº”å¯¹è±¡è¿”å›ã€ç»Ÿä¸€å¼‚å¸¸å¤„ç†&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å‚æ•°æ ¡éªŒæ›´ç®€æ´ï¼Œå¯ä»¥ä½¿ç”¨æ³¨è§£å®ç°ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¦‚ä½•ç»Ÿä¸€å“åº”å¯¹è±¡è¿”å›ï¼Œä¸€èˆ¬è¦åŒ…æ‹¬çŠ¶æ€ç ã€æè¿°ä¿¡æ¯ã€è¿”å›æ•°æ®ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;Controller&lt;/code&gt;å±‚å¦‚ä½•ç»Ÿä¸€å…¨å±€å¼‚å¸¸å¤„ç†ï¼Ÿ&lt;code&gt;@RestControllerAdvice&lt;/code&gt;+&lt;code&gt;@ExceptionHandler&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è¿›é˜¶ç¯‡ï¼Ÿå¤§å®¶å¯ä»¥è‡ªå·±å®ç°è‡ªå®šä¹‰æ³¨è§£å“ˆï¼Œä¹Ÿå»ºè®®å»çœ‹çœ‹&lt;code&gt;@RestControllerAdvice&lt;/code&gt;å®ç°åŸç†ï¼Œå®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªåˆ‡é¢æ³¨è§£ï¼Œçœ‹ä¸‹å®ƒçš„æºç å³å¯ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>