<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>86f48cb8792d5df8a06fe1dad75dbdbc</guid>
<title>åˆ†å¸ƒå¼ä¸€è‡´æ€§åè®®ï¼šZAB</title>
<link>https://toutiao.io/k/r6571za</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;post-content&quot;&gt;&lt;h3 id=&quot;ZAB-èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#ZAB-èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;ZAB èƒŒæ™¯&quot;/&gt;ZAB èƒŒæ™¯&lt;/h3&gt;&lt;p&gt;å­¦ä¹ ZABï¼Œéå¸¸æœ‰å¿…è¦èŠèŠå®ƒè¯ç”Ÿçš„èƒŒæ™¯ã€‚å› ä¸ºåœ¨paxosçš„å…‰èŠ’ä¸‹ï¼Œè¿˜æœ‰å¿…è¦æŠ˜è…¾è¿™æ ·ç±»ä¼¼çš„ç®—æ³•å—ï¼Ÿè¿™ä¸ªé—®é¢˜æ˜¯æˆ‘ä»¬åˆæ­¥äº†è§£ZABå…³é”®ã€‚&lt;/p&gt;
&lt;p&gt;çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘æ–­å®šå¤§å®¶éƒ½ä½¿ç”¨è¿‡zookeeperï¼Œå¹¶ä¸”çŸ¥é“zookeeperçš„æ ¸å¿ƒå°±æ˜¯ZABåè®®ã€‚å¦‚æœæ²¡æœ‰çš„è¯ï¼Œéœ€è¦å…ˆå­¦ä¹ ä¸‹zookeeperã€‚æ¯•ç«ŸåŸºç¡€ä¸ç‰¢ï¼Œåœ°åŠ¨å±±æ‘‡ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œå¤šæä¸€å¥ï¼ŒZABçš„ä½œè€…è¯´ZABä¸æ˜¯paxosï¼Œä½†æ˜¯åé¢æˆ‘ä»¬åˆæŠŠZABå½’çº³ä¸ºpaxosã€‚è¿™é‡Œæˆ‘è®¤ä¸ºå•Šï¼Œè¿™ä¸¤ä¸ªè¯´æ³•éƒ½å¯¹ï¼Œåªæ˜¯ä»–ä»¬æè¿°çš„æ—¶é—´ä¸ä¸€è‡´ã€‚åœ¨ZABè¯ç”Ÿçš„æ—¶å€™ï¼Œå®ƒè§£å†³äº†paxosä¸èƒ½ä¿è¯é¡ºåºæ‰§è¡Œçš„é—®é¢˜ï¼Œä»æŸäº›è§’åº¦æ¥è¯´ZABæ˜¯è¦paxosä¼˜ç§€çš„ï¼Œè¯´å®ƒä¸æ˜¯paxosä¹Ÿæ²¡é—®é¢˜ã€‚ä½†æ˜¯åæ¥éšæ¥è¶Šæ¥è¶Šå¤šåˆ†å¸ƒå¼ç®—æ³•è¯ç”Ÿï¼Œä¾‹å¦‚raftï¼Œå› ä¸ºä»–ä»¬éƒ½ç±»ä¼¼paxosæ‰§è¡Œé€»è¾‘ï¼Œæ‰€ä»¥å°†è¿™ç±»ç®—æ³•å½’çº³ä¸ºpaxosçš„å˜ç§ã€‚&lt;/p&gt;
&lt;h4 id=&quot;ä¸ºä½•ä¸ä½¿ç”¨paxosæ¥å®ç°zookeeper&quot;&gt;&lt;a href=&quot;#ä¸ºä½•ä¸ä½¿ç”¨paxosæ¥å®ç°zookeeper&quot; class=&quot;headerlink&quot; title=&quot;ä¸ºä½•ä¸ä½¿ç”¨paxosæ¥å®ç°zookeeper&quot;/&gt;ä¸ºä½•ä¸ä½¿ç”¨paxosæ¥å®ç°zookeeper&lt;/h4&gt;&lt;p&gt;å›è¿‡å¤´æ¥ï¼ŒZABè¯ç”Ÿçš„åŸå› ï¼Œæˆ‘ä»¬å…ˆè€ƒè™‘zookeeperèƒ½ä¸èƒ½ç›´æ¥ä½¿ç”¨paxosä½œä¸ºåˆ†å¸ƒå¼ä¸€è‡´æ€§ç®—æ³•ï¼Ÿç­”æ¡ˆè‚¯å®šæ˜¯å¦å®šçš„ï¼Œæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾æœ‰ä¸ªå®¢æˆ·ç«¯éœ€è¦åˆ†åˆ«åˆ›å»ºç›®å½•ï¼š/foo, /foo/ofcoderã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å‰æ–‡æˆ‘ä»¬å­¦ä¹ è¿‡äº†paxosï¼ŒçŸ¥é“paxosèƒ½é›†ç¾¤å°±æŸä¸ªå€¼è¾¾æˆå…±è¯†ï¼Œä½†æ˜¯å´ä¸å…³å¿ƒè¾¾æˆå…±è¯†çš„å€¼æ˜¯ä»€ä¹ˆã€‚å¦‚æœzookeeperç›´æ¥ä½¿ç”¨paxosï¼Œå°±ä¼šå‡ºç°åœ¨æ²¡æœ‰åˆ›å»º/fooçš„æ—¶å€™ï¼Œåˆ›å»º/foo/ofcoderã€‚æ˜¾ç„¶è¿™å°±æŠ¥é”™äº†ï¼Œå› ä¸ºofcoderçš„ä¸Šçº§ç›®å½•ä¸å­˜åœ¨ã€‚ä¸ºäº†æè¿°è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æè¿°ä¸‹è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;å‡å¦‚æœ‰åŒä¸€ä¸ªä¸šåŠ¡è¯·æ±‚ï¼Œå› ä¸ºå…¥å‚ä¸ä¸€æ ·ï¼Œå¯¼è‡´æœ€åè¦è¾¾æˆå…±è¯†çš„å€¼ä¹Ÿä¸ä¸€æ ·ã€‚ä¾‹å¦‚proposerAï¼Œæ”¶åˆ°è¯·æ±‚å…ˆååˆ›å»º/foo, /foo/ofcoderä¸¤ä¸ªèŠ‚ç‚¹ã€‚proposerBæ”¶åˆ°è¯·æ±‚å…ˆååˆ›å»º/methodï¼Œ/method/farèŠ‚ç‚¹ã€‚&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/zab_1.png&quot; alt=&quot;paxosä¸é€‚åˆå®ç°zookeeper&quot;/&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;proposerBå…ˆå‘èµ·paxosçš„prepareé˜¶æ®µï¼Œå¹¶è·å¾—å¤§å¤šæ•°é€‰ç¥¨ï¼Œå¼€å§‹accepté˜¶æ®µã€‚&lt;/li&gt;
&lt;li&gt;åœ¨proposerBçš„accepté˜¶æ®µï¼Œåªæœ‰acceptAæ¥æ”¶äº†ææ¡ˆ[1, /method]ï¼Œå…¶ä»–èŠ‚ç‚¹éƒ½é€šè¿‡äº†proposerAçš„prepareè¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;æ ¹æ®è§„å®šï¼ŒproposeAçš„acceptçš„ææ¡ˆåº”è¯¥ä¸º[2, /method]ï¼Œå¹¶é€šè¿‡è¯¥ææ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;æ­¤æ—¶proposerBé‡æ–°å¼€å§‹paxosçš„ä¸¤ä¸ªé˜¶æ®µï¼Œå¾—åˆ°è¾¾æˆå…±è¯†çš„ææ¡ˆæ˜¯[2, /method]ã€‚&lt;/li&gt;
&lt;li&gt;proposerAå¼€å§‹ç¬¬äºŒä¸ªå€¼çš„paxosè¿‡ç¨‹ï¼Œå³/foo/ofcoderã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åˆ°æ­¤ä¸ºæ­¢ï¼Œå¯ä»¥çœ‹åˆ°å½“proposerAå¼€å§‹åˆ›å»º/foo/ofcoderæ—¶ï¼Œåˆ™ä¼šå‘ç°/fooæ²¡æœ‰åˆ›å»ºè€Œå¯¼è‡´å¤±è´¥ã€‚å› ä¸ºåœ¨ç¬¬ä¸€è½®paxosåœ¨é›†ç¾¤ä¸­è¾¾æˆå…±è¯†çš„å€¼/methodã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä¸Šé¢çš„è¿‡ç¨‹ï¼Œæˆ‘ä»¬æ›´åŠ è®ºè¯äº†ï¼Œpaxosåªé€‚åˆåœ¨é›†ç¾¤ä¸­ä½¿æŸä¸ªå€¼è¾¾æˆå…±è¯†ï¼Œè€Œä¸å…³å¿ƒè¾¾æˆå…±è¯†çš„å€¼æ˜¯ä»€ä¹ˆã€‚è€Œåœ¨zookeeperä¸­ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸èƒ½æ»¡è¶³ä¸šåŠ¡éœ€æ±‚çš„ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ZABæœ¯è¯­ç§‘æ™®&quot;&gt;&lt;a href=&quot;#ZABæœ¯è¯­ç§‘æ™®&quot; class=&quot;headerlink&quot; title=&quot;ZABæœ¯è¯­ç§‘æ™®&quot;/&gt;ZABæœ¯è¯­ç§‘æ™®&lt;/h3&gt;&lt;p&gt;ZABå¹¶ä¸åƒpaxosï¼Œæ˜¯ä¸€ç§é€šç”¨çš„åˆ†å¸ƒå¼ä¸€è‡´æ€§ç®—æ³•ï¼ŒZABæ˜¯ä¸€ç§ä¸“é—¨ä¸ºzookeeperè®¾è®¡çš„å´©æºƒå¯æ¢å¤çš„åŸå­å¹¿æ’­åè®®ã€‚ç›¸æ¯”äºpaxosï¼Œ&lt;strong&gt;ZABä¸»è¦è§£å†³äº†äº‹åŠ¡æ“ä½œçš„é¡ºåºæ€§&lt;/strong&gt;ï¼Œåœ¨ZABåè®®ä¸­ï¼Œå¦‚æœä¸€ä¸ªäº‹åŠ¡æ“ä½œè¢«å¤„ç†äº†ï¼Œé‚£ä¹ˆæ‰€æœ‰å…¶ä¾èµ–çš„äº‹åŠ¡æ“ä½œéƒ½åº”è¯¥è¢«æå‰å¤„ç†äº†ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å­¦ä¹ ZABä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆæ•´ç†å‡ ä¸ªæœ¯è¯­ã€å› ä¸ºåœ¨ZABçš„è®ºæ–‡ä¸­ï¼Œæœ¯è¯­ç›¸å¯¹æ¯”è¾ƒå¤šï¼Œå¹¶ä¸”æ¦‚å¿µå†—ä½™ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ææ¡ˆï¼ˆproposalï¼‰ï¼šè¿›è¡Œåå•†çš„åŸºæœ¬å•å…ƒï¼Œåœ¨ä¸€äº›æ–‡æ¡£ä¸­ï¼Œä¹Ÿæœ‰ç§°ä¹‹ä¸ºæ“ä½œï¼ˆoperationï¼‰ã€æŒ‡ä»¤ï¼ˆcommandï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡ï¼ˆtransactionï¼‰ï¼šä¹Ÿæ˜¯æŒ‡ææ¡ˆï¼Œå¸¸å‡ºç°åœ¨ä»£ç ä¸­ï¼Œå¹¶éæŒ‡å…·æœ‰ACIDç‰¹æ€§çš„ä¸€ç»„æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;å·²æå‡ºçš„Proposalï¼šæŒ‡å¹¿æ’­çš„ç¬¬ä¸€é˜¶æ®µæ‰€æå‡ºçš„Proposalï¼Œæœªæäº¤åˆ°çŠ¶æ€æœºçš„Proposalã€‚&lt;/li&gt;
&lt;li&gt;å·²æäº¤çš„Proposalï¼šæŒ‡å¹¿æ’­çš„ç¬¬äºŒé˜¶æ®µå·²æäº¤åˆ°çŠ¶æ€æœºçš„Proposalã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸ºäº†å¸®åŠ©æˆ‘ä»¬ç†è§£ï¼ŒZABå®šä¹‰äº†ä¸‰ä¸ªè§’è‰²ã€å››ç§èŠ‚ç‚¹çŠ¶æ€ã€å››ç§ZABè¿è¡ŒçŠ¶æ€ã€ä»¥åŠä¸¤ç§è¿è¡Œæ¨¡å¼ã€‚å¤§å®¶åˆ«çœ‹åˆ°æˆ‘ç½—åˆ—äº†è¿™ä¹ˆå¤šï¼Œå°±æ‰“é€€å ‚é¼“ã€‚ä»å¤šä¸ªè§’åº¦æ¥å½’çº³ï¼Œåªæ˜¯ä¸ºäº†æ›´å¥½çš„ç»™å¤§å®¶å‘ˆç°ZABå†…éƒ¨åŸç†ã€‚&lt;/p&gt;
&lt;h4 id=&quot;ä¸‰ä¸ªè§’è‰²&quot;&gt;&lt;a href=&quot;#ä¸‰ä¸ªè§’è‰²&quot; class=&quot;headerlink&quot; title=&quot;ä¸‰ä¸ªè§’è‰²&quot;/&gt;ä¸‰ä¸ªè§’è‰²&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;è§‚å¯Ÿè€…ï¼ˆobserverï¼‰&lt;br/&gt;è·Ÿpaxosä¸­å­¦ä¹ è€…ç±»ä¼¼ï¼Œå¢åŠ observerï¼Œå¯ä»¥åœ¨ä¸å½±å“é›†ç¾¤å†™æ€§èƒ½çš„æƒ…å†µä¸‹ï¼Œæå‡è¯»æ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;å››ç§èŠ‚ç‚¹çŠ¶æ€&quot;&gt;&lt;a href=&quot;#å››ç§èŠ‚ç‚¹çŠ¶æ€&quot; class=&quot;headerlink&quot; title=&quot;å››ç§èŠ‚ç‚¹çŠ¶æ€&quot;/&gt;å››ç§èŠ‚ç‚¹çŠ¶æ€&lt;/h4&gt;&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªå®¹æ˜“å¿½è§†çš„ç‚¹ï¼ŒZABè™½ç„¶è§„å®šäº†ä¸‰ç§è§’è‰²ï¼Œä½†æ˜¯ä»–æ˜¯é€šè¿‡å®šä¹‰å››ç§çŠ¶æ€æ¥æè¿°å½“å‰èŠ‚ç‚¹æ‰€å¤„çš„è§’è‰²çš„ã€‚åŒ…å«ä»¥ä¸‹çŠ¶æ€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;LOOKINGï¼Œç«é€‰çŠ¶æ€ï¼Œå½“å‰é›†ç¾¤ä¸å­˜åœ¨Leaderã€‚è¯¥çŠ¶æ€ä¸‹ä¼šå‘èµ·é¢†å¯¼è€…é€‰ä¸¾ã€‚&lt;/li&gt;
&lt;li&gt;FOLLOWINGï¼Œéšä»çŠ¶æ€ï¼ŒåŒæ­¥LeaderçŠ¶æ€ï¼Œå‚ä¸æŠ•ç¥¨ã€‚&lt;/li&gt;
&lt;li&gt;OBSERVINGï¼Œè§‚å¯ŸçŠ¶æ€ï¼ŒåŒæ­¥LeaderçŠ¶æ€ï¼Œä¸å‚ä¸æŠ•ç¥¨ã€‚&lt;/li&gt;
&lt;li&gt;LEADINGï¼Œé¢†å¯¼è€…çŠ¶æ€ï¼Œå¯¹åº”Leaderè§’è‰²ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™é‡Œä¸è§’è‰²å¯¹åº”å¤šå‡ºæ¥ä¸€ä¸ªçŠ¶æ€ï¼Œæ˜¯å› ä¸ºZABæ˜¯æ”¯æŒè‡ªåŠ¨Leaderé€‰ä¸¾çš„ï¼ŒLOOKINGæ˜¯å±äºé€‰ä¸¾ä¸­çš„ä¸€ä¸ªè¿‡æ¸¡çŠ¶æ€ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å››ç§ZABè¿è¡ŒçŠ¶æ€&quot;&gt;&lt;a href=&quot;#å››ç§ZABè¿è¡ŒçŠ¶æ€&quot; class=&quot;headerlink&quot; title=&quot;å››ç§ZABè¿è¡ŒçŠ¶æ€&quot;/&gt;å››ç§ZABè¿è¡ŒçŠ¶æ€&lt;/h4&gt;&lt;p&gt;è¿™é‡Œæ˜¯æŒ‡ZABé›†ç¾¤çš„è¿è¡ŒçŠ¶æ€ï¼Œå› ä¸ºZABé™¤äº†æ­£å¸¸å‘å¤–éƒ¨æä¾›æœåŠ¡ï¼Œè¿˜å¾—æœ‰æ•…éšœæ¢å¤åŠŸèƒ½ã€‚ä»æ•´ä¸ªé›†ç¾¤çš„çŠ¶æ€ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£ZABçš„è¿è¡Œè¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ELECTIONï¼Œé€‰ä¸¾çŠ¶æ€ï¼Œè¡¨æ˜èŠ‚ç‚¹æ­£åœ¨è¿›è¡ŒLeaderé€‰ä¸¾&lt;/li&gt;
&lt;li&gt;DISCOVERYï¼Œæˆå‘˜å‘ç°çŠ¶æ€ï¼Œåœ¨é€‰ä¸¾å‡ºæ–°Leaderåé›†ç¾¤æ‰€å¤„çš„çŠ¶æ€ï¼Œç”¨äºèŠ‚ç‚¹åå•†æ²Ÿé€šLeaderçš„åˆæ³•æ€§&lt;/li&gt;
&lt;li&gt;SYNCHRONIZATIONï¼Œæ•°æ®åŒæ­¥çŠ¶æ€ï¼Œåœ¨ç¡®è®¤æ–°Leaderåï¼Œä»¥Leaderçš„æ•°æ®ä¸ºåŸºç¡€ï¼Œä¿®å¤å„ä¸ªèŠ‚ç‚¹çš„æ•°æ®ä¸€è‡´æ€§&lt;/li&gt;
&lt;li&gt;BROADCARSTï¼Œå¹¿æ’­çŠ¶æ€ï¼Œé›†ç¾¤å¤„äºæ­£å¸¸è¿è¡ŒçŠ¶æ€ï¼Œå¯å‘å¤–æä¾›æœåŠ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;ä¸¤ç§è¿è¡Œæ¨¡å¼&quot;&gt;&lt;a href=&quot;#ä¸¤ç§è¿è¡Œæ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;ä¸¤ç§è¿è¡Œæ¨¡å¼&quot;/&gt;ä¸¤ç§è¿è¡Œæ¨¡å¼&lt;/h4&gt;&lt;p&gt;ä»ä¸Šè¿°ZABè¿è¡ŒçŠ¶æ€ä¸­ï¼Œå¯ä»¥å½’çº³ä¸ºä¸¤ç§è¿è¡Œæ¨¡å¼ï¼Œå³æ¶ˆæ¯å¹¿æ’­æ¨¡å¼ã€å´©æºƒæ¢å¤æ¨¡å¼ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å´©æºƒæ¢å¤æ¨¡å¼ï¼š&lt;br/&gt;åœ¨æ•´ä¸ªæœåŠ¡æ¡†æ¶å¯åŠ¨è¿‡ç¨‹ä¸­ã€æˆ–è€…LeaderæœåŠ¡å™¨å‡ºç°ç½‘ç»œä¸­æ–­ã€å´©æºƒé€€å‡ºç­‰å¼‚å¸¸æƒ…å†µæ—¶ï¼ŒZABåè®®å°±ä¼šè¿›å…¥å´©æºƒæ¢å¤æ¨¡å¼å¹¶é€‰ä¸¾æ–°çš„LeaderæœåŠ¡å™¨ã€‚å½“æ–°çš„LeaderæœåŠ¡å™¨åœ¨é›†ç¾¤ä¸­æœ‰è¿‡åŠçš„Followerä¸å…¶å®Œæˆæˆæ•°æ®åŒæ­¥åï¼ŒZABå°±ä¼šé€€å‡ºå´©æºƒæ¢å¤æ¨¡å¼ã€‚&lt;/li&gt;
&lt;li&gt;æ¶ˆæ¯å¹¿æ’­æ¨¡å¼ï¼š&lt;br/&gt;å½“é›†ç¾¤ä¸­å·²æœ‰è¿‡åŠçš„Followerä¸Leaderå®Œæˆæ•°æ®åŒæ­¥ï¼Œé‚£ä¹ˆæ•´ä¸ªé›†ç¾¤å°±ä¼šè¿›å…¥æ¶ˆæ¯å¹¿æ’­æ¨¡å¼ã€‚æ­¤æ—¶æ•´ä¸ªé›†ç¾¤æ‰å¯ä»¥å¯¹å¤–æä¾›æœåŠ¡ï¼Œå³æ•°æ®çš„æŸ¥è¯¢ã€ä¿®æ”¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å€¼å¾—æ³¨æ„æ˜¯ï¼Œå½“ä¸€å°æ–°çš„ZABèŠ‚ç‚¹åŠ å…¥é›†ç¾¤æ—¶ï¼Œè¯¥èŠ‚ç‚¹ä¼šå…ˆè¿›å…¥å´©æºƒæ¢å¤æ¨¡å¼ï¼Œæ‰¾åˆ°Leaderï¼Œå¹¶ä¸å…¶è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œç„¶åä¸€èµ·å‚ä¸åˆ°æ¶ˆæ¯å¹¿æ’­æµç¨‹ä¸­ã€‚æ‰€ä»¥å´©æºƒæ¢å¤æ¨¡å¼è¿˜åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šå‘ç°ã€åŒæ­¥ã€‚å…·ä½“åæ–‡ä¼šè¯¦ç»†è®²è§£ã€‚&lt;/p&gt;
&lt;p&gt;åæ–‡è®²è§£æ€è·¯ä¹Ÿæ˜¯ä»è¿™ä¸¤ç§æ¨¡å¼å…¥æ‰‹ï¼Œåœ¨å´©æºƒæ¢å¤æ¨¡å¼ä¸­ï¼Œå†ç»†åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼Œä¹Ÿå°±æ˜¯å››ç§è¿è¡ŒçŠ¶æ€çš„å‰ä¸‰ç§ï¼ˆELECTIONã€DISCOVERYã€SYNCHRONIZATIONï¼‰ã€‚&lt;/p&gt;
&lt;h4 id=&quot;zxid&quot;&gt;&lt;a href=&quot;#zxid&quot; class=&quot;headerlink&quot; title=&quot;zxid&quot;/&gt;zxid&lt;/h4&gt;&lt;p&gt;è¿™é‡ŒæŠŠzxidå•ç‹¬æ‹å‡ºæ¥æè¿°ï¼Œzxidåœ¨ZABå æ®å¾ˆé‡è¦çš„ä½ç½®ã€‚Leaderåœ¨æ”¶åˆ°äº‹åŠ¡è¯·æ±‚ï¼Œå°†å…¶å°è£…æˆProposalæ—¶ï¼Œä¼šä¸ºæ¯ä¸ªProposalç”Ÿæˆå¯¹åº”çš„zxidã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ¶ˆæ¯å¹¿æ’­æ¨¡å¼ä¸­zxidæ ‡å¿—è€…äº‹åŠ¡è¯·æ±‚çš„å…ˆåé¡ºåºï¼Œåœ¨å´©æºƒæ¢å¤æ¨¡å¼ä¸­zxidæ˜¯Leaderçš„é€‰ä¸¾çš„åˆ¤æ–­ä¾æ®ï¼Œä»¥åŠåœ¨Leaderé€‰ä¸¾åï¼Œæ•°æ®åŒæ­¥ä¸­zxidèƒ½æ–¹ä¾¿çš„å¸®åŠ©ZABæŠ›å¼ƒä¸Šä¸€ä¸ªLeaderæ²¡å®Œæˆçš„Proposalã€‚æ‰€ä»¥åœ¨å­¦ä¹ ä¸‹é¢çš„å†…å®¹æ—¶ï¼Œè¦åŠæ—¶å‚è€ƒzxidçš„è®¾è®¡é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;zxidå®ƒæ˜¯ä¸€ä¸ª64ä½ï¼Œå…¶ä¸­ä½32ä½å¯ä»¥çœ‹æˆä¸€ä¸ªç®€å•çš„&lt;strong&gt;è®¡æ•°å™¨&lt;/strong&gt;ï¼Œè€Œé«˜32ä½åˆ™ä»£è¡¨äº†Leaderå‘¨æœŸçš„&lt;strong&gt;epochç¼–å·&lt;/strong&gt;ã€‚åæ–‡ä¸­ä½¿ç”¨&amp;lt;epoch, counter&amp;gt;æ ‡ç¤ºä¸€ä¸ªzxidï¼Œä¾‹å¦‚&amp;lt;1, 101&amp;gt;ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;epochï¼Œåˆ™æ ‡ç¤ºè€…å½“å‰é›†ç¾¤æ‰€å¤„çš„å‘¨æœŸï¼ˆå¹´ä»£ï¼‰ï¼Œæˆ–è€…è¯´å½“å‰Leaderçš„å‘¨æœŸï¼ˆå¹´ä»£ï¼‰ã€‚åœ¨æ¯ä¸€æ¬¡Leaderå˜æ›´åï¼Œæ–°Leaderäº§ç”Ÿçš„epochåˆ™ä¼šåœ¨ä¸Šä¸€ä»»Leaderçš„epochä¸Šè¿›è¡ŒåŠ 1ï¼Œä½œä¸ºè‡ªå·±çš„epochã€‚&lt;/li&gt;
&lt;li&gt;è®¡æ•°å™¨ï¼Œåˆ™æ˜¯é’ˆå¯¹å®¢æˆ·ç«¯æ¯ä¸€ä¸ªäº‹åŠ¡è¯·æ±‚ï¼ŒLeaderåœ¨äº§ç”Ÿæ–°çš„Proposaläº‹åŠ¡æ—¶ï¼Œéƒ½ä¼šå¯¹è¯¥è®¡æ•°å™¨åŠ 1ã€‚è€ŒLeaderå˜æ›´åï¼Œè¯¥è®¡æ•°å™¨åˆ™ä¼šé‡ç½®ä¸º0ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™æ ·åšçš„å¥½å¤„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è®¡æ•°å™¨ï¼Œå¯ä»¥å®šä¹‰Proposalçš„å…ˆåé¡ºåºï¼Œä¿è¯å‘é€æäº¤äº‹åŠ¡æ¶ˆæ¯å¹¿æ’­é¡ºåºã€‚&lt;/li&gt;
&lt;li&gt;epoch+è®¡æ•°å™¨ï¼Œèƒ½æœ‰æ•ˆçš„é¿å…zxidçš„å†²çªï¼Œä¸ä¼šå‡ºç°Leaderä½¿ç”¨äº†ç›¸åŒç¼–å·çš„zxidæå‡ºäº†ä¸ä¸€æ ·çš„Proposalã€‚&lt;/li&gt;
&lt;li&gt;èƒ½éšæ—¶è·å–åˆ°æœ€æ–°çš„Leaderå‘¨æœŸï¼ˆepochï¼‰ï¼Œå½“Leaderæ”¶åˆ°åœ¨ç½‘ç»œæ•…éšœåï¼Œæ”¶åˆ°æ¯”ä»–å¤§çš„epochçš„Proposalï¼Œåˆ™è¯æ˜é›†ç¾¤ä¸­å·²æœ‰å…¶ä»–Leaderï¼Œè‡ªå·±åˆ™å˜æ›´ä¸ºFollowerã€‚&lt;/li&gt;
&lt;li&gt;æ–°Leaderäº§ç”Ÿçš„zxidä¸€å®šæ¯”ä¸Šä¸€ä»»Leaderäº§ç”Ÿzxidå¤§ã€‚å½“ä¸Šä¸€ä»»Leaderå®•æœºæ¢å¤åï¼ˆä»¥Followerè§’è‰²ï¼‰åŠ å…¥é›†ç¾¤ï¼Œå¦‚æœæœ‰å°šæœªæäº¤çš„äº‹åŠ¡ï¼Œåˆ™å¯ä»¥å¯¹æ¯”zxidè¿›è¡ŒæŠ›å¼ƒï¼ˆå›é€€ï¼‰é‚£ä¸€äº›Proposalï¼Œç›´åˆ°å›é€€åˆ°ä¸€ä¸ªç¡®å®å·²ç»è¢«é›†ç¾¤ä¸­è¿‡åŠæœºå™¨Commitçš„æœ€æ–°Proposalã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ç¬¬3, 4ç‚¹å¦‚æœç°åœ¨çœ‹ä¸æ˜ç™½ï¼Œåœ¨è®²è¿°å´©æºƒæ¢å¤æ¨¡å¼æ—¶ï¼Œæˆ‘ä¼šå›è¿‡å¤´æ¥å†è®²è®²çš„ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ¶ˆæ¯å¹¿æ’­æ¨¡å¼&quot;&gt;&lt;a href=&quot;#æ¶ˆæ¯å¹¿æ’­æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;æ¶ˆæ¯å¹¿æ’­æ¨¡å¼&quot;/&gt;æ¶ˆæ¯å¹¿æ’­æ¨¡å¼&lt;/h3&gt;&lt;p&gt;æ€»çš„æ¥è¯´ï¼Œæ¶ˆæ¯å¹¿æ’­æ¨¡å¼æ˜¯ä¸€ä¸ªç±»ä¼¼äºäºŒé˜¶æ®µæäº¤ï¼ˆ2PCï¼‰è¿‡ç¨‹ï¼Œé’ˆå¯¹å®¢æˆ·ç«¯äº‹åŠ¡è¯·æ±‚ï¼ŒLeaderå°†å…¶ç”Ÿæˆå¯¹åº”çš„Proposalï¼Œå¹¶å‘ç»™æ‰€æœ‰çš„Followerï¼Œæ”¶é›†å„è‡ªçš„é€‰ç¥¨åï¼Œæœ€åè¿›è¡Œäº‹åŠ¡æäº¤ã€‚&lt;strong&gt;ä¸2PCä¸åŒçš„æ˜¯ï¼ŒZABç§»é™¤äº†ç¬¬äºŒé˜¶æ®µçš„ä¸­æ–­é€»è¾‘&lt;/strong&gt;ã€‚æ‰€æœ‰çš„Followerè¦ä¹ˆæ¥æ”¶è¯¥Proposalï¼Œè¦ä¹ˆæŠ›å¼ƒLeaderæœåŠ¡å™¨ã€‚è¿™æ„å‘³ç€Leaderæ”¶åˆ°è¿‡åŠçš„Ackå“åº”åå°±å¯ä»¥æäº¤è¯¥äº‹åŠ¡äº†ï¼Œè€Œä¸éœ€è¦ç­‰å¾…æ‰€æœ‰çš„Followeréƒ½è¿”å›Ackã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºZABä¸ºäº†ä¸¥æ ¼ä¿è¯Proposalçš„å› æœå…³ç³»ï¼Œå³äº‹åŠ¡è¯·æ±‚çš„é¡ºåºæ€§ï¼ŒZABä¸ºæ¯ä¸ªProposalç”Ÿæˆå¯¹åº”çš„zxidï¼Œå¹¶ä¸¥æ ¼æŒ‰ç…§zxidçš„é¡ºåºï¼Œè¿›è¡Œæ¶ˆæ¯çš„å¹¿æ’­ã€‚å…·ä½“çš„ï¼ŒLeaderä¼šä¸ºäº†Followeråˆ†é…ä¸€ä¸ªå•ç‹¬çš„é˜Ÿåˆ—ï¼Œå°†æ¶ˆæ¯å¹¿æ’­å‰ï¼Œå…ˆå°†ProposalæŒ‰ç…§zxidé¡ºåºä¾æ¬¡æ”¾å…¥è¿™äº›é˜Ÿåˆ—ä¸­ï¼Œå¹¶æ ¹æ®FIFOç­–ç•¥è¿›è¡Œæ¶ˆæ¯å‘é€ã€‚&lt;/p&gt;
&lt;p&gt;Followeråœ¨æ”¶åˆ°äº‹åŠ¡Proposalä¹‹åï¼Œéƒ½ä¼šå°†å…¶ä»¥äº‹åŠ¡æ—¥å¿—çš„å½¢å¼å†™å…¥æœ¬åœ°ç£ç›˜ä¸­ï¼Œå¹¶åœ¨å†™å…¥æˆåŠŸåï¼Œè¿”å›ç»™Leaderä¸€ä¸ªAckå“åº”ã€‚å½“LeaderæœåŠ¡å™¨æ”¶åˆ°è¿‡åŠçš„Followerçš„Ackå“åº”åï¼Œå°±ä¼šå¹¿æ’­Commitæ¶ˆæ¯ç»™æ‰€æœ‰Followeré€šçŸ¥å…¶è¿›è¡Œäº‹åŠ¡æäº¤ï¼ŒåŒæ—¶Leaderè‡ªèº«ä¹Ÿä¼šå®Œæˆäº‹åŠ¡çš„æäº¤ã€‚è‡³æ­¤æ•´ä¸ªæ¶ˆæ¯å¹¿æ’­æ¨¡å¼å®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/theory/distributed/zab_4.png&quot; alt=&quot;æ¶ˆæ¯å¹¿æ’­&quot;/&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®¢æˆ·ç«¯å‘èµ·äº‹åŠ¡è¯·æ±‚ï¼Œç”±Leaderè¿›è¡Œå¤„ç†&lt;/li&gt;
&lt;li&gt;Leaderå°†è¯¥è¯·æ±‚è½¬æ¢ä¸ºäº‹åŠ¡Proposalï¼ŒåŒæ—¶ä¸ºProposalåˆ†é…ä¸€ä¸ªå…¨å±€çš„IDï¼Œå³zxid&lt;/li&gt;
&lt;li&gt;Leaderä¸ºæ¯ä¸ªFollowerç»´æŠ¤ä¸€ä¸ªFIFOé˜Ÿåˆ—ï¼Œå°†ä¸Šä¸€æ­¥ç”Ÿæˆçš„Proposalæ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œè¿›è¡Œå¹¿æ’­&lt;/li&gt;
&lt;li&gt;Followeræ”¶åˆ°Proposalåï¼Œä¼šé¦–å…ˆå°†å…¶ä»¥äº‹åŠ¡æ—¥å¿—çš„æ–¹å¼å†™å…¥æœ¬åœ°ç£ç›˜ä¸­ï¼Œå†™å…¥æˆåŠŸåå‘Leaderåé¦ˆä¸€ä¸ª&lt;/li&gt;
&lt;li&gt;å“åº”æ¶ˆæ¯&lt;/li&gt;
&lt;li&gt;Leaderæ”¶åˆ°è¿‡åŠçš„Ackå“åº”åï¼Œè‡ªå·±å®Œæˆå¯¹è¯¥Proposalçš„æäº¤åï¼Œå‘æ¯ä¸ªFollowerçš„é˜Ÿåˆ—ä¸­ï¼Œå†™å…¥Commitæ¶ˆæ¯è¿›è¡Œå¹¿æ’­&lt;/li&gt;
&lt;li&gt;Followeræ¥æ”¶åˆ°Commitæ¶ˆæ¯åï¼Œä¼šå°†ä¸Šä¸€æ¡äº‹åŠ¡æäº¤&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;å¦‚ä½•ä¿è¯äº‹åŠ¡æ‰§è¡Œçš„é¡ºåº&quot;&gt;&lt;a href=&quot;#å¦‚ä½•ä¿è¯äº‹åŠ¡æ‰§è¡Œçš„é¡ºåº&quot; class=&quot;headerlink&quot; title=&quot;å¦‚ä½•ä¿è¯äº‹åŠ¡æ‰§è¡Œçš„é¡ºåº&quot;/&gt;å¦‚ä½•ä¿è¯äº‹åŠ¡æ‰§è¡Œçš„é¡ºåº&lt;/h4&gt;&lt;p&gt;æ­¤æ—¶ï¼Œæˆ‘ä»¬å¾—å›åˆ°zxidçš„æ„æˆé‚£éƒ¨åˆ†ï¼ŒZABå°±æ˜¯é€šè¿‡zxidä¸­è®¡æ•°å™¨ï¼Œæ¥ä¿è¯æäº¤é¡ºåºçš„ï¼Œå…·ä½“å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;åœ¨Leaderæ”¶åˆ°å®¢æˆ·ç«¯&lt;code&gt;set Xã€set Y&lt;/code&gt;ä¸¤ä¸ªè¯·æ±‚åï¼Œä¼šå°†å…¶å°è£…æˆä¸¤ä¸ªProposalï¼ˆ&amp;lt;1, 101&amp;gt;: Xï¼Œ &amp;lt;1, 102&amp;gt;: Yï¼‰è¿›è¡Œå¹¿æ’­æ‰€æœ‰çš„Followerã€‚&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/zab_5.png&quot; alt=&quot;æ¶ˆæ¯å¹¿æ’­&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å½“Leaderæ”¶åˆ°è¿‡åŠçš„Ackå“åº”åï¼Œåˆ™ä¼šè¿›è¡ŒCommitæ¶ˆæ¯çš„å¹¿æ’­ã€‚è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œ&lt;strong&gt;Leaderæäº¤ææ¡ˆæ˜¯æœ‰é¡ºåºæ€§çš„&lt;/strong&gt;ï¼ŒæŒ‰ç…§zxidçš„å¤§å°ï¼ŒæŒ‰é¡ºåºæäº¤ææ¡ˆï¼Œ&lt;strong&gt;å¦‚æœå‰ä¸€ä¸ªææ¡ˆæœªæäº¤ï¼Œæ­¤æ—¶æ˜¯ä¸ä¼šæäº¤åä¸€ä¸ªææ¡ˆçš„&lt;/strong&gt;ã€‚å› æ­¤Xä¸€å®šåœ¨Yä¹‹å‰æäº¤ã€‚&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/zab_6.png&quot; alt=&quot;æ¶ˆæ¯å¹¿æ’­&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœ€åï¼ŒLeaderè¿”å›æ‰§è¡ŒæˆåŠŸå“åº”ç»™å®¢æˆ·ç«¯ã€‚å®Œæˆæœ¬æ¬¡æ¶ˆæ¯å¹¿æ’­ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å´©æºƒæ¢å¤æ¨¡å¼&quot;&gt;&lt;a href=&quot;#å´©æºƒæ¢å¤æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;å´©æºƒæ¢å¤æ¨¡å¼&quot;/&gt;å´©æºƒæ¢å¤æ¨¡å¼&lt;/h3&gt;&lt;p&gt;é€šè¿‡ä¸Šé¢çš„äº†è§£ï¼Œæˆ‘ä»¬çŸ¥é“äº†ZABå…¶å®æ˜¯ä¸€ä¸ªå¼ºé¢†å¯¼è€…æ¨¡å‹çš„åè®®ã€‚æ¶ˆæ¯å¹¿æ’­æ¨¡å¼ï¼Œåªèƒ½åœ¨ZABæ­£å¸¸è¿è¡Œä¸­å‘å¤–éƒ¨æä¾›æœåŠ¡ã€‚è¿™ä¹Ÿè¦æ±‚ZABè®¾è®¡è€…ä¸å¾—ä¸è€ƒè™‘ï¼Œå½“Leaderå®•æœºæˆ–è€…å¤±å»è¿‡åŠçš„FollowerèŠ‚ç‚¹åï¼Œå¦‚ä½•æ¢å¤æ•´ä¸ªé›†ç¾¤ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†æ›´å¥½ç†è§£å´©æºƒæ¢å¤æ¨¡å¼åŸç†ï¼Œé€šå¸¸ä¼šæŠŠä»–åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µæˆ–è€…ä¸‰ä¸ªé˜¶æ®µï¼Œå³ï¼ˆLeaderé€‰ä¸¾ã€Leaderå‘ç°ï¼‰ã€æ•°æ®åŒæ­¥ã€‚&lt;/p&gt;
&lt;h4 id=&quot;åŸºæœ¬çº¦å®š&quot;&gt;&lt;a href=&quot;#åŸºæœ¬çº¦å®š&quot; class=&quot;headerlink&quot; title=&quot;åŸºæœ¬çº¦å®š&quot;/&gt;åŸºæœ¬çº¦å®š&lt;/h4&gt;&lt;p&gt;åœ¨é€‰ä¸¾æ–°çš„Leaderåï¼Œå‘å¤–éƒ¨æä¾›æœåŠ¡ä¹‹å‰ï¼ŒZABè¿˜éœ€è¦ä¿è¯æ•°æ®æ­£ç¡®æ€§ï¼Œå³ä¸Šä¸€ä¸ªLeaderå´©æºƒä¹‹æ—¶ï¼Œæ­£åœ¨å¤„ç†çš„äº‹åŠ¡è¯·æ±‚ï¼Œå¯èƒ½ä¼šå‡ºç°ä¸¤ä¸ªæ•°æ®ä¸ä¸€è‡´çš„éšæ‚£ã€‚é’ˆå¯¹è¿™æ ·æƒ…å†µï¼ŒZABä¿è¯ä¸€ä¸‹ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ZABéœ€è¦ç¡®ä¿é‚£äº›å·²ç»åœ¨Leaderä¸Š&lt;strong&gt;æäº¤&lt;/strong&gt;çš„äº‹åŠ¡æœ€ç»ˆè¢«æ‰€æœ‰æœåŠ¡å™¨éƒ½æäº¤&lt;br/&gt;å³ï¼šProposalAåœ¨Leaderä¸Šè¢«æå‡ºåï¼Œæ”¶åˆ°è¿‡åŠçš„Followerçš„Ackå“åº”ï¼Œä½†æ˜¯åœ¨å°†Commitè¯·æ±‚å¹¿æ’­ç»™æ‰€æœ‰Followeræœºå™¨ä¹‹å‰ï¼ŒLeaderå®•æœºäº†ã€‚&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/zab_2.png&quot; alt=&quot;ZABå´©æºƒæ¢å¤&quot;/&gt;&lt;br/&gt;åœ¨è¯¥å›¾ä¸­ï¼ŒLeaderå…ˆåå¹¿æ’­äº†P1, P2, C1, P3, C2ã€‚å…¶ä¸­Leaderåœ¨å¹¿æ’­C2ï¼ˆP2çš„Commitè¯·æ±‚ï¼‰ä¹‹å‰å®•æœºï¼ŒZABä¼šåœ¨å´©æºƒæ¢å¤æ¨¡å¼ä¸­ï¼Œè®©æ‰€æœ‰çš„æœåŠ¡å™¨éƒ½æäº¤C2ã€‚&lt;/li&gt;
&lt;li&gt;ZABéœ€è¦ç¡®ä¿ä¸¢å¼ƒé‚£äº›ä»…ä»…åªåœ¨Leaderä¸Šè¢«&lt;strong&gt;æå‡º&lt;/strong&gt;çš„äº‹åŠ¡&lt;br/&gt;å³ï¼šè¯¥çº¦å®šæ˜¯æŒ‡ï¼ŒZABä¼šæŠ›å¼ƒé‚£äº›åªåœ¨Leaderä¸Šè¢«æå‡ºçš„äº‹åŠ¡ï¼Œè¿˜æ²¡æœ‰ä»»ä½•Followeræ”¶åˆ°è¯¥è¯·æ±‚ã€‚&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/zab_3.png&quot; alt=&quot;ZABå´©æºƒæ¢å¤&quot;/&gt;&lt;br/&gt;åœ¨è¯¥åœºæ™¯ä¸­ï¼ŒLeaderæå‡ºP3åå®•æœºï¼Œè¿˜æ²¡æœ‰ä»»ä½•Followeræ”¶åˆ°è¯¥è¯·æ±‚ï¼Œåˆ™å´©æºƒæ¢å¤æ¨¡å¼ä¸­ï¼Œæ•´ä¸ªé›†ç¾¤ä¼šä¸¢å¼ƒP3çš„äº‹åŠ¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h4 id=&quot;Leaderé€‰ä¸¾ï¼ˆELECTIONï¼‰&quot;&gt;&lt;a href=&quot;#Leaderé€‰ä¸¾ï¼ˆELECTIONï¼‰&quot; class=&quot;headerlink&quot; title=&quot;Leaderé€‰ä¸¾ï¼ˆELECTIONï¼‰&quot;/&gt;Leaderé€‰ä¸¾ï¼ˆELECTIONï¼‰&lt;/h4&gt;&lt;p&gt;Leaderçš„é€‰ä¸¾ï¼Œå…³ä¹ç€æ•´ä¸ªé›†ç¾¤çš„æ•…éšœå®¹é”™å’Œé›†ç¾¤å¯ç”¨æ€§ï¼Œæ˜¯ZABéå¸¸æ ¸å¿ƒçš„è®¾è®¡ä¹‹ä¸€ã€‚è€ŒLeaderé€‰ä¸¾è¯´ç™½äº†ï¼Œå°±æ˜¯å¯¹æ¯”é›†ç¾¤ä¸­å„èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œé€‰ä¸¾å‡ºæœ€åˆé€‚çš„èŠ‚ç‚¹å½“åšLeaderã€‚è€Œæœ€åˆé€‚çš„èŠ‚ç‚¹æ ‡å‡†æ˜¯ä»€ä¹ˆï¼Œåˆ™æ˜¯ç†è§£Leaderé€‰ä¸¾ï¼ˆFastLeaderElectionæ–¹å¼ï¼‰çš„å…³é”®ã€‚&lt;/p&gt;
&lt;p&gt;ZABé‡‡ç”¨çš„å„èŠ‚ç‚¹å¹¿æ’­è‡ªå·±æ‰€æè®®çš„Leaderï¼Œæ”¶åˆ°å…¶ä»–èŠ‚ç‚¹æè®®çš„Leaderåï¼Œä¸è‡ªå·±æ‰€æè®®çš„Leaderè¿›è¡ŒPKï¼Œæ ¹æ®PKçš„è§„åˆ™é‡æ–°é€‰æ‹©æè®®çš„Leaderï¼Œç›´åˆ°æœ‰è¿‡åŠçš„èŠ‚ç‚¹éƒ½æè®®æŸä¸€èŠ‚ç‚¹ï¼Œå³ç»“æŸLeaderé€‰ä¸¾ã€‚&lt;/p&gt;
&lt;p&gt;Leaderé€‰ä¸¾PKçš„è§„åˆ™åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»»æœŸç¼–å·ï¼ˆepochï¼‰ï¼Œä¼˜å…ˆåˆ¤æ–­epochï¼Œepochå¤§çš„èŠ‚ç‚¹å½“é€‰Leader&lt;/li&gt;
&lt;li&gt;äº‹åŠ¡æ ‡ç¤ºç¬¦ï¼ˆzxidï¼‰ï¼Œepochç›¸åŒï¼Œåˆ™æ¯”è¾ƒzxidï¼Œzxidå¤§çš„å½“é€‰Leader&lt;/li&gt;
&lt;li&gt;èŠ‚ç‚¹IDï¼Œepochã€zxidéƒ½ä¸€è‡´ï¼Œåˆ™æ¯”è¾ƒèŠ‚ç‚¹IDï¼ˆåœ¨myidæ–‡ä»¶ä¸­æŒ‡å®šçš„å€¼ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› ä¸ºé€‰ä¸¾è§„åˆ™åŒ…å«ä¸Šè¿°ä¸‰ä¸ªæ–¹é¢ï¼Œåˆ™æ¯ä¸ªèŠ‚ç‚¹åœ¨å¹¿æ’­è‡ªå·±æ‰€æè®®çš„Leaderæ—¶ï¼Œé€‰ç¥¨ä¸­éƒ½ä¼šåŒ…å«ä¸Šé¢ä¸‰ä¸ªå€¼ã€‚åæ–‡ä½¿ç”¨&amp;lt;proposeLeader, epoch, zxid, node&amp;gt;ï¼Œæ¥è¡¨ç¤ºä¸€å¼ é€‰ç¥¨ï¼Œè¡¨æ˜è‡ªå·±æ‰€æœ‰æè®®çš„Leaderã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;proposeLeaderï¼Œè¡¨ç¤ºè‡ªå·±æ‰€æè®®çš„Leaderçš„èŠ‚ç‚¹ID&lt;/li&gt;
&lt;li&gt;epochï¼Œè¡¨ç¤ºæ‰€æè®®çš„LeaderèŠ‚ç‚¹æ‰€å¤„çš„ä»»æœŸç¼–å·&lt;/li&gt;
&lt;li&gt;zxidï¼Œè¡¨ç¤ºæ‰€æè®®çš„LeaderèŠ‚ç‚¹æ‹¥æœ‰çš„Proposalæœ€å¤§çš„äº‹åŠ¡ç¼–å·&lt;/li&gt;
&lt;li&gt;nodeï¼Œè¡¨ç¤ºæœ¬æ¬¡æè®®çš„èŠ‚ç‚¹&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„zxidæ˜¯æŒ‡ZABåœ¨æ¶ˆæ¯å¹¿æ’­æ¨¡å¼ç¬¬ä¸€é˜¶æ®µçš„æ”¶åˆ°Proposalæœ€å¤§çš„zxidï¼Œå³ï¼š&lt;strong&gt;èŠ‚ç‚¹æ”¶åˆ°è¢«æå‡ºçš„Proposalæœ€å¤§çš„zxidï¼Œè€Œä¸æ˜¯å·²æäº¤çš„Proposalæœ€å¤§çš„zxid&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œéœ€è¦å•ç‹¬æ‹å‡ºæ¥å¼ºè°ƒï¼Œæœ‰çš„ä¼™è®¡ï¼Œåœ¨çœ‹zookeeperæºç æ—¶ï¼Œä¼šçœ‹åˆ°Leaderé€‰ä¸¾æ—¶ï¼Œä½¿ç”¨çš„æ˜¯dataTree.lastProcessedZxidã€‚è€ŒdataTree.lastProcessedZxidè¡¨ç¤ºçš„æ˜¯å·²æäº¤çš„Proposalæœ€å¤§çš„zxidã€‚è¿™é‡Œæ²¡é”™ï¼Œåœ¨æ­£å¸¸è¿è¡Œæ—¶dataTree.lastProcessedZxidç¡®å®è¡¨ç¤ºçš„æ˜¯å·²æäº¤çš„Proposalæœ€å¤§çš„zxidã€‚ä½†æ˜¯å½“è·Ÿéšè€…æ£€æµ‹åˆ°å¼‚å¸¸ï¼Œé€€å‡ºFOLLOWINGçŠ¶æ€æ—¶ï¼Œåœ¨follower.shutdown()ä¸­ï¼Œä¼šä½¿ç”¨lastProcessedZxidè¡¨ç¤ºèŠ‚ç‚¹ä¸Šæ”¶åˆ°å·²æå‡ºçš„Proposalçš„zxidã€‚è€Œåç»­çš„Leaderé€‰ä¸¾ä½¿ç”¨çš„lastProcessedZxidï¼Œå³ä¸ºèŠ‚ç‚¹æ”¶åˆ°è¢«æå‡ºçš„Proposalæœ€å¤§çš„zxidã€‚&lt;/p&gt;
&lt;h5 id=&quot;ç®—æ³•é™ˆè¿°&quot;&gt;&lt;a href=&quot;#ç®—æ³•é™ˆè¿°&quot; class=&quot;headerlink&quot; title=&quot;ç®—æ³•é™ˆè¿°&quot;/&gt;ç®—æ³•é™ˆè¿°&lt;/h5&gt;&lt;p&gt;é›†ç¾¤ä¸­å­˜åœ¨ä¸‰ä¸ªèŠ‚ç‚¹A, B, Cï¼Œå„è‡ªèŠ‚ç‚¹IDä¾æ¬¡ä¸º1, 2, 3ã€‚å…¶ä¸­Aä¸ºLeaderï¼Œå·²æäº¤ä¸¤ä¸ªProposalï¼ˆ&amp;lt;1, 101&amp;gt;ï¼Œ&amp;lt;1, 102&amp;gt;ï¼‰ï¼ŒBã€Cä¸ºFollowerï¼ŒBå·²æäº¤ä¸¤ä¸ªProposalï¼ˆ&amp;lt;1, 101&amp;gt;ï¼Œ&amp;lt;1, 102&amp;gt;ï¼‰ï¼ŒCåªæäº¤äº†&amp;lt;1, 101&amp;gt;&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/zab_7.png&quot; alt=&quot;Leaderé€‰ä¸¾&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å½“AèŠ‚ç‚¹å®•æœºåï¼Œè·Ÿéšè€…æ£€æµ‹Leaderå¼‚å¸¸ï¼Œåˆ™é€€å‡ºFOLLOWINGçŠ¶æ€ï¼Œå˜æ›´ä¸ºLOOKINGï¼Œå‘èµ·Leaderé€‰ä¸¾ã€‚&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/zab_8.png&quot; alt=&quot;Leaderé€‰ä¸¾&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å½“Followerå¼€å§‹ç¬¬ä¸€è½®æè®®Leaderæ—¶ï¼Œéƒ½ä¼šæ¨èè‡ªå·±ä¸ºLeaderï¼Œå¹¶å‘æ‰€æœ‰èŠ‚ç‚¹å¹¿æ’­è‡ªå·±çš„æè®®ï¼Œå³Bçš„é€‰ç¥¨ä¸º&amp;lt;2, 1, 102, B&amp;gt;ï¼ŒCçš„é€‰ç¥¨ä¸º&amp;lt;3, 1, 101, C&amp;gt;ã€‚å„è‡ªå°†é€‰ç¥¨å‘ç»™å…¶ä»–èŠ‚ç‚¹ï¼ŒBçš„é€‰ç¥¨å‘é€ç»™Bã€Cï¼ŒCçš„é€‰ç¥¨ä¹Ÿå‘é€ç»™Bã€Cã€‚&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/zab_9.png&quot; alt=&quot;Leaderé€‰ä¸¾&quot;/&gt;&lt;/p&gt;
&lt;p&gt;B, Cæ”¶åˆ°å¯¹æ–¹çš„é€‰ç¥¨åï¼Œæ ¹æ®ä¸Šé¢æè¿°çš„è§„åˆ™è¿›è¡ŒPKï¼Œä¾æ¬¡æ¯”è¾ƒepochã€zxidã€èŠ‚ç‚¹IDã€‚Bã€Cé¦–å…ˆä¼šæ”¶åˆ°æ¥è‡ªè‡ªå·±çš„æè®®çš„é€‰ç¥¨ï¼Œå› ä¸ºæ”¶åˆ°é€‰ç¥¨ä¸è‡ªå·±æè®®çš„é€‰ç¥¨ç›¸åŒï¼Œåªéœ€è¦æ¥å—å’Œä¿å­˜è¯¥é€‰ç¥¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å½“Bæ”¶åˆ°æ¥è‡ªCçš„é€‰ç¥¨&amp;lt;3, 1, 101, C&amp;gt;ï¼Œç”±äºepochç›¸åŒï¼ŒBçš„zxidå¤§äºCçš„zxidï¼Œåˆ™Bçš„é€‰ç¥¨è·èƒœï¼Œä¸éœ€è¦å˜æ›´é€‰ç¥¨ä¿¡æ¯ï¼Œä¿å­˜å³å¯ã€‚&lt;/li&gt;
&lt;li&gt;Cæ”¶åˆ°æ¥è‡ªBçš„é€‰ç¥¨&amp;lt;2, 1, 102, B&amp;gt;ï¼Œç”±äºepochç›¸åŒï¼ŒCçš„zxidå°äºBçš„zxidï¼Œåˆ™Cçš„é€‰ç¥¨è½é€‰ã€‚éœ€è¦ä¿å­˜Bçš„é€‰ç¥¨&amp;lt;2, 1, 102, B&amp;gt;ï¼Œå¹¶å˜æ›´è‡ªå·±çš„é€‰ç¥¨ä¸º&amp;lt;2, 1, 102, C&amp;gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/images/theory/distributed/zab_10.png&quot; alt=&quot;Leaderé€‰ä¸¾&quot;/&gt;&lt;/p&gt;
&lt;p&gt;CèŠ‚ç‚¹åœ¨å˜æ›´è‡ªå·±çš„é€‰ç¥¨ä¿¡æ¯åï¼Œä¼šé‡æ–°å¹¿æ’­é€‰ç¥¨&amp;lt;2, 1, 102, C&amp;gt;ç»™å…¶ä»–èŠ‚ç‚¹ã€‚B, CèŠ‚ç‚¹éƒ½æ”¶åˆ°æ¥è‡ªCçš„æ–°é€‰ç¥¨ä¿¡æ¯&amp;lt;2, 1, 102, C&amp;gt;ï¼Œæ ¹æ®è§„åˆ™ç»§ç»­PKï¼Œç»“æœè‚¯å®šæ˜¯B, Céƒ½ä¿å­˜ä¸¤ä¸ªé€‰ç¥¨ï¼ˆ&amp;lt;2, 1, 102, B&amp;gt;, &amp;lt;2, 1, 102, C&amp;gt;ï¼‰&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/zab_11.png&quot; alt=&quot;Leaderé€‰ä¸¾&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœ€åï¼ŒB, Cæ‰€æè®®çš„é¢†å¯¼è€…èŠ‚ç‚¹IDä¸º2ï¼ˆå³BèŠ‚ç‚¹ï¼‰ï¼Œèµ¢å¾—äº†è¿‡åŠé€‰ç¥¨ã€‚åˆ™Bç«é€‰ä¸ºå‡†Leaderï¼Œé€€å‡ºLOOKINGçŠ¶æ€ï¼Œå˜æ›´ä¸ºLEADINGï¼ŒCèŠ‚ç‚¹å˜æ›´çŠ¶æ€ä¸ºFOLLOWINGï¼Œå®ŒæˆLeaderé€‰ä¸¾ã€‚&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/zab_12.png&quot; alt=&quot;Leaderé€‰ä¸¾&quot;/&gt;&lt;/p&gt;
&lt;h5 id=&quot;é€»è¾‘æ—¶é’Ÿ&quot;&gt;&lt;a href=&quot;#é€»è¾‘æ—¶é’Ÿ&quot; class=&quot;headerlink&quot; title=&quot;é€»è¾‘æ—¶é’Ÿ&quot;/&gt;é€»è¾‘æ—¶é’Ÿ&lt;/h5&gt;&lt;p&gt;è¿™é‡Œéœ€è¦è¡¥å……çš„æ˜¯é€»è¾‘æ—¶é’Ÿï¼Œé€»è¾‘æ—¶é’Ÿä¹Ÿä¼šå½±å“Leaderçš„é€‰ä¸¾ï¼Œå•ç‹¬æ‹å‡ºæ¥æ˜¯ä¸ºäº†æè¿°é€‰ä¸¾ç®—æ³•æ—¶æ€è·¯æ›´æ¸…æ™°ã€‚&lt;/p&gt;
&lt;p&gt;é€»è¾‘æ—¶é’Ÿï¼ˆlogicclockï¼‰ï¼Œå³é€‰ä¸¾çš„è½®æ¬¡ï¼Œé¿å…æ¥æ”¶åˆ°æ—§çš„é€‰ç¥¨ä¿¡æ¯ã€‚æ¯è¿›è¡Œä¸€è½®é€‰ä¸¾ï¼Œé€»è¾‘æ—¶é’Ÿå˜ä¼šå¢åŠ ã€‚åœ¨é€‰ä¸¾ä¸­ï¼Œé€»è¾‘æ—¶é’Ÿå¤§çš„èŠ‚ç‚¹ä¸ä¼šæ¥æ”¶æ¥è‡ªé€»è¾‘æ—¶é’Ÿå°çš„èŠ‚ç‚¹çš„é€‰ç¥¨ã€‚&lt;/p&gt;
&lt;p&gt;æ¯”å¦‚ï¼ŒèŠ‚ç‚¹A, Bçš„é€»è¾‘æ—¶é’Ÿåˆ†åˆ«ä¸º1, 2ï¼Œé‚£ä¹ˆBå°†æ‹’ç»æ¥æ”¶æ¥è‡ªAçš„é€‰ç¥¨ä¿¡æ¯ã€‚å³ä½¿Açš„zxidå¤§äºBçš„zxidï¼ŒBä¹Ÿä¼šæ‹’ç»æ¥æ”¶è¯¥é€‰ç¥¨ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å‘ç°ï¼ˆDISCOVERYï¼‰&quot;&gt;&lt;a href=&quot;#å‘ç°ï¼ˆDISCOVERYï¼‰&quot; class=&quot;headerlink&quot; title=&quot;å‘ç°ï¼ˆDISCOVERYï¼‰&quot;/&gt;å‘ç°ï¼ˆDISCOVERYï¼‰&lt;/h4&gt;&lt;p&gt;åœ¨ä¸Šä¸€é˜¶æ®µï¼Œä¹Ÿå°±æ˜¯ELECTIONå®Œæˆåï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰è‡ªå·±æ‰€ä¿å­˜çš„é€‰ç¥¨æ± ï¼Œå½“é€‰æ± ä¸­æœ‰è¿‡åŠçš„é€‰ç¥¨éƒ½æè®®åŒä¸€èŠ‚ç‚¹ä¸ºLeaderæ—¶ï¼Œåˆ™è¿›å…¥å‘ç°ï¼ˆDISCOVERYï¼‰çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬èŠ‚æ€è·¯ï¼šä¼šå…ˆæŒ‰æ¯ä¸€å°æ­¥ä»‹ç»è¿‡ç¨‹ï¼Œåé¢ä¼šç”»å‡ºæ•´ä¸ªè¿‡ç¨‹çš„å‘¨æœŸï¼Œæ‰€ä»¥æ¯ä¸€å°æ­¥ä¼šè®°ä½œä¸€ä¸ªæ ‡è®°ï¼Œæ–¹ä¾¿åé¢æè¿°æ•´ä¸ªè¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ç»§ç»­ä¸Šä¸€å°èŠ‚çš„æ¡ˆä¾‹ã€‚A, B, Cä¸‰ä¸ªèŠ‚ç‚¹ï¼ŒAå®•æœºäº†ï¼ŒBä¸ºæ–°é€‰ä¸¾çš„å‡†Leaderã€‚å…¶ä¸­Bå·²æäº¤ä¸¤ä¸ªProposalï¼ˆ&amp;lt;1, 101&amp;gt;ï¼Œ&amp;lt;1, 102&amp;gt;ï¼‰ï¼ŒCåªæäº¤äº†&amp;lt;1, 101&amp;gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¯¥çŠ¶æ€æœŸé—´ï¼Œç”±Followerä¼šä¸»åŠ¨è”ç³»å‡†Leaderï¼Œå¹¶å°†è‡ªå·±æœ€åæ¥å—çš„äº‹åŠ¡Proposalçš„epochå€¼å‘é€ç»™å‡†Leaderï¼Œè¿™é‡Œè®°ä½œFOLLOWERINFOã€‚&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/zab_13.png&quot; alt=&quot;å‘ç°ï¼ˆDISCOVERYï¼‰&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å‡†Leaderæ”¶åˆ°æ¥è‡ªè¿‡åŠï¼ˆåŒ…å«BèŠ‚ç‚¹è‡ªå·±ï¼‰çš„FOLLOWERINFOæ¶ˆæ¯åï¼Œä¼šä»è¿™ä¸ªFOLLOWERINFOä¸­é€‰å–æœ€å¤§çš„epochå€¼ï¼Œå¯¹å…¶è¿›è¡ŒåŠ 1ï¼Œä½œä¸ºæ–°çš„epochå€¼ï¼Œå¹¶å°è£…æˆLEADERINFOæ¶ˆæ¯å‘ç»™è¿™äº›è¿‡åŠçš„Followerã€‚&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/zab_14.png&quot; alt=&quot;å‘ç°ï¼ˆDISCOVERYï¼‰&quot;/&gt;&lt;/p&gt;
&lt;p&gt;å½“Followeræ”¶åˆ°LEADERINFOæ¶ˆæ¯åï¼Œä¼šå…ˆæ ¡éªŒLEADERINFOæ¶ˆæ¯æ­£ç¡®æ€§ã€‚æ ¡éªŒè‡ªå·±çš„epochæ˜¯å¦å°äºLEADERINFOæ¶ˆæ¯ä¸­çš„epochï¼Œå¦‚æœå°äºï¼Œå°±å°†LEADERINFOæ¶ˆæ¯ä¸­çš„epochèµ‹å€¼ç»™è‡ªå·±çš„epochã€‚å¹¶å‘å‡†Leaderè¿”å›Ackå“åº”ï¼ˆACKEPOCHï¼‰ï¼Œå¹¶å°†è‡ªå·±çš„è¿è¡ŒçŠ¶æ€å˜æ›´ä¸ºSYNCHRONIZATIONã€‚&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/zab_15.png&quot; alt=&quot;å‘ç°ï¼ˆDISCOVERYï¼‰&quot;/&gt;&lt;/p&gt;
&lt;p&gt;æœ€åLeaderæ”¶åˆ°è¿‡åŠçš„ACKEPOCHæ¶ˆæ¯åï¼Œä¹Ÿå°†è‡ªå·±çš„è¿è¡ŒçŠ¶æ€ä¿®æ”¹ä¸ºSYNCHRONIZATIONã€‚è‡³æ­¤å®Œæˆå‘ç°é˜¶æ®µçš„å·¥ä½œï¼Œé›†ç¾¤ç¡®ç«‹Leaderçš„é¢†å¯¼å…³ç³»ã€‚&lt;/p&gt;
&lt;h4 id=&quot;æ•°æ®åŒæ­¥ï¼ˆSYNCHRONIZATIONï¼‰&quot;&gt;&lt;a href=&quot;#æ•°æ®åŒæ­¥ï¼ˆSYNCHRONIZATIONï¼‰&quot; class=&quot;headerlink&quot; title=&quot;æ•°æ®åŒæ­¥ï¼ˆSYNCHRONIZATIONï¼‰&quot;/&gt;æ•°æ®åŒæ­¥ï¼ˆSYNCHRONIZATIONï¼‰&lt;/h4&gt;&lt;p&gt;è¿›å…¥åˆ°æ•°æ®åŒæ­¥é˜¶æ®µï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£ä¸‰ç§åŒæ­¥æ–¹å¼ï¼ˆDIFFã€TRUNCã€SNAPï¼‰ã€‚Leaderä¼šæ ¹æ®æ¯ä¸ªFollowerçš„æœ€å¤§zxidï¼Œé‡‡ç”¨ä¸åŒæ–¹å¼å¤„ç†ä¸ä¸€è‡´çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ZABçš„è®¾è®¡ä¸­ï¼ŒLeaderä¸ºäº†æ›´é«˜æ•ˆçš„å°†Proposalå¤åˆ¶ç»™Followerï¼Œä¼šåœ¨è‡ªå·±çš„å†…å­˜é˜Ÿåˆ—ä¸­ç¼“å­˜ä¸€å®šæ•°é‡ï¼ˆé»˜è®¤500ï¼‰çš„å·²æäº¤çš„Proposalã€‚åœ¨å†…å­˜ä¸­çš„Proposalå°±æœ‰zxidçš„æœ€å¤§å€¼å’Œæœ€å°å€¼ï¼Œå³ï¼šmaxCommittedZxidå’ŒminCommittedZxidã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DIFFï¼šå½“Followeræœ€å¤§çš„zxidå°äºmaxCommittedZxidä¸”å¤§äºminCommittedZxid&lt;/li&gt;
&lt;li&gt;TRUNCï¼šå½“Followeræœ€å¤§çš„zxidå¤§äºmaxCommittedZxidæ—¶ï¼Œè¯¥æ–¹å¼è¦æ±‚Followerä¸¢å¼ƒè¶…å‡ºçš„é‚£éƒ¨åˆ†Proposal&lt;/li&gt;
&lt;li&gt;SNAPï¼šå½“Followeræœ€å¤§çš„zxidå°äºminCommittedZxidæ—¶ï¼Œè¯¥æ–¹å¼ç›´æ¥åŒæ­¥å¿«ç…§ç»™Follower&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;äº†è§£äº†åŒæ­¥æ–¹å¼ï¼Œæ¥ä¸‹æ¥æ¥çœ‹çœ‹å…·ä½“æ€ä¹ˆäº¤äº’çš„å§ã€‚è¯¥é˜¶æ®µç”±Leaderæ ¹æ®Followerçš„æœ€å¤§zxidæ¥å‘é€æ•°æ®åŒæ­¥æ¶ˆæ¯ã€‚ç”±äºBå·²æäº¤ä¸¤ä¸ªProposalï¼ˆ&amp;lt;1, 101&amp;gt;ï¼Œ&amp;lt;1, 102&amp;gt;ï¼‰ï¼ŒCåªæäº¤äº†&amp;lt;1, 101&amp;gt;ã€‚è¯¥æƒ…å†µä¸‹Leaderä¼šé€‰æ‹©DIFFçš„æ–¹å¼å°†å…¶å°è£…ä¸ºNEWLEADERæ¶ˆæ¯å‘ç»™Followerã€‚&lt;/p&gt;
&lt;p&gt;Followeråœ¨æ”¶åˆ°NEWLEADERæ¶ˆæ¯åï¼Œè¿›è¡Œä¿®å¤ä¸ä¸€è‡´æ•°æ®ï¼Œå¹¶è¿”å›ç»™Leaderå“åº”Ackæ¶ˆæ¯ã€‚&lt;br/&gt;&lt;img src=&quot;/images/theory/distributed/zab_16.png&quot; alt=&quot;æ•°æ®åŒæ­¥ï¼ˆSYNCHRONIZATIONï¼‰&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Leaderåœ¨æ”¶åˆ°è¿‡åŠAckæ¶ˆæ¯åï¼Œåˆ™å®Œæˆæ•°æ®åŒæ­¥é˜¶æ®µï¼Œå°†è‡ªå·±è¿è¡ŒçŠ¶æ€ä¿®æ”¹ä¸ºBROADCARSTï¼ˆå¹¿æ’­çŠ¶æ€ï¼‰ï¼Œå¹¶å‘é€UPTODATEæ¶ˆæ¯ç»™è¿‡åŠçš„Followerï¼Œé€šçŸ¥ä»–ä»¬å®Œæˆæ•°æ®åŒæ­¥ï¼Œä¿®æ”¹è¿è¡ŒçŠ¶æ€ä¿®æ”¹ä¸ºBROADCARSTã€‚&lt;/p&gt;
&lt;h4 id=&quot;æ•´ä½“å›é¡¾&quot;&gt;&lt;a href=&quot;#æ•´ä½“å›é¡¾&quot; class=&quot;headerlink&quot; title=&quot;æ•´ä½“å›é¡¾&quot;/&gt;æ•´ä½“å›é¡¾&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;/images/theory/distributed/zab_17.png&quot; alt=&quot;æ•´ä½“å›é¡¾&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;ä¸paxosåŒºåˆ«&quot;&gt;&lt;a href=&quot;#ä¸paxosåŒºåˆ«&quot; class=&quot;headerlink&quot; title=&quot;ä¸paxosåŒºåˆ«&quot;/&gt;ä¸paxosåŒºåˆ«&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;ZABé‡‡ç”¨çš„æ˜¯ä¸»å¤‡æ¨¡å¼çš„ç³»ç»Ÿæ¶æ„ï¼Œç›¸æ¯”äºpaxosä¸åŒçš„æ˜¯ï¼Œpaxoså¯ä»¥åŒæ—¶å­˜åœ¨å¤šä¸ªæè®®è€…è¿›è¡Œææ¡ˆï¼Œè€ŒZABåŒä¸€æ—¶é—´åªå…è®¸ä¸€ä¸ªé¢†å¯¼è€…è¿›è¡Œææ¡ˆï¼Œè¿™æ ·å³è§£å†³å®¢æˆ·ç«¯å¹¶å‘å¤„ç†ï¼Œåˆèƒ½è§„å®šææ¡ˆçš„é¡ºåºæ€§ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;æ€è€ƒå‡ ä¸ªé¢˜ç›®å§&quot;&gt;&lt;a href=&quot;#æ€è€ƒå‡ ä¸ªé¢˜ç›®å§&quot; class=&quot;headerlink&quot; title=&quot;æ€è€ƒå‡ ä¸ªé¢˜ç›®å§&quot;/&gt;æ€è€ƒå‡ ä¸ªé¢˜ç›®å§&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;zookeeperæä¾›çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œä»»ä½•èŠ‚ç‚¹éƒ½èƒ½å¤„ç†è¯»è¯·æ±‚ï¼Œä½†æ˜¯è¯»åˆ°çš„å¯èƒ½ä¼šæ˜¯æ—§æ•°æ®ï¼Œå¦‚æœå¿…é¡»è¦è¯»åˆ°æœ€æ–°æ•°æ®ï¼Œæ€ä¹ˆåŠï¼Ÿ&lt;/p&gt;
&lt;figure class=&quot;highlight dart&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;zookeeperæä¾›è§£å†³æ–¹æ¡ˆå°±æ˜¯ï¼š&lt;span class=&quot;keyword&quot;&gt;sync&lt;/span&gt;å‘½ä»¤ã€‚&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;ä½ å¯ä»¥åœ¨è¯»æ“ä½œä¹‹å‰ï¼Œå…ˆæ‰§è¡Œ&lt;span class=&quot;keyword&quot;&gt;sync&lt;/span&gt;å‘½ä»¤ï¼Œè¿™æ ·å®¢æˆ·ç«¯å°±èƒ½è¯»åˆ°æœ€æ–°æ•°æ®äº†ã€‚&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;A, B, Cä¸‰ä¸ªèŠ‚ç‚¹ï¼ŒAä¸ºLeaderï¼ŒBæœ‰2ä¸ªå·²æäº¤çš„Proposal(&amp;lt;1, 101&amp;gt;, &amp;lt;1, 102&amp;gt;)ï¼ŒCæœ‰3ä¸ªæœªæäº¤Proposal(&amp;lt;1, 101&amp;gt;, &amp;lt;1, 102&amp;gt;, &amp;lt;1, 103&amp;gt;)ã€‚å½“Aæ•…éšœåï¼ŒBå’ŒCè°ä¼šå½“é€‰Leaderå‘¢ï¼Ÿ&lt;/p&gt;
&lt;figure class=&quot;highlight angelscript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ç­”æ¡ˆæ˜¯Cã€‚&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;å› ä¸ºç«é€‰Leaderæ—¶ï¼Œä½¿ç”¨çš„æ˜¯æ‰€æœ‰å·²æå‡ºçš„Proposalæœ€å¤§zxidã€‚&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;Cæœ€å¤§çš„zxidä¸º&lt;span class=&quot;number&quot;&gt;103&lt;/span&gt;ï¼Œè€ŒBæœ€å¤§çš„zxidä¸º&lt;span class=&quot;number&quot;&gt;102&lt;/span&gt;ã€‚&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;é‚£ä¹ˆCå½“é€‰Leaderã€‚&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;åœ¨é€‰ä¸¾ä¸­ï¼Œä¼šå‡ºç°é€‰ç¥¨è¢«ç“œåˆ†ã€é€‰ä¸¾å¤±è´¥çš„é—®é¢˜å—ï¼Ÿ&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ä¸ä¼šå‡ºç°é€‰ç¥¨è¢«ç“œåˆ†å¯¼è‡´é€‰ä¸¾å¤±è´¥çš„æƒ…å†µã€‚&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;å› ä¸ºæ¯ä¸ªèŠ‚ç‚¹çš„èŠ‚ç‚¹IDéƒ½æ˜¯ä¸åŒçš„ï¼Œè€ŒèŠ‚ç‚¹IDä¼šå‚ä¸é€‰ç¥¨çš„åˆ¤æ–­ã€‚&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;åœ¨epochã€zxidéƒ½ä¸€è‡´æƒ…å†µä¸‹ï¼Œè¿˜æœ‰èŠ‚ç‚¹IDå¯ä»¥å…œåº•æ¥ä¿è¯é€‰ç¥¨ç»™å“ªä¸€ä¸ªèŠ‚ç‚¹ã€‚&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;æœ‰ä¸€ä¸ªProposalï¼Œåœ¨å¹¿æ’­ä¹‹å‰Leaderå®•æœºï¼Œç»è¿‡å´©æºƒæ¢å¤æ¨¡å¼åï¼Œè¯¥Proposalæ˜¯å¦ä¼šè¢«æäº¤ï¼Ÿ&lt;/p&gt;
&lt;figure class=&quot;highlight sqf&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ä¸ä¸€å®šï¼Œå–å†³æ–°å½“é€‰çš„&lt;span class=&quot;built_in&quot;&gt;Leader&lt;/span&gt;æ˜¯å¦åŒ…å«è¯¥Proposal&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;å¦‚æœä¸Šä¸€ä»»&lt;span class=&quot;built_in&quot;&gt;Leader&lt;/span&gt;ï¼Œåœ¨å¹¿æ’­ç¬¬ä¸€é˜¶æ®µæœ‰ä¸ªFolloweræ”¶åˆ°äº†ã€‚è€Œæ–°å½“é€‰çš„&lt;span class=&quot;built_in&quot;&gt;Leader&lt;/span&gt;åˆæ˜¯è¯¥Follower&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;åˆ™è¯¥Proposalä¼šè¢«æäº¤ã€‚&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;åœ¨å´©æºƒæ¢å¤åï¼ŒLeaderé¦–å…ˆå°†è‡ªå·±çš„çŠ¶æ€è®¾ç½®ä¸ºå¹¿æ’­ï¼Œç„¶åå†é€šçŸ¥å…¶ä»–èŠ‚ç‚¹ä¿®æ”¹ã€‚é‚£ä¹ˆè¿™æ˜¯æœ‰å†™è¯·æ±‚è¿›æ¥ï¼Œä¼šæ‰§è¡ŒæˆåŠŸå—ï¼Ÿ&lt;/p&gt;
&lt;figure class=&quot;highlight sqf&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;ä¼šï¼Œè¿™å°±æ˜¯ZABè®¾è®¡æ¶ˆæ¯å‘é€é˜Ÿåˆ—çš„åŸå› ï¼Œåœ¨&lt;span class=&quot;built_in&quot;&gt;Leader&lt;/span&gt;ä¸ºå¹¿æ’­çŠ¶æ€æ—¶å³å¯å¯¹å¤–æœåŠ¡ã€‚&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;å› ä¸ºæ–°å°è£…çš„Proposalè¯·æ±‚ï¼Œä¸€å®šä¼šåœ¨é€šçŸ¥å…¶ä»–èŠ‚ç‚¹æ•°æ®åŒæ­¥å®Œæˆçš„æ¶ˆæ¯ï¼ˆUPTODATEï¼‰ä¹‹åå¤„ç†&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>52700d0932c1be83fc86d3a0335cfff4</guid>
<title>æµ…è°ˆ Java ä¸­çš„ AutoCloseable æ¥å£</title>
<link>https://toutiao.io/k/znohjci</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;Closes this resource, relinquishing any underlying resources. This method is invoked automatically on objects managed by the try-with-resources statement.&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;While this interface method is declared to throw Exception, implementers are strongly encouraged to declare concrete implementations of the close method to throw more specific exceptions, or to throw no exception at all if the close operation cannot fail.&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Cases where the close operation may fail require careful attention by implementers. It is strongly advised to relinquish the underlying resources and to internally mark the resource as closed, prior to throwing the exception. The close method is unlikely to be invoked more than once and so this ensures that the resources are released in a timely manner. Furthermore it reduces problems that could arise when the resource wraps, or is wrapped, by another resource.&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Implementers of this interface are also strongly advised to not have the close method throw InterruptedException.&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;This exception interacts with a thread&#x27;s interrupted status, and runtime misbehavior is likely to occur if an InterruptedException is suppressed.&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;More generally, if it would cause problems for an exception to be suppressed, the AutoCloseable.close method should not throw it.&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Note that unlike the java.io.Closeable#close close method of java.io.Closeable, this close method is not required to be idempotent. In other words, calling this close method more than once may have some visible side effect, unlike Closeable.close which is required to have no effect if called more than once.&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;However, implementers of this interface are strongly encouraged to make their close methods idempotent.&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>269a06f1eba68f0280b1e96c514087fd</guid>
<title>ç°ä»£ Web å¼€å‘è¯­æ³•åŸºç¡€ä¸å·¥ç¨‹å®è·µ</title>
<link>https://toutiao.io/k/uhz45j5</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;body class=&quot;logged-out env-production page-responsive&quot; id=&quot;readabilityBody&quot;&gt;
    

    

  &lt;p id=&quot;start-of-content&quot; class=&quot;show-on-focus&quot;/&gt;





    


  

  &lt;include-fragment class=&quot;js-notification-shelf-include-fragment&quot; data-base-src=&quot;https://github.com/notifications/beta/shelf&quot;/&gt;




  &lt;div class=&quot;application-main &quot; data-commit-hovercards-enabled=&quot;&quot; data-discussion-hovercards-enabled=&quot;&quot; data-issue-and-pr-hovercards-enabled=&quot;&quot;&gt;
        &lt;div itemscope=&quot;&quot; itemtype=&quot;http://schema.org/SoftwareSourceCode&quot; class=&quot;&quot;&gt;
    &lt;main id=&quot;js-repo-pjax-container&quot; data-pjax-container=&quot;&quot;&gt;
      

    






  


  &lt;div class=&quot;bg-gray-light pt-3 hide-full-screen mb-5&quot;&gt;

      
          &lt;div class=&quot;d-block d-md-none mb-2 px-3 px-md-4 px-lg-5&quot;&gt;
      &lt;p class=&quot;f4 mb-3&quot;&gt;
        
&lt;g-emoji class=&quot;g-emoji&quot; alias=&quot;books&quot; fallback-src=&quot;https://github.githubassets.com/images/icons/emoji/unicode/1f4da.png&quot;&gt;ğŸ“š&lt;/g-emoji&gt; ç°ä»£ Web å¼€å‘è¯­æ³•åŸºç¡€ä¸å·¥ç¨‹å®è·µï¼Œæ¶µç›– Web å¼€å‘åŸºç¡€ã€å‰ç«¯å·¥ç¨‹åŒ–ã€åº”ç”¨æ¶æ„ã€æ€§èƒ½ä¸ä½“éªŒä¼˜åŒ–ã€æ··åˆå¼€å‘ã€React å®è·µã€Vue å®è·µã€WebAssembly ç­‰å¤šæ–¹é¢ã€‚
      &lt;/p&gt;
      
      
    
    
  &lt;/div&gt;

        
&lt;nav aria-label=&quot;Repository&quot; data-pjax=&quot;#js-repo-pjax-container&quot; class=&quot;js-repo-nav js-sidenav-container-pjax js-responsive-underlinenav overflow-hidden UnderlineNav px-3 px-md-4 px-lg-5 bg-gray-light&quot;&gt;
          

&lt;/nav&gt;
  &lt;/div&gt;


&lt;div class=&quot;container-xl clearfix new-discussion-timeline px-3 px-md-4 px-lg-5&quot;&gt;
  &lt;div class=&quot;repository-content &quot;&gt;

    
      

  &lt;p class=&quot;d-none d-lg-block mt-6 mr-3 Popover top-0 right-0 box-shadow-medium col-3&quot;&gt;
    
  &lt;/p&gt;

    &lt;signup-prompt class=&quot;signup-prompt-bg rounded-1&quot; data-prompt=&quot;signup&quot; hidden=&quot;&quot;&gt;
    &lt;div class=&quot;signup-prompt p-4 text-center mb-4 rounded-1&quot;&gt;
      &lt;div class=&quot;position-relative&quot;&gt;
        &lt;button type=&quot;button&quot; class=&quot;position-absolute top-0 right-0 btn-link link-gray&quot; data-action=&quot;click:signup-prompt#dismiss&quot; data-ga-click=&quot;(Logged out) Sign up prompt, clicked Dismiss, text:dismiss&quot;&gt;
          Dismiss
        &lt;/button&gt;
        &lt;h3 class=&quot;pt-2&quot;&gt;Join GitHub today&lt;/h3&gt;
        &lt;p class=&quot;col-6 mx-auto&quot;&gt;GitHub is home to over 50 million developers working together to host and review code, manage projects, and build software together.&lt;/p&gt;
        &lt;a class=&quot;btn btn-primary&quot; data-ga-click=&quot;(Logged out) Sign up prompt, clicked Sign up, text:sign-up&quot; data-hydro-click=&quot;{&amp;quot;event_type&amp;quot;:&amp;quot;authentication.click&amp;quot;,&amp;quot;payload&amp;quot;:{&amp;quot;location_in_page&amp;quot;:&amp;quot;files signup prompt&amp;quot;,&amp;quot;repository_id&amp;quot;:null,&amp;quot;auth_type&amp;quot;:&amp;quot;SIGN_UP&amp;quot;,&amp;quot;originating_url&amp;quot;:&amp;quot;https://github.com/wx-chevalier/Web-Series?hmsr=toutiao.io&amp;amp;utm_medium=toutiao.io&amp;amp;utm_source=toutiao.io&amp;quot;,&amp;quot;user_id&amp;quot;:null}}&quot; data-hydro-click-hmac=&quot;2aa01dc0717bbde03cc9119841a6e5dc804e93be105b4cd0fe97b284f0e72a5a&quot; href=&quot;/join?source=prompt-code&amp;amp;source_repo=wx-chevalier%2FWeb-Series&quot;&gt;Sign up&lt;/a&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/signup-prompt&gt;



  &lt;div class=&quot;gutter-condensed gutter-lg flex-column flex-md-row d-flex&quot;&gt;

  &lt;div class=&quot;flex-shrink-0 col-12 col-md-9 mb-4 mb-md-0&quot;&gt;
          





      &lt;div class=&quot;file-navigation mb-3 d-flex flex-items-start&quot;&gt;
  



  

  &lt;p class=&quot;flex-auto&quot;/&gt;

  &lt;a class=&quot;btn ml-2&quot; data-hydro-click=&quot;{&amp;quot;event_type&amp;quot;:&amp;quot;repository.click&amp;quot;,&amp;quot;payload&amp;quot;:{&amp;quot;target&amp;quot;:&amp;quot;FIND_FILE_BUTTON&amp;quot;,&amp;quot;repository_id&amp;quot;:229171266,&amp;quot;originating_url&amp;quot;:&amp;quot;https://github.com/wx-chevalier/Web-Series?hmsr=toutiao.io&amp;amp;utm_medium=toutiao.io&amp;amp;utm_source=toutiao.io&amp;quot;,&amp;quot;user_id&amp;quot;:null}}&quot; data-hydro-click-hmac=&quot;a8632c9383f375e28e50f1e7f816a9608ba4caf15df0a8e3703b432097c18203&quot; data-ga-click=&quot;Repository, find file, location:repo overview&quot; data-hotkey=&quot;t&quot; data-pjax=&quot;true&quot; href=&quot;/wx-chevalier/Web-Series/find/master&quot;&gt;
    Go to file
&lt;/a&gt;



    &lt;span class=&quot;d-none d-md-flex ml-2&quot;&gt;
        
&lt;get-repo&gt;
  &lt;details class=&quot;position-relative details-overlay details-reset&quot; data-action=&quot;toggle:get-repo#onDetailsToggle&quot;&gt;
    &lt;summary class=&quot;btn btn-primary&quot; data-hydro-click=&quot;{&amp;quot;event_type&amp;quot;:&amp;quot;repository.click&amp;quot;,&amp;quot;payload&amp;quot;:{&amp;quot;repository_id&amp;quot;:229171266,&amp;quot;target&amp;quot;:&amp;quot;CLONE_OR_DOWNLOAD_BUTTON&amp;quot;,&amp;quot;originating_url&amp;quot;:&amp;quot;https://github.com/wx-chevalier/Web-Series?hmsr=toutiao.io&amp;amp;utm_medium=toutiao.io&amp;amp;utm_source=toutiao.io&amp;quot;,&amp;quot;user_id&amp;quot;:null}}&quot; data-hydro-click-hmac=&quot;e7a67ef4da68ab4cc7aec8498045381abce22dca79ba4b031a0164abd5834fa5&quot;&gt;
      &lt;svg class=&quot;octicon octicon-download mr-1&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.47 10.78a.75.75 0 001.06 0l3.75-3.75a.75.75 0 00-1.06-1.06L8.75 8.44V1.75a.75.75 0 00-1.5 0v6.69L4.78 5.97a.75.75 0 00-1.06 1.06l3.75 3.75zM3.75 13a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5z&quot;/&gt;&lt;/svg&gt;
      Code
      &lt;span class=&quot;dropdown-caret&quot;/&gt;
&lt;/summary&gt;    &lt;div class=&quot;position-relative&quot;&gt;
      &lt;div class=&quot;dropdown-menu dropdown-menu-sw p-0&quot;&gt;
        &lt;div data-target=&quot;get-repo.modal&quot;&gt;
          &lt;div class=&quot;border-bottom p-3&quot;&gt;
            &lt;a class=&quot;muted-link float-right tooltipped tooltipped-s&quot; href=&quot;https://docs.github.com/articles/which-remote-url-should-i-use&quot; target=&quot;_blank&quot; aria-label=&quot;Which remote URL should I use?&quot;&gt;
  &lt;svg class=&quot;octicon octicon-question&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8zm9 3a1 1 0 11-2 0 1 1 0 012 0zM6.92 6.085c.081-.16.19-.299.34-.398.145-.097.371-.187.74-.187.28 0 .553.087.738.225A.613.613 0 019 6.25c0 .177-.04.264-.077.318a.956.956 0 01-.277.245c-.076.051-.158.1-.258.161l-.007.004a7.728 7.728 0 00-.313.195 2.416 2.416 0 00-.692.661.75.75 0 001.248.832.956.956 0 01.276-.245 6.3 6.3 0 01.26-.16l.006-.004c.093-.057.204-.123.313-.195.222-.149.487-.355.692-.662.214-.32.329-.702.329-1.15 0-.76-.36-1.348-.863-1.725A2.76 2.76 0 008 4c-.631 0-1.155.16-1.572.438-.413.276-.68.638-.849.977a.75.75 0 101.342.67z&quot;/&gt;&lt;/svg&gt;
&lt;/a&gt;



&lt;tab-container&gt;

  

  &lt;div role=&quot;tabpanel&quot;&gt;
    

    &lt;p class=&quot;mt-2 mb-0 f6 text-gray&quot;&gt;
        Use Git or checkout with SVN using the web URL.
    &lt;/p&gt;
  &lt;/div&gt;


  
&lt;/tab-container&gt;

          &lt;/div&gt;
          
        &lt;/div&gt;

        

        

        &lt;div class=&quot;p-3&quot; data-targets=&quot;get-repo.platforms&quot; data-platform=&quot;xcode&quot; hidden=&quot;&quot;&gt;
          &lt;h4 class=&quot;lh-condensed mb-3&quot;&gt;Launching Xcode&lt;span class=&quot;AnimatedEllipsis&quot;/&gt;&lt;/h4&gt;
          &lt;p class=&quot;text-gray&quot;&gt;If nothing happens, &lt;a href=&quot;https://developer.apple.com/xcode/&quot;&gt;download Xcode&lt;/a&gt; and try again.&lt;/p&gt;
          &lt;button type=&quot;button&quot; class=&quot;btn-link&quot; data-action=&quot;click:get-repo#onDetailsToggle&quot;&gt;Go back&lt;/button&gt;
        &lt;/div&gt;

        

      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/details&gt;
&lt;/get-repo&gt;


      
    &lt;/span&gt;
&lt;/div&gt;


      

&lt;div class=&quot;Box mb-3&quot;&gt;
  
  &lt;h2 id=&quot;files&quot; class=&quot;sr-only&quot;&gt;Files&lt;/h2&gt;
  


    &lt;a class=&quot;d-none js-permalink-shortcut&quot; data-hotkey=&quot;y&quot; href=&quot;/wx-chevalier/Web-Series/tree/10c6a899d423e33bc1964169f7b04081057c6323&quot;&gt;Permalink&lt;/a&gt;

  &lt;div class=&quot;include-fragment-error flash flash-error flash-full py-2&quot;&gt;
  &lt;svg class=&quot;octicon octicon-alert&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z&quot;/&gt;&lt;/svg&gt;&lt;p&gt;
  
    Failed to load latest commit information.

&lt;/p&gt;&lt;/div&gt;  &lt;div class=&quot;js-details-container Details&quot;&gt;
    &lt;div role=&quot;grid&quot; aria-labelledby=&quot;files&quot; class=&quot;Details-content--hidden-not-important js-navigation-container js-active-navigation-container d-md-block&quot; data-pjax=&quot;&quot;&gt;
      &lt;div class=&quot;sr-only&quot; role=&quot;row&quot;&gt;
        &lt;p role=&quot;columnheader&quot;&gt;Type&lt;/p&gt;
        &lt;p role=&quot;columnheader&quot;&gt;Name&lt;/p&gt;
        &lt;p role=&quot;columnheader&quot; class=&quot;d-none d-md-block&quot;&gt;Latest commit message&lt;/p&gt;
        &lt;p role=&quot;columnheader&quot;&gt;Commit time&lt;/p&gt;
      &lt;/div&gt;

        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    &lt;/div&gt;
    &lt;p class=&quot;Details-content--shown Box-footer d-md-none p-0&quot;&gt;
      &lt;button type=&quot;button&quot; class=&quot;d-block btn-link js-details-target width-full px-3 py-2&quot; aria-expanded=&quot;false&quot;&gt;
        View code
      &lt;/button&gt;
    &lt;/p&gt;
  &lt;/div&gt;




&lt;/div&gt;

  


&lt;/div&gt;
    &lt;div class=&quot;flex-shrink-0 col-12 col-md-3&quot;&gt;
            

      &lt;div class=&quot;BorderGrid BorderGrid--spacious&quot; data-pjax=&quot;&quot;&gt;
        &lt;div class=&quot;BorderGrid-row hide-sm hide-md&quot;&gt;
          &lt;div class=&quot;BorderGrid-cell&quot;&gt;
            &lt;h2 class=&quot;mb-3 h4&quot;&gt;About&lt;/h2&gt;

    &lt;p class=&quot;f4 mt-3&quot;&gt;
      
&lt;g-emoji class=&quot;g-emoji&quot; alias=&quot;books&quot; fallback-src=&quot;https://github.githubassets.com/images/icons/emoji/unicode/1f4da.png&quot;&gt;ğŸ“š&lt;/g-emoji&gt; ç°ä»£ Web å¼€å‘è¯­æ³•åŸºç¡€ä¸å·¥ç¨‹å®è·µï¼Œæ¶µç›– Web å¼€å‘åŸºç¡€ã€å‰ç«¯å·¥ç¨‹åŒ–ã€åº”ç”¨æ¶æ„ã€æ€§èƒ½ä¸ä½“éªŒä¼˜åŒ–ã€æ··åˆå¼€å‘ã€React å®è·µã€Vue å®è·µã€WebAssembly ç­‰å¤šæ–¹é¢ã€‚
    &lt;/p&gt;
    

  &lt;h3 class=&quot;sr-only&quot;&gt;Topics&lt;/h3&gt;
  

  &lt;h3 class=&quot;sr-only&quot;&gt;Resources&lt;/h3&gt;
  

  &lt;h3 class=&quot;sr-only&quot;&gt;License&lt;/h3&gt;
  

          &lt;/div&gt;
        &lt;/div&gt;
          
          
          
          
          
      &lt;/div&gt;

&lt;/div&gt;&lt;/div&gt;

  &lt;/div&gt;
&lt;/div&gt;

    &lt;/main&gt;
  &lt;/div&gt;

  &lt;/div&gt;

          




  &lt;div id=&quot;ajax-error-message&quot; class=&quot;ajax-error-message flash flash-error&quot;&gt;
    &lt;svg class=&quot;octicon octicon-alert&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z&quot;/&gt;&lt;/svg&gt;
    &lt;button type=&quot;button&quot; class=&quot;flash-close js-ajax-error-dismiss&quot; aria-label=&quot;Dismiss error&quot;&gt;
      &lt;svg class=&quot;octicon octicon-x&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z&quot;/&gt;&lt;/svg&gt;
    &lt;/button&gt;&lt;p&gt;
    You canâ€™t perform that action at this time.
  &lt;/p&gt;&lt;/div&gt;


  &lt;div class=&quot;js-stale-session-flash flash flash-warn flash-banner&quot; hidden=&quot;&quot;&gt;
    &lt;svg class=&quot;octicon octicon-alert&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z&quot;/&gt;&lt;/svg&gt;
    &lt;span class=&quot;js-stale-session-flash-signed-in&quot; hidden=&quot;&quot;&gt;You signed in with another tab or window. &lt;a href=&quot;&quot;&gt;Reload&lt;/a&gt; to refresh your session.&lt;/span&gt;
    &lt;span class=&quot;js-stale-session-flash-signed-out&quot; hidden=&quot;&quot;&gt;You signed out in another tab or window. &lt;a href=&quot;&quot;&gt;Reload&lt;/a&gt; to refresh your session.&lt;/span&gt;
  &lt;/div&gt;
  &lt;template id=&quot;site-details-dialog&quot;&gt;
  &lt;details class=&quot;details-reset details-overlay details-overlay-dark lh-default text-gray-dark hx_rsm&quot; open=&quot;&quot;&gt;
    &lt;summary role=&quot;button&quot; aria-label=&quot;Close dialog&quot;/&gt;
    &lt;details-dialog class=&quot;Box Box--overlay d-flex flex-column anim-fade-in fast hx_rsm-dialog hx_rsm-modal&quot;&gt;
      &lt;button class=&quot;Box-btn-octicon m-0 btn-octicon position-absolute right-0 top-0&quot; type=&quot;button&quot; aria-label=&quot;Close dialog&quot; data-close-dialog=&quot;&quot;&gt;
        &lt;svg class=&quot;octicon octicon-x&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M3.72 3.72a.75.75 0 011.06 0L8 6.94l3.22-3.22a.75.75 0 111.06 1.06L9.06 8l3.22 3.22a.75.75 0 11-1.06 1.06L8 9.06l-3.22 3.22a.75.75 0 01-1.06-1.06L6.94 8 3.72 4.78a.75.75 0 010-1.06z&quot;/&gt;&lt;/svg&gt;
      &lt;/button&gt;
      &lt;p class=&quot;octocat-spinner my-6 js-details-dialog-spinner&quot;/&gt;
    &lt;/details-dialog&gt;
  &lt;/details&gt;
&lt;/template&gt;

  

    &lt;div class=&quot;js-cookie-consent-banner&quot; hidden=&quot;&quot;&gt;
  &lt;div class=&quot;hx_cookie-banner p-2 p-sm-3 p-md-4&quot;&gt;
    &lt;div class=&quot;Box hx_cookie-banner-box box-shadow-medium mx-auto&quot;&gt;
    &lt;div class=&quot;Box-body border-0 py-0 px-3 px-md-4&quot;&gt;
      &lt;div class=&quot;js-main-cookie-banner hx_cookie-banner-main&quot;&gt;
          &lt;div class=&quot;d-md-flex flex-items-center py-3&quot;&gt;
            &lt;p class=&quot;f5 flex-1 mb-3 mb-md-0&quot;&gt;
              
  We use &lt;span class=&quot;text-bold&quot;&gt;optional&lt;/span&gt; third-party analytics cookies to understand how you use GitHub.com so we can build better products.

              &lt;span class=&quot;btn-link js-cookie-consent-learn-more&quot;&gt;Learn more&lt;/span&gt;.
            &lt;/p&gt;
            &lt;p class=&quot;d-flex d-md-block flex-wrap flex-sm-nowrap&quot;&gt;
              &lt;button class=&quot;btn btn-outline flex-1 mr-1 mx-sm-1 m-md-0 ml-md-2 js-cookie-consent-accept&quot;&gt;Accept&lt;/button&gt;
              &lt;button class=&quot;btn btn-outline flex-1 ml-1 m-md-0 ml-md-2 js-cookie-consent-reject&quot;&gt;Reject&lt;/button&gt;
            &lt;/p&gt;
          &lt;/div&gt;
        &lt;/div&gt;

        &lt;div class=&quot;js-cookie-details hx_cookie-banner-details&quot; hidden=&quot;&quot;&gt;
          &lt;div class=&quot;d-md-flex flex-items-center py-3&quot;&gt;
            &lt;p class=&quot;f5 flex-1 mb-2 mb-md-0&quot;&gt;
              
  We use &lt;span class=&quot;text-bold&quot;&gt;optional&lt;/span&gt; third-party analytics cookies to understand how you use GitHub.com so we can build better products.

              &lt;br/&gt;
              You can always update your selection by clicking &lt;span class=&quot;text-bold&quot;&gt;Cookie Preferences&lt;/span&gt; at the bottom of the page.
              For more information, see our &lt;a href=&quot;https://docs.github.com/en/free-pro-team@latest/github/site-policy/github-privacy-statement&quot;&gt;Privacy Statement&lt;/a&gt;.
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div class=&quot;d-md-flex flex-items-center py-3 border-top&quot;&gt;
            &lt;div class=&quot;f5 flex-1 mb-2 mb-md-0&quot;&gt;
              &lt;h5 class=&quot;mb-1&quot;&gt;Essential cookies&lt;/h5&gt;
              &lt;p class=&quot;f6 mb-md-0&quot;&gt;We use essential cookies to perform essential website functions, e.g. they&#x27;re used to log you in. 
                &lt;a href=&quot;https://docs.github.com/en/github/site-policy/github-subprocessors-and-cookies&quot;&gt;Learn more&lt;/a&gt;
              &lt;/p&gt;
            &lt;/div&gt;
            &lt;p class=&quot;text-right&quot;&gt;
              &lt;h5 class=&quot;text-blue&quot;&gt;Always active&lt;/h5&gt;
            &lt;/p&gt;
          &lt;/div&gt;

          &lt;div class=&quot;d-md-flex flex-items-center py-3 border-top&quot;&gt;
            &lt;div class=&quot;f5 flex-1 mb-2 mb-md-0&quot;&gt;
              &lt;h5 class=&quot;mb-1&quot;&gt;Analytics cookies&lt;/h5&gt;
              &lt;p class=&quot;f6 mb-md-0&quot;&gt;We use analytics cookies to understand how you use our websites so we can make them better, e.g. they&#x27;re used to gather information about the pages you visit and how many clicks you need to accomplish a task. 
                &lt;a href=&quot;https://docs.github.com/en/github/site-policy/github-subprocessors-and-cookies&quot;&gt;Learn more&lt;/a&gt;
              &lt;/p&gt;
            &lt;/div&gt;
            
          &lt;/div&gt;

          &lt;p class=&quot;text-right py-3 border-top&quot;&gt;
            &lt;button class=&quot;btn btn-primary js-save-cookie-preferences&quot; type=&quot;button&quot; disabled=&quot;disabled&quot;&gt;Save preferences&lt;/button&gt;
          &lt;/p&gt;
        &lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/div&gt;


  &lt;/body&gt;
&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>ffbe86900a34af7751874448f42a794a</guid>
<title>BigDecimal çš„ä½¿ç”¨</title>
<link>https://toutiao.io/k/qzfxl8x</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;post-body&quot; itemprop=&quot;articleBody&quot;&gt;

      
      

      
        &lt;p&gt;BigDecimalæ˜¯&lt;code&gt;java.math&lt;/code&gt;åŒ…ä¸­çš„ä¸€ä¸ªç±»ï¼Œç”¨æ¥å¯¹è¶…è¿‡16ä½æœ‰æ•ˆä½çš„æ•°è¿›è¡Œç²¾ç¡®çš„è¿ç®—ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦å¤ªç²¾ç¡®çš„æ•°å€¼è¿ç®—å¯ä»¥ç›´æ¥ä½¿ç”¨Floatå’ŒDoubleå¤„ç†ï¼Œä½†æ˜¯æ­£å¸¸å·¥ä½œä¸­ï¼Œè‚¯å®šæ˜¯éœ€è¦å¯¹æ•°å€¼æ˜¯ç²¾ç¡®ç‚¹çš„ï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨BigDecimalã€‚&lt;br/&gt;&lt;a id=&quot;more&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;floatå’Œdoubleçš„ç²¾åº¦&quot;&gt;&lt;a href=&quot;#floatå’Œdoubleçš„ç²¾åº¦&quot; class=&quot;headerlink&quot; title=&quot;floatå’Œdoubleçš„ç²¾åº¦&quot;/&gt;floatå’Œdoubleçš„ç²¾åº¦&lt;/h3&gt;&lt;p&gt;åœ¨ä½¿ç”¨BigDecimalå…ˆäº†è§£floatå’Œdoubleçš„ç²¾åº¦é—®é¢˜ï¼Œfloatå 32ä½(bit),doubleå 64ä½ï¼Œå³floatå 4ä¸ªå­—èŠ‚ï¼Œdoubleå 8ä¸ªå­—èŠ‚ã€‚&lt;/p&gt;
&lt;p&gt;floatå’Œdoubleçš„èŒƒå›´æ˜¯ç”±æŒ‡æ•°çš„ä½æ•°æ¥å†³å®šçš„ã€‚floatçš„å­˜å‚¨æ—¶å€™1ä¸ªbitæ˜¯ç¬¦å·ä½ï¼Œ8ä¸ªbitæ˜¯æŒ‡æ•°ä½ï¼Œå‰©ä¸‹çš„23ä¸ªbitæ˜¯æœ‰æ•ˆæ•°å­—ä½ï¼Œdoubleå­˜å‚¨çš„æ—¶å€™1ä¸ªbitæ˜¯ç¬¦å·ä½ï¼Œ11ä¸ªbitæ˜¯ä½æŒ‡æ•°ä½ï¼Œå‰©ä¸‹çš„52ä¸ªbitæ˜¯å°¾æ•°ä½ã€‚ç²¾åº¦ç”±å°¾æ•°å†³å®šï¼Œfloatçš„ç²¾åº¦ä¸º7~8ä½æœ‰æ•ˆæ•°å­—ï¼Œdoubleçš„ç²¾åº¦ä¸º16~17ä½ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ä½¿ç”¨floatæˆ–è€…doubleä¼šå‡ºç°ç²¾åº¦é—®é¢˜&lt;br/&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;float a = 0.05f;&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;float b = 0.01f;&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;System.out.println(a + b);&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªä»£ç å‡ºç°çš„ç»“æœä¸æ˜¯0.06ï¼Œè€Œæ˜¯0.060000002ï¼ŒåŒæ ·doubleä¹Ÿä¼šå‡ºç°è¿™æ ·çš„é—®é¢˜&lt;br/&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;double c = 0.05d;&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;double d = 0.01d;&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;System.out.println(c + d);&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;æ‰“å°ç»“æœæ˜¯0.060000000000000005ã€‚&lt;/p&gt;
&lt;p&gt;åŸºäºä¸Šè¿°ä¼šå‡ºç°çš„ç²¾åº¦ä¸¢å¤±çš„é—®é¢˜ï¼Œæˆ‘ä»¬æœ‰å¿…è¦ä½¿ç”¨BigDecimalè¿›è¡Œç²¾ç¡®çš„è®¡ç®—ã€‚&lt;/p&gt;
&lt;h3 id=&quot;BigDecimal&quot;&gt;&lt;a href=&quot;#BigDecimal&quot; class=&quot;headerlink&quot; title=&quot;BigDecimal&quot;/&gt;BigDecimal&lt;/h3&gt;&lt;h4 id=&quot;æ„é€ å‡½æ•°&quot;&gt;&lt;a href=&quot;#æ„é€ å‡½æ•°&quot; class=&quot;headerlink&quot; title=&quot;æ„é€ å‡½æ•°&quot;/&gt;æ„é€ å‡½æ•°&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BigDecimal(int)&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;åˆ›å»ºä¸€ä¸ªå…·æœ‰å‚æ•°æ‰€æŒ‡å®šæ•´æ•°å€¼çš„å¯¹è±¡&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;/&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;BigDecimal(double)&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;åˆ›å»ºä¸€ä¸ªå…·æœ‰å‚æ•°æ‰€æŒ‡å®šåŒç²¾åº¦å€¼çš„å¯¹è±¡&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;/&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;BigDecimal(long)&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;åˆ›å»ºä¸€ä¸ªå…·æœ‰å‚æ•°æ‰€æŒ‡å®šé•¿æ•´æ•°å€¼çš„å¯¹è±¡&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;/&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;BigDecimal(String)&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;åˆ›å»ºä¸€ä¸ªå…·æœ‰å‚æ•°æ‰€æŒ‡å®šä»¥å­—ç¬¦ä¸²è¡¨ç¤ºçš„æ•°å€¼çš„å¯¹è±¡&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è™½ç„¶æ„é€ å‡½æ•°æ”¯æŒfloatã€doubleï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿåƒä¸‡è¦æ³¨æ„ä½¿ç”¨stringï¼Œä¸ç„¶åŒæ ·ä¼šå‡ºç°ç²¾åº¦é—®é¢˜&lt;br/&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;float a = 0.05f;&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;float b = 0.01f;&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;BigDecimal m = new BigDecimal(a);&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;BigDecimal n = new BigDecimal(b);&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;System.out.println(m.add(n));&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ç»“æœæ˜¯0.060000000000000005ï¼Œå› ä¸ºä½ ä»¥ä¸ºä¼ å…¥açš„å€¼æ˜¯0.05ï¼Œä½†æ˜¯BigDecimalæ„é€ çš„æ—¶å€™ä¸æ˜¯0.005ï¼Œè€Œæ˜¯å…¶æ›´ç²¾ç¡®çš„å€¼ã€‚è¿™æ ·å°±è¿˜æ˜¯ä¼šå‡ºç°ç²¾åº¦é—®é¢˜ï¼Œæ‰€ä»¥è¦ç”¨stringæ–¹å¼æ„é€ ã€‚&lt;br/&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;BigDecimal s = new BigDecimal(String.valueOf(a));&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;BigDecimal t = new BigDecimal(String.valueOf(b));&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;System.out.println(s.add(t));&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ç»“æœå°±æ˜¯0.06&lt;/p&gt;
&lt;h4 id=&quot;å¸¸ç”¨æ–¹æ³•&quot;&gt;&lt;a href=&quot;#å¸¸ç”¨æ–¹æ³•&quot; class=&quot;headerlink&quot; title=&quot;å¸¸ç”¨æ–¹æ³•&quot;/&gt;å¸¸ç”¨æ–¹æ³•&lt;/h4&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;add(BigDecimal)&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;BigDecimalå¯¹è±¡ä¸­çš„å€¼ç›¸åŠ ï¼Œè¿”å›BigDecimalå¯¹è±¡&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;/&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;subtract(BigDecimal)&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;BigDecimalå¯¹è±¡ä¸­çš„å€¼ç›¸å‡ï¼Œè¿”å›BigDecimalå¯¹è±¡&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;/&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;multiply(BigDecimal)&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;BigDecimalå¯¹è±¡ä¸­çš„å€¼ç›¸ä¹˜ï¼Œè¿”å›BigDecimalå¯¹è±¡&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;/&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;divide(BigDecimal)&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;BigDecimalå¯¹è±¡ä¸­çš„å€¼ç›¸é™¤ï¼Œè¿”å›BigDecimalå¯¹è±¡&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;/&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;toString()&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;å°†BigDecimalå¯¹è±¡ä¸­çš„å€¼è½¬æ¢æˆå­—ç¬¦ä¸²&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;/&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;doubleValue()&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;å°†BigDecimalå¯¹è±¡ä¸­çš„å€¼è½¬æ¢æˆåŒç²¾åº¦æ•°&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;/&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;floatValue()&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;å°†BigDecimalå¯¹è±¡ä¸­çš„å€¼è½¬æ¢æˆå•ç²¾åº¦æ•°&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;/&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;longValue()&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;å°†BigDecimalå¯¹è±¡ä¸­çš„å€¼è½¬æ¢æˆé•¿æ•´æ•°&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;/&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;intValue()&lt;/span&gt;&lt;br/&gt;&lt;span class=&quot;line&quot;&gt;å°†BigDecimalå¯¹è±¡ä¸­çš„å€¼è½¬æ¢æˆæ•´æ•°&lt;/span&gt;&lt;br/&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

      
    &lt;/div&gt;
    
    
    

    

    

    

    &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>8d8153548213bb03070a711f74f91d0b</guid>
<title>Flutter ä¸­çš„ Tree Shaking æœºåˆ¶åˆæ¢</title>
<link>https://toutiao.io/k/5qr2uj1</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;h2&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;èƒŒæ™¯&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;åœ¨é—²é±¼æŠ€æœ¯æ¢ç©¶Flutterå·¥ç¨‹ä¸€ä½“åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†åšåˆ°æœ€å¥½çš„å¼€å‘ä½“éªŒï¼Œéœ€è¦æ— ç¼è¡”æ¥FaaSç«¯ä»£ç ä¸ä¸šåŠ¡Flutterä»£ç ï¼Œä¸€ä»½ä»£ç æ—¢å¯ä»¥åœ¨FaaSéƒ¨ç½²ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å¼•å…¥åœ¨ä¸šåŠ¡ä»£ç ä¸»å·¥ç¨‹ä¸­ï¼Œä½¿ä¹‹çœŸæ­£åšåˆ°å·¥ç¨‹ä¸€ä½“ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡æˆ‘ä»¬å¯¹ä¸¤éƒ¨åˆ†ä»£ç é€šè¿‡RPCè°ƒç”¨çš„æ–¹å¼å®ç°äº†ä»£ç è§£è€¦ï¼Œè€Œå·¥ç¨‹è§£è€¦ä¾èµ–äºFlutter/Dartåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­çš„Tree-Shakingæœºåˆ¶ã€‚ä¸ºäº†é¿å…è¸©å‘ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ï¼Œæ•´ä¸ªTree-Shakingæ˜¯æ€ä¹ˆèµ·ä½œç”¨çš„ã€‚æœ¬ç¯‡æ–‡ç« ç»“åˆFlutter Engineæºç å¯¹è¿™ä¸€è¿‡ç¨‹è¿›è¡Œäº†ç®€å•çš„æ¢ç©¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å‰ç½®çŸ¥è¯†&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;Tree Shakingæ˜¯ä¸€ç§æ­»ä»£ç æ¶ˆé™¤ï¼ˆDead Code Eliminationï¼‰æŠ€æœ¯ï¼Œè¿™ä¸€æƒ³æ³•èµ·æºäº20ä¸–çºª90å¹´ä»£çš„LISPã€‚å…¶æ€æƒ³æ˜¯ï¼šä¸€ä¸ªç¨‹åºæ‰€æœ‰å¯èƒ½çš„æ‰§è¡Œæµç¨‹éƒ½å¯ä»¥ç”¨å‡½æ•°è°ƒç”¨çš„æ ‘æ¥è¡¨ç¤ºï¼Œè¿™æ ·å°±å¯ä»¥æ¶ˆé™¤é‚£äº›ä»æœªè¢«è°ƒç”¨çš„å‡½æ•°ã€‚è¯¥ç®—æ³•æœ€å…ˆè¢«åº”ç”¨åˆ°Google Closure Toolsä¸­çš„JavaScriptä¸­ï¼Œç„¶åè¢«åº”ç”¨åˆ°åŒæ ·ç”±Googleç¼–å†™çš„dart2jsç¼–è¯‘å™¨ä¸­ã€‚åœ¨Flutterä¸­ï¼ŒåŒæ ·æœ‰è¿™æ ·çš„Tree Shakingæœºåˆ¶æ¥å‡å°æœ€ç»ˆäº§å‡ºçš„åŒ…å¤§å°ã€‚Flutteræä¾›äº†ä¸‰ç§æ„å»ºæ¨¡å¼ï¼Œé’ˆå¯¹æ¯ä¸ªä¸åŒçš„æ¨¡å¼ï¼ŒFlutterç¼–è¯‘å™¨å¯¹äº§å‡ºçš„äºŒè¿›åˆ¶æ–‡ä»¶æœ‰ä¸åŒä¼˜åŒ–ï¼ŒTree-Shakingæœºåˆ¶å¹¶ä¸ä¼šåœ¨debugæ¨¡å¼ä¸­è§¦å‘ã€‚åœ¨Profile/Releaseæ¨¡å¼ä¸‹ç¼–è¯‘çš„AOTäº§ç‰©ä¸­ï¼Œæœ‰å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„äº§ç‰©å¯ä»¥è®©æˆ‘ä»¬æ›´ç›´è§‚åœ°çœ‹åˆ°Tree-Shakingæœºåˆ¶åœ¨å‘æŒ¥ä½œç”¨ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;app.dill : è¿™å°±æ˜¯dartä»£ç é€šè¿‡buildçš„äº§ç‰©ï¼Œä¸ºäºŒè¿›åˆ¶çš„å­—èŠ‚ç ï¼Œå¯ä»¥é€šè¿‡Â &lt;code&gt;&lt;span&gt;strings&lt;/span&gt;&lt;/code&gt;çœ‹åˆ°é‡Œé¢çš„å†…å®¹ï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬dartä»£ç çš„æºç ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;snapshot_blob.bin.d : è¿™ä¸ªæ–‡ä»¶é‡Œé¢æ˜¯æ‰€æœ‰å‚ä¸ç¼–è¯‘çš„dartæ–‡ä»¶çš„é›†åˆï¼ŒåŒ…æ‹¬æˆ‘ä»¬è‡ªå·±çš„ä¸šåŠ¡ä»£ç ã€Â &lt;code&gt;&lt;span&gt;pubspec.yaml&lt;/span&gt;&lt;/code&gt;ä¸­å®šä¹‰çš„ä¸‰æ–¹åº“çš„ä»£ç ã€ä»¥åŠæˆ‘ä»¬ä¸šåŠ¡ä»£ç ä¸­importè¿›æ¥çš„æ‰€æœ‰flutteræˆ–è€…dartåŸç”ŸÂ &lt;code&gt;&lt;span&gt;package&lt;/span&gt;&lt;/code&gt;çš„ä»£ç ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;Tree Shakingæœºåˆ¶æ¢ç©¶&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;h3&gt;&lt;span&gt;&lt;strong&gt;æœ€å°åŒ–Demoåˆæ¢&lt;/strong&gt;&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬å†™ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œä»£ç å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;img data-ratio=&quot;0.6029411764705882&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1GgveSJlIib1MicndkpiaraxEhL34NHgXzn8T8FfN9xSqzCQPgouvo0Hw1eo3iaqBXoV9RKNNdTeGicLUQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;680&quot;/&gt;&lt;span&gt;ä»£ç éå¸¸ç®€å•ï¼Œé‡Œé¢åŒ…å«äº†ä¸€ä¸ªæ²¡æœ‰è¢«ä½¿ç”¨çš„ &lt;/span&gt;&lt;code&gt;&lt;span&gt;_unused&lt;/span&gt;&lt;/code&gt;&lt;span&gt;Â æ–¹æ³•ã€‚ä¸‹é¢æˆ‘ä»¬åœ¨Profileæ¨¡å¼ä¸‹è¿›è¡Œç¼–è¯‘ï¼Œé€šè¿‡DevToolsæ¥æŸ¥çœ‹æœ€ç»ˆç¼–è¯‘çš„äº§ç‰©ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;1.63125&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1GgveSJlIib1MicndkpiaraxEhYAxXYZCQCSbx66qIMCSpFItoBZPxfCCqVAPBP9FcqTEIb1mUR2IeHQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;960&quot;/&gt;&lt;span&gt;å¯ä»¥çœ‹åˆ°ï¼Œåœ¨Funtionsä¸­ï¼Œå¹¶æ²¡æœ‰ &lt;/span&gt;&lt;code&gt;&lt;span&gt;_unused&lt;/span&gt;&lt;/code&gt;&lt;span&gt;æ–¹æ³•ï¼Œè¯´æ˜åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œè¿™æ®µæ— ç”¨çš„ä»£ç è¢«â€œæ‘‡â€æ‰äº†ã€‚å®é™…ä¸Šé™¤äº†Functionä¹‹å¤–ï¼ŒFlutterç¼–è¯‘è¿‡ç¨‹ä¸­å¯¹äºå¼•å…¥çš„libï¼Œimportçš„dartæ–‡ä»¶éƒ½æœ‰ç›¸ä¼¼çš„Tree-Shakingå¤„ç†ã€‚ä¸‹é¢æ·±å…¥ä»£ç æ¥çœ‹çœ‹ï¼Œè¿™ç©¶ç«Ÿæ˜¯æ€ä¹ˆåšåˆ°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h3&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;ä»£ç è§£æ&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;&lt;span&gt;è¿™é‡Œå€Ÿç”¨Gityuanå‰è¾ˆçš„ &lt;/span&gt;&lt;code&gt;&lt;span&gt;flutter run&lt;/span&gt;&lt;/code&gt;&lt;span&gt;Â å‘½ä»¤æ‰§è¡Œçš„æ—¶åºå›¾ï¼Œæ•´ä¸ªç¼–è¯‘æµç¨‹ä¼šæ¯”è¾ƒé•¿ï¼Œåœ¨ &lt;/span&gt;&lt;code&gt;&lt;span&gt;GenSnapshot.run()&lt;/span&gt;&lt;/code&gt;&lt;span&gt;Â æ–¹æ³•ä¼šè°ƒç”¨gen&lt;span&gt;snapshotè¿™ä¸ªäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå¯¹åº”çš„æºç åœ¨ç›®å½•third&lt;/span&gt;party/dart/runtime/bin/gen&lt;span&gt;snapshot.ccï¼‰ï¼Œç”Ÿæˆæœºå™¨ç ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;img data-ratio=&quot;0.38263665594855306&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1GgveSJlIib1MicndkpiaraxEhqpdDNHQeK79TOJiccjPVpPibNgxemCPT8lRW2Hzg8iaSwGN3paelOckjw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1244&quot;/&gt;ç”¨æ”¾å¤§é•œæ¥çœ‹çœ‹gen&lt;/span&gt;snapshotå†…éƒ¨çš„æ‰§è¡Œè¿‡ç¨‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;img data-ratio=&quot;0.948892674616695&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1GgveSJlIib1MicndkpiaraxEhQuj5djmza2HESBSyS2td55XdUZiczvcMdhDsxJQwSoULKcnA0ufiaxJA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1174&quot;/&gt;&lt;span&gt;tree-shakingæœºåˆ¶å°±å‘ç”Ÿåœ¨å…¶ä¸­çš„ç¼–è¯‘é˜¶æ®µï¼Œå³ &lt;/span&gt;&lt;code&gt;&lt;span&gt;CompileAll()&lt;/span&gt;&lt;/code&gt;&lt;span&gt;Â æ–¹æ³•ã€‚ä¸‹é¢æˆ‘ä»¬æ·±å…¥åˆ°ä»£ç å»ä¸€æ­¥ä¸€æ­¥æ¢ç©¶ï¼ŒFlutterç¼–è¯‘å™¨æ˜¯æ€ä¹ˆå¯¹ä»£ç åšè£å‰ªçš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;span&gt;æºä»£ç è·¯å¾„æ˜¯third_party/dart/runtime/vm/compiler/aot/precompiler.ccï¼Œè¯»è€…ä¹Ÿå¯ä»¥è‡ªè¡Œå¯¹ç…§æŸ¥è¯¢ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;h4&gt;&lt;span&gt;&lt;strong&gt;ç¼–è¯‘é˜¶æ®µ&lt;/strong&gt;&lt;/span&gt;&lt;/h4&gt;&lt;p&gt;&lt;span&gt;é¦–å…ˆæ˜¯å¿…å¤‡çš„å‡†å¤‡å·¥ä½œï¼Œéœ€è¦å°†å¯¹è±¡æ± ä¿ç•™åˆ°AOTç¼–è¯‘ç»“æŸï¼Œå› æ­¤è¿™é‡Œå¿…é¡»ä½¿ç”¨èƒ½å­˜æ´»é‚£ä¹ˆä¹…çš„å¥æŸ„ï¼Œä½¿ç”¨äº†StackZoneã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;img data-ratio=&quot;0.2848360655737705&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1GgveSJlIib1MicndkpiaraxEhfq6fMmxh6yAf9rWIKiaMAjtfEHI9cF2nyJGRtl3epPw94R5IMstvb7A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;976&quot;/&gt;&lt;span&gt;ä¸ºäº†ä½¿ç”¨ç±»å±‚æ¬¡ç»“æ„åˆ†æ (CHA)ï¼Œåœ¨ç¼–è¯‘å‰éœ€è¦ç¡®ä¿ç±»çš„å±‚æ¬¡ç»“æ„ç¨³å®šï¼ŒåŒæ—¶ç¡®ä¿æŸ¥æ‰¾å…¥å£ç‚¹æ—¶ä¸ä¼šå› ä¸ºå‡½æ•°çš„ç±»è¿˜æ²¡æœ‰æœ€ç»ˆç¡®å®šè€Œæ¼æ‰å‡½æ•°ã€‚CHAæ˜¯ä¸€ç§ç¼–è¯‘å™¨ä¼˜åŒ–ï¼Œå¯æ ¹æ®å¯¹ç±»å±‚æ¬¡ç»“æ„çš„åˆ†æç»“æœï¼Œå°†è™šæ‹Ÿè°ƒç”¨å»è™šæ‹ŸåŒ–ä¸ºç›´æ¥è°ƒç”¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;img data-ratio=&quot;0.5449101796407185&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1GgveSJlIib1MicndkpiaraxEhcPCGadRSv8Genya2W4e9aWzVhO4nr2XFhowD1h4rfXJviaD7TrZYu9A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1002&quot;/&gt;&lt;span&gt;é¢„ç¼–è¯‘æ„é€ å‡½æ•°ï¼Œè®¡ç®—ä¼˜åŒ–æŒ‡ä»¤æ•°ç­‰ä¿¡æ¯ï¼Œå¯ä»¥ç”¨äºå†…è”å‡½æ•°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;img data-ratio=&quot;0.15517241379310345&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1GgveSJlIib1MicndkpiaraxEh8q1Mwuvc8gthN8wPyxNn5vB8kKAdrLia7eHA7JKEvDDFBvmvuf4B5oQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1508&quot;/&gt;&lt;span&gt;ä¸‹ä¸€æ­¥ç”Ÿæˆæ¡©ä»£ç ï¼Œé€šè¿‡ &lt;/span&gt;&lt;code&gt;&lt;span&gt;StubCode::InterpretCall&lt;/span&gt;&lt;/code&gt;&lt;span&gt; å¾—åˆ°çš„codeæ¥è·å–å®ƒçš„å¯¹è±¡æ± ï¼Œå†åˆ©ç”¨ &lt;/span&gt;&lt;code&gt;&lt;span&gt;StubCode::Build&lt;/span&gt;&lt;/code&gt;&lt;span&gt; ç­‰ä¸€ç³»åˆ—æ–¹æ³•ç³»åˆ—æ–¹æ³•è·å–çš„ç»“æœä¿å­˜åœ¨object_storeã€‚æ”¶é›†åŠ¨æ€å‡½æ•°çš„æ–¹æ³•åï¼Œä¹‹åé€šè¿‡ &lt;/span&gt;&lt;code&gt;&lt;span&gt;AddRoots()&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ–¹æ³•ï¼Œä»C++å‘ç”Ÿçš„åˆ†é…å’Œè°ƒç”¨çš„èµ·ç‚¹æ·»åŠ ä¸ºæ ¹ï¼Œ åŒæ—¶é€šè¿‡ &lt;/span&gt;&lt;code&gt;&lt;span&gt;AddAnnotatedRoots()&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ–¹æ³•å°†æ‰€æœ‰ä»¥@pragmaï¼ˆâ€™vmï¼šentry-pointâ€™ï¼‰ä¸ºæ ‡æ³¨çš„ä¹Ÿæ·»åŠ ä¸ºæ ¹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;img data-ratio=&quot;0.3527272727272727&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1GgveSJlIib1MicndkpiaraxEh1x5WR40LQwMicd9D0ro3D3Tacho3x4UmN4WuEJdCEVUXwPLyqIc5lvw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;550&quot;/&gt;&lt;span&gt;ä¹‹åï¼Œä»£ç å¼€å§‹ç¼–è¯‘ï¼Œ &lt;/span&gt;&lt;code&gt;&lt;span&gt;Iterate()&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ˜¯ç¼–è¯‘æœ€ä¸ºæ ¸å¿ƒçš„åœ°æ–¹ã€‚åœ¨è¿™é‡Œä¼šä»¥ä¸Šé¢æ‰¾åˆ°çš„æ ¹ä½œä¸ºç›®æ ‡ï¼Œéå†æ·»åŠ è¯¥ç›®æ ‡çš„è°ƒç”¨è€…ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;img data-ratio=&quot;0.7601809954751131&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1GgveSJlIib1MicndkpiaraxEhKc00NWBdfWd2QRt1MsTC06bicX92HhRKLbMCppgsogba2Fpp1xbzNPw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;884&quot;/&gt;&lt;span&gt;åœ¨è¯¥æ–¹æ³•å†…éƒ¨ï¼Œä¸»è¦çš„è°ƒç”¨é“¾å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;span&gt;ProcessFunction
==&amp;gt; CompileFunction
==&amp;gt; PrecompileFunctionHelper
==&amp;gt; PrecompileParsedFunctionHelper.Compile&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;span&gt;è‡³æ­¤ï¼Œç¼–è¯‘å®Œæˆä¹‹åå¼€å§‹è¿›å…¥Tree-Shakingé˜¶æ®µï¼Œå¯¹æ— ç”¨ä»£ç è¿›è¡Œç®€åŒ–ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h4&gt;&lt;span&gt;&lt;strong&gt;Tree shakingé˜¶æ®µ&lt;/strong&gt;&lt;/span&gt;&lt;/h4&gt;&lt;p&gt;&lt;span&gt;åœ¨ä¸Šé¢çš„ç¼–è¯‘è¿‡ç¨‹ä¸­ï¼Œå‡½æ•°/ç±»ç­‰è°ƒç”¨ä¿¡æ¯å·²ç»è¿›è¡Œäº†è¾“å‡ºï¼Œæ ¹æ®è¿™äº›ä¿¡æ¯ï¼Œè®©ç¼–è¯‘å™¨å¯ä»¥çŸ¥é“ï¼Œå…·ä½“å“ªä¸€äº›æ˜¯ä¸å¿…è¦çš„ä»£ç ã€‚è¿™é‡Œä»¥å¯¹Functionçš„å¤„ç†ä¸ºä¾‹è¿›è¡Œè®²è§£ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå–å¾—Libraryã€Classç­‰å¥æŸ„ä¹‹åï¼Œä»¥Libraryä¸ºå•ä½ï¼Œå¯¹æ¯ä¸ªåŒ…å†…çš„ä»£ç è¿›è¡Œå¤„ç†ï¼Œä¼šéå†æ‰€æœ‰ç±»ä¸­çš„Functionsè¿›è¡Œå¤„ç†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;img data-ratio=&quot;0.4041916167664671&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1GgveSJlIib1MicndkpiaraxEhbhsiasvJicsJKur99hr5eGGFhOEBic43v4VulrE0t7EpytibEIHOcQb1kQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1336&quot;/&gt;&lt;span&gt;é€šè¿‡ &lt;/span&gt;&lt;code&gt;&lt;span&gt;AddTypesOf(constFunction&amp;amp;function)&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ–¹æ³•ï¼Œå°†è°ƒç”¨åˆ°çš„å‡½æ•°æ·»åŠ åˆ° &lt;/span&gt;&lt;code&gt;&lt;span&gt;functions_to_retain_&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ± ä¸­ï¼ŒåŒæ—¶å¯¹Functionä¸­çš„ç±»å‹å‚æ•°åšäº†è¯»å–ï¼Œé€šè¿‡ &lt;/span&gt;&lt;code&gt;&lt;span&gt;AddType&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ–¹æ³•ï¼Œå°†è¿™äº›ç±»å‹å‚æ•°æ·»åŠ åˆ°å¯¹åº”çš„ &lt;/span&gt;&lt;code&gt;&lt;span&gt;typeargs_to_retain_&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ± å’Œ &lt;/span&gt;&lt;code&gt;&lt;span&gt;types_to_retain_&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ± ä¸­ï¼Œç”¨äºç±»å‹ä¿¡æ¯çš„TreeShakingï¼ˆåˆ†åˆ«å¯¹åº”DropTypeArgumentså’ŒDropTypeParametersï¼‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;img data-ratio=&quot;0.5249221183800623&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1GgveSJlIib1MicndkpiaraxEhhBzEulxn8ib425DD6InjSvQicMcPkRpp0qAJ7QqE0icTIysBa1vZramBQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1284&quot;/&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;span&gt;Classä¿¡æ¯åœ¨åŒåæ–¹æ³• &lt;/span&gt;&lt;code&gt;&lt;span&gt;AddTypesOf(constClass&amp;amp;cls)&lt;/span&gt;&lt;/code&gt;&lt;span&gt; ä¸­è¿›è¡Œå¤„ç†ï¼Œå¤„ç†è¿‡ç¨‹æ¯”è¾ƒç±»ä¼¼ï¼Œè¿™é‡Œä¸åšèµ˜è¿°ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥è‡ªè¡ŒæŸ¥é˜…&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;span&gt;è¿™ä¸ªæ–¹æ³•é‡Œé¢ï¼Œä¼šç¡®ä¿åœ¨æ‰§è¡ŒDropæ–¹æ³•ä¹‹å‰å»ºç«‹ç”¨äºåºåˆ—åŒ–è°ƒåº¦è¡¨çš„æ¡ç›®ï¼Œå› ä¸ºç¼–è¯‘å™¨åç»­å¯èƒ½ä¼šæ¸…é™¤å¯¹Codeå¯¹è±¡çš„å¼•ç”¨ã€‚åŒæ—¶åˆ é™¤è°ƒåº¦è¡¨ç”Ÿæˆå™¨ï¼Œä»¥ç¡®ä¿åœ¨è¿™ä¹‹åä¸å†å°è¯•æ·»åŠ æ–°æ¡ç›®ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨è¿™ä¸ªæ–¹æ³•é‡Œé€šè¿‡å£°æ˜çš„åŒ¿åå†…éƒ¨ç±» &lt;/span&gt;&lt;code&gt;&lt;span&gt;StaticCallTableEntryFixer&lt;/span&gt;&lt;/code&gt;&lt;span&gt;Â ï¼Œå¯¹é™æ€å‡½æ•°è°ƒç”¨å…¥å£åšäº†æ›¿æ¢ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¥ä¸‹æ¥ï¼Œä¼šæ‰§è¡Œä¸€ç³»åˆ—çš„Dropæ–¹æ³•ã€‚è¿™äº›æ–¹æ³•ä¼šå»æ‰å¤šä½™çš„æ–¹æ³•ã€å­—æ®µã€ç±»ã€åº“ç­‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/span&gt;&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;DropFunctions();&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;DropFields();&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;DropTypes();&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;DropTypeParameters();&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;DropTypeArguments();&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;DropMetadata();&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;DropLibraryEntries();&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;DropClasses();&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;DropLibraries();&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;span&gt;å…·ä½“è°ƒç”¨æ—¶åºå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;img data-ratio=&quot;0.6331428571428571&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1GgveSJlIib1MicndkpiaraxEhUIayr0icbgbeABsV1ssndpRgM9tUZ3ibaCTibGGehtmVb800VHejWGwsg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;875&quot;/&gt;&lt;span&gt;ç”±äºè¿™äº›æ–¹æ³•çš„å†…éƒ¨å®ç°æ€è·¯æœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„ï¼Œè¿™é‡Œé’ˆå¯¹Functionçš„æ–¹æ³• &lt;/span&gt;&lt;code&gt;&lt;span&gt;DropFunctions&lt;/span&gt;&lt;/code&gt;&lt;span&gt; ä¸ºä¾‹æ¥è¯´æ˜ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨è¯¥æ–¹æ³•ä¸­ï¼Œæ ¸å¿ƒæ˜¯é€šè¿‡ä»¥ä¸Šæåˆ° &lt;/span&gt;&lt;code&gt;&lt;span&gt;functions_to_retain_&lt;/span&gt;&lt;/code&gt;&lt;span&gt;Â æ± ï¼Œå¯¹Functionæ˜¯å¦æœ‰æ ¹è°ƒç”¨è€…è¿›è¡Œåˆ¤æ–­ï¼ŒÂ å¦‚æœæ± ä¸­ä¸åŒ…å«Functionå¯¹è±¡ï¼Œè¯´æ˜è¿™æ˜¯å¯ä»¥èˆå¼ƒçš„Functionã€‚ä¹‹åï¼Œå°†å‰©ä¸‹çš„Functioné‡æ–°å†™å›Classï¼Œå¹¶æ›´æ–°Classçš„è°ƒç”¨è¡¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨æ–¹æ³•å†…éƒ¨å£°æ˜äº†drop_functionå‡½æ•°æ¥â€œæ‘‡æ‰â€Functionã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;img data-ratio=&quot;0.6970802919708029&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1GgveSJlIib1MicndkpiaraxEh8d5nEULgw3RvQQzhc3AVKibHxrjufPcolHaE9vYRNs0mvFs0rhaNlOA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1096&quot;/&gt;&lt;span&gt;ä¹‹åä½¿ç”¨å¯¹æ‰€æœ‰çš„ä»£ç ä¸­çš„Functionè¿›è¡Œéå†ï¼Œ ä½¿ç”¨ä¸Šé¢å£°æ˜çš„ &lt;/span&gt;&lt;code&gt;&lt;span&gt;drop_function&lt;/span&gt;&lt;/code&gt;&lt;span&gt;Â å¯¹æ— ç”¨çš„Functionä»£ç è¿›è¡Œæ ‡è®°å’Œåˆ é™¤ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;img data-ratio=&quot;0.5763779527559055&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1GgveSJlIib1MicndkpiaraxEhMIYPzss0GbRVBBDcZPJdPpUQ9TO0CU7zfzHPe3vEsvDfjDrfQe0RPw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1270&quot;/&gt;&lt;span&gt;å°†éœ€è¦è¢«ä¿ç•™çš„Funtioné‡æ–°å†™è¿›æ‰€å±Classä¸­ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;img data-ratio=&quot;0.2821011673151751&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1GgveSJlIib1MicndkpiaraxEhcqsE4p5ufNicSEBWlvPNEst7SpItXMkcIeXP9c7877lhicE0o0me6v3Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1028&quot;/&gt;&lt;span&gt;é‡æ–°ç”Ÿæˆç±»çš„è°ƒç”¨è¡¨ï¼ŒåŒæ—¶å¯¹è°ƒç”¨è¡¨ä¸­çš„å¯èƒ½å­˜åœ¨çš„æ— ç”¨Functionè¿›è¡Œå…œåº•åˆ é™¤ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;img data-ratio=&quot;0.6324921135646687&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1GgveSJlIib1MicndkpiaraxEhDwkmqspnlXPeiasF37ky6BBbWFov2l1ZQonJMKic4uazOg6gzvbLX6uw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1268&quot;/&gt;&lt;span&gt;æœ€åæ˜¯ä¸€äº›å†…è”å‡½æ•°ç­‰è¾¹ç•Œæƒ…å†µçš„å¤„ç†ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚åœ¨å®ŒæˆDropé˜¶æ®µä¹‹åï¼Œå¯ä»¥è¢«ä¸¢æ‰çš„ä»£ç å·²ç»è¿›å…¥äº†åˆ é™¤æ± ä¸­ï¼Œåé¢è¿›å…¥ç¼–è¯‘çš„æ”¶å°¾é˜¶æ®µï¼Œè¿›ä¸€æ­¥å‡å°äºŒè¿›åˆ¶æ–‡ä»¶å¤§å°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h4&gt;&lt;span&gt;&lt;strong&gt;æ”¶å°¾é˜¶æ®µ&lt;/strong&gt;&lt;/span&gt;&lt;/h4&gt;&lt;p&gt;&lt;span&gt;åœ¨Tree-Shakingç»“æŸä¹‹åï¼Œè¿›å…¥ç¼–è¯‘æ”¶å°¾å·¥ä½œï¼ŒåŒ…æ‹¬ä»£ç æ··æ·†ï¼Œåƒåœ¾å›æ”¶ç­‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;img data-ratio=&quot;0.755056179775281&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1GgveSJlIib1MicndkpiaraxEhrPmoOvQ9Bk4CJb2T1Jn6q4f9J80K3EsryCTRJHMHvfjAgCgXdWTaHg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;890&quot;/&gt;&lt;span&gt;å€¼å¾—æ³¨æ„çš„æ˜¯Dedupè¿™ä¸ªæ–¹æ³•ï¼Œå…³é”®ä»£ç ä»£ç å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;img data-ratio=&quot;0.7250859106529209&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1GgveSJlIib1MicndkpiaraxEhyHf0emsgNlRicPfCvjUo67ALAv3WAkaIQK3FvSHW6k4AYMDqUbLN8icQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1164&quot;/&gt;&lt;span&gt;åœ¨è¯¥æ–¹æ³•å†…è¿›è¡Œå¾ˆå¤šé‡å¤æ•°æ®åˆ é™¤å·¥ä½œï¼›åœ¨AOTæ¨¡å¼ä¸‹ï¼Œbinderæ˜¯åœ¨Tree Shakingä¹‹åè¿è¡Œçš„ï¼Œåœ¨æ­¤æœŸé—´ï¼Œæ‰€æœ‰çš„ç›®æ ‡éƒ½å·²ç»è¢«ç¼–è¯‘ï¼Œå› æ­¤binderä¼šç”¨å¯¹ç›®æ ‡çš„ç›´æ¥è°ƒç”¨ä»£æ›¿æ‰€æœ‰çš„é™æ€è°ƒç”¨ï¼Œè¿›ä¸€æ­¥å‡å°äº†ç¼–è¯‘äº§ç‰©äºŒè¿›åˆ¶æ–‡ä»¶ã€‚è‡³æ­¤æ‰€æœ‰çš„ç¼–è¯‘å·¥ä½œå®Œæˆï¼ŒTree-Shakingå®Œæˆäº†ä»–çš„ä½¿å‘½ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h3&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;æ‹“å±•&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;&lt;span&gt;åœ¨Flutter 1.20ç‰ˆæœ¬ï¼Œé€šè¿‡Tree-Shakingæœºåˆ¶ç§»é™¤åœ¨å·¥ç¨‹ä¸­æœªä½¿ç”¨åˆ°çš„icon fontsï¼Œè¿›ä¸€æ­¥ç¼©å°äº†åŒ…å¤§å°ï¼ˆ100KBå·¦å³ï¼‰ï¼Œä¸è¿‡è¯¥æ–¹æ³•çš„å®ç°å¹¶ä¸åœ¨ä»¥ä¸Šè¯´æ˜çš„ç¼–è¯‘é˜¶æ®µï¼Œè€Œæ˜¯åœ¨build_systemé‡Œï¼Œå¯¹assetsè¿›è¡Œäº†ä¼˜åŒ–ã€‚ç›¸å…³çš„PRåœ¨&lt;/span&gt;&lt;span&gt;github.com/flutter/flutte/pull/49737&lt;/span&gt;&lt;span&gt;å¯ä»¥æŸ¥çœ‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å°ç»“&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;æœ¬æ–‡ä¸»è¦ç»“åˆFlutter Engineæºä»£ç ï¼Œä»ç¼–è¯‘é˜¶æ®µå‡ºå‘ï¼Œæ¢ç©¶äº†åœ¨è¿‡ç¨‹ä¸­Tree-Shakingçš„è¿è¡Œæœºåˆ¶ã€‚ç”±äºè¿™æ ·ä¸€ä¸ªæœºåˆ¶çš„å­˜åœ¨ï¼Œä¸ºå·¥ç¨‹è§£è€¦æä¾›äº†ç†è®ºåŸºç¡€ï¼Œè®©å·¥ç¨‹ä¸€ä½“åŒ–çš„å®ç°æ›´ä¸ºç®€å•ï¼ŒåŒæ—¶å¯¹æˆ‘ä»¬è¿›ä¸€æ­¥ä¼˜åŒ–åŒ…å¤§å°æœ‰å¯å‘ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;1.5171875&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/DUwiayJ0Mj1Eojqc694G4ReIf3N1VHTwLkBHVJESIFLiczQ4vDlNtfiaVYRMeOUwXUB9IaFricKteNTWg48zcxmpMA/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>