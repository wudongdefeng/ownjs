<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>98ee5bbf770316434e25a88816084598</guid>
<title>é¢è¯•ï¼šä¸ºäº†è¿›é˜¿é‡Œï¼Œå¿…é¡»æŒæ¡ HashMap æºç åŸç†å’Œé¢è¯•é¢˜ï¼ˆå›¾è§£ç‰ˆä¸€ï¼‰</title>
<link>https://toutiao.io/k/vl7rvfr</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;h1 cid=&quot;n0&quot; mdtype=&quot;heading&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;span&gt;&lt;em&gt;&lt;strong&gt;æ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€&lt;/strong&gt;&lt;span&gt;&lt;strong&gt;CcwwæŠ€æœ¯åšå®¢&lt;/strong&gt;&lt;/span&gt;&lt;strong&gt;ã€‘ï¼ŒåŸåˆ›æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨å‡º&lt;/strong&gt;&lt;/em&gt;&lt;/span&gt;&lt;/h1&gt;&lt;hr/&gt;&lt;h3 cid=&quot;n2&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;å‰è¨€&lt;/span&gt;&lt;br/&gt;&lt;/h3&gt;&lt;p cid=&quot;n3&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;é›†åˆåœ¨åŸºç¡€é¢è¯•ä¸­æ˜¯å¿…å¤‡å¯ç¼ºçš„ä¸€éƒ¨åˆ†ï¼Œå…¶ä¸­é‡è¦çš„HashMapæ›´æ˜¯å°‘ä¸äº†ï¼Œé‚£é¢è¯•å®˜ä¼šé¢è¯•ä¸­æé—®é‚£äº›é—®é¢˜å‘¢ï¼Œè¿™äº›åœ¨JDK1.7å’Œ1.8æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot; cid=&quot;n4&quot; mdtype=&quot;list&quot; data-mark=&quot;-&quot;&gt;&lt;li&gt;&lt;p cid=&quot;n6&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;strong&gt;HashMapçš„åº•å±‚åŸç†&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n8&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;strong&gt;HashMapçš„hashå“ˆå¸Œå‡½æ•°çš„è®¾è®¡åŸç†ï¼Œä»¥åŠHashMapä¸‹æ ‡è·å–æ–¹å¼ï¼Ÿ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n10&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;strong&gt;HashMapæ‰©å®¹æœºåˆ¶ï¼ŒhashMapä¸­ä»€ä¹ˆæ—¶å€™éœ€è¦è¿›è¡Œæ‰©å®¹ï¼Œæ‰©å®¹resize()åˆæ˜¯å¦‚ä½•å®ç°çš„&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n12&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;strong&gt;hashMapä¸­putæ˜¯å¦‚ä½•å®ç°çš„ ï¼ŒJDK1.7å’Œ1.8æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n14&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;strong&gt;hashMapä¸­getæ˜¯å¦‚ä½•å®ç°çš„&lt;/strong&gt; &lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n16&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;strong&gt;å…¶ä»–æ¶‰åŠé—®é¢˜&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot; cid=&quot;n17&quot; mdtype=&quot;list&quot; data-mark=&quot;-&quot;&gt;&lt;li&gt;&lt;p cid=&quot;n19&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;strong&gt;HashMapå…·å¤‡çš„ç‰¹æ€§&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n21&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;strong&gt;ä¸ºä»€ä¹ˆHashçš„åº•å±‚æ•°æ®é•¿åº¦æ€»ä¸º2çš„Næ¬¡æ–¹ï¼Ÿå¦‚æœè¾“å…¥å€¼ä¸æ˜¯2çš„å¹‚æ¯”å¦‚10ä¼šæ€ä¹ˆæ ·ï¼Ÿ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n23&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;strong&gt;åŠ è½½å› å­ä¸ºä»€ä¹ˆæ˜¯ 0.75ï¼Ÿ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n25&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;strong&gt;å“ˆå¸Œè¡¨å¦‚ä½•è§£å†³Hashå†²çª&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n27&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;strong&gt;å½“æœ‰å“ˆå¸Œå†²çªæ—¶ï¼ŒHashMap æ˜¯å¦‚ä½•æŸ¥æ‰¾å¹¶ç¡®è®¤å…ƒç´ çš„ï¼Ÿ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n29&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;strong&gt;HashMap æ˜¯çº¿ç¨‹å®‰å…¨çš„å—ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;hr/&gt;&lt;h3 cid=&quot;n32&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;1. HashMapçš„åº•å±‚åŸç†&lt;/span&gt;&lt;br/&gt;&lt;/h3&gt;&lt;p cid=&quot;n33&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;JDK1.7ä½¿ç”¨çš„æ˜¯æ•°ç»„+ å•é“¾è¡¨çš„æ•°æ®ç»“æ„ã€‚JDK1.8ä¹‹åï¼Œä½¿ç”¨çš„æ˜¯æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘çš„æ•°æ®ç»“æ„&lt;/span&gt;&lt;/p&gt;&lt;h4 cid=&quot;n34&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;HashMapæ•°æ®ç»“æ„å›¾ï¼ˆjdk1.8ï¼‰&lt;/span&gt;&lt;/h4&gt;&lt;p cid=&quot;n35&quot; mdtype=&quot;paragraph&quot;&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.573943661971831&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/EvicK4z5ZDriatqsuMHWsaacfH3j6lpw9YmAsnANIrHEz6efzy1BvJDibR7ib8pRaPC6Ik4Qdhiae8Ym3UKJknoLOYw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;568&quot;/&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;java&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; TREEIFY_THRESHOLD = &lt;span class=&quot;code-snippet__number&quot;&gt;8&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; UNTREEIFY_THRESHOLD = &lt;span class=&quot;code-snippet__number&quot;&gt;6&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; MIN_TREEIFY_CAPACITY = &lt;span class=&quot;code-snippet__number&quot;&gt;64&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p cid=&quot;n37&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä»HashMapå¸¸é‡ä¸­å¯ä»¥çœ‹å‡ºï¼Œå½“é“¾è¡¨çš„æ·±åº¦è¾¾åˆ°8çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤é˜ˆå€¼TREEIFY_THRESHOLD=8ï¼Œå°±ä¼šè‡ªåŠ¨æ‰©å®¹æŠŠé“¾è¡¨è½¬æˆçº¢é»‘æ ‘çš„æ•°æ®ç»“æ„æ¥æŠŠæ—¶é—´å¤æ‚åº¦ä»O(n)å˜æˆO(logN)æé«˜äº†æ•ˆç‡ï¼Œè€Œä¸”å½“è¿›è¡Œresizeæ“ä½œæ—¶ï¼Œè‹¥æ¡¶ä¸­æ•°é‡å°‘äº6åˆ™ä»æ ‘è½¬æˆé“¾è¡¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h4 cid=&quot;n38&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;é‚£ä¸ºä»€ä¹ˆæ•°æ®ç»“æ„éœ€è¦ä»JDK1.7æ¢æˆJDK1.8çš„æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼Ÿ&lt;/span&gt;&lt;/h4&gt;&lt;p cid=&quot;n39&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;åœ¨JDK1.7ä¸­ï¼Œå½“ç›¸åŒçš„hashå€¼æ—¶ï¼ŒHashMapä¸æ–­åœ°äº§ç”Ÿç¢°æ’ï¼Œé‚£ä¹ˆç›¸åŒkeyä½ç½®çš„é“¾è¡¨å°±ä¼šä¸æ–­å¢é•¿ï¼Œå½“æŸ¥è¯¢HashMapçš„ç›¸åº”keyå€¼çš„Vauleå€¼æ—¶ï¼Œå°±ä¼šå»å¾ªç¯éå†è¿™ä¸ªè¶…çº§å¤§çš„é“¾è¡¨ï¼ŒæŸ¥è¯¢æ€§èƒ½éå¸¸ä½ä¸‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n40&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä½†åœ¨JDK1.8å½“é“¾è¡¨è¶…è¿‡8ä¸ªèŠ‚ç‚¹æ•°æ—¶ï¼Œå°†ä¼šè®©çº¢é»‘æ ‘æ¥æ›¿ä»£é“¾è¡¨ï¼ŒæŸ¥è¯¢æ€§èƒ½å¾—åˆ°äº†å¾ˆå¥½çš„æå‡ï¼Œä»åŸæ¥çš„æ˜¯O(n)åˆ°O(logn)ã€‚&lt;/span&gt;&lt;/p&gt;&lt;hr/&gt;&lt;h3 cid=&quot;n42&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;2. HashMapçš„hashå“ˆå¸Œå‡½æ•°çš„è®¾è®¡åŸç†ï¼Œä»¥åŠHashMapä¸‹æ ‡è·å– hash &amp;amp;ï¼ˆn - 1ï¼‰ï¼Ÿ&lt;/span&gt;&lt;br/&gt;&lt;/h3&gt;&lt;h4 cid=&quot;n43&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;hashå“ˆå¸Œå‡½æ•°çš„è®¾è®¡åŸç†&lt;/span&gt;&lt;/h4&gt;&lt;pre spellcheck=&quot;false&quot; lang=&quot;java&quot; cid=&quot;n44&quot; mdtype=&quot;fences&quot;&gt;&lt;span&gt;&lt;span role=&quot;presentation&quot;&gt;&lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; &lt;span&gt;hash&lt;/span&gt;(&lt;span&gt;Object&lt;/span&gt; &lt;span&gt;key&lt;/span&gt;) {&lt;/span&gt;&lt;br/&gt;&lt;span role=&quot;presentation&quot;&gt; Â  Â &lt;span&gt;int&lt;/span&gt; &lt;span&gt;h&lt;/span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span role=&quot;presentation&quot;&gt; Â  Â &lt;span&gt;return&lt;/span&gt; (&lt;span&gt;key&lt;/span&gt; &lt;span&gt;==&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;) &lt;span&gt;?&lt;/span&gt; &lt;span&gt;0&lt;/span&gt; : (&lt;span&gt;h&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;key&lt;/span&gt;.&lt;span&gt;hashCode&lt;/span&gt;()) &lt;span&gt;^&lt;/span&gt; (&lt;span&gt;h&lt;/span&gt; &lt;span&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span&gt;16&lt;/span&gt;);&lt;/span&gt;&lt;br/&gt;&lt;span role=&quot;presentation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.32936507936507936&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/EvicK4z5ZDriatqsuMHWsaacfH3j6lpw9YDRqM9pcmhradXMYnxd3AwDG1nKSzxeoaoZ6KEE8frPKic89rp9PhhyQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;756&quot;/&gt;&lt;/p&gt;&lt;h4 cid=&quot;n51&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;HashMapä¸‹æ ‡è·å–h % n = h &amp;amp;ï¼ˆn - 1ï¼‰&lt;/span&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.5994729907773386&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/EvicK4z5ZDriatqsuMHWsaacfH3j6lpw9YS3QHaO147Jxib8Z1r3iaZv1q9C4KE8jOqQnMia8q82GeSo0moQGiafz7eA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;759&quot;/&gt;&lt;/h4&gt;&lt;p cid=&quot;n58&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;strong&gt;è®¾è®¡åŸå› ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot; start=&quot;&quot; cid=&quot;n59&quot; mdtype=&quot;list&quot;&gt;&lt;li&gt;&lt;p cid=&quot;n61&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ä¸€å®šè¦å°½å¯èƒ½é™ä½hashç¢°æ’ï¼Œè¶Šåˆ†æ•£è¶Šå¥½ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n63&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ç®—æ³•ä¸€å®šè¦å°½å¯èƒ½é«˜æ•ˆï¼Œå› ä¸ºè¿™æ˜¯é«˜é¢‘æ“ä½œ, å› æ­¤é‡‡ç”¨ä½è¿ç®—ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p cid=&quot;n64&quot; mdtype=&quot;paragraph&quot;&gt;&lt;/p&gt;&lt;h3 cid=&quot;n65&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;3. HashMapæ‰©å®¹æœºåˆ¶resizeï¼ˆï¼‰&lt;/span&gt;&lt;/h3&gt;&lt;p cid=&quot;n66&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;strong&gt;HashMapæ‰©å®¹æ­¥éª¤åˆ†æˆä¸¤æ­¥ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;h4 cid=&quot;n73&quot; mdtype=&quot;heading&quot;&gt;&lt;span&gt;è·å–æ–°å€¼ï¼šæ–°çš„å®¹é‡å€¼newCap ï¼Œæ–°çš„æ‰©å®¹é˜€ç•Œå€¼newThrè·å–&lt;/span&gt;&lt;/h4&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cs&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;Node&amp;lt;K,V&amp;gt;[] oldTab = table;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; oldCap = (oldTab == &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;) ? &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt; : oldTab.length;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; oldThr = threshold;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; newCap, newThr = &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;threshold = newThr;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;Node&amp;lt;K,V&amp;gt;[] newTab = (Node&amp;lt;K,V&amp;gt;[])&lt;span class=&quot;code-snippet__keyword&quot;&gt;new&lt;/span&gt; Node[newCap];&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; table = newTab;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;kotlin&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (oldCap &amp;gt; &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;     &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (oldCap &amp;gt;= MAXIMUM_CAPACITY) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            threshold = Integer.MAX_VALUE;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;             &lt;span class=&quot;code-snippet__keyword&quot;&gt;return&lt;/span&gt; oldTab;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;         &lt;span class=&quot;code-snippet__keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; ((newCap = oldCap &amp;lt;&amp;lt; &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;) &amp;lt; MAXIMUM_CAPACITY &amp;amp;&amp;amp;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                   oldCap &amp;gt;= DEFAULT_INITIAL_CAPACITY)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;           newThr = oldThr &amp;lt;&amp;lt; &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;ul class=&quot;list-paddingleft-2&quot; cid=&quot;n74&quot; mdtype=&quot;list&quot; data-mark=&quot;-&quot;&gt;&lt;ul class=&quot;list-paddingleft-2&quot; cid=&quot;n81&quot; mdtype=&quot;list&quot; data-mark=&quot;-&quot;&gt;&lt;li&gt;&lt;p cid=&quot;n83&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å¦‚æœæ­¤æ—¶oldCap&amp;gt;=MAXIMUM_CAPACITY(1 &amp;lt;&amp;lt; 30)ï¼Œè¡¨ç¤ºå·²ç»åˆ°äº†æœ€å¤§å®¹é‡ï¼Œè¿™æ—¶è¿˜è¦å¾€mapä¸­putæ•°æ®ï¼Œåˆ™é˜ˆå€¼è®¾ç½®ä¸ºæ•´æ•°çš„æœ€å¤§å€¼ Integer.MAX_VALUEï¼Œç›´æ¥è¿”å›è¿™ä¸ªoldTabçš„å†…å­˜åœ°å€&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p cid=&quot;n85&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å¦‚æœæ‰©å®¹ä¹‹åçš„æ–°å®¹é‡å°äºæœ€å¤§å®¹é‡ ï¼Œä¸”è€çš„æ•°ç»„å®¹é‡å¤§äºç­‰äºé»˜è®¤åˆå§‹åŒ–å®¹é‡ï¼ˆ16ï¼‰ï¼Œé‚£ä¹ˆæ–°æ•°ç»„çš„æ‰©å®¹é˜€å€¼è®¾ç½®ä¸ºè€é˜€å€¼çš„2å€ï¼ˆå·¦ç§»1ä½ç›¸å½“äºä¹˜ä»¥2ï¼ŒnewCap = oldCap &amp;lt;&amp;lt; 1ï¼‰ï¼Œé˜ˆå€¼ä¹Ÿdoubleï¼ˆnewThr= oldThr &amp;lt;&amp;lt; 1ï¼‰;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cs&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (oldThr &amp;gt; &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;) &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;newCap = oldThr;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;....&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (newThr == &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;float&lt;/span&gt; ft = (&lt;span class=&quot;code-snippet__keyword&quot;&gt;float&lt;/span&gt;)newCap * loadFactor;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;     newThr = (newCap &amp;lt; MAXIMUM_CAPACITY &amp;amp;&amp;amp; ft &amp;lt; (&lt;span class=&quot;code-snippet__keyword&quot;&gt;float&lt;/span&gt;)MAXIMUM_CAPACITY ?&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;              (&lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt;)ft : Integer.MAX_VALUE);  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cs&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;else&lt;/span&gt; { &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;           &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;           newCap = DEFAULT_INITIAL_CAPACITY;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;           newThr = (&lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt;)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p cid=&quot;n93&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span/&gt;&lt;/p&gt;&lt;p cid=&quot;n93&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æ•°æ®è¿ç§»&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n96&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å¦‚æœoldTabè€æ•°ç»„ä¸ä¸ºç©ºï¼Œè¯´æ˜æ˜¯æ‰©å®¹æ“ä½œï¼Œé‚£ä¹ˆæ¶‰åŠåˆ°å…ƒç´ çš„è½¬ç§»æ“ï¼Œéå†è€æ•°ç»„ï¼Œå¦‚æœå½“å‰ä½ç½®å…ƒç´ ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆéœ€è¦è½¬ç§»è¯¥å…ƒç´ åˆ°æ–°æ•°ç»„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (e.next == &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;)  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;newTab[e.hash &amp;amp; (newCap - &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;)] = e;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;   &lt;span class=&quot;code-snippet__keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (e &lt;span class=&quot;code-snippet__keyword&quot;&gt;instanceof&lt;/span&gt; TreeNode)  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;          ((TreeNode&amp;lt;K,V&amp;gt;)e).split(&lt;span class=&quot;code-snippet__keyword&quot;&gt;this&lt;/span&gt;, newTab, j, oldCap);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;Node&amp;lt;K,V&amp;gt; loHead = &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;, loTail = &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;Node&amp;lt;K,V&amp;gt; hiHead = &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;, hiTail = &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;Node&amp;lt;K,V&amp;gt; next;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;/&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;do&lt;/span&gt; {  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    next = e.next;                &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; ((e.hash &amp;amp; oldCap) == &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;) {  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;         &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;         &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (loTail == &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                 loHead = e;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;          &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;          &lt;span class=&quot;code-snippet__keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;              loTail.next = e;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;          loTail = e;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;else&lt;/span&gt; {  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;              &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (hiTail == &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                      hiHead = e;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;               &lt;span class=&quot;code-snippet__keyword&quot;&gt;else&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                   hiTail.next = e;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                hiTail = e;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;} &lt;span class=&quot;code-snippet__keyword&quot;&gt;while&lt;/span&gt; ((e = next) != &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (loTail != &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;) { &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      loTail.next = &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;      newTab[j] = loHead;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (hiTail != &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;) {  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;       hiTail.next = &lt;span class=&quot;code-snippet__literal&quot;&gt;null&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;       newTab[j + oldCap] = hiHead;                  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/ul&gt;&lt;p cid=&quot;n744&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;&lt;span&gt;JDK1.8å¯¹&lt;/span&gt;&lt;code&gt;resize()&lt;/code&gt;&lt;span&gt;æ‰©å®¹æ–¹æ³•è¿›è¡Œäº†ä¼˜åŒ–ï¼Œ&lt;/span&gt;&lt;strong&gt;ç»è¿‡rehashä¹‹åï¼Œå…ƒç´ çš„ä½ç½®è¦ä¹ˆæ˜¯åœ¨åŸä½ç½®ï¼Œè¦ä¹ˆæ˜¯åœ¨åŸä½ç½®å†ç§»åŠ¨2æ¬¡å¹‚çš„ä½ç½®ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n744&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æ˜¯ä¸æ˜¯æœ‰ç‚¹ä¸æ˜ç™½å‘¢ï¼Ÿé‚£æˆ‘ä»¬æ¥ç”¨å›¾æ¥è§£æä¸€ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n746&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;ç»“åˆ&lt;code&gt;e.hash &amp;amp; oldCapn&lt;/code&gt;å–å€¼åˆ¤æ–­æ˜¯åœ¨é«˜ä½è¿˜æ˜¯åœ¨ä½ä½ï¼Œå³å¦‚å›¾ï¼ˆaï¼‰è¡¨ç¤ºæ‰©å®¹å‰çš„key1å’Œkey2ä¸¤ç§keyç¡®å®šç´¢å¼•ä½ç½®çš„ç¤ºä¾‹ï¼Œ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.27328431372549017&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/EvicK4z5ZDriatqsuMHWsaacfH3j6lpw9YBHLgyPRCRaOWZZFFF2y2Jh19A0r6BnwazHiaEAmP4sAdAcoslj6so5w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1632&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å›¾ï¼ˆbï¼‰è¡¨ç¤ºæ‰©å®¹åkey1å’Œkey2ä¸¤ç§keyç¡®å®šç´¢å¼•ï¼Œå…ƒç´ åœ¨é‡æ–°è®¡ç®—hashä¹‹åï¼Œå› ä¸ºnå˜ä¸º2å€ï¼Œé‚£ä¹ˆn-1çš„maskèŒƒå›´åœ¨é«˜ä½å¤š1bit(çº¢è‰²)ï¼Œå› æ­¤æ–°çš„indexå°±ä¼šå‘ç”Ÿè¿™æ ·çš„å˜åŒ–ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.18984962406015038&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/EvicK4z5ZDriatqsuMHWsaacfH3j6lpw9Yms5OpiboDtic3ZScNgicBBx8sgerWlElOnZQLN4p31QcQD2KVP0iahQFVQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1064&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å› æ­¤ï¼Œæˆ‘ä»¬åœ¨æ‰©å……HashMapçš„æ—¶å€™ï¼Œä¸éœ€è¦åƒJDK1.7çš„å®ç°é‚£æ ·é‡æ–°è®¡ç®—hashï¼Œåªéœ€è¦çœ‹çœ‹åŸæ¥çš„hashå€¼æ–°å¢çš„é‚£ä¸ªbitæ˜¯1è¿˜æ˜¯0å°±å¥½äº†ï¼Œæ˜¯0çš„è¯ç´¢å¼•æ²¡å˜ï¼Œæ˜¯1çš„è¯ç´¢å¼•å˜æˆâ€œ&lt;/span&gt;&lt;code&gt;&lt;span&gt;åŸç´¢å¼•+oldCap&lt;/span&gt;&lt;/code&gt;&lt;span&gt;â€ï¼Œå¯ä»¥çœ‹çœ‹ä¸‹å›¾ä¸º16æ‰©å……ä¸º32çš„resizeç¤ºæ„å›¾ï¼š&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.5757097791798107&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/EvicK4z5ZDriatqsuMHWsaacfH3j6lpw9YYvu72ssibnLME4icwlRWbWF5bVRQnXia85OleqdibVTBdPsYAzOxldBaqw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1268&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨JDK1.7ä¸­rehashæ‰©å®¹çš„æ—¶å€™ï¼Œæ—§é“¾è¡¨è¿ç§»æ–°é“¾è¡¨çš„æ—¶å€™ï¼Œå¦‚æœåœ¨æ–°è¡¨çš„æ•°ç»„ç´¢å¼•ä½ç½®ç›¸åŒçš„é“¾è¡¨å…ƒç´ ä¼šå€’ç½®ï¼Œä½†æ˜¯åœ¨JDK1.8è¿›è¡Œäº†ä¼˜åŒ–ï¼Œä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼ŒJDK1.8é“¾è¡¨å…ƒç´ ä¸ä¼šå€’ç½®ã€‚&lt;/span&gt;&lt;span&gt;å› æ­¤ä¸ä¼šå‡ºç°é“¾è¡¨æ­»å¾ªç¯çš„é—®é¢˜ã€‚&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç”±äºç¯‡å¹…è¿‡é•¿ï¼Œå°†åˆ†æˆä¸¤ç¯‡æ¥ä»‹ç»ï¼Œæ¥ä¸‹æ¥å†…å®¹çœ‹&lt;/span&gt;&lt;span&gt;ã€Šé¢è¯•ï¼šä¸ºäº†è¿›é˜¿é‡Œï¼Œå¿…é¡»æŒæ¡HashMapæºç åŸç†å’Œé¢è¯•é¢˜ï¼ˆå›¾è§£ç‰ˆäºŒï¼‰ã€‹&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n158&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;å„ä½çœ‹å®˜è¿˜å¯ä»¥å—ï¼Ÿå–œæ¬¢çš„è¯ï¼ŒåŠ¨åŠ¨æ‰‹æŒ‡ç‚¹ä¸ªå†çœ‹ğŸ’—å‘—ï¼ï¼è°¢è°¢æ”¯æŒï¼&lt;span md-inline=&quot;linebreak&quot;&gt; Â &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p cid=&quot;n158&quot; mdtype=&quot;paragraph&quot;&gt;&lt;span&gt;æ¬¢è¿æ‰«ç å…³æ³¨ï¼ŒåŸåˆ›æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨å‡º&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.36857142857142855&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;350&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/EvicK4z5ZDrgfBz2Ve78FylxcGWmXaueSuqPguurBCWEkeY1ibeLl1wlxUyibdesc4YeuiaJJjSt6HTiab2iaHyXyyicA/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>ca7b1683b01879920d7a83d2ca230803</guid>
<title>[è¯‘] ä»…ç”¨ 18 è¡Œ JavaScript æ„å»ºä¸€ä¸ªå€’æ•°è®¡æ—¶å™¨</title>
<link>https://toutiao.io/k/qijww23</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.3724053724053724&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/WYoaOn5t0ANAsyE4nMbsnrRoddRZl3UltwVTlHofjZZWC4VtyKS2BtDaLdB1cXKyZOpLj4GvWpaSntOJvYWwgw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1638&quot;/&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ¥æºï¼šhttps://www.sitepoint.comï¼Œä½œè€…ï¼šNilson Jacques&lt;/span&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç¬¬100æœŸäº†ï¼Œå›é¦ˆç²‰ä¸ï¼Œæ–‡æœ«å‚ä¸é€ä¹¦æ´»åŠ¨ï¼&lt;/span&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ‰æ—¶å€™ï¼Œä½ ä¼šéœ€è¦æ„å»ºä¸€ä¸ªJavaScriptå€’è®¡æ—¶æ—¶é’Ÿã€‚ä½ å¯èƒ½ä¼šæœ‰ä¸€ä¸ªæ´»åŠ¨ã€ä¸€ä¸ªé”€å”®ã€ä¸€ä¸ªä¿ƒé”€æˆ–ä¸€ä¸ªæ¸¸æˆã€‚ä½ å¯ä»¥ç”¨åŸç”Ÿçš„JavaScriptæ„å»ºä¸€ä¸ªæ—¶é’Ÿï¼Œè€Œä¸æ˜¯å»æ‰¾ä¸€ä¸ªæ’ä»¶ã€‚å°½ç®¡æœ‰å¾ˆå¤šå¾ˆæ£’çš„æ—¶é’Ÿæ’ä»¶ï¼Œä½†æ˜¯ä½¿ç”¨åŸç”ŸJavaScriptå¯ä»¥å¸¦æ¥ä»¥ä¸‹å¥½å¤„ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ä½ çš„ä»£ç å°†æ˜¯è½»é‡çº§çš„ï¼Œå› ä¸ºå®ƒå°†å…·æœ‰é›¶ä¾èµ–æ€§ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ä½ çš„ç½‘ç«™å°†è¡¨ç°å¾—æ›´å¥½ã€‚ä½ ä¸éœ€è¦åŠ è½½å¤–éƒ¨è„šæœ¬å’Œæ ·å¼è¡¨ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ä½ å°†æ‹¥æœ‰æ›´å¤šçš„æ§åˆ¶æƒã€‚ä½ å°†ä¼šå»ºç«‹ä¸€ä¸ªå®Œå…¨æŒ‰ç…§ä½ çš„æ„æ„¿æ¥è¡¨ç°çš„æ—¶é’Ÿã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ‰€ä»¥ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œä¸‹é¢æ˜¯å¦‚ä½•åœ¨çŸ­çŸ­çš„18è¡ŒJavaScriptä¸­åˆ¶ä½œè‡ªå·±çš„å€’è®¡æ—¶é’Ÿã€‚&lt;/span&gt;&lt;/p&gt;&lt;hr data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ç›®å½•ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;1.åŸºæœ¬æ—¶é’Ÿï¼šå€’æ•°åˆ°ç‰¹å®šçš„æ—¥æœŸæˆ–æ—¶é—´&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;2.è®¾ç½®æœ‰æ•ˆçš„ç»“æŸæ—¥æœŸ&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;3.è®¡ç®—å‰©ä½™æ—¶é—´&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;4.å°†æ—¶é—´è½¬æ¢ä¸ºå¯ç”¨æ ¼å¼&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;5.å°†æ—¶é’Ÿæ•°æ®è¾“å‡ºä¸ºå¯é‡å¤ä½¿ç”¨çš„å¯¹è±¡&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;6.åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºæ—¶é’Ÿï¼Œå¹¶åœ¨æ—¶é’Ÿä¸ºé›¶æ—¶åœæ­¢æ—¶é’Ÿ&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;7.å‡†å¤‡å±•ç¤ºä½ çš„æ—¶é’Ÿ&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;7.1 æ¶ˆé™¤åˆå§‹å»¶è¿Ÿ&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;7.2 é¿å…ä¸æ–­é‡å»ºæ—¶é’Ÿ&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;7.3 æ·»åŠ å‰å¯¼0&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;8.æ›´è¿›ä¸€æ­¥&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;8.1 è‡ªåŠ¨è°ƒèŠ‚æ—¶é’Ÿ&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;8.2 ä»ç”¨æˆ·åˆ°è¾¾èµ·å°†è®¡æ—¶å™¨è®¾ç½®ä¸º10åˆ†é’Ÿ&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;8.3 è·¨é¡µé¢ä¿æŒæ—¶é’Ÿè¿›åº¦&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;9.æœ‰å…³å®¢æˆ·ç«¯æ—¶é—´çš„é‡è¦è­¦å‘Š&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;10.æ€»ç»“&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;11.ä»£ç &lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;hr data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;1.åŸºæœ¬æ—¶é’Ÿï¼šå€’æ•°åˆ°ç‰¹å®šçš„æ—¥æœŸæˆ–æ—¶é—´&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä»¥ä¸‹æ˜¯åˆ›å»ºåŸºæœ¬æ—¶é’Ÿæ‰€éœ€æ­¥éª¤çš„ç®€è¦æ¦‚è¿°ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;è®¾ç½®æœ‰æ•ˆçš„ç»“æŸæ—¥æœŸã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;è®¡ç®—å‰©ä½™æ—¶é—´ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å°†æ—¶é—´è½¬æ¢ä¸ºå¯ç”¨æ ¼å¼ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å°†æ—¶é’Ÿæ•°æ®è¾“å‡ºä¸ºå¯é‡å¤ä½¿ç”¨çš„å¯¹è±¡ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºæ—¶é’Ÿï¼Œå¹¶åœ¨æ—¶é’Ÿä¸ºé›¶æ—¶åœæ­¢æ—¶é’Ÿã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;2.è®¾ç½®æœ‰æ•ˆçš„ç»“æŸæ—¥æœŸ&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;é¦–å…ˆï¼Œä½ éœ€è¦è®¾ç½®ä¸€ä¸ªæœ‰æ•ˆçš„ç»“æŸæ—¥æœŸã€‚è¿™åº”è¯¥æ˜¯JavaScriptçš„ Date.parse() æ–¹æ³•å¯ä»¥ç†è§£çš„ä»»ä½•æ ¼å¼çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ISO 8601æ ¼å¼ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;const&lt;/span&gt; deadline = &lt;span&gt;&#x27;2015-12-31&#x27;&lt;/span&gt;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç®€çŸ­æ ¼å¼ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;const&lt;/span&gt; deadline = &lt;span&gt;&#x27;31/12/2015&#x27;&lt;/span&gt;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æˆ–è€…ï¼Œé•¿æ ¼å¼ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;const&lt;/span&gt; deadline = &lt;span&gt;&#x27;December 31 2015&#x27;&lt;/span&gt;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¿™äº›æ ¼å¼ä¸­çš„æ¯ä¸€ç§éƒ½å…è®¸ä½ æŒ‡å®šä¸€ä¸ªå‡†ç¡®çš„æ—¶é—´å’Œä¸€ä¸ªæ—¶åŒºï¼ˆæˆ–è€…åœ¨ISOæ—¥æœŸçš„æƒ…å†µä¸‹æŒ‡å®šä¸€ä¸ªä¸UTCçš„åç§»ï¼‰ã€‚ä¾‹å¦‚ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;const&lt;/span&gt; deadline = &lt;span&gt;&#x27;December 31 2015 23:59:59 GMT+0200&#x27;&lt;/span&gt;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.è®¡ç®—å‰©ä½™æ—¶é—´&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä¸‹ä¸€æ­¥æ˜¯è®¡ç®—å‰©ä½™æ—¶é—´ã€‚æˆ‘ä»¬éœ€è¦ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°éœ€è¦ä¸€ä¸ªè¡¨ç¤ºç»™å®šç»“æŸæ—¶é—´çš„å­—ç¬¦ä¸²ï¼ˆå¦‚ä¸Šæ‰€è¿°ï¼‰ã€‚ç„¶åï¼Œæˆ‘ä»¬è®¡ç®—è¯¥æ—¶é—´ä¸å½“å‰æ—¶é—´ä¹‹é—´çš„æ—¶å·®ã€‚çœ‹èµ·æ¥åƒè¿™æ ·ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt; &lt;span&gt;getTimeRemaining&lt;/span&gt;(&lt;span&gt;endtime&lt;/span&gt;)&lt;/span&gt;{&lt;br/&gt;  &lt;span&gt;const&lt;/span&gt; total = &lt;span&gt;Date&lt;/span&gt;.parse(endtime) - &lt;span&gt;Date&lt;/span&gt;.parse(&lt;span&gt;new&lt;/span&gt; &lt;span&gt;Date&lt;/span&gt;());&lt;br/&gt;  &lt;span&gt;const&lt;/span&gt; seconds = &lt;span&gt;Math&lt;/span&gt;.floor( (total/&lt;span&gt;1000&lt;/span&gt;) % &lt;span&gt;60&lt;/span&gt; );&lt;br/&gt;  &lt;span&gt;const&lt;/span&gt; minutes = &lt;span&gt;Math&lt;/span&gt;.floor( (total/&lt;span&gt;1000&lt;/span&gt;/&lt;span&gt;60&lt;/span&gt;) % &lt;span&gt;60&lt;/span&gt; );&lt;br/&gt;  &lt;span&gt;const&lt;/span&gt; hours = &lt;span&gt;Math&lt;/span&gt;.floor( (total/(&lt;span&gt;1000&lt;/span&gt;*&lt;span&gt;60&lt;/span&gt;*&lt;span&gt;60&lt;/span&gt;)) % &lt;span&gt;24&lt;/span&gt; );&lt;br/&gt;  &lt;span&gt;const&lt;/span&gt; days = &lt;span&gt;Math&lt;/span&gt;.floor( total/(&lt;span&gt;1000&lt;/span&gt;*&lt;span&gt;60&lt;/span&gt;*&lt;span&gt;60&lt;/span&gt;*&lt;span&gt;24&lt;/span&gt;) );&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;return&lt;/span&gt; {&lt;br/&gt;    total,&lt;br/&gt;    days,&lt;br/&gt;    hours,&lt;br/&gt;    minutes,&lt;br/&gt;    seconds&lt;br/&gt;  };&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;é¦–å…ˆï¼Œæˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªå˜é‡ &lt;/span&gt;&lt;code&gt;&lt;span&gt;total&lt;/span&gt;&lt;/code&gt;&lt;span&gt; ä»¥ä¿ç•™åˆ°æˆªæ­¢æ—¥æœŸä¸ºæ­¢çš„å‰©ä½™æ—¶é—´ã€‚&lt;/span&gt;&lt;code&gt;&lt;span&gt;Date.parse()&lt;/span&gt;&lt;/code&gt;&lt;span&gt; å‡½æ•°å°†æ—¶é—´å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ¯«ç§’å€¼ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å°†ä¸¤æ¬¡ç›¸å‡ï¼Œå¾—åˆ°ä¸­é—´çš„æ—¶é—´é‡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;const&lt;/span&gt; total = &lt;span&gt;Date&lt;/span&gt;.parse(endtime) - &lt;span&gt;Date&lt;/span&gt;.parse(&lt;span&gt;new&lt;/span&gt; &lt;span&gt;Date&lt;/span&gt;());&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.å°†æ—¶é—´è½¬æ¢ä¸ºå¯ç”¨æ ¼å¼&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç°åœ¨æˆ‘ä»¬è¦å°†æ¯«ç§’è½¬æ¢ä¸ºå¤©ï¼Œå°æ—¶ï¼Œåˆ†é’Ÿå’Œç§’ã€‚è®©æˆ‘ä»¬ä»¥ç§’ä¸ºä¾‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;const&lt;/span&gt; seconds = &lt;span&gt;Math&lt;/span&gt;.floor( (t/&lt;span&gt;1000&lt;/span&gt;) % &lt;span&gt;60&lt;/span&gt; );&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è®©æˆ‘ä»¬åˆ†è§£ä¸€ä¸‹è¿™é‡Œå‘ç”Ÿçš„äº‹æƒ…ã€‚&lt;/span&gt;&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å°†æ¯«ç§’é™¤ä»¥1000å¯è½¬æ¢ä¸ºç§’ï¼š&lt;/span&gt;&lt;code&gt;&lt;span&gt;(t/1000)&lt;/span&gt;&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å°†æ€»ç§’æ•°é™¤ä»¥60ï¼Œç„¶åå–ä½™æ•°ã€‚ä½ ä¸éœ€è¦æ‰€æœ‰çš„ç§’ï¼Œåªéœ€è¦è®¡ç®—åˆ†é’Ÿæ•°åå‰©ä¸‹çš„é‚£äº›ï¼š&lt;/span&gt;&lt;code&gt;&lt;span&gt;(t/1000) % 60&lt;/span&gt;&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å››èˆäº”å…¥åˆ°æœ€æ¥è¿‘çš„æ•´æ•°ã€‚è¿™æ˜¯å› ä¸ºä½ éœ€è¦å®Œæ•´çš„ç§’æ•°ï¼Œè€Œä¸æ˜¯å‡ åˆ†ä¹‹ä¸€ç§’ï¼š&lt;/span&gt;&lt;code&gt;&lt;span&gt;Math.floor((t/1000)ï¼…60)&lt;/span&gt;&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;é‡å¤æ­¤é€»è¾‘ï¼Œå°†æ¯«ç§’è½¬æ¢ä¸ºåˆ†é’Ÿï¼Œå°æ—¶å’Œå¤©ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;mpcpc js_editor_cpcad=&quot;&quot; class=&quot;js_cpc_area cpc_iframe&quot; src=&quot;/cgi-bin/readtemplate?t=tmpl/cpc_tmpl#1600180410767&quot; data-category_id_list=&quot;1|11|16|17|22|24|26|27|28|29|3|31|32|35|36|37|39|41|42|43|45|46|47|48|49|5|50|51|52|53|54|55|6|7|8&quot; data-id=&quot;1600180410767&quot;/&gt;&lt;span/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;5.å°†æ—¶é’Ÿæ•°æ®è¾“å‡ºä¸ºå¯é‡å¤ä½¿ç”¨çš„å¯¹è±¡&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;åœ¨å‡†å¤‡å¥½å‡ å¤©ï¼Œå‡ å°æ—¶ï¼Œå‡ åˆ†é’Ÿå’Œå‡ ç§’é’Ÿä¹‹åï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥å°†æ•°æ®ä½œä¸ºå¯é‡å¤ä½¿ç”¨çš„å¯¹è±¡è¿”å›ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;return&lt;/span&gt; {&lt;br/&gt;  total,&lt;br/&gt;  days,&lt;br/&gt;  hours,&lt;br/&gt;  minutes,&lt;br/&gt;  seconds&lt;br/&gt;};&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¿™ä¸ªå¯¹è±¡å…è®¸ä½ è°ƒç”¨ä½ çš„å‡½æ•°ï¼Œå¹¶è·å¾—ä»»ä½•è®¡ç®—å€¼ã€‚è¿™æ˜¯å¦‚ä½•è·å–å‰©ä½™åˆ†é’Ÿæ•°çš„ç¤ºä¾‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;getTimeRemaining(deadline).minutes&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ–¹ä¾¿å§ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;6.åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºæ—¶é’Ÿï¼Œå¹¶åœ¨æ—¶é’Ÿä¸ºé›¶æ—¶åœæ­¢æ—¶é’Ÿ&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸€ä¸ªå¯ä»¥åå‡ºå‰©ä½™å¤©æ•°ã€å°æ—¶ã€åˆ†é’Ÿå’Œç§’æ•°çš„å‡½æ•°ï¼Œæˆ‘ä»¬å°±å¯ä»¥å»ºç«‹æˆ‘ä»¬çš„æ—¶é’Ÿäº†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†åˆ›å»ºä»¥ä¸‹HTMLå…ƒç´ æ¥ä¿å­˜æ—¶é’Ÿï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;&lt;span&gt;div&lt;/span&gt; &lt;span&gt;id&lt;/span&gt;=&lt;span&gt;&quot;clockdiv&quot;&lt;/span&gt;&amp;gt;&amp;lt;/&lt;span&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç„¶åï¼Œæˆ‘ä»¬å°†ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨æ–°çš„divä¸­è¾“å‡ºæ—¶é’Ÿæ•°æ®ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt; &lt;span&gt;initializeClock&lt;/span&gt;(&lt;span&gt;id, endtime&lt;/span&gt;) &lt;/span&gt;{&lt;br/&gt;  &lt;span&gt;const&lt;/span&gt; clock = &lt;span&gt;document&lt;/span&gt;.getElementById(id);&lt;br/&gt;  &lt;span&gt;const&lt;/span&gt; timeinterval = setInterval(&lt;span&gt;&lt;span&gt;()&lt;/span&gt; =&amp;gt;&lt;/span&gt; {&lt;br/&gt;    &lt;span&gt;const&lt;/span&gt; t = getTimeRemaining(endtime);&lt;br/&gt;    clock.innerHTML = &lt;span&gt;&#x27;days: &#x27;&lt;/span&gt; + t.days + &lt;span&gt;&#x27;&amp;lt;br&amp;gt;&#x27;&lt;/span&gt; +&lt;br/&gt;                      &lt;span&gt;&#x27;hours: &#x27;&lt;/span&gt;+ t.hours + &lt;span&gt;&#x27;&amp;lt;br&amp;gt;&#x27;&lt;/span&gt; +&lt;br/&gt;                      &lt;span&gt;&#x27;minutes: &#x27;&lt;/span&gt; + t.minutes + &lt;span&gt;&#x27;&amp;lt;br&amp;gt;&#x27;&lt;/span&gt; +&lt;br/&gt;                      &lt;span&gt;&#x27;seconds: &#x27;&lt;/span&gt; + t.seconds;&lt;br/&gt;    &lt;span&gt;if&lt;/span&gt; (t.total &amp;lt;= &lt;span&gt;0&lt;/span&gt;) {&lt;br/&gt;      clearInterval(timeinterval);&lt;br/&gt;    }&lt;br/&gt;  },&lt;span&gt;1000&lt;/span&gt;);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¯¥å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œè¿™ä¸¤ä¸ªå‚æ•°æ˜¯åŒ…å«æ—¶é’Ÿçš„å…ƒç´ çš„idï¼Œä»¥åŠå€’è®¡æ—¶çš„ç»“æŸæ—¶é—´ã€‚åœ¨å‡½æ•°å†…éƒ¨ï¼Œæˆ‘ä»¬å°†å£°æ˜ä¸€ä¸ª &lt;/span&gt;&lt;code&gt;&lt;span&gt;clock&lt;/span&gt;&lt;/code&gt;&lt;span&gt; å˜é‡ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥ä¿å­˜å¯¹æ—¶é’Ÿå®¹å™¨divçš„å¼•ç”¨ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¸å¿…ä¸€ç›´æŸ¥è¯¢DOMã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ &lt;/span&gt;&lt;code&gt;&lt;span&gt;setInterval&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ¯ç§’æ‰§è¡Œä¸€ä¸ªåŒ¿åå‡½æ•°ã€‚æ­¤åŠŸèƒ½å°†æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;è®¡ç®—å‰©ä½™æ—¶é—´ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å°†å‰©ä½™æ—¶é—´è¾“å‡ºåˆ°æˆ‘ä»¬çš„divã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å¦‚æœå‰©ä½™æ—¶é—´ä¸ºé›¶åœæ­¢è®¡æ—¶ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ­¤æ—¶ï¼Œå‰©ä¸‹çš„å”¯ä¸€æ­¥éª¤æ˜¯åƒè¿™æ ·è¿è¡Œæ—¶é’Ÿï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;initializeClock(&lt;span&gt;&#x27;clockdiv&#x27;&lt;/span&gt;, deadline);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ­å–œä½ ï¼ç°åœ¨ï¼Œä½ ä»…ç”¨18è¡ŒJavaScriptå°±æ‹¥æœ‰äº†ä¸€ä¸ªåŸºæœ¬æ—¶é’Ÿã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;7.å‡†å¤‡å±•ç¤ºä½ çš„æ—¶é’Ÿ&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;åœ¨è®¾ç½®æ—¶é’Ÿæ ·å¼ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€äº›æ”¹è¿›ã€‚&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æ¶ˆé™¤åˆå§‹å»¶è¿Ÿï¼Œä½¿ä½ çš„æ—¶é’Ÿç«‹å³æ˜¾ç¤ºã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;è®©æ—¶é’Ÿè„šæœ¬æ›´æœ‰æ•ˆç‡ï¼Œè¿™æ ·å®ƒå°±ä¸ä¼šè¿ç»­é‡å»ºæ•´ä¸ªæ—¶é’Ÿã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æ ¹æ®éœ€è¦æ·»åŠ å‰å¯¼é›¶ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;7.1 æ¶ˆé™¤åˆå§‹å»¶è¿Ÿ&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;åœ¨æ—¶é’Ÿä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ &lt;/span&gt;&lt;code&gt;&lt;span&gt;setInterval&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ¯ç§’æ›´æ–°ä¸€æ¬¡æ˜¾ç¤ºã€‚å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™å¾ˆå¥½ï¼Œé™¤éåœ¨å¼€å§‹æ—¶ä¼šæœ‰ä¸€ç§’é’Ÿçš„å»¶è¿Ÿã€‚è¦æ¶ˆé™¤æ­¤å»¶è¿Ÿï¼Œæˆ‘ä»¬å¿…é¡»åœ¨é—´éš”å¼€å§‹ä¹‹å‰æ›´æ–°ä¸€æ¬¡æ—¶é’Ÿã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è®©æˆ‘ä»¬å°†ä¼ é€’ç»™ &lt;/span&gt;&lt;code&gt;&lt;span&gt;setInterval&lt;/span&gt;&lt;/code&gt;&lt;span&gt; çš„åŒ¿åå‡½æ•°ç§»åˆ°å…¶è‡ªå·±çš„å•ç‹¬å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ­¤å‡½æ•°å‘½åä¸º &lt;/span&gt;&lt;code&gt;&lt;span&gt;updateClock&lt;/span&gt;&lt;/code&gt;&lt;span&gt;ã€‚åœ¨ &lt;/span&gt;&lt;code&gt;&lt;span&gt;setInterval&lt;/span&gt;&lt;/code&gt;&lt;span&gt; å¤–è°ƒç”¨ä¸€æ¬¡ &lt;/span&gt;&lt;code&gt;&lt;span&gt;updateClock&lt;/span&gt;&lt;/code&gt;&lt;span&gt; å‡½æ•°ï¼Œç„¶ååœ¨ &lt;/span&gt;&lt;code&gt;&lt;span&gt;setInterval&lt;/span&gt;&lt;/code&gt;&lt;span&gt; å†…å†æ¬¡è°ƒç”¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;åœ¨ä½ çš„JavaScriptä¸­ï¼Œæ›¿æ¢è¿™ä¸ª&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;const&lt;/span&gt; timeinterval = setInterval(&lt;span&gt;&lt;span&gt;()&lt;/span&gt; =&amp;gt;&lt;/span&gt; { ... },&lt;span&gt;1000&lt;/span&gt;);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ–°ä»£ç &lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt; &lt;span&gt;updateClock&lt;/span&gt;()&lt;/span&gt;{&lt;br/&gt;  &lt;span&gt;const&lt;/span&gt; t = getTimeRemaining(endtime);&lt;br/&gt;  clock.innerHTML = &lt;span&gt;&#x27;days: &#x27;&lt;/span&gt; + t.days + &lt;span&gt;&#x27;&amp;lt;br&amp;gt;&#x27;&lt;/span&gt; +&lt;br/&gt;                    &lt;span&gt;&#x27;hours: &#x27;&lt;/span&gt;+ t.hours + &lt;span&gt;&#x27;&amp;lt;br&amp;gt;&#x27;&lt;/span&gt; +&lt;br/&gt;                    &lt;span&gt;&#x27;minutes: &#x27;&lt;/span&gt; + t.minutes + &lt;span&gt;&#x27;&amp;lt;br&amp;gt;&#x27;&lt;/span&gt; +&lt;br/&gt;                    &lt;span&gt;&#x27;seconds: &#x27;&lt;/span&gt; + t.seconds;&lt;br/&gt;  &lt;span&gt;if&lt;/span&gt; (t.total &amp;lt;= &lt;span&gt;0&lt;/span&gt;) {&lt;br/&gt;    clearInterval(timeinterval);&lt;br/&gt;  }&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;updateClock(); &lt;span&gt;// é¦–å…ˆè¿è¡Œä¸€å‡½æ•°èƒ½ä»¥é¿å…å»¶è¿Ÿ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;var&lt;/span&gt; timeinterval = setInterval(updateClock,&lt;span&gt;1000&lt;/span&gt;);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;7.2 é¿å…ä¸æ–­é‡å»ºæ—¶é’Ÿ&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æˆ‘ä»¬éœ€è¦ä½¿æ—¶é’Ÿè„šæœ¬æ›´é«˜æ•ˆï¼Œæˆ‘ä»¬åªæƒ³æ›´æ–°æ—¶é’Ÿä¸­çš„æ•°å­—ï¼Œè€Œä¸æ˜¯æ¯ç§’é‡å»ºæ•´ä¸ªæ—¶é’Ÿã€‚å®ç°æ­¤ç›®çš„çš„ä¸€ç§æ–¹æ³•æ˜¯å°†æ¯ä¸ªæ•°å­—æ”¾åœ¨ &lt;/span&gt;&lt;code&gt;&lt;span&gt;span&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ ‡ç­¾å†…ï¼Œå¹¶ä»…æ›´æ–°è¿™äº› &lt;/span&gt;&lt;code&gt;&lt;span&gt;span&lt;/span&gt;&lt;/code&gt;&lt;span&gt; çš„å†…å®¹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¿™æ˜¯HTMLï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&amp;lt;&lt;span&gt;div&lt;/span&gt; &lt;span&gt;id&lt;/span&gt;=&lt;span&gt;&quot;clockdiv&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    Days: &lt;span&gt;&amp;lt;&lt;span&gt;span&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;=&lt;span&gt;&quot;days&quot;&lt;/span&gt;&amp;gt;&amp;lt;/&lt;span&gt;span&lt;/span&gt;&amp;gt;&amp;lt;&lt;span&gt;br&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    Hours: &lt;span&gt;&amp;lt;&lt;span&gt;span&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;=&lt;span&gt;&quot;hours&quot;&lt;/span&gt;&amp;gt;&amp;lt;/&lt;span&gt;span&lt;/span&gt;&amp;gt;&amp;lt;&lt;span&gt;br&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    Minutes: &lt;span&gt;&amp;lt;&lt;span&gt;span&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;=&lt;span&gt;&quot;minutes&quot;&lt;/span&gt;&amp;gt;&amp;lt;/&lt;span&gt;span&lt;/span&gt;&amp;gt;&amp;lt;&lt;span&gt;br&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;    Seconds: &lt;span&gt;&amp;lt;&lt;span&gt;span&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;=&lt;span&gt;&quot;seconds&quot;&lt;/span&gt;&amp;gt;&amp;lt;/&lt;span&gt;span&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;div&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç°åœ¨è®©æˆ‘ä»¬å‚è€ƒè¿™äº›å…ƒç´ ã€‚åœ¨å®šä¹‰ &lt;/span&gt;&lt;code&gt;&lt;span&gt;clock&lt;/span&gt;&lt;/code&gt;&lt;span&gt; å˜é‡çš„ä½ç½®ä¹‹åæ·»åŠ ä»¥ä¸‹ä»£ç &lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;const&lt;/span&gt; daysSpan = clock.querySelector(&lt;span&gt;&#x27;.days&#x27;&lt;/span&gt;);&lt;br/&gt;&lt;span&gt;const&lt;/span&gt; hoursSpan = clock.querySelector(&lt;span&gt;&#x27;.hours&#x27;&lt;/span&gt;);&lt;br/&gt;&lt;span&gt;const&lt;/span&gt; minutesSpan = clock.querySelector(&lt;span&gt;&#x27;.minutes&#x27;&lt;/span&gt;);&lt;br/&gt;&lt;span&gt;const&lt;/span&gt; secondsSpan = clock.querySelector(&lt;span&gt;&#x27;.seconds&#x27;&lt;/span&gt;);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ &lt;/span&gt;&lt;code&gt;&lt;span&gt;updateClock&lt;/span&gt;&lt;/code&gt;&lt;span&gt; å‡½æ•°ï¼Œä½¿å…¶åªæ›´æ–°æ•°å­—ã€‚æ–°çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt; &lt;span&gt;updateClock&lt;/span&gt;()&lt;/span&gt;{&lt;br/&gt;    &lt;span&gt;const&lt;/span&gt; t = getTimeRemaining(endtime);&lt;br/&gt;&lt;br/&gt;    daysSpan.innerHTML = t.days;&lt;br/&gt;    hoursSpan.innerHTML = t.hours;&lt;br/&gt;    minutesSpan.innerHTML = t.minutes;&lt;br/&gt;    secondsSpan.innerHTML = t.seconds;&lt;br/&gt;&lt;br/&gt;    ...&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;7.3 æ·»åŠ å‰å¯¼0&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç°åœ¨æ—¶é’Ÿä¸å†æ¯ç§’éƒ½åœ¨é‡å»ºï¼Œæˆ‘ä»¬è¿˜æœ‰å¦ä¸€ä»¶äº‹è¦åšï¼šæ·»åŠ å‰å¯¼é›¶ã€‚ä¾‹å¦‚ï¼Œä¸æ˜¯è®©æ—¶é’Ÿæ˜¾ç¤º7ç§’ï¼Œè€Œæ˜¯æ˜¾ç¤º07ç§’ã€‚ä¸€ç§ç®€å•çš„æ–¹æ³•æ˜¯åœ¨ä¸€ä¸ªæ•°çš„å¼€å¤´åŠ ä¸Šä¸€ä¸²â€œ0â€ï¼Œç„¶ååˆ‡æ‰æœ€åä¸¤ä¸ªæ•°å­—ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä¾‹å¦‚ï¼Œè¦åœ¨â€œsecondsâ€å€¼ä¸Šæ·»åŠ å‰å¯¼é›¶ï¼Œä½ å¯ä»¥æ›´æ”¹ä»¥ä¸‹è®¾ç½®ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;secondsSpan.innerHTML = t.seconds;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä¸º&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;secondsSpan.innerHTML = (&lt;span&gt;&#x27;0&#x27;&lt;/span&gt; + t.seconds).slice(&lt;span&gt;-2&lt;/span&gt;);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å¦‚æœä½ æ„¿æ„ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨åˆ†é’Ÿå’Œå°æ—¶çš„å‰é¢åŠ é›¶ã€‚å¦‚æœä½ å·²ç»èµ°åˆ°è¿™ä¸€æ­¥ï¼Œæ­å–œä½ ï¼ä½ çš„æ—¶é’Ÿç°åœ¨å·²ç»å¯ä»¥æ˜¾ç¤ºäº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;mpcpc js_editor_cpcad=&quot;&quot; class=&quot;js_cpc_area cpc_iframe&quot; src=&quot;/cgi-bin/readtemplate?t=tmpl/cpc_tmpl#1600180422775&quot; data-category_id_list=&quot;1|11|16|17|22|24|26|27|28|29|3|31|32|35|36|37|39|41|42|43|45|46|47|48|49|5|50|51|52|53|54|55|6|7|8&quot; data-id=&quot;1600180422775&quot;/&gt;&lt;span/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;8.æ›´è¿›ä¸€æ­¥&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºäº†å¦‚ä½•ä¸ºæŸäº›ç”¨ä¾‹æ‰©å±•æ—¶é’Ÿã€‚å®ƒä»¬éƒ½æ˜¯åŸºäºä¸Šé¢çš„åŸºæœ¬ä¾‹å­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;8.1 è‡ªåŠ¨è°ƒèŠ‚æ—¶é’Ÿ&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å‡è®¾æˆ‘ä»¬æƒ³è®©æ—¶é’Ÿåœ¨ç‰¹å®šçš„æ—¥å­å‡ºç°ï¼Œè€Œä¸æ˜¯åœ¨å…¶ä»–çš„æ—¥å­ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯èƒ½æœ‰ä¸€ç³»åˆ—äº‹ä»¶å³å°†å‘ç”Ÿï¼Œè€Œä¸å¸Œæœ›æ¯æ¬¡éƒ½æ‰‹åŠ¨æ›´æ–°æ—¶é’Ÿã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•æå‰å®‰æ’äº‹æƒ…çš„æ–¹æ³•ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;é€šè¿‡åœ¨CSSä¸­å°†å…¶ &lt;/span&gt;&lt;code&gt;&lt;span&gt;display&lt;/span&gt;&lt;/code&gt;&lt;span&gt; å±æ€§è®¾ç½®ä¸º &lt;/span&gt;&lt;code&gt;&lt;span&gt;none&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ¥éšè—æ—¶é’Ÿï¼Œç„¶åå°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ° &lt;/span&gt;&lt;code&gt;&lt;span&gt;initializeClock&lt;/span&gt;&lt;/code&gt;&lt;span&gt; å‡½æ•°ä¸­ï¼ˆä»¥ &lt;/span&gt;&lt;code&gt;&lt;span&gt;var clock&lt;/span&gt;&lt;/code&gt;&lt;span&gt; å¼€å¤´çš„è¡Œä¹‹åï¼‰ã€‚è¿™å°†å¯¼è‡´åªæœ‰åœ¨è°ƒç”¨ &lt;/span&gt;&lt;code&gt;&lt;span&gt;initializeClock&lt;/span&gt;&lt;/code&gt;&lt;span&gt; å‡½æ•°åæ‰ä¼šæ˜¾ç¤ºæ—¶é’Ÿï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;clock.style.display = &lt;span&gt;&#x27;block&#x27;&lt;/span&gt;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šæ˜¾ç¤ºæ—¶é’Ÿçš„æ—¥æœŸã€‚è¿™å°†æ›¿æ¢æˆªæ­¢æ—¥æœŸå˜é‡ï¼ˆ &lt;/span&gt;&lt;code&gt;&lt;span&gt;deadline&lt;/span&gt;&lt;/code&gt;&lt;span&gt; ï¼‰ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;const&lt;/span&gt; schedule = [&lt;br/&gt;    [&lt;span&gt;&#x27;Jul 25 2015&#x27;&lt;/span&gt;, &lt;span&gt;&#x27;Sept 20 2015&#x27;&lt;/span&gt;],&lt;br/&gt;    [&lt;span&gt;&#x27;Sept 21 2015&#x27;&lt;/span&gt;, &lt;span&gt;&#x27;Jul 25 2016&#x27;&lt;/span&gt;],&lt;br/&gt;    [&lt;span&gt;&#x27;Jul 25 2016&#x27;&lt;/span&gt;, &lt;span&gt;&#x27;Jul 25 2030&#x27;&lt;/span&gt;]&lt;br/&gt;];&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Schedule&lt;/code&gt;&lt;span&gt;æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä¸€ä¸ªå¼€å§‹æ—¥æœŸå’Œä¸€ä¸ªç»“æŸæ—¥æœŸã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œå®ƒå¯ä»¥åŒ…å«æ—¶é—´å’Œæ—¶åŒºï¼Œä½†æˆ‘åœ¨è¿™é‡Œä½¿ç”¨äº†æ™®é€šçš„æ—¥æœŸï¼Œä»¥ä¿æŒä»£ç çš„å¯è¯»æ€§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ€åï¼Œå½“ç”¨æˆ·åŠ è½½é¡µé¢æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ£€æŸ¥æ˜¯å¦åœ¨æŒ‡å®šçš„æ—¶é—´èŒƒå›´å†…ã€‚æ­¤ä»£ç åº”æ›¿æ¢å…ˆå‰å¯¹ &lt;/span&gt;&lt;code&gt;&lt;span&gt;initializeClock&lt;/span&gt;&lt;/code&gt;&lt;span&gt; å‡½æ•°çš„è°ƒç”¨ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;// éå†scheduleä¸­çš„æ¯ä¸ªå…ƒç´ &lt;/span&gt;&lt;br/&gt;schedule.forEach(&lt;span&gt;(&lt;span&gt;[startDate, endDate]&lt;/span&gt;) =&amp;gt;&lt;/span&gt; {&lt;br/&gt;  &lt;span&gt;// ä»¥æ¯«ç§’ä¸ºå•ä½æ”¾ç½®æ—¥æœŸä»¥ä¾¿äºæ¯”è¾ƒ&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;const&lt;/span&gt; startMs = &lt;span&gt;Date&lt;/span&gt;.parse(startDate);&lt;br/&gt;  &lt;span&gt;const&lt;/span&gt; endMs = &lt;span&gt;Date&lt;/span&gt;.parse(endDate);&lt;br/&gt;  &lt;span&gt;const&lt;/span&gt; currentMs = &lt;span&gt;Date&lt;/span&gt;.parse(&lt;span&gt;new&lt;/span&gt; &lt;span&gt;Date&lt;/span&gt;());&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;// å¦‚æœå½“å‰æ—¥æœŸåœ¨å¼€å§‹æ—¥æœŸå’Œç»“æŸæ—¥æœŸä¹‹é—´ï¼Œåˆ™æ˜¾ç¤ºæ—¶é’Ÿ&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;if&lt;/span&gt; (endMs &amp;gt; currentMs &amp;amp;&amp;amp; currentMs &amp;gt;= startMs ) {&lt;br/&gt;    initializeClock(&lt;span&gt;&#x27;clockdiv&#x27;&lt;/span&gt;, endDate);&lt;br/&gt;  }&lt;br/&gt;});&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç°åœ¨ï¼Œä½ å¯ä»¥æå‰å®‰æ’ä½ çš„æ—¶é’Ÿï¼Œè€Œä¸å¿…æ‰‹åŠ¨æ›´æ–°å®ƒã€‚å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥ç¼©çŸ­ä»£ç ã€‚ä¸ºäº†ä¾¿äºé˜…è¯»ï¼Œæˆ‘æŠŠæˆ‘çš„ä»£ç å†™å¾—å¾ˆå•°å—¦ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;8.2 ä»ç”¨æˆ·åˆ°è¾¾èµ·å°†è®¡æ—¶å™¨è®¾ç½®ä¸º10åˆ†é’Ÿ&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç”¨æˆ·åˆ°è¾¾æˆ–å¼€å§‹ç‰¹å®šä»»åŠ¡åï¼Œæœ‰å¿…è¦åœ¨ç»™å®šçš„æ—¶é—´å†…è®¾ç½®å€’è®¡æ—¶ã€‚æˆ‘ä»¬å°†åœ¨æ­¤å¤„å°†è®¡æ—¶å™¨è®¾ç½®ä¸º10åˆ†é’Ÿï¼Œä½†æ˜¯ä½ å¯ä»¥ä½¿ç”¨ä»»æ„æ—¶é—´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯ç”¨ä»¥ä¸‹å‘½ä»¤æ›¿æ¢ &lt;/span&gt;&lt;code&gt;&lt;span&gt;deadline&lt;/span&gt;&lt;/code&gt;&lt;span&gt; å˜é‡ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;const&lt;/span&gt; timeInMinutes = &lt;span&gt;10&lt;/span&gt;;&lt;br/&gt;&lt;span&gt;const&lt;/span&gt; currentTime = &lt;span&gt;Date&lt;/span&gt;.parse(&lt;span&gt;new&lt;/span&gt; &lt;span&gt;Date&lt;/span&gt;());&lt;br/&gt;&lt;span&gt;const&lt;/span&gt; deadline = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;Date&lt;/span&gt;(currentTime + timeInMinutes*&lt;span&gt;60&lt;/span&gt;*&lt;span&gt;1000&lt;/span&gt;);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¿™æ®µä»£ç ä»¥å½“å‰æ—¶é—´ä¸ºåŸºå‡†ï¼Œå¢åŠ 10åˆ†é’Ÿã€‚è¿™äº›å€¼å°†è½¬æ¢ä¸ºæ¯«ç§’ï¼Œå› æ­¤å¯ä»¥å°†å®ƒä»¬åŠ åœ¨ä¸€èµ·å¹¶å˜æˆæ–°çš„æˆªæ­¢æ—¥æœŸã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªæ—¶é’Ÿï¼Œä»ç”¨æˆ·åˆ°è¾¾æ—¶å¼€å§‹å€’è®¡æ—¶ååˆ†é’Ÿï¼Œä½ å¯ä»¥è‡ªç”±å‘æŒ¥ï¼Œå°è¯•ä¸åŒçš„æ—¶é—´é•¿åº¦ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;8.3 è·¨é¡µé¢ä¿æŒæ—¶é’Ÿè¿›åº¦&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ‰æ—¶ï¼Œé™¤äº†å½“å‰é¡µé¢å¤–ï¼Œè¿˜éœ€è¦ä¿ç•™æ—¶é’ŸçŠ¶æ€ã€‚å¦‚æœæˆ‘ä»¬æƒ³åœ¨æ•´ä¸ªç½‘ç«™ä¸Šè®¾ç½®10åˆ†é’Ÿçš„è®¡æ—¶å™¨ï¼Œåˆ™æˆ‘ä»¬ä¸å¸Œæœ›åœ¨ç”¨æˆ·è½¬åˆ°å…¶ä»–é¡µé¢æ—¶é‡ç½®è¯¥è®¡æ—¶å™¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä¸€ä¸ªè§£å†³æ–¹æ¡ˆæ˜¯å°†æ—¶é’Ÿçš„ç»“æŸæ—¶é—´ä¿å­˜åœ¨ä¸€ä¸ªcookieä¸­ã€‚è¿™æ ·ä¸€æ¥ï¼Œå¯¼èˆªåˆ°ä¸€ä¸ªæ–°çš„é¡µé¢å°±ä¸ä¼šæŠŠç»“æŸæ—¶é—´é‡ç½®åˆ°ååˆ†é’Ÿä»¥åã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¿™æ˜¯é€»è¾‘ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å¦‚æœCookieä¸­è®°å½•äº†æˆªæ­¢æ—¥æœŸï¼Œä½¿ç”¨è¯¥æˆªæ­¢æ—¥æœŸã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å¦‚æœä¸å­˜åœ¨Cookieï¼Œè¯·è®¾ç½®ä¸€ä¸ªæ–°çš„æˆªæ­¢æ—¥æœŸå¹¶å°†å…¶å­˜å‚¨åœ¨Cookieä¸­ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¦å®ç°è¿™ä¸€ç‚¹ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›¿æ¢ &lt;/span&gt;&lt;code&gt;&lt;span&gt;deadline&lt;/span&gt;&lt;/code&gt;&lt;span&gt; å˜é‡ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;let&lt;/span&gt; deadline;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// å¦‚æœæœ‰ä¸€ä¸ªåä¸ºmyClockçš„cookieï¼Œåˆ™ä½¿ç”¨è¯¥å€¼ä½œä¸ºæˆªæ­¢æ—¥æœŸ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;(&lt;span&gt;document&lt;/span&gt;.cookie &amp;amp;&amp;amp; &lt;span&gt;document&lt;/span&gt;.cookie.match(&lt;span&gt;&#x27;myClock&#x27;&lt;/span&gt;)){&lt;br/&gt;  &lt;span&gt;// ä»Cookieè·å–æˆªæ­¢æ—¥æœŸå€¼&lt;/span&gt;&lt;br/&gt;  deadline = &lt;span&gt;document&lt;/span&gt;.cookie.match(&lt;span&gt;/(^|;)myClock=([^;]+)/&lt;/span&gt;)[&lt;span&gt;2&lt;/span&gt;];&lt;br/&gt;} &lt;span&gt;else&lt;/span&gt; {&lt;br/&gt;  &lt;span&gt;// å¦åˆ™ï¼Œè¯·è®¾ç½®ä»ç°åœ¨å¼€å§‹10åˆ†é’Ÿçš„æˆªæ­¢æ—¥æœŸï¼Œ&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;// å°†å…¶ä¿å­˜åœ¨å…·æœ‰è¯¥åç§°çš„cookieä¸­&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;// åˆ›å»ºä»ç°åœ¨å¼€å§‹10åˆ†é’Ÿçš„æˆªæ­¢æ—¥æœŸ&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;const&lt;/span&gt; timeInMinutes = &lt;span&gt;10&lt;/span&gt;;&lt;br/&gt;  &lt;span&gt;const&lt;/span&gt; currentTime = &lt;span&gt;Date&lt;/span&gt;.parse(&lt;span&gt;new&lt;/span&gt; &lt;span&gt;Date&lt;/span&gt;());&lt;br/&gt;  deadline = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;Date&lt;/span&gt;(currentTime + timeInMinutes*&lt;span&gt;60&lt;/span&gt;*&lt;span&gt;1000&lt;/span&gt;);&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;// å°†æˆªæ­¢æ—¥æœŸå­˜å‚¨åœ¨cookieä¸­ä»¥ä¾›å°†æ¥å¼•ç”¨&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;document&lt;/span&gt;.cookie = &lt;span&gt;&#x27;myClock=&#x27;&lt;/span&gt; + deadline + &lt;span&gt;&#x27;; path=/; domain=.yourdomain.com&#x27;&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½ éœ€è¦å°† &lt;/span&gt;&lt;code&gt;&lt;span&gt;.yourdomain.com&lt;/span&gt;&lt;/code&gt;&lt;span&gt; æ”¹ä¸ºä½ çš„å®é™…åŸŸåã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;9.æœ‰å…³å®¢æˆ·ç«¯æ—¶é—´çš„é‡è¦è­¦å‘Š&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;JavaScriptæ—¥æœŸå’Œæ—¶é—´æ˜¯ä»ç”¨æˆ·çš„è®¡ç®—æœºä¸Šè·å–çš„ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·å¯ä»¥é€šè¿‡æ›´æ”¹è®¡ç®—æœºä¸Šçš„æ—¶é—´æ¥å½±å“JavaScriptæ—¶é’Ÿã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™å¹¶ä¸é‡è¦ï¼Œä½†åœ¨ä¸€äº›è¶…çº§æ•æ„Ÿçš„æƒ…å†µä¸‹ï¼Œå°±éœ€è¦ä»æœåŠ¡å™¨ä¸Šè·å–æ—¶é—´ã€‚å¯ä»¥ä½¿ç”¨ä¸€äº›Node.jsæˆ–Ajaxæ¥å®Œæˆï¼Œè¿™ä¸¤è€…éƒ½è¶…å‡ºäº†æœ¬æ•™ç¨‹çš„èŒƒå›´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä»æœåŠ¡å™¨è·å–æ—¶é—´åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æœ¬æ•™ç¨‹ä¸­çš„ç›¸åŒæŠ€æœ¯æ¥ä½¿ç”¨å®ƒã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;10.æ€»ç»“&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;åœ¨å®Œæˆæœ¬æ–‡ä¸­çš„ç¤ºä¾‹ä¹‹åï¼Œä½ ç°åœ¨çŸ¥é“äº†å¦‚ä½•ä½¿ç”¨å‡ è¡Œç®€å•çš„JavaScriptä»£ç åˆ›å»ºè‡ªå·±çš„å€’è®¡æ—¶è®¡æ—¶å™¨ï¼æˆ‘ä»¬å·²ç»äº†è§£äº†å¦‚ä½•åˆ¶ä½œä¸€ä¸ªåŸºæœ¬çš„å€’è®¡æ—¶æ—¶é’Ÿå¹¶æœ‰æ•ˆåœ°æ˜¾ç¤ºå®ƒã€‚æˆ‘ä»¬è¿˜ä»‹ç»äº†æ·»åŠ ä¸€äº›æœ‰ç”¨çš„é™„åŠ åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ—¥ç¨‹å®‰æ’ã€ç»å¯¹æ—¶é—´ä¸ç›¸å¯¹æ—¶é—´ï¼Œä»¥åŠåœ¨é¡µé¢å’Œç½‘ç«™è®¿é—®ä¹‹é—´ç”¨cookieä¿å­˜çŠ¶æ€ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è¯•ç€æ·»åŠ ä¸€äº›åˆ›æ„é£æ ¼ï¼Œæˆ–è€…æ–°çš„åŠŸèƒ½ï¼ˆæ¯”å¦‚æš‚åœå’Œæ¢å¤æŒ‰é’®ï¼‰ã€‚ä¹‹åï¼Œå¦‚æœä½ æƒ³å‡ºäº†ä»»ä½•å¾ˆé…·çš„æ—¶é’Ÿä¾‹å­ï¼Œä½ æƒ³åˆ†äº«ï¼Œè®©æˆ‘ä»¬åœ¨è¯„è®ºåŒºè§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;11.ä»£ç &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ¬ç¤ºä¾‹ä»£ç å’Œæ¼”ç¤ºåœ°å€ï¼šhttps://coding.zhangbing.site/view.html?url=./list/down-click.html&lt;/span&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5199374511336982&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/WYoaOn5t0ANAsyE4nMbsnrRoddRZl3Ulz4YSjStP8ld5zicpEzrVUTPZFM8TsUrv018LNU7mnIAGrBmVomqtj9w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2558&quot;/&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;br/&gt;&lt;/figure&gt;&lt;section&gt;&lt;mpcps frameborder=&quot;0&quot; class=&quot;js_editor_cps&quot; data-datakey=&quot;1600178414761_0.7220740555156842&quot; data-uid=&quot;1600178414759&quot; data-type=&quot;1&quot; data-product=&quot;&quot; data-templateid=&quot;list&quot; data-pid=&quot;29120617&quot; data-packid=&quot;&quot; data-smartnum=&quot;&quot; data-categoryid=&quot;3&quot; data-appid=&quot;wx831660fe3ded4389&quot; data-report=&quot;s0%3D0%26s1%3D0%26s2%3D0%26s3%3DJavaScript%25E9%25AB%2598%25E7%25BA%25A7%25E7%25A8%258B%25E5%25BA%258F%25E8%25AE%25BE%25E8%25AE%25A1%26s4%3D0%26s5%3D10%26s6%3Did_1600179496139_855052%26s7%3D%26s8%3D%26s9%3D%26s10%3D%26pid%3Dwx831660fe3ded4389_29120617%26uuid%3D3240205452442390687%26title%3DJavaScript%25E9%25AB%2598%25E7%25BA%25A7%25E7%25A8%258B%25E5%25BA%258F%25E8%25AE%25BE%25E8%25AE%25A1%2B%25E7%25AC%25AC4%25E7%2589%2588%26sid%3D3%26cid%3D3%26ratio%3D17.00%2525%26price%3D96.80%26&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;mpcps frameborder=&quot;0&quot; class=&quot;js_editor_cps&quot; data-datakey=&quot;1600178414762_0.4332142757043733&quot; data-uid=&quot;1600178414760&quot; data-type=&quot;1&quot; data-product=&quot;&quot; data-templateid=&quot;list&quot; data-pid=&quot;12883028&quot; data-packid=&quot;&quot; data-smartnum=&quot;&quot; data-categoryid=&quot;3&quot; data-appid=&quot;wxbdbc4659744ed70d&quot; data-report=&quot;s0%3D0%26s1%3D0%26s2%3D0%26s3%3DJavaScript%25E8%25AF%25AD%25E8%25A8%2580%25E7%25B2%25BE%25E9%25AB%2593%26s4%3D0%26s5%3D10%26s6%3Did_1600179516463_23250%26s7%3D%26s8%3D%26s9%3D%26s10%3D%26pid%3Dwxbdbc4659744ed70d_12883028%26uuid%3D32402054522077153266%26title%3DJavaScript%25E8%25AF%25AD%25E8%25A8%2580%25E7%25B2%25BE%25E9%25AB%2593%25E4%25B8%258E%25E7%25BC%2596%25E7%25A8%258B%25E5%25AE%259E%25E8%25B7%25B5%25EF%25BC%2588%25E7%25AC%25AC3%25E7%2589%2588%25EF%25BC%2589(%25E5%258D%259A%25E6%2596%2587%25E8%25A7%2586%25E7%2582%25B9%25E5%2587%25BA%25E5%2593%2581)%26sid%3D1%26cid%3D3%26ratio%3D18.00%2525%26price%3D136.80%26&quot;/&gt;&lt;/section&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç¦åˆ©æ—¶é—´&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ€åï¼Œæˆ‘åˆæ¥ç»™å¤§å®¶é€ç¦åˆ©äº†ï¼Œè¿™ä¹ˆå¥½çš„ä¹¦ä¸é€å‡ æœ¬ç»™å¤§å®¶æ€ä¹ˆè¡Œå‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¦åˆ©é€ç»™ã€Œé˜…è¯»ã€ç‚¹èµã€åœ¨çœ‹ã€è¯„è®ºã€æˆ‘çš„æ–‡ç« çš„è¯»è€…ä»¬ï¼Œä½ ä»¬çš„æ”¯æŒä¹Ÿæ˜¯æˆ‘æŒç»­è¾“å‡ºæœ€å¤§çš„åŠ¨åŠ›ï¼Œ&lt;span&gt;æ„Ÿæ©&lt;/span&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬æ¬¡æŠ½å¥–æœ‰ä¸‰ä¸ªå‚ä¸æ–¹å¼&lt;span&gt;ã€Œç•™è¨€ã€åœ¨çœ‹&lt;span&gt;ã€ç°é‡‘&lt;/span&gt;çº¢åŒ…æŠ½å¥–ã€&lt;/span&gt;ï¼Œå½“ç„¶éƒ½å‚ä¸ä¸­å¥–æ¦‚ç‡æ›´é«˜å“ˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;ä¸ºäº†é¿å…ä¸­å¥–åå¤±è”ï¼Œæå‰åŠ æˆ‘å¾®ä¿¡å“ˆã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;1&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/WYoaOn5t0ANpQDTG8tzUI7XTrYCicQaUYCZvxu69zuIYjJ5YB2icua8zRG0MPL9IFU09iboV7XOKwTicrr3ghkYeZw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;430&quot;/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>53b6c73b207428153551725bfa2a60be</guid>
<title>å¤šå›¾ï¼Œä¸€æ–‡äº†è§£ 8 ç§å¸¸è§çš„æ•°æ®ç»“æ„</title>
<link>https://toutiao.io/k/d392rnj</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section&gt;&lt;p&gt;å‰å‡ å¤©å’Œä¸™å¼Ÿäº¤æµï¼Œä»–è¯´æˆ‘ä»¬å†™ä½œçš„äººéƒ½æ˜¯åœ¨ä¸åœåœ°ç‡ƒçƒ§è‡ªå·±ï¼Œæ‰€ä»¥éœ€è¦ä¸åœåœ°è¡¥å……ç‡ƒæ–™ã€‚å¯¹äºä»–çš„è§‚ç‚¹ï¼Œæˆ‘ä¸èƒ½å†è‹ŸåŒäº†â€”â€”æ‰€ä»¥æˆ‘å¼€å§‹ç‹‚è¡¥è®¡ç®—æœºæ–¹é¢çš„åŸºç¡€çŸ¥è¯†ï¼Œè¿™å…¶ä¸­å°±åŒ…æ‹¬æˆ‘ç›¸å¯¹è–„å¼±çš„æ•°æ®ç»“æ„ã€‚&lt;/p&gt;&lt;p&gt;ç™¾åº¦ç™¾ç§‘å¯¹æ•°æ®ç»“æ„çš„å®šä¹‰æ˜¯ï¼šç›¸äº’ä¹‹é—´å­˜åœ¨ä¸€ç§æˆ–å¤šç§ç‰¹å®šå…³ç³»çš„æ•°æ®å…ƒç´ çš„é›†åˆã€‚å®šä¹‰å¾ˆæŠ½è±¡ï¼Œéœ€è¦å¤§å£°åœ°æœ—è¯»å‡ éï¼Œæ‰æœ‰ç‚¹æ„Ÿè§‰ã€‚æ€ä¹ˆè®©è¿™ç§æ„Ÿè§‰æ¥å¾—æ›´å¼ºçƒˆï¼Œæ›´äº²åˆ‡ä¸€äº›å‘¢ï¼Ÿæˆ‘æ¥åˆ—ä¸¾ä¸€ä¸‹å¸¸è§çš„ 8 ç§æ•°æ®ç»“æ„ï¼Œæ•°ç»„ã€é“¾è¡¨ã€æ ˆã€é˜Ÿåˆ—ã€æ ‘ã€å †ã€å›¾ã€å“ˆå¸Œè¡¨ã€‚&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.47619047619047616&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z40lCFUAHpmHbN9n1rRLn3KVAzRUXIiaB93GW1ZTzqzXpD9CCprJZGt0iauuLJzMUkicfMhOARZhIGnyFCibjGJ1yg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1218&quot; title=&quot;&quot;/&gt;&lt;/figure&gt;&lt;p&gt;è¿™ 8 ç§æ•°æ®ç»“æ„æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ&lt;/p&gt;&lt;p&gt;&lt;strong&gt;â‘ ã€æ•°ç»„&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;ä¼˜ç‚¹ï¼š&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æŒ‰ç…§ç´¢å¼•æŸ¥è¯¢å…ƒç´ çš„é€Ÿåº¦å¾ˆå¿«ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æŒ‰ç…§ç´¢å¼•éå†æ•°ç»„ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;ç¼ºç‚¹ï¼š&lt;/p&gt;&lt;p&gt;&lt;strong&gt;â‘¡ã€é“¾è¡¨&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;ã€Šç®—æ³•ï¼ˆç¬¬ 4 ç‰ˆï¼‰ã€‹ä¸€ä¹¦ä¸­æ˜¯è¿™æ ·å®šä¹‰é“¾è¡¨çš„ï¼š&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;é“¾è¡¨æ˜¯ä¸€ç§é€’å½’çš„æ•°æ®ç»“æ„ï¼Œå®ƒæˆ–è€…ä¸ºç©ºï¼ˆnullï¼‰ï¼Œæˆ–è€…æ˜¯æŒ‡å‘ä¸€ä¸ªç»“ç‚¹ï¼ˆnodeï¼‰çš„å¼•ç”¨ï¼Œè¯¥èŠ‚ç‚¹è¿˜æœ‰ä¸€ä¸ªå…ƒç´ å’Œä¸€ä¸ªæŒ‡å‘å¦ä¸€æ¡é“¾è¡¨çš„å¼•ç”¨ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;Java çš„ LinkedList ç±»å¯ä»¥å¾ˆå½¢è±¡åœ°é€šè¿‡ä»£ç çš„å½¢å¼æ¥è¡¨ç¤ºä¸€ä¸ªé“¾è¡¨çš„ç»“æ„ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;LinkedList&lt;/span&gt;&amp;lt;&lt;span&gt;E&lt;/span&gt;&amp;gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;transient&lt;/span&gt;Â Node&amp;lt;E&amp;gt;Â first;&lt;br/&gt;Â Â Â Â &lt;span&gt;transient&lt;/span&gt;Â Node&amp;lt;E&amp;gt;Â last;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;Node&lt;/span&gt;&amp;lt;&lt;span&gt;E&lt;/span&gt;&amp;gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â EÂ item;&lt;br/&gt;Â Â Â Â Â Â Â Â Node&amp;lt;E&amp;gt;Â next;&lt;br/&gt;Â Â Â Â Â Â Â Â Node&amp;lt;E&amp;gt;Â prev;&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Node(Node&amp;lt;E&amp;gt;Â prev,Â EÂ element,Â Node&amp;lt;E&amp;gt;Â next)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;this&lt;/span&gt;.itemÂ =Â element;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;this&lt;/span&gt;.nextÂ =Â next;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;this&lt;/span&gt;.prevÂ =Â prev;&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™æ˜¯ä¸€ç§åŒå‘é“¾è¡¨ï¼Œå½“å‰å…ƒç´  item æ—¢æœ‰ prev åˆæœ‰ nextï¼Œä¸è¿‡ first çš„ prev ä¸º nullï¼Œlast çš„ next ä¸º nullã€‚å¦‚æœæ˜¯å•å‘é“¾è¡¨çš„è¯ï¼Œå°±åªæœ‰ nextï¼Œæ²¡æœ‰ prevã€‚&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.4&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z40lCFUAHpmHbN9n1rRLn3KVAzRUXIiaBVCicPIQYibicdxouzxnVM4uVFXzGuDKFE66zDiav3Zu1rmw2HGPl0CiafGw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;670&quot; title=&quot;&quot;/&gt;&lt;/figure&gt;&lt;p&gt;å•å‘é“¾è¡¨çš„ç¼ºç‚¹æ˜¯åªèƒ½ä»å¤´åˆ°å°¾ä¾æ¬¡éå†ï¼Œè€ŒåŒå‘é“¾è¡¨å¯è¿›å¯é€€ï¼Œæ—¢èƒ½æ‰¾åˆ°ä¸‹ä¸€ä¸ªï¼Œä¹Ÿèƒ½æ‰¾åˆ°ä¸Šä¸€ä¸ªâ€”â€”æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½éœ€è¦å¤šåˆ†é…ä¸€ä¸ªå­˜å‚¨ç©ºé—´ã€‚&lt;/p&gt;&lt;p&gt;é“¾è¡¨ä¸­çš„æ•°æ®æŒ‰ç…§â€œé“¾å¼â€çš„ç»“æ„å­˜å‚¨ï¼Œå› æ­¤å¯ä»¥è¾¾åˆ°å†…å­˜ä¸Šéè¿ç»­çš„æ•ˆæœï¼Œæ•°ç»„å¿…é¡»æ˜¯ä¸€å—è¿ç»­çš„å†…å­˜ã€‚&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.5788888888888889&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z40lCFUAHpmHbN9n1rRLn3KVAzRUXIiaBkmpbvsf8IUTrTgwbNdeXjW4iba1tJPSmZR4jZsL5THQhMZZewibDmIibA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;900&quot; title=&quot;&quot;/&gt;&lt;/figure&gt;&lt;p&gt;ç”±äºä¸å¿…æŒ‰ç…§é¡ºåºçš„æ–¹å¼å­˜å‚¨ï¼Œé“¾è¡¨åœ¨æ’å…¥ã€åˆ é™¤çš„æ—¶å€™å¯ä»¥è¾¾åˆ° O(1) çš„æ—¶é—´å¤æ‚åº¦ï¼ˆåªéœ€è¦é‡æ–°æŒ‡å‘å¼•ç”¨å³å¯ï¼Œä¸éœ€è¦åƒæ•°ç»„é‚£æ ·ç§»åŠ¨å…¶ä»–å…ƒç´ ï¼‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œé“¾è¡¨è¿˜å…‹æœäº†æ•°ç»„å¿…é¡»é¢„å…ˆçŸ¥é“æ•°æ®å¤§å°çš„ç¼ºç‚¹ï¼Œä»è€Œå¯ä»¥å®ç°çµæ´»çš„å†…å­˜åŠ¨æ€ç®¡ç†ã€‚&lt;/p&gt;&lt;p&gt;ä¼˜ç‚¹ï¼š&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ä¸éœ€è¦åˆå§‹åŒ–å®¹é‡ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å¯ä»¥æ·»åŠ ä»»æ„å…ƒç´ ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æ’å…¥å’Œåˆ é™¤çš„æ—¶å€™åªéœ€è¦æ›´æ–°å¼•ç”¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;ç¼ºç‚¹ï¼š&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å«æœ‰å¤§é‡çš„å¼•ç”¨ï¼Œå ç”¨çš„å†…å­˜ç©ºé—´å¤§ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æŸ¥æ‰¾å…ƒç´ éœ€è¦éå†æ•´ä¸ªé“¾è¡¨ï¼Œè€—æ—¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;â‘¢ã€æ ˆ&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;æ ˆå°±å¥½åƒæ°´æ¡¶ä¸€æ ·ï¼Œåº•éƒ¨æ˜¯å¯†å°çš„ï¼Œé¡¶éƒ¨æ˜¯å¼€å£ï¼Œæ°´å¯ä»¥è¿›å¯ä»¥å‡ºã€‚ç”¨è¿‡æ°´æ¡¶çš„å°ä¼™ä¼´åº”è¯¥æ˜ç™½è¿™æ ·ä¸€ä¸ªé“ç†ï¼šå…ˆè¿›å»çš„æ°´åœ¨æ¡¶çš„åº•éƒ¨ï¼Œåè¿›å»çš„æ°´åœ¨æ¡¶çš„é¡¶éƒ¨ï¼›åè¿›å»çš„æ°´å…ˆè¢«å€’å‡ºæ¥ï¼Œå…ˆè¿›å»çš„æ°´åè¢«å€’å‡ºæ¥ã€‚&lt;/p&gt;&lt;p&gt;åŒç†ï¼Œæ ˆæŒ‰ç…§â€œåè¿›å…ˆå‡ºâ€ã€â€œå…ˆè¿›åå‡ºâ€çš„åŸåˆ™æ¥å­˜å‚¨æ•°æ®ï¼Œå…ˆæ’å…¥çš„æ•°æ®è¢«å‹å…¥æ ˆåº•ï¼Œåæ’å…¥çš„æ•°æ®åœ¨æ ˆé¡¶ï¼Œè¯»å‡ºæ•°æ®çš„æ—¶å€™ï¼Œä»æ ˆé¡¶å¼€å§‹ä¾æ¬¡è¯»å‡ºã€‚&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.9454545454545454&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z40lCFUAHpmHbN9n1rRLn3KVAzRUXIiaBbpJ3J7DZLmox5PicUyzBM5hnVC2W37CEKIwKbibvKZeaLlQbP3efwV4g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;220&quot; title=&quot;&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;strong&gt;â‘£ã€é˜Ÿåˆ—&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;é˜Ÿåˆ—å°±å¥½åƒä¸€æ®µæ°´ç®¡ä¸€æ ·ï¼Œä¸¤ç«¯éƒ½æ˜¯å¼€å£çš„ï¼Œæ°´ä»ä¸€ç«¯è¿›å»ï¼Œç„¶åä»å¦å¤–ä¸€ç«¯å‡ºæ¥ã€‚å…ˆè¿›å»çš„æ°´å…ˆå‡ºæ¥ï¼Œåè¿›å»çš„æ°´åå‡ºæ¥ã€‚&lt;/p&gt;&lt;p&gt;å’Œæ°´ç®¡æœ‰äº›ä¸åŒçš„æ˜¯ï¼Œé˜Ÿåˆ—ä¼šå¯¹ä¸¤ç«¯è¿›è¡Œå®šä¹‰ï¼Œä¸€ç«¯å«é˜Ÿå¤´ï¼Œå¦å¤–ä¸€ç«¯å°±å«é˜Ÿå°¾ã€‚é˜Ÿå¤´åªå…è®¸åˆ é™¤æ“ä½œï¼ˆå‡ºé˜Ÿï¼‰ï¼Œé˜Ÿå°¾åªå…è®¸æ’å…¥æ“ä½œï¼ˆå…¥é˜Ÿï¼‰ã€‚&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.531700288184438&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z40lCFUAHpmHbN9n1rRLn3KVAzRUXIiaBuqsHCTFJJS1QEbMQlWGYNibF1U0s2VBVQE9arW7rpjSmxHZhvgGEicOg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;694&quot; title=&quot;&quot;/&gt;&lt;/figure&gt;&lt;p&gt;æ³¨æ„ï¼Œæ ˆæ˜¯å…ˆè¿›åå‡ºï¼Œé˜Ÿåˆ—æ˜¯å…ˆè¿›å…ˆå‡ºâ€”â€”ä¸¤è€…è™½ç„¶éƒ½æ˜¯çº¿æ€§è¡¨ï¼Œä½†åŸåˆ™æ˜¯ä¸åŒçš„ï¼Œç»“æ„ä¸ä¸€æ ·å˜›ã€‚&lt;/p&gt;&lt;p&gt;&lt;strong&gt;â‘¤ã€æ ‘&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;æ ‘æ˜¯ä¸€ç§å…¸å‹çš„éçº¿æ€§ç»“æ„ï¼Œå®ƒæ˜¯ç”± nï¼ˆn&amp;gt;0ï¼‰ä¸ªæœ‰é™èŠ‚ç‚¹ç»„æˆçš„ä¸€ä¸ªå…·æœ‰å±‚æ¬¡å…³ç³»çš„é›†åˆã€‚&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.9416666666666667&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z40lCFUAHpmHbN9n1rRLn3KVAzRUXIiaBNG5VquqaTNkXHazARMOOHWI3hXmeKc8Pqibk63EFSHKCAh1XD7ccIVw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;600&quot; title=&quot;&quot;/&gt;&lt;/figure&gt;&lt;p&gt;ä¹‹æ‰€ä»¥å«â€œæ ‘â€ï¼Œæ˜¯å› ä¸ºè¿™ç§æ•°æ®ç»“æ„çœ‹èµ·æ¥å°±åƒæ˜¯ä¸€ä¸ªå€’æŒ‚çš„æ ‘ï¼Œåªä¸è¿‡æ ¹åœ¨ä¸Šï¼Œå¶åœ¨ä¸‹ã€‚æ ‘å½¢æ•°æ®ç»“æ„æœ‰ä»¥ä¸‹è¿™äº›ç‰¹ç‚¹ï¼š&lt;/p&gt;&lt;p&gt;ä¸‹å›¾å±•ç¤ºäº†æ ‘çš„ä¸€äº›æœ¯è¯­ï¼š&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.8258064516129032&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z40lCFUAHpmHbN9n1rRLn3KVAzRUXIiaB5fBXNTAjhGAkGPK1GSEtuWia41G9tutOp4sNS5qByTy6QFxYzfLibgzw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot; title=&quot;&quot;/&gt;&lt;/figure&gt;&lt;p&gt;æ ¹èŠ‚ç‚¹æ˜¯ç¬¬ 0 å±‚ï¼Œå®ƒçš„å­èŠ‚ç‚¹æ˜¯ç¬¬ 1 å±‚ï¼Œå­èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸ºç¬¬ 2 å±‚ï¼Œä»¥æ­¤ç±»æ¨ã€‚&lt;/p&gt;&lt;p&gt;æ ‘çš„ç§ç±»æœ‰å¾ˆå¤šç§ï¼Œå¸¸è§çš„æœ‰ï¼š&lt;/p&gt;&lt;p&gt;å‡å¦‚æœ‰ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œä¸€ä¸ªæ˜¯çˆ¶èŠ‚ç‚¹ï¼Œä¸¤ä¸ªæ˜¯åŒçº§çš„å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±æœ‰ä¸‰ç§æƒ…å†µï¼š&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.2653225806451613&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z40lCFUAHpmHbN9n1rRLn3KVAzRUXIiaBlzDo0iadbvynC8D3O2VQwCJib581GmjqibPlhM09Mz9sHKwvfTmZbwOqg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot; title=&quot;&quot;/&gt;&lt;/figure&gt;&lt;p&gt;å‡å¦‚æœ‰ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œä¸€ä¸ªæ˜¯çˆ¶èŠ‚ç‚¹ï¼Œä¸¤ä¸ªæ˜¯ä¸åŒçº§çš„å­èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±æœ‰å…­ç§æƒ…å†µï¼š&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.45483870967741935&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z40lCFUAHpmHbN9n1rRLn3KVAzRUXIiaBvHIqQT4AgkchWGGIc86w157X4iaORtNbK1ia8WZ9qD0yGdLY8ibMjlC0A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot; title=&quot;&quot;/&gt;&lt;/figure&gt;&lt;p&gt;ä¸‰ä¸ªèŠ‚ç‚¹ç»„æˆçš„æ— åºæ ‘ï¼Œåˆèµ·æ¥å°±æ˜¯ä¹ç§æƒ…å†µã€‚&lt;/p&gt;&lt;p&gt;å®Œå…¨äºŒå‰æ ‘ï¼šå¯¹äºä¸€é¢—äºŒå‰æ ‘ï¼Œå‡è®¾å…¶æ·±åº¦ä¸º dï¼ˆd &amp;gt; 1ï¼‰ã€‚é™¤äº†ç¬¬ d å±‚ï¼Œå…¶å®ƒå„å±‚çš„èŠ‚ç‚¹æ•°ç›®å‡å·²è¾¾æœ€å¤§å€¼ï¼Œä¸”ç¬¬ d å±‚æ‰€æœ‰èŠ‚ç‚¹ä»å·¦å‘å³è¿ç»­åœ°ç´§å¯†æ’åˆ—ï¼Œè¿™æ ·çš„äºŒå‰æ ‘è¢«ç§°ä¸ºå®Œå…¨äºŒå‰æ ‘ã€‚&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.716931216931217&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z40lCFUAHpmHbN9n1rRLn3KVAzRUXIiaBibF1D0NMh3ELjuOuvN9kjlibkEJbIhyjcubicaia6ajugIOaS8kMyFG9uw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;756&quot; title=&quot;&quot;/&gt;&lt;/figure&gt;&lt;p&gt;æ‹¿ä¸Šå›¾æ¥è¯´ï¼Œd ä¸º 3ï¼Œé™¤äº†ç¬¬ 3 å±‚ï¼Œç¬¬ 1 å±‚ã€ç¬¬ 2 å±‚ éƒ½è¾¾åˆ°äº†æœ€å¤§å€¼ï¼ˆ2 ä¸ªå­èŠ‚ç‚¹ï¼‰ï¼Œå¹¶ä¸”ç¬¬ 3 å±‚çš„æ‰€æœ‰èŠ‚ç‚¹ä»å·¦å‘å³è”ç³»åœ°ç´§å¯†æ’åˆ—ï¼ˆHã€Iã€Jã€Kã€Lï¼‰ï¼Œç¬¦åˆå®Œå…¨äºŒå‰æ ‘çš„è¦æ±‚ã€‚&lt;/p&gt;&lt;p&gt;æ»¡äºŒå‰æ ‘ï¼šä¸€é¢—æ¯ä¸€å±‚çš„èŠ‚ç‚¹æ•°éƒ½è¾¾åˆ°äº†æœ€å¤§å€¼çš„äºŒå‰æ ‘ã€‚æœ‰ä¸¤ç§è¡¨ç°å½¢å¼ï¼Œç¬¬ä¸€ç§ï¼Œåƒä¸‹å›¾è¿™æ ·ï¼ˆæ¯ä¸€å±‚éƒ½æ˜¯æ»¡çš„ï¼‰ï¼Œæ»¡è¶³æ¯ä¸€å±‚çš„èŠ‚ç‚¹æ•°éƒ½è¾¾åˆ°äº†æœ€å¤§å€¼ 2ã€‚&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.6475409836065574&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z40lCFUAHpmHbN9n1rRLn3KVAzRUXIiaBe3ctGhq7WqiapWQpNJNHAibn74hPPK6zUG8a359gb3RQ92PiaDDdcG4lA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;732&quot; title=&quot;&quot;/&gt;&lt;/figure&gt;&lt;p&gt;ç¬¬äºŒç§ï¼Œåƒä¸‹å›¾è¿™æ ·ï¼ˆæ¯ä¸€å±‚è™½ç„¶ä¸æ»¡ï¼‰ï¼Œä½†æ¯ä¸€å±‚çš„èŠ‚ç‚¹æ•°ä»ç„¶è¾¾åˆ°äº†æœ€å¤§å€¼ 2ã€‚&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.7481060606060606&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z40lCFUAHpmHbN9n1rRLn3KVAzRUXIiaB92VnLZdZEFYRW2f73UnhVuZAtTVzQRk0lhxhibgz1BnxWOhPuAOQ2Ew/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1056&quot; title=&quot;&quot;/&gt;&lt;/figure&gt;&lt;p&gt;äºŒå‰æŸ¥æ‰¾æ ‘ï¼šè‹±æ–‡åå« Binary Search Treeï¼Œå³ BSTï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.5298387096774193&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z40lCFUAHpmHbN9n1rRLn3KVAzRUXIiaByCLXibBBJdRBBiclOiaeLMxySmPxECdFOO43DpicHl0OGZIicmYC3LYel3A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot; title=&quot;&quot;/&gt;&lt;/figure&gt;&lt;p&gt;åŸºäºäºŒå‰æŸ¥æ‰¾æ ‘çš„ç‰¹ç‚¹ï¼Œå®ƒç›¸æ¯”è¾ƒäºå…¶ä»–æ•°æ®ç»“æ„çš„ä¼˜åŠ¿å°±åœ¨äºæŸ¥æ‰¾ã€æ’å…¥çš„æ—¶é—´å¤æ‚åº¦è¾ƒä½ï¼Œä¸º O(logn)ã€‚å‡å¦‚æˆ‘ä»¬è¦ä»ä¸Šå›¾ä¸­æŸ¥æ‰¾ 5 ä¸ªå…ƒç´ ï¼Œå…ˆä»æ ¹èŠ‚ç‚¹ 7 å¼€å§‹æ‰¾ï¼Œ5 å¿…å®šåœ¨ 7 çš„å·¦ä¾§ï¼Œæ‰¾åˆ° 4ï¼Œé‚£ 5 å¿…å®šåœ¨ 4 çš„å³ä¾§ï¼Œæ‰¾åˆ° 6ï¼Œé‚£ 5 å¿…å®šåœ¨ 6 çš„å·¦ä¾§ï¼Œæ‰¾åˆ°äº†ã€‚&lt;/p&gt;&lt;p&gt;ç†æƒ³æƒ…å†µä¸‹ï¼Œé€šè¿‡ BST æŸ¥æ‰¾èŠ‚ç‚¹ï¼Œæ‰€éœ€è¦æ£€æŸ¥çš„èŠ‚ç‚¹æ•°å¯ä»¥å‡åŠã€‚&lt;/p&gt;&lt;p&gt;å¹³è¡¡äºŒå‰æ ‘ï¼šå½“ä¸”ä»…å½“ä»»ä½•èŠ‚ç‚¹çš„ä¸¤æ£µå­æ ‘çš„é«˜åº¦å·®ä¸å¤§äº 1 çš„äºŒå‰æ ‘ã€‚ç”±å‰è‹è”çš„æ•°å­¦å®¶ Adelse-Velskil å’Œ Landis åœ¨ 1962 å¹´æå‡ºçš„é«˜åº¦å¹³è¡¡çš„äºŒå‰æ ‘ï¼Œæ ¹æ®ç§‘å­¦å®¶çš„è‹±æ–‡åä¹Ÿç§°ä¸º AVL æ ‘ã€‚&lt;/p&gt;&lt;p&gt;å¹³è¡¡äºŒå‰æ ‘æœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€é¢—äºŒå‰æŸ¥æ‰¾æ ‘ï¼Œä¸è¿‡ä¸ºäº†é™åˆ¶å·¦å³å­æ ‘çš„é«˜åº¦å·®ï¼Œé¿å…å‡ºç°å€¾æ–œæ ‘ç­‰åå‘äºçº¿æ€§ç»“æ„æ¼”åŒ–çš„æƒ…å†µï¼Œæ‰€ä»¥å¯¹äºŒå‰æœç´¢æ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å·¦å³å­æ ‘ä½œäº†é™åˆ¶ï¼Œå·¦å³å­æ ‘çš„é«˜åº¦å·®ç§°ä¹‹ä¸ºå¹³è¡¡å› å­ï¼Œæ ‘ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„å¹³è¡¡å› å­ç»å¯¹å€¼ä¸å¤§äº 1ã€‚&lt;/p&gt;&lt;p&gt;å¹³è¡¡äºŒå‰æ ‘çš„éš¾ç‚¹åœ¨äºï¼Œå½“åˆ é™¤æˆ–è€…å¢åŠ èŠ‚ç‚¹çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•é€šè¿‡å·¦æ—‹æˆ–è€…å³æ—‹çš„æ–¹å¼æ¥ä¿æŒå·¦å³å¹³è¡¡ã€‚&lt;/p&gt;&lt;p&gt;Java ä¸­æœ€å¸¸è§çš„å¹³è¡¡äºŒå‰æ ‘å°±æ˜¯çº¢é»‘æ ‘ï¼ŒèŠ‚ç‚¹æ˜¯çº¢è‰²æˆ–è€…é»‘è‰²ï¼Œé€šè¿‡é¢œè‰²çš„çº¦æŸæ¥ç»´æŒç€äºŒå‰æ ‘çš„å¹³è¡¡ï¼š&lt;/p&gt;&lt;p&gt;1ï¼‰æ¯ä¸ªèŠ‚ç‚¹éƒ½åªèƒ½æ˜¯çº¢è‰²æˆ–è€…é»‘è‰²&lt;/p&gt;&lt;p&gt;2ï¼‰æ ¹èŠ‚ç‚¹æ˜¯é»‘è‰²&lt;/p&gt;&lt;p&gt;3ï¼‰æ¯ä¸ªå¶èŠ‚ç‚¹ï¼ˆNIL èŠ‚ç‚¹ï¼Œç©ºèŠ‚ç‚¹ï¼‰æ˜¯é»‘è‰²çš„ã€‚&lt;/p&gt;&lt;p&gt;4ï¼‰å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢è‰²çš„ï¼Œåˆ™å®ƒä¸¤ä¸ªå­èŠ‚ç‚¹éƒ½æ˜¯é»‘è‰²çš„ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨ä¸€æ¡è·¯å¾„ä¸Šä¸èƒ½å‡ºç°ç›¸é‚»çš„ä¸¤ä¸ªçº¢è‰²èŠ‚ç‚¹ã€‚&lt;/p&gt;&lt;p&gt;5ï¼‰ä»ä»»ä¸€èŠ‚ç‚¹åˆ°å…¶æ¯ä¸ªå¶å­çš„æ‰€æœ‰è·¯å¾„éƒ½åŒ…å«ç›¸åŒæ•°ç›®çš„é»‘è‰²èŠ‚ç‚¹ã€‚&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.5724815724815725&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z40lCFUAHpmHbN9n1rRLn3KVAzRUXIiaBrmu2nPLWWjKOtn3TkgjDFBordKkDFBakyLRuQG6lrTFZdhUTEWhlgA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;814&quot; title=&quot;&quot;/&gt;&lt;/figure&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.5630252100840336&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z40lCFUAHpmHbN9n1rRLn3KVAzRUXIiaBLHPViaSrBvypPqwsDJs7sFjUE2V1dL9RDBo0F9FJevfA8P2CtO8xLaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1190&quot; title=&quot;&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;strong&gt;â‘¥ã€å †&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;å †å¯ä»¥è¢«çœ‹åšæ˜¯ä¸€æ£µæ ‘çš„æ•°ç»„å¯¹è±¡ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å †ä¸­æŸä¸ªèŠ‚ç‚¹çš„å€¼æ€»æ˜¯ä¸å¤§äºæˆ–ä¸å°äºå…¶çˆ¶èŠ‚ç‚¹çš„å€¼ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å †æ€»æ˜¯ä¸€æ£µå®Œå…¨äºŒå‰æ ‘ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;å°†æ ¹èŠ‚ç‚¹æœ€å¤§çš„å †å«åšæœ€å¤§å †æˆ–å¤§æ ¹å †ï¼Œæ ¹èŠ‚ç‚¹æœ€å°çš„å †å«åšæœ€å°å †æˆ–å°æ ¹å †ã€‚&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.42096774193548386&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z40lCFUAHpmHbN9n1rRLn3KVAzRUXIiaBxz4ddlo5D4aLLkhoGj7hScRQR8Ipv0ototruVb7VVfJxd6pbQcXQzg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1240&quot; title=&quot;&quot;/&gt;&lt;/figure&gt;&lt;p&gt;&lt;strong&gt;â‘¦ã€å›¾&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;å›¾æ˜¯ä¸€ç§å¤æ‚çš„éçº¿æ€§ç»“æ„ï¼Œç”±é¡¶ç‚¹çš„æœ‰ç©·éç©ºé›†åˆå’Œé¡¶ç‚¹ä¹‹é—´è¾¹çš„é›†åˆç»„æˆï¼Œé€šå¸¸è¡¨ç¤ºä¸ºï¼šGï¼ˆVï¼ŒEï¼‰ï¼Œå…¶ä¸­ï¼ŒG è¡¨ç¤ºä¸€ä¸ªå›¾ï¼ŒV æ˜¯å›¾ G ä¸­é¡¶ç‚¹çš„é›†åˆï¼ŒE æ˜¯å›¾ G ä¸­è¾¹çš„é›†åˆã€‚&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.5199501246882793&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z40lCFUAHpmHbN9n1rRLn3KVAzRUXIiaB5uNbXoX3qxZS5j4lakLGo6fcia44HylHMw57socSNs7lf0ul4oNnPiaQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;802&quot; title=&quot;&quot;/&gt;&lt;/figure&gt;&lt;p&gt;ä¸Šå›¾å…±æœ‰ V0ï¼ŒV1ï¼ŒV2ï¼ŒV3 è¿™ 4 ä¸ªé¡¶ç‚¹ï¼Œ4 ä¸ªé¡¶ç‚¹ä¹‹é—´å…±æœ‰ 5 æ¡è¾¹ã€‚&lt;/p&gt;&lt;p&gt;åœ¨çº¿æ€§ç»“æ„ä¸­ï¼Œæ•°æ®å…ƒç´ ä¹‹é—´æ»¡è¶³å”¯ä¸€çš„çº¿æ€§å…³ç³»ï¼Œæ¯ä¸ªæ•°æ®å…ƒç´ ï¼ˆé™¤ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªå¤–ï¼‰å‡æœ‰å”¯ä¸€çš„â€œå‰é©±â€å’Œâ€œåç»§â€ï¼›&lt;/p&gt;&lt;p&gt;åœ¨æ ‘å½¢ç»“æ„ä¸­ï¼Œæ•°æ®å…ƒç´ ä¹‹é—´æœ‰ç€æ˜æ˜¾çš„å±‚æ¬¡å…³ç³»ï¼Œå¹¶ä¸”æ¯ä¸ªæ•°æ®å…ƒç´ åªä¸ä¸Šä¸€å±‚ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼ˆçˆ¶èŠ‚ç‚¹ï¼‰åŠä¸‹ä¸€å±‚çš„å¤šä¸ªå…ƒç´ ï¼ˆå­èŠ‚ç‚¹ï¼‰ç›¸å…³ï¼›&lt;/p&gt;&lt;p&gt;è€Œåœ¨å›¾å½¢ç»“æ„ä¸­ï¼ŒèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»æ˜¯ä»»æ„çš„ï¼Œå›¾ä¸­ä»»æ„ä¸¤ä¸ªæ•°æ®å…ƒç´ ä¹‹é—´éƒ½æœ‰å¯èƒ½ç›¸å…³ã€‚&lt;/p&gt;&lt;p&gt;&lt;strong&gt;â‘§ã€å“ˆå¸Œè¡¨&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;å“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰ï¼Œä¹Ÿå«æ•£åˆ—è¡¨ï¼Œæ˜¯ä¸€ç§å¯ä»¥é€šè¿‡å…³é”®ç å€¼ï¼ˆkey-valueï¼‰ç›´æ¥è®¿é—®çš„æ•°æ®ç»“æ„ï¼Œå®ƒæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯å¯ä»¥å¿«é€Ÿå®ç°æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤ã€‚&lt;/p&gt;&lt;p&gt;æ•°ç»„çš„æœ€å¤§ç‰¹ç‚¹å°±æ˜¯æŸ¥æ‰¾å®¹æ˜“ï¼Œæ’å…¥å’Œåˆ é™¤å›°éš¾ï¼›è€Œé“¾è¡¨æ­£å¥½ç›¸åï¼ŒæŸ¥æ‰¾å›°éš¾ï¼Œè€Œæ’å…¥å’Œåˆ é™¤å®¹æ˜“ã€‚å“ˆå¸Œè¡¨å¾ˆå®Œç¾åœ°ç»“åˆäº†ä¸¤è€…çš„ä¼˜ç‚¹ï¼Œ Java çš„ HashMap åœ¨æ­¤åŸºç¡€ä¸Šè¿˜åŠ å…¥äº†æ ‘çš„ä¼˜ç‚¹ã€‚&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.756701030927835&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z40lCFUAHpmHbN9n1rRLn3KVAzRUXIiaBcJg9UngrA7Yh40PkVSOCIkcabXgUqCrxNTaWg9F7Vgn8v4WcsfBGKA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;970&quot; title=&quot;&quot;/&gt;&lt;/figure&gt;&lt;p&gt;å“ˆå¸Œå‡½æ•°åœ¨å“ˆå¸Œè¡¨ä¸­èµ·ç€â¾®å¸¸å…³é”®çš„ä½œâ½¤ï¼Œå®ƒå¯ä»¥æŠŠä»»æ„é•¿åº¦çš„è¾“å…¥å˜æ¢æˆå›ºå®šé•¿åº¦çš„è¾“å‡ºï¼Œè¯¥è¾“å‡ºå°±æ˜¯å“ˆå¸Œå€¼ã€‚å“ˆå¸Œå‡½æ•°ä½¿å¾—ä¸€ä¸ªæ•°æ®åºåˆ—çš„è®¿é—®è¿‡ç¨‹å˜å¾—æ›´åŠ è¿…é€Ÿæœ‰æ•ˆï¼Œé€šè¿‡å“ˆå¸Œå‡½æ•°ï¼Œæ•°æ®å…ƒç´ èƒ½å¤Ÿè¢«å¾ˆå¿«çš„è¿›è¡Œå®šä½ã€‚&lt;/p&gt;&lt;p&gt;è‹¥å…³é”®å­—ä¸º kï¼Œåˆ™å…¶å€¼å­˜æ”¾åœ¨ &lt;code&gt;hash(k)&lt;/code&gt; çš„å­˜å‚¨ä½ç½®ä¸Šã€‚ç”±æ­¤ï¼Œä¸éœ€è¦éå†å°±å¯ä»¥ç›´æ¥å–å¾— k å¯¹åº”çš„å€¼ã€‚&lt;/p&gt;&lt;p&gt;å¯¹äºä»»æ„ä¸¤ä¸ªä¸åŒçš„æ•°æ®å—ï¼Œå…¶å“ˆå¸Œå€¼ç›¸åŒçš„å¯èƒ½æ€§æå°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºä¸€ä¸ªç»™å®šçš„æ•°æ®å—ï¼Œæ‰¾åˆ°å’Œå®ƒå“ˆå¸Œå€¼ç›¸åŒçš„æ•°æ®å—æä¸ºå›°éš¾ã€‚å†è€…ï¼Œå¯¹äºä¸€ä¸ªæ•°æ®å—ï¼Œå“ªæ€•åªæ”¹åŠ¨å®ƒçš„ä¸€ä¸ªæ¯”ç‰¹ä½ï¼Œå…¶å“ˆå¸Œå€¼çš„æ”¹åŠ¨ä¹Ÿä¼šéå¸¸çš„å¤§â€”â€”è¿™æ­£æ˜¯ Hash å­˜åœ¨çš„ä»·å€¼ï¼&lt;/p&gt;&lt;p&gt;å°½ç®¡å¯èƒ½æ€§æå°ï¼Œä½†ä»ç„¶ä¼šå‘ç”Ÿï¼Œå¦‚æœå“ˆå¸Œå†²çªäº†ï¼ŒJava çš„ HashMap ä¼šåœ¨æ•°ç»„çš„åŒä¸€ä¸ªä½ç½®ä¸Šå¢åŠ é“¾è¡¨ï¼Œå¦‚æœé“¾è¡¨çš„é•¿åº¦å¤§äº 8ï¼Œå°†ä¼šè½¬åŒ–æˆçº¢é»‘æ ‘è¿›è¡Œå¤„ç†â€”â€”è¿™å°±æ˜¯æ‰€è°“çš„æ‹‰é“¾æ³•ï¼ˆæ•°ç»„+é“¾è¡¨ï¼‰ã€‚&lt;/p&gt;&lt;p&gt;è¯´å¥å®åœ¨è¯ï¼Œç…§è¿™ä¸ªè¿›åº¦æ¶è¡¥ä¸‹å»ï¼Œæˆ‘æ„Ÿè§‰è¦ç§ƒçš„èŠ‚å¥ï¼Œä¸è¿‡ï¼Œå¦‚æœèƒ½å¤Ÿå˜å¾—æ›´å¼ºï¼Œå€¼äº†â€”â€”å¯¹ï¼Œå€¼äº†ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>39e33fa4c2481a1ead767bef42db5ea9</guid>
<title>è°ˆè°ˆæˆ‘æ‰€è®¤è¯†çš„åˆ†å¸ƒå¼é”</title>
<link>https://toutiao.io/k/oqnmp3h</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;p class=&quot;original_area_primary&quot;&gt;
                                                                                                &lt;/p&gt;

                    
                                            &lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;p data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;/p&gt;&lt;h2 mpa-is-content=&quot;t&quot;&gt;&lt;span&gt;éšç€è®¡ç®—æœºæŠ€æœ¯å’Œå·¥ç¨‹æ¶æ„çš„å‘å±•ï¼Œå¾®æœåŠ¡å˜å¾—è¶Šæ¥è¶Šçƒ­ã€‚å¦‚ä»Šï¼Œç»å¤§å¤šæ•°æœåŠ¡éƒ½å¤„äºåˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œå…¶ä¸­ï¼Œæ•°æ®ä¸€è‡´æ€§æ˜¯æˆ‘ä»¬ä¸€ç›´å…³æ³¨çš„é‡ç‚¹ã€‚åˆ†å¸ƒå¼é”åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿç»è¿‡äº†å“ªäº›å‘å±•æ¼”è¿›ï¼Ÿå·¥ç¨‹ä¸Šæœ‰å“ªäº›å®ç°æ–¹æ¡ˆï¼Ÿå„ç§æ–¹æ¡ˆçš„åˆ©å¼Šæƒè¡¡åˆæœ‰å“ªäº›ï¼Ÿå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¯¹ä½ æœ‰ä¸€äº›å¸®åŠ©ã€‚&lt;/span&gt;&lt;br/&gt;&lt;/h2&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;â–&lt;strong&gt;é˜…è¯»&lt;/strong&gt;&lt;strong&gt;ç´¢å¼•&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;0. åè¯å®šä¹‰&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;1. é—®é¢˜å¼•å…¥&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;2. åˆ†å¸ƒå¼ç¯å¢ƒçš„ç‰¹ç‚¹Â &lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;3. é”&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;4. åˆ†å¸ƒå¼é”&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;5. åˆ†å¸ƒå¼é”å®ç°æ–¹æ¡ˆ&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;5.1. æœ´ç´ Rediså®ç°æ–¹æ¡ˆã€&lt;/span&gt;&lt;span&gt;æœ´ç´ Redisæ–¹æ¡ˆå°ç»“&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;5.2. ZooKeeperå®ç°æ–¹æ¡ˆã€&lt;/span&gt;&lt;span&gt;ZooKeeperæ–¹æ¡ˆå°ç»“&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;5.3&lt;span&gt;.Â &lt;/span&gt;Redissonå®ç°æ–¹æ¡ˆã€&lt;/span&gt;&lt;span&gt;Redissonæ–¹æ¡ˆå°ç»“&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;6. æ€»ç»“&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;7. ç»“æŸè¯­&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;8. Reference&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-copyright=&quot;0&quot; data-ratio=&quot;0.02847130968024529&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jE5bOw22iaBsseSfyAldiaR4R3UMuxvTLoibspKdM7d2ePE6INj7RnywH5xnvFmLC2pXxUSBUVejaAhKcme5CPyXw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2283&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;â–&lt;/span&gt;&lt;strong&gt;&lt;span&gt;0. åè¯å®šä¹‰&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åˆ†å¸ƒå¼é”ï¼šé¡¾åæ€ä¹‰ï¼Œæ˜¯æŒ‡åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„é”ï¼Œé‡ç‚¹åœ¨é”ã€‚æ‰€ä»¥æˆ‘ä»¬å…ˆä»é”å¼€å§‹è®²èµ·ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;h1/&gt;&lt;p&gt;&lt;span&gt;â–&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1. é—®é¢˜å¼•å…¥&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸¾ä¸ªä¾‹å­ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æŸæœåŠ¡è®°å½•æ•°æ®Xï¼Œå½“å‰å€¼ä¸º100ã€‚Aè¯·æ±‚éœ€è¦å°†Xå¢åŠ 200ï¼›åŒæ—¶ï¼ŒBè¯·æ±‚éœ€è¦å°†Xå‡100ã€‚åœ¨ç†æƒ³çš„æƒ…å†µä¸‹ï¼ŒAå…ˆè¯»å–åˆ°X=100ï¼Œç„¶åXå¢åŠ 200ï¼Œæœ€åå†™å…¥X=300ã€‚Bè¯·æ±‚æ¥ç€è¯»å–åˆ°X=300ï¼Œå‡å°‘100ï¼Œæœ€åå†™å…¥X=200ã€‚ç„¶è€Œåœ¨çœŸå®æƒ…å†µä¸‹ï¼Œå¦‚æœä¸åšä»»ä½•å¤„ç†ï¼Œåˆ™å¯èƒ½ä¼šå‡ºç°ï¼šAå’ŒBåŒæ—¶è¯»å–åˆ°X=100ï¼›Aå†™å…¥ä¹‹å‰Bè¯»å–åˆ°Xï¼›Bæ¯”Aå…ˆå†™å…¥ç­‰ç­‰æƒ…å†µã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸Šé¢è¿™ä¸ªä¾‹å­ç›¸ä¿¡å¤§å®¶éƒ½éå¸¸ç†Ÿæ‚‰ã€‚å‡ºç°ä¸ç¬¦åˆé¢„æœŸçš„ç»“æœæœ¬è´¨ä¸Šæ˜¯å¯¹ä¸´ç•Œèµ„æºæ²¡æœ‰åšå¥½äº’æ–¥æ“ä½œã€‚äº’æ–¥æ€§é—®é¢˜é€šä¿—æ¥è®²ï¼Œå°±æ˜¯å¯¹å…±äº«èµ„æºçš„æŠ¢å é—®é¢˜ã€‚å¯¹äºå…±äº«èµ„æºäº‰æŠ¢çš„æ­£ç¡®æ€§ï¼Œé”æ˜¯æœ€å¸¸ç”¨çš„æ–¹å¼ï¼Œå…¶ä»–çš„å¦‚CASï¼ˆcompare and swapï¼‰ç­‰ï¼Œè¿™é‡Œä¸å±•å¼€ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;h1/&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;â–&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;strong&gt;&lt;span&gt;2. åˆ†å¸ƒå¼ç¯å¢ƒçš„ç‰¹ç‚¹&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬çš„ç»å¤§éƒ¨åˆ†æœåŠ¡éƒ½å¤„äºåˆ†å¸ƒå¼ç¯å¢ƒä¸­ã€‚é‚£ä¹ˆï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿæœ‰å“ªäº›ç‰¹ç‚¹å‘¢ï¼Ÿå¤§è‡´å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;* å¯æ‰©å±•æ€§ï¼šå¯é€šè¿‡æ¨ªå‘æ°´å¹³æ‰©å±•æé«˜ç³»ç»Ÿçš„æ€§èƒ½å’Œååé‡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;* é«˜å¯é æ€§ï¼šé«˜å®¹é”™ï¼Œå³ä½¿ç³»ç»Ÿä¸­ä¸€å°æˆ–å‡ å°æ•…éšœï¼Œç³»ç»Ÿä»å¯æä¾›æœåŠ¡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;* é«˜å¹¶å‘æ€§ï¼šå„æœºå™¨å¹¶è¡Œç‹¬ç«‹å¤„ç†å’Œè®¡ç®—ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;* å»‰ä»·é«˜æ•ˆï¼šå¤šå°å°å‹æœºè€Œéå•å°é«˜æ€§èƒ½æœºã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;â–&lt;/span&gt;&lt;strong&gt;&lt;span&gt;3.é”&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹éåˆ†å¸ƒå¼æƒ…å†µä¸‹çš„é”æ–¹æ¡ˆï¼ˆå¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹çš„æƒ…å†µï¼‰ï¼Œç„¶åå†æ¼”è¿›åˆ°åˆ†å¸ƒå¼é”ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;â–&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;strong&gt;å¤šçº¿ç¨‹ä¸‹çš„é”æœºåˆ¶ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å„ç§è¯­è¨€æœ‰ä¸åŒçš„å®ç°æ–¹å¼ï¼Œæ¯”è¾ƒæˆç†Ÿã€‚æ¯”å¦‚ï¼Œgoè¯­è¨€ä¸­çš„sync.RWMutexï¼ˆè¯»å†™é”ï¼‰ã€sync.Mutexï¼ˆäº’æ–¥é”ï¼‰ï¼›JAVAä¸­çš„ReentrantLockã€synchronizedï¼›åœ¨phpä¸­æ²¡æœ‰æ‰¾åˆ°åŸç”Ÿçš„æ”¯æŒé”çš„æ–¹å¼ï¼Œåªèƒ½é€šè¿‡å¤–éƒ¨æ¥é—´æ¥å®ç°ï¼Œæ¯”å¦‚æ–‡ä»¶é”ï¼Œå€ŸåŠ©å¤–éƒ¨å­˜å‚¨çš„é”ç­‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;â–&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;å¤šè¿›ç¨‹ä¸‹çš„é”æœºåˆ¶ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¯¹äºä¸´ç•Œèµ„æºçš„è®¿é—®å·²ç»è¶…å‡ºäº†å•ä¸ªè¿›ç¨‹çš„æ§åˆ¶èŒƒå›´ã€‚åœ¨å¤šè¿›ç¨‹çš„æƒ…å†µä¸‹ï¼Œä¸»è¦æ˜¯åˆ©ç”¨æ“ä½œç³»ç»Ÿå±‚é¢çš„è¿›ç¨‹é—´é€šä¿¡åŸç†æ¥è§£å†³ä¸´ç•Œèµ„æºçš„æŠ¢å é—®é¢˜ã€‚æ¯”è¾ƒå¸¸è§çš„ä¸€ç§æ–¹æ³•ä¾¿æ˜¯ä½¿ç”¨ä¿¡å·é‡ï¼ˆSemaphoresï¼‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;â–å¯¹ä¿¡å·é‡çš„æ“ä½œï¼Œä¸»è¦æ˜¯Pæ“ä½œï¼ˆwaitï¼‰å’ŒVæ“ä½œï¼ˆsignalï¼‰ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;* Pæ“ä½œ ( wait ) ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å…ˆæ£€æŸ¥ä¿¡å·é‡çš„å¤§å°ï¼Œè‹¥å€¼å¤§äºé›¶ï¼Œåˆ™å°†ä¿¡å·é‡å‡1ï¼ŒåŒæ—¶è¿›ç¨‹è·å¾—å…±äº«èµ„æºçš„è®¿é—®æƒé™ï¼Œç»§ç»­æ‰§è¡Œï¼›è‹¥å°äºæˆ–è€…ç­‰äºé›¶ï¼Œåˆ™è¯¥è¿›ç¨‹è¢«é˜»å¡åï¼Œè¿›å…¥ç­‰å¾…é˜Ÿåˆ—ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;* Væ“ä½œÂ ( signal )Â ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¯¥æ“ä½œå°†ä¿¡å·é‡çš„å€¼åŠ 1ï¼Œå¦‚æœæœ‰è¿›ç¨‹é˜»å¡ç€ç­‰å¾…è¯¥ä¿¡å·é‡ï¼Œé‚£ä¹ˆå…¶ä¸­ä¸€ä¸ªè¿›ç¨‹å°†è¢«å”¤é†’ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;CTO3&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¯çœ‹å‡ºï¼Œå¤šè¿›ç¨‹é”æ–¹æ¡ˆè·Ÿå¤šçº¿ç¨‹çš„é”æ–¹æ¡ˆå®ç°æ€è·¯å¤§åŒå°å¼‚ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬å°†äº’æ–¥çš„çº§åˆ«æ‹‰é«˜ï¼Œåˆ†å¸ƒå¼ç¯å¢ƒä¸‹ä¸åŒèŠ‚ç‚¹ä¸åŒè¿›ç¨‹æˆ–çº¿ç¨‹ä¹‹é—´çš„äº’æ–¥ï¼Œå°±æ˜¯åˆ†å¸ƒå¼é”çš„æŒ‘æˆ˜ä¹‹ä¸€ã€‚åé¢å†ç»†è®²ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¦å¤–ï¼Œåœ¨ä¼ ç»Ÿçš„åŸºäºæ•°æ®åº“çš„æ¶æ„ä¸­ï¼Œå¯¹äºæ•°æ®çš„æŠ¢å é—®é¢˜ä¹Ÿå¯ä»¥é€šè¿‡æ•°æ®åº“äº‹åŠ¡ï¼ˆACIDï¼‰æ¥ä¿è¯ã€‚åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œå‡ºäºå¯¹æ€§èƒ½ä»¥åŠä¸€è‡´æ€§æ•æ„Ÿåº¦çš„è¦æ±‚ï¼Œä½¿å¾—åˆ†å¸ƒå¼é”æˆä¸ºäº†ä¸€ç§æ¯”è¾ƒå¸¸è§è€Œé«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;â–&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;strong&gt;ä»ä¸Šé¢å¯¹äºå¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹é”çš„æ¦‚æ‹¬ï¼Œå¯ä»¥æ€»ç»“å‡ºé”çš„æŠ½è±¡æ¡ä»¶ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;1ï¼‰â€œéœ€è¦æœ‰å­˜å‚¨é”çš„ç©ºé—´ï¼Œå¹¶ä¸”é”çš„ç©ºé—´æ˜¯å¯ä»¥è®¿é—®åˆ°çš„â€ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¯¹äºå¤šçº¿ç¨‹å°±æ˜¯å†…å­˜ï¼ˆè¿›ç¨‹ä¸­ä¸åŒçš„çº¿ç¨‹éƒ½å¯ä»¥è¯»å†™ï¼‰ï¼Œå¤šè¿›ç¨‹ä¸­é€šè¿‡å…±äº«å†…å­˜çš„æ–¹å¼ï¼Œä¹Ÿæ˜¯æä¾›ä¸€å—åœ°æ–¹ï¼Œä¾›ä¸åŒè¿›ç¨‹è¯»å†™ã€‚ä¸»è¦ç›®çš„æ˜¯ä¿è¯ä¸åŒçš„è¿›çº¿ç¨‹æ”¹åŠ¨å¯¹äºå…¶ä»–è¿›çº¿ç¨‹å¯è§ï¼Œè¿›è€Œæ»¡è¶³äº’æ–¥æ€§éœ€æ±‚ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;UkB5&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2ï¼‰â€œé”éœ€è¦è¢«å”¯ä¸€æ ‡è¯†â€ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸åŒçš„å…±äº«èµ„æºï¼Œå¿…ç„¶éœ€è¦ç”¨ä¸åŒçš„é”è¿›è¡Œä¿æŠ¤ï¼Œå› æ­¤ç›¸åº”çš„é”å¿…é¡»æœ‰å”¯ä¸€çš„æ ‡è¯†ã€‚åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œé”å¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå¯¹è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ä¾¿æ˜¯è¿™ä¸ªå”¯ä¸€æ ‡è¯†ã€‚å¤šè¿›ç¨‹ä¸‹ï¼Œæ¯”å¦‚æœ‰åä¿¡å·é‡ï¼Œä¾¿æ˜¯ç”¨ç¡¬ç›˜ä¸­çš„æ–‡ä»¶åä½œä¸ºå”¯ä¸€æ ‡è¯†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;ognS&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;3ï¼‰â€œé”è¦æœ‰è‡³å°‘ä¸¤ç§çŠ¶æ€â€ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æœ‰é”ï¼Œæ²¡é”ã€‚å­˜åœ¨ï¼Œä¸å­˜åœ¨ç­‰ç­‰ã€‚å¾ˆå¥½ç†è§£ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ»¡è¶³ä¸Šè¿°ä¸‰ä¸ªæ¡ä»¶å°±å¯ä»¥å®ç°åŸºç¡€çš„åˆ†å¸ƒå¼é”äº†ã€‚ä½†æ˜¯éšç€æŠ€æœ¯çš„æ¼”è¿›ï¼Œ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;â–&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;strong&gt;ç›¸åº”åœ°ï¼Œ&lt;span&gt;å¯¹é”ä¹Ÿæå‡ºäº†æ›´é«˜çº§çš„æ¡ä»¶ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;1ï¼‰å¯é‡å…¥ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¤–å±‚å‡½æ•°è·å¾—é”ä¹‹åï¼Œå†…å±‚å‡½æ•°è¿˜å¯ä»¥è·å¾—é”ã€‚åŸå› æ˜¯éšç€è½¯ä»¶å¤æ‚æ€§å¢åŠ ï¼Œæ–¹æ³•åµŒå¥—è·å–é”å·²ç»å¾ˆéš¾é¿å…ã€‚ä½†æ˜¯ä»ä»£ç å±‚é¢å¾ˆéš¾åˆ†æå‡ºè¿™ä¸ªé—®é¢˜ï¼Œå› æ­¤æˆ‘ä»¬è¦ä½¿ç”¨å¯é‡å…¥é”ã€‚å¯¼è‡´é”éœ€è¦æ”¯æŒå¯é‡å…¥çš„åœºæ™¯ã€‚å¯¹äºå¯é‡å…¥çš„æ€è€ƒï¼Œæ¯ç§è¯­è¨€æœ‰è‡ªå·±çš„å“²å­¦å’Œå–èˆï¼Œ&lt;span&gt;å¦‚goå°±èˆå¼ƒäº†æ”¯æŒé‡å…¥ï¼šRecursive locking in Go [Â &lt;/span&gt;&lt;/span&gt;https://stackoverflow.com/questions/14670979/recursive-locking-in-go&lt;span&gt;Â &lt;span&gt;]ä»¥ågoåˆä¼šä¸ä¼šè®¤ä¸ºâ€œå¯é‡å…¥çœŸé¦™â€å‘¢ï¼Ÿå“ˆå“ˆï¼Œæˆ‘ä»¬æ‹­ç›®ä»¥å¾…ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;NaC5&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2ï¼‰é¿å…äº§ç”ŸæƒŠç¾¤æ•ˆåº”ï¼ˆHerd Effectï¼‰ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æƒŠç¾¤æ•ˆåº”æŒ‡ï¼Œåœ¨æœ‰å¤šä¸ªè¯·æ±‚ç­‰å¾…è·å–é”çš„æ—¶å€™ï¼Œä¸€æ—¦å æœ‰é”çš„çº¿ç¨‹é‡Šæ”¾ä¹‹åï¼Œæ‰€æœ‰ç­‰å¾…æ–¹éƒ½åŒæ—¶è¢«å”¤é†’ï¼Œå°è¯•æŠ¢å é”ã€‚ä½†æ˜¯ç»å¤§å¤šæ•°çš„æŠ¢å éƒ½æ˜¯ä¸å¿…è¦çš„ã€‚è¿™ç§æƒ…å†µåœ¨å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹ä¸­å¼€é”€åŒæ ·å¾ˆå¤§ã€‚è¦å°½é‡é¿å…è¿™ç§æƒ…å†µå‡ºç°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;PCZG&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;3ï¼‰å…¬å¹³é”å’Œéå…¬å¹³é”ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å…¬å¹³é”ï¼šä¼˜å…ˆæŠŠé”ç»™ç­‰å¾…æ—¶é—´æœ€é•¿çš„ä¸€æ–¹ï¼›éå…¬å¹³é”ï¼šä¸ä¿è¯ç­‰å¾…çº¿ç¨‹æ‹¿é”çš„é¡ºåºã€‚å…¬å¹³é”çš„å®ç°æˆæœ¬è¾ƒé«˜ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;4ï¼‰é˜»å¡é”å’Œè‡ªæ—‹é”ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸»è¦æ˜¯æ•ˆç‡çš„è€ƒè™‘ã€‚è‡ªæ—‹é”é€‚ç”¨äºä¸´ç•ŒåŒºæ“ä½œè€—æ—¶çŸ­çš„åœºæ™¯ï¼›é˜»å¡é”é€‚ç”¨äºä¸´ç•ŒåŒºæ“ä½œè€—æ—¶é•¿çš„åœºæ™¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;X7fS&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;5ï¼‰é”è¶…æ—¶ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é˜²æ­¢é‡Šæ”¾é”å¤±è´¥ï¼Œå‡ºç°æ­»é”çš„æƒ…å†µã€‚&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;42fr&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;6ï¼‰é«˜æ•ˆï¼Œé«˜å¯ç”¨ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åŠ é”å’Œè§£é”éœ€è¦é«˜æ•ˆï¼ŒåŒæ—¶ä¹Ÿéœ€è¦ä¿è¯é«˜å¯ç”¨é˜²æ­¢åˆ†å¸ƒå¼é”å¤±æ•ˆï¼Œå¯ä»¥å¢åŠ é™çº§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿˜æœ‰å¾ˆå¤šå…¶ä»–æ›´é«˜è¦æ±‚çš„æ¡ä»¶ï¼Œä¸ä¸€ä¸€åˆ—ä¸¾äº†ã€‚æœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥çœ‹çœ‹ç¼–ç¨‹å²ä¸Šé”çš„æ¼”è¿›è¿‡ç¨‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;h1/&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;â–&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;strong&gt;&lt;span&gt;4. åˆ†å¸ƒå¼é”&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;â–ä½¿ç”¨åˆ†å¸ƒå¼é”çš„å¿…è¦æ€§&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;1ï¼‰æœåŠ¡è¦æ±‚ï¼šéƒ¨ç½²çš„æœåŠ¡æœ¬èº«å°±å¤„äºåˆ†å¸ƒå¼ç¯å¢ƒä¸­&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2ï¼‰æ•ˆç‡ï¼šä½¿ç”¨åˆ†å¸ƒå¼é”å¯ä»¥é¿å…ä¸åŒèŠ‚ç‚¹é‡å¤ç›¸åŒçš„å·¥ä½œï¼Œè¿™äº›å·¥ä½œä¼šæµªè´¹èµ„æºã€‚æ¯”å¦‚ç”¨æˆ·ä»˜äº†é’±ä¹‹åæœ‰å¯èƒ½ä¸åŒèŠ‚ç‚¹ä¼šå‘å‡ºå¤šå°çŸ­ä¿¡&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;3ï¼‰æ­£ç¡®æ€§ï¼šè·Ÿ2ï¼‰ç±»ä¼¼ã€‚å¦‚æœä¸¤ä¸ªèŠ‚ç‚¹åœ¨åŒä¸€æ¡æ•°æ®ä¸Šé¢æ“ä½œï¼Œæ¯”å¦‚å¤šä¸ªèŠ‚ç‚¹æœºå™¨å¯¹åŒä¸€ä¸ªè®¢å•æ“ä½œä¸åŒçš„æµç¨‹æœ‰å¯èƒ½ä¼šå¯¼è‡´è¯¥ç¬”è®¢å•æœ€åçŠ¶æ€å‡ºç°é”™è¯¯ï¼Œé€ æˆæŸå¤±&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åŒ…æ‹¬ä½†ä¸é™äºè¿™äº›å¿…è¦æ€§ï¼Œåœ¨å¼ºçƒˆåœ°å‘¼å”¤æˆ‘ä»¬ä»Šå¤©çš„ä¸»è§’---â€œåˆ†å¸ƒå¼é”â€é—ªäº®ç™»åœºã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;nBwx&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;â–&lt;/span&gt;&lt;strong&gt;&lt;span&gt;5. åˆ†å¸ƒå¼é”å®ç°æ–¹æ¡ˆ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æœ‰äº†éåˆ†å¸ƒå¼é”çš„å®ç°æ€è·¯ï¼Œå’Œåˆ†å¸ƒå¼ç¯å¢ƒçš„æŒ‘æˆ˜ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹åˆ†å¸ƒå¼é”çš„å®ç°ç­–ç•¥ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åˆ†å¸ƒå¼é”æœ¬è´¨ä¸Šè¿˜æ˜¯è¦å®ç°ä¸€ä¸ªç®€å•çš„ç›®æ ‡---å ä¸€ä¸ªâ€œå‘â€ï¼Œå½“åˆ«çš„èŠ‚ç‚¹æœºå™¨ä¹Ÿè¦æ¥å æ—¶ï¼Œå‘ç°å·²ç»æœ‰äººå äº†ï¼Œå°±åªå¥½æ”¾å¼ƒæˆ–è€…ç¨åå†è¯•ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;â–å¤§ä½“åˆ†ä¸º4ç§&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;1ï¼‰ä½¿ç”¨æ•°æ®åº“å®ç°&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2ï¼‰ä½¿ç”¨æœ´ç´ Redisç­‰ç¼“å­˜ç³»ç»Ÿå®ç°&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;3ï¼‰ä½¿ç”¨ZooKeeperç­‰åˆ†å¸ƒå¼åè°ƒç³»ç»Ÿå®ç°&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;4ï¼‰ä½¿ç”¨Redissonæ¥å®ç°ï¼ˆæœ¬è´¨ä¸ŠåŸºäºRedisï¼‰&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å› ä¸ºåˆ©ç”¨mysqlå®ç°åˆ†å¸ƒå¼é”çš„æ€§èƒ½ä½ä»¥åŠæ”¹é€ å¤§ï¼Œæˆ‘ä»¬è¿™é‡Œé‡ç‚¹è®²ä¸€ä¸‹ä¸‹é¢3ç§å®ç°åˆ†å¸ƒå¼é”çš„æ–¹æ¡ˆã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;h2/&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;â–&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;5.1 æœ´ç´ Rediså®ç°æ–¹æ¡ˆ&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬å¾ªåºæ¸è¿›ï¼Œå¯¹æ¯”å‡ ç§å®ç°æ–¹å¼ï¼Œæ‰¾å‡ºä¼˜é›…çš„æ–¹å¼ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;æ–¹æ¡ˆ1ï¼šsetnx+delete&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;pre&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;1&lt;/span&gt;setnxÂ lock_keyÂ lock_value&lt;br/&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;Â &lt;span&gt;do&lt;/span&gt;Â sth&lt;br/&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;delete&lt;/span&gt;Â lock_key&lt;/span&gt;&lt;/p&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;ç¼ºç‚¹ï¼šä¸€æ—¦æœåŠ¡æŒ‚æ‰ï¼Œé”æ— æ³•è¢«åˆ é™¤é‡Šæ”¾ï¼Œä¼šå¯¼è‡´æ­»é”ã€‚ç¡¬ä¼¤ï¼Œpassï¼2&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;æ–¹æ¡ˆ2ï¼šsetnx + setex&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;pre&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;1&lt;/span&gt;setnxÂ lock_keyÂ lock_value&lt;br/&gt;&lt;span&gt;2&lt;/span&gt;setexÂ lock_keyÂ NÂ lock_valueÂ Â &lt;span&gt;//Â NÂ sè¶…æ—¶&lt;/span&gt;&lt;br/&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;//Â doÂ sth&lt;/span&gt;&lt;br/&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;delete&lt;/span&gt;Â lock_key&lt;/span&gt;&lt;/p&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;åœ¨æ–¹æ¡ˆ1çš„åŸºç¡€ä¸Šè®¾ç½®äº†è¶…æ—¶æ—¶é—´ã€‚ä½†æ˜¯è¿˜æ˜¯ä¼šå‡ºç°è·Ÿ1ä¸€æ ·çš„é—®é¢˜ã€‚å¦‚æœsetnxä¹‹åã€setexä¹‹å‰æœåŠ¡æŒ‚æ‰ï¼Œä¸€æ ·ä¼šé™·å…¥æ­»é”ã€‚æœ¬è´¨åŸå› æ˜¯ï¼Œsetnx/setexåˆ†ä¸ºäº†ä¸¤ä¸ªæ­¥éª¤ï¼ŒéåŸå­æ“ä½œã€‚ç¡¬ä¼¤ï¼Œpassï¼&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;æ–¹æ¡ˆ3ï¼šset ex nx&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;pre&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;1&lt;/span&gt;SETÂ lock_keyÂ lock_valueÂ EXÂ NÂ NXÂ &lt;span&gt;//NÂ sè¶…æ—¶&lt;/span&gt;&lt;br/&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;//Â doÂ sth&lt;/span&gt;&lt;br/&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;delete&lt;/span&gt;Â lock_key&lt;/span&gt;&lt;/p&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;å°†åŠ é”ã€è®¾ç½®è¶…æ—¶ä¸¤ä¸ªæ­¥éª¤åˆå¹¶ä¸ºä¸€ä¸ªåŸå­æ“ä½œï¼Œä»è€Œè§£å†³æ–¹æ¡ˆ1ã€2çš„é—®é¢˜ã€‚ï¼ˆRedisåŸç”Ÿå‘½ä»¤æ”¯æŒï¼ŒRedis versionéœ€è¦&amp;gt;=2.6.12ï¼Œæ»´æ»´ç”Ÿäº§ç¯å¢ƒRedis versionä¸€èˆ¬ä¸º3.2ï¼Œæ‰€ä»¥æ—¥å¸¸èƒ½å¤Ÿä½¿ç”¨ï¼‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¼˜ç‚¹ï¼šæ­¤æ–¹æ¡ˆç›®å‰å¤§å¤šæ•°sdkã€Rediséƒ¨ç½²æ–¹æ¡ˆéƒ½æ”¯æŒï¼Œå®ç°ç®€å•&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç¼ºç‚¹ï¼šä¼šå­˜åœ¨é”è¢«é”™è¯¯çš„é‡Šæ”¾ï¼Œè¢«é”™è¯¯çš„æŠ¢å çš„æƒ…å†µã€‚å¦‚ä¸‹å›¾ï¼šÂ &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-copyright=&quot;0&quot; data-ratio=&quot;0.5439739413680782&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jE5bOw22iaBvxHozhM8S9If1R4gBm2g4Yc20ibVicHzz1JXITFmVnRhrSyU7JX9bSzpPfJoibUg31XIIVTvic8yibf4A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1228&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™å—æœ‰2ä¸ªé—®é¢˜ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;1ï¼‰GCæœŸé—´ï¼Œclient1è¶…æ—¶æ—¶é—´å·²åˆ°ï¼Œå¯¼è‡´å°†client2é”™è¯¯åœ°æ”¾è¿›æ¥&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2ï¼‰client1æ‰§è¡Œå®Œé€»è¾‘åä¼šæ˜¾å¼è°ƒç”¨delï¼Œå°†æ‰€æœ‰çš„é”éƒ½é‡Šæ”¾äº†ï¼ˆæ­£ç¡®çš„æƒ…å†µåº”è¯¥åªé‡Šæ”¾è‡ªå·±çš„é”ï¼Œé”™è¯¯åœ°é‡Šæ”¾äº†client2çš„é”ï¼‰&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;æ–¹æ¡ˆ4ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨3çš„åŸºç¡€ä¸Šï¼Œå¯¹äºé—®é¢˜1ï¼Œå°†clientçš„è¶…æ—¶æ—¶é—´è®¾ç½®é•¿ä¸€äº›ï¼Œä¿è¯åªèƒ½é€šè¿‡æ˜¾å¼delæ¥é‡Šæ”¾é”ï¼Œè€Œè¶…æ—¶æ—¶é—´åªæ˜¯ä½œä¸ºä¸€ç§æœ€ç»ˆå…œåº•çš„æ–¹æ¡ˆã€‚é’ˆå¯¹é—®é¢˜2ï¼Œå¢åŠ å¯¹ value çš„æ£€æŸ¥ï¼Œåªè§£é™¤è‡ªå·±åŠ çš„é”ï¼Œä¸ºä¿è¯åŸå­æ€§ï¼Œåªèƒ½éœ€è¦é€šè¿‡luaè„šæœ¬å®ç°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;luaè„šæœ¬ï¼š&lt;/span&gt;https://redis.io/commands/eval&lt;/p&gt;&lt;p line=&quot;pxbd&quot;&gt;&lt;/p&gt;&lt;section&gt;&lt;pre&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;if&lt;/span&gt;Â redis.&lt;span&gt;call&lt;/span&gt;(&lt;span&gt;&quot;get&quot;&lt;/span&gt;,KEYS[&lt;span&gt;1&lt;/span&gt;])Â ==Â ARGV[&lt;span&gt;1&lt;/span&gt;]Â &lt;span&gt;then&lt;/span&gt;&lt;br/&gt;&lt;span&gt;2&lt;/span&gt;Â Â Â &lt;span&gt;return&lt;/span&gt;Â redis.&lt;span&gt;call&lt;/span&gt;(&lt;span&gt;&quot;del&quot;&lt;/span&gt;,KEYS[&lt;span&gt;1&lt;/span&gt;])&lt;br/&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;br/&gt;&lt;span&gt;4&lt;/span&gt;Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;0&lt;/span&gt;&lt;br/&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;end&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¦‚æœè¶…æ—¶æ—¶é—´è®¾ç½®é•¿ï¼Œåªèƒ½é€šè¿‡æ˜¾å¼çš„delæ¥é‡Šæ”¾é”ï¼Œå°±ä¸ä¼šå‡ºç°é—®é¢˜2ï¼ˆé”™è¯¯é‡Šæ”¾æ‰å…¶ä»–clientçš„é”ï¼‰ã€‚è·Ÿæ»´æ»´KV storeçš„ç‹æ–ŒåŒå­¦è®¨è®ºè¿‡ï¼Œç›®å‰æ²¡æœ‰æ‰¾åˆ°æ–¹æ¡ˆ4ä¼˜äºæ–¹æ¡ˆ3ï¼ˆåªè¦è¶…æ—¶æ—¶é—´è®¾ç½®çš„é•¿ä¸€äº›ï¼‰çš„åœºæ™¯ã€‚æ‰€ä»¥ï¼Œåœ¨æˆ‘çš„è®¤çŸ¥ä¸­ï¼Œæ–¹æ¡ˆ4è·Ÿæ–¹æ¡ˆ3çš„ä¼˜åŠ¿ä¸€æ ·ï¼Œä½†æ˜¯æ–¹æ¡ˆ3çš„å®ç°æˆæœ¬æ˜æ˜¾è¦ä½å¾ˆå¤šã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;h2/&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;æœ´ç´ Redisæ–¹æ¡ˆå°ç»“&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ–¹æ¡ˆ3ç”¨çš„æœ€å¤šï¼Œå®ç°æˆæœ¬å°ï¼Œå¯¹äºå¤§éƒ¨åˆ†åœºæ™¯ï¼Œå°†è¶…æ—¶æ—¶é—´è®¾ç½®çš„é•¿ä¸€äº›ï¼Œæå°‘å‡ºç°é—®é¢˜ã€‚åŒæ—¶æœ¬æ–¹æ¡ˆå¯¹ä¸åŒè¯­è¨€çš„å‹å¥½åº¦æé«˜ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;CEKs&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;â–&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;5.2 ZooKeeperå®ç°æ–¹æ¡ˆ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬å…ˆç®€è¦ä»‹ç»ä¸€äº›ZooKeeperï¼ˆä»¥ä¸‹ç®€ç§°ZKï¼‰ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ZooKeeperæ˜¯ä¸€ç§â€œåˆ†å¸ƒå¼åè°ƒæœåŠ¡â€ã€‚æ‰€è°“åˆ†å¸ƒå¼åè°ƒæœåŠ¡ï¼Œå¯ä»¥åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å…±äº«é…ç½®ï¼Œåè°ƒé”èµ„æºï¼Œæä¾›å‘½åæœåŠ¡ç­‰ã€‚ä¸ºè¯»å¤šå†™å°‘çš„åœºæ™¯æ‰€è®¾è®¡ï¼ŒZKä¸­çš„èŠ‚ç‚¹ï¼ˆä»¥ä¸‹ç®€ç§°ZNodeï¼‰éå¸¸é€‚åˆç”¨äºå­˜å‚¨å°‘é‡çš„çŠ¶æ€å’Œé…ç½®ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;å¯¹ZKå¸¸è§çš„æ“ä½œï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;createï¼šåˆ›å»ºèŠ‚ç‚¹&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;deleteï¼šåˆ é™¤èŠ‚ç‚¹&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;existsï¼šåˆ¤æ–­ä¸€ä¸ªèŠ‚ç‚¹çš„æ•°æ®&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;setdataï¼šè®¾ç½®ä¸€ä¸ªèŠ‚ç‚¹çš„æ•°æ®&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;getchildrenï¼šè·å–èŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰å­èŠ‚ç‚¹&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™å…¶ä¸­ï¼Œexistsï¼ŒgetDataï¼ŒgetChildrenå±äºè¯»æ“ä½œã€‚Zookeeperå®¢æˆ·ç«¯åœ¨è¯·æ±‚è¯»æ“ä½œçš„æ—¶å€™ï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦è®¾ç½®Watchï¼ˆç›‘å¬æœºåˆ¶ï¼‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;ä»€ä¹ˆæ˜¯Watchï¼Ÿ&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;pUaL&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Watchæœºåˆ¶æ˜¯zkä¸­éå¸¸æœ‰ç”¨çš„åŠŸèƒ½ã€‚æˆ‘ä»¬å¯ä»¥ç†è§£æˆæ˜¯æ³¨å†Œåœ¨ç‰¹å®šZnodeä¸Šçš„è§¦å‘å™¨ã€‚å½“è¿™ä¸ªZnodeå‘ç”Ÿæ”¹å˜ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨äº†createï¼Œdeleteï¼ŒsetDataæ–¹æ³•çš„æ—¶å€™ï¼Œå°†ä¼šè§¦å‘Znodeä¸Šæ³¨å†Œçš„å¯¹åº”äº‹ä»¶ï¼Œè¯·æ±‚Watchçš„å®¢æˆ·ç«¯ä¼šæ¥æ”¶åˆ°å¼‚æ­¥é€šçŸ¥ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬åœ¨å®ç°åˆ†å¸ƒå¼é”çš„æ—¶å€™ï¼Œæ­£æ˜¯é€šè¿‡Watchæœºåˆ¶ï¼Œæ¥é€šçŸ¥æ­£åœ¨ç­‰å¾…çš„sessionç›¸å…³é”é‡Šæ”¾çš„ä¿¡æ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;ä»€ä¹ˆæ˜¯ZNodeï¼Ÿ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ZNodeå°±æ˜¯ZKä¸­çš„èŠ‚ç‚¹ã€‚ZooKeeperèŠ‚ç‚¹æ˜¯æœ‰ç”Ÿå‘½å‘¨æœŸçš„ï¼Œè¿™å–å†³äºèŠ‚ç‚¹çš„ç±»å‹ã€‚åœ¨ ZooKeeper ä¸­ï¼ŒèŠ‚ç‚¹ç±»å‹å¯ä»¥åˆ†ä¸ºä¸´æ—¶èŠ‚ç‚¹ï¼ˆEPHEMERALï¼‰ï¼Œæ—¶åºèŠ‚ç‚¹ï¼ˆSEQUENTIAL ï¼‰ï¼ŒæŒä¹…èŠ‚ç‚¹ï¼ˆPERSISTENT ï¼‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;ä¸´æ—¶èŠ‚ç‚¹ï¼ˆEPHEMERALï¼‰ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;èŠ‚ç‚¹çš„ç”Ÿå‘½å‘¨æœŸè·Ÿsessionç»‘å®šï¼Œsessionåˆ›å»ºçš„èŠ‚ç‚¹ï¼Œä¸€æ—¦è¯¥sessionå¤±æ•ˆï¼Œè¯¥èŠ‚ç‚¹å°±ä¼šè¢«åˆ é™¤ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;ä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼ˆEPHEMERAL_SEQUENTIALï¼‰ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨ä¸´æ—¶èŠ‚ç‚¹çš„åŸºç¡€ä¸Šå¢åŠ äº†é¡ºåºã€‚æ¯ä¸ªçˆ¶ç»“ç‚¹ä¼šä¸ºè‡ªå·±çš„ç¬¬ä¸€çº§å­èŠ‚ç‚¹ç»´æŠ¤ä¸€ä»½æ—¶åºã€‚åœ¨åˆ›å»ºå­èŠ‚ç‚¹çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨åŠ ä¸Šæ•°å­—åç¼€ï¼Œè¶Šååˆ›å»ºçš„èŠ‚ç‚¹ï¼Œé¡ºåºè¶Šå¤§ï¼Œåç¼€è¶Šå¤§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;æŒä¹…èŠ‚ç‚¹ï¼ˆPERSISTENT ï¼‰ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;èŠ‚ç‚¹åˆ›å»ºä¹‹åå°±ä¸€ç›´å­˜åœ¨ï¼Œä¸ä¼šå› ä¸ºsessionå¤±æ•ˆè€Œæ¶ˆå¤±ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;æŒä¹…é¡ºåºèŠ‚ç‚¹ï¼ˆPERSISTENT_SEQUENTIALï¼‰ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸ä¸´æ—¶é¡ºåºèŠ‚ç‚¹åŒç†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Â &lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;ZNodeä¸­çš„æ•°æ®ç»“æ„ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;dataï¼ˆznodeå­˜å‚¨çš„æ•°æ®ä¿¡æ¯ï¼‰ï¼Œaclï¼ˆè®°å½•znodeçš„è®¿é—®æƒé™ï¼Œå³å“ªäº›äººæˆ–å“ªäº›ipå¯ä»¥è®¿é—®æœ¬èŠ‚ç‚¹ï¼‰ï¼Œstatï¼ˆåŒ…å«znodeçš„å„ç§å…ƒæ•°æ®ï¼Œæ¯”å¦‚äº‹åŠ¡idï¼Œç‰ˆæœ¬å·ï¼Œæ—¶é—´æˆ³ï¼Œå¤§å°ç­‰ç­‰ï¼‰ï¼Œchildï¼ˆå½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹å¼•ç”¨ï¼‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åˆ©ç”¨ZKå®ç°åˆ†å¸ƒå¼é”ï¼Œä¸»è¦å¾—ç›ŠäºZKä¿è¯äº†æ•°æ®çš„å¼ºä¸€è‡´æ€§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸‹é¢è¯´è¯´é€šè¿‡zkç®€å•å®ç°ä¸€ä¸ªä¿æŒç‹¬å çš„é”ï¼ˆåˆ©ç”¨ä¸´æ—¶èŠ‚ç‚¹çš„ç‰¹æ€§ï¼‰ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬å¯ä»¥å°†ZKä¸Šçš„ZNodeçœ‹æˆä¸€æŠŠé”ï¼ˆç±»ä¼¼äºRedisæ–¹æ¡ˆä¸­çš„keyï¼‰ã€‚å¤šä¸ªsessionéƒ½å»åˆ›å»ºåŒä¸€ä¸ªdistribute_lockèŠ‚ç‚¹ï¼Œåªä¼šæœ‰ä¸€ä¸ªåˆ›å»ºæˆåŠŸçš„sessionã€‚ç›¸å½“äºåªæœ‰è¯¥sessionè·å–åˆ°é”ï¼Œå…¶ä»–sessionæ²¡æœ‰è·å–åˆ°é”ã€‚åœ¨è¯¥æˆåŠŸè·é”çš„sessionå¤±æ•ˆå‰ï¼Œé”å°†ä¼šä¸€ç›´é˜»å¡ä½ã€‚sessionå¤±æ•ˆæ—¶ï¼ŒèŠ‚ç‚¹ä¼šè‡ªåŠ¨è¢«åˆ é™¤ï¼Œé”è¢«è§£é™¤ã€‚ï¼ˆç±»ä¼¼äºRedisæ–¹æ¡ˆä¸­çš„expireï¼‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸Šè¿°å®ç°æ–¹æ¡ˆè·ŸRedisæ–¹æ¡ˆ3çš„å®ç°æ•ˆæœä¸€æ ·ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;ä½†æ˜¯ï¼Œè¿™æ ·çš„é”æœ‰æ²¡æœ‰æ”¹è¿›çš„åœ°æ–¹ï¼Ÿå½“ç„¶ï¼&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;1ï¼‰æˆ‘ä»¬å¯èƒ½ä¼šæœ‰å¯é‡å…¥çš„éœ€æ±‚ï¼Œå› æ­¤å¸Œæœ›èƒ½æœ‰å¯é‡å…¥çš„é”æœºåˆ¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2ï¼‰æœ‰äº›åœºæ™¯ä¸‹ï¼Œåœ¨äº‰æŠ¢é”çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ—¢ä¸æƒ³ä¸€æ¬¡äº‰æŠ¢ä¸åˆ°å°±passï¼Œä¹Ÿä¸æƒ³ä¸€ç›´é˜»å¡ä½ç›´åˆ°è·å–åˆ°é”ã€‚ä¸€ä¸ªæœ´ç´ çš„éœ€æ±‚æ˜¯ï¼Œæˆ‘ä»¬å¸Œæœ›æœ‰è¶…æ—¶æ—¶é—´æ¥æ§åˆ¶æ˜¯å¦å»ä¸Šé”ã€‚æ›´è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬ä¸æƒ³ä¸»åŠ¨çš„å»æŸ¥åˆ°åº•æ˜¯å¦èƒ½å¤ŸåŠ é”ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿæœ‰äº‹ä»¶æœºåˆ¶æ¥é€šçŸ¥æ˜¯å¦èƒ½å¤Ÿä¸Šé”ã€‚ï¼ˆè¿™é‡Œï¼Œä½ æ˜¯ä¸æ˜¯æƒ³åˆ°äº†ZKçš„Watchæœºåˆ¶å‘¢ï¼Ÿï¼‰&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;è¦æ»¡è¶³è¿™æ ·çš„éœ€æ±‚å°±éœ€è¦æ§åˆ¶æ—¶åºã€‚åˆ©ç”¨é¡ºåºä¸´æ—¶èŠ‚ç‚¹å’ŒWatchæœºåˆ¶çš„ç‰¹æ€§ï¼Œæ¥å®ç°ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬äº‹å…ˆåˆ›å»º/distribute_lockèŠ‚ç‚¹ï¼Œå¤šä¸ªsessionåœ¨å®ƒä¸‹é¢åˆ›å»ºä¸´æ—¶æœ‰åºèŠ‚ç‚¹ã€‚ç”±äºzkçš„ç‰¹æ€§ï¼Œ/distribute_lockè¯¥èŠ‚ç‚¹ä¼šç»´æŠ¤ä¸€ä»½sequenceï¼Œæ¥ä¿è¯å­èŠ‚ç‚¹åˆ›å»ºçš„æ—¶åºæ€§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;å…·ä½“å®ç°å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;1ï¼‰å®¢æˆ·ç«¯è°ƒç”¨create()æ–¹æ³•åœ¨/distribute_lockèŠ‚ç‚¹ä¸‹åˆ›å»ºEPHEMERAL_SEQUENTIALèŠ‚ç‚¹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2ï¼‰å®¢æˆ·ç«¯è°ƒç”¨getChildren(â€œ/distribute_lockâ€)æ–¹æ³•æ¥è·å–æ‰€æœ‰å·²ç»åˆ›å»ºçš„å­èŠ‚ç‚¹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;3ï¼‰å®¢æˆ·ç«¯è·å–åˆ°æ‰€æœ‰å­èŠ‚ç‚¹pathä¹‹åï¼Œå¦‚æœå‘ç°è‡ªå·±åœ¨æ­¥éª¤1ä¸­åˆ›å»ºçš„èŠ‚ç‚¹åºå·æœ€å°ï¼Œé‚£ä¹ˆå°±è®¤ä¸ºè¿™ä¸ªå®¢æˆ·ç«¯è·å¾—äº†é”ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;4ï¼‰å¦‚æœåœ¨æ­¥éª¤3ä¸­å‘ç°è‡ªå·±å¹¶éæ‰€æœ‰å­èŠ‚ç‚¹ä¸­æœ€å°çš„ï¼Œè¯´æ˜è‡ªå·±è¿˜æ²¡æœ‰è·å–åˆ°é”ã€‚æ­¤æ—¶å®¢æˆ·ç«¯éœ€è¦æ‰¾åˆ°æ¯”è‡ªå·±å°çš„é‚£ä¸ªèŠ‚ç‚¹ï¼Œç„¶åå¯¹å…¶è°ƒç”¨exist()æ–¹æ³•ï¼ŒåŒæ—¶æ³¨å†Œäº‹ä»¶ç›‘å¬ã€‚éœ€è¦æ³¨æ„æ˜¯ï¼Œåªåœ¨æ¯”è‡ªå·±å°ä¸€å·çš„èŠ‚ç‚¹ä¸Šæ³¨å†ŒWatchäº‹ä»¶ã€‚å¦‚æœåœ¨æ¯”è‡ªå·±éƒ½å°çš„èŠ‚ç‚¹ä¸Šæ³¨å†ŒWatchäº‹ä»¶ï¼Œå°†ä¼šå‡ºç°æƒŠç¾¤æ•ˆåº”ï¼Œè¦é¿å…ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;5ï¼‰ä¹‹åå½“è¿™ä¸ªè¢«å…³æ³¨çš„èŠ‚ç‚¹è¢«ç§»é™¤äº†ï¼Œå®¢æˆ·ç«¯ä¼šæ”¶åˆ°ç›¸åº”çš„é€šçŸ¥ã€‚è¿™ä¸ªæ—¶å€™å®¢æˆ·ç«¯éœ€è¦å†æ¬¡è°ƒç”¨getChildren(â€œ/distribute_lockâ€)æ–¹æ³•æ¥è·å–æ‰€æœ‰å·²ç»åˆ›å»ºçš„å­èŠ‚ç‚¹ï¼Œç¡®ä¿è‡ªå·±ç¡®å®æ˜¯æœ€å°çš„èŠ‚ç‚¹äº†ï¼Œç„¶åè¿›å…¥æ­¥éª¤3ï¼‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Curatoræ¡†æ¶å°è£…äº†å¯¹ZKçš„apiæ“ä½œã€‚ä»¥Javaä¸ºä¾‹æ¥è¿›è¡Œæ¼”ç¤ºï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¼•å…¥ä¾èµ–ï¼šÂ &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;pre&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;span&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;2&lt;/span&gt;Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;org.apache.curator&lt;span&gt;&amp;lt;/&lt;span&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;3&lt;/span&gt;Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;curator-recipes&lt;span&gt;&amp;lt;/&lt;span&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;4&lt;/span&gt;Â Â Â &lt;span&gt;&amp;lt;&lt;span&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;2.11.1&lt;span&gt;&amp;lt;/&lt;span&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p line=&quot;LuWY&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä½¿ç”¨çš„æ—¶å€™éœ€è¦æ³¨æ„Curatoræ¡†æ¶å’ŒZKçš„ç‰ˆæœ¬å…¼å®¹é—®é¢˜ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä»¥æ’ä»–é”ä¸ºä¾‹ï¼Œçœ‹çœ‹æ€ä¹ˆä½¿ç”¨ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;pre&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt; 1&lt;/span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;TestLock&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;span&gt; 2&lt;/span&gt;&lt;br/&gt;&lt;span&gt; 3&lt;/span&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â voidÂ main(String[]Â args)Â throwsÂ &lt;span&gt;Exception&lt;/span&gt;Â {&lt;br/&gt;&lt;span&gt; 4&lt;/span&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//åˆ›å»ºzookeeperçš„å®¢æˆ·ç«¯&lt;/span&gt;&lt;br/&gt;&lt;span&gt; 5&lt;/span&gt;Â Â Â Â Â Â Â Â RetryPolicyÂ retryPolicyÂ =Â &lt;span&gt;new&lt;/span&gt;Â ExponentialBackoffRetry(&lt;span&gt;1000&lt;/span&gt;,Â &lt;span&gt;3&lt;/span&gt;);&lt;br/&gt;&lt;span&gt; 6&lt;/span&gt;Â Â Â Â Â Â Â Â CuratorFrameworkÂ clientÂ =Â CuratorFrameworkFactory.newClient(â€œip:port&lt;span&gt;&quot;,Â retryPolicy);&lt;br/&gt;&lt;span&gt; 7&lt;/span&gt;Â Â Â Â Â Â Â Â client.start();&lt;br/&gt;&lt;span&gt; 8&lt;/span&gt;&lt;br/&gt;&lt;span&gt; 9&lt;/span&gt;Â Â Â Â Â Â Â Â //åˆ›å»ºåˆ†å¸ƒå¼é”,Â é”ç©ºé—´çš„æ ¹èŠ‚ç‚¹è·¯å¾„ä¸º/sunnyzengqi/curator/lock&lt;br/&gt;&lt;span&gt;10&lt;/span&gt;Â Â Â Â Â Â Â Â InterProcessMutexÂ mutexÂ =Â newÂ InterProcessMutex(client,Â &quot;&lt;/span&gt;/sunnyzengqi/curator/lock&lt;span&gt;&quot;);&lt;br/&gt;&lt;span&gt;11&lt;/span&gt;Â Â Â Â Â Â Â Â mutex.acquire();&lt;br/&gt;&lt;span&gt;12&lt;/span&gt;Â Â Â Â Â Â Â Â //è·å¾—äº†é”,Â è¿›è¡Œä¸šåŠ¡æµç¨‹&lt;br/&gt;&lt;span&gt;13&lt;/span&gt;Â Â Â Â Â Â Â Â System.out.println(&quot;&lt;/span&gt;EnterÂ mutex&lt;span&gt;&quot;);&lt;br/&gt;&lt;span&gt;14&lt;/span&gt;Â Â Â Â Â Â Â Â Thread.sleep(10000);&lt;br/&gt;&lt;span&gt;15&lt;/span&gt;Â Â Â Â Â Â Â Â //å®Œæˆä¸šåŠ¡æµç¨‹,Â é‡Šæ”¾é”&lt;br/&gt;&lt;span&gt;16&lt;/span&gt;Â Â Â Â Â Â Â Â mutex.release();&lt;br/&gt;&lt;span&gt;17&lt;/span&gt;Â Â Â Â Â Â Â Â //å…³é—­å®¢æˆ·ç«¯&lt;br/&gt;&lt;span&gt;18&lt;/span&gt;Â Â Â Â Â Â Â Â client.close();&lt;br/&gt;&lt;span&gt;19&lt;/span&gt;Â Â Â Â }&lt;br/&gt;&lt;span&gt;20&lt;/span&gt;}&lt;br/&gt;&lt;span&gt;21&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;Â &lt;span&gt;â–³å·¦æ»‘æµè§ˆå…¨è²Œ&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸Šé¢ä»£ç åœ¨ä¸šåŠ¡æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œåœ¨ZKçš„/sunnyzengqi/curator/lockè·¯å¾„ä¸‹ï¼Œä¼šåˆ›å»ºä¸€ä¸ªä¸´æ—¶èŠ‚ç‚¹æ¥å ä½ã€‚ç›¸åŒçš„ä»£ç ï¼Œåœ¨ä¸¤ä¸ªæœºå™¨èŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œå¯ä»¥çœ‹åˆ°è¯¥è·¯å¾„ä¸‹åˆ›å»ºäº†ä¸¤ä¸ªä¸´æ—¶èŠ‚ç‚¹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-backh=&quot;302&quot; data-backw=&quot;556&quot; data-before-oversubscription-url=&quot;https://mmbiz.qpic.cn/mmbiz_png/jE5bOw22iaBvxHozhM8S9If1R4gBm2g4Yv6vCkkWjSf9H4991kwCskFAo0c9hDIMIXs3ZXANjasunlntGdpIaKw/0?wx_fmt=png&quot; data-copyright=&quot;0&quot; data-ratio=&quot;0.5439739413680782&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jE5bOw22iaBvxHozhM8S9If1R4gBm2g4YXSxlU1gM8nvc602DwgrxGID2CpkG7ltT8MT93JibGa272Q5hB61vdJQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1228&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-backh=&quot;146&quot; data-backw=&quot;501&quot; data-before-oversubscription-url=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/jE5bOw22iaBvxHozhM8S9If1R4gBm2g4YHs0fNHJJV7wdG6I9OvZxe54n7gK01Ilm0Eng1lra99y88UvgR8Jxow/0?wx_fmt=jpeg&quot; data-croporisrc=&quot;https://mmbiz.qpic.cn/mmbiz_png/jE5bOw22iaBvxHozhM8S9If1R4gBm2g4Yts9zjpAN4TuHYu6D803envEX7nqODODFQT5vSPcNVTceXiaFAPpPWNw/0?wx_fmt=png&quot; data-cropx1=&quot;61.84172661870504&quot; data-cropx2=&quot;1168.36690647482&quot; data-cropy1=&quot;172.27338129496403&quot; data-cropy2=&quot;494.7338129496403&quot; data-ratio=&quot;0.2917795844625113&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/jE5bOw22iaBvxHozhM8S9If1R4gBm2g4YHs0fNHJJV7wdG6I9OvZxe54n7gK01Ilm0Eng1lra99y88UvgR8Jxow/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1107&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-backh=&quot;145&quot; data-backw=&quot;502&quot; data-before-oversubscription-url=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/jE5bOw22iaBvxHozhM8S9If1R4gBm2g4YO2XW7A4xoooeCtMPjQib3QcrlFJolia6bPBuPVRhADHl9yFNuVa9VG4g/0?wx_fmt=jpeg&quot; data-croporisrc=&quot;https://mmbiz.qpic.cn/mmbiz_png/jE5bOw22iaBvxHozhM8S9If1R4gBm2g4YaYIc6diaVV5Ys5ficmCoFOXUl6Qcz8pIUHKibAadm71ew6hibqrq6HfUicw/0?wx_fmt=png&quot; data-cropx1=&quot;59.63309352517986&quot; data-cropx2=&quot;1168.36690647482&quot; data-cropy1=&quot;174.4820143884892&quot; data-cropy2=&quot;494.7338129496403&quot; data-ratio=&quot;0.2894499549143372&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/jE5bOw22iaBvxHozhM8S9If1R4gBm2g4YO2XW7A4xoooeCtMPjQib3QcrlFJolia6bPBuPVRhADHl9yFNuVa9VG4g/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1109&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿è¡Œå‘½ä»¤echo wchc | nc localhost 2181æŸ¥çœ‹watchä¿¡æ¯ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-copyright=&quot;0&quot; data-ratio=&quot;0.5439739413680782&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jE5bOw22iaBvxHozhM8S9If1R4gBm2g4YGEqB7hzZciaJrqwBOnRmjZG2x7eHfYeZEbH3ME1zicOM4ep86uicBbYfQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1228&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¯ä»¥çœ‹åˆ°lock1èŠ‚ç‚¹çš„sessionåœ¨ç›‘å¬èŠ‚ç‚¹lock0çš„å˜åŠ¨ã€‚æ­¤æ—¶æ˜¯lock0è·å–åˆ°é”ã€‚ç­‰åˆ°lock0æ‰§è¡Œå®Œï¼Œsessionä¼šå¤±æ•ˆï¼Œè§¦å‘Watchæœºåˆ¶ï¼Œé€šçŸ¥lock1çš„sessionè¯´é”å·²ç»è¢«é‡Šæ”¾äº†ã€‚è¿™æ—¶ï¼Œlock1å¯ä»¥æ¥æŠ¢å é”ï¼Œè¿›è€Œæ‰§è¡Œè‡ªå·±çš„æ“ä½œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é™¤äº†ç®€å•çš„æ’å®ƒé”çš„å®ç°ï¼Œè¿˜å¯ä»¥åˆ©ç”¨ZKçš„ç‰¹æ€§æ¥å®ç°æ›´é«˜çº§çš„é”ï¼ˆæ¯”å¦‚ä¿¡å·é‡ï¼Œè¯»å†™é”ï¼Œè”é”ï¼‰ç­‰ï¼Œè¿™é‡Œé¢æœ‰å¾ˆå¤šçš„ç©æ³•ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;FjLD&quot;&gt;&lt;/p&gt;&lt;h2/&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;ZooKeeperæ–¹æ¡ˆå°ç»“&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;èƒ½å¤Ÿå®ç°å¾ˆå¤šå…·æœ‰æ›´é«˜æ¡ä»¶çš„é”æœºåˆ¶ï¼Œå¹¶ä¸”ç”±äºZKä¼˜è¶Šçš„sessionå’Œwatchæœºåˆ¶ï¼Œé€‚ç”¨äºå¤æ‚çš„åœºæ™¯ã€‚å› ä¸ºæœ‰ä¹…ç»æ£€éªŒçš„Curatoræ¡†æ¶ï¼Œé›†æˆäº†å¾ˆå¤šåŸºäºZKçš„åˆ†å¸ƒå¼é”çš„apiï¼Œå¯¹äºJavaè¯­è¨€éå¸¸å‹å¥½ã€‚å¯¹äºå…¶ä»–è¯­è¨€ï¼Œè™½ç„¶ä¹Ÿæœ‰ä¸€äº›å¼€æºé¡¹ç›®å°è£…äº†å®ƒçš„apiï¼Œä½†æ˜¯ç¨³å®šæ€§å’Œæ•ˆç‡éœ€è¦è‡ªå·±å»å®é™…æ£€éªŒã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;h2/&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;â–&lt;/span&gt;5.3 Redissonå®ç°æ–¹æ¡ˆ&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;æˆ‘ä»¬å…ˆç®€è¦ä»‹ç»ä¸€ä¸‹Redissonï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p line=&quot;LzDo&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Redissonæ˜¯Javaè¯­è¨€ç¼–å†™çš„åŸºäºRedisçš„clientç«¯ã€‚åŠŸèƒ½ä¹Ÿéå¸¸å¼ºå¤§ï¼ŒåŠŸèƒ½åŒ…æ‹¬ï¼šåˆ†å¸ƒå¼å¯¹è±¡ï¼Œåˆ†å¸ƒå¼é›†åˆï¼Œåˆ†å¸ƒå¼é”å’ŒåŒæ­¥å™¨ï¼Œåˆ†å¸ƒå¼æœåŠ¡ç­‰ã€‚è¢«å¤§å®¶ç†ŸçŸ¥çš„åœºæ™¯è¿˜æ˜¯åœ¨åˆ†å¸ƒå¼é”çš„åœºæ™¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;BtxK&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸ºäº†è§£å†³åŠ é”çº¿ç¨‹åœ¨æ²¡æœ‰è§£é”ä¹‹å‰å´©æºƒè¿›è€Œå‡ºç°æ­»é”çš„é—®é¢˜ï¼Œä¸åŒäºæœ´ç´ Redisä¸­é€šè¿‡è®¾ç½®è¶…æ—¶æ—¶é—´æ¥å¤„ç†ã€‚Redissoné‡‡ç”¨äº†æ–°çš„å¤„ç†æ–¹å¼ï¼šRedissonå†…éƒ¨æä¾›äº†ä¸€ä¸ªç›‘æ§é”çš„çœ‹é—¨ç‹—ï¼Œå®ƒçš„ä½œç”¨æ˜¯åœ¨Redissonå®ä¾‹è¢«å…³é—­å‰ï¼Œä¸æ–­çš„å»¶é•¿é”çš„æœ‰æ•ˆæœŸã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è·ŸZookeeperç±»ä¼¼ï¼ŒRedissonä¹Ÿæä¾›äº†è¿™å‡ ç§åˆ†å¸ƒå¼é”ï¼šå¯é‡å…¥é”ï¼Œå…¬å¹³é”ï¼Œè”é”ï¼Œçº¢é”ï¼Œè¯»å†™é”ç­‰ã€‚å…·ä½“æ€ä¹ˆç”¨è¿™é‡Œä¸å±•å¼€ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªå·±å»å®éªŒã€‚&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;XnaC&quot;&gt;&lt;/p&gt;&lt;h2/&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Redissonæ–¹æ¡ˆå°ç»“&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è·ŸZKä¸€æ ·ï¼Œéƒ½èƒ½å¤Ÿå®ç°å¾ˆå¤šå…·æœ‰æ›´é«˜æ¡ä»¶çš„é”æœºåˆ¶ï¼Œé€‚ç”¨äºå¤æ‚çš„åœºæ™¯ã€‚ä½†å¯¹è¯­è¨€éå¸¸æŒ‘å‰”ï¼Œç›®å‰åªèƒ½æ”¯æŒJavaè¯­è¨€ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;h1/&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;â–&lt;/strong&gt;&lt;/span&gt;&lt;strong&gt;&lt;span&gt;6. æ€»ç»“&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸Šä¸€èŠ‚ï¼Œæˆ‘ä»¬è®¨è®ºäº†ä¸‰ç§å®ç°çš„æ–¹æ¡ˆï¼šæœ´ç´ Rediså®ç°æ–¹æ¡ˆï¼ŒZooKeeperå®ç°æ–¹æ¡ˆï¼ŒRedissonå®ç°æ–¹æ¡ˆã€‚ç”±äºç¬¬1ç§ä¸ç¬¬3ç§éƒ½æ˜¯åŸºäºRedisï¼Œæ‰€ä»¥ä¸»è¦æ˜¯ZKå’ŒåŸºäºRedisä¸¤ç§ã€‚æˆ‘ä»¬ä¸ç¦æƒ³é—®ï¼Œåœ¨å®ç°åˆ†å¸ƒå¼é”ä¸Šï¼ŒåŸºäºZKä¸åŸºäºRedisçš„æ–¹æ¡ˆï¼Œæœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;91oY&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;1ï¼‰é”çš„æ—¶é•¿è®¾ç½®ä¸Šï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¾—ç›ŠäºZKçš„sessionæœºåˆ¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥æŒæœ‰é”ä»»æ„é•¿çš„æ—¶é—´ï¼Œè¿™å¯ä»¥ç¡®ä¿å®ƒåšå®Œæ‰€æœ‰éœ€è¦çš„èµ„æºè®¿é—®æ“ä½œä¹‹åå†é‡Šæ”¾é”ã€‚é¿å…äº†åŸºäºRedisçš„é”å¯¹äºæœ‰æ•ˆæ—¶é—´åˆ°åº•è®¾ç½®å¤šé•¿çš„ä¸¤éš¾é—®é¢˜ã€‚å®é™…ä¸Šï¼ŒåŸºäºZooKeeperçš„é”æ˜¯ä¾é Sessionï¼ˆå¿ƒè·³ï¼‰æ¥ç»´æŒé”çš„æŒæœ‰çŠ¶æ€çš„ï¼Œè€ŒRedisä¸æ”¯æŒSesionã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¼˜åŠ¿ï¼šZK&amp;gt;Redisson&amp;gt;æœ´ç´ Redisã€‚&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;7GVc&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;2ï¼‰ç›‘å¬æœºåˆ¶ä¸Šï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¾—ç›ŠäºZKçš„watchæœºåˆ¶ï¼Œåœ¨è·å–é”å¤±è´¥ä¹‹åå¯ä»¥ç­‰å¾…é”é‡æ–°é‡Šæ”¾çš„äº‹ä»¶ã€‚è¿™è®©å®¢æˆ·ç«¯å¯¹é”çš„ä½¿ç”¨æ›´åŠ çµæ´»ã€‚é¿å…äº†Redisæ–¹æ¡ˆä¸»è¦å»è½®è¯¢çš„æ–¹å¼ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¼˜åŠ¿ï¼šZK&amp;gt;Redisson=æœ´ç´ Redisã€‚&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;RJg6&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;3ï¼‰ä½¿ç”¨ä¾¿åˆ©æ€§ä¸Šï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç”±äºç”Ÿäº§ç¯å¢ƒéƒ½æœ‰ç¨³å®šçš„Rediså’ŒZooKeeperé›†ç¾¤ï¼Œæœ‰ä¸“ä¸šçš„åŒå­¦ç»´æŠ¤ï¼Œè¿™ä¸¤è€…å·®åˆ«ä¸å¤§ã€‚åœ¨è¯­è¨€å±€é™æ€§ä¸Šï¼Œæœ´ç´ Redisä»ä¸æŒ‘é£Ÿã€‚ZKå’ŒRedissonéƒ½åå‘äºJavaè¯­è¨€ã€‚åœ¨å¼€å‘éš¾åº¦ä¸Šï¼ŒRedisæœ€ç®€å•ï¼Œå‡ ä¹ä¸ç”¨å†™ä»€ä¹ˆä»£ç ï¼›ZKå’ŒRedissonæ¬¡ä¹‹ï¼Œä¾èµ–äºä½¿ç”¨çš„è¯­è¨€æ˜¯å¦æœ‰é›†æˆçš„apiä»¥åŠé›†æˆç¨³å®šæ€§ç­‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;NVzY&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¼˜åŠ¿ï¼šæœ´ç´ Redis&amp;gt;ZK&amp;gt;Redissonã€‚&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;do7K&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;4ï¼‰æ”¯æŒé”å½¢å¼çš„å¤šæ ·æ€§ä¸Šï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸Šé¢æœ‰æåŠï¼ŒZKå’ŒRedissonéƒ½æ”¯æŒäº†å„ç§èŠ±æ ·çš„åˆ†å¸ƒé”ã€‚æœ´ç´ Rediså°±æ¯”è¾ƒæ‰æ€¥äº†ï¼Œåœ¨å®ç°æ›´é«˜è¦æ±‚çš„é”æ–¹é¢ï¼Œå¦‚æœè‡ªå·±é€ è½®å­ï¼Œå¾€å¾€è´¹æ—¶è´¹åŠ›ï¼ŒåŠ›ä¸ä»å¿ƒã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¼˜åŠ¿ï¼šZK=Redisson&amp;gt;Redisã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;h1/&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;â–&lt;/strong&gt;&lt;/span&gt;&lt;strong&gt;&lt;span&gt;7. ç»“æŸè¯­&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åˆ†å¸ƒå¼é”åœ¨æ—¥å¸¸Codingä¸­å·²ç»å¾ˆå¸¸ç”¨ã€‚ä½†æ˜¯åˆ†å¸ƒå¼é”è¿™æ–¹é¢çš„çŸ¥è¯†ä¾ç„¶éå¸¸æ·±å¥¥ã€‚2016å¹´ï¼ŒMartin Kleppmannä¸Antirezä¸¤ä½åˆ†å¸ƒå¼é¢†åŸŸéå¸¸æœ‰é€ è¯£çš„å‰è¾ˆè¿˜é’ˆå¯¹â€œRedlockç®—æ³•â€åœ¨åˆ†å¸ƒå¼é”ä¸Šé¢çš„åº”ç”¨ç‚’å¾—æ²¸æ²¸æ‰¬æ‰¬ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;mBRW&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æœ€åå€ŸåŠ©è¿™åœºå†å²é—¹å‰§ä¸­Martinçš„è¯æ¥ç»“æŸæˆ‘ä»¬ä»Šå¤©çš„åˆ†äº«ã€‚ä¸è¯¸å›å…±å‹‰ï¼å°†å­¦ä¹ å½“æˆä¸€ç”Ÿçš„ä¸»é¢˜ï¼&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;qV6I&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;&lt;span&gt;å¯¹æˆ‘æ¥è¯´æœ€é‡è¦çš„ä¸€ç‚¹åœ¨äºï¼šæˆ‘å¹¶ä¸åœ¨ä¹åœ¨è¿™åœºè¾©è®ºä¸­è°å¯¹è°é”™ â€”â€” æˆ‘åªå…³å¿ƒä»å…¶ä»–äººçš„å·¥ä½œä¸­å­¦åˆ°çš„ä¸œè¥¿ï¼Œä»¥ä¾¿æˆ‘ä»¬èƒ½å¤Ÿé¿å…é‡è¹ˆè¦†è¾™ï¼Œå¹¶è®©æœªæ¥æ›´åŠ ç¾å¥½ã€‚å‰äººå·²ç»ä¸ºæˆ‘ä»¬åˆ›é€ å‡ºäº†è®¸å¤šä¼Ÿå¤§çš„æˆæœï¼šç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œæˆ‘ä»¬å¾—ä»¥æ„å»ºæ›´æ£’çš„è½¯ä»¶ã€‚&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;&lt;span&gt;â€¦â€¦&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;&lt;span&gt;å¯¹äºä»»ä½•æƒ³æ³•ï¼ŒåŠ¡å¿…è¦è¯¦åŠ æ£€éªŒï¼Œé€šè¿‡è®ºè¯ä»¥åŠæ£€æŸ¥å®ƒä»¬æ˜¯å¦ç»å¾—ä½åˆ«äººçš„è¯¦ç»†å®¡æŸ¥ã€‚é‚£æ˜¯å­¦ä¹ è¿‡ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚ä½†ç›®æ ‡åº”è¯¥æ˜¯ä¸ºäº†è·å¾—çŸ¥è¯†ï¼Œè€Œä¸åº”è¯¥æ˜¯ä¸ºäº†è¯´æœåˆ«äººç›¸ä¿¡ä½ è‡ªå·±æ˜¯å¯¹çš„ã€‚æœ‰æ—¶å€™ï¼Œé‚£åªä¸è¿‡æ„å‘³ç€åœä¸‹æ¥ï¼Œå¥½å¥½åœ°æƒ³ä¸€æƒ³ã€‚&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p line=&quot;XMQD&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç”±äºæ—¶é—´ä»“ä¿ƒï¼Œè‡ªå·±æ°´å¹³æœ‰é™ï¼Œæ–‡ä¸­å¿…å®šå­˜åœ¨è¯¸å¤šç–æ¼ä¸ç†è§£ä¸å½“çš„åœ°æ–¹ã€‚éå¸¸å¸Œæœ›å¾—åˆ°å„ä½æŒ‡æ­£ï¼Œç•…è°ˆæŠ€æœ¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;â–&lt;/strong&gt;&lt;/span&gt;&lt;strong&gt;&lt;span&gt;Reference&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p line=&quot;VJCB&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;0.Apache ZooKeeper&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;1.Redisson&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2.Redis&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;3.Redisåˆ†å¸ƒå¼é”è¿›åŒ–å²&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;4.åˆ†å¸ƒå¼ç³»ç»Ÿäº’æ–¥æ€§ä¸å¹‚ç­‰æ€§é—®é¢˜çš„åˆ†æä¸è§£å†³&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;5.æµ…è°ˆå¯é‡å…¥æ€§åŠå…¶ä»–&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;6.Distributed locks with Redis&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;7.How to do distributed locking&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;8.Is Redlock safe?&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;9.Note on fencing and distributed locks&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-copyright=&quot;0&quot; data-ratio=&quot;0.02847130968024529&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jE5bOw22iaBsseSfyAldiaR4R3UMuxvTLoibspKdM7d2ePE6INj7RnywH5xnvFmLC2pXxUSBUVejaAhKcme5CPyXw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2283&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-copyright=&quot;0&quot; data-ratio=&quot;0.16146393972012918&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jE5bOw22iaBsz4OAZe6Wr6wibWOdFRduRXen6uibicDHQkgg0Cjd5ySeG2jOwMarWbDK7icApR3PNmdicPQlUdrowpnQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;929&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-copyright=&quot;0&quot; data-ratio=&quot;0.25876288659793817&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/jE5bOw22iaBvxHozhM8S9If1R4gBm2g4YbgVicCqZ04Mtiar5dpLZ1IcdokLfHRoOb32UhuibM8wWib1AJy2mBcoU2A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;3880&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;æ›¾Â  å¥‡&lt;/strong&gt;&lt;br/&gt;&lt;/span&gt;&lt;span&gt;æ»´æ»´ | ä¸šåŠ¡å¹³å°æŠ€æœ¯&lt;br/&gt;ç ”å‘å·¥ç¨‹å¸ˆ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åŒ—äº¬ç§‘æŠ€å¤§å­¦æœ¬ç¡•ï¼Œ2018å¹´åº”å±Šå…¥èŒæ»´æ»´ã€‚çƒ­çˆ±æŠ€æœ¯ï¼Œæ›´çƒ­çˆ±ç”¨æŠ€æœ¯å»è§£å†³å®é™…é—®é¢˜ã€‚å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¤§å‹ç½‘ç«™æ¶æ„æœ‰ä¸€å®šçš„äº†è§£ã€‚&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>60f1c571a071dece68020c2dce89b28e</guid>
<title>è€ç”Ÿå¸¸è°ˆ Spring Aop æ—¥å¿—æ”¶é›†ä¸å¤„ç†åšçš„å·¥å…·åŒ…</title>
<link>https://toutiao.io/k/b79camp</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div id=&quot;cnblogs_post_body&quot; class=&quot;blogpost-body cnblogs-markdown&quot;&gt;
    &lt;h4 id=&quot;aoplogæ˜¯åŸºäºspring-aop-å’Œthreadlocalå®ç°çš„ä¸€ä¸ªä¸“é—¨å¯¹è¯·æ±‚æ–¹æ³•å†…å®¹æ—¥å¿—çš„æ‹¦æˆªä¸å¤„ç†çš„æ—¥å¿—å·¥å…·åŒ…ã€‚&quot;&gt;AopLogæ˜¯åŸºäºSpring Aop å’ŒThreadLocalå®ç°çš„ä¸€ä¸ªä¸“é—¨å¯¹è¯·æ±‚æ–¹æ³•å†…å®¹æ—¥å¿—çš„æ‹¦æˆªä¸å¤„ç†çš„æ—¥å¿—å·¥å…·åŒ…ã€‚&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;https://img.shields.io/static/v1?label=release&amp;amp;message=2.1&amp;amp;color=green&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;img src=&quot;https://img.shields.io/static/v1?label=jar&amp;amp;message=16k&amp;amp;color=green&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;img src=&quot;https://img.shields.io/badge/License-Apache%202.0-blue.svg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;img src=&quot;https://img.shields.io/badge/JDK-1.8+-red.svg&quot; alt=&quot;&quot; loading=&quot;lazy&quot;/&gt;&lt;/p&gt;
&lt;p&gt;åœºæ™¯ :&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨Spring Aopæ‹¦æˆªå‚æ•°æ—¥å¿—ç›®å‰å¤§éƒ¨åˆ†åšæ³•éƒ½åŸºæœ¬ä¸Šå¤§åŒå°å¼‚,ä¸æƒ³æ—¥åæ¯ä¸ªé¡¹ç›®å·¥ç¨‹éƒ½å†™ä¸€ä»½è¿™æ ·çš„Aopæ‹¦æˆªå¤„ç†æ—¥å¿—çš„ä»£ç ,ç”šè‡³ä»£ç ä¾µå…¥ã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘æƒ³çŸ¥é“ä¸€äº›ç›¸å¯¹é‡è¦çš„è¯·æ±‚æ–¹æ³•çš„è¯·æ±‚å‚æ•°,å“åº”å‚æ•°,è¯·æ±‚å¤´,ä»¥åŠå†…éƒ¨è€—æ—¶,æ–¹æ³•æ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ç­‰ç­‰ä¿¡æ¯ã€‚å‘ç”Ÿé”™è¯¯æ—¶æˆ‘ä¹Ÿä¸çŸ¥é“æ‰§è¡Œåˆ°å“ªä¸€æ­¥å‘ç”Ÿäº†å¼‚å¸¸ï¼Œæ˜¯ä¸æ˜¯æŸä¸ªå‚æ•°å¯¼è‡´å‡ºçš„é€»è¾‘é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;æ™®é€šçš„log.infoæˆ–warnä¿¡æ¯æ²¡æœ‰æ‰€å±è¯·æ±‚çš„ä¸Šä¸‹å…³ç³»,å¹¶ä¸æ–¹ä¾¿æŸ¥çœ‹å’Œåˆ†æã€‚&lt;/li&gt;
&lt;li&gt;æ­£å¼ç¯å¢ƒä¸­,æˆ‘å¹¶ä¸æƒ³æ‰“å°å¤ªå¤šæ— æ„ä¹‰çš„infoæ—¥å¿—(æœ‰äº›åªæ˜¯ä¸ºäº†æ’æŸ¥é—®é¢˜æ‰“å°çš„æ—¥å¿—,ç¨‹åºæ­£å¸¸è¿è¡Œæ—¶å…¶å®æ¯«æ— æ„ä¹‰)ï¼Œåªå¸Œæœ›åœ¨å‘ç”Ÿå¼‚å¸¸æ—¶è®°å½•æ—¥å¿—æˆ–è€…åªå¸Œæœ›æ¯æ¬¡è¯·æ±‚åªè®°å½•ä¸€æ¡å…³é”®çš„è¯·æ±‚ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;æ—¥å¿—çš„æ”¶é›†,æˆ‘å¸Œæœ›å°†è¿™äº›è¯·æ±‚çš„æ—¥å¿—è®°å½•ä¸‹æ¥ï¼Œè®°å½•çš„å®ç°æ–¹å¼æˆ‘è‡ªå·±å†³å®šï¼Œæ¯”å¦‚æ­£å¸¸çš„æ—¥å¿—æ‰“å°ï¼Œå¸¸è§çš„æ—¥å¿—å†™å…¥æ•°æ®åº“ï¼Œæ—¥å¿—å†™å…¥åˆ°æ–‡ä»¶ï¼Œæ—¥å¿—å…¥é˜Ÿåˆ—ç­‰ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;æ•´ä¸ªæ—¥å¿—çš„è®°å½•å®Œå…¨ä¸å¹²æ‰°æ­£å¸¸è¯·æ±‚æ–¹æ³•çš„æµç¨‹,æ—¥å¿—çš„æ”¶é›†å¤„ç†å¼‚æ­¥åŒ–,å®Œå…¨ä¸å½±å“æ­£å¸¸è¯·æ±‚æ–¹æ³•çš„æ€§èƒ½ä¸å“åº”ã€‚&lt;/li&gt;
&lt;li&gt;åªéœ€è¦é€šè¿‡&lt;code&gt;@AopLog&lt;/code&gt;æ³¨è§£å†³å®šæ˜¯å¦è®°å½•ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;å¿«é€Ÿå¼€å§‹&quot;&gt;å¿«é€Ÿå¼€å§‹&lt;/h3&gt;
&lt;h4 id=&quot;é¡¹ç›®é€šè¿‡mavençš„pomxmlå¼•å…¥&quot;&gt;é¡¹ç›®é€šè¿‡mavençš„pom.xmlå¼•å…¥&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&quot;language-xml&quot;&gt;
&amp;lt;dependency&amp;gt;
    &amp;lt;groupId&amp;gt;com.github.ealenxie&amp;lt;/groupId&amp;gt;
    &amp;lt;artifactId&amp;gt;aop-log&amp;lt;/artifactId&amp;gt;
    &amp;lt;version&amp;gt;2.1&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&quot;æˆ–è€…é€šè¿‡gradleå¼•å…¥&quot;&gt;æˆ–è€…é€šè¿‡gradleå¼•å…¥&lt;/h4&gt;
&lt;pre&gt;&lt;code class=&quot;language-gradle&quot;&gt;compile group: &#x27;com.github.ealenxie&#x27;, name: &#x27;aop-log&#x27;, version: &#x27;2.1&#x27;
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&quot;aoplogæ³¨è§£ä½¿ç”¨ï¼Œè¿›è¡Œæ—¥å¿—è®°å½•&quot;&gt;@AopLogæ³¨è§£ä½¿ç”¨ï¼Œè¿›è¡Œæ—¥å¿—è®°å½•&lt;/h4&gt;
&lt;p&gt;ç›´æ¥åœ¨ç±»(ä½œç”¨ç±»çš„æ‰€æœ‰æ–¹æ³•)æˆ–ç±»æ–¹æ³•(ä½œç”¨äºæ–¹æ³•)ä¸ŠåŠ ä¸Šæ³¨è§£@AopLog,è¿›è¡Œæ—¥å¿—è®°å½•&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ :&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-java&quot;&gt;import com.github.AopLog;
import name.ealen.infra.base.resp.RespBody;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

/**
 * @author EalenXie create on 2020/6/22 14:28
 */
@AopLog(type = &quot;æµ‹è¯•&quot;,stackTraceOnErr = true)
@RestController
public class AppController {

    @GetMapping(&quot;/app/sayHello&quot;)
    public RespBody&amp;lt;String&amp;gt; sayHello() {
        return RespBody.ok(&quot;hello EalenXie&quot;);
    }

}

&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&quot;è‡ªå®šä¹‰å…¨å±€çš„æ—¥å¿—æ”¶é›†å™¨å®ç°æ”¶é›†-logcollector&quot;&gt;è‡ªå®šä¹‰å…¨å±€çš„æ—¥å¿—æ”¶é›†å™¨å®ç°æ”¶é›† LogCollector&lt;/h4&gt;
&lt;p&gt;ä¾‹å¦‚åªæ˜¯ç®€å•æ‰“å°,æˆ–å†™å…¥åˆ°åº“ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-java&quot;&gt;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.github.LogData;
import com.github.collector.LogCollector;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Component;

/**
 * @author EalenXie create on 2020/9/15 13:46
 * æ­¤ä¸ºæ ·ä¾‹å‚è€ƒ
 * é…ç½®ä¸€ä¸ªç®€å•çš„æ—¥å¿—æ”¶é›†å™¨ è¿™é‡Œåªæ˜¯åšäº†ä¸€ä¸ªlog.infoæ‰“å°ä¸€ä¸‹ï¼Œå¯ä»¥åœ¨è¿™é‡Œå†™å…¥åˆ°æ•°æ®åº“ä¸­æˆ–è€…å†™å…¥
 */
@Slf4j
@Component
public class AopLogCollector implements LogCollector {
    private ObjectMapper objectMapper = new ObjectMapper();
    @Override
    public void collect(LogData logData) {
        try {
            log.info(objectMapper.writeValueAsString(logData));
        } catch (JsonProcessingException e) {
            e.printStackTrace();
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é…ç½®@Componentçš„å…¨å±€æ—¥å¿—æ”¶é›†å™¨åªèƒ½é…ç½®ä¸€ä¸ªã€‚&lt;/p&gt;
&lt;p&gt;æ¥å£è°ƒç”¨ &lt;code&gt;/say/hello&lt;/code&gt; æµ‹è¯•å³å¯çœ‹çœ‹åˆ°æ§åˆ¶å°æ‰“å°å‡ºç»“æœ :&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;2020-09-16 16:01:04.782  INFO 2012 --- [AsyncExecutor-2] name.ealen.infra.advice.AopLogCollector  : {&quot;appName&quot;:&quot;app-template&quot;,&quot;host&quot;:&quot;127.0.0.1&quot;,&quot;port&quot;:8080,&quot;clientIp&quot;:&quot;192.168.110.1&quot;,&quot;reqUrl&quot;:&quot;http://localhost:8080/app/sayHello&quot;,&quot;httpMethod&quot;:&quot;GET&quot;,&quot;headers&quot;:{&quot;User-Agent&quot;:&quot;Apache-HttpClient/4.5.10 (Java/11.0.5)&quot;},&quot;type&quot;:&quot;æµ‹è¯•&quot;,&quot;content&quot;:&quot;&quot;,&quot;method&quot;:&quot;name.ealen.api.facade.AppController#sayHello&quot;,&quot;args&quot;:null,&quot;respBody&quot;:{&quot;code&quot;:&quot;200&quot;,&quot;desc&quot;:&quot;OK&quot;,&quot;message&quot;:&quot;è¯·æ±‚æˆåŠŸ&quot;,&quot;dateTime&quot;:&quot;2020-09-16 16:01:04&quot;,&quot;body&quot;:&quot;hello EalenXie&quot;},&quot;logDate&quot;:1600243264780,&quot;costTime&quot;:1,&quot;threadName&quot;:&quot;http-nio-8080-exec-3&quot;,&quot;threadId&quot;:33,&quot;success&quot;:true}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&quot;è®°å½•çš„æ—¥å¿—å¯¹è±¡logdataå±æ€§è¯´æ˜&quot;&gt;è®°å½•çš„æ—¥å¿—å¯¹è±¡LogDataå±æ€§è¯´æ˜&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;LogData è®°å½•çš„å†…å®¹&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å­—æ®µ&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;æ³¨é‡Š&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;appName&lt;/td&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;åº”ç”¨åç§°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;host&lt;/td&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;ä¸»æœº&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;port&lt;/td&gt;
&lt;td&gt;int&lt;/td&gt;
&lt;td&gt;ç«¯å£å·&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;clientIp&lt;/td&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;è¯·æ±‚å®¢æˆ·ç«¯çš„Ip&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;reqUrl&lt;/td&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;è¯·æ±‚åœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;headers&lt;/td&gt;
&lt;td&gt;Object&lt;/td&gt;
&lt;td&gt;è¯·æ±‚å¤´éƒ¨ä¿¡æ¯(å¯é€‰æ‹©è®°å½•) é»˜è®¤è®°å½•user-agent,content-type&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;type&lt;/td&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;æ“ä½œç±»å‹,é»˜è®¤å€¼undefined&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;content&lt;/td&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;æ–¹æ³•æ­¥éª¤å†…å®¹,é»˜è®¤æ˜¯ç©º,å¯ä½¿ç”¨LogData.stepè¿›è¡Œå†…å®¹æ­¥éª¤è®°å½•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;method&lt;/td&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;è¯·æ±‚çš„æœ¬åœ°javaæ–¹æ³•&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;args&lt;/td&gt;
&lt;td&gt;Object&lt;/td&gt;
&lt;td&gt;æ–¹æ³•è¯·æ±‚å‚æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;respBody&lt;/td&gt;
&lt;td&gt;Object&lt;/td&gt;
&lt;td&gt;æ–¹æ³•å“åº”å‚æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;costTime&lt;/td&gt;
&lt;td&gt;long&lt;/td&gt;
&lt;td&gt;æ•´ä¸ªæ–¹æ³•è€—æ—¶&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;logDate&lt;/td&gt;
&lt;td&gt;Date&lt;/td&gt;
&lt;td&gt;Logäº§ç”Ÿæ—¶é—´,LogDataå¯¹è±¡åˆå§‹åŒ–çš„æ—¶é—´&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;threadName&lt;/td&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;çº¿ç¨‹åç§°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;threadId&lt;/td&gt;
&lt;td&gt;long&lt;/td&gt;
&lt;td&gt;çº¿ç¨‹Id&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;success&lt;/td&gt;
&lt;td&gt;boolean&lt;/td&gt;
&lt;td&gt;æ‰§è¡ŒçŠ¶æ€,æˆåŠŸ(true)/å¼‚å¸¸(false)&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&quot;aoplog-æ³¨è§£é€‰é¡¹è¯´æ˜&quot;&gt;AopLog æ³¨è§£é€‰é¡¹è¯´æ˜&lt;/h4&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é€‰é¡¹&lt;/th&gt;
&lt;th&gt;ç±»å‹&lt;/th&gt;
&lt;th&gt;è¯´æ˜&lt;/th&gt;
&lt;th&gt;é»˜è®¤&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;logOnErr&lt;/td&gt;
&lt;td&gt;boolean&lt;/td&gt;
&lt;td&gt;ä»…å½“å‘ç”Ÿå¼‚å¸¸æ—¶æ‰è®°å½•æ”¶é›†&lt;/td&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;type&lt;/td&gt;
&lt;td&gt;String&lt;/td&gt;
&lt;td&gt;æ“ä½œç±»å‹&lt;/td&gt;
&lt;td&gt;é»˜è®¤å€¼&quot;undefined&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;headers&lt;/td&gt;
&lt;td&gt;String[]&lt;/td&gt;
&lt;td&gt;è®°å½•çš„headerä¿¡æ¯ ,é€‰æ‹©è¦è®°å½•å“ªäº›headerä¿¡æ¯&lt;/td&gt;
&lt;td&gt;é»˜è®¤&quot;User-Agent&quot;,&quot;content-type&quot;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;args&lt;/td&gt;
&lt;td&gt;boolean&lt;/td&gt;
&lt;td&gt;æ˜¯å¦è®°å½•è¯·æ±‚å‚æ•°&lt;/td&gt;
&lt;td&gt;true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;respBody&lt;/td&gt;
&lt;td&gt;boolean&lt;/td&gt;
&lt;td&gt;æ˜¯å¦è®°å½•å“åº”å‚æ•°&lt;/td&gt;
&lt;td&gt;true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;stackTraceOnErr&lt;/td&gt;
&lt;td&gt;boolean&lt;/td&gt;
&lt;td&gt;å½“ç›®æ ‡æ–¹æ³•å‘ç”Ÿå¼‚å¸¸æ—¶,æ˜¯å¦è¿½åŠ å¼‚å¸¸å †æ ˆä¿¡æ¯åˆ°LogDataçš„contentä¸­&lt;/td&gt;
&lt;td&gt;false&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;asyncMode&lt;/td&gt;
&lt;td&gt;boolean&lt;/td&gt;
&lt;td&gt;å¼‚æ­¥æ–¹å¼æ”¶é›†&lt;/td&gt;
&lt;td&gt;true&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;collector&lt;/td&gt;
&lt;td&gt;Class&amp;lt;? extends LogCollector&amp;gt;&lt;/td&gt;
&lt;td&gt;æŒ‡å®šæ—¥å¿—æ”¶é›†å™¨&lt;/td&gt;
&lt;td&gt;é»˜è®¤ä¸è°ƒæ•´æ”¶é›†å™¨,ä½¿ç”¨å…¨å±€çš„æ—¥å¿—æ”¶é›†å™¨&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h4 id=&quot;logdataçš„stepæ–¹æ³•ã€‚&quot;&gt;LogDataçš„stepæ–¹æ³•ã€‚&lt;/h4&gt;
&lt;p&gt;è®°å½•æ­¥éª¤ã€‚(å¦‚æœæŸäº›é‡è¦æ­¥éª¤å¸Œæœ›è¢«è®°å½•ä¸‹æ¥)&lt;br/&gt;
ä¾‹å¦‚ :&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;import com.github.AopLog;
import com.github.LogData;
import name.ealen.infra.base.resp.RespBody;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;


/**
 * @author EalenXie create on 2020/6/22 14:28
 */
@AopLog(type = &quot;æµ‹è¯•&quot;,stackTraceOnErr = true)
@RestController
public class AppController {


    @GetMapping(&quot;/app/sayHello&quot;)
    public RespBody&amp;lt;String&amp;gt; sayHello() {
        LogData.step(&quot;1. ç¬¬ä¸€æ­¥æ‰§è¡Œå®Œæˆ&quot;);
        //......
        LogData.step(&quot;2. ç¬¬äºŒæ­¥æ‰§è¡Œå®Œæˆ&quot;);
        //.....
        LogData.step(&quot;3. serviceçš„æ–¹æ³•æ‰§è¡Œå®Œæˆ&quot;);
        //.....
        return RespBody.ok(&quot;hello EalenXie&quot;);
    }

}

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;æ³¨æ„: æ­¤æ–¹æ³•å¦‚æœä¸åœ¨è¢«@AopLogæ³¨è§£çš„æ–¹æ³•çš„æ•´ä½“è°ƒç”¨é“¾è·¯ä¸­ä½¿ç”¨ï¼Œåˆ™å½“å‰çº¿ç¨‹ä¸­çš„ThreadLocalä¸­çš„LogDataä¸ä¼šé‡Šæ”¾ï¼Œéœ€è¦æ‰‹åŠ¨è°ƒç”¨LogData.removeCurrent();&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶å†æ¬¡æ¥å£è°ƒç”¨ &lt;code&gt;/say/hello&lt;/code&gt; æµ‹è¯•å³å¯çœ‹çœ‹åˆ°æ§åˆ¶å°æ‰“å°å‡ºç»“æœï¼Œé‡ç‚¹è§‚å¯Ÿcontentå­—æ®µ :&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;2020-09-16 17:26:20.285  INFO 3284 --- [AsyncExecutor-2] name.ealen.infra.advice.AopLogCollector  : {&quot;appName&quot;:&quot;app-template&quot;,&quot;host&quot;:&quot;127.0.0.1&quot;,&quot;port&quot;:8080,&quot;clientIp&quot;:&quot;192.168.110.1&quot;,&quot;reqUrl&quot;:&quot;http://localhost:8080/app/sayHello&quot;,&quot;httpMethod&quot;:&quot;GET&quot;,&quot;headers&quot;:{&quot;User-Agent&quot;:&quot;Apache-HttpClient/4.5.10 (Java/11.0.5)&quot;},&quot;type&quot;:&quot;æµ‹è¯•&quot;,&quot;content&quot;:&quot;1. ç¬¬ä¸€æ­¥æ‰§è¡Œå®Œæˆ\n2. ç¬¬äºŒæ­¥æ‰§è¡Œå®Œæˆ\n3. serviceçš„æ–¹æ³•æ‰§è¡Œå®Œæˆ\n&quot;,&quot;method&quot;:&quot;name.ealen.api.facade.AppController#sayHello&quot;,&quot;args&quot;:null,&quot;respBody&quot;:{&quot;code&quot;:&quot;200&quot;,&quot;desc&quot;:&quot;OK&quot;,&quot;message&quot;:&quot;è¯·æ±‚æˆåŠŸ&quot;,&quot;dateTime&quot;:&quot;2020-09-16 17:26:20&quot;,&quot;body&quot;:&quot;hello EalenXie&quot;},&quot;logDate&quot;:1600248380283,&quot;costTime&quot;:1,&quot;threadName&quot;:&quot;http-nio-8080-exec-2&quot;,&quot;threadId&quot;:32,&quot;success&quot;:true}
&lt;/code&gt;&lt;/pre&gt;
&lt;h4 id=&quot;å…³äº&quot;&gt;å…³äº&lt;/h4&gt;
&lt;p&gt;å¼€æºGithubåœ°å€ : &lt;a href=&quot;https://github.com/EalenXie/aop-log&quot;&gt;https://github.com/EalenXie/aop-log&lt;br/&gt;
&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ„Ÿè°¢å„ä½æå‡ºæ„è§å’Œæ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘çš„åšå®¢å³å°†åŒæ­¥è‡³è…¾è®¯äº‘+ç¤¾åŒºï¼Œé‚€è¯·å¤§å®¶ä¸€åŒå…¥é©»ï¼š&lt;a href=&quot;https://cloud.tencent.com/developer/support-plan?invite_code=2xarst7a9zsw8&quot;&gt;https://cloud.tencent.com/developer/support-plan?invite_code=2xarst7a9zsw8&lt;/a&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>