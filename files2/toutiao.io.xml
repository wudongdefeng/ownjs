<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>f51b8bfcd26e79563274022b552b94ea</guid>
<title>äº”ä¸€æ²¡åœ°æ–¹å»ï¼Ÿæ¥è¿™é‡Œå§ï¼</title>
<link>https://toutiao.io/k/m70wnkv</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;profile_inner&quot;&gt;
                  &lt;strong class=&quot;profile_nickname&quot;&gt;æˆ‘çˆ±ç¨‹åºå‘˜&lt;/strong&gt;
                  &lt;img class=&quot;profile_avatar&quot; id=&quot;js_profile_qrcode_img&quot; src=&quot;&quot; alt=&quot;&quot;/&gt;

                  &lt;p class=&quot;profile_meta&quot;&gt;
                  &lt;label class=&quot;profile_meta_label&quot;&gt;Weixin ID&lt;/label&gt;
                  &lt;span class=&quot;profile_meta_value&quot;&gt;developerWorks&lt;/span&gt;
                  &lt;/p&gt;

                  &lt;p class=&quot;profile_meta&quot;&gt;
                  &lt;label class=&quot;profile_meta_label&quot;&gt;About Feature&lt;/label&gt;
                  &lt;span class=&quot;profile_meta_value&quot;&gt;æˆ‘ä»¬çš„äº§å“ï¼šã€Šç å†œå‘¨åˆŠã€‹ http://manong.io/ ã€ã€Šå¼€å‘è€…å¤´æ¡ã€‹ http://toutiao.io/&lt;/span&gt;
                  &lt;/p&gt;
                &lt;/div&gt;
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>a9c50de2c98dc9ad5ab552fee94187af</guid>
<title>å¼•å…¥ã€å®¢æˆ·ç«¯ç¼“å­˜ã€ï¼ŒRedis6ç®—æ˜¯æŠŠç¼“å­˜ç©æ˜ç™½äº†â€¦</title>
<link>https://toutiao.io/k/txajf8j</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å“ˆå–½å¤§å®¶å¥½å•Šï¼Œæˆ‘æ˜¯æ²¡æ›´æ–°å°±æ˜¯åœ¨å®¶å¿™ç€å¸¦å¨ƒçš„Hydraã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å‰é¢ä»‹ç»ä¸¤çº§ç¼“å­˜çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æ€»å…±ç»™å‡ºäº†4ç§å®ç°æ–¹æ¡ˆï¼Œåœ¨é¡¹ç›®ä¸­æ•´åˆäº†æœ¬åœ°ç¼“å­˜&lt;code&gt;Caffeine&lt;/code&gt;å’Œè¿œç¨‹ç¼“å­˜&lt;code&gt;Redis&lt;/code&gt;ï¼Œå°†åº”ç”¨çš„æ€§èƒ½ä»ä»…é€‚ç”¨å•ç‹¬è¿œç¨‹ç¼“å­˜çš„åŸºç¡€ä¸Šï¼Œå†æ¬¡æé«˜äº†ä¸€ä¸ªå±‚æ¬¡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€Œä»Šå¤©Hydraè¦å’Œå¤§å®¶åˆ†äº«çš„æŠ€æœ¯ï¼Œåœ¨æ€æƒ³ä¸Šå’Œä¸Šé¢ä¸¤çº§ç¼“å­˜æœ‰äº›ç±»ä¼¼ï¼Œä¸è¿‡ä¸éœ€è¦å€ŸåŠ©å…¶ä»–æœ¬åœ°ç¼“å­˜ä¸­é—´ä»¶ï¼Œåªä½¿ç”¨&lt;code&gt;Redis&lt;/code&gt;è‡ªèº«æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯å°±å¯ä»¥å®ç°ã€‚è¿™å°±æ˜¯&lt;code&gt;Redis6&lt;/code&gt;ä¸­çš„å®¢æˆ·ç«¯ç¼“å­˜&lt;code&gt;Client-side caching&lt;/code&gt;è¿™ä¸€é¡¹æ–°ç‰¹æ€§ï¼Œå®ƒå…è®¸å°†æ•°æ®ç¼“å­˜åœ¨&lt;strong&gt;åº”ç”¨æœåŠ¡ç«¯&lt;/strong&gt;ä»¥åŠ&lt;strong&gt;è¿œç¨‹ç¼“å­˜&lt;/strong&gt;ä¸¤ä¸ªä½ç½®ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ç®€ä»‹&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®¢æˆ·ç«¯ç¼“å­˜æ˜¯Redis6ä¼—å¤šæ–°ç‰¹æ€§ä¸­æ¯”è¾ƒå®ç”¨çš„ä¸€é¡¹æ–°åŠŸèƒ½ï¼Œæˆ‘ä»¬çœ‹çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œäº†è§£ä¸€ä¸‹å®ƒçš„ä½œç”¨ï¼š&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å®¢æˆ·ç«¯ç¼“å­˜æ˜¯ä¸€ç§ç”¨äºåˆ›å»ºé«˜æ€§èƒ½æœåŠ¡çš„æŠ€æœ¯ï¼Œå®ƒå¯ä»¥åˆ©ç”¨&lt;strong&gt;åº”ç”¨æœåŠ¡å™¨&lt;/strong&gt;ä¸Šçš„å¯ç”¨å†…å­˜ï¼ˆè¿™äº›æœåŠ¡å™¨é€šå¸¸æ˜¯ä¸€äº›ä¸åŒäºæ•°æ®åº“æœåŠ¡å™¨çš„èŠ‚ç‚¹ï¼‰ï¼Œåœ¨è¿™äº›åº”ç”¨æœåŠ¡ç«¯æ¥ç›´æ¥å­˜å‚¨æ•°æ®åº“ä¸­çš„ä¸€äº›ä¿¡æ¯ã€‚&lt;/p&gt;&lt;p&gt;ä¸è®¿é—®æ•°æ®åº“ç­‰ç½‘ç»œæœåŠ¡ç›¸æ¯”ï¼Œè®¿é—®æœ¬åœ°å†…å­˜æ‰€éœ€è¦çš„æ—¶é—´æ¶ˆè€—è¦å°‘å¾—å¤šï¼Œå› æ­¤è¿™ä¸ªæ¨¡å¼å¯ä»¥å¤§å¤§ç¼©çŸ­åº”ç”¨ç¨‹åºè·å–æ•°æ®çš„å»¶è¿Ÿï¼ŒåŒæ—¶ä¹Ÿèƒ½å‡è½»æ•°æ®åº“çš„è´Ÿè½½å‹åŠ›ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çœ‹åˆ°è¿™ï¼Œæˆ‘å¿ƒæƒ³è¿™ä¸æ˜¯å’Œå…¶ä»–æœ¬åœ°ç¼“å­˜Guavaã€Caffeineå•¥çš„ä¸€æ ·å—ï¼Œæ¢æ±¤ä¸æ¢è¯ï¼Œéƒ½æ˜¯ä½¿ç”¨çš„åº”ç”¨æœåŠ¡çš„å†…å­˜ç½¢äº†ã€‚è¦è¯´æœ‰ä»€ä¹ˆå¥½å¤„ï¼Œå¯èƒ½å°±æ˜¯æˆ‘åœ¨é¡¹ç›®ä¸­èƒ½å°‘å¼•å…¥ä¸€ä¸ªä¸­é—´ä»¶äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸è¿‡ï¼Œæˆ‘è¿™ç‚¹æµ…è–„çš„çŒœæƒ³ï¼Œåœ¨çœ‹å®Œå®¢æˆ·ç«¯ç¼“å­˜çš„å…·ä½“åº”ç”¨æ¨¡å¼åï¼Œå½»åº•è¢«é¢ è¦†äº†ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸¤ç§æ¨¡å¼&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨äº†è§£äº†å®¢æˆ·ç«¯ç¼“å­˜çš„åŸºæœ¬åŠŸèƒ½åï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„ä¸¤ç§åŸºæœ¬åº”ç”¨æ¨¡å¼ã€‚Redisçš„å®¢æˆ·ç«¯ç¼“å­˜æ”¯æŒè¢«ç§°ä¸º&lt;code&gt;tracking&lt;/code&gt;ï¼Œä¸ªäººæ„Ÿè§‰ç¿»è¯‘ä¸ºå¯¹keyçš„&lt;strong&gt;è¿½è¸ª&lt;/strong&gt;å°±å¾ˆå¥½ç†è§£ï¼Œå®ƒå…·æœ‰ä¸¤ç§æ¨¡å¼ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;é»˜è®¤æ¨¡å¼ï¼ŒæœåŠ¡ç«¯ä¼šè®°å½•æŸä¸ªå®¢æˆ·ç«¯å…·ä½“è®¿é—®è¿‡å“ªä¸€äº›&lt;code&gt;key&lt;/code&gt;ï¼Œå½“è¿™äº›&lt;code&gt;key&lt;/code&gt;å¯¹åº”çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šå‘é€å¤±æ•ˆæ¶ˆæ¯ç»™è¿™äº›å®¢æˆ·ç«¯ã€‚è¿™ä¸ªæ¨¡å¼ä¼šåœ¨æœåŠ¡ç«¯æ¶ˆè€—ä¸€äº›å†…å­˜ï¼Œä½†æ˜¯å‘é€å¤±æ•ˆæ¶ˆæ¯çš„èŒƒå›´ï¼Œè¢«é™åˆ¶åœ¨äº†å®¢æˆ·ç«¯å­˜å‚¨äº†çš„&lt;code&gt;key&lt;/code&gt;çš„é›†åˆèŒƒå›´å†…&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¹¿æ’­æ¨¡å¼ï¼ŒæœåŠ¡ç«¯ä¸ä¼šå†è®°å½•æŸä¸ªå®¢æˆ·ç«¯è®¿é—®äº†å“ªäº›&lt;code&gt;key&lt;/code&gt;ï¼Œå› æ­¤è¿™ä¸ªæ¨¡å¼ä¸æ¶ˆè€—æœåŠ¡ç«¯çš„å†…å­˜ã€‚å–è€Œä»£ä¹‹çš„æ˜¯ï¼Œå®¢æˆ·ç«¯éœ€è¦è®¢é˜…&lt;code&gt;key&lt;/code&gt;çš„ç‰¹å®šå‰ç¼€ï¼Œæ¯å½“ç¬¦åˆè¿™ä¸ªå‰ç¼€çš„&lt;code&gt;key&lt;/code&gt;å¯¹åº”çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå®¢æˆ·ç«¯éƒ½ä¼šæ”¶åˆ°é€šçŸ¥æ¶ˆæ¯&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çœ‹åˆ°è¿™é‡Œï¼Œå®ƒå’Œæˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„ä¸¤çº§ç¼“å­˜ä¹‹é—´å·®å¼‚ï¼Œæ˜¯ä¸æ˜¯å·²ç»åˆéœ²ç«¯å€ªäº†å‘¢ï¼Ÿå¦‚æœè¿˜ä¸ç†Ÿæ‚‰ä¸¤çº§ç¼“å­˜çš„æ¶æ„ï¼Œé‚£ä¹ˆå¯ä»¥å…ˆæ¥çœ‹çœ‹ä¸‹é¢çš„è¿™å¼ å›¾ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4039158810732415&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zpom4BeZSicbdISYMMsL8iaw6JWTYeElpIfwWIbTXwKx9bO6IQnWHgQ8wJ5GeFicia4uTa60PXcB7R0X2poXJ76PsQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1379&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ç§æ¶æ„åœ¨ç†è®ºä¸Šçœ‹èµ·æ¥ä¸é”™ï¼Œä½†æ˜¯å®é™…ä½¿ç”¨èµ·æ¥éœ€è¦æ³¨æ„çš„ç‚¹ä¸å°‘ï¼Œå°¤å…¶æ˜¯åœ¨åˆ†å¸ƒå¼æ¨¡å¼ä¸‹ï¼Œéœ€è¦ä¿è¯å„ä¸ªä¸»æœºä¸‹çš„ä¸€çº§ç¼“å­˜çš„ä¸€è‡´æ€§é—®é¢˜ï¼Œå›æƒ³ä¸€ä¸‹æˆ‘ä»¬åŸå…ˆçš„è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥ä½¿ç”¨redisæœ¬èº«çš„&lt;strong&gt;å‘å¸ƒ/è®¢é˜…&lt;/strong&gt;åŠŸèƒ½æ¥å®ç°ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4524053224155578&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zpom4BeZSicbdISYMMsL8iaw6JWTYeElpIJxlOVudq9zMusjqV8y0EaUjWCu7fIXbhm1GYibvGdfP8PgHiaPHZAmpA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;977&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€Œå®¢æˆ·ç«¯ç¼“å­˜çš„å‡ºç°ï¼Œå¤§å¤§ç®€åŒ–äº†è¿™ä¸€è¿‡ç¨‹ã€‚æˆ‘ä»¬ä»¥&lt;strong&gt;é»˜è®¤æ¨¡å¼&lt;/strong&gt;ä¸ºä¾‹ï¼Œçœ‹ä¸€ä¸‹ä½¿ç”¨äº†å®¢æˆ·ç«¯ç¼“å­˜åçš„æ“ä½œè¿‡ç¨‹ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5650406504065041&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zpom4BeZSicbdISYMMsL8iaw6JWTYeElpIuavKHIuHUsqicwelYcT9ovvmgOyDfQ0w9icEVFlZORSLzLTsKA1GADfA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;984&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›¸æ¯”åŸå…ˆçš„å‘å¸ƒ/è®¢é˜…æ¨¡å¼ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ˜æ˜¾çš„ä¼˜åŠ¿ï¼Œä½¿ç”¨å®¢æˆ·ç«¯ç¼“å­˜åŠŸèƒ½åï¼Œæˆ‘ä»¬åªéœ€è¦å•çº¯çš„ä¿®æ”¹redisä¸­çš„æ•°æ®å°±å¯ä»¥äº†ï¼Œæ‰‹åŠ¨å¤„ç†å‘å¸ƒ/è®¢é˜…æ¶ˆæ¯çš„è¿™ä¸€è¿‡ç¨‹å¯ä»¥å®Œå…¨è¢«çœç•¥ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¼˜åŠ¿&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ°è¿™é‡Œï¼Œåœ¨äº†è§£äº†å®¢æˆ·ç«¯ç¼“å­˜çš„åŸºæœ¬åŠŸèƒ½ä¸ä¸¤ç§æ¨¡å¼åï¼Œæˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹ï¼Œå’Œä¼ ç»Ÿçš„åªä½¿ç”¨redisåšè¿œç¨‹ç¼“å­˜ã€ä»¥åŠä½¿ç”¨æ•´åˆåçš„ä¸¤çº§ç¼“å­˜ç›¸æ¯”è¾ƒï¼Œå®¢æˆ·ç«¯ç¼“å­˜å…·æœ‰ä»€ä¹ˆæ ·çš„ä¼˜åŠ¿ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å½“åº”ç”¨çš„æœåŠ¡ç«¯å­˜åœ¨ç¼“å­˜æ—¶ï¼Œä¼šç›´æ¥è¯»å–æœ¬åœ°ç¼“å­˜ï¼Œèƒ½å¤Ÿå‡å°‘ç½‘ç»œè®¿é—®ä¸Šé€ æˆçš„å»¶è¿Ÿï¼Œä»è€ŒåŠ å¿«è®¿é—®é€Ÿåº¦&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åŒæ—¶ä¹Ÿèƒ½å‡å°‘è®¿é—®redisæœåŠ¡ç«¯çš„æ¬¡æ•°ï¼Œé™ä½redisçš„è´Ÿè½½å‹åŠ›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œä¸å†éœ€è¦é€šè¿‡å‘å¸ƒè®¢é˜…æ¥é€šçŸ¥å…¶ä»–ä¸»æœºæ›´æ–°æœ¬åœ°ç¼“å­˜ï¼Œæ¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚ä½¿ç”¨å®¢æˆ·ç«¯ç¼“å­˜åï¼Œå®ƒæ‰€å…·æœ‰çš„åŸç”Ÿçš„æ¶ˆæ¯é€šçŸ¥åŠŸèƒ½ï¼Œèƒ½å¾ˆå¥½åœ°æ”¯æŒä½œåºŸæœ¬åœ°ç¼“å­˜ï¼Œä¿è¯ä¹‹åè®¿é—®æ—¶èƒ½å–åˆ°æ›´æ–°åçš„æ–°æ•°æ®&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯¯åŒº&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å¼€å§‹æ¼”ç¤ºå®¢æˆ·ç«¯ç¼“å­˜çš„ä½¿ç”¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çº æ­£ä¸€ä¸ªè¯¯åŒºã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è™½ç„¶è¿™ä¸ªæ–°ç‰¹æ€§è¢«ç§°ä¸º&lt;strong&gt;å®¢æˆ·ç«¯ç¼“å­˜&lt;/strong&gt;ï¼Œä½†æ˜¯redisæœ¬èº«ä¸æä¾›åœ¨åº”ç”¨æœåŠ¡ç«¯ç¼“å­˜æ•°æ®çš„åŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½è¦ç”±&lt;strong&gt;è®¿é—®redisçš„å®¢æˆ·ç«¯&lt;/strong&gt;è‡ªå·±å»å®ç°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯´ç™½äº†ï¼Œä¹Ÿå°±æ˜¯redisæœåŠ¡ç«¯åªè´Ÿè´£é€šçŸ¥ä½ ï¼Œä½ ç¼“å­˜åœ¨åº”ç”¨æœåŠ¡æœ¬åœ°çš„è¿™ä¸ªkeyå·²ç»ä½œåºŸäº†ï¼Œè‡³äºä½ æœ¬åœ°å¦‚ä½•ç¼“å­˜çš„è¿™äº›æ•°æ®ï¼Œrediså¹¶ä¸å…³å¿ƒï¼Œä¹Ÿä¸è´Ÿè´£ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;åŠŸèƒ½æ¼”ç¤º&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢å°†é€šè¿‡ä¸€äº›å®ä¾‹æ¥è¿›è¡Œæ¼”ç¤ºï¼Œæœ¬æ–‡ä»£ç çš„è¿è¡Œå‰ææ¡ä»¶æ˜¯ä½ å·²ç»è£…å¥½äº†&lt;code&gt;Redis6.x&lt;/code&gt;ç‰ˆæœ¬ï¼Œlinuxç¯å¢ƒä¸‹å¯ä»¥ç›´æ¥ä»å®˜ç½‘ä¸‹è½½åç¼–è¯‘å®‰è£…ï¼Œwindowsç¯å¢ƒä¸‹çš„å®‰è£…å¯ä»¥å‚è€ƒ &lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIwMTgzOTQ0Ng==&amp;amp;mid=2247488620&amp;amp;idx=1&amp;amp;sn=0065c23e5055adddbe9ead318a49c9c6&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;æ‰‹æ‘¸æ‰‹æ•™ä½ åœ¨Windowsç¯å¢ƒä¸‹è¿è¡ŒRedis6.x&lt;/a&gt; è¿™ç¯‡æ–‡ç« ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¦‚å¿µä¸Šçš„ä¸œè¥¿æˆ‘ä»¬ä¹Ÿå¤§ä½“äº†è§£äº†ï¼Œä¸‹é¢æˆ‘ä»¬åˆ†åˆ«æ¥çœ‹ä¸€ä¸‹å®¢æˆ·ç«¯ç¼“å­˜å…·ä½“å®ç°çš„ä¸‰ç§æ¨¡å¼ï¼ˆè‡³äºä¸ºä»€ä¹ˆå¤šäº†ä¸€ç§ï¼Œåé¢å†æ¥ç»†è¯´ï¼‰ã€‚åœ¨æ­£å¼å¼€å§‹å‰ï¼Œå¼ºçƒˆå»ºè®®å¤§å®¶å…ˆèŠ±ä¸ªåå‡ åˆ†é’Ÿäº†è§£ä¸€ä¸‹ &lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MzIwMTgzOTQ0Ng==&amp;amp;mid=2247489005&amp;amp;idx=1&amp;amp;sn=ef5ceda185c92758e98b36888d53d34d&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;2&quot;&gt;Redis6åº•å±‚çš„é€šä¿¡åè®®RESP3&lt;/a&gt;ï¼Œå¦åˆ™åœ¨çœ‹åˆ°å…·ä½“çš„é€šä¿¡å†…å®¹æ—¶å¯èƒ½ä¼šå­˜åœ¨ä¸€äº›ç–‘é—®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é¦–å…ˆåšä¸€ä¸‹å‡†å¤‡å·¥ä½œï¼Œé€šè¿‡&lt;code&gt;telnet&lt;/code&gt;è¿æ¥redisæœåŠ¡ï¼Œå¹¶åˆ‡æ¢åˆ°&lt;code&gt;resp3&lt;/code&gt;åè®®æ¨¡å¼ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;telnetÂ 127.0.0.1Â 6379&lt;br/&gt;helloÂ 3&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;1ã€é»˜è®¤æ¨¡å¼&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥åˆ°redisæœåŠ¡åï¼Œéœ€è¦å…ˆé€šè¿‡æŒ‡ä»¤å¼€å¯&lt;code&gt;tracking&lt;/code&gt;æ¨¡å¼çš„åŠŸèƒ½ï¼Œå› ä¸ºåœ¨å®¢æˆ·ç«¯è¿æ¥åè¿™ä¸ªé€‰é¡¹æ˜¯é»˜è®¤å…³é—­çš„ï¼Œä¼šæ— æ³•æ”¶åˆ°å¤±æ•ˆç±»å‹çš„&lt;code&gt;push&lt;/code&gt;æ¶ˆæ¯ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;å¼€å¯&lt;/span&gt;&lt;br/&gt;clientÂ trackingÂ on&lt;br/&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;å…³é—­&lt;/span&gt;&lt;br/&gt;clientÂ trackingÂ off&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“å¼€å¯&lt;code&gt;tracking&lt;/code&gt;åçš„é»˜è®¤æ¨¡å¼ä¸‹ï¼ŒredisæœåŠ¡ç«¯ä¼šè®°å½•æ¯ä¸ªå®¢æˆ·ç«¯è¯·æ±‚è¿‡çš„keyï¼Œå½“keyå¯¹åº”çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šå‘é€å¤±æ•ˆä¿¡æ¯ç»™å®¢æˆ·ç«¯ã€‚ç®€å•æ€»ç»“ä¸€ä¸‹ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªæ¨¡å¼èƒ½å¤Ÿç”Ÿæ•ˆçš„&lt;strong&gt;å¿…è¦å‰ææ¡ä»¶&lt;/strong&gt;æœ‰ä¸¤ä¸ªï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢æˆ‘ä»¬è¿˜æ˜¯åœ¨&lt;code&gt;telnet&lt;/code&gt;ä¸­æ¥æ¨¡æ‹Ÿä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼Œåˆ†åˆ«å¯åŠ¨ä¸¤ä¸ªrediså®¢æˆ·ç«¯ï¼Œåœ¨client1ä¸­å…ˆæ‰§è¡Œ&lt;code&gt;get&lt;/code&gt;å‘½ä»¤åï¼Œå†åœ¨client2å¯¹ç›¸åŒçš„keyæ‰§è¡Œ&lt;code&gt;set&lt;/code&gt;æ“ä½œä¿®æ”¹å®ƒçš„å€¼ï¼Œä¹‹åå°±ä¼šåœ¨client1ä¸­æ”¶åˆ°&lt;code&gt;push&lt;/code&gt;ç±»å‹çš„æ¶ˆæ¯ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.9079563182527302&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zpom4BeZSicbdISYMMsL8iaw6JWTYeElpIBy8dicdc0qhE2HicicW5lmxoLhojOibBaNrjGd06MGsnjoJV6zsHWm5tYQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;641&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;push&lt;/code&gt;ç±»å‹çš„æ¶ˆæ¯æˆ‘ä»¬åœ¨RESP3ä¸­ä»‹ç»è¿‡äº†ï¼Œè¿™é‡Œç®€å•å†å” å¨ä¸¤å¥ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;br/&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;br/&gt;invalidate&lt;br/&gt;*1&lt;br/&gt;&lt;span&gt;$&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;br/&gt;user&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;èµ·å§‹çš„ç¬¬ä¸€å­—èŠ‚&lt;code&gt;&amp;gt;&lt;/code&gt;è¡¨ç¤ºè¯¥æ¶ˆæ¯ä¸º&lt;code&gt;push&lt;/code&gt;ç±»å‹ï¼Œåé¢æ¶ˆæ¯ä½“ä¸­åŒ…å«äº†ä¸¤éƒ¨åˆ†å†…å®¹ï¼Œç¬¬ä¸€éƒ¨åˆ†è¡¨ç¤ºæ”¶åˆ°çš„æ¶ˆæ¯ç±»å‹ä¸º&lt;code&gt;invalidate&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯ä½œåºŸç±»å‹çš„ä¿¡æ¯ï¼Œç¬¬äºŒéƒ¨åˆ†åˆ™æ˜¯éœ€è¦ä½œåºŸçš„keyæ˜¯&lt;code&gt;user&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é™¤æ­¤ä¹‹å¤–ï¼Œå½“ä¸€ä¸ªç¼“å­˜çš„keyåˆ°è¾¾å¤±æ•ˆæ—¶é—´å¯¼è‡´è¿‡æœŸï¼Œæˆ–æ˜¯å› ä¸ºåˆ°è¾¾æœ€å¤§å†…å­˜ï¼Œè¦ä½¿ç”¨é©±é€ç­–ç•¥è¿›è¡Œé©±é€æ—¶ï¼Œä¹Ÿä¼šå¯¹å®¢æˆ·ç«¯å‘é€&lt;code&gt;PUSH&lt;/code&gt;çš„æ¶ˆæ¯ã€‚ä¸‹é¢ä»¥ç¼“å­˜çš„keyè¿‡æœŸä¸ºä¾‹ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.9145299145299146&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zpom4BeZSicbdISYMMsL8iaw6JWTYeElpI7zK86c5B5Cp4UGaxy9dULWtAav83AnuYtVLkichLkjTuicQiagHGDcQUw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;351&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦å¤–ï¼Œå¯¹äºå•ä¸ªkeyæ¥è¯´ï¼Œè¿™ä¸ª&lt;code&gt;tracking&lt;/code&gt;æ¶ˆæ¯åªä¼šå¯¹å®¢æˆ·ç«¯å‘é€ä¸€æ¬¡ï¼Œå½“ç¬¬äºŒæ¬¡ä¿®æ”¹è¯¥keyæ‰€å¯¹åº”çš„å€¼åï¼Œå®¢æˆ·ç«¯ä¸ä¼šå†æ”¶åˆ°&lt;code&gt;tracking&lt;/code&gt;çš„æ¶ˆæ¯ã€‚åªæœ‰å¯¹è¿™ä¸ªkeyå†æ‰§è¡Œä¸€æ¬¡&lt;code&gt;get&lt;/code&gt;å‘½ä»¤ï¼Œä¹‹åæ‰ä¼šå†æ¬¡æ”¶åˆ°&lt;code&gt;tracking&lt;/code&gt;æ¶ˆæ¯ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8611544461778471&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zpom4BeZSicbdISYMMsL8iaw6JWTYeElpImbfxhg4gz6OBUhI48weyQTPicGLHyINMY3BhD2zgDqWyGKNDyOAQNSg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;641&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é»˜è®¤æ¨¡å¼è™½ç„¶ä½¿ç”¨èµ·æ¥ç®€å•ï¼Œä½†æ˜¯éœ€è¦åœ¨æœåŠ¡ç«¯å­˜å‚¨å®¢æˆ·ç«¯çš„è®¿é—®æ•°æ®ï¼Œè®°å½•å“ªäº›keyè¢«å“ªäº›å®¢æˆ·ç«¯è®¿é—®è¿‡ã€‚å¦‚æœè®¿é—®çš„ä¸æ˜¯å°‘é‡çš„çƒ­ç‚¹æ•°æ®çš„è¯ï¼Œå¯èƒ½ä¼šå ç”¨å¤§é‡redisæœåŠ¡ç«¯çš„å†…å­˜ç©ºé—´ã€‚åº”å¯¹è¿™ç§æƒ…å†µï¼Œå¯ä»¥è¯•ä¸€è¯•ä¸‹é¢è¦ä»‹ç»çš„å¹¿æ’­æ¨¡å¼ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;2ã€å¹¿æ’­æ¨¡å¼&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å¹¿æ’­æ¨¡å¼&lt;code&gt;BCAST&lt;/code&gt;ä¸‹ï¼ŒredisæœåŠ¡ç«¯ä¸å†è®°å½•keyçš„è®¿é—®æƒ…å†µï¼Œè€Œæ˜¯æ— å·®åˆ«åœ°å‘æ‰€æœ‰å¼€å¯&lt;code&gt;tracking&lt;/code&gt;å¹¿æ’­çš„å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ã€‚è¿™æ ·ä¸€æ¥ï¼Œå¥½å¤„å°±æ˜¯ä¸éœ€è¦æµªè´¹redisæœåŠ¡ç«¯çš„å†…å­˜è¿›è¡Œè®°å½•ï¼Œä½†æ˜¯åå¤„å°±æ˜¯å®¢æˆ·ç«¯å¯èƒ½ä¼šæ”¶åˆ°è¿‡å¤šçš„æ¶ˆæ¯ï¼Œå…¶ä¸­å¯èƒ½è¿˜ä¼šåŒ…å«è‡ªå·±ä¸éœ€è¦çš„ä¸€äº›keyã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ä½¿ç”¨å‰ï¼Œéœ€è¦å…ˆé€šè¿‡å‘½ä»¤å¼€å¯å¹¿æ’­æ¨¡å¼ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;clientÂ trackingÂ onÂ bcast&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¿›è¡Œå¹¿æ’­æ¨¡å¼çš„ä½¿ç”¨æ¼”ç¤ºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.06396255850234&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zpom4BeZSicbdISYMMsL8iaw6JWTYeElpIXcUMZBcx6nar5oclMBx9G77jVF5JUbvU63jNrvGMLmciak5kSLOYLCA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;641&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥çœ‹åˆ°åœ¨å¼€å¯å¹¿æ’­æ¨¡å¼åï¼Œåªè¦åœ¨client2ä¸­ä¿®æ”¹äº†keyå¯¹åº”çš„å€¼ï¼Œåœ¨client1ä¸­éƒ½ä¼šæ”¶åˆ°ä½œåºŸæ¶ˆæ¯ï¼Œè€Œä¸ç®¡client1ä¹‹å‰åœ¨æœ¬åœ°æ˜¯å¦è¿›è¡Œè¿‡ç¼“å­˜ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¹¶ä¸”ï¼Œå¦å¤–ä¸€ç‚¹å’Œé»˜è®¤æ¨¡å¼ä¸åŒçš„æ˜¯ï¼Œå¹¿æ’­æ¨¡å¼æ˜¯èƒ½å¤Ÿé‡å¤å¤šæ¬¡æ”¶åˆ°ä¸€ä¸ªkeyçš„å¤±æ•ˆæ¶ˆæ¯çš„ï¼Œå› ä¸ºæœåŠ¡ç«¯æ²¡æœ‰è®°å½•ï¼Œæ‰€ä»¥åªè¦æœ‰keyå‘ç”Ÿäº†ä¿®æ”¹ï¼Œå®¢æˆ·ç«¯å°±ä¼šæ”¶åˆ°å¤±æ•ˆæ¶ˆæ¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ—¶å€™ï¼Œæœ‰çš„å°ä¼™ä¼´å¯èƒ½å°±è¦é—®äº†ï¼Œå¦‚æœæˆ‘ä¸æƒ³æ”¶åˆ°è¿™ä¹ˆå¤šæ²¡ç”¨çš„å†—ä½™æ¶ˆæ¯ï¼Œæœ‰æ²¡æœ‰ä»€ä¹ˆåŠæ³•è¿›è¡Œä¸€ä¸‹è¿‡æ»¤æˆ–ç²¾ç®€å‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç­”æ¡ˆæ˜¯å¯ä»¥çš„ï¼Œåœ¨å¹¿æ’­æ¨¡å¼ä¸‹ï¼Œå®¢æˆ·ç«¯å¯ä»¥åªå…³æ³¨ä¸€äº›&lt;strong&gt;ç‰¹å®šå‰ç¼€&lt;/strong&gt;çš„keyï¼Œè¡¨ç¤ºæˆ‘åªéœ€è¦æ¥æ”¶è¿™äº›å‰ç¼€çš„keyï¼Œå…¶ä»–çš„å°±ä¸è¦å‘ç»™æˆ‘äº†ã€‚å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;clientÂ trackingÂ onÂ bcastÂ prefixÂ myprefix&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å†æ¥çœ‹ä¸€ä¸‹ä½¿ç”¨è¿‡ç¨‹çš„ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.9547581903276131&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zpom4BeZSicbdISYMMsL8iaw6JWTYeElpIkB3wc37bHabT5VvXTshZHJWziaAbAvPapfXf5ILlpdPIQKxPwOSiaegw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;641&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥çœ‹åˆ°ï¼Œåœ¨è®¾ç½®äº†åªå…³æ³¨ä»¥&lt;code&gt;order:&lt;/code&gt;ä½œä¸ºå‰ç¼€çš„keyåï¼ŒæˆåŠŸè¿‡æ»¤æ‰äº†&lt;code&gt;user&lt;/code&gt;çš„å¤±æ•ˆæ¶ˆæ¯ã€‚ä»è¿™ä¸ªè§’åº¦æ¥çœ‹ï¼Œä¹Ÿè¦æ±‚äº†æˆ‘ä»¬åœ¨ç¼“å­˜ä¸€ä¸ªç±»å‹çš„æ•°æ®æ—¶ï¼Œéƒ½ä»¥ç›¸åŒçš„å•è¯ä½œä¸ºå‰ç¼€ï¼Œè§„èŒƒäº†æˆ‘ä»¬åœ¨ä½¿ç”¨ç¼“å­˜ä¸­å¯¹keyçš„å‘½åè§„åˆ™ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è‡³äºåœ¨ä¸šåŠ¡ä¸­å…·ä½“è¦ä½¿ç”¨å“ªç§æ¨¡å¼ï¼Œå¯èƒ½æ›´å¤šçš„éœ€è¦è¿›è¡Œä¸€ä¸‹æƒè¡¡ã€‚çœ‹ä¸€ä¸‹ä½ ç©¶ç«Ÿæ˜¯èƒ½å¿å—å ç”¨æ›´å¤šredisæœåŠ¡ç«¯çš„å†…å­˜ï¼Œè¿˜æ˜¯èƒ½å¤Ÿå¿å—æ”¶åˆ°å¤§é‡ä¸éœ€è¦çš„å¤±æ•ˆæ¶ˆæ¯ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3ã€è½¬å‘æ¨¡å¼&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é»˜è®¤æ¨¡å¼å’Œå¹¿æ’­æ¨¡å¼çš„ç”Ÿæ•ˆï¼Œéƒ½è¦åœ¨å¼€å¯&lt;code&gt;RESP3&lt;/code&gt;åè®®çš„å‰æä¸‹ï¼Œå…·ä½“åŸå› çœ‹è¿‡ä¸Šé¢çš„ä¾‹å­å¤§å®¶åº”è¯¥ä¹Ÿéƒ½æ¸…æ¥šäº†ï¼Œå› ä¸ºè¦ä½¿ç”¨&lt;code&gt;tracking&lt;/code&gt;çš„è¯ï¼Œå°±å¿…é¡»è¦å€ŸåŠ©åˆ°&lt;code&gt;RESP3&lt;/code&gt;åè®®ä¸­çš„æ–°çš„&lt;code&gt;push&lt;/code&gt;æ¶ˆæ¯ç±»å‹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£ä¹ˆå¦‚æœå®¢æˆ·ç«¯è¿˜æ˜¯ä½¿ç”¨çš„æ—§ç‰ˆæœ¬&lt;code&gt;RESP V2&lt;/code&gt;çš„è¯ï¼Œä¹Ÿæƒ³è¦ä½“éªŒè¿™ä¸€åŠŸèƒ½ï¼Œåº”è¯¥å¦‚ä½•è¿›è¡Œæ”¹é€ å‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸å¾—ä¸è¯´redis6çš„å¼€å‘è€…æƒ³çš„è¿˜æ˜¯è›®å…¨é¢çš„ï¼Œä¸ºäº†é€‚é…&lt;code&gt;RESP V2&lt;/code&gt;ï¼Œä¸“é—¨è®¾è®¡äº†ä¸€ç§æ–°çš„&lt;strong&gt;è½¬å‘æ¨¡å¼&lt;/strong&gt;ï¼Œå…è®¸ä½¿ç”¨æ—§ç‰ˆæœ¬åè®®çš„å®¢æˆ·ç«¯é€šè¿‡&lt;code&gt;Pub/Sub&lt;/code&gt;å‘å¸ƒè®¢é˜…åŠŸèƒ½æ¥æ¥æ”¶keyçš„å¤±æ•ˆä¿¡æ¯ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.444794952681388&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zpom4BeZSicbdISYMMsL8iaw6JWTYeElpIdfRS9Jnu0OPqzpeFN3Tqh8L6iaOuLSj3duic243oZxTVvopEFUFpB23A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;951&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»ä¸Šé¢è¿™å¼ å›¾å¯ä»¥çœ‹åˆ°ï¼Œè½¬å‘æ¨¡å¼çš„æ ¸å¿ƒå°±æ˜¯redisæœåŠ¡ç«¯ä¼šå°†åŸå…ˆ&lt;code&gt;push&lt;/code&gt;ç±»å‹çš„&lt;code&gt;tracking&lt;/code&gt;ä¿¡æ¯ï¼Œè½¬å‘åˆ°è®¢é˜…äº†&lt;code&gt;_redis_:invalidate&lt;/code&gt;è¿™ä¸€ä¿¡é“çš„è¢«æŒ‡å®šçš„å®¢æˆ·ç«¯ä¸Šã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬æ¥æ¢³ç†ä¸€ä¸‹ä¸Šé¢çš„æµç¨‹ï¼Œé¦–å…ˆåœ¨client1éœ€è¦ä½¿ç”¨æŒ‡ä»¤å¼€å¯è½¬å‘æ¨¡å¼ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;clientÂ trackingÂ onÂ bcastÂ redirectÂ [client-id]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›¸å¯¹å¹¿æ’­æ¨¡å¼ï¼Œå¤šäº†ä¸¤ä¸ªå‚æ•°ï¼Œ&lt;code&gt;redirect&lt;/code&gt;è¡¨ç¤ºä¸ºè½¬å‘æ¨¡å¼ï¼Œåé¢çš„&lt;code&gt;client-id&lt;/code&gt;è¡¨ç¤ºæ¶ˆæ¯è¦å‘é€ç»™å“ªä¸€ä¸ªå®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯çš„idå¯ä»¥åœ¨client2ä¸Šé€šè¿‡&lt;code&gt;client id&lt;/code&gt;æŒ‡ä»¤è·å–ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨client2ä¸­ï¼Œåˆ™éœ€è¦è®¢é˜…æŒ‡å®šçš„ä¿¡é“ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;subscribeÂ _redis_:invalidate&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶å®è¯´ç™½äº†ï¼Œè½¬å‘æ¨¡å¼è¿˜æ˜¯ä½¿ç”¨çš„å‘å¸ƒè®¢é˜…åŠŸèƒ½ç½¢äº†ï¼Œåªä¸è¿‡rediså¸®æˆ‘ä»¬è§£æ”¾äº†åŒæ‰‹ï¼ŒæŠŠå‘é€æ¶ˆæ¯çš„å·¥ä½œç”±è‡ªå·±å®Œæˆäº†ã€‚æ•´ä¸ªæ“ä½œçš„æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8621997471554994&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zpom4BeZSicbdISYMMsL8iaw6JWTYeElpI0V1QIuzTVQYDBfPq6CZQRqTiaSk1Kpiay83IuDQA8wIqFoEUibWqKsC9A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;791&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥çœ‹åˆ°ï¼Œclient2ä¸­æ”¶åˆ°çš„æ¶ˆæ¯æ ¼å¼ä¸ä¹‹å‰çš„&lt;code&gt;push&lt;/code&gt;ç±»å‹æ¶ˆæ¯ä¸åŒï¼Œæ˜¯ä¸€æ¡RESP V2ä¸­å¤šæ¡æ‰¹é‡å›å¤æ ¼å¼çš„æ¶ˆæ¯ï¼Œè¡¨ç¤ºçš„å«ä¹‰åŒæ ·æ˜¯æ”¶åˆ°çš„keyå·²ç»ä½œåºŸæ‰äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶è¯´å¼€å¯è½¬å‘æ¨¡å¼çš„æŒ‡ä»¤ä¸­ä¹Ÿå¸¦äº†ä¸€ä¸ª&lt;code&gt;bcast&lt;/code&gt;ï¼Œä½†æ˜¯å®ƒå’Œå¹¿æ’­æ¨¡å¼æœ‰ç€éå¸¸å¤§çš„åŒºåˆ«ã€‚åœ¨è½¬å‘æ¨¡å¼ä¸‹ï¼Œ&lt;code&gt;key&lt;/code&gt;çš„ä½œåºŸæ¶ˆæ¯åªèƒ½è¢«è½¬å‘åˆ°ä¸€ä¸ªå®¢æˆ·ç«¯ä¸Šï¼Œå¦‚æœå…ˆåæ‰§è¡Œä¸¤æ¡æŒ‡å®šè½¬å‘æŒ‡ä»¤ï¼Œé‚£ä¹ˆåæ‰§è¡Œçš„æŒ‡ä»¤ä¼šè¦†ç›–å‰ä¸€æŒ‡ä»¤ä¸­è½¬å‘çš„&lt;code&gt;client-id&lt;/code&gt;ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8060965283657917&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/zpom4BeZSicbdISYMMsL8iaw6JWTYeElpI3ia7QMXQg1ib5YWibVv4OL6iaaX5VQiaeSYS0uLq05o0ickiabMe4gRHZ4gdw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1181&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çœ‹åˆ°è¿™é‡Œæ˜¯ä¸æ˜¯å¤šå°‘æ„Ÿè§‰è¿™ä¸ªè½¬å‘æ¨¡å¼æœ‰ç‚¹é¸¡è‚‹ï¼Œæ¯•ç«Ÿå®é™…çš„ä¸šåŠ¡åœºæ™¯ä¸­å¾ˆæœ‰å¯èƒ½ä¼šæœ‰å¤šä¸ªå®¢æˆ·ç«¯çš„å­˜åœ¨ï¼Œåªèƒ½è½¬å‘ä¸€ä¸ªå®åœ¨æ˜¯æœ‰ç‚¹è¯´ä¸è¿‡å»äº†ã€‚ä¸è¿‡ï¼Œä¹Ÿæœ‰å¯èƒ½ä½œè€…å°±æ˜¯è¿™ä¹ˆè®¾è®¡ï¼Œç•™ç‚¹ç¼ºé™·ï¼Œå¥½è®©å¤§å®¶æ›´å¿«åœ°æ‹¥æŠ±&lt;code&gt;RESP3&lt;/code&gt;â€¦â€¦&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¥½å•¦ï¼Œåˆ°è¿™é‡Œå®¢æˆ·ç«¯ç¼“å­˜çš„åŸºæœ¬ç†è®ºå’Œä½¿ç”¨å°±ä»‹ç»çš„å·®ä¸å¤šäº†ï¼Œä¸å¾—ä¸è¯´ï¼ŒRedis6çš„è¿™ä¸ªæ–°ç‰¹æ€§ç¡®å®ç»™äº†æˆ‘ä»¬çœ¼å‰ä¸€äº®çš„æ„Ÿè§‰ã€‚ä»è¿™ä¸ªæ–°ç‰¹æ€§ä¹Ÿå¯ä»¥çœ‹å‡ºï¼ŒRediså¤§æœ‰æŠŠç¼“å­˜ä»æœåŠ¡ç«¯çš„å±€é™ä¸­æŒ£è„±å‡ºæ¥ï¼ŒæŸ“æŒ‡å‘å®¢æˆ·ç«¯ï¼Œä¸€ç»Ÿç¼“å­˜æ±Ÿæ¹–çš„æ„å‘³ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸è¿‡è¿™ä¸ªè¿‡ç¨‹åº”è¯¥å¹¶ä¸ç®€å•ï¼Œå°±åƒæˆ‘ä»¬å‰é¢è¯´çš„ï¼Œæ¯•ç«Ÿåªæœ‰RedisæœåŠ¡ç«¯è¿˜ä¸å¤Ÿï¼Œè¿˜éœ€è¦ä¼˜ç§€çš„å®¢æˆ·ç«¯è¿›è¡Œæ”¯æŒæ‰è¡Œã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‚£ä¹ˆä¸‹ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°±æ¥ä»å®æˆ˜è§’åº¦ï¼Œçœ‹çœ‹å¦‚ä½•æ”¹é€ å®¢æˆ·ç«¯ï¼Œè®©&lt;code&gt;client-side caching&lt;/code&gt;èƒ½åœ¨é¡¹ç›®ä¸­è½åœ°å¼€èŠ±ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ¬¡çš„åˆ†äº«å°±åˆ°è¿™é‡Œï¼Œæˆ‘æ˜¯Hydraï¼Œä¸‹ç¯‡æ–‡ç« å†è§ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å®˜æ–¹æ–‡æ¡£ï¼š&lt;/p&gt;&lt;p&gt;https://redis.io/docs/manual/client-side-caching/&lt;/p&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>31be310e12f5148c6efbd2ea28b28bc4</guid>
<title>Golangç”¨protoæ–‡ä»¶åŒæ—¶ç”ŸæˆgRPCå’ŒHTTP</title>
<link>https://toutiao.io/k/t6bq5xo</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                                                                     &quot; id=&quot;js_content&quot;&gt;
            &lt;p&gt;&lt;strong&gt;&lt;span&gt;è¿™é‡Œæ˜¯Zå“¥çš„ä¸ªäººå…¬ä¼—å·&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;æ¯å‘¨äº”11ï¼š45 æŒ‰æ—¶é€è¾¾&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å½“ç„¶äº†ï¼Œä¹Ÿä¼šæ—¶ä¸æ—¶åŠ ä¸ªé¤ï½&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;æˆ‘çš„ç¬¬ã€Œ224ã€ç¯‡åŸåˆ›æ•¬ä¸Š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯Zå“¥ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;åšæŠ€æœ¯çš„éƒ½çŸ¥é“ï¼Œç¨‹åºä¹‹é—´çš„é€šè®¯ï¼Œå¸¸ç”¨çš„æ–¹å¼æœ‰ä¸¤ç§ï¼ŒRPC å’Œ HTTPã€‚æ™®éçš„å…±è¯†æ˜¯ç³»ç»Ÿå†…éƒ¨çš„å„ä¸ªå­ç³»ç»Ÿä¹‹é—´çš„é€šè®¯ç”¨ RPCï¼Œä¸å¤–éƒ¨ç³»ç»Ÿä¹‹é—´çš„é€šè®¯ç”¨ HTTPã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ä¸ºäº†é¿å…éœ€è¦åˆ†åˆ«ç¼–å†™ä¸¤å¥—å¥‘çº¦æ–‡ä»¶æ¥ç”Ÿæˆä¸¤å¥— APIï¼ˆ.proto å’Œ .apiï¼‰ï¼Œå¦‚æœèƒ½å¤Ÿæ ¹æ®åŒä¸€ä»½å¥‘çº¦æ–‡ä»¶ç”Ÿæˆä¸¤å¥— API çš„ä»£ç å°±å¤ªæ£’äº†ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;Zå“¥ç›®å‰æ‰€åœ¨çš„å…¬å¸ï¼Œrpc ä½¿ç”¨çš„æ¡†æ¶æ˜¯ gRPCï¼Œæ‰€ä»¥è‡ªç„¶å…ˆæƒ³å¾—æ˜¯ï¼Œæ˜¯å¦èƒ½å¤Ÿæ ¹æ®ä¸€ä»½ proto æ–‡ä»¶ï¼ŒåŒæ—¶ç”Ÿæˆ gRPC å’Œ HTTP çš„ stub ä»£ç å‘¢ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ç½‘ä¸Šå¾ˆå¿«å°±æ‰¾åˆ°äº†ä¸€ä¸ªç¬¦åˆè¦æ±‚çš„æ¡†æ¶ã€‚ç›¸ä¿¡ä¸å°‘ gopher ä»¬åº”è¯¥ä¹Ÿå¬è¯´è¿‡æˆ–è€…æ­£åœ¨ä½¿ç”¨ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;blockquote class=&quot;js_blockquote_wrap&quot; data-type=&quot;2&quot; data-url=&quot;&quot; data-author-name=&quot;&quot; data-content-utf8-length=&quot;46&quot; data-source-title=&quot;&quot;&gt;&lt;section class=&quot;js_blockquote_digest&quot;&gt;&lt;section&gt;https://github.com/grpc-ecosystem/grpc-gateway&lt;/section&gt;&lt;/section&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;æ¡†æ¶çš„åŸç†ç”¨ä¸€å¼ å›¾å³å¯è¡¨è¾¾ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.6785714285714286&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/oB5bd6W6hI3YVXf0Zbucyv7GAQTfuVjCp8knSDvjvU1dKFAWCicc48BNHNtLeH8NJJOIU30l0cibCsyXZ3ZWqgEA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1120&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span/&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;é€šè¿‡ä¸€ä»½ proto æ–‡ä»¶ï¼Œåœ¨ç”Ÿæˆ gRPC ä»£ç çš„åŒæ—¶ç”Ÿæˆä¸€ä¸ªåŸºäº HTTP1.1 + JSON çš„åå‘ä»£ç† gatewayï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œæ—¢å¯ä»¥é€šè¿‡ gRPC çš„æ–¹å¼ç›´æ¥è°ƒç”¨å®é™…çš„ server ï¼Œä¹Ÿå¯ä»¥é€šè¿‡åå‘ä»£ç†ä¸­è½¬ä¸€æ¬¡æ¥è®¿é—® serverã€‚&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å…·ä½“çš„ä½¿ç”¨æ–¹å¼çœ‹ github ä¸Šçš„å®˜æ–¹æ•™ç¨‹å³å¯ï¼ŒZ å“¥å’Œä½ ä¸»è¦èŠä¸€ä¸‹å…¶ä¸­å¯èƒ½ä¼šé‡åˆ°çš„å¡ç‚¹ã€‚æ¯•ç«Ÿå›½å†…çš„ç½‘ç»œæƒ…å†µä½ æ‡‚çš„ï¼Œæœ‰äº›æ“ä½œå¯èƒ½ä¼šé‡åˆ°ä¸€äº›å›°éš¾ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;/01Â  ä¸ä¼šç§‘å­¦ä¸Šç½‘ä¸è¦ç”¨buf/&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;æ•™ç¨‹é‡Œæä¾›äº†ä¸¤ç§æ¥æ“ä½œï¼Œä¸€ç§æ˜¯é€šè¿‡åŸºç¡€å·¥å…· protoc æ¥æ“ä½œï¼Œå¦ä¸€ç§æ˜¯é€šè¿‡ä¸€ä¸ªåŸºäº protoc å°è£…çš„å·¥å…· buf æ¥æ“ä½œã€‚protoc å¯ä»¥åŸºäº go mod æ¥å®‰è£…ï¼Œé‰´äº go mod è¿˜æœ‰å›½å†…çš„é•œåƒç«™ç‚¹å¯ä»¥è§£å†³è®¿é—®çš„å›°éš¾ï¼Œå»ºè®®ä¸ä¼šç§‘å­¦ä¸Šç½‘çš„å°ä¼™ä¼´é€šè¿‡ protoc æ¥æ“ä½œï¼Œå› ä¸ºä½ æ²¡åŠæ³•æˆåŠŸå®‰è£… bufã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;/02Â  æ‰‹åŠ¨ä¸‹è½½ googleapis çš„repo/&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ç„¶åï¼Œå½“ä½ å®šä¹‰ gateway çš„æ—¶å€™ï¼Œéœ€è¦å¼•å…¥ä¸€äº› google çš„ packagesï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿç›´æ¥å» github ä¸Šä¸‹è½½ï¼Œå…·ä½“åœ°å€æ˜¯ï¼š&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;blockquote class=&quot;js_blockquote_wrap&quot; data-type=&quot;2&quot; data-url=&quot;&quot; data-author-name=&quot;&quot; data-content-utf8-length=&quot;40&quot; data-source-title=&quot;&quot;&gt;&lt;section class=&quot;js_blockquote_digest&quot;&gt;&lt;section&gt;https://github.com/googleapis/googleapis&lt;/section&gt;&lt;/section&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;å¦‚æœå¯ä»¥çš„è¯ï¼Œå»ºè®®æŠŠæ•´ä¸ªä»“åº“éƒ½ä¸‹è½½ä¸‹æ¥ï¼Œå¦åˆ™å°±å•ç‹¬ä¸‹è½½æ•™ç¨‹é‡Œæåˆ°çš„4ä¸ªæ–‡ä»¶å³å¯ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ç‰¹åˆ«è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨ googleapis/google/ç›®å½•ä¸‹ç¼ºå°‘çš„ protobuf ç›¸å…³æ–‡ä»¶éœ€è¦åˆ°ä¸‹é¢çš„ repo é‡Œå»ä¸‹è½½ï¼Œå¹¶ä¸”æ”¾åˆ° googleapis/google/ç›®å½•ä¸‹ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;blockquote class=&quot;js_blockquote_wrap&quot; data-type=&quot;2&quot; data-url=&quot;&quot; data-author-name=&quot;&quot; data-content-utf8-length=&quot;73&quot; data-source-title=&quot;&quot;&gt;&lt;section class=&quot;js_blockquote_digest&quot;&gt;&lt;section&gt;https://github.com/protocolbuffers/protobuf/tree/main/src/google/protobuf&lt;/section&gt;&lt;/section&gt;&lt;/blockquote&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;/03Â  protoc -I æŒ‡å®šæŸ¥æ‰¾ç›®å½•/&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å®˜æ–¹æ•™ç¨‹é‡Œçš„ protoc -I . åªä¼šæŸ¥æ‰¾å½“å‰å‘½ä»¤æ‰§è¡Œæ‰€åœ¨ç›®å½•çš„èŒƒå›´ï¼Œæ‰€ä»¥å¦‚æœä½ ä¸‹è½½çš„ googlesapi ä¸å­˜æ”¾åœ¨å½“å‰ç›®å½•ä¸‹ï¼Œåˆ™éœ€è¦å¢åŠ é¢å¤–ä¿¡æ¯æŒ‡å®šä¸€ä¸‹æŸ¥æ‰¾ç›®å½•ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;æŒ‡å®šçš„æ–¹å¼æ˜¯å†å¢åŠ ä¸€ä¸ª -Iï¼Œå‘½ä»¤å¦‚ä¸‹ï¼ˆå…¶ä¸­ç¬¬äºŒè¡Œå°±æ˜¯æ–°å¢çš„ç”¨äºæŸ¥æ‰¾ google packages çš„ç›®å½•ï¼‰ï¼š&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span/&gt;&lt;br/&gt;&lt;/section&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;properties&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__attr&quot;&gt;protoc&lt;/span&gt; &lt;span class=&quot;code-snippet__string&quot;&gt;-I ./ \&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    -I $GOPATH/src/googleapis\&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    --grpc-gateway_out ./gen/go \&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    --grpc-gateway_opt logtostderr=true \&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    --grpc-gateway_opt paths=source_relative \&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    --grpc-gateway_opt generate_unbound_methods=true \&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    your/service/v1/your_service.proto&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;section&gt;&lt;span/&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å¦‚æœè¿˜æœ‰å…¶å®ƒç›®å½•éœ€è¦æŸ¥æ‰¾ï¼Œé‚£ä¹ˆç»§ç»­å¢åŠ  -I å³å¯ã€‚&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å¥½äº†éœ€è¦æ³¨æ„çš„ç‚¹å°±æ˜¯ä»¥ä¸Š3ä¸ªï¼Œå®˜æ–¹æ•™ç¨‹ä¸­æåˆ°çš„ä¸‰ä¸ªå‘½ä»¤å¯ä»¥ä¸€èµ·æ‰§è¡Œï¼Œè¿™æ ·ä¾¿å¯åŒæ—¶ç”Ÿæˆ gRPC serverã€gateway å’Œ swagger.json ï¼š&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span/&gt;&lt;br/&gt;&lt;/section&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;properties&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__attr&quot;&gt;protoc&lt;/span&gt; &lt;span class=&quot;code-snippet__string&quot;&gt;-I ./ \&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    -I $GOPATH/src/googleapis\&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    --go_out ./gen/go/ --go_opt paths=source_relative \&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    --go-grpc_out ./gen/go/ --go-grpc_opt paths=source_relative \&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    --grpc-gateway_out ./gen/go/  \&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    --grpc-gateway_opt logtostderr=true \&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    --grpc-gateway_opt paths=source_relative \&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    --grpc-gateway_opt generate_unbound_methods=true \&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    --openapiv2_out . --openapiv2_opt logtostderr=true \&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    your/service/v1/your_service.proto&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;section&gt;&lt;span/&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å…³äºä¸€äº›gRPC-Gatewayçš„å…¶å®ƒç”¨æ³•å¯ä»¥å‚è€ƒï¼š&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;blockquote class=&quot;js_blockquote_wrap&quot; data-type=&quot;2&quot; data-url=&quot;&quot; data-author-name=&quot;&quot; data-content-utf8-length=&quot;46&quot; data-source-title=&quot;&quot;&gt;&lt;section class=&quot;js_blockquote_digest&quot;&gt;&lt;section&gt;https://grpc-ecosystem.github.io/grpc-gateway/&lt;/section&gt;&lt;/section&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;å¥½äº†ï¼Œè¿™ç¯‡å‘¢ï¼ŒZå“¥å’Œä½ åˆ†äº«äº†å¦‚ä½•ç”¨ä¸€ä»½ proto æ–‡ä»¶åŒæ—¶ç”Ÿæˆ gRPC å’Œ HTTP çš„ Stub ä»£ç ä»¥åŠ Swagger æ–‡æ¡£ã€‚&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å¦‚æ­¤ä¸ä½†å¯ä»¥æé«˜æ•ˆç‡ï¼Œè¿˜å¯ä»¥é¿å…ç»´æŠ¤ä¸¤ä»½ä¸åŒçš„å¥‘çº¦æ–‡ä»¶æ‰€å¸¦æ¥ä¸ä¸€è‡´é£é™©ï¼Œå¸Œæœ›å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¨èé˜…è¯»ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;åŸåˆ›ä¸æ˜“ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« è¿˜ä¸é”™ï¼Œå°±ã€Œ&lt;/span&gt;&lt;span&gt;&lt;strong&gt;ç‚¹èµ&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ã€æˆ–è€…ã€Œ&lt;span&gt;&lt;strong&gt;åœ¨çœ‹&lt;/strong&gt;&lt;/span&gt;ã€ä¸€ä¸‹å§ï¼Œé¼“åŠ±æˆ‘çš„åˆ›ä½œ ï¼šï¼‰&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¹Ÿå¯ä»¥åˆ†äº«æˆ‘çš„å…¬ä¼—å·åç‰‡ç»™æœ‰éœ€è¦çš„æœ‹å‹ä»¬ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzU2NzEwMDc4OQ==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/oB5bd6W6hI1ENbrFbGjEucl1Az92hEuwmUSdaNXxibiaWuO9sLTPHokw00p8ZxAYdIJJJ7FXj77Ts0YoV5KwEKCA/0?wx_fmt=png&quot; data-nickname=&quot;è·¨ç•Œæ¶æ„å¸ˆ&quot; data-alias=&quot;Zachary_ZF&quot; data-signature=&quot;åšæŒåŸåˆ›ã€‚ä¸“æ³¨å¤§å‹äº’è”ç½‘æŠ€æœ¯ï¼Œæ¶‰çŒäº§å“ã€è¿è¥ã€‚&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;å¦‚æœä½ æœ‰å…³äºè½¯ä»¶æ¶æ„ã€åˆ†å¸ƒå¼ç³»ç»Ÿã€äº§å“ã€è¿è¥çš„å›°æƒ‘&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¯ä»¥è¯•è¯•ç‚¹å‡»ã€Œ&lt;strong&gt;é˜…è¯»åŸæ–‡&lt;/strong&gt;ã€&lt;/span&gt;&lt;/p&gt;
          &lt;/div&gt;

          

          



           
                                
                    
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>9e55c5ec2faf1027147a89e3430125fb</guid>
<title>vectoråˆå§‹åŒ–ä¸å¦å¯¼è‡´çš„å·¨å¤§æ€§èƒ½å·®å¼‚</title>
<link>https://toutiao.io/k/8uzcpmb</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;Mzk0MzI4OTI1Ng==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHhKgtwWvzaYZodgfpphdA6WWKEMXTn6ImCCCuEzlPKicNBcpzBUyjK1XicWwqIwusqLGpwyyOc87JPQ/0?wx_fmt=png&quot; data-nickname=&quot;é«˜æ€§èƒ½æ¶æ„æ¢ç´¢&quot; data-alias=&quot;gxnjgts&quot; data-signature=&quot;æ¯•ä¸šäºä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦ï¼Œç°ä»»æŸäº’è”ç½‘å…¬å¸é«˜çº§æŠ€æœ¯ä¸“å®¶ä¸€èŒã€‚ä¸“æ³¨äºåˆ†äº«å¹²è´§ï¼Œç¡¬è´§ï¼Œæ¬¢è¿å…³æ³¨ğŸ˜„&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½ å¥½ï¼Œæˆ‘æ˜¯é›¨ä¹ï¼&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ€è¿‘åœ¨ä¼˜åŒ–å¼•æ“ä»£ç ï¼Œåœ¨ä¼˜åŒ–çš„è¿‡ç¨‹ä¸­å‘ç°ä¸€ä¸ªå¾ˆå¥‡æ€ªçš„é—®é¢˜ï¼Œä¸€ä¸ªç®€å•çš„å¯¹è±¡ï¼Œå­˜æ”¾åœ¨std::vector&amp;lt;&amp;gt; vä¸­ï¼Œå¦‚æœvå®šä¹‰çš„æ—¶å€™ä¸ºæ¯ä¸ªå…ƒç´ æŒ‡å®šåˆå€¼ï¼Œé‚£ä¹ˆåé¢å¯¹vä¸­æ¯ä¸ªå…ƒç´ çš„å†™å°±é£å¿«ï¼›ç›¸åçš„ï¼Œå¦‚æœvå®šä¹‰çš„æ—¶å€™ï¼Œä¸æŒ‡å®šåˆå§‹å€¼ï¼Œé‚£ä¹ˆåé¢å¯¹vä¸­å…ƒç´ å†™æ“ä½œçš„æ—¶å€™ï¼Œå°±èŠ±è´¹å¤§çº¦å‰ä¸€ç§2-3å€çš„æ—¶é—´ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»Šå¤©ï¼Œå€ŸåŠ©æ­¤æ–‡ï¼Œåˆ†äº«ä¸‹åŸå› çš„æ’æŸ¥è¿‡ç¨‹ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;é—®é¢˜&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†èƒ½å¤Ÿå¿«é€Ÿè¯´æ˜é—®é¢˜ï¼Œç›´æ¥ä¸Šä»£ç å§ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#&lt;span&gt;include&lt;/span&gt;Â &lt;span&gt;&amp;lt;chrono&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#&lt;span&gt;include&lt;/span&gt;Â &lt;span&gt;&amp;lt;functional&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#&lt;span&gt;include&lt;/span&gt;Â &lt;span&gt;&amp;lt;iostream&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#&lt;span&gt;include&lt;/span&gt;Â &lt;span&gt;&amp;lt;vector&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;const&lt;/span&gt;Â numÂ =Â &lt;span&gt;1000000000&lt;/span&gt;;&lt;br/&gt;&lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;AdItem&lt;/span&gt;&lt;br/&gt;{&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â AdItem()Â {}&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â AdItem(&lt;span&gt;int&lt;/span&gt;Â x,Â &lt;span&gt;int&lt;/span&gt;Â y,Â &lt;span&gt;int&lt;/span&gt;Â z)&lt;br/&gt;Â Â Â Â Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â x_Â =Â x;Â y_Â =Â y;Â z_Â =Â z;&lt;br/&gt;Â Â Â Â Â }&lt;/code&gt;&lt;code&gt;&lt;br/&gt;Â Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â x_;&lt;br/&gt;Â Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â y_;&lt;br/&gt;Â Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â z_;&lt;br/&gt;};&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;time_report&lt;/span&gt;&lt;span&gt;(&lt;span&gt;const&lt;/span&gt;Â &lt;span&gt;std&lt;/span&gt;::function&amp;lt;&lt;span&gt;void&lt;/span&gt;()&amp;gt;Â &amp;amp;f1,Â &lt;span&gt;const&lt;/span&gt;Â &lt;span&gt;std&lt;/span&gt;::function&amp;lt;&lt;span&gt;void&lt;/span&gt;()&amp;gt;Â &amp;amp;f2)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â &lt;span&gt;auto&lt;/span&gt;Â startÂ =Â &lt;span&gt;std&lt;/span&gt;::chrono::high_resolution_clock::now();&lt;br/&gt;Â Â Â f1();&lt;br/&gt;Â Â Â &lt;span&gt;auto&lt;/span&gt;Â endÂ =Â &lt;span&gt;std&lt;/span&gt;::chrono::high_resolution_clock::now();&lt;br/&gt;Â Â Â &lt;span&gt;std&lt;/span&gt;::&lt;span&gt;cout&lt;/span&gt;Â &amp;lt;&amp;lt;Â &lt;span&gt;&quot;allocationÂ doneÂ inÂ &quot;&lt;/span&gt;Â &amp;lt;&amp;lt;Â &lt;span&gt;std&lt;/span&gt;::chrono::duration_cast&amp;lt;&lt;span&gt;std&lt;/span&gt;::chrono::milliseconds&amp;gt;(endÂ -Â start).count()Â &amp;lt;&amp;lt;Â &lt;span&gt;&quot;ms&quot;&lt;/span&gt;Â &amp;lt;&amp;lt;Â &lt;span&gt;std&lt;/span&gt;::&lt;span&gt;endl&lt;/span&gt;;&lt;br/&gt;&lt;br/&gt;Â Â Â startÂ =Â &lt;span&gt;std&lt;/span&gt;::chrono::high_resolution_clock::now();&lt;br/&gt;Â Â Â f2();&lt;br/&gt;Â Â Â endÂ =Â &lt;span&gt;std&lt;/span&gt;::chrono::high_resolution_clock::now();&lt;br/&gt;Â Â Â &lt;span&gt;std&lt;/span&gt;::&lt;span&gt;cout&lt;/span&gt;Â &amp;lt;&amp;lt;Â &lt;span&gt;&quot;assignmentÂ doneÂ inÂ &quot;&lt;/span&gt;Â &amp;lt;&amp;lt;Â &lt;span&gt;std&lt;/span&gt;::chrono::duration_cast&amp;lt;&lt;span&gt;std&lt;/span&gt;::chrono::milliseconds&amp;gt;(endÂ -Â start).count()Â &amp;lt;&amp;lt;Â &lt;span&gt;&quot;ms&quot;&lt;/span&gt;Â &amp;lt;&amp;lt;Â &lt;span&gt;std&lt;/span&gt;::&lt;span&gt;endl&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;uninitialized_performance&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;std&lt;/span&gt;::&lt;span&gt;vector&lt;/span&gt;&amp;lt;AdItem&amp;gt;Â v;&lt;br/&gt;Â Â time_report([&amp;amp;v]()Â {Â v.reserve(num);Â },&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â [&amp;amp;v]()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â (&lt;span&gt;int&lt;/span&gt;Â iÂ =Â &lt;span&gt;0&lt;/span&gt;;Â iÂ &amp;lt;Â num;Â ++i)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â v[i]Â =Â {iÂ +Â &lt;span&gt;2&lt;/span&gt;,Â iÂ +Â &lt;span&gt;4&lt;/span&gt;,Â iÂ +Â &lt;span&gt;6&lt;/span&gt;};&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â }Â });&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;initialized_performance&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;std&lt;/span&gt;::&lt;span&gt;vector&lt;/span&gt;&amp;lt;AdItem&amp;gt;Â v;&lt;br/&gt;Â Â time_report([&amp;amp;v]()Â {Â v.assign(num,Â AdItem{&lt;span&gt;0&lt;/span&gt;,Â &lt;span&gt;0&lt;/span&gt;,Â &lt;span&gt;0&lt;/span&gt;});Â },&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â [&amp;amp;v]()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â (&lt;span&gt;int&lt;/span&gt;Â iÂ =Â &lt;span&gt;0&lt;/span&gt;;Â iÂ &amp;lt;Â num;Â ++i)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â v[i]Â =Â {iÂ +Â &lt;span&gt;2&lt;/span&gt;,Â iÂ +Â &lt;span&gt;4&lt;/span&gt;,Â iÂ +Â &lt;span&gt;6&lt;/span&gt;};&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â }Â });&lt;br/&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â uninitialized_performance();&lt;br/&gt;Â Â Â Â Â initialized_performance();&lt;br/&gt;Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¨‹åºè¾“å‡ºå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;allocationÂ doneÂ inÂ 0ms&lt;br/&gt;assignmentÂ doneÂ inÂ 59ms&lt;br/&gt;allocationÂ doneÂ inÂ 46ms&lt;br/&gt;assignmentÂ doneÂ inÂ 27ms&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ— è®ºä½¿ç”¨&lt;code&gt;-g -O2 -O3&lt;/code&gt;éƒ½æ˜¯ä¸€æ ·çš„æ•ˆæœï¼Œæ‰§è¡Œå¤šæ¬¡ç»“æœä»ç„¶ä¸€æ ·ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;CPU Cache&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;CPUç¼“å­˜ï¼ˆCPU Cacheï¼‰ä½äºCPUä¸å†…å­˜ä¹‹é—´çš„ä¸´æ—¶å­˜å‚¨å™¨ï¼Œå®ƒçš„å®¹é‡æ¯”å†…å­˜å°ä½†äº¤æ¢é€Ÿåº¦å¿«ã€‚åœ¨ç¼“å­˜ä¸­çš„æ•°æ®æ˜¯å†…å­˜ä¸­çš„ä¸€å°éƒ¨åˆ†ï¼Œä½†è¿™ä¸€å°éƒ¨åˆ†æ˜¯çŸ­æ—¶é—´å†…CPUå³å°†è®¿é—®çš„ï¼Œå½“CPUè°ƒç”¨å¤§é‡æ•°æ®æ—¶ï¼Œå°±å¯é¿å¼€å†…å­˜ç›´æ¥ä»ç¼“å­˜ä¸­è°ƒç”¨ï¼Œä»è€ŒåŠ å¿«è¯»å–é€Ÿåº¦ã€‚&lt;/p&gt;&lt;p&gt;åœ¨CPUä¸­åŠ å…¥ç¼“å­˜æ˜¯ä¸€ç§é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œè¿™æ ·æ•´ä¸ªå†…å­˜å‚¨å™¨ï¼ˆç¼“å­˜+å†…å­˜ï¼‰å°±å˜æˆäº†æ—¢æœ‰ç¼“å­˜çš„é«˜é€Ÿåº¦ï¼Œåˆæœ‰å†…å­˜çš„å¤§å®¹é‡çš„å­˜å‚¨ç³»ç»Ÿäº†ã€‚ç¼“å­˜å¯¹CPUçš„æ€§èƒ½å½±å“å¾ˆå¤§ï¼Œä¸»è¦æ˜¯å› ä¸ºCPUçš„æ•°æ®äº¤æ¢é¡ºåºå’ŒCPUä¸ç¼“å­˜é—´çš„å¸¦å®½å¼•èµ·çš„ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çœ‹åˆ°ç»“æœä»¥åï¼Œç¬¬ä¸€ååº”æ˜¯CPU Cacheå¯¼è‡´ï¼Œå› ä¸ºå ç”¨çš„å†…å­˜å¤§å°ä¸€æ ·ï¼Œæ‰€ä»¥æ€€ç–‘åœ¨ç¬¬äºŒæ¬¡è®¿é—®çš„æ—¶å€™ï¼Œå› ä¸ºCPU Cacheä¸­å·²ç»æœ‰ç¼“å­˜ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†ç¡®è®¤æ˜¯å¦æ˜¯å› ä¸ºCPU Cacheè€Œå¯¼è‡´çš„æ€§èƒ½å·®å¼‚ï¼Œæ‰€ä»¥å°†æµ‹è¯•åˆ†æˆä¸¤ä¸ªç‹¬ç«‹çš„ç¨‹åºè¿›è¡Œï¼Œå³åˆ†åˆ«æ‰§è¡Œ&lt;code&gt;uninitialized_performance()&lt;/code&gt;å’Œ&lt;code&gt;initialized_performance()&lt;/code&gt;å‡½æ•°ï¼Œç»“æœä¸ä¹‹å‰çš„ä¸€è‡´ï¼Œæ‰€ä»¥&lt;strong&gt;æ’é™¤CPU Cacheçš„åŸå› &lt;/strong&gt;ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;perfå·¥å…·&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;perfæ˜¯ç”¨æ¥è¿›è¡Œè½¯ä»¶æ€§èƒ½åˆ†æçš„å·¥å…·,å¯ä»¥åˆ©ç”¨PMUã€tracepointå’Œå†…æ ¸ä¸­çš„ç‰¹æ®Šè®¡æ•°å™¨æ¥è¿›è¡Œæ€§èƒ½ç»Ÿè®¡ï¼Œç”¨æ¥åˆ†æå†…æ ¸å’Œåº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨&lt;code&gt;perf stat uninitialized_performance&lt;/code&gt;ç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;PerformanceÂ counterÂ statsÂ &lt;span&gt;for&lt;/span&gt;Â &lt;span&gt;&#x27;uninitialized_performance&#x27;&lt;/span&gt;:&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â 47.923956Â Â Â Â Â Â task-clockÂ (msec)Â Â Â Â Â Â Â Â Â &lt;span&gt;#Â Â Â Â 0.985Â CPUsÂ utilized&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 6Â Â Â Â Â Â context-switchesÂ Â Â Â Â Â Â Â Â Â &lt;span&gt;#Â Â Â Â 0.125Â K/sec&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 0Â Â Â Â Â Â cpu-migrationsÂ Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;#Â Â Â Â 0.000Â K/sec&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â 1,007Â Â Â Â Â Â page-faultsÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;#Â Â Â Â 0.021Â M/sec&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â 99,354,240Â Â Â Â Â Â cyclesÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;#Â Â Â Â 2.073Â GHzÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (83.33%)&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â 72,689,011Â Â Â Â Â Â stalled-cycles-frontendÂ Â Â &lt;span&gt;#Â Â Â 73.16%Â frontendÂ cyclesÂ idleÂ Â Â Â Â (83.46%)&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â 48,738,086Â Â Â Â Â Â stalled-cycles-backendÂ Â Â Â &lt;span&gt;#Â Â Â 49.05%Â backendÂ cyclesÂ idleÂ Â Â Â Â Â (66.66%)&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â 98,377,529Â Â Â Â Â Â instructionsÂ Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;#Â Â Â Â 0.99Â Â insnÂ perÂ cycle&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;#Â Â Â Â 0.74Â Â stalledÂ cyclesÂ perÂ insnÂ Â (83.32%)&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â 11,399,060Â Â Â Â Â Â branchesÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;#Â Â 237.857Â M/secÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (83.39%)&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â 19,617Â Â Â Â Â Â branch-missesÂ Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;#Â Â Â Â 0.17%Â ofÂ allÂ branchesÂ Â Â Â Â Â Â Â Â Â (83.16%)&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨&lt;code&gt;perf stat initialized_performance&lt;/code&gt;ç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;76.092443Â Â Â Â Â Â task-clockÂ (msec)Â Â Â Â Â Â Â Â Â &lt;span&gt;#Â Â Â Â 0.991Â CPUsÂ utilized&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 6Â Â Â Â Â Â context-switchesÂ Â Â Â Â Â Â Â Â Â &lt;span&gt;#Â Â Â Â 0.079Â K/sec&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â 0Â Â Â Â Â Â cpu-migrationsÂ Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;#Â Â Â Â 0.000Â K/sec&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â 1,007Â Â Â Â Â Â page-faultsÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;#Â Â Â Â 0.013Â M/sec&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â 157,742,162Â Â Â Â Â Â cyclesÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;#Â Â Â Â 2.073Â GHzÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (82.94%)&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â 110,940,710Â Â Â Â Â Â stalled-cycles-frontendÂ Â Â &lt;span&gt;#Â Â Â 70.33%Â frontendÂ cyclesÂ idleÂ Â Â Â Â (82.96%)&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â 72,531,622Â Â Â Â Â Â stalled-cycles-backendÂ Â Â Â &lt;span&gt;#Â Â Â 45.98%Â backendÂ cyclesÂ idleÂ Â Â Â Â Â (65.92%)&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â 178,142,743Â Â Â Â Â Â instructionsÂ Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;#Â Â Â Â 1.13Â Â insnÂ perÂ cycle&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;#Â Â Â Â 0.62Â Â stalledÂ cyclesÂ perÂ insnÂ Â (82.99%)&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â 31,488,875Â Â Â Â Â Â branchesÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;#Â Â 413.824Â M/secÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (84.01%)&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â 24,309Â Â Â Â Â Â branch-missesÂ Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;#Â Â Â Â 0.08%Â ofÂ allÂ branchesÂ Â Â Â Â Â Â Â Â Â (84.17%)&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å› ä¸ºperfåªèƒ½å¾—åˆ°æ•´ä¸ªç¨‹åºæ‰§è¡ŒæœŸé—´çš„å˜åŒ–ï¼Œè€Œæˆ‘ä»¬å®é™…ä¸Šéœ€è¦çš„æ˜¯æ ¸å¿ƒéƒ¨åˆ†ï¼Œçœ‹æ¥é€šè¿‡perfå¾—åˆ°æœ‰ç”¨çš„ä¿¡æ¯ï¼Œåªèƒ½å¦å¯»ä»–æ³•ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æºç è·Ÿè¸ª&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆªæ­¢åˆ°ç°åœ¨ï¼Œä¸Šè¿°æ–¹æ¡ˆéƒ½æ²¡èƒ½è§£ç­”æœ¬æ¬¡é—®é¢˜çš„ç–‘é—®ï¼Œåªèƒ½ç¥­å‡ºå± é¾™åˆ€ï¼Œçœ‹æºç äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;æœªåˆå§‹åŒ–ç‰ˆ&lt;/code&gt;è°ƒç”¨ä¿¡æ¯å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;-&amp;gt;Â &lt;span&gt;std&lt;/span&gt;::&lt;span&gt;vector&lt;/span&gt;&amp;lt;AdItem,Â &lt;span&gt;std&lt;/span&gt;::allocator&amp;lt;AdItem&amp;gt;Â &amp;gt;::&lt;span&gt;vector&lt;/span&gt;&lt;br/&gt;--&amp;gt;Â &lt;span&gt;std&lt;/span&gt;::&lt;span&gt;vector&lt;/span&gt;&amp;lt;AdItem,Â &lt;span&gt;std&lt;/span&gt;::allocator&amp;lt;AdItem&amp;gt;Â &amp;gt;::_M_default_initialize&lt;br/&gt;---&amp;gt;Â &lt;span&gt;std&lt;/span&gt;::__uninitialized_default_n_a&amp;lt;AdItem*,Â &lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;long&lt;/span&gt;,Â AdItem&amp;gt;&lt;br/&gt;----&amp;gt;Â &lt;span&gt;std&lt;/span&gt;::__uninitialized_default_n&amp;lt;AdItem*,Â &lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;long&lt;/span&gt;&amp;gt;&lt;br/&gt;-----&amp;gt;Â &lt;span&gt;std&lt;/span&gt;::__uninitialized_default_n_1&amp;lt;&lt;span&gt;false&lt;/span&gt;&amp;gt;::__uninit_default_n&amp;lt;AdItem*,Â &lt;span&gt;unsigned&lt;/span&gt;Â &lt;span&gt;long&lt;/span&gt;&amp;gt;&lt;br/&gt;------&amp;gt;Â &lt;span&gt;std&lt;/span&gt;::_Construct(&lt;span&gt;std&lt;/span&gt;::__addressof(*__cur))&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;åˆå§‹åŒ–ç‰ˆ&lt;/code&gt;è°ƒç”¨ä¿¡æ¯å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;-&amp;gt;Â std::vector&amp;lt;AdItem,Â std::allocator&amp;lt;AdItem&amp;gt;Â &amp;gt;::vector&lt;br/&gt;--&amp;gt;Â std::vector&amp;lt;AdItem,Â std::allocator&amp;lt;AdItem&amp;gt;Â &amp;gt;::_M_fill_initialize&lt;br/&gt;---&amp;gt;Â std::__uninitialized_fill_n_a&amp;lt;AdItem*,Â unsignedÂ long,Â AdItem,Â AdItem&amp;gt;&lt;br/&gt;----&amp;gt;Â std::uninitialized_fill_n&amp;lt;AdItem*,Â unsignedÂ long,Â AdItem&amp;gt;&lt;br/&gt;-----&amp;gt;Â std::__uninitialized_fill_n&amp;lt;&lt;span&gt;false&lt;/span&gt;&amp;gt;::__uninit_fill_n&amp;lt;AdItem*,Â unsignedÂ long,Â AdItem&amp;gt;&lt;br/&gt;------&amp;gt;Â std::_Construct(std::__addressof(*__cur),Â __x)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»ä¸Šè¿°å‡½æ•°è°ƒç”¨ä¿¡æ¯å¯ä»¥çœ‹å‡ºï¼Œåˆå§‹åŒ–ç‰ˆæœ¬å’Œéƒ½è°ƒç”¨äº†std::_Constructå‡½æ•°ï¼Œè€Œè¯¥å‡½æ•°é€šè¿‡å…¶åç§°å°±èƒ½çœ‹åˆ°ï¼Œæ˜¯è°ƒç”¨äº†æ„é€ å‡½æ•°å¯¹å†…å­˜å—è¿›è¡Œæ„é€ (åº•å±‚æ˜¯ç”¨&lt;code&gt;placement new&lt;/code&gt;å®ç°)ï¼Œå¾—ä¸åˆ°æˆ‘ä»¬æœ‰ç”¨çš„ä¿¡æ¯ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ±‡ç¼–&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢æˆ‘ä»¬ä»æ±‡ç¼–è§’åº¦æ¥çœ‹ä¸‹(ä¸ºäº†ç¯‡å¹…ï¼Œå»æ‰äº†æ— å…³ç´§è¦çš„éƒ¨åˆ†ä»¥åŠç›¸åŒçš„éƒ¨åˆ†)ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœªåˆå§‹åŒ–ç‰ˆæœ¬ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;uninitialized_performance():&lt;br/&gt;  mov QWORD PTR [rsp+104], OFFSET FLAT:std::_Function_handler&amp;lt;void (), uninitialized_performance()::{lambda()#2}&amp;gt;::_M_invoke(std::_Any_data const&amp;amp;)&lt;br/&gt;  mov QWORD PTR [rsp+80], rax&lt;br/&gt;  mov QWORD PTR [rsp+96], OFFSET FLAT:std::_Function_base::_Base_manager&amp;lt;uninitialized_performance()::{lambda()#2}&amp;gt;::_M_manager(std::_Any_data&amp;amp;, std::_Any_data const&amp;amp;, std::_Manager_operation)&lt;br/&gt;  mov QWORD PTR [rsp+48], rax&lt;br/&gt;  mov QWORD PTR [rsp+72], OFFSET FLAT:std::_Function_handler&amp;lt;void (), uninitialized_performance()::{lambda()#1}&amp;gt;::_M_invoke(std::_Any_data const&amp;amp;)&lt;br/&gt;  mov QWORD PTR [rsp+64], OFFSET FLAT:std::_Function_base::_Base_manager&amp;lt;uninitialized_performance()::{lambda()#1}&amp;gt;::_M_manager(std::_Any_data&amp;amp;, std::_Any_data const&amp;amp;, std::_Manager_operation)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆå§‹åŒ–ç‰ˆæœ¬ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;initialized_performance():&lt;br/&gt;  mov QWORD PTR [rsp+64], rsp&lt;br/&gt;  mov QWORD PTR [rsp+88], OFFSET FLAT:std::_Function_handler&amp;lt;void (), initialized_performance()::{lambda()#2}&amp;gt;::_M_invoke(std::_Any_data const&amp;amp;)&lt;br/&gt;  mov QWORD PTR [rsp+80], OFFSET FLAT:std::_Function_base::_Base_manager&amp;lt;initialized_performance()::{lambda()#2}&amp;gt;::_M_manager(std::_Any_data&amp;amp;, std::_Any_data const&amp;amp;, std::_Manager_operation)&lt;br/&gt;  mov QWORD PTR [rsp+32], rsp&lt;br/&gt;  mov QWORD PTR [rsp+56], OFFSET FLAT:std::_Function_handler&amp;lt;void (), initialized_performance()::{lambda()#1}&amp;gt;::_M_invoke(std::_Any_data const&amp;amp;)&lt;br/&gt;  mov QWORD PTR [rsp+48], OFFSET FLAT:std::_Function_base::_Base_manager&amp;lt;initialized_performance()::{lambda()#1}&amp;gt;::_M_manager(std::_Any_data&amp;amp;, std::_Any_data const&amp;amp;, std::_Manager_operation)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»ä¸Šè¿°æ±‡ç¼–ç»“æœæ²¡çœ‹åˆ°æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œæ‰€ä»¥æ’é™¤äº†è¯­è¨€å±‚é¢çš„åŒºåˆ«äº†ï¼Œå°è¯•ä»å…¶å®ƒæ–¹é¢è¿›è¡Œåˆ†æã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;lazy allocation&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ—¢ç„¶æºç å’Œæ±‡ç¼–éƒ½çœ‹ä¸å‡ºæ¥åŒºåˆ«ï¼Œé‚£ä¹ˆåªèƒ½ä»å¦å¤–ä¸€ä¸ªæ–¹å‘æ¥è¿›è¡Œè€ƒè™‘ï¼Œé‚£å°±æ˜¯&lt;code&gt;å†…å­˜åˆ†é…&lt;/code&gt;ï¼Œæœ‰æ²¡æœ‰å¯èƒ½è™½ç„¶æ˜¯éƒ½è°ƒç”¨äº†newè¿›è¡Œå†…å­˜åˆ†é…ï¼Œä½†æ˜¯å®é™…ä¸Šå¹¶æ²¡æœ‰åˆ†é…å‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è®°å¾—ä¹‹å‰çœ‹è¿‡ä¸€äº›æ–‡ç« ï¼Œè¯´æ˜¯æ“ä½œç³»ç»Ÿæœ‰ä¸ª&lt;code&gt;lazy allocationï¼ˆå»¶è¿Ÿåˆ†é…ï¼‰&lt;/code&gt;æœºåˆ¶ï¼Œå³ç”¨æˆ·è°ƒç”¨APIè¿›è¡Œå†…å­˜åˆ†é…çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿå¹¶ä¸ä¼šç›´æ¥åˆ†é…ç»™ç”¨æˆ·è¿™ä¹ˆå¤šå†…å­˜ï¼Œè€Œæ˜¯ç›´åˆ°ç”¨æˆ·çœŸçš„è®¿é—®äº†ç”³è¯·çš„pageæ—¶äº§ç”Ÿä¸€ä¸ªpage falutï¼Œç„¶åå°†è¿™ä¸ªpageçœŸçš„åˆ†é…ç»™ç”¨æˆ·ï¼Œå¹¶é‡æ–°æ‰§è¡Œäº§ç”Ÿpage faultçš„è¯­å¥ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹ä¾‹å­è¿›è¡ŒéªŒè¯ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#&lt;span&gt;include&lt;/span&gt;Â &lt;span&gt;&amp;lt;unistd.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;X&lt;/span&gt;Â {&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;int&lt;/span&gt;Â x_[&lt;span&gt;1&lt;/span&gt;Â &amp;lt;&amp;lt;Â &lt;span&gt;24&lt;/span&gt;];&lt;br/&gt;};&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;auto&lt;/span&gt;Â xÂ =Â &lt;span&gt;new&lt;/span&gt;Â X;&lt;br/&gt;Â Â Â Â sleep(&lt;span&gt;100&lt;/span&gt;);&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç„¶åé€šè¿‡&lt;code&gt;htop -p xxx&lt;/code&gt;å‘½ä»¤æŸ¥çœ‹ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.1244343891402715&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHgicKYkawpGRm5ImNWe1fxhm52j5nVhcJUHnBmhhPuTocLZno0QgiaUsYVYl8dpgnVW4JnN9v7e2yug/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;884&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç„¶åï¼Œæˆ‘ä»¬å°è¯•å°†ä»£ç è¿›è¡Œä¿®æ”¹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#&lt;span&gt;include&lt;/span&gt;Â &lt;span&gt;&amp;lt;unistd.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;#&lt;span&gt;include&lt;/span&gt;Â &lt;span&gt;&amp;lt;string.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;X&lt;/span&gt;Â {&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;int&lt;/span&gt;Â x_[&lt;span&gt;1&lt;/span&gt;Â &amp;lt;&amp;lt;Â &lt;span&gt;24&lt;/span&gt;];&lt;br/&gt;};&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;auto&lt;/span&gt;Â xÂ =Â &lt;span&gt;new&lt;/span&gt;Â X;&lt;br/&gt;Â Â Â Â &lt;span&gt;memset&lt;/span&gt;(x-&amp;gt;x_,Â &lt;span&gt;0&lt;/span&gt;,Â &lt;span&gt;sizeof&lt;/span&gt;(x-&amp;gt;x_));Â &lt;span&gt;//Â å¢åŠ äº†è¯¥å¥ï¼Œä»…ä»…ä¸ºäº†è®¿é—®&lt;/span&gt;&lt;br/&gt;Â Â Â Â sleep(&lt;span&gt;100&lt;/span&gt;);&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.07568807339449542&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/p3sYCQXkuHgicKYkawpGRm5ImNWe1fxhmt0yOibHHjWmCDM5ejQwyCI39lbKeeq3C0XYUrILQzkUFbJqyAv2ADXA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;872&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šè¿‡ä¸Šè¿°htopçš„è¾“å‡ºä¿¡æ¯çš„&lt;code&gt;RES&lt;/code&gt;å—å¯ä»¥çœ‹å‡ºï¼Œç¬¬äºŒæ¬¡è°ƒç”¨åˆ†é…äº†è¶³å¤Ÿçš„è™šæ‹Ÿå†…å­˜ï¼Œè¿™å°±éªŒè¯äº†æˆ‘ä»¬è¿™æ¬¡çš„ç»“è®ºï¼Œå³ä½¿ä½¿ç”¨äº†newï¼Œåœ¨çœŸæ­£ä½¿ç”¨ä¹‹å‰æ˜¯&lt;code&gt;æ²¡æœ‰è¢«çœŸæ­£çš„åˆ†é…è™šæ‹Ÿå†…å­˜&lt;/code&gt;ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;strong&gt;Lazy allocation simply means not allocating a resource until it is actually needed.&lt;/strong&gt; This is common with singleton objects, but strictly speaking, any time a resource is allocated as late as possible, you have an example of lazy allocation.&lt;/p&gt;&lt;p&gt;By delaying allocation of a resource until you actually need it, you can &lt;strong&gt;decrease startup time, and even eliminate the allocation entirely if you never actually use the object&lt;/strong&gt;. In contrast, you could pre-allocate a resource you expect to need later, which can make later execution more efficient at the expense of startup time, and also avoids the possibility of the allocation failing later in program execution.&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç°åœ¨ï¼Œæˆ‘ä»¬ä»&lt;code&gt;lazy allocation&lt;/code&gt;è§’åº¦æ¥åˆ†æè¯¥é—®é¢˜ã€‚å¯¹äºæœªåˆå§‹åŒ–çš„vectorï¼Œè¯¥vectorç”³è¯·äº†ä¸€å¤§å—å†…å­˜ï¼Œoperator newåªæ˜¯è¿”å›äº†è™šæ‹Ÿåœ°å€(æ­¤æ—¶å¹¶æœªå°†ç‰©ç†åœ°å€ä¸å…¶å…³è”)ï¼Œå½“å…·ä½“è®¿é—®æ•°æ®(forå¾ªç¯)çš„æ—¶å€™ï¼Œæ“ä½œç³»ç»Ÿæ‰ä¼šå°†è™šæ‹Ÿåœ°å€ä¸ç‰©ç†åœ°å€è¿›è¡Œå…³è”ã€‚è€Œåœ¨æ„é€ æ—¶ç»™åˆå€¼ï¼Œç®—æ˜¯è®¿é—®å¤§å—è¿ç»­é€»è¾‘ç©ºé—´ï¼Œæ“ä½œç³»ç»Ÿä¼šå°†è™šæ‹Ÿåœ°å€ä¸ç‰©ç†åœ°å€ç›¸å…³è”ï¼Œè¿™æ ·åœ¨åé¢è®¿é—®çš„æ—¶å€™ï¼Œå› ä¸ºå·²ç»è®¿é—®äº†ä¸€æ¬¡äº†ï¼Œæ‰€ä»¥ä¼šå¾ˆå¿«ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æºç ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬æåˆ°æœªåˆå§‹åŒ–ç‰ˆæœ¬å’Œåˆå§‹åŒ–ç‰ˆæœ¬æœ€ç»ˆåˆ†åˆ«è°ƒç”¨äº†&lt;code&gt;std::_Construct(std::__addressof(*__cur))&lt;/code&gt;å’Œ&lt;code&gt;_Construct(std::__addressof(*__cur), __x)&lt;/code&gt;ï¼Œä¸‹é¢æ˜¯å…¶å…·ä½“å®ç°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœªåˆå§‹åŒ–ç‰ˆæœ¬ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;template&lt;/span&gt;&amp;lt;&lt;span&gt;typename&lt;/span&gt;Â _T1,Â &lt;span&gt;typename&lt;/span&gt;...Â _Args&amp;gt;&lt;br/&gt;Â Â Â &lt;span&gt;inline&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;&lt;br/&gt;Â Â Â _Construct(_T1*Â __p,Â _Args&amp;amp;&amp;amp;...Â __args)Â {Â &lt;br/&gt;Â Â Â Â ::&lt;span&gt;new&lt;/span&gt;(&lt;span&gt;static_cast&lt;/span&gt;&amp;lt;&lt;span&gt;void&lt;/span&gt;*&amp;gt;(__p))Â _T1(&lt;span&gt;std&lt;/span&gt;::forward&amp;lt;_Args&amp;gt;(__args)...);Â &lt;br/&gt;Â Â }&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆå§‹åŒ–ç‰ˆæœ¬å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;Â Â &lt;span&gt;inline&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;&lt;br/&gt;Â Â Â _Construct(_T1*Â __p,Â &lt;span&gt;const&lt;/span&gt;Â _T2&amp;amp;Â __value)Â {&lt;br/&gt;Â Â Â Â Â ::&lt;span&gt;new&lt;/span&gt;(&lt;span&gt;static_cast&lt;/span&gt;&amp;lt;&lt;span&gt;void&lt;/span&gt;*&amp;gt;(__p))Â _T1(__value);&lt;br/&gt;Â Â Â }&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;std::_Constructæ˜¯åœ¨std::vector&amp;lt;&amp;gt;å®šä¹‰ä¸­è¿›è¡Œè°ƒç”¨çš„ï¼Œä¹Ÿå°±æ˜¯è¯´éƒ½è®¿é—®äº†å¯¹åº”çš„åœ°å€ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆåŒºåˆ«è¿™ä¹ˆå¤§å‘¢ï¼Ÿåé¢ï¼Œå¯¹ç¤ºä¾‹ä»£ç è¿›è¡Œäº†ä¿®æ”¹ï¼š&lt;/p&gt;&lt;section&gt;1ã€åœ¨é»˜è®¤çš„æ„é€ å‡½æ•°ä¸­å¯¹å˜é‡è¿›è¡Œäº†èµ‹å€¼åˆå§‹åŒ–æ“ä½œ&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Â Â &lt;span/&gt;&lt;span&gt;AdItem(&lt;/span&gt;&lt;span&gt;) &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â Â Â Â Â Â Â Â x_Â =Â 0;Â y_Â =Â 0;Â z_Â =Â z;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Â Â }&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;section&gt;2ã€å¯¹æ„é€ å‡½æ•°ä½¿ç”¨defaultå…³é”®å­—&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Â &lt;span&gt;AdItem(&lt;/span&gt;&lt;span&gt;) = default;&lt;/span&gt;&lt;span/&gt;&lt;/code&gt;&lt;p/&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;ä¿®æ”¹ä¹‹åï¼Œå†æ¬¡ç¼–è¯‘ï¼Œè¿è¡Œï¼Œæœªåˆå§‹åŒ–ç‰ˆæœ¬å’Œåˆå§‹åŒ–ç‰ˆæœ¬çš„æ€§èƒ½ç»“æœåŸºæœ¬ä¸€è‡´ï¼Œè¿›ä¸€æ­¥éªŒè¯äº†æˆ‘ä»¬çš„çŒœæƒ³&lt;/span&gt;&lt;code&gt;lazy allocation&lt;/code&gt;&lt;span&gt;å¼•èµ·çš„æ€§èƒ½å·®å¼‚ã€‚&lt;/span&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/section&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç»“è¯­&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¼€å‘è¿‡ç¨‹ï¼Œå°±æ˜¯ä¸€ä¸ª&lt;code&gt;ä¸æ–­é‡‡å‘&lt;/code&gt;çš„è¿‡ç¨‹ï¼Œä»ä¸€ä¸ªå‘åˆ°å¦ä¸€ä¸ªå‘ï¼ŒæŠ€æœ¯æ‰èƒ½æˆé•¿ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¥½äº†ï¼Œä»Šå¤©çš„æ–‡ç« å°±åˆ°è¿™ï¼Œæˆ‘ä»¬ä¸‹æœŸè§ï¼&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>b6d238db2ffef7af11adecef42a899c2</guid>
<title>ä¸€ç§ä¼˜é›…çš„Golangçš„åº“æ’ä»¶æ³¨å†ŒåŠ è½½æœºåˆ¶</title>
<link>https://toutiao.io/k/sywhmm4</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æœ€è¿‘çœ‹åˆ°ä¸€ä¸ªé¡¹ç›®çš„æ’ä»¶åŠ è½½æœºåˆ¶ï¼Œéå¸¸èµã€‚&lt;/span&gt;&lt;span&gt;å½“ç„¶è¿™é‡Œè¯´çš„æ’ä»¶å¹¶ä¸æ˜¯æŒ‡çš„golang&lt;/span&gt;&lt;span&gt;åŸç”Ÿçš„å¯ä»¥åœ¨buildmodeä¸­åŠ è½½æŒ‡å®šsoæ–‡ä»¶çš„é‚£ç§åŠ è½½æœºåˆ¶ã€‚&lt;/span&gt;&lt;span&gt;è€Œæ˜¯è½¯ä»¶è®¾è®¡ä¸Šçš„ã€Œæ’ä»¶ã€ã€‚&lt;/span&gt;&lt;span&gt;å¦‚æœä½ çš„è½¯ä»¶æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œæˆ–è€…ä¸€ä¸ªå¹³å°æ€§äº§å“ï¼Œæƒ³è¦æå‡æ‰©å±•æ€§ï¼Œå³å¯ä»¥è®©ç¬¬ä¸‰æ–¹è¿›è¡Œç¬¬ä¸‰æ–¹åº“å¼€å‘ï¼Œæœ€ç»ˆèƒ½åƒæ­ç§¯æœ¨ä¸€æ ·å°†è¿™äº›åº“ç»„è£…èµ·æ¥ã€‚&lt;/span&gt;&lt;span&gt;é‚£ä¹ˆå°±å¯èƒ½éœ€è¦è¿™ç§åº“åŠ è½½æœºåˆ¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿå¯¹ç¬¬ä¸‰æ–¹åº“è¿›è¡ŒæŸç§åº“è§„èŒƒï¼Œåªè¦æŒ‰ç…§è¿™ç§åº“è§„èŒƒè¿›è¡Œå¼€å‘ï¼Œè¿™ä¸ªåº“å°±å¯ä»¥è¢«åŠ è½½åˆ°æ¡†æ¶ä¸­ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªæ’ä»¶çš„æ•°æ®ç»“æ„ï¼Œè¿™é‡Œè‚¯å®šæ˜¯éœ€è¦ä½¿ç”¨æ¥å£æ¥è§„èŒƒï¼Œè¿™ä¸ªå¯ä»¥æ ¹æ®ä½ çš„é¡¹ç›®è‡ªç”±å‘æŒ¥ï¼Œæ¯”å¦‚æˆ‘å¸Œæœ›æ’ä»¶æœ‰ä¸€ä¸ªSetupæ–¹æ³•æ¥åœ¨å¯åŠ¨çš„æ—¶å€™åŠ è½½å³å¯ã€‚ç„¶åæˆ‘å°±å®šä¹‰å¦‚ä¸‹çš„Pluginç»“æ„ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;type&lt;/span&gt;Â PluginÂ &lt;span&gt;interface&lt;/span&gt;{&lt;br/&gt;Â Â Name()Â &lt;span&gt;string&lt;/span&gt;&lt;br/&gt;Â Â Setup(configÂ &lt;span&gt;map&lt;/span&gt;[&lt;span&gt;string&lt;/span&gt;]&lt;span&gt;string&lt;/span&gt;)Â error&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€Œåœ¨æ¡†æ¶å¯åŠ¨çš„æ—¶å€™ï¼Œæˆ‘å¯åŠ¨äº†ä¸€ä¸ªå¦‚ä¸‹çš„å…¨å±€å˜é‡ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;var&lt;/span&gt;Â pluginsÂ &lt;span&gt;map&lt;/span&gt;[&lt;span&gt;string&lt;/span&gt;]Plugin&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æ³¨å†Œ&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰äººå¯èƒ½ä¼šé—®ï¼Œè¿™é‡Œæœ‰äº†åŠ è½½å‡½æ•°setupï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆæ²¡æœ‰æ³¨å†Œé€»è¾‘å‘¢ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç­”æ¡ˆæ˜¯æ³¨å†Œçš„é€»è¾‘æ”¾åœ¨åº“çš„initå‡½æ•°ä¸­ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å³æ¡†æ¶è¿˜æä¾›äº†ä¸€ä¸ªæ³¨å†Œå‡½æ•°ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;//Â packageÂ plugin&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Register(pluginÂ Plugin)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªregisterå°±æ˜¯å®ç°äº†å°†ç¬¬ä¸‰æ–¹pluginæ”¾åˆ°pluginså…¨å±€å˜é‡ä¸­ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ç¬¬ä¸‰æ–¹çš„pluginåº“å¤§è‡´å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;packageÂ MyPlugin&lt;br/&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt;Â MyPluginÂ struct{&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;funcÂ (mÂ *MyPlugin)Â Setup(configÂ map[string]string)Â errorÂ {&lt;br/&gt;Â //Â TODO&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;funcÂ (mÂ *MyPlugin)Â Name()Â stringÂ {&lt;br/&gt;Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;myPlugin&quot;&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;funcÂ &lt;span&gt;&lt;span&gt;init&lt;/span&gt;&lt;/span&gt;()Â {&lt;br/&gt;Â plugin.Register(&amp;amp;MyPlugin)&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ ·æ³¨å†Œçš„é€»è¾‘å°±å˜æˆäº†ï¼Œå¦‚æœä½ è¦åŠ è½½ä¸€ä¸ªæ’ä»¶ï¼Œé‚£ä¹ˆä½ åœ¨main.goä¸­ç›´æ¥ä»¥ _ importçš„å½¢å¼å¼•å…¥å³å¯ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;packageÂ main&lt;br/&gt;&lt;br/&gt;_Â importÂ &lt;span&gt;&quot;github.com/foo/myplugin&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;funcÂ &lt;span&gt;&lt;span&gt;main&lt;/span&gt;&lt;/span&gt;()Â {&lt;br/&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ•´ä½“çš„æ„Ÿè§‰ï¼Œè¿™æ ·å­æ’ä»¶çš„æ³¨å†Œå°±è¢«â€œéšè—â€åˆ°importä¸­äº†ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;åŠ è½½&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ³¨å†Œçš„é€»è¾‘å…¶å®çœ‹èµ·æ¥ä¹Ÿå¹³å¹³æ— å¥‡ï¼Œä½†æ˜¯åŠ è½½çš„é€»è¾‘å°±è€ƒéªŒç»†èŠ‚äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é¦–å…ˆæ’ä»¶çš„åŠ è½½å…¶å®æœ‰ä¸¤ç‚¹éœ€è¦è€ƒè™‘ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é…ç½®æŒ‡çš„æ˜¯æ’ä»¶ä¸€å®šæ˜¯æœ‰æŸç§é…ç½®çš„ï¼Œè¿™äº›é…ç½®ä»¥é…ç½®æ–‡ä»¶yamlä¸­plugins.mypluginçš„è·¯å¾„å­˜åœ¨ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;plugins:&lt;br/&gt;Â myplugin:&lt;br/&gt;Â Â foo:Â bar&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶å®æˆ‘å¯¹è¿™ç§å®ç°æŒä¿ç•™æ„è§ã€‚é…ç½®æ–‡ä»¶ä»¥ä¸€ä¸ªæ–‡ä»¶ä¸­é…ç½®é¡¹çš„å½¢å¼å­˜åœ¨ï¼Œå¥½åƒä¸å¦‚ä»¥é…ç½®æ–‡ä»¶çš„å½¢å¼å­˜åœ¨ï¼Œå³ä»¥config/plugins/myplugin.yaml çš„æ–‡ä»¶ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ ·ä¸ä¼šå‡ºç°ä¸€ä¸ªå¤§é…ç½®æ–‡ä»¶çš„é—®é¢˜ã€‚æ¯•ç«Ÿæ¯ä¸ªé…ç½®æ–‡ä»¶æœ¬èº«å°±æ˜¯ä¸€é—¨DSLè¯­è¨€ã€‚å¦‚æœä½ å°†é…ç½®æ–‡ä»¶çš„é€»è¾‘å˜å¤æ‚ï¼Œä¸€å®šä¼šæœ‰å¾ˆå¤šé™„å¸¦çš„bugæ˜¯ç”±äºé…ç½®æ–‡ä»¶é”™è¯¯å¯¼è‡´çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¬¬äºŒä¸ªè¯´çš„æ˜¯ä¾èµ–ã€‚æ’ä»¶Aä¾èµ–äºæ’ä»¶Bï¼Œé‚£ä¹ˆè¿™é‡Œå°±æœ‰åŠ è½½å‡½æ•°Setupçš„å…ˆåé¡ºåºäº†ã€‚è¿™ç§å…ˆåé¡ºåºå¦‚æœçº¯ä¾èµ–ç”¨æˆ·çš„â€œç»éªŒâ€ï¼Œå°†æŸä¸ªæ’ä»¶çš„Setupè°ƒç”¨æ”¾åœ¨æŸä¸ªæ’ä»¶çš„Setupè°ƒç”¨ä¹‹å‰ï¼Œæ˜¯éå¸¸ç—›è‹¦çš„ã€‚ï¼ˆè™½ç„¶ä¸€å®šæ˜¯æœ‰åŠæ³•å¯ä»¥åšåˆ°ï¼‰ã€‚æ›´å¥½çš„åŠæ³•æ˜¯ä¾èµ–äºæ¡†æ¶è‡ªèº«çš„åŠ è½½æœºåˆ¶æ¥è¿›è¡ŒåŠ è½½ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é¦–å…ˆæˆ‘ä»¬åœ¨pluginåŒ…ä¸­å®šä¹‰ä¸€ä¸ªæ¥å£ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;type&lt;/span&gt;Â DependÂ &lt;span&gt;interface&lt;/span&gt;{&lt;br/&gt;Â DependOn()Â []&lt;span&gt;string&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæˆ‘çš„æ’ä»¶ä¾èµ–ä¸€ä¸ªåå­—ä¸º â€œfooPluginâ€ çš„æ’ä»¶ï¼Œé‚£ä¹ˆæˆ‘çš„æ’ä»¶ MyPluginå°±ä¼šå®ç°è¿™ä¸ªæ¥å£ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;packageÂ MyPlugin&lt;br/&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt;Â MyPluginÂ struct{&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;funcÂ (mÂ *MyPlugin)Â Setup(configÂ map[string]string)Â errorÂ {&lt;br/&gt;Â //Â TODO&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;funcÂ (mÂ *MyPlugin)Â Name()Â stringÂ {&lt;br/&gt;Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;myPlugin&quot;&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;funcÂ &lt;span&gt;&lt;span&gt;init&lt;/span&gt;&lt;/span&gt;()Â {&lt;br/&gt;Â plugin.Register(&amp;amp;MyPlugin)&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;funcÂ (mÂ *MyPlugin)Â DependOn()Â []stringÂ {&lt;br/&gt;Â &lt;span&gt;return&lt;/span&gt;Â []string{&lt;span&gt;&quot;fooPlugin&quot;&lt;/span&gt;}&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æœ€ç»ˆåŠ è½½æ‰€æœ‰æ’ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸æ˜¯ç®€å•åœ°å°†æ‰€æœ‰æ’ä»¶è°ƒç”¨Setupï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªchannelï¼Œå°†æ‰€æœ‰æ’ä»¶æ”¾åœ¨channelä¸­ï¼Œç„¶åä¸€ä¸ªä¸ªè°ƒç”¨Setupï¼Œé‡åˆ°æœ‰Dependå…¶ä»–æ’ä»¶çš„ï¼Œä¸”ä¾èµ–æ’ä»¶è¿˜æœªè¢«åŠ è½½ï¼Œåˆ™å°†å½“å‰æ’ä»¶æ”¾åœ¨é˜Ÿåˆ—æœ€åï¼ˆé‡æ–°å¡å…¥channelï¼‰ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;varÂ setupStatusÂ map[string]bool&lt;br/&gt;&lt;br/&gt;//Â è·å–æ‰€æœ‰æ³¨å†Œæ’ä»¶&lt;br/&gt;funcÂ loadPlugins()Â (pluginÂ chanÂ Plugin,Â setupStatusÂ map[string]bool)Â {&lt;br/&gt;Â //Â è¿™é‡Œå®šä¹‰ä¸€ä¸ªé•¿åº¦ä¸º10çš„é˜Ÿåˆ—&lt;br/&gt;Â varÂ sortPluginÂ =Â make(chanÂ Plugin,Â 10)&lt;br/&gt;Â varÂ setupStatusÂ =Â make[string]bool&lt;br/&gt;Â &lt;br/&gt;Â //Â æ‰€æœ‰çš„æ’ä»¶&lt;br/&gt;Â &lt;span&gt;for&lt;/span&gt;Â name,Â pluginÂ :=Â rangeÂ pluginsÂ {&lt;br/&gt;Â Â sortPluginÂ &amp;lt;-Â plugin&lt;br/&gt;Â Â setupStatus[name]Â =Â &lt;span&gt;false&lt;/span&gt;&lt;br/&gt;Â }&lt;br/&gt;Â &lt;br/&gt;Â &lt;span&gt;return&lt;/span&gt;Â sortPlugin,Â setupStatus&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;//Â åŠ è½½æ‰€æœ‰æ’ä»¶&lt;br/&gt;funcÂ SetupPlugins(pluginChanÂ chanÂ Plugin,Â setupStatusÂ map[string]bool)Â errorÂ {&lt;br/&gt;Â numÂ :=Â len(pluginChan)&lt;br/&gt;Â &lt;span&gt;for&lt;/span&gt;Â numÂ &amp;gt;Â 0Â {&lt;br/&gt;Â Â pluginÂ &amp;lt;-Â pluginChan&lt;br/&gt;Â Â &lt;br/&gt;Â Â canSetupÂ :=Â &lt;span&gt;true&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â deps,Â okÂ :=Â p.(Depend);Â okÂ {&lt;br/&gt;Â Â Â dependsÂ :=Â deps.DependOn()&lt;br/&gt;Â Â Â &lt;span&gt;for&lt;/span&gt;Â _,Â dependNameÂ :=Â rangeÂ depends{&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â _,Â setupedÂ :=Â setupStatus[dependName];Â !setupÂ {&lt;br/&gt;Â Â Â Â Â Â //Â æœ‰æœªåŠ è½½çš„æ’ä»¶&lt;br/&gt;Â Â Â Â Â Â canSetupÂ =Â &lt;span&gt;false&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;break&lt;/span&gt;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â }&lt;br/&gt;Â Â }&lt;br/&gt;Â Â &lt;br/&gt;Â Â //Â å¦‚æœè¿™ä¸ªæ’ä»¶èƒ½è¢«setup&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â canSetupÂ {&lt;br/&gt;Â Â Â plugin.Setup(xxx)&lt;br/&gt;Â Â Â setupStatus[p.Name()]Â =Â &lt;span&gt;true&lt;/span&gt;&lt;br/&gt;Â Â }Â &lt;span&gt;else&lt;/span&gt;Â {&lt;br/&gt;Â Â Â //Â å¦‚æœæ’ä»¶ä¸èƒ½è¢«setup,Â è¿™ä¸ªpluginå°±å¡å…¥åˆ°æœ€åä¸€ä¸ªé˜Ÿåˆ—&lt;br/&gt;Â Â Â pluginChanÂ &amp;lt;-Â plugin&lt;br/&gt;Â Â }&lt;br/&gt;Â }&lt;br/&gt;Â &lt;span&gt;return&lt;/span&gt;Â nil&lt;br/&gt;}Â &lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šé¢è¿™æ®µä»£ç æœ€ç²¾å¦™çš„å°±æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªæœ‰bufferçš„channelä½œä¸ºä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ¶ˆè´¹é˜Ÿåˆ—ä¸€æ–¹SetupPluginsï¼Œé™¤äº†æ¶ˆè´¹é˜Ÿåˆ—ï¼Œä¹Ÿæœ‰å¯èƒ½ç”Ÿäº§æ•°æ®åˆ°é˜Ÿåˆ—ï¼Œè¿™æ ·å°±ä¿è¯äº†é˜Ÿåˆ—ä¸­æ‰€æœ‰pluginéƒ½æ˜¯è¢«æŒ‰ç…§æ ‡è®°çš„ä¾èµ–è¢«é¡ºåºåŠ è½½çš„ã€‚&lt;/p&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æ€»ç»“&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ç§æ’ä»¶çš„æ³¨å†Œå’ŒåŠ è½½æœºåˆ¶æ˜¯éå¸¸ä¼˜é›…çš„ã€‚æ³¨å†Œæ–¹é¢ï¼Œå·§å¦™ä½¿ç”¨éšå¼importæ¥åšæ’ä»¶çš„æ³¨å†Œã€‚è€ŒåŠ è½½æ–¹é¢ï¼Œå·§å¦™ä½¿ç”¨æœ‰bufferçš„channelä½œä¸ºåŠ è½½é˜Ÿåˆ—ã€‚&lt;/p&gt;Â &lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>