<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>a9d3d4ce503e49885d6a708b80deb91e</guid>
<title>ä¼˜è´¨ç½‘ç«™åŒå¥½è€…å‘¨åˆŠï¼ˆç¬¬ 092 æœŸï¼‰</title>
<link>https://toutiao.io/k/v320ogz</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;content&quot;&gt;&lt;p&gt;&lt;a href=&quot;https://nicelinks.site/?utm_source=weekly&quot;&gt;å€¾åŸä¹‹é“¾&lt;/a&gt;ä½œä¸ºä¸€ä¸ªå¼€æ”¾å¹³å°ï¼Œæ—¨åœ¨äº‘é›†å…¨çƒ&lt;strong&gt;ä¼˜ç§€ç½‘ç«™&lt;/strong&gt;ï¼Œæ¢ç´¢äº’è”ç½‘ä¸­æ›´å¹¿é˜”çš„ä¸–ç•Œã€‚æ­¤å‘¨åˆŠï¼Œå°†æ±‡èšè¿‡å»ä¸€å‘¨&lt;a href=&quot;https://nicelinks.site/?utm_source=weekly&quot;&gt;å€¾åŸ&lt;/a&gt;æ‰€æ”¶å½•çš„å†…å®¹ï¼Œä»¥é£¨åŒå¥½ï¼›æ¬¢è¿æ¨èæˆ–è‡ªèï¼ˆä»…é™æœ‰ç‹¬ç«‹åŸŸåçš„ç½‘ç«™ï¼Œå¯ä»¥æ˜¯äºŒçº§åŸŸåï¼‰ã€‚æ‚¨å¦‚æœè¦äº†è§£æ”¶å½•è¦æ±‚ï¼Œè¯·å‚è§&lt;a href=&quot;https://nicelinks.site/about?utm_source=weekly&quot;&gt;å…³äºå€¾åŸ&lt;/a&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;strong&gt;å¤‡æ³¨&lt;/strong&gt;ï¼šæœ¬å‘¨åˆŠ&lt;strong&gt;æ¯å‘¨äº”&lt;/strong&gt;ç”Ÿæˆï¼Œé¦–å‘äºä¸ªäººå¾®ä¿¡å…¬ä¼—å·&lt;a href=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI5MDIwMzM2Mg==&amp;amp;action=getalbum&amp;amp;album_id=1530765143352082433&amp;amp;scene=173&amp;amp;from_msgid=2650641087&amp;amp;from_itemidx=1&amp;amp;count=3#wechat_redirect&quot;&gt;æ™šæ™´å¹½è‰è½©&lt;/a&gt;ã€åšå®¢&lt;a href=&quot;https://www.jeffjade.com&quot;&gt;æ™šæ™´å¹½è‰è½©&lt;/a&gt;ï¼Œä»¥åŠ&lt;a href=&quot;https://forum.lovejade.cn/&quot;&gt;æ‚ ç„¶å®œæƒ³äº­&lt;/a&gt;ç¤¾åŒºï¼›æ­¤ä¸€é”®ç”Ÿæˆè„šæœ¬åŸºäº &lt;a href=&quot;https://nicelinks.site/post/602d30aad099ff5688618591&quot;&gt;Deno&lt;/a&gt; ç¼–å†™ï¼Œå¹¶åœ¨ Github å¼€æºï¼š&lt;a href=&quot;https://github.com/nicejade/nicelinks-weekly&quot;&gt;nicejade/nicelinks-weekly&lt;/a&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/tags/%E5%B9%BF%E5%91%8A&quot;&gt;&lt;code&gt;å¹¿å‘Š&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E5%88%9B%E4%BD%9C%E8%80%85&quot;&gt;&lt;code&gt;åˆ›ä½œè€…&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E5%BC%80%E5%8F%91%E8%80%85&quot;&gt;&lt;code&gt;å¼€å‘è€…&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Carbon helps you advertise to creators and developers through an exclusive network of websites, projects, and apps.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/www.carbonads.net.png?x-oss-process=style/png2jpg&quot; alt=&quot;å€¾åŸä¹‹é“¾ - Reach Creators and Developers at Scale | Carbon&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ¨èè¯­&lt;/strong&gt;ï¼š &lt;a href=&quot;https://nicelinks.site/redirect?url=https://www.carbonads.net/&quot;&gt;Carbon&lt;/a&gt; å¸®åŠ©æ‚¨é€šè¿‡ç½‘ç«™ã€é¡¹ç›®å’Œåº”ç”¨ç¨‹åºçš„ä¸“å±ç½‘ç»œï¼Œå‘åˆ›ä½œè€…å’Œå¼€å‘è€…å‘å¸ƒå¹¿å‘Šï¼›åšå¹¿å‘Šå¾ˆéš¾ï¼Œ Carbon è®©æ‚¨è½»æ¾æ‰¾åˆ°å—ä¼—ï¼›Carbon å®˜ç½‘ç§°å…¶æ˜¯å¤§è§„æ¨¡æ¥è§¦åˆ›ä½œè€…å’Œå¼€å‘è€…çš„æœ€ä½³æ–¹å¼ã€‚åœ¨å›½å†…ï¼Œä¸ä¹‹ç±»ä¼¼çš„äº§å“æ˜¯&lt;a href=&quot;https://nicelinks.site/post/6342b843258efd6ffbd406ef&quot;&gt;ä¸‡ç»´å¹¿å‘Š&lt;/a&gt;ã€‚&lt;/p&gt;&lt;p&gt;é€šè¿‡ç”±è®¾è®¡ã€å¼€å‘å’ŒæŠ€æœ¯ç½‘ç«™ç»„æˆçš„ç‹¬å®¶ç½‘ç»œæ¥è§¦æŠ€æœ¯å—ä¼—ã€‚å½“æ‚¨å¼€å±• Carbon æ´»åŠ¨æ—¶ï¼Œæ‚¨çš„å“ç‰Œä¼šå‡ºç°åœ¨æ•°ç™¾ä¸ªç¤¾åŒºã€åšå®¢ã€èµ„æºå’Œå·¥å…·ä¸­ï¼Œå—ä¼—ä¼šä½¿ç”¨è¿™äº›å·¥å…·æ¥æå‡ä»–ä»¬çš„å·¥ä½œæ°´å¹³ã€‚åŸºäº Carbon å¹¿å‘Šå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt;æ‚¨çš„å¹¿å‘Šæ´»åŠ¨ä»…å‡ºç°åœ¨é«˜è´¨é‡çš„è®¾è®¡ã€å¼€å‘æˆ–æŠ€æœ¯ç½‘ç«™ä¸Šã€‚&lt;/li&gt;&lt;li&gt;æ‚¨çš„å¹¿å‘Šæ˜¾ç¤ºåœ¨å¯¹å—ä¼—æœ‰ä»·å€¼ä¸”ä¸æ‚¨çš„å“ç‰Œç›¸å…³çš„å†…å®¹æ—è¾¹ã€‚&lt;/li&gt;&lt;li&gt;Carbon ç®€å•çš„å¹¿å‘Šè®¾è®¡å’Œç‹¬å®¶ç½‘ç»œï¼Œè®©ä½ æ¥è§¦åˆ°å¿½è§†ä¼ ç»Ÿç¨‹åºåŒ–å¹¿å‘Šçš„ç§‘æŠ€å—ä¼—ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Carbon åœ¨è®¾è®¡ã€å¼€å‘å’ŒæŠ€æœ¯é¢†åŸŸçš„ 600 å¤šä¸ªç²¾é€‰ç½‘ç«™å’Œåº”ç”¨ç¨‹åºä¸Šï¼ˆå¦‚ï¼š&lt;a href=&quot;https://vuejs.org/&quot;&gt;Vue å¼€å‘æ–‡æ¡£&lt;/a&gt;ï¼‰ï¼Œæä¾›ç‹¬å®¶å¹¿å‘Šè®¿é—®ã€‚è¯¥ç½‘ç»œæŒ‰å—ä¼—ç»†åˆ†ï¼Œå› æ­¤æ‚¨å¯ä»¥å¤§è§„æ¨¡å¼€å±•æœ‰é’ˆå¯¹æ€§çš„å¹¿å‘Šæ´»åŠ¨ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼ŒCarbon å¹¿å‘Šè·Ÿ Google AdSense ç±»ä¼¼ï¼ŒåŒæ ·ä¼šè¢«å¹¿å‘Šæ‹¦æˆªå™¨ï¼ˆAdblockï¼‰æ‰€æ‹¦æˆªã€‚&lt;/p&gt;&lt;p&gt;â”€â”€ å‡ºè‡ª&lt;a href=&quot;https://nicelinks.site/post/6376479d049fa51046c489b9&quot;&gt;å€¾åŸä¹‹é“¾ - Reach Creators and Developers at Scale | Carbon&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/tags/%E6%A1%86%E6%9E%B6&quot;&gt;&lt;code&gt;æ¡†æ¶&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/HTML&quot;&gt;&lt;code&gt;HTML&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/Web%E5%BC%80%E5%8F%91&quot;&gt;&lt;code&gt;Webå¼€å‘&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Marko is a friendly (and fast!) UI library that makes building web apps fun.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/markojs.com.png?x-oss-process=style/png2jpg&quot; alt=&quot;å€¾åŸä¹‹é“¾ - Marko - A declarative, HTML-based language that makes building web apps fun&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ¨èè¯­&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/redirect?url=https://markojs.com/&quot;&gt;Marko&lt;/a&gt; ï¼Œä¸€ç§å£°æ˜æ€§çš„ã€åŸºäº HTML çš„è¯­è¨€ï¼Œä½¿æ„å»º Web åº”ç”¨ç¨‹åºå˜å¾—æœ‰è¶£ã€‚å®ƒæ˜¯å¯¹ HTML çš„é‡æ–°æƒ³è±¡ï¼Œæ˜¯ä¸€ç§ç”¨äºæ„å»ºåŠ¨æ€å’Œååº”å¼ç”¨æˆ·ç•Œé¢çš„è¯­è¨€ã€‚å‡ ä¹æ‰€æœ‰æœ‰æ•ˆçš„ HTML éƒ½æ˜¯æœ‰æ•ˆçš„ Markoï¼Œä½† Marko æ‰©å±•äº† HTML è¯­è¨€ï¼Œå…è®¸ä»¥å£°æ˜çš„æ–¹å¼æ„å»ºç°ä»£åº”ç”¨ç¨‹åºã€‚Marko å…·æœ‰ä»¥ä¸‹åŠŸèƒ½ç‰¹æ€§ï¼š&lt;/p&gt;&lt;h3 id=&quot;ç†Ÿæ‚‰çš„&quot;&gt;&lt;a href=&quot;#%E7%86%9F%E6%82%89%E7%9A%84&quot; aria-label=&quot;ç†Ÿæ‚‰çš„ permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;ç†Ÿæ‚‰çš„&lt;/h3&gt;&lt;p&gt;å¦‚æœä½ çŸ¥é“ HTMLã€CSS å’Œ Javascriptï¼Œä½ å°±çŸ¥é“ Markoã€‚ä½¿ç”¨ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;language-html&quot;&gt;class {
  onCreate() {
    this.state = { count: 0 };
  }
  increment() {
    this.state.count++;
  }
}
&amp;lt;div&amp;gt;${state.count}&amp;lt;/div&amp;gt;
&amp;lt;button on-click(&quot;increment&quot;)&amp;gt;
  Click me!
&amp;lt;/button&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;é«˜æ€§èƒ½&quot;&gt;&lt;a href=&quot;#%E9%AB%98%E6%80%A7%E8%83%BD&quot; aria-label=&quot;é«˜æ€§èƒ½ permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;é«˜æ€§èƒ½&lt;/h3&gt;&lt;p&gt;æµå¼å¤„ç†ã€éƒ¨åˆ†æ°´åˆä½œç”¨ã€ä¼˜åŒ–ç¼–è¯‘å™¨å’Œå°å‹è¿è¡Œæ—¶ã€‚&lt;/p&gt;&lt;h3 id=&quot;å¯æ‰©å±•&quot;&gt;&lt;a href=&quot;#%E5%8F%AF%E6%89%A9%E5%B1%95&quot; aria-label=&quot;å¯æ‰©å±• permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;å¯æ‰©å±•&lt;/h3&gt;&lt;p&gt;ä»ç®€å•çš„ HTML æ¨¡æ¿å¼€å§‹ï¼Œæ ¹æ®éœ€è¦æ·»åŠ å¼ºå¤§çš„ç»„ä»¶ã€‚&lt;/p&gt;&lt;h3 id=&quot;å€¼å¾—ä¿¡èµ–&quot;&gt;&lt;a href=&quot;#%E5%80%BC%E5%BE%97%E4%BF%A1%E8%B5%96&quot; aria-label=&quot;å€¼å¾—ä¿¡èµ– permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;å€¼å¾—ä¿¡èµ–&lt;/h3&gt;&lt;p&gt;Marko ä¸º ebay.com ç­‰é«˜æµé‡ç½‘ç«™æä¾›æ”¯æŒã€‚&lt;/p&gt;&lt;h3 id=&quot;é‡å¡‘-html&quot;&gt;&lt;a href=&quot;#%E9%87%8D%E5%A1%91-html&quot; aria-label=&quot;é‡å¡‘ html permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;é‡å¡‘ HTML&lt;/h3&gt;&lt;p&gt;Marko æ˜¯ HTMLï¼Œè¢«é‡æ–°è®¾æƒ³ä¸ºä¸€ç§ç”¨äºæ„å»ºåŠ¨æ€å’Œååº”å¼ç”¨æˆ·ç•Œé¢çš„è¯­è¨€ã€‚å‡ ä¹ä»»ä½•æœ‰æ•ˆçš„ HTML éƒ½æ˜¯æœ‰æ•ˆçš„ Markoï¼Œä½† Marko æ‰©å±•äº† HTML è¯­è¨€ä»¥å…è®¸ä»¥å£°æ˜æ–¹å¼æ„å»ºç°ä»£åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;&lt;h3 id=&quot;æ¸è¿›å¼æ¸²æŸ“&quot;&gt;&lt;a href=&quot;#%E6%B8%90%E8%BF%9B%E5%BC%8F%E6%B8%B2%E6%9F%93&quot; aria-label=&quot;æ¸è¿›å¼æ¸²æŸ“ permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;æ¸è¿›å¼æ¸²æŸ“&lt;/h3&gt;&lt;p&gt;ä¸€æ—¦å†…å®¹å‡†å¤‡å°±ç»ªï¼ŒMarko å°±ä¼šå°†å†…å®¹æµå¼ä¼ è¾“ç»™æ‚¨çš„ç”¨æˆ·ã€‚æ— éœ€ç­‰å¾…å®¢æˆ·ç«¯ JavaScript åŒ…æˆ–æ•°æ®è¯·æ±‚å³å¯å¼€å§‹å‘ˆç°ã€‚HTMLã€èµ„äº§å’Œå›¾åƒä¼šå°½å¿«åŠ è½½ï¼Œå¹¶åœ¨å®Œæˆæ—¶åŠ è½½å¼‚æ­¥æ•°æ®ã€‚&lt;/p&gt;&lt;h3 id=&quot;ä»£ç æ¶ˆé™¤&quot;&gt;&lt;a href=&quot;#%E4%BB%A3%E7%A0%81%E6%B6%88%E9%99%A4&quot; aria-label=&quot;ä»£ç æ¶ˆé™¤ permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;ä»£ç æ¶ˆé™¤&lt;/h3&gt;&lt;p&gt;Marko åªå°†äº¤äº’ç»„ä»¶çš„ä»£ç å‘é€åˆ°æµè§ˆå™¨ã€‚å®ƒçš„ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ£€æµ‹å“ªäº›ç»„ä»¶åªéœ€è¦åœ¨æœåŠ¡å™¨ä¸Šå‘ˆç°ã€‚è¿™æ„å‘³ç€æ›´å°‘çš„ä¸‹è½½å’Œæ›´å°‘çš„æ‰§è¡Œã€‚æ— è®ºä½¿ç”¨ä½•ç§è®¾å¤‡æˆ–ç½‘ç»œï¼Œæ‚¨çš„ç”¨æˆ·éƒ½å¯ä»¥äº«å—é¡¶çº§æ€§èƒ½ã€‚&lt;/p&gt;&lt;h3 id=&quot;é‡èº«å®šåˆ¶çš„æ€§èƒ½&quot;&gt;&lt;a href=&quot;#%E9%87%8F%E8%BA%AB%E5%AE%9A%E5%88%B6%E7%9A%84%E6%80%A7%E8%83%BD&quot; aria-label=&quot;é‡èº«å®šåˆ¶çš„æ€§èƒ½ permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;é‡èº«å®šåˆ¶çš„æ€§èƒ½&lt;/h3&gt;&lt;p&gt;Marko çš„ç¼–è¯‘å™¨ç”Ÿæˆé€‚åˆå…¶è¿è¡Œä½ç½®çš„ä»£ç ã€‚æ‚¨åªéœ€ç¼–å†™ä¸€æ¬¡ä»£ç ï¼Œå®ƒå°±ä¼šé’ˆå¯¹æœåŠ¡å™¨å’Œæµè§ˆå™¨è¿›è¡Œä¼˜åŒ–ã€‚è¿™åœ¨æœåŠ¡å™¨ä¸Šå°¤ä¸ºæ˜æ˜¾ï¼ŒMarko æ¯”å…¶ä»–æµè¡Œçš„è§£å†³æ–¹æ¡ˆå¿«å‡ å€ã€‚&lt;/p&gt;&lt;h3 id=&quot;ç¼–è¾‘æ”¯æŒ&quot;&gt;&lt;a href=&quot;#%E7%BC%96%E8%BE%91%E6%94%AF%E6%8C%81&quot; aria-label=&quot;ç¼–è¾‘æ”¯æŒ permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;ç¼–è¾‘æ”¯æŒ&lt;/h3&gt;&lt;p&gt;Marko ä¸º VSCode ç¼–è¾‘å™¨æä¾›ä¸€æµçš„æ”¯æŒï¼ŒåŒ…æ‹¬è¯­æ³•çªå‡ºæ˜¾ç¤ºã€è‡ªåŠ¨å®Œæˆã€Hyperclick ä»¥å¿«é€Ÿè·³è½¬åˆ°å¼•ç”¨çš„æ–‡ä»¶ï¼Œä»¥åŠæ¼‚äº®çš„æ‰“å°ä»¥ä¿æŒä»£ç çš„å¯è¯»æ€§ã€‚ç¤¾åŒºæ’ä»¶è¿˜ä¸º Sublimeã€Atomã€Webstorm ç­‰æä¾›è¯­æ³•é«˜äº®æ˜¾ç¤ºï¼&lt;/p&gt;&lt;p&gt;Marko æ‰©å±•åŒ…æ‹¬æ¡ä»¶ï¼ˆ&lt;code&gt;conditionals&lt;/code&gt;ï¼‰ã€åˆ—è¡¨ï¼ˆ&lt;code&gt;lists&lt;/code&gt;ï¼‰ã€çŠ¶æ€ï¼ˆ&lt;code&gt;state&lt;/code&gt;ï¼‰å’Œç»„ä»¶ï¼ˆ&lt;code&gt;components&lt;/code&gt;ï¼‰ï¼›Marko æ”¯æŒå•æ–‡ä»¶ç»„ä»¶å’Œåˆ†è§£ä¸ºå•ç‹¬æ–‡ä»¶çš„ç»„ä»¶ã€‚åœ¨å†™æ³•ä¸Šï¼ŒMarko æ¯” &lt;a href=&quot;https://nicelinks.site/post/5b1a221c0526c920d6dfaada&quot;&gt;Vue&lt;/a&gt; ã€ &lt;a href=&quot;https://nicelinks.site/post/5b1294b5e93ed2618cfac134&quot;&gt;React&lt;/a&gt; è¦ä¸ºæ›´åŠ çœå¿ƒäº›ï¼Œä¸ &lt;a href=&quot;https://nicelinks.site/post/62a9c2ad90509e23cea772c0&quot;&gt;Svelte&lt;/a&gt; ç›¸ä¼¼ã€‚Marko åœ¨ &lt;a href=&quot;https://github.com/marko-js/marko&quot;&gt;Github å¼€æº&lt;/a&gt; ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹ï¼Œå¯ä»¥å‰å¾€ä»è€Œäº†è§£æ›´å¤šã€‚&lt;/p&gt;&lt;p&gt;â”€â”€ å‡ºè‡ª&lt;a href=&quot;https://nicelinks.site/post/63762bbc049fa51046c48442&quot;&gt;å€¾åŸä¹‹é“¾ - Marko - A declarative, HTML-based language that makes building web apps fun&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/tags/%E5%A4%B4%E5%83%8F&quot;&gt;&lt;code&gt;å¤´åƒ&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E5%8D%A1%E9%80%9A&quot;&gt;&lt;code&gt;å¡é€š&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E5%85%8D%E8%B4%B9&quot;&gt;&lt;code&gt;å…è´¹&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Create your own free avatar in 4 different styles. You can save it as a scalable SVG image or in the more common PNG format.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/avatarmaker.com.png?x-oss-process=style/png2jpg&quot; alt=&quot;å€¾åŸä¹‹é“¾ - Avatar Maker - Create your own avatar online&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ¨èè¯­&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/redirect?url=https://avatarmaker.com/&quot;&gt;Avatar Maker&lt;/a&gt; ï¼Œä¸€æ¬¾åœ¨çº¿åˆ›å»ºå¤´åƒå·¥å…·ï¼›å®ƒæ”¯æŒä»¥ 4 ç§ä¸åŒçš„é£æ ¼ï¼Œåˆ›å»ºä½ è‡ªå·±çš„&lt;strong&gt;å…è´¹å¤´åƒ&lt;/strong&gt;ã€‚ä½ å¯ä»¥æŠŠå®ƒä¿å­˜ä¸ºå¯æ‰©å±•çš„ SVG å›¾åƒæˆ–æ›´å¸¸è§çš„ PNG æ ¼å¼ã€‚Avatar Maker ä½¿ç”¨éå¸¸ç®€å•ï¼Œæ— éœ€æ³¨å†Œæˆ–è´¦æˆ·ï¼Œé€‰æ‹©æ€§æ ¼å³å¯å¼€å§‹ï¼Œæ”¯æŒè„¸ã€çœ¼ç›ã€å¤´å‘ã€è¡£æœç­‰éƒ¨ä½è¿›è¡Œç¼–è¾‘åˆ›é€ ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç³»ç»Ÿéšæœºçš„ï¼›å…¶åŒç±»å‹äº§å“è¿˜æœ‰ &lt;a href=&quot;https://nicelinks.site/post/631cb6d692583d0ec9c367bf&quot;&gt;Ava Maker&lt;/a&gt;ã€&lt;a href=&quot;https://nicelinks.site/post/633531873423870b914df533&quot;&gt;Peeps&lt;/a&gt; ç­‰ï¼›å¦‚æœæ‚¨æœ‰åˆ›å»ºå¡é€šè™šæ‹Ÿå¤´åƒçš„éœ€æ±‚ï¼Œå¯å°è¯•è¿™å‡ æ¬¾å·¥å…·ã€‚&lt;/p&gt;&lt;p&gt;â”€â”€ å‡ºè‡ª&lt;a href=&quot;https://nicelinks.site/post/6374d7361ac89e525a883279&quot;&gt;å€¾åŸä¹‹é“¾ - Avatar Maker - Create your own avatar online&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/tags/%E5%BC%80%E6%BA%90&quot;&gt;&lt;code&gt;å¼€æº&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/HTTP&quot;&gt;&lt;code&gt;HTTP&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E6%9C%8D%E5%8A%A1&quot;&gt;&lt;code&gt;æœåŠ¡&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;ntfy is a simple HTTP-based pub-sub notification service. It allows you to send desktop notifications via scripts from any computer, entirely without signup or cost. Made with â¤ by Philipp C. Heckel, Apache License 2.0, source at &lt;a href=&quot;https://heckel.io/ntfy&quot;&gt;https://heckel.io/ntfy&lt;/a&gt;.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/ntfy.sh.png?x-oss-process=style/png2jpg&quot; alt=&quot;å€¾åŸä¹‹é“¾ - ntfy.sh | Send push notifications to your phone via PUT/POST&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ¨èè¯­&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/redirect?url=https://ntfy.sh/&quot;&gt;ntfy.sh&lt;/a&gt; ï¼Œï¼ˆå‘éŸ³ï¼šnotifyï¼‰æ˜¯ä¸€ä¸ªç®€å•çš„åŸºäº HTTP çš„å‘å¸ƒ-è®¢é˜…é€šçŸ¥æœåŠ¡ã€‚å®ƒå…è®¸æ‚¨&lt;strong&gt;ä»ä»»ä½•è®¡ç®—æœºé€šè¿‡è„šæœ¬å‘æ‚¨çš„æ‰‹æœºæˆ–æ¡Œé¢å‘é€é€šçŸ¥&lt;/strong&gt;ï¼Œå®Œå…¨&lt;strong&gt;æ— éœ€æ³¨å†Œã€è´¹ç”¨æˆ–è®¾ç½®&lt;/strong&gt;ã€‚å®ƒæ˜¯å¼€æºçš„ï¼Œå¦‚æœæ‚¨æƒ³è¿è¡Œåœ¨è‡ªå·±çš„æœåŠ¡å™¨ï¼Œå¯ä»¥é€šè¿‡ &lt;a href=&quot;https://nicelinks.site/post/5b7036890f8719053c094d68&quot;&gt;Docker&lt;/a&gt; è¿›è¡Œéƒ¨ç½²ã€‚&lt;/p&gt;&lt;h3 id=&quot;å‘å¸ƒæ¶ˆæ¯&quot;&gt;&lt;a href=&quot;#%E5%8F%91%E5%B8%83%E6%B6%88%E6%81%AF&quot; aria-label=&quot;å‘å¸ƒæ¶ˆæ¯ permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;å‘å¸ƒæ¶ˆæ¯&lt;/h3&gt;&lt;p&gt;å¯ä»¥é€šè¿‡ PUT æˆ– POST æ¥ &lt;a href=&quot;https://ntfy.sh/docs/publish/&quot;&gt;å‘å¸ƒæ¶ˆæ¯&lt;/a&gt; ã€‚ä¸»é¢˜æ˜¯é€šè¿‡è®¢é˜…æˆ–å‘å¸ƒæ¥å³æ—¶åˆ›å»ºçš„ã€‚å› ä¸ºæ²¡æœ‰æ³¨å†Œï¼Œ&lt;strong&gt;ä¸»é¢˜ï¼ˆtopicï¼‰åç§°æ˜¯å…¬å¼€çš„ï¼Œå…¶æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯†ç ï¼Œå› æ­¤é€‰æ‹©ä¸å®¹æ˜“è¢«çŒœåˆ°çš„åç§°æ˜¯æ˜æ™ºçš„&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ POST è¯·æ±‚ï¼ˆé€šè¿‡ &lt;code&gt;curl -d&lt;/code&gt;ï¼‰å‘å¸ƒæ¶ˆæ¯ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;curl -d &quot;Backup successful ğŸ˜€&quot;Â ntfy.sh/mytopic
curl -d &quot;https://nicelinks.site ğŸ˜€&quot; ntfy.sh/nicelinks
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é€šè¿‡æµè§ˆå™¨è®¿é—®ï¼š &lt;a href=&quot;https://ntfy.sh/mytopic&quot;&gt;ntfy.sh/mytopic&lt;/a&gt; ä¾¿å¯ä»¥çœ‹åˆ°æ‰€å‘çš„æ¶ˆæ¯ï¼ˆ&lt;strong&gt;å®æ—¶&lt;/strong&gt;ï¼‰ï¼›å½“ç„¶ä¹Ÿå¯ä»¥åœ¨æ‰‹æœºç«¯å®‰è£…åº”ç”¨ç¨‹åºï¼Œä»è€Œå¾—ä»¥æŸ¥é˜…ä¿¡æ¯ã€‚è¿˜æœ‰æ›´å¤šä¸å‘å¸ƒæ¶ˆæ¯ç›¸å…³çš„åŠŸèƒ½ï¼šæ‚¨å¯ä»¥è®¾ç½®&lt;strong&gt;é€šçŸ¥ä¼˜å…ˆçº§&lt;/strong&gt;ã€&lt;strong&gt;æ ‡é¢˜&lt;/strong&gt;å’Œ&lt;strong&gt;æ ‡è®°æ¶ˆæ¯&lt;/strong&gt;ã€‚è¿™æ˜¯ä¸€èµ·ä½¿ç”¨å…¶ä¸­ä¸€äº›çš„ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;curl \
Â Â -H &quot;Title: Unauthorized access detected&quot; \
Â Â -H &quot;Priority: urgent&quot; \
Â Â -H &quot;Tags: warning,skull&quot; \
Â Â -d &quot;Remote access to $(hostname) detected. Act right away.&quot; \
Â Â ntfy.sh/mytopic
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;è®¢é˜…ä¸»é¢˜&quot;&gt;&lt;a href=&quot;#%E8%AE%A2%E9%98%85%E4%B8%BB%E9%A2%98&quot; aria-label=&quot;è®¢é˜…ä¸»é¢˜ permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;è®¢é˜…ä¸»é¢˜&lt;/h3&gt;&lt;p&gt;æ‚¨å¯ä»¥ &lt;a href=&quot;https://ntfy.sh/docs/subscribe/phone/&quot;&gt;ä½¿ç”¨æ‰‹æœº&lt;/a&gt; ã€ &lt;a href=&quot;https://ntfy.sh/docs/subscribe/web/&quot;&gt;æ­¤ Web UI&lt;/a&gt; æˆ–åœ¨æ‚¨è‡ªå·±çš„åº”ç”¨ç¨‹åºä¸­ &lt;a href=&quot;https://ntfy.sh/docs/subscribe/api/&quot;&gt;é€šè¿‡ API&lt;/a&gt; è®¢é˜…æ¥åˆ›å»ºå’Œè®¢é˜…ä¸»é¢˜ï¼ˆtopicï¼‰ã€‚&lt;/p&gt;&lt;p&gt;è¯¥ä½œè€…å–œæ¬¢å…è´¹è½¯ä»¶ï¼Œå¹¶ä»¥æ­¤ä¸ºä¹è¶£ï¼Œä»–æ‰¿è¯ºè¿™é¡¹æœåŠ¡å°†æ°¸è¿œä¿æŒ &lt;a href=&quot;https://github.com/binwiederhier/ntfy&quot;&gt;å…è´¹å’Œå¼€æ”¾&lt;/a&gt; ï¼›æ‚¨å¯ä»¥åœ¨ &lt;a href=&quot;https://ntfy.sh/docs/faq/&quot;&gt;å¸¸è§é—®é¢˜è§£ç­”&lt;/a&gt; å’Œ &lt;a href=&quot;https://ntfy.sh/docs/privacy/&quot;&gt;éšç§æ”¿ç­–&lt;/a&gt; ä¸­é˜…è¯»æ›´å¤šå†…å®¹ã€‚è¿™é‡Œä»‹ç»çš„ï¼Œåªæ˜¯ ntfy åŸºç¡€åŠŸèƒ½ï¼Œå¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šåŠå¦‚ä½•ä½¿ç”¨ï¼Œå¯ç§»æ­¥è‡³ &lt;a href=&quot;https://docs.ntfy.sh/&quot;&gt;ntfy å…¥é—¨æ•™ç¨‹&lt;/a&gt; ã€‚åœ¨æˆ‘çœ‹æ¥ ntfy æ˜¯ä¸€ä¸ªå¾ˆæœ‰ä»·å€¼çš„è®¾è®¡ï¼›æƒ³æ‹¥æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„è®¢é˜…æœåŠ¡ï¼Œå¦‚æœåŸºäº &lt;code&gt;ntfy&lt;/code&gt; æ¥æ‰“é€ ï¼Œæˆ–æ˜¯ç›®å‰ä¸äºŒä¹‹é€‰ã€‚&lt;/p&gt;&lt;p&gt;â”€â”€ å‡ºè‡ª&lt;a href=&quot;https://nicelinks.site/post/6374d20a1ac89e525a882fa7&quot;&gt;å€¾åŸä¹‹é“¾ - ntfy.sh | Send push notifications to your phone via PUT/POST&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/tags/%E7%A8%8B%E5%BA%8F%E5%BA%93&quot;&gt;&lt;code&gt;ç¨‹åºåº“&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F&quot;&gt;&lt;code&gt;åµŒå…¥å¼&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E7%BC%96%E8%BE%91%E5%99%A8&quot;&gt;&lt;code&gt;ç¼–è¾‘å™¨&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;å…³é”®å­—&lt;/strong&gt;ï¼šLVGL, graphics library, embedded, GUI, MCU, microcontroller, widgets, low-memory&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;LVGL is the most popular free and open source embedded graphics library targeting any MCU, MPU and display type to build beautiful UIs. It&#x27;s boosted by a professional yet affordable drag and drop UI editor, called SquareLine Studio. We also do services like UI design, implementation and consulting.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/lvgl.io.png?x-oss-process=style/png2jpg&quot; alt=&quot;å€¾åŸä¹‹é“¾ -  LVGL - Light and Versatile Embedded Graphics Library &quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ¨èè¯­&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/redirect?url=https://lvgl.io/&quot;&gt;LVGL&lt;/a&gt; æ˜¯å—æ¬¢è¿çš„å…è´¹å’Œå¼€æº&lt;strong&gt;åµŒå…¥å¼&lt;/strong&gt;å›¾å½¢åº“ï¼Œå¯ä¸ºä»»ä½• MCUã€MPU å’Œæ˜¾ç¤ºå™¨ç±»å‹åˆ›å»ºæ¼‚äº®çš„ UIã€‚ä½¿ç”¨ä»–ä»¬çš„æ‹–æ”¾å¼ UI ç¼–è¾‘å™¨ &lt;strong&gt;SquareLine Studio æ¥ç®€åŒ–å¼€å‘&lt;/strong&gt;ï¼Œæˆ–è€…åªæ˜¯é›‡ç”¨ä»–ä»¬æ¥è®¾è®¡å’Œå®ç°æ‚¨çš„ä¸‹ä¸€ä¸ª UIã€‚LVGL åœ¨å®˜æ–¹æè¿°äº†ä»¥ä¸‹ä¼˜åŠ¿ï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;å…¨åŠŸèƒ½&lt;/strong&gt;ï¼š30 å¤šä¸ªå†…ç½®å°éƒ¨ä»¶ã€å¼ºå¤§çš„æ ·å¼å’Œå¸ƒå±€ç³»ç»Ÿä»¥åŠæ”¯æŒå¤šç§è¯­è¨€çš„æ’ç‰ˆã€‚&lt;/li&gt;&lt;li&gt;&lt;strong&gt;è‡ªç”±çš„&lt;/strong&gt;ï¼šå¯åœ¨ GitHub ä¸Šè·å¾—å¹¶åœ¨ MIT è®¸å¯ä¸‹åˆ†å‘ï¼Œä»¥ä½¿å•†ä¸šç”¨é€”å…è´¹ä¸”ç®€å•ã€‚&lt;/li&gt;&lt;li&gt;&lt;strong&gt;ç•Œé¢ç¼–è¾‘å™¨&lt;/strong&gt;ï¼šé™„å¸¦ä¸“ä¸šä¸”æ˜“äºä½¿ç”¨çš„ UI ç¼–è¾‘å™¨è½¯ä»¶ï¼Œä»¥åŠ å¿«å’Œç®€åŒ– UI å¼€å‘ã€‚&lt;/li&gt;&lt;li&gt;&lt;strong&gt;å—æ¬¢è¿çš„&lt;/strong&gt;ï¼šç”± 300 å¤šåè´¡çŒ®è€…å¼€å‘ï¼Œè¢« 100,000 å¤šåå¼€å‘äººå‘˜ä½¿ç”¨ï¼Œå¹¶å¾—åˆ°è¡Œä¸šé¢†å…ˆä¾›åº”å•†çš„æ”¯æŒã€‚&lt;/li&gt;&lt;li&gt;&lt;strong&gt;ä»»ä½•è®¾å¤‡&lt;/strong&gt;ï¼šé€‚ç”¨äºé©±åŠ¨ OLEDã€å•è‰²å’Œ TFT æ˜¾ç¤ºå™¨æˆ–ç›‘è§†å™¨çš„ä»»ä½•å¾®æ§åˆ¶å™¨ã€å¤„ç†å™¨å’Œ (RT)OSã€‚&lt;/li&gt;&lt;li&gt;&lt;strong&gt;æœ&lt;/strong&gt;ï¼šUI è®¾è®¡ã€å®æ–½å’Œå’¨è¯¢æœåŠ¡ï¼Œè®© UI å¼€å‘æ— å¿§&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;æµè¡Œå’Œå¼€æº&quot;&gt;&lt;a href=&quot;#%E6%B5%81%E8%A1%8C%E5%92%8C%E5%BC%80%E6%BA%90&quot; aria-label=&quot;æµè¡Œå’Œå¼€æº permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;æµè¡Œå’Œå¼€æº&lt;/h3&gt;&lt;p&gt;åœ¨ GitHub ä¸Šå®Œå…¨å¯ç”¨ï¼Œè¢«è®¸å¤šå¼€å‘äººå‘˜ä½¿ç”¨ï¼Œå¹¶å—åˆ°è¡Œä¸šé¢†å…ˆå…¬å¸çš„ä¿¡ä»»ã€‚&lt;/p&gt;&lt;ul&gt;&lt;li&gt;ç”± 300 å¤šåå¼€å‘äººå‘˜ç§¯æåˆ›å»ºå¹¶è¢« 100,000 å¤šäººä½¿ç”¨ã€‚&lt;/li&gt;&lt;li&gt;æµè¡Œçš„ LVGL å¯ç”¨äº Arduinoã€ PlatformIOã€ Zephyrã€ ESP32ã€ NXP MCUXpressoã€ NuttXã€ RT-Threadã€ CMSIS-Packã€ RIOT OS ç­‰ç­‰ã€‚&lt;/li&gt;&lt;li&gt;è·¨å¹³å°æ²¡æœ‰å¤–éƒ¨ä¾èµ–ï¼Œå¯ä»¥ç¼–è¯‘åˆ°ä»»ä½• MCU æˆ– MPU å’Œ (RT)OS ä»¥é©±åŠ¨ ePaperã€OLED æˆ– TFT æ˜¾ç¤ºå™¨ï¼Œç”šè‡³æ˜¾ç¤ºå™¨ã€‚&lt;/li&gt;&lt;li&gt;è½»é‡çº§éœ€è¦ 32kB RAMã€128kB é—ªå­˜ã€å¸§ç¼“å†²åŒºå’Œè‡³å°‘ 1/10 å±å¹•å¤§å°çš„ç¼“å†²åŒºç”¨äºæ¸²æŸ“ã€‚&lt;/li&gt;&lt;li&gt;ç»‘å®š LVGL æ˜¯ç”¨ Cï¼ˆä¸ C++ å…¼å®¹ï¼‰ç¼–å†™çš„ï¼Œå¹¶ç»‘å®šåˆ° MicroPythonã€PikaScriptã€JavaScriptï¼ˆç±»ä¼¼ Reactï¼‰å’Œ Berryã€‚&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;åˆ›å»ºç±»ä¼¼æ™ºèƒ½æ‰‹æœºçš„-ui&quot;&gt;&lt;a href=&quot;#%E5%88%9B%E5%BB%BA%E7%B1%BB%E4%BC%BC%E6%99%BA%E8%83%BD%E6%89%8B%E6%9C%BA%E7%9A%84-ui&quot; aria-label=&quot;åˆ›å»ºç±»ä¼¼æ™ºèƒ½æ‰‹æœºçš„ ui permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;åˆ›å»ºç±»ä¼¼æ™ºèƒ½æ‰‹æœºçš„ UI&lt;/h3&gt;&lt;p&gt;è®¸å¤šå†…ç½®å°éƒ¨ä»¶å’Œå— Web å¯å‘çš„åŠŸèƒ½ä½¿ä½¿ç”¨ LVGL åˆ›å»ºæ¼‚äº®å’Œç°ä»£çš„ UI å˜å¾—å®¹æ˜“ã€‚&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;30 å¤šä¸ªå†…ç½®å°éƒ¨ä»¶&lt;/strong&gt;ï¼Œä¾‹å¦‚æŒ‰é’®ã€æ ‡ç­¾ã€æ»‘å—ã€å›¾è¡¨ã€é”®ç›˜ã€ä»ªè¡¨ã€å¼§å½¢ã€è¡¨æ ¼ç­‰ç­‰ã€‚&lt;/li&gt;&lt;li&gt;&lt;strong&gt;æ ·å¼ç³»ç»Ÿ&lt;/strong&gt;100 ç§æ ·å¼å±æ€§ï¼ˆåŠå¾„ã€ä¸é€æ˜åº¦ã€æ¸å˜ã€è¾¹æ¡†ã€é˜´å½±ç­‰ï¼‰å¯åœ¨ä»»ä½•çŠ¶æ€ä¸‹è‡ªå®šä¹‰å°éƒ¨ä»¶çš„ä»»ä½•éƒ¨åˆ†ï¼ˆèƒŒæ™¯ã€æ»šåŠ¨æ¡ã€æŒ‡ç¤ºå™¨ã€æ—‹é’®ç­‰ï¼‰ã€‚&lt;/li&gt;&lt;li&gt;&lt;strong&gt;å¸ƒå±€&lt;/strong&gt;å¼ºå¤§çš„å— CSS å¯å‘çš„ Flexbox å’Œç½‘æ ¼å¸ƒå±€ï¼Œä»¥å“åº”æ–¹å¼è‡ªåŠ¨æ’åˆ—å°éƒ¨ä»¶ã€‚&lt;/li&gt;&lt;li&gt;&lt;strong&gt;æ’ç‰ˆ&lt;/strong&gt;UTF-8 ç¼–ç æ”¯æŒ CJKã€æ³°è¯­ã€å°åœ°è¯­ã€é˜¿æ‹‰ä¼¯è¯­å’Œæ³¢æ–¯è¯­ä¹¦å†™ç³»ç»Ÿï¼Œå…·æœ‰è‡ªåŠ¨æ¢è¡Œã€å­—è·è°ƒæ•´ã€æ–‡æœ¬æ»šåŠ¨ã€æ‹¼éŸ³è¾“å…¥æ³•è¾“å…¥å’Œå†…è”è¡¨æƒ…ç¬¦å·ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;æ‹¥æœ‰ä¸“ä¸šçš„-ui-ç¼–è¾‘å™¨&quot;&gt;&lt;a href=&quot;#%E6%8B%A5%E6%9C%89%E4%B8%93%E4%B8%9A%E7%9A%84-ui-%E7%BC%96%E8%BE%91%E5%99%A8&quot; aria-label=&quot;æ‹¥æœ‰ä¸“ä¸šçš„ ui ç¼–è¾‘å™¨ permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;æ‹¥æœ‰ä¸“ä¸šçš„ UI ç¼–è¾‘å™¨&lt;/h3&gt;&lt;p&gt;SquareLine Studio æ˜¯ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„ LVGL æ‹–æ”¾å¼ UI ç¼–è¾‘å™¨å·¥å…·ï¼Œå³ä½¿æ˜¯è®¾è®¡å¸ˆä¹Ÿå¯ä»¥åœ¨å…¶ä¸­åˆ›å»ºåŠŸèƒ½é½å…¨çš„ UIã€‚&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;åŠŸèƒ½ UI ç«‹å³&lt;/strong&gt;è®¾è®¡å’Œåˆ›å»ºå·¥ä½œ UIï¼Œè€Œä¸æ˜¯é‡æ–°å®ç°åŸå‹ã€‚&lt;/li&gt;&lt;li&gt;&lt;strong&gt;æ— éœ€é‡æ–°æ„å»ºå³å¯è¿­ä»£&lt;/strong&gt;åªéœ€å•å‡»â€œæ’­æ”¾â€æŒ‰é’®å³å¯ç«‹å³è¯•ç”¨ UIï¼Œæ— éœ€ç¼–è¯‘ã€‚&lt;/li&gt;&lt;li&gt;&lt;strong&gt;åƒç´ å®Œç¾é¢„è§ˆ&lt;/strong&gt;æ‚¨åœ¨ç¼–è¾‘å™¨ä¸­çœ‹åˆ°çš„å†…å®¹ä¸æ‚¨åœ¨ç›®æ ‡è®¾å¤‡ä¸Šçœ‹åˆ°çš„å†…å®¹å®Œå…¨ç›¸åŒã€‚&lt;/li&gt;&lt;li&gt;&lt;strong&gt;ä¸ä¾›åº”å•†æ— å…³çš„&lt;/strong&gt;å¯¼å‡ºå¹³å°ç‹¬ç«‹ä»£ç ï¼Œå¯ä»¥ä¸ºä»»ä½•ä¾›åº”å•†çš„ä»»ä½• MCUã€MPU æˆ–æ˜¾ç¤ºå™¨æ„å»ºã€‚&lt;/li&gt;&lt;li&gt;&lt;strong&gt;æ˜“äºä¸Šæ‰‹&lt;/strong&gt;ä¹Ÿé€‚ç”¨äº Windowsã€Linux å’Œ MacOSã€‚åªéœ€ä¸‹è½½ã€å®‰è£…å’Œè¿è¡Œå®ƒï¼Œç”šè‡³æ— éœ€æ³¨å†Œåˆ°ç½‘ç«™ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;LVGLï¼šåµŒå…¥å¼å›¾å½¢åº“å¯ä¸ºä»»ä½• MCUã€MPU å’Œæ˜¾ç¤ºç±»å‹åˆ›å»ºæ¼‚äº®çš„ UIã€‚å®ƒç”±åä¸º SquareLine Studio çš„ä¸“ä¸šä¸”ç»æµå®æƒ çš„æ‹–æ”¾å¼ UI ç¼–è¾‘å™¨æ¨åŠ¨ã€‚å¦‚æœæ‚¨å¯¹å…¶æ„Ÿå…´è¶£ï¼Œå¯ç§»æ­¥è‡³ &lt;a href=&quot;https://github.com/lvgl/lvgl&quot;&gt;LVGL Github å¼€æºä»“åº“&lt;/a&gt; ã€‚&lt;/p&gt;&lt;p&gt;â”€â”€ å‡ºè‡ª&lt;a href=&quot;https://nicelinks.site/post/63723b57630f9c0644c8bc4f&quot;&gt;å€¾åŸä¹‹é“¾ - LVGL - Light and Versatile Embedded Graphics Library&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/tags/%E5%BC%95%E6%93%8E&quot;&gt;&lt;code&gt;å¼•æ“&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E5%BC%80%E6%BA%90&quot;&gt;&lt;code&gt;å¼€æº&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/CICD&quot;&gt;&lt;code&gt;CICD&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Welcome to Dagger.io&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/dagger.io.png?x-oss-process=style/png2jpg&quot; alt=&quot;å€¾åŸä¹‹é“¾ - dagger.io&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ¨èè¯­&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/redirect?url=https://dagger.io/&quot;&gt;Dagger&lt;/a&gt; æ˜¯ä¸€ä¸ªå¯ç¼–ç¨‹çš„ CI/CD å¼•æ“ï¼Œå¯ä»¥åœ¨å®¹å™¨ä¸­è¿è¡Œæ‚¨çš„ç®¡é“ã€‚ä½¿ç”¨ä¸åº”ç”¨ç¨‹åºç›¸åŒçš„ç¼–ç¨‹è¯­è¨€å°† CI/CD ç®¡é“å¼€å‘ä¸ºä»£ç ã€‚è¿™æ ·å¯ä»¥é¿å…å†™ YAML é…ç½®ï¼ˆ &lt;a href=&quot;https://nicelinks.site/post/59ba80d93df6765c75b77911&quot;&gt;Github&lt;/a&gt; ã€ &lt;a href=&quot;https://nicelinks.site/post/5f86fe3ccda9de27bd93a927&quot;&gt;Gitlab&lt;/a&gt; ç­‰å¹³å°ï¼Œåš CICD ä¸»è¦æ–¹å¼ï¼‰ã€‚&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼ŒCI/CD æˆ– CICD é€šå¸¸æŒ‡çš„æ˜¯&lt;strong&gt;æŒç»­é›†æˆ&lt;/strong&gt;å’Œ&lt;strong&gt;æŒç»­äº¤ä»˜&lt;/strong&gt;æˆ–æŒç»­éƒ¨ç½²çš„ç»„åˆå®è·µã€‚CI/CD é€šè¿‡åœ¨åº”ç”¨ç¨‹å¼çš„æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²ä¸­å®æ–½è‡ªåŠ¨åŒ–ï¼Œåœ¨å¼€å‘å’Œè¿è¥å›¢é˜Ÿä¹‹é—´æ¶èµ·äº†æ¡¥æ¢ã€‚ç°ä»£ DevOps å®è·µæ¶‰åŠè½¯ä½“åº”ç”¨ç¨‹å¼åœ¨æ•´ä¸ªå¼€å‘ç”Ÿå‘½å‘¨æœŸå†…çš„æŒç»­å¼€å‘ã€æŒç»­æµ‹è¯•ã€æŒç»­é›†æˆã€æŒç»­éƒ¨ç½²å’ŒæŒç»­ç›‘æ§ã€‚CI/CD å®è·µæˆ– CI/CD ç®¡é“ï¼ˆCI/CD pipelineï¼‰æ„æˆäº†ç°ä»£ DevOps ä¸šåŠ¡çš„ä¸»å¹²ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h3 id=&quot;ä½¿ç”¨-dagger-æœ‰ä½•ä»·å€¼&quot;&gt;&lt;a href=&quot;#%E4%BD%BF%E7%94%A8-dagger-%E6%9C%89%E4%BD%95%E4%BB%B7%E5%80%BC&quot; aria-label=&quot;ä½¿ç”¨ dagger æœ‰ä½•ä»·å€¼ permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;ä½¿ç”¨ Dagger æœ‰ä½•ä»·å€¼ï¼Ÿ&lt;/h3&gt;&lt;p&gt;Dagger å°†æ‚¨çš„ç®¡é“å®Œå…¨ä½œä¸º &lt;a href=&quot;https://opencontainers.org/&quot;&gt;æ ‡å‡† OCI å®¹å™¨&lt;/a&gt; æ‰§è¡Œã€‚è¿™æœ‰å‡ ä¸ªå¥½å¤„ï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;å³æ—¶æœ¬åœ°æµ‹è¯•&lt;/strong&gt;ã€‚&lt;/li&gt;&lt;li&gt;&lt;strong&gt;å¯ç§»æ¤æ€§&lt;/strong&gt;ï¼šç›¸åŒçš„ç®¡é“å¯ä»¥åœ¨æ‚¨çš„æœ¬åœ°æœºå™¨ã€CI è¿è¡Œå™¨ã€ä¸“ç”¨æœåŠ¡å™¨æˆ–ä»»ä½•å®¹å™¨æ‰˜ç®¡æœåŠ¡ä¸Šè¿è¡Œã€‚&lt;/li&gt;&lt;li&gt;&lt;strong&gt;é«˜çº§ç¼“å­˜&lt;/strong&gt;ï¼šé»˜è®¤ç¼“å­˜æ¯ä¸ªæ“ä½œï¼Œç¼“å­˜åœ¨ä»»ä½•åœ°æ–¹éƒ½ä¸€æ ·&lt;/li&gt;&lt;li&gt;&lt;strong&gt;ä¸ Docker ç”Ÿæ€ç³»ç»Ÿçš„å…¼å®¹æ€§&lt;/strong&gt;ï¼šå¦‚æœå®ƒåœ¨å®¹å™¨ä¸­è¿è¡Œï¼Œæ‚¨å¯ä»¥å°†å…¶æ·»åŠ åˆ°æ‚¨çš„ç®¡é“ä¸­ã€‚&lt;/li&gt;&lt;li&gt;&lt;strong&gt;è·¨è¯­è¨€å·¥å…·&lt;/strong&gt;ï¼šå›¢é˜Ÿå¯ä»¥ä½¿ç”¨å½¼æ­¤çš„å·¥å…·ï¼Œè€Œæ— éœ€å­¦ä¹ å½¼æ­¤çš„è¯­è¨€ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;dagger-æ˜¯ç»™å“ªäº›äººç”¨&quot;&gt;&lt;a href=&quot;#dagger-%E6%98%AF%E7%BB%99%E5%93%AA%E4%BA%9B%E4%BA%BA%E7%94%A8&quot; aria-label=&quot;dagger æ˜¯ç»™å“ªäº›äººç”¨ permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Dagger æ˜¯ç»™å“ªäº›äººç”¨ï¼Ÿ&lt;/h3&gt;&lt;p&gt;Dagger å¯èƒ½æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œå¦‚æœä½ æ˜¯ä¸‹é¢ ğŸ‘‡ æè¿°çš„è¿™ç±»äººï¼š&lt;/p&gt;&lt;ul&gt;&lt;li&gt;å¸Œæœ›æ‚¨çš„ CI ç®¡é“æ˜¯ä»£ç è€Œä¸æ˜¯ YAML çš„å¼€å‘äººå‘˜ï¼›&lt;/li&gt;&lt;li&gt;ä½ å›¢é˜Ÿçš„â€œæŒ‡å®šå¼€å‘äººå‘˜â€ï¼Œå¸Œæœ›ç”¨æ›´å¼ºå¤§çš„ä¸œè¥¿ä»£æ›¿ä¸€å †æ‰‹å·¥è„šæœ¬ï¼›&lt;/li&gt;&lt;li&gt;ä¸€ä½å¹³å°å·¥ç¨‹å¸ˆç¼–å†™è‡ªå®šä¹‰å·¥å…·ï¼Œç›®æ ‡æ˜¯è·¨ç»„ç»‡å­¤å²›ç»Ÿä¸€æŒç»­äº¤ä»˜ï¼›&lt;/li&gt;&lt;li&gt;äº‘åŸç”Ÿå¼€å‘å€¡å¯¼è€…æˆ–è§£å†³æ–¹æ¡ˆå·¥ç¨‹å¸ˆï¼Œå¸Œæœ›åœ¨çŸ­æ—¶é—´å†…å±•ç¤ºå¤æ‚çš„é›†æˆï¼›&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;Dagger åœ¨ &lt;a href=&quot;https://github.com/dagger/dagger&quot;&gt;Github å¼€æº&lt;/a&gt;ï¼Œå¦‚æœæ‚¨å¯¹ Dagger æ„Ÿå…´è¶£ï¼Œæƒ³äº†è§£æ›´å¤šï¼Œè¯¸å¦‚ Dagger æ˜¯å¦‚ä½•å·¥ä½œã€å¦‚ä½•ä½¿ç”¨ç­‰ï¼Œå¯ç§»æ­¥è‡³å®˜æ–¹ç½‘ç«™ï¼›ä»¥ç¨‹åºå‘˜è§†è§’æ¥çœ‹ï¼ŒDagger éå¸¸å…·æœ‰ä»·å€¼ï¼›ä»¥ YAML é…ç½®æˆ–è„šæœ¬çš„æ–¹å¼ï¼Œå¤„ç†ç®€å•è¯‰æ±‚éå¸¸æ–¹ä¾¿ï¼›å¦‚æœæ¶‰åŠå¤æ‚ä¸šåŠ¡ï¼ŒåæœŸç»´æŠ¤å¯èƒ½æ˜¯ä¸€åœºç¾éš¾ã€‚&lt;/p&gt;&lt;p&gt;â”€â”€ å‡ºè‡ª&lt;a href=&quot;https://nicelinks.site/post/637232df630f9c0644c8baef&quot;&gt;å€¾åŸä¹‹é“¾ - dagger.io&lt;/a&gt;&lt;/p&gt;&lt;p&gt;å¯¹å€¾åŸä¹‹é“¾æ„Ÿå…´è¶£çš„æœ‹å‹ï¼Œå¯é€šè¿‡ Webï¼Œå°ç¨‹åºï¼Œå¿«åº”ç”¨ç­‰æ¸ é“è¿›è¡Œè®¿é—®(åç»­å°†æ”¯æŒæ›´å¤šï¼Œå¦‚ VsCode æ’ä»¶ï¼ŒChrome æ‰©å±•ç­‰)ã€‚æ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿éšæ—¶å‘æˆ‘ä»¬åé¦ˆï¼ˆæ‚¨å¯ä»¥é€šè¿‡å®˜ç½‘åé¦ˆæ¸ é“ï¼Œæˆ–æ·»åŠ å¦‚ä¸‹å®¢æœå¾®ä¿¡ï¼‰ï¼ŒğŸ¤² ã€‚&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;https://image.nicelinks.site/%E5%80%BE%E5%9F%8E%E4%B9%8B%E9%93%BE-%E5%BE%AE%E4%BF%A1-mini.jpeg&quot; alt=&quot;å€¾åŸä¹‹é“¾ - å®¢æœå¾®ä¿¡&quot;/&gt;&lt;/p&gt;&lt;h2 id=&quot;æœ¬æœŸæ–‡æœ«å¯„è¯­&quot;&gt;&lt;a href=&quot;#%E6%9C%AC%E6%9C%9F%E6%96%87%E6%9C%AB%E5%AF%84%E8%AF%AD&quot; aria-label=&quot;æœ¬æœŸæ–‡æœ«å¯„è¯­ permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;æœ¬æœŸæ–‡æœ«å¯„è¯­&lt;/h2&gt;&lt;p&gt;çŸ¥å…¶é›„ï¼Œå®ˆå…¶é›Œï¼Œä¸ºå¤©ä¸‹æºªã€‚ä¸ºå¤©ä¸‹æºªï¼Œå¸¸å¾·ä¸ç¦»ï¼Œå¤å½’äºå©´å„¿ã€‚çŸ¥å…¶ç™½ï¼ŒçŸ¥å…¶ç™½ï¼Œå®ˆå…¶é»‘ï¼Œä¸ºå¤©ä¸‹å¼ã€‚ä¸ºå¤©ä¸‹å¼ï¼Œå¸¸å¾·ä¸å¿’ï¼Œå¤å½’äºæ— æã€‚çŸ¥å…¶è£ï¼Œå®ˆå…¶è¾±ï¼Œä¸ºå¤©ä¸‹è°·ã€‚ä¸ºå¤©ä¸‹è°·ï¼Œå¸¸å¾·ä¹ƒè¶³ï¼Œå¤å½’äºæœ´ã€‚æœ´æ•£åˆ™ä¸ºå™¨ï¼Œåœ£äººç”¨ä¹‹ï¼Œåˆ™ä¸ºå®˜é•¿ã€‚æ•…å¤§æ™ºä¸å‰²ã€‚ â”€â”€ æ˜¥ç§‹æœ«æœŸäºº Â· è€å­æè€³ã€Šé“å¾·ç»ã€‹ç¬¬äºŒåå…«ç« &lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://nicelinks.site/?utm_source=weekly&quot;&gt;å€¾åŸä¹‹é“¾&lt;/a&gt;ä½œä¸ºä¸€ä¸ªå¼€æ”¾å¹³å°ï¼Œæ—¨åœ¨äº‘é›†å…¨çƒ&lt;strong&gt;ä¼˜ç§€ç½‘ç«™&lt;/strong&gt;ï¼Œæ¢ç´¢äº’è”ç½‘ä¸­æ›´å¹¿é˜”çš„ä¸–ç•Œï¼›åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥è½»æ¾å‘ç°ã€å­¦ä¹ ã€åˆ†äº«æ›´å¤šæœ‰ç”¨æˆ–æœ‰è¶£çš„äº‹ç‰©ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://image.nicelinks.site/nicelinks-miniprogram-code.jpeg?imageView2/1/w/250/h/250/interlace/1/ignore-error/1&quot; alt=&quot;å°ç¨‹åºç  - å€¾åŸä¹‹é“¾&quot;/&gt;&lt;/p&gt;&lt;h2 id=&quot;æ‚¨å¯èƒ½æ„Ÿå…´è¶£çš„æ–‡ç« &quot;&gt;&lt;a href=&quot;#%E6%82%A8%E5%8F%AF%E8%83%BD%E6%84%9F%E5%85%B4%E8%B6%A3%E7%9A%84%E6%96%87%E7%AB%A0&quot; aria-label=&quot;æ‚¨å¯èƒ½æ„Ÿå…´è¶£çš„æ–‡ç«  permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;æ‚¨å¯èƒ½æ„Ÿå…´è¶£çš„æ–‡ç« &lt;/h2&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>65a889ec2ae56f369ed2cdc0420bd211</guid>
<title>æˆä¸º Go é«˜æ‰‹çš„ 8 ä¸ª GitHub å¼€æºé¡¹ç›®</title>
<link>https://toutiao.io/k/rpkv0pk</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;hr data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Go ä» 2009 å¹´å¼€å§‹æ­£å¼å¯¹å¤–å…¬å¸ƒï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼ŒGo åœ¨å½“å‰çš„ç¼–ç¨‹è¯­è¨€ä¸­å æœ‰è‰¯å¥½çš„åœ°ä½ï¼Œåœ¨ WEB é¢†åŸŸã€äº‘åŸç”Ÿé¢†åŸŸã€åº•å±‚æœåŠ¡é¢†åŸŸéƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Go æ˜¯ä¸€é—¨ç›¸å¯¹å¹´è½»çš„è¯­è¨€ï¼Œå…·æœ‰ C/C++ ç­‰ç¼–è¯‘è¯­è¨€çš„æ€§èƒ½å’Œå®‰å…¨æ€§ï¼ŒåŒæ—¶ä¹Ÿå…·æœ‰è‰¯å¥½çš„å¼€å‘é€Ÿåº¦ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬æ–‡å°†æ ¸å¿ƒåº“ã€å­¦ä¹ è·¯çº¿ã€é¡¹ç›®å’Œèµ„æºè¿›è¡Œäº†åˆ†ç±»ï¼Œä»¥ä¾¿ä½ è¿›ä¸€æ­¥æ‰©å±•ä½ å¯¹ Go è¯­è¨€çš„äº†è§£ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ ¸å¿ƒåº“&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;gin&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;â­ GitHub stars: 64k+&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Gin æ˜¯ä¸€ä¸ªç”¨ Go (Golang) ç¼–å†™çš„ HTTP Web æ¡†æ¶ã€‚å®ƒå…·æœ‰ç±»ä¼¼ Martini çš„ APIï¼Œæ€§èƒ½è¦å¥½å¾—å¤šâ€”â€”é€Ÿåº¦æé«˜äº† 40 å€ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;https://github.com/gin-gonic/ginã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;go-zero&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;â­ GitHub stars: 21.2k+&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¸¦æœ‰ cli å·¥å…·çš„äº‘åŸç”Ÿ Go å¾®æœåŠ¡æ¡†æ¶ï¼Œå¯æé«˜ç”Ÿäº§åŠ›ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;https://github.com/zeromicro/go-zeroã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;gorm&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;â­ GitHub stars: 30.2k+&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Golang çš„å‡ºè‰² ORM åº“ï¼Œå¯¹å¼€å‘äººå‘˜å¾ˆå‹å¥½ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;https://github.com/go-gorm/gormã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ä¸­é—´ä»¶&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;etcd&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;â­ GitHub stars: 41.7k+&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ†å¸ƒå¼ç³»ç»Ÿæœ€å…³é”®æ•°æ®çš„åˆ†å¸ƒå¼å¯é é”®å€¼å­˜å‚¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;https://github.com/etcd-io/etcdã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Kubernetes&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;â­ GitHub stars: 93.3k+&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”Ÿäº§çº§å®¹å™¨è°ƒåº¦å’Œç®¡ç†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;https://github.com/kubernetes/kubernetesã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å­¦ä¹ èµ„æº&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;golang-developer-roadmap&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;â­ GitHub stars: 15.5k+&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;2020 å¹´æˆä¸º Go å¼€å‘è€…çš„è·¯çº¿å›¾ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;https://github.com/Alikhll/golang-developer-roadmapã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;é¡¹ç›®&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;go-admin&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;â­ GitHub stars: 7.6k+&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŸºäº Gin + Vue + Element UI çš„ç‹¬ç«‹å‰åç«¯æƒé™ç®¡ç†ç³»ç»Ÿçš„è„šæ‰‹æ¶ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;https://github.com/go-admin-team/go-adminã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;èµ„æº&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;awesome-go&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;â­ GitHub stars: 90.1k+&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç²¾é€‰çš„ Go æ¡†æ¶ã€åº“å’Œè½¯ä»¶çš„åˆ—è¡¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;https://github.com/avelino/awesome-goã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŸæ–‡é“¾æ¥ï¼šhttps://medium.com/@Beck_Moulton/8-github-repositories-to-become-a-golang-master-b8491b5a57e4&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>77902e39fc7a1ce7097ba93080b05955</guid>
<title>ç¾å›¢å¤–å–æœç´¢åŸºäº Elasticsearch çš„ä¼˜åŒ–å®è·µ</title>
<link>https://toutiao.io/k/i6oh5e0</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content js_underline_content             autoTypeSetting24psection&amp;#10;            &quot; id=&quot;js_content&quot;&gt;&lt;p data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;58&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.1546875&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsU2zk0q52HtKQjubeUEyZHBVHPgeBXgTUj0ib1Kwfosl82xO1Aw7x6gccLuuYs1dbxI7REI7OcjbGw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;æ€»ç¬¬544&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;ç¯‡&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;2022å¹´ ç¬¬061ç¯‡&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;section data-role=&quot;outer&quot; label=&quot;Powered by 135editor.com&quot;&gt;&lt;section data-role=&quot;outer&quot; label=&quot;Powered by 135editor.com&quot;&gt;&lt;section data-tools=&quot;135ç¼–è¾‘å™¨&quot; data-id=&quot;127&quot;&gt;&lt;section data-tools=&quot;135ç¼–è¾‘å™¨&quot; data-id=&quot;127&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;img border=&quot;0&quot; class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;103&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;103&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsU2zk0q52HtKQjubeUEyZHBic5ADGrKxgSd0tibyMiasOHXjb46qFBw7PTfuWAxXzWq32lDkL05icwkMg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;750&quot; data-width=&quot;100%&quot; opacity=&quot;&quot; title=&quot;undefined&quot;/&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot; data-style=&quot;text-align: left; font-size: 14px; color: inherit;&quot;&gt;&lt;section&gt;&lt;span&gt;ç¾å›¢å¤–å–æœç´¢å·¥ç¨‹å›¢é˜Ÿåœ¨Elasticsearchçš„ä¼˜åŒ–å®è·µä¸­ï¼ŒåŸºäºLocation-Based Serviceï¼ˆLBSï¼‰ä¸šåŠ¡åœºæ™¯å¯¹Elasticsearchçš„æŸ¥è¯¢æ€§èƒ½è¿›è¡Œä¼˜åŒ–ã€‚è¯¥ä¼˜åŒ–åŸºäºRun-Length Encodingï¼ˆRLEï¼‰è®¾è®¡äº†ä¸€æ¬¾é«˜æ•ˆçš„å€’æ’ç´¢å¼•ç»“æ„ï¼Œä½¿æ£€ç´¢è€—æ—¶ï¼ˆTP99ï¼‰é™ä½äº†84%ã€‚æœ¬æ–‡ä»é—®é¢˜åˆ†æã€æŠ€æœ¯é€‰å‹ã€ä¼˜åŒ–æ–¹æ¡ˆç­‰æ–¹é¢è¿›è¡Œé˜è¿°ï¼Œå¹¶ç»™å‡ºæœ€ç»ˆç°åº¦éªŒè¯çš„ç»“è®ºã€‚&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;1. å‰è¨€&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;2. èƒŒæ™¯&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;3. æŒ‘æˆ˜åŠé—®é¢˜&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;4. æŠ€æœ¯æ¢ç´¢ä¸å®è·µ&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;4.1 å€’æ’é“¾æŸ¥è¯¢ä¼˜åŒ–&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;4.2 å€’æ’é“¾åˆå¹¶&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;4.3 åŸºäº RLE çš„å€’æ’æ ¼å¼è®¾è®¡&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;4.4 åŠŸèƒ½é›†æˆ&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;5. æ€§èƒ½æ”¶ç›Š&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;6. æ€»ç»“ä¸å±•æœ›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;7. ä½œè€…ç®€ä»‹&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;8. å‚è€ƒæ–‡çŒ®&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;1. å‰è¨€&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;æœ€è¿‘åå¹´ï¼ŒElasticsearch å·²ç»æˆä¸ºäº†æœ€å—æ¬¢è¿çš„å¼€æºæ£€ç´¢å¼•æ“ï¼Œå…¶ä½œä¸ºç¦»çº¿æ•°ä»“ã€è¿‘çº¿æ£€ç´¢ã€Bç«¯æ£€ç´¢çš„ç»å…¸åŸºå»ºï¼Œå·²æ²‰æ·€äº†å¤§é‡çš„å®è·µæ¡ˆä¾‹åŠä¼˜åŒ–æ€»ç»“ã€‚ç„¶è€Œåœ¨é«˜å¹¶å‘ã€é«˜å¯ç”¨ã€å¤§æ•°æ®é‡çš„ C ç«¯åœºæ™¯ï¼Œç›®å‰å¯å‚è€ƒçš„èµ„æ–™å¹¶ä¸å¤šã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡åˆ†äº«åœ¨å¤–å–æœç´¢åœºæ™¯ä¸‹çš„ä¼˜åŒ–å®è·µï¼Œèƒ½ä¸ºå¤§å®¶æä¾› Elasticsearch ä¼˜åŒ–æ€è·¯ä¸Šçš„ä¸€äº›å€Ÿé‰´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç¾å›¢åœ¨å¤–å–æœç´¢ä¸šåŠ¡åœºæ™¯ä¸­å¤§è§„æ¨¡åœ°ä½¿ç”¨äº† Elasticsearch ä½œä¸ºåº•å±‚æ£€ç´¢å¼•æ“ã€‚å…¶åœ¨è¿‡å»å‡ å¹´å¾ˆå¥½åœ°æ”¯æŒäº†å¤–å–æ¯å¤©åäº¿ä»¥ä¸Šçš„æ£€ç´¢æµé‡ã€‚ç„¶è€Œéšç€ä¾›ç»™ä¸æ•°æ®é‡çš„æ€¥å‰§å¢é•¿ï¼Œä¸šåŠ¡æ£€ç´¢è€—æ—¶ä¸ CPU è´Ÿè½½ä¹Ÿéšä¹‹ä¸Šæ¶¨ã€‚é€šè¿‡åˆ†ææˆ‘ä»¬å‘ç°ï¼Œå½“å‰æ£€ç´¢çš„æ€§èƒ½çƒ­ç‚¹ä¸»è¦é›†ä¸­åœ¨å€’æ’é“¾çš„æ£€ç´¢ä¸åˆå¹¶æµç¨‹ä¸­ã€‚é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åŸºäº Run-length Encodingï¼ˆ&lt;span&gt;RLE&lt;/span&gt;ï¼‰&lt;sup&gt;[1]&lt;/sup&gt; æŠ€æœ¯è®¾è®¡å®ç°äº†ä¸€å¥—é«˜æ•ˆçš„å€’æ’ç´¢å¼•ï¼Œä½¿å€’æ’é“¾åˆå¹¶æ—¶é—´ï¼ˆ&lt;span&gt;TP99&lt;/span&gt;ï¼‰é™ä½äº† 96%ã€‚æˆ‘ä»¬å°†è¿™ä¸€ç´¢å¼•èƒ½åŠ›å¼€å‘æˆäº†ä¸€æ¬¾é€šç”¨æ’ä»¶é›†æˆåˆ° Elasticsearch ä¸­ï¼Œä½¿å¾— Elasticsearch çš„æ£€ç´¢é“¾è·¯æ—¶å»¶ï¼ˆ&lt;/span&gt;&lt;span&gt;TP99&lt;/span&gt;&lt;span&gt;ï¼‰é™ä½äº† 84%ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;2. èƒŒæ™¯&lt;/span&gt;&lt;/h2&gt;&lt;section&gt;&lt;span&gt;å½“å‰ï¼Œå¤–å–æœç´¢ä¸šåŠ¡æ£€ç´¢å¼•æ“ä¸»è¦ä¸º Elasticsearchï¼Œå…¶ä¸šåŠ¡ç‰¹ç‚¹æ˜¯å…·æœ‰è¾ƒå¼ºçš„ Location Based Serviceï¼ˆ&lt;/span&gt;&lt;span&gt;LBS&lt;/span&gt;&lt;span&gt;ï¼‰ ä¾èµ–ï¼Œå³ç”¨æˆ·æ‰€èƒ½ç‚¹é¤çš„å•†å®¶ï¼Œæ˜¯ç”±å•†å®¶é…é€èŒƒå›´å†³å®šçš„ã€‚å¯¹äºæ¯ä¸€ä¸ªå•†å®¶çš„é…é€èŒƒå›´ï¼Œå¤§å¤šé‡‡ç”¨å¤šç»„ç”µå­å›´æ è¿›è¡Œé…é€è·ç¦»çš„åœˆå®šï¼Œä¸€ä¸ªå•†å®¶å­˜åœ¨å¤šç»„ç”µå­å›´æ ï¼Œå¹¶ä¸”éšç€ä¸šåŠ¡çš„å˜åŒ–ä¼šåŠ¨æ€é€‰æ‹©ä¸åŒçš„é…é€èŒƒå›´ï¼Œç”µå­å›´æ ç¤ºæ„å›¾å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.559375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/hEx03cFgUsUUbRV1cVqTqicZlOle4Eia62LsicdBHKPHDaU80G8t05oZu5OZMibyaFyskj7CPUnAa0kTNtViafib2VnQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;figcaption&gt;&lt;span&gt;å›¾1 ç”µå­å›´æ ç¤ºæ„å›¾&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;è€ƒè™‘åˆ°å•†å®¶é…é€åŒºåŸŸåŠ¨æ€å˜æ›´å¸¦æ¥çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨ Geo Polygon&lt;sup&gt;[2]&lt;/sup&gt; çš„æ–¹å¼è¿›è¡Œæ£€ç´¢ï¼Œè€Œæ˜¯é€šè¿‡ä¸Šæ¸¸ä¸€ç»„ R-tree æœåŠ¡åˆ¤å®šå¯é…é€çš„å•†å®¶åˆ—è¡¨æ¥è¿›è¡Œå¤–å–æœç´¢ã€‚å› æ­¤ï¼ŒLBS åœºæ™¯ä¸‹çš„ä¸€æ¬¡å•†å“æ£€ç´¢ï¼Œå¯ä»¥è½¬åŒ–ä¸ºå¦‚ä¸‹çš„ä¸€æ¬¡ Elasticsearch æœç´¢è¯·æ±‚ï¼š&lt;/span&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;POSTÂ food/_search&lt;br/&gt;{&lt;br/&gt;Â Â Â &lt;span&gt;&quot;query&quot;&lt;/span&gt;:Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;&quot;bool&quot;&lt;/span&gt;:Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â &lt;span&gt;&quot;must&quot;&lt;/span&gt;:{&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;&quot;term&quot;&lt;/span&gt;:Â {Â &lt;span&gt;&quot;spu_name&quot;&lt;/span&gt;:Â {Â &lt;span&gt;&quot;value&quot;&lt;/span&gt;:Â &lt;span&gt;&quot;çƒ¤é¸­&quot;&lt;/span&gt;}Â }&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//...&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â },&lt;br/&gt;Â Â Â Â Â Â Â Â Â &lt;span&gt;&quot;filter&quot;&lt;/span&gt;:{&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;&quot;terms&quot;&lt;/span&gt;:Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;&quot;wm_poi_id&quot;&lt;/span&gt;:Â [&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;3&lt;/span&gt;,&lt;span&gt;18&lt;/span&gt;,&lt;span&gt;27&lt;/span&gt;,&lt;span&gt;28&lt;/span&gt;,&lt;span&gt;29&lt;/span&gt;,...,&lt;span&gt;37465542&lt;/span&gt;]Â &lt;span&gt;//Â ä¸Šä¸‡&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â }&lt;br/&gt;Â Â Â }&lt;br/&gt;Â Â &lt;span&gt;//...&lt;/span&gt;&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;å¯¹äºä¸€ä¸ªé€šç”¨çš„æ£€ç´¢å¼•æ“è€Œè¨€ï¼ŒTerms æ£€ç´¢éå¸¸é«˜æ•ˆï¼Œå¹³å‡åˆ°æ¯ä¸ªÂ TermÂ æ£€ç´¢ä¸åˆ° 0.001 msã€‚å› æ­¤åœ¨æ—©æœŸæ—¶ï¼Œè¿™ä¸€å¥—æ¶æ„å’Œæ£€ç´¢ DSL å¯ä»¥å¾ˆå¥½åœ°æ”¯æŒç¾å›¢çš„æœç´¢ä¸šåŠ¡â€”â€”è€—æ—¶å’Œèµ„æºå¼€é”€å°šåœ¨æ¥å—èŒƒå›´å†…ã€‚ç„¶è€Œéšç€æ•°æ®å’Œä¾›ç»™çš„å¢é•¿ï¼Œä¸€äº›ä¾›ç»™ä¸°å¯ŒåŒºåŸŸçš„é™„è¿‘å¯é…é€é—¨åº—å¯ä»¥è¾¾åˆ° 20000~30000 å®¶ï¼Œè¿™å¯¼è‡´æ€§èƒ½ä¸èµ„æºé—®é¢˜é€æ¸å‡¸æ˜¾ã€‚è¿™ç§ä¸‡çº§åˆ«çš„ Terms æ£€ç´¢çš„æ€§èƒ½ä¸è€—æ—¶å·²ç„¶æ— æ³•å¿½ç•¥ï¼Œä»…ä»…è¿™ä¸€å¥æ£€ç´¢å°±éœ€è¦ 5~10 msã€‚&lt;/span&gt;&lt;/section&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3. æŒ‘æˆ˜åŠé—®é¢˜&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;ç”±äº Elasticsearch åœ¨è®¾è®¡ä¸Šé’ˆå¯¹æµ·é‡çš„ç´¢å¼•æ•°æ®è¿›è¡Œä¼˜åŒ–ï¼Œåœ¨è¿‡å»çš„ 10 å¹´é—´ï¼Œé€æ­¥å»é™¤äº†å†…å­˜æ”¯æŒç´¢å¼•çš„åŠŸèƒ½ï¼ˆ&lt;/span&gt;&lt;span&gt;ä¾‹å¦‚ RAMDirectory çš„åˆ é™¤&lt;/span&gt;&lt;span&gt;ï¼‰ã€‚ä¸ºäº†èƒ½å¤Ÿå®ç°è¶…å¤§è§„æ¨¡å€™é€‰é›†çš„æ£€ç´¢ï¼ŒElasticsearch/Lucene å¯¹ Term å€’æ’é“¾çš„æŸ¥è¯¢æµç¨‹è®¾è®¡äº†ä¸€å¥—å†…å­˜ä¸ç£ç›˜å…±åŒå¤„ç†çš„æ–¹æ¡ˆã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;ä¸€æ¬¡ Terms æ£€ç´¢çš„æµç¨‹åˆ†ä¸ºä¸¤æ­¥ï¼šåˆ†åˆ«æ£€ç´¢å•ä¸ª Term çš„å€’æ’é“¾ï¼Œå¤šä¸ª Term çš„å€’æ’é“¾è¿›è¡Œåˆå¹¶ã€‚&lt;/span&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.1 å€’æ’é“¾æŸ¥è¯¢æµç¨‹&lt;/span&gt;&lt;/h3&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ä»å†…å­˜ä¸­çš„ Term Index ä¸­è·å–è¯¥ Term æ‰€åœ¨çš„ Block åœ¨ç£ç›˜ä¸Šçš„ä½ç½®ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ä»ç£ç›˜ä¸­å°†è¯¥ Block çš„ TermDictionary è¯»å–è¿›å†…å­˜ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å¯¹å€’æ’é“¾å­˜å‚¨æ ¼å¼çš„è¿›è¡Œ Decodeï¼Œç”Ÿæˆå¯ç”¨äºåˆå¹¶çš„å€’æ’é“¾ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;span&gt;å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸€æŸ¥è¯¢æµç¨‹éå¸¸å¤æ‚ä¸”è€—æ—¶ï¼Œä¸”å„ä¸ªé˜¶æ®µçš„å¤æ‚åº¦éƒ½ä¸å®¹å¿½è§†ã€‚æ‰€æœ‰çš„ Term åœ¨ç´¢å¼•ä¸­æœ‰åºå­˜å‚¨ï¼Œé€šè¿‡äºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ°ç›®æ ‡ Termã€‚è¿™ä¸ªæœ‰åºçš„ Term åˆ—è¡¨å°±æ˜¯ TermDictionary ï¼ŒäºŒåˆ†æŸ¥æ‰¾ Term çš„æ—¶é—´å¤æ‚åº¦ä¸º O(logN) ï¼Œå…¶ä¸­ N æ˜¯ Term çš„æ€»æ•°é‡ ã€‚Lucene é‡‡ç”¨ Finite State Transducer&lt;sup&gt;[3]&lt;/sup&gt;ï¼ˆ&lt;/span&gt;&lt;span&gt;FST&lt;/span&gt;&lt;span&gt;ï¼‰å¯¹ TermDictionary è¿›è¡Œç¼–ç æ„å»º Term Indexã€‚FST å¯å¯¹ Term çš„å…¬å…±å‰ç¼€ã€å…¬å…±åç¼€è¿›è¡Œæ‹†åˆ†ä¿å­˜ï¼Œå¤§å¤§å‹ç¼©äº† TermDictionary çš„ä½“ç§¯ï¼Œæé«˜äº†å†…å­˜æ•ˆç‡ï¼ŒFST çš„æ£€ç´¢é€Ÿåº¦æ˜¯ O(len(term))ï¼Œå…¶å¯¹äº M ä¸ª Term çš„æ£€ç´¢å¤æ‚åº¦ä¸º O(M * len(term))ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.2 å€’æ’é“¾åˆå¹¶æµç¨‹&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;&lt;span&gt;åœ¨ç»è¿‡ä¸Šè¿°çš„æŸ¥è¯¢ï¼Œæ£€ç´¢å‡ºæ‰€æœ‰ç›®æ ‡ Term çš„ Posting List åï¼Œéœ€è¦å¯¹è¿™äº› Posting List æ±‚å¹¶é›†ï¼ˆ&lt;/span&gt;&lt;span&gt;OR æ“ä½œ&lt;/span&gt;&lt;span&gt;ï¼‰ã€‚åœ¨ Lucene çš„å¼€æºå®ç°ä¸­ï¼Œå…¶é‡‡ç”¨ Bitset ä½œä¸ºå€’æ’é“¾åˆå¹¶çš„å®¹å™¨ï¼Œç„¶åéå†æ‰€æœ‰å€’æ’é“¾ä¸­çš„æ¯ä¸€ä¸ªæ–‡æ¡£ï¼Œå°†å…¶åŠ å…¥ DocIdSet ä¸­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¼ªä»£ç å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;Input:Â  termsEnum:Â å€’æ’è¡¨ï¼›termIteratorï¼šå€™é€‰çš„term&lt;br/&gt;Output:Â docIdSetÂ :Â &lt;span&gt;final&lt;/span&gt;Â docsÂ set&lt;br/&gt;&lt;span&gt;for&lt;/span&gt;Â termÂ inÂ termIterator:&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â termsEnum.seekExact(term)Â !=Â &lt;span&gt;null&lt;/span&gt;:&lt;br/&gt;Â Â Â Â Â docsÂ =Â read_disk()Â Â &lt;span&gt;//Â ç£ç›˜è¯»å–&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â docsÂ =Â decode(docs)Â &lt;span&gt;//Â å€’æ’é“¾çš„decodeæµç¨‹&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â docÂ inÂ docs:&lt;br/&gt;Â Â Â Â Â Â Â Â docIdSet.or(doc)Â &lt;span&gt;//ä»£ç å®ç°ä¸ºDocIdSetBuilder.addã€‚&lt;/span&gt;&lt;br/&gt;endÂ &lt;span&gt;for&lt;/span&gt;&lt;br/&gt;docIdSet.build()&lt;span&gt;//åˆå¹¶ï¼Œæ’åºï¼Œæœ€ç»ˆç”ŸæˆDocIdSetBuilderï¼Œå¯¹åº”ç«ç„°å›¾æœ€åä¸€æ®µã€‚&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;å‡è®¾æˆ‘ä»¬æœ‰ M ä¸ª Termï¼Œæ¯ä¸ª Term å¯¹åº”å€’æ’é“¾çš„å¹³å‡é•¿åº¦ä¸º Kï¼Œé‚£ä¹ˆåˆå¹¶è¿™ M ä¸ªå€’æ’é“¾çš„æ—¶é—´å¤æ‚åº¦ä¸ºï¼šO(K * M + log(K * M))ã€‚å¯ä»¥çœ‹å‡ºå€’æ’é“¾åˆå¹¶çš„æ—¶é—´å¤æ‚åº¦ä¸ Terms çš„æ•°é‡ M å‘ˆçº¿æ€§ç›¸å…³ã€‚åœ¨æˆ‘ä»¬çš„åœºæ™¯ä¸‹ï¼Œå‡è®¾ä¸€ä¸ªå•†å®¶å¹³å‡æœ‰ä¸€åƒä¸ªå•†å“ï¼Œä¸€æ¬¡æœç´¢è¯·æ±‚éœ€è¦å¯¹ä¸€ä¸‡ä¸ªå•†å®¶è¿›è¡Œæ£€ç´¢ï¼Œé‚£ä¹ˆæœ€ç»ˆéœ€è¦åˆå¹¶ä¸€åƒä¸‡ä¸ªå•†å“ï¼Œå³å¾ªç¯æ‰§è¡Œä¸€åƒä¸‡æ¬¡ï¼Œå¯¼è‡´è¿™ä¸€é—®é¢˜è¢«æ”¾å¤§è‡³æ— æ³•è¢«å¿½ç•¥çš„ç¨‹åº¦ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬ä¹Ÿé’ˆå¯¹å½“å‰çš„ç³»ç»Ÿåšäº†å¤§é‡çš„è°ƒç ”åŠåˆ†æï¼Œé€šè¿‡ç¾å›¢å†…éƒ¨çš„ JVM Profile ç³»ç»Ÿå¾—åˆ° CPU çš„ç«ç„°å›¾ï¼Œå¯ä»¥çœ‹åˆ°è¿™ä¸€æµç¨‹åœ¨ CPU çƒ­ç‚¹å›¾ä¸­çš„åæ˜ ä¹Ÿæ˜¯å¦‚æ­¤ï¼šæ— è®ºæ˜¯æŸ¥è¯¢å€’æ’é“¾ã€è¿˜æ˜¯è¯»å–ã€åˆå¹¶å€’æ’é“¾éƒ½ç›¸å½“æ¶ˆè€—èµ„æºï¼Œå¹¶ä¸”å¯ä»¥é¢„è§çš„æ˜¯ï¼Œåœ¨ä¾›ç»™è¶Šæ¥è¶Šå¤šçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸‰ä¸ªé˜¶æ®µçš„è€—æ—¶è¿˜ä¼šæŒç»­å¢é•¿ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;558&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;158&quot; data-ratio=&quot;0.2825&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/hEx03cFgUsUUbRV1cVqTqicZlOle4Eia62qLr8ayEc3C6wCx9trAokDkgEp7wyp6ldfRWZcmQvmUNCqs05nFaTlw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;800&quot;/&gt;&lt;figcaption&gt;&lt;span&gt;å›¾2 profile ç«ç„°å›¾&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;å¯ä»¥æ˜ç¡®ï¼Œæˆ‘ä»¬éœ€è¦é’ˆå¯¹å€’æ’é“¾æŸ¥è¯¢ã€å€’æ’é“¾åˆå¹¶è¿™ä¸¤ä¸ªé—®é¢˜äºˆä»¥ä¼˜åŒ–ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4. æŠ€æœ¯æ¢ç´¢ä¸å®è·µ&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.1 å€’æ’é“¾æŸ¥è¯¢ä¼˜åŒ–&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;&lt;span&gt;é€šå¸¸æƒ…å†µä¸‹ï¼Œä½¿ç”¨ FST ä½œä¸º Term æ£€ç´¢çš„æ•°æ®ç»“æ„ï¼Œå¯ä»¥åœ¨å†…å­˜å¼€é”€å’Œè®¡ç®—å¼€é”€ä¸Šå–å¾—ä¸€ä¸ªå¾ˆå¥½çš„å¹³è¡¡ï¼ŒåŒæ—¶æ”¯æŒå‰ç¼€æ£€ç´¢ã€æ­£åˆ™æ£€ç´¢ç­‰å¤šç§å¤šæ ·çš„æ£€ç´¢ Queryï¼Œç„¶è€Œåœ¨æˆ‘ä»¬çš„åœºæ™¯ä¹‹ä¸‹ï¼ŒFST å¸¦æ¥çš„è®¡ç®—å¼€é”€æ— æ³•è¢«å¿½è§†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;è€ƒè™‘åˆ°åœ¨å¤–å–æœç´¢åœºæ™¯æœ‰ä»¥ä¸‹å‡ ä¸ªç‰¹æ€§ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Term çš„æ•°æ®ç±»å‹ä¸º long ç±»å‹ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æ— èŒƒå›´æ£€ç´¢ï¼Œå‡ä¸ºå®Œå…¨åŒ¹é…ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æ— å‰ç¼€åŒ¹é…ã€æ¨¡ç³ŠæŸ¥æ‰¾çš„éœ€æ±‚ï¼Œä¸éœ€è¦ä½¿ç”¨å‰ç¼€æ ‘ç›¸å…³çš„ç‰¹æ€§ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å€™é€‰æ•°é‡å¯æ§ï¼Œæ¯ä¸ªå•†å®¶çš„å•†å“æ•°é‡è¾ƒå¤šï¼Œå³ Term è§„æ¨¡å¯é¢„æœŸï¼Œå†…å­˜å¯ä»¥æ‰¿è½½è¿™ä¸ªæ•°é‡çº§çš„æ•°æ®ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;span&gt;å› æ­¤åœ¨æˆ‘ä»¬çš„åº”ç”¨åœºæ™¯ä¸­ä½¿ç”¨ç©ºé—´æ¢å–æ—¶é—´æ˜¯å€¼å¾—çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¯¹äº Term æŸ¥è¯¢çš„çƒ­ç‚¹ï¼šå¯æ›¿æ¢ FST çš„å®ç°ä»¥å‡å°‘ CPU å¼€é”€ï¼Œå¸¸è§çš„æŸ¥æ‰¾æ•°æ®ç»“æ„ä¸­ï¼Œå“ˆå¸Œè¡¨æœ‰ O(1) çš„æŸ¥è¯¢å¤æ‚åº¦ï¼Œå°† Term æŸ¥æ‰¾è½¬å˜ä¸ºå¯¹å“ˆå¸Œè¡¨çš„ä¸€æ¬¡æŸ¥è¯¢ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¯¹äºå“ˆå¸Œè¡¨çš„é€‰å–ï¼Œæˆ‘ä»¬ä¸»è¦é€‰æ‹©äº†å¸¸è§çš„ HashMap å’Œ LongObjectHashMapã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬ä¸»è¦å¯¹æ¯”äº† FSTã€HashMap å’Œ LongObjectHashMapï¼ˆ&lt;/span&gt;&lt;span&gt;å“ˆå¸Œè¡¨çš„ä¸€ç§é«˜æ€§èƒ½å®ç°&lt;/span&gt;&lt;span&gt;ï¼‰çš„ç©ºé—´å’Œæ—¶é—´æ•ˆç‡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;åœ¨å†…å­˜å ç”¨ä¸Š&lt;/strong&gt;ï¼šFST çš„å†…å­˜æ•ˆç‡æä½³ã€‚è€Œ HashMap/LongObjectHashMap éƒ½æœ‰æ˜æ˜¾çš„åŠ£åŠ¿ï¼›&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;åœ¨æŸ¥è¯¢æ—¶é—´ä¸Š&lt;/strong&gt;ï¼šFST çš„æŸ¥è¯¢å¤æ‚åº¦åœ¨ O (len(term))ï¼Œè€Œ Hash/LongObjectHashMap æœ‰ç€ O(1) çš„æŸ¥è¯¢æ€§èƒ½ï¼›&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;æ³¨ï¼šæ£€ç´¢ç±»å‹è™½ç„¶ä¸º Longï¼Œä½†æ˜¯æˆ‘ä»¬å°†åº•å±‚å­˜å‚¨æ ¼å¼è¿›è¡Œäº†è°ƒæ•´ï¼Œæ²¡æœ‰ä½¿ç”¨å¼€æºçš„ BKD Tree å®ç°ï¼Œä½¿ç”¨ FST ç»“æ„ï¼Œä»…ä¸ FST è¿›è¡Œå¯¹æ¯”ã€‚BKD Tree åœ¨å¤§æ‰¹é‡æ•´æ•° terms çš„åœºæ™¯ä¸‹åŠ£åŠ¿æ›´ä¸ºæ˜æ˜¾ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬ä½¿ç”¨åä¸‡ä¸ª &amp;lt;Long, Long&amp;gt; çš„é”®å€¼å¯¹æ¥æ„é€ æ•°æ®ï¼Œå¯¹å…¶ç©ºé—´åŠæ€§èƒ½è¿›è¡Œäº†å¯¹æ¯”ï¼Œç»“æœå¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.3412969283276451&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsUUbRV1cVqTqicZlOle4Eia62ZBx7wKxEpUgQKcW37b8trmdhKZJ7m5LfrNNAu1uRcYc3ibLCApBWgEA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1172&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¯ä»¥çœ‹åˆ°ï¼Œ åœ¨å†…å­˜å ç”¨ä¸Š FST è¦è¿œä¼˜äº LongO&lt;/span&gt;&lt;span&gt;bjectHashMap å’Œ HashMapã€‚&lt;/span&gt;&lt;span&gt;è€Œåœ¨æŸ¥è¯¢é€Ÿåº¦ä¸Š LongObjectHashMap æœ€ä¼˜ã€‚&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº† LongObjectHashMap ä½œä¸ºå€’æ’é“¾æŸ¥è¯¢çš„æ•°æ®ç»“æ„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.2 å€’æ’é“¾åˆå¹¶&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;&lt;span&gt;åŸºäºä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è§£å†³ä¸¤ä¸ªæ˜æ˜¾çš„ CPU çƒ­ç‚¹é—®é¢˜ï¼šå€’æ’é“¾è¯»å– &amp;amp; å€’æ’é“¾åˆå¹¶ã€‚æˆ‘ä»¬éœ€è¦é€‰æ‹©åˆé€‚çš„æ•°æ®ç»“æ„ç¼“å­˜å€’æ’é“¾ï¼Œä¸å†æ‰§è¡Œç£ç›˜ /page cache çš„ IOã€‚æ•°æ®ç»“æ„éœ€è¦å¿…é¡»æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æ”¯æŒæ‰¹é‡ Mergeï¼Œå‡å°‘å€’æ’é“¾ Merge è€—æ—¶ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å†…å­˜å ç”¨å°‘ï¼Œéœ€è¦å¤„ç†åƒä¸‡æ•°é‡çº§çš„å€’æ’é“¾ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;span&gt;åœ¨ç»™å‡ºå…·ä½“çš„è§£å†³æ–¹æ¡ˆä¹‹å‰ï¼Œå…ˆä»‹ç»ä¸€ä¸‹ Lucene å¯¹äºå€’æ’åˆå¹¶çš„åŸç”Ÿå®ç°ã€RoaringBitMapã€Index Sortingã€‚&lt;/span&gt;&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.2.1 åŸç”Ÿå®ç°&lt;/span&gt;&lt;/h4&gt;&lt;p&gt;&lt;span&gt;Luceneåœ¨ä¸åŒåœºæ™¯ä¸Šä½¿ç”¨äº†ä¸åŒçš„å€’æ’æ ¼å¼ï¼Œæé«˜æ•´ä½“çš„æ•ˆç‡ï¼ˆ&lt;/span&gt;&lt;span&gt;ç©ºé—´/æ—¶é—´&lt;/span&gt;&lt;span&gt;ï¼‰ï¼Œé€šè¿‡ç«ç„°å›¾å¯ä»¥å‘ç°ï¼Œåœ¨æˆ‘ä»¬çš„åœºæ™¯ä¸Šï¼ŒTermInSetQuery çš„å€’æ’åˆå¹¶é€»è¾‘å¼€é”€æœ€å¤§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;TermInSetQuery çš„å€’æ’é“¾åˆå¹¶æ“ä½œåˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼šå€’æ’é“¾è¯»å–å’Œåˆå¹¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;1.Â &lt;span&gt;å€’æ’é“¾è¯»å–ï¼š&lt;/span&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;Lucene å€’æ’é“¾å‹ç¼©å­˜å‚¨åœ¨ç´¢å¼•æ–‡ä»¶ä¸­ï¼Œå€’æ’é“¾è¯»å–éœ€è¦å®æ—¶è§£æï¼Œå…¶å¯¹å¤–æš´éœ²çš„ API ä¸ºè¿­ä»£å™¨ç»“æ„ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;2. å€’æ’é“¾åˆå¹¶ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å€’æ’é“¾åˆå¹¶ä¸»è¦ç”± DocIdSetBuilder åˆå¹¶ç”Ÿæˆå€’æ’é“¾ï¼Œå…ˆä½¿ç”¨ç¨€ç–ç»“æ„å­˜å‚¨ Doc IDï¼Œå½“ Â Doc ID ä¸ªæ•°è¶…è¿‡ä¸€å®šé˜ˆå€¼æ—¶ï¼Œå‡çº§åˆ°ç¨ å¯†ç»“æ„ï¼ˆ&lt;/span&gt;&lt;span&gt;FixedBitSet&lt;/span&gt;&lt;span&gt;ï¼‰å­˜å‚¨ï¼Œå®ç°æ–¹å¼å¦‚ä¸‹ï¼ˆ&lt;/span&gt;&lt;span&gt;å¯¹åº”ä»£ç  IntArrayDocIdSet/BitDocIdSet&lt;/span&gt;&lt;span&gt;ï¼‰ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;/&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ç¨€ç–æ•°æ®ï¼šå­˜å‚¨é‡‡ç”¨ List&amp;lt;int[]&amp;gt; array æ–¹å¼å­˜å‚¨ Doc IDï¼Œæœ€ç»ˆç»è¿‡ Merge å’Œæ’åºå½¢æˆä¸€ä¸ªæœ‰åºæ•°ç»„ int[]ï¼Œè€—æ—¶ä¸»è¦é›†ä¸­åœ¨æ•°ç»„ç”³è¯·å’Œæ’åºã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ç¨ å¯†æ•°æ®ï¼šåŸºäº long[] å®ç°çš„ bitmap ç»“æ„ï¼ˆ&lt;/span&gt;&lt;span&gt;FixedBitSet&lt;/span&gt;&lt;span&gt;ï¼‰ï¼Œè€—æ—¶ä¸»è¦é›†ä¸­åœ¨ FixedBitSet çš„æ’å…¥è¿‡ç¨‹ï¼Œç”±äºå€’æ’é“¾éœ€è¦å®æ—¶ Decode ä»¥åŠ FixedBitSet çš„åº•å±‚å®ç°ï¼Œæ— æ³•å®ç°æ‰¹é‡ Mergeï¼Œåªèƒ½å¾ªç¯å•ä¸ª Doc ID æ’å…¥ï¼Œæ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œè€—æ—¶æ˜æ˜¾ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;æˆ‘ä»¬é‡‡ç”¨çº¿ä¸Šæµé‡å’Œæ•°æ®å‹æµ‹å‘ç°è¯¥éƒ¨åˆ†å¹³å‡è€—æ—¶çº¦ 7 msã€‚&lt;/span&gt;&lt;/section&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.2.2 RoaringBitmap&lt;/span&gt;&lt;/h4&gt;&lt;p&gt;&lt;span&gt;å½“å‰ Elasticsearch é€‰æ‹© RoaringBitMap åšä¸º Query Cache çš„åº•å±‚æ•°æ®ç»“æ„ç¼“å­˜å€’æ’é“¾ï¼ŒåŠ å¿«æŸ¥è¯¢é€Ÿç‡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;RoaringBitmap æ˜¯ä¸€ç§å‹ç¼©çš„ä½å›¾ï¼Œç›¸è¾ƒäºå¸¸è§„çš„å‹ç¼©ä½å›¾èƒ½æä¾›æ›´å¥½çš„å‹ç¼©ï¼Œåœ¨ç¨€ç–æ•°æ®çš„åœºæ™¯ä¸‹ç©ºé—´æ›´æœ‰ä¼˜åŠ¿ã€‚ä»¥å­˜æ”¾ Integer ä¸ºä¾‹ï¼ŒRoaring Bitmap ä¼šå¯¹å­˜å…¥çš„æ•°æ®è¿›è¡Œåˆ†æ¡¶ï¼Œæ¯ä¸ªæ¡¶éƒ½æœ‰è‡ªå·±å¯¹åº”çš„ Containerã€‚åœ¨å­˜å…¥ä¸€ä¸ª32ä½çš„æ•´æ•°æ—¶ï¼Œå®ƒä¼šæŠŠæ•´æ•°åˆ’åˆ†ä¸ºé«˜ 16 ä½å’Œä½ 16 ä½ï¼Œå…¶ä¸­é«˜ 16 ä½å†³å®šè¯¥æ•°æ®éœ€è¦è¢«åˆ†è‡³å“ªä¸ªæ¡¶ï¼Œæˆ‘ä»¬åªéœ€è¦å­˜å‚¨è¿™ä¸ªæ•°æ®å‰©ä½™çš„ä½ 16 ä½ï¼Œå°†ä½ 16 ä½å­˜å‚¨åˆ° Container ä¸­ï¼Œè‹¥å½“å‰æ¡¶ä¸å­˜åœ¨æ•°æ®ï¼Œç›´æ¥å­˜å‚¨ null èŠ‚çœç©ºé—´ã€‚RoaringBitmapæœ‰ä¸åŒçš„å®ç°æ–¹å¼ï¼Œä¸‹é¢ä»¥ Lucene å®ç°ï¼ˆ&lt;/span&gt;&lt;span&gt;RoaringDocIdSet&lt;/span&gt;&lt;span&gt;ï¼‰è¿›è¡Œè¯¦ç»†è®²è§£ï¼š&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;å¦‚åŸç†å›¾ä¸­æ‰€ç¤ºï¼ŒRoaringBitmap ä¸­å­˜åœ¨ä¸¤ç§ä¸åŒçš„ Containerï¼šBitmap Container å’Œ Array Containerã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.40078125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/hEx03cFgUsUUbRV1cVqTqicZlOle4Eia62OBbAsNoTicRFa81LjWYaoUV1QwQULQdQJmiahtSCxtHbwibnRwxXg07MA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;figcaption&gt;&lt;span&gt;å›¾3 Elasticsearchä¸­Roaringbitmapçš„ç¤ºæ„å›¾&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;è¿™ä¸¤ç§ Container åˆ†åˆ«å¯¹åº”ä¸åŒçš„æ•°æ®åœºæ™¯â€”â€”è‹¥ä¸€ä¸ª Container ä¸­çš„æ•°æ®é‡å°äº 4096 ä¸ªæ—¶ï¼Œä½¿ç”¨ Array Container æ¥å­˜å‚¨ã€‚å½“ Array Container ä¸­å­˜æ”¾çš„æ•°æ®é‡å¤§äº 4096 æ—¶ï¼ŒRoaring Bitmap ä¼šå°† Array Container è½¬ä¸º Bitmap Containerã€‚å³ Array Container ç”¨äºå­˜æ”¾ç¨€ç–æ•°æ®ï¼Œè€Œ Bitmap Container ç”¨äºå­˜æ”¾ç¨ å¯†æ•°æ®ï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†å……åˆ†åˆ©ç”¨ç©ºé—´ã€‚ä¸‹å›¾ç»™å‡ºäº†éšç€å®¹é‡å¢é•¿ Array Container å’Œ Bitmap Container çš„ç©ºé—´å ç”¨å¯¹æ¯”å›¾ï¼Œå½“å…ƒç´ ä¸ªæ•°è¾¾åˆ° 4096 åï¼ˆ&lt;/span&gt;&lt;span&gt;æ¯ä¸ªå…ƒç´ å ç”¨ 16 bit &lt;/span&gt;&lt;span&gt;ï¼‰ï¼ŒArray Container çš„ç©ºé—´è¦å¤§äº Bitmap Containerã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;å¤‡æ³¨ï¼šRoaring Bitmap å¯å‚è€ƒå®˜æ–¹åšå®¢&lt;sup&gt;[4]&lt;/sup&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.2.3 Index Sorting&lt;/span&gt;&lt;/h4&gt;&lt;p&gt;&lt;span&gt;Elasticsearch ä» 6.0 ç‰ˆæœ¬å¼€å§‹æ”¯æŒ Index Sorting&lt;sup&gt;[5]&lt;/sup&gt; åŠŸèƒ½ï¼Œåœ¨ç´¢å¼•é˜¶æ®µå¯ä»¥é…ç½®å¤šä¸ªå­—æ®µè¿›è¡Œæ’åºï¼Œè°ƒæ•´ç´¢å¼•æ•°æ®ç»„ç»‡æ–¹å¼ï¼Œå¯ä»¥è°ƒæ•´æ–‡æ¡£æ‰€å¯¹åº”çš„ Doc IDã€‚ä»¥ city_idï¼Œpoi_id ä¸ºä¾‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;145&quot; data-ratio=&quot;0.25&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/hEx03cFgUsUUbRV1cVqTqicZlOle4Eia62snxWJ3Y90A38eEnBkribZtbW96ycWBbepV5FTkbo70EFVib2RS5fIOZg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;figcaption&gt;&lt;span&gt;å›¾4 Index Sorting ç¤ºæ„å›¾&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;å¦‚ä¸Šç¤ºä¾‹æ‰€ç¤ºï¼šIndex Sorting ä¼šå°†ç»™å®šçš„æ’åºå­—æ®µï¼ˆ&lt;/span&gt;&lt;span&gt;å¦‚ä¸Šå›¾çš„ city_id å­—æ®µ&lt;/span&gt;&lt;span&gt;ï¼‰çš„æ–‡æ¡£æ’åºåœ¨ä¸€èµ·ï¼Œç›¸åŒæ’åºå€¼çš„æ–‡æ¡£çš„ Doc ID ä¸¥æ ¼è‡ªå¢ï¼Œå¯¹è¯¥å­—æ®µå»ºç«‹å€’æ’ï¼Œé‚£ä¹ˆå…¶å€’æ’é“¾ä¸ºè‡ªå¢æ•°åˆ—ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.3 åŸºäº RLE çš„å€’æ’æ ¼å¼è®¾è®¡&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;&lt;span&gt;åŸºäºä»¥ä¸Šçš„èƒŒæ™¯çŸ¥è¯†ä»¥åŠå½“å‰ Elasticsearch/Lucene çš„è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥æ˜ç¡®ç›®å‰æœ‰ 2 ä¸ªæ”¹é€ ç‚¹éœ€è¦è€ƒè™‘ã€‚&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;åˆé€‚çš„å€’æ’ç»“æ„ï¼Œç”¨äºå­˜å‚¨æ¯ä¸ª Term çš„å€’æ’é“¾ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;åˆé€‚çš„ä¸­é—´ç»“æ„ï¼Œç”¨äºå­˜å‚¨å¤šä¸ª Term åˆå¹¶åçš„å€’æ’é“¾ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;span&gt;å¯¹äºç´¢å¼•å€’æ’æ ¼å¼ PostingsEnumï¼Œæ”¯æŒæ¥å£ä¸ºï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;abstract&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;DocIdSetIterator&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;abstract&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;docID&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;abstract&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;nextDoc&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;Â Â &lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;abstract&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;advance&lt;/span&gt;&lt;span&gt;(&lt;span&gt;int&lt;/span&gt;Â target)&lt;/span&gt;&lt;/span&gt;;&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;å€’æ’ä»…æ”¯æŒå•æ–‡æ¡£å¾ªç¯è°ƒç”¨ï¼Œä¸æ”¯æŒæ‰¹é‡è¯»å–ï¼Œå› æ­¤éœ€è¦ä¸ºå€’æ’å¢åŠ æ‰¹é‡é¡ºåºè¯»å–çš„åŠŸèƒ½ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;å¯¹äºå¤šå€’æ’é“¾çš„åˆå¹¶ï¼Œç”±äºåŸç»“æ„ DocIdSetBuilder çš„å®ç°ä¹Ÿä¸æ”¯æŒæ‰¹é‡å¯¹æ•°æ®è¿›è¡Œåˆå¹¶ï¼Œæˆ‘ä»¬æ¢ç´¢äº†è¯„ä¼°äº† Elasticsearch ç”¨äºç¼“å­˜ Query Cache çš„æ•°æ®ç»“æ„ RoaringBitMapï¼Œç„¶è€Œå…¶å®ç° RoaringDocIdSet ä¹Ÿæ— æ³•æ»¡è¶³æˆ‘ä»¬å¯¹ç¼“å­˜æ•°æ®ç»“æ„ç‰¹æ€§éœ€æ±‚ï¼Œä¸»è¦é—®é¢˜ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;åŸç”Ÿ RoaringDocIdSet åœ¨æ„å»ºæ—¶ï¼Œåªèƒ½æ”¯æŒé€’å¢çš„æ·»åŠ  Doc IDã€‚è€Œåœ¨å®é™…ç”Ÿäº§ä¸­æ¯ä¸€ä¸ªå•†å®¶çš„å•†å“çš„ Doc ID éƒ½æ˜¯ç¦»æ•£çš„ã€‚è¿™å°±é™åˆ¶äº†å…¶ä½¿ç”¨èŒƒå›´ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;åŸç”Ÿ RoaringDocIdSet çš„åº•å±‚å­˜å‚¨ç»“æ„ Bitmap Container å’Œ Array Container å‡ä¸æ”¯æŒæ‰¹é‡åˆå¹¶ï¼Œè¿™å°±æ— æ³•æ»¡è¶³æˆ‘ä»¬å¯¹å€’æ’é“¾åˆå¹¶è¿›è¡Œä¼˜åŒ–çš„éœ€æ±‚ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;span&gt;åœ¨æ˜ç¡®è¿™ä¸ªé—®é¢˜çš„åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘æœ€ç®€å•çš„æ”¹é€ ï¼Œæ”¯æŒç´¢å¼•å€’æ’æ ¼å¼ PostingsEnum çš„æ‰¹é‡è¯»å–ã€‚å¹¶è€ƒè™‘äº†å¦‚ä¸‹å‡ ç§åœºæ™¯ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;åœ¨æ”¯æŒæ‰¹é‡è¯»å–å€’æ’çš„æƒ…å†µä¸‹ï¼Œç›´æ¥ä½¿ç”¨åŸç»“æ„ DocIdSetBuilder è¿›è¡Œæ‰¹é‡çš„åˆå¹¶ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;åœ¨æ”¯æŒæ‰¹é‡è¯»å–å€’æ’çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ RoaringBitMap è¿›è¡Œæ‰¹é‡åˆå¹¶ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;span&gt;ç„¶è€Œæˆ‘ä»¬å‘ç°å³ä½¿å¯¹ bitset è¿›è¡Œåˆ†æ®µåˆå¹¶ï¼Œç›´æ¥å¯¹æ•°æ®æˆæ®µè¿›è¡Œ OR æ“ä½œï¼Œæ•´ä½“å¼€é”€ä¸‹é™å¹¶ä¸æ˜æ˜¾ã€‚å…¶åŸå› ä¸»è¦åœ¨äºï¼šå¯¹äºè¯»å–çš„æ‰¹é‡ç»“æœï¼Œå‡ä¸ºç¨€ç–åˆ†å¸ƒçš„ Doc IDï¼Œä»…å‡å°‘å€’æ’çš„å¾ªç¯è°ƒç”¨æ— æ³•è§£å†³æ€§èƒ½å¼€é”€é—®é¢˜ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é‚£ä¹ˆé—®é¢˜éœ€è¦è½¬åŒ–ä¸ºå¦‚ä½•è§£å†³ Doc ID åˆ†å¸ƒç¨€ç–çš„é—®é¢˜ã€‚åœ¨ä¸Šæ–‡æåŠçš„ Index Sorting å³ä¸€ä¸ªç»ä½³çš„è§£å†³æ–¹æ¡ˆã€‚å¹¶ä¸”ç”±äºä¸šåŠ¡ LBS çš„ç‰¹ç‚¹ï¼Œä¸€æ¬¡æ£€ç´¢çš„å…¨éƒ¨ç»“æœé›†å‡é›†ä¸­åœ¨æŸä¸ªåœ°ç†ä½ç½®é™„è¿‘ï¼Œä»¥åŠæˆ‘ä»¬æ£€ç´¢ä»…é’ˆå¯¹é—¨åº—åˆ—è¡¨ ID çš„ç‰¹æ®Šåœºæ™¯ï¼Œæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©å¯¹åŸå¸‚ IDã€ Geohashã€é—¨åº— ID è¿›è¡Œæ’åºï¼Œä»è€Œè®©ç¨€ç–åˆ†å¸ƒçš„ Doc ID å½¢æˆè¿ç»­åˆ†å¸ƒã€‚åœ¨è¿™æ ·çš„æ’åºè§„åˆ™åº”ç”¨ä¹‹åï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸€ç»„ç»ä½³çš„ç‰¹æ€§ï¼šæ¯ä¸€ä¸ªå•†å®¶æ‰€å¯¹åº”çš„å•†å“ï¼Œå…¶ Doc ID å®Œå…¨è¿ç»­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.3.1 Run-Length Encoding&lt;/span&gt;&lt;/h4&gt;&lt;p&gt;&lt;span&gt;Run-Length Encoding&lt;sup&gt;[3]&lt;/sup&gt;ï¼ˆ&lt;/span&gt;&lt;span&gt;RLE&lt;/span&gt;&lt;span&gt;ï¼‰æŠ€æœ¯è¯ç”Ÿäº50å¹´å‰ï¼Œæœ€æ—©åº”ç”¨äºè¿ç»­çš„æ–‡æœ¬å‹ç¼©åŠå›¾åƒå‹ç¼©ã€‚åœ¨ 2014 å¹´ï¼Œç¬¬ä¸€ä¸ªå¼€æºåœ¨ GitHub çš„ RoaringBitmap è¯ç”Ÿ&lt;sup&gt;[6]&lt;/sup&gt;ï¼Œ2016å¹´ï¼Œåœ¨ RoaringBitMap çš„åŸºç¡€ä¸Šå¢åŠ äº†å¯¹äºè‡ªå¢åºåˆ—çš„ RLE å®ç°&lt;sup&gt;[7]&lt;/sup&gt;ï¼Œå¹¶åº”ç”¨åœ¨ bitmap è¿™ä¸€åœºæ™¯ä¸Šã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨ bitmap è¿™ä¸€åœºæ™¯ä¹‹ä¸‹ï¼Œä¸»è¦é€šè¿‡å‹ç¼©è¿ç»­åŒºé—´çš„ç¨ å¯†æ•°æ®ï¼ŒèŠ‚çœå†…å­˜å¼€é”€ã€‚ä»¥æ•°ç»„ [1, 2, 3, ..., 59, 60, 89, 90, 91, ..., 99, 100] ä¸ºä¾‹ï¼ˆ&lt;/span&gt;&lt;span&gt;å¦‚ä¸‹å›¾ä¸ŠåŠéƒ¨åˆ†&lt;/span&gt;&lt;span&gt;ï¼‰ï¼šä½¿ç”¨ RLE ç¼–ç ä¹‹åå°±å˜ä¸º [1, 60, 89, 12]â€”â€”å½¢å¦‚ [start1, length1, start2, length2, ...] çš„å½¢å¼ï¼Œå…¶ä¸­ç¬¬ä¸€ä½ä¸ºè¿ç»­æ•°å­—çš„èµ·å§‹å€¼ï¼Œç¬¬äºŒä½ä¸ºå…¶é•¿åº¦ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨æ•°ç»„å®Œå…¨è¿ç»­åœºæ™¯ä¸‹ä¸­ï¼Œå¯¹ 32768 ä¸ª id (short) è¿›è¡Œå­˜å‚¨ï¼Œæ•°ç»„å­˜å‚¨éœ€è¦ 64 kBï¼ŒBitmap å­˜å‚¨éœ€è¦ä½¿ç”¨ 4 kBï¼Œè€Œ RLE ç¼–ç åç›´æ¥å­˜å‚¨ä»…éœ€è¦ 4 byteã€‚åœ¨è¿™ä¸€ç‰¹æ€§ä¸‹ï¼Œå¦‚æœå•†å®¶å€’æ’é“¾å®Œå…¨æœ‰åºï¼Œé‚£ä¹ˆå•†å®¶çš„å€’æ’é“¾ï¼Œå¯è¢«å‹ç¼©åˆ°æœ€ä½ä»…éœ€è¦ä¸¤ä¸ªæ•´æ•°å³å¯è¡¨ç¤ºã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å½“ç„¶ RLE å¹¶ä¸é€‚ç”¨æ‰€æœ‰æƒ…å†µï¼Œåœ¨ç›®æ ‡åºåˆ—å®Œå…¨ä¸è¿ç»­çš„åœºæ™¯ä¸‹ï¼Œå¦‚ [1, 3, 5, 7, ... , M]ï¼ŒRLE ç¼–ç å­˜å‚¨éœ€è¦ä½¿ç”¨ 2 * M byteçš„ç©ºé—´ï¼Œæ¯”æ•°ç»„ç›´æ¥å­˜å‚¨çš„ç©ºé—´æ•ˆç‡å·®ä¸€å€ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;ä¸ºäº†å’Œ Elasticsearch çš„å®ç°ä¿æŒä¸€è‡´ï¼Œæˆ‘ä»¬å†³å®šä½¿ç”¨ RoaringBitMap ä½œä¸ºå€’æ’å­˜å‚¨çš„ç»“æ„ï¼Œä»¥åŠä¸­é—´ç»“æœåˆå¹¶çš„æ•°æ®ç»“æ„ã€‚é’ˆå¯¹ RoaringDocIdSet æˆ‘ä»¬è¿›è¡Œäº†å¦‚ä¸‹æ”¹é€ ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.31365313653136534&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsUUbRV1cVqTqicZlOle4Eia62yB1ibiaC2CUS9BCapId5ic0GXd9qz5ujW8ERjP8yxS44NDj6V4xcDJUBw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1084&quot;/&gt;&lt;/p&gt;&lt;figcaption&gt;&lt;span&gt;å›¾5 å€’æ’é“¾Mergeæ–¹å¼çš„æ¼”è¿›&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.3.2 RLE Container çš„å®ç°&lt;/span&gt;&lt;/h4&gt;&lt;p&gt;&lt;span&gt;åœ¨å¯¹å•†å®¶ ID å­—æ®µå¼€å¯ Index Sorting ä¹‹åï¼ŒåŒå•†å®¶çš„å•†å“ ID å·²ç»è¿ç»­åˆ†å¸ƒã€‚é‚£ä¹ˆå¯¹äºå•†å®¶å­—æ®µçš„å€’æ’é“¾å°±æ˜¯ä¸¥æ ¼è‡ªå¢ä¸”æ— ç©ºæ´çš„æ•´æ•°åºåˆ—ã€‚æˆ‘ä»¬é‡‡ç”¨RLEç¼–ç å¯¹å€’æ’é“¾è¿›è¡Œç¼–ç å­˜å‚¨ã€‚ç”±äºå°†å€’æ’é“¾ç¼–ç ä¸º [start1, length1, start2, length2, ...]ï¼Œæ›´ç‰¹æ®Šçš„ï¼Œåœ¨æˆ‘ä»¬åœºæ™¯ä¸‹ï¼Œä¸€ä¸ªå€’æ’é“¾çš„è¡¨ç¤ºä¸º Â [start, length]ï¼ŒRLEç¼–ç åšåˆ°äº†å¯¹å€’æ’é“¾çš„æè‡´å‹ç¼©ï¼Œå‡è®¾å€’æ’é“¾ä¸º [1, 2, ...., 1000]ï¼Œ ç”¨ ArrayContainer å­˜å‚¨ï¼Œå†…å­˜ç©ºé—´å ç”¨ä¸º 16 bit * 100 = 200 Byte, RLE ç¼–ç å­˜å‚¨åªéœ€è¦ 16 bit * 2 = 4 Byteã€‚è€ƒè™‘åˆ°å…·ä½“çš„åœºæ™¯åˆ†å¸ƒï¼Œä»¥åŠå…¶ä»–åœºæ™¯å¯èƒ½å­˜åœ¨å¤šæ®µæœ‰åºå€’æ’çš„æƒ…å†µï¼Œæˆ‘ä»¬æœ€ç»ˆé€‰æ‹©äº† [start1, length1, start2, length2, ...] è¿™æ ·çš„å­˜å‚¨æ ¼å¼ï¼Œä¸” [start, Â start + length] ä¹‹é—´ä¸¤ä¸¤äº’ä¸é‡å ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;å¯¹äºå¤šä¸ªå•†å®¶çš„å€’æ’åˆå¹¶æµç¨‹ï¼Œå¯¹äºè¯¥æ ¼å¼çš„åˆå¹¶ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å¯¹ M ä¸ªå€’æ’é“¾é•¿åº¦ä¸º K è¿›è¡Œå¾ªç¯å¤„ç†ï¼Œè¿™ä¸ªé—®é¢˜è½¬å˜ä¸ºï¼šå¦‚ä½•å¯¹å¤šç»„åˆ†æ®µ [start, length] è¿›è¡Œæ’åºï¼Œå¹¶å°†æ’åºåçš„ç»“æœåˆå¹¶ä¸ºä¸€ä¸ªæ•°ç»„ã€‚é‚£ä¹ˆæˆ‘ä»¬å°†åŸæ—¶é—´å¤æ‚åº¦ä¸º &lt;span&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; role=&quot;img&quot; focusable=&quot;false&quot; viewbox=&quot;0 -750 10570.3 1000&quot; aria-hidden=&quot;true&quot;&gt;&lt;g stroke=&quot;currentColor&quot; fill=&quot;currentColor&quot; stroke-width=&quot;0&quot; transform=&quot;matrix(1 0 0 -1 0 0)&quot;&gt;&lt;g data-mml-node=&quot;math&quot;&gt;&lt;g data-mml-node=&quot;mi&quot;&gt;&lt;path data-c=&quot;4F&quot; d=&quot;M740 435Q740 320 676 213T511 42T304 -22Q207 -22 138 35T51 201Q50 209 50 244Q50 346 98 438T227 601Q351 704 476 704Q514 704 524 703Q621 689 680 617T740 435ZM637 476Q637 565 591 615T476 665Q396 665 322 605Q242 542 200 428T157 216Q157 126 200 73T314 19Q404 19 485 98T608 313Q637 408 637 476Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mo&quot; transform=&quot;translate(763, 0)&quot;&gt;&lt;path data-c=&quot;28&quot; d=&quot;M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(1152, 0)&quot;&gt;&lt;path data-c=&quot;4B&quot; d=&quot;M285 628Q285 635 228 637Q205 637 198 638T191 647Q191 649 193 661Q199 681 203 682Q205 683 214 683H219Q260 681 355 681Q389 681 418 681T463 682T483 682Q500 682 500 674Q500 669 497 660Q496 658 496 654T495 648T493 644T490 641T486 639T479 638T470 637T456 637Q416 636 405 634T387 623L306 305Q307 305 490 449T678 597Q692 611 692 620Q692 635 667 637Q651 637 651 648Q651 650 654 662T659 677Q662 682 676 682Q680 682 711 681T791 680Q814 680 839 681T869 682Q889 682 889 672Q889 650 881 642Q878 637 862 637Q787 632 726 586Q710 576 656 534T556 455L509 418L518 396Q527 374 546 329T581 244Q656 67 661 61Q663 59 666 57Q680 47 717 46H738Q744 38 744 37T741 19Q737 6 731 0H720Q680 3 625 3Q503 3 488 0H478Q472 6 472 9T474 27Q478 40 480 43T491 46H494Q544 46 544 71Q544 75 517 141T485 216L427 354L359 301L291 248L268 155Q245 63 245 58Q245 51 253 49T303 46H334Q340 37 340 35Q340 19 333 5Q328 0 317 0Q314 0 280 1T180 2Q118 2 85 2T49 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mo&quot; transform=&quot;translate(2263.2, 0)&quot;&gt;&lt;path data-c=&quot;2217&quot; d=&quot;M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(2985.4, 0)&quot;&gt;&lt;path data-c=&quot;4D&quot; d=&quot;M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mo&quot; transform=&quot;translate(4258.7, 0)&quot;&gt;&lt;path data-c=&quot;2B&quot; d=&quot;M56 237T56 250T70 270H369V420L370 570Q380 583 389 583Q402 583 409 568V270H707Q722 262 722 250T707 230H409V-68Q401 -82 391 -82H389H387Q375 -82 369 -68V230H70Q56 237 56 250Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(5258.9, 0)&quot;&gt;&lt;path data-c=&quot;6C&quot; d=&quot;M117 59Q117 26 142 26Q179 26 205 131Q211 151 215 152Q217 153 225 153H229Q238 153 241 153T246 151T248 144Q247 138 245 128T234 90T214 43T183 6T137 -11Q101 -11 70 11T38 85Q38 97 39 102L104 360Q167 615 167 623Q167 626 166 628T162 632T157 634T149 635T141 636T132 637T122 637Q112 637 109 637T101 638T95 641T94 647Q94 649 96 661Q101 680 107 682T179 688Q194 689 213 690T243 693T254 694Q266 694 266 686Q266 675 193 386T118 83Q118 81 118 75T117 65V59Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(5556.9, 0)&quot;&gt;&lt;path data-c=&quot;6F&quot; d=&quot;M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(6041.9, 0)&quot;&gt;&lt;path data-c=&quot;67&quot; d=&quot;M311 43Q296 30 267 15T206 0Q143 0 105 45T66 160Q66 265 143 353T314 442Q361 442 401 394L404 398Q406 401 409 404T418 412T431 419T447 422Q461 422 470 413T480 394Q480 379 423 152T363 -80Q345 -134 286 -169T151 -205Q10 -205 10 -137Q10 -111 28 -91T74 -71Q89 -71 102 -80T116 -111Q116 -121 114 -130T107 -144T99 -154T92 -162L90 -164H91Q101 -167 151 -167Q189 -167 211 -155Q234 -144 254 -122T282 -75Q288 -56 298 -13Q311 35 311 43ZM384 328L380 339Q377 350 375 354T369 368T359 382T346 393T328 402T306 405Q262 405 221 352Q191 313 171 233T151 117Q151 38 213 38Q269 38 323 108L331 118L384 328Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mo&quot; transform=&quot;translate(6518.9, 0)&quot;&gt;&lt;path data-c=&quot;28&quot; d=&quot;M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(6907.9, 0)&quot;&gt;&lt;path data-c=&quot;4B&quot; d=&quot;M285 628Q285 635 228 637Q205 637 198 638T191 647Q191 649 193 661Q199 681 203 682Q205 683 214 683H219Q260 681 355 681Q389 681 418 681T463 682T483 682Q500 682 500 674Q500 669 497 660Q496 658 496 654T495 648T493 644T490 641T486 639T479 638T470 637T456 637Q416 636 405 634T387 623L306 305Q307 305 490 449T678 597Q692 611 692 620Q692 635 667 637Q651 637 651 648Q651 650 654 662T659 677Q662 682 676 682Q680 682 711 681T791 680Q814 680 839 681T869 682Q889 682 889 672Q889 650 881 642Q878 637 862 637Q787 632 726 586Q710 576 656 534T556 455L509 418L518 396Q527 374 546 329T581 244Q656 67 661 61Q663 59 666 57Q680 47 717 46H738Q744 38 744 37T741 19Q737 6 731 0H720Q680 3 625 3Q503 3 488 0H478Q472 6 472 9T474 27Q478 40 480 43T491 46H494Q544 46 544 71Q544 75 517 141T485 216L427 354L359 301L291 248L268 155Q245 63 245 58Q245 51 253 49T303 46H334Q340 37 340 35Q340 19 333 5Q328 0 317 0Q314 0 280 1T180 2Q118 2 85 2T49 1Q31 1 31 11Q31 13 34 25Q38 41 42 43T65 46Q92 46 125 49Q139 52 144 61Q147 65 216 339T285 628Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mo&quot; transform=&quot;translate(8019.1, 0)&quot;&gt;&lt;path data-c=&quot;2217&quot; d=&quot;M229 286Q216 420 216 436Q216 454 240 464Q241 464 245 464T251 465Q263 464 273 456T283 436Q283 419 277 356T270 286L328 328Q384 369 389 372T399 375Q412 375 423 365T435 338Q435 325 425 315Q420 312 357 282T289 250L355 219L425 184Q434 175 434 161Q434 146 425 136T401 125Q393 125 383 131T328 171L270 213Q283 79 283 63Q283 53 276 44T250 35Q231 35 224 44T216 63Q216 80 222 143T229 213L171 171Q115 130 110 127Q106 124 100 124Q87 124 76 134T64 161Q64 166 64 169T67 175T72 181T81 188T94 195T113 204T138 215T170 230T210 250L74 315Q65 324 65 338Q65 353 74 363T98 374Q106 374 116 368T171 328L229 286Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mi&quot; transform=&quot;translate(8741.3, 0)&quot;&gt;&lt;path data-c=&quot;4D&quot; d=&quot;M289 629Q289 635 232 637Q208 637 201 638T194 648Q194 649 196 659Q197 662 198 666T199 671T201 676T203 679T207 681T212 683T220 683T232 684Q238 684 262 684T307 683Q386 683 398 683T414 678Q415 674 451 396L487 117L510 154Q534 190 574 254T662 394Q837 673 839 675Q840 676 842 678T846 681L852 683H948Q965 683 988 683T1017 684Q1051 684 1051 673Q1051 668 1048 656T1045 643Q1041 637 1008 637Q968 636 957 634T939 623Q936 618 867 340T797 59Q797 55 798 54T805 50T822 48T855 46H886Q892 37 892 35Q892 19 885 5Q880 0 869 0Q864 0 828 1T736 2Q675 2 644 2T609 1Q592 1 592 11Q592 13 594 25Q598 41 602 43T625 46Q652 46 685 49Q699 52 704 61Q706 65 742 207T813 490T848 631L654 322Q458 10 453 5Q451 4 449 3Q444 0 433 0Q418 0 415 7Q413 11 374 317L335 624L267 354Q200 88 200 79Q206 46 272 46H282Q288 41 289 37T286 19Q282 3 278 1Q274 0 267 0Q265 0 255 0T221 1T157 2Q127 2 95 1T58 0Q43 0 39 2T35 11Q35 13 38 25T43 40Q45 46 65 46Q135 46 154 86Q158 92 223 354T289 629Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mo&quot; transform=&quot;translate(9792.3, 0)&quot;&gt;&lt;path data-c=&quot;29&quot; d=&quot;M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z&quot;/&gt;&lt;/g&gt;&lt;g data-mml-node=&quot;mo&quot; transform=&quot;translate(10181.3, 0)&quot;&gt;&lt;path data-c=&quot;29&quot; d=&quot;M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z&quot;/&gt;&lt;/g&gt;&lt;/g&gt;&lt;/g&gt;&lt;/svg&gt;&lt;/span&gt; çš„åˆå¹¶æµç¨‹ï¼Œæ”¹é€ ä¸ºå¤æ‚åº¦ä¸º O(M * logM) çš„åˆå¹¶æµç¨‹ï¼Œå¤§å¤§é™ä½äº†åˆå¹¶çš„è®¡ç®—è€—æ—¶ï¼Œå‡å°‘äº† CPU çš„æ¶ˆè€—ã€‚&lt;/span&gt;&lt;/section&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.3.3 SparseRoaringDocIdSet å®ç°&lt;/span&gt;&lt;/h4&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬åœ¨ RoaringDocIdSet çš„åŸºç¡€ä¸Šå¢åŠ äº† RLE Container åï¼Œæ€§èƒ½å·²ç»å¾—åˆ°äº†æ˜æ˜¾çš„æå‡ï¼ŒåŠ é€Ÿäº† 50%ï¼Œç„¶è€Œä¾ç„¶ä¸ç¬¦åˆæˆ‘ä»¬çš„é¢„æœŸã€‚æˆ‘ä»¬é€šè¿‡å¯¹å€’æ’é“¾çš„æ•°æ®åˆ†æå‘ç°ï¼šå€’æ’é“¾çš„å¹³å‡é•¿åº¦ä¸å¤§ï¼ŒåŸºæœ¬åœ¨åä¸‡å†…ã€‚ä½†æ˜¯å…¶å–å€¼èŒƒå›´å¹¿ [ 0, Integer.MAX-1 ]ã€‚è¿™äº›ç‰¹å¾è¯´æ˜ï¼Œå¦‚æœä»¥ RoaringDocIdSet æŒ‰é«˜ 16 ä½è¿›è¡Œåˆ†æ¡¶çš„è¯ï¼Œå¤§éƒ¨åˆ†æ•°æ®å°†é›†ä¸­åœ¨å…¶ä¸­è¿ç»­çš„å‡ ä¸ªæ¡¶ä¸­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨ Elasticsearch åœºæ™¯ä¸Šï¼Œç”±äºæ— æ³•é¢„ä¼°æ•°æ®åˆ†å¸ƒï¼ŒRoaringDocIdSet åœ¨ç”³è¯· bucket å®¹å™¨çš„æ•°ç»„æ—¶ï¼Œä¼šæ ¹æ®å½“å‰ Segment ä¸­çš„æœ€å¤§ Doc ID æ¥ç”³è¯·ï¼Œè®¡ç®—å…¬å¼ä¸ºï¼š(maxDoc + (1 &amp;lt;&amp;lt; 16) - Â 1) &amp;gt;&amp;gt;&amp;gt; 16ã€‚è¿™ç§æ–¹å¼å¯ä»¥é¿å…æ¯æ¬¡å‡æŒ‰ç…§ Integer.MAX-1 æ¥åˆ›å»ºå®¹å™¨å¸¦æ¥çš„æ— è°“å¼€é”€ã€‚ç„¶è€Œï¼Œå½“å€’æ’é“¾æ•°é‡åå°‘ä¸”åˆ†å¸ƒé›†ä¸­æ—¶ï¼Œè¿™ç§æ–¹å¼ä¾ç„¶æ— æ³•é¿å…å¤§é‡ bucket è¢«ç©ºç½®çš„ç©ºé—´æµªè´¹ï¼›å¦ä¸€æ–¹é¢ï¼Œåœ¨å¯¹å€’æ’é“¾è¿›è¡Œåˆå¹¶æ—¶ï¼Œè¿™äº›ç©ºç½®çš„ bucket ä¹Ÿä¼šå‚ä¸åˆ°éå†ä¸­ï¼Œå³ä½¿å®ƒè¢«ç½®ä¸ºäº†ç©ºã€‚è¿™å°±åˆé€ æˆäº†æ€§èƒ½ä¸Šçš„æµªè´¹ã€‚æˆ‘ä»¬é€šè¿‡å‹æµ‹è¯„ä¼°è¯å®äº†è¿™ä¸€æ¨ç†ï¼Œå³ç©ºç½®çš„ bucket åœ¨åˆå¹¶æ—¶ä¹Ÿä¼šå ç”¨å¤§é‡çš„ CPU èµ„æºã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é’ˆå¯¹è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬è®¾è®¡äº†ä¸€å¥—ç”¨äºç¨€ç–æ•°æ®çš„æ–¹æ¡ˆï¼Œå®ç°äº† SparseRoaringDocIdSetï¼ŒåŒæ—¶ä¿æŒæ¥å£ä¸ RoaringDocIdSet ä¸€è‡´ï¼Œå¯åœ¨å„åœºæ™¯ä¸‹è¿›è¡Œå¤ç”¨ï¼Œå…¶ç»“æ„å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;section&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;SparseRoaringDocIdSet&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â &lt;span&gt;int&lt;/span&gt;[]Â index;Â Â Â Â Â Â Â &lt;span&gt;//Â è®°å½•æœ‰Â containerÂ çš„Â bucketÂ Index&lt;/span&gt;&lt;br/&gt;Â Â Â Container[]Â denseSets;Â Â &lt;span&gt;//Â è®°å½•ç´§å¯†æ’åˆ—çš„å€’æ’é“¾&lt;/span&gt;&lt;br/&gt;}&lt;/span&gt;&lt;/section&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;ä¿å­˜å€’æ’é“¾çš„è¿‡ç¨‹ä¸ RoaringDocIDSet ä¿æŒä¸€è‡´ï¼Œåœ¨ç¡®è®¤å…·ä½“çš„ Container çš„åˆ†æ¡¶æ—¶ï¼Œæˆ‘ä»¬é¢å¤–ä½¿ç”¨ä¸€ç»„ç´¢å¼•è®°å½•æ‰€æœ‰æœ‰å€¼çš„ bucket çš„ locationã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸‹å›¾æ˜¯ä¸€ç»„åˆ†åˆ«ä½¿ç”¨ RLE based RoaringDocIdSet å’Œ SparseRoaringDocIdSet å¯¹ [846710, 100, 936858, 110] å€’æ’é“¾ï¼ˆ&lt;/span&gt;&lt;span&gt;RLE ç¼–ç &lt;/span&gt;&lt;span&gt;ï¼‰è¿›è¡Œå­˜å‚¨çš„ç¤ºæ„å›¾ï¼š&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;371&quot; data-ratio=&quot;0.6409001956947162&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/hEx03cFgUsUUbRV1cVqTqicZlOle4Eia621wtPzNYRAxICycRiaLDOsdllTDPWtoLErNWgvaSR4OS5lzoiaDIU4k9w/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1022&quot;/&gt;&lt;figcaption&gt;&lt;span&gt;å›¾6 SparseRoaringDocIdSet ç¼–æ’&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;å¯ä»¥çœ‹åˆ°ï¼šåœ¨ SparseRoaringDocIdSet å®ç°ä¸‹ï¼Œæ‰€æœ‰ä¸ä¸ºç©ºçš„ bucket è¢«ç´§å¯†çš„æ’åˆ—åœ¨äº†ä¸€èµ·ï¼Œå¹¶åœ¨ index [] ä¸­è®°å½•äº†å…¶åŸå§‹ bucket çš„ç´¢å¼•ï¼Œè¿™å°±é¿å…äº†å¤§é‡ bucket è¢«ç©ºç½®çš„æƒ…å†µã€‚å¦å¤–ï¼Œåœ¨è¿›è¡Œå€’æ’é“¾çš„åˆå¹¶æ—¶ï¼Œå°±å¯ä»¥ç›´æ¥å¯¹ç´§å¯†æ’åˆ—çš„ denseSet è¿›è¡Œéå†ï¼Œå¹¶ä» index [] è·å¾—å…¶å¯¹åº”çš„åŸå§‹ bucket locationï¼Œè¿™å°±é¿å…äº†å¤§é‡çš„ç©ºç½® bucket åœ¨åˆå¹¶æ—¶å¸¦æ¥çš„æ€§èƒ½æµªè´¹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬åˆ†åˆ«å¯¹ä»¥ä¸‹4ä¸ªåœºæ™¯è¿›è¡Œäº†å‹æµ‹ï¼šåŸç”Ÿçš„ TermInSetQuery å¯¹å€’æ’é“¾çš„åˆå¹¶é€»è¾‘ã€åŸºäº FixedBitSet çš„æ‰¹é‡åˆå¹¶ã€RLE based Â RoaringBitmapã€RLE based Dense RoaringBitmapã€‚å¯¹ 10000 ä¸ªå¹³å‡é•¿åº¦ä¸º 100 çš„å€’æ’é“¾è¿›è¡Œåˆå¹¶å‹æµ‹ï¼Œå‹æµ‹ç»“æœå¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.75&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsUUbRV1cVqTqicZlOle4Eia62sDsh75RiaqpOjYvLcAhic5j6KYWA2JsJfNDjQuBl43zhWqiaO4jpTbeSg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;figcaption&gt;&lt;span&gt;å›¾7 å€’æ’é“¾Mergeæ€§èƒ½æ¯”å¯¹&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬å®ç°çš„ RLE based Dense RoaringBitmapï¼Œç›¸æ¯”å®˜æ–¹çš„åŸºå‡†å®ç°è€—æ—¶é™ä½äº† 96%ï¼ˆ&lt;/span&gt;&lt;span&gt;TP99 13 ms ä¸‹é™è‡³ 0.5 ms&lt;/span&gt;&lt;span&gt;ï¼‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.4 åŠŸèƒ½é›†æˆ&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;&lt;span&gt;è‡³æ­¤ï¼Œæ ¸å¿ƒçš„å€’æ’ç´¢å¼•é—®é¢˜å·²ç»è§£å†³ï¼Œåç»­ä¸»è¦ä¸ºå·¥ç¨‹é—®é¢˜ï¼šå¦‚ä½•åœ¨ Elasticsearch ç³»ç»Ÿä¸­é›†æˆåŸºäº RLE çš„å€’æ’æ ¼å¼ã€‚å¯¹äºé«˜ååé«˜å¹¶å‘çš„Cç«¯åœ¨çº¿åœºæ™¯ï¼Œæˆ‘ä»¬å¸Œæœ›å°½å¯èƒ½ä¿éšœçº¿ä¸Šçš„ç¨³å®šï¼Œå¯¹å¼€æºæ•°æ®æ ¼å¼çš„å…¼å®¹ï¼Œä¿éšœå‰å‘çš„å…¼å®¹ï¼Œåšåˆ°éšæ—¶å¯é™çº§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å·¥ç¨‹éƒ¨åˆ†ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šå€’æ’ç´¢å¼•çš„é›†æˆå’Œåœ¨çº¿æ£€ç´¢é“¾è·¯ã€‚ä»¥ä¸‹ä¸»è¦ä»‹ç»å…¨é‡ç´¢å¼•éƒ¨åˆ†çš„é“¾è·¯è®¾è®¡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.4.1 å€’æ’ç´¢å¼•é›†æˆ&lt;/span&gt;&lt;/h4&gt;&lt;p&gt;&lt;span&gt;å€’æ’ç´¢å¼•æ ¼å¼çš„æ”¹é€ ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œéœ€è¦å®ç°ä¸€å¥— PostingsFormatï¼Œå¹¶å®ç°å¯¹åº”çš„ Readerã€Writerã€‚ä¸ºäº†ä¿è¯å¯¹åŸæœ‰æ£€ç´¢è¯­å¥çš„å…¼å®¹ï¼Œæ”¯æŒå¤šç§åœºæ™¯çš„æ£€ç´¢ï¼Œä»¥åŠä¸ºäº†æœªæ¥èƒ½å¤Ÿæ— ç¼çš„é…åˆ Elasticsearch çš„ç‰ˆæœ¬å‡çº§ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰é€‰æ‹©ç›´æ¥å®ç°ä¸€ç»„æ–°çš„ PostingsFormatï¼Œé¿å…å‡ºç°ä¸å…¼å®¹çš„æƒ…å†µå¯¼è‡´æ— æ³•å‡çº§ç‰ˆæœ¬ã€‚æˆ‘ä»¬é€‰æ‹©äº†åŸºäºç°æœ‰çš„å€’æ’æ ¼å¼ï¼Œåœ¨æœåŠ¡åŠ è½½å‰ååˆå§‹åŒ– RLE å€’æ’ï¼Œå¹¶è€ƒè™‘åˆ°ä¸šåŠ¡åœºæ™¯ï¼Œæˆ‘ä»¬å†³å®šå°† RLE å€’æ’å…¨é‡æ”¾å…¥å†…å­˜ä¸­ï¼Œä»¥è¾¾åˆ°æè‡´çš„æ€§èƒ½ã€‚å…·ä½“çš„è§£å†³æ–¹æ¡ˆä¸ºï¼š&lt;/span&gt;&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ç´¢å¼•åŠ è½½è¿‡ç¨‹ä¸­å¢åŠ ä¸€ç»„ Hookï¼Œç”¨äºè·å–ç°æœ‰çš„ InternalEngineï¼ˆ &lt;/span&gt;&lt;span&gt;Elasticsearchä¸­è´Ÿè´£ç´¢å¼•å¢åˆ æ”¹æŸ¥çš„ä¸»è¦å¯¹è±¡&lt;/span&gt;&lt;span&gt; ï¼‰ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å¯¹æ‰€æœ‰çš„ semgents éå†è¯»å–æ•°æ®ï¼Œè§£æå€’æ’æ•°æ®ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å¯¹æ‰€æœ‰é…ç½®äº† RLE å€’æ’ä¼˜åŒ–çš„å­—æ®µï¼Œç”Ÿæˆ RLE å€’æ’è¡¨ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å°† RLE å€’æ’è¡¨ä¸ segment åšå…³è”ï¼Œä¿è¯åç»­çš„æ£€ç´¢é“¾è·¯ä¸­èƒ½è·å–åˆ°å€’æ’è¡¨ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;span&gt;ä¸ºäº†é¿å…å†…å­˜æ³„æ¼ï¼Œæˆ‘ä»¬ä¹Ÿå°†ç´¢å¼•åˆ é™¤ï¼Œsegment å˜æ›´çš„åœºæ™¯è¿›è¡Œäº†ç›¸åº”çš„å¤„ç†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4.4.2 åœ¨çº¿æ£€ç´¢é“¾è·¯&lt;/span&gt;&lt;/h4&gt;&lt;p&gt;&lt;span&gt;åœ¨çº¿æ£€ç´¢é“¾è·¯ä¹Ÿé‡‡ç”¨äº†æ— ä¾µå…¥å…¼å®¹çš„å®ç°ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€å¥—æ–°çš„æ£€ç´¢è¯­å¥ï¼Œå¹¶ä¸”åœ¨ç´¢å¼•æ—  RLE å€’æ’çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥é™çº§å›åŸç”Ÿçš„æ£€ç´¢ç±»å‹ï¼Œæ›´åŠ å®‰å…¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬åŸºäº Elasticsearch çš„æ’ä»¶æœºåˆ¶ï¼Œç”Ÿæˆä¸€ç»„æ–°çš„ Queryï¼Œå®ç°äº†å…¶ AbstractQueryBuilderï¼Œå®ç°å¯¹ Query çš„è§£æä¸æ”¹å†™ï¼Œå¹¶å°† Query ä¸ RLE å€’æ’è¿›è¡Œå…³è”ï¼Œæˆ‘ä»¬é€šè¿‡æ”¹å†™å…·ä½“çš„æ£€ç´¢å®ç°ï¼Œå°†æ•´ä¸ªé“¾è·¯é›†æˆåˆ° Elasticsearch ä¸­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;5. æ€§èƒ½æ”¶ç›Š&lt;/span&gt;&lt;/h2&gt;&lt;section&gt;&lt;span&gt;å¯¹äº Elasticsearch è€Œè¨€ï¼Œä¸€æ¬¡æ£€ç´¢åˆ†ä¸ºè¿™ä¹ˆå‡ ä¸ªé˜¶æ®µï¼Œå¯å‚è€ƒä¸‹å›¾&lt;sup&gt;[8]&lt;/sup&gt;ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.4493333333333333&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/hEx03cFgUsUUbRV1cVqTqicZlOle4Eia62J8qqJ06WzMicBIOWdcsmLSVWY7WLX7dbRdrULmWkqtJORMLWIia2OraA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;750&quot;/&gt;&lt;/p&gt;&lt;figcaption&gt;&lt;span&gt;å›¾8 Elasticsearchçš„æ£€ç´¢è¿‡ç¨‹&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ç”±åè°ƒèŠ‚ç‚¹è¿›è¡Œè¯·æ±‚çš„åˆ†å‘ï¼Œå‘é€åˆ°å„ä¸ªæ£€ç´¢èŠ‚ç‚¹ä¸Šã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æ¯ä¸ªæ•°æ®èŠ‚ç‚¹çš„å„è‡ªè¿›è¡Œæ£€ç´¢ï¼Œå¹¶è¿”å›æ£€ç´¢ç»“æœç»™åè°ƒèŠ‚ç‚¹ï¼Œè¿™ä¸€æ®µå„ä¸ªæ•°æ®èŠ‚ç‚¹çš„è€—æ—¶å³â€œæ•°æ®èŠ‚ç‚¹æŸ¥è¯¢è€—æ—¶â€ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;åè°ƒèŠ‚ç‚¹ç­‰å¾…æ‰€æœ‰æ•°æ®èŠ‚ç‚¹çš„è¿”å›ï¼Œåè°ƒèŠ‚ç‚¹é€‰å– Top K åè¿›è¡Œ fetch æ“ä½œã€‚1ï½3 æ­¥çš„å®Œæ•´è€—æ—¶ä¸ºâ€œå®Œæ•´é“¾è·¯æŸ¥è¯¢è€—æ—¶â€ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;section&gt;&lt;span&gt;æˆ‘ä»¬å°†ä¸Šè¿°æ”¹åŠ¨ï¼ˆ&lt;/span&gt;&lt;span&gt;Index Sorting + Dense Roaring Bitmap + RLE&lt;/span&gt;&lt;span&gt;ï¼‰ä¸Šçº¿åˆ°ç”Ÿäº§ç¯å¢ƒçš„å•†å“ç´¢å¼•åï¼Œæ€§èƒ½å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.75&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsUUbRV1cVqTqicZlOle4Eia62TocrcljQGkAyDhT73VI5WR1TdMtWaA1wtppJMiad1997LhF3KvTqabQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;figcaption&gt;&lt;span&gt;å›¾9 æ•°æ®èŠ‚ç‚¹æŸ¥è¯¢è€—æ—¶&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;561&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;421&quot; data-ratio=&quot;0.75&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsUUbRV1cVqTqicZlOle4Eia62nUI4zzFvVYI5SeRzDNGvsPhzP1J1XqjXnU8oWVibSkHM4cTmtGp0rUg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;figcaption&gt;&lt;span&gt;å›¾10 å®Œæ•´é“¾è·¯æŸ¥è¯¢è€—æ—¶&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;è‡³æ­¤ï¼Œæˆ‘ä»¬æˆåŠŸå°†å…¨é“¾è·¯çš„æ£€ç´¢æ—¶å»¶ï¼ˆ&lt;/span&gt;&lt;span&gt;TP99&lt;/span&gt;&lt;span&gt;ï¼‰é™ä½äº† 84%ï¼ˆ&lt;/span&gt;&lt;span&gt;100 ms ä¸‹é™è‡³ 16 ms&lt;/span&gt;&lt;span&gt;ï¼‰ï¼Œè§£å†³äº†å¤–å–æœç´¢çš„æ£€ç´¢è€—æ—¶é—®é¢˜ï¼Œå¹¶ä¸”çº¿ä¸ŠæœåŠ¡çš„ CPU ä¹Ÿå¤§å¤§é™ä½ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;6. æ€»ç»“ä¸å±•æœ›&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;æœ¬æ–‡ä¸»è¦é’ˆå¯¹æœç´¢ä¸šåŠ¡åœºæ™¯ä¸­é‡åˆ°çš„é—®é¢˜ï¼Œè¿›è¡Œé—®é¢˜åˆ†æã€æŠ€æœ¯é€‰å‹ã€å‹æµ‹ã€é€‰æ‹©åˆé€‚çš„è§£å†³æ–¹æ¡ˆã€é›†æˆã€ç°åº¦éªŒè¯ã€‚æˆ‘ä»¬æœ€ç»ˆå®ç°äº†ä¸€å¥—åŸºäº RLE å€’æ’æ ¼å¼ï¼Œä½œä¸ºä¸€ç§æ–°å‹çš„å€’æ’æ ¼å¼ï¼Œå½»åº•è§£å†³äº†è¿™ä¸ªåœºæ™¯ä¸Šçš„æ€§èƒ½ç“¶é¢ˆï¼Œä»åˆ†æè‡³ä¸Šçº¿çš„æµç¨‹é•¿è¾¾æ•°æœˆã€‚æœ¬æ–‡å¸Œæœ›èƒ½æä¾›ä¸€ä¸ªæ€è·¯ï¼Œè®©å…¶ä»–åŒå­¦åœ¨é‡åˆ° Elasticsearch ç›¸å…³çš„æ€§èƒ½é—®é¢˜æ—¶ï¼Œä¹Ÿèƒ½éµå¾ªç›¸åŒçš„è·¯å¾„ï¼Œè§£å†³ä¸šåŠ¡ä¸Šçš„é—®é¢˜ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸€èˆ¬çš„ï¼Œæˆ‘ä»¬åˆ†æé—®é¢˜å¯ä»¥éµå¾ªè¿™æ ·çš„è·¯å¾„ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æ˜ç¡®æ€§èƒ½é—®é¢˜åï¼Œé¦–å…ˆé€šè¿‡æµé‡å½•åˆ¶ï¼Œè·å¾—ä¸€ä¸ªç”¨äºåç»­åŸºå‡†å‹æµ‹çš„æµ‹è¯•é›†åˆã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é€šè¿‡ç›¸å…³çš„æ€§èƒ½åˆ†æå·¥å…·ï¼Œå…ˆæ˜ç¡®æ˜¯å¦å­˜åœ¨ CPU çš„çƒ­ç‚¹æˆ– IO é—®é¢˜ï¼Œå¯¹äº Java æŠ€æœ¯æ ˆï¼Œæœ‰å¾ˆå¤šå¸¸è§çš„å¯ç”¨äºåˆ†ææ€§èƒ½çš„å·¥å…·ï¼Œç¾å›¢å†…éƒ¨æœ‰ Scaple åˆ†æå·¥å…·ï¼Œå¤–éƒ¨å¯ä»¥ä½¿ç”¨ JProfilerã€Java Flight Recorderã€Async Profilerã€Arthasã€perf è¿™äº›å·¥å…·ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;å¯¹åˆ†æç«ç„°å›¾è¿›è¡Œåˆ†æï¼Œé…åˆæºä»£ç ï¼Œè¿›è¡Œæ•°æ®åˆ†æå’ŒéªŒè¯ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æ­¤å¤–åœ¨ Elasticsearch ä¸­è¿˜å¯ä»¥é€šè¿‡ Kibana çš„ Search Profiler ç”¨äºååŠ©å®šä½é—®é¢˜ã€‚åœ¨å½•åˆ¶å¤§é‡çš„æµé‡ï¼ŒæŠ½æ ·åˆ†æåï¼Œä»¥æˆ‘ä»¬çš„åœºæ™¯ä¸ºä¾‹ï¼Œè¿›è¡Œ Profiler åå¯ä»¥æ˜ç¡® TermInSetQuery å ç”¨äº†ä¸€åŠä»¥ä¸Šçš„è€—æ—¶ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;æ˜ç¡®é—®é¢˜åä»ç´¢å¼•ã€æ£€ç´¢é“¾è·¯ä¸¤ä¾§è¿›è¡Œåˆ†æï¼Œè¯„ä¼°é—®é¢˜ï¼Œè¿›è¡Œå¤šç§è§£å†³æ–¹æ¡ˆçš„è®¾è®¡ä¸å°è¯•ï¼Œé€šè¿‡ Java Microbenchmark Harnessï¼ˆ&lt;/span&gt;&lt;span&gt;JMH&lt;/span&gt;&lt;span&gt;ï¼‰ä»£ç åŸºå‡†æµ‹è¯•å·¥å…·ï¼ŒéªŒè¯è§£å†³æ–¹æ¡ˆçš„æœ‰æ•ˆæ€§ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é›†æˆéªŒè¯æœ€ç»ˆæ•ˆæœã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;section&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;79&quot; data-ratio=&quot;0.13565022421524664&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsUUbRV1cVqTqicZlOle4Eia62jmEZxaSZ6eqUyV8yfdxe8R23VjADKU583ZLOLnwuAotbAKjntFZTcw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1784&quot;/&gt;&lt;figcaption&gt;&lt;span&gt;å›¾11 Kibanaä¸­çš„Search Profilerç¤ºä¾‹&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬æœ€ç»ˆå®ç°çš„å…³é”®ç‚¹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;ä½¿ç”¨å“ˆå¸Œè¡¨æ¥å®ç°ç´¢å¼• Term çš„ç²¾ç¡®æŸ¥æ‰¾ï¼Œä»¥æ­¤å‡å°‘å€’æ’é“¾çš„æŸ¥è¯¢ä¸è¯»å–çš„æ—¶é—´ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é€‰å– RoaringBitmap ä½œä¸ºå­˜å‚¨å€’æ’é“¾çš„æ•°æ®ç»“æ„ï¼Œå¹¶ä¸ RLE Container ç›¸ç»“åˆï¼Œå®ç°å¯¹å€’æ’é“¾çš„å‹ç¼©å­˜å‚¨ã€‚å½“ç„¶ï¼Œæœ€é‡è¦çš„æ˜¯ï¼ŒRLE ç¼–ç å°†å€’æ’é“¾çš„åˆå¹¶é—®é¢˜è½¬æ¢æˆäº†æ’åºé—®é¢˜ï¼Œå®ç°äº†æ‰¹é‡åˆå¹¶ï¼Œä»è€Œå¤§å¹…åº¦å‡å°‘äº†åˆå¹¶çš„æ€§èƒ½æ¶ˆè€—ã€‚&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;span&gt;å½“ç„¶ï¼Œæˆ‘ä»¬çš„æ–¹æ¡ˆä¹Ÿè¿˜å…·æœ‰ä¸€äº›å¯ä»¥ç»§ç»­æ¢ç´¢ä¼˜åŒ–çš„åœ°æ–¹ã€‚æˆ‘ä»¬è¿›è¡Œå…·ä½“æ–¹æ¡ˆå¼€å‘çš„æ—¶å€™ï¼Œä¸»è¦è€ƒè™‘è§£å†³æˆ‘ä»¬ç‰¹å®šåœºæ™¯çš„é—®é¢˜ï¼Œåšäº†ä¸€äº›å®šåˆ¶åŒ–ï¼Œä»¥å–å¾—æœ€å¤§çš„æ€§èƒ½æ”¶ç›Šã€‚åœ¨ä¸€äº›æ›´é€šç”¨çš„åœºæ™¯ä¸Šï¼Œä¹Ÿå¯ä»¥é€šè¿‡ RLE å€’æ’è·å¾—æ”¶ç›Šï¼Œä¾‹å¦‚æ ¹æ®æ•°æ®çš„åˆ†å¸ƒï¼Œè‡ªåŠ¨é€‰æ‹© bitmap/array/RLE å®¹å™¨ï¼Œæ”¯æŒå€’æ’é“¾é‡å çš„æƒ…å†µä¸‹çš„æ•°æ®åˆå¹¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬åœ¨å‘ç°ä¹Ÿæœ‰è®ºæ–‡ä¸æˆ‘ä»¬çš„æƒ³æ³•ä¸è°‹è€Œåˆï¼Œæœ‰å…´è¶£äº†è§£å¯ä»¥å‚è€ƒå…·ä½“è®ºæ–‡&lt;sup&gt;[9]&lt;/sup&gt;ã€‚å¦å¤–ï¼Œåœ¨å¢é‡ç´¢å¼•åœºæ™¯ä¸‹ï¼Œå¦‚æœå¢é‡ç´¢å¼•çš„å˜æ›´é‡éå¸¸å¤§ï¼Œé‚£ä¹ˆåŠ¿å¿…ä¼šé‡åˆ°é¢‘ç¹æ›´æ–°å†…å­˜ RLE å€’æ’çš„æƒ…å†µï¼Œè¿™å¯¹å†…å­˜å’Œæ€§èƒ½çš„æ¶ˆè€—éƒ½ä¸å°ï¼ŒåŸºäºæ€§èƒ½çš„è€ƒé‡ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å°† RLE å€’æ’ç´¢å¼•çš„ç»“æ„å›ºåŒ–åˆ°æ–‡ä»¶ä¸­ï¼Œå³åœ¨å†™ç´¢å¼•æ—¶å°±å®Œæˆå¯¹å€’æ’é“¾çš„ç¼–ç ï¼Œè¿™æ ·å°±èƒ½é¿å…è¿™ä¸€é—®é¢˜ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;7. ä½œè€…ç®€ä»‹&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;æ³½é’°ã€å¼ èªã€æ™“é¹ç­‰ï¼Œå‡æ¥è‡ªç¾å›¢åˆ°å®¶äº‹ä¸šç¾¤/æœç´¢æ¨èæŠ€æœ¯éƒ¨-æœç´¢å·¥ç¨‹å›¢é˜Ÿã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;8. å‚è€ƒæ–‡çŒ®&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;[1] https://en.wikipedia.org/wiki/Run-length_encoding&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;[2] https://www.elastic.co/guide/en/elasticsearch/reference/7.10/query-dsl-geo-polygon-query.html&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;[3] https://en.wikipedia.org/wiki/Finite-state_transducer&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;[4] Frame of Reference and Roaring Bitmaps&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;[5] https://www.elastic.co/cn/blog/index-sorting-elasticsearch-6-0&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;[6] Chambi S, Lemire D, Kaser O, et al. Better bitmap performance with roaring bitmaps[J]. Software: practice and experience, 2016, 46(5): 709-719.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;[7] Lemire D, Ssiâ€Yanâ€Kai G, Kaser O. Consistently faster and smaller compressed bitmaps with roaring[J]. Software: Practice and Experience, 2016, 46(11): 1547-1569.&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;[8] æ£€ç´¢ä¸¤é˜¶æ®µæµç¨‹ï¼šhttps://www.elastic.co/guide/cn/elasticsearch/guide/current/_fetch_phase.html#_fetch_phase&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;[9] Arroyuelo D, GonzÃ¡lez S, OyarzÃºn M, et al. Document identifier reassignment and run-length-compressed inverted indexes for improved search performance[C]//Proceedings of the 36th international ACM SIGIR conference on Research and development in information retrieval. 2013: 173-182.&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;----------Â  ENDÂ  ----------&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;ä¹Ÿè®¸ä½ è¿˜æƒ³çœ‹&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Â  |Â &lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651770506&amp;amp;idx=2&amp;amp;sn=53df7e69852b53b8e9a78704250a3f59&amp;amp;chksm=bd1217c78a659ed1fe25caf2f387dd5adf7543c0d18aa9404a68dedc4393d3f75bdbc08d0097&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ç¾å›¢æœç´¢ç²—æ’ä¼˜åŒ–çš„æ¢ç´¢ä¸å®è·µ&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;/&gt;&lt;/strong&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651770506&amp;amp;idx=2&amp;amp;sn=53df7e69852b53b8e9a78704250a3f59&amp;amp;chksm=bd1217c78a659ed1fe25caf2f387dd5adf7543c0d18aa9404a68dedc4393d3f75bdbc08d0097&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ç¾å›¢æœç´¢ç²—æ’ä¼˜åŒ–çš„æ¢ç´¢ä¸å®è·µ&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;ç¾å›¢æœç´¢ç²—æ’ä¼˜åŒ–çš„æ¢ç´¢ä¸å®è·µ&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;Â  |&lt;/strong&gt;&lt;/span&gt;Â &lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651769715&amp;amp;idx=2&amp;amp;sn=2d6c3eb9d9646374b5f789fcf4282794&amp;amp;chksm=bd12123e8a659b2841fd12d873d3f7087f300b3bf8b6cbd9136728fc1231655eb573cf97f4e0&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;å¤§ä¼—ç‚¹è¯„æœç´¢ç›¸å…³æ€§æŠ€æœ¯æ¢ç´¢ä¸å®è·µ&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;å¤§ä¼—ç‚¹è¯„æœç´¢ç›¸å…³æ€§æŠ€æœ¯æ¢ç´¢ä¸å®è·µ&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;Â  |&lt;/strong&gt;Â &lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765674&amp;amp;idx=1&amp;amp;sn=55f3a13f9b2ecc1b0c28a76e76b35727&amp;amp;chksm=bd1262e78a65ebf12783a6b593cef4f8fe0a5b1f41eac019ce707ff01cc9c307e6febcefc634&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ç¾å›¢æœç´¢å¤šä¸šåŠ¡å•†å“æ’åºæ¢ç´¢ä¸å®è·µ&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;ç¾å›¢æœç´¢å¤šä¸šåŠ¡å•†å“æ’åºæ¢ç´¢ä¸å®è·µ&lt;/a&gt;&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;é˜…è¯»æ›´å¤š&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;section&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765958&amp;amp;idx=1&amp;amp;sn=8201546812e5a95a2bee9dffc6d12f00&amp;amp;chksm=bd12658b8a65ec9de2f5be1e96796dfb3c8f1a374d4b7bd91266072f557caf8118d4ddb72b07&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;å‰â€ç«¯&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;å‰ç«¯&lt;/a&gt;&lt;span&gt;&lt;strong&gt;Â |&lt;/strong&gt;&lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;https://t.1yb.co/jo7v&quot; textvalue=&quot;Â å®‰å…¨&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;strong&gt;Â &lt;/strong&gt;Â &lt;/a&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765981&amp;amp;idx=1&amp;amp;sn=c2dd86f15dee2cbbc89e27677d985060&amp;amp;chksm=bd1265908a65ec86d4d08f7600d1518b61c90f6453074f9b308c96861c045712280a73751c73&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ç®—â€æ³•&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;ç®—æ³•&lt;/a&gt;&lt;span&gt;&lt;strong&gt;Â |&lt;/strong&gt;Â &lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765982&amp;amp;idx=1&amp;amp;sn=231b41f653ac7959f3e3b8213dcec2b0&amp;amp;chksm=bd1265938a65ec85630c546169444d56377bc2f11401d251da7ca50e5d07e353aa01580c7216&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;åâ€ç«¯&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;åç«¯&lt;/a&gt;&lt;span&gt;&lt;strong&gt;Â |Â &lt;/strong&gt;&lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765964&amp;amp;idx=1&amp;amp;sn=ab6d8db147234fe57f27dd46eec40fef&amp;amp;chksm=bd1265818a65ec9749246dd1a2eb3bf7798772cc4d5b4283b15eae2f80bc6db63a1471a9e61e&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;æ•°â€æ®&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;æ•°æ®&lt;/a&gt;&lt;/section&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765965&amp;amp;idx=1&amp;amp;sn=37e0c56c8b080146ce5249243bfd84d8&amp;amp;chksm=bd1265808a65ec96d3a2b2c87c6e27c910d49cb6b149970fb2db8bf88045a0a85fed2e6a0b84&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;å®‰â€å…¨&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;å®‰å…¨&lt;/a&gt;&lt;span&gt;&lt;strong&gt;Â |Â &lt;/strong&gt;&lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765972&amp;amp;idx=1&amp;amp;sn=afe02ec92762c1ce18740d03324c4ac3&amp;amp;chksm=bd1265998a65ec8f10d5f58d0f3681ddfc5325137218e568e1cda3a50e427749edb5c6a7dcf5&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;Andâ€roid&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;Android&lt;/a&gt;&lt;span&gt;&lt;strong&gt;Â |&lt;/strong&gt;Â &lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765973&amp;amp;idx=1&amp;amp;sn=32a23bf1d278dda0398f993ab60a697e&amp;amp;chksm=bd1265988a65ec8e630ef4d24b4946ab6bd7e66702c1d712481cf3c471468a059c470a14c30d&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;iOâ€S&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;iOS&lt;/a&gt;&lt;span&gt;Â &lt;strong&gt;Â |&lt;/strong&gt;Â &lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765963&amp;amp;idx=1&amp;amp;sn=a3de9ef267d07d94118c1611776a4b28&amp;amp;chksm=bd1265868a65ec906592d25ad65f2a8516338d07ec3217059e6975fc131fc0107d66a8cd2612&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;è¿â€ç»´&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;è¿ç»´&lt;/a&gt;&lt;span&gt;&lt;strong&gt;Â |Â &lt;/strong&gt;&lt;/span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NjQ5MTI5OA==&amp;amp;mid=2651765974&amp;amp;idx=1&amp;amp;sn=763c1e37d04acffd0142a2852ecfb000&amp;amp;chksm=bd12659b8a65ec8dfcfeb2028ef287fae7c38f134a665375ba420556ce5d2e4cf398147bd12e&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;æµ‹â€è¯•&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; tab=&quot;outerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;æµ‹è¯•&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mp-common-profile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MjM5NjQ5MTI5OA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/hEx03cFgUsVGibnsaEib3aNlqF0tOrA2RGEmNSbia2nnohE4Tpf95UyTiaSjDVbHRfY8WNBeTuLLTaVdSckkNyEx1Q/0?wx_fmt=png&quot; data-nickname=&quot;ç¾å›¢æŠ€æœ¯å›¢é˜Ÿ&quot; data-alias=&quot;meituantech&quot; data-signature=&quot;10000+å·¥ç¨‹å¸ˆï¼Œå¦‚ä½•æ”¯æ’‘ä¸­å›½é¢†å…ˆçš„ç”Ÿæ´»æœåŠ¡ç”µå­å•†åŠ¡å¹³å°ï¼Ÿæ•°äº¿æ¶ˆè´¹è€…ã€æ•°ç™¾ä¸‡å•†æˆ·ã€2000å¤šä¸ªè¡Œä¸šã€å‡ åƒäº¿äº¤æ˜“é¢èƒŒåæ˜¯å“ªäº›æŠ€æœ¯åœ¨æ”¯æ’‘ï¼Ÿè¿™é‡Œæ˜¯ç¾å›¢ã€å¤§ä¼—ç‚¹è¯„ã€ç¾å›¢å¤–å–ã€ç¾å›¢é…é€ã€ç¾å›¢ä¼˜é€‰ç­‰æŠ€æœ¯å›¢é˜Ÿçš„å¯¹å¤–çª—å£ã€‚&quot; data-from=&quot;0&quot; data-is_biz_ban=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;mp-style-type data-value=&quot;3&quot;/&gt;&lt;/p&gt;&lt;/div&gt;

          
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>15b2f42c98f29d6c81386cee74e95ba6</guid>
<title>JUnit 5 å•å…ƒæµ‹è¯•æ•™ç¨‹</title>
<link>https://toutiao.io/k/2xwukbk</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content js_underline_content             autoTypeSetting24psection&amp;#10;            &quot; id=&quot;js_content&quot;&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3054989816700611&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/4lfok2icUkibTYTkBYxAoDWHB6tNqO2UhjvPJwU0yCPBvia7pLTukDCEibHlY2u0A27tzmLWN97leTkNQKhDPX4ofw/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;982&quot; title=&quot;null&quot;/&gt;&lt;figcaption&gt;JUnit5&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éƒ½éœ€è¦æµ‹è¯•è‡ªå·±çš„ä»£ç è¿è¡Œæ˜¯å¦æ­£å¸¸ï¼Œå¯èƒ½å¯¹ä¸€ä¸ªå‡½æ•°è¿›è¡Œç®€å•æµ‹è¯•ï¼Œä¹Ÿå¯èƒ½æ˜¯å¤šä¸ªåŠŸèƒ½çš„ç»„åˆæµ‹è¯•ã€‚ä¸ç®¡ä½¿ç”¨å“ªç§æ–¹å¼ï¼Œéƒ½æ˜¯ä¸ºäº†æ›´å¥½çš„æµ‹è¯•æˆ‘ä»¬çš„ä»£ç æ˜¯å¦å­˜åœ¨é€»è¾‘ç¼ºé™·ã€‚æµ‹è¯•å¯¹äºè½¯ä»¶å¼€å‘æ˜¯éå¸¸å¿…è¦çš„ã€‚&lt;/p&gt;&lt;h2&gt;JUnit 5 ä»‹ç»&lt;/h2&gt;&lt;p&gt;åœ¨ Java ä¸­æ¯”è¾ƒæœ‰åçš„æµ‹è¯•å·¥å…·æ˜¯ JUnit ï¼Œé€šå¸¸æˆ‘ä»¬ä½¿ç”¨ JUnit å¯ä»¥å¯¹ä¸€ä¸ªé€»è¾‘å•å…ƒè¿›è¡Œæµ‹è¯•ï¼Œå› æ­¤ä¹Ÿå«å•å…ƒæµ‹è¯•ã€‚å¤šä¸ªå•å…ƒæµ‹è¯•ç»„åˆæµ‹è¯•ï¼Œå¯ä»¥ç¡®ä¿æˆ‘ä»¬çš„ç¨‹åºç¬¦åˆé¢„æœŸã€‚JUnit å•å…ƒæµ‹è¯•å¯ä»¥åœ¨å¼€å‘é˜¶æ®µå‘ç°é—®é¢˜ï¼Œè®©æˆ‘ä»¬å¯ä»¥æå‰ä¿®å¤ä»£ç ï¼Œå› æ­¤ååˆ†é‡è¦ã€‚&lt;/p&gt;&lt;h3&gt;JUnit 5 å’Œ JUnit&lt;/h3&gt;&lt;p&gt;JUnit æ˜¯ä¸€ä¸ª Java è¯­è¨€çš„å¼€æºæµ‹è¯•æ¡†æ¶ï¼Œä½¿ç”¨ JUnit è®©æˆ‘ä»¬ä½¿ç”¨æ³¨è§£å°±å¯ä»¥è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œå¾ˆæ˜¯æ–¹ä¾¿ã€‚&lt;/p&gt;&lt;p&gt;&lt;strong&gt;JUnit 5 æ˜¯ JUnit çš„å‡çº§ç‰ˆæœ¬&lt;/strong&gt;ï¼ŒJUnit 5 ä½¿ç”¨äº†Â &lt;strong&gt;Java 8 åŠæ›´é«˜ç‰ˆæœ¬çš„ Java è¯­è¨€ç‰¹æ€§&lt;/strong&gt;ï¼Œå¦‚å‡½æ•°ç¼–ç¨‹ï¼Œæµå¼ç¼–ç ç­‰ï¼Œå› æ­¤æ›´åŠ å¼ºå¤§ã€‚JUnit 5 è¿›è¡Œå•å…ƒæµ‹è¯•çš„å¯è¯»æ€§æ›´å¼ºï¼Œç¼–å†™æ›´åŠ å®¹æ˜“ï¼Œä¸”å¯ä»¥è½»æ¾æ‰©å±•ã€‚&lt;/p&gt;&lt;h2&gt;JUnit 5 åŸºæœ¬ç»„ä»¶&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;JUnit 5 = JUnit Platform + JUnit Jupiter + JUnit Vintage&lt;/strong&gt;&lt;/p&gt;&lt;figure&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.399&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/4lfok2icUkibTYTkBYxAoDWHB6tNqO2UhjbVnsclyWllOvlLAO4icmTIZgyNDt4FxlAW3f8K4q8dHIu9W32FEJricA/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1000&quot; title=&quot;null&quot;/&gt;&lt;figcaption&gt;JUnit 5 jupiter ä¾èµ–&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;strong&gt;JUnit Platform&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;JUnit Platform æ˜¯ JUnit çš„åŸºç¡€æ¡†æ¶ï¼Œä½¿ç”¨ JUnit Platform æ‰èƒ½åœ¨ JVM å¯åŠ¨æµ‹è¯•ï¼ŒJUnit Platform è¿˜å®šä¹‰äº†Â &lt;code&gt;TestEngine&lt;/code&gt;Â æµ‹è¯•å¼•æ“ï¼Œæ˜¯JUnit æµ‹è¯•çš„åŸºç¡€ã€‚&lt;/p&gt;&lt;p&gt;&lt;strong&gt;JUnit Jupiter&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;JUnit Jupiter&lt;/strong&gt;Â æä¾›äº†å•å…ƒæµ‹è¯•å¸¸è§çš„æ³¨è§£ä»¥åŠæ‰©å±•æ¥å£ï¼Œæƒ³è¦æ–¹ä¾¿çš„è¿›è¡Œ JUnit å•å…ƒæµ‹è¯•ï¼Œé‚£ä¹ˆ Jupiter æ¨¡å—å°±å¿…ä¸å¯å°‘ã€‚&lt;/p&gt;&lt;p&gt;&lt;strong&gt;JUnit Vintage&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;JUnit Vintage æä¾›äº†å¯¹ JUnit 3 å’Œ JUnit 4 çš„æµ‹è¯•æ”¯æŒã€‚&lt;/p&gt;&lt;h2&gt;JUnit 5 ä¾èµ–&lt;/h2&gt;&lt;p&gt;ä½¿ç”¨æ³¨è§£è¿›è¡Œ JUnit å•å…ƒæµ‹è¯•ï¼Œç›´æ¥å¼•å…¥Â &lt;code&gt;junit-jupiter&lt;/code&gt;å³å¯ã€‚&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;&amp;lt;&lt;span&gt;dependency&lt;/span&gt;&amp;gt;&lt;br/&gt;Â Â Â Â &amp;lt;&lt;span&gt;groupId&lt;/span&gt;&amp;gt;org.junit.jupiter&amp;lt;/&lt;span&gt;groupId&lt;/span&gt;&amp;gt;&lt;br/&gt;Â Â Â Â &amp;lt;&lt;span&gt;artifactId&lt;/span&gt;&amp;gt;junit-jupiter&amp;lt;/&lt;span&gt;artifactId&lt;/span&gt;&amp;gt;&lt;br/&gt;Â Â Â Â Â Â &amp;lt;&lt;span&gt;version&lt;/span&gt;&amp;gt;5.9.1&amp;lt;/&lt;span&gt;version&lt;/span&gt;&amp;gt;&lt;br/&gt;Â Â Â Â &amp;lt;&lt;span&gt;scope&lt;/span&gt;&amp;gt;test&amp;lt;/&lt;span&gt;scope&lt;/span&gt;&amp;gt;&lt;br/&gt;&amp;lt;/&lt;span&gt;dependency&lt;/span&gt;&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2&gt;JUnit 5 å¸¸ç”¨æ³¨è§£&lt;/h2&gt;&lt;h3&gt;@Test&lt;/h3&gt;&lt;p&gt;ä¸ºä¸€ä¸ªÂ &lt;code&gt;public void&lt;/code&gt;Â æ–¹æ³•æ·»åŠ Â &lt;code&gt;@Test&lt;/code&gt;Â æ³¨é‡Šï¼Œå…è®¸æˆ‘ä»¬å¯¹è¿™ä¸ªæ–¹æ³•è¿›è¡Œæµ‹è¯•ã€‚&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.Assertions;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.Test;&lt;br/&gt;&lt;span&gt;/**Â &lt;br/&gt;Â *Â &lt;span&gt;@author&lt;/span&gt;:https://www.wdbyte.comÂ Â &lt;br/&gt;Â **/&lt;/span&gt;&lt;br/&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;JUnitTestIsDog&lt;/span&gt;Â {&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsDog&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;String&lt;/span&gt;Â &lt;span&gt;name&lt;/span&gt;Â =Â &lt;span&gt;&quot;cat&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertEquals(name,Â &lt;span&gt;&quot;dog&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸Šé¢çš„ä»£ç ä¸­ä½¿ç”¨äº†Â &lt;code&gt;Assertions.assertEquals(name, &quot;dog&quot;)&lt;/code&gt;Â æ¥åˆ¤æ–­æ˜¯å¦Â &lt;code&gt;name&lt;/code&gt;Â å˜é‡æ˜¯å¦æ˜¯Â &lt;code&gt;dog&lt;/code&gt;ï¼Œ&lt;code&gt;Assertions&lt;/code&gt;Â æ˜¯Â &lt;code&gt;JUnit&lt;/code&gt;Â æä¾›çš„æ–­è¨€å·¥å…·ï¼Œåé¢ä¼šè¯¦ç»†ä»‹ç»ã€‚&lt;/p&gt;&lt;p&gt;åœ¨Â &lt;code&gt;idea&lt;/code&gt;Â ä¸­è¿è¡Œå¯ä»¥åˆ°çš„é”™è¯¯æ—¥å¿—ï¼Œæç¤ºé¢„æœŸæ˜¯Â &lt;code&gt;dog&lt;/code&gt;ï¼Œå®é™…æ˜¯Â &lt;code&gt;cat&lt;/code&gt;&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;org.opentest4j.AssertionFailedError:Â &lt;br/&gt;ExpectedÂ :cat&lt;br/&gt;ActualÂ Â Â :dog&lt;br/&gt;&amp;lt;ClickÂ toÂ seeÂ difference&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¦‚æœæ˜¯ç¬¦åˆé¢„æœŸçš„ï¼Œé‚£ä¹ˆè¿è¡Œä¼šæ˜¾ç¤ºæ­£ç¡®æ ‡å¿—ã€‚&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsDog2&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;String&lt;/span&gt;Â &lt;span&gt;name&lt;/span&gt;Â =Â &lt;span&gt;&quot;dog&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Assertions.assertEquals(name,Â &lt;span&gt;&quot;dog&quot;&lt;/span&gt;);&lt;br/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;testIsDog2&lt;/code&gt;Â æ–¹æ³•æµ‹è¯•é€šè¿‡ã€‚&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.3194029850746269&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/4lfok2icUkibTYTkBYxAoDWHB6tNqO2UhjaHZQr28B4loibk29aNtC2bg9crOQDqiaXfpKGsYxSCvWIzmR9FYy8J2A/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;670&quot; title=&quot;null&quot;/&gt;&lt;figcaption&gt;JUnit æµ‹è¯•é€šè¿‡&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3&gt;@BeforeAll&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨Â &lt;code&gt;@BeforeAll&lt;/code&gt;Â å¯ä»¥åœ¨å•å…ƒæµ‹è¯•å‰åˆå§‹åŒ–éƒ¨åˆ†ä¿¡æ¯ï¼Œ&lt;code&gt;@BeforeAll&lt;/code&gt;Â åªèƒ½ä½¿ç”¨åœ¨é™æ€æ–¹æ³•ä¸Šï¼Œè¢«æ³¨è§£çš„æ–¹æ³•ä¼šåœ¨æµ‹è¯•å¼€å§‹å‰&lt;strong&gt;è¿è¡Œä¸€æ¬¡&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.Assertions;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.BeforeAll;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.BeforeEach;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.Test;&lt;br/&gt;&lt;span&gt;/**Â &lt;br/&gt;Â *Â &lt;span&gt;@author&lt;/span&gt;:https://www.wdbyte.comÂ Â &lt;br/&gt;Â **/&lt;/span&gt;&lt;br/&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;JUnitBeforeAll&lt;/span&gt;Â {&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@BeforeAll&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;init&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;åˆå§‹åŒ–ï¼Œå‡†å¤‡æµ‹è¯•ä¿¡æ¯&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsDog&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;String&lt;/span&gt;Â &lt;span&gt;name&lt;/span&gt;Â =Â &lt;span&gt;&quot;dog&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertEquals(name,Â &lt;span&gt;&quot;dog&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;isÂ dog&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsCat&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;String&lt;/span&gt;Â &lt;span&gt;name&lt;/span&gt;Â =Â &lt;span&gt;&quot;cat&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertEquals(name,Â &lt;span&gt;&quot;cat&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;isÂ cat&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¼šè¾“å‡ºï¼š&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;åˆå§‹åŒ–ï¼Œå‡†å¤‡æµ‹è¯•ä¿¡æ¯&lt;br/&gt;isÂ cat&lt;br/&gt;isÂ dog&lt;/code&gt;&lt;/pre&gt;&lt;h3&gt;@BeforeEach&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨Â &lt;code&gt;@BeforeEach&lt;/code&gt;Â æ³¨è§£çš„æ–¹æ³•ï¼Œä¼šåœ¨æ¯ä¸€ä¸ªÂ &lt;code&gt;@Test&lt;/code&gt;Â æ³¨è§£çš„æ–¹æ³•è¿è¡Œå‰è¿è¡Œä¸€æ¬¡ã€‚&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;JUnitBeforeAll&lt;/span&gt;Â {&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@BeforeAll&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;init&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;åˆå§‹åŒ–ï¼Œå‡†å¤‡æµ‹è¯•ä¿¡æ¯&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@BeforeEach&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;start&lt;/span&gt;(){&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;å¼€å§‹æµ‹è¯•...&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsDog&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;String&lt;/span&gt;Â &lt;span&gt;name&lt;/span&gt;Â =Â &lt;span&gt;&quot;dog&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertEquals(name,Â &lt;span&gt;&quot;dog&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;isÂ dog&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsCat&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;String&lt;/span&gt;Â &lt;span&gt;name&lt;/span&gt;Â =Â &lt;span&gt;&quot;cat&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertEquals(name,Â &lt;span&gt;&quot;cat&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;isÂ cat&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¼šè¾“å‡ºï¼š&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;åˆå§‹åŒ–ï¼Œå‡†å¤‡æµ‹è¯•ä¿¡æ¯&lt;br/&gt;å¼€å§‹æµ‹è¯•...&lt;br/&gt;isÂ cat&lt;br/&gt;å¼€å§‹æµ‹è¯•...&lt;br/&gt;isÂ dog&lt;/code&gt;&lt;/pre&gt;&lt;h3&gt;@AfterAll&lt;/h3&gt;&lt;p&gt;&lt;code&gt;@AfterAll&lt;/code&gt;Â æ³¨è§£åªèƒ½ä½¿ç”¨åœ¨&lt;strong&gt;é™æ€æ–¹æ³•ä¸Š&lt;/strong&gt;ï¼Œè¢«æ³¨è§£çš„æ–¹æ³•ä¼šåœ¨æ‰€æœ‰å•å…ƒæµ‹è¯•è¿è¡Œå®Œæ¯•åè¿è¡Œä¸€æ¬¡ã€‚&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;JUnitBeforeAll&lt;/span&gt;Â {&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@BeforeAll&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;init&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;åˆå§‹åŒ–ï¼Œå‡†å¤‡æµ‹è¯•ä¿¡æ¯&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@BeforeEach&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;start&lt;/span&gt;(){&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;å¼€å§‹æµ‹è¯•...&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsDog&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â &lt;span&gt;//...&lt;/span&gt;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsCat&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//...&lt;/span&gt;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@AfterAll&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;close&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;ç»“æŸï¼Œå‡†å¤‡é€€å‡ºæµ‹è¯•&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¼šè¾“å‡ºï¼š&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;åˆå§‹åŒ–ï¼Œå‡†å¤‡æµ‹è¯•ä¿¡æ¯&lt;br/&gt;å¼€å§‹æµ‹è¯•...&lt;br/&gt;isÂ cat&lt;br/&gt;å¼€å§‹æµ‹è¯•...&lt;br/&gt;isÂ dog&lt;br/&gt;ç»“æŸï¼Œå‡†å¤‡é€€å‡ºæµ‹è¯•&lt;/code&gt;&lt;/pre&gt;&lt;h3&gt;@AfterEach&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨Â &lt;code&gt;@AfterEach&lt;/code&gt;Â æ³¨è§£çš„æ–¹æ³•ï¼Œä¼šåœ¨&lt;strong&gt;æ¯ä¸€ä¸ª&lt;/strong&gt;Â &lt;code&gt;@Test&lt;/code&gt;Â æ³¨è§£çš„æ–¹æ³•è¿è¡Œ&lt;strong&gt;ç»“æŸå‰è¿è¡Œä¸€æ¬¡&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;JUnitBeforeAll&lt;/span&gt;Â {&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@BeforeAll&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;init&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;åˆå§‹åŒ–ï¼Œå‡†å¤‡æµ‹è¯•ä¿¡æ¯&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@BeforeEach&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;start&lt;/span&gt;(){&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;å¼€å§‹æµ‹è¯•...&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsDog&lt;/span&gt;()Â {Â &lt;span&gt;//...Â }&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsCat&lt;/span&gt;()Â {Â &lt;span&gt;//...Â }&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@AfterEach&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;end&lt;/span&gt;(){&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;æµ‹è¯•å®Œæ¯•...&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@AfterAll&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;close&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;ç»“æŸï¼Œå‡†å¤‡é€€å‡ºæµ‹è¯•&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¼šè¾“å‡ºï¼š&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;åˆå§‹åŒ–ï¼Œå‡†å¤‡æµ‹è¯•ä¿¡æ¯&lt;br/&gt;å¼€å§‹æµ‹è¯•...&lt;br/&gt;isÂ cat&lt;br/&gt;æµ‹è¯•å®Œæ¯•...&lt;br/&gt;å¼€å§‹æµ‹è¯•...&lt;br/&gt;isÂ dog&lt;br/&gt;æµ‹è¯•å®Œæ¯•...&lt;br/&gt;ç»“æŸï¼Œå‡†å¤‡é€€å‡ºæµ‹è¯•&lt;/code&gt;&lt;/pre&gt;&lt;h3&gt;@Disabled&lt;/h3&gt;&lt;p&gt;è¢«Â &lt;code&gt;@Disabled&lt;/code&gt;Â æ³¨è§£çš„æ–¹æ³•ä¸åœ¨å‚ä¸æµ‹è¯•ï¼Œä¸‹é¢å¯¹Â &lt;code&gt;testIsDog&lt;/code&gt;Â æ–¹æ³•æ·»åŠ äº†Â &lt;code&gt;@Disabled&lt;/code&gt;Â æ³¨è§£ã€‚&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;JUnitBeforeAll&lt;/span&gt;Â {&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@BeforeAll&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;init&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;åˆå§‹åŒ–ï¼Œå‡†å¤‡æµ‹è¯•ä¿¡æ¯&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@BeforeEach&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;start&lt;/span&gt;(){&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;å¼€å§‹æµ‹è¯•...&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Disabled(&quot;ç”±äºxxåŸå› ï¼Œå…³é—­Â testIsDogÂ æµ‹è¯•&quot;)&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsDog&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;String&lt;/span&gt;Â &lt;span&gt;name&lt;/span&gt;Â =Â &lt;span&gt;&quot;dog&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertEquals(name,Â &lt;span&gt;&quot;dog&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;isÂ dog&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsCat&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;String&lt;/span&gt;Â &lt;span&gt;name&lt;/span&gt;Â =Â &lt;span&gt;&quot;cat&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertEquals(name,Â &lt;span&gt;&quot;cat&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;isÂ cat&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@AfterEach&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;end&lt;/span&gt;(){&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;æµ‹è¯•å®Œæ¯•...&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@AfterAll&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;close&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;ç»“æŸï¼Œå‡†å¤‡é€€å‡ºæµ‹è¯•&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¼šè¾“å‡ºï¼š&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;åˆå§‹åŒ–ï¼Œå‡†å¤‡æµ‹è¯•ä¿¡æ¯&lt;br/&gt;å¼€å§‹æµ‹è¯•...&lt;br/&gt;isÂ cat&lt;br/&gt;æµ‹è¯•å®Œæ¯•...&lt;br/&gt;&lt;br/&gt;ç”±äºxxåŸå› ï¼Œå…³é—­Â testIsDogÂ æµ‹è¯•&lt;br/&gt;ç»“æŸï¼Œå‡†å¤‡é€€å‡ºæµ‹è¯•&lt;/code&gt;&lt;/pre&gt;&lt;h3&gt;@DisplayName&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨Â &lt;code&gt;@DisplayName&lt;/code&gt;Â æ³¨è§£å¯ä»¥è‡ªå®šä¹‰æµ‹è¯•æ–¹æ³•çš„æ˜¾ç¤ºåç§°ï¼Œä¸‹é¢ä¸ºä¸¤ä¸ªæµ‹è¯•æ–¹æ³•è‡ªå®šä¹‰åç§°ã€‚&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;JUnitBeforeAll&lt;/span&gt;Â {&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@BeforeAll&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;init&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;åˆå§‹åŒ–ï¼Œå‡†å¤‡æµ‹è¯•ä¿¡æ¯&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@BeforeEach&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;start&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;å¼€å§‹æµ‹è¯•...&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@DisplayName(&quot;æ˜¯å¦æ˜¯ç‹—&quot;)&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Disabled&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsDog&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;String&lt;/span&gt;Â &lt;span&gt;name&lt;/span&gt;Â =Â &lt;span&gt;&quot;dog&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertEquals(name,Â &lt;span&gt;&quot;dog&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;isÂ dog&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@DisplayName(&quot;æ˜¯å¦æ˜¯çŒ«&quot;)&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsCat&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;String&lt;/span&gt;Â &lt;span&gt;name&lt;/span&gt;Â =Â &lt;span&gt;&quot;cat&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertEquals(name,Â &lt;span&gt;&quot;cat&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;isÂ cat&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@AfterEach&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;end&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;æµ‹è¯•å®Œæ¯•...&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@AfterAll&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;close&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;ç»“æŸï¼Œå‡†å¤‡é€€å‡ºæµ‹è¯•&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨Â &lt;code&gt;idea&lt;/code&gt;Â ä¸­è¿è¡Œåï¼Œå¯ä»¥çœ‹åˆ°é…ç½®çš„ä¸­æ–‡åç§°ã€‚&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.4656964656964657&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/4lfok2icUkibTYTkBYxAoDWHB6tNqO2UhjZRnfCOWBeljK7xbJdWMK9qjBdDYhUNL4lrNeygPQxGkuvgYqmDqJxA/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;962&quot; title=&quot;null&quot;/&gt;&lt;figcaption&gt;DisplayName&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3&gt;@ParameterizedTest&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨æ³¨è§£Â &lt;code&gt;@ParameterizedTest&lt;/code&gt;Â ç»“åˆÂ &lt;code&gt;@ValueSource&lt;/code&gt;Â ï¼Œå¯ä»¥å¯¹ä¸ç”¨çš„å…¥å‚è¿›è¡Œæµ‹è¯•ã€‚ä¸‹é¢çš„ç¤ºä¾‹ä½¿ç”¨Â &lt;code&gt;@ParameterizedTest&lt;/code&gt;Â æ¥å¼€å§‹å‚æ•°åŒ–å•å…ƒæµ‹è¯•ï¼Œ&lt;code&gt;name&lt;/code&gt;Â å±æ€§ç”¨æ¥å®šä¹‰æµ‹è¯•åç§°ï¼Œ&lt;code&gt;Â @ValueSource&lt;/code&gt;Â åˆ™å®šä¹‰äº†ä¸¤ä¸ªæµ‹è¯•å€¼ã€‚&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.Assertions;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.DisplayName;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.params.ParameterizedTest;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.params.provider.ValueSource;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;JUnitParam&lt;/span&gt;Â {&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@DisplayName(&quot;æ˜¯å¦æ˜¯ç‹—&quot;)&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@ValueSource(stringsÂ =Â {&quot;dog&quot;,Â &quot;cat&quot;})&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@ParameterizedTest(nameÂ =Â &quot;å¼€å§‹æµ‹è¯•å…¥å‚Â {0}Â &quot;)&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsDog&lt;/span&gt;(StringÂ name)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertEquals(name,Â &lt;span&gt;&quot;dog&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¼šè¾“å‡ºï¼š&lt;/p&gt;&lt;figure&gt;&lt;img data-ratio=&quot;0.201&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/4lfok2icUkibTYTkBYxAoDWHB6tNqO2Uhj3QGQYe3h24GG71I5UKibJ0n8v225eIIuTia09XeNNQr1ZADgS2gGxwrQ/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1000&quot; title=&quot;null&quot;/&gt;&lt;figcaption&gt;JUnit å‚æ•°æµ‹è¯•&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3&gt;@Order&lt;/h3&gt;&lt;p&gt;åœ¨ç±»ä¸Šå¢åŠ æ³¨è§£Â &lt;code&gt;@TestMethodOrder&lt;/code&gt;Â ï¼Œç„¶ååœ¨æ–¹æ³•ä¸Šä½¿ç”¨Â &lt;code&gt;@Order&lt;/code&gt;Â æŒ‡å®šé¡ºåºï¼Œæ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼Œå¯ä»¥ä¿è¯æµ‹è¯•æ–¹æ³•è¿è¡Œé¡ºåºã€‚&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.Assertions;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.DisplayName;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.MethodOrderer.OrderAnnotation;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.Order;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.Test;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.TestMethodOrder;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.condition.EnabledOnJre;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â &lt;span&gt;static&lt;/span&gt;Â org.junit.jupiter.api.condition.JRE.JAVA_19;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;@TestMethodOrder(OrderAnnotation.class)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;JUnitOrder&lt;/span&gt;{&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@DisplayName(&quot;æµ‹è¯•æ˜¯å¦æ˜¯ç‹—&quot;)&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Order(2)&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsDog&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;String&lt;/span&gt;Â &lt;span&gt;name&lt;/span&gt;Â =Â &lt;span&gt;&quot;dog&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertEquals(name,Â &lt;span&gt;&quot;dog&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;isÂ dog&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@DisplayName(&quot;æ˜¯å¦æ˜¯çŒ«&quot;)&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Order(1)&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsCat&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;String&lt;/span&gt;Â &lt;span&gt;name&lt;/span&gt;Â =Â &lt;span&gt;&quot;cat&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertEquals(name,Â &lt;span&gt;&quot;cat&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â System.out.println(&lt;span&gt;&quot;isÂ cat&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¼šè¾“å‡ºï¼š&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;isÂ cat&lt;br/&gt;isÂ dog&lt;/code&gt;&lt;/pre&gt;&lt;h3&gt;å…¶ä»–æ³¨è§£&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;@EnabledOnJre(JAVA_19)&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;åªåœ¨ JRE 19 ç¯å¢ƒè¿è¡Œï¼Œå¦åˆ™è¿è¡Œä¼šè¾“å‡ºï¼š&lt;code&gt;Disabled on JRE version: xxx&lt;/code&gt;.&lt;/p&gt;&lt;p&gt;&lt;strong&gt;@RepeatedTest(10)&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;é‡å¤æµ‹è¯•ï¼Œå‚æ•° 10 å¯ä»¥è®©å•å…ƒæµ‹è¯•é‡å¤è¿è¡Œ 10 æ¬¡ã€‚&lt;/p&gt;&lt;h2&gt;JUnit 5 å¸¸ç”¨æ–­è¨€&lt;/h2&gt;&lt;p&gt;åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå·²ç»ç”¨åˆ°äº†Â &lt;code&gt;assertEquals&lt;/code&gt;Â æ¥åˆ¤æ–­ç»“æœæ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œ&lt;code&gt;assertEquals&lt;/code&gt;æ˜¯ç±»Â &lt;code&gt;org.junit.jupiter.api.Assertions&lt;/code&gt;Â ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼›é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å‡ ä¹åŒ…æ‹¬äº†æ‰€æœ‰æˆ‘ä»¬æ—¥å¸¸æµ‹è¯•æƒ³è¦ç”¨åˆ°çš„åˆ¤æ–­æ–¹æ³•ã€‚&lt;/p&gt;&lt;p&gt;ä¸‹é¢æ˜¯ä¸€äº›æ¼”ç¤ºï¼š&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.Assertions;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.DisplayName;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.Test;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;JunitAssert&lt;/span&gt;Â {&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@DisplayName(&quot;æ˜¯å¦æ˜¯ç‹—&quot;)&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsDog&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;String&lt;/span&gt;Â &lt;span&gt;name&lt;/span&gt;Â =Â &lt;span&gt;&quot;dog&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertNotNull(name);&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertEquals(name,Â &lt;span&gt;&quot;dog&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertNotEquals(name,Â &lt;span&gt;&quot;cat&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertTrue(&lt;span&gt;&quot;dog&quot;&lt;/span&gt;.equals(name));&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertFalse(&lt;span&gt;&quot;cat&quot;&lt;/span&gt;.equals(name));&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@DisplayName(&quot;æ˜¯å¦æ˜¯çŒ«&quot;)&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;testIsCat&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;String&lt;/span&gt;Â &lt;span&gt;name&lt;/span&gt;Â =Â &lt;span&gt;&quot;cat&quot;&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertNull(name,Â &lt;span&gt;&quot;nameÂ isÂ notÂ null&quot;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨Â &lt;code&gt;testIsDog&lt;/code&gt;Â ä¸­æ¼”ç¤ºäº†ä¸€äº›å¸¸ç”¨çš„åˆ¤æ–­æ–¹æ³•ï¼Œä¸”éƒ½å¯ä»¥é€šè¿‡éªŒè¯ã€‚åœ¨Â &lt;code&gt;testIsCat&lt;/code&gt;Â æ–¹æ³•ä¸­è¿›è¡Œäº†Â &lt;code&gt;null&lt;/code&gt;Â å€¼åˆ¤æ–­ï¼Œæ˜¾ç„¶è¿™é‡Œæ— æ³•é€šè¿‡æµ‹è¯•ï¼Œä¼šæŠ›å‡ºè‡ªå®šä¹‰å¼‚å¸¸Â &lt;code&gt;name is not null&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p&gt;è¿™ä¼šè¾“å‡ºï¼š&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;org.opentest4j.AssertionFailedError:Â nameÂ isÂ notÂ nullÂ ==&amp;gt;Â &lt;br/&gt;ExpectedÂ :null&lt;br/&gt;ActualÂ Â Â :cat&lt;br/&gt;&amp;lt;ClickÂ toÂ seeÂ difference&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é¢„æœŸæ˜¯ä¸€ä¸ªÂ &lt;code&gt;null&lt;/code&gt;Â å€¼ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ªÂ &lt;code&gt;cat&lt;/code&gt;Â å­—ç¬¦ä¸²ã€‚&lt;/p&gt;&lt;h2&gt;Maven JUnit æµ‹è¯•&lt;/h2&gt;&lt;p&gt;åœ¨ Maven ä¸­è¿›è¡Œ JUnit æµ‹è¯•ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤Â &lt;code&gt;mvn test&lt;/code&gt;Â å¼€å§‹æµ‹è¯•ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šæµ‹è¯•æ‰€æœ‰ä¾èµ–äº†å½“å‰æºç çš„ JUnit æµ‹è¯•ç”¨ä¾‹ã€‚&lt;/p&gt;&lt;p&gt;å‡†å¤‡è¢«æµ‹ Presonç±»æ”¾åœ¨Â &lt;code&gt;src.main.java.com.wdbyte.test.junit5&lt;/code&gt;.&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;package&lt;/span&gt;Â com.wdbyte.test.junit5;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;Person&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â &lt;span&gt;getLuckyNumber&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;7&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç¼–å†™æµ‹è¯•ç±» PersonTest æ”¾åœ¨Â &lt;code&gt;src.test.java.com.wdbyte.test.junit5&lt;/code&gt;. è¿™é‡Œåˆ¤æ–­è·å–åˆ°çš„å¹¸è¿æ•°å­—æ˜¯å¦æ˜¯ 8 ï¼Œæ˜æ˜¾æ–¹æ³•è¿”å›çš„æ˜¯ 7 ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯æµ‹è¯•ä¼šæŠ¥é”™ã€‚&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;package&lt;/span&gt;Â com.wdbyte.test.junit5;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.Assertions;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.DisplayName;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â org.junit.jupiter.api.Test;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;@DisplayName(&quot;æµ‹è¯•Â Presion&quot;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;PersonTest&lt;/span&gt;Â {&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@DisplayName(&quot;æµ‹è¯•å¹¸è¿æ•°å­—&quot;)&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;@Test&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;getLuckyNumber&lt;/span&gt;()Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;Person&lt;/span&gt;Â &lt;span&gt;person&lt;/span&gt;Â =Â &lt;span&gt;new&lt;/span&gt;Â &lt;span&gt;Person&lt;/span&gt;();&lt;br/&gt;Â Â Â Â Â Â Â Â Assertions.assertEquals(&lt;span&gt;8&lt;/span&gt;,Â person.getLuckyNumber());&lt;br/&gt;Â Â Â Â }&lt;br/&gt;}&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨ pom.xml ä¸­å¼•å…¥ maven junit æµ‹è¯•ä¾èµ–æ’ä»¶ã€‚&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;&amp;lt;&lt;span&gt;build&lt;/span&gt;&amp;gt;&lt;br/&gt;Â Â Â Â Â &amp;lt;&lt;span&gt;plugins&lt;/span&gt;&amp;gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â &amp;lt;&lt;span&gt;plugin&lt;/span&gt;&amp;gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â &amp;lt;&lt;span&gt;artifactId&lt;/span&gt;&amp;gt;maven-surefire-plugin&amp;lt;/&lt;span&gt;artifactId&lt;/span&gt;&amp;gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â &amp;lt;&lt;span&gt;version&lt;/span&gt;&amp;gt;2.22.2&amp;lt;/&lt;span&gt;version&lt;/span&gt;&amp;gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â &amp;lt;/&lt;span&gt;plugin&lt;/span&gt;&amp;gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â &amp;lt;&lt;span&gt;plugin&lt;/span&gt;&amp;gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â &amp;lt;&lt;span&gt;artifactId&lt;/span&gt;&amp;gt;maven-failsafe-plugin&amp;lt;/&lt;span&gt;artifactId&lt;/span&gt;&amp;gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â &amp;lt;&lt;span&gt;version&lt;/span&gt;&amp;gt;2.22.2&amp;lt;/&lt;span&gt;version&lt;/span&gt;&amp;gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â &amp;lt;/&lt;span&gt;plugin&lt;/span&gt;&amp;gt;&lt;br/&gt;Â Â Â Â Â &amp;lt;/&lt;span&gt;plugins&lt;/span&gt;&amp;gt;&lt;br/&gt;&amp;lt;/&lt;span&gt;build&lt;/span&gt;&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰§è¡Œæµ‹è¯•å‘½ä»¤ï¼š&lt;code&gt;mvn test&lt;/code&gt;&lt;/p&gt;&lt;pre&gt;&lt;span/&gt;&lt;code&gt;âœÂ Â junit5-jupiter-starterÂ git:(master)Â âœ—Â mvnÂ test&lt;br/&gt;[INFO]Â ScanningÂ forÂ projects...&lt;br/&gt;[INFO]Â ....&lt;br/&gt;[INFO]Â -------------------------------------------------------&lt;br/&gt;[INFO]Â Â TÂ EÂ SÂ TÂ S&lt;br/&gt;[INFO]Â -------------------------------------------------------&lt;br/&gt;[INFO]Â RunningÂ com.wdbyte.test.junit5.PersonTest&lt;br/&gt;[ERROR]Â TestsÂ run:Â 1,Â Failures:Â 1,Â Errors:Â 0,Â Skipped:Â 0,Â TimeÂ elapsed:Â 0.031Â sÂ &amp;lt;&amp;lt;&amp;lt;Â FAILURE!Â -Â inÂ com.wdbyte.test.junit5.PersonTest&lt;br/&gt;[ERROR]Â getLuckyNumberÂ Â TimeÂ elapsed:Â 0.026Â sÂ Â &amp;lt;&amp;lt;&amp;lt;Â FAILURE!&lt;br/&gt;org.opentest4j.AssertionFailedError:Â expected:Â &amp;lt;8&amp;gt;Â butÂ was:Â &amp;lt;7&amp;gt;&lt;br/&gt;Â Â Â Â atÂ com.wdbyte.test.junit5.PersonTest.getLuckyNumber(PersonTest.java:18)&lt;br/&gt;&lt;br/&gt;[INFO]&lt;br/&gt;[INFO]Â Results:&lt;br/&gt;[INFO]&lt;br/&gt;[ERROR]Â Failures:&lt;br/&gt;[ERROR]Â Â Â PersonTest.getLuckyNumber:18Â expected:Â &amp;lt;8&amp;gt;Â butÂ was:Â &amp;lt;7&amp;gt;&lt;br/&gt;[INFO]&lt;br/&gt;[ERROR]Â TestsÂ run:Â 1,Â Failures:Â 1,Â Errors:Â 0,Â Skipped:Â 0&lt;br/&gt;[INFO]&lt;br/&gt;[INFO]Â ------------------------------------------------------------------------&lt;br/&gt;[INFO]Â BUILDÂ FAILURE&lt;br/&gt;[INFO]Â ------------------------------------------------------------------------&lt;br/&gt;[INFO]Â TotalÂ time:Â Â 1.777Â s&lt;br/&gt;[INFO]Â FinishedÂ at:Â 2022-11-17T23:01:09+08:00&lt;br/&gt;[INFO]Â ------------------------------------------------------------------------&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¹Ÿå¯ä»¥æŒ‡å®šç±»è¿›è¡Œæµ‹è¯•ï¼š&lt;code&gt;mvn -Dtest=PersonTest test&lt;/code&gt;&lt;/p&gt;&lt;p&gt;ä¸€å¦‚æ—¢å¾€ï¼Œæ–‡ç« ä¸­ä»£ç å­˜æ”¾åœ¨Â &lt;span&gt;Github.com/niumoo/javaNotes&lt;/span&gt;.&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;figcaption&gt;&lt;span&gt;---- END ----&lt;/span&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;Hello world : )Â &lt;span&gt;è¿™ç¯‡æ–‡ç« å°±åˆ°è¿™é‡Œäº†ï¼Œ&lt;/span&gt;æˆ‘æ˜¯é˜¿æœ—ï¼Œç‚¹èµå’Œåœ¨çœ‹ï¼ŒåŠ¨åŠ›æ— é™ï¼Œ&lt;/span&gt;&lt;strong&gt;&lt;span&gt;æ±‚å…³æ³¨&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mp-common-profile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzI1MDIxNjQ1OQ==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/4lfok2icUkibQlzFGPibM1jmICzZmtYzRGMpP7suTs20SQKjwqgFWKKPcmAwzzeDZHE3fuhodU4oZsKQ3IibqYmibhg/0?wx_fmt=png&quot; data-nickname=&quot;ç¨‹åºçŒ¿é˜¿æœ—&quot; data-alias=&quot;wdbyte&quot; data-signature=&quot;: ) æ—©ç¡æ—©èµ·ï¼ŒåšæŒä¸æ‡ˆã€‚&quot; data-from=&quot;0&quot; data-is_biz_ban=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;ç‚¹ä¸ªåœ¨çœ‹ï¼ŒåŠ æ²¹å……ç”µï½&lt;/span&gt;&lt;strong&gt;&lt;span&gt;ğŸ‘‡&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;mp-style-type data-value=&quot;3&quot;/&gt;&lt;/p&gt;&lt;/div&gt;

          
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>ea3822a0f5e2eb02e6bb122fa9aa696a</guid>
<title>å®ç°å…¨é¢ç”Ÿæ€åŒ–çš„å…¨é“¾è·¯æ—¥å¿—è¿½è¸ªç³»ç»ŸæœåŠ¡æ’ä»¶ï¼ˆLogback-MDC ç¯‡ï¼‰</title>
<link>https://toutiao.io/k/b2c8bpz</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div id=&quot;content_views&quot; class=&quot;markdown_views prism-atom-one-dark&quot;&gt;
                    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;
                        &lt;path stroke-linecap=&quot;round&quot; d=&quot;M5,0 0,2.5 5,5z&quot; id=&quot;raphael-marker-block&quot;/&gt;
                    &lt;/svg&gt;
                    &lt;h2&gt;&lt;a id=&quot;_0&quot;/&gt;æ—¥å¿—è¿½è¸ª&lt;/h2&gt; 
&lt;p&gt;æ—¥å¿—è¿½è¸ªå¯¹äºåŠŸèƒ½é—®é¢˜çš„æ’æŸ¥å’Œæ•°æ®æµè½¬çš„è·¯å¾„åˆ†ææ—¶éå¸¸é‡è¦çš„ï¼Œæœ‰äº†å…¨é“¾è·¯æ—¥å¿—è¿½è¸ªä½“ç³»æœºåˆ¶å¯ä»¥éå¸¸æœ‰æ•ˆä¸”å¿«é€Ÿçš„å®šä½é—®é¢˜ï¼Œä½†åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼Œè‹¥æ²¡æœ‰ç›¸å…³æˆç†Ÿçš„æ¡†æ¶çš„æ”¯æŒï¼Œæƒ³è¦å®ç°æ—¥å¿—è¿½è¸ªï¼Œå°±éœ€è¦æ‰‹åŠ¨å°†ä¸»çº¿ç¨‹ä¸­çš„æ—¥å¿—å‚æ•°ä¼ é€’ç»™å­çº¿ç¨‹ï¼Œæ¥ä¸‹æ¥å°±åœ¨çº¿ç¨‹æ± åœºæ™¯ä¸‹å€ŸåŠ©MDCå®ç°äº†traceIdå‚æ•°çš„é€ä¼ ã€‚&lt;/p&gt; 
&lt;h3&gt;&lt;a id=&quot;_4&quot;/&gt;å€™é€‰æ–¹æ¡ˆ&lt;/h3&gt; 
&lt;ul&gt;&lt;li&gt; &lt;p&gt;æ–¹æ¡ˆ1ï¼š&lt;strong&gt;è§£å†³åŠæ³•æ˜¯é‡‡ç”¨è‡ªå®šä¹‰çš„æ—¥å¿—æ ¼å¼ï¼ŒæŠŠç”¨æˆ·çš„ä¿¡æ¯é‡‡ç”¨æŸç§æ–¹å¼ç¼–ç åœ¨æ—¥å¿—è®°å½•ä¸­ã€‚è¿™ç§æ–¹å¼çš„é—®é¢˜åœ¨äºè¦æ±‚åœ¨æ¯ä¸ªä½¿ç”¨æ—¥å¿—è®°å½•å™¨çš„ç±»ä¸­ï¼Œéƒ½å¯ä»¥è®¿é—®åˆ°ç”¨æˆ·ç›¸å…³çš„ä¿¡æ¯ã€‚è¿™æ ·æ‰å¯èƒ½åœ¨è®°å½•æ—¥å¿—æ—¶ä½¿ç”¨ã€‚è¿™æ ·çš„æ¡ä»¶é€šå¸¸æ˜¯æ¯”è¾ƒéš¾ä»¥æ»¡è¶³çš„ï¼ŒMDCçš„ä½œç”¨æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜&lt;/strong&gt;ã€‚&lt;/p&gt; &lt;/li&gt;&lt;li&gt; &lt;p&gt;æ–¹æ¡ˆ2ï¼š &lt;strong&gt;MDCï¼ˆMapped Diagnostic Contextï¼Œæ˜ å°„è°ƒè¯•ä¸Šä¸‹æ–‡ï¼‰&lt;/strong&gt; æ˜¯slf4jæä¾›çš„ä¸€ç§è½»é‡çº§çš„æ—¥å¿—è·Ÿè¸ªå·¥å…·ï¼Œ&lt;strong&gt;Log4j&lt;/strong&gt;ã€&lt;strong&gt;Logback&lt;/strong&gt;æˆ–è€…&lt;strong&gt;Log4j2&lt;/strong&gt;ç­‰æ—¥å¿—ä¸­æœ€å¸¸è§åŒºåˆ†åŒä¸€ä¸ªè¯·æ±‚çš„æ–¹å¼æ˜¯é€šè¿‡çº¿ç¨‹å/çº¿ç¨‹IDï¼Œä½†æ˜¯è€Œå¦‚æœè¯·æ±‚é‡å¤§ï¼Œçº¿ç¨‹å/çº¿ç¨‹IDä¼šåœ¨ç›¸é‚»çš„æ—¶é—´å†…å‡ºç°å¤šæ¬¡é‡å¤çš„æ‰“å°ï¼Œå› æ­¤å¼•å‡ºäº†trace-idï¼Œå³åœ¨æ¥æ”¶åˆ°çš„æ—¶å€™ç”Ÿæˆå”¯ä¸€çš„è¯·æ±‚idï¼Œåœ¨æ•´ä¸ªæ‰§è¡Œé“¾è·¯ä¸­å¸¦ä¸Šæ­¤å”¯ä¸€idã€‚&lt;/p&gt; &lt;/li&gt;&lt;/ul&gt; 
&lt;hr/&gt; 
&lt;h2&gt;&lt;a id=&quot;Sl4fjMDC_12&quot;/&gt;Sl4fjçš„MDCæ¨¡å¼çš„ä»‹ç»&lt;/h2&gt; 
&lt;h3&gt;&lt;a id=&quot;Sl4fjMDC_14&quot;/&gt;Sl4fjçš„MDCçš„æºç &lt;/h3&gt; 
&lt;pre&gt;&lt;code class=&quot;prism language-java&quot;&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MDC&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;NULL_MDCA_URL&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;http://www.slf4j.org/codes.html#null_MDCA&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;NO_STATIC_MDC_BINDER_URL&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;http://www.slf4j.org/codes.html#no_static_mdc_binder&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MDCAdapter&lt;/span&gt; mdcAdapter&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MDCAdapter&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;bwCompatibleGetMDCAdapterFromBinder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NoClassDefFoundError&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StaticMDCBinder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getSingleton&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMDCA&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;NoSuchMethodError&lt;/span&gt; var1&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;StaticMDCBinder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;SINGLETON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMDCA&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;key parameter cannot be null&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mdcAdapter &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalStateException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;MDCAdapter cannot be null. See also http://www.slf4j.org/codes.html#null_MDCA&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            mdcAdapter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MDCCloseable&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;putCloseable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MDCCloseable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;key parameter cannot be null&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mdcAdapter &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalStateException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;MDCAdapter cannot be null. See also http://www.slf4j.org/codes.html#null_MDCA&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; mdcAdapter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;key parameter cannot be null&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mdcAdapter &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalStateException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;MDCAdapter cannot be null. See also http://www.slf4j.org/codes.html#null_MDCA&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            mdcAdapter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mdcAdapter &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalStateException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;MDCAdapter cannot be null. See also http://www.slf4j.org/codes.html#null_MDCA&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            mdcAdapter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getCopyOfContextMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mdcAdapter &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalStateException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;MDCAdapter cannot be null. See also http://www.slf4j.org/codes.html#null_MDCA&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; mdcAdapter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getCopyOfContextMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setContextMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; contextMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mdcAdapter &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalStateException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;MDCAdapter cannot be null. See also http://www.slf4j.org/codes.html#null_MDCA&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            mdcAdapter&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setContextMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;contextMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MDCAdapter&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getMDCAdapter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; mdcAdapter&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            mdcAdapter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;bwCompatibleGetMDCAdapterFromBinder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;NoClassDefFoundError&lt;/span&gt; var2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            mdcAdapter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;NOPMDCAdapter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; msg &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; var2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;msg &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;msg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;StaticMDCBinder&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; var2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;Util&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Failed to load class \&quot;org.slf4j.impl.StaticMDCBinder\&quot;.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;Util&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Defaulting to no-operation MDCAdapter implementation.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;Util&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;See http://www.slf4j.org/codes.html#no_static_mdc_binder for further details.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Exception&lt;/span&gt; var3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;Util&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;report&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;MDC binding unsuccessful.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; var3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MDCCloseable&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Closeable&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MDCCloseable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt; 
&lt;p&gt;&lt;strong&gt;Sl4fjçš„MDCæ¨¡å¼ä¸»è¦çš„é—¨é¢ç±»æ˜¯MDC.javaï¼Œä½†æ˜¯æœ€æ ¸å¿ƒçš„ç±»æ˜¯MDCAdapterï¼Œå¯ç”±ä¸‹é¢çš„ä»£ç è§‚æµ‹å‡º&lt;/strong&gt;ã€‚&lt;/p&gt; 
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/0de4f8f034f5847a2b32c06a0f8f151b.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt; 
&lt;p&gt;&lt;strong&gt;å¯¹åº”è€Œå®šå®ç°åŠ è½½æ‰€æœ‰ç›¸å…³çš„MDCAdapterçš„ç±»å°±åœ¨è¿™é‡Œï¼Œè€Œä»£ç é‡Œé¢çš„åŠŸèƒ½å±•ç¤ºä¿¡æ¯ä¹Ÿæ˜¯æˆ‘ä»¬ç»å¸¸ä¼šé‡è§çš„ï¼Œå¦‚æœå‡ºç°é”™è¯¯çš„æ—¶å€™ï¼Œç»å¸¸ä¼šæ‰“å°å†æ—¥å¿—çš„æœ€å¼€å§‹éƒ¨åˆ†&lt;/strong&gt;ã€‚&lt;/p&gt; 
&lt;h3&gt;&lt;a id=&quot;Sl4fjMDCAdapter_126&quot;/&gt;Sl4fjçš„MDCAdapterçš„æºç &lt;/h3&gt; 
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/616021346d4c51951407325321be4474.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt; 
&lt;p&gt;å¤§å®¶å¯ä»¥è§‚å¯Ÿåˆ°å¯¹åº”çš„MDCAdapterçš„å®ç°ç±»æœ‰ä¸€ä¸‹è¿™å‡ ç§ï¼ŒåŸºæœ¬ä¸Šæ˜¯ä¼šäº¤ç”±ç¬¬ä¸‰æ–¹å»å®ç°çš„ã€‚&lt;/p&gt; 
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/dcbb0f64b8abe01ec3e047e0e132da1d.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt; 
&lt;p&gt;è€Œå¯¹äºSl4jæœ¬èº«ä¸æä¾›ä¼ é€’traceIdçš„èƒ½åŠ›ï¼ŒçœŸæ­£æä¾›èƒ½åŠ›çš„æ˜¯MDCAdapteræ¥å£çš„å®ç°ã€‚&lt;/p&gt; 
&lt;blockquote&gt; 
 &lt;p&gt;&lt;strong&gt;Logbackä½¿ç”¨çš„æ˜¯LogbackMDCAdapterã€‚æ¯”å¦‚Log4jçš„æ˜¯Log4jMDCAdapterï¼ŒLogbackçš„æ˜¯LogbackMDCAdapterã€‚å…¶å†…éƒ¨è‡ªå·±çš„MDCAdapterå±äºç©ºå®ç°çš„NOPMDCAdapterç±»å’ŒBasicMDCAdapterï¼Œç¬¬ä¸‰æ–¹çš„OPMDCAdapterï¼Œä¸å¤ªäº†è§£ã€‚&lt;/strong&gt;&lt;/p&gt; 
&lt;/blockquote&gt; 
&lt;p&gt;[å¤–é“¾å›¾ç‰‡è½¬å­˜å¤±è´¥,æºç«™å¯èƒ½æœ‰é˜²ç›—é“¾æœºåˆ¶,å»ºè®®å°†å›¾ç‰‡ä¿å­˜ä¸‹æ¥ç›´æ¥ä¸Šä¼ (img-Sw9tGguI-1668663492640)(https://oscimg.oschina.net/oscnet/up-50011a2da52c96dfaf890a62f1e6b268341.png)]&lt;/p&gt; 
&lt;h4&gt;&lt;a id=&quot;MDC_141&quot;/&gt;MDCçš„å®ç°åŸç†&lt;/h4&gt; 
&lt;ol&gt;&lt;li&gt;MDCå¯ä»¥çœ‹æˆæ˜¯æ¯ä¸ªçº¿ç¨‹å†…éƒ¨éƒ½è¿›è¡Œé¡¶ä¸€ä¸ªæ‰€å±ç§æœ‰çš„å®¹å™¨ï¼ˆä¹Ÿå¯ä»¥ç†è§£ä¸ºå“ˆå¸Œè¡¨ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç¨‹åºå¾€å…¶ä¸­æ·»åŠ é”®å€¼å¯¹ã€‚&lt;/li&gt;&lt;li&gt;MDCå†…çš„æ•°æ®å¯ä»¥è¢«å½“å‰çº¿ç¨‹çš„ä»£ç æ‰€è®¿é—®ï¼Œå½“å‰çº¿ç¨‹æ‰€äº§ç”Ÿçš„å­çº¿ç¨‹ä¹Ÿä¼šç»§æ‰¿å…¶çˆ¶çº¿ç¨‹ä¸­çš„MDCçš„æ•°æ®ï¼Œå½“éœ€è¦è®°å½•æ—¥å¿—æ—¶ï¼Œåªéœ€è¦ä»MDCä¸­è·å–æ‰€éœ€çš„ä¿¡æ¯å³å¯ã€‚&lt;/li&gt;&lt;li&gt;MDC çš„å†…å®¹åˆ™ç”±ç¨‹åºåœ¨é€‚å½“çš„æ—¶å€™ä¿å­˜è¿›å»ã€‚å¯¹äºä¸€ä¸ª Web åº”ç”¨æ¥è¯´ï¼Œé€šå¸¸æ˜¯åœ¨è¯·æ±‚è¢«å¤„ç†çš„æœ€å¼€å§‹ä¿å­˜è¿™äº›æ•°æ®ã€‚&lt;/li&gt;&lt;/ol&gt; 
&lt;hr/&gt; 
&lt;h5&gt;&lt;a id=&quot;Sl4jMDCAdapter_149&quot;/&gt;Sl4jçš„MDCAdapterçš„å®ç°æœºåˆ¶&lt;/h5&gt; 
&lt;pre&gt;&lt;code class=&quot;prism language-java&quot;&gt;
&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BasicMDCAdapter&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MDCAdapter&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;InheritableThreadLocal&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; inheritableThreadLocal &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;InheritableThreadLocal&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;childValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; parentValue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; parentValue &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;parentValue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BasicMDCAdapter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;key cannot be null&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;inheritableThreadLocal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;map &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;inheritableThreadLocal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;map&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;map&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;inheritableThreadLocal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; map &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; key &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;inheritableThreadLocal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;map &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;inheritableThreadLocal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;map &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;inheritableThreadLocal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getKeys&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;inheritableThreadLocal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; map &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;keySet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getCopyOfContextMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; oldMap &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;inheritableThreadLocal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; oldMap &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;oldMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setContextMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; contextMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;inheritableThreadLocal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;contextMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt; 
&lt;h2&gt;&lt;a id=&quot;LogbackMDC_205&quot;/&gt;Logbackçš„MDCæ¨¡å¼&lt;/h2&gt; 
&lt;ul&gt;&lt;li&gt;LogbackMDCAdapterç±»å®ç°MDCAdapteræ¥å£ï¼Œå®ç° putã€getã€removeç­‰æ–¹æ³•ã€‚&lt;/li&gt;&lt;li&gt;copyOnThreadLocalï¼šå­˜å‚¨æ¯ä¸ªçº¿ç¨‹çš„å¤šä¸ªå˜é‡&lt;/li&gt;&lt;/ul&gt; 
&lt;blockquote&gt; 
 &lt;p&gt;&lt;strong&gt;å½“åœ¨logback.xmlä¸­é…ç½®äº†%X{key} æˆ– SiftingAppenderçš„çš„ï¼Œåœ¨éœ€è¦è¾“å‡ºæ—¥å¿—çš„æ—¶å€™ï¼Œä»MDCä¸­è·å–å¯¹åº”çš„keyå€¼ï¼Œç„¶åappendåˆ°æ—¥å¿—å­—ç¬¦ä¸²ä¸­æˆ–ç”Ÿæˆæ–‡ä»¶è·¯å¾„ï¼Œç„¶åè¾“å‡º&lt;/strong&gt;ã€‚&lt;/p&gt; 
&lt;/blockquote&gt; 
&lt;h3&gt;&lt;a id=&quot;LogbackMDCAdapter_212&quot;/&gt;LogbackMDCAdapterçš„æºç åˆ†æ&lt;/h3&gt; 
&lt;pre&gt;&lt;code class=&quot;prism language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LogbackMDCAdapter&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MDCAdapter&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ThreadLocal&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; copyOnThreadLocal &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ThreadLocal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;WRITE_OPERATION&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;MAP_COPY_OPERATION&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ThreadLocal&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; lastOperation &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ThreadLocal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LogbackMDCAdapter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getAndSetLastOperation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt; op&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; lastOp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lastOperation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lastOperation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;op&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; lastOp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;wasLastOpReadOrNull&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; lastOp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; lastOp &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; lastOp &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;duplicateAndInsertNewMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; oldMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; newMap &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Collections&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;synchronizedMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;oldMap &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;synchronized&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;oldMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                newMap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;putAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;oldMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;copyOnThreadLocal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; newMap&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;throws&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;key cannot be null&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; oldMap &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;copyOnThreadLocal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; lastOp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getAndSetLastOperation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;wasLastOpReadOrNull&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lastOp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; oldMap &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                oldMap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; newMap &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;duplicateAndInsertNewMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;oldMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                newMap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; oldMap &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;copyOnThreadLocal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;oldMap &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token class-name&quot;&gt;Integer&lt;/span&gt; lastOp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getAndSetLastOperation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;wasLastOpReadOrNull&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lastOp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; newMap &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;duplicateAndInsertNewMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;oldMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                    newMap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    oldMap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lastOperation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;copyOnThreadLocal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;copyOnThreadLocal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; map &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; key &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getPropertyMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lastOperation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;copyOnThreadLocal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Set&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getKeys&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; map &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getPropertyMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; map &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; map&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;keySet&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getCopyOfContextMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; hashMap &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;copyOnThreadLocal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; hashMap &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;hashMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setContextMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; contextMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lastOperation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; newMap &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Collections&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;synchronizedMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HashMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        newMap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;putAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;contextMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;copyOnThreadLocal&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt; 
&lt;p&gt;ä¸»è¦é—®é¢˜æ˜¯é’ˆå¯¹äºCollections.synchronizedMap(new HashMap())ï¼Œå»ºç«‹HashMapçš„å®‰å…¨æ¨¡å¼è¿›è¡Œæ„å»ºå®¹å™¨å¯¹è±¡ï¼Œæ‰€ä»¥æ˜¯çº¿ç¨‹å®‰å…¨çš„é—®é¢˜æ§åˆ¶ã€‚&lt;/p&gt; 
&lt;pre&gt;&lt;code class=&quot;prism language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ThreadLocal&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; copyOnThreadLocal &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ThreadLocal&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt; 
&lt;p&gt;æŸäº›åº”ç”¨ç¨‹åºé‡‡ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼æ¥å¤„ç†å¤šä¸ªç”¨æˆ·çš„è¯·æ±‚ã€‚åœ¨ä¸€ä¸ªç”¨æˆ·çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½æœ‰å¤šä¸ªä¸åŒçš„çº¿ç¨‹æ¥è¿›è¡Œå¤„ç†ã€‚å…¸å‹çš„ä¾‹å­æ˜¯Webåº”ç”¨æœåŠ¡å™¨ã€‚å½“ç”¨æˆ·è®¿é—®æŸä¸ªé¡µé¢æ—¶ï¼Œåº”ç”¨æœåŠ¡å™¨å¯èƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹æ¥å¤„ç†è¯¥è¯·æ±‚ï¼Œä¹Ÿå¯èƒ½ä»çº¿ç¨‹æ± ä¸­å¤ç”¨å·²æœ‰çš„çº¿ç¨‹ã€‚&lt;/p&gt; 
&lt;h2&gt;&lt;a id=&quot;MDC_311&quot;/&gt;MDCçš„ç®€å•ä½¿ç”¨æ–¹å¼&lt;/h2&gt; 
&lt;h3&gt;&lt;a id=&quot;traceId_313&quot;/&gt;æ·»åŠ traceId&lt;/h3&gt; 
&lt;pre&gt;&lt;code class=&quot;prism language-java&quot;&gt;&lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;â€œtrace&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;idâ€&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; traceId&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt; 
&lt;h3&gt;&lt;a id=&quot;traceId_319&quot;/&gt;ç§»é™¤traceId&lt;/h3&gt; 
&lt;pre&gt;&lt;code class=&quot;prism language-java&quot;&gt;&lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;â€œtrace&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;idâ€&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt; 
&lt;p&gt;åœ¨æ—¥å¿—é…ç½®æ–‡ä»¶ä¸­èŠ‚ç‚¹ä¸­ä»¥%X{trace-id}å–å‡ºï¼Œæ¯”å¦‚ï¼š%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level [uniqid-%X{trace-id}] %logger{50}-%line - %m%nä»¥ä¸Šæ–¹å¼ï¼Œåªèƒ½åœ¨åšputæ“ä½œçš„å½“å‰çº¿ç¨‹ä¸­è·å–åˆ°å€¼ã€‚é‚£æ˜¯å› ä¸ºMDCçš„å®ç°åŸç†ä¸»è¦å°±æ˜¯ThreadLocalï¼ŒThreadLocalåªå¯¹å½“å‰çº¿ç¨‹æœ‰æ•ˆã€‚ä¾‹å¦‚æˆ‘ä»¬ä¸¾ä¸€ä¸ªç®€å•çš„Logbackæ¡ˆä¾‹ã€log4jå’Œlog4j2ä¹Ÿæ˜¯ä¸€æ ·çš„æ¨¡å¼ã€‚&lt;/p&gt; 
&lt;pre&gt;&lt;code class=&quot;prism language-xml&quot;&gt;&lt;span class=&quot;token prolog&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;configuration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;appender&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;console&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;ch.qos.logback.core.ConsoleAppender&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;encoder&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;charset&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;UTF-8&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
            &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;pattern&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%trace-id] %-5level %logger{36} - %msg%n&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;pattern&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;encoder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;appender&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;logger&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;com.XXX&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;level&lt;/span&gt; &lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;INFO&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;appender-ref&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;ref&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;console&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;logger&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;configuration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt; 
&lt;p&gt;æ­¤å¤–logback ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨å ä½ç¬¦%X{ }æ¥å ä½ï¼Œæ›¿æ¢åˆ°å¯¹åº”çš„ MDC ä¸­ key çš„å€¼&lt;/p&gt; 
&lt;pre&gt;&lt;code class=&quot;prism language-xml&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;appender&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;CONSOLE&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;ch.qos.logback.core.ConsoleAppender&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; 
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;layout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Pattern&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;%X{trace-id}- %m%n&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Pattern&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;layout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; 
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;appender&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt; 
&lt;h2&gt;&lt;a id=&quot;MDC_350&quot;/&gt;MDCçš„éš¾ç‚¹åŠŸè¯¾å®æˆ˜&lt;/h2&gt; 
&lt;h3&gt;&lt;a id=&quot;MDC_352&quot;/&gt;å¤šçº¿ç¨‹æƒ…å†µä¸‹çš„MDCå®ç°é—®é¢˜&lt;/h3&gt; 
&lt;p&gt;å½“æˆ‘ä»¬å¤„äºå¤šä¸ªçº¿ç¨‹ä¹‹é—´è¿›è¡Œä¼ é€’traceIdçš„æ—¶å€™ï¼Œå¯èƒ½å°±ä¼šå­˜åœ¨ThreadLocalçš„é—®é¢˜äº†ã€‚é‚£ä¹ˆå¦‚æœè¦ç ´é™¤ThreadLocalåªå¯¹å½“å‰çº¿ç¨‹æœ‰çº¿çš„æ–¹æ³•ï¼š&lt;/p&gt; 
&lt;ol&gt;&lt;li&gt;ï¼ˆé’ˆå¯¹äºè·¨çº¿ç¨‹ä¼ é€’çš„é—®é¢˜ï¼‰å¯ä»¥é‡‡ç”¨JDKè‡ªå¸¦çš„ã€ThreadLocalçš„æ‰©å±•ç±»InheritableThreadLocalï¼Œå­çº¿ç¨‹ä¼šæ‹·è´çˆ¶çº¿ç¨‹ä¸­çš„å˜é‡å€¼&lt;/li&gt;&lt;li&gt;ï¼ˆé’ˆå¯¹äºçº¿ç¨‹æ± çº¿ç¨‹å¤ç”¨çš„é—®é¢˜ï¼‰å¼•å…¥alibabaåŒ…çš„TransmittableThreadLocalå®ç°&lt;/li&gt;&lt;li&gt;ï¼ˆé’ˆå¯¹äºçº¿ç¨‹æ± çº¿ç¨‹å¤ç”¨çš„é—®é¢˜ï¼‰è‡ªå·±å°è£…ä¸€ä¸ªçº¿ç¨‹æ± å»å¤„ç†çº¿ç¨‹æ± æ‰€å­˜åœ¨çš„é—®é¢˜ã€‚&lt;/li&gt;&lt;/ol&gt; 
&lt;h4&gt;&lt;a id=&quot;_360&quot;/&gt;é’ˆå¯¹äºè·¨çº¿ç¨‹ä¼ é€’çš„é—®é¢˜&lt;/h4&gt; 
&lt;p&gt;é’ˆå¯¹äºè·¨çº¿ç¨‹ä¼ é€’traceIdçš„é—®é¢˜ï¼Œä¸»è¦é€šè¿‡InheritableThreadLocalçš„æ–¹å¼è¿›è¡Œæ‹·è´ä¼ é€’å³å¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ²¡æœ‰é‡‡ç”¨çº¿ç¨‹æ± çš„åœºæ™¯çš„åŒ–ï¼ŒåŸºæœ¬ä¸Šä¸ä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å¦‚æœæ‘å­å•Šçº¿ç¨‹æ± çš„åœºæ™¯ä¸‹é‚£ä¹ˆå°±åªèƒ½æˆ‘ä»¬è‡ªå·±æ‰‹åŠ¨å®ç°å’Œå¤„ç†äº†ï¼Œå¦‚æœé‡‡ç”¨TransmittableThreadLocalçš„è¯å¤§å®¶å¯ä»¥è‡ªè¡Œç™¾åº¦äº†ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä¸»è¦å®ç°çš„æ˜¯è‡ªå·±å»é€šè¿‡å‡ ç§æ–¹å¼å®ç°åŠŸèƒ½ä¼ é€’ã€‚&lt;/p&gt; 
&lt;h4&gt;&lt;a id=&quot;_364&quot;/&gt;é’ˆå¯¹äºçº¿ç¨‹æ± çº¿ç¨‹å¤ç”¨çš„é—®é¢˜&lt;/h4&gt; 
&lt;h5&gt;&lt;a id=&quot;SpringThreadPoolTaskExecutor_366&quot;/&gt;å¦‚æœä½¿ç”¨çš„æ˜¯Springçš„çº¿ç¨‹æ± ThreadPoolTaskExecutor&lt;/h5&gt; 
&lt;p&gt;é‚£ä¹ˆå°±å¯ä»¥é‡‡ç”¨TaskDecoratorçš„çº¿ç¨‹ä»»åŠ¡è£…é¥°å™¨æ–¹å¼ä¸ºçº¿ç¨‹æ± çš„çº¿ç¨‹æä¾›traceIdçš„ä¼ é€’æ“ä½œï¼Œä¾‹å¦‚ä»¥ä¸‹ä»£ç ã€‚&lt;/p&gt; 
&lt;h6&gt;&lt;a id=&quot;_370&quot;/&gt;å®šä¹‰çº¿ç¨‹è£…é¥°å™¨&lt;/h6&gt; 
&lt;p&gt;æ­¤å¤„æˆ‘é‡‡ç”¨çš„æ˜¯log backï¼Œå¦‚æœæ˜¯log4jæˆ–è€…log4j2è¿˜æ˜¯æœ‰ä¸€äº›åŒºåˆ«çš„ï¼Œæ¯”å¦‚è¯´MDC.getCopyOfContextMap()ã€‚&lt;/p&gt; 
&lt;pre&gt;&lt;code class=&quot;prism language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MDCTaskDecorator&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;TaskDecorator&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Runnable&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;decorate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Runnable&lt;/span&gt; runnable&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        
        &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; contextMap &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getCopyOfContextMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;contextMap &lt;span class=&quot;token operator&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                   
                    &lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setContextMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;contextMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                runnable&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;finally&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                
                &lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt; 
&lt;h6&gt;&lt;a id=&quot;_395&quot;/&gt;å®šä¹‰çº¿ç¨‹æ± &lt;/h6&gt; 
&lt;pre&gt;&lt;code class=&quot;prism language-java&quot;&gt;&lt;span class=&quot;token annotation punctuation&quot;&gt;@Bean&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;taskExecutor&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Executor&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;taskExecutor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;ThreadPoolTaskExecutor&lt;/span&gt; executor &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ThreadPoolTaskExecutor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        
        executor&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setCorePoolSize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        
        executor&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setMaxPoolSize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        
        executor&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setQueueCapacity&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        
        executor&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setThreadNamePrefix&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;mdc-trace-&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        
        executor&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setTaskDecorator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MDCTaskDecorator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        
        executor&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; executor&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt; 
&lt;blockquote&gt; 
 &lt;p&gt;è¿™æ ·å°±æ˜¯å…ˆäº†traceIdä¼ é€’åˆ°çº¿ç¨‹æ± ä¸­äº†ã€‚&lt;/p&gt; 
&lt;/blockquote&gt; 
&lt;h6&gt;&lt;a id=&quot;_419&quot;/&gt;æˆ‘ä»¬è‡ªå®šä¹‰çº¿ç¨‹è£…é¥°å™¨&lt;/h6&gt; 
&lt;p&gt;ä¸ä¸Šé¢çš„ä¸åŒæˆ‘ä»¬å¦‚æœç”¨çš„ä¸æ˜¯springçš„çº¿ç¨‹æ± é‚£ä¹ˆæ— æ³•å®ç°TaskDecoratoræ¥å£ï¼Œé‚£ä¹ˆå°±æ— æ³•å®ç°ä»–çš„åŠŸèƒ½äº†ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±ä¼šå®šä¹‰æˆ‘ä»¬è‡ªèº«çš„çº¿ç¨‹è£…é…å™¨ã€‚&lt;/p&gt; 
&lt;pre&gt;&lt;code class=&quot;prism language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;MDCTaskDecorator&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt;  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;  &lt;span class=&quot;token class-name&quot;&gt;Callable&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;buildCallable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Callable&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; callable&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;CollectionUtils&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isEmpty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
               
                &lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setContextMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; callable&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;finally&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                
                &lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Runnable&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;buildRunnable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Runnable&lt;/span&gt; runnable&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;CollectionUtils&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isEmpty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
               
                &lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setContextMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                runnable&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;finally&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                
                &lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt; 
&lt;blockquote&gt; 
 &lt;p&gt;æ¸…é™¤å­çº¿ç¨‹çš„ï¼Œé¿å…å†…å­˜æº¢å‡ºï¼Œå°±å’ŒThreadLocal.remove()ä¸€ä¸ªåŸå› &lt;/p&gt; 
&lt;/blockquote&gt; 
&lt;h6&gt;&lt;a id=&quot;_464&quot;/&gt;è‡ªå®šä¹‰çº¿ç¨‹æ± è¿›è¡Œå°è£…åŒ…è£…æ“ä½œï¼ˆæ™®é€šçº¿ç¨‹æ± ï¼‰&lt;/h6&gt; 
&lt;p&gt;ä¸»çº¿ç¨‹ä¸­ï¼Œå¦‚æœä½¿ç”¨äº†çº¿ç¨‹æ± ï¼Œä¼šå¯¼è‡´çº¿ç¨‹æ± ä¸­ä¸¢å¤±MDCä¿¡æ¯ï¼›è§£å†³åŠæ³•ï¼šéœ€è¦æˆ‘ä»¬è‡ªå·±é‡å†™çº¿ç¨‹æ± ï¼Œåœ¨è°ƒç”¨çº¿ç¨‹è·³åŠ¨runä¹‹å‰ï¼Œè·å–åˆ°ä¸»çº¿ç¨‹çš„MDCä¿¡æ¯ï¼Œé‡æ–°putåˆ°å­çº¿ç¨‹ä¸­çš„ã€‚&lt;/p&gt; 
&lt;pre&gt;&lt;code class=&quot;prism language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ThreadPoolMDCExecutor&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ThreadPoolTaskExecutor&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Runnable&lt;/span&gt; task&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MDCTaskDecorator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;buildRunnable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;task&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getCopyOfContextMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Future&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;submit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Runnable&lt;/span&gt; task&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MDCTaskDecorator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;buildRunnable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;task&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getCopyOfContextMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Future&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;submit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Callable&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; task&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MDCTaskDecorator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;buildCallable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;task&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getCopyOfContextMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt; 
&lt;h6&gt;&lt;a id=&quot;_487&quot;/&gt;è‡ªå®šä¹‰çº¿ç¨‹æ± è¿›è¡Œå°è£…åŒ…è£…æ“ä½œï¼ˆä»»åŠ¡è°ƒåº¦çº¿ç¨‹æ± ï¼‰&lt;/h6&gt; 
&lt;pre&gt;&lt;code class=&quot;prism language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ThreadPoolMDCScheduler&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ThreadPoolTaskScheduler&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ScheduledFuture&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;scheduleWithFixedDelay&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Runnable&lt;/span&gt; task&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt; startTime&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;long&lt;/span&gt; delay&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;scheduleWithFixedDelay&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MDCTaskDecorator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;buildRunnable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;task&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; startTime&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; delay&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ScheduledFuture&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;schedule&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Runnable&lt;/span&gt; task&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt; startTime&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;schedule&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;MDCTaskDecorator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;buildRunnable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;task&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; startTime&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt; 
&lt;blockquote&gt; 
 &lt;p&gt;åŒç†ï¼Œå³ä½¿ä½ ä½¿ç”¨ExecutorCompletionServiceå®ç°å¤šçº¿ç¨‹è°ƒç”¨ï¼Œä¹Ÿæ˜¯ç›¸åŒçš„æ–¹æ¡ˆå’Œæ€è·¯æœºåˆ¶ã€‚&lt;/p&gt; 
&lt;/blockquote&gt; 
&lt;h6&gt;&lt;a id=&quot;CompletableFuture_504&quot;/&gt;ç‰¹æ®Šåœºæ™¯-CompletableFutureå®ç°å¤šçº¿ç¨‹è°ƒç”¨&lt;/h6&gt; 
&lt;p&gt;ä½¿ç”¨CompletableFutureå®ç°å¤šçº¿ç¨‹è°ƒç”¨ï¼Œå…¶ä¸­æ”¶é›†CompletableFutureè¿è¡Œç»“æœï¼Œä¹Ÿå¯ä»¥æ‰‹åŠ¨ä½¿ç”¨ç›¸ä¼¼çš„æ€è·¯è¿›è¡Œå¡«å……ä¸Šä¸‹æ–‡ä¿¡æ¯æ•°æ®ï¼Œä½†æ˜¯åˆ«å¿˜è®°äº†æ¸…ç†clearå°±å¥½ã€‚&lt;/p&gt; 
&lt;pre&gt;&lt;code class=&quot;prism language-java&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CompletableFuture&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token class-name&quot;&gt;Map&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; copyOfContextMap &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getCopyOfContextMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CompletableFuture&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;supplyAsync&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
           &lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setContextMap&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;copyOfContextMap&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
           
           &lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; threadPoolExecutor&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;exceptionally&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;token generics&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Throwable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token annotation punctuation&quot;&gt;@Override&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Result&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Throwable&lt;/span&gt; throwable&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                log&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;çº¿ç¨‹[{}]å‘ç”Ÿäº†å¼‚å¸¸[{}], ç»§ç»­æ‰§è¡Œå…¶ä»–çº¿ç¨‹&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Thread&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;currentThread&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; throwable&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token constant&quot;&gt;MDC&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clear&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt; 
&lt;h2&gt;&lt;a id=&quot;_527&quot;/&gt;æœ€åæ€»ç»“è¯´æ˜&lt;/h2&gt; 
&lt;blockquote&gt; 
 &lt;p&gt;åç»­çš„å®ƒçš„å§Šå¦¹ç¯‡ã€Logback+Spring-Aopã€‘å®ç°å…¨é¢ç”Ÿæ€åŒ–çš„å…¨é“¾è·¯æ—¥å¿—è¿½è¸ªç³»ç»ŸæœåŠ¡æ’ä»¶ã€ŒSpringAOPæ•´åˆç¯‡ã€ï¼Œä¼šè¿›è¡Œåˆ†æé€šè¿‡SpringAOPæ¨¡å¼å°†Logbackçš„MDCæ¨¡å¼ä¸SpringAOPç»“åˆå½¢æˆä¸€ä¸ªè¾ƒä¸ºä½“ç³»åŒ–çš„ç»„ä»¶ï¼Œä»è€Œå‡å°‘äº†å¾ˆå¤šå¼€å‘è¿‡ç¨‹ä¸­çš„ä»£ç å’Œé—®é¢˜ã€‚&lt;/p&gt; 
&lt;/blockquote&gt;
                &lt;/div&gt;
                
                
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>