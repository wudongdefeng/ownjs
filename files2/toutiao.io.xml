<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>3710ea4f23dcd9ac075e641311ac4367</guid>
<title>iOS æ··æ·†å·¥å…·æ¢ç´¢</title>
<link>https://toutiao.io/k/izfw6j4</link>
<content:encoded>&lt;div&gt;&lt;div&gt;
  &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>7acd7b7a2498a76e2d32fa7cdd17f421</guid>
<title>å€¼å¾—æ”¶è—ï¼Œæ­ç§˜ MySQL å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶å®ç°åŸç†</title>
<link>https://toutiao.io/k/r59u142</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;p data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;span&gt;â–²&lt;/span&gt;&lt;span&gt;&lt;strong&gt;Â ç‚¹å‡»ä¸Šæ–¹â€œæ¶æ„ç²¾è¿›ä¹‹è·¯â€&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;å…³æ³¨å…¬ä¼—å·&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å›å¤&lt;/span&gt;&lt;span&gt;â€œ01â€&lt;/span&gt;&lt;span&gt;é¢†&lt;/span&gt;&lt;span&gt;å–ã€Œ&lt;/span&gt;&lt;span&gt;ç¨‹åºå‘˜è¿›é˜¶å¤§ç¤¼åŒ…&lt;/span&gt;&lt;span&gt;ã€&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzA3MDg5MDkzOA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgQmUQ0Aca9qSYNFn0tQEXQc5EibBkqQLYtibYBj1hXuagwXkNc3kVwplHxIl7KQfBIiagysgn9GDUUibw/0?wx_fmt=png&quot; data-nickname=&quot;æ¶æ„ç²¾è¿›ä¹‹è·¯&quot; data-alias=&quot;jiagou_jingjin&quot; data-signature=&quot;åå¹´ç ”å‘é£é›¨è·¯ï¼Œå¤§å‚æ¶æ„å¸ˆï¼ŒCSDNåšå®¢ä¸“å®¶ã€‚ä¸“æ³¨è½¯ä»¶æ¶æ„ç ”ç©¶ï¼ŒæŠ€æœ¯å­¦ä¹ ä¸èŒä¸šæˆé•¿ï¼ŒåšæŒåˆ†äº«æ¥åœ°æ°”å„¿çš„æ¶æ„æŠ€æœ¯å¹²è´§æ–‡ç« ï¼&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;span&gt;è¿™æ˜¯&lt;/span&gt;&lt;span&gt;&lt;strong&gt;ã€Œ&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;æ¶æ„ç²¾è¿›ä¹‹è·¯ã€å…¬ä¼—å·&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;çš„ç¬¬&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;73&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;ç¯‡åŸåˆ›æ–‡ç« &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;MySQL ä¸­å¤šç‰ˆæœ¬å¹¶å‘æ§åˆ¶ï¼ˆMVCCï¼‰ï¼Œæ˜¯ç°ä»£æ•°æ®åº“å¼•æ“å®ç°ä¸­å¸¸ç”¨çš„å¤„ç†è¯»å†™å†²çªçš„æ‰‹æ®µï¼ŒMVCC ä½œä¸º MySQL é«˜çº§åº”ç”¨ç‰¹æ€§ï¼Œç›®çš„åœ¨äºæé«˜æ•°æ®åº“é«˜å¹¶å‘åœºæ™¯ä¸‹çš„ååæ€§èƒ½ã€‚&lt;/section&gt;&lt;h2&gt;ä¸€ã€MVCCå‡ºç°èƒŒæ™¯æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2&gt;&lt;section&gt;äº‹åŠ¡çš„4ä¸ªéš”ç¦»çº§åˆ«ä»¥åŠå¯¹åº”çš„3ç§å¼‚å¸¸ï¼š&lt;br/&gt;&lt;img data-ratio=&quot;0.521412471825695&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgSWF9lHzdyW8leTRuN8I92ibzmFlVkPTnUJnF2CsFRGlCHZAdibiaeeNptfr2uEJvOMBh88mhASv5JZw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1331&quot;/&gt;&lt;/section&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;è„è¯»ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°äº†å¦å¤–ä¸€ä¸ªäº‹åŠ¡æ²¡æœ‰æäº¤çš„æ•°æ®ï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;ä¸å¯é‡å¤è¯»ï¼š&lt;span&gt;åœ¨åŒä¸€äº‹åŠ¡ä¸­ï¼Œä¸¤æ¬¡è¯»å–åŒä¸€æ•°æ®ï¼Œå¾—åˆ°å†…å®¹ä¸åŒï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å¹»è¯»ï¼š&lt;/span&gt;&lt;span&gt;åŒä¸€äº‹åŠ¡ä¸­ï¼Œç”¨åŒæ ·çš„æ“ä½œè¯»å–ä¸¤æ¬¡ï¼Œå¾—åˆ°çš„è®°å½•æ•°ä¸ç›¸åŒã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;åœ¨ MySQL ä¸­ï¼Œ&lt;span&gt;é»˜è®¤çš„éš”ç¦»çº§åˆ«æ˜¯å¯é‡å¤è¯»&lt;/span&gt;ï¼Œå¯ä»¥è§£å†³è„è¯»å’Œä¸å¯é‡å¤è¯»çš„é—®é¢˜ï¼Œä½†ä¸èƒ½è§£å†³å¹»è¯»é—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦è§£å†³å¹»è¯»é—®é¢˜ï¼Œå°±éœ€è¦é‡‡ç”¨ä¸²è¡ŒåŒ–çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯å°†éš”ç¦»çº§åˆ«æå‡åˆ°æœ€é«˜ï¼Œä½†è¿™æ ·ä¸€æ¥å°±ä¼šå¤§å¹…é™ä½æ•°æ®åº“çš„äº‹åŠ¡å¹¶å‘èƒ½åŠ›ã€‚&lt;/section&gt;&lt;section&gt;&lt;span&gt;è€ŒMVCCå°±æ˜¯é€šè¿‡ä¹è§‚é”çš„æ–¹å¼æ¥è§£å†³ä¸å¯é‡å¤è¯»å’Œå¹»è¯»é—®é¢˜ï¼Œå®ƒå¯ä»¥åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ›¿ä»£è¡Œçº§é”ï¼Œé™ä½ç³»ç»Ÿçš„å¼€é”€ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;MySQL å¹¶å‘äº‹åŠ¡ä¼šå¼•èµ·æ›´æ–°ä¸¢å¤±é—®é¢˜ï¼Œè§£å†³åŠæ³•æ˜¯é”ï¼Œä¸»è¦åˆ†ä¸¤ç±»ï¼š&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;h2&gt;äºŒã€ä»€ä¹ˆæ˜¯MVCCï¼Œå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ&lt;/h2&gt;&lt;section&gt;MVCC æ˜¯é€šè¿‡æ•°æ®è¡Œçš„å¤šä¸ªç‰ˆæœ¬ç®¡ç†æ¥å®ç°æ•°æ®åº“çš„å¹¶å‘æ§åˆ¶ï¼Œç®€å•æ¥è¯´å®ƒçš„æ€æƒ³å°±æ˜¯ä¿å­˜æ•°æ®çš„å†å²ç‰ˆæœ¬ã€‚&lt;/section&gt;&lt;blockquote&gt;&lt;section&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡æ¯”è¾ƒç‰ˆæœ¬å·å†³å®šæ•°æ®æ˜¯å¦æ˜¾ç¤ºå‡ºæ¥ï¼ˆå…·ä½“çš„è§„åˆ™åé¢ä¼šä»‹ç»åˆ°ï¼‰ï¼Œè¯»å–æ•°æ®çš„æ—¶å€™ä¸éœ€è¦åŠ é”ä¹Ÿå¯ä»¥ä¿è¯äº‹åŠ¡çš„éš”ç¦»æ•ˆæœã€‚&lt;/section&gt;&lt;/blockquote&gt;&lt;section&gt;é€šè¿‡ MVCC æˆ‘ä»¬å¯ä»¥è§£å†³ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š&lt;/section&gt;&lt;section&gt;ï¼ˆ1ï¼‰è¯»å†™ä¹‹é—´é˜»å¡çš„é—®é¢˜ï¼Œé€šè¿‡ MVCC å¯ä»¥è®©è¯»å†™äº’ç›¸ä¸é˜»å¡ï¼Œå³è¯»ä¸é˜»å¡å†™ï¼Œå†™ä¸é˜»å¡è¯»ï¼Œè¿™æ ·å°±å¯ä»¥æå‡äº‹åŠ¡å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚&lt;/section&gt;&lt;section&gt;ï¼ˆ2ï¼‰é™ä½äº†æ­»é”çš„æ¦‚ç‡ã€‚è¿™æ˜¯å› ä¸º MVCC é‡‡ç”¨äº†ä¹è§‚é”çš„æ–¹å¼ï¼Œè¯»å–æ•°æ®æ—¶å¹¶ä¸éœ€è¦åŠ é”ï¼Œå¯¹äºå†™æ“ä½œï¼Œä¹Ÿåªé”å®šå¿…è¦çš„è¡Œã€‚&lt;/section&gt;&lt;section&gt;ï¼ˆ3ï¼‰è§£å†³ä¸€è‡´æ€§è¯»çš„é—®é¢˜ã€‚ä¸€è‡´æ€§è¯»ä¹Ÿè¢«ç§°ä¸ºå¿«ç…§è¯»ï¼Œå½“æˆ‘ä»¬æŸ¥è¯¢æ•°æ®åº“åœ¨æŸä¸ªæ—¶é—´ç‚¹çš„å¿«ç…§æ—¶ï¼Œåªèƒ½çœ‹åˆ°è¿™ä¸ªæ—¶é—´ç‚¹ä¹‹å‰äº‹åŠ¡æäº¤æ›´æ–°çš„ç»“æœï¼Œè€Œä¸èƒ½çœ‹åˆ°è¿™ä¸ªæ—¶é—´ç‚¹ä¹‹åäº‹åŠ¡æäº¤çš„æ›´æ–°ç»“æœã€‚&lt;/section&gt;&lt;section&gt;è§£é‡Šä¸€ä¸‹å¯èƒ½éš¾ä»¥ç†è§£çš„å‡ ä¸ªè¯æ±‡ï¼š&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;h2&gt;ä¸‰ã€åº”ç”¨ä¸¾ä¾‹åˆ†æ&lt;/h2&gt;&lt;section&gt;ä¸ºäº†æ›´å¥½åœ°è®©å¤§å®¶ç†è§£MVCCï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªç¤ºä¾‹åœºæ™¯æ¥è¯´æ˜ã€‚&lt;/section&gt;&lt;section&gt;å‡è®¾æœ‰ä¸ªè´¦æˆ·é‡‘é¢è¡¨ user_balanceï¼ŒåŒ…æ‹¬ä¸‰ä¸ªå­—æ®µï¼Œåˆ†åˆ«æ˜¯ username ç”¨æˆ·åã€balance ä½™é¢å’Œ bankcard å¡å·ï¼Œè¡¨æ•°æ®å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;br/&gt;&lt;img data-ratio=&quot;0.41872791519434627&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgSWF9lHzdyW8leTRuN8I92ibparMgWpZztr8GYbIF0KBV2weALNNGj3du2UFot8MzickFkicgfhKzbOQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1132&quot;/&gt;&lt;/section&gt;&lt;section&gt;ç”¨æˆ· A å’Œç”¨æˆ· B ä¹‹é—´è¿›è¡Œè½¬è´¦ï¼Œæ­¤æ—¶æ•°æ®åº“ç®¡ç†å‘˜æƒ³è¦æŸ¥è¯¢ user_balance è¡¨ä¸­çš„æ€»é‡‘é¢ï¼Œä¸¤ä¸ªåœºæ™¯å­˜åœ¨å¹¶å‘æƒ…å†µï¼Œåœ¨æ²¡æœ‰MVCCçš„æƒ…å†µä¸‹ï¼Œä¼šå‡ºç°å“ªäº›é—®é¢˜å‘¢ã€‚&lt;/section&gt;&lt;section&gt;&lt;span&gt;Case1&lt;/span&gt;ï¼šå› ä¸ºéœ€è¦é‡‡ç”¨åŠ è¡Œé”çš„æ–¹å¼ï¼Œç”¨æˆ· A ç»™ B è½¬è´¦æ—¶é—´ç­‰å¾…å¾ˆä¹…ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;br/&gt;&lt;img data-ratio=&quot;0.46637744034707157&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgSWF9lHzdyW8leTRuN8I92ib5ianYUAjlHDGr4baraZdWU1yVJdAibJFicPBXPlvotnCNWhqzWbn6HpRg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;922&quot;/&gt;&lt;br/&gt;&lt;span&gt;Case2&lt;/span&gt;ï¼šå½“æˆ‘ä»¬è¯»å–çš„æ—¶å€™ç”¨äº†åŠ è¡Œé”ï¼Œå¯èƒ½ä¼šå‡ºç°æ­»é”çš„æƒ…å†µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;br/&gt;&lt;img data-ratio=&quot;0.48579545454545453&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgSWF9lHzdyW8leTRuN8I92ibjic0XbLW04lLRFGYzhgv76UeZtjpFD1C24SYHkDpA40Jwgxqhf3v0WQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;704&quot;/&gt;&lt;br/&gt;æ¯”å¦‚å½“æˆ‘ä»¬è¯»åˆ° A æœ‰ 1000 å…ƒçš„æ—¶å€™ï¼Œæ­¤æ—¶ B å¼€å§‹æ‰§è¡Œç»™ A è½¬è´¦ã€‚&lt;/section&gt;&lt;h2&gt;å››ã€InnoDBå¦‚ä½•å®ç°MVCCï¼Ÿ&lt;/h2&gt;&lt;section&gt;å½“æŸ¥è¯¢ä¸€æ¡è®°å½•çš„æ—¶å€™ï¼Œæ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š&lt;/section&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;é¦–å…ˆè·å–äº‹åŠ¡è‡ªå·±çš„ç‰ˆæœ¬å·ï¼Œä¹Ÿå°±æ˜¯äº‹åŠ¡ IDï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;è·å– Read Viewï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æŸ¥è¯¢å¾—åˆ°çš„æ•°æ®ï¼Œç„¶åä¸ Read View ä¸­çš„äº‹åŠ¡ç‰ˆæœ¬å·è¿›è¡Œæ¯”è¾ƒï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;å¦‚æœä¸ç¬¦åˆ ReadView è§„åˆ™ï¼Œå°±éœ€è¦ä» Undo Log ä¸­è·å–å†å²å¿«ç…§ï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;æœ€åè¿”å›ç¬¦åˆè§„åˆ™çš„æ•°æ®ã€‚&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ç›¸å…³æ¦‚å¿µ&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;1. äº‹åŠ¡ç‰ˆæœ¬å·&lt;/span&gt;&lt;/section&gt;&lt;section&gt;ä¸€ä¸ªè‡ªå¢é•¿çš„äº‹åŠ¡IDï¼Œç”¨äºæ ‡è®°äº‹åŠ¡æ‰§è¡Œçš„å…ˆåé¡ºåºã€‚&lt;/section&gt;&lt;section&gt;&lt;span&gt;2. Read View&lt;/span&gt;&lt;/section&gt;&lt;section&gt;åœ¨ MVCC æœºåˆ¶ä¸­ï¼Œå¤šä¸ªäº‹åŠ¡å¯¹åŒä¸€ä¸ªè¡Œè®°å½•è¿›è¡Œæ›´æ–°ä¼šäº§ç”Ÿå¤šä¸ªå†å²å¿«ç…§ï¼Œè¿™äº›å†å²å¿«ç…§ä¿å­˜åœ¨ Undo Log é‡Œã€‚å¦‚æœä¸€ä¸ªäº‹åŠ¡æƒ³è¦æŸ¥è¯¢è¿™ä¸ªè¡Œè®°å½•ï¼Œéœ€è¦è¯»å–å“ªä¸ªç‰ˆæœ¬çš„è¡Œè®°å½•å‘¢ï¼Ÿ&lt;/section&gt;&lt;section&gt;è¿™æ—¶å°±éœ€è¦ç”¨åˆ° Read View äº†ï¼Œå®ƒå¸®æˆ‘ä»¬è§£å†³äº†è¡Œçš„å¯è§æ€§é—®é¢˜ã€‚Read View ä¿å­˜äº†å½“å‰äº‹åŠ¡å¼€å¯æ—¶æ‰€æœ‰æ´»è·ƒï¼ˆè¿˜æ²¡æœ‰æäº¤ï¼‰çš„äº‹åŠ¡åˆ—è¡¨ï¼Œæ¢ä¸ªè§’åº¦ï¼Œå¯ä»¥ç†è§£ä¸º Read View ä¿å­˜äº†ä¸åº”è¯¥è®©è¿™ä¸ªäº‹åŠ¡çœ‹åˆ°çš„å…¶ä»–çš„äº‹åŠ¡ ID åˆ—è¡¨ã€‚&lt;/section&gt;&lt;section&gt;Read VIew ä¸­çš„å‡ ä¸ªé‡è¦å±æ€§ï¼š&lt;br/&gt;&lt;img data-ratio=&quot;0.29342105263157897&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgSWF9lHzdyW8leTRuN8I92ibUBtWQrUzWJxh0pbutac3pia3tYtG5Wlicof8OKf0B5tLYuVEp76HttiaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;760&quot;/&gt;&lt;/section&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;up_limit_idï¼Œæ´»è·ƒçš„äº‹åŠ¡ä¸­æœ€å°çš„äº‹åŠ¡ IDï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;trx_idsï¼Œç³»ç»Ÿå½“å‰æ­£åœ¨æ´»è·ƒçš„äº‹åŠ¡ ID é›†åˆï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;low_limit_idï¼Œæ´»è·ƒçš„äº‹åŠ¡ä¸­æœ€å¤§çš„äº‹åŠ¡ IDï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;creator_trx_idï¼Œåˆ›å»ºè¿™ä¸ª Read View çš„äº‹åŠ¡ IDã€‚&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;3. è¡Œè®°å½•çš„éšè—åˆ—&lt;/span&gt;&lt;/section&gt;&lt;section&gt;InnoDB çš„å¶å­èŠ‚ç‚¹æ®µå­˜å‚¨äº†æ•°æ®é¡µï¼Œæ•°æ®é¡µä¸­ä¿å­˜äº†è¡Œè®°å½•ï¼Œåœ¨è¿™äº›è¡Œè®°å½•ä¸­æœ‰ä¸€äº›é‡è¦çš„éšè—å­—æ®µï¼š&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;4. èšé›†ç´¢å¼•&lt;/span&gt;&lt;/section&gt;&lt;section&gt;èšé›†ç´¢å¼•æ˜¯æŒ‡æ•°æ®åº“è¡¨è¡Œä¸­æ•°æ®çš„ç‰©ç†é¡ºåºä¸é”®å€¼çš„é€»è¾‘ï¼ˆç´¢å¼•ï¼‰é¡ºåºç›¸åŒã€‚ä¸€ä¸ªè¡¨åªèƒ½æœ‰ä¸€ä¸ªèšé›†ç´¢å¼•ï¼Œå› ä¸ºä¸€ä¸ªè¡¨çš„ç‰©ç†é¡ºåºåªæœ‰ä¸€ç§æƒ…å†µï¼Œæ‰€ä»¥ï¼Œå¯¹åº”çš„èšé›†ç´¢å¼•åªèƒ½æœ‰ä¸€ä¸ªã€‚&lt;/section&gt;&lt;section&gt;&lt;span&gt;5. Undo Log&lt;/span&gt;&lt;/section&gt;&lt;section&gt;InnoDB å°†è¡Œè®°å½•å¿«ç…§ä¿å­˜åœ¨ Undo Logï¼Œå¯ä»¥åœ¨å›æ»šæ®µä¸­æ‰¾åˆ°å®ƒä»¬ï¼Œä¸»è¦ç”¨äºè®°å½•æ•°æ®è¢«ä¿®æ”¹ä¹‹å‰çš„æ—¥å¿—ï¼Œåœ¨å¯¹è¡¨ä¿¡æ¯åšä¿®æ”¹ä¹‹å‰å…ˆä¼šæŠŠæ•°æ®æ‹·è´åˆ°Undo Logé‡Œï¼Œå½“äº‹åŠ¡è¿›è¡Œå›æ»šæ—¶å¯ä»¥é€šè¿‡Undo Logé‡Œçš„æ—¥å¿—è¿›è¡Œæ•°æ®è¿˜åŸã€‚&lt;/section&gt;&lt;section&gt;å›æ»šæ®µä¸­å›æ»šæŒ‡é’ˆé—´å…³è”å…³ç³»ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;br/&gt;&lt;img data-ratio=&quot;0.6420047732696897&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgSWF9lHzdyW8leTRuN8I92ibOgOQqJruiaTh6FAICEYgHpy9yGFvqL3joLF2yszhtMS5K6HmpxdIIVw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;838&quot;/&gt;&lt;span&gt;äº”ã€InnoDBæ˜¯å¦‚ä½•è§£å†³å¹»è¯»çš„ï¼Ÿ&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;1ã€åœ¨è¯»å·²æäº¤çš„æƒ…å†µä¸‹ï¼Œå³ä½¿é‡‡ç”¨äº† MVCC æ–¹å¼ä¹Ÿä¼šå‡ºç°å¹»è¯»&lt;/span&gt;&lt;br/&gt;&lt;img data-ratio=&quot;0.5613425925925926&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgSWF9lHzdyW8leTRuN8I92ib7xhCkia2PRja08oCFxSNf2UkgHo2u6KVAy3reXZd1yWRO1wbHaT5Dnw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;864&quot;/&gt;&lt;/section&gt;&lt;blockquote&gt;&lt;section&gt;æˆ‘ä»¬åŒæ—¶å¼€å¯äº‹åŠ¡ A å’Œäº‹åŠ¡ Bï¼Œå…ˆåœ¨äº‹åŠ¡ A ä¸­è¿›è¡ŒæŸä¸ªæ¡ä»¶èŒƒå›´çš„æŸ¥è¯¢ï¼Œè¯»å–çš„æ—¶å€™é‡‡ç”¨æ’å®ƒé”ï¼Œåœ¨äº‹åŠ¡ B ä¸­å¢åŠ ä¸€æ¡ç¬¦åˆè¯¥æ¡ä»¶èŒƒå›´çš„æ•°æ®ï¼Œå¹¶è¿›è¡Œæäº¤ï¼Œç„¶åæˆ‘ä»¬åœ¨äº‹åŠ¡ A ä¸­å†æ¬¡æŸ¥è¯¢è¯¥æ¡ä»¶èŒƒå›´çš„æ•°æ®ï¼Œå°±ä¼šå‘ç°ç»“æœé›†ä¸­å¤šå‡ºä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°æ®ï¼Œè¿™æ ·å°±å‡ºç°äº†å¹»è¯»ã€‚&lt;/section&gt;&lt;/blockquote&gt;&lt;section&gt;å‡ºç°å¹»è¯»çš„åŸå› æ˜¯åœ¨è¯»å·²æäº¤çš„æƒ…å†µä¸‹ï¼ŒInnoDB åªé‡‡ç”¨è®°å½•é”ï¼ˆRecord Lockingï¼‰ã€‚&lt;/section&gt;&lt;section&gt;InnoDB ä¸‰ç§è¡Œé”çš„æ–¹å¼ï¼š&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;2ã€åœ¨å¯é‡å¤è¯»çš„æƒ…å†µä¸‹ï¼ŒInnoDB å¯ä»¥é€šè¿‡ Next-Key é” +MVCC æ¥è§£å†³å¹»è¯»é—®é¢˜ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;æƒ³æ’å…¥çƒå‘˜è‰¾åˆ©å…‹æ–¯Â·ä¼¦ï¼ˆèº«é«˜ 2.16 ç±³ï¼‰çš„æ—¶å€™ï¼Œäº‹åŠ¡ B ä¼šè¶…æ—¶ï¼Œæ— æ³•æ’å…¥è¯¥æ•°æ®ã€‚&lt;/section&gt;&lt;section&gt;è¿™æ˜¯å› ä¸ºé‡‡ç”¨äº† Next-Key é”ï¼Œä¼šå°† height&amp;gt;2.08 çš„èŒƒå›´éƒ½è¿›è¡Œé”å®šï¼Œå°±æ— æ³•æ’å…¥ç¬¦åˆè¿™ä¸ªèŒƒå›´çš„æ•°æ®äº†ã€‚ç„¶åäº‹åŠ¡ A é‡æ–°è¿›è¡Œæ¡ä»¶èŒƒå›´çš„æŸ¥è¯¢ï¼Œå°±ä¸ä¼šå‡ºç°å¹»è¯»çš„æƒ…å†µã€‚&lt;img data-ratio=&quot;0.5605726872246696&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgSWF9lHzdyW8leTRuN8I92ibAmJT4ekba2QL5LExGBbztAMsPMyeJG9Kn4syOWCYdMaicTpfZnHicvmg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1816&quot;/&gt;&lt;/section&gt;&lt;h2&gt;å…­ã€æ€»ç»“&lt;/h2&gt;&lt;p&gt;&lt;span&gt;MVCC çš„æ ¸å¿ƒå°±æ˜¯ Undo Log+ Read Viewã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åŒæ—¶é’ˆå¯¹ä¸åŒçš„éš”ç¦»çº§åˆ«ï¼ŒRead View çš„ç”Ÿæˆç­–ç•¥ä¸åŒï¼Œä¹Ÿå°±å®ç°äº†ä¸åŒçš„éš”ç¦»çº§åˆ«ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;ğŸ‰&lt;/span&gt;Â ç¦åˆ©&lt;/span&gt;&lt;span&gt;ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;å…³æ³¨å…¬ä¼—å·å›å¤å…³é”®å­—ï¼š&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;MySQL&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;ï¼Œå³å¯å…è´¹è·å–&lt;strong&gt;ã€Š&lt;span&gt;é«˜æ€§èƒ½MySQLÂ ç¬¬3ç‰ˆã€‹&lt;/span&gt;ä¸€å¥—&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â &lt;/span&gt;&lt;span&gt;END&lt;/span&gt;&lt;span&gt;Â Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·Â·&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å…³æ³¨å…¬ä¼—å·ï¼Œå…è´¹é¢†å­¦ä¹ èµ„æ–™&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzA3MDg5MDkzOA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgQmUQ0Aca9qSYNFn0tQEXQc5EibBkqQLYtibYBj1hXuagwXkNc3kVwplHxIl7KQfBIiagysgn9GDUUibw/0?wx_fmt=png&quot; data-nickname=&quot;æ¶æ„ç²¾è¿›ä¹‹è·¯&quot; data-alias=&quot;jiagou_jingjin&quot; data-signature=&quot;åå¹´ç ”å‘é£é›¨è·¯ï¼Œå¤§å‚æ¶æ„å¸ˆï¼ŒCSDNåšå®¢ä¸“å®¶ã€‚ä¸“æ³¨è½¯ä»¶æ¶æ„ç ”ç©¶ï¼ŒæŠ€æœ¯å­¦ä¹ ä¸èŒä¸šæˆé•¿ï¼ŒåšæŒåˆ†äº«æ¥åœ°æ°”å„¿çš„æ¶æ„æŠ€æœ¯å¹²è´§æ–‡ç« ï¼&quot; data-from=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;span&gt;åå¹´ç ”å‘è·¯ï¼Œå¤§å‚æ¶æ„å¸ˆï¼Œ&lt;/span&gt;&lt;span&gt;CSDNåšå®¢ä¸“å®¶&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;ä¸“æ³¨æ¶æ„æŠ€æœ¯å­¦ä¹ åŠåˆ†äº«ï¼ŒèŒä¸šä¸è®¤çŸ¥å‡çº§&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;åšæŒåˆ†äº«æ¥åœ°æ°”å„¿çš„å¹²è´§ï¼Œ&lt;span&gt;æœŸå¾…ä¸ä½ ä¸€èµ·æˆé•¿&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¾€æœŸçƒ­æ–‡æ¨èï¼š&lt;/span&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-tools=&quot;135ç¼–è¾‘å™¨&quot; data-id=&quot;98311&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.5555555555555556&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/Z2bVaFK6CgTqLjdQBs7fV8zqHRaQhA2ibia13fFn6ibS5qr5PpmZoxd8nlhAyJu7d1CjLicAruicOEb7uxibEGM476xg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;900&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section data-tools=&quot;135ç¼–è¾‘å™¨&quot; data-id=&quot;87502&quot;&gt;&lt;p&gt;&lt;span&gt;ã€Œæ¶æ„ç²¾è¿›ä¹‹è·¯ã€ä¸“æ³¨æ¶æ„ç ”ç©¶ï¼ŒæŠ€æœ¯åˆ†äº«&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-tools=&quot;135ç¼–è¾‘å™¨&quot; data-id=&quot;97708&quot;&gt;&lt;section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;span&gt;ç‚¹â€œèµâ€å’Œâ€œåœ¨çœ‹â€å“¦&lt;/span&gt;&lt;img class=&quot;__bg_gif&quot; data-ratio=&quot;1.5925925925925926&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/noz2jw2hPlWiaCrGuJxBicU5mcib3QapDLyo6eKnNVm9dPTV4Z1SicHLtrCCwOG9gblMBFlKf7p9cvwL6wIkZJvamg/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;135&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>fa9d7005e91a8e974312da240e159e7d</guid>
<title>å¦‚ä½•åšåˆ° 4 å¤©ä¸Šçº¿ä¸€ä¸ªå°ç¨‹åºï¼Ÿ</title>
<link>https://toutiao.io/k/4w4by6z</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section&gt;&lt;img data-ratio=&quot;0.5472222222222223&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/XyyqpRDrAeNH25ickiaKXrlj76LWRkObnMnSl9vAghH8hS3ibsckPOfcFHicAMdiaI4UZiaETIic5uvicC5nDLsticDpGpg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è‡ª 6 æœˆ 6 å·ä¸Šçº¿ â€œé»‘å®¢è¯´â€ ç½‘é¡µç‰ˆï¼ˆhackertalk.netï¼‰ä»¥æ¥å¸å¼•äº†å¾ˆå¤šç”¨æˆ·ï¼Œä¸ºäº†è¿›ä¸€æ­¥å®Œå–„ç»ˆç«¯ä½“éªŒï¼Œæˆ‘ä»¬å†³å®šå¤ç”¨å·²æœ‰çš„æŠ€æœ¯æ ˆï¼Œå®ç°å¾®ä¿¡ç«¯å°ç¨‹åºï¼Œå‰åå¼€å‘ä»…èŠ±äº†4å¤©ï¼Œæœ¬æ–‡ä¸»è¦ä»æŠ€æœ¯çš„è§’åº¦è®¨è®ºæˆ‘ä»¬å¦‚ä½•å¿«é€Ÿä¸Šçº¿å°ç¨‹åºã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.7289719626168224&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/XyyqpRDrAeNH25ickiaKXrlj76LWRkObnM3INq4SAWdibiaUbrYkFBrBztRt7sAcxxwiagq4Dxu8k1d2maGnRgibhqYA/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;642&quot;/&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;br/&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é»‘å®¢è¯´æ˜¯ä»€ä¹ˆ ï¼Ÿ&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ˜¯æˆ‘ä»¬ä¸“é—¨ä¸ºç¨‹åºå‘˜ç¾¤ä½“å®šåˆ¶çš„äº¤æµå¹³å°ï¼Œæœ‰åŠæ—¶æŠ€æœ¯èµ„è®¯ã€é«˜è´¨é‡æŠ€æœ¯é—®ç­”ã€å®ç”¨ç¼–ç¨‹ç»éªŒåˆ†äº«ï¼Œè¿˜æœ‰ç¨‹åºå‘˜çš„æ—¥å¸¸ç”Ÿæ´»ã€‚æ¥è¿‘ 500 ä¸ªç¼–ç¨‹ç›¸å…³å‚ç›´è¯é¢˜ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.32297447280799113&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/XyyqpRDrAeNH25ickiaKXrlj76LWRkObnM1qeW3xAFHBY0aZZhm6rZpTriakpwfjIialW4xtSNIibdeEO7lbqSuIFNg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;901&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸€ä¸ªé«˜åº¦å®šåˆ¶çš„ Markdown ç¼–è¾‘å™¨ï¼šæ‰€è§å³æ‰€å¾—ï¼Œå†ä¹Ÿä¸ç”¨åˆ†å±é¢„è§ˆäº†ï½&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.4826086956521739&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/XyyqpRDrAeNH25ickiaKXrlj76LWRkObnMRJQjzwvF8ibHTBOibM0anniaFsCkjlKoibVKCv2DeWtMCWuwEXESvYibicEA/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;690&quot;/&gt;&lt;figcaption&gt;ç½‘é¡µç‰ˆç¼–è¾‘å™¨ï¼šæ’å…¥ latex å…¬å¼&lt;/figcaption&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.4826086956521739&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/XyyqpRDrAeNH25ickiaKXrlj76LWRkObnMicDcDlyHvSvysZEPry2e3ibzIeNvAqbhQlvILxB2qrCFbYUFaBjNwc9Q/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;690&quot;/&gt;&lt;figcaption&gt;ç½‘é¡µç‰ˆç¼–è¾‘å™¨ï¼šæ’å…¥ markdown æ–‡æœ¬&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥æˆ³ä¸‹é¢é“¾æ¥ç›´æ¥ä½“éªŒå°ç¨‹åºç‰ˆæœ¬Â ğŸ‘‡ğŸ‘‡&lt;/p&gt;&lt;p&gt;&lt;mp-miniprogram data-miniprogram-appid=&quot;wx815bfb420a5256e3&quot; data-miniprogram-path=&quot;pages/post/index?id=189392795524841472&quot; data-miniprogram-nickname=&quot;é»‘å®¢è¯´&quot; data-miniprogram-avatar=&quot;http://mmbiz.qpic.cn/mmbiz_png/UAvN7J9XxS85wcQ2kbPrpp1dEd68bUtdI9PPmbEjG8YgZ9ibtzqn7SHH0IFUotqItjqSUZVyjv6Po6hd0STEYQw/640?wx_fmt=png&amp;amp;wxfrom=200&quot; data-miniprogram-title=&quot;é»‘å®¢è¯´ç¬¬ä¸€å¸–ï¼šHappy hacking!&quot; data-miniprogram-imageurl=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/XyyqpRDrAeNH25ickiaKXrlj76LWRkObnMJB90XF7f8vMFAknwsphO04lQXdS4H7g3D8szGSGe1uhIYZUFeBBKRw/0?wx_fmt=jpeg&quot; data-miniprogram-type=&quot;card&quot; data-miniprogram-servicetype=&quot;0&quot;/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç½‘é¡µç«¯æŠ€æœ¯æ ˆ&lt;br/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†ä»£ç æ›´å¥½åœ°å¤ç”¨å’Œç»´æŠ¤ï¼Œæˆ‘ä»¬åœ¨ Vue å’Œ React ä¸­é€‰æ‹©äº† Reactï¼Œç½‘é¡µç«¯ä¸»è¦æŠ€æœ¯æ ˆå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;react + typescript + redux + immer + redux-saga + axios + tailwindcss + fakerjs&lt;/strong&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;typescript é¡¹ç›®å¿…å¤‡ï¼Œæå¤§æé«˜ä»£ç æ­£ç¡®æ€§å’Œå¯ç»´æŠ¤æ€§&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;immer æ›¿ä»£äº†ä¼ ç»Ÿçš„ immutablejs æ–¹æ¡ˆï¼Œåœ¨ reducer ä¸­å®ç°ç±»ä¼¼ vue çš„ç›´æ¥æ•°å€¼æ“ä½œï¼ˆç®€æ´æ€§ï¼‰ï¼ŒåŒæ—¶ä¿æŒ immutable æ•°æ®æµçš„ä¼˜ç‚¹ï¼ˆå¯ç»´æŠ¤æ€§ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;saga ä¿æŒäº†APIæ¥å£è°ƒç”¨çš„ç®€æ´æ€§ã€å¯è°ƒè¯•æ€§&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;axios å°è£…äº† http è¯·æ±‚ï¼Œå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ adapter é€‚åº”ä¸åŒç»ˆç«¯è¿è¡Œç¯å¢ƒ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;tailwindcss é€šè¿‡åŸå­åŒ–çš„ css å¤§å¤§é™ä½äº†æ ·å¼æ–‡ä»¶ä½“ç§¯ï¼ŒåŠ å¿«ç½‘é¡µåŠ è½½é€Ÿåº¦ï¼Œä¹Ÿå¾ˆå¤§ç¨‹åº¦é™ä½äº†å°ç¨‹åºåŒ…ä½“ç§¯ï¼ˆ2MB é™åˆ¶ï¼‰ï¼Œæ›´å¤šçš„ä»£ç ç©ºé—´å¯ä»¥ç”¨äº UI ç•Œé¢å’Œ JS é€»è¾‘&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;fakerjs ç”¨äºæ¨¡æ‹Ÿæ•°æ®ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸­æ³¨å…¥æ•°æ®åˆ° reduxï¼Œæ–¹ä¾¿è°ƒè¯•&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å°ç¨‹åºç«¯æŠ€æœ¯æ ˆ&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°ç¨‹åºç«¯æŠ€æœ¯æ ˆå’Œç½‘é¡µç«¯é«˜åº¦é‡åˆï¼ˆè¿™ä¹Ÿæ˜¯æˆ‘ä»¬èƒ½å¤Ÿå¿«é€Ÿä¸Šçº¿åº”ç”¨çš„åŸå› ï¼‰ï¼Œå…¶ä¸­æœ€å¤§çš„å˜åŒ–æ˜¯ç”± react å˜ä¸º react + taroã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;TaroÂ æ˜¯ä¸€ä¸ªå¼€æ”¾å¼è·¨ç«¯è·¨æ¡†æ¶è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒä½¿ç”¨ React/Vue/Nerv ç­‰æ¡†æ¶æ¥å¼€å‘Â å¾®ä¿¡Â /Â äº¬ä¸œÂ /Â ç™¾åº¦Â /Â æ”¯ä»˜å®Â /Â å­—èŠ‚è·³åŠ¨Â /Â QQÂ å°ç¨‹åº / H5 / RN ç­‰åº”ç”¨&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°ç¨‹åºç«¯å¼€å‘å¯è°“æ··ä¹±è‡³æï¼ŒåŸç”Ÿä»£ç éš¾ä»¥ç»„ç»‡ã€éš¾ä»¥ç»´æŠ¤ï¼Œé€šå¸¸éƒ½éœ€è¦ä¸€äº›æ¡†æ¶è¿›è¡Œå°è£…ï¼ŒTaro æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨äº†å‡ ä¸ªä¸åŒæ–¹æ¡ˆåå†³å®šé‡‡çº³çš„ï¼Œå’Œ react é«˜åº¦é‡åˆï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ hookï¼Œæå¤§æé«˜ä»£ç å¤ç”¨çš„å¯èƒ½æ€§ï¼ˆè¿™æ˜¯ä»¥å‰ç§¯ç´¯çš„ç»éªŒåŸºç¡€ï¼‰ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;APP ç«¯æŠ€æœ¯æ ˆ&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›®å‰é»‘å®¢è¯´è¿˜æ²¡æœ‰ä¸Šçº¿ç›¸å…³ APPï¼ŒæŠ€æœ¯æ ˆå¤ç”¨å¯ä»¥ç›´æ¥å°† react æ¢ä¸º react-nativeã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä»£ç æ–‡ä»¶ç»„ç»‡&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»„ç»‡è‰¯å¥½çš„ä»£ç æ˜¯é«˜åº¦å¤ç”¨çš„å…³é”®ï¼Œæˆ‘ä»¬é‡‡ç”¨ components + containers çš„ä»£ç åˆ†å‰²æ–¹å¼ï¼Œä¸¥æ ¼è§„èŒƒä»£ç ç»„ç»‡æ–¹å¼ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;UI ç•Œé¢ç›¸å…³ç»„ä»¶åªèƒ½æ”¾åœ¨ components æ–‡ä»¶å¤¹ï¼Œæ— çŠ¶æ€ï¼Œä¸èƒ½è€¦åˆä»»ä½•çŠ¶æ€ç®¡ç†åº“ç›¸å…³ä»£ç &lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ•°æ®æ³¨å…¥çš„å®¹å™¨ç»„ä»¶åªèƒ½æ”¾äº containers æ–‡ä»¶å¤¹ï¼Œä¸èƒ½åŒ…å«ä»»ä½• UI ç›¸å…³ä»£ç ï¼Œæ¯”å¦‚ &lt;code&gt;div&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ¨¡å—åŒ–ã€åŸå­åŒ–ï¼šä»£ç åˆ†å±‚è®¾è®¡ï¼Œå®ç°ç»„ä»¶é«˜åº¦å¤ç”¨ï¼Œä¿æŒåº”ç”¨ä¸€è‡´æ€§&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ–‡ä»¶å¤¹å¸ƒå±€å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;â”œâ”€â”€ assets Â Â Â Â å›ºå®šèµ„æºæ–‡ä»¶ï¼šå›¾ç‰‡ã€æ–‡å­—ã€svg ç­‰&lt;br/&gt;â”œâ”€â”€Â componentsÂ çº¯Â UIÂ ç»„ä»¶&lt;br/&gt;â”œâ”€â”€Â constantsÂ Â å…¨å±€å¸¸é‡&lt;br/&gt;â”œâ”€â”€Â containersÂ çº¯å®¹å™¨ç»„ä»¶&lt;br/&gt;â”œâ”€â”€Â hooksÂ Â Â Â Â Â è‡ªå®šä¹‰Â hooks&lt;br/&gt;â”œâ”€â”€Â layoutÂ Â Â Â Â å¸ƒå±€ç›¸å…³Â UIÂ é€»è¾‘&lt;br/&gt;â”œâ”€â”€Â localesÂ Â Â Â å›½é™…åŒ–ç›¸å…³&lt;br/&gt;â”œâ”€â”€Â pagesÂ Â Â Â Â Â æ•´é¡µé€»è¾‘&lt;br/&gt;â”œâ”€â”€Â servicesÂ Â Â APIÂ æ¥å£ä»£ç &lt;br/&gt;â”œâ”€â”€Â storeÂ Â Â Â Â Â çŠ¶æ€ç®¡ç†ä»£ç &lt;br/&gt;â”œâ”€â”€Â stylesÂ Â Â Â Â æ ·å¼ä»£ç &lt;br/&gt;â”œâ”€â”€Â typesÂ Â Â Â Â Â tsÂ ç±»å‹å£°æ˜&lt;br/&gt;â””â”€â”€Â utilsÂ Â Â Â Â Â å…¬å…±å·¥å…·ç±»&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Store çŠ¶æ€ç®¡ç†&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;â”œâ”€â”€Â actions&lt;br/&gt;â”œâ”€â”€Â reducers&lt;br/&gt;â”œâ”€â”€Â sagas&lt;br/&gt;â”œâ”€â”€Â selectors&lt;br/&gt;â””â”€â”€Â types&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;saga è°ƒç”¨ API ä»£ç ç»„ç»‡å¦‚ä¸‹ï¼šè°ƒç”¨è°ƒè¯•éå¸¸æ–¹ä¾¿&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;*Â &lt;span&gt;getPostById&lt;/span&gt;(&lt;span&gt;action:Â ReduxAction&lt;/span&gt;):Â &lt;span&gt;any&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;try&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;const&lt;/span&gt;Â resÂ =Â &lt;span&gt;yield&lt;/span&gt;Â call(postApi.getPostById,Â action.payload);&lt;br/&gt;Â Â Â Â &lt;span&gt;yield&lt;/span&gt;Â put({Â &lt;span&gt;type&lt;/span&gt;:Â T.GET_POST_SUCCESS,Â payload:Â res.data.dataÂ });&lt;br/&gt;Â Â Â Â action.resolve?.();&lt;br/&gt;Â Â }Â &lt;span&gt;catch&lt;/span&gt;Â (e)Â {&lt;br/&gt;Â Â Â Â action.reject?.();&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­çš„ postApi æ¥è‡ª services æ–‡ä»¶å¤¹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;export&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;function&lt;/span&gt;Â &lt;span&gt;getPostById&lt;/span&gt;(&lt;span&gt;id:Â &lt;span&gt;string&lt;/span&gt;&lt;/span&gt;)Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â axios.get&amp;lt;R&amp;lt;Post&amp;gt;&amp;gt;(&lt;span&gt;`/v1/posts/by_id/&lt;span&gt;${id}&lt;/span&gt;`&lt;/span&gt;);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å°ç¨‹åºç«¯ç‰¹æ®Šé€‚é…&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Cookie&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±äºå°ç¨‹åºç«¯æ— æ³•æ”¯æŒ http cookieï¼Œæ— æ³•åƒæµè§ˆå™¨ä¸€æ ·ä½¿ç”¨ cookie æœºåˆ¶ä¿è¯å®‰å…¨æ€§å’Œç»´æŠ¤ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨æ¨¡æ‹Ÿä¸€ä¸ª cookie æœºåˆ¶ï¼Œè¿™é‡Œæˆ‘ä»¬æ¨èä½¿ç”¨äº¬ä¸œå¼€æºçš„ä¸€ä¸ªæ–¹æ¡ˆï¼š&lt;strong&gt;äº¬ä¸œè´­ç‰©å°ç¨‹åºcookieæ–¹æ¡ˆå®è·µ&lt;/strong&gt;ï¼Œå¯ä»¥å®ç° cookie è¿‡æœŸã€å¤š cookie åŠŸèƒ½ã€‚å…¶åŸç†ä½¿ç”¨äº† localstorage æ›¿ä»£ cookieã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Http Request&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°ç¨‹åºç«¯åªèƒ½ä½¿ç”¨ &lt;code&gt;wx.request&lt;/code&gt; è¿›è¡Œ http è¯·æ±‚ï¼Œå¦‚æœå¤§é‡ API ç›´æ¥ä½¿ç”¨è¿™ä¸ªæ¥å£ç¼–å†™ï¼Œä»£ç å°†éš¾ä»¥ç»´æŠ¤å’Œå¤ç”¨ï¼Œæˆ‘ä»¬ä½¿ç”¨ axios çš„ adapter æ¨¡å¼å°è£… &lt;code&gt;wx.request&lt;/code&gt; ï¼Œè¯·æ±‚ç»“æœå’Œ error éƒ½æŒ‰ axios æ•°æ®æ ¼å¼è¿›è¡ŒåŠ å·¥ã€‚è¿™æ ·æˆ‘ä»¬å°±èƒ½å¤Ÿç›´æ¥åœ¨å°ç¨‹åºç«¯ä½¿ç”¨ axios äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è½¬æ¢è¯·æ±‚å‚æ•°ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;function&lt;/span&gt;Â &lt;span&gt;toQueryStr&lt;/span&gt;(&lt;span&gt;obj:Â &lt;span&gt;any&lt;/span&gt;&lt;/span&gt;)Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (!obj)Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&#x27;&#x27;&lt;/span&gt;;&lt;br/&gt;Â Â &lt;span&gt;const&lt;/span&gt;Â arr:Â &lt;span&gt;string&lt;/span&gt;[]Â =Â [];&lt;br/&gt;Â Â &lt;span&gt;for&lt;/span&gt;Â (&lt;span&gt;const&lt;/span&gt;Â pÂ &lt;span&gt;in&lt;/span&gt;Â obj)Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (obj.hasOwnProperty(p))Â {&lt;br/&gt;Â Â Â Â Â Â arr.push(pÂ +Â &lt;span&gt;&#x27;=&#x27;&lt;/span&gt;Â +Â &lt;span&gt;encodeURIComponent&lt;/span&gt;(obj[p]));&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â }&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&#x27;?&#x27;&lt;/span&gt;Â +Â arr.join(&lt;span&gt;&#x27;&amp;amp;&#x27;&lt;/span&gt;);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;axios é€‚é…å™¨æ¨¡å¼ï¼ˆCookieUtil ä»£ç å‚è€ƒä¸Šæ–‡äº¬ä¸œçš„ä¾‹å­ï¼‰&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;axios.defaults.adapterÂ =Â &lt;span&gt;&lt;span&gt;function&lt;/span&gt;(&lt;span&gt;config:Â AxiosRequestConfig&lt;/span&gt;)Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â è¯·æ±‚å­—æ®µæ‹¼æ¥&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;let&lt;/span&gt;Â urlÂ =Â &lt;span&gt;&#x27;https://api.example.com&#x27;&lt;/span&gt;Â +Â config.url;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (config.params)Â {&lt;br/&gt;Â Â Â Â Â Â urlÂ +=Â toQueryStr(config.params);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â å¸¸è§„è¯·æ±‚å°è£…&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â &lt;span&gt;Promise&lt;/span&gt;(&lt;span&gt;(&lt;span&gt;resolve:Â (&lt;span&gt;r:Â AxiosResponse&lt;/span&gt;)Â =&amp;gt;Â &lt;span&gt;void&lt;/span&gt;,Â reject:Â (&lt;span&gt;e:Â AxiosError&lt;/span&gt;)Â =&amp;gt;Â &lt;span&gt;void&lt;/span&gt;&lt;/span&gt;)Â =&amp;gt;&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â wx.request({&lt;br/&gt;Â Â Â Â Â Â Â Â url:Â url,&lt;br/&gt;Â Â Â Â Â Â Â Â method:Â config.method,&lt;br/&gt;Â Â Â Â Â Â Â Â data:Â config.data,&lt;br/&gt;Â Â Â Â Â Â Â Â header:Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;&#x27;Cookie&#x27;&lt;/span&gt;:Â CookieUtil.getCookiesStr(),&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;&#x27;X-XSRF-TOKEN&#x27;&lt;/span&gt;:Â CookieUtil.getCookie(&lt;span&gt;&#x27;XSRF-TOKEN&#x27;&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â Â Â },&lt;br/&gt;Â Â Â Â Â Â Â Â success:Â &lt;span&gt;(&lt;span&gt;res&lt;/span&gt;)Â =&amp;gt;&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;const&lt;/span&gt;Â setCookieStrÂ =Â res.header[&lt;span&gt;&#x27;Set-Cookie&#x27;&lt;/span&gt;]Â ||Â res.header[&lt;span&gt;&#x27;set-cookie&#x27;&lt;/span&gt;];&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â CookieUtil.setCookieFromHeader(setCookieStr);&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;const&lt;/span&gt;Â axiosRes:Â AxiosResponseÂ =Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â data:Â res.data,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â status:Â res.statusCode,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â statusText:Â StatusText[res.statusCode]Â &lt;span&gt;as&lt;/span&gt;Â &lt;span&gt;string&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â headers:Â res.header,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â config&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â };&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (res.statusCodeÂ &amp;lt;Â &lt;span&gt;400&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â resolve(axiosRes);&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â }Â &lt;span&gt;else&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;const&lt;/span&gt;Â axiosErr:Â AxiosErrorÂ =Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â name:Â &lt;span&gt;&#x27;&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â message:Â &lt;span&gt;&#x27;&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â config,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â response:Â axiosRes,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â isAxiosError:Â &lt;span&gt;true&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â toJSON:Â &lt;span&gt;&lt;span&gt;()&lt;/span&gt;Â =&amp;gt;&lt;/span&gt;Â res&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â };&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â reject(axiosErr);&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â },&lt;br/&gt;Â Â Â Â Â Â Â Â fail:Â &lt;span&gt;(&lt;span&gt;e:Â &lt;span&gt;any&lt;/span&gt;&lt;/span&gt;)Â =&amp;gt;&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;const&lt;/span&gt;Â axiosErr:Â AxiosErrorÂ =Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â name:Â &lt;span&gt;&#x27;&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â message:Â &lt;span&gt;&#x27;&#x27;&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â config,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â isAxiosError:Â &lt;span&gt;false&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â toJSON:Â &lt;span&gt;&lt;span&gt;()&lt;/span&gt;Â =&amp;gt;&lt;/span&gt;Â e&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â };&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â reject(axiosErr);&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â });&lt;br/&gt;Â Â Â Â });&lt;br/&gt;Â Â };&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;axios é€‚é…å®ŒæˆååŸå…ˆ API ç›¸å…³ä»£ç æ— éœ€æ”¹åŠ¨ä¸€è¡Œå³å¯ç›´æ¥å¤ç”¨ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Message&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¶ˆæ¯å¼¹çª—å’Œ toast ä¸èƒ½è¿è¡Œåœ¨å°ç¨‹åºç«¯ï¼Œæˆ‘ä»¬é€šè¿‡æ¥å£å…¼å®¹å®ç°ä»£ç å¤ç”¨ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;/**&lt;br/&gt;Â *Â @authorÂ z0000&lt;br/&gt;Â *Â @versionÂ 1.0&lt;br/&gt;Â *Â messageÂ å¼¹çª—ï¼ŒapiÂ æ¥å£å‚è€ƒÂ antdï¼Œå°ç¨‹åºå‘æ­¤æ¥å£å…¼å®¹&lt;br/&gt;Â */&lt;/span&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â TaroÂ &lt;span&gt;from&lt;/span&gt;Â &lt;span&gt;&#x27;@tarojs/taro&#x27;&lt;/span&gt;;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â logÂ &lt;span&gt;from&lt;/span&gt;Â &lt;span&gt;&#x27;./log&#x27;&lt;/span&gt;;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;const&lt;/span&gt;Â messageÂ =Â {&lt;br/&gt;Â Â info(content:Â &lt;span&gt;string&lt;/span&gt;,Â durationÂ =Â &lt;span&gt;1500&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Taro.showToast({Â title:Â content,Â icon:Â &lt;span&gt;&#x27;none&#x27;&lt;/span&gt;,Â durationÂ })&lt;br/&gt;Â Â Â Â Â Â .catch(&lt;span&gt;&lt;span&gt;e&lt;/span&gt;Â =&amp;gt;&lt;/span&gt;Â log.error(&lt;span&gt;&#x27;showToastÂ error:Â &#x27;&lt;/span&gt;,Â e));&lt;br/&gt;Â Â },&lt;br/&gt;&lt;br/&gt;Â Â success(content:Â &lt;span&gt;string&lt;/span&gt;,Â durationÂ =Â &lt;span&gt;1500&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Taro.showToast({Â title:Â content,Â icon:Â &lt;span&gt;&#x27;success&#x27;&lt;/span&gt;,Â durationÂ })&lt;br/&gt;Â Â Â Â Â Â .catch(&lt;span&gt;&lt;span&gt;e&lt;/span&gt;Â =&amp;gt;&lt;/span&gt;Â log.error(&lt;span&gt;&#x27;showToastÂ error:Â &#x27;&lt;/span&gt;,Â e));&lt;br/&gt;Â Â },&lt;br/&gt;&lt;br/&gt;Â Â warn(content:Â &lt;span&gt;string&lt;/span&gt;,Â durationÂ =Â &lt;span&gt;1500&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Taro.showToast({Â title:Â content,Â icon:Â &lt;span&gt;&#x27;none&#x27;&lt;/span&gt;,Â durationÂ })&lt;br/&gt;Â Â Â Â Â Â .catch(&lt;span&gt;&lt;span&gt;e&lt;/span&gt;Â =&amp;gt;&lt;/span&gt;Â log.error(&lt;span&gt;&#x27;showToastÂ error:Â &#x27;&lt;/span&gt;,Â e));&lt;br/&gt;Â Â },&lt;br/&gt;&lt;br/&gt;Â Â error(content:Â &lt;span&gt;string&lt;/span&gt;,Â durationÂ =Â &lt;span&gt;1500&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Taro.showToast({Â title:Â content,Â icon:Â &lt;span&gt;&#x27;none&#x27;&lt;/span&gt;,Â durationÂ })&lt;br/&gt;Â Â Â Â Â Â .catch(&lt;span&gt;&lt;span&gt;e&lt;/span&gt;Â =&amp;gt;&lt;/span&gt;Â log.error(&lt;span&gt;&#x27;showToastÂ error:Â &#x27;&lt;/span&gt;,Â e));&lt;br/&gt;Â Â },&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â eslint-disable-next-lineÂ no-unused-vars,@typescript-eslint/no-unused-vars&lt;/span&gt;&lt;br/&gt;Â Â loading(content:Â &lt;span&gt;string&lt;/span&gt;,Â _durationÂ =Â &lt;span&gt;1500&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Taro.showLoading({Â title:Â contentÂ })&lt;br/&gt;Â Â Â Â Â Â .catch(&lt;span&gt;&lt;span&gt;e&lt;/span&gt;Â =&amp;gt;&lt;/span&gt;Â log.error(&lt;span&gt;&#x27;showLoadingÂ error:Â &#x27;&lt;/span&gt;,Â e));&lt;br/&gt;Â Â },&lt;br/&gt;&lt;br/&gt;Â Â destroy()Â {&lt;br/&gt;Â Â Â Â Taro.hideLoading();&lt;br/&gt;Â Â }&lt;br/&gt;};&lt;br/&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â &lt;span&gt;default&lt;/span&gt;Â message;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œæ¥å£å‚è€ƒçš„ Antd çš„ Message APIï¼Œå®ç°æµè§ˆå™¨ç«¯å’Œå°ç¨‹åºç«¯çš„å…¼å®¹ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;History&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°ç¨‹åºç«¯ history æœºåˆ¶å’Œæµè§ˆå™¨ç«¯ä¸ä¸€æ ·ï¼Œä¸ºäº†ä»£ç å¤ç”¨ï¼Œæˆ‘ä»¬å°†å°ç¨‹åºè·¯ç”± API è½¬æ¢é€‚é…æµè§ˆå™¨ç«¯æ¥å£ï¼ˆreact router çš„ history æ–¹æ³•ï¼‰ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;/**&lt;br/&gt;Â *Â commonÂ apiÂ å°ç¨‹åºå‘Â reactÂ routerÂ çš„Â historyÂ æ–¹æ³•å…¼å®¹&lt;br/&gt;Â */&lt;/span&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â TaroÂ &lt;span&gt;from&lt;/span&gt;Â &lt;span&gt;&#x27;@tarojs/taro&#x27;&lt;/span&gt;;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â logÂ &lt;span&gt;from&lt;/span&gt;Â &lt;span&gt;&quot;./log&quot;&lt;/span&gt;;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;const&lt;/span&gt;Â historyÂ =Â {&lt;br/&gt;Â Â &lt;span&gt;//Â &lt;span&gt;TODO:&lt;/span&gt;Â å¢åŠ queryå¯¹è±¡æ–¹æ³•&lt;/span&gt;&lt;br/&gt;Â Â push(path:Â &lt;span&gt;string&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Taro.navigateTo({Â url:Â &lt;span&gt;&#x27;/pages&#x27;&lt;/span&gt;Â +Â pathÂ }).catch(&lt;span&gt;&lt;span&gt;e&lt;/span&gt;Â =&amp;gt;&lt;/span&gt;Â log.error(&lt;span&gt;&#x27;navigateToÂ fail:Â &#x27;&lt;/span&gt;,Â e));&lt;br/&gt;Â Â },&lt;br/&gt;&lt;br/&gt;Â Â replace(path:Â &lt;span&gt;string&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Taro.redirectTo({Â url:Â pathÂ }).catch(&lt;span&gt;&lt;span&gt;e&lt;/span&gt;Â =&amp;gt;&lt;/span&gt;Â log.error(&lt;span&gt;&#x27;redirectToÂ fail:Â &#x27;&lt;/span&gt;,e));&lt;br/&gt;Â Â },&lt;br/&gt;&lt;br/&gt;Â Â go(n:Â &lt;span&gt;number&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (nÂ &amp;gt;=Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;console&lt;/span&gt;.error(&lt;span&gt;&#x27;positiveÂ numberÂ notÂ supportÂ inÂ wxÂ environment&#x27;&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â Taro.navigateBack({Â delta:Â &lt;span&gt;-1&lt;/span&gt;Â *Â nÂ }).catch(&lt;span&gt;&lt;span&gt;e&lt;/span&gt;Â =&amp;gt;&lt;/span&gt;Â log.error(&lt;span&gt;&#x27;navigateBackÂ fail:Â &#x27;&lt;/span&gt;,e));&lt;br/&gt;Â Â },&lt;br/&gt;&lt;br/&gt;Â Â goBack()Â {&lt;br/&gt;Â Â Â Â Taro.navigateBack({Â delta:Â &lt;span&gt;1&lt;/span&gt;Â }).catch(&lt;span&gt;&lt;span&gt;e&lt;/span&gt;Â =&amp;gt;&lt;/span&gt;Â log.error(&lt;span&gt;&#x27;navigateBackÂ fail:Â &#x27;&lt;/span&gt;,e));&lt;br/&gt;Â Â }&lt;br/&gt;};&lt;br/&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â &lt;span&gt;default&lt;/span&gt;Â history;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¹‹åæ‰¹é‡æœç´¢ä»£ç ä¸­ &lt;code&gt;useHistory&lt;/code&gt; ç›¸å…³ hook ä»£ç ï¼Œè½¬æ¢ä¸ºä¸Šè¿°å®ç°å³å¯ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Router&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°ç¨‹åºç«¯ä¸èƒ½ç›´æ¥ä½¿ç”¨ react-router ç±»ä¼¼çš„è·¯ç”±ç®¡ç†æ–¹æ¡ˆï¼Œå—ç›Šäºä»£ç æ¨¡å—åŒ–åˆ†å‰²ï¼Œå¤§éƒ¨åˆ†ä»£ç å¹¶æ²¡æœ‰è€¦åˆ react-router-dom ç›¸å…³çš„ä¸œè¥¿ï¼Œæœ€å¤šçš„å°±æ˜¯ &lt;code&gt;&amp;lt;Link&amp;gt;&lt;/code&gt; ç»„ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬å°å°æ”¹é€ ä¸€ä¸‹ Link ç»„ä»¶ï¼Œæ‰¹é‡æ›¿ä»£å³å¯ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;import { FC, useCallback } from &#x27;react&#x27;;&lt;br/&gt;import Taro from &#x27;@tarojs/taro&#x27;;&lt;br/&gt;import { View } from &#x27;@tarojs/components&#x27;;&lt;br/&gt;import { LinkProps } from &#x27;react-router-dom&#x27;;&lt;br/&gt;&lt;br/&gt;const Index: FC&amp;lt;LinkProps&amp;gt; = ({ to, ...props}) =&amp;gt; {&lt;br/&gt;&lt;br/&gt;  const onClick = useCallback(e =&amp;gt; {&lt;br/&gt;    e.stopPropagation();&lt;br/&gt;    Taro.navigateTo({ url: &#x27;/pages&#x27; + to as string });&lt;br/&gt;  }, [to]);&lt;br/&gt;&lt;br/&gt;  // @ts-ignore&lt;br/&gt;  return &amp;lt;View {...props} onClick={onClick}&amp;gt;{props.children}&amp;lt;/View&amp;gt;&lt;br/&gt;};&lt;br/&gt;&lt;br/&gt;export default Index;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;éœ€è¦æ³¨æ„çš„æ˜¯ &lt;code&gt;Taro.navigateTo&lt;/code&gt; ä¸èƒ½ç›´æ¥è·³è½¬ Tab é¡µé¢ï¼Œæ‰€æœ‰æœ€ç»ˆä»£ç å®Œæˆåéœ€è¦ search + æµ‹è¯•è¦†ç›–æ£€æŸ¥ç›¸å…³é—®é¢˜ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ä¸Šé¢ä»£ç ä¸­æ£€æŸ¥ to å‚æ•°æ˜¯å¦ä¸º tab é¡µé¢ï¼Œåˆ‡æ¢æˆ &lt;code&gt;Taro.switchTab&lt;/code&gt; æ–¹æ³•ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Path Params&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°ç¨‹åºä¸æ”¯æŒç±»ä¼¼ &lt;code&gt;/post/:id&lt;/code&gt; çš„è·¯ç”±å‚æ•°ï¼Œæˆ‘ä»¬éœ€è¦å°†è·¯ç”±å‚æ•°è½¬æ¢ä¸ºï¼š&lt;code&gt;/post?id=xx&lt;/code&gt;ï¼Œè¿™ä¸ªè½¬æ¢é€šè¿‡ IDE æœç´¢ï¼Œæ‰¹é‡ replace å³å¯ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;CSS&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±äºå°ç¨‹åºç«¯çš„ rpx å•ä½ã€px å•ä½ç›´æ¥ä½¿ç”¨ä¼šæœ‰å¾ˆå¤§çš„å¤ç”¨é—®é¢˜ï¼Œå¯¼è‡´ç½‘é¡µç«¯å¾€å°ç¨‹åºç«¯è¿ç§»æ—¶éœ€è¦å¤§é‡æ”¹é€  HTML ä»£ç ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ sass å®ç°äº† tailwindcss ç±»ä¼¼çš„åŠŸèƒ½ï¼ˆé’ˆå¯¹å°ç¨‹åºç«¯è¿›è¡Œæ”¹é€ ï¼‰ï¼Œé€šè¿‡å˜é‡å¼€å…³åˆ‡æ¢å•ä½ï¼Œå¯ä»¥åšåˆ°ä¸åŒè®¾è®¡ç¨¿ä»£ç ä¹Ÿèƒ½å…¼å®¹ï¼ˆ375px å’Œ 750px æˆ–è€… rpxï¼Œrem å•ä½éƒ½å¯ä»¥ç›´æ¥å…¼å®¹ï¼‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è®¾è®¡å¤ç”¨æœ‰æ—¶æ¯”ä»£ç å¤ç”¨æ›´åŠ é‡è¦ï¼Œè¿™æ˜¯ç”¨æˆ·ä½“éªŒä¸€è‡´æ€§çš„å‰æï¼Œå¹¸è¿çš„æ˜¯ tailwincss ä¹‹ç±»çš„æ–¹æ¡ˆé€‰å‹è®©æˆ‘ä»¬å¾ˆå®¹æ˜“åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åç»­å°†å¼€æºå°ç¨‹åºç«¯ tailwindcss ä»£ç ï¼Œæ•¬è¯·æœŸå¾…ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å›¢é˜Ÿåä½œ&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åä½œä¹Ÿæ˜¯å¾ˆé‡è¦çš„ä¸€ç¯ï¼Œäº§å“æˆåŠŸç¦»ä¸å¼€é«˜æ•ˆåˆä½œï¼Œæˆ‘ä»¬ä½¿ç”¨ google doc å…¨å®¶æ¡¶è¿›è¡Œåä½œï¼ŒåŒ…æ‹¬é¡¹ç›®æ–‡æ¡£ã€éœ€æ±‚ã€ä»»åŠ¡ç®¡ç†ã€é‚®ä»¶ï¼Œgoogle å…¨å®¶æ¡¶æœ€å¤§çš„å¥½å¤„å°±æ˜¯å¤šç«¯æ”¯æŒï¼Œè¿™æ˜¯ç›®å‰æ”¯æŒç»ˆç«¯æœ€å¤šã€åä½œæœ€æ–¹ä¾¿çš„å·¥å…·ã€‚linux + android + ios + ipad + windows + mac éƒ½èƒ½æ— ç¼åŒæ­¥åä½œã€‚æ–¹ä¾¿è®¾è®¡å¸ˆã€äº§å“ç»ç†ã€ç¨‹åºå‘˜å…±åŒå·¥ä½œã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æœ€å&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¬¢è¿å„ä½ä½“éªŒï½&lt;/p&gt;&lt;p&gt;&lt;mp-miniprogram data-miniprogram-appid=&quot;wx815bfb420a5256e3&quot; data-miniprogram-path=&quot;pages/post/index?id=189392795524841472&quot; data-miniprogram-nickname=&quot;é»‘å®¢è¯´&quot; data-miniprogram-avatar=&quot;http://mmbiz.qpic.cn/mmbiz_png/UAvN7J9XxS85wcQ2kbPrpp1dEd68bUtdI9PPmbEjG8YgZ9ibtzqn7SHH0IFUotqItjqSUZVyjv6Po6hd0STEYQw/640?wx_fmt=png&amp;amp;wxfrom=200&quot; data-miniprogram-title=&quot;é»‘å®¢è¯´ç¬¬ä¸€å¸–ï¼šHappy hacking!&quot; data-miniprogram-imageurl=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/XyyqpRDrAeNH25ickiaKXrlj76LWRkObnMJB90XF7f8vMFAknwsphO04lQXdS4H7g3D8szGSGe1uhIYZUFeBBKRw/0?wx_fmt=jpeg&quot; data-miniprogram-type=&quot;card&quot; data-miniprogram-servicetype=&quot;0&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;/p&gt;&lt;/section&gt;
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>5bb7d83e06a7f560d6f440a257610026</guid>
<title>Docker å®‰è£… Jenkins</title>
<link>https://toutiao.io/k/rw7auj4</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1. éƒ¨ç½²jenkins&lt;/span&gt;&lt;span/&gt;&lt;/h1&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1.1 åˆ›å»ºjenkinsçš„å·¥ä½œç›®å½•&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;//åˆ›å»ºå·¥ä½œç›®å½•Â &lt;br/&gt;mkdirÂ /var/jenkins_home&lt;br/&gt;&lt;br/&gt;//èµ‹äºˆæƒé™Â &lt;br/&gt;chownÂ -RÂ 1000Â /var/jenkins_home&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1.2 é€šè¿‡dockeréƒ¨ç½²&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1.2.1 æ‹‰å–é•œåƒ&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;dockerÂ pullÂ Â jenkinsci/blueocean&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1.2.2 ç”Ÿæˆå®¹å™¨&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;#æ³¨æ„ï¼šåˆ‡æ¢ä¸€è¡Œæ‰§è¡Œå‘½ä»¤Â &lt;/span&gt;&lt;br/&gt;dockerÂ runÂ -uÂ rootÂ -dÂ -pÂ 8080:8080Â -pÂ 50000:50000Â &lt;br/&gt;Â -vÂ /var/jenkins_home:/var/jenkins_homeÂ &lt;br/&gt;Â -vÂ /usr/bin/docker:/usr/bin/dockerÂ Â &lt;br/&gt;Â -vÂ /var/run/docker.sock:/var/run/docker.sockÂ Â &lt;br/&gt;Â -vÂ /usr/&lt;span&gt;local&lt;/span&gt;/bin/docker-compose:/usr/&lt;span&gt;local&lt;/span&gt;/bin/docker-composeÂ &lt;br/&gt;Â jenkinsci/blueoceanÂ &lt;br/&gt;Â &lt;br/&gt;Â ä¸€è¡Œæ˜¾ç¤º:&lt;br/&gt;dockerÂ runÂ -uÂ rootÂ -dÂ -pÂ 8080:8080Â -pÂ 50000:50000Â -vÂ /var/jenkins_home:/var/jenkins_homeÂ Â -vÂ /usr/bin/docker:/usr/bin/dockerÂ Â Â -vÂ /var/run/docker.sock:/var/run/docker.sockÂ Â Â -vÂ /usr/&lt;span&gt;local&lt;/span&gt;/bin/docker-compose:/usr/&lt;span&gt;local&lt;/span&gt;/bin/docker-composeÂ Â jenkinsci/blueoceanÂ &lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1.3 é€šè¿‡docker-composeéƒ¨ç½²&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰§è¡Œdocker-composeè„šæœ¬&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;version:Â &lt;span&gt;&#x27;3.4&#x27;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;services:&lt;br/&gt;Â Â jenkins:&lt;br/&gt;Â Â Â Â container_name:Â jenkins&lt;br/&gt;Â Â Â Â image:Â jenkinsci/blueocean&lt;br/&gt;Â Â Â Â ports:&lt;br/&gt;Â Â Â Â Â Â -Â &lt;span&gt;&quot;8080:8080&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â -Â &lt;span&gt;&quot;50000:50000&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â restart:Â always&lt;br/&gt;Â Â Â Â user:Â root&lt;br/&gt;Â Â Â Â volumes:&lt;br/&gt;Â Â Â Â Â Â -Â &lt;span&gt;&#x27;/var/jenkins_home:/var/jenkins_home&#x27;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â -Â &lt;span&gt;&#x27;/usr/bin/docker:/usr/bin/docker&#x27;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â -Â &lt;span&gt;&#x27;/var/run/docker.sock:/var/run/docker.sock&#x27;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â -Â &lt;span&gt;&#x27;/usr/local/bin/docker-compose:/usr/local/bin/docker-compose&#x27;&lt;/span&gt;&lt;br/&gt;Â Â Â Â environment:&lt;br/&gt;Â Â Â Â Â Â -Â TZ=Asia/Shanghai&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;1.3.1 æ‰§è¡Œå‘½ä»¤ç”Ÿæˆå®¹å™¨&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;docker-compose -f docker-compose.yaml up --build -d jenkins&lt;/p&gt;&lt;/blockquote&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2. è®¿é—®jenkinsç½‘ç«™&lt;/span&gt;&lt;span/&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è®¿é—®åœ°å€ï¼šhttp://IP:8080&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5780998389694042&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/gtQF7ojZDqLxLeo3bVTuM356YYGHyvj01u5QHVaEUbNPCa4iaJUmB8dDf77ApI2jM3U12fHFuRkibQ6zxH8veuEw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;621&quot;/&gt;&lt;figcaption&gt;image.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.1 å¯»æ‰¾è¶…çº§ç®¡ç†å‘˜å¯†ç &lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿›å…¥å®¹å™¨ï¼Œç„¶åå»å®¹å™¨çš„æ‰§è¡Œç›®å½•ä¸‹æŸ¥æ‰¾ç®¡ç†å‘˜çš„å¯†ç &lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;//Â è¿›å…¥å®¹å™¨Â &lt;br/&gt;dockerÂ &lt;span&gt;exec&lt;/span&gt;Â -itÂ å®¹å™¨IDÂ bashÂ &lt;br/&gt;//Â æŸ¥çœ‹å¯†ç Â &lt;br/&gt;catÂ /var/jenkins_home/secrets/initialAdminPassword&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.1523046092184369&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/gtQF7ojZDqLxLeo3bVTuM356YYGHyvj0UYqlDcVHkGqdWnbIib8vzdwdsViaBEBWicyMlUibRlV3ACzr5HC7IrecoQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;499&quot;/&gt;&lt;figcaption&gt;image.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¾“å…¥æ‰¾åˆ°çš„ç®¡ç†å‘˜å¯†ç ç„¶åè¿›å…¥ç³»ç»Ÿ&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.2 è¿›å…¥jenkins&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ–°æ‰‹å…¥é—¨ï¼Œé€‰æ‹©å®‰è£…æ’ä»¶çš„æ–¹å¼ï¼Œè¿™é‡Œæˆ‘ä»¬ç›´æ¥é€‰æ‹©å®‰è£…æ¨èçš„æ’ä»¶ç„¶åè¿›å…¥ç³»ç»Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ³¨æ„ï¼šå®‰è£…æ’ä»¶æŠ¥é”™çš„è¯ç»§ç»­åœ¨æ‰§è¡Œä¸€éã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.3 è®¾ç½®ç®¡ç†å‘˜ç”¨æˆ·å¯†ç &lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ›å»ºç®¡ç†å‘˜ç”¨æˆ·å¯†ç &lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5379061371841155&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/gtQF7ojZDqLxLeo3bVTuM356YYGHyvj0KSfQ2me5FrWQAW0OZ9gNsbmjghjYM0AqSxibF6eL9Mn9zDGUmqmulibg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;554&quot;/&gt;&lt;figcaption&gt;image.png&lt;/figcaption&gt;&lt;/figure&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.4 ç³»ç»Ÿç•Œé¢&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœç³»ç»Ÿç®¡ç†é‡Œé¢æœ‰é”™è¯¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å®‰è£…å’Œä¿®æ”¹ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.5 ä¿®æ”¹é•œåƒæº&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ’ä»¶ç®¡ç†-&amp;gt;é«˜çº§-&amp;gt;å‡çº§ç«™ç‚¹ï¼Œä¿®æ”¹ä¸ºæ¸…åå¤§å­¦æ’ä»¶æº&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;#Â æ¸…åå¤§å­¦å®˜æ–¹é•œåƒ&lt;/span&gt;&lt;br/&gt;https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.json&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3 é”™è¯¯&lt;/span&gt;&lt;span/&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœå‡ºç°é”™è¯¯ï¼Œé‚£ä¹ˆå°±éœ€è¦å»æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºï¼Œæ ¹æ®é”™è¯¯æ‰¾åŸå› ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3.1 IPv4 forwarding is disabled&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ„æ€å°±æ˜¯linuxæ²¡æœ‰å¼€å¯ Ipv4 æ•°æ®åŒ…è½¬å‘åŠŸèƒ½&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥å…ˆå°è¯•é‡å¯dockerï¼Œå¦‚æœæ²¡æœ‰ä½œç”¨å¯ä»¥ä¿®æ”¹ä¸‹é¢é…ç½®&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;#Â 1.Â æ‰“å¼€Â sysctl.conf&lt;/span&gt;&lt;br/&gt;vimÂ /etc/sysctl.conf&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â 2.æ·»åŠ ä¸‹é¢ä¸€è¡Œ&lt;/span&gt;&lt;br/&gt;net.ipv4.ip_forward=1&lt;br/&gt;&lt;br/&gt;&lt;span&gt;#Â 3.é‡å¯Â networkÂ å’ŒÂ docker&lt;/span&gt;&lt;br/&gt;systemctlÂ restartÂ networkÂ &amp;amp;&amp;amp;Â systemctlÂ restartÂ docker&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;4 å‚è€ƒæ–‡æ¡£&lt;/span&gt;&lt;span/&gt;&lt;/h1&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å®˜æ–¹æ–‡æ¡£ï¼šhttps://www.jenkins.io/doc/book/installing/docker/&lt;/p&gt;&lt;p&gt;xiaoxiaotankï¼šhttps://www.cnblogs.com/xiaoxiaotank/p/14762665.html&lt;/p&gt;&lt;/blockquote&gt;&lt;/section&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>47c98034d0f2b300dda92501a8c461fb</guid>
<title>Spring Boot å®æˆ˜ç¬”è®°ï¼šè®°ä¸€æ¬¡æ¥å£ 406 é”™è¯¯çš„è§£å†³</title>
<link>https://toutiao.io/k/k5cwr0j</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;h2&gt;èƒŒæ™¯&lt;/h2&gt;&lt;p&gt;ã€€ã€€åœ¨å¯¹ä¸€ä¸ªé—ç•™è€ç³»ç»Ÿä½¿ç”¨SpringBootæ¡†æ¶è¿›è¡Œé‡å†™çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†ä¸€ä¸ªå¥‡æ€ªçš„é—®é¢˜ï¼šå³å½“æœåŠ¡ä½¿ç”¨SpringBootçš„mainå…¥å£ç‹¬ç«‹å¯åŠ¨çš„æ—¶å€™ï¼Œæ¥å£è®¿é—®ä¸€åˆ‡æ­£å¸¸ï¼Œä½†æ˜¯å½“é¡¹ç›®è¢«æ‰“æˆwaråŒ…è¿è¡Œåœ¨Tomcatä¸­æ—¶ï¼Œè°ƒç”¨æ¥å£å°±ä¼šè¿”å›&lt;code&gt;406 Not Acceptable&lt;/code&gt;é”™è¯¯ï¼Œè€Œç”±äºè¿ç»´ç­‰å±‚é¢è€ƒè™‘ï¼ŒæœåŠ¡ä»ç„¶è¦åœ¨Tomcatä¸­è¿è¡Œä¸€æ®µæ—¶é—´ä½œä¸ºè¿‡æ¸¡ï¼Œå› æ­¤ä¸ç®¡æ˜¯ä»å¯¹æŠ€æœ¯è¿½æ±‚çš„æ€åº¦ä¸Šï¼Œè¿˜æ˜¯ä»å®é™…éœ€æ±‚å‡ºå‘ï¼Œè¿™éƒ½æ˜¯ä¸ªä¸å¾—ä¸è§£å†³çš„é—®é¢˜ã€‚&lt;/p&gt;&lt;h2&gt;é”™è¯¯åŸå› åˆ†æ&lt;/h2&gt;&lt;p&gt;ã€€ã€€è¦è§£å†³é—®é¢˜ï¼Œé¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œ406é”™è¯¯å‡ºç°çš„ç›´æ¥åŸå› æ˜¯ä»€ä¹ˆã€‚åœ¨ä¸€æ¬¡HTTPè¯·æ±‚ä¸­ï¼Œå¦‚æœæœåŠ¡ç«¯å¯¹äºbodyå†…å®¹çš„ç±»å‹ï¼ˆå³Content-Typeï¼‰å¤„ç†ä¸Šäº§ç”Ÿäº†å†²çªï¼Œå³ä¼šè¿”å›406é”™è¯¯çŠ¶æ€ã€‚&lt;/p&gt;&lt;p&gt;ã€€ã€€SpringBootå¤„ç†Content-Typeçš„å…·ä½“ä»£ç å…¥å£åœ¨&lt;br/&gt;&lt;code&gt;org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor&lt;/code&gt;çš„æ–¹æ³•&lt;code&gt;writeWithMessageConverters&lt;/code&gt;ä¸­ï¼Œå…¶ä¸­ä¸€æ®µå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;HttpServletRequest request &lt;span&gt;=&lt;/span&gt; inputMessage&lt;span&gt;.&lt;/span&gt;&lt;span&gt;getServletRequest&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;List&lt;span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;MediaType&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; requestedMediaTypes &lt;span&gt;=&lt;/span&gt; &lt;span&gt;getAcceptableMediaTypes&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;request&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;List&lt;span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;MediaType&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; producibleMediaTypes &lt;span&gt;=&lt;/span&gt; &lt;span&gt;getProducibleMediaTypes&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;request&lt;span&gt;,&lt;/span&gt; valueType&lt;span&gt;,&lt;/span&gt; declaredType&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;outputValue &lt;span&gt;!=&lt;/span&gt; null &lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt; producibleMediaTypes&lt;span&gt;.&lt;/span&gt;&lt;span&gt;isEmpty&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; &lt;span&gt;IllegalArgumentException&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;No converter found for return value of type: &quot;&lt;/span&gt; &lt;span&gt;+&lt;/span&gt; valueType&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Set&lt;span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;MediaType&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; compatibleMediaTypes &lt;span&gt;=&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; &lt;span&gt;LinkedHashSet&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;MediaType&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;MediaType requestedType &lt;span&gt;:&lt;/span&gt; requestedMediaTypes&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;for&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;MediaType producibleType &lt;span&gt;:&lt;/span&gt; producibleMediaTypes&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;if&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;requestedType&lt;span&gt;.&lt;/span&gt;&lt;span&gt;isCompatibleWith&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;producibleType&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;            compatibleMediaTypes&lt;span&gt;.&lt;/span&gt;&lt;span&gt;add&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;getMostSpecificMediaType&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;requestedType&lt;span&gt;,&lt;/span&gt; producibleType&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;compatibleMediaTypes&lt;span&gt;.&lt;/span&gt;&lt;span&gt;isEmpty&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;if&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;outputValue &lt;span&gt;!=&lt;/span&gt; null&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; &lt;span&gt;HttpMediaTypeNotAcceptableException&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;producibleMediaTypes&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;return&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã€€ã€€å¯çœ‹åˆ°ï¼Œå…¶é€»è¾‘æ˜¯ï¼Œåœ¨å½“å‰è¯·æ±‚å¯é€‰çš„MediaTypeå’Œæ¥å£è¦ç”Ÿæˆçš„MediaTypeä¸­è¿›è¡ŒåŒ¹é…ï¼Œå¦‚æœåŒ¹é…ä¸åˆ°ï¼Œå³ä¼šæŠ›å‡º&lt;code&gt;HttpMediaTypeNotAcceptableException&lt;/code&gt;å¼‚å¸¸ä»è€Œå¯¼è‡´è¿”å›406é”™è¯¯ã€‚å›åˆ°æˆ‘ä»¬çš„é¡¹ç›®ï¼Œæ¥å£éƒ½æ˜¯@RestControlleræ³¨è§£ï¼Œå› æ­¤producibleMediaTypesåªèƒ½æ˜¯&lt;code&gt;application/json&lt;/code&gt;è¿™ä¸€ç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦çœ‹requestedMediaTypesæ˜¯ä»€ä¹ˆã€‚&lt;/p&gt;&lt;p&gt;ã€€ã€€ç»§ç»­æ·±å…¥æºç ï¼ŒgetAcceptableMediaTypesæ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;private&lt;/span&gt; List&lt;span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;MediaType&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span&gt;getAcceptableMediaTypes&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;HttpServletRequest request&lt;span&gt;)&lt;/span&gt; &lt;span&gt;throws&lt;/span&gt; HttpMediaTypeNotAcceptableException &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    List&lt;span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;MediaType&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; mediaTypes &lt;span&gt;=&lt;/span&gt; &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;contentNegotiationManager&lt;span&gt;.&lt;/span&gt;&lt;span&gt;resolveMediaTypes&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt; &lt;span&gt;ServletWebRequest&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;request&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;return&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;mediaTypes&lt;span&gt;.&lt;/span&gt;&lt;span&gt;isEmpty&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;?&lt;/span&gt; Collections&lt;span&gt;.&lt;/span&gt;&lt;span&gt;singletonList&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;MediaType&lt;span&gt;.&lt;/span&gt;ALL&lt;span&gt;)&lt;/span&gt; &lt;span&gt;:&lt;/span&gt; mediaTypes&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™å°±èµ°åˆ°äº†&lt;code&gt;org.springframework.web.accept.ContentNegotiationManager&lt;/code&gt;çš„&lt;code&gt;resolveMediaTypes&lt;/code&gt;æ–¹æ³•&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; List&lt;span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;MediaType&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span&gt;resolveMediaTypes&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;NativeWebRequest request&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;throws&lt;/span&gt; HttpMediaTypeNotAcceptableException &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;for&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;ContentNegotiationStrategy strategy &lt;span&gt;:&lt;/span&gt; &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;strategies&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;        List&lt;span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;MediaType&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; mediaTypes &lt;span&gt;=&lt;/span&gt; strategy&lt;span&gt;.&lt;/span&gt;&lt;span&gt;resolveMediaTypes&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;request&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;if&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;mediaTypes&lt;span&gt;.&lt;/span&gt;&lt;span&gt;isEmpty&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;||&lt;/span&gt; mediaTypes&lt;span&gt;.&lt;/span&gt;&lt;span&gt;equals&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;MEDIA_TYPE_ALL&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;continue&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;return&lt;/span&gt; mediaTypes&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;return&lt;/span&gt; Collections&lt;span&gt;.&lt;/span&gt;&lt;span&gt;emptyList&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œçš„strategiesé›†åˆé€šè¿‡&lt;code&gt;org.springframework.web.accept.ContentNegotiationManagerFactoryBean&lt;/code&gt;è¿›è¡Œåˆå§‹åŒ–&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;afterPropertiesSet&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    List&lt;span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;ContentNegotiationStrategy&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; strategies &lt;span&gt;=&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; &lt;span&gt;ArrayList&lt;/span&gt;&lt;span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;ContentNegotiationStrategy&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;if&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;favorPathExtension&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;        PathExtensionContentNegotiationStrategy strategy&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;if&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;servletContext &lt;span&gt;!=&lt;/span&gt; null &lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span&gt;!&lt;/span&gt;&lt;span&gt;isUseJafTurnedOff&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;            strategy &lt;span&gt;=&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; &lt;span&gt;ServletPathExtensionContentNegotiationStrategy&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;br/&gt;                    &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;servletContext&lt;span&gt;,&lt;/span&gt; &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;mediaTypes&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;else&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;            strategy &lt;span&gt;=&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; &lt;span&gt;PathExtensionContentNegotiationStrategy&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;mediaTypes&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;        strategy&lt;span&gt;.&lt;/span&gt;&lt;span&gt;setIgnoreUnknownExtensions&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;ignoreUnknownPathExtensions&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;if&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;useJaf &lt;span&gt;!=&lt;/span&gt; null&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;            strategy&lt;span&gt;.&lt;/span&gt;&lt;span&gt;setUseJaf&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;useJaf&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;        strategies&lt;span&gt;.&lt;/span&gt;&lt;span&gt;add&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;strategy&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;if&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;favorParameter&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;        ParameterContentNegotiationStrategy strategy &lt;span&gt;=&lt;/span&gt;&lt;br/&gt;                &lt;span&gt;new&lt;/span&gt; &lt;span&gt;ParameterContentNegotiationStrategy&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;mediaTypes&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;        strategy&lt;span&gt;.&lt;/span&gt;&lt;span&gt;setParameterName&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;parameterName&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;        strategies&lt;span&gt;.&lt;/span&gt;&lt;span&gt;add&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;strategy&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;if&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;ignoreAcceptHeader&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;        strategies&lt;span&gt;.&lt;/span&gt;&lt;span&gt;add&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt; &lt;span&gt;HeaderContentNegotiationStrategy&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;if&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;defaultNegotiationStrategy &lt;span&gt;!=&lt;/span&gt; null&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;        strategies&lt;span&gt;.&lt;/span&gt;&lt;span&gt;add&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;defaultNegotiationStrategy&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;contentNegotiationManager &lt;span&gt;=&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; &lt;span&gt;ContentNegotiationManager&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;strategies&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æŒ‰ç…§SpringBootçš„é»˜è®¤é€»è¾‘ï¼Œå¦‚æœè¿è¡Œåœ¨å®¹å™¨ä¸­ï¼Œä¼šäº§ç”Ÿ&lt;code&gt;ServletPathExtensionContentNegotiationStrategy, HeaderContentNegotiationStrategy&lt;/code&gt;ç­–ç•¥é›†åˆï¼Œè€Œå¦‚æœç‹¬ç«‹è¿è¡Œçš„è¯ï¼Œäº§ç”Ÿçš„ç­–ç•¥é›†åˆæ˜¯&lt;code&gt;PathExtensionContentNegotiationStrategy, HeaderContentNegotiationStrategy&lt;/code&gt;ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤è€…çš„é»˜è®¤é¦–é€‰ç­–ç•¥ä¸ä¸€æ ·ã€‚&lt;/p&gt;&lt;p&gt;ã€€ã€€å†å›åˆ°æˆ‘ä»¬çš„é¡¹ç›®ï¼Œç”±äºæ˜¯ä¸€ä¸ªé—ç•™è€ç³»ç»Ÿï¼Œå¯èƒ½å‰äººæ˜¯ä¸ºäº†å®‰å…¨è€ƒè™‘ï¼Œæ¥å£å‘½åéƒ½æ˜¯ç±»ä¼¼&lt;code&gt;xxx_json.so&lt;/code&gt;è¿™æ ·çš„ï¼Œè€Œ&lt;code&gt;.so&lt;/code&gt;åç¼€é€šå¸¸ä»£è¡¨ç±»unixç³»ç»Ÿçš„åº“æ–‡ä»¶ã€‚åœ¨SpringBootç‹¬ç«‹è¿è¡Œçš„æ—¶å€™ï¼Œé¦–é€‰ä½¿ç”¨&lt;code&gt;PathExtensionContentNegotiationStrategy&lt;/code&gt;æ¥å†³å®šmedia typeï¼Œè¿™ä¸ªç±»ä½¿ç”¨çš„æ˜¯SpringBootè‡ªå¸¦çš„&lt;code&gt;org/springframework/mail/javamail/mime.types&lt;/code&gt;æ˜ å°„æ–‡ä»¶ï¼Œé‡Œé¢æ²¡æœ‰é’ˆå¯¹&lt;code&gt;.so&lt;/code&gt;çš„æ˜ å°„å…³ç³»ï¼Œæ‰€ä»¥æ¥ç€è°ƒç”¨&lt;code&gt;HeaderContentNegotiationStrategy&lt;/code&gt;ç­–ç•¥ï¼Œè¿™ä¸ªç­–ç•¥é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯è¯»å–è¯·æ±‚æ–¹&lt;code&gt;Accept&lt;/code&gt;å¤´é‡Œé¢çš„å†…å®¹ï¼Œè€Œè¿™ä¸ªå¤´é€šå¸¸éƒ½æ˜¯&lt;code&gt;*/*&lt;/code&gt;å…¨åŒ¹é…ï¼Œæ‰€ä»¥ä¸€åˆ‡éƒ½èƒ½å¤Ÿæ­£å¸¸è¿è¡Œã€‚å½“SpringBootè¿è¡Œåœ¨Tomcatä¸­çš„æ—¶å€™ï¼Œé¦–é€‰&lt;code&gt;ServletPathExtensionContentNegotiationStrategy&lt;/code&gt;æ¥è¿›è¡Œmedia typeåˆ¤æ–­ï¼Œè¿™ä¸ªç±»æ˜¯é€šè¿‡è°ƒç”¨&lt;code&gt;servletContext.getMimeType()&lt;/code&gt;æ–¹æ³•äº¤ç”±å®¹å™¨æ¥è¿›è¡Œå¤„ç†ï¼Œè€Œåœ¨Tomcatä¸­ï¼Œå°±æ²¡æœ‰é‚£ä¹ˆå¹¸è¿äº†ï¼Œ&lt;code&gt;.so&lt;/code&gt;è¢«è§†ä¸ºäºŒè¿›åˆ¶æ–‡ä»¶æ˜ å°„æˆäº†&lt;code&gt;application/octet-stream&lt;/code&gt;ï¼Œå› æ­¤å’Œæ¥å£è¿”å›æ ¼å¼ä¸åŒ¹é…ï¼Œå¯¼è‡´SpringBootäº§ç”Ÿäº†406é”™è¯¯ã€‚&lt;/p&gt;&lt;h2&gt;è§£å†³æ–¹æ¡ˆ&lt;/h2&gt;&lt;p&gt;ã€€ã€€æ‰¾åˆ°äº†é—®é¢˜æ ¹æºï¼Œè§£å†³åŠæ³•ä¹Ÿå°±æœ‰äº†ï¼Œåœ¨ä¸ä¿®æ”¹æ¥å£å‘½åçš„å‰æä¸‹ï¼Œå°±æ˜¯æƒ³åŠæ³•äººä¸ºçš„æŠŠ&lt;code&gt;.so&lt;/code&gt;æ˜ å°„åˆ°&lt;code&gt;application/json&lt;/code&gt;å°±è¡Œäº†ã€‚é‚£ä¹ˆå›åˆ°ä¸Šé¢çš„&lt;code&gt;org.springframework.web.accept.ContentNegotiationStrategy&lt;/code&gt;æ¥å£çš„&lt;code&gt;resolveMediaTypes&lt;/code&gt;æ–¹æ³•ä¸­ï¼Œçœ‹åˆ°åœ¨é»˜è®¤æŠ½è±¡ç±»&lt;code&gt;org.springframework.web.accept.AbstractMappingContentNegotiationStrategy&lt;/code&gt;ä¸­çš„å®ç°æ–¹å¼å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; List&lt;span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;MediaType&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span&gt;resolveMediaTypes&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;NativeWebRequest webRequest&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;throws&lt;/span&gt; HttpMediaTypeNotAcceptableException &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;return&lt;/span&gt; &lt;span&gt;resolveMediaTypeKey&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;webRequest&lt;span&gt;,&lt;/span&gt; &lt;span&gt;getMediaTypeKey&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;webRequest&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;/**&lt;br/&gt; * An alternative to {@link #resolveMediaTypes(NativeWebRequest)} that accepts&lt;br/&gt; * an already extracted key.&lt;br/&gt; * @since 3.2.16&lt;br/&gt; */&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; List&lt;span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;MediaType&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; &lt;span&gt;resolveMediaTypeKey&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;NativeWebRequest webRequest&lt;span&gt;,&lt;/span&gt; String key&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;throws&lt;/span&gt; HttpMediaTypeNotAcceptableException &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;if&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;StringUtils&lt;span&gt;.&lt;/span&gt;&lt;span&gt;hasText&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;key&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;        MediaType mediaType &lt;span&gt;=&lt;/span&gt; &lt;span&gt;lookupMediaType&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;key&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;if&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;mediaType &lt;span&gt;!=&lt;/span&gt; null&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;handleMatch&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;key&lt;span&gt;,&lt;/span&gt; mediaType&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;return&lt;/span&gt; Collections&lt;span&gt;.&lt;/span&gt;&lt;span&gt;singletonList&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;mediaType&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;        mediaType &lt;span&gt;=&lt;/span&gt; &lt;span&gt;handleNoMatch&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;webRequest&lt;span&gt;,&lt;/span&gt; key&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;if&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;mediaType &lt;span&gt;!=&lt;/span&gt; null&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;addMapping&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;key&lt;span&gt;,&lt;/span&gt; mediaType&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;return&lt;/span&gt; Collections&lt;span&gt;.&lt;/span&gt;&lt;span&gt;singletonList&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;mediaType&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;return&lt;/span&gt; Collections&lt;span&gt;.&lt;/span&gt;&lt;span&gt;emptyList&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œéœ€è¦æåˆ°çš„æ˜¯ï¼Œä»¥ä¸Šè¯´çš„é€»è¾‘ï¼Œæ— è®º&lt;code&gt;PathExtensionContentNegotiationStrategy&lt;/code&gt;è¿˜æ˜¯&lt;code&gt;ServletPathExtensionContentNegotiationStrategy&lt;/code&gt;éƒ½æ˜¯å‘ç”Ÿåœ¨&lt;code&gt;handleNoMatch&lt;/code&gt;ä¸­çš„ï¼Œå¦‚æœ&lt;code&gt;lookupMediaType&lt;/code&gt;æ–¹æ³•èƒ½ç›´æ¥æŸ¥åˆ°çš„è¯ï¼Œå°±å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜äº†ï¼Œ æŸ¥çœ‹lookupMediaTypeæ–¹æ³•å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;/**&lt;br/&gt; * Use this method for a reverse lookup from extension to MediaType.&lt;br/&gt; * @return a MediaType for the key, or {@code null} if none found&lt;br/&gt; */&lt;/span&gt;&lt;br/&gt;&lt;span&gt;protected&lt;/span&gt; MediaType &lt;span&gt;lookupMediaType&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;String extension&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;return&lt;/span&gt; &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;mediaTypes&lt;span&gt;.&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;extension&lt;span&gt;.&lt;/span&gt;&lt;span&gt;toLowerCase&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;Locale&lt;span&gt;.&lt;/span&gt;ENGLISH&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™å…¶ä¸­çš„mediaTypeså°±æ˜¯é€šè¿‡ä¸Šé¢çš„&lt;code&gt;ContentNegotiationManagerFactoryBean&lt;/code&gt;è¿›è¡Œè®¾ç½®çš„ï¼Œé‚£ä¹ˆå›åˆ°è¿™ä¸ªç±»ä¸­ï¼Œå¯ä»¥çœ‹åˆ°æœ‰å¦‚ä¸‹æ–¹æ³•ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;/**&lt;br/&gt; * Add a mapping from a key, extracted from a path extension or a query&lt;br/&gt; * parameter, to a MediaType. This is required in order for the parameter&lt;br/&gt; * strategy to work. Any extensions explicitly registered here are also&lt;br/&gt; * whitelisted for the purpose of Reflected File Download attack detection&lt;br/&gt; * (see Spring Framework reference documentation for more details on RFD&lt;br/&gt; * attack protection).&lt;br/&gt; * &amp;lt;p&amp;gt;The path extension strategy will also try to use&lt;br/&gt; * {@link ServletContext#getMimeType} and JAF (if present) to resolve path&lt;br/&gt; * extensions. To change this behavior see the {@link #useJaf} property.&lt;br/&gt; * @param mediaTypes media type mappings&lt;br/&gt; * @see #addMediaType(String, MediaType)&lt;br/&gt; * @see #addMediaTypes(Map)&lt;br/&gt; */&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;setMediaTypes&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;Properties mediaTypes&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;if&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;&lt;span&gt;!&lt;/span&gt;CollectionUtils&lt;span&gt;.&lt;/span&gt;&lt;span&gt;isEmpty&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;mediaTypes&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;for&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;Entry&lt;span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;Object&lt;span&gt;,&lt;/span&gt; Object&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; entry &lt;span&gt;:&lt;/span&gt; mediaTypes&lt;span&gt;.&lt;/span&gt;&lt;span&gt;entrySet&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;            String extension &lt;span&gt;=&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;String&lt;span&gt;)&lt;/span&gt;entry&lt;span&gt;.&lt;/span&gt;&lt;span&gt;getKey&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;toLowerCase&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;Locale&lt;span&gt;.&lt;/span&gt;ENGLISH&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;            MediaType mediaType &lt;span&gt;=&lt;/span&gt; MediaType&lt;span&gt;.&lt;/span&gt;&lt;span&gt;valueOf&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;String&lt;span&gt;)&lt;/span&gt; entry&lt;span&gt;.&lt;/span&gt;&lt;span&gt;getValue&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;            &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;mediaTypes&lt;span&gt;.&lt;/span&gt;&lt;span&gt;put&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;extension&lt;span&gt;,&lt;/span&gt; mediaType&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;/**&lt;br/&gt; * An alternative to {@link #setMediaTypes} for use in Java code.&lt;br/&gt; * @see #setMediaTypes&lt;br/&gt; * @see #addMediaTypes&lt;br/&gt; */&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;addMediaType&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;String fileExtension&lt;span&gt;,&lt;/span&gt; MediaType mediaType&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;mediaTypes&lt;span&gt;.&lt;/span&gt;&lt;span&gt;put&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;fileExtension&lt;span&gt;,&lt;/span&gt; mediaType&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;/**&lt;br/&gt; * An alternative to {@link #setMediaTypes} for use in Java code.&lt;br/&gt; * @see #setMediaTypes&lt;br/&gt; * @see #addMediaType&lt;br/&gt; */&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;addMediaTypes&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;Map&lt;span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;String&lt;span&gt;,&lt;/span&gt; MediaType&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; mediaTypes&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;if&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;mediaTypes &lt;span&gt;!=&lt;/span&gt; null&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;mediaTypes&lt;span&gt;.&lt;/span&gt;&lt;span&gt;putAll&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;mediaTypes&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™å‡ ä¸ªæ–¹æ³•éƒ½å¯ä»¥å»æ‰‹åŠ¨æ·»åŠ media typeæ˜ å°„ï¼Œé‚£ä¹ˆå°±ç®€å•äº†ï¼Œåœ¨SpringBootå¯åŠ¨çš„æ—¶å€™ï¼Œè·å–&lt;code&gt;ContentNegotiationManagerFactoryBean&lt;/code&gt;å¯¹è±¡ï¼Œæ‰‹åŠ¨æ·»åŠ æ˜ å°„å°±å¯ä»¥äº†&lt;/p&gt;&lt;p&gt;ã€€ã€€å…·ä½“å®ç°æ–¹å¼å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;@Configuration&lt;/span&gt;&lt;br/&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; &lt;span&gt;MyWebMvcConfig&lt;/span&gt; &lt;span&gt;extends&lt;/span&gt; &lt;span&gt;WebMvcConfigurerAdapter&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;@Override&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; &lt;span&gt;configureContentNegotiation&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;ContentNegotiationConfigurer configurer&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;        configurer&lt;span&gt;.&lt;/span&gt;&lt;span&gt;mediaType&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;so&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; MediaType&lt;span&gt;.&lt;/span&gt;APPLICATION_JSON_UTF8&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ã€€ã€€è¡¥å……ï¼š&lt;/p&gt;&lt;p&gt;ã€€ã€€åœ¨stackoverflowä¸Šé¢ï¼Œä¹Ÿæœ‰äººæåˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå‚è§http://stackoverflow.com/questions/21235472/http-status-406-spring-mvc-4-0-jquery-json/21236862#21236862ï¼Œæä¾›äº†ä¸€äº›ä¸åŒçš„è§£å†³æ€è·¯ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å»å‚è€ƒ&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;The main issue here is that the pathÂ &lt;code&gt;&quot;/test.htm&quot;&lt;/code&gt;Â is going to use content negotiation first before checking the value of anÂ &lt;code&gt;Accept&lt;/code&gt;Â header. With an extension likeÂ &lt;code&gt;*.htm&lt;/code&gt;, Spring will use aÂ &lt;code&gt;org.springframework.web.accept.ServletPathExtensionContentNegotiationStrategy&lt;/code&gt;Â and resolve that the acceptable media type to return isÂ &lt;code&gt;text/html&lt;/code&gt;Â which does not match whatÂ &lt;code&gt;MappingJacksonHttpMessageConverter&lt;/code&gt;Â produces, ie.Â &lt;code&gt;application/json&lt;/code&gt;Â and therefore a 406 is returned.&lt;/p&gt;&lt;p&gt;The simple solution is to change the path to something likeÂ &lt;code&gt;/test&lt;/code&gt;, in which content negotiation based on the path won&#x27;t resolve any content type for the response. Instead, a differentÂ &lt;code&gt;ContentNegotiationStrategy&lt;/code&gt;Â based on headers will resolve the value of theÂ &lt;code&gt;Accept&lt;/code&gt;Â header.&lt;/p&gt;&lt;p&gt;The complicated solution is to change the order of theÂ &lt;code&gt;ContentNegotiationStrategy&lt;/code&gt;Â objects registered with theÂ &lt;code&gt;RequestResponseBodyMethodProcessor&lt;/code&gt;Â which handles yourÂ &lt;code&gt;@ResponseBody&lt;/code&gt;.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>