<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>b4af861e9a9388e6603464938387cf84</guid>
<title>Javaä¸­ä¸å®¹æ‹’ç»çš„ä¸€ç§ä¼˜é›…çš„å†™æ³•</title>
<link>https://toutiao.io/k/un3ejpz</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;blockquote class=&quot;js_blockquote_wrap&quot; data-type=&quot;2&quot; data-url=&quot;&quot; data-author-name=&quot;&quot; data-content-utf8-length=&quot;74&quot; data-source-title=&quot;&quot;&gt;&lt;section class=&quot;js_blockquote_digest&quot;&gt;&lt;p&gt;æœŸæœ«è€ƒè¯•æˆç»©å…¬å¸ƒäº†ï¼Œä¸€å­¦ç”Ÿæ°”æ„¤åœ°æ‰¾è€å¸ˆè¯„ç†ã€‚å­¦ç”Ÿï¼šâ€œè€å¸ˆï¼Œæˆ‘è®¤ä¸ºè¿™é—¨è¯¾æˆ‘ä¸åº”è¯¥å¾—é›¶åˆ†ã€‚â€è€å¸ˆï¼šâ€œæ˜¯å•Šï¼Œæˆ‘ä¹Ÿè¿™ä¹ˆè®¤ä¸ºï¼Œå¯å­¦æ ¡è§„å®šï¼Œæœ€ä½åªèƒ½æ‰“é›¶åˆ†ã€‚â€&lt;/p&gt;&lt;/section&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åšCodeReviewçš„æ—¶å€™ï¼Œè¯„ä»·ä¸€æ®µä»£ç çš„å¥½åé€šå¸¸æ˜¯ä»è€…è§ä»ã€‚è¿˜å¥½æœ‰ä¸€ç§æ— æ³•æ‹’ç»çš„ç†ç”±å«åšã€è§„å®šã€‘ã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/2tk5ianItRlibpMFn6yJ42PkM6FDR6NNvsYdq0VpeJliadzl4DDkA3kKOqg2b7BNK20waUBwmgRPDnayftSISCxiag/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;690&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸‹é¢è®²ä¸€ç§é€šè¿‡è§„å®šä»¥ç†æœäººçš„ä¾‹å­ï¼š&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;è§‚ç‚¹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;ä¸è¦ç”¨xx != null &amp;amp;&amp;amp; xx.length()&amp;gt;0Â æ¥åˆ¤ç©ºï¼Œå¯ä»¥ä½¿ç”¨apacheçš„commonsåŒ…ã€‚ä¾‹å¦‚ä½¿ç”¨ï¼š&lt;/p&gt;&lt;p&gt;StringUtils.isNotEmpty&lt;/p&gt;&lt;p&gt;CollectionUtils.isEmpty&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;ä¸å®¹æ‹’ç»ç†ç”±&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;ä½¿ç”¨xx != null &amp;amp;&amp;amp; xx.length()&amp;gt;0Â æ¥åˆ¤ç©ºï¼Œå…¬å¸é‡Œçš„é™æ€ä»£ç æ£€æŸ¥ä¼šæ£€æŸ¥è®©ä½ è¦†ç›–è¿™ä¸¤ä¸ªæ¡ä»¶ï¼Œä½ éœ€è¦å†™ä¸¤ä¸ªå•æµ‹æ¥å®Œæˆä»»åŠ¡ã€‚è€Œä½¿ç”¨apacheçš„commonsåªéœ€è¦å†™ä¸€ä¸ªå•æµ‹ã€‚ä½ çš„æ¡ä»¶è¦†ç›–ç‡è¾¾æ ‡äº†å—ï¼Ÿ&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;æ·±å±‚åŸå› &lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;ã€ç¼–ç¨‹ä¸€ç”Ÿã€‘çš„æ–‡ç« æ€ä¹ˆå¯èƒ½åªç»™ä¸€ä¸ªä¸å®¹æ‹’ç»çš„ç†ç”±è¿™ä¹ˆæµ…ã€‚å»ºè®®è¿™æ ·ä½¿ç”¨æ¯•ç«Ÿæœ‰èƒŒåæ·±å±‚çš„ä¼˜åŠ¿ï¼Œæ‹¿StringUtils.isNotEmptyä¸¾ä¾‹çœ‹çœ‹apacheçš„ä»£ç ä¼˜é›…åœ¨å“ªé‡Œã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;StringUtilsç±»çš„æºç ï¼š&lt;/p&gt;&lt;pre&gt;&lt;span&gt;public static boolean &lt;/span&gt;isNotEmpty(String str) {&lt;br/&gt;    &lt;span&gt;return &lt;/span&gt;!isEmpty(str)&lt;span&gt;;&lt;br/&gt;&lt;/span&gt;&lt;p&gt;}&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;public static boolean &lt;/span&gt;isEmpty(String str) {&lt;br/&gt;    &lt;span&gt;return &lt;/span&gt;str == &lt;span&gt;null &lt;/span&gt;|| str.length() == &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;&lt;br/&gt;&lt;/span&gt;}&lt;/pre&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å’¦ï¼Œå¥½åƒå’Œè‡ªå·±å®ç°çš„å·®ä¸å¤šå˜›ï¼str == null || str.length() == 0 å–ä¸ªåï¼Œè¿˜å¤šä¸ªä¸€ä¸ªåè¿ç®—ã€‚æ•ˆç‡ä¸€ç‚¹ä¹Ÿä¸é«˜å˜›ï¼&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¯·æ³¨æ„è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯é™æ€çš„ï¼é™æ€æ–¹æ³•&lt;span&gt;åœ¨ç±»åŠ è½½æ—¶å€™åˆå§‹åŒ–ï¼Œå¸¸é©»åœ¨å†…å­˜ä¸­åªå­˜ä¸€ä»½ã€‚è€Œè‡ªå·±å†™çš„åˆ¤æ–­è¯­å¥ï¼Œåªèƒ½è¿™ä¸ªæ–¹æ³•ä½¿ç”¨ï¼Œå…¶ä»–æ–¹æ³•åŒæ ·çš„è¯­å¥è¦å¤åˆ¶ä¸€ä»½ã€‚é™æ€æ–¹æ³•æ›´åŠ æ–¹ä¾¿å¿«æ·ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å½“ç„¶ï¼Œapacheçš„commonsæœ€æ ¹æœ¬çš„ä¼˜åŠ¿æ˜¯è¯­ä¹‰æ›´åŠ æ¸…æ™°ï¼Œæ›´æ˜“è¯»ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;å¾€æœŸæ¨è&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>90bc984a00d6789de7bffbbf6aa0f0b9</guid>
<title>ä¼˜è´¨ç½‘ç«™åŒå¥½è€…å‘¨åˆŠï¼ˆç¬¬ 43 æœŸï¼‰- å€¾åŸä¹‹é“¾ - æ‚ ç„¶å®œæƒ³äº­</title>
<link>https://toutiao.io/k/x0lt9mu</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;Post-body&quot;&gt;
                    &lt;p&gt;&lt;a href=&quot;https://nicelinks.site/?utm_source=weekly&quot; rel=&quot; nofollow ugc&quot;&gt;å€¾åŸä¹‹é“¾&lt;/a&gt;ä½œä¸ºä¸€ä¸ªå¼€æ”¾å¹³å°ï¼Œæ—¨åœ¨äº‘é›†å…¨çƒ&lt;strong&gt;ä¼˜ç§€ç½‘ç«™&lt;/strong&gt;ï¼Œæ¢ç´¢äº’è”ç½‘ä¸­æ›´å¹¿é˜”çš„ä¸–ç•Œã€‚æ­¤å‘¨åˆŠï¼Œå°†æ±‡èšè¿‡å»ä¸€å‘¨&lt;a href=&quot;https://nicelinks.site/?utm_source=weekly&quot; rel=&quot; nofollow ugc&quot;&gt;å€¾åŸ&lt;/a&gt;æ‰€æ”¶å½•çš„å†…å®¹ï¼Œä»¥é£¨åŒå¥½ï¼›æ¬¢è¿æ¨èæˆ–è‡ªèï¼ˆä»…é™æœ‰ç‹¬ç«‹åŸŸåçš„ç½‘ç«™ï¼Œå¯ä»¥æ˜¯äºŒçº§åŸŸåï¼‰ã€‚æ‚¨å¦‚æœè¦äº†è§£æ”¶å½•è¦æ±‚ï¼Œè¯·å‚è§&lt;a href=&quot;https://nicelinks.site/about?utm_source=weekly&quot; rel=&quot; nofollow ugc&quot;&gt;å…³äºå€¾åŸ&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¤‡æ³¨&lt;/strong&gt;ï¼šæœ¬å‘¨åˆŠ&lt;strong&gt;æ¯å‘¨äº”&lt;/strong&gt;ç”Ÿæˆï¼Œé¦–å‘äºä¸ªäººå¾®ä¿¡å…¬ä¼—å·&lt;a href=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI5MDIwMzM2Mg==&amp;amp;action=getalbum&amp;amp;album_id=1530765143352082433&amp;amp;scene=173&amp;amp;from_msgid=2650641087&amp;amp;from_itemidx=1&amp;amp;count=3#wechat_redirect&quot; rel=&quot; nofollow ugc&quot;&gt;æ™šæ™´å¹½è‰è½©&lt;/a&gt;ã€åšå®¢&lt;a href=&quot;https://www.jeffjade.com&quot; rel=&quot; nofollow ugc&quot;&gt;æ™šæ™´å¹½è‰è½©&lt;/a&gt;ï¼Œä»¥åŠ&lt;a href=&quot;https://forum.lovejade.cn/&quot; rel=&quot; nofollow ugc&quot;&gt;æ‚ ç„¶å®œæƒ³äº­&lt;/a&gt;ç¤¾åŒºï¼›æ­¤ä¸€é”®ç”Ÿæˆè„šæœ¬åŸºäº &lt;a href=&quot;https://nicelinks.site/post/602d30aad099ff5688618591&quot; rel=&quot; nofollow ugc&quot;&gt;Deno&lt;/a&gt; ç¼–å†™ï¼Œå¹¶åœ¨ Github å¼€æºï¼š&lt;a href=&quot;https://github.com/nicejade/nicelinks-weekly&quot; rel=&quot; nofollow ugc&quot;&gt;nicejade/nicelinks-weekly&lt;/a&gt;ã€‚&lt;/p&gt;



&lt;p&gt;&lt;strong&gt;æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/tags/%E5%9B%BE%E7%89%87&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;å›¾ç‰‡&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E5%B7%A5%E5%85%B7&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;å·¥å…·&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E4%B8%8B%E8%BD%BD&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;ä¸‹è½½&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å…³é”®å­—&lt;/strong&gt;ï¼šextract images online, image extractor, download images, view images, extract images from website, download images from website, image bulk downloader, find images on website&lt;/p&gt;

&lt;blockquote class=&quot;uncited&quot;&gt;&lt;div&gt;&lt;p&gt;A free tool to extract, view and download images from any website by using a virtual browser.&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/extract.pics.png?x-oss-process=style/png2jpg&quot; title=&quot;&quot; alt=&quot;å€¾åŸä¹‹é“¾ - Image Extractor&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ¨èè¯­&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/redirect?url=https://extract.pics/&quot; rel=&quot; nofollow ugc&quot;&gt;Extract.pics&lt;/a&gt; æ˜¯ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„å·¥å…·ï¼Œå…è®¸æ‚¨ä»ä»»ä½•å…¬å…±ç½‘ç«™æå–ã€æŸ¥çœ‹å’Œä¸‹è½½å›¾åƒã€‚åªéœ€å°†ç½‘ç«™çš„ URL ç²˜è´´åˆ°è¾“å…¥å­—æ®µä¸­ï¼Œç„¶åå•å‡»â€œæå–â€å³å¯å¼€å§‹è¯¥è¿‡ç¨‹ã€‚å®Œå…¨å…è´¹ä½¿ç”¨ï¼&lt;/p&gt;

&lt;p&gt;æå–è¿‡ç¨‹å°†éœ€è¦å‡ ç§’é’Ÿï¼Œä»¥ç¡®ä¿å®ƒæ‰¾åˆ°å°½å¯èƒ½å¤šçš„å›¾åƒã€‚å®Œæˆåï¼Œæ‚¨å°†åœ¨æœ‰ç»„ç»‡çš„ç½‘æ ¼ä¸­çœ‹åˆ°æ‰€æœ‰å›¾åƒã€‚æ‚¨ç°åœ¨å¯ä»¥é€šè¿‡æŒ‰å¤§å°ã€å®½åº¦ã€é«˜åº¦æˆ–æ‰¾åˆ°å®ƒä»¬çš„é¡ºåºå¯¹æ‰¾åˆ°çš„å›¾åƒè¿›è¡Œ&lt;strong&gt;æ’åº&lt;/strong&gt;æ¥æ¢ç´¢æ‰¾åˆ°çš„å›¾åƒã€‚æ­¤å¤–ï¼Œæ‚¨å¯ä»¥æŒ‰åç§°ã€å¤§å°æˆ–ç±»å‹/æ–‡ä»¶æ ¼å¼&lt;strong&gt;æœç´¢&lt;/strong&gt;å›¾åƒã€‚è¿™ä½¿å¾—å‡†ç¡®åœ°æ‰¾åˆ°æ‚¨éœ€è¦çš„å›¾åƒå˜å¾—éå¸¸å®¹æ˜“ã€‚&lt;/p&gt;

&lt;p&gt;æ‚¨ç°åœ¨å¯ä»¥ä½¿ç”¨&lt;strong&gt;ç¼©æ”¾å·¥å…·åœ¨&lt;/strong&gt;æµ…è‰²æˆ–æ·±è‰²èƒŒæ™¯ä¸‹&lt;strong&gt;æ£€æŸ¥&lt;/strong&gt;å›¾åƒã€&lt;strong&gt;ä¸‹è½½&lt;/strong&gt;å•ä¸ªå›¾åƒå¹¶&lt;strong&gt;å¤åˆ¶&lt;/strong&gt;å›¾åƒ&lt;strong&gt;çš„ URL&lt;/strong&gt;ã€‚å¦‚æœæ‚¨æƒ³ä¸€æ¬¡&lt;strong&gt;ä¸‹è½½å¤šä¸ª&lt;/strong&gt;å›¾åƒï¼Œæ‚¨å¯ä»¥é€‰æ‹©æ‰€æœ‰éœ€è¦çš„å›¾åƒï¼Œç„¶åå°†å®ƒä»¬å…¨éƒ¨ä¸‹è½½åˆ°&lt;strong&gt;ZIP å­˜æ¡£ä¸­&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;åŒç±»å‹çš„ç½‘ç«™ï¼Œè¿˜æœ‰ &lt;a href=&quot;https://nicelinks.site/redirect?url=https://imagecyborg.com/&quot; rel=&quot; nofollow ugc&quot;&gt;Image Cyborg&lt;/a&gt;&lt;br/&gt;
ã€&lt;a href=&quot;https://nicelinks.site/redirect?url=https://imgdownloader.com/&quot; rel=&quot; nofollow ugc&quot;&gt;ImgDownloader - Bulk Download Image from Website and URL&lt;/a&gt;ï¼Œæœ‰åˆæ­¥åšäº†æ¯”è¾ƒï¼š&lt;/p&gt;

&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://nicelinks.site/redirect?url=https://imagecyborg.com/&quot; rel=&quot; nofollow ugc&quot;&gt;Image Cyborg&lt;/a&gt; æ‰¹é‡ä¸‹è½½ç½‘é¡µä¸Šçš„æ‰€æœ‰å›¾åƒã€‚åªéœ€ç²˜è´´ URL æˆ–é“¾æ¥å³å¯è·å–å›¾åƒã€‚ï¼ˆè¯„ä»·ï¼šä¸‹è½½çš„å›¾ç‰‡ï¼Œå¾ˆå…¨é¢ï¼›ä½†ï¼Œæ‚¨éœ€è¦åˆ›å»ºä¸€ä¸ªå…è´¹å¸æˆ·æˆ–ç™»å½•æ‰èƒ½ä½¿ç”¨æ­¤åº”ç”¨ç¨‹åºï¼Œè¿™ä¸€ç‚¹ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://nicelinks.site/redirect?url=https://imgdownloader.com/&quot; rel=&quot; nofollow ugc&quot;&gt;ImgDownloader - Bulk Download Image from Website and URL&lt;/a&gt; å¼ºå¤§çš„å›¾åƒä¸‹è½½å·¥å…·ï¼Œå¯è®©æ‚¨&lt;strong&gt;ä»ä»»ä½•ç½‘ç«™ä¸‹è½½æ‰€æœ‰å›¾åƒï¼Œè°·æ­Œå›¾åƒ&lt;/strong&gt;ã€‚&lt;strong&gt;ä» Pinterest å’Œ Instagram ä¸‹è½½æ‰€æœ‰å›¾ç‰‡å’Œè§†é¢‘&lt;/strong&gt;ï¼åªéœ€å¤åˆ¶å¹¶ç²˜è´´ URLï¼Œå³å¯ç«‹å³è·å–æ‰€æœ‰å›¾åƒã€å›¾ç‰‡æˆ–è§†é¢‘ï¼Œmp4ã€‚ï¼ˆè¯„ä»·ï¼šä¸‹è½½çš„å›¾ç‰‡ï¼Œå¾ˆå…¨é¢ï¼›è€Œä¸”å¯ä»¥å¤„ç†æ¥è‡ªç½‘ç«™ä»¥å¤–çš„å›¾ç‰‡ï¼‰ï¼›&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://nicelinks.site/redirect?url=https://extract.pics/&quot; rel=&quot; nofollow ugc&quot;&gt;Extract.pics&lt;/a&gt; æ˜¯ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„å·¥å…·ï¼Œå…è®¸æ‚¨ä»ä»»ä½•å…¬å…±ç½‘ç«™æå–ã€æŸ¥çœ‹å’Œä¸‹è½½å›¾åƒã€‚åªéœ€å°†ç½‘ç«™çš„ URL ç²˜è´´åˆ°è¾“å…¥å­—æ®µä¸­ï¼Œç„¶åå•å‡»â€œæå–â€å³å¯å¼€å§‹è¯¥è¿‡ç¨‹ã€‚ï¼ˆè¯„ä»·ï¼šä¸‹è½½çš„å›¾ç‰‡ï¼Œä¼¼ä¹ä¸å¤Ÿå…¨é¢ï¼›ä½†æä¾›äº†æ›´åŠ å¼ºå¤§çš„èƒ½åŠ›ï¼Œä½¿å¾—æ‚¨å¯ä»¥æ›´å¿«æ‰¾åˆ°æ‚¨éœ€è¦çš„å›¾åƒï¼‰ï¼›&lt;/li&gt;&lt;/ul&gt;

&lt;p&gt;å¦‚æœæ‚¨ä»å…¬å…±ç½‘ç«™æå–ã€æŸ¥çœ‹å’Œä¸‹è½½å›¾åƒçš„è¯‰æ±‚ï¼Œæ‚¨å¯æŒ‰éœ€ä½¿ç”¨ç›¸å…³å·¥å…·ï¼›ç›®å‰è€Œè¨€ï¼ˆ2021 å¹´ 12 æœˆï¼‰ï¼Œæ›´æ¨èä½¿ç”¨ &lt;a href=&quot;https://nicelinks.site/redirect?url=https://imgdownloader.com/&quot; rel=&quot; nofollow ugc&quot;&gt;ImgDownloader&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;p&gt;â”€â”€ å‡ºè‡ª&lt;a href=&quot;https://nicelinks.site/post/61b2002a48f785032a2400b0&quot; rel=&quot; nofollow ugc&quot;&gt;å€¾åŸä¹‹é“¾ - Image Extractor&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;&lt;strong&gt;æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/tags/%E5%9C%A8%E7%BA%BF&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;åœ¨çº¿&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/IDE&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;IDE&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E7%BC%96%E8%BE%91%E5%99%A8&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;ç¼–è¾‘å™¨&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;

&lt;blockquote class=&quot;uncited&quot;&gt;&lt;div&gt;&lt;p&gt;Replit is a simple yet powerful online IDE, Editor, Compiler, Interpreter, and REPL. Code, compile, run, and host in 50+ programming languages.&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/replit.com.png?x-oss-process=style/png2jpg&quot; title=&quot;&quot; alt=&quot;å€¾åŸä¹‹é“¾ - The collaborative browser based IDE&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ¨èè¯­&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/redirect?url=https://replit.com/&quot; rel=&quot; nofollow ugc&quot;&gt;Replit&lt;/a&gt; æ˜¯ä¸€ä¸ªç®€å•è€Œå¼ºå¤§çš„åœ¨çº¿ IDEã€ç¼–è¾‘å™¨ã€ç¼–è¯‘å™¨ã€è§£é‡Šå™¨å’Œ REPLã€‚ä½¿ç”¨ 50 å¤šç§ç¼–ç¨‹è¯­è¨€è¿›è¡Œç¼–ç ã€ç¼–è¯‘ã€è¿è¡Œå’Œæ‰˜ç®¡ã€‚å®ƒå…·æœ‰ä»¥ä¸‹åŠŸèƒ½ç‰¹å¾ï¼š&lt;/p&gt;

&lt;ul&gt;&lt;li&gt;&lt;strong&gt;æµè§ˆå™¨å†…IDE&lt;/strong&gt;ï¼šåœ¨ä»»ä½•å¹³å°ã€æ“ä½œç³»ç»Ÿå’Œè®¾å¤‡ä¸Šä½¿ç”¨æ‚¨å–œæ¬¢çš„è¯­è¨€å¼€å§‹ç¼–ç ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®æ—¶åä½œ&lt;/strong&gt;ï¼šä½¿ç”¨è¯¸å¦‚ç¼–è¾‘ä¹‹ç±»çš„ Google æ–‡æ¡£é‚€è¯·æ‚¨çš„æœ‹å‹ã€é˜Ÿå‹å’ŒåŒäº‹ç›´æ¥è¿›å…¥æ‚¨çš„ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GitHub é›†æˆ&lt;/strong&gt;ï¼šé€šè¿‡ 0 æ¬¡æ‰‹åŠ¨è®¾ç½®å¯¼å…¥ã€è¿è¡Œå’Œåä½œå¤„ç†æ•°ç™¾ä¸‡ä¸ª GitHub å­˜å‚¨åº“ã€‚-&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;50 å¤šç§è¯­è¨€&lt;/strong&gt;ï¼šä» Python åˆ° C++ï¼Œå†åˆ° HTML å’Œ CSSï¼Œç•™åœ¨ä¸€ä¸ªå¹³å°ä¸Šï¼Œç”¨æ‚¨æƒ³è¦çš„ä»»ä½•è¯­è¨€å­¦ä¹ å’Œç¼–ç ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰˜ç®¡å’Œéƒ¨ç½²&lt;/strong&gt;ï¼šå½“ä½ åˆ›å»ºä¸€ä¸ªæ–°çš„ repl æ—¶ï¼Œå®ƒä¼šç«‹å³ç”Ÿæ•ˆå¹¶ä¸ä¸–ç•Œå…±äº«ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­¦ä¹ èµ„æº&lt;/strong&gt;ï¼šä»è¶…è¿‡ 300 ä¸‡çƒ­æƒ…çš„ç¨‹åºå‘˜ã€æŠ€æœ¯ä¸“å®¶ã€åˆ›æ„äººå‘˜å’Œå„ç§å­¦ä¹ è€…é‚£é‡Œå­¦ä¹ å¦‚ä½•ç¼–ç ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å›¢é˜Ÿè®¡åˆ’&lt;/strong&gt;ï¼šé€šè¿‡äº¤äº’å¼æ–‡æ¡£ã€å®æ—¶åä½œå’Œé›¶éº»çƒ¦çš„è¿œç¨‹é¢è¯•æé«˜æ‚¨çš„å›¢é˜Ÿçš„å·¥ä½œæ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;API å’Œæ’ä»¶&lt;/strong&gt;ï¼šä»¥ç¼–ç¨‹æ–¹å¼åˆ›å»ºåº”ç”¨ç¨‹åºã€å¯åŠ¨æœºå™¨äººå¹¶ä½¿ç”¨æ’ä»¶è‡ªå®šä¹‰ IDE ä»¥æ»¡è¶³æ‚¨çš„éœ€æ±‚ã€‚&lt;/li&gt;&lt;/ul&gt;

&lt;p&gt;å› ä¸º &lt;a href=&quot;https://nicelinks.site/redirect?url=https://replit.com/&quot; rel=&quot; nofollow ugc&quot;&gt;Replit&lt;/a&gt; ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ç¼–ç ï¼Œä¸”æ”¯æŒå¤šäººåä½œï¼ˆäº«å—ç±»ä¼¼äº Google æ–‡æ¡£çš„ç¼–è¾‘ä½“éªŒï¼Œæ‚¨å¯ä»¥åœ¨å…¶ä¸­çœ‹åˆ°åä½œè€…çš„å…‰æ ‡ï¼‰ï¼Œå› ä¸ºç”¨å®ƒæ¥åšä»£ç ç›¸å…³äº¤æµã€å­¦ä¹ ï¼Œçœ‹èµ·æ¥æŒºæœ‰ä»·å€¼ã€‚åœ¨å…¶å®˜æ–¹ç½‘ç«™å†™é“ï¼šâ€œæ˜¯ä¸ºäº†è®©ç¼–ç¨‹æ›´å®¹æ˜“ä¸Šæ‰‹ã€‚æˆ‘ä»¬ä¸ºæ•™è‚²è€…ã€å­¦ä¹ è€…å’Œå¼€å‘è€…æ„å»ºå¼ºå¤§è€Œç®€å•çš„å·¥å…·å’Œå¹³å°â€œã€‚&lt;/p&gt;

&lt;p&gt;â”€â”€ å‡ºè‡ª&lt;a href=&quot;https://nicelinks.site/post/61b1f5ff48f785032a2400ae&quot; rel=&quot; nofollow ugc&quot;&gt;å€¾åŸä¹‹é“¾ - The collaborative browser based IDE&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;&lt;strong&gt;æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/tags/%E5%B9%B3%E5%8F%B0&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;å¹³å°&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E6%9C%8D%E5%8A%A1&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;æœåŠ¡&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E5%B7%A5%E5%85%B7&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;å·¥å…·&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;

&lt;blockquote class=&quot;uncited&quot;&gt;&lt;div&gt;&lt;p&gt;å…”å°å·¢æ˜¯è…¾è®¯æ¨å‡ºçš„ä¸€æ¬¾è½»é‡ã€å…è´¹çš„ç”¨æˆ·æ„è§åé¦ˆæœåŠ¡å¹³å°ï¼Œæ—¨åœ¨æ–¹ä¾¿åœ°åµŒå…¥APP/å¾®ä¿¡å…¬ä¼—å·/QQå…¬ä¼—å·ï¼Œä¸ºä¸­å°ä¼ä¸šæˆ–å›¢é˜Ÿå¿«é€Ÿæ­å»ºç”¨æˆ·åé¦ˆé€šé“ï¼Œå¸®åŠ©äº§å“æå‡æœåŠ¡æ°´å¹³å’Œæ•ˆç‡&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/txc.qq.com.png?x-oss-process=style/png2jpg&quot; title=&quot;&quot; alt=&quot;å€¾åŸä¹‹é“¾ - è…¾è®¯å…”å°å·¢-å…è´¹ä¾¿æ·çš„ç”¨æˆ·æ„è§åé¦ˆæœåŠ¡å¹³å°&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ¨èè¯­&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/redirect?url=https://txc.qq.com/&quot; rel=&quot; nofollow ugc&quot;&gt;å…”å°å·¢&lt;/a&gt;æ˜¯è…¾è®¯æ¨å‡ºçš„ä¸€æ¬¾è½»é‡ã€&lt;code&gt;å…è´¹&lt;/code&gt;çš„ç”¨æˆ·æ„è§åé¦ˆæœåŠ¡å¹³å°ã€‚å‡ è¡Œä»£ç  æ‹¥æœ‰å’Œè…¾è®¯ç½‘ä¸€æ ·çš„äº’åŠ¨ç¤¾åŒºï¼Œè®©åé¦ˆå˜å¾—ä¾¿æ·ï¼Œè½»å·§ï¼›å¯¹è¿è¥äººå‘˜ï¼ˆä¸å†ç–²äºè¿è¥ï¼‰ã€ç¨‹åºå‘˜ï¼ˆä¸å¿…è‡ªå»ºåé¦ˆï¼‰ã€äº§å“ç»ç†ï¼ˆå¾®ä¿¡æ¨é€å›å¤ï¼‰éƒ½èƒ½äº§ç”Ÿä½œç”¨ï¼š&lt;/p&gt;

&lt;ul&gt;&lt;li&gt;è¿è¥äººå‘˜ï¼šæ— éœ€ç™»å½•åå°å³å¯ç®€å•ç®¡ç†ï¼Œä½ ä¸å®¢æˆ·çš„æ²Ÿé€šå¹³å°æ°¸è¿œç®€æ´æœ‰åºï¼›&lt;/li&gt;
&lt;li&gt;ç¨‹åºå‘˜ï¼šå‡ è¡Œä»£ç å°†å…”å°å·¢æ”¾å…¥åœ¨ä»»ä½•åœ°æ–¹ï¼ŒåŒ…æ‹¬å…¬ä¼—å·ã€APPã€H5ã€ç½‘ç«™ç­‰ï¼›&lt;/li&gt;
&lt;li&gt;äº§å“ç»ç†ï¼šç”¨æˆ·é€šè¿‡å¾®ä¿¡æ”¶åˆ°ä½ çš„å›å¤ï¼Œä½ ä¸ç”¨æˆ·æ²Ÿé€šæ›´åŠ é«˜æ•ˆï¼›&lt;/li&gt;&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;https://nicelinks.site/redirect?url=https://txc.qq.com/&quot; rel=&quot; nofollow ugc&quot;&gt;å…”å°å·¢&lt;/a&gt;å¯è½»æ¾å®šåˆ¶å±äºè‡ªå·±çš„åé¦ˆå¹³å°ï¼Œä¸€ç«™å¼æ»¡è¶³ç®¡ç†ã€æŠ€æœ¯ã€å®¢æœã€è¿è¥ç­‰å¤šè§’è‰²ä½¿ç”¨éœ€æ±‚ï¼ŒåŒæ—¶äº«ç”¨å®‰å…¨ç¨³å®šã€é«˜æ€§èƒ½ã€é«˜å»¶å±•çš„åº•å±‚è®¾æ–½ã€‚çœ‹ä¼¼å¤æ‚çš„ç³»ç»Ÿï¼Œä»æ­¤è§¦æ‰‹å¯åŠã€‚æ‚¨å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½ç‰¹å¾ï¼Œæ›´åŠ å…¨é¢äº†è§£&lt;a href=&quot;https://nicelinks.site/redirect?url=https://txc.qq.com/&quot; rel=&quot; nofollow ugc&quot;&gt;å…”å°å·¢&lt;/a&gt;ï¼š&lt;/p&gt;

&lt;ul&gt;&lt;li&gt;&lt;strong&gt;æ•°æ®ä¸€é”®å¯¼å‡º&lt;/strong&gt;ï¼šæ–¹ä¾¿å¯¼å‡ºæ‰€æœ‰æ•°æ®ï¼Œæ–¹ä¾¿æ•°æ®çš„å…¶ä»–ä½¿ç”¨ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸ä»‹å…¥æ•°æ®&lt;/strong&gt;ï¼šåªè´Ÿè´£æŠ€æœ¯æ”¯æ’‘ï¼Œä¸ä»‹å…¥ä»»ä½•äº§å“æ•°æ®ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¨³å®šå¯é &lt;/strong&gt;ï¼šè…¾è®¯é—¨ç¥ç­‰å¤šä¸ªå®‰å…¨ç³»ç»Ÿä¸ºåé¦ˆæ•°æ®ä¿é©¾æŠ¤èˆªï¼›&lt;/li&gt;&lt;/ul&gt;

&lt;p&gt;å…¶ä»–å¦‚&lt;a href=&quot;https://nicelinks.site/post/5b40437e615bf842b6091043&quot; rel=&quot; nofollow ugc&quot;&gt;è¯­é›€&lt;/a&gt;ä¹Ÿå…·æœ‰ç±»ä¼¼çš„åŠŸèƒ½ï¼Œè™½ç„¶åŠŸèƒ½åç»­æ›´å¼ºå¤§ï¼Œåªå¯æƒœä¸æ˜¯æ‰€æœ‰ç”¨æˆ·éƒ½å…·æœ‰å…¶è´¦å·ï¼›å…ˆå‰åšçš„å‡ æ¬¾ Webï¼ˆå¦‚&lt;a href=&quot;https://nicelinks.site/redirect?url=https://support.qq.com/products/368784&quot; rel=&quot; nofollow ugc&quot;&gt;æ›¼å¦™å¥å­&lt;/a&gt;ï¼‰ ä¹Ÿæ˜¯é‡‡ç”¨&lt;a href=&quot;https://nicelinks.site/redirect?url=https://txc.qq.com/&quot; rel=&quot; nofollow ugc&quot;&gt;å…”å°å·¢&lt;/a&gt;ä½œä¸ºåé¦ˆå¹³å°ï¼Œçœå´å¾ˆå¤šéº»çƒ¦ï¼›ä¸ç”¨æˆ·æ²Ÿé€šï¼Œç›¸å¯¹è¦é«˜æ•ˆå¾ˆå¤šã€‚å¯¹æ­¤æ„Ÿå…´è¶£çš„æœ‹å‹ï¼Œå¯ä»¥æŸ¥çœ‹&lt;a href=&quot;https://nicelinks.site/redirect?url=https://txc.qq.com/helper/fiveFaq&quot; rel=&quot; nofollow ugc&quot;&gt;å…”å°å·¢æ¥å…¥æ–‡æ¡£&lt;/a&gt;ï¼Œä»è€Œäº†è§£æ›´å¤šã€‚&lt;/p&gt;

&lt;p&gt;â”€â”€ å‡ºè‡ª&lt;a href=&quot;https://nicelinks.site/post/61ae1bfd9b06756d7dc1a3fb&quot; rel=&quot; nofollow ugc&quot;&gt;å€¾åŸä¹‹é“¾ - è…¾è®¯å…”å°å·¢-å…è´¹ä¾¿æ·çš„ç”¨æˆ·æ„è§åé¦ˆæœåŠ¡å¹³å°&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;&lt;strong&gt;æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/tags/%E7%BD%91%E7%AB%99%E7%94%9F%E6%88%90%E5%99%A8&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;ç½‘ç«™ç”Ÿæˆå™¨&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E5%B7%A5%E5%85%B7&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;å·¥å…·&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E6%97%A0%E4%BB%A3%E7%A0%81&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;æ— ä»£ç &lt;/code&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å…³é”®å­—&lt;/strong&gt;ï¼šLow code platform,Custom software,Web application builder,internal tools,internal tool builder&lt;/p&gt;

&lt;blockquote class=&quot;uncited&quot;&gt;&lt;div&gt;&lt;p&gt;Budibase is a modern, open source low-code platform for building modern internal applications in minutes.&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/budibase.com.png?x-oss-process=style/png2jpg&quot; title=&quot;&quot; alt=&quot;å€¾åŸä¹‹é“¾ - Budibase | Create modern business apps in minutes&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ¨èè¯­&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/redirect?url=https://budibase.com/&quot; rel=&quot; nofollow ugc&quot;&gt;Budibase&lt;/a&gt;ï¼Œæ˜¯ä¸€ä¸ª&lt;strong&gt;å¼€æº&lt;/strong&gt;çš„ä½ä»£ç å¹³å°ï¼Œæ˜¯ä¸€ç§æ„å»ºä¸šåŠ¡åº”ç”¨ç¨‹åºçš„æ›´å¿«æ–¹æ³•ï¼Œå¯ä»¥ä¸ºå›¢é˜Ÿèµ‹èƒ½å¹¶æé«˜ç”Ÿäº§åŠ›ã€‚&lt;a href=&quot;https://nicelinks.site/redirect?url=https://budibase.com/&quot; rel=&quot; nofollow ugc&quot;&gt;Budibase&lt;/a&gt; æ±‡é›†äº†æ„å»ºä¸šåŠ¡åº”ç”¨ç¨‹åºæ‰€éœ€çš„ä¸€åˆ‡ï¼Œå¹¶å°†æœ€ä½³çš„å¼€å‘äººå‘˜ä½“éªŒä¸å¯¹é€Ÿåº¦ã€æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒçš„æ‰§ç€å…³æ³¨ç›¸ç»“åˆã€‚æ‚¨å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªåŠŸèƒ½ç‰¹å¾ï¼Œæ¥äº†è§£ &lt;a href=&quot;https://nicelinks.site/redirect?url=https://budibase.com/&quot; rel=&quot; nofollow ugc&quot;&gt;Budibase&lt;/a&gt; çš„å¼ºå¤§ï¼š&lt;/p&gt;

&lt;ul&gt;&lt;li&gt;&lt;strong&gt;å†…éƒ¨å·¥å…·&lt;/strong&gt;ï¼šåˆ›å»ºå¯ç®€åŒ–æ“ä½œå¹¶æ— ç¼èå…¥æ‚¨çš„å·¥ä½œæµç¨‹çš„å†…éƒ¨å·¥å…·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å½¢å¼&lt;/strong&gt;ï¼šä½¿ç”¨ Budibase ä¸€æµçš„è¡¨å•ç”Ÿæˆå™¨å…¬å¼€ã€ç§ä¸‹æˆ–åŒæ—¶æ”¶é›†æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç®¡ç†é¢æ¿&lt;/strong&gt;ï¼šè¿æ¥åˆ°æ‚¨çš„æ•°æ®åº“å¹¶åœ¨å‡ åˆ†é’Ÿå†…æ„å»ºä¸€ä¸ªå…·æœ‰ç›¸å…³æƒé™çš„ç®¡ç†é¢æ¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼ é€é—¨&lt;/strong&gt;ï¼šä¸ºæ‚¨çš„å®¢æˆ·ã€åˆä½œä¼™ä¼´ã€ä¾›åº”å•†å’Œå‘˜å·¥åˆ›å»ºå®‰å…¨ä¸”å¼•äººå…¥èƒœçš„é—¨æˆ·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¼€æºå’Œå…è´¹&lt;/strong&gt;ï¼šBudibase æ˜¯å¼€æºçš„ï¼Œæ‚¨å¯ä»¥åœ¨è‡ªå·±çš„åŸºç¡€æ¶æ„ä¸Šè‡ªæ‰˜ç®¡ Budibase åº”ç”¨ç¨‹åºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å†…éƒ¨æ•°æ®åº“&lt;/strong&gt;ï¼šBudibase æœ‰ä¸€ä¸ªå†…éƒ¨æ•°æ®åº“ï¼Œå¯è®©æ‚¨åœ¨å‡ åˆ†é’Ÿå†…æ„å»ºä¸šåŠ¡åº”ç”¨ç¨‹åºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¬å…±å’Œç§äººåº”ç”¨&lt;/strong&gt;ï¼šä½¿ç”¨ Budibaseï¼Œæ‚¨å¯ä»¥è½»æ¾å¿«é€Ÿåœ°æ„å»ºå…¬å…±å’Œç§æœ‰åº”ç”¨ç¨‹åºï¼Œæˆ–ä¸¤è€…å…¼è€Œæœ‰ä¹‹ã€‚&lt;/li&gt;&lt;/ul&gt;

&lt;p&gt;é™¤ä¸Šè¿°æåŠçš„ï¼Œ&lt;a href=&quot;https://nicelinks.site/redirect?url=https://budibase.com/&quot; rel=&quot; nofollow ugc&quot;&gt;Budibase&lt;/a&gt; åœ¨&lt;strong&gt;æ•°æ®&lt;/strong&gt;ï¼ˆè¿æ¥åˆ°å¤–éƒ¨æ•°æ®åº“ã€ä» Rest API æå–æ•°æ®ã€å¯¼å…¥ CSV æˆ–ä»å¤´å¼€å§‹ä½¿ç”¨ Budibase çš„å†…ç½®æ•°æ®åº“ï¼‰ã€&lt;strong&gt;è®¾è®¡&lt;/strong&gt;ï¼ˆè®¾è®¡é€‚ç”¨äºæ‰€æœ‰è®¾å¤‡çš„ç²¾ç¾å•†åŠ¡åº”ç”¨ï¼‰ã€&lt;strong&gt;è‡ªåŠ¨åŒ–&lt;/strong&gt;ï¼ˆåªéœ€å•å‡»å‡ ä¸‹å³å¯è‡ªåŠ¨æ‰§è¡Œæ‰‹åŠ¨æµç¨‹ï¼‰ã€éƒ¨ç½²ï¼ˆå€ŸåŠ© Budibase çš„å¼€æºå¹³å°ï¼Œåº”ç”¨ç¨‹åºæ•°æ®æ°¸è¿œä¸å¿…ç¦»å¼€æ‚¨çš„åŸºç¡€æ¶æ„ã€‚é€šè¿‡ Kubernetesã€Dockerã€Digital Ocean è¿›è¡Œéƒ¨ç½²ã€‚æˆ–è€…é€‰æ‹© Budibase Cloudï¼Œè®© Budibase ä¸ºæ‚¨ç®¡ç†ä¸€åˆ‡ã€‚ï¼‰ç­‰æ–¹é¢ï¼Œä¹Ÿæ˜¯åšäº†å‡ºè‰²çš„è®¾å®šã€‚&lt;/p&gt;

&lt;p&gt;åœ¨ &lt;a href=&quot;https://nicelinks.site/redirect?url=https://budibase.com/&quot; rel=&quot; nofollow ugc&quot;&gt;Budibase&lt;/a&gt; å…³äºé¡µé¢å†™åˆ°ï¼š Budibase æ˜¯ä¸€ä¸ªä¸“ä¸ºæé«˜é€Ÿåº¦å’Œç”Ÿäº§åŠ›è€Œè®¾è®¡çš„å¼€å‘å¹³å°ã€‚ä½¿ç”¨ Budibaseï¼Œå¼€å‘äººå‘˜ä¸å†ç»å†é‡å¤ã€é•¿å¼€å‘å‘¨æœŸå’ŒæŒ«æŠ˜ã€‚ç›¸åï¼Œå¼€å‘äººå‘˜çš„å·¥ä½œæ•ˆç‡æ›´é«˜ã€æ›´å¿«ä¹ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å‡ åˆ†é’Ÿå†…äº¤ä»˜ä»–ä»¬å¼•ä»¥ä¸ºè±ªçš„åº”ç”¨ç¨‹åºã€‚å…¶ä½¿å‘½æ˜¯ï¼šæ‰“é€ å…¨çƒé¢†å…ˆçš„å•†ä¸šåº”ç”¨ç”Ÿæ€ç³»ç»Ÿã€‚&lt;/p&gt;

&lt;p&gt;â”€â”€ å‡ºè‡ª&lt;a href=&quot;https://nicelinks.site/post/61ab30102afff60541cdbaa8&quot; rel=&quot; nofollow ugc&quot;&gt;å€¾åŸä¹‹é“¾ - Budibase | Create modern business apps in minutes&lt;/a&gt;&lt;/p&gt;



&lt;p&gt;&lt;strong&gt;æ ‡ç­¾&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/tags/Markdown&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;Markdown&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E5%B7%A5%E5%85%B7&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;å·¥å…·&lt;/code&gt;&lt;/a&gt; Â· &lt;a href=&quot;https://nicelinks.site/tags/%E7%BC%96%E8%BE%91%E5%99%A8&quot; rel=&quot; nofollow ugc&quot;&gt;&lt;code&gt;ç¼–è¾‘å™¨&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;

&lt;blockquote class=&quot;uncited&quot;&gt;&lt;div&gt;&lt;p&gt;Simple and Elegant Markdown Editor Focused on speed and usability. Available for macOS, Windows and Linux.&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/marktext.app.png?x-oss-process=style/png2jpg&quot; title=&quot;&quot; alt=&quot;å€¾åŸä¹‹é“¾ - Mark Text&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ¨èè¯­&lt;/strong&gt;ï¼š&lt;a href=&quot;https://nicelinks.site/redirect?url=https://marktext.app/&quot; rel=&quot; nofollow ugc&quot;&gt;Mark Text&lt;/a&gt;ï¼Œä¸€ä¸ªç®€å•è€Œä¼˜é›…çš„å¼€æº Markdown ç¼–è¾‘å™¨ï¼Œä¸“æ³¨äºé€Ÿåº¦å’Œå¯ç”¨æ€§ã€‚é€‚ç”¨äº Linuxã€macOS å’Œ Windowsã€‚Mark Text æ˜¯ä¸€ä¸ª MIT è®¸å¯çš„å¼€æºé¡¹ç›®ï¼Œæœ€æ–°ç‰ˆæœ¬å°†å§‹ç»ˆå¯ä»¥ä» GitHub å‘å¸ƒé¡µé¢å…è´¹ä¸‹è½½ã€‚Mark Text è¿˜åœ¨å‘å±•ä¸­ï¼Œæ‚¨å¯ä»¥ä»ä»¥ä¸‹ç‰¹å¾ï¼Œæ¥äº†è§£å®ƒçš„å¼ºå¤§ï¼š&lt;/p&gt;

&lt;ul&gt;&lt;li&gt;å®æ—¶é¢„è§ˆ (WYSIWYG) å’Œå¹²å‡€ç®€å•çš„ç•Œé¢ï¼Œä»¥è·å¾—æ— å¹²æ‰°çš„å†™ä½œä½“éªŒã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒ CommonMark Specã€GitHub Flavored Markdown Spec å’Œé€‰æ‹©æ€§æ”¯æŒ Pandoc markdownã€‚&lt;/li&gt;
&lt;li&gt;Markdown æ‰©å±•ï¼Œä¾‹å¦‚æ•°å­¦è¡¨è¾¾å¼ (KaTeX)ã€å‰ç«¯å’Œè¡¨æƒ…ç¬¦å·ã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒæ®µè½å’Œå†…è”æ ·å¼å¿«æ·æ–¹å¼ï¼Œä»¥æé«˜æ‚¨çš„å†™ä½œæ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;è¾“å‡º &lt;strong&gt;HTML&lt;/strong&gt; å’Œ &lt;strong&gt;PDF&lt;/strong&gt; æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;å„ç§ä¸»é¢˜ï¼š&lt;strong&gt;Cadmium Light&lt;/strong&gt;ã€&lt;strong&gt;Material Dark&lt;/strong&gt; ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;å¤šç§ç¼–è¾‘æ¨¡å¼ï¼š&lt;strong&gt;æºä»£ç æ¨¡å¼&lt;/strong&gt;ã€&lt;strong&gt;æ‰“å­—æœºæ¨¡å¼&lt;/strong&gt;ã€&lt;strong&gt;ç„¦ç‚¹æ¨¡å¼&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›´æ¥ä»å‰ªè´´æ¿ç²˜è´´å›¾åƒ&lt;/strong&gt;ã€‚&lt;/li&gt;&lt;/ul&gt;

&lt;p&gt;ä¸ºä»€ä¹ˆè¦å†™å¦ä¸€ä¸ªç¼–è¾‘å™¨ï¼Ÿä½œè€…ç»™å‡ºäº†è¯´æ˜ï¼š&lt;/p&gt;

&lt;blockquote class=&quot;uncited&quot;&gt;&lt;div&gt;&lt;ul&gt;&lt;li&gt;æˆ‘å–œæ¬¢å†™ä½œã€‚æˆ‘ç”¨äº†å¾ˆå¤š markdown ç¼–è¾‘å™¨ï¼Œä½†ä»ç„¶æ²¡æœ‰ä¸€ä¸ªç¼–è¾‘å™¨å¯ä»¥å®Œå…¨æ»¡è¶³æˆ‘çš„éœ€æ±‚ã€‚å½“æˆ‘å†™ä¸€äº›éš¾ä»¥å¿å—çš„é”™è¯¯æ—¶ï¼Œæˆ‘ä¸å–œæ¬¢è¢«æ‰“æ‰°ã€‚Mark Text ä½¿ç”¨è™šæ‹Ÿ DOM æ¥å‘ˆç°é¡µé¢ï¼Œè¿™å…·æœ‰é«˜æ•ˆå’Œå¼€æºçš„é¢å¤–å¥½å¤„ã€‚è¿™æ ·ä»»ä½•å–œæ¬¢ Markdown å’Œå†™ä½œçš„äººéƒ½å¯ä»¥ä½¿ç”¨ Mark Textã€‚&lt;/li&gt;
&lt;li&gt;å¦‚ä¸Šæ‰€è¿°ï¼ŒMark Text æ˜¯å®Œå…¨å…è´¹å’Œå¼€æºçš„ï¼Œå¹¶å°†æ°¸è¿œå¼€æºã€‚æˆ‘ä»¬å¸Œæœ›æ‰€æœ‰ Markdown çˆ±å¥½è€…éƒ½èƒ½è´¡çŒ®è‡ªå·±çš„ä»£ç ï¼Œå¸®åŠ©å°† Mark Text å¼€å‘æˆæµè¡Œçš„ Markdown ç¼–è¾‘å™¨ã€‚&lt;/li&gt;
&lt;li&gt;æœ‰å¾ˆå¤š Markdown ç¼–è¾‘å™¨ï¼Œå®ƒä»¬éƒ½æœ‰è‡ªå·±çš„ä¼˜ç‚¹ï¼Œæœ‰äº›å…·æœ‰å…¶ä»–äººæ²¡æœ‰çš„åŠŸèƒ½ã€‚å¾ˆéš¾æ»¡è¶³æ¯ä¸ª Markdown ç”¨æˆ·çš„éœ€æ±‚ï¼Œä½†æˆ‘ä»¬å¸Œæœ› Mark Text èƒ½å¤Ÿå°½å¯èƒ½æ»¡è¶³æ¯ä¸ª markdown ç”¨æˆ·ã€‚å°½ç®¡æœ€æ–°çš„ Mark Text ä»ç„¶ä¸å®Œç¾ï¼Œä½†æˆ‘ä»¬ä¼šå°½åŠ›åšåˆ°æœ€å¥½ã€‚&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;ä¸ªäººä¹Ÿå–œæ¬¢å†™ä½œï¼Œè€Œä¸”å–œæ¬¢ &lt;a href=&quot;https://nicelinks.site/tags/Markdown&quot; rel=&quot; nofollow ugc&quot;&gt;Markdown ç¼–è¾‘å™¨&lt;/a&gt;æ¥ä¹¦å†™âœï¸ï¼›å·²å°è¯•è¿‡å¾ˆå¤šç›¸å…³äº§å“ï¼Œä½† &lt;a href=&quot;https://nicelinks.site/redirect?url=https://marktext.app/&quot; rel=&quot; nofollow ugc&quot;&gt;Mark Text&lt;/a&gt; è¿˜æ˜¯ç»™æˆ‘ç•™ä¸‹å¾ˆæ·±çš„å°è±¡ï¼Œå°¤å…¶æ˜¯æ”¯æŒ&lt;strong&gt;ç›´æ¥ä»å‰ªè´´æ¿ç²˜è´´å›¾åƒ&lt;/strong&gt;è¿™ä¸€åŠŸèƒ½ï¼›å¯¹ Markdown ç¼–è¾‘å™¨æ„Ÿå…´è¶£çš„æœ‹å‹ï¼Œä¸å¦¨å°è¯•ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;â”€â”€ å‡ºè‡ª&lt;a href=&quot;https://nicelinks.site/post/61ab2c6f2afff60541cdbaa6&quot; rel=&quot; nofollow ugc&quot;&gt;å€¾åŸä¹‹é“¾ - Mark Text&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å¯¹å€¾åŸä¹‹é“¾æ„Ÿå…´è¶£çš„æœ‹å‹ï¼Œå¯é€šè¿‡ Webï¼Œå°ç¨‹åºï¼Œå¿«åº”ç”¨ç­‰æ¸ é“è¿›è¡Œè®¿é—®(åç»­å°†æ”¯æŒæ›´å¤šï¼Œå¦‚ VsCode æ’ä»¶ï¼ŒChrome æ‰©å±•ç­‰)ã€‚æ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿éšæ—¶å‘æˆ‘ä»¬åé¦ˆï¼ˆæ‚¨å¯ä»¥é€šè¿‡å®˜ç½‘åé¦ˆæ¸ é“ï¼Œæˆ–æ·»åŠ å¦‚ä¸‹å®¢æœå¾®ä¿¡ï¼‰ï¼ŒğŸ¤² ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://image.nicelinks.site/%E5%80%BE%E5%9F%8E%E4%B9%8B%E9%93%BE-%E5%BE%AE%E4%BF%A1-mini.jpeg&quot; title=&quot;&quot; alt=&quot;å€¾åŸä¹‹é“¾ - å®¢æœå¾®ä¿¡&quot;/&gt;&lt;/p&gt;

&lt;h2&gt;æœ¬æœŸæ–‡æœ«å¯„è¯­&lt;/h2&gt;

&lt;p&gt;äººçš„ä¸€ç”Ÿè¦ç»å†å¤ªå¤šçš„ç”Ÿç¦»æ­»åˆ«ï¼Œé‚£äº›çªå¦‚å…¶æ¥çš„ç¦»åˆ«å¾€å¾€å°†äººä¼¤å¾—æªæ‰‹ä¸åŠã€‚&lt;strong&gt;äººç”Ÿä½•å¤„ä¸ç›¸é€¢ï¼Œä½†æœ‰äº›è½¬èº«ï¼ŒçœŸçš„å°±æ˜¯ä¸€ç”Ÿï¼Œä»æ­¤åä¼šæ— æœŸï¼Œæ°¸ä¸ç›¸è§&lt;/strong&gt;ã€‚ ç”¨åŠ›çˆ±è¿‡çš„äººï¼Œè®²å†è§é‚£ä¸€åˆ»æ ¼å¤–è‰°éš¾ã€‚ ä¸–ç•Œä¸Šæœ€é¥è¿œçš„è·ç¦»ä¸æ˜¯ç”Ÿç¦»æ­»åˆ«ï¼Œè€Œæ˜¯å¯¹æ–¹å·²ç»äº‘æ·¡é£è½»ï¼Œä½ å´å¿µå¿µä¸å¿˜ã€‚â”€â”€ ç™½è½æ¢…ã€Šä½ è‹¥å®‰å¥½ä¾¿æ˜¯æ™´å¤© - æ—å¾½å› ä¼ ã€‹&lt;/p&gt;

&lt;blockquote class=&quot;uncited&quot;&gt;&lt;div&gt;&lt;p&gt;&lt;a href=&quot;https://nicelinks.site/?utm_source=weekly&quot; rel=&quot; nofollow ugc&quot;&gt;å€¾åŸä¹‹é“¾&lt;/a&gt;ä½œä¸ºä¸€ä¸ªå¼€æ”¾å¹³å°ï¼Œæ—¨åœ¨äº‘é›†å…¨çƒ&lt;strong&gt;ä¼˜ç§€ç½‘ç«™&lt;/strong&gt;ï¼Œæ¢ç´¢äº’è”ç½‘ä¸­æ›´å¹¿é˜”çš„ä¸–ç•Œï¼›åœ¨è¿™é‡Œï¼Œä½ å¯ä»¥è½»æ¾å‘ç°ã€å­¦ä¹ ã€åˆ†äº«æ›´å¤šæœ‰ç”¨æˆ–æœ‰è¶£çš„äº‹ç‰©ã€‚&lt;/p&gt;&lt;/div&gt;&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;https://image.nicelinks.site/nicelinks-miniprogram-code.jpeg?imageView2/1/w/300/h/300/interlace/1/ignore-error/1&quot; title=&quot;&quot; alt=&quot;å°ç¨‹åºç  - å€¾åŸä¹‹é“¾&quot;/&gt;&lt;/p&gt;

&lt;h3&gt;æ‚¨å¯èƒ½æ„Ÿå…´è¶£çš„æ–‡ç« &lt;/h3&gt;


                &lt;/div&gt;
            &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>423f12830f553c1add3fa7a7971396a0</guid>
<title>ç²¾å¦™ç»ä¼¦çš„å¹¶å‘è‰ºæœ¯å“ â€” ConcurrentHashMapæ˜¯å¦‚ä½•ä¿è¯çº¿ç¨‹å®‰å…¨çš„</title>
<link>https://toutiao.io/k/6ypqn5r</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;p&gt;&lt;span&gt;ï¼ˆç»™&lt;/span&gt;&lt;span&gt;ImportNew&lt;/span&gt;&lt;span&gt;åŠ æ˜Ÿæ ‡ï¼Œæé«˜JavaæŠ€èƒ½ï¼‰&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;| å‰è¨€&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é˜…è¯»æ­¤ç¯‡æ–‡ç« ï¼Œä½ éœ€è¦æœ‰ä»¥ä¸‹çŸ¥è¯†åŸºç¡€&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;Javaå†…å­˜æ¨¡å‹ï¼Œå¯è§æ€§é—®é¢˜&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;CAS&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;HashMapåº•å±‚åŸç†&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨æ—¥å¸¸å¼€å‘ä¸­ä½¿ç”¨çš„HashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œè€Œçº¿ç¨‹å®‰å…¨ç±»HashTableåªæ˜¯ç®€å•çš„åœ¨æ–¹æ³•ä¸ŠåŠ é”å®ç°çº¿ç¨‹å®‰å…¨ï¼Œæ•ˆç‡ä½ä¸‹ï¼Œæ‰€ä»¥åœ¨çº¿ç¨‹å®‰å…¨çš„ç¯å¢ƒä¸‹æˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨ConcurrentHashMapï¼Œä½†æ˜¯åˆä¸ºä½•éœ€è¦å­¦ä¹ ConcurrentHashMapï¼Ÿç”¨ä¸å°±å®Œäº‹äº†ï¼Ÿæˆ‘è®¤ä¸ºå­¦ä¹ å…¶æºç æœ‰ä¸¤ä¸ªå¥½å¤„ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;æ›´çµæ´»çš„è¿ç”¨ConcurrentHashMap&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ¬£èµå¹¶å‘ç¼–ç¨‹å¤§å¸ˆDoug Leaçš„ä½œå“ï¼Œæºç ä¸­æœ‰å¾ˆå¤šå€¼å¾—æˆ‘ä»¬å­¦ä¹ çš„å¹¶å‘æ€æƒ³ï¼Œè¦æ„è¯†åˆ°ï¼Œçº¿ç¨‹å®‰å…¨ä¸ä»…ä»…åªæ˜¯åŠ é”&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘æŠ›å‡ºä»¥ä¸‹é—®é¢˜ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ConcurrentHashMapæ˜¯æ€ä¹ˆåšåˆ°çº¿ç¨‹å®‰å…¨çš„ï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;getæ–¹æ³•å¦‚ä½•çº¿ç¨‹å®‰å…¨åœ°è·å–keyã€valueï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;putæ–¹æ³•å¦‚ä½•çº¿ç¨‹å®‰å…¨åœ°è®¾ç½®keyã€valueï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;sizeæ–¹æ³•å¦‚æœçº¿ç¨‹å®‰å…¨åœ°è·å–å®¹å™¨å®¹é‡ï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åº•å±‚æ•°æ®ç»“æ„æ‰©å®¹æ—¶å¦‚æœä¿è¯çº¿ç¨‹å®‰å…¨ï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åˆå§‹åŒ–æ•°æ®ç»“æ„æ—¶å¦‚æœä¿è¯çº¿ç¨‹å®‰å…¨ï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;ConcurrentHashMapå¹¶å‘æ•ˆç‡æ˜¯å¦‚ä½•æé«˜çš„ï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å’ŒåŠ é”ç›¸æ¯”è¾ƒï¼Œä¸ºä»€ä¹ˆå®ƒæ¯”HashTableæ•ˆç‡é«˜ï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥ä¸‹æ¥ï¼Œå¸¦ç€é—®é¢˜æ¥ç»§ç»­çœ‹ä¸‹å»ï¼Œæ¬£èµå¹¶å‘å¤§å¸ˆç²¾å¦™ç»ä¼¦çš„å¹¶å‘è‰ºæœ¯ä½œå“ï¼ˆä»¥ä¸‹è®¨è®ºåŸºäºJDK1.8ï¼‰&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;| ç›¸å…³æ¦‚å¿µ&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;span&gt;Amdahlå®šå¾‹&lt;/span&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤èŠ‚å®šå¾‹æè¿°å‡æ¥è‡ªã€ŠJavaå¹¶å‘ç¼–ç¨‹å®æˆ˜ã€‹ä¸€ä¹¦&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡è®¾Fæ˜¯å¿…é¡»è¢«ä¸²è¡Œæ‰§è¡Œçš„éƒ¨åˆ†ï¼ŒNä»£è¡¨å¤„ç†å™¨æ•°é‡ï¼ŒSpeedupä»£è¡¨åŠ é€Ÿæ¯”ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºCPUä½¿ç”¨ç‡&lt;/p&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3149171270718232&quot; data-type=&quot;png&quot; data-w=&quot;181&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1J6IbIcPCLbWbNNO4NVOIPxKPMic7zKg4u7CnQHhALBA7VkpZfHCWiauFFHkFeYU679DzdTQLHiazNbIibkRnkoVgg/640?wx_fmt=png&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤å…¬å¼å‘Šè¯‰æˆ‘ä»¬ï¼Œå½“Nè¶‹è¿‘æ— é™å¤§ï¼ŒåŠ é€Ÿæ¯”æœ€å¤§è¶‹è¿‘äº1/Fï¼Œå‡è®¾æˆ‘ä»¬çš„ç¨‹åºæœ‰50%çš„éƒ¨åˆ†éœ€è¦ä¸²è¡Œæ‰§è¡Œï¼Œå°±ç®—å¤„ç†å™¨æ•°é‡æ— é™å¤šï¼Œæœ€é«˜çš„åŠ é€Ÿæ¯”åªèƒ½æ˜¯2ï¼ˆ20%çš„ä½¿ç”¨ç‡ï¼‰ï¼Œå¦‚æœç¨‹åºä¸­ä»…æœ‰10%çš„éƒ¨åˆ†éœ€è¦ä¸²è¡Œæ‰§è¡Œï¼Œæœ€é«˜çš„åŠ é€Ÿæ¯”å¯ä»¥è¾¾åˆ°9.2ï¼ˆ92%çš„ä½¿ç”¨ç‡ï¼‰ï¼Œä½†æˆ‘ä»¬çš„ç¨‹åºæˆ–å¤šæˆ–å°‘éƒ½ä¸€å®šä¼šæœ‰ä¸²è¡Œæ‰§è¡Œçš„éƒ¨åˆ†ï¼Œæ‰€ä»¥Fä¸å¯èƒ½ä¸º0ï¼Œæ‰€ä»¥ï¼Œå°±ç®—æœ‰æ— é™å¤šçš„CPUï¼ŒåŠ é€Ÿæ¯”ä¹Ÿä¸å¯èƒ½è¾¾åˆ°10ï¼ˆ100%çš„ä½¿ç”¨ç‡ï¼‰ï¼Œä¸‹é¢ç»™ä¸€å¼ å›¾æ¥è¡¨ç¤ºä¸²è¡Œæ‰§è¡Œéƒ¨åˆ†å æ¯”ä¸åŒå¯¹åˆ©ç”¨ç‡çš„å½±å“ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7764530551415797&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbue50Evic8ia9ibIeD4eBicfrLnbLfL8608CZWTv8ypibUevPPVZv83icOmdYMtQhldfMZfhJOzCpg2wRsicg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1342&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±æ­¤æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œç¨‹åºä¸­çš„å¯ä¼¸ç¼©æ€§ï¼ˆæå‡å¤–éƒ¨èµ„æºå³å¯æå‡å¹¶å‘æ€§èƒ½çš„æ¯”ç‡ï¼‰æ˜¯ç”±ç¨‹åºä¸­ä¸²è¡Œæ‰§è¡Œéƒ¨åˆ†æ‰€å½±å“çš„ï¼Œè€Œå¸¸è§çš„ä¸²è¡Œæ‰§è¡Œæœ‰é”ç«äº‰ï¼ˆä¸Šä¸‹æ–‡åˆ‡æ¢æ¶ˆè€—ã€ç­‰å¾…ã€ä¸²è¡Œï¼‰ç­‰ç­‰ï¼Œè¿™ç»™äº†æˆ‘ä»¬ä¸€ä¸ªå¯å‘ï¼Œå¯ä»¥é€šè¿‡å‡å°‘é”ç«äº‰æ¥ä¼˜åŒ–å¹¶å‘æ€§èƒ½ï¼Œè€ŒConcurrentHashMapåˆ™ä½¿ç”¨äº†é”åˆ†æ®µï¼ˆå‡å°é”èŒƒå›´ï¼‰ã€CASï¼ˆä¹è§‚é”ï¼Œå‡å°ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€ï¼Œæ— é˜»å¡ï¼‰ç­‰ç­‰æŠ€æœ¯ï¼Œä¸‹é¢æ¥å…·ä½“çœ‹çœ‹å§&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;| åˆå§‹åŒ–æ•°æ®ç»“æ„æ—¶çš„çº¿ç¨‹å®‰å…¨&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;HashMapçš„åº•å±‚æ•°æ®ç»“æ„è¿™é‡Œç®€å•å¸¦è¿‡ä¸€ä¸‹ï¼Œä¸åšè¿‡å¤šèµ˜è¿°ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.46598639455782315&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbue50Evic8ia9ibIeD4eBicfrLnbB9gEab68FCD4j9Ixyxw4rkibJpEQYs2mYKlMaMlek26eiaKe73oep4kQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1764&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤§è‡´æ˜¯ä»¥ä¸€ä¸ªNodeå¯¹è±¡æ•°ç»„æ¥å­˜æ”¾æ•°æ®ï¼ŒHashå†²çªæ—¶ä¼šå½¢æˆNodeé“¾è¡¨ï¼Œåœ¨é“¾è¡¨é•¿åº¦è¶…è¿‡8ï¼ŒNodeæ•°ç»„è¶…è¿‡64æ—¶ä¼šå°†é“¾è¡¨ç»“æ„è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼ŒNodeå¯¹è±¡ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;Node&lt;/span&gt;&amp;lt;&lt;span&gt;K&lt;/span&gt;,&lt;span&gt;V&lt;/span&gt;&amp;gt;Â &lt;span&gt;implements&lt;/span&gt;Â &lt;span&gt;Map&lt;/span&gt;.&lt;span&gt;Entry&lt;/span&gt;&amp;lt;&lt;span&gt;K&lt;/span&gt;,&lt;span&gt;V&lt;/span&gt;&amp;gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;final&lt;/span&gt;Â &lt;span&gt;int&lt;/span&gt;Â hash;&lt;br/&gt;Â Â &lt;span&gt;final&lt;/span&gt;Â KÂ key;&lt;br/&gt;Â Â &lt;span&gt;volatile&lt;/span&gt;Â VÂ val;&lt;br/&gt;Â Â &lt;span&gt;volatile&lt;/span&gt;Â Node&amp;lt;K,V&amp;gt;Â next;&lt;br/&gt;Â Â ...&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œvalueå’ŒnextæŒ‡é’ˆä½¿ç”¨äº†volatileæ¥ä¿è¯å…¶å¯è§æ€§ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨JDK1.8ä¸­ï¼Œåˆå§‹åŒ–ConcurrentHashMapçš„æ—¶å€™è¿™ä¸ª&lt;code&gt;Node[]&lt;/code&gt;æ•°ç»„æ˜¯è¿˜æœªåˆå§‹åŒ–çš„ï¼Œä¼šç­‰åˆ°ç¬¬ä¸€æ¬¡putæ–¹æ³•è°ƒç”¨æ—¶æ‰åˆå§‹åŒ–ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;final&lt;/span&gt;Â VÂ &lt;span&gt;putVal&lt;/span&gt;&lt;span&gt;(KÂ key,Â VÂ value,Â &lt;span&gt;boolean&lt;/span&gt;Â onlyIfAbsent)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (keyÂ ==Â &lt;span&gt;null&lt;/span&gt;Â ||Â valueÂ ==Â &lt;span&gt;null&lt;/span&gt;)Â &lt;span&gt;throw&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â NullPointerException();&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â hashÂ =Â spread(key.hashCode());&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â binCountÂ =Â &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â (Node&amp;lt;K,V&amp;gt;[]Â tabÂ =Â table;;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Node&amp;lt;K,V&amp;gt;Â f;Â &lt;span&gt;int&lt;/span&gt;Â n,Â i,Â fh;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//åˆ¤æ–­Nodeæ•°ç»„ä¸ºç©º&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (tabÂ ==Â &lt;span&gt;null&lt;/span&gt;Â ||Â (nÂ =Â tab.length)Â ==Â &lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//åˆå§‹åŒ–Nodeæ•°ç»„&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â tabÂ =Â initTable();&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â ...&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤æ—¶æ˜¯ä¼šæœ‰å¹¶å‘é—®é¢˜çš„ï¼Œå¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨initTableåˆå§‹åŒ–Nodeæ•°ç»„æ€ä¹ˆåŠï¼Ÿçœ‹çœ‹å¤§å¸ˆæ˜¯å¦‚ä½•å¤„ç†çš„ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â Node&amp;lt;K,V&amp;gt;[]Â initTable()Â {&lt;br/&gt;Â Â Node&amp;lt;K,V&amp;gt;[]Â tab;Â &lt;span&gt;int&lt;/span&gt;Â sc;&lt;br/&gt;Â Â &lt;span&gt;//æ¯æ¬¡å¾ªç¯éƒ½è·å–æœ€æ–°çš„Nodeæ•°ç»„å¼•ç”¨&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;while&lt;/span&gt;Â ((tabÂ =Â table)Â ==Â &lt;span&gt;null&lt;/span&gt;Â ||Â tab.lengthÂ ==Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;//sizeCtlæ˜¯ä¸€ä¸ªæ ‡è®°ä½ï¼Œè‹¥ä¸º-1ä¹Ÿå°±æ˜¯å°äº0ï¼Œä»£è¡¨æœ‰çº¿ç¨‹åœ¨è¿›è¡Œåˆå§‹åŒ–å·¥ä½œäº†&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((scÂ =Â sizeCtl)Â &amp;lt;Â &lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//è®©å‡ºCPUæ—¶é—´ç‰‡&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Thread.yield();Â &lt;span&gt;//Â lostÂ initializationÂ race;Â justÂ spin&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//CASæ“ä½œï¼Œå°†æœ¬å®ä¾‹çš„sizeCtlå˜é‡è®¾ç½®ä¸º-1&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (U.compareAndSwapInt(&lt;span&gt;this&lt;/span&gt;,Â SIZECTL,Â sc,Â -&lt;span&gt;1&lt;/span&gt;))Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//å¦‚æœCASæ“ä½œæˆåŠŸäº†ï¼Œä»£è¡¨æœ¬çº¿ç¨‹å°†è´Ÿè´£åˆå§‹åŒ–å·¥ä½œ&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;try&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//å†æ£€æŸ¥ä¸€éæ•°ç»„æ˜¯å¦ä¸ºç©º&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((tabÂ =Â table)Â ==Â &lt;span&gt;null&lt;/span&gt;Â ||Â tab.lengthÂ ==Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//åœ¨åˆå§‹åŒ–Mapæ—¶ï¼ŒsizeCtlä»£è¡¨æ•°ç»„å¤§å°ï¼Œé»˜è®¤16&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//æ‰€ä»¥æ­¤æ—¶né»˜è®¤ä¸º16&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â nÂ =Â (scÂ &amp;gt;Â &lt;span&gt;0&lt;/span&gt;)Â ?Â scÂ :Â DEFAULT_CAPACITY;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;@SuppressWarnings&lt;/span&gt;(&lt;span&gt;&quot;unchecked&quot;&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Nodeæ•°ç»„&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Node&amp;lt;K,V&amp;gt;[]Â ntÂ =Â (Node&amp;lt;K,V&amp;gt;[])&lt;span&gt;new&lt;/span&gt;Â Node&amp;lt;?,?&amp;gt;[n];&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//å°†å…¶èµ‹å€¼ç»™tableå˜é‡&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â tableÂ =Â tabÂ =Â nt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//é€šè¿‡ä½è¿ç®—ï¼Œnå‡å»näºŒè¿›åˆ¶å³ç§»2ä½ï¼Œç›¸å½“äºä¹˜ä»¥0.75&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//ä¾‹å¦‚16ç»è¿‡è¿ç®—ä¸º12ï¼Œä¸ä¹˜0.75ä¸€æ ·ï¼Œåªä¸è¿‡ä½è¿ç®—æ›´å¿«&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â scÂ =Â nÂ -Â (nÂ &amp;gt;&amp;gt;&amp;gt;Â &lt;span&gt;2&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â }Â &lt;span&gt;finally&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//å°†è®¡ç®—åçš„scï¼ˆ12ï¼‰ç›´æ¥èµ‹å€¼ç»™sizeCtlï¼Œè¡¨ç¤ºè¾¾åˆ°12é•¿åº¦å°±æ‰©å®¹&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//ç”±äºè¿™é‡Œåªä¼šæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œï¼Œç›´æ¥èµ‹å€¼å³å¯ï¼Œæ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//åªéœ€è¦ä¿è¯å¯è§æ€§&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â sizeCtlÂ =Â sc;&lt;br/&gt;Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;break&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â }&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â tab;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;tableå˜é‡ä½¿ç”¨äº†volatileæ¥ä¿è¯æ¯æ¬¡è·å–åˆ°çš„éƒ½æ˜¯æœ€æ–°å†™å…¥çš„å€¼:&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;transient&lt;/span&gt;Â &lt;span&gt;volatile&lt;/span&gt;Â Node&amp;lt;K,V&amp;gt;[]Â table;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°±ç®—æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶è¿›è¡Œputæ“ä½œï¼Œåœ¨åˆå§‹åŒ–æ•°ç»„æ—¶ä½¿ç”¨äº†ä¹è§‚é”CASæ“ä½œæ¥å†³å®šåˆ°åº•æ˜¯å“ªä¸ªçº¿ç¨‹æœ‰èµ„æ ¼è¿›è¡Œåˆå§‹åŒ–ï¼Œå…¶ä»–çº¿ç¨‹å‡åªèƒ½ç­‰å¾…ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”¨åˆ°çš„å¹¶å‘æŠ€å·§ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;volatileå˜é‡ï¼ˆsizeCtlï¼‰ï¼šå®ƒæ˜¯ä¸€ä¸ªæ ‡è®°ä½ï¼Œç”¨æ¥å‘Šè¯‰å…¶ä»–çº¿ç¨‹è¿™ä¸ªå‘ä½æœ‰æ²¡æœ‰äººåœ¨ï¼Œå…¶çº¿ç¨‹é—´çš„å¯è§æ€§ç”±volatileä¿è¯ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;CASæ“ä½œï¼šCASæ“ä½œä¿è¯äº†è®¾ç½®sizeCtlæ ‡è®°ä½çš„åŸå­æ€§ï¼Œä¿è¯äº†åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è®¾ç½®æˆåŠŸ&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;| putæ“ä½œçš„çº¿ç¨‹å®‰å…¨&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›´æ¥çœ‹ä»£ç ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;final&lt;/span&gt;Â VÂ &lt;span&gt;putVal&lt;/span&gt;&lt;span&gt;(KÂ key,Â VÂ value,Â &lt;span&gt;boolean&lt;/span&gt;Â onlyIfAbsent)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (keyÂ ==Â &lt;span&gt;null&lt;/span&gt;Â ||Â valueÂ ==Â &lt;span&gt;null&lt;/span&gt;)Â &lt;span&gt;throw&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â NullPointerException();&lt;br/&gt;Â Â &lt;span&gt;//å¯¹keyçš„hashCodeè¿›è¡Œæ•£åˆ—&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;int&lt;/span&gt;Â hashÂ =Â spread(key.hashCode());&lt;br/&gt;Â Â &lt;span&gt;int&lt;/span&gt;Â binCountÂ =Â &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;Â Â &lt;span&gt;//ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œç›´åˆ°putæ“ä½œå®Œæˆåé€€å‡ºå¾ªç¯&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;for&lt;/span&gt;Â (Node&amp;lt;K,V&amp;gt;[]Â tabÂ =Â table;;)Â {&lt;br/&gt;Â Â Â Â Node&amp;lt;K,V&amp;gt;Â f;Â &lt;span&gt;int&lt;/span&gt;Â n,Â i,Â fh;&lt;br/&gt;Â Â Â Â &lt;span&gt;//å½“Nodeæ•°ç»„ä¸ºç©ºæ—¶è¿›è¡Œåˆå§‹åŒ–&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (tabÂ ==Â &lt;span&gt;null&lt;/span&gt;Â ||Â (nÂ =Â tab.length)Â ==Â &lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â tabÂ =Â initTable();&lt;br/&gt;Â Â Â Â &lt;span&gt;//Unsafeç±»volatileçš„æ–¹å¼å–å‡ºhashCodeæ•£åˆ—åé€šè¿‡ä¸è¿ç®—å¾—å‡ºçš„Nodeæ•°ç»„ä¸‹æ ‡å€¼å¯¹åº”çš„Nodeå¯¹è±¡&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//æ­¤æ—¶çš„Nodeå¯¹è±¡è‹¥ä¸ºç©ºï¼Œåˆ™ä»£è¡¨è¿˜æœªæœ‰çº¿ç¨‹å¯¹æ­¤Nodeè¿›è¡Œæ’å…¥æ“ä½œ&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â ((fÂ =Â tabAt(tab,Â iÂ =Â (nÂ -Â &lt;span&gt;1&lt;/span&gt;)Â &amp;amp;Â hash))Â ==Â &lt;span&gt;null&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//ç›´æ¥CASæ–¹å¼æ’å…¥æ•°æ®&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (casTabAt(tab,Â i,Â &lt;span&gt;null&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;new&lt;/span&gt;Â Node&amp;lt;K,V&amp;gt;(hash,Â key,Â value,Â &lt;span&gt;null&lt;/span&gt;)))&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//æ’å…¥æˆåŠŸï¼Œé€€å‡ºå¾ªç¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;break&lt;/span&gt;;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â noÂ lockÂ whenÂ addingÂ toÂ emptyÂ bin&lt;/span&gt;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;//æŸ¥çœ‹æ˜¯å¦åœ¨æ‰©å®¹ï¼Œå…ˆä¸çœ‹ï¼Œæ‰©å®¹å†ä»‹ç»&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â ((fhÂ =Â f.hash)Â ==Â MOVED)&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//å¸®åŠ©æ‰©å®¹&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â tabÂ =Â helpTransfer(tab,Â f);&lt;br/&gt;Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â VÂ oldValÂ =Â &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//å¯¹Nodeå¯¹è±¡è¿›è¡ŒåŠ é”&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;synchronized&lt;/span&gt;Â (f)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//äºŒæ¬¡ç¡®è®¤æ­¤Nodeå¯¹è±¡è¿˜æ˜¯åŸæ¥çš„é‚£ä¸€ä¸ª&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (tabAt(tab,Â i)Â ==Â f)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (fhÂ &amp;gt;=Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â binCountÂ =Â &lt;span&gt;1&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//æ— é™å¾ªç¯ï¼Œç›´åˆ°å®Œæˆput&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â (Node&amp;lt;K,V&amp;gt;Â eÂ =Â f;;Â ++binCount)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â KÂ ek;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//å’ŒHashMapä¸€æ ·ï¼Œå…ˆæ¯”è¾ƒhashï¼Œå†æ¯”è¾ƒequals&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (e.hashÂ ==Â hashÂ &amp;amp;&amp;amp;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â ((ekÂ =Â e.key)Â ==Â keyÂ ||&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (ekÂ !=Â &lt;span&gt;null&lt;/span&gt;Â &amp;amp;&amp;amp;Â key.equals(ek))))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â oldValÂ =Â e.val;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (!onlyIfAbsent)&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â e.valÂ =Â value;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;break&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Node&amp;lt;K,V&amp;gt;Â predÂ =Â e;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((eÂ =Â e.next)Â ==Â &lt;span&gt;null&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//å’Œé“¾è¡¨å¤´NodeèŠ‚ç‚¹ä¸å†²çªï¼Œå°±å°†å…¶åˆå§‹åŒ–ä¸ºæ–°Nodeä½œä¸ºä¸Šä¸€ä¸ªNodeèŠ‚ç‚¹çš„next&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//å½¢æˆé“¾è¡¨ç»“æ„&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â pred.nextÂ =Â &lt;span&gt;new&lt;/span&gt;Â Node&amp;lt;K,V&amp;gt;(hash,Â key,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â value,Â &lt;span&gt;null&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;break&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â ...&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å€¼å¾—å…³æ³¨çš„æ˜¯tabAt(tab, i)æ–¹æ³•ï¼Œå…¶ä½¿ç”¨Unsafeç±»volatileçš„æ“ä½œvolatileå¼åœ°æŸ¥çœ‹å€¼ï¼Œä¿è¯æ¯æ¬¡è·å–åˆ°çš„å€¼éƒ½æ˜¯æœ€æ–°çš„ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â &amp;lt;K,V&amp;gt;Â &lt;span&gt;Node&amp;lt;K,V&amp;gt;Â &lt;span&gt;tabAt&lt;/span&gt;&lt;span&gt;(Node&amp;lt;K,V&amp;gt;[]Â tab,Â &lt;span&gt;int&lt;/span&gt;Â i)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â (Node&amp;lt;K,V&amp;gt;)U.getObjectVolatile(tab,Â ((&lt;span&gt;long&lt;/span&gt;)iÂ &amp;lt;&amp;lt;Â ASHIFT)Â +Â ABASE);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è™½ç„¶ä¸Šé¢çš„tableå˜é‡åŠ äº†volatileï¼Œä½†ä¹Ÿåªèƒ½ä¿è¯å…¶å¼•ç”¨çš„å¯è§æ€§ï¼Œå¹¶ä¸èƒ½ç¡®ä¿å…¶æ•°ç»„ä¸­çš„å¯¹è±¡æ˜¯å¦æ˜¯æœ€æ–°çš„ï¼Œæ‰€ä»¥éœ€è¦Unsafeç±»volatileå¼åœ°æ‹¿åˆ°æœ€æ–°çš„Nodeã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.509927797833935&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbue50Evic8ia9ibIeD4eBicfrLnb3hWQbLNFbHUywheI04vvCNI2cEkEh9ictQfrtNIKZJx3LCb9yu3eeRA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2216&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±äºå…¶å‡å°äº†é”çš„ç²’åº¦ï¼Œè‹¥Hashå®Œç¾ä¸å†²çªçš„æƒ…å†µä¸‹ï¼Œå¯åŒæ—¶æ”¯æŒnä¸ªçº¿ç¨‹åŒæ—¶putæ“ä½œï¼Œnä¸ºNodeæ•°ç»„å¤§å°ï¼Œåœ¨é»˜è®¤å¤§å°16ä¸‹ï¼Œå¯ä»¥æ”¯æŒæœ€å¤§åŒæ—¶16ä¸ªçº¿ç¨‹æ— ç«äº‰åŒæ—¶æ“ä½œä¸”çº¿ç¨‹å®‰å…¨ã€‚å½“hashå†²çªä¸¥é‡æ—¶ï¼ŒNodeé“¾è¡¨è¶Šæ¥è¶Šé•¿ï¼Œå°†å¯¼è‡´ä¸¥é‡çš„é”ç«äº‰ï¼Œæ­¤æ—¶ä¼šè¿›è¡Œæ‰©å®¹ï¼Œå°†Nodeè¿›è¡Œå†æ•£åˆ—ï¼Œä¸‹é¢ä¼šä»‹ç»æ‰©å®¹çš„çº¿ç¨‹å®‰å…¨æ€§ã€‚æ€»ç»“ä¸€ä¸‹ç”¨åˆ°çš„å¹¶å‘æŠ€å·§ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å‡å°é”ç²’åº¦ï¼šå°†Nodeé“¾è¡¨çš„å¤´èŠ‚ç‚¹ä½œä¸ºé”ï¼Œè‹¥åœ¨é»˜è®¤å¤§å°16æƒ…å†µä¸‹ï¼Œå°†æœ‰16æŠŠé”ï¼Œå¤§å¤§å‡å°äº†é”ç«äº‰ï¼ˆä¸Šä¸‹æ–‡åˆ‡æ¢ï¼‰ï¼Œå°±åƒå¼€å¤´æ‰€è¯´ï¼Œå°†ä¸²è¡Œçš„éƒ¨åˆ†æœ€å¤§åŒ–ç¼©å°ï¼Œåœ¨ç†æƒ³æƒ…å†µä¸‹çº¿ç¨‹çš„putæ“ä½œéƒ½ä¸ºå¹¶è¡Œæ“ä½œã€‚åŒæ—¶ç›´æ¥é”ä½å¤´èŠ‚ç‚¹ï¼Œä¿è¯äº†çº¿ç¨‹å®‰å…¨&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Unsafeçš„getObjectVolatileæ–¹æ³•ï¼šæ­¤æ–¹æ³•ç¡®ä¿è·å–åˆ°çš„å€¼ä¸ºæœ€æ–°ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;|æ‰©å®¹æ“ä½œçš„çº¿ç¨‹å®‰å…¨&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æ‰©å®¹æ—¶ï¼ŒConcurrentHashMapæ”¯æŒå¤šçº¿ç¨‹&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MzU2MTI4MjI0MQ==&amp;amp;mid=2247488999&amp;amp;idx=3&amp;amp;sn=11f79881bf2e8130bbe7970b075aa349&amp;amp;chksm=fc7a7849cb0df15f34ea31df979bc24928072dfc4b986cfdccd68c589a733061e6fe832a21e4&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;å¹¶å‘æ‰©å®¹&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot; wah-hotarea=&quot;click&quot; hasload=&quot;1&quot;&gt;å¹¶å‘æ‰©å®¹&lt;/a&gt;ï¼Œåœ¨æ‰©å®¹è¿‡ç¨‹ä¸­åŒæ—¶æ”¯æŒgetæŸ¥æ•°æ®ï¼Œè‹¥æœ‰çº¿ç¨‹putæ•°æ®ï¼Œè¿˜ä¼šå¸®åŠ©ä¸€èµ·æ‰©å®¹ï¼Œè¿™ç§æ— é˜»å¡ç®—æ³•ï¼Œå°†å¹¶è¡Œæœ€å¤§åŒ–çš„è®¾è®¡ï¼Œå ªç§°ä¸€ç»ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;span&gt;å…ˆæ¥çœ‹çœ‹æ‰©å®¹ä»£ç å®ç°ï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;transfer&lt;/span&gt;&lt;span&gt;(Node&amp;lt;K,V&amp;gt;[]Â tab,Â Node&amp;lt;K,V&amp;gt;[]Â nextTab)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;int&lt;/span&gt;Â nÂ =Â tab.length,Â stride;&lt;br/&gt;Â Â &lt;span&gt;//æ ¹æ®æœºå™¨CPUæ ¸å¿ƒæ•°æ¥è®¡ç®—ï¼Œä¸€æ¡çº¿ç¨‹è´Ÿè´£Nodeæ•°ç»„ä¸­å¤šé•¿çš„è¿ç§»é‡&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â ((strideÂ =Â (NCPUÂ &amp;gt;Â &lt;span&gt;1&lt;/span&gt;)Â ?Â (nÂ &amp;gt;&amp;gt;&amp;gt;Â &lt;span&gt;3&lt;/span&gt;)Â /Â NCPUÂ :Â n)Â &amp;lt;Â MIN_TRANSFER_STRIDE)&lt;br/&gt;Â Â Â Â &lt;span&gt;//æœ¬çº¿ç¨‹åˆ†åˆ°çš„è¿ç§»é‡&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//å‡è®¾ä¸º16ï¼ˆé»˜è®¤ä¹Ÿä¸º16ï¼‰&lt;/span&gt;&lt;br/&gt;Â Â Â Â strideÂ =Â MIN_TRANSFER_STRIDE;Â &lt;span&gt;//Â subdivideÂ range&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;//nextTabè‹¥ä¸ºç©ºä»£è¡¨çº¿ç¨‹æ˜¯ç¬¬ä¸€ä¸ªè¿›è¡Œè¿ç§»çš„&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;//åˆå§‹åŒ–è¿ç§»åçš„æ–°Nodeæ•°ç»„&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (nextTabÂ ==Â &lt;span&gt;null&lt;/span&gt;)Â {Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â initiating&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;try&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;@SuppressWarnings&lt;/span&gt;(&lt;span&gt;&quot;unchecked&quot;&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//è¿™é‡Œnä¸ºæ—§æ•°ç»„é•¿åº¦ï¼Œå·¦ç§»ä¸€ä½ç›¸å½“äºä¹˜ä»¥2&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//ä¾‹å¦‚åŸæ•°ç»„é•¿åº¦16ï¼Œæ–°æ•°ç»„é•¿åº¦åˆ™ä¸º32&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Node&amp;lt;K,V&amp;gt;[]Â ntÂ =Â (Node&amp;lt;K,V&amp;gt;[])&lt;span&gt;new&lt;/span&gt;Â Node&amp;lt;?,?&amp;gt;[nÂ &amp;lt;&amp;lt;Â &lt;span&gt;1&lt;/span&gt;];&lt;br/&gt;Â Â Â Â Â Â nextTabÂ =Â nt;&lt;br/&gt;Â Â Â Â }Â &lt;span&gt;catch&lt;/span&gt;Â (ThrowableÂ ex)Â {Â Â Â Â Â Â &lt;span&gt;//Â tryÂ toÂ copeÂ withÂ OOME&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â sizeCtlÂ =Â Integer.MAX_VALUE;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;//è®¾ç½®nextTableå˜é‡ä¸ºæ–°æ•°ç»„&lt;/span&gt;&lt;br/&gt;Â Â Â Â nextTableÂ =Â nextTab;&lt;br/&gt;Â Â Â Â &lt;span&gt;//å‡è®¾ä¸º16&lt;/span&gt;&lt;br/&gt;Â Â Â Â transferIndexÂ =Â n;&lt;br/&gt;Â Â }&lt;br/&gt;Â Â &lt;span&gt;//å‡è®¾ä¸º32&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;int&lt;/span&gt;Â nextnÂ =Â nextTab.length;&lt;br/&gt;Â Â &lt;span&gt;//æ ‡ç¤ºNodeå¯¹è±¡ï¼Œæ­¤å¯¹è±¡çš„hashå˜é‡ä¸º-1&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;//åœ¨getæˆ–è€…putæ—¶è‹¥é‡åˆ°æ­¤Nodeï¼Œåˆ™å¯ä»¥çŸ¥é“å½“å‰Nodeæ­£åœ¨è¿ç§»&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;//ä¼ å…¥nextTabå¯¹è±¡&lt;/span&gt;&lt;br/&gt;Â Â ForwardingNode&amp;lt;K,V&amp;gt;Â fwdÂ =Â &lt;span&gt;new&lt;/span&gt;Â ForwardingNode&amp;lt;K,V&amp;gt;(nextTab);&lt;br/&gt;Â Â &lt;span&gt;boolean&lt;/span&gt;Â advanceÂ =Â &lt;span&gt;true&lt;/span&gt;;&lt;br/&gt;Â Â &lt;span&gt;boolean&lt;/span&gt;Â finishingÂ =Â &lt;span&gt;false&lt;/span&gt;;Â &lt;span&gt;//Â toÂ ensureÂ sweepÂ beforeÂ committingÂ nextTab&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;for&lt;/span&gt;Â (&lt;span&gt;int&lt;/span&gt;Â iÂ =Â &lt;span&gt;0&lt;/span&gt;,Â boundÂ =Â &lt;span&gt;0&lt;/span&gt;;;)Â {&lt;br/&gt;Â Â Â Â Node&amp;lt;K,V&amp;gt;Â f;Â &lt;span&gt;int&lt;/span&gt;Â fh;&lt;br/&gt;Â Â Â Â &lt;span&gt;while&lt;/span&gt;Â (advance)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â nextIndex,Â nextBound;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//iä¸ºå½“å‰æ­£åœ¨å¤„ç†çš„Nodeæ•°ç»„ä¸‹æ ‡ï¼Œæ¯æ¬¡å¤„ç†ä¸€ä¸ªNodeèŠ‚ç‚¹å°±ä¼šè‡ªå‡1&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (--iÂ &amp;gt;=Â boundÂ ||Â finishing)&lt;br/&gt;Â Â Â Â Â Â Â Â advanceÂ =Â &lt;span&gt;false&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//å‡è®¾nextIndex=16&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â ((nextIndexÂ =Â transferIndex)Â &amp;lt;=Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â iÂ =Â -&lt;span&gt;1&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â advanceÂ =Â &lt;span&gt;false&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//ç”±ä»¥ä¸Šå‡è®¾ï¼ŒnextBoundå°±ä¸º0&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//ä¸”å°†nextIndexè®¾ç½®ä¸º0&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (U.compareAndSwapInt&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (&lt;span&gt;this&lt;/span&gt;,Â TRANSFERINDEX,Â nextIndex,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â nextBoundÂ =Â (nextIndexÂ &amp;gt;Â strideÂ ?&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â nextIndexÂ -Â strideÂ :Â &lt;span&gt;0&lt;/span&gt;)))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//bound=0&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â boundÂ =Â nextBound;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//i=16-1=15&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â iÂ =Â nextIndexÂ -Â &lt;span&gt;1&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â advanceÂ =Â &lt;span&gt;false&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (iÂ &amp;lt;Â &lt;span&gt;0&lt;/span&gt;Â ||Â iÂ &amp;gt;=Â nÂ ||Â iÂ +Â nÂ &amp;gt;=Â nextn)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â sc;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (finishing)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â nextTableÂ =Â &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â tableÂ =Â nextTab;&lt;br/&gt;Â Â Â Â Â Â Â Â sizeCtlÂ =Â (nÂ &amp;lt;&amp;lt;Â &lt;span&gt;1&lt;/span&gt;)Â -Â (nÂ &amp;gt;&amp;gt;&amp;gt;Â &lt;span&gt;1&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (U.compareAndSwapInt(&lt;span&gt;this&lt;/span&gt;,Â SIZECTL,Â scÂ =Â sizeCtl,Â scÂ -Â &lt;span&gt;1&lt;/span&gt;))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((scÂ -Â &lt;span&gt;2&lt;/span&gt;)Â !=Â resizeStamp(n)Â &amp;lt;&amp;lt;Â RESIZE_STAMP_SHIFT)&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â finishingÂ =Â advanceÂ =Â &lt;span&gt;true&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â iÂ =Â n;Â &lt;span&gt;//Â recheckÂ beforeÂ commit&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;//æ­¤æ—¶i=15ï¼Œå–å‡ºNodeæ•°ç»„ä¸‹æ ‡ä¸º15çš„é‚£ä¸ªNodeï¼Œè‹¥ä¸ºç©ºåˆ™ä¸éœ€è¦è¿ç§»&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//ç›´æ¥è®¾ç½®å ä½æ ‡ç¤ºï¼Œä»£è¡¨æ­¤Nodeå·²å¤„ç†å®Œæˆ&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â ((fÂ =Â tabAt(tab,Â i))Â ==Â &lt;span&gt;null&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â advanceÂ =Â casTabAt(tab,Â i,Â &lt;span&gt;null&lt;/span&gt;,Â fwd);&lt;br/&gt;Â Â Â Â &lt;span&gt;//æ£€æµ‹æ­¤Nodeçš„hashæ˜¯å¦ä¸ºMOVEDï¼ŒMOVEDæ˜¯ä¸€ä¸ªå¸¸é‡-1ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢è¯´çš„å ä½Nodeçš„hash&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//å¦‚æœæ˜¯å ä½Nodeï¼Œè¯æ˜æ­¤èŠ‚ç‚¹å·²ç»å¤„ç†è¿‡äº†ï¼Œè·³è¿‡i=15çš„å¤„ç†ï¼Œç»§ç»­å¾ªç¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â ((fhÂ =Â f.hash)Â ==Â MOVED)&lt;br/&gt;Â Â Â Â Â Â advanceÂ =Â &lt;span&gt;true&lt;/span&gt;;Â &lt;span&gt;//Â alreadyÂ processed&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//é”ä½è¿™ä¸ªNode&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;synchronized&lt;/span&gt;Â (f)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//ç¡®è®¤Nodeæ˜¯åŸå…ˆçš„Node&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (tabAt(tab,Â i)Â ==Â f)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//lnä¸ºlowNodeï¼Œä½ä½Nodeï¼Œhnä¸ºhighNodeï¼Œé«˜ä½Node&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//è¿™ä¸¤ä¸ªæ¦‚å¿µä¸‹é¢ä»¥å›¾æ¥è¯´æ˜&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Node&amp;lt;K,V&amp;gt;Â ln,Â hn;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (fhÂ &amp;gt;=Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//æ­¤æ—¶fhä¸åŸæ¥Nodeæ•°ç»„é•¿åº¦è¿›è¡Œä¸è¿ç®—&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//å¦‚æœé«˜Xä½ä¸º0ï¼Œæ­¤æ—¶runBit=0&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//å¦‚æœé«˜Xä½ä¸º1ï¼Œæ­¤æ—¶runBit=1&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â runBitÂ =Â fhÂ &amp;amp;Â n;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Node&amp;lt;K,V&amp;gt;Â lastRunÂ =Â f;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â (Node&amp;lt;K,V&amp;gt;Â pÂ =Â f.next;Â pÂ !=Â &lt;span&gt;null&lt;/span&gt;;Â pÂ =Â p.next)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//è¿™é‡Œçš„Nodeï¼Œéƒ½æ˜¯åŒä¸€Nodeé“¾è¡¨ä¸­çš„Nodeå¯¹è±¡&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â bÂ =Â p.hashÂ &amp;amp;Â n;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (bÂ !=Â runBit)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â runBitÂ =Â b;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lastRunÂ =Â p;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//æ­£å¦‚ä¸Šé¢æ‰€è¯´ï¼ŒrunBit=0ï¼Œè¡¨ç¤ºæ­¤Nodeä¸ºä½ä½Node&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (runBitÂ ==Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â lnÂ =Â lastRun;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â hnÂ =Â &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Nodeä¸ºé«˜ä½Node&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â hnÂ =Â lastRun;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â lnÂ =Â &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â (Node&amp;lt;K,V&amp;gt;Â pÂ =Â f;Â pÂ !=Â lastRun;Â pÂ =Â p.next)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â phÂ =Â p.hash;Â KÂ pkÂ =Â p.key;Â VÂ pvÂ =Â p.val;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//è‹¥hashå’Œnä¸è¿ç®—ä¸º0ï¼Œè¯æ˜ä¸ºä½ä½Nodeï¼ŒåŸç†åŒä¸Š&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((phÂ &amp;amp;Â n)Â ==Â &lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â lnÂ =Â &lt;span&gt;new&lt;/span&gt;Â Node&amp;lt;K,V&amp;gt;(ph,Â pk,Â pv,Â ln);&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//è¿™é‡Œå°†é«˜ä½Nodeä¸åœ°ä½Nodeéƒ½å„è‡ªç»„æˆäº†ä¸¤ä¸ªé“¾è¡¨&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;else&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â hnÂ =Â &lt;span&gt;new&lt;/span&gt;Â Node&amp;lt;K,V&amp;gt;(ph,Â pk,Â pv,Â hn);&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//å°†ä½ä½Nodeè®¾ç½®åˆ°æ–°Nodeæ•°ç»„ä¸­ï¼Œä¸‹æ ‡ä¸ºåŸæ¥çš„ä½ç½®&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â setTabAt(nextTab,Â i,Â ln);&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//å°†é«˜ä½Nodeè®¾ç½®åˆ°æ–°Nodeæ•°ç»„ä¸­ï¼Œä¸‹æ ‡ä¸ºåŸæ¥çš„ä½ç½®åŠ ä¸ŠåŸNodeæ•°ç»„é•¿åº¦&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â setTabAt(nextTab,Â iÂ +Â n,Â hn);&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//å°†æ­¤Nodeè®¾ç½®ä¸ºå ä½Nodeï¼Œä»£è¡¨å¤„ç†å®Œæˆ&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â setTabAt(tab,Â i,Â fwd);&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//ç»§ç»­å¾ªç¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â advanceÂ =Â &lt;span&gt;true&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â ....&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œè¯´ä¸€ä¸‹è¿ç§»æ—¶ä¸ºä»€ä¹ˆè¦åˆ†ä¸€ä¸ªlnï¼ˆä½ä½Nodeï¼‰ã€hnï¼ˆé«˜ä½Nodeï¼‰ï¼Œé¦–å…ˆè¯´ä¸€ä¸ªç°è±¡ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨putå€¼çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šè®¡ç®—hashå€¼ï¼Œå†æ•£åˆ—åˆ°æŒ‡å®šçš„Nodeæ•°ç»„ä¸‹æ ‡ä¸­ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;//æ ¹æ®keyçš„hashCodeå†æ•£åˆ—&lt;/span&gt;&lt;br/&gt;&lt;span&gt;int&lt;/span&gt;Â hashÂ =Â spread(key.hashCode());&lt;br/&gt;&lt;span&gt;//ä½¿ç”¨(nÂ -Â 1)Â &amp;amp;Â hashÂ è¿ç®—ï¼Œå®šä½Nodeæ•°ç»„ä¸­ä¸‹æ ‡å€¼&lt;/span&gt;&lt;br/&gt;(fÂ =Â tabAt(tab,Â iÂ =Â (nÂ -Â &lt;span&gt;1&lt;/span&gt;)Â &amp;amp;Â hash);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­nä¸ºNodeæ•°ç»„é•¿åº¦ï¼Œè¿™é‡Œå‡è®¾ä¸º16ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡è®¾æœ‰ä¸€ä¸ªkeyè¿›æ¥ï¼Œå®ƒçš„æ•£åˆ—ä¹‹åçš„hash=9ï¼Œé‚£ä¹ˆå®ƒçš„ä¸‹æ ‡å€¼æ˜¯å¤šå°‘å‘¢ï¼Ÿ&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ï¼ˆ16 - 1ï¼‰å’Œ 9 è¿›è¡Œä¸è¿ç®— -&amp;gt; 0000 1111 å’Œ 0000 1001 ç»“æœè¿˜æ˜¯ 0000 1001 = 9&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡è®¾Nodeæ•°ç»„éœ€è¦æ‰©å®¹ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œæ‰©å®¹æ˜¯å°†æ•°ç»„é•¿åº¦å¢åŠ ä¸¤å€ï¼Œä¹Ÿå°±æ˜¯32ï¼Œé‚£ä¹ˆä¸‹æ ‡å€¼ä¼šæ˜¯å¤šå°‘å‘¢ï¼Ÿ&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ï¼ˆ32 - 1ï¼‰å’Œ 9 è¿›è¡Œä¸è¿ç®— -&amp;gt; 0001 1111 å’Œ 0000 1001 ç»“æœè¿˜æ˜¯9&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤æ—¶ï¼Œæˆ‘ä»¬æŠŠæ•£åˆ—ä¹‹åçš„hashæ¢æˆ20ï¼Œé‚£ä¹ˆä¼šæœ‰æ€æ ·çš„å˜åŒ–å‘¢ï¼Ÿ&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ï¼ˆ16 - 1ï¼‰å’Œ 20 è¿›è¡Œä¸è¿ç®— -&amp;gt; 0000 1111 å’Œ 0001 0100 ç»“æœæ˜¯ 0000 0100 = 4&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ï¼ˆ32 - 1ï¼‰å’Œ 20 è¿›è¡Œä¸è¿ç®— -&amp;gt; 0001 1111 å’Œ 0001 0100 ç»“æœæ˜¯ 0001 0100 = 20&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤æ—¶ç»†å¿ƒçš„è¯»è€…åº”è¯¥å¯ä»¥å‘ç°ï¼Œå¦‚æœhashåœ¨é«˜Xä½ä¸º1ï¼Œï¼ˆXä¸ºæ•°ç»„é•¿åº¦çš„äºŒè¿›åˆ¶-1çš„æœ€é«˜ä½ï¼‰ï¼Œåˆ™æ‰©å®¹æ—¶æ˜¯éœ€è¦å˜æ¢åœ¨Nodeæ•°ç»„ä¸­çš„ç´¢å¼•å€¼çš„ï¼Œä¸ç„¶å°±hashä¸åˆ°ï¼Œä¸¢å¤±æ•°æ®ï¼Œæ‰€ä»¥è¿™é‡Œåœ¨è¿ç§»çš„æ—¶å€™å°†é«˜Xä½ä¸º1çš„Nodeåˆ†ç±»ä¸ºhnï¼Œå°†é«˜Xä½ä¸º0çš„Nodeåˆ†ç±»ä¸ºlnã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å›åˆ°ä»£ç ä¸­ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;for&lt;/span&gt;Â (Node&amp;lt;K,V&amp;gt;Â pÂ =Â f;Â pÂ !=Â lastRun;Â pÂ =Â p.next)Â {&lt;br/&gt;Â Â &lt;span&gt;int&lt;/span&gt;Â phÂ =Â p.hash;Â &lt;br/&gt;Â Â KÂ pkÂ =Â p.key;Â &lt;br/&gt;Â Â VÂ pvÂ =Â p.val;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â ((phÂ &amp;amp;Â n)Â ==Â &lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;Â Â Â Â lnÂ =Â &lt;span&gt;new&lt;/span&gt;Â Node&amp;lt;K,V&amp;gt;(ph,Â pk,Â pv,Â ln);&lt;br/&gt;Â Â &lt;span&gt;else&lt;/span&gt;&lt;br/&gt;Â Â Â Â hnÂ =Â &lt;span&gt;new&lt;/span&gt;Â Node&amp;lt;K,V&amp;gt;(ph,Â pk,Â pv,Â hn);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªæ“ä½œå°†é«˜ä½ä½ç»„æˆäº†ä¸¤æ¡é“¾è¡¨ç»“æ„ï¼Œç”±ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7515151515151515&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbue50Evic8ia9ibIeD4eBicfrLnbA2Sbcbecicic3GobF1o7AYwk4E1q2BKiaiaBZzTDvXMhgeHDAZSoo5l06Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1650&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç„¶åå°†å…¶CASæ“ä½œæ”¾å…¥æ–°çš„Nodeæ•°ç»„ä¸­ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;setTabAt(nextTab,Â i,Â ln);&lt;br/&gt;setTabAt(nextTab,Â iÂ +Â n,Â hn);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­ï¼Œä½ä½é“¾è¡¨æ”¾å…¥åŸä¸‹æ ‡å¤„ï¼Œè€Œé«˜ä½é“¾è¡¨åˆ™éœ€è¦åŠ ä¸ŠåŸNodeæ•°ç»„é•¿åº¦ï¼Œå…¶ä¸­ä¸ºä»€ä¹ˆä¸å¤šèµ˜è¿°ï¼Œä¸Šé¢å·²ç»ä¸¾ä¾‹è¯´æ˜äº†ï¼Œè¿™æ ·å°±å¯ä»¥ä¿è¯é«˜ä½Nodeåœ¨è¿ç§»åˆ°æ–°Nodeæ•°ç»„ä¸­ä¾ç„¶å¯ä»¥ä½¿ç”¨hashç®—æ³•æ•£åˆ—åˆ°å¯¹åº”ä¸‹æ ‡çš„æ•°ç»„ä¸­å»äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ€åå°†åŸNodeæ•°ç»„ä¸­å¯¹åº”ä¸‹æ ‡Nodeå¯¹è±¡è®¾ç½®ä¸ºfwdæ ‡è®°Nodeï¼Œè¡¨ç¤ºè¯¥èŠ‚ç‚¹è¿ç§»å®Œæˆï¼Œåˆ°è¿™é‡Œï¼Œä¸€ä¸ªèŠ‚ç‚¹çš„è¿ç§»å°±å®Œæˆäº†ï¼Œå°†è¿›è¡Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„è¿ç§»ï¼Œä¹Ÿå°±æ˜¯i-1=14ä¸‹æ ‡çš„NodeèŠ‚ç‚¹ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;span&gt;æ‰©å®¹æ—¶çš„getæ“ä½œï¼š&lt;/span&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡è®¾Nodeä¸‹æ ‡ä¸º16çš„NodeèŠ‚ç‚¹æ­£åœ¨è¿ç§»ï¼Œçªç„¶æœ‰ä¸€ä¸ªçº¿ç¨‹è¿›æ¥è°ƒç”¨getæ–¹æ³•ï¼Œæ­£å¥½keyåˆæ•£åˆ—åˆ°ä¸‹æ ‡ä¸º16çš„èŠ‚ç‚¹ï¼Œæ­¤æ—¶æ€ä¹ˆåŠï¼Ÿ&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â VÂ &lt;span&gt;get&lt;/span&gt;&lt;span&gt;(ObjectÂ key)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Node&amp;lt;K,V&amp;gt;[]Â tab;Â Node&amp;lt;K,V&amp;gt;Â e,Â p;Â &lt;span&gt;int&lt;/span&gt;Â n,Â eh;Â KÂ ek;&lt;br/&gt;Â Â &lt;span&gt;int&lt;/span&gt;Â hÂ =Â spread(key.hashCode());&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â ((tabÂ =Â table)Â !=Â &lt;span&gt;null&lt;/span&gt;Â &amp;amp;&amp;amp;Â (nÂ =Â tab.length)Â &amp;gt;Â &lt;span&gt;0&lt;/span&gt;Â &amp;amp;&amp;amp;&lt;br/&gt;Â Â Â Â Â Â (eÂ =Â tabAt(tab,Â (nÂ -Â &lt;span&gt;1&lt;/span&gt;)Â &amp;amp;Â h))Â !=Â &lt;span&gt;null&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((ehÂ =Â e.hash)Â ==Â h)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((ekÂ =Â e.key)Â ==Â keyÂ ||Â (ekÂ !=Â &lt;span&gt;null&lt;/span&gt;Â &amp;amp;&amp;amp;Â key.equals(ek)))&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â e.val;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;//å‡å¦‚NodeèŠ‚ç‚¹çš„hashå€¼å°äº0&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//åˆ™æœ‰å¯èƒ½æ˜¯fwdèŠ‚ç‚¹&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (ehÂ &amp;lt;Â &lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//è°ƒç”¨èŠ‚ç‚¹å¯¹è±¡çš„findæ–¹æ³•æŸ¥æ‰¾å€¼&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â (pÂ =Â e.find(h,Â key))Â !=Â &lt;span&gt;null&lt;/span&gt;Â ?Â p.valÂ :Â &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;Â Â Â Â &lt;span&gt;while&lt;/span&gt;Â ((eÂ =Â e.next)Â !=Â &lt;span&gt;null&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (e.hashÂ ==Â hÂ &amp;amp;&amp;amp;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â ((ekÂ =Â e.key)Â ==Â keyÂ ||Â (ekÂ !=Â &lt;span&gt;null&lt;/span&gt;Â &amp;amp;&amp;amp;Â key.equals(ek))))&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â e.val;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â }&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‡ç‚¹çœ‹æœ‰æ³¨é‡Šçš„é‚£ä¸¤è¡Œï¼Œåœ¨getæ“ä½œçš„æºç ä¸­ï¼Œä¼šåˆ¤æ–­Nodeä¸­çš„hashæ˜¯å¦å°äº0ï¼Œæ˜¯å¦è¿˜è®°å¾—æˆ‘ä»¬çš„å ä½Nodeï¼Œå…¶hashä¸ºMOVEDï¼Œä¸ºå¸¸é‡å€¼-1ï¼Œæ‰€ä»¥æ­¤æ—¶åˆ¤æ–­çº¿ç¨‹æ­£åœ¨è¿ç§»ï¼Œå§”æ‰˜ç»™fwdå ä½Nodeå»æŸ¥æ‰¾å€¼ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;//å†…éƒ¨ç±»Â ForwardingNodeä¸­&lt;/span&gt;&lt;br/&gt;&lt;span&gt;Node&amp;lt;K,V&amp;gt;Â &lt;span&gt;find&lt;/span&gt;&lt;span&gt;(&lt;span&gt;int&lt;/span&gt;Â h,Â ObjectÂ k)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;//Â loopÂ toÂ avoidÂ arbitrarilyÂ deepÂ recursionÂ onÂ forwardingÂ nodes&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â è¿™é‡Œçš„æŸ¥æ‰¾ï¼Œæ˜¯å»æ–°Nodeæ•°ç»„ä¸­æŸ¥æ‰¾çš„&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â ä¸‹é¢çš„æŸ¥æ‰¾è¿‡ç¨‹ä¸HashMapæŸ¥æ‰¾æ— å¼‚ï¼Œä¸å¤šèµ˜è¿°&lt;/span&gt;&lt;br/&gt;Â Â outer:Â &lt;span&gt;for&lt;/span&gt;Â (Node&amp;lt;K,V&amp;gt;[]Â tabÂ =Â nextTable;;)Â {&lt;br/&gt;Â Â Â Â Node&amp;lt;K,V&amp;gt;Â e;Â &lt;span&gt;int&lt;/span&gt;Â n;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (kÂ ==Â &lt;span&gt;null&lt;/span&gt;Â ||Â tabÂ ==Â &lt;span&gt;null&lt;/span&gt;Â ||Â (nÂ =Â tab.length)Â ==Â &lt;span&gt;0&lt;/span&gt;Â ||&lt;br/&gt;Â Â Â Â Â Â Â Â (eÂ =Â tabAt(tab,Â (nÂ -Â &lt;span&gt;1&lt;/span&gt;)Â &amp;amp;Â h))Â ==Â &lt;span&gt;null&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â (;;)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â eh;Â KÂ ek;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((ehÂ =Â e.hash)Â ==Â hÂ &amp;amp;&amp;amp;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â ((ekÂ =Â e.key)Â ==Â kÂ ||Â (ekÂ !=Â &lt;span&gt;null&lt;/span&gt;Â &amp;amp;&amp;amp;Â k.equals(ek))))&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â e;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (ehÂ &amp;lt;Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (eÂ &lt;span&gt;instanceof&lt;/span&gt;Â ForwardingNode)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â tabÂ =Â ((ForwardingNode&amp;lt;K,V&amp;gt;)e).nextTable;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;continue&lt;/span&gt;Â outer;&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;else&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â e.find(h,Â k);&lt;br/&gt;Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((eÂ =Â e.next)Â ==Â &lt;span&gt;null&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ°è¿™é‡Œåº”è¯¥å¯ä»¥æç„¶å¤§æ‚Ÿäº†ï¼Œä¹‹æ‰€ä»¥å ä½Nodeéœ€è¦ä¿å­˜æ–°Nodeæ•°ç»„çš„å¼•ç”¨ä¹Ÿæ˜¯å› ä¸ºè¿™ä¸ªï¼Œå®ƒå¯ä»¥æ”¯æŒåœ¨è¿ç§»çš„è¿‡ç¨‹ä¸­ç…§æ ·ä¸é˜»å¡åœ°æŸ¥æ‰¾å€¼ï¼Œå¯è°“æ˜¯ç²¾å¦™ç»ä¼¦çš„è®¾è®¡ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;span&gt;å¤šçº¿ç¨‹ååŠ©æ‰©å®¹&lt;/span&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨putæ“ä½œæ—¶ï¼Œå‡è®¾æ­£åœ¨è¿ç§»ï¼Œæ­£å¥½æœ‰ä¸€ä¸ªçº¿ç¨‹è¿›æ¥ï¼Œæƒ³è¦putå€¼åˆ°è¿ç§»çš„Nodeä¸Šï¼Œæ€ä¹ˆåŠï¼Ÿ&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;final&lt;/span&gt;Â VÂ &lt;span&gt;putVal&lt;/span&gt;&lt;span&gt;(KÂ key,Â VÂ value,Â &lt;span&gt;boolean&lt;/span&gt;Â onlyIfAbsent)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (keyÂ ==Â &lt;span&gt;null&lt;/span&gt;Â ||Â valueÂ ==Â &lt;span&gt;null&lt;/span&gt;)Â &lt;span&gt;throw&lt;/span&gt;Â &lt;span&gt;new&lt;/span&gt;Â NullPointerException();&lt;br/&gt;Â Â &lt;span&gt;int&lt;/span&gt;Â hashÂ =Â spread(key.hashCode());&lt;br/&gt;Â Â &lt;span&gt;int&lt;/span&gt;Â binCountÂ =Â &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;Â Â &lt;span&gt;for&lt;/span&gt;Â (Node&amp;lt;K,V&amp;gt;[]Â tabÂ =Â table;;)Â {&lt;br/&gt;Â Â Â Â Node&amp;lt;K,V&amp;gt;Â f;Â &lt;span&gt;int&lt;/span&gt;Â n,Â i,Â fh;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (tabÂ ==Â &lt;span&gt;null&lt;/span&gt;Â ||Â (nÂ =Â tab.length)Â ==Â &lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â tabÂ =Â initTable();&lt;br/&gt;Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â ((fÂ =Â tabAt(tab,Â iÂ =Â (nÂ -Â &lt;span&gt;1&lt;/span&gt;)Â &amp;amp;Â hash))Â ==Â &lt;span&gt;null&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (casTabAt(tab,Â i,Â &lt;span&gt;null&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;new&lt;/span&gt;Â Node&amp;lt;K,V&amp;gt;(hash,Â key,Â value,Â &lt;span&gt;null&lt;/span&gt;)))&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;break&lt;/span&gt;;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â noÂ lockÂ whenÂ addingÂ toÂ emptyÂ bin&lt;/span&gt;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;//è‹¥æ­¤æ—¶å‘ç°äº†å ä½Nodeï¼Œè¯æ˜æ­¤æ—¶HashMapæ­£åœ¨è¿ç§»&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â ((fhÂ =Â f.hash)Â ==Â MOVED)&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//è¿›è¡ŒååŠ©è¿ç§»&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â tabÂ =Â helpTransfer(tab,Â f);&lt;br/&gt;Â Â Â Â Â ...&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;final&lt;/span&gt;Â Node&amp;lt;K,V&amp;gt;[]Â helpTransfer(Node&amp;lt;K,V&amp;gt;[]Â tab,Â Node&amp;lt;K,V&amp;gt;Â f)Â {&lt;br/&gt;Â Â Node&amp;lt;K,V&amp;gt;[]Â nextTab;Â &lt;span&gt;int&lt;/span&gt;Â sc;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (tabÂ !=Â &lt;span&gt;null&lt;/span&gt;Â &amp;amp;&amp;amp;Â (fÂ &lt;span&gt;instanceof&lt;/span&gt;Â ForwardingNode)Â &amp;amp;&amp;amp;&lt;br/&gt;Â Â Â Â Â Â (nextTabÂ =Â ((ForwardingNode&amp;lt;K,V&amp;gt;)f).nextTable)Â !=Â &lt;span&gt;null&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â rsÂ =Â resizeStamp(tab.length);&lt;br/&gt;Â Â Â Â &lt;span&gt;while&lt;/span&gt;Â (nextTabÂ ==Â nextTableÂ &amp;amp;&amp;amp;Â tableÂ ==Â tabÂ &amp;amp;&amp;amp;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â (scÂ =Â sizeCtl)Â &amp;lt;Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((scÂ &amp;gt;&amp;gt;&amp;gt;Â RESIZE_STAMP_SHIFT)Â !=Â rsÂ ||Â scÂ ==Â rsÂ +Â &lt;span&gt;1&lt;/span&gt;Â ||&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â scÂ ==Â rsÂ +Â MAX_RESIZERSÂ ||Â transferIndexÂ &amp;lt;=Â &lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;break&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//sizeCtlåŠ ä¸€ï¼Œæ ‡ç¤ºå¤šä¸€ä¸ªçº¿ç¨‹è¿›æ¥ååŠ©æ‰©å®¹&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (U.compareAndSwapInt(&lt;span&gt;this&lt;/span&gt;,Â SIZECTL,Â sc,Â scÂ +Â &lt;span&gt;1&lt;/span&gt;))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//æ‰©å®¹&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â transfer(tab,Â nextTab);&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;break&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â nextTab;&lt;br/&gt;Â Â }&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â table;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤æ–¹æ³•æ¶‰åŠå¤§é‡å¤æ‚çš„ä½è¿ç®—ï¼Œè¿™é‡Œä¸å¤šèµ˜è¿°ï¼Œåªæ˜¯ç®€å•çš„è¯´å‡ å¥ï¼Œæ­¤æ—¶sizeCtlå˜é‡ç”¨æ¥æ ‡ç¤ºHashMapæ­£åœ¨æ‰©å®¹ï¼Œå½“å…¶å‡†å¤‡æ‰©å®¹æ—¶ï¼Œä¼šå°†sizeCtlè®¾ç½®ä¸ºä¸€ä¸ªè´Ÿæ•°ï¼Œï¼ˆä¾‹å¦‚æ•°ç»„é•¿åº¦ä¸º16æ—¶ï¼‰å…¶äºŒè¿›åˆ¶è¡¨ç¤ºä¸ºï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;1000&lt;/span&gt;Â &lt;span&gt;0000&lt;/span&gt;Â &lt;span&gt;0001&lt;/span&gt;Â &lt;span&gt;1011&lt;/span&gt;Â &lt;span&gt;0000&lt;/span&gt;Â &lt;span&gt;0000&lt;/span&gt;Â &lt;span&gt;0000&lt;/span&gt;Â &lt;span&gt;0010&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ— ç¬¦å·ä½ä¸º1ï¼Œè¡¨ç¤ºè´Ÿæ•°ã€‚å…¶ä¸­é«˜16ä½ä»£è¡¨æ•°ç»„é•¿åº¦çš„ä¸€ä¸ªä½ç®—æ³•æ ‡ç¤ºï¼ˆæœ‰ç‚¹åƒepochçš„ä½œç”¨ï¼Œè¡¨ç¤ºå½“å‰è¿ç§»æœä»£ä¸ºæ•°ç»„é•¿åº¦Xï¼‰ï¼Œä½16ä½è¡¨ç¤ºæœ‰å‡ ä¸ªçº¿ç¨‹æ­£åœ¨åšè¿ç§»ï¼Œåˆšå¼€å§‹ä¸º2ï¼Œæ¥ä¸‹æ¥è‡ªå¢1ï¼Œçº¿ç¨‹è¿ç§»å®Œä¼šè¿›è¡Œå‡1æ“ä½œï¼Œä¹Ÿå°±æ˜¯å¦‚æœä½åå…­ä½ä¸º2ï¼Œä»£è¡¨æœ‰ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨è¿ç§»ï¼Œå¦‚æœä¸º3ï¼Œä»£è¡¨2ä¸ªçº¿ç¨‹æ­£åœ¨è¿ç§»ä»¥æ­¤ç±»æ¨â€¦&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åªè¦æ•°ç»„é•¿åº¦è¶³å¤Ÿé•¿ï¼Œå°±å¯ä»¥åŒæ—¶å®¹çº³è¶³å¤Ÿå¤šçš„çº¿ç¨‹æ¥ä¸€èµ·æ‰©å®¹ï¼Œæœ€å¤§åŒ–å¹¶è¡Œä»»åŠ¡ï¼Œæé«˜æ€§èƒ½ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;span&gt;åœ¨ä»€ä¹ˆæƒ…å†µä¸‹ä¼šè¿›è¡Œæ‰©å®¹æ“ä½œï¼Ÿ&lt;/span&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;åœ¨putå€¼æ—¶ï¼Œå‘ç°Nodeä¸ºå ä½Nodeï¼ˆfwdï¼‰æ—¶ï¼Œä¼šååŠ©æ‰©å®¹ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;åœ¨æ–°å¢èŠ‚ç‚¹åï¼Œæ£€æµ‹åˆ°é“¾è¡¨é•¿åº¦å¤§äº8æ—¶ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;final&lt;/span&gt;Â VÂ &lt;span&gt;putVal&lt;/span&gt;&lt;span&gt;(KÂ key,Â VÂ value,Â &lt;span&gt;boolean&lt;/span&gt;Â onlyIfAbsent)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â ...&lt;br/&gt;Â &lt;span&gt;if&lt;/span&gt;Â (binCountÂ !=Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;//TREEIFY_THRESHOLD=8ï¼Œå½“é“¾è¡¨é•¿åº¦å¤§äº8æ—¶&lt;/span&gt;&lt;br/&gt;Â Â Â &lt;span&gt;if&lt;/span&gt;Â (binCountÂ &amp;gt;=Â TREEIFY_THRESHOLD)&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//è°ƒç”¨treeifyBinæ–¹æ³•&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â treeifyBin(tab,Â i);&lt;br/&gt;Â Â Â &lt;span&gt;if&lt;/span&gt;Â (oldValÂ !=Â &lt;span&gt;null&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â oldVal;&lt;br/&gt;Â Â Â &lt;span&gt;break&lt;/span&gt;;&lt;br/&gt;Â }&lt;br/&gt;Â Â ...&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;treeifyBinæ–¹æ³•ä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œå¢åŠ æŸ¥æ‰¾æ•ˆç‡ï¼Œä½†åœ¨è¿™ä¹‹å‰ï¼Œä¼šæ£€æŸ¥æ•°ç»„é•¿åº¦ï¼Œè‹¥å°äº64ï¼Œåˆ™ä¼šä¼˜å…ˆåšæ‰©å®¹æ“ä½œï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;treeifyBin&lt;/span&gt;&lt;span&gt;(Node&amp;lt;K,V&amp;gt;[]Â tab,Â &lt;span&gt;int&lt;/span&gt;Â index)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Node&amp;lt;K,V&amp;gt;Â b;Â &lt;span&gt;int&lt;/span&gt;Â n,Â sc;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (tabÂ !=Â &lt;span&gt;null&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;//MIN_TREEIFY_CAPACITY=64&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//è‹¥æ•°ç»„é•¿åº¦å°äº64ï¼Œåˆ™å…ˆæ‰©å®¹&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((nÂ =Â tab.length)Â &amp;lt;Â MIN_TREEIFY_CAPACITY)&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//æ‰©å®¹&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â tryPresize(nÂ &amp;lt;&amp;lt;Â &lt;span&gt;1&lt;/span&gt;);&lt;br/&gt;Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â ((bÂ =Â tabAt(tab,Â index))Â !=Â &lt;span&gt;null&lt;/span&gt;Â &amp;amp;&amp;amp;Â b.hashÂ &amp;gt;=Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;synchronized&lt;/span&gt;Â (b)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//...è½¬æ¢ä¸ºçº¢é»‘æ ‘çš„æ“ä½œ&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æ¯æ¬¡æ–°å¢èŠ‚ç‚¹ä¹‹åï¼Œéƒ½ä¼šè°ƒç”¨addCountæ–¹æ³•ï¼Œæ£€æµ‹Nodeæ•°ç»„å¤§å°æ˜¯å¦è¾¾åˆ°é˜ˆå€¼ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;final&lt;/span&gt;Â VÂ &lt;span&gt;putVal&lt;/span&gt;&lt;span&gt;(KÂ key,Â VÂ value,Â &lt;span&gt;boolean&lt;/span&gt;Â onlyIfAbsent)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â ...&lt;br/&gt;Â Â Â Â &lt;span&gt;//åœ¨ä¸‹é¢ä¸€èŠ‚ä¼šè®²åˆ°ï¼Œæ­¤æ–¹æ³•ç»Ÿè®¡å®¹å™¨å…ƒç´ æ•°é‡&lt;/span&gt;&lt;br/&gt;Â Â Â Â addCount(&lt;span&gt;1L&lt;/span&gt;,Â binCount);&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;addCount&lt;/span&gt;&lt;span&gt;(&lt;span&gt;long&lt;/span&gt;Â x,Â &lt;span&gt;int&lt;/span&gt;Â check)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â CounterCell[]Â as;Â &lt;span&gt;long&lt;/span&gt;Â b,Â s;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â ((asÂ =Â counterCells)Â !=Â &lt;span&gt;null&lt;/span&gt;Â ||&lt;br/&gt;Â Â Â Â Â Â !U.compareAndSwapLong(&lt;span&gt;this&lt;/span&gt;,Â BASECOUNT,Â bÂ =Â baseCount,Â sÂ =Â bÂ +Â x))Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;//ç»Ÿè®¡å…ƒç´ ä¸ªæ•°çš„æ“ä½œ...&lt;/span&gt;&lt;br/&gt;Â Â }&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (checkÂ &amp;gt;=Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Node&amp;lt;K,V&amp;gt;[]Â tab,Â nt;Â &lt;span&gt;int&lt;/span&gt;Â n,Â sc;&lt;br/&gt;Â Â Â Â &lt;span&gt;//å…ƒç´ ä¸ªæ•°è¾¾åˆ°é˜ˆå€¼ï¼Œè¿›è¡Œæ‰©å®¹&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;while&lt;/span&gt;Â (sÂ &amp;gt;=Â (&lt;span&gt;long&lt;/span&gt;)(scÂ =Â sizeCtl)Â &amp;amp;&amp;amp;Â (tabÂ =Â table)Â !=Â &lt;span&gt;null&lt;/span&gt;Â &amp;amp;&amp;amp;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â (nÂ =Â tab.length)Â &amp;lt;Â MAXIMUM_CAPACITY)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â rsÂ =Â resizeStamp(n);&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//å‘ç°sizeCtlä¸ºè´Ÿæ•°ï¼Œè¯æ˜æœ‰çº¿ç¨‹æ­£åœ¨è¿ç§»&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (scÂ &amp;lt;Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((scÂ &amp;gt;&amp;gt;&amp;gt;Â RESIZE_STAMP_SHIFT)Â !=Â rsÂ ||Â scÂ ==Â rsÂ +Â &lt;span&gt;1&lt;/span&gt;Â ||&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â scÂ ==Â rsÂ +Â MAX_RESIZERSÂ ||Â (ntÂ =Â nextTable)Â ==Â &lt;span&gt;null&lt;/span&gt;Â ||&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â transferIndexÂ &amp;lt;=Â &lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;break&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (U.compareAndSwapInt(&lt;span&gt;this&lt;/span&gt;,Â SIZECTL,Â sc,Â scÂ +Â &lt;span&gt;1&lt;/span&gt;))&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â transfer(tab,Â nt);&lt;br/&gt;Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//ä¸ä¸ºè´Ÿæ•°ï¼Œåˆ™ä¸ºç¬¬ä¸€ä¸ªè¿ç§»çš„çº¿ç¨‹&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (U.compareAndSwapInt(&lt;span&gt;this&lt;/span&gt;,Â SIZECTL,Â sc,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (rsÂ &amp;lt;&amp;lt;Â RESIZE_STAMP_SHIFT)Â +Â &lt;span&gt;2&lt;/span&gt;))&lt;br/&gt;Â Â Â Â Â Â Â Â transfer(tab,Â &lt;span&gt;null&lt;/span&gt;);&lt;br/&gt;Â Â Â Â Â Â sÂ =Â sumCount();&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Concu&lt;span&gt;rrentHashMapè¿ç”¨å„ç±»CASæ“ä½œï¼Œå°†æ‰©å®¹æ“ä½œçš„å¹¶å‘æ€§èƒ½å®ç°æœ€å¤§åŒ–ï¼Œåœ¨æ‰©å®¹è¿‡ç¨‹ä¸­ï¼Œå°±ç®—æœ‰çº¿ç¨‹è°ƒç”¨getæŸ¥è¯¢æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å®‰å…¨çš„æŸ¥è¯¢æ•°æ®ï¼Œè‹¥æœ‰çº¿ç¨‹è¿›è¡Œputæ“ä½œï¼Œè¿˜ä¼šååŠ©æ‰©å®¹ï¼Œåˆ©ç”¨sizeCtlæ ‡è®°ä½å’Œå„ç§volatileå˜é‡è¿›è¡ŒCASæ“ä½œè¾¾åˆ°å¤šçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡ã€ååŠ©ï¼Œåœ¨è¿ç§»è¿‡ç¨‹ä¸­åªé”ä¸€ä¸ªNodeèŠ‚ç‚¹ï¼Œå³ä¿è¯äº†çº¿ç¨‹å®‰å…¨ï¼Œåˆæé«˜äº†å¹¶å‘æ€§èƒ½ã€‚&lt;/span&gt;&lt;/h3&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;| ç»Ÿè®¡å®¹å™¨å¤§å°çš„çº¿ç¨‹å®‰å…¨&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ConcurrentHashMapåœ¨æ¯æ¬¡putæ“ä½œä¹‹åéƒ½ä¼šè°ƒç”¨addCountæ–¹æ³•ï¼Œæ­¤æ–¹æ³•ç”¨äºç»Ÿè®¡å®¹å™¨å¤§å°ä¸”æ£€æµ‹å®¹å™¨å¤§å°æ˜¯å¦è¾¾åˆ°é˜ˆå€¼ï¼Œè‹¥è¾¾åˆ°é˜ˆå€¼éœ€è¦è¿›è¡Œæ‰©å®¹æ“ä½œï¼Œè¿™åœ¨ä¸Šé¢ä¹Ÿæ˜¯æœ‰æåˆ°çš„ã€‚è¿™ä¸€èŠ‚é‡ç‚¹è®¨è®ºå®¹å™¨å¤§å°çš„ç»Ÿè®¡æ˜¯å¦‚ä½•åšåˆ°çº¿ç¨‹å®‰å…¨ä¸”å¹¶å‘æ€§èƒ½ä¸ä½çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤§éƒ¨åˆ†çš„å•æœºæ•°æ®æŸ¥è¯¢ä¼˜åŒ–æ–¹æ¡ˆéƒ½ä¼šé™ä½å¹¶å‘æ€§èƒ½ï¼Œå°±åƒç¼“å­˜çš„å­˜å‚¨ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å°†æœ‰å¹¶å‘é—®é¢˜ï¼Œæ‰€ä»¥ä¼šäº§ç”Ÿå¹¶è¡Œæˆ–è€…ä¸€ç³»åˆ—å¹¶å‘å†²çªé”ç«äº‰çš„é—®é¢˜ï¼Œé™ä½äº†å¹¶å‘æ€§èƒ½ã€‚ç±»ä¼¼çš„ï¼Œçƒ­ç‚¹æ•°æ®ä¹Ÿæœ‰è¿™æ ·çš„é—®é¢˜ï¼Œåœ¨å¤šçº¿ç¨‹å¹¶å‘çš„è¿‡ç¨‹ä¸­ï¼Œçƒ­ç‚¹æ•°æ®ï¼ˆé¢‘ç¹è¢«è®¿é—®çš„å˜é‡ï¼‰æ˜¯åœ¨æ¯ä¸€ä¸ªçº¿ç¨‹ä¸­å‡ ä¹æˆ–å¤šæˆ–å°‘éƒ½ä¼šè®¿é—®åˆ°çš„æ•°æ®ï¼Œè¿™å°†å¢åŠ ç¨‹åºä¸­çš„ä¸²è¡Œéƒ¨åˆ†ï¼Œå›å¿†ä¸€ä¸‹å¼€å¤´æ‰€æè¿°çš„ï¼Œç¨‹åºä¸­çš„ä¸²è¡Œéƒ¨åˆ†å°†å½±å“å¹¶å‘çš„å¯ä¼¸ç¼©æ€§ï¼Œä½¿å¹¶å‘æ€§èƒ½ä¸‹é™ï¼Œè¿™é€šå¸¸ä¼šæˆä¸ºå¹¶å‘ç¨‹åºæ€§èƒ½çš„ç“¶é¢ˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€Œåœ¨ConcurrentHashMapä¸­ï¼Œå¦‚ä½•å¿«é€Ÿçš„ç»Ÿè®¡å®¹å™¨å¤§å°æ›´æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„è®®é¢˜ï¼Œå› ä¸ºå®¹å™¨å†…éƒ¨éœ€è¦ä¾é å®¹å™¨å¤§å°æ¥è€ƒè™‘æ˜¯å¦éœ€è¦æ‰©å®¹ï¼Œè€Œåœ¨å®¢æˆ·ç«¯è€Œè¨€éœ€è¦è°ƒç”¨æ­¤æ–¹æ³•æ¥çŸ¥é“å®¹å™¨æœ‰å¤šå°‘ä¸ªå…ƒç´ ï¼Œå¦‚æœå¤„ç†ä¸å¥½è¿™ç§çƒ­ç‚¹æ•°æ®ï¼Œå¹¶å‘æ€§èƒ½å°†å› ä¸ºè¿™ä¸ªçŸ­æ¿æ•´ä½“æ€§èƒ½ä¸‹é™ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæ˜¯ä½ ï¼Œä½ ä¼šå¦‚ä½•è®¾è®¡è¿™ç§çƒ­ç‚¹æ•°æ®ï¼Ÿæ˜¯åŠ é”ï¼Œè¿˜æ˜¯è¿›è¡ŒCASæ“ä½œï¼Ÿè¿›å…¥ConcurrentHashMapä¸­ï¼Œçœ‹çœ‹å¤§å¸ˆæ˜¯å¦‚ä½•å·§å¦™çš„è¿ç”¨äº†å¹¶å‘æŠ€å·§ï¼Œæé«˜çƒ­ç‚¹æ•°æ®çš„å¹¶å‘æ€§èƒ½ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…ˆç”¨å›¾çš„æ–¹å¼æ¥çœ‹çœ‹å¤§è‡´çš„å®ç°æ€è·¯ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.47896039603960394&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbue50Evic8ia9ibIeD4eBicfrLnbDAs9JMMs4muhvxSVuxvVG7VJib9xHjUqHCPvnPrSKqV25QQCald0cYg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1616&quot;/&gt;&lt;/figure&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;@sun&lt;/span&gt;.misc.ContendedÂ &lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;class&lt;/span&gt;Â &lt;span&gt;CounterCell&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;volatile&lt;/span&gt;Â &lt;span&gt;long&lt;/span&gt;Â value;&lt;br/&gt;Â Â CounterCell(&lt;span&gt;long&lt;/span&gt;Â x)Â {Â valueÂ =Â x;Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ˜¯ä¸€ä¸ªç²—ç•¥çš„å®ç°ï¼Œåœ¨è®¾è®¡ä¸­ï¼Œä½¿ç”¨äº†åˆ†è€Œæ²»ä¹‹çš„æ€æƒ³ï¼Œå°†æ¯ä¸€ä¸ªè®¡æ•°éƒ½åˆ†æ•£åˆ°å„ä¸ªcountCellå¯¹è±¡é‡Œé¢ï¼ˆä¸‹é¢ç§°ä¹‹ä¸ºæ¡¶ï¼‰ï¼Œä½¿ç«äº‰æœ€å°åŒ–ï¼Œåˆä½¿ç”¨äº†CASæ“ä½œï¼Œå°±ç®—æœ‰ç«äº‰ï¼Œä¹Ÿå¯ä»¥å¯¹å¤±è´¥äº†çš„çº¿ç¨‹è¿›è¡Œå…¶ä»–çš„å¤„ç†ã€‚ä¹è§‚é”çš„å®ç°æ–¹å¼ä¸æ‚²è§‚é”ä¸åŒä¹‹å¤„å°±åœ¨äºä¹è§‚é”å¯ä»¥å¯¹ç«äº‰å¤±è´¥äº†çš„çº¿ç¨‹è¿›è¡Œå…¶ä»–ç­–ç•¥çš„å¤„ç†ï¼Œè€Œæ‚²è§‚é”åªèƒ½ç­‰å¾…é”é‡Šæ”¾ï¼Œæ‰€ä»¥è¿™é‡Œä½¿ç”¨CASæ“ä½œå¯¹ç«äº‰å¤±è´¥çš„çº¿ç¨‹åšäº†å…¶ä»–å¤„ç†ï¼Œå¾ˆå·§å¦™çš„è¿ç”¨äº†CASä¹è§‚é”ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹é¢çœ‹çœ‹å…·ä½“çš„ä»£ç å®ç°å§ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;//è®¡æ•°ï¼Œå¹¶æ£€æŸ¥é•¿åº¦æ˜¯å¦è¾¾åˆ°é˜ˆå€¼&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;addCount&lt;/span&gt;&lt;span&gt;(&lt;span&gt;long&lt;/span&gt;Â x,Â &lt;span&gt;int&lt;/span&gt;Â check)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;//è®¡æ•°æ¡¶&lt;/span&gt;&lt;br/&gt;Â Â CounterCell[]Â as;Â &lt;span&gt;long&lt;/span&gt;Â b,Â s;&lt;br/&gt;Â Â &lt;span&gt;//å¦‚æœcounterCellsä¸ä¸ºnullï¼Œåˆ™ä»£è¡¨å·²ç»åˆå§‹åŒ–äº†ï¼Œç›´æ¥è¿›å…¥ifè¯­å¥å—&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;//è‹¥ç«äº‰ä¸ä¸¥é‡ï¼ŒcounterCellsæœ‰å¯èƒ½è¿˜æœªåˆå§‹åŒ–ï¼Œä¸ºnullï¼Œå…ˆå°è¯•CASæ“ä½œé€’å¢baseCountå€¼&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â ((asÂ =Â counterCells)Â !=Â &lt;span&gt;null&lt;/span&gt;Â ||&lt;br/&gt;Â Â Â Â Â Â !U.compareAndSwapLong(&lt;span&gt;this&lt;/span&gt;,Â BASECOUNT,Â bÂ =Â baseCount,Â sÂ =Â bÂ +Â x))Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;//è¿›å…¥æ­¤è¯­å¥å—æœ‰ä¸¤ç§å¯èƒ½&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//1.counterCellsè¢«åˆå§‹åŒ–å®Œæˆäº†ï¼Œä¸ä¸ºnull&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//2.CASæ“ä½œé€’å¢baseCountå€¼å¤±è´¥äº†ï¼Œè¯´æ˜æœ‰ç«äº‰&lt;/span&gt;&lt;br/&gt;Â Â Â Â CounterCellÂ a;Â &lt;span&gt;long&lt;/span&gt;Â v;Â &lt;span&gt;int&lt;/span&gt;Â m;&lt;br/&gt;Â Â Â Â &lt;span&gt;//æ ‡å¿—æ˜¯å¦å­˜åœ¨ç«äº‰&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;boolean&lt;/span&gt;Â uncontendedÂ =Â &lt;span&gt;true&lt;/span&gt;;&lt;br/&gt;Â Â Â Â &lt;span&gt;//1.å…ˆåˆ¤æ–­è®¡æ•°æ¡¶æ˜¯å¦è¿˜æ²¡åˆå§‹åŒ–ï¼Œåˆ™as=nullï¼Œè¿›å…¥è¯­å¥å—&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//2.åˆ¤æ–­è®¡æ•°æ¡¶é•¿åº¦æ˜¯å¦ä¸ºç©ºæˆ–ï¼Œè‹¥æ˜¯è¿›å…¥è¯­å¥å—&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//3.è¿™é‡Œåšäº†ä¸€ä¸ªçº¿ç¨‹å˜é‡éšæœºæ•°ï¼Œä¸ä¸Šæ¡¶å¤§å°-1ï¼Œè‹¥æ¡¶çš„è¿™ä¸ªä½ç½®ä¸ºç©ºï¼Œè¿›å…¥è¯­å¥å—&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//4.åˆ°è¿™é‡Œè¯´æ˜æ¡¶å·²ç»åˆå§‹åŒ–äº†ï¼Œä¸”éšæœºçš„è¿™ä¸ªä½ç½®ä¸ä¸ºç©ºï¼Œå°è¯•CASæ“ä½œä½¿æ¡¶åŠ 1ï¼Œå¤±è´¥è¿›å…¥è¯­å¥å—&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (asÂ ==Â &lt;span&gt;null&lt;/span&gt;Â ||Â (mÂ =Â as.lengthÂ -Â &lt;span&gt;1&lt;/span&gt;)Â &amp;lt;Â &lt;span&gt;0&lt;/span&gt;Â ||&lt;br/&gt;Â Â Â Â Â Â Â Â (aÂ =Â as[ThreadLocalRandom.getProbe()Â &amp;amp;Â m])Â ==Â &lt;span&gt;null&lt;/span&gt;Â ||&lt;br/&gt;Â Â Â Â Â Â Â Â !(uncontendedÂ =&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â U.compareAndSwapLong(a,Â CELLVALUE,Â vÂ =Â a.value,Â vÂ +Â x)))Â {&lt;br/&gt;Â Â Â Â Â Â fullAddCount(x,Â uncontended);&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (checkÂ &amp;lt;=Â &lt;span&gt;1&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;;&lt;br/&gt;Â Â Â Â &lt;span&gt;//ç»Ÿè®¡å®¹å™¨å¤§å°&lt;/span&gt;&lt;br/&gt;Â Â Â Â sÂ =Â sumCount();&lt;br/&gt;Â Â }&lt;br/&gt;Â Â ...&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;span&gt;å‡è®¾å½“å‰çº¿ç¨‹ä¸ºç¬¬ä¸€ä¸ªputçš„çº¿ç¨‹&lt;/span&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…ˆå‡&lt;span&gt;è®¾å½“&lt;/span&gt;&lt;span&gt;å‰Mapè¿˜æœªè¢«putæ•°æ®ï¼Œåˆ™addCountä¸€å®šæ²¡æœ‰è¢«è°ƒç”¨è¿‡ï¼Œå½“å‰çº¿ç¨‹ç¬¬ä¸€ä¸ªè°ƒç”¨addCountæ–¹æ³•ï¼Œåˆ™æ­¤æ—¶countCellä¸€å®šæ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œä¸ºnullï¼Œåˆ™è¿›è¡Œå¦‚ä¸‹åˆ¤æ–­ï¼š&lt;/span&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;if&lt;/span&gt;Â ((asÂ =Â counterCells)Â !=Â &lt;span&gt;null&lt;/span&gt;Â ||&lt;br/&gt;Â Â Â Â Â Â !U.compareAndSwapLong(&lt;span&gt;this&lt;/span&gt;,Â BASECOUNT,Â bÂ =Â baseCount,Â sÂ =Â bÂ +Â x))Â &lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œçš„ifåˆ¤æ–­ä¸€å®šä¼šèµ°ç¬¬äºŒä¸ªåˆ¤æ–­ï¼Œå…ˆCASå¢åŠ å˜é‡baseCountçš„å€¼ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;transient&lt;/span&gt;Â &lt;span&gt;volatile&lt;/span&gt;Â &lt;span&gt;long&lt;/span&gt;Â baseCount;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªå€¼æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿæˆ‘ä»¬çœ‹çœ‹ç»Ÿè®¡å®¹å™¨å¤§å°çš„æ–¹æ³•sumCountï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;final&lt;/span&gt;Â &lt;span&gt;long&lt;/span&gt;Â &lt;span&gt;sumCount&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;//è·å–è®¡æ•°æ¡¶&lt;/span&gt;&lt;br/&gt;Â Â CounterCell[]Â asÂ =Â counterCells;Â CounterCellÂ a;&lt;br/&gt;Â Â &lt;span&gt;//è·å–baseCountï¼Œèµ‹å€¼ç»™sumæ€»æ•°&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;long&lt;/span&gt;Â sumÂ =Â baseCount;&lt;br/&gt;Â Â &lt;span&gt;//è‹¥è®¡æ•°æ¡¶ä¸ä¸ºç©ºï¼Œç»Ÿè®¡è®¡æ•°æ¡¶å†…çš„å€¼&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â (asÂ !=Â &lt;span&gt;null&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â (&lt;span&gt;int&lt;/span&gt;Â iÂ =Â &lt;span&gt;0&lt;/span&gt;;Â iÂ &amp;lt;Â as.length;Â ++i)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//éå†è®¡æ•°æ¡¶ï¼Œå°†valueå€¼ç›¸åŠ &lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((aÂ =Â as[i])Â !=Â &lt;span&gt;null&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â Â Â sumÂ +=Â a.value;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â }&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â sum;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªæ–¹æ³•çš„å¤§ä½“æ€è·¯ä¸æˆ‘ä»¬å¼€å¤´é‚£å¼ å›¾å·®ä¸å¤šï¼Œå®¹å™¨çš„å¤§å°å…¶å®æ˜¯åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå¼€å¤´åªè¯´äº†è®¡æ•°æ¡¶çš„é‚£éƒ¨åˆ†ï¼Œå…¶å®è¿˜æœ‰ä¸€ä¸ªbaseCountï¼Œåœ¨çº¿ç¨‹æ²¡æœ‰ç«äº‰çš„æƒ…å†µä¸‹çš„ç»Ÿè®¡å€¼ï¼Œæ¢å¥è¯è¯´ï¼Œåœ¨å¢åŠ å®¹é‡çš„æ—¶å€™å…¶å®æ˜¯å…ˆå»åšCASé€’å¢baseCountçš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±æ­¤å¯è§ï¼Œç»Ÿè®¡å®¹å™¨å¤§å°å…¶å®æ˜¯ç”¨äº†ä¸¤ç§æ€è·¯ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;CASæ–¹å¼ç›´æ¥é€’å¢ï¼šåœ¨çº¿ç¨‹ç«äº‰ä¸å¤§çš„æ—¶å€™ï¼Œç›´æ¥ä½¿ç”¨CASæ“ä½œé€’å¢baseCountå€¼å³å¯ï¼Œè¿™é‡Œè¯´çš„ç«äº‰ä¸å¤§æŒ‡çš„æ˜¯CASæ“ä½œä¸ä¼šå¤±è´¥çš„æƒ…å†µ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åˆ†è€Œæ²»ä¹‹æ¡¶è®¡æ•°ï¼šè‹¥å‡ºç°äº†CASæ“ä½œå¤±è´¥çš„æƒ…å†µï¼Œåˆ™è¯æ˜æ­¤æ—¶æœ‰çº¿ç¨‹ç«äº‰äº†ï¼Œè®¡æ•°æ–¹å¼ä»CASæ–¹å¼è½¬å˜ä¸ºåˆ†è€Œæ²»ä¹‹çš„æ¡¶è®¡æ•°æ–¹å¼&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;span&gt;å‡ºç°äº†çº¿ç¨‹ç«äº‰å¯¼è‡´CASå¤±è´¥&lt;/span&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤æ—¶å‡ºç°äº†&lt;span&gt;ç«äº‰ï¼Œåˆ™ä¸ä¼šå†ç”¨CASæ–¹å¼æ¥è®¡æ•°äº†ï¼Œç›´æ¥ä½¿ç”¨æ¡¶æ–¹å¼ï¼Œä»ä¸Šé¢çš„addCountæ–¹æ³•å¯ä»¥çœ‹å‡ºæ¥ï¼Œæ­¤æ—¶çš„countCellæ˜¯ä¸ºç©ºçš„ï¼Œæœ€ç»ˆä¸€å®šä¼šè¿›å…¥fullAddCountæ–¹æ³•æ¥è¿›è¡Œåˆå§‹åŒ–æ¡¶ï¼š&lt;/span&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Â Â Â &lt;span&gt;&lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;fullAddCount&lt;/span&gt;&lt;span&gt;(&lt;span&gt;long&lt;/span&gt;Â x,Â &lt;span&gt;boolean&lt;/span&gt;Â wasUncontended)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;int&lt;/span&gt;Â h;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((hÂ =Â ThreadLocalRandom.getProbe())Â ==Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â ThreadLocalRandom.localInit();Â Â Â Â Â Â &lt;span&gt;//Â forceÂ initialization&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â hÂ =Â ThreadLocalRandom.getProbe();&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â wasUncontendedÂ =Â &lt;span&gt;true&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;boolean&lt;/span&gt;Â collideÂ =Â &lt;span&gt;false&lt;/span&gt;;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â TrueÂ ifÂ lastÂ slotÂ nonempty&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â (;;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â CounterCell[]Â as;Â CounterCellÂ a;Â &lt;span&gt;int&lt;/span&gt;Â n;Â &lt;span&gt;long&lt;/span&gt;Â v;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â ...&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//å¦‚æœè®¡æ•°æ¡¶!=nullï¼Œè¯æ˜å·²ç»åˆå§‹åŒ–ï¼Œæ­¤æ—¶ä¸èµ°æ­¤è¯­å¥å—&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((asÂ =Â counterCells)Â !=Â &lt;span&gt;null&lt;/span&gt;Â &amp;amp;&amp;amp;Â (nÂ =Â as.length)Â &amp;gt;Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â ...&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//è¿›å…¥æ­¤è¯­å¥å—è¿›è¡Œè®¡æ•°æ¡¶çš„åˆå§‹åŒ–&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//CASè®¾ç½®cellsBusy=1ï¼Œè¡¨ç¤ºç°åœ¨è®¡æ•°æ¡¶Busyä¸­...&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (cellsBusyÂ ==Â &lt;span&gt;0&lt;/span&gt;Â &amp;amp;&amp;amp;Â counterCellsÂ ==Â asÂ &amp;amp;&amp;amp;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â U.compareAndSwapInt(&lt;span&gt;this&lt;/span&gt;,Â CELLSBUSY,Â &lt;span&gt;0&lt;/span&gt;,Â &lt;span&gt;1&lt;/span&gt;))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//è‹¥æœ‰çº¿ç¨‹åŒæ—¶åˆå§‹åŒ–è®¡æ•°æ¡¶ï¼Œç”±äºCASæ“ä½œåªæœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥è¿™é‡Œ&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;boolean&lt;/span&gt;Â initÂ =Â &lt;span&gt;false&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;try&lt;/span&gt;Â {Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â InitializeÂ table&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//å†æ¬¡ç¡®è®¤è®¡æ•°æ¡¶ä¸ºç©º&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (counterCellsÂ ==Â as)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//åˆå§‹åŒ–ä¸€ä¸ªé•¿åº¦ä¸º2çš„è®¡æ•°æ¡¶&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â CounterCell[]Â rsÂ =Â &lt;span&gt;new&lt;/span&gt;Â CounterCell[&lt;span&gt;2&lt;/span&gt;];&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//hä¸ºä¸€ä¸ªéšæœºæ•°ï¼Œä¸ä¸Š1åˆ™ä»£è¡¨ç»“æœä¸º0ã€1ä¸­éšæœºçš„ä¸€ä¸ª&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//ä¹Ÿå°±æ˜¯åœ¨0ã€1ä¸‹æ ‡ä¸­éšä¾¿é€‰ä¸€ä¸ªè®¡æ•°æ¡¶ï¼Œx=1ï¼Œæ”¾å…¥1çš„å€¼ä»£è¡¨å¢åŠ 1ä¸ªå®¹é‡&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â rs[hÂ &amp;amp;Â &lt;span&gt;1&lt;/span&gt;]Â =Â &lt;span&gt;new&lt;/span&gt;Â CounterCell(x);&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//å°†åˆå§‹åŒ–å¥½çš„è®¡æ•°æ¡¶èµ‹å€¼ç»™ConcurrentHashMap&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â counterCellsÂ =Â rs;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â initÂ =Â &lt;span&gt;true&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }Â &lt;span&gt;finally&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//æœ€åå°†busyæ ‡è¯†è®¾ç½®ä¸º0ï¼Œè¡¨ç¤ºä¸busyäº†&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â cellsBusyÂ =Â &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (init)&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;break&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//è‹¥æœ‰çº¿ç¨‹åŒæ—¶æ¥åˆå§‹åŒ–è®¡æ•°æ¡¶ï¼Œåˆ™æ²¡æœ‰æŠ¢åˆ°busyèµ„æ ¼çš„çº¿ç¨‹å°±å…ˆæ¥CASé€’å¢baseCount&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (U.compareAndSwapLong(&lt;span&gt;this&lt;/span&gt;,Â BASECOUNT,Â vÂ =Â baseCount,Â vÂ +Â x))&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;break&lt;/span&gt;;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â FallÂ backÂ onÂ usingÂ base&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â }&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ°è¿™é‡Œå°±å®Œæˆäº†è®¡æ•°æ¡¶çš„åˆå§‹åŒ–å·¥ä½œï¼Œåœ¨ä¹‹åçš„è®¡æ•°éƒ½å°†ä¼šä½¿ç”¨è®¡æ•°æ¡¶æ–¹å¼æ¥ç»Ÿè®¡æ€»æ•°ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;span&gt;è®¡æ•°æ¡¶æ‰©å®¹&lt;/span&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»ä¸Šé¢çš„åˆ†æä¸­æˆ‘ä»¬çŸ¥é“ï¼Œè®¡æ•°æ¡¶åˆå§‹åŒ–ä¹‹åé•¿åº¦ä¸º2ï¼Œåœ¨ç«äº‰å¤§çš„æ—¶å€™è‚¯å®šæ˜¯ä¸å¤Ÿç”¨çš„ï¼Œæ‰€ä»¥ä¸€å®šæœ‰è®¡æ•°æ¡¶çš„æ‰©å®¹æ“ä½œï¼Œæ‰€ä»¥ç°åœ¨å°±æœ‰ä¸¤ä¸ªé—®é¢˜äº†ï¼š&lt;/h3&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ä»€ä¹ˆæ¡ä»¶ä¸‹ä¼šè¿›è¡Œè®¡æ•°æ¡¶çš„æ‰©å®¹ï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ‰©å®¹æ“ä½œæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡è®¾æ­¤æ—¶æ˜¯ç”¨è®¡æ•°æ¡¶æ–¹å¼è¿›è¡Œè®¡æ•°ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;addCount&lt;/span&gt;&lt;span&gt;(&lt;span&gt;long&lt;/span&gt;Â x,Â &lt;span&gt;int&lt;/span&gt;Â check)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â CounterCell[]Â as;Â &lt;span&gt;long&lt;/span&gt;Â b,Â s;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â ((asÂ =Â counterCells)Â !=Â &lt;span&gt;null&lt;/span&gt;Â ||&lt;br/&gt;Â Â Â Â Â Â !U.compareAndSwapLong(&lt;span&gt;this&lt;/span&gt;,Â BASECOUNT,Â bÂ =Â baseCount,Â sÂ =Â bÂ +Â x))Â {&lt;br/&gt;Â Â Â Â CounterCellÂ a;Â &lt;span&gt;long&lt;/span&gt;Â v;Â &lt;span&gt;int&lt;/span&gt;Â m;&lt;br/&gt;Â Â Â Â &lt;span&gt;boolean&lt;/span&gt;Â uncontendedÂ =Â &lt;span&gt;true&lt;/span&gt;;&lt;br/&gt;Â Â Â Â &lt;span&gt;//æ­¤æ—¶æ˜¾ç„¶ä¼šåœ¨è®¡æ•°æ¡¶æ•°ç»„ä¸­éšæœºé€‰ä¸€ä¸ªè®¡æ•°æ¡¶&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//ç„¶åä½¿ç”¨CASæ“ä½œå°†æ­¤è®¡æ•°æ¡¶ä¸­çš„value+1&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (asÂ ==Â &lt;span&gt;null&lt;/span&gt;Â ||Â (mÂ =Â as.lengthÂ -Â &lt;span&gt;1&lt;/span&gt;)Â &amp;lt;Â &lt;span&gt;0&lt;/span&gt;Â ||&lt;br/&gt;Â Â Â Â Â Â Â Â (aÂ =Â as[ThreadLocalRandom.getProbe()Â &amp;amp;Â m])Â ==Â &lt;span&gt;null&lt;/span&gt;Â ||&lt;br/&gt;Â Â Â Â Â Â Â Â !(uncontendedÂ =&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â U.compareAndSwapLong(a,Â CELLVALUE,Â vÂ =Â a.value,Â vÂ +Â x)))Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//è‹¥CASæ“ä½œå¤±è´¥ï¼Œè¯æ˜æœ‰ç«äº‰ï¼Œè¿›å…¥fullAddCountæ–¹æ³•&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â fullAddCount(x,Â uncontended);&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (checkÂ &amp;lt;=Â &lt;span&gt;1&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;;&lt;br/&gt;Â Â Â Â sÂ =Â sumCount();&lt;br/&gt;Â Â }&lt;br/&gt;Â Â ...&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿›å…¥fullAddCountæ–¹æ³•ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;private&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â &lt;span&gt;void&lt;/span&gt;Â &lt;span&gt;fullAddCount&lt;/span&gt;&lt;span&gt;(&lt;span&gt;long&lt;/span&gt;Â x,Â &lt;span&gt;boolean&lt;/span&gt;Â wasUncontended)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;int&lt;/span&gt;Â h;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â ((hÂ =Â ThreadLocalRandom.getProbe())Â ==Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â ThreadLocalRandom.localInit();Â Â Â Â Â Â &lt;span&gt;//Â forceÂ initialization&lt;/span&gt;&lt;br/&gt;Â Â Â Â hÂ =Â ThreadLocalRandom.getProbe();&lt;br/&gt;Â Â Â Â wasUncontendedÂ =Â &lt;span&gt;true&lt;/span&gt;;&lt;br/&gt;Â Â }&lt;br/&gt;Â Â &lt;span&gt;boolean&lt;/span&gt;Â collideÂ =Â &lt;span&gt;false&lt;/span&gt;;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â TrueÂ ifÂ lastÂ slotÂ nonempty&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;for&lt;/span&gt;Â (;;)Â {&lt;br/&gt;Â Â Â Â CounterCell[]Â as;Â CounterCellÂ a;Â &lt;span&gt;int&lt;/span&gt;Â n;Â &lt;span&gt;long&lt;/span&gt;Â v;&lt;br/&gt;Â Â Â Â &lt;span&gt;//è®¡æ•°æ¡¶åˆå§‹åŒ–å¥½äº†ï¼Œä¸€å®šæ˜¯èµ°è¿™ä¸ªifè¯­å¥å—&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((asÂ =Â counterCells)Â !=Â &lt;span&gt;null&lt;/span&gt;Â &amp;amp;&amp;amp;Â (nÂ =Â as.length)Â &amp;gt;Â &lt;span&gt;0&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//ä»è®¡æ•°æ¡¶æ•°ç»„éšæœºé€‰ä¸€ä¸ªè®¡æ•°æ¡¶ï¼Œè‹¥ä¸ºnullè¡¨ç¤ºè¯¥æ¡¶ä½è¿˜æ²¡çº¿ç¨‹é€’å¢è¿‡&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((aÂ =Â as[(nÂ -Â &lt;span&gt;1&lt;/span&gt;)Â &amp;amp;Â h])Â ==Â &lt;span&gt;null&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;//æŸ¥çœ‹è®¡æ•°æ¡¶busyçŠ¶æ€æ˜¯å¦è¢«æ ‡è¯†&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (cellsBusyÂ ==Â &lt;span&gt;0&lt;/span&gt;)Â {Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â TryÂ toÂ attachÂ newÂ Cell&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//è‹¥ä¸busyï¼Œç›´æ¥newä¸€ä¸ªè®¡æ•°æ¡¶&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â CounterCellÂ rÂ =Â &lt;span&gt;new&lt;/span&gt;Â CounterCell(x);Â &lt;span&gt;//Â OptimisticÂ create&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//CASæ“ä½œï¼Œæ ‡ç¤ºè®¡æ•°æ¡¶busyä¸­&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (cellsBusyÂ ==Â &lt;span&gt;0&lt;/span&gt;Â &amp;amp;&amp;amp;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â U.compareAndSwapInt(&lt;span&gt;this&lt;/span&gt;,Â CELLSBUSY,Â &lt;span&gt;0&lt;/span&gt;,Â &lt;span&gt;1&lt;/span&gt;))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;boolean&lt;/span&gt;Â createdÂ =Â &lt;span&gt;false&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;try&lt;/span&gt;Â {Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â RecheckÂ underÂ lock&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â CounterCell[]Â rs;Â &lt;span&gt;int&lt;/span&gt;Â m,Â j;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//åœ¨é”ä¸‹å†æ£€æŸ¥ä¸€æ¬¡è®¡æ•°æ¡¶ä¸ºnull&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((rsÂ =Â counterCells)Â !=Â &lt;span&gt;null&lt;/span&gt;Â &amp;amp;&amp;amp;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â (mÂ =Â rs.length)Â &amp;gt;Â &lt;span&gt;0&lt;/span&gt;Â &amp;amp;&amp;amp;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â rs[jÂ =Â (mÂ -Â &lt;span&gt;1&lt;/span&gt;)Â &amp;amp;Â h]Â ==Â &lt;span&gt;null&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//å°†åˆšåˆšåˆ›å»ºçš„è®¡æ•°æ¡¶èµ‹å€¼ç»™å¯¹åº”ä½ç½®&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â rs[j]Â =Â r;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â createdÂ =Â &lt;span&gt;true&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â }Â &lt;span&gt;finally&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//æ ‡ç¤ºä¸busyäº†&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â cellsBusyÂ =Â &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (created)&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;break&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;continue&lt;/span&gt;;Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â SlotÂ isÂ nowÂ non-empty&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â collideÂ =Â &lt;span&gt;false&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (!wasUncontended)Â Â Â Â Â Â Â &lt;span&gt;//Â CASÂ alreadyÂ knownÂ toÂ fail&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â wasUncontendedÂ =Â &lt;span&gt;true&lt;/span&gt;;Â Â Â Â Â Â &lt;span&gt;//Â ContinueÂ afterÂ rehash&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//èµ°åˆ°è¿™é‡Œä»£è¡¨è®¡æ•°æ¡¶ä¸ä¸ºnullï¼Œå°è¯•é€’å¢è®¡æ•°æ¡¶&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (U.compareAndSwapLong(a,Â CELLVALUE,Â vÂ =Â a.value,Â vÂ +Â x))&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;break&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (counterCellsÂ !=Â asÂ ||Â nÂ &amp;gt;=Â NCPU)&lt;br/&gt;Â Â Â Â Â Â Â Â collideÂ =Â &lt;span&gt;false&lt;/span&gt;;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â AtÂ maxÂ sizeÂ orÂ stale&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//è‹¥CASæ“ä½œå¤±è´¥äº†ï¼Œåˆ°äº†è¿™é‡Œï¼Œä¼šå…ˆè¿›å…¥ä¸€æ¬¡ï¼Œç„¶åå†èµ°ä¸€æ¬¡åˆšåˆšçš„forå¾ªç¯&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//è‹¥æ˜¯ç¬¬äºŒæ¬¡forå¾ªç¯ï¼Œcollide=trueï¼Œåˆ™ä¸ä¼šèµ°è¿›å»&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (!collide)&lt;br/&gt;Â Â Â Â Â Â Â Â collideÂ =Â &lt;span&gt;true&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//è®¡æ•°æ¡¶æ‰©å®¹ï¼Œä¸€ä¸ªçº¿ç¨‹è‹¥èµ°äº†ä¸¤æ¬¡forå¾ªç¯ï¼Œä¹Ÿå°±æ˜¯è¿›è¡Œäº†å¤šæ¬¡CASæ“ä½œé€’å¢è®¡æ•°æ¡¶å¤±è´¥äº†&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//åˆ™è¿›è¡Œè®¡æ•°æ¡¶æ‰©å®¹ï¼ŒCASæ ‡ç¤ºè®¡æ•°æ¡¶busyä¸­&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (cellsBusyÂ ==Â &lt;span&gt;0&lt;/span&gt;Â &amp;amp;&amp;amp;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â U.compareAndSwapInt(&lt;span&gt;this&lt;/span&gt;,Â CELLSBUSY,Â &lt;span&gt;0&lt;/span&gt;,Â &lt;span&gt;1&lt;/span&gt;))Â {&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;try&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//ç¡®è®¤è®¡æ•°æ¡¶è¿˜æ˜¯åŒä¸€ä¸ª&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (counterCellsÂ ==Â as)Â {&lt;span&gt;//Â ExpandÂ tableÂ unlessÂ stale&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//å°†é•¿åº¦æ‰©å¤§åˆ°2å€&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â CounterCell[]Â rsÂ =Â &lt;span&gt;new&lt;/span&gt;Â CounterCell[nÂ &amp;lt;&amp;lt;Â &lt;span&gt;1&lt;/span&gt;];&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//éå†æ—§è®¡æ•°æ¡¶ï¼Œå°†å¼•ç”¨ç›´æ¥æ¬è¿‡æ¥&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â (&lt;span&gt;int&lt;/span&gt;Â iÂ =Â &lt;span&gt;0&lt;/span&gt;;Â iÂ &amp;lt;Â n;Â ++i)&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â rs[i]Â =Â as[i];&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//èµ‹å€¼&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â counterCellsÂ =Â rs;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â }Â &lt;span&gt;finally&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//å–æ¶ˆbusyçŠ¶æ€&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â cellsBusyÂ =Â &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â Â Â collideÂ =Â &lt;span&gt;false&lt;/span&gt;;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;continue&lt;/span&gt;;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â RetryÂ withÂ expandedÂ table&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â }&lt;br/&gt;Â Â Â Â Â Â hÂ =Â ThreadLocalRandom.advanceProbe(h);&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (cellsBusyÂ ==Â &lt;span&gt;0&lt;/span&gt;Â &amp;amp;&amp;amp;Â counterCellsÂ ==Â asÂ &amp;amp;&amp;amp;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â U.compareAndSwapInt(&lt;span&gt;this&lt;/span&gt;,Â CELLSBUSY,Â &lt;span&gt;0&lt;/span&gt;,Â &lt;span&gt;1&lt;/span&gt;))Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;//åˆå§‹åŒ–è®¡æ•°æ¡¶...&lt;/span&gt;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (U.compareAndSwapLong(&lt;span&gt;this&lt;/span&gt;,Â BASECOUNT,Â vÂ =Â baseCount,Â vÂ +Â x))&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;break&lt;/span&gt;;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â FallÂ backÂ onÂ usingÂ base&lt;/span&gt;&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çœ‹åˆ°è¿™é‡Œï¼Œæƒ³å¿…å·²ç»å¯ä»¥è§£å†³ä¸Šé¢ä¸¤ä¸ªé—®é¢˜äº†ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ä»€ä¹ˆæ¡ä»¶ä¸‹ä¼šè¿›è¡Œè®¡æ•°æ¡¶çš„æ‰©å®¹ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç­”ï¼šåœ¨CASæ“ä½œé€’å¢è®¡æ•°æ¡¶å¤±è´¥äº†3æ¬¡ä¹‹åï¼Œä¼šè¿›è¡Œæ‰©å®¹è®¡æ•°æ¡¶æ“ä½œï¼Œæ³¨æ„æ­¤æ—¶åŒæ—¶è¿›è¡Œäº†ä¸¤æ¬¡éšæœºå®šä½è®¡æ•°æ¡¶æ¥è¿›è¡ŒCASé€’å¢çš„ï¼Œæ‰€ä»¥æ­¤æ—¶å¯ä»¥ä¿è¯å¤§æ¦‚ç‡æ˜¯å› ä¸ºè®¡æ•°æ¡¶ä¸å¤Ÿç”¨äº†ï¼Œæ‰ä¼šè¿›è¡Œè®¡æ•°æ¡¶æ‰©å®¹&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æ‰©å®¹æ“ä½œæ˜¯æ€ä¹ˆæ ·çš„ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç­”ï¼šè®¡æ•°æ¡¶é•¿åº¦å¢åŠ åˆ°ä¸¤å€é•¿åº¦ï¼Œæ•°æ®ç›´æ¥éå†è¿ç§»è¿‡æ¥ï¼Œç”±äºè®¡æ•°æ¡¶ä¸åƒHashMapæ•°æ®ç»“æ„é‚£ä¹ˆå¤æ‚ï¼Œæœ‰hashç®—æ³•çš„å½±å“ï¼ŒåŠ ä¸Šè®¡æ•°æ¡¶åªæ˜¯å­˜æ”¾ä¸€ä¸ªlongç±»å‹çš„è®¡æ•°å€¼è€Œå·²ï¼Œæ‰€ä»¥ç›´æ¥èµ‹å€¼å¼•ç”¨å³å¯ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;/strong&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ªäººæ„Ÿè§‰ï¼Œç»Ÿè®¡å®¹å™¨å¤§å°çš„çº¿ç¨‹å®‰å…¨ä¸æ‰©å®¹ConcurrentHashMapè¿™ä¸¤ä¸ªç®—å¾—ä¸ŠConcurrentHashMapä¸­æœ€èªæ˜çš„ä¸¤ä¸ªå¹¶å‘è®¾è®¡äº†ï¼Œé˜…è¯»æ­¤æºç çš„æˆ‘çœ‹åˆ°è¿™ä¸¤ä¸ªæ“ä½œçš„è®¾è®¡ï¼Œéƒ½å¿ä¸ä½æ‹æ‰‹å«ç»ï¼Œæˆ‘æƒ³ï¼Œè¿™æˆ–è®¸ä¹Ÿæ˜¯ä¸€ä¸ªçœ‹æºç çš„ä¹è¶£å§ï¼Œç«™åœ¨å·¨äººçš„è‚©è†€çœ‹å·¨äººçš„æ€æƒ³ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æ€»ç»“ä¸€ä¸‹è®¡æ•°ä¸­ç”¨åˆ°çš„å¹¶å‘æŠ€å·§ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;åˆ©ç”¨CASé€’å¢baseCountå€¼æ¥æ„ŸçŸ¥æ˜¯å¦å­˜åœ¨çº¿ç¨‹ç«äº‰ï¼Œè‹¥ç«äº‰ä¸å¤§ç›´æ¥CASé€’å¢baseCountå€¼å³å¯ï¼Œæ€§èƒ½ä¸ç›´æ¥baseCount++å·®åˆ«ä¸å¤§ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è‹¥å­˜åœ¨çº¿ç¨‹ç«äº‰ï¼Œåˆ™åˆå§‹åŒ–è®¡æ•°æ¡¶ï¼Œè‹¥æ­¤æ—¶åˆå§‹åŒ–è®¡æ•°æ¡¶çš„è¿‡ç¨‹ä¸­ä¹Ÿå­˜åœ¨ç«äº‰ï¼Œå¤šä¸ªçº¿ç¨‹åŒæ—¶åˆå§‹åŒ–è®¡æ•°æ¡¶ï¼Œåˆ™æ²¡æœ‰æŠ¢åˆ°åˆå§‹åŒ–èµ„æ ¼çš„çº¿ç¨‹ç›´æ¥å°è¯•CASé€’å¢baseCountå€¼çš„æ–¹å¼å®Œæˆè®¡æ•°ï¼Œæœ€å¤§åŒ–åˆ©ç”¨äº†çº¿ç¨‹çš„å¹¶è¡Œã€‚æ­¤æ—¶ä½¿ç”¨è®¡æ•°æ¡¶è®¡æ•°ï¼Œåˆ†è€Œæ²»ä¹‹çš„æ–¹å¼æ¥è®¡æ•°ï¼Œæ­¤æ—¶ä¸¤ä¸ªè®¡æ•°æ¡¶æœ€å¤§å¯æä¾›ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è®¡æ•°ï¼ŒåŒæ—¶ä½¿ç”¨CASæ“ä½œæ¥æ„ŸçŸ¥çº¿ç¨‹ç«äº‰ï¼Œè‹¥ä¸¤ä¸ªæ¡¶æƒ…å†µä¸‹CASæ“ä½œè¿˜æ˜¯é¢‘ç¹å¤±è´¥ï¼ˆå¤±è´¥3æ¬¡ï¼‰ï¼Œåˆ™ç›´æ¥æ‰©å®¹è®¡æ•°æ¡¶ï¼Œå˜ä¸º4ä¸ªè®¡æ•°æ¡¶ï¼Œæ”¯æŒæœ€å¤§åŒæ—¶4ä¸ªçº¿ç¨‹å¹¶å‘è®¡æ•°ï¼Œä»¥æ­¤ç±»æ¨â€¦åŒæ—¶ä½¿ç”¨ä½è¿ç®—å’Œéšæœºæ•°çš„æ–¹å¼&quot;è´Ÿè½½å‡è¡¡&quot;ä¸€æ ·çš„å°†çº¿ç¨‹è®¡æ•°è¯·æ±‚æ¥è¿‘å‡åŒ€çš„è½åœ¨å„ä¸ªè®¡æ•°æ¡¶ä¸­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;| getæ“ä½œçš„çº¿ç¨‹å®‰å…¨&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äºgetæ“ä½œï¼Œå…¶å®æ²¡æœ‰çº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œåªæœ‰å¯è§æ€§çš„é—®é¢˜ï¼Œåªéœ€è¦ç¡®ä¿getçš„æ•°æ®æ˜¯çº¿ç¨‹ä¹‹é—´å¯è§çš„å³å¯ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â VÂ &lt;span&gt;get&lt;/span&gt;&lt;span&gt;(ObjectÂ key)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â Node&amp;lt;K,V&amp;gt;[]Â tab;Â Node&amp;lt;K,V&amp;gt;Â e,Â p;Â &lt;span&gt;int&lt;/span&gt;Â n,Â eh;Â KÂ ek;&lt;br/&gt;Â Â &lt;span&gt;int&lt;/span&gt;Â hÂ =Â spread(key.hashCode());&lt;br/&gt;Â Â &lt;span&gt;//æ­¤è¿‡ç¨‹ä¸HashMapçš„getæ“ä½œæ— å¼‚ï¼Œä¸å¤šèµ˜è¿°&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â ((tabÂ =Â table)Â !=Â &lt;span&gt;null&lt;/span&gt;Â &amp;amp;&amp;amp;Â (nÂ =Â tab.length)Â &amp;gt;Â &lt;span&gt;0&lt;/span&gt;Â &amp;amp;&amp;amp;&lt;br/&gt;Â Â Â Â Â Â (eÂ =Â tabAt(tab,Â (nÂ -Â &lt;span&gt;1&lt;/span&gt;)Â &amp;amp;Â h))Â !=Â &lt;span&gt;null&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((ehÂ =Â e.hash)Â ==Â h)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â ((ekÂ =Â e.key)Â ==Â keyÂ ||Â (ekÂ !=Â &lt;span&gt;null&lt;/span&gt;Â &amp;amp;&amp;amp;Â key.equals(ek)))&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â e.val;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â Â Â &lt;span&gt;//å½“hash&amp;lt;0,æœ‰å¯èƒ½æ˜¯åœ¨è¿ç§»,ä½¿ç”¨fwdå ä½Nodeå»æŸ¥æ‰¾æ–°tableä¸­çš„æ•°æ®&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;else&lt;/span&gt;Â &lt;span&gt;if&lt;/span&gt;Â (ehÂ &amp;lt;Â &lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â (pÂ =Â e.find(h,Â key))Â !=Â &lt;span&gt;null&lt;/span&gt;Â ?Â p.valÂ :Â &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;Â Â Â Â &lt;span&gt;while&lt;/span&gt;Â ((eÂ =Â e.next)Â !=Â &lt;span&gt;null&lt;/span&gt;)Â {&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â (e.hashÂ ==Â hÂ &amp;amp;&amp;amp;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â ((ekÂ =Â e.key)Â ==Â keyÂ ||Â (ekÂ !=Â &lt;span&gt;null&lt;/span&gt;Â &amp;amp;&amp;amp;Â key.equals(ek))))&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â e.val;&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â }&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;null&lt;/span&gt;;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨getæ“ä½œä¸­é™¤äº†å¢åŠ äº†è¿ç§»çš„åˆ¤æ–­ä»¥å¤–ï¼ŒåŸºæœ¬ä¸HashMapçš„getæ“ä½œæ— å¼‚ï¼Œè¿™é‡Œä¸å¤šèµ˜è¿°ï¼Œå€¼å¾—ä¸€æçš„æ˜¯è¿™é‡Œä½¿ç”¨äº†tabAtæ–¹æ³•Unsafeç±»volatileçš„æ–¹å¼å»è·å–Nodeæ•°ç»„ä¸­çš„Nodeï¼Œä¿è¯è·å¾—åˆ°çš„Nodeæ˜¯æœ€æ–°çš„ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;static&lt;/span&gt;Â &lt;span&gt;final&lt;/span&gt;Â &amp;lt;K,V&amp;gt;Â &lt;span&gt;Node&amp;lt;K,V&amp;gt;Â &lt;span&gt;tabAt&lt;/span&gt;&lt;span&gt;(Node&amp;lt;K,V&amp;gt;[]Â tab,Â &lt;span&gt;int&lt;/span&gt;Â i)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â (Node&amp;lt;K,V&amp;gt;)U.getObjectVolatile(tab,Â ((&lt;span&gt;long&lt;/span&gt;)iÂ &amp;lt;&amp;lt;Â ASHIFT)Â +Â ABASE);&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;| JDK1.7ä¸1.8çš„ä¸åŒå®ç°&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;JDK1.7çš„ConcurrentHashMapåº•å±‚æ•°æ®ç»“æ„ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4710017574692443&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/eQPyBffYbue50Evic8ia9ibIeD4eBicfrLnbZAKzgy0lNib5APggvBg0DmFBFBKic1839nWUAo8Peib2mByDoFENyry6A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2276&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­1.7çš„å®ç°ä¹ŸåŒæ ·é‡‡ç”¨äº†åˆ†æ®µé”çš„æŠ€æœ¯ï¼Œåªä¸è¿‡å¤šä¸ªä¸€ä¸ªsegmentï¼Œä¸€ä¸ªsegmenté‡Œå¯¹åº”ä¸€ä¸ªå°HashMapï¼Œå…¶ä¸­segmentç»§æ‰¿äº†ReentrantLockï¼Œå……å½“äº†é”çš„è§’è‰²ï¼Œä¸€æŠŠé”é”ä¸€ä¸ªå°HashMapï¼ˆç›¸å½“äºå¤šä¸ªNodeï¼‰ï¼Œä»1.8çš„å®ç°æ¥çœ‹ï¼Œ é”çš„ç²’åº¦ä»å¤šä¸ªNodeçº§åˆ«åˆå‡å°åˆ°ä¸€ä¸ªNodeçº§åˆ«ï¼Œå†åº¦å‡å°é”ç«äº‰ï¼Œå‡å°ç¨‹åºåŒæ­¥çš„éƒ¨åˆ†ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;| æ€»ç»“&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;&lt;section&gt;ä¸å¾—ä¸è¯´ï¼Œå¤§å¸ˆå°†CASæ“ä½œè¿ç”¨çš„æ·‹æ¼“å°½è‡´ï¼Œç›¸ä¿¡ç†è§£äº†ä»¥ä¸Šæºç çš„è¯»è€…ä¹Ÿå¯ä»¥å­¦ä¹ åˆ°å¤§å¸ˆæ‰€è¿ç”¨çš„å¹¶å‘æŠ€å·§ï¼Œä¸ä»…ä»…æ˜¯åœ¨ConcurrentHashMapä¸­ï¼Œå…¶å®åœ¨å¤§éƒ¨åˆ†JUCçš„æºç ä¸­å¾ˆå¤šå¹¶å‘æ€æƒ³å¾ˆå€¼å¾—æˆ‘ä»¬å»é˜…è¯»ã€å­¦ä¹ ã€‚&lt;/section&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;blockquote class=&quot;js_blockquote_wrap&quot; data-type=&quot;2&quot; data-url=&quot;&quot; data-author-name=&quot;&quot; data-content-utf8-length=&quot;68&quot; data-source-title=&quot;&quot;&gt;&lt;section class=&quot;js_blockquote_digest&quot;&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;è½¬è‡ªï¼šStatic_lin&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é“¾æ¥ï¼š&lt;/span&gt;&lt;span&gt;blog.csdn.net/qq_41737716/article/details/90549847&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;- EOF -&lt;/span&gt;&lt;/p&gt;&lt;section donone=&quot;shifuMouseDownCard(&#x27;shifu_c_030&#x27;)&quot; label=&quot;Copyright Reserved by PLAYHUDONG.&quot;&gt;&lt;section&gt;&lt;span&gt;æ¨èé˜…è¯»&lt;/span&gt;Â Â &lt;span&gt;ç‚¹å‡»æ ‡é¢˜å¯è·³è½¬&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;amp;mid=2651503297&amp;amp;idx=2&amp;amp;sn=5f19e03d6b86789b3b28af5cee97d1e9&amp;amp;chksm=bd25d6be8a525fa8b8d16745d3454ddc4aa562571964d88eb9fd4e2cb274f8a9ae806bf0b3d5&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ä¸€ä¸ª HashMap è·Ÿé¢è¯•å®˜æ‰¯äº†åŠä¸ªå°æ—¶&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;11&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;ä¸€ä¸ª HashMap è·Ÿé¢è¯•å®˜æ‰¯äº†åŠä¸ªå°æ—¶&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;amp;mid=2651499697&amp;amp;idx=1&amp;amp;sn=d8f1e641d62e87009cfe0dfd88d45a6b&amp;amp;chksm=bd25c0ce8a5249d89dd61078d67722178c3ddc16c6bb531040ca5f5108ffb344d1067db39804&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼ŒHashMapä¸ºä»€ä¹ˆä¼šå‡ºç°æ­»å¾ªç¯ï¼Ÿ&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ï¼ŒHashMapä¸ºä»€ä¹ˆä¼šå‡ºç°æ­»å¾ªç¯ï¼Ÿ&lt;/a&gt;&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;çœ‹å®Œæœ¬æ–‡æœ‰æ”¶è·ï¼Ÿè¯·è½¬å‘åˆ†äº«ç»™æ›´å¤šäºº&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;å…³æ³¨ã€ŒImportNewã€ï¼Œæå‡JavaæŠ€èƒ½&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.9166666666666666&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;600&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;span&gt;ç‚¹èµå’Œåœ¨çœ‹å°±æ˜¯æœ€å¤§çš„æ”¯æŒ&lt;/span&gt;&lt;span&gt;â¤ï¸&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>0dc3ebf38ba4e8326ebb9df6a7a9af5d</guid>
<title>ä¸€ç¯‡æ–‡ç« æ¢³ç†æ¸…æ¥š Python å¤šçº¿ç¨‹ä¸å¤šè¿›ç¨‹</title>
<link>https://toutiao.io/k/w99c5yy</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å­¦ä¹ Pythonçš„è¿‡ç¨‹ä¸­ï¼Œæœ‰æ¥è§¦åˆ°å¤šçº¿ç¨‹ç¼–ç¨‹ç›¸å…³çš„çŸ¥è¯†ç‚¹ï¼Œå…ˆå‰ä¸€ç›´éƒ½æ²¡æœ‰å½»åº•çš„ææ˜ç™½ã€‚ä»Šå¤©å‡†å¤‡èŠ±ä¸€äº›æ—¶é—´ï¼ŒæŠŠé‡Œé¢çš„ç»†èŠ‚å°½å¯èƒ½çš„æ¢³ç†æ¸…æ¥šã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;çº¿ç¨‹ä¸è¿›ç¨‹çš„åŒºåˆ«&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿›ç¨‹ï¼ˆprocessï¼‰å’Œçº¿ç¨‹ï¼ˆthreadï¼‰æ˜¯æ“ä½œç³»ç»Ÿçš„åŸºæœ¬æ¦‚å¿µï¼Œä½†æ˜¯å®ƒä»¬æ¯”è¾ƒæŠ½è±¡ï¼Œä¸å®¹æ˜“æŒæ¡ã€‚å…³äºå¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹ï¼Œæ•™ç§‘ä¹¦ä¸Šæœ€ç»å…¸çš„ä¸€å¥è¯æ˜¯â€œ&lt;strong&gt;è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹æ˜¯CPUè°ƒåº¦çš„æœ€å°å•ä½&lt;/strong&gt;â€ã€‚çº¿ç¨‹æ˜¯ç¨‹åºä¸­ä¸€ä¸ªå•ä¸€çš„é¡ºåºæ§åˆ¶æµç¨‹ã€‚è¿›ç¨‹å†…ä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„ã€å¯è°ƒåº¦çš„æ‰§è¡Œå•å…ƒï¼Œæ˜¯ç³»ç»Ÿç‹¬ç«‹è°ƒåº¦å’Œåˆ†æ´¾CPUçš„åŸºæœ¬å•ä½æŒ‡è¿è¡Œä¸­çš„ç¨‹åºçš„è°ƒåº¦å•ä½ã€‚åœ¨å•ä¸ªç¨‹åºä¸­åŒæ—¶è¿è¡Œå¤šä¸ªçº¿ç¨‹å®Œæˆä¸åŒçš„å·¥ä½œï¼Œç§°ä¸ºå¤šçº¿ç¨‹ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;505096844&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/fhujzoQe7TrMS1mPJIK4ia993XvTmTMY9XtH72pDgVAUeHBencejF7t9hRCXfbZGSBEljszuZVb3vs5mezEYUgg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;500&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;strong&gt;è¿›ç¨‹å’Œçº¿ç¨‹åŒºåˆ«&lt;/strong&gt;&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„åŸºæœ¬å•ä½ã€‚æ‰€æœ‰ä¸è¯¥è¿›ç¨‹æœ‰å…³çš„èµ„æºï¼Œéƒ½è¢«è®°å½•åœ¨è¿›ç¨‹æ§åˆ¶å—PCBä¸­ã€‚ä»¥è¡¨ç¤ºè¯¥è¿›ç¨‹æ‹¥æœ‰è¿™äº›èµ„æºæˆ–æ­£åœ¨ä½¿ç”¨å®ƒä»¬ã€‚å¦å¤–ï¼Œè¿›ç¨‹ä¹Ÿæ˜¯æŠ¢å å¤„ç†æœºçš„è°ƒåº¦å•ä½ï¼Œå®ƒæ‹¥æœ‰ä¸€ä¸ªå®Œæ•´çš„è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚å½“è¿›ç¨‹å‘ç”Ÿè°ƒåº¦æ—¶ï¼Œä¸åŒçš„è¿›ç¨‹æ‹¥æœ‰ä¸åŒçš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œè€ŒåŒä¸€è¿›ç¨‹å†…çš„ä¸åŒçº¿ç¨‹å…±äº«åŒä¸€åœ°å€ç©ºé—´ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸è¿›ç¨‹ç›¸å¯¹åº”ï¼Œçº¿ç¨‹ä¸èµ„æºåˆ†é…æ— å…³ï¼Œå®ƒå±äºæŸä¸€ä¸ªè¿›ç¨‹ï¼Œå¹¶ä¸è¿›ç¨‹å†…çš„å…¶ä»–çº¿ç¨‹ä¸€èµ·å…±äº«è¿›ç¨‹çš„èµ„æºã€‚çº¿ç¨‹åªç”±ç›¸å…³å †æ ˆï¼ˆç³»ç»Ÿæ ˆæˆ–ç”¨æˆ·æ ˆï¼‰å¯„å­˜å™¨å’Œçº¿ç¨‹æ§åˆ¶è¡¨TCBç»„æˆã€‚å¯„å­˜å™¨å¯è¢«ç”¨æ¥å­˜å‚¨çº¿ç¨‹å†…çš„å±€éƒ¨å˜é‡ï¼Œä½†ä¸èƒ½å­˜å‚¨å…¶ä»–çº¿ç¨‹çš„ç›¸å…³å˜é‡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šå¸¸åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥åŒ…å«è‹¥å¹²ä¸ªçº¿ç¨‹ï¼Œå®ƒä»¬å¯ä»¥åˆ©ç”¨è¿›ç¨‹æ‰€æ‹¥æœ‰çš„èµ„æºã€‚åœ¨å¼•å…¥çº¿ç¨‹çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œé€šå¸¸éƒ½æ˜¯æŠŠè¿›ç¨‹ä½œä¸ºåˆ†é…èµ„æºçš„åŸºæœ¬å•ä½ï¼Œè€ŒæŠŠçº¿ç¨‹ä½œä¸ºç‹¬ç«‹è¿è¡Œå’Œç‹¬ç«‹è°ƒåº¦çš„åŸºæœ¬å•ä½ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±äºçº¿ç¨‹æ¯”è¿›ç¨‹æ›´å°ï¼ŒåŸºæœ¬ä¸Šä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼Œæ•…å¯¹å®ƒçš„è°ƒåº¦æ‰€ä»˜å‡ºçš„å¼€é”€å°±ä¼šå°å¾—å¤šï¼Œèƒ½æ›´é«˜æ•ˆçš„æé«˜ç³»ç»Ÿå†…å¤šä¸ªç¨‹åºé—´å¹¶å‘æ‰§è¡Œçš„ç¨‹åº¦ï¼Œä»è€Œæ˜¾è‘—æé«˜ç³»ç»Ÿèµ„æºçš„åˆ©ç”¨ç‡å’Œååé‡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å› è€Œè¿‘å¹´æ¥æ¨å‡ºçš„é€šç”¨æ“ä½œç³»ç»Ÿéƒ½å¼•å…¥äº†çº¿ç¨‹ï¼Œä»¥ä¾¿è¿›ä¸€æ­¥æé«˜ç³»ç»Ÿçš„å¹¶å‘æ€§ï¼Œå¹¶æŠŠå®ƒè§†ä¸ºç°ä»£æ“ä½œç³»ç»Ÿçš„ä¸€ä¸ªé‡è¦æŒ‡æ ‡ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;505096841&quot; data-ratio=&quot;0.5491573033707865&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/fhujzoQe7TrMS1mPJIK4ia993XvTmTMY97Fguv1J3EVOhfVe6g93kkaOFMG8gFBSTtESBRKJnrJTnLEibMvvS9BA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;712&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çº¿ç¨‹ä¸è¿›ç¨‹çš„åŒºåˆ«å¯ä»¥å½’çº³ä¸ºä»¥ä¸‹4ç‚¹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;åœ°å€ç©ºé—´å’Œå…¶å®ƒèµ„æºï¼ˆå¦‚æ‰“å¼€æ–‡ä»¶ï¼‰ï¼šè¿›ç¨‹é—´ç›¸äº’ç‹¬ç«‹ï¼ŒåŒä¸€è¿›ç¨‹çš„å„çº¿ç¨‹é—´å…±äº«ã€‚æŸè¿›ç¨‹å†…çš„çº¿ç¨‹åœ¨å…¶å®ƒè¿›ç¨‹ä¸å¯è§ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;é€šä¿¡ï¼šè¿›ç¨‹é—´é€šä¿¡IPCï¼Œçº¿ç¨‹é—´å¯ä»¥ç›´æ¥è¯»å†™è¿›ç¨‹æ•°æ®æ®µï¼ˆå¦‚å…¨å±€å˜é‡ï¼‰æ¥è¿›è¡Œé€šä¿¡â€”â€”éœ€è¦è¿›ç¨‹åŒæ­¥å’Œäº’æ–¥æ‰‹æ®µçš„è¾…åŠ©ï¼Œä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;è°ƒåº¦å’Œåˆ‡æ¢ï¼šçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢æ¯”è¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢è¦å¿«å¾—å¤šã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;åœ¨å¤šçº¿ç¨‹OSä¸­ï¼Œè¿›ç¨‹ä¸æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œçš„å®ä½“ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;strong&gt;å¤šè¿›ç¨‹å’Œå¤šçº¿ç¨‹çš„æ¯”è¾ƒ&lt;/strong&gt;&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;strong&gt;å¯¹æ¯”ç»´åº¦&lt;/strong&gt;&lt;/th&gt;&lt;th&gt;&lt;strong&gt;å¤šè¿›ç¨‹&lt;/strong&gt;&lt;/th&gt;&lt;th&gt;&lt;strong&gt;å¤šçº¿ç¨‹&lt;/strong&gt;&lt;/th&gt;&lt;th&gt;&lt;strong&gt;æ€»ç»“&lt;/strong&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;æ•°æ®å…±äº«ã€åŒæ­¥&lt;/td&gt;&lt;td&gt;æ•°æ®å…±äº«å¤æ‚ï¼ŒåŒæ­¥ç®€å•&lt;/td&gt;&lt;td&gt;æ•°æ®å…±äº«ç®€å•ï¼ŒåŒæ­¥å¤æ‚&lt;/td&gt;&lt;td&gt;å„æœ‰ä¼˜åŠ£&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;å†…å­˜ã€CPU&lt;/td&gt;&lt;td&gt;å ç”¨å†…å­˜å¤šï¼Œåˆ‡æ¢å¤æ‚ï¼ŒCPUåˆ©ç”¨ç‡ä½&lt;/td&gt;&lt;td&gt;å ç”¨å†…å­˜å°‘ï¼Œåˆ‡æ¢ç®€å•ï¼ŒCPUåˆ©ç”¨ç‡é«˜&lt;/td&gt;&lt;td&gt;çº¿ç¨‹å ä¼˜&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;åˆ›å»ºã€é”€æ¯ã€åˆ‡æ¢&lt;/td&gt;&lt;td&gt;å¤æ‚ï¼Œé€Ÿåº¦æ…¢&lt;/td&gt;&lt;td&gt;ç®€å•ï¼Œé€Ÿåº¦å¿«&lt;/td&gt;&lt;td&gt;çº¿ç¨‹å ä¼˜&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;ç¼–ç¨‹ã€è°ƒè¯•&lt;/td&gt;&lt;td&gt;ç¼–ç¨‹ç®€å•ï¼Œè°ƒè¯•ç®€å•&lt;/td&gt;&lt;td&gt;ç¼–ç¨‹å¤æ‚ï¼Œè°ƒè¯•å¤æ‚&lt;/td&gt;&lt;td&gt;è¿›ç¨‹å ä¼˜&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;å¯é æ€§&lt;/td&gt;&lt;td&gt;è¿›ç¨‹é—´ä¸ä¼šäº’ç›¸å½±å“&lt;/td&gt;&lt;td&gt;ä¸€ä¸ªçº¿ç¨‹æŒ‚æ‰å°†å¯¼è‡´æ•´ä¸ªè¿›ç¨‹æŒ‚æ‰&lt;/td&gt;&lt;td&gt;è¿›ç¨‹å ä¼˜&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;åˆ†å¸ƒå¼&lt;/td&gt;&lt;td&gt;é€‚ç”¨äºå¤šæ ¸ã€å¤šæœºï¼Œæ‰©å±•åˆ°å¤šå°æœºå™¨ç®€å•&lt;/td&gt;&lt;td&gt;é€‚åˆäºå¤šæ ¸&lt;/td&gt;&lt;td&gt;è¿›ç¨‹å ä¼˜&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ€»ç»“ï¼Œè¿›ç¨‹å’Œçº¿ç¨‹è¿˜å¯ä»¥ç±»æ¯”ä¸ºç«è½¦å’Œè½¦å¢ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;çº¿ç¨‹åœ¨è¿›ç¨‹ä¸‹è¡Œè¿›ï¼ˆå•çº¯çš„è½¦å¢æ— æ³•è¿è¡Œï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸€ä¸ªè¿›ç¨‹å¯ä»¥åŒ…å«å¤šä¸ªçº¿ç¨‹ï¼ˆä¸€è¾†ç«è½¦å¯ä»¥æœ‰å¤šä¸ªè½¦å¢ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸åŒè¿›ç¨‹é—´æ•°æ®å¾ˆéš¾å…±äº«ï¼ˆä¸€è¾†ç«è½¦ä¸Šçš„ä¹˜å®¢å¾ˆéš¾æ¢åˆ°å¦å¤–ä¸€è¾†ç«è½¦ï¼Œæ¯”å¦‚ç«™ç‚¹æ¢ä¹˜ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åŒä¸€è¿›ç¨‹ä¸‹ä¸åŒçº¿ç¨‹é—´æ•°æ®å¾ˆæ˜“å…±äº«ï¼ˆAè½¦å¢æ¢åˆ°Bè½¦å¢å¾ˆå®¹æ˜“ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è¿›ç¨‹è¦æ¯”çº¿ç¨‹æ¶ˆè€—æ›´å¤šçš„è®¡ç®—æœºèµ„æºï¼ˆé‡‡ç”¨å¤šåˆ—ç«è½¦ç›¸æ¯”å¤šä¸ªè½¦å¢æ›´è€—èµ„æºï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è¿›ç¨‹é—´ä¸ä¼šç›¸äº’å½±å“ï¼Œä¸€ä¸ªçº¿ç¨‹æŒ‚æ‰å°†å¯¼è‡´æ•´ä¸ªè¿›ç¨‹æŒ‚æ‰ï¼ˆä¸€åˆ—ç«è½¦ä¸ä¼šå½±å“åˆ°å¦å¤–ä¸€åˆ—ç«è½¦ï¼Œä½†æ˜¯å¦‚æœä¸€åˆ—ç«è½¦ä¸Šä¸­é—´çš„ä¸€èŠ‚è½¦å¢ç€ç«äº†ï¼Œå°†å½±å“åˆ°è¯¥è¶Ÿç«è½¦çš„æ‰€æœ‰è½¦å¢ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è¿›ç¨‹å¯ä»¥æ‹“å±•åˆ°å¤šæœºï¼Œè¿›ç¨‹æœ€å¤šé€‚åˆå¤šæ ¸ï¼ˆä¸åŒç«è½¦å¯ä»¥å¼€åœ¨å¤šä¸ªè½¨é“ä¸Šï¼ŒåŒä¸€ç«è½¦çš„è½¦å¢ä¸èƒ½åœ¨è¡Œè¿›çš„ä¸åŒçš„è½¨é“ä¸Šï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è¿›ç¨‹ä½¿ç”¨çš„å†…å­˜åœ°å€å¯ä»¥ä¸Šé”ï¼Œå³ä¸€ä¸ªçº¿ç¨‹ä½¿ç”¨æŸäº›å…±äº«å†…å­˜æ—¶ï¼Œå…¶ä»–çº¿ç¨‹å¿…é¡»ç­‰å®ƒç»“æŸï¼Œæ‰èƒ½ä½¿ç”¨è¿™ä¸€å—å†…å­˜ã€‚ï¼ˆæ¯”å¦‚ç«è½¦ä¸Šçš„æ´—æ‰‹é—´ï¼‰ï¼â€äº’æ–¥é”ï¼ˆmutexï¼‰â€&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è¿›ç¨‹ä½¿ç”¨çš„å†…å­˜åœ°å€å¯ä»¥é™å®šä½¿ç”¨é‡ï¼ˆæ¯”å¦‚ç«è½¦ä¸Šçš„é¤å…ï¼Œæœ€å¤šåªå…è®¸å¤šå°‘äººè¿›å…¥ï¼Œå¦‚æœæ»¡äº†éœ€è¦åœ¨é—¨å£ç­‰ï¼Œç­‰æœ‰äººå‡ºæ¥äº†æ‰èƒ½è¿›å»ï¼‰ï¼â€œä¿¡å·é‡ï¼ˆsemaphoreï¼‰â€&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Pythonå…¨å±€è§£é‡Šå™¨é”GIL&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¨å±€è§£é‡Šå™¨é”ï¼ˆè‹±è¯­ï¼šGlobal Interpreter Lockï¼Œç¼©å†™GILï¼‰ï¼Œå¹¶ä¸æ˜¯Pythonçš„ç‰¹æ€§ï¼Œå®ƒæ˜¯åœ¨å®ç°Pythonè§£æå™¨ï¼ˆCPythonï¼‰æ—¶æ‰€å¼•å…¥çš„ä¸€ä¸ªæ¦‚å¿µã€‚ç”±äºCPythonæ˜¯å¤§éƒ¨åˆ†ç¯å¢ƒä¸‹é»˜è®¤çš„Pythonæ‰§è¡Œç¯å¢ƒã€‚æ‰€ä»¥åœ¨å¾ˆå¤šäººçš„æ¦‚å¿µé‡ŒCPythonå°±æ˜¯Pythonï¼Œä¹Ÿå°±æƒ³å½“ç„¶çš„æŠŠGILå½’ç»“ä¸ºPythonè¯­è¨€çš„ç¼ºé™·ã€‚é‚£ä¹ˆCPythonå®ç°ä¸­çš„GILåˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ¥çœ‹çœ‹å®˜æ–¹çš„è§£é‡Šï¼š&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;The mechanism used by the CPython interpreter to assure that only one thread executes Python bytecode at a time. This simplifies the CPython implementation by making the object model (including critical built-in types such as dict) implicitly safe against concurrent access. Locking the entire interpreter makes it easier for the interpreter to be multi-threaded, at the expense of much of the parallelism afforded by multi-processor machines.&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Pythonä»£ç çš„æ‰§è¡Œç”±Python è™šæ‹Ÿæœº(ä¹Ÿå«è§£é‡Šå™¨ä¸»å¾ªç¯ï¼ŒCPythonç‰ˆæœ¬)æ¥æ§åˆ¶ï¼ŒPython åœ¨è®¾è®¡ä¹‹åˆå°±è€ƒè™‘åˆ°è¦åœ¨è§£é‡Šå™¨çš„ä¸»å¾ªç¯ä¸­ï¼ŒåŒæ—¶åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨æ‰§è¡Œï¼Œå³åœ¨ä»»æ„æ—¶åˆ»ï¼Œåªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è§£é‡Šå™¨ä¸­è¿è¡Œã€‚å¯¹Python è™šæ‹Ÿæœºçš„è®¿é—®ç”±å…¨å±€è§£é‡Šå™¨é”ï¼ˆGILï¼‰æ¥æ§åˆ¶ï¼Œæ­£æ˜¯è¿™ä¸ªé”èƒ½ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹åœ¨è¿è¡Œã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;505096845&quot; data-ratio=&quot;0.7057142857142857&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/fhujzoQe7TrMS1mPJIK4ia993XvTmTMY9QfiaKYiasPzLWmOW61lDjzQia1SQibY9ZPhtucdmCwGaWCdovpkou0MuMw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1400&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;GIL æœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿç®€å•æ¥è¯´ï¼Œå®ƒåœ¨å•çº¿ç¨‹çš„æƒ…å†µæ›´å¿«ï¼Œå¹¶ä¸”åœ¨å’Œ C åº“ç»“åˆæ—¶æ›´æ–¹ä¾¿ï¼Œè€Œä¸”ä¸ç”¨è€ƒè™‘çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œè¿™ä¹Ÿæ˜¯æ—©æœŸ Python æœ€å¸¸è§çš„åº”ç”¨åœºæ™¯å’Œä¼˜åŠ¿ã€‚å¦å¤–ï¼ŒGILçš„è®¾è®¡ç®€åŒ–äº†CPythonçš„å®ç°ï¼Œä½¿å¾—å¯¹è±¡æ¨¡å‹ï¼ŒåŒ…æ‹¬å…³é”®çš„å†…å»ºç±»å‹å¦‚å­—å…¸ï¼Œéƒ½æ˜¯éšå«å¯ä»¥å¹¶å‘è®¿é—®çš„ã€‚é”ä½å…¨å±€è§£é‡Šå™¨ä½¿å¾—æ¯”è¾ƒå®¹æ˜“çš„å®ç°å¯¹å¤šçº¿ç¨‹çš„æ”¯æŒï¼Œä½†ä¹ŸæŸå¤±äº†å¤šå¤„ç†å™¨ä¸»æœºçš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­ï¼ŒPython è™šæ‹ŸæœºæŒ‰ä»¥ä¸‹æ–¹å¼æ‰§è¡Œï¼š&lt;/p&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;è®¾ç½®GIL&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åˆ‡æ¢åˆ°ä¸€ä¸ªçº¿ç¨‹å»è¿è¡Œ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è¿è¡Œç›´è‡³æŒ‡å®šæ•°é‡çš„å­—èŠ‚ç æŒ‡ä»¤ï¼Œæˆ–è€…çº¿ç¨‹ä¸»åŠ¨è®©å‡ºæ§åˆ¶ï¼ˆå¯ä»¥è°ƒç”¨sleep(0)ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æŠŠçº¿ç¨‹è®¾ç½®ä¸ºç¡çœ çŠ¶æ€&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è§£é”GIL&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;å†æ¬¡é‡å¤ä»¥ä¸Šæ‰€æœ‰æ­¥éª¤&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;505096843&quot; data-ratio=&quot;0.5616438356164384&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/fhujzoQe7TrMS1mPJIK4ia993XvTmTMY92OJSwaFFUiaPvzjxebr1yEic2PpkjVIvibDfhpv2Bwo8z8hHEgOG3iasZA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1168&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Python3.2å‰ï¼ŒGILçš„é‡Šæ”¾é€»è¾‘æ˜¯å½“å‰çº¿ç¨‹é‡è§IOæ“ä½œæˆ–è€…ticksè®¡æ•°è¾¾åˆ°100ï¼ˆtickså¯ä»¥çœ‹ä½œæ˜¯pythonè‡ªèº«çš„ä¸€ä¸ªè®¡æ•°å™¨ï¼Œä¸“é—¨åšç”¨äºGILï¼Œæ¯æ¬¡é‡Šæ”¾åå½’é›¶ï¼Œè¿™ä¸ªè®¡æ•°å¯ä»¥é€šè¿‡ sys.setcheckinterval æ¥è°ƒæ•´ï¼‰ï¼Œè¿›è¡Œé‡Šæ”¾ã€‚å› ä¸ºè®¡ç®—å¯†é›†å‹çº¿ç¨‹åœ¨é‡Šæ”¾GILä¹‹ååˆä¼šç«‹å³å»ç”³è¯·GILï¼Œå¹¶ä¸”é€šå¸¸åœ¨å…¶å®ƒçº¿ç¨‹è¿˜æ²¡æœ‰è°ƒåº¦å®Œä¹‹å‰å®ƒå°±å·²ç»é‡æ–°è·å–åˆ°äº†GILï¼Œå°±ä¼šå¯¼è‡´ä¸€æ—¦è®¡ç®—å¯†é›†å‹çº¿ç¨‹è·å¾—äº†GILï¼Œé‚£ä¹ˆå®ƒåœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…éƒ½å°†å æ®GILï¼Œç”šè‡³ä¸€ç›´åˆ°è¯¥çº¿ç¨‹æ‰§è¡Œç»“æŸã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Python 3.2å¼€å§‹ä½¿ç”¨æ–°çš„GILã€‚æ–°çš„GILå®ç°ä¸­ç”¨ä¸€ä¸ªå›ºå®šçš„è¶…æ—¶æ—¶é—´æ¥æŒ‡ç¤ºå½“å‰çš„çº¿ç¨‹æ”¾å¼ƒå…¨å±€é”ã€‚åœ¨å½“å‰çº¿ç¨‹ä¿æŒè¿™ä¸ªé”ï¼Œä¸”å…¶ä»–çº¿ç¨‹è¯·æ±‚è¿™ä¸ªé”æ—¶ï¼Œå½“å‰çº¿ç¨‹å°±ä¼šåœ¨5æ¯«ç§’åè¢«å¼ºåˆ¶é‡Šæ”¾è¯¥é”ã€‚è¯¥æ”¹è¿›åœ¨å•æ ¸çš„æƒ…å†µä¸‹ï¼Œå¯¹äºå•ä¸ªçº¿ç¨‹é•¿æœŸå ç”¨GILçš„æƒ…å†µæœ‰æ‰€å¥½è½¬ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å•æ ¸CPUä¸Šï¼Œæ•°ç™¾æ¬¡çš„é—´éš”æ£€æŸ¥æ‰ä¼šå¯¼è‡´ä¸€æ¬¡çº¿ç¨‹åˆ‡æ¢ã€‚åœ¨å¤šæ ¸CPUä¸Šï¼Œå­˜åœ¨ä¸¥é‡çš„çº¿ç¨‹é¢ ç°¸ï¼ˆthrashingï¼‰ã€‚è€Œæ¯æ¬¡é‡Šæ”¾GILé”ï¼Œçº¿ç¨‹è¿›è¡Œé”ç«äº‰ã€åˆ‡æ¢çº¿ç¨‹ï¼Œä¼šæ¶ˆè€—èµ„æºã€‚å•æ ¸ä¸‹å¤šçº¿ç¨‹ï¼Œæ¯æ¬¡é‡Šæ”¾GILï¼Œå”¤é†’çš„é‚£ä¸ªçº¿ç¨‹éƒ½èƒ½è·å–åˆ°GILé”ï¼Œæ‰€ä»¥èƒ½å¤Ÿæ— ç¼æ‰§è¡Œï¼Œä½†å¤šæ ¸ä¸‹ï¼ŒCPU0é‡Šæ”¾GILåï¼Œå…¶ä»–CPUä¸Šçš„çº¿ç¨‹éƒ½ä¼šè¿›è¡Œç«äº‰ï¼Œä½†GILå¯èƒ½ä¼šé©¬ä¸Šåˆè¢«CPU0æ‹¿åˆ°ï¼Œå¯¼è‡´å…¶ä»–å‡ ä¸ªCPUä¸Šè¢«å”¤é†’åçš„çº¿ç¨‹ä¼šé†’ç€ç­‰å¾…åˆ°åˆ‡æ¢æ—¶é—´ååˆè¿›å…¥å¾…è°ƒåº¦çŠ¶æ€ï¼Œè¿™æ ·ä¼šé€ æˆçº¿ç¨‹é¢ ç°¸(thrashing)ï¼Œå¯¼è‡´æ•ˆç‡æ›´ä½ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦å¤–ï¼Œä»ä¸Šé¢çš„å®ç°æœºåˆ¶å¯ä»¥æ¨å¯¼å‡ºï¼ŒPythonçš„å¤šçº¿ç¨‹å¯¹IOå¯†é›†å‹ä»£ç è¦æ¯”CPUå¯†é›†å‹ä»£ç æ›´åŠ å‹å¥½ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é’ˆå¯¹GILçš„åº”å¯¹æªæ–½ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ä½¿ç”¨æ›´é«˜ç‰ˆæœ¬Pythonï¼ˆå¯¹GILæœºåˆ¶è¿›è¡Œäº†ä¼˜åŒ–ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä½¿ç”¨å¤šè¿›ç¨‹æ›¿æ¢å¤šçº¿ç¨‹ï¼ˆå¤šè¿›ç¨‹ä¹‹é—´æ²¡æœ‰GILï¼Œä½†æ˜¯è¿›ç¨‹æœ¬èº«çš„èµ„æºæ¶ˆè€—è¾ƒå¤šï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æŒ‡å®šcpuè¿è¡Œçº¿ç¨‹ï¼ˆä½¿ç”¨affinityæ¨¡å—ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä½¿ç”¨Jythonã€IronPythonç­‰æ— GILè§£é‡Šå™¨&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å…¨IOå¯†é›†å‹ä»»åŠ¡æ—¶æ‰ä½¿ç”¨å¤šçº¿ç¨‹&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä½¿ç”¨åç¨‹ï¼ˆé«˜æ•ˆçš„å•çº¿ç¨‹æ¨¡å¼ï¼Œä¹Ÿç§°å¾®çº¿ç¨‹ï¼›é€šå¸¸ä¸å¤šè¿›ç¨‹é…åˆä½¿ç”¨ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å°†å…³é”®ç»„ä»¶ç”¨C/C++ç¼–å†™ä¸ºPythonæ‰©å±•ï¼Œé€šè¿‡ctypesä½¿Pythonç¨‹åºç›´æ¥è°ƒç”¨Cè¯­è¨€ç¼–è¯‘çš„åŠ¨æ€é“¾æ¥åº“çš„å¯¼å‡ºå‡½æ•°ã€‚ï¼ˆwith nogilè°ƒå‡ºGILé™åˆ¶ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Pythonçš„å¤šè¿›ç¨‹åŒ…multiprocessing&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Pythonçš„threadingåŒ…ä¸»è¦è¿ç”¨å¤šçº¿ç¨‹çš„å¼€å‘ï¼Œä½†ç”±äºGILçš„å­˜åœ¨ï¼ŒPythonä¸­çš„å¤šçº¿ç¨‹å…¶å®å¹¶ä¸æ˜¯çœŸæ­£çš„å¤šçº¿ç¨‹ï¼Œå¦‚æœæƒ³è¦å……åˆ†åœ°ä½¿ç”¨å¤šæ ¸CPUçš„èµ„æºï¼Œå¤§éƒ¨åˆ†æƒ…å†µéœ€è¦ä½¿ç”¨å¤šè¿›ç¨‹ã€‚åœ¨Python 2.6ç‰ˆæœ¬çš„æ—¶å€™å¼•å…¥äº†multiprocessingåŒ…ï¼Œå®ƒå®Œæ•´çš„å¤åˆ¶äº†ä¸€å¥—threadingæ‰€æä¾›çš„æ¥å£æ–¹ä¾¿è¿ç§»ã€‚å”¯ä¸€çš„ä¸åŒå°±æ˜¯å®ƒä½¿ç”¨äº†å¤šè¿›ç¨‹è€Œä¸æ˜¯å¤šçº¿ç¨‹ã€‚æ¯ä¸ªè¿›ç¨‹æœ‰è‡ªå·±çš„ç‹¬ç«‹çš„GILï¼Œå› æ­¤ä¹Ÿä¸ä¼šå‡ºç°è¿›ç¨‹ä¹‹é—´çš„GILäº‰æŠ¢ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å€ŸåŠ©è¿™ä¸ªmultiprocessingï¼Œä½ å¯ä»¥è½»æ¾å®Œæˆä»å•è¿›ç¨‹åˆ°å¹¶å‘æ‰§è¡Œçš„è½¬æ¢ã€‚multiprocessingæ”¯æŒå­è¿›ç¨‹ã€é€šä¿¡å’Œå…±äº«æ•°æ®ã€æ‰§è¡Œä¸åŒå½¢å¼çš„åŒæ­¥ï¼Œæä¾›äº†Processã€Queueã€Pipeã€Lockç­‰ç»„ä»¶ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Multiprocessingäº§ç”Ÿçš„èƒŒæ™¯&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é™¤äº†åº”å¯¹Pythonçš„GILä»¥å¤–ï¼Œäº§ç”Ÿmultiprocessingçš„å¦å¤–ä¸€ä¸ªåŸå› æ—¶Windowsæ“ä½œç³»ç»Ÿä¸Linux/Unixç³»ç»Ÿçš„ä¸ä¸€è‡´ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Unix/Linuxæ“ä½œç³»ç»Ÿæä¾›äº†ä¸€ä¸ªfork()ç³»ç»Ÿè°ƒç”¨ï¼Œå®ƒéå¸¸ç‰¹æ®Šã€‚æ™®é€šçš„å‡½æ•°ï¼Œè°ƒç”¨ä¸€æ¬¡ï¼Œè¿”å›ä¸€æ¬¡ï¼Œä½†æ˜¯fork()è°ƒç”¨ä¸€æ¬¡ï¼Œè¿”å›ä¸¤æ¬¡ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿè‡ªåŠ¨æŠŠå½“å‰è¿›ç¨‹ï¼ˆçˆ¶è¿›ç¨‹ï¼‰å¤åˆ¶äº†ä¸€ä»½ï¼ˆå­è¿›ç¨‹ï¼‰ï¼Œç„¶åï¼Œåˆ†åˆ«åœ¨çˆ¶è¿›ç¨‹å’Œå­è¿›ç¨‹å†…è¿”å›ã€‚å­è¿›ç¨‹æ°¸è¿œè¿”å›0ï¼Œè€Œçˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹çš„IDã€‚è¿™æ ·åšçš„ç†ç”±æ˜¯ï¼Œä¸€ä¸ªçˆ¶è¿›ç¨‹å¯ä»¥forkå‡ºå¾ˆå¤šå­è¿›ç¨‹ï¼Œæ‰€ä»¥ï¼Œçˆ¶è¿›ç¨‹è¦è®°ä¸‹æ¯ä¸ªå­è¿›ç¨‹çš„IDï¼Œè€Œå­è¿›ç¨‹åªéœ€è¦è°ƒç”¨getpid()å°±å¯ä»¥æ‹¿åˆ°çˆ¶è¿›ç¨‹çš„IDã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Pythonçš„osæ¨¡å—å°è£…äº†å¸¸è§çš„ç³»ç»Ÿè°ƒç”¨ï¼Œå…¶ä¸­å°±åŒ…æ‹¬forkï¼Œå¯ä»¥åœ¨Pythonç¨‹åºä¸­è½»æ¾åˆ›å»ºå­è¿›ç¨‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;importÂ os&lt;br/&gt;&lt;br/&gt;&lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;ProcessÂ (%s)Â start...&#x27;&lt;/span&gt;Â %Â os.getpid())&lt;br/&gt;&lt;br/&gt;\&lt;span&gt;#Â OnlyÂ worksÂ onÂ Unix/Linux/Mac:&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;pidÂ =Â os.fork()&lt;br/&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;Â pidÂ ==Â 0:&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;IÂ amÂ childÂ processÂ (%s)Â andÂ myÂ parentÂ isÂ %s.&#x27;&lt;/span&gt;Â %Â (os.getpid(),Â os.getppid()))&lt;br/&gt;&lt;br/&gt;&lt;span&gt;else&lt;/span&gt;:&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;IÂ (%s)Â justÂ createdÂ aÂ childÂ processÂ (%s).&#x27;&lt;/span&gt;Â %Â (os.getpid(),Â pid))&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šè¿°ä»£ç åœ¨Linuxã€Unixå’ŒMacä¸Šçš„æ‰§è¡Œç»“æœä¸ºï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;ProcessÂ (876)Â start...&lt;br/&gt;&lt;br/&gt;IÂ (876)Â justÂ createdÂ aÂ childÂ processÂ (877).&lt;br/&gt;&lt;br/&gt;IÂ amÂ childÂ processÂ (877)Â andÂ myÂ parentÂ isÂ 876.&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰äº†forkè°ƒç”¨ï¼Œä¸€ä¸ªè¿›ç¨‹åœ¨æ¥åˆ°æ–°ä»»åŠ¡æ—¶å°±å¯ä»¥å¤åˆ¶å‡ºä¸€ä¸ªå­è¿›ç¨‹æ¥å¤„ç†æ–°ä»»åŠ¡ï¼Œå¸¸è§çš„ApacheæœåŠ¡å™¨å°±æ˜¯ç”±çˆ¶è¿›ç¨‹ç›‘å¬ç«¯å£ï¼Œæ¯å½“æœ‰æ–°çš„httpè¯·æ±‚æ—¶ï¼Œå°±forkå‡ºå­è¿›ç¨‹æ¥å¤„ç†æ–°çš„httpè¯·æ±‚ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±äºWindowsæ²¡æœ‰forkè°ƒç”¨ï¼Œä¸Šé¢çš„ä»£ç åœ¨Windowsä¸Šæ— æ³•è¿è¡Œã€‚ç”±äºPythonæ˜¯è·¨å¹³å°çš„ï¼Œè‡ªç„¶ä¹Ÿåº”è¯¥æä¾›ä¸€ä¸ªè·¨å¹³å°çš„å¤šè¿›ç¨‹æ”¯æŒã€‚multiprocessingæ¨¡å—å°±æ˜¯è·¨å¹³å°ç‰ˆæœ¬çš„å¤šè¿›ç¨‹æ¨¡å—ã€‚multiprocessingæ¨¡å—å°è£…äº†fork()è°ƒç”¨ï¼Œä½¿æˆ‘ä»¬ä¸éœ€è¦å…³æ³¨fork()çš„ç»†èŠ‚ã€‚ç”±äºWindowsæ²¡æœ‰forkè°ƒç”¨ï¼Œå› æ­¤ï¼Œmultiprocessingéœ€è¦â€œæ¨¡æ‹Ÿâ€å‡ºforkçš„æ•ˆæœã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;multiprocessingå¸¸ç”¨ç»„ä»¶åŠåŠŸèƒ½&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;505096842&quot; data-ratio=&quot;0.5694444444444444&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/fhujzoQe7TrMS1mPJIK4ia993XvTmTMY9ggRRIicXPVeEQhq5vF4ibLEcO9SMqYSbdU0Fsiamv2jbQHZuibSFianOic8w/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;864&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ›å»ºç®¡ç†è¿›ç¨‹æ¨¡å—ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;Processï¼ˆç”¨äºåˆ›å»ºè¿›ç¨‹ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Poolï¼ˆç”¨äºåˆ›å»ºç®¡ç†è¿›ç¨‹æ± ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Queueï¼ˆç”¨äºè¿›ç¨‹é€šä¿¡ï¼Œèµ„æºå…±äº«ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Valueï¼ŒArrayï¼ˆç”¨äºè¿›ç¨‹é€šä¿¡ï¼Œèµ„æºå…±äº«ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Pipeï¼ˆç”¨äºç®¡é“é€šä¿¡ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Managerï¼ˆç”¨äºèµ„æºå…±äº«ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŒæ­¥å­è¿›ç¨‹æ¨¡å—ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;Conditionï¼ˆæ¡ä»¶å˜é‡ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Eventï¼ˆäº‹ä»¶ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Lockï¼ˆäº’æ–¥é”ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;RLockï¼ˆå¯é‡å…¥çš„äº’æ–¥é”(åŒä¸€ä¸ªè¿›ç¨‹å¯ä»¥å¤šæ¬¡è·å¾—å®ƒï¼ŒåŒæ—¶ä¸ä¼šé€ æˆé˜»å¡)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Semaphoreï¼ˆä¿¡å·é‡ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥ä¸‹æ¥å°±ä¸€èµ·æ¥å­¦ä¹ ä¸‹æ¯ä¸ªç»„ä»¶åŠåŠŸèƒ½çš„å…·ä½“ä½¿ç”¨æ–¹æ³•ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Processï¼ˆç”¨äºåˆ›å»ºè¿›ç¨‹ï¼‰&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;multiprocessingæ¨¡å—æä¾›äº†ä¸€ä¸ªProcessç±»æ¥ä»£è¡¨ä¸€ä¸ªè¿›ç¨‹å¯¹è±¡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨multiprocessingä¸­ï¼Œæ¯ä¸€ä¸ªè¿›ç¨‹éƒ½ç”¨ä¸€ä¸ªProcessç±»æ¥è¡¨ç¤ºã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ„é€ æ–¹æ³•ï¼šProcess([group [, target [, name [, args [, kwargs]]]]])&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;groupï¼šåˆ†ç»„ï¼Œå®é™…ä¸Šä¸ä½¿ç”¨ï¼Œå€¼å§‹ç»ˆä¸ºNone&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;targetï¼šè¡¨ç¤ºè°ƒç”¨å¯¹è±¡ï¼Œå³å­è¿›ç¨‹è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œä½ å¯ä»¥ä¼ å…¥æ–¹æ³•å&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;nameï¼šä¸ºå­è¿›ç¨‹è®¾å®šåç§°&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;argsï¼šè¦ä¼ ç»™targetå‡½æ•°çš„ä½ç½®å‚æ•°ï¼Œä»¥å…ƒç»„æ–¹å¼è¿›è¡Œä¼ å…¥ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;kwargsï¼šè¦ä¼ ç»™targetå‡½æ•°çš„å­—å…¸å‚æ•°ï¼Œä»¥å­—å…¸æ–¹å¼è¿›è¡Œä¼ å…¥ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ä¾‹æ–¹æ³•ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;start()ï¼šå¯åŠ¨è¿›ç¨‹ï¼Œå¹¶è°ƒç”¨è¯¥å­è¿›ç¨‹ä¸­çš„p.run()&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;run()ï¼šè¿›ç¨‹å¯åŠ¨æ—¶è¿è¡Œçš„æ–¹æ³•ï¼Œæ­£æ˜¯å®ƒå»è°ƒç”¨targetæŒ‡å®šçš„å‡½æ•°ï¼Œæˆ‘ä»¬è‡ªå®šä¹‰ç±»çš„ç±»ä¸­ä¸€å®šè¦å®ç°è¯¥æ–¹æ³•&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;terminate()ï¼šå¼ºåˆ¶ç»ˆæ­¢è¿›ç¨‹pï¼Œä¸ä¼šè¿›è¡Œä»»ä½•æ¸…ç†æ“ä½œï¼Œå¦‚æœpåˆ›å»ºäº†å­è¿›ç¨‹ï¼Œè¯¥å­è¿›ç¨‹å°±æˆäº†åƒµå°¸è¿›ç¨‹ï¼Œä½¿ç”¨è¯¥æ–¹æ³•éœ€è¦ç‰¹åˆ«å°å¿ƒè¿™ç§æƒ…å†µã€‚å¦‚æœpè¿˜ä¿å­˜äº†ä¸€ä¸ªé”é‚£ä¹ˆä¹Ÿå°†ä¸ä¼šè¢«é‡Šæ”¾ï¼Œè¿›è€Œå¯¼è‡´æ­»é”&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;is_alive()ï¼šè¿”å›è¿›ç¨‹æ˜¯å¦åœ¨è¿è¡Œã€‚å¦‚æœpä»ç„¶è¿è¡Œï¼Œè¿”å›True&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;join([timeout])ï¼šè¿›ç¨‹åŒæ­¥ï¼Œä¸»è¿›ç¨‹ç­‰å¾…å­è¿›ç¨‹å®Œæˆåå†æ‰§è¡Œåé¢çš„ä»£ç ã€‚çº¿ç¨‹ç­‰å¾…pç»ˆæ­¢ï¼ˆå¼ºè°ƒï¼šæ˜¯ä¸»çº¿ç¨‹å¤„äºç­‰çš„çŠ¶æ€ï¼Œè€Œpæ˜¯å¤„äºè¿è¡Œçš„çŠ¶æ€ï¼‰ã€‚timeoutæ˜¯å¯é€‰çš„è¶…æ—¶æ—¶é—´ï¼ˆè¶…è¿‡è¿™ä¸ªæ—¶é—´ï¼Œçˆ¶çº¿ç¨‹ä¸å†ç­‰å¾…å­çº¿ç¨‹ï¼Œç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼‰ï¼Œéœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œp.joinåªèƒ½joinä½startå¼€å¯çš„è¿›ç¨‹ï¼Œè€Œä¸èƒ½joinä½runå¼€å¯çš„è¿›ç¨‹&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å±æ€§ä»‹ç»ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;daemonï¼šé»˜è®¤å€¼ä¸ºFalseï¼Œå¦‚æœè®¾ä¸ºTrueï¼Œä»£è¡¨pä¸ºåå°è¿è¡Œçš„å®ˆæŠ¤è¿›ç¨‹ï¼›å½“pçš„çˆ¶è¿›ç¨‹ç»ˆæ­¢æ—¶ï¼Œpä¹Ÿéšä¹‹ç»ˆæ­¢ï¼Œå¹¶ä¸”è®¾å®šä¸ºTrueåï¼Œpä¸èƒ½åˆ›å»ºè‡ªå·±çš„æ–°è¿›ç¨‹ï¼›å¿…é¡»åœ¨p.start()ä¹‹å‰è®¾ç½®&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;nameï¼šè¿›ç¨‹çš„åç§°&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;pidï¼šè¿›ç¨‹çš„pid&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;exitcodeï¼šè¿›ç¨‹åœ¨è¿è¡Œæ—¶ä¸ºNoneã€å¦‚æœä¸ºâ€“Nï¼Œè¡¨ç¤ºè¢«ä¿¡å·Nç»“æŸ(äº†è§£å³å¯)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;authkeyï¼šè¿›ç¨‹çš„èº«ä»½éªŒè¯é”®,é»˜è®¤æ˜¯ç”±os.urandom()éšæœºç”Ÿæˆçš„32å­—ç¬¦çš„å­—ç¬¦ä¸²ã€‚è¿™ä¸ªé”®çš„ç”¨é€”æ˜¯ä¸ºæ¶‰åŠç½‘ç»œè¿æ¥çš„åº•å±‚è¿›ç¨‹é—´é€šä¿¡æä¾›å®‰å…¨æ€§ï¼Œè¿™ç±»è¿æ¥åªæœ‰åœ¨å…·æœ‰ç›¸åŒçš„èº«ä»½éªŒè¯é”®æ—¶æ‰èƒ½æˆåŠŸï¼ˆäº†è§£å³å¯ï¼‰&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨ç¤ºä¾‹ï¼šï¼ˆæ³¨æ„ï¼šåœ¨windowsä¸­Process()å¿…é¡»æ”¾åˆ°if &lt;strong&gt;name&lt;/strong&gt; == â€˜&lt;strong&gt;main&lt;/strong&gt;â€™:ä¸‹ï¼‰&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;fromÂ multiprocessingÂ importÂ Process&lt;br/&gt;&lt;br/&gt;importÂ os&lt;br/&gt;&lt;br/&gt;defÂ run_proc(name):&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;RunÂ childÂ processÂ %sÂ (%s)...&#x27;&lt;/span&gt;Â %Â (name,Â os.getpid()))&lt;br/&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;Â __name__==&lt;span&gt;&#x27;__main__&#x27;&lt;/span&gt;:&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;ParentÂ processÂ %s.&#x27;&lt;/span&gt;Â %Â os.getpid())&lt;br/&gt;&lt;br/&gt;Â Â Â Â pÂ =Â Process(target=run_proc,Â args=(&lt;span&gt;&#x27;test&#x27;&lt;/span&gt;,))&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;ChildÂ processÂ willÂ start.&#x27;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;Â Â Â Â p.start()&lt;br/&gt;&lt;br/&gt;Â Â Â Â p.join()&lt;br/&gt;&lt;br/&gt;&lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;ChildÂ processÂ end.&#x27;&lt;/span&gt;)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Poolï¼ˆç”¨äºåˆ›å»ºç®¡ç†è¿›ç¨‹æ± ï¼‰&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-fileid=&quot;505096850&quot; data-ratio=&quot;0.4605714285714286&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/fhujzoQe7TrMS1mPJIK4ia993XvTmTMY9P1U35Clr8lUV1dCibv1GEZcD2NomziccxkEdduGCx81GWy1EKcUSgvLg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;875&quot;/&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Poolç±»ç”¨äºéœ€è¦æ‰§è¡Œçš„ç›®æ ‡å¾ˆå¤šï¼Œè€Œæ‰‹åŠ¨é™åˆ¶è¿›ç¨‹æ•°é‡åˆå¤ªç¹çæ—¶ï¼Œå¦‚æœç›®æ ‡å°‘ä¸”ä¸ç”¨æ§åˆ¶è¿›ç¨‹æ•°é‡åˆ™å¯ä»¥ç”¨Processç±»ã€‚Poolå¯ä»¥æä¾›æŒ‡å®šæ•°é‡çš„è¿›ç¨‹ï¼Œä¾›ç”¨æˆ·è°ƒç”¨ï¼Œå½“æœ‰æ–°çš„è¯·æ±‚æäº¤åˆ°Poolä¸­æ—¶ï¼Œå¦‚æœæ± è¿˜æ²¡æœ‰æ»¡ï¼Œé‚£ä¹ˆå°±ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ç”¨æ¥æ‰§è¡Œè¯¥è¯·æ±‚ï¼›ä½†å¦‚æœæ± ä¸­çš„è¿›ç¨‹æ•°å·²ç»è¾¾åˆ°è§„å®šæœ€å¤§å€¼ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚å°±ä¼šç­‰å¾…ï¼Œç›´åˆ°æ± ä¸­æœ‰è¿›ç¨‹ç»“æŸï¼Œå°±é‡ç”¨è¿›ç¨‹æ± ä¸­çš„è¿›ç¨‹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ„é€ æ–¹æ³•ï¼šPool([processes[, initializer[, initargs[, maxtasksperchild[, context]]]]])&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;processes ï¼šè¦åˆ›å»ºçš„è¿›ç¨‹æ•°ï¼Œå¦‚æœçœç•¥ï¼Œå°†é»˜è®¤ä½¿ç”¨cpu_count()è¿”å›çš„æ•°é‡ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;initializerï¼šæ¯ä¸ªå·¥ä½œè¿›ç¨‹å¯åŠ¨æ—¶è¦æ‰§è¡Œçš„å¯è°ƒç”¨å¯¹è±¡ï¼Œé»˜è®¤ä¸ºNoneã€‚å¦‚æœinitializeræ˜¯Noneï¼Œé‚£ä¹ˆæ¯ä¸€ä¸ªå·¥ä½œè¿›ç¨‹åœ¨å¼€å§‹çš„æ—¶å€™ä¼šè°ƒç”¨initializer(*initargs)ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;initargsï¼šæ˜¯è¦ä¼ ç»™initializerçš„å‚æ•°ç»„ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;maxtasksperchildï¼šå·¥ä½œè¿›ç¨‹é€€å‡ºä¹‹å‰å¯ä»¥å®Œæˆçš„ä»»åŠ¡æ•°ï¼Œå®Œæˆåç”¨ä¸€ä¸ªæ–°çš„å·¥ä½œè¿›ç¨‹æ¥æ›¿ä»£åŸè¿›ç¨‹ï¼Œæ¥è®©é—²ç½®çš„èµ„æºè¢«é‡Šæ”¾ã€‚maxtasksperchildé»˜è®¤æ˜¯Noneï¼Œæ„å‘³ç€åªè¦Poolå­˜åœ¨å·¥ä½œè¿›ç¨‹å°±ä¼šä¸€ç›´å­˜æ´»ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;context: ç”¨åœ¨åˆ¶å®šå·¥ä½œè¿›ç¨‹å¯åŠ¨æ—¶çš„ä¸Šä¸‹æ–‡ï¼Œä¸€èˆ¬ä½¿ç”¨Pool() æˆ–è€…ä¸€ä¸ªcontextå¯¹è±¡çš„Pool()æ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªæ± ï¼Œä¸¤ç§æ–¹æ³•éƒ½é€‚å½“çš„è®¾ç½®äº†contextã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ä¾‹æ–¹æ³•ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;apply(func[, args[, kwargs]])ï¼šåœ¨ä¸€ä¸ªæ± å·¥ä½œè¿›ç¨‹ä¸­æ‰§è¡Œfunc(args,*kwargs),ç„¶åè¿”å›ç»“æœã€‚éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼šæ­¤æ“ä½œå¹¶ä¸ä¼šåœ¨æ‰€æœ‰æ± å·¥ä½œè¿›ç¨‹ä¸­å¹¶æ‰§è¡Œfuncå‡½æ•°ã€‚å¦‚æœè¦é€šè¿‡ä¸åŒå‚æ•°å¹¶å‘åœ°æ‰§è¡Œfuncå‡½æ•°ï¼Œå¿…é¡»ä»ä¸åŒçº¿ç¨‹è°ƒç”¨p.apply()å‡½æ•°æˆ–è€…ä½¿ç”¨p.apply_async()ã€‚å®ƒæ˜¯é˜»å¡çš„ã€‚applyå¾ˆå°‘ä½¿ç”¨&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;apply_async(func[, arg[, kwds={}[, callback=None]]])ï¼šåœ¨ä¸€ä¸ªæ± å·¥ä½œè¿›ç¨‹ä¸­æ‰§è¡Œfunc(args,*kwargs),ç„¶åè¿”å›ç»“æœã€‚æ­¤æ–¹æ³•çš„ç»“æœæ˜¯AsyncResultç±»çš„å®ä¾‹ï¼Œcallbackæ˜¯å¯è°ƒç”¨å¯¹è±¡ï¼Œæ¥æ”¶è¾“å…¥å‚æ•°ã€‚å½“funcçš„ç»“æœå˜ä¸ºå¯ç”¨æ—¶ï¼Œå°†ç†è§£ä¼ é€’ç»™callbackã€‚callbackç¦æ­¢æ‰§è¡Œä»»ä½•é˜»å¡æ“ä½œï¼Œå¦åˆ™å°†æ¥æ”¶å…¶ä»–å¼‚æ­¥æ“ä½œä¸­çš„ç»“æœã€‚å®ƒæ˜¯éé˜»å¡ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;map(func, iterable[, chunksize=None])ï¼šPoolç±»ä¸­çš„mapæ–¹æ³•ï¼Œä¸å†…ç½®çš„mapå‡½æ•°ç”¨æ³•è¡Œä¸ºåŸºæœ¬ä¸€è‡´ï¼Œå®ƒä¼šä½¿è¿›ç¨‹é˜»å¡ç›´åˆ°è¿”å›ç»“æœã€‚æ³¨æ„ï¼Œè™½ç„¶ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œä½†åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå¿…é¡»åœ¨æ•´ä¸ªé˜Ÿåˆ—éƒ½å°±ç»ªåï¼Œç¨‹åºæ‰ä¼šè¿è¡Œå­è¿›ç¨‹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;map_async(func, iterable[, chunksize=None])ï¼šmap_asyncä¸mapçš„å…³ç³»åŒapplyä¸apply_async&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;imap()ï¼šimap ä¸ mapçš„åŒºåˆ«æ˜¯ï¼Œmapæ˜¯å½“æ‰€æœ‰çš„è¿›ç¨‹éƒ½å·²ç»æ‰§è¡Œå®Œäº†ï¼Œå¹¶å°†ç»“æœè¿”å›äº†ï¼Œimap()åˆ™æ˜¯ç«‹å³è¿”å›ä¸€ä¸ªiterableå¯è¿­ä»£å¯¹è±¡ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;imap_unordered()ï¼šä¸ä¿è¯è¿”å›çš„ç»“æœé¡ºåºä¸è¿›ç¨‹æ·»åŠ çš„é¡ºåºä¸€è‡´ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;close()ï¼šå…³é—­è¿›ç¨‹æ± ï¼Œé˜²æ­¢è¿›ä¸€æ­¥æ“ä½œã€‚å¦‚æœæ‰€æœ‰æ“ä½œæŒç»­æŒ‚èµ·ï¼Œå®ƒä»¬å°†åœ¨å·¥ä½œè¿›ç¨‹ç»ˆæ­¢å‰å®Œæˆã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;join()ï¼šç­‰å¾…æ‰€æœ‰å·¥ä½œè¿›ç¨‹é€€å‡ºã€‚æ­¤æ–¹æ³•åªèƒ½åœ¨close()æˆ–teminate()ä¹‹åè°ƒç”¨ï¼Œè®©å…¶ä¸å†æ¥å—æ–°çš„Processã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;terminate()ï¼šç»“æŸå·¥ä½œè¿›ç¨‹ï¼Œä¸å†å¤„ç†æœªå¤„ç†çš„ä»»åŠ¡ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ–¹æ³•apply_async()å’Œmap_async()çš„è¿”å›å€¼æ˜¯AsyncResulçš„å®ä¾‹objã€‚å®ä¾‹å…·æœ‰ä»¥ä¸‹æ–¹æ³•ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;get()ï¼šè¿”å›ç»“æœï¼Œå¦‚æœæœ‰å¿…è¦åˆ™ç­‰å¾…ç»“æœåˆ°è¾¾ã€‚timeoutæ˜¯å¯é€‰çš„ã€‚å¦‚æœåœ¨æŒ‡å®šæ—¶é—´å†…è¿˜æ²¡æœ‰åˆ°è¾¾ï¼Œå°†å¼•å‘å¼‚å¸¸ã€‚å¦‚æœè¿œç¨‹æ“ä½œä¸­å¼•å‘äº†å¼‚å¸¸ï¼Œå®ƒå°†åœ¨è°ƒç”¨æ­¤æ–¹æ³•æ—¶å†æ¬¡è¢«å¼•å‘ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ready()ï¼šå¦‚æœè°ƒç”¨å®Œæˆï¼Œè¿”å›True&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;successful()ï¼šå¦‚æœè°ƒç”¨å®Œæˆä¸”æ²¡æœ‰å¼•å‘å¼‚å¸¸ï¼Œè¿”å›Trueï¼Œå¦‚æœåœ¨ç»“æœå°±ç»ªä¹‹å‰è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå¼•å‘å¼‚å¸¸&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;wait([timeout])ï¼šç­‰å¾…ç»“æœå˜ä¸ºå¯ç”¨ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;terminate()ï¼šç«‹å³ç»ˆæ­¢æ‰€æœ‰å·¥ä½œè¿›ç¨‹ï¼ŒåŒæ—¶ä¸æ‰§è¡Œä»»ä½•æ¸…ç†æˆ–ç»“æŸä»»ä½•æŒ‚èµ·å·¥ä½œã€‚å¦‚æœpè¢«åƒåœ¾å›æ”¶ï¼Œå°†è‡ªåŠ¨è°ƒç”¨æ­¤å‡½æ•°&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;\&lt;span&gt;#Â -*-Â coding:utf-8Â -*-&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;\&lt;span&gt;#Â Pool+map&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;fromÂ multiprocessing importÂ Pool&lt;br/&gt;&lt;br/&gt;defÂ &lt;span&gt;test&lt;/span&gt;(i):&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(i)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;Â __name__Â ==Â &lt;span&gt;&quot;__main__&quot;&lt;/span&gt;:&lt;br/&gt;&lt;br/&gt;Â Â Â Â listsÂ =Â range(100)&lt;br/&gt;&lt;br/&gt;Â Â Â Â poolÂ =Â Pool(8)&lt;br/&gt;&lt;br/&gt;Â Â Â Â pool.map(&lt;span&gt;test&lt;/span&gt;,Â lists)&lt;br/&gt;&lt;br/&gt;Â Â Â Â pool.close()&lt;br/&gt;&lt;br/&gt;Â Â Â Â pool.join()&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;\&lt;span&gt;#Â -*-Â coding:utf-8Â -*-&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;\&lt;span&gt;#Â å¼‚æ­¥è¿›ç¨‹æ± ï¼ˆéé˜»å¡ï¼‰&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;fromÂ multiprocessingÂ importÂ Pool&lt;br/&gt;&lt;br/&gt;defÂ &lt;span&gt;test&lt;/span&gt;(i):&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(i)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;Â __name__Â ==Â &lt;span&gt;&quot;__main__&quot;&lt;/span&gt;:&lt;br/&gt;&lt;br/&gt;Â Â Â Â poolÂ =Â Pool(8)&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â iÂ &lt;span&gt;in&lt;/span&gt;Â range(100):&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;&#x27;&#x27;&lt;/span&gt;&lt;span&gt;&#x27;&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â  Forå¾ªç¯ä¸­æ‰§è¡Œæ­¥éª¤ï¼š&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â ï¼ˆ1ï¼‰å¾ªç¯éå†ï¼Œå°†100ä¸ªå­è¿›ç¨‹æ·»åŠ åˆ°è¿›ç¨‹æ± ï¼ˆç›¸å¯¹çˆ¶è¿›ç¨‹ä¼šé˜»å¡ï¼‰&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â ï¼ˆ2ï¼‰æ¯æ¬¡æ‰§è¡Œ8ä¸ªå­è¿›ç¨‹ï¼Œç­‰ä¸€ä¸ªå­è¿›ç¨‹æ‰§è¡Œå®Œåï¼Œç«‹é©¬å¯åŠ¨æ–°çš„å­è¿›ç¨‹ã€‚ï¼ˆç›¸å¯¹çˆ¶è¿›ç¨‹ä¸é˜»å¡ï¼‰&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â  apply_asyncä¸ºå¼‚æ­¥è¿›ç¨‹æ± å†™æ³•ã€‚å¼‚æ­¥æŒ‡çš„æ˜¯å¯åŠ¨å­è¿›ç¨‹çš„è¿‡ç¨‹ï¼Œä¸çˆ¶è¿›ç¨‹æœ¬èº«çš„æ‰§è¡Œï¼ˆprintï¼‰æ˜¯å¼‚æ­¥çš„ï¼Œè€ŒForå¾ªç¯ä¸­å¾€è¿›ç¨‹æ± æ·»åŠ å­è¿›ç¨‹çš„è¿‡ç¨‹ï¼Œä¸çˆ¶è¿›ç¨‹æœ¬èº«çš„æ‰§è¡Œå´æ˜¯åŒæ­¥çš„ã€‚&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &#x27;&lt;/span&gt;&lt;span&gt;&#x27;&#x27;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â pool.apply_async(&lt;span&gt;test&lt;/span&gt;,Â args=(i,))Â Â &lt;span&gt;#Â ç»´æŒæ‰§è¡Œçš„è¿›ç¨‹æ€»æ•°ä¸º8ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œå®Œåå¯åŠ¨ä¸€ä¸ªæ–°è¿›ç¨‹.&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&quot;test&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;Â Â Â Â pool.close()&lt;br/&gt;&lt;br/&gt;Â Â Â Â pool.join()&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;\&lt;span&gt;#Â -*-Â coding:utf-8Â -*-&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;\&lt;span&gt;#Â å¼‚æ­¥è¿›ç¨‹æ± ï¼ˆéé˜»å¡ï¼‰&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;fromÂ multiprocessingÂ importÂ Pool&lt;br/&gt;&lt;br/&gt;defÂ &lt;span&gt;test&lt;/span&gt;(i):&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(i)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;Â __name__Â ==Â &lt;span&gt;&quot;__main__&quot;&lt;/span&gt;:&lt;br/&gt;&lt;br/&gt;Â Â Â Â poolÂ =Â Pool(8)&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â iÂ &lt;span&gt;in&lt;/span&gt;Â range(100):&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;&#x27;&#x27;&lt;/span&gt;&lt;span&gt;&#x27;&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â å®é™…æµ‹è¯•å‘ç°ï¼Œforå¾ªç¯å†…éƒ¨æ‰§è¡Œæ­¥éª¤ï¼š&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â ï¼ˆ1ï¼‰éå†100ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œå¾€è¿›ç¨‹æ± æ”¾ä¸€ä¸ªå­è¿›ç¨‹&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â ï¼ˆ2ï¼‰æ‰§è¡Œè¿™ä¸ªå­è¿›ç¨‹ï¼Œç­‰å­è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå†å¾€è¿›ç¨‹æ± æ”¾ä¸€ä¸ªå­è¿›ç¨‹ï¼Œå†æ‰§è¡Œã€‚ï¼ˆåŒæ—¶åªæ‰§è¡Œä¸€ä¸ªå­è¿›ç¨‹ï¼‰&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â  forå¾ªç¯æ‰§è¡Œå®Œæ¯•ï¼Œå†æ‰§è¡Œprintå‡½æ•°ã€‚&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &#x27;&lt;/span&gt;&lt;span&gt;&#x27;&#x27;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â pool.apply(&lt;span&gt;test&lt;/span&gt;,Â args=(i,))Â Â &lt;span&gt;#Â ç»´æŒæ‰§è¡Œçš„è¿›ç¨‹æ€»æ•°ä¸º8ï¼Œå½“ä¸€ä¸ªè¿›ç¨‹æ‰§è¡Œå®Œåå¯åŠ¨ä¸€ä¸ªæ–°è¿›ç¨‹.&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&quot;test&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;Â Â Â Â pool.close()&lt;br/&gt;&lt;br/&gt;Â Â Â Â pool.join()&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Queueï¼ˆç”¨äºè¿›ç¨‹é€šä¿¡ï¼Œèµ„æºå…±äº«ï¼‰&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ä½¿ç”¨å¤šè¿›ç¨‹çš„è¿‡ç¨‹ä¸­ï¼Œæœ€å¥½ä¸è¦ä½¿ç”¨å…±äº«èµ„æºã€‚æ™®é€šçš„å…¨å±€å˜é‡æ˜¯ä¸èƒ½è¢«å­è¿›ç¨‹æ‰€å…±äº«çš„ï¼Œåªæœ‰é€šè¿‡Multiprocessingç»„ä»¶æ„é€ çš„æ•°æ®ç»“æ„å¯ä»¥è¢«å…±äº«ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;Queue&lt;/strong&gt;æ˜¯ç”¨æ¥åˆ›å»ºè¿›ç¨‹é—´èµ„æºå…±äº«çš„é˜Ÿåˆ—çš„ç±»ï¼Œä½¿ç”¨Queueå¯ä»¥è¾¾åˆ°å¤šè¿›ç¨‹é—´æ•°æ®ä¼ é€’çš„åŠŸèƒ½ï¼ˆç¼ºç‚¹ï¼šåªé€‚ç”¨Processç±»ï¼Œä¸èƒ½åœ¨Poolè¿›ç¨‹æ± ä¸­ä½¿ç”¨ï¼‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ„é€ æ–¹æ³•ï¼šQueue([maxsize])&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;maxsizeæ˜¯é˜Ÿåˆ—ä¸­å…è®¸æœ€å¤§é¡¹æ•°ï¼Œçœç•¥åˆ™æ— å¤§å°é™åˆ¶ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ä¾‹æ–¹æ³•ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;put()ï¼šç”¨ä»¥æ’å…¥æ•°æ®åˆ°é˜Ÿåˆ—ã€‚putæ–¹æ³•è¿˜æœ‰ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼šblockedå’Œtimeoutã€‚å¦‚æœblockedä¸ºTrueï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œå¹¶ä¸”timeoutä¸ºæ­£å€¼ï¼Œè¯¥æ–¹æ³•ä¼šé˜»å¡timeoutæŒ‡å®šçš„æ—¶é—´ï¼Œç›´åˆ°è¯¥é˜Ÿåˆ—æœ‰å‰©ä½™çš„ç©ºé—´ã€‚å¦‚æœè¶…æ—¶ï¼Œä¼šæŠ›å‡ºQueue.Fullå¼‚å¸¸ã€‚å¦‚æœblockedä¸ºFalseï¼Œä½†è¯¥Queueå·²æ»¡ï¼Œä¼šç«‹å³æŠ›å‡ºQueue.Fullå¼‚å¸¸ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;get()ï¼šå¯ä»¥ä»é˜Ÿåˆ—è¯»å–å¹¶ä¸”åˆ é™¤ä¸€ä¸ªå…ƒç´ ã€‚getæ–¹æ³•æœ‰ä¸¤ä¸ªå¯é€‰å‚æ•°ï¼šblockedå’Œtimeoutã€‚å¦‚æœblockedä¸ºTrueï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œå¹¶ä¸”timeoutä¸ºæ­£å€¼ï¼Œé‚£ä¹ˆåœ¨ç­‰å¾…æ—¶é—´å†…æ²¡æœ‰å–åˆ°ä»»ä½•å…ƒç´ ï¼Œä¼šæŠ›å‡ºQueue.Emptyå¼‚å¸¸ã€‚å¦‚æœblockedä¸ºFalseï¼Œæœ‰ä¸¤ç§æƒ…å†µå­˜åœ¨ï¼Œå¦‚æœQueueæœ‰ä¸€ä¸ªå€¼å¯ç”¨ï¼Œåˆ™ç«‹å³è¿”å›è¯¥å€¼ï¼Œå¦åˆ™ï¼Œå¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œåˆ™ç«‹å³æŠ›å‡ºQueue.Emptyå¼‚å¸¸ã€‚è‹¥ä¸å¸Œæœ›åœ¨emptyçš„æ—¶å€™æŠ›å‡ºå¼‚å¸¸ï¼Œä»¤blockedä¸ºTrueæˆ–è€…å‚æ•°å…¨éƒ¨ç½®ç©ºå³å¯ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;get_nowait()ï¼šåŒq.get(False)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;put_nowait()ï¼šåŒq.put(False)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;empty()ï¼šè°ƒç”¨æ­¤æ–¹æ³•æ—¶qä¸ºç©ºåˆ™è¿”å›Trueï¼Œè¯¥ç»“æœä¸å¯é ï¼Œæ¯”å¦‚åœ¨è¿”å›Trueçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­åˆåŠ å…¥äº†é¡¹ç›®ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;full()ï¼šè°ƒç”¨æ­¤æ–¹æ³•æ—¶qå·²æ»¡åˆ™è¿”å›Trueï¼Œè¯¥ç»“æœä¸å¯é ï¼Œæ¯”å¦‚åœ¨è¿”å›Trueçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé˜Ÿåˆ—ä¸­çš„é¡¹ç›®è¢«å–èµ°ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;qsize()ï¼šè¿”å›é˜Ÿåˆ—ä¸­ç›®å‰é¡¹ç›®çš„æ­£ç¡®æ•°é‡ï¼Œç»“æœä¹Ÿä¸å¯é ï¼Œç†ç”±åŒq.empty()å’Œq.full()ä¸€æ ·&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;fromÂ multiprocessingÂ importÂ Process,Â Queue&lt;br/&gt;&lt;br/&gt;importÂ os,Â time,Â random&lt;br/&gt;&lt;br/&gt;defÂ write(q):&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;ProcessÂ toÂ write:Â %s&#x27;&lt;/span&gt;Â %Â os.getpid())&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â valueÂ &lt;span&gt;in&lt;/span&gt;Â [&lt;span&gt;&#x27;A&#x27;&lt;/span&gt;,Â &lt;span&gt;&#x27;B&#x27;&lt;/span&gt;,Â &lt;span&gt;&#x27;C&#x27;&lt;/span&gt;]:&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;PutÂ %sÂ toÂ queue...&#x27;&lt;/span&gt;Â %Â value)&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â q.put(value)&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â time.sleep(random.random())&lt;br/&gt;&lt;br/&gt;defÂ &lt;span&gt;read&lt;/span&gt;(q):&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;ProcessÂ toÂ read:Â %s&#x27;&lt;/span&gt;Â %Â os.getpid())&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;while&lt;/span&gt;Â True:&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â valueÂ =Â q.get(True)&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;GetÂ %sÂ fromÂ queue.&#x27;&lt;/span&gt;Â %Â value)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;Â __name__Â ==Â &lt;span&gt;&quot;__main__&quot;&lt;/span&gt;:&lt;br/&gt;&lt;br/&gt;Â Â Â Â qÂ =Â Queue()&lt;br/&gt;&lt;br/&gt;Â Â Â Â pwÂ =Â Process(target=write,Â args=(q,))&lt;br/&gt;&lt;br/&gt;Â Â Â Â prÂ =Â Process(target=&lt;span&gt;read&lt;/span&gt;,Â args=(q,))&lt;br/&gt;&lt;br/&gt;Â Â Â Â pw.start()&lt;br/&gt;&lt;br/&gt;Â Â Â Â pr.start()&lt;br/&gt;&lt;br/&gt;Â Â Â Â pw.join()Â Â &lt;span&gt;#Â ç­‰å¾…pwç»“æŸ&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â pr.terminate()Â Â &lt;span&gt;#Â prè¿›ç¨‹é‡Œæ˜¯æ­»å¾ªç¯ï¼Œæ— æ³•ç­‰å¾…å…¶ç»“æŸï¼Œåªèƒ½å¼ºè¡Œç»ˆæ­¢&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;JoinableQueue&lt;/strong&gt;å°±åƒæ˜¯ä¸€ä¸ªQueueå¯¹è±¡ï¼Œä½†é˜Ÿåˆ—å…è®¸é¡¹ç›®çš„ä½¿ç”¨è€…é€šçŸ¥ç”Ÿæˆè€…é¡¹ç›®å·²ç»è¢«æˆåŠŸå¤„ç†ã€‚é€šçŸ¥è¿›ç¨‹æ˜¯ä½¿ç”¨å…±äº«çš„ä¿¡å·å’Œæ¡ä»¶å˜é‡æ¥å®ç°çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ„é€ æ–¹æ³•ï¼šJoinableQueue([maxsize])&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;maxsizeï¼šé˜Ÿåˆ—ä¸­å…è®¸æœ€å¤§é¡¹æ•°ï¼Œçœç•¥åˆ™æ— å¤§å°é™åˆ¶ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ä¾‹æ–¹æ³•&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;JoinableQueueçš„å®ä¾‹pé™¤äº†ä¸Queueå¯¹è±¡ç›¸åŒçš„æ–¹æ³•ä¹‹å¤–è¿˜å…·æœ‰ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;task_done()ï¼šä½¿ç”¨è€…ä½¿ç”¨æ­¤æ–¹æ³•å‘å‡ºä¿¡å·ï¼Œè¡¨ç¤ºq.get()çš„è¿”å›é¡¹ç›®å·²ç»è¢«å¤„ç†ã€‚å¦‚æœè°ƒç”¨æ­¤æ–¹æ³•çš„æ¬¡æ•°å¤§äºä»é˜Ÿåˆ—ä¸­åˆ é™¤é¡¹ç›®çš„æ•°é‡ï¼Œå°†å¼•å‘ValueErrorå¼‚å¸¸&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;join():ç”Ÿäº§è€…è°ƒç”¨æ­¤æ–¹æ³•è¿›è¡Œé˜»å¡ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸­æ‰€æœ‰çš„é¡¹ç›®å‡è¢«å¤„ç†ã€‚é˜»å¡å°†æŒç»­åˆ°é˜Ÿåˆ—ä¸­çš„æ¯ä¸ªé¡¹ç›®å‡è°ƒç”¨q.task_doneï¼ˆï¼‰æ–¹æ³•ä¸ºæ­¢&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;\&lt;span&gt;#Â -*-Â coding:utf-8Â -*-&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;fromÂ multiprocessingÂ importÂ Process,Â JoinableQueue&lt;br/&gt;&lt;br/&gt;importÂ time,Â random&lt;br/&gt;&lt;br/&gt;defÂ consumer(q):&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;while&lt;/span&gt;Â True:&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â resÂ =Â q.get()&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;æ¶ˆè´¹è€…æ‹¿åˆ°äº†Â %s&#x27;&lt;/span&gt;Â %Â res)&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â q.task_done()&lt;br/&gt;&lt;br/&gt;defÂ producer(seq,Â q):&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â itemÂ &lt;span&gt;in&lt;/span&gt;Â seq:&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â time.sleep(random.randrange(1,2))&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â q.put(item)&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;ç”Ÿäº§è€…åšå¥½äº†Â %s&#x27;&lt;/span&gt;Â %Â item)&lt;br/&gt;&lt;br/&gt;Â Â Â Â q.join()&lt;br/&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;Â __name__Â ==Â &lt;span&gt;&quot;__main__&quot;&lt;/span&gt;:&lt;br/&gt;&lt;br/&gt;Â Â Â Â qÂ =Â JoinableQueue()&lt;br/&gt;&lt;br/&gt;Â Â Â Â seqÂ =Â (&lt;span&gt;&#x27;äº§å“%s&#x27;&lt;/span&gt;Â %Â iÂ &lt;span&gt;for&lt;/span&gt;Â iÂ &lt;span&gt;in&lt;/span&gt;Â range(5))&lt;br/&gt;&lt;br/&gt;Â Â Â Â pÂ =Â Process(target=consumer,Â args=(q,))&lt;br/&gt;&lt;br/&gt;Â Â Â Â p.daemonÂ =Â TrueÂ Â &lt;span&gt;#Â è®¾ç½®ä¸ºå®ˆæŠ¤è¿›ç¨‹ï¼Œåœ¨ä¸»çº¿ç¨‹åœæ­¢æ—¶pä¹Ÿåœæ­¢ï¼Œä½†æ˜¯ä¸ç”¨æ‹…å¿ƒï¼Œproducerå†…è°ƒç”¨q.joinä¿è¯äº†consumerå·²ç»å¤„ç†å®Œé˜Ÿåˆ—ä¸­çš„æ‰€æœ‰å…ƒç´ &lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â p.start()&lt;br/&gt;&lt;br/&gt;Â Â Â Â producer(seq,Â q)&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;ä¸»çº¿ç¨‹&#x27;&lt;/span&gt;)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Valueï¼ŒArrayï¼ˆç”¨äºè¿›ç¨‹é€šä¿¡ï¼Œèµ„æºå…±äº«ï¼‰&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;multiprocessing ä¸­Valueå’ŒArrayçš„å®ç°åŸç†éƒ½æ˜¯åœ¨å…±äº«å†…å­˜ä¸­åˆ›å»ºctypes()å¯¹è±¡æ¥è¾¾åˆ°å…±äº«æ•°æ®çš„ç›®çš„ï¼Œä¸¤è€…å®ç°æ–¹æ³•å¤§åŒå°å¼‚ï¼Œåªæ˜¯é€‰ç”¨ä¸åŒçš„ctypesæ•°æ®ç±»å‹è€Œå·²ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;Value&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ„é€ æ–¹æ³•ï¼šValue((typecode_or_type, args[, lock])&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;typecode_or_typeï¼šå®šä¹‰ctypes()å¯¹è±¡çš„ç±»å‹ï¼Œå¯ä»¥ä¼ Type codeæˆ– C Typeï¼Œå…·ä½“å¯¹ç…§è¡¨è§ä¸‹æ–‡ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;argsï¼šä¼ é€’ç»™typecode_or_typeæ„é€ å‡½æ•°çš„å‚æ•°&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;lockï¼šé»˜è®¤ä¸ºTrueï¼Œåˆ›å»ºä¸€ä¸ªäº’æ–¥é”æ¥é™åˆ¶å¯¹Valueå¯¹è±¡çš„è®¿é—®ï¼Œå¦‚æœä¼ å…¥ä¸€ä¸ªé”ï¼Œå¦‚Lockæˆ–RLockçš„å®ä¾‹ï¼Œå°†ç”¨äºåŒæ­¥ã€‚å¦‚æœä¼ å…¥Falseï¼ŒValueçš„å®ä¾‹å°±ä¸ä¼šè¢«é”ä¿æŠ¤ï¼Œå®ƒå°†ä¸æ˜¯è¿›ç¨‹å®‰å…¨çš„ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;typecode_or_typeæ”¯æŒçš„ç±»å‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;|Â TypeÂ codeÂ |Â CÂ TypeÂ Â Â Â Â Â Â Â Â Â Â Â Â |Â PythonÂ TypeÂ Â Â Â Â Â Â |Â MinimumÂ sizeÂ &lt;span&gt;in&lt;/span&gt;Â bytesÂ |&lt;br/&gt;&lt;br/&gt;|Â ---------Â |Â ------------------Â |Â -----------------Â |Â ---------------------Â |&lt;br/&gt;&lt;br/&gt;|Â `&lt;span&gt;&#x27;b&#x27;&lt;/span&gt;`Â Â Â Â Â |Â signedÂ charÂ Â Â Â Â Â Â Â |Â intÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â |Â 1Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |&lt;br/&gt;&lt;br/&gt;|Â `&lt;span&gt;&#x27;B&#x27;&lt;/span&gt;`Â Â Â Â Â |Â unsignedÂ charÂ Â Â Â Â Â |Â intÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â |Â 1Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |&lt;br/&gt;&lt;br/&gt;|Â `&lt;span&gt;&#x27;u&#x27;&lt;/span&gt;`Â Â Â Â Â |Â Py_UNICODEÂ Â Â Â Â Â Â Â Â |Â UnicodeÂ characterÂ |Â 2Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |&lt;br/&gt;&lt;br/&gt;|Â `&lt;span&gt;&#x27;h&#x27;&lt;/span&gt;`Â Â Â Â Â |Â signedÂ shortÂ Â Â Â Â Â Â |Â intÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â |Â 2Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |&lt;br/&gt;&lt;br/&gt;|Â `&lt;span&gt;&#x27;H&#x27;&lt;/span&gt;`Â Â Â Â Â |Â unsignedÂ shortÂ Â Â Â Â |Â intÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â |Â 2Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |&lt;br/&gt;&lt;br/&gt;|Â `&lt;span&gt;&#x27;i&#x27;&lt;/span&gt;`Â Â Â Â Â |Â signedÂ intÂ Â Â Â Â Â Â Â Â |Â intÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â |Â 2Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |&lt;br/&gt;&lt;br/&gt;|Â `&lt;span&gt;&#x27;I&#x27;&lt;/span&gt;`Â Â Â Â Â |Â unsignedÂ intÂ Â Â Â Â Â Â |Â intÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â |Â 2Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |&lt;br/&gt;&lt;br/&gt;|Â `&lt;span&gt;&#x27;l&#x27;&lt;/span&gt;`Â Â Â Â Â |Â signedÂ longÂ Â Â Â Â Â Â Â |Â intÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â |Â 4Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |&lt;br/&gt;&lt;br/&gt;|Â `&lt;span&gt;&#x27;L&#x27;&lt;/span&gt;`Â Â Â Â Â |Â unsignedÂ longÂ Â Â Â Â Â |Â intÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â |Â 4Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |&lt;br/&gt;&lt;br/&gt;|Â `&lt;span&gt;&#x27;q&#x27;&lt;/span&gt;`Â Â Â Â Â |Â signedÂ longÂ longÂ Â Â |Â intÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â |Â 8Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |&lt;br/&gt;&lt;br/&gt;|Â `&lt;span&gt;&#x27;Q&#x27;&lt;/span&gt;`Â Â Â Â Â |Â unsignedÂ longÂ longÂ |Â intÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â |Â 8Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |&lt;br/&gt;&lt;br/&gt;|Â `&lt;span&gt;&#x27;f&#x27;&lt;/span&gt;`Â Â Â Â Â |Â &lt;span&gt;float&lt;/span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â |Â &lt;span&gt;float&lt;/span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â |Â 4Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |&lt;br/&gt;&lt;br/&gt;|Â `&lt;span&gt;&#x27;d&#x27;&lt;/span&gt;`Â Â Â Â Â |Â doubleÂ Â Â Â Â Â Â Â Â Â Â Â Â |Â &lt;span&gt;float&lt;/span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â |Â 8Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â |&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‚è€ƒåœ°å€ï¼šhttps://docs.python.org/3/library/array.html&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;Array&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ„é€ æ–¹æ³•ï¼šArray(typecode_or_type, size_or_initializer, **kwds[, lock])&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;typecode_or_typeï¼šåŒä¸Š&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;size_or_initializerï¼šå¦‚æœå®ƒæ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œé‚£ä¹ˆå®ƒç¡®å®šæ•°ç»„çš„é•¿åº¦ï¼Œå¹¶ä¸”æ•°ç»„å°†è¢«åˆå§‹åŒ–ä¸ºé›¶ã€‚å¦åˆ™ï¼Œsize_or_initializeræ˜¯ç”¨äºåˆå§‹åŒ–æ•°ç»„çš„åºåˆ—ï¼Œå…¶é•¿åº¦å†³å®šæ•°ç»„çš„é•¿åº¦ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;kwdsï¼šä¼ é€’ç»™typecode_or_typeæ„é€ å‡½æ•°çš„å‚æ•°&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;lockï¼šåŒä¸Š&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;importÂ multiprocessing&lt;br/&gt;&lt;br/&gt;defÂ f(n,Â a):&lt;br/&gt;&lt;br/&gt;Â Â Â Â n.valueÂ =Â 3.14&lt;br/&gt;&lt;br/&gt;Â Â Â Â a[0]Â =Â 5&lt;br/&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;Â __name__Â ==Â &lt;span&gt;&#x27;__main__&#x27;&lt;/span&gt;:&lt;br/&gt;&lt;br/&gt;Â Â Â Â numÂ =Â multiprocessing.Value(&lt;span&gt;&#x27;d&#x27;&lt;/span&gt;,Â 0.0)&lt;br/&gt;&lt;br/&gt;Â Â Â Â arrÂ =Â multiprocessing.Array(&lt;span&gt;&#x27;i&#x27;&lt;/span&gt;,Â range(10))&lt;br/&gt;&lt;br/&gt;Â Â Â Â pÂ =Â multiprocessing.Process(target=f,Â args=(num,Â arr))&lt;br/&gt;&lt;br/&gt;Â Â Â Â p.start()&lt;br/&gt;&lt;br/&gt;Â Â Â Â p.join()&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(num.value)&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(arr[:])&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ³¨æ„ï¼šValueå’ŒArrayåªé€‚ç”¨äºProcessç±»ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Pipeï¼ˆç”¨äºç®¡é“é€šä¿¡ï¼‰&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤šè¿›ç¨‹è¿˜æœ‰ä¸€ç§æ•°æ®ä¼ é€’æ–¹å¼å«ç®¡é“åŸç†å’Œ Queueç›¸åŒã€‚Pipeå¯ä»¥åœ¨è¿›ç¨‹ä¹‹é—´åˆ›å»ºä¸€æ¡ç®¡é“ï¼Œå¹¶è¿”å›å…ƒç»„ï¼ˆconn1,conn2ï¼‰,å…¶ä¸­conn1ï¼Œconn2è¡¨ç¤ºç®¡é“ä¸¤ç«¯çš„è¿æ¥å¯¹è±¡ï¼Œå¼ºè°ƒä¸€ç‚¹ï¼šå¿…é¡»åœ¨äº§ç”ŸProcesså¯¹è±¡ä¹‹å‰äº§ç”Ÿç®¡é“ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ„é€ æ–¹æ³•ï¼šPipe([duplex])&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;dumplex:é»˜è®¤ç®¡é“æ˜¯å…¨åŒå·¥çš„ï¼Œå¦‚æœå°†duplexå°„æˆFalseï¼Œconn1åªèƒ½ç”¨äºæ¥æ”¶ï¼Œconn2åªèƒ½ç”¨äºå‘é€ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ä¾‹æ–¹æ³•ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;send(obj)ï¼šé€šè¿‡è¿æ¥å‘é€å¯¹è±¡ã€‚objæ˜¯ä¸åºåˆ—åŒ–å…¼å®¹çš„ä»»æ„å¯¹è±¡&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;recv()ï¼šæ¥æ”¶conn2.send(obj)å‘é€çš„å¯¹è±¡ã€‚å¦‚æœæ²¡æœ‰æ¶ˆæ¯å¯æ¥æ”¶ï¼Œrecvæ–¹æ³•ä¼šä¸€ç›´é˜»å¡ã€‚å¦‚æœè¿æ¥çš„å¦å¤–ä¸€ç«¯å·²ç»å…³é—­ï¼Œé‚£ä¹ˆrecvæ–¹æ³•ä¼šæŠ›å‡ºEOFErrorã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;close():å…³é—­è¿æ¥ã€‚å¦‚æœconn1è¢«åƒåœ¾å›æ”¶ï¼Œå°†è‡ªåŠ¨è°ƒç”¨æ­¤æ–¹æ³•&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;fileno():è¿”å›è¿æ¥ä½¿ç”¨çš„æ•´æ•°æ–‡ä»¶æè¿°ç¬¦&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;poll([timeout]):å¦‚æœè¿æ¥ä¸Šçš„æ•°æ®å¯ç”¨ï¼Œè¿”å›Trueã€‚timeoutæŒ‡å®šç­‰å¾…çš„æœ€é•¿æ—¶é™ã€‚å¦‚æœçœç•¥æ­¤å‚æ•°ï¼Œæ–¹æ³•å°†ç«‹å³è¿”å›ç»“æœã€‚å¦‚æœå°†timeoutå°„æˆNoneï¼Œæ“ä½œå°†æ— é™æœŸåœ°ç­‰å¾…æ•°æ®åˆ°è¾¾ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;recv_bytes([maxlength]):æ¥æ”¶c.send_bytes()æ–¹æ³•å‘é€çš„ä¸€æ¡å®Œæ•´çš„å­—èŠ‚æ¶ˆæ¯ã€‚maxlengthæŒ‡å®šè¦æ¥æ”¶çš„æœ€å¤§å­—èŠ‚æ•°ã€‚å¦‚æœè¿›å…¥çš„æ¶ˆæ¯ï¼Œè¶…è¿‡äº†è¿™ä¸ªæœ€å¤§å€¼ï¼Œå°†å¼•å‘IOErrorå¼‚å¸¸ï¼Œå¹¶ä¸”åœ¨è¿æ¥ä¸Šæ— æ³•è¿›è¡Œè¿›ä¸€æ­¥è¯»å–ã€‚å¦‚æœè¿æ¥çš„å¦å¤–ä¸€ç«¯å·²ç»å…³é—­ï¼Œå†ä¹Ÿä¸å­˜åœ¨ä»»ä½•æ•°æ®ï¼Œå°†å¼•å‘EOFErrorå¼‚å¸¸ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;send_bytes(buffer [, offset [, size]])ï¼šé€šè¿‡è¿æ¥å‘é€å­—èŠ‚æ•°æ®ç¼“å†²åŒºï¼Œbufferæ˜¯æ”¯æŒç¼“å†²åŒºæ¥å£çš„ä»»æ„å¯¹è±¡ï¼Œoffsetæ˜¯ç¼“å†²åŒºä¸­çš„å­—èŠ‚åç§»é‡ï¼Œè€Œsizeæ˜¯è¦å‘é€å­—èŠ‚æ•°ã€‚ç»“æœæ•°æ®ä»¥å•æ¡æ¶ˆæ¯çš„å½¢å¼å‘å‡ºï¼Œç„¶åè°ƒç”¨c.recv_bytes()å‡½æ•°è¿›è¡Œæ¥æ”¶&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;recv_bytes_into(buffer [, offset]):æ¥æ”¶ä¸€æ¡å®Œæ•´çš„å­—èŠ‚æ¶ˆæ¯ï¼Œå¹¶æŠŠå®ƒä¿å­˜åœ¨bufferå¯¹è±¡ä¸­ï¼Œè¯¥å¯¹è±¡æ”¯æŒå¯å†™å…¥çš„ç¼“å†²åŒºæ¥å£ï¼ˆå³bytearrayå¯¹è±¡æˆ–ç±»ä¼¼çš„å¯¹è±¡ï¼‰ã€‚offsetæŒ‡å®šç¼“å†²åŒºä¸­æ”¾ç½®æ¶ˆæ¯å¤„çš„å­—èŠ‚ä½ç§»ã€‚è¿”å›å€¼æ˜¯æ”¶åˆ°çš„å­—èŠ‚æ•°ã€‚å¦‚æœæ¶ˆæ¯é•¿åº¦å¤§äºå¯ç”¨çš„ç¼“å†²åŒºç©ºé—´ï¼Œå°†å¼•å‘BufferTooShortå¼‚å¸¸ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;fromÂ multiprocessingÂ importÂ Process,Â Pipe&lt;br/&gt;&lt;br/&gt;importÂ time&lt;br/&gt;&lt;br/&gt;\&lt;span&gt;#Â å­è¿›ç¨‹æ‰§è¡Œæ–¹æ³•&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;defÂ f(Subconn):&lt;br/&gt;&lt;br/&gt;Â Â Â Â time.sleep(1)&lt;br/&gt;&lt;br/&gt;Â Â Â Â Subconn.send(&lt;span&gt;&quot;åƒäº†å—&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&quot;æ¥è‡ªçˆ¶äº²çš„é—®å€™:&quot;&lt;/span&gt;,Â Subconn.recv())&lt;br/&gt;&lt;br/&gt;Â Â Â Â Subconn.close()&lt;br/&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;Â __name__Â ==Â &lt;span&gt;&quot;__main__&quot;&lt;/span&gt;:&lt;br/&gt;&lt;br/&gt;Â Â Â Â parent_conn,Â child_connÂ =Â Pipe()Â Â &lt;span&gt;#Â åˆ›å»ºç®¡é“ä¸¤ç«¯&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â pÂ =Â Process(target=f,Â args=(child_conn,))Â Â &lt;span&gt;#Â åˆ›å»ºå­è¿›ç¨‹&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â p.start()&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&quot;æ¥è‡ªå„¿å­çš„é—®å€™:&quot;&lt;/span&gt;,Â parent_conn.recv())&lt;br/&gt;&lt;br/&gt;Â Â Â Â parent_conn.send(&lt;span&gt;&quot;å—¯&quot;&lt;/span&gt;)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Managerï¼ˆç”¨äºèµ„æºå…±äº«ï¼‰&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Manager()è¿”å›çš„managerå¯¹è±¡æ§åˆ¶äº†ä¸€ä¸ªserverè¿›ç¨‹ï¼Œæ­¤è¿›ç¨‹åŒ…å«çš„pythonå¯¹è±¡å¯ä»¥è¢«å…¶ä»–çš„è¿›ç¨‹é€šè¿‡proxiesæ¥è®¿é—®ã€‚ä»è€Œè¾¾åˆ°å¤šè¿›ç¨‹é—´æ•°æ®é€šä¿¡ä¸”å®‰å…¨ã€‚Manageræ¨¡å—å¸¸ä¸Poolæ¨¡å—ä¸€èµ·ä½¿ç”¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Manageræ”¯æŒçš„ç±»å‹æœ‰list,dict,Namespace,Lock,RLock,Semaphore,BoundedSemaphore,Condition,Event,Queue,Valueå’ŒArrayã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç®¡ç†å™¨æ˜¯ç‹¬ç«‹è¿è¡Œçš„å­è¿›ç¨‹ï¼Œå…¶ä¸­å­˜åœ¨çœŸå®çš„å¯¹è±¡ï¼Œå¹¶ä»¥æœåŠ¡å™¨çš„å½¢å¼è¿è¡Œï¼Œå…¶ä»–è¿›ç¨‹é€šè¿‡ä½¿ç”¨ä»£ç†è®¿é—®å…±äº«å¯¹è±¡ï¼Œè¿™äº›ä»£ç†ä½œä¸ºå®¢æˆ·ç«¯è¿è¡Œã€‚Manager()æ˜¯BaseManagerçš„å­ç±»ï¼Œè¿”å›ä¸€ä¸ªå¯åŠ¨çš„SyncManager()å®ä¾‹ï¼Œå¯ç”¨äºåˆ›å»ºå…±äº«å¯¹è±¡å¹¶è¿”å›è®¿é—®è¿™äº›å…±äº«å¯¹è±¡çš„ä»£ç†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;BaseManager&lt;/strong&gt;ï¼Œåˆ›å»ºç®¡ç†å™¨æœåŠ¡å™¨çš„åŸºç±»&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ„é€ æ–¹æ³•ï¼šBaseManager([address[, authkey]])&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;addressï¼š(hostname,port),æŒ‡å®šæœåŠ¡å™¨çš„ç½‘å€åœ°å€ï¼Œé»˜è®¤ä¸ºç®€å•åˆ†é…ä¸€ä¸ªç©ºé—²çš„ç«¯å£&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;authkeyï¼šè¿æ¥åˆ°æœåŠ¡å™¨çš„å®¢æˆ·ç«¯çš„èº«ä»½éªŒè¯ï¼Œé»˜è®¤ä¸ºcurrent_process().authkeyçš„å€¼&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ä¾‹æ–¹æ³•ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;start([initializer[, initargs]])ï¼šå¯åŠ¨ä¸€ä¸ªå•ç‹¬çš„å­è¿›ç¨‹ï¼Œå¹¶åœ¨è¯¥å­è¿›ç¨‹ä¸­å¯åŠ¨ç®¡ç†å™¨æœåŠ¡å™¨&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;get_server()ï¼šè·å–æœåŠ¡å™¨å¯¹è±¡&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;connect()ï¼šè¿æ¥ç®¡ç†å™¨å¯¹è±¡&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;shutdown()ï¼šå…³é—­ç®¡ç†å™¨å¯¹è±¡ï¼Œåªèƒ½åœ¨è°ƒç”¨äº†start()æ–¹æ³•ä¹‹åè°ƒç”¨&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ä¾‹å±æ€§ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;addressï¼šåªè¯»å±æ€§ï¼Œç®¡ç†å™¨æœåŠ¡å™¨æ­£åœ¨ä½¿ç”¨çš„åœ°å€&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;SyncManager&lt;/strong&gt;&lt;strong&gt;ï¼Œ&lt;/strong&gt;ä»¥ä¸‹ç±»å‹å‡ä¸æ˜¯è¿›ç¨‹å®‰å…¨çš„ï¼Œéœ€è¦åŠ é”..&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ä¾‹æ–¹æ³•ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;Array(self,*args,**kwds)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;BoundedSemaphore(self,*args,**kwds)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Condition(self,*args,**kwds)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Event(self,*args,**kwds)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;JoinableQueue(self,*args,**kwds)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Lock(self,*args,**kwds)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Namespace(self,*args,**kwds)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Pool(self,*args,**kwds)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Queue(self,*args,**kwds)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;RLock(self,*args,**kwds)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Semaphore(self,*args,**kwds)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Value(self,*args,**kwds)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;dict(self,*args,**kwds)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;list(self,*args,**kwds)&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;importÂ multiprocessing&lt;br/&gt;&lt;br/&gt;defÂ f(x,Â arr,Â l,Â d,Â n):&lt;br/&gt;&lt;br/&gt;Â Â Â Â x.valueÂ =Â 3.14&lt;br/&gt;&lt;br/&gt;Â Â Â Â arr[0]Â =Â 5&lt;br/&gt;&lt;br/&gt;Â Â Â Â l.append(&lt;span&gt;&#x27;Hello&#x27;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;Â Â Â Â d[1]Â =Â 2&lt;br/&gt;&lt;br/&gt;Â Â Â Â n.aÂ =Â 10&lt;br/&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;Â __name__Â ==Â &lt;span&gt;&#x27;__main__&#x27;&lt;/span&gt;:&lt;br/&gt;&lt;br/&gt;Â Â Â Â serverÂ =Â multiprocessing.Manager()&lt;br/&gt;&lt;br/&gt;Â Â Â Â xÂ =Â server.Value(&lt;span&gt;&#x27;d&#x27;&lt;/span&gt;,Â 0.0)&lt;br/&gt;&lt;br/&gt;Â Â Â Â arrÂ =Â server.Array(&lt;span&gt;&#x27;i&#x27;&lt;/span&gt;,Â range(10))&lt;br/&gt;&lt;br/&gt;Â Â Â Â lÂ =Â server.list()&lt;br/&gt;&lt;br/&gt;Â Â Â Â dÂ =Â server.dict()&lt;br/&gt;&lt;br/&gt;Â Â Â Â nÂ =Â server.Namespace()&lt;br/&gt;&lt;br/&gt;Â Â Â Â procÂ =Â multiprocessing.Process(target=f,Â args=(x,Â arr,Â l,Â d,Â n))&lt;br/&gt;&lt;br/&gt;Â Â Â Â proc.start()&lt;br/&gt;&lt;br/&gt;Â Â Â Â proc.join()&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(x.value)&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(arr)&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(l)&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(d)&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(n)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;åŒæ­¥å­è¿›ç¨‹æ¨¡å—&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Lockï¼ˆäº’æ–¥é”ï¼‰&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Locké”çš„ä½œç”¨æ˜¯å½“å¤šä¸ªè¿›ç¨‹éœ€è¦è®¿é—®å…±äº«èµ„æºçš„æ—¶å€™ï¼Œé¿å…è®¿é—®çš„å†²çªã€‚åŠ é”ä¿è¯äº†å¤šä¸ªè¿›ç¨‹ä¿®æ”¹åŒä¸€å—æ•°æ®æ—¶ï¼ŒåŒä¸€æ—¶é—´åªèƒ½æœ‰ä¸€ä¸ªä¿®æ”¹ï¼Œå³ä¸²è¡Œçš„ä¿®æ”¹ï¼Œç‰ºç‰²äº†é€Ÿåº¦ä½†ä¿è¯äº†æ•°æ®å®‰å…¨ã€‚LockåŒ…å«ä¸¤ç§çŠ¶æ€â€”â€”é”å®šå’Œéé”å®šï¼Œä»¥åŠä¸¤ä¸ªåŸºæœ¬çš„æ–¹æ³•ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ„é€ æ–¹æ³•ï¼šLock()&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ä¾‹æ–¹æ³•ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;acquire([timeout]): ä½¿çº¿ç¨‹è¿›å…¥åŒæ­¥é˜»å¡çŠ¶æ€ï¼Œå°è¯•è·å¾—é”å®šã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;release(): é‡Šæ”¾é”ã€‚ä½¿ç”¨å‰çº¿ç¨‹å¿…é¡»å·²è·å¾—é”å®šï¼Œå¦åˆ™å°†æŠ›å‡ºå¼‚å¸¸ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;fromÂ multiprocessingÂ importÂ Process,Â Lock&lt;br/&gt;&lt;br/&gt;defÂ l(lock,Â num):&lt;br/&gt;&lt;br/&gt;Â Â Â Â lock.acquire()&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&quot;HelloÂ Num:Â %s&quot;&lt;/span&gt;Â %Â (num))&lt;br/&gt;&lt;br/&gt;Â Â Â Â lock.release()&lt;br/&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;Â __name__Â ==Â &lt;span&gt;&#x27;__main__&#x27;&lt;/span&gt;:&lt;br/&gt;&lt;br/&gt;Â Â Â Â lockÂ =Â Lock()Â Â &lt;span&gt;#Â è¿™ä¸ªä¸€å®šè¦å®šä¹‰ä¸ºå…¨å±€&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â numÂ &lt;span&gt;in&lt;/span&gt;Â range(20):&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Process(target=l,Â args=(lock,Â num)).start()&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;RLockï¼ˆå¯é‡å…¥çš„äº’æ–¥é”(åŒä¸€ä¸ªè¿›ç¨‹å¯ä»¥å¤šæ¬¡è·å¾—å®ƒï¼ŒåŒæ—¶ä¸ä¼šé€ æˆé˜»å¡)&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;RLockï¼ˆå¯é‡å…¥é”ï¼‰æ˜¯ä¸€ä¸ªå¯ä»¥è¢«åŒä¸€ä¸ªçº¿ç¨‹è¯·æ±‚å¤šæ¬¡çš„åŒæ­¥æŒ‡ä»¤ã€‚RLockä½¿ç”¨äº†â€œæ‹¥æœ‰çš„çº¿ç¨‹â€å’Œâ€œé€’å½’ç­‰çº§â€çš„æ¦‚å¿µï¼Œå¤„äºé”å®šçŠ¶æ€æ—¶ï¼ŒRLockè¢«æŸä¸ªçº¿ç¨‹æ‹¥æœ‰ã€‚æ‹¥æœ‰RLockçš„çº¿ç¨‹å¯ä»¥å†æ¬¡è°ƒç”¨acquire()ï¼Œé‡Šæ”¾é”æ—¶éœ€è¦è°ƒç”¨release()ç›¸åŒæ¬¡æ•°ã€‚å¯ä»¥è®¤ä¸ºRLockåŒ…å«ä¸€ä¸ªé”å®šæ± å’Œä¸€ä¸ªåˆå§‹å€¼ä¸º0çš„è®¡æ•°å™¨ï¼Œæ¯æ¬¡æˆåŠŸè°ƒç”¨ acquire()/release()ï¼Œè®¡æ•°å™¨å°†+1/-1ï¼Œä¸º0æ—¶é”å¤„äºæœªé”å®šçŠ¶æ€ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ„é€ æ–¹æ³•ï¼šRLock()&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ä¾‹æ–¹æ³•ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;acquire([timeout])ï¼šåŒLock&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;release(): åŒLock&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Semaphoreï¼ˆä¿¡å·é‡ï¼‰&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¿¡å·é‡æ˜¯ä¸€ä¸ªæ›´é«˜çº§çš„é”æœºåˆ¶ã€‚ä¿¡å·é‡å†…éƒ¨æœ‰ä¸€ä¸ªè®¡æ•°å™¨è€Œä¸åƒé”å¯¹è±¡å†…éƒ¨æœ‰é”æ ‡è¯†ï¼Œè€Œä¸”åªæœ‰å½“å ç”¨ä¿¡å·é‡çš„çº¿ç¨‹æ•°è¶…è¿‡ä¿¡å·é‡æ—¶çº¿ç¨‹æ‰é˜»å¡ã€‚è¿™å…è®¸äº†å¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è®¿é—®ç›¸åŒçš„ä»£ç åŒºã€‚æ¯”å¦‚å•æ‰€æœ‰3ä¸ªå‘ï¼Œé‚£æœ€å¤šåªå…è®¸3ä¸ªäººä¸Šå•æ‰€ï¼Œåé¢çš„äººåªèƒ½ç­‰é‡Œé¢æœ‰äººå‡ºæ¥äº†æ‰èƒ½å†è¿›å»ï¼Œå¦‚æœæŒ‡å®šä¿¡å·é‡ä¸º3ï¼Œé‚£ä¹ˆæ¥ä¸€ä¸ªäººè·å¾—ä¸€æŠŠé”ï¼Œè®¡æ•°åŠ 1ï¼Œå½“è®¡æ•°ç­‰äº3æ—¶ï¼Œåé¢çš„äººå‡éœ€è¦ç­‰å¾…ã€‚ä¸€æ—¦é‡Šæ”¾ï¼Œå°±æœ‰äººå¯ä»¥è·å¾—ä¸€æŠŠé”ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ„é€ æ–¹æ³•ï¼šSemaphore([value])&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ä¾‹æ–¹æ³•ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;acquire([timeout])ï¼šåŒLock&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;release(): åŒLock&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;fromÂ multiprocessingÂ importÂ Process,Â Semaphore&lt;br/&gt;&lt;br/&gt;importÂ time,Â random&lt;br/&gt;&lt;br/&gt;defÂ go_wc(sem,Â user):&lt;br/&gt;&lt;br/&gt;Â Â Â Â sem.acquire()&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;%sÂ å åˆ°ä¸€ä¸ªèŒ…å‘&#x27;&lt;/span&gt;Â %Â user)&lt;br/&gt;&lt;br/&gt;Â Â Â Â time.sleep(random.randint(0,Â 3))&lt;br/&gt;&lt;br/&gt;Â Â Â Â sem.release()&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(user,Â &lt;span&gt;&#x27;OK&#x27;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;Â __name__Â ==Â &lt;span&gt;&#x27;__main__&#x27;&lt;/span&gt;:&lt;br/&gt;&lt;br/&gt;Â Â Â Â semÂ =Â Semaphore(2)&lt;br/&gt;&lt;br/&gt;Â Â Â Â p_lÂ =Â []&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â iÂ &lt;span&gt;in&lt;/span&gt;Â range(5):&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â pÂ =Â Process(target=go_wc,Â args=(sem,Â &lt;span&gt;&#x27;user%s&#x27;&lt;/span&gt;Â %Â i,))&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â p.start()&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â p_l.append(p)&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â iÂ &lt;span&gt;in&lt;/span&gt;Â p_l:&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â i.join()&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Conditionï¼ˆæ¡ä»¶å˜é‡ï¼‰&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥æŠŠConditionç†è§£ä¸ºä¸€æŠŠé«˜çº§çš„é”ï¼Œå®ƒæä¾›äº†æ¯”Lock, RLockæ›´é«˜çº§çš„åŠŸèƒ½ï¼Œå…è®¸æˆ‘ä»¬èƒ½å¤Ÿæ§åˆ¶å¤æ‚çš„çº¿ç¨‹åŒæ­¥é—®é¢˜ã€‚Conditionåœ¨å†…éƒ¨ç»´æŠ¤ä¸€ä¸ªé”å¯¹è±¡ï¼ˆé»˜è®¤æ˜¯RLockï¼‰ï¼Œå¯ä»¥åœ¨åˆ›å»ºCondigtionå¯¹è±¡çš„æ—¶å€™æŠŠçå¯¹è±¡ä½œä¸ºå‚æ•°ä¼ å…¥ã€‚Conditionä¹Ÿæä¾›äº†acquire, releaseæ–¹æ³•ï¼Œå…¶å«ä¹‰ä¸é”çš„acquire, releaseæ–¹æ³•ä¸€è‡´ï¼Œå…¶å®å®ƒåªæ˜¯ç®€å•çš„è°ƒç”¨å†…éƒ¨é”å¯¹è±¡çš„å¯¹åº”çš„æ–¹æ³•è€Œå·²ã€‚Conditionè¿˜æä¾›äº†å…¶ä»–çš„ä¸€äº›æ–¹æ³•ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ„é€ æ–¹æ³•ï¼šCondition([lock/rlock])&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å¯ä»¥ä¼ é€’ä¸€ä¸ªLock/RLockå®ä¾‹ç»™æ„é€ æ–¹æ³•ï¼Œå¦åˆ™å®ƒå°†è‡ªå·±ç”Ÿæˆä¸€ä¸ªRLockå®ä¾‹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ä¾‹æ–¹æ³•ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;acquire([timeout])ï¼šé¦–å…ˆè¿›è¡Œacquireï¼Œç„¶ååˆ¤æ–­ä¸€äº›æ¡ä»¶ã€‚å¦‚æœæ¡ä»¶ä¸æ»¡è¶³åˆ™wait&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;release()ï¼šé‡Šæ”¾ Lock&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;wait([timeout]): è°ƒç”¨è¿™ä¸ªæ–¹æ³•å°†ä½¿çº¿ç¨‹è¿›å…¥Conditionçš„ç­‰å¾…æ± ç­‰å¾…é€šçŸ¥ï¼Œå¹¶é‡Šæ”¾é”ã€‚ä½¿ç”¨å‰çº¿ç¨‹å¿…é¡»å·²è·å¾—é”å®šï¼Œå¦åˆ™å°†æŠ›å‡ºå¼‚å¸¸ã€‚å¤„äºwaitçŠ¶æ€çš„çº¿ç¨‹æ¥åˆ°é€šçŸ¥åä¼šé‡æ–°åˆ¤æ–­æ¡ä»¶ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;notify(): è°ƒç”¨è¿™ä¸ªæ–¹æ³•å°†ä»ç­‰å¾…æ± æŒ‘é€‰ä¸€ä¸ªçº¿ç¨‹å¹¶é€šçŸ¥ï¼Œæ”¶åˆ°é€šçŸ¥çš„çº¿ç¨‹å°†è‡ªåŠ¨è°ƒç”¨acquire()å°è¯•è·å¾—é”å®šï¼ˆè¿›å…¥é”å®šæ± ï¼‰ï¼›å…¶ä»–çº¿ç¨‹ä»ç„¶åœ¨ç­‰å¾…æ± ä¸­ã€‚è°ƒç”¨è¿™ä¸ªæ–¹æ³•ä¸ä¼šé‡Šæ”¾é”å®šã€‚ä½¿ç”¨å‰çº¿ç¨‹å¿…é¡»å·²è·å¾—é”å®šï¼Œå¦åˆ™å°†æŠ›å‡ºå¼‚å¸¸ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;notifyAll(): è°ƒç”¨è¿™ä¸ªæ–¹æ³•å°†é€šçŸ¥ç­‰å¾…æ± ä¸­æ‰€æœ‰çš„çº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹éƒ½å°†è¿›å…¥é”å®šæ± å°è¯•è·å¾—é”å®šã€‚è°ƒç”¨è¿™ä¸ªæ–¹æ³•ä¸ä¼šé‡Šæ”¾é”å®šã€‚ä½¿ç”¨å‰çº¿ç¨‹å¿…é¡»å·²è·å¾—é”å®šï¼Œå¦åˆ™å°†æŠ›å‡ºå¼‚å¸¸ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;importÂ multiprocessing&lt;br/&gt;&lt;br/&gt;importÂ time&lt;br/&gt;&lt;br/&gt;defÂ stage_1(cond):&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;&quot;performÂ firstÂ stageÂ ofÂ work,&lt;br/&gt;&lt;br/&gt;Â Â Â Â thenÂ notifyÂ stage_2Â toÂ continue&lt;br/&gt;&lt;br/&gt;Â Â Â Â &quot;&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â nameÂ =Â multiprocessing.current_process().name&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;Starting&#x27;&lt;/span&gt;,Â name)&lt;br/&gt;&lt;br/&gt;Â Â Â Â withÂ cond:&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;{}Â doneÂ andÂ readyÂ forÂ stageÂ 2&#x27;&lt;/span&gt;.format(name))&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â cond.notify_all()&lt;br/&gt;&lt;br/&gt;defÂ stage_2(cond):&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;&quot;waitÂ forÂ theÂ conditionÂ tellingÂ usÂ stage_1Â isÂ done&quot;&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â nameÂ =Â multiprocessing.current_process().name&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;Starting&#x27;&lt;/span&gt;,Â name)&lt;br/&gt;&lt;br/&gt;Â Â Â Â withÂ cond:&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â cond.wait()&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;{}Â running&#x27;&lt;/span&gt;.format(name))&lt;br/&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;Â __name__Â ==Â &lt;span&gt;&#x27;__main__&#x27;&lt;/span&gt;:&lt;br/&gt;&lt;br/&gt;Â Â Â Â conditionÂ =Â multiprocessing.Condition()&lt;br/&gt;&lt;br/&gt;Â Â Â Â s1Â =Â multiprocessing.Process(name=&lt;span&gt;&#x27;s1&#x27;&lt;/span&gt;,&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â target=stage_1,&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â args=(condition,))&lt;br/&gt;&lt;br/&gt;Â Â Â Â s2_clientsÂ =Â [&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â multiprocessing.Process(&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â name=&lt;span&gt;&#x27;stage_2[{}]&#x27;&lt;/span&gt;.format(i),&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â target=stage_2,&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â args=(condition,),&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â )&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â iÂ &lt;span&gt;in&lt;/span&gt;Â range(1,Â 3)&lt;br/&gt;&lt;br/&gt;Â Â Â Â ]&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â cÂ &lt;span&gt;in&lt;/span&gt;Â s2_clients:&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â c.start()&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â time.sleep(1)&lt;br/&gt;&lt;br/&gt;Â Â Â Â s1.start()&lt;br/&gt;&lt;br/&gt;Â Â Â Â s1.join()&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â cÂ &lt;span&gt;in&lt;/span&gt;Â s2_clients:&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â c.join()&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Eventï¼ˆäº‹ä»¶ï¼‰&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Eventå†…éƒ¨åŒ…å«äº†ä¸€ä¸ªæ ‡å¿—ä½ï¼Œåˆå§‹çš„æ—¶å€™ä¸ºfalseã€‚å¯ä»¥ä½¿ç”¨set()æ¥å°†å…¶è®¾ç½®ä¸ºtrueï¼›æˆ–è€…ä½¿ç”¨clear()å°†å…¶ä»æ–°è®¾ç½®ä¸ºfalseï¼›å¯ä»¥ä½¿ç”¨is_set()æ¥æ£€æŸ¥æ ‡å¿—ä½çš„çŠ¶æ€ï¼›å¦ä¸€ä¸ªæœ€é‡è¦çš„å‡½æ•°å°±æ˜¯wait(timeout=None)ï¼Œç”¨æ¥é˜»å¡å½“å‰çº¿ç¨‹ï¼Œç›´åˆ°eventçš„å†…éƒ¨æ ‡å¿—ä½è¢«è®¾ç½®ä¸ºtrueæˆ–è€…timeoutè¶…æ—¶ã€‚å¦‚æœå†…éƒ¨æ ‡å¿—ä½ä¸ºtrueåˆ™wait()å‡½æ•°ç†è§£è¿”å›ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;importÂ multiprocessing&lt;br/&gt;&lt;br/&gt;importÂ time&lt;br/&gt;&lt;br/&gt;defÂ wait_for_event(e):&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;&quot;WaitÂ forÂ theÂ eventÂ toÂ beÂ setÂ beforeÂ doingÂ anything&quot;&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;wait_for_event:Â starting&#x27;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;Â Â Â Â e.wait()&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;wait_for_event:Â e.is_set()-&amp;gt;&#x27;&lt;/span&gt;,Â e.is_set())&lt;br/&gt;&lt;br/&gt;defÂ wait_for_event_timeout(e,Â t):&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;&quot;WaitÂ tÂ secondsÂ andÂ thenÂ timeout&quot;&lt;/span&gt;&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;wait_for_event_timeout:Â starting&#x27;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;Â Â Â Â e.wait(t)&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;wait_for_event_timeout:Â e.is_set()-&amp;gt;&#x27;&lt;/span&gt;,Â e.is_set())&lt;br/&gt;&lt;br/&gt;&lt;span&gt;if&lt;/span&gt;Â __name__Â ==Â &lt;span&gt;&#x27;__main__&#x27;&lt;/span&gt;:&lt;br/&gt;&lt;br/&gt;Â Â Â Â eÂ =Â multiprocessing.Event()&lt;br/&gt;&lt;br/&gt;Â Â Â Â w1Â =Â multiprocessing.Process(&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â name=&lt;span&gt;&#x27;block&#x27;&lt;/span&gt;,&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â target=wait_for_event,&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â args=(e,),&lt;br/&gt;&lt;br/&gt;Â Â Â Â )&lt;br/&gt;&lt;br/&gt;Â Â Â Â w1.start()&lt;br/&gt;&lt;br/&gt;Â Â Â Â w2Â =Â multiprocessing.Process(&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â name=&lt;span&gt;&#x27;nonblock&#x27;&lt;/span&gt;,&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â target=wait_for_event_timeout,&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â args=(e,Â 2),&lt;br/&gt;&lt;br/&gt;Â Â Â Â )&lt;br/&gt;&lt;br/&gt;Â Â Â Â w2.start()&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;main:Â waitingÂ beforeÂ callingÂ Event.set()&#x27;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;Â Â Â Â time.sleep(3)&lt;br/&gt;&lt;br/&gt;Â Â Â Â e.set()&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&#x27;main:Â eventÂ isÂ set&#x27;&lt;/span&gt;)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å…¶ä»–å†…å®¹&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;multiprocessing.dummy æ¨¡å—ä¸ multiprocessing æ¨¡å—çš„åŒºåˆ«ï¼šdummy æ¨¡å—æ˜¯å¤šçº¿ç¨‹ï¼Œè€Œ multiprocessing æ˜¯å¤šè¿›ç¨‹ï¼Œ api éƒ½æ˜¯é€šç”¨çš„ã€‚æ‰€æœ‰å¯ä»¥å¾ˆæ–¹ä¾¿å°†ä»£ç åœ¨å¤šçº¿ç¨‹å’Œå¤šè¿›ç¨‹ä¹‹é—´åˆ‡æ¢ã€‚multiprocessing.dummyé€šå¸¸åœ¨IOåœºæ™¯å¯ä»¥å°è¯•ä½¿ç”¨ï¼Œæ¯”å¦‚ä½¿ç”¨å¦‚ä¸‹æ–¹å¼å¼•å…¥çº¿ç¨‹æ± ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;fromÂ multiprocessing.dummyÂ importÂ PoolÂ asÂ ThreadPool&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;multiprocessing.dummyä¸æ—©æœŸçš„threadingï¼Œä¸åŒçš„ç‚¹å¥½åƒæ˜¯åœ¨å¤šå¤šæ ¸CPUä¸‹ï¼Œåªç»‘å®šäº†ä¸€ä¸ªæ ¸å¿ƒï¼ˆå…·ä½“æœªè€ƒè¯ï¼‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‚è€ƒæ–‡æ¡£ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;https://docs.python.org/3/library/multiprocessing.html&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;https://www.rddoc.com/doc/Python/3.6.0/zh/library/multiprocessing/&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Pythonå¹¶å‘ä¹‹concurrent.futures&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Pythonæ ‡å‡†åº“ä¸ºæˆ‘ä»¬æä¾›äº†threadingå’Œmultiprocessingæ¨¡å—ç¼–å†™ç›¸åº”çš„å¤šçº¿ç¨‹/å¤šè¿›ç¨‹ä»£ç ã€‚ä»Python3.2å¼€å§‹ï¼Œæ ‡å‡†åº“ä¸ºæˆ‘ä»¬æä¾›äº†concurrent.futuresæ¨¡å—ï¼Œå®ƒæä¾›äº†ThreadPoolExecutorå’ŒProcessPoolExecutorä¸¤ä¸ªç±»ï¼Œå®ç°äº†å¯¹threadingå’Œmultiprocessingçš„æ›´é«˜çº§çš„æŠ½è±¡ï¼Œå¯¹ç¼–å†™çº¿ç¨‹æ± /è¿›ç¨‹æ± æä¾›äº†ç›´æ¥çš„æ”¯æŒã€‚concurrent.futuresåŸºç¡€æ¨¡å—æ˜¯executorå’Œfutureã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Executor&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Executoræ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ƒä¸èƒ½è¢«ç›´æ¥ä½¿ç”¨ã€‚å®ƒä¸ºå…·ä½“çš„å¼‚æ­¥æ‰§è¡Œå®šä¹‰äº†ä¸€äº›åŸºæœ¬çš„æ–¹æ³•ã€‚ThreadPoolExecutorå’ŒProcessPoolExecutorç»§æ‰¿äº†Executorï¼Œåˆ†åˆ«è¢«ç”¨æ¥åˆ›å»ºçº¿ç¨‹æ± å’Œè¿›ç¨‹æ± çš„ä»£ç ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ThreadPoolExecutorå¯¹è±¡&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ThreadPoolExecutorç±»æ˜¯Executorå­ç±»ï¼Œä½¿ç”¨çº¿ç¨‹æ± æ‰§è¡Œå¼‚æ­¥è°ƒç”¨ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;classÂ concurrent.futures.ThreadPoolExecutor(max_workers)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨max_workersæ•°ç›®çš„çº¿ç¨‹æ± æ‰§è¡Œå¼‚æ­¥è°ƒç”¨ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ProcessPoolExecutorå¯¹è±¡&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ThreadPoolExecutorç±»æ˜¯Executorå­ç±»ï¼Œä½¿ç”¨è¿›ç¨‹æ± æ‰§è¡Œå¼‚æ­¥è°ƒç”¨ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;classÂ concurrent.futures.ProcessPoolExecutor(max_workers=None)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨max_workersæ•°ç›®çš„è¿›ç¨‹æ± æ‰§è¡Œå¼‚æ­¥è°ƒç”¨ï¼Œå¦‚æœmax_workersä¸ºNoneåˆ™ä½¿ç”¨æœºå™¨çš„å¤„ç†å™¨æ•°ç›®ï¼ˆå¦‚4æ ¸æœºå™¨max_workeré…ç½®ä¸ºNoneæ—¶ï¼Œåˆ™ä½¿ç”¨4ä¸ªè¿›ç¨‹è¿›è¡Œå¼‚æ­¥å¹¶å‘ï¼‰ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;submit()æ–¹æ³•&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Executorä¸­å®šä¹‰äº†submit()æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯æäº¤ä¸€ä¸ªå¯æ‰§è¡Œçš„å›è°ƒtaskï¼Œå¹¶è¿”å›ä¸€ä¸ªfutureå®ä¾‹ã€‚futureå¯¹è±¡ä»£è¡¨çš„å°±æ˜¯ç»™å®šçš„è°ƒç”¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Executor.submit(fn, *args, **kwargs)&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;fnï¼šéœ€è¦å¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;*args, **kwargsï¼šfnå‚æ•°&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;fromÂ concurrentÂ importÂ futures&lt;br/&gt;&lt;br/&gt;defÂ &lt;span&gt;test&lt;/span&gt;(num):&lt;br/&gt;&lt;br/&gt;Â Â Â Â importÂ time&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â time.ctime(),Â num&lt;br/&gt;&lt;br/&gt;withÂ futures.ThreadPoolExecutor(max_workers=1)Â asÂ executor:&lt;br/&gt;&lt;br/&gt;Â Â Â Â futureÂ =Â executor.submit(&lt;span&gt;test&lt;/span&gt;,Â 1)&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(future.result())&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;map()æ–¹æ³•&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é™¤äº†submitï¼ŒExectuorè¿˜ä¸ºæˆ‘ä»¬æä¾›äº†mapæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªmap(func, *iterables)è¿­ä»£å™¨ï¼Œè¿­ä»£å™¨ä¸­çš„å›è°ƒæ‰§è¡Œè¿”å›çš„ç»“æœæœ‰åºçš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Executor.map(func, *iterables, timeout=None)&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;funcï¼šéœ€è¦å¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;*iterablesï¼šå¯è¿­ä»£å¯¹è±¡ï¼Œå¦‚åˆ—è¡¨ç­‰ã€‚æ¯ä¸€æ¬¡funcæ‰§è¡Œï¼Œéƒ½ä¼šä»iterablesä¸­å–å‚æ•°ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;timeoutï¼šè®¾ç½®æ¯æ¬¡å¼‚æ­¥æ“ä½œçš„è¶…æ—¶æ—¶é—´ï¼Œtimeoutçš„å€¼å¯ä»¥æ˜¯intæˆ–floatï¼Œå¦‚æœæ“ä½œè¶…æ—¶ï¼Œä¼šè¿”å›raisesTimeoutErrorï¼›å¦‚æœä¸æŒ‡å®štimeoutå‚æ•°ï¼Œåˆ™ä¸è®¾ç½®è¶…æ—¶é—´ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;fromÂ concurrentÂ importÂ futures&lt;br/&gt;&lt;br/&gt;defÂ &lt;span&gt;test&lt;/span&gt;(num):&lt;br/&gt;&lt;br/&gt;Â Â Â Â importÂ time&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â time.ctime(),Â num&lt;br/&gt;&lt;br/&gt;dataÂ =Â [1,Â 2,Â 3]&lt;br/&gt;&lt;br/&gt;withÂ futures.ThreadPoolExecutor(max_workers=1)Â asÂ executor:&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;for&lt;/span&gt;Â futureÂ &lt;span&gt;in&lt;/span&gt;Â executor.map(&lt;span&gt;test&lt;/span&gt;,Â data):&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;print&lt;/span&gt;(future)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;shutdown()æ–¹æ³•&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‡Šæ”¾ç³»ç»Ÿèµ„æº,åœ¨Executor.submit()æˆ– Executor.map()ç­‰å¼‚æ­¥æ“ä½œåè°ƒç”¨ã€‚ä½¿ç”¨withè¯­å¥å¯ä»¥é¿å…æ˜¾å¼è°ƒç”¨æ­¤æ–¹æ³•ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Executor.shutdown(wait=True)&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Future&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Futureå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªåœ¨æœªæ¥å®Œæˆçš„æ“ä½œï¼Œè¿™æ˜¯å¼‚æ­¥ç¼–ç¨‹çš„åŸºç¡€ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ‰§è¡Œioæ“ä½œï¼Œè®¿é—®urlæ—¶ï¼ˆå¦‚ä¸‹ï¼‰åœ¨ç­‰å¾…ç»“æœè¿”å›ä¹‹å‰ä¼šäº§ç”Ÿé˜»å¡ï¼Œcpuä¸èƒ½åšå…¶ä»–äº‹æƒ…ï¼Œè€ŒFutureçš„å¼•å…¥å¸®åŠ©æˆ‘ä»¬åœ¨ç­‰å¾…çš„è¿™æ®µæ—¶é—´å¯ä»¥å®Œæˆå…¶ä»–çš„æ“ä½œã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Futureç±»å°è£…äº†å¯è°ƒç”¨çš„å¼‚æ­¥æ‰§è¡Œã€‚Future å®ä¾‹é€šè¿‡ Executor.submit()æ–¹æ³•åˆ›å»ºã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;cancel()ï¼šè¯•å›¾å–æ¶ˆè°ƒç”¨ã€‚å¦‚æœè°ƒç”¨å½“å‰æ­£åœ¨æ‰§è¡Œï¼Œå¹¶ä¸”ä¸èƒ½è¢«å–æ¶ˆï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•å°†è¿”å›Falseï¼Œå¦åˆ™è°ƒç”¨å°†è¢«å–æ¶ˆï¼Œæ–¹æ³•å°†è¿”å›Trueã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;cancelled()ï¼šå¦‚æœæˆåŠŸå–æ¶ˆè°ƒç”¨ï¼Œè¿”å›Trueã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;running()ï¼šå¦‚æœè°ƒç”¨å½“å‰æ­£åœ¨æ‰§è¡Œå¹¶ä¸”ä¸èƒ½è¢«å–æ¶ˆï¼Œè¿”å›Trueã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;done()ï¼šå¦‚æœè°ƒç”¨æˆåŠŸåœ°å–æ¶ˆæˆ–ç»“æŸäº†ï¼Œè¿”å›Trueã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;result(timeout=None)ï¼šè¿”å›è°ƒç”¨è¿”å›çš„å€¼ã€‚å¦‚æœè°ƒç”¨è¿˜æ²¡æœ‰å®Œæˆï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°†ç­‰å¾…è¶…æ—¶ç§’ã€‚å¦‚æœè°ƒç”¨åœ¨è¶…æ—¶ç§’å†…æ²¡æœ‰å®Œæˆï¼Œé‚£ä¹ˆå°±ä¼šæœ‰ä¸€ä¸ªFutures.TimeoutErrorå°†æŠ¥å‡ºã€‚timeoutå¯ä»¥æ˜¯ä¸€ä¸ªæ•´å½¢æˆ–è€…æµ®ç‚¹å‹æ•°å€¼ï¼Œå¦‚æœtimeoutä¸æŒ‡å®šæˆ–è€…ä¸ºNone,ç­‰å¾…æ—¶é—´æ— é™ã€‚å¦‚æœfuturesåœ¨å®Œæˆä¹‹å‰è¢«å–æ¶ˆäº†ï¼Œé‚£ä¹ˆ CancelledError å°†ä¼šæŠ¥å‡ºã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;exception(timeout=None)ï¼šè¿”å›è°ƒç”¨æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå¦‚æœè°ƒç”¨è¿˜æœªå®Œæˆï¼Œè¯¥æ–¹æ³•ä¼šç­‰å¾…timeoutæŒ‡å®šçš„æ—¶é•¿ï¼Œå¦‚æœè¯¥æ—¶é•¿åè°ƒç”¨è¿˜æœªå®Œæˆï¼Œå°±ä¼šæŠ¥å‡ºè¶…æ—¶é”™è¯¯futures.TimeoutErrorã€‚timeoutå¯ä»¥æ˜¯ä¸€ä¸ªæ•´å½¢æˆ–è€…æµ®ç‚¹å‹æ•°å€¼ï¼Œå¦‚æœtimeoutä¸æŒ‡å®šæˆ–è€…ä¸ºNone,ç­‰å¾…æ—¶é—´æ— é™ã€‚å¦‚æœfuturesåœ¨å®Œæˆä¹‹å‰è¢«å–æ¶ˆäº†ï¼Œé‚£ä¹ˆ CancelledError å°†ä¼šæŠ¥å‡ºã€‚å¦‚æœè°ƒç”¨å®Œæˆå¹¶ä¸”æ— å¼‚å¸¸æŠ¥å‡ºï¼Œè¿”å›None.&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;add_done_callback(fn)ï¼šå°†å¯è°ƒç”¨fnæ†ç»‘åˆ°futureä¸Šï¼Œå½“Futureè¢«å–æ¶ˆæˆ–è€…ç»“æŸè¿è¡Œï¼Œfnä½œä¸ºfutureçš„å”¯ä¸€å‚æ•°å°†ä¼šè¢«è°ƒç”¨ã€‚å¦‚æœfutureå·²ç»è¿è¡Œå®Œæˆæˆ–è€…å–æ¶ˆï¼Œfnå°†ä¼šè¢«ç«‹å³è°ƒç”¨ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;wait(fs, timeout=None, return_when=ALL_COMPLETED)&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ç­‰å¾…fsæä¾›çš„ Future å®ä¾‹(possibly created by different Executor instances) è¿è¡Œç»“æŸã€‚è¿”å›ä¸€ä¸ªå‘½åçš„2å…ƒé›†åˆï¼Œåˆ†è¡¨ä»£è¡¨å·²å®Œæˆçš„å’Œæœªå®Œæˆçš„&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;return_when è¡¨æ˜ä»€ä¹ˆæ—¶å€™å‡½æ•°åº”è¯¥è¿”å›ã€‚å®ƒçš„å€¼å¿…é¡»æ˜¯ä¸€ä¸‹å€¼ä¹‹ä¸€ï¼š&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;FIRST_COMPLETED :å‡½æ•°åœ¨ä»»ä½•futureç»“æŸæˆ–è€…å–æ¶ˆçš„æ—¶å€™è¿”å›ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;FIRST_EXCEPTION ï¼šå‡½æ•°åœ¨ä»»ä½•futureå› ä¸ºå¼‚å¸¸ç»“æŸçš„æ—¶å€™è¿”å›ï¼Œå¦‚æœæ²¡æœ‰futureæŠ¥é”™ï¼Œæ•ˆæœç­‰äº&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ALL_COMPLETED :å‡½æ•°åœ¨æ‰€æœ‰futureç»“æŸåæ‰ä¼šè¿”å›ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;as_completed(fs, timeout=None)ï¼šå‚æ•°æ˜¯ä¸€ä¸ª Future å®ä¾‹åˆ—è¡¨ï¼Œè¿”å›å€¼æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œåœ¨è¿è¡Œç»“æŸåäº§å‡º Futureå®ä¾‹ ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨ç¤ºä¾‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;fromÂ concurrent.futuresÂ importÂ ThreadPoolExecutor,Â &lt;span&gt;wait&lt;/span&gt;,Â as_completed&lt;br/&gt;&lt;br/&gt;fromÂ timeÂ importÂ sleep&lt;br/&gt;&lt;br/&gt;fromÂ randomÂ importÂ randint&lt;br/&gt;&lt;br/&gt;defÂ return_after_5_secs(num):&lt;br/&gt;&lt;br/&gt;Â Â Â Â sleep(randint(1,Â 5))&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â &lt;span&gt;&quot;ReturnÂ ofÂ {}&quot;&lt;/span&gt;.format(num)&lt;br/&gt;&lt;br/&gt;poolÂ =Â ThreadPoolExecutor(5)&lt;br/&gt;&lt;br/&gt;futuresÂ =Â []&lt;br/&gt;&lt;br/&gt;&lt;span&gt;for&lt;/span&gt;Â xÂ &lt;span&gt;in&lt;/span&gt;Â range(5):&lt;br/&gt;&lt;br/&gt;Â Â Â Â futures.append(pool.submit(return_after_5_secs,Â x))&lt;br/&gt;&lt;br/&gt;&lt;span&gt;print&lt;/span&gt;(1)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;for&lt;/span&gt;Â xÂ &lt;span&gt;in&lt;/span&gt;Â as_completed(futures):&lt;br/&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;(x.result())&lt;br/&gt;&lt;br/&gt;&lt;span&gt;print&lt;/span&gt;(2)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‚è€ƒé“¾æ¥ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;https://pythonhosted.org/futures&lt;span/&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>24c605af89f3d4dc990c84869d92b166</guid>
<title>äº‘åŸç”ŸDevOpsï¼Œç ”å‘ä¸€ä½“åŒ–çš„è·µè¡Œåˆ©å™¨</title>
<link>https://toutiao.io/k/wcnoqnd</link>
<content:encoded>&lt;div&gt;&lt;body id=&quot;readabilityBody&quot;&gt;
  &lt;noscript&gt;æ‚¨éœ€è¦å…è®¸è¯¥ç½‘ç«™æ‰§è¡Œ JavaScript&lt;/noscript&gt;
  
  
  
  
  
&lt;/body&gt;
&lt;/div&gt;</content:encoded>
</item>
</channel></rss>