<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>开发者头条</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>cb1fa5d148466beec874d4388b71a0b6</guid>
<title>常见分布式系统设计图解</title>
<link>https://toutiao.io/k/osewvaz</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;article id=&quot;post-6364&quot; class=&quot;posts-entry fbox post-6364 post type-post status-publish format-standard hentry category-recommended category-system-architecture tag-722 tag-698 tag-724 tag-723 tag-363&quot;&gt;
&lt;header class=&quot;entry-header&quot;&gt;
&lt;h1 class=&quot;entry-title&quot;&gt;常见分布式系统设计图解（汇总）&lt;/h1&gt;
&lt;/header&gt;

&lt;div class=&quot;entry-content&quot;&gt;

&lt;p&gt;这一篇是给我记录的那些常见分布式系统设计图解系列的文章做一个汇总，也提供一个访问入口。&lt;/p&gt;



&lt;p&gt;&lt;img class=&quot;wp-image-6365&quot; src=&quot;https://www.raychase.net/wp-content/uploads/2020/09/soothing-sound-system.jpg&quot; alt=&quot;&quot; srcset=&quot;https://www.raychase.net/wp-content/uploads/2020/09/soothing-sound-system.jpg 319w, https://www.raychase.net/wp-content/uploads/2020/09/soothing-sound-system-300x226.jpg 300w&quot; sizes=&quot;(max-width: 319px) 100vw, 319px&quot;/&gt;如同我在第一篇文中说的那样，自己在学习各种各样分布式系统的过程中，做了一些笔记，也有自己的理解，把它们放到一起，用一张图选择最主要的部分来阐释，从我的角度来说，是能够帮助理解和记忆的。事实上，遇到的很多各种各样的分布式系统，绝大多数都逃不出那最常见的十几种，也就是说，逃不出这些 “套路” 和 “玩法”。这就是把它们整理成一个系列的初衷。&lt;/p&gt;



&lt;p&gt;我的想法是，这些文章大致分为两个部分，第一部分是偏重应用的分布式系统，第二部分是偏重基础设施的分布式系统。每一部分的列表是可能继续增长的，我会把它们维护在这里。&lt;/p&gt;



&lt;p&gt;应用部分：&lt;/p&gt;







&lt;p&gt;基础设施部分：&lt;/p&gt;







&lt;p&gt;此外，还有一些系统在我看来是经典的，但是却没有记录在此：&lt;/p&gt;



&lt;ul&gt;&lt;li&gt;“相对” 简单一些的系统，比如一般意义上的分布式缓存；&lt;/li&gt;&lt;li&gt;很多核心要素上面都已经包括了的系统，再单独拿出来缺少特异性，比如一些图片分享系统；&lt;/li&gt;&lt;li&gt;有一些系统具有典型性，但是缺乏 “分布式” 的特性，比如电影院的订票系统；&lt;/li&gt;&lt;li&gt;还有一些系统，使用组件分布伴随控制流和数据流的图示来描述它的核心内容，我觉得是不合适的，如分布式锁。&lt;/li&gt;&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;&lt;font&gt;文章未经特殊标明皆为本人原创，未经许可不得用于任何商业用途，转载请保持完整性并注明来源链接 &lt;a href=&quot;https://www.raychase.net/6364&quot;&gt;《四火的唠叨》&lt;/a&gt;&lt;/font&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p class=&quot;os-share-box&quot;&gt;&lt;i title=&quot;Share with Weibo&quot; class=&quot;iconfont os-icon os-weibo&quot;&gt;&lt;svg aria-hidden=&quot;true&quot;&gt;&lt;use xlink:href=&quot;#os-weibo&quot;/&gt;&lt;/svg&gt;&lt;/i&gt;&lt;i title=&quot;Share with WeChat&quot; class=&quot;iconfont os-icon os-wechat&quot;&gt;&lt;svg aria-hidden=&quot;true&quot;&gt;&lt;use xlink:href=&quot;#os-wechat&quot;/&gt;&lt;/svg&gt;&lt;/i&gt;&lt;i title=&quot;Share with QQZone&quot; class=&quot;iconfont os-icon os-qqzone&quot;&gt;&lt;svg aria-hidden=&quot;true&quot;&gt;&lt;use xlink:href=&quot;#os-qqzone&quot;/&gt;&lt;/svg&gt;&lt;/i&gt;&lt;i title=&quot;Share with Facebook&quot; class=&quot;iconfont os-icon os-facebook&quot;&gt;&lt;svg aria-hidden=&quot;true&quot;&gt;&lt;use xlink:href=&quot;#os-facebook&quot;/&gt;&lt;/svg&gt;&lt;/i&gt;&lt;i title=&quot;Share with Twitter&quot; class=&quot;iconfont os-icon os-twitter&quot;&gt;&lt;svg aria-hidden=&quot;true&quot;&gt;&lt;use xlink:href=&quot;#os-twitter&quot;/&gt;&lt;/svg&gt;&lt;/i&gt;&lt;i title=&quot;Share with Google&quot; class=&quot;iconfont os-icon os-google&quot;&gt;&lt;svg aria-hidden=&quot;true&quot;&gt;&lt;use xlink:href=&quot;#os-google&quot;/&gt;&lt;/svg&gt;&lt;/i&gt;&lt;/p&gt;&lt;p id=&quot;os-popup-placeholder&quot;&gt;&lt;span&gt;×&lt;/span&gt;&lt;i class=&quot;iconfont os-icon os-wechat&quot;&gt;&lt;svg aria-hidden=&quot;true&quot;&gt;&lt;use xlink:href=&quot;#os-wechat&quot;/&gt;&lt;/svg&gt;&lt;/i&gt;Scan to share with WeChat&lt;/p&gt;

&lt;/div&gt;
&lt;/article&gt;

&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>5e25c70e0b1eb9bd10983c58b6f70aae</guid>
<title>面试官：如果你是双十一技术负责人，你要怎么准备？</title>
<link>https://toutiao.io/k/wsy1c4f</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;大家好，我是李哥。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;进阿里以来一直听说一句话：“没有经过双11峰值验证过的技术都是玩具”。虽然有些夸张，但是不可否认的是，一年一度的双11，是技术最好的孵化器，也是技术同学最向往的阅兵场。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我很荣幸，担任今年年中大促的技术一号位，也就是技术负责人。今天就来跟大家聊一聊我们作为一名技术&lt;span&gt;在大促中&lt;/span&gt;要去做哪些技术保障，以及如何去做。也希望大家看完，就像身临其境的感受了一次大促。也感谢大家的关注、点赞、分享。&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mp-common-profile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;Mzg4NTAxNDk2NQ==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/ZKpiaL39K1KKQFXvP3qsqweVqFCRezGrfxdeFda4lrKkCUEZUR2b6womfMN30f0nfGmU6iadaPKrYKEcgz7UCxMQ/0?wx_fmt=png&quot; data-nickname=&quot;李哥技术&quot; data-alias=&quot;laoheijava&quot; data-signature=&quot;江湖人称李哥，蚂蚁金服铲屎官架构师。 专注于后端技术栈，持续输出体系干货，用心输出每一篇文章。&quot; data-from=&quot;0&quot; data-is_biz_ban=&quot;0&quot;/&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我将故事分为三大部分：&lt;strong&gt;&lt;span&gt;事前&lt;/span&gt;&lt;/strong&gt;、&lt;span&gt;&lt;strong&gt;事中&lt;/strong&gt;&lt;/span&gt;、&lt;span&gt;&lt;strong&gt;事后&lt;/strong&gt;&lt;/span&gt;，最后我们再&lt;span&gt;&lt;strong&gt;总结&lt;/strong&gt;&lt;/span&gt;。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.1945337620578778&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ZKpiaL39K1KI48NuqAQwImegCNOw5DRjNQZczPxbvJycqxicOKUr4dHgfGFiaagzU1UoJZHibKGyeibL4WrWGlB2diaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1244&quot;/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;span&gt;事前&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;KO会议&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;首先在事前，我们第一件事就是参加KO会议(Kick Off Meeting，项目启动会)。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;它主要会传达以下几个信息：&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;大促的背景与意义&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;大促的目的与目标&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;业务的具体玩法以及具体时间&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;大促的人员组织架构&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;也就是说，在这里，我们技术需要从中获取如下信息：&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;业务预期DAU&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;业务预期DAT&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;具体有哪些活动玩法&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;活动玩法的具体时间段&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;哪些商品参与大促，是否有第三方商品&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;这些商品的库存分别是多少&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;沟通&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;KO大会上，可能会是一个全局的，整体的，对于一些细节，下来我们需要与业务进行沟通，比如活动粒度是多少？宣传力度是多少？业务的预期DAU与DAT如何评估的？是否准确？等。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这一步的目的是确认你的信息是无误的，以及了解一些细节。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;流量评估&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;你需要清晰的知道，当前阶段每天的流量、DAU、DAT是多少，业务评估是多少，技术侧评估又是多少，当前阶段的性能是否能支撑即将来临的大促，如果不能，需要做出什么调整。&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;优化？怎么优化？优化哪些业务？现在优化还来得及吗？&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;扩容？扩容哪些服务？扩容到多少？为什么要扩容到这么多机器？&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;降级？什么业务降级？业务是否支持降级？什么时候降级？&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这么多问题，看起来现在就需要对业务进行一次梳理了。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;业务梳理&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们需要梳理出哪些业务是核心业务，哪些业务是非核心业务，哪些业务是可降级业务，这类数据大致可以从上一次大促获取。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;再加上上次大促到本次大促期间所产生的新项目(业务项目或技术项目)进行梳理，是否影响核心链路？是否进行了压测？压测结果如何？这些项目可能存在什么技术风险？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;你的服务依赖哪些下游服务，这些下游服务又是如何依赖的，这是个很麻烦的事情，因为随着业务变大，依赖关系会变得非常复杂，很难判断与梳理。尽管很难，但是这个依赖关系仍然要梳理清楚，只有梳理清楚了，才有全链路。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;压测&lt;span/&gt;&lt;/h3&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8451327433628318&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ZKpiaL39K1KIeVUsw7VRvCopSDiazS1urAEnJIFC75zVJSaLwno1CjsWos1ddMrzOiatmicDH5SFbYen4wUk0rWNFA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1356&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;有了业务梳理和业务指标，那么就在技术上要能够支撑到这个业务级别，那就是压测了。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;到目前为止有两种压测方式：&lt;/p&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;不扩容压测&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;扩容后压测&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;不扩容压测一般不推荐，这种方式需要对业务指标打折作为目标来进行压测，最后在扩容的时候还是需要压测一次，因为局部压测不能完完全全代表整体压测，如果整体压测出现问题，那么所有的局部压测都是白费苦工。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;扩容压测，就是指容量扩容到大促支撑位，然后进行压测。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;值得注意的是，压测一定是针对生产！&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;有些同学对开发环境、测试环境、预发环境、灰度环境、仿真环境进行压测，从而推断出生产环境的性能。这是万万不可取的，因为环境不同，服务器的性能不一样，生产环境和其他环境的DB性能也不一样，还有一些中间件性能也不一样。所以，压测一定要在生产环境压测，但是有一个缺点，就是会对线上的正常流量产生影响，这也是不可避免的，所以压测的时候，一般都会选择流量不大的时候进行，尽量减少对正常流量的影响，一旦产生影响，请立即停止压测。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;还有就是压测需要流量爬坡，切记不可一步到位，按照一定比例逐渐施压，每一个坡度都观察几分钟，没问题继续施压，达到目标后观察几分钟没问题直接停止压测，不可恋战！&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;为什么不恋战？因为大促的流量趋势就是那几分钟，长久的施压对服务器的性能有一定影响，比如CPU飙高啊，频繁GC啊等，所以在在压测过程中还需要不断观察系统整体性能，还有就是也会影响到正常的用户访问。举个例子，奥运会举重，明明只需要保证举起来三秒即可，你训练的时候难道要举起来三分钟吗？&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;对于压测，我们后面再单独拎一篇文章出来，这里就不过多讲述了，敬请期待！&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;限流&lt;span/&gt;&lt;/h3&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.702846975088968&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ZKpiaL39K1KIeVUsw7VRvCopSDiazS1urABf2IVDq8TQ7JW0B36ibAE1AAJqKR8GTicvZicvNIicVtEElRoX6nATiaxFQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1124&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;压测完了后，我们需要输出一份压测报告，比如商详支持多少qps，下单页支持多少qps，下单支持多少tps等。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这些数据说明了，我们的系统，有多少实例，哪个接口能承受的最大峰值是多少。那么我们就需要对这个接口或这些接口做限流。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4993788819875776&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ZKpiaL39K1KIeVUsw7VRvCopSDiazS1urAaBPRJSWhL7E9RVVfRI30OKATLwg8d2pZWEewibpsVV0G8kKqVBpkcIw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1610&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这里我们说一下单机限流与集群限流，单机限流指的是每台机器自身的限流，集群限流指的是整个服务集群的限流。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;单机限流的目的是保护服务本身，保证自身服务不被流量击垮。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;集群限流的目的是保护下游服务，保证下游服务不被当前服务击垮。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;比如A-&amp;gt;B-&amp;gt;C，每个服务三台实例，整个B集群最大能支持150qps，C集群最大能支持100qps，那也就是说B服务需要设置集群限流100qps用来保证C，B的三个实例需要设置单机限流50qps用来保证自身不被击垮。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;所以如果流量不倾斜的话，B服务每个实例会有33qps，如果倾斜的话，最大50qps。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;我们回到大促限流，所以，我们需要拿着我们的压测报告，针对我们的服务做单机限流与集群限流。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;降级&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;限流后，我们能够保证服务本身不被击垮，保证下游不被击垮，但是，这不是我们的目标，我们的目标是要保证大促期间商详没问题，下单支付没问题呀！&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;所以，我们要降级，一些比较耗性能的业务降级，一些边缘业务降级，给核心业务让路。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;然后就需要梳理这些业务，有哪些需要降级的业务？什么时候降级？由谁来降级？什么时候恢复等。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;应急预案与演练&lt;span/&gt;&lt;/h3&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.75&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ZKpiaL39K1KIeVUsw7VRvCopSDiazS1urAvTP06LA2Fy9N4VYNMxWAWuYwWOD0B2wo82ZcMZ0E86eqkl8ibMfibpBQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;当我们保证了核心链路的正常后，我们还需要考虑异常的情况。对于电商系统来说，要考虑到整个生命周期异常的可能性，比如：打开商详页失败、打开订单渲染页失败、下单失败、履约失败等。说的都比较概括，我们当时准备了上千个预案！&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;淘系双11大促，为了安全起见，是不会有任何依赖外部系统的，因为第三方系统都无法承受住淘系大促期间的流量波。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;如果你的电商系统有依赖外部系统的，那么你还要梳理出哪些渠道哪些商品会参与本次大促，这块也需要针对渠道做压测与限流，有可能渠道由于体系较小不支持压测，这时候你可能要考虑到在履约的时候做蓄洪与泄洪，使用真实流量来冲击渠道，用于检验渠道的性能。另外在有第三方参与的情况下一定要有每个渠道的应急预案，对应给用户展示的文案是什么都是不一样的。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;最重要的是要与合作伙伴共同制定一份SLA(Service Level Agreement)：服务级别协议，服务提供商和客户之间的协议，用于确定所需的服务和预期的服务水平，对互联网公司来说是网站服务可用性的保证。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;在这里SLA约定了客户对于合作伙伴的线上运维、计划运维、业务连续性以及故障处理能⼒的要求。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;做完预案后，要通过预案平台进行演练，或者人工演练，要当做到熟能生巧，大促出问题后才会显得临危不乱。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8152777777777778&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ZKpiaL39K1KIeVUsw7VRvCopSDiazS1urAeBibZrg5HosA3jKJQvrBDFvHUTprUSXTVD1xn3H4muEK2HYCavnemVg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;720&quot;/&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;br/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;/h3&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;监控&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;大促出问题？你怎么知道这块出了问题？这时候需要监控，需要告警。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;大促大盘监控、全链路监控、核心链路监控、压测监控、限流监控、资源监控、网关监控、渠道履约监控......&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.44841537424140254&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ZKpiaL39K1KIeVUsw7VRvCopSDiazS1urAjT6jDNsT4k3d8JbDGAeTOdXWqq99jKRqPQG7T4qEibyU8U8mQFhap1w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1483&quot;/&gt;&lt;/figure&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;br/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;&lt;/h3&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;规范&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;大促期间是需要制定很多规矩，比如发布红线、红线问责、预案执行规范、紧急扩容规范、紧急发布规范......，我们这里统称大促变更规范吧。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;无以规矩不成方圆，制定这些规范的目的是能让我们明确问题发生后我们应该按照什么流程去应急。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span/&gt;其他&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;还有很多其他的一些杂七杂八的，比如大促前每周周会、大促值班人员排班、大促作战室、问题的上升制度等。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;到这里，我们万事俱备，只欠东风了。&lt;/p&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.49774774774774777&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/ZKpiaL39K1KIeVUsw7VRvCopSDiazS1urA4LsjS4CWh6KBBbQibccRayzu3PibwCpsuXQjHMoXXoGOcHXRqIvL6Itw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;444&quot;/&gt;&lt;/figure&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mp-common-profile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;Mzg4NTAxNDk2NQ==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/ZKpiaL39K1KKQFXvP3qsqweVqFCRezGrfxdeFda4lrKkCUEZUR2b6womfMN30f0nfGmU6iadaPKrYKEcgz7UCxMQ/0?wx_fmt=png&quot; data-nickname=&quot;李哥技术&quot; data-alias=&quot;laoheijava&quot; data-signature=&quot;江湖人称李哥，蚂蚁金服铲屎官架构师。 专注于后端技术栈，持续输出体系干货，用心输出每一篇文章。&quot; data-from=&quot;0&quot; data-is_biz_ban=&quot;0&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>e4e50ab502903aa789bcdc0bbef373f4</guid>
<title>优质网站同好者周刊（第 082 期） | 倾城博客</title>
<link>https://toutiao.io/k/eiz5qdn</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;content&quot;&gt;&lt;p&gt;&lt;a href=&quot;https://nicelinks.site/?utm_source=weekly&quot;&gt;倾城之链&lt;/a&gt;作为一个开放平台，旨在云集全球&lt;strong&gt;优秀网站&lt;/strong&gt;，探索互联网中更广阔的世界。此周刊，将汇聚过去一周&lt;a href=&quot;https://nicelinks.site/?utm_source=weekly&quot;&gt;倾城&lt;/a&gt;所收录的内容，以飨同好；欢迎推荐或自荐（仅限有独立域名的网站，可以是二级域名）。您如果要了解收录要求，请参见&lt;a href=&quot;https://nicelinks.site/about?utm_source=weekly&quot;&gt;关于倾城&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;&lt;strong&gt;备注&lt;/strong&gt;：本周刊&lt;strong&gt;每周五&lt;/strong&gt;生成，首发于个人微信公众号&lt;a href=&quot;https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzI5MDIwMzM2Mg==&amp;amp;action=getalbum&amp;amp;album_id=1530765143352082433&amp;amp;scene=173&amp;amp;from_msgid=2650641087&amp;amp;from_itemidx=1&amp;amp;count=3#wechat_redirect&quot;&gt;晚晴幽草轩&lt;/a&gt;、博客&lt;a href=&quot;https://www.jeffjade.com&quot;&gt;晚晴幽草轩&lt;/a&gt;，以及&lt;a href=&quot;https://forum.lovejade.cn/&quot;&gt;悠然宜想亭&lt;/a&gt;社区；此一键生成脚本基于 &lt;a href=&quot;https://nicelinks.site/post/602d30aad099ff5688618591&quot;&gt;Deno&lt;/a&gt; 编写，并在 Github 开源：&lt;a href=&quot;https://github.com/nicejade/nicelinks-weekly&quot;&gt;nicejade/nicelinks-weekly&lt;/a&gt;。&lt;/p&gt;&lt;p&gt;&lt;strong&gt;标签&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/tags/%E4%B9%A6%E7%B1%8D&quot;&gt;&lt;code&gt;书籍&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E7%A4%BE%E5%8C%BA&quot;&gt;&lt;code&gt;社区&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E5%8F%91%E7%8E%B0&quot;&gt;&lt;code&gt;发现&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Literal is the best platform to collectively explore the ideas of the world&#x27;s greatest authors.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/literal.club.png?x-oss-process=style/png2jpg&quot; alt=&quot;倾城之链 - Literal.club | Track your reading and discover new books&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;推荐语&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/redirect?url=https://literal.club/&quot;&gt;Literal&lt;/a&gt;，是一款用于&lt;code&gt;发现&lt;/code&gt;、&lt;code&gt;整理&lt;/code&gt;和&lt;code&gt;讨论&lt;/code&gt;书籍的应用（多为英文内容）；主要是社区分享，借此机会与志同道合的读者互动，获得推荐。产品做的很完整简洁好看，支持多端 Web，iOS 以及 Android。该产品方将其描述为：专为书籍打造的空间。它具有以下特征：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;欢迎所有书籍——实体书、电子书、有声读物等；&lt;/li&gt;&lt;li&gt;轻松将您的个人图书馆整理到书架上；&lt;/li&gt;&lt;li&gt;支持从 Goodreads 导入您现有的图书馆；&lt;/li&gt;&lt;li&gt;支持扫描书内条码；&lt;/li&gt;&lt;li&gt;更喜欢使用暗模式？会为您提供保障；&lt;/li&gt;&lt;li&gt;可以设定个人阅读目标；&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;除此之外，还有很多其他功能，如您感兴趣，可以前往 &lt;a href=&quot;https://nicelinks.site/redirect?url=https://literal.club/pages/meet-literal&quot;&gt;探索 Literal&lt;/a&gt; 以了解更多。刘慈欣在&lt;a href=&quot;https://read.lovejade.cn/p/60c0b03f125d9905c97b40f9&quot;&gt;《三体》 扉页&lt;/a&gt;：“&lt;strong&gt;阅读是拓展人生空间的一个主要途径，每本书都是一扇门，通向我们没有涉足的新世界，在阅读中，我们经历了我们本来不可能在有生之年经历的事情，游历了哪些我们的肉身永远无法到达的地方，愿大家在阅读中建立美好的生活&lt;/strong&gt;”。── 闲暇时，相比于沉醉在短视频，阅读优质好书，将会带给您更多深刻的收获。&lt;/p&gt;&lt;p&gt;一本书的内容有不同的含义，这取决于阅读它的人。每个人的想法不同，这很好。您可以深入了解构成一本书的基本要素，分享让您感动的时刻，并讨论您认为引人注目的想法。&lt;code&gt;literal&lt;/code&gt; 希望为讨论创造一个基础，将知识汇集在一起，同时使其更易于访问和掌握。Literal 是一个将人们围绕吸引他们的主题和想法联系起来的地方。&lt;/p&gt;&lt;p&gt;── 出自&lt;a href=&quot;https://nicelinks.site/post/6319e2c392583d0ec9c367bb&quot;&gt;倾城之链 - Literal.club | Track your reading and discover new books&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;标签&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/tags/%E8%87%AA%E5%8A%A8%E5%8C%96&quot;&gt;&lt;code&gt;自动化&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E7%9B%91%E6%8E%A7&quot;&gt;&lt;code&gt;监控&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&quot;&gt;&lt;code&gt;机器学习&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Slash your time to detect, troubleshoot and resolve infrastructure performance anomalies. Netdata: architected for speed, automated for easy.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/www.netdata.cloud.png?x-oss-process=style/png2jpg&quot; alt=&quot;倾城之链 - Netdata: Monitoring and troubleshooting transformed - Netdata&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;推荐语&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/redirect?url=https://gnetdata.cloud/&quot;&gt;Netdata&lt;/a&gt; ，是高保真基础设施监控和故障排除工具。它为速度而设计，自动化方便。可以做到：缩短检测、故障排除和解决基础架构性能问题的时间。借助永久免费的零配置工具，专家和初学者都可以更轻松地进行基础设施监控和故障排除。&lt;/p&gt;&lt;p&gt;Netdata 的&lt;strong&gt;分布式实时监控代理&lt;/strong&gt;从零配置的系统、硬件、容器和应用程序中收集数千个指标。它在您的所有物理/虚拟服务器、容器、云部署和边缘/IoT 设备上永久运行，并且在事件发生中期完全安全地安装在您的系统上，无需任何准备。&lt;/p&gt;&lt;p&gt;您可以在大多数 Linux 发行版（Ubuntu、Debian、CentOS 等）、容器平台（Kubernetes 集群、Docker）和许多其他操作系统（FreeBSD、macOS）上安装 Netdata。不需要 &lt;code&gt;sudo&lt;/code&gt;。&lt;/p&gt;&lt;p&gt;Netdata 由系统管理员、DevOps 工程师和开发人员设计，用于收集所有内容、帮助您可视化指标、解决复杂的性能问题，并使数据与监控堆栈的其余部分互操作。它具有以下功能特征：&lt;/p&gt;&lt;h3 id=&quot;高保真故障排除&quot;&gt;&lt;a href=&quot;#%E9%AB%98%E4%BF%9D%E7%9C%9F%E6%95%85%E9%9A%9C%E6%8E%92%E9%99%A4&quot; aria-label=&quot;高保真故障排除 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;strong&gt;高保真故障排除&lt;/strong&gt;&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;独特的单秒粒度；&lt;/li&gt;&lt;li&gt;无限量收集、存储和可视化的指标；&lt;/li&gt;&lt;li&gt;以令人难以置信的细节深入研究数千个指标中的任何一个；&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;实时可视化&quot;&gt;&lt;a href=&quot;#%E5%AE%9E%E6%97%B6%E5%8F%AF%E8%A7%86%E5%8C%96&quot; aria-label=&quot;实时可视化 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;strong&gt;实时可视化&lt;/strong&gt;&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;无与伦比的 1ms 收集到可视化延迟；&lt;/li&gt;&lt;li&gt;实时查看您的整个基础架构；&lt;/li&gt;&lt;li&gt;即时有意义的仪表板；&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;自动部署&quot;&gt;&lt;a href=&quot;#%E8%87%AA%E5%8A%A8%E9%83%A8%E7%BD%B2&quot; aria-label=&quot;自动部署 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;strong&gt;自动部署&lt;/strong&gt;&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;单线部署；&lt;/li&gt;&lt;li&gt;自动检测数千个数据收集源；&lt;/li&gt;&lt;li&gt;自动化可视化；&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;所有指标的机器学习&quot;&gt;&lt;a href=&quot;#%E6%89%80%E6%9C%89%E6%8C%87%E6%A0%87%E7%9A%84%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0&quot; aria-label=&quot;所有指标的机器学习 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;strong&gt;所有指标的机器学习&lt;/strong&gt;&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;机器学习驱动的无监督异常检测；&lt;/li&gt;&lt;li&gt;在边缘进行 ML 训练和推理，开销最小且额外存储成本为零；&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;强大的根本原因分析&quot;&gt;&lt;a href=&quot;#%E5%BC%BA%E5%A4%A7%E7%9A%84%E6%A0%B9%E6%9C%AC%E5%8E%9F%E5%9B%A0%E5%88%86%E6%9E%90&quot; aria-label=&quot;强大的根本原因分析 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;strong&gt;强大的根本原因分析&lt;/strong&gt;&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;用于无监督变化模式检测的 Correlation Advisor；&lt;/li&gt;&lt;li&gt;Anomaly Advisor 用于在整个基础架构中进行无监督异常检测；&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;内置数据隐私&quot;&gt;&lt;a href=&quot;#%E5%86%85%E7%BD%AE%E6%95%B0%E6%8D%AE%E9%9A%90%E7%A7%81&quot; aria-label=&quot;内置数据隐私 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;strong&gt;内置数据隐私&lt;/strong&gt;&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;仅存储在边缘的数据，在您自己的基础架构上；&lt;/li&gt;&lt;li&gt;没有集中的数据收集，没有数据风险；&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;最低的拥有成本&quot;&gt;&lt;a href=&quot;#%E6%9C%80%E4%BD%8E%E7%9A%84%E6%8B%A5%E6%9C%89%E6%88%90%E6%9C%AC&quot; aria-label=&quot;最低的拥有成本 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;strong&gt;最低的拥有成本&lt;/strong&gt;&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;永久免费监控和故障排除；&lt;/li&gt;&lt;li&gt;内置专业知识，无需购买；&lt;/li&gt;&lt;li&gt;只需一个活动部件即可维护和更新；&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;始终保持开源&quot;&gt;&lt;a href=&quot;#%E5%A7%8B%E7%BB%88%E4%BF%9D%E6%8C%81%E5%BC%80%E6%BA%90&quot; aria-label=&quot;始终保持开源 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;strong&gt;始终保持开源&lt;/strong&gt;&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;专为通用部署而设计：裸机、云虚拟机和物联网；&lt;/li&gt;&lt;li&gt;经过充满活力的社区的实战考验；&lt;/li&gt;&lt;li&gt;惊人的支持网络；&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;监控堆栈集成&quot;&gt;&lt;a href=&quot;#%E7%9B%91%E6%8E%A7%E5%A0%86%E6%A0%88%E9%9B%86%E6%88%90&quot; aria-label=&quot;监控堆栈集成 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;&lt;strong&gt;监控堆栈集成&lt;/strong&gt;&lt;/h3&gt;&lt;ul&gt;&lt;li&gt;将指标流式传输到任何行业标准的时间序列数据库；&lt;/li&gt;&lt;li&gt;向流行的协作平台发送警报；&lt;/li&gt;&lt;li&gt;开放 API 可供第三方查询；&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;a href=&quot;https://nicelinks.site/redirect?url=https://gnetdata.cloud/&quot;&gt;Netdata&lt;/a&gt; ，自动化和机器学习辅助的监控和故障排除，这是 Netdata 真正展示其突出价值的地方：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;如果可以收集一个指标，它将是：每个节点有 2,000 多个自动检测指标和 100 多个预配置警报。&lt;/li&gt;&lt;li&gt;革命性的机器学习在边缘工作，以了解每台服务器上的异常情况——在新出现的问题损害业务之前提醒您。&lt;/li&gt;&lt;li&gt;借助 Netdata Cloud，您可以利用跨节点 Metric Correlations 进行基础架构范围的变更检测，或利用 Anomaly Advisor 进行自下而上的无监督异常检测。&lt;/li&gt;&lt;/ul&gt;&lt;h3 id=&quot;背后故事&quot;&gt;&lt;a href=&quot;#%E8%83%8C%E5%90%8E%E6%95%85%E4%BA%8B&quot; aria-label=&quot;背后故事 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;背后故事&lt;/h3&gt;&lt;p&gt;早在 2013 年，在 Costa Tsaousis 担任首席运营官的公司，有相当比例的基于云的交易根本无法通过，对他们的业务表现造成了破坏。&lt;/p&gt;&lt;p&gt;为了找出原因，Costa 和他的团队尝试了当时所有的故障排除工具。没有一个人能够准确地指出问题所在。正如 Costa 后来写道：&quot;我无法相信，监控系统提供的指标如此之少，分辨率如此之低，规模如此之大，运行成本如此之高。&quot; 沮丧之余，他开始建立自己的工具。从头开始。他的决定将耗费很多很多的深夜和周末，并且永远改变了基础设施监控和故障排除的方法和经济性。&lt;/p&gt;&lt;h3 id=&quot;netdata-的愿景&quot;&gt;&lt;a href=&quot;#netdata-%E7%9A%84%E6%84%BF%E6%99%AF&quot; aria-label=&quot;netdata 的愿景 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Netdata 的愿景&lt;/h3&gt;&lt;p&gt;随着 IT 基础设施变得越来越复杂，人们不断发展的解决方案，将不断减轻开发人员、SRE、DevOps 和系统管理员的负担。就像 Linux 一样，Netdata 代理将始终保持&lt;a href=&quot;https://nicelinks.site/redirect?url=https://github.com/netdata/netdata&quot;&gt;开源&lt;/a&gt;。Netdata 完全致力于以社区为先的方法，拥有数百名贡献者、数千名 GitHub 观星者和数百万用户（60.4K Star @2022/09/08），包括亚马逊、谷歌、IBM、微软和英伟达等公司。其愿景是：&lt;strong&gt;建立一个能够解决运行世界的技术问题的全球社区&lt;/strong&gt;。&lt;/p&gt;&lt;p&gt;── 出自&lt;a href=&quot;https://nicelinks.site/post/6319daee92583d0ec9c367b9&quot;&gt;倾城之链 - Netdata: Monitoring and troubleshooting transformed - Netdata&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;标签&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/tags/%E6%A1%86%E6%9E%B6&quot;&gt;&lt;code&gt;框架&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/JavaScript&quot;&gt;&lt;code&gt;JavaScript&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E8%B7%A8%E5%B9%B3%E5%8F%B0&quot;&gt;&lt;code&gt;跨平台&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;NativeScript empowers you to access native APIs from JavaScript directly. Currently iOS and Android runtimes are provided for rich mobile development across a variety of diverse use cases.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/nativescript.org.png?x-oss-process=style/png2jpg&quot; alt=&quot;倾城之链 - NativeScript | Empower JavaScript with native APIs&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;推荐语&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/redirect?url=https://nativescript.org/&quot;&gt;NativeScript&lt;/a&gt; ，一款让你可以用 JavaScript 来直接写 Android、iOS 本地应用程序的框架。使您能够直接从 JavaScript 访问本机 API。此外。NativeScript 允许使用各种框架或模板搭建项目，来启动您的应用程序开发；诸如：&lt;a href=&quot;https://nicelinks.site/post/5b1a221c0526c920d6dfaada&quot;&gt;Vue&lt;/a&gt;、 &lt;a href=&quot;https://nicelinks.site/post/5b1294b5e93ed2618cfac134&quot;&gt;React&lt;/a&gt;、 &lt;a href=&quot;https://nicelinks.site/post/62a9c2ad90509e23cea772c0&quot;&gt;Svelte&lt;/a&gt; 等（当然，也可以不使用模版）。&lt;/p&gt;&lt;pre&gt;&lt;code class=&quot;language-bash&quot;&gt;ns create myNativeApp --vue
ns create myNativeApp --vue --ts // for vue with typescript
ns create myNativeApp --react
ns create myNativeApp --js
ns create myNativeApp --svelte
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;NativeScript 的代码，与网页开发的代码很相似，都是基于 JavaScript 处理业务逻辑，以 CSS 编写样式；不同的是 NativeScript 使用 XML 来描述页面结构（NativeScript 封装了自己的 UI 库）。&lt;/p&gt;&lt;p&gt;NativeScript 应用程序，直接运行在设备上，并由运行在应用程序内部的 JavaScript 虚拟机解释；这意味着 NativeScript 应用程序不受访问本机设备 Api 或硬件的限制，因此任何应用程序都可以编写为 NativeScript 应用。理论上是这样的，但是 NativeScript 应用程序是在 JavaScript 虚拟机中运行的，所以在应用程序和裸机之间有一个额外的抽象层（尽管很小）。要从设备中提取每一点性能，所以对于图形密集的游戏，NativeScript 并不是很不适合。&lt;/p&gt;&lt;p&gt;与 NativeScript 类似的框架有：&lt;a href=&quot;https://nicelinks.site/post/5b37d29e187e143b63cf01f0&quot;&gt;Flutter&lt;/a&gt;、&lt;a href=&quot;https://nicelinks.site/redirect?url=https://reactnative.dev/&quot;&gt;React Native&lt;/a&gt; 等。相比 Flutter，无需学习新的语言（Dart）；相比 React Native，NativeScript 并没有限制一定要基于 &lt;a href=&quot;https://nicelinks.site/post/5b1294b5e93ed2618cfac134&quot;&gt;React&lt;/a&gt; 来开发。该项目在 &lt;a href=&quot;https://github.com/NativeScript/NativeScript&quot;&gt;Github NativeScript&lt;/a&gt; 开源（拥有 22K Star @2022/09/07）；关于其运行原理、好处与缺点，感兴趣的朋友可以前往 Github 分析代码以了解更多。&lt;/p&gt;&lt;p&gt;── 出自&lt;a href=&quot;https://nicelinks.site/post/63188d6cc0922e0e572bde89&quot;&gt;倾城之链 - NativeScript | Empower JavaScript with native APIs&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;标签&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/tags/Vue&quot;&gt;&lt;code&gt;Vue&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/TypeScript&quot;&gt;&lt;code&gt;TypeScript&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/Web%E5%BC%80%E5%8F%91&quot;&gt;&lt;code&gt;Web开发&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;The Vue Store that you will enjoy using. 🍍 Intuitive, type safe, light and flexible Store for Vue using the composition api with DevTools support.&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/pinia.vuejs.org.png?x-oss-process=style/png2jpg&quot; alt=&quot;倾城之链 - Pinia | The Vue Store that you will enjoy using&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;推荐语&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/redirect?url=https://pinia.vuejs.org/&quot;&gt;Pinia&lt;/a&gt; 直观、类型安全且灵活的 Vue Store，使用组合 API 和 DevTools 支持，是全新的 &lt;a href=&quot;https://nicelinks.site/post/5b1a221c0526c920d6dfaada&quot;&gt;Vue&lt;/a&gt; 状态管理工具；适用于 Vue 2 和 Vue 3。Pinia 与 Vue 的关系，可以将其类比为 &lt;a href=&quot;https://nicelinks.site/post/5b1294b5e93ed2618cfac134&quot;&gt;Redux&lt;/a&gt; 之于 React，Vuex 之于 &lt;a href=&quot;https://nicelinks.site/post/5b1a221c0526c920d6dfaada&quot;&gt;Vue&lt;/a&gt; 。Pinia 是 Vuex 的继承者，如果您使用之后，会发现它比 Vuex 更简单、易于上手。Pinia 具有以下功能特征：&lt;/p&gt;&lt;h3 id=&quot;直观&quot;&gt;&lt;a href=&quot;#%E7%9B%B4%E8%A7%82&quot; aria-label=&quot;直观 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;💡直观&lt;/h3&gt;&lt;p&gt;商店就像组件一样熟悉。API 旨在让您编写组织良好的商店。&lt;/p&gt;&lt;h3 id=&quot;类型安全&quot;&gt;&lt;a href=&quot;#%E7%B1%BB%E5%9E%8B%E5%AE%89%E5%85%A8&quot; aria-label=&quot;类型安全 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;🔑类型安全&lt;/h3&gt;&lt;p&gt;类型是推断出来的，这意味着即使在 JavaScript 中商店也可以为您提供自动完成功能！&lt;/p&gt;&lt;h3 id=&quot;️-开发工具支持&quot;&gt;&lt;a href=&quot;#%EF%B8%8F-%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E6%94%AF%E6%8C%81&quot; aria-label=&quot;️ 开发工具支持 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;⚙️ 开发工具支持&lt;/h3&gt;&lt;p&gt;Pinia 与 Vue devtools 挂钩，为您提供增强的 Vue 2 和 Vue 3 开发体验。&lt;/p&gt;&lt;h3 id=&quot;-可扩展&quot;&gt;&lt;a href=&quot;#-%E5%8F%AF%E6%89%A9%E5%B1%95&quot; aria-label=&quot; 可扩展 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;🔌 可扩展&lt;/h3&gt;&lt;p&gt;响应存储更改以通过事务、本地存储同步等扩展 Pinia。&lt;/p&gt;&lt;h3 id=&quot;-模块化设计&quot;&gt;&lt;a href=&quot;#-%E6%A8%A1%E5%9D%97%E5%8C%96%E8%AE%BE%E8%AE%A1&quot; aria-label=&quot; 模块化设计 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;🏗 模块化设计&lt;/h3&gt;&lt;p&gt;构建多个商店并让您的捆绑程序代码自动拆分它们。&lt;/p&gt;&lt;h3 id=&quot;-极轻&quot;&gt;&lt;a href=&quot;#-%E6%9E%81%E8%BD%BB&quot; aria-label=&quot; 极轻 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;📦 极轻&lt;/h3&gt;&lt;p&gt;Pinia 重约 1.5kb，您甚至会忘记它的存在。&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;https://nicelinks.site/redirect?url=https://pinia.vuejs.org/&quot;&gt;Pinia&lt;/a&gt; 最初是在 2019 年 11 月左右，重新设计使用 Composition API 的 Vue Store 外观的实验。从那时起，最初的原则仍然相同，但 Pinia 适用于 Vue 2 和 Vue 3 ，并且不需要你使用组合 API。除了安装和 SSR 之外，两者的 API 都是相同的，并且这些文档针对 Vue3 ，并在必要时提供有关 Vue2 的注释，以便 Vue 2 和 Vue 3 用户可以阅读。&lt;/p&gt;&lt;h3 id=&quot;为什么要使用-pinia&quot;&gt;&lt;a href=&quot;#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8-pinia&quot; aria-label=&quot;为什么要使用 pinia permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;为什么要使用 Pinia？&lt;/h3&gt;&lt;p&gt;Pinia 是 Vue 的存储库，它允许您跨组件/页面共享状态。如果您熟悉 Composition API，您可能会认为您已经可以使用简单的 &lt;code&gt;export const state = reactive({})&lt;/code&gt;. 这对于单页应用程序来说是正确的，但如果它是服务器端呈现的，则会将您的应用程序暴露给&lt;strong&gt;安全漏洞&lt;/strong&gt;。但即使在小型单页应用程序中，您也可以从使用 Pinia 中获得很多好处：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;&lt;strong&gt;开发工具支持&lt;/strong&gt;&lt;ul&gt;&lt;li&gt;跟踪动作、突变的时间表；&lt;/li&gt;&lt;li&gt;Store 出现在使用它们的组件中；&lt;/li&gt;&lt;li&gt;时间旅行和更容易的调试；&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;热模块更换&lt;/strong&gt;&lt;ul&gt;&lt;li&gt;在不重新加载页面的情况下修改您的商店；&lt;/li&gt;&lt;li&gt;在开发时保持任何现有状态；&lt;/li&gt;&lt;/ul&gt;&lt;/li&gt;&lt;li&gt;&lt;strong&gt;插件&lt;/strong&gt;：使用插件扩展 Pinia 功能；&lt;/li&gt;&lt;li&gt;为 JS 用户提供适当的 TypeScript 支持或&lt;strong&gt;自动完成功能&lt;/strong&gt;；&lt;/li&gt;&lt;li&gt;支持服务器端渲染支持（SSR）；&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;a href=&quot;https://nicelinks.site/redirect?url=https://pinia.vuejs.org/&quot;&gt;Pinia&lt;/a&gt; （发音为 &lt;code&gt;/piːnjʌ/&lt;/code&gt;，如英语中的“peenya”）是最接近 &lt;em&gt;piña&lt;/em&gt;（西班牙语中的&lt;em&gt;菠萝&lt;/em&gt;）的词，它是一个有效的包名称。菠萝实际上是一组单独的花朵，它们结合在一起形成多个水果。与商店类似，每一家都是独立诞生的，但最终都是相互联系的。它也是一种美味的热带水果，原产于南美洲。&lt;/p&gt;&lt;h3 id=&quot;与-vuex-的比较&quot;&gt;&lt;a href=&quot;#%E4%B8%8E-vuex-%E7%9A%84%E6%AF%94%E8%BE%83&quot; aria-label=&quot;与 vuex 的比较 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;与 Vuex 的比较&lt;/h3&gt;&lt;p&gt;Pinia 最初是为了探索 Vuex 的下一次迭代可能会是什么样子，结合了 Vuex5 核心团队讨论中的许多想法。最终，Pinia 团队意识到 Pinia 已经实现了在 Vuex 5 中想要的大部分内容，并决定实现它取而代之的是新的建议。与 Vuex 相比，Pinia 提供了一个更简单的 API，具有更少的仪式，提供了 Composition-API 风格的 API，最重要的是，在与 &lt;a href=&quot;https://nicelinks.site/post/6278fdeaac00ce3f9b11a8ef&quot;&gt;TypeScript&lt;/a&gt; 一起使用时具有可靠的类型推断支持。&lt;/p&gt;&lt;p&gt;── 出自&lt;a href=&quot;https://nicelinks.site/post/631813c3c0922e0e572bde81&quot;&gt;倾城之链 - Pinia | The Vue Store that you will enjoy using&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;标签&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/tags/%E6%95%88%E7%8E%87&quot;&gt;&lt;code&gt;效率&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E8%AE%BE%E8%AE%A1%E5%B8%88&quot;&gt;&lt;code&gt;设计师&lt;/code&gt;&lt;/a&gt; · &lt;a href=&quot;https://nicelinks.site/tags/%E5%85%8D%E8%B4%B9&quot;&gt;&lt;code&gt;免费&lt;/code&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;关键字&lt;/strong&gt;：shortcuts, shortcuts.design, Figma shortcuts mac, Figma shortcuts windows, all Figma shortcuts mac, all Figma shortcuts windows, figma keyboard shortcuts, windows shortcuts, sublime shortcuts, figma hotkeys, figma zoom to selection, all shortcuts, design shortcuts, shortcuts overview&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;Shortcuts.design is the ultimate shortcut reference for designers. Charge your workflow with all the shortcuts of your favorite tools like Figma and Windows in one place 🚀&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://oss.nicelinks.site/shortcuts.design.png?x-oss-process=style/png2jpg&quot; alt=&quot;倾城之链 - Shortcuts.design | Every shortcut for designers in one place 🚀&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;推荐语&lt;/strong&gt;：&lt;a href=&quot;https://nicelinks.site/redirect?url=https://shortcuts.design/&quot;&gt;Shortcuts.design&lt;/a&gt; ，一款应用程序「快捷方式」参考的网站；主要针对设计、开发、生产力相关。Shortcuts.design 旨在在一个地方，以简单明了的方式，列出了设计师和开发者需要的快捷方式。此外，该项目的创建者 &lt;a href=&quot;https://nicelinks.site/redirect?url=https://www.michelvanheest.com/&quot;&gt;Michel&lt;/a&gt; ，将其打造成为集中且可搜索的在线数据库；因此，不仅可查阅、检索应用的「快捷方式」，而且可以基于 Twitter、电子邮件或 GitHub 添加新工具或提交反馈。&lt;/p&gt;&lt;p&gt;对于开发者而言，这款 Web 应用的功能，相对有些单薄；因为查看应用「快捷键」，可以从应用本身来操作；比如跨平台代码编辑器 &lt;a href=&quot;https://nicelinks.site/post/5af55777979f626ea3d37917&quot;&gt;Vs Code&lt;/a&gt;，通过 &lt;code&gt;⌘ K S&lt;/code&gt; 按键即可；信息非常全，而且可以直接更改。但，对于一些不太熟悉这些的朋友，相信还是有些价值。&lt;/p&gt;&lt;p&gt;── 出自&lt;a href=&quot;https://nicelinks.site/post/63172de2c0922e0e572bde7e&quot;&gt;倾城之链 - Shortcuts.design | Every shortcut for designers in one place 🚀&lt;/a&gt;&lt;/p&gt;&lt;p&gt;对倾城之链感兴趣的朋友，可通过 Web，小程序，快应用等渠道进行访问(后续将支持更多，如 VsCode 插件，Chrome 扩展等)。您有任何问题，欢迎随时向我们反馈（您可以通过官网反馈渠道，或添加如下客服微信），🤲 。&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;https://image.nicelinks.site/%E5%80%BE%E5%9F%8E%E4%B9%8B%E9%93%BE-%E5%BE%AE%E4%BF%A1-mini.jpeg&quot; alt=&quot;倾城之链 - 客服微信&quot;/&gt;&lt;/p&gt;&lt;h2 id=&quot;本期文末寄语&quot;&gt;&lt;a href=&quot;#%E6%9C%AC%E6%9C%9F%E6%96%87%E6%9C%AB%E5%AF%84%E8%AF%AD&quot; aria-label=&quot;本期文末寄语 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;本期文末寄语&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;人生到处知何似，应似飞鸿踏雪泥&lt;/strong&gt;。&lt;br/&gt;泥上偶然留指爪，鸿飞那复计东西。&lt;br/&gt;老僧已死成新塔，坏壁无由见旧题。&lt;br/&gt;往日崎岖还记否，路长人困蹇驴嘶。&lt;br/&gt;──宋 · 苏轼《和子由渑池怀旧》&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;a href=&quot;https://nicelinks.site/?utm_source=weekly&quot;&gt;倾城之链&lt;/a&gt;作为一个开放平台，旨在云集全球&lt;strong&gt;优秀网站&lt;/strong&gt;，探索互联网中更广阔的世界；在这里，你可以轻松发现、学习、分享更多有用或有趣的事物。&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img src=&quot;https://image.nicelinks.site/nicelinks-miniprogram-code.jpeg?imageView2/1/w/250/h/250/interlace/1/ignore-error/1&quot; alt=&quot;小程序码 - 倾城之链&quot;/&gt;&lt;/p&gt;&lt;h2 id=&quot;您可能感兴趣的文章&quot;&gt;&lt;a href=&quot;#%E6%82%A8%E5%8F%AF%E8%83%BD%E6%84%9F%E5%85%B4%E8%B6%A3%E7%9A%84%E6%96%87%E7%AB%A0&quot; aria-label=&quot;您可能感兴趣的文章 permalink&quot; class=&quot;anchor before&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;您可能感兴趣的文章&lt;/h2&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>718c4dae7920b3ed013ab3fd462b35ba</guid>
<title>一分钟说完JSONP请求，面试满分答案</title>
<link>https://toutiao.io/k/loufi6b</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                           autoTypeSetting24psection&amp;#10;                          &quot; id=&quot;js_content&quot;&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;Hi~，今天我们来聊聊面试官很喜欢问，但是平时开发又没什么卵用的JSONP请求吧😫&lt;/strong&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;何为JSONP&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;JSONP是JSON with Padding的略称，JSONP为民间提出的一种跨域解决方案，通过客户端的script标签发出的请求方式。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;那请求何必做得如此麻烦，直接使用ajax做请求岂不美哉，这里便要涉及到一个同源和跨域的问题，往下。&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;同源请求和跨域请求&lt;/span&gt;&lt;/h2&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;同源策略，它是由Netscape网景公司提出的一个著名的安全策略。&lt;br/&gt;复制代码&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;现在所有支持JavaScript 的浏览器都会使用这个策略。所谓同源是指，域名，协议，端口相同。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;而所有非同源的请求（即 &lt;strong&gt;域名，协议，端口&lt;/strong&gt; 其中一种或多种不相同），都会被作为跨域请求，浏览器会将其非同源的响应数据丢弃。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;这里可以理解为是浏览器在搞事情，服务端确确实实有返回数据，浏览器接收到返回的数据，发现我们请求的是一个非同源的数据，浏览器再将其响应报文丢弃掉。&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong&gt;而通过一些标签发出的请求则不会被进行同源检查，比如script标签，img标签等等，本文讲述JSONP便是通过script标签做的请求。&lt;/strong&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;JSONP的实现流程&lt;/span&gt;&lt;/h2&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;图示：&lt;/span&gt;&lt;/h4&gt;&lt;figure data-tool=&quot;mdnice编辑器&quot;&gt;&lt;img data-ratio=&quot;1.4582441113490363&quot; data-type=&quot;other&quot; data-w=&quot;467&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/bwG40XYiaOKmtLE5YthLdI38EN7Rdlu4nl9uKRfrZKye89ashgP0uicmzIniaCktIic8WhwAGHJpHq8FQhVr9b5NEg/640?wx_fmt=jpeg&quot;/&gt;&lt;/figure&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;流程：&lt;/span&gt;&lt;/h4&gt;&lt;ol data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;在发请求先，准备一个全局的接收函数&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;window&lt;/span&gt;.myCallback = &lt;span&gt;(&lt;span&gt;res&lt;/span&gt;)=&amp;gt;&lt;/span&gt;{   &lt;span&gt;//声明一个全局函数 &#x27;callback&#x27;，用于接收响应数据&lt;/span&gt;&lt;br/&gt;&lt;span&gt;console&lt;/span&gt;.log(res)&lt;br/&gt;}&lt;br/&gt;复制代码&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;在html创建script标签，发出请求&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&amp;lt;&lt;span&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;....&lt;br/&gt;&lt;span&gt;&amp;lt;&lt;span&gt;script&lt;/span&gt;&amp;gt;  &lt;br/&gt; &lt;span&gt;window&lt;/span&gt;.myCallback = &lt;span&gt;(&lt;span&gt;res&lt;/span&gt;)=&amp;gt;&lt;/span&gt;{   &lt;span&gt;//这里为上一步定义的全局函数&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;console&lt;/span&gt;.log(res)&lt;br/&gt; }&lt;br/&gt;&amp;lt;/&lt;span&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;&lt;span&gt;script&lt;/span&gt; &lt;span&gt;url&lt;/span&gt;=&lt;span&gt;&quot;xxx?callback=myCallback&quot;&lt;/span&gt;&amp;gt;&lt;br/&gt;   &lt;span&gt;//script标签的请求必须在写在定义全局函数之后&lt;/span&gt;&lt;br/&gt;   &lt;span&gt;//这里需将全局函数的函数名作为参数callback的value传递&lt;/span&gt;&lt;br/&gt;   &lt;span&gt;//这里callback这个键名是前后端约定好的&lt;/span&gt;&lt;br/&gt;&amp;lt;/&lt;span&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;br/&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;复制代码&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;服务端接收到请求，将如下数据相应回&lt;/p&gt;&lt;pre&gt;&lt;code&gt;myCallback({   &lt;span&gt;//一个函数的调用，将数据作为参数传递进去，再将整个函数的调用返回给客户端&lt;/span&gt;&lt;br/&gt;&lt;span&gt;name&lt;/span&gt;:&lt;span&gt;&#x27;ahreal&#x27;&lt;/span&gt;,&lt;br/&gt;&lt;span&gt;age&lt;/span&gt;:&lt;span&gt;18&lt;/span&gt;&lt;br/&gt;})&lt;br/&gt;复制代码&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;客户端接收到服务端的相应，相当于：&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&amp;lt;&lt;span&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;....&lt;br/&gt;&lt;span&gt;&amp;lt;&lt;span&gt;script&lt;/span&gt;&amp;gt;  &lt;br/&gt; &lt;span&gt;window&lt;/span&gt;.myCallback = &lt;span&gt;(&lt;span&gt;res&lt;/span&gt;)=&amp;gt;&lt;/span&gt;{   &lt;span&gt;//这里为上一步定义的全局函数&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;console&lt;/span&gt;.log(res)&lt;br/&gt; }&lt;br/&gt;&amp;lt;/&lt;span&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;&lt;span&gt;script&lt;/span&gt;&amp;gt;       &lt;span&gt;//将接收到的数据作为script标签里面的内容展开执行&lt;/span&gt;&lt;br/&gt;    myCallback({     &lt;br/&gt;        &lt;span&gt;name&lt;/span&gt;:&lt;span&gt;&#x27;ahreal&#x27;&lt;/span&gt;,&lt;br/&gt;        &lt;span&gt;age&lt;/span&gt;:&lt;span&gt;18&lt;/span&gt;&lt;br/&gt;    })      &lt;br/&gt;&amp;lt;/&lt;span&gt;script&lt;/span&gt;&amp;gt;&lt;/span&gt; &lt;br/&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;body&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&amp;lt;/&lt;span&gt;html&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br/&gt;复制代码&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;控制台输出&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;JSONP和AJAX请求的异同&lt;/span&gt;&lt;/h2&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;相同点：&lt;/span&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;使用的目的一致，都是客户端向服务端请求数据，将数据拿回客户端进行处理。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;不同点：&lt;/span&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdnice编辑器&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ajax请求是一种官方推出的请求方式，通过xhr对象去实现，jsonp是民间发明，script标签实现的请求。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ajax是一个异步请求，jsonp是一个同步请求&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ajax存在同源检查，jsonp不存在同源检查，后端无需做解决跨域的响应头。&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ajax支持各种请求的方式，而jsonp只支持get请求&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ajax的使用更加简便，而jsonp的使用较为麻烦。&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;面试&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;到这里，JSONP的相关概念，已经阐述完毕，面试官问你JSONP请求的时候，两步走，1. JSONP是什么 2. JSONP怎么做。&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;面试官：说说JSONP请求吧。&lt;br/&gt;我：JSONP请求首先是为了解决跨域问题而存在的一种民间解决方案balabala...&lt;br/&gt;    浏览器存在同源安全机制balabala...&lt;br/&gt;    通过标签的形式发请求balabala...&lt;br/&gt;    需要和后端同学进行约束balabala...&lt;br/&gt;    只能使用get请求balabala...&lt;br/&gt;复制代码&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;答道这里JSONP这道题你已经回答了80分了，如果这时候你能够蹦出一句：&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;emm...我曾经使用原生js封装过一个jsonp的插件，balabala...&lt;br/&gt;复制代码&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;那么你将会是100分的回答，那很多同学可能会问，&lt;/p&gt;&lt;pre data-tool=&quot;mdnice编辑器&quot;&gt;&lt;code&gt;可是我没封装过JSONP的插件啊喂！&lt;br/&gt;复制代码&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdnice编辑器&quot;&gt;别着急，我为你准备了另外一篇封装JSONP请求插件的博客，里面完整的阐述了思路和代码的实现。我非常建议你好好读一下，这将对你学习JSONP的请求有巨大的帮助。&lt;em/&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section data-tool=&quot;mdnice编辑器&quot;&gt;&lt;span&gt;关于本文&lt;/span&gt;&lt;/section&gt;&lt;h1 data-v-a4949a24=&quot;&quot;&gt;&lt;span&gt;作者:为什么学不完啊&lt;/span&gt;&lt;/h1&gt;&lt;p&gt;&lt;span&gt;https://juejin.cn/post/6844903976505344013&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdnice编辑器&quot;&gt;&lt;strong/&gt;&lt;br/&gt;&lt;/section&gt;&lt;p data-darkmode-color-16057140139831=&quot;rgb(162, 162, 162)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(68, 68, 68)&quot; data-style=&quot;padding-top: 7px; padding-bottom: 7px; color: rgb(68, 68, 68); font-size: 14px; line-height: 1.8; font-family: &amp;quot;Helvetica Neue&amp;quot;, Helvetica, &amp;quot;Lucida Grande&amp;quot;, Arial, &amp;quot;Hiragino Sans GB&amp;quot;, 微软雅黑, &amp;quot;WenQuanYi Micro Hei&amp;quot;, STHeiti, SimSun, sans-serif; text-align: center;&quot;&gt;&lt;span data-darkmode-color-16057140139831=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(63, 63, 63)&quot; data-style=&quot;color: rgb(63, 63, 63); font-family: monospace; font-size: 20px; letter-spacing: 0.544px; white-space: pre-wrap; widows: 1; caret-color: rgb(51, 51, 51);&quot;&gt;The End&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;如果你觉得这篇内容对你挺有启发，我想请你帮我三个小忙：&lt;/span&gt;&lt;/section&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-darkmode-color-16057140139831=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(0,0,0)&quot; data-style=&quot;padding-right: 10px; padding-left: 10px; font-size: 16px; color: black; line-height: 1.6; letter-spacing: 0px; word-break: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &amp;quot;PingFang SC&amp;quot;, Cambria, Cochin, Georgia, Times, &amp;quot;Times New Roman&amp;quot;, serif;&quot;&gt;&lt;section&gt;&lt;span data-darkmode-color-16057140139831=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(89, 89, 89)&quot;&gt;1、点个 &lt;span data-darkmode-color-16057140139831=&quot;rgb(71, 193, 168)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(71, 193, 168)&quot;&gt;「在看」&lt;/span&gt;，让更多的人也能看到这篇内容&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span data-darkmode-color-16057140139831=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(89, 89, 89)&quot;&gt;2、关注官网 &lt;span data-darkmode-color-16057140139831=&quot;rgb(71, 193, 168)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(71, 193, 168)&quot;&gt;https://muyiy.cn&lt;/span&gt;，让我们成为长期关系&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span data-darkmode-color-16057140139831=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(89, 89, 89)&quot;&gt;3、关注公众号「高级前端进阶」，公众号后台回复 &lt;span data-darkmode-color-16057140139831=&quot;rgb(71, 193, 168)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(71, 193, 168)&quot;&gt;「加群」&lt;/span&gt; ，加入我们一起学习并送你精心整理的高级前端面试题。&lt;/span&gt;&lt;/section&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mp-common-profile data-index=&quot;0&quot; data-id=&quot;MzA4Nzg0MDM5Nw==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/sz_mmbiz_png/H8M5QJDxMHpg1ClH18gOQIicISIoSybyDNK203zFMpSM7jHdovb4elgdqNoy6Bylk7XicC6Rpj5QrCv3FkOpR6tw/0?wx_fmt=png&quot; data-nickname=&quot;高级前端进阶&quot; data-alias=&quot;FrontendGaoji&quot; data-signature=&quot;网易 &amp;amp; 蚂蚁前端，专注前端进阶领域，已帮助无数前端跳槽涨薪。每日一题「Daily-Interview-Question」 Github 收获近 25000 颗小星星，各公司面试官都在使用。接下来带你走进高级前端的世界，在进阶的路上，共勉！&quot; data-origin_num=&quot;48&quot; data-is_biz_ban=&quot;0&quot; data-isban=&quot;0&quot; class=&quot;js_wx_tap_highlight&quot; data-from=&quot;2&quot; has-insert-preloading=&quot;1&quot;/&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdnice编辑器&quot; data-darkmode-color-16057140139831=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(89, 89, 89)&quot; data-style=&quot;padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: rgb(89, 89, 89);&quot;&gt;&lt;a class=&quot;weapp_text_link&quot; data-miniprogram-appid=&quot;wx27c980b913cbfb08&quot; data-miniprogram-path=&quot;pages/index/index?_um_campaign=5ec14536978eea0825f4eb6f&amp;amp;_um_channel=5ec14536978eea0825f4eb70&quot; data-miniprogram-nickname=&quot;高级前端面试&quot; data-miniprogram-type=&quot;text&quot; data-miniprogram-servicetype=&quot;0&quot; data-darkmode-bgcolor-15950741730771=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-15950741730771=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-15950741730771=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-15950741730771=&quot;rgb(0,0,0)&quot; data-darkmode-color-15963792901125=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-15963792901125=&quot;rgb(0,0,0)&quot; data-darkmode-bgcolor-16018219266315=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16018219266315=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16018219266315=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16018219266315=&quot;rgb(58, 58, 58)&quot; data-darkmode-bgcolor-16020008769986=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16020008769986=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16020008769986=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16020008769986=&quot;rgb(58, 58, 58)&quot; data-darkmode-color-16021670869911=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16021670869911=&quot;rgb(58, 58, 58)&quot; data-darkmode-bgcolor-16021670869911=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16021670869911=&quot;rgb(255, 255, 255)&quot; data-darkmode-bgcolor-16030305897056=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16030305897056=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16030305897056=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16030305897056=&quot;rgb(58, 58, 58)&quot; data-darkmode-color-16057140139831=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(58, 58, 58)&quot; wah-hotarea=&quot;click&quot; href=&quot;&quot;&gt;》》面试官都在用的题库，快来看看《&lt;/a&gt;《&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot; data-darkmode-color-16057140139831=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(89, 89, 89)&quot; data-style=&quot;padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: rgb(89, 89, 89);&quot;&gt;&lt;/p&gt;&lt;/section&gt;&lt;section data-darkmode-color-16030305897056=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16030305897056=&quot;rgb(63, 63, 63)&quot; data-style=&quot;color: rgb(63, 63, 63); font-size: 16px; font-family: Avenir, -apple-system-font, 微软雅黑, sans-serif;&quot; data-darkmode-color-16057140139831=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(63, 63, 63)&quot;&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-darkmode-color-16030305897056=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16030305897056=&quot;rgb(89, 89, 89)&quot; data-style=&quot;padding-right: 10px; padding-left: 10px; line-height: 1.6; word-break: break-word; text-align: left; font-family: Optima-Regular, Optima, PingFangSC-light, PingFangTC-light, &amp;quot;PingFang SC&amp;quot;, Cambria, Cochin, Georgia, Times, &amp;quot;Times New Roman&amp;quot;, serif; font-size: 15px; letter-spacing: 0.05em; color: rgb(89, 89, 89);&quot; data-darkmode-color-16057140139831=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(89, 89, 89)&quot;&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-darkmode-color-16030305897056=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16030305897056=&quot;rgb(89, 89, 89)&quot; data-darkmode-color-16057140139831=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(89, 89, 89)&quot;&gt;&lt;pre data-darkmode-bgcolor-15987645674728=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-15987645674728=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-15987645674728=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-15987645674728=&quot;rgb(0, 0, 0)&quot; data-style=&quot;color: rgb(0, 0, 0); text-align: left; letter-spacing: 0.544px; word-spacing: 2px; font-size: 20px; font-weight: 700; background-color: rgb(255, 255, 255);&quot; data-original-code=&quot;&amp;lt;br&amp;gt;扩展阅读1、一篇文章上手Vue3中新增的API&amp;lt;br&amp;gt;2、Vue源码解析——异步组件是如何使用的&amp;lt;br&amp;gt;3、写好JavaScript条件语句的5条守则&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;The End如果你觉得这篇内容对你挺有启发，我想请你帮我三个小忙：点个「在看」，让更多的人也能看到这篇内容&amp;lt;br&amp;gt;关注官网 https://muyiy.cn，让我们成为长期关系&amp;lt;br&amp;gt;关注公众号「高级前端进阶」，公众号后台回复「加群」 加入我们一起学习并送你精心整理的高级前端面试题。&amp;lt;br&amp;gt;》》面试官都在用的题库，快来看看《《                        高级前端进阶 发起了一个读者讨论         写留言                                        &amp;lt;br&amp;gt;“在看”吗？在看就点一下吧&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;&quot; data-snippet-id=&quot;ext.dfdc660f8db84bdd3e9d3d519ceaec46&quot; data-snippet-saved=&quot;false&quot; data-codota-status=&quot;done&quot; data-darkmode-color-16030305897056=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16030305897056=&quot;rgb(89, 89, 89)&quot; data-darkmode-color-16057140139831=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(89, 89, 89)&quot;&gt;&lt;section data-darkmode-bgcolor-15987645674728=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-15987645674728=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-15987645674728=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-15987645674728=&quot;rgb(62, 62, 62)&quot; data-style=&quot;letter-spacing: 0px; white-space: normal; font-size: 16px; color: rgb(62, 62, 62); font-family: &#x27;Helvetica Neue&#x27;, Helvetica, &#x27;Hiragino Sans GB&#x27;, &#x27;Microsoft YaHei&#x27;, Arial, sans-serif; widows: 1; line-height: 1.6;&quot; data-darkmode-color-16030305897056=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16030305897056=&quot;rgb(89, 89, 89)&quot; data-darkmode-color-16057140139831=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(89, 89, 89)&quot;&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-darkmode-bgcolor-15987645674728=&quot;rgba(112, 0, 0, 0.018750000000000003)&quot; data-darkmode-original-bgcolor-15987645674728=&quot;rgba(20, 0, 0, 0.018750000000000003)&quot; data-darkmode-color-15987645674728=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-15987645674728=&quot;rgb(89, 89, 89)&quot; data-style=&quot;padding: 10px; word-break: break-word; line-height: 1.75; color: rgb(89, 89, 89); font-family: Optima-Regular, Optima, PingFangTC-Light, PingFangSC-light, PingFangTC-light; letter-spacing: 2px; background-image: linear-gradient(90deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%), linear-gradient(360deg, rgba(50, 0, 0, 0.05) 3%, rgba(0, 0, 0, 0) 3%); background-size: 20px 20px; background-position: center center;&quot; data-darkmode-color-16030305897056=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16030305897056=&quot;rgb(89, 89, 89)&quot; data-darkmode-color-16057140139831=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(89, 89, 89)&quot;&gt;&lt;pre data-original-code=&quot;&amp;lt;br&amp;gt;&amp;lt;br&amp;gt;The End如果你觉得这篇内容对你挺有启发，我想请你帮我三个小忙：点个「在看」，让更多的人也能看到这篇内容&amp;lt;br&amp;gt;关注官网 https://muyiy.cn，让我们成为长期关系&amp;lt;br&amp;gt;关注公众号「高级前端进阶」，公众号后台回复「加群」 加入我们一起学习并送你精心整理的高级前端面试题。&amp;lt;br&amp;gt;》》面试官都在用的题库，快来看看《《                        高级前端进阶 发起了一个读者讨论         参与讨论                                        &amp;lt;br&amp;gt;“在看”吗？在看就点一下吧&amp;lt;br&amp;gt;&quot; data-snippet-id=&quot;ext.89a96a6ef2d46757b2677de8206703d5&quot; data-snippet-saved=&quot;false&quot; data-codota-status=&quot;done&quot; data-darkmode-color-16030305897056=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16030305897056=&quot;rgb(89, 89, 89)&quot; data-darkmode-color-16057140139831=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(89, 89, 89)&quot;&gt;&lt;section data-tool=&quot;mdnice编辑器&quot; data-website=&quot;https://www.mdnice.com&quot; data-darkmode-bgcolor-16018219266315=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16018219266315=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16018219266315=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16018219266315=&quot;rgb(0,0,0)&quot; data-style=&quot;padding-right: 10px; padding-left: 10px; letter-spacing: 0px; background-color: rgb(255, 255, 255); line-height: 1.6; word-break: break-word;&quot; data-darkmode-bgcolor-16020008769986=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16020008769986=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16020008769986=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16020008769986=&quot;rgb(0,0,0)&quot; data-darkmode-color-16021670869911=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16021670869911=&quot;rgb(0,0,0)&quot; data-darkmode-bgcolor-16021670869911=&quot;rgb(25, 25, 25)&quot; data-darkmode-original-bgcolor-16021670869911=&quot;rgb(255, 255, 255)&quot; data-darkmode-color-16030305897056=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16030305897056=&quot;rgb(89, 89, 89)&quot; data-darkmode-color-16057140139831=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(89, 89, 89)&quot;&gt;&lt;section data-tools=&quot;新媒体排版&quot; data-id=&quot;13777&quot; data-style-type=&quot;关注&quot; data-darkmode-color-16030305897056=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16030305897056=&quot;rgb(89, 89, 89)&quot; data-darkmode-color-16057140139831=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(89, 89, 89)&quot;&gt;&lt;section data-darkmode-color-16030305897056=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16030305897056=&quot;rgb(89, 89, 89)&quot; data-darkmode-color-16057140139831=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(89, 89, 89)&quot;&gt;&lt;section data-darkmode-color-16030305897056=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16030305897056=&quot;rgb(0, 0, 0)&quot; data-style=&quot;font-family: &amp;quot;PingFang SC&amp;quot;, 微软雅黑, mp-quote, -apple-system-font, BlinkMacSystemFont, &amp;quot;Helvetica Neue&amp;quot;, &amp;quot;PingFang SC&amp;quot;, &amp;quot;Hiragino Sans GB&amp;quot;, &amp;quot;Microsoft YaHei UI&amp;quot;, &amp;quot;Microsoft YaHei&amp;quot;, Arial, sans-serif; font-size: 14px; color: rgb(0, 0, 0); letter-spacing: 1.56px; font-weight: 600; line-height: 20px;&quot; data-darkmode-color-16057140139831=&quot;rgb(163, 163, 163)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(0, 0, 0)&quot;&gt;&lt;p data-tool=&quot;mdnice编辑器&quot; data-darkmode-color-16057140139831=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(89, 89, 89)&quot; data-style=&quot;padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: rgb(89, 89, 89);&quot;&gt;&lt;span&gt;最后不要忘了点赞呦！&lt;span&gt;&lt;img data-ratio=&quot;1.0076923076923077&quot; data-type=&quot;gif&quot; data-w=&quot;260&quot; data-fileid=&quot;100022933&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_gif/H8M5QJDxMHo0BmF9r9Z5jmnjiaRjia63KdItrdfQPpQLTn685ib4pQK1j8wNibqXIQb5m7oLf2v7pke7SMTzCFVs3w/640?wx_fmt=gif&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&amp;amp;wx_co=1&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdnice编辑器&quot; data-darkmode-color-16057140139831=&quot;rgb(141, 141, 141)&quot; data-darkmode-original-color-16057140139831=&quot;rgb(89, 89, 89)&quot; data-style=&quot;padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: rgb(89, 89, 89);&quot;&gt;&lt;span&gt;祝 2022 年暴富！暴美！暴瘦！&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/section&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;

          

          
          &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>572c89eeb9b9d8965dd59e897243ab6c</guid>
<title>ClickHouse 挺快，esProc SPL 更快</title>
<link>https://toutiao.io/k/k975w1s</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content                           autoTypeSetting24psection&amp;#10;                          &quot; id=&quot;js_content&quot;&gt;&lt;section data-tools=&quot;新媒体管家&quot; data-label=&quot;powered by xmt.cn&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;开源分析数据库 ClickHouse 以快著称，真的如此吗？我们通过对比测试来验证一下。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;ClickHouse vs Oracle&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;先用 ClickHouse（简称 CH）、Oracle 数据库（简称 ORA）一起在相同的软硬件环境下做对比测试。测试基准使用国际广泛认可的 TPC-H，针对 8 张表，完成 22 条 SQL 语句定义的计算需求（Q1 到 Q22）。测试采用单机 12 线程，数据总规模 100G。TPC-H 对应的 SQL 都比较长，这里就不详细列出了。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;Q1 是简单的单表遍历计算分组汇总，对比测试结果如下：&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.31666666666666665&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/3dBJseibic1ccsVUwqibupku1jlr7nnB4icIC5wwM1aiaf4PiabwWT12qjKFFgRBy65smbaqvuCA4tzsXBgvTeiatoyIg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;CH 计算 Q1 的表现要好于 ORA，说明 CH 的列式存储做得不错，单表遍历速度很快。而 ORA 主要吃亏在使用了行式存储，明显要慢得多了。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;但是，如果我们加大计算复杂度，CH 的表现怎么样呢？继续看 TPC-H 的 Q2、Q3、Q7，测试结果如下：&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.45740740740740743&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/3dBJseibic1ccsVUwqibupku1jlr7nnB4icIefC9xscAB1CTIoGCPkwnqhWdnsJ6Ugd0asN7n6UlNib3JH1gVPuxzSA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;计算变得复杂之后，CH 性能出现了明显的下降。Q2 涉及数据量较少，列存作用不大，CH 性能和 ORA 几乎一样。Q3 数据量较大，CH 占了列存的便宜后超过了 ORA。Q7 数据也较大，但是计算复杂，CH 性能还不如 ORA。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;做复杂计算快不快，主要看性能优化引擎做的好不好。CH 的列存占据了巨大的存储优势，但竟然被 ORA 用行式存储赶上，这说明 CH 的算法优化能力远不如 ORA。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;TPC-H 的 Q8 是更复杂一些的计算，子查询中有多表连接，CH 跑了 2000 多秒还没有出结果，应该是卡死了，ORA 跑了 192 秒。Q9 在 Q8 的子查询中增加了 like，CH 直接报内存不足的错误了，ORA 跑了 234 秒。其它还有些复杂运算是 CH 跑不出来的，就没法做个总体比较了。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;CH 和 ORA 都基于 SQL 语言，但是 ORA 能优化出来的语句，CH 却跑不出来，更证明 CH 的优化引擎能力比较差。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;坊间传说，CH 只擅长做单表遍历运算，有关联运算时甚至跑不过 MySQL，看来并非虚妄胡说。想用 CH 的同学要掂量一下了，这种场景到底能有多大的适应面？&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;esProc SPL 登场&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;开源 esProc SPL 也是以高性能作为宣传点，那么我们再来比较一下。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;仍然是跑 TPC-H 来看 ：&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7416666666666667&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/3dBJseibic1ccsVUwqibupku1jlr7nnB4icIb3o3crCckzQINMTUVKqeOP3UhCdVeFmibZ87QuaM3kypOyeBPVpPcUg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;Q2、Q3、Q7 这些较复杂的运算，SPL 比 CH 和 ORA 跑的都快。CH 跑不出结果的 Q8、Q9，SPL 分别跑了 37 秒和 68 秒，也比 ORA 快。原因在于 SPL 可以采用更优的算法，其计算复杂度低于被 ORA 优化过的 SQL，更远低于 CH 执行的 SQL，再加上列存，最终是用 Java 开发的 SPL 跑赢了 C++ 实现的 CH 和 ORA。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;大概可以得到结论，esProc SPL 无论做简单计算，还是复杂计算性能都非常好。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;不过，Q1 这种简单运算，CH 比 SPL 还是略胜了一筹。似乎可以进一步证明前面的结论，即 CH 特别擅长简单遍历运算。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;且慢，SPL 还有秘密武器。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;SPL 的企业版中提供了&lt;strong&gt;列式游标&lt;/strong&gt;机制，我们再来对比测试一下：在 8 亿条数据量下，做最简单的分组汇总计算，对比 SPL（使用列式游标）和 CH 的性能。（采用的机器配置比前面做 TPC-H 测试时略低，因此测出的结果不同，不过这里主要看相对值。）&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;简单分组汇总对应 CH 的 SQL 语句是：&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;SQL1：&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span/&gt;&lt;/section&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;mod&lt;/span&gt;(&lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;100&lt;/span&gt;) &lt;span class=&quot;code-snippet__keyword&quot;&gt;AS&lt;/span&gt; Aid, &lt;span class=&quot;code-snippet__keyword&quot;&gt;max&lt;/span&gt;(amount) &lt;span class=&quot;code-snippet__keyword&quot;&gt;AS&lt;/span&gt; Amax&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;FROM&lt;/span&gt; test.t&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;mod&lt;/span&gt;(&lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;100&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;这个测试的结果是下图这样：&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.30833333333333335&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/3dBJseibic1ccsVUwqibupku1jlr7nnB4icIYPwXU4TybT4K33X1xUUfhNgLMqibJT66jLXzv1kciaiaibgIMzw3K0EsIw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;SPL 使用列式游标机制之后，简单遍历分组计算的性能也和 CH 一样了。如果在 TPC-H 的 Q1 测试中也使用列式游标，SPL 也会达到和 CH 同样的性能。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;测试过程中发现，8 亿条数据存成文本格式占用磁盘 15G，在 CH 中占用 5.4G，SPL 占用 8G。说明 CH 和 SPL 都采用了压缩存储，CH 的压缩比更高些，也进一步证明 CH 的存储引擎做得确实不错。不过，SPL 也可以达到和 CH 同样的性能，这说明 SPL 存储引擎和算法优化做得都比较好，高性能计算能力更加均衡。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;当前版本的 SPL 是用 Java 写的，Java 读数后生成用于计算的对象的速度很慢，而用 C++ 开发的 CH 则没有这个问题。对于复杂的运算，读数时间占比不高，Java 生成对象慢造成的拖累还不明显；而对于简单的遍历运算，读数时间占比很高，所以前面测试中 SPL 就会比 CH 更慢。列式游标优化了读数方案，不再生成一个个小对象，使对象生成次数大幅降低，这时候就能把差距拉回来了。单纯从存储本身看，SPL 和 CH 相比并没有明显的优劣之分。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;接下来再看常规 TopN 的对比测试，CH 的 SQL 是：&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;SQL2：&lt;/span&gt;&lt;/section&gt;&lt;pre&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;SELECT&lt;/span&gt; * &lt;span class=&quot;code-snippet__keyword&quot;&gt;FROM&lt;/span&gt; test.t &lt;span class=&quot;code-snippet__keyword&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;BY&lt;/span&gt; amount &lt;span class=&quot;code-snippet__keyword&quot;&gt;DESC&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;LIMIT&lt;/span&gt; &lt;span class=&quot;code-snippet__number&quot;&gt;100&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/pre&gt;&lt;section&gt;&lt;span&gt;对比测试结果是这样的：&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3148148148148148&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/3dBJseibic1ccsVUwqibupku1jlr7nnB4icI8CSb8XQYGP30RoMmrofyQh5vXjazKiaHxYoEa9WHrHywMR8OABp0sAw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;单看 CH 的 SQL2，常规 TopN 的计算方法是全排序后取出前 N 条数据。数据量很大时，如果真地做全排序，性能会非常差。SQL2 的测试结果说明，CH 应该和 SPL 一样做了优化，没有全排序，所以两者性能都很快，SPL 稍快一些。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;也就是说，无论简单运算还是复杂运算，esProc SPL 都能更胜一筹。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;进一步的差距&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;差距还不止于此。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;正如前面所说，CH 和 ORA 使用 SQL 语言，都是基于关系模型的，所以都面临 SQL 优化的问题。TPC-H 测试证明，ORA 能优化的一些场景 CH 却优化不了，甚至跑不出结果。那么，如果面对一些 ORA 也不会优化的计算，CH 就更不会优化了。比如说我们将 SQL1 的简单分组汇总，改为两种分组汇总结果再连接，CH 的 SQL 写出来大致是这样：&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;SQL3：&lt;/span&gt;&lt;/section&gt;&lt;pre&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;SELECT&lt;/span&gt; *&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;FROM&lt;/span&gt; ( &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;mod&lt;/span&gt;(&lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;100&lt;/span&gt;) &lt;span class=&quot;code-snippet__keyword&quot;&gt;AS&lt;/span&gt; Aid, &lt;span class=&quot;code-snippet__keyword&quot;&gt;max&lt;/span&gt;(amount) &lt;span class=&quot;code-snippet__keyword&quot;&gt;AS&lt;/span&gt; Amax &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;FROM&lt;/span&gt; test.t &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;mod&lt;/span&gt;(&lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;100&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  ) A &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;JOIN&lt;/span&gt; ( &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;SELECT&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;floor&lt;/span&gt;(&lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt; / &lt;span class=&quot;code-snippet__number&quot;&gt;200000&lt;/span&gt;) &lt;span class=&quot;code-snippet__keyword&quot;&gt;AS&lt;/span&gt; Bid, &lt;span class=&quot;code-snippet__keyword&quot;&gt;min&lt;/span&gt;(amount) &lt;span class=&quot;code-snippet__keyword&quot;&gt;AS&lt;/span&gt; Bmin &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;FROM&lt;/span&gt; test.t &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;BY&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;floor&lt;/span&gt;(&lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt; / &lt;span class=&quot;code-snippet__number&quot;&gt;200000&lt;/span&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  ) B &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;ON&lt;/span&gt; A.Aid = B.Bid&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;这种情况下，对比测试的结果是 CH 的计算时间翻倍，SPL 则不变：&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.4101851851851852&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/3dBJseibic1ccsVUwqibupku1jlr7nnB4icIfJKNd48iab6p5IgxZrKRcRwxjUtXFwYYI7joOcb9z93yweTztoZyk7Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;这是因为 SPL 不仅使用了列式游标，还使用了&lt;strong&gt;遍历复用&lt;/strong&gt;机制，能在一次遍历过程中计算出多种分组结果，可以减少很多硬盘访问量。CH 使用的 SQL 无法写出这样的运算，只能靠 CH 自身的优化能力了。而 CH 算法优化能力又很差，其优化引擎在这个测试中没有起作用，只能遍历两次，所以性能下降了一倍。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;SPL 实现遍历复用的代码很简单，大致是这样：&lt;/span&gt;&lt;/section&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;br/&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;A&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;B&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;1&lt;/span&gt;&lt;/td&gt;&lt;td colspan=&quot;2&quot;&gt;&lt;span&gt;=file(&quot;topn.ctx&quot;).open().cursor@mv(id,amount)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;2&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;cursor A1&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;=A2.groups(id%100:Aid;max(amount):Amax)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;3&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;cursor&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;=A3.groups(id\200000:Bid;min(amount):Bmin)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;4&lt;/span&gt;&lt;/td&gt;&lt;td colspan=&quot;2&quot;&gt;&lt;span&gt;=A2.join@i(Aid,A3:Bid,Bid,Bmin)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;span&gt;再将 SQL2 常规 TopN 计算，调整为分组后求组内 TopN。&lt;/span&gt;&lt;span&gt;对应 SQL 是：&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;SQL4：&lt;/span&gt;&lt;/section&gt;&lt;pre&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;SELECT&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  gid,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  groupArray(&lt;span class=&quot;code-snippet__number&quot;&gt;100&lt;/span&gt;)(amount) &lt;span class=&quot;code-snippet__keyword&quot;&gt;AS&lt;/span&gt; amount&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;FROM&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;(    &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;SELECT&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;mod&lt;/span&gt;(&lt;span class=&quot;code-snippet__keyword&quot;&gt;id&lt;/span&gt;, &lt;span class=&quot;code-snippet__number&quot;&gt;10&lt;/span&gt;) &lt;span class=&quot;code-snippet__keyword&quot;&gt;AS&lt;/span&gt; gid,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    amount    &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;FROM&lt;/span&gt; test.topn    &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;ORDER&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;BY&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    gid &lt;span class=&quot;code-snippet__keyword&quot;&gt;ASC&lt;/span&gt;,&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    amount &lt;span class=&quot;code-snippet__keyword&quot;&gt;DESC&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;) &lt;span class=&quot;code-snippet__keyword&quot;&gt;AS&lt;/span&gt; a&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;GROUP&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;BY&lt;/span&gt; gid&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;这&lt;/span&gt;&lt;span&gt;个分组 TopN 测试的对比结果是下面这样的：&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3925925925925926&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/3dBJseibic1ccsVUwqibupku1jlr7nnB4icIj323s0tficGmayzPghQsOEn9dgBjiaXA8bNdIaHcwKdmv7O2Z2agxvZg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1080&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;CH 做分组 TopN 计算比常规 TopN 慢了 42 倍，说明 CH 在这种情况下很可能做了排序动作。也就是说，情况复杂化之后，CH 的优化引擎又不起作用了。与 SQL 不同，SPL 把 TopN 看成是一种聚合运算，和 sum、count 这类运算的计算逻辑是一样的，都只需要对原数据遍历一次。这样，分组求组内 TopN 就和分组求和、计数一样了，可以避免排序计算。因此，SPL 计算分组 TopN 比 CH 快了 22 倍。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;而且，SPL 计算分组 TopN 的代码也不复杂：&lt;/span&gt;&lt;/section&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;br/&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;A&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;1&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;=file(&quot;topn.ctx&quot;).open().cursor@mv(id,amount)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;2&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;=A1.groups(id%10:gid;top(10;-amount)).news(#2;gid,~.amount)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;不只是跑得快&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;再来看看电商系统中常见的漏斗运算。SPL 的代码依然很简洁：&lt;/span&gt;&lt;/section&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;br/&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;A&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;B&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;1&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;=[&quot;etype1&quot;,&quot;etype2&quot;,&quot;etype3&quot;]&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;=file(&quot;event.ctx&quot;).open()&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;2&lt;/span&gt;&lt;/td&gt;&lt;td colspan=&quot;2&quot;&gt;&lt;span&gt;=B1.cursor(id,etime,etype;etime&amp;gt;=date(&quot;2021-01-10&quot;) &amp;amp;&amp;amp; etime&amp;lt;date(&quot;2021-01-25&quot;) &amp;amp;&amp;amp; A1.contain(etype) &amp;amp;&amp;amp; …)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;3&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;=A2.group(id).(~.sort(etime))&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;=A3.new(~.select@1(etype==A1(1)):first,~:all).select(first)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;4&lt;/span&gt;&lt;/td&gt;&lt;td colspan=&quot;2&quot;&gt;&lt;span&gt;=B3.(A1.(t=if(#==1,t1=first.etime,if(t,all.select@1(etype==A1.~ &amp;amp;&amp;amp; etime&amp;gt;t &amp;amp;&amp;amp; etime&amp;lt;t1+7).etime, null))))&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;5&lt;/span&gt;&lt;/td&gt;&lt;td colspan=&quot;2&quot;&gt;&lt;span&gt;=A4.groups(;count(~(1)):STEP1,count(~(2)):STEP2,count(~(3)):STEP3)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;span&gt;CH 的 SQL 无法实现这样的计算，我们以 ORA 为例看看三步漏斗的 SQL 写法：&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;sql&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;with&lt;/span&gt; e1 &lt;span class=&quot;code-snippet__keyword&quot;&gt;as&lt;/span&gt; (  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;select&lt;/span&gt; gid,&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;as&lt;/span&gt; step1,&lt;span class=&quot;code-snippet__keyword&quot;&gt;min&lt;/span&gt;(etime) &lt;span class=&quot;code-snippet__keyword&quot;&gt;as&lt;/span&gt; t1  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;from&lt;/span&gt; T  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;where&lt;/span&gt; etime&amp;gt;= &lt;span class=&quot;code-snippet__keyword&quot;&gt;to_date&lt;/span&gt;(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;2021-01-10&#x27;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;yyyy-MM-dd&#x27;&lt;/span&gt;) &lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt; etime&amp;lt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;to_date&lt;/span&gt;(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;2021-01-25&#x27;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;yyyy-MM-dd&#x27;&lt;/span&gt;)    &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt; eventtype=&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;eventtype1&#x27;&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt; …  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;),&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;with&lt;/span&gt; e2 &lt;span class=&quot;code-snippet__keyword&quot;&gt;as&lt;/span&gt; (  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;select&lt;/span&gt; gid,&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;as&lt;/span&gt; step2,&lt;span class=&quot;code-snippet__keyword&quot;&gt;min&lt;/span&gt;(e1.t1) &lt;span class=&quot;code-snippet__keyword&quot;&gt;as&lt;/span&gt; t1,&lt;span class=&quot;code-snippet__keyword&quot;&gt;min&lt;/span&gt;(e2.etime) &lt;span class=&quot;code-snippet__keyword&quot;&gt;as&lt;/span&gt; t2  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;from&lt;/span&gt; T &lt;span class=&quot;code-snippet__keyword&quot;&gt;as&lt;/span&gt; e2  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;inner&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;join&lt;/span&gt; e1 &lt;span class=&quot;code-snippet__keyword&quot;&gt;on&lt;/span&gt; e2.gid = e1.gid  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;where&lt;/span&gt; e2.etime&amp;gt;= &lt;span class=&quot;code-snippet__keyword&quot;&gt;to_date&lt;/span&gt;(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;2021-01-10&#x27;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;yyyy-MM-dd&#x27;&lt;/span&gt;) &lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt; e2.etime&amp;lt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;to_date&lt;/span&gt;(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;2021-01-25&#x27;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;yyyy-MM-dd&#x27;&lt;/span&gt;) &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt; e2.etime &amp;gt; t1    &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt; e2.etime &amp;lt; t1 + &lt;span class=&quot;code-snippet__number&quot;&gt;7&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt; eventtype=&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;eventtype2&#x27;&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt; …  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;),&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;with&lt;/span&gt; e3 &lt;span class=&quot;code-snippet__keyword&quot;&gt;as&lt;/span&gt; (  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;select&lt;/span&gt; gid,&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;as&lt;/span&gt; step3,&lt;span class=&quot;code-snippet__keyword&quot;&gt;min&lt;/span&gt;(e2.t1) &lt;span class=&quot;code-snippet__keyword&quot;&gt;as&lt;/span&gt; t1,&lt;span class=&quot;code-snippet__keyword&quot;&gt;min&lt;/span&gt;(e3.etime) &lt;span class=&quot;code-snippet__keyword&quot;&gt;as&lt;/span&gt; t3  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;from&lt;/span&gt; T &lt;span class=&quot;code-snippet__keyword&quot;&gt;as&lt;/span&gt; e3  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;inner&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;join&lt;/span&gt; e2 &lt;span class=&quot;code-snippet__keyword&quot;&gt;on&lt;/span&gt; e3.gid = e2.gid  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;where&lt;/span&gt; e3.etime&amp;gt;= &lt;span class=&quot;code-snippet__keyword&quot;&gt;to_date&lt;/span&gt;(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;2021-01-10&#x27;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;yyyy-MM-dd&#x27;&lt;/span&gt;) &lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt; e3.etime&amp;lt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;to_date&lt;/span&gt;(&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;2021-01-25&#x27;&lt;/span&gt;, &lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;yyyy-MM-dd&#x27;&lt;/span&gt;) &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt; e3.etime &amp;gt; t2    &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt; e3.etime &amp;lt; t1 + &lt;span class=&quot;code-snippet__number&quot;&gt;7&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt; eventtype=&lt;span class=&quot;code-snippet__string&quot;&gt;&#x27;eventtype3&#x27;&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;and&lt;/span&gt; …  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;group&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;by&lt;/span&gt; &lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;select&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;sum&lt;/span&gt;(step1) &lt;span class=&quot;code-snippet__keyword&quot;&gt;as&lt;/span&gt; step1,  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;sum&lt;/span&gt;(step2) &lt;span class=&quot;code-snippet__keyword&quot;&gt;as&lt;/span&gt; step2,  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;sum&lt;/span&gt;(step3) &lt;span class=&quot;code-snippet__keyword&quot;&gt;as&lt;/span&gt; step3&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;from&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  e1  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;left&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;join&lt;/span&gt; e2 &lt;span class=&quot;code-snippet__keyword&quot;&gt;on&lt;/span&gt; e1.gid = e2.gid  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;  &lt;span class=&quot;code-snippet__keyword&quot;&gt;left&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;join&lt;/span&gt; e3 &lt;span class=&quot;code-snippet__keyword&quot;&gt;on&lt;/span&gt; e2.gid = e3.gid&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ORA 的 SQL 写出来要三十多行，理解起来有相当的难度。而且这段代码和漏斗的步骤数量相关，每增加一步数就要再增加一段子查询。相比之下，SPL 就简单得多，处理任意步骤数都是这段代码。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;这种复杂的 SQL，写出来都很费劲，性能优化更无从谈起。&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;而 CH 的 SQL 还远不如 ORA，基本上写不出这么复杂的逻辑，只能在外部写 C++ 代码实现。也就是说，这种情况下只能利用 CH 的存储引擎。虽然用 C++ 在外部计算有可能获得很好的性能，但开发成本非常高。类似的例子还有很多，CH 都无法直接实现。&lt;/span&gt;&lt;/section&gt;&lt;hr/&gt;&lt;p&gt;&lt;span&gt;总结一下：CH 计算某些简单场景（比如单表遍历）确实很快，和 SPL 的性能差不多。但是，高性能计算不能只看简单情况快不快，还要权衡各种场景。对于复杂运算而言，SPL 不仅性能远超 CH，代码编写也简单很多。SPL 能覆盖高性能数据计算的全场景，可以说是完胜 CH。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.0045249&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/3dBJseibic1ce5ibR15d3hewLL1THeqrvJfSEZ4XjIY2mh7J1F3iawVj2xoXQoJCmAjd3D6SSzxicictFQU8pLMz3dMg/640?wx_fmt=png&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&amp;amp;wx_co=1&quot; data-type=&quot;png&quot; data-w=&quot;221&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;重磅！开源SPL交流群成立了&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;简单好用的SPL开源啦！&lt;/p&gt;&lt;p&gt;&lt;span&gt;为了给感兴趣的技术人员提供一个相互交流的平台，&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;特地开通了交流群（群完全免费，不广告不卖课）&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;需要进群的朋友，可长按扫描下方二维码&lt;/p&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;248&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;248&quot; data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/3dBJseibic1ccRquXadwB2EJbHw5TqekgYsUKErBDJ4urvJ0vcL8mC9B7H6MCB3oa3RlPm3wzvLCJlWgk6QogQwQ/640?wx_fmt=png&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&amp;amp;wx_co=1&quot; data-type=&quot;png&quot; data-w=&quot;430&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;section&gt;&lt;section&gt;&lt;svg viewbox=&quot;0 0 1 1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;section&gt;&lt;section powered-by=&quot;xiumi.us&quot;&gt;&lt;p&gt;&lt;strong&gt;本文感兴趣的朋友，请到阅读原文去收藏 ^_^&lt;/strong&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;

          

          
          &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>