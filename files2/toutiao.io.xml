<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>d418fe61e16251bad3232ccbc674f9f0</guid>
<title>ä¸€æ–‡è¯»æ‡‚ Go Http Server åŸç†</title>
<link>https://toutiao.io/k/fyznjk0</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;helloå¤§å®¶å¥½å‘€ï¼Œæˆ‘æ˜¯å°æ¥¼ï¼Œè¿™æ˜¯ç³»åˆ—æ–‡ã€ŠGoåº•å±‚åŸç†å‰–æã€‹çš„ç¬¬äºŒç¯‡ï¼Œä¾æ—§æ˜¯åˆ†æ Http æ¨¡å—ï¼Œè¯ä¸å¤šè¯´ï¼Œå¼€å§‹ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.9090909090909091&quot; data-type=&quot;jpeg&quot; data-w=&quot;187&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_jpg/xacdaKuBM0QicPichPeoibAEibWwDtkBN3pxDXichfkNmSpXqRdGunpibuf8yejmejb0fD0aFu1AFV0DiaUkH4bncWibAQ/640?wx_fmt=jpeg&quot;/&gt;&lt;/figure&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ä»ä¸€ä¸ª Demo å…¥æ‰‹&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¿—è¯è¯´ä¸‡äº‹å¼€å¤´éš¾ï¼Œä½†ç”¨ Go å®ç°ä¸€ä¸ª Http Server çœŸä¸éš¾ï¼Œç®€å•åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿèµ·ä¸€ä¸ª Serverï¼Œå¹¶ä¸”èƒ½å“åº”è¯·æ±‚ï¼Œç®—ä¸ŠåŒ…åã€å¯¼å…¥çš„ä¾èµ–ï¼Œç”šè‡³ç©ºè¡Œï¼Œä¹Ÿå°±åªè¦ 15 è¡Œä»£ç ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;package&lt;/span&gt;Â main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â (&lt;br/&gt;Â &lt;span&gt;&quot;io&quot;&lt;/span&gt;&lt;br/&gt;Â &lt;span&gt;&quot;net/http&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;Â {&lt;br/&gt;Â http.HandleFunc(&lt;span&gt;&quot;/hello&quot;&lt;/span&gt;,Â hello)&lt;br/&gt;Â http.ListenAndServe(&lt;span&gt;&quot;:81&quot;&lt;/span&gt;,Â &lt;span&gt;nil&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt;Â &lt;span&gt;hello&lt;/span&gt;&lt;span&gt;(responseÂ http.ResponseWriter,Â requestÂ *http.Request)&lt;/span&gt;&lt;/span&gt;Â {&lt;br/&gt;Â io.WriteString(response,Â &lt;span&gt;&quot;helloÂ world&quot;&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¹ˆç®€å•ï¼Œèƒ½ä¸ä¹‹ä¸€æˆ˜çš„ææ€•åªæœ‰ Python äº†å§ï¼Œè€Œä¸” Go è¿˜èƒ½ç¼–è¯‘æˆå¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½ è¯´ç‰›å•¤ä¸ç‰›å•¤ï¼Ÿ&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8075&quot; data-type=&quot;jpeg&quot; data-w=&quot;400&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_jpg/xacdaKuBM0QicPichPeoibAEibWwDtkBN3pxhaBzKLxXo8VkLyBFbDIsESrmC8OFFbpJicCiaHNKRJbU4W31X1BX0kgQ/640?wx_fmt=jpeg&quot;/&gt;&lt;/figure&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Http Server å¦‚ä½•å¤„ç†è¿æ¥ï¼Ÿ&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬ä»è¿™ä¸€è¡Œä»£ç çœ‹èµ·&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;http.ListenAndServe(&lt;span&gt;&quot;:81&quot;&lt;/span&gt;,Â &lt;span&gt;nil&lt;/span&gt;)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»å‘½åæ¥çœ‹ï¼Œè¿™ä¸ªæ–¹æ³•å¹²äº†ä¸¤ä»¶äº‹ï¼Œç›‘å¬å¹¶ä¸”æœåŠ¡ï¼Œä»æ–¹æ³•çš„å•ä¸€èŒè´£ä¸Šæ¥è¯´ï¼Œæˆ‘è§‰å¾—ä¸okï¼Œä¸€ä¸ªæ–¹æ³•æ€ä¹ˆèƒ½å¹²ä¸¤ä»¶äº‹ï¼Ÿä½†è¿™æ˜¯å¤§ä½¬å†™çš„ä»£ç ï¼Œå°±å¾ˆåˆç†ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;1.0466666666666666&quot; data-type=&quot;jpeg&quot; data-w=&quot;150&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_jpg/xacdaKuBM0QicPichPeoibAEibWwDtkBN3pxd4xU8zIJkDaTsbQByjrX411Spicd9KnbpzMod28L4ZdRrlgic0iahua5Q/640?wx_fmt=jpeg&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¬¬ä¸€ä¸ªå‚æ•°&lt;code&gt;Addr&lt;/code&gt;æ˜¯è¦ç›‘å¬çš„åœ°å€å’Œç«¯å£ï¼Œç¬¬äºŒä¸ªå‚æ•°&lt;code&gt;Handler&lt;/code&gt;ä¸€èˆ¬æ˜¯&lt;code&gt;nil&lt;/code&gt;ï¼Œå®ƒæ˜¯çœŸæ­£çš„é€»è¾‘å¤„ç†ï¼Œä½†æˆ‘ä»¬é€šå¸¸ç”¨ç¬¬ä¸€è¡Œä»£ç é‚£æ ·æ¥æ³¨å†Œå¤„ç†å™¨ï¼Œè¿™ä»£ç ä¸€çœ‹å°±æ„Ÿè§‰æ˜¯æŠŠ path æ˜ å°„åˆ°ä¸šåŠ¡é€»è¾‘ä¸Šï¼Œæˆ‘ä»¬å…ˆå¤§æ¦‚äº†è§£ï¼Œå¾…ä¼šå†æ¥çœ‹å®ƒ&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;http.HandleFunc(&lt;span&gt;&quot;/hello&quot;&lt;/span&gt;,Â hello)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœäº†è§£è¿‡ä¸€ç‚¹ç½‘ç»œç¼–ç¨‹åŸºç¡€ï¼Œå°±ä¼šçŸ¥é“æ“ä½œç³»ç»Ÿæä¾›äº†&lt;code&gt;bind&lt;/code&gt;ã€&lt;code&gt;listen&lt;/code&gt;ã€&lt;code&gt;accept&lt;/code&gt;è¿™æ ·çš„ç³»ç»Ÿè°ƒç”¨ï¼Œæˆ‘ä»¬åªè¦æŒ‰é¡ºåºå‘èµ·è°ƒç”¨ï¼Œå°±èƒ½ç»„åˆå‡ºä¸€ä¸ª Serverã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Go ä¹Ÿæ˜¯åˆ©ç”¨è¿™äº›ç³»ç»Ÿè°ƒç”¨ï¼ŒæŠŠä»–ä»¬éƒ½å°è£…åœ¨äº†&lt;code&gt;ListenAndServe&lt;/code&gt;ä¸­ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6968449931412894&quot; data-type=&quot;png&quot; data-w=&quot;1458&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/xacdaKuBM0QicPichPeoibAEibWwDtkBN3pxyoc1ljnibWSG5SU38syl7aCwI1bWxNsuo0oG1aUMwE80sH8WyAdqib4g/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Listen&lt;/code&gt; å¾€ä¸‹è¿½ç©¶å°±æ˜¯ç³»ç»Ÿè°ƒç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡ç‚¹çœ‹ &lt;code&gt;Serve&lt;/code&gt;ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.0146627565982405&quot; data-type=&quot;png&quot; data-w=&quot;1364&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/xacdaKuBM0QicPichPeoibAEibWwDtkBN3pxI9ZuCaNMibLibicrt02fRNicssF3jL29kafKLhvT8T5ZCLIPOBrQrpKCTg/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æŠŠåˆ†æ”¯ä»£ç æ”¶èµ·æ¥ï¼Œåªçœ‹ä¸»å¹²ï¼Œå‘ç°æ˜¯ä¸€ä¸ª for å¾ªç¯é‡Œé¢åœ¨ä¸åœåœ° Acceptï¼Œè€Œè¿™ä¸ª Accept åœ¨æ²¡æœ‰è¿æ¥æ—¶æ˜¯é˜»å¡çš„ï¼Œå½“æœ‰è¿æ¥æ—¶ï¼Œèµ·ä¸€ä¸ªæ–°çš„åç¨‹æ¥å¤„ç†ã€‚&lt;/p&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Http Server å¦‚ä½•å¤„ç†è¯·æ±‚ï¼Ÿ&lt;/span&gt;&lt;/h1&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ä¸€äº›å‰ç½®å·¥ä½œ&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤„ç†è¯·æ±‚çš„ä¸€è¡Œä»£ç æ˜¯ï¼Œå¯ä»¥çœ‹å‡ºæ˜¯æ¯ä¸ªè¿æ¥å•å¼€äº†ä¸€ä¸ªåç¨‹å¤„ç†ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;go&lt;/span&gt;Â c.serve(connCtx)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œçš„ connCtx ä»£å…¥äº†å½“å‰çš„ Server å¯¹è±¡ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;ctxÂ :=Â context.WithValue(baseCtx,Â ServerContextKey,Â srv)&lt;br/&gt;...&lt;br/&gt;connCtxÂ :=Â ctx&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€Œä¸”è¿˜æä¾›äº†ä¿®æ”¹å®ƒçš„ hook æ–¹æ³• &lt;code&gt;srv.ConnContext&lt;/code&gt;ï¼Œå¯ä»¥åœ¨æ¯æ¬¡ Accept æ—¶ä¿®æ”¹åŸå§‹çš„ context&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;if&lt;/span&gt;Â ccÂ :=Â srv.ConnContext;Â ccÂ !=Â &lt;span&gt;nil&lt;/span&gt;Â {&lt;br/&gt;Â connCtxÂ =Â cc(connCtx,Â rw)&lt;br/&gt;Â &lt;span&gt;if&lt;/span&gt;Â connCtxÂ ==Â &lt;span&gt;nil&lt;/span&gt;Â {&lt;br/&gt;Â Â &lt;span&gt;panic&lt;/span&gt;(&lt;span&gt;&quot;ConnContextÂ returnedÂ nil&quot;&lt;/span&gt;)&lt;br/&gt;Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ƒçš„å®šä¹‰æ˜¯ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;//Â ConnContextÂ optionallyÂ specifiesÂ aÂ functionÂ thatÂ modifies&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//Â theÂ contextÂ usedÂ forÂ aÂ newÂ connectionÂ c.Â TheÂ providedÂ ctx&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//Â isÂ derivedÂ fromÂ theÂ baseÂ contextÂ andÂ hasÂ aÂ ServerContextKey&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//Â value.&lt;/span&gt;&lt;br/&gt;ConnContextÂ &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(ctxÂ context.Context,Â cÂ net.Conn)&lt;/span&gt;Â &lt;span&gt;context&lt;/span&gt;.&lt;span&gt;Context&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯å¦‚æœæŒ‰ç…§æˆ‘å¼€å¤´ç»™çš„ä»£ç ï¼Œä½ æ˜¯æ²¡æ³•ä¿®æ”¹ &lt;code&gt;srv.ConnContext&lt;/code&gt; çš„ï¼Œå¯ä»¥æ”¹æˆè¿™æ ·æ¥è‡ªå®šä¹‰ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;Â {&lt;br/&gt;Â http.HandleFunc(&lt;span&gt;&quot;/hello&quot;&lt;/span&gt;,Â hello)&lt;br/&gt;Â serverÂ :=Â http.Server{&lt;br/&gt;Â Â Addr:Â &lt;span&gt;&quot;:81&quot;&lt;/span&gt;,&lt;br/&gt;&lt;span&gt;Â Â ConnContext:Â &lt;span&gt;&lt;span&gt;func(ctxÂ context.Context,Â cÂ net.Conn)&lt;/span&gt;Â &lt;span&gt;context&lt;/span&gt;.&lt;span&gt;Context&lt;/span&gt;&lt;/span&gt;Â {&lt;br/&gt;Â Â Â &lt;span&gt;return&lt;/span&gt;Â context.WithValue(ctx,Â &lt;span&gt;&quot;hello&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;roshi&quot;&lt;/span&gt;)&lt;br/&gt;Â Â },&lt;/span&gt;&lt;br/&gt;Â }&lt;br/&gt;Â server.ListenAndServe()&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŒæ ·çš„ &lt;code&gt;c.setState&lt;/code&gt; ä¹Ÿæä¾›äº† hookï¼Œå¯é‡‡å–å¦‚ä¸Šçš„æ–¹æ³•è®¾ç½®ï¼Œåœ¨æ¯æ¬¡è¿æ¥çŠ¶æ€æ”¹å˜æ—¶æ‰§è¡Œ hook æ–¹æ³•ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;c.setState(c.rwc,Â StateNew,Â runHooks)Â &lt;span&gt;//Â beforeÂ ServeÂ canÂ return&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;//Â ConnStateÂ specifiesÂ anÂ optionalÂ callbackÂ functionÂ thatÂ is&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//Â calledÂ whenÂ aÂ clientÂ connectionÂ changesÂ state.Â SeeÂ the&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//Â ConnStateÂ typeÂ andÂ associatedÂ constantsÂ forÂ details.&lt;/span&gt;&lt;br/&gt;ConnStateÂ &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(net.Conn,Â ConnState)&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å¼€å§‹çœŸæ­£å¹²æ´»&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†èƒ½çœ‹æ¸…æ¥š Accept åï¼Œserve æ–¹æ³•åˆ°åº•å¹²äº†ä»€ä¹ˆï¼Œæˆ‘ä»¬å†ç®€åŒ–ä¸€ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt;Â &lt;span&gt;(cÂ *conn)&lt;/span&gt;Â &lt;span&gt;serve&lt;/span&gt;&lt;span&gt;(ctxÂ context.Context)&lt;/span&gt;&lt;/span&gt;Â {&lt;br/&gt;Â ...&lt;br/&gt;Â &lt;span&gt;for&lt;/span&gt;Â {&lt;br/&gt;Â Â w,Â errÂ :=Â c.readRequest(ctx)&lt;br/&gt;Â Â ...&lt;br/&gt;Â Â serverHandler{c.server}.ServeHTTP(w,Â w.req)&lt;br/&gt;Â Â ...&lt;br/&gt;Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;serve ä¹Ÿæ˜¯ä¸€ä¸ªå¤§å¾ªç¯ï¼Œå¾ªç¯é‡Œé¢ä¸»è¦æ˜¯è¯»å–ä¸€ä¸ªè¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚äº¤ç»™ Handler å¤„ç†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ªå¤§å¾ªç¯å‘¢ï¼Ÿå› ä¸ºæ¯ä¸ª serve å¤„ç†çš„æ˜¯ä¸€ä¸ªè¿æ¥ï¼Œä¸€ä¸ªè¿æ¥å¯ä»¥æœ‰å¤šæ¬¡è¯·æ±‚ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯»è¯·æ±‚å°±æ˜¾å¾—æ¯”è¾ƒæ¯ç‡¥ä¹å‘³ï¼ŒæŒ‰ç…§Httpåè®®ï¼Œè¯»å‡ºURLï¼Œheaderï¼Œbodyç­‰ä¿¡æ¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œæœ‰ä¸ªç»†èŠ‚æ˜¯åœ¨æ¯æ¬¡è¯»å–äº†ä¸€ä¸ªè¯·æ±‚åï¼Œè¿˜å¼€äº†ä¸€ä¸ªåç¨‹å»è¯»ä¸‹ä¸€ä¸ªè¯·æ±‚ï¼Œä¹Ÿç®—æ˜¯åšäº†ä¼˜åŒ–å§ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;for&lt;/span&gt;Â {&lt;br/&gt;Â w,Â errÂ :=Â c.readRequest(ctx)&lt;br/&gt;Â ...&lt;br/&gt;&lt;br/&gt;Â &lt;span&gt;if&lt;/span&gt;Â requestBodyRemains(req.Body)Â {&lt;br/&gt;Â Â registerOnHitEOF(req.Body,Â w.conn.r.startBackgroundRead)&lt;br/&gt;Â }Â &lt;span&gt;else&lt;/span&gt;Â {&lt;br/&gt;&lt;span&gt;Â Â w.conn.r.startBackgroundRead()&lt;br/&gt;&lt;/span&gt;Â }&lt;br/&gt;Â ...&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;è¯·æ±‚å¦‚ä½•è·¯ç”±ï¼Ÿ&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“è¯»å–åˆ°ä¸€ä¸ªè¯·æ±‚åï¼Œä¾¿è¿›å…¥è¿™ä¸€è¡Œä»£ç ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;serverHandler{c.server}.ServeHTTP(w,Â w.req)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ServeHTTP æ‰¾åˆ°æˆ‘ä»¬æ³¨å†Œçš„ Handler å»å¤„ç†ï¼Œå¦‚æœè¯·æ±‚çš„URI æ˜¯ &lt;code&gt;*&lt;/code&gt;æˆ–è¯·æ±‚ Method æ˜¯ &lt;code&gt;OPTIONS&lt;/code&gt;ï¼Œåˆ™ä½¿ç”¨globalOptionsHandlerï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ç±»è¯·æ±‚ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å¤„ç†ï¼Œç›´æ¥å°±è¿”å›äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äºæˆ‘ä»¬æ³¨å†Œçš„ Handler ä¹Ÿéœ€è¦å»å¯»æ‰¾è·¯ç”±ï¼Œè¿™ä¸ªè·¯ç”±çš„è§„åˆ™è¿˜æ˜¯æ¯”è¾ƒç®€å•ï¼Œä¸»è¦ç”±å¦‚ä¸‹ä¸‰æ¡ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å¦‚æœæ³¨å†Œäº†å¸¦ host çš„è·¯ç”±ï¼Œåˆ™æŒ‰ host + path å»å¯»æ‰¾ï¼Œå¦‚æœæ²¡æ³¨å†Œå¸¦ host çš„è·¯ç”±ï¼Œåˆ™æŒ‰ path å¯»æ‰¾&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è·¯ç”±è§„åˆ™åŒ¹é…ä»¥å®Œå…¨åŒ¹é…ä¼˜å…ˆï¼Œå¦‚æœæ³¨å†Œçš„è·¯ç”±è§„åˆ™æœ€åä¸€ä¸ªå­—ç¬¦æ˜¯&lt;code&gt;/&lt;/code&gt;ï¼Œåˆ™é™¤äº†å®Œå…¨åŒ¹é…å¤–ï¼Œè¿˜ä¼šä»¥å‰ç¼€æŸ¥æ‰¾&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸¾å‡ ä¸ªä¾‹å­æ¥ç†è§£ä¸€ä¸‹ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ³¨å†Œè·¯ç”±ä¸º&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;http.HandleFunc(&lt;span&gt;&quot;/hello&quot;&lt;/span&gt;,Â hello)&lt;br/&gt;http.HandleFunc(&lt;span&gt;&quot;127.0.0.1/hello&quot;&lt;/span&gt;,Â hello2)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤æ—¶å¦‚æœæ‰§è¡Œ&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;curlÂ &lt;span&gt;&#x27;http://127.0.0.1:81/hello&#x27;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ™ä¼šåŒ¹é…åˆ° hello2ï¼Œä½†å¦‚æœæ‰§è¡Œ&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;curlÂ &lt;span&gt;&#x27;http://localhost:81/hello&#x27;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°±åŒ¹é…çš„æ˜¯ hello&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæ³¨å†Œè·¯ç”±ä¸º&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;http.HandleFunc(&lt;span&gt;&quot;/hello&quot;&lt;/span&gt;,Â hello)&lt;br/&gt;http.HandleFunc(&lt;span&gt;&quot;127.0.0.1/hello/&quot;&lt;/span&gt;,Â hello2)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ³¨æ„ç¬¬äºŒä¸ªæœ€åè¿˜æœ‰ä¸ª&lt;code&gt;/&lt;/code&gt;ï¼Œæ­¤æ—¶å¦‚æœæ‰§è¡Œ&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;curlÂ &lt;span&gt;&#x27;http://127.0.0.1:81/hello/roshi&#x27;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¹Ÿèƒ½åŒ¹é…åˆ° hello2ï¼Œæ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯ç†è§£äº†ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰¾åˆ°è·¯ç”±ä¹‹åå°±ç›´æ¥è°ƒç”¨æˆ‘ä»¬å¼€å¤´æ³¨å†Œçš„æ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬å¾€ Response ä¸­å†™å…¥æ•°æ®ï¼Œå°±èƒ½è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œè¿™æ ·ä¸€ä¸ªè¯·æ±‚å°±å¤„ç†å®Œæˆäº†ã€‚&lt;/p&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ€åæˆ‘ä»¬å›å¿†ä¸‹ Go Http Server çš„è¦ç‚¹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ç”¨ Go èµ·ä¸€ä¸ª Http Server éå¸¸ç®€å•&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Go Http Server æœ¬è´¨æ˜¯ä¸€ä¸ªå¤§å¾ªç¯ï¼Œæ¯å½“æœ‰ä¸€ä¸ªæ–°è¿æ¥æ—¶ï¼Œä¼šèµ·ä¸€ä¸ªæ–°çš„åç¨‹æ¥å¤„ç†&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ¯ä¸ªè¿æ¥çš„å¤„ç†ä¹Ÿæ˜¯ä¸€ä¸ªå¤§å¾ªç¯ï¼Œè¿™ä¸ªå¾ªç¯é‡Œåšäº†è¯»å–è¯·æ±‚ã€å¯»æ‰¾è·¯ç”±ã€æ‰§è¡Œé€»è¾‘ä¸‰ä»¶å¤§äº‹&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8255613126079447&quot; data-type=&quot;png&quot; data-w=&quot;579&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/xacdaKuBM0QicPichPeoibAEibWwDtkBN3px7YxysicCAjmLyd4ykKwm8ESDJL2qkb5iaHAbJyRuUYg2dkZfoOv4rB7g/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç¦åˆ©æ—¶åˆ»&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ„Ÿè°¢èƒ½æŠ½ç©ºçœ‹åˆ°è¿™é‡Œï¼Œæ–°çš„ä¸€å¹´å‡†å¤‡äº†3æœ¬ã€ŠGoè¯­è¨€ä»å…¥é—¨åˆ°é¡¹ç›®å®æˆ˜ã€‹é€ç»™å¤§å®¶ï¼Œå‚ä¸æ–¹å¼æ˜¯åŠ æˆ‘å¾®ä¿¡&lt;code&gt;MrRoshi&lt;/code&gt;ï¼Œå‚åŠ æœ‹å‹åœˆç‚¹èµé€ä¹¦æ´»åŠ¨å³å¯ã€‚&lt;/p&gt;&lt;p&gt;&lt;mpcps class=&quot;js_editor_new_cps&quot; data-templateid=&quot;list&quot; data-traceid=&quot;3e59a237-9b50-4189-aff2-44f805fb4c42&quot; data-goodssouce=&quot;1&quot; data-pid=&quot;101_13329955&quot; data-appuin=&quot;3296160406&quot; data-buffer=&quot;{&amp;quot;category_id&amp;quot;:10,&amp;quot;pid&amp;quot;:&amp;quot;101_13329955&amp;quot;,&amp;quot;biz_uin&amp;quot;:&amp;quot;3296160406&amp;quot;,&amp;quot;trace_id&amp;quot;:&amp;quot;3e59a237-9b50-4189-aff2-44f805fb4c42&amp;quot;,&amp;quot;sku_id&amp;quot;:&amp;quot;101_13329955&amp;quot;,&amp;quot;source_id&amp;quot;:2,&amp;quot;source_name&amp;quot;:&amp;quot;äº¬ä¸œ&amp;quot;,&amp;quot;audit_state&amp;quot;:1,&amp;quot;main_img&amp;quot;:&amp;quot;https://pcm-img.zhls.qq.com/productcenter-13651fb5--1018824-7367685220822286616/62026160010122022/38b442ea0c38631a8fc025925ef15cb5.jpg&amp;quot;,&amp;quot;product_name&amp;quot;:&amp;quot;Goè¯­è¨€ä»å…¥é—¨åˆ°é¡¹ç›®å®æˆ˜ï¼ˆè§†é¢‘ç‰ˆï¼‰&amp;quot;,&amp;quot;current_price&amp;quot;:10800,&amp;quot;first_category_id&amp;quot;:&amp;quot;10&amp;quot;,&amp;quot;product_label_name_list&amp;quot;:[&amp;quot;äº¬ä¸œé…é€&amp;quot;],&amp;quot;select_tag_name_list&amp;quot;:[],&amp;quot;templateId&amp;quot;:&amp;quot;card&amp;quot;,&amp;quot;appuin&amp;quot;:&amp;quot;3296160406&amp;quot;,&amp;quot;isNewCpsKOL&amp;quot;:1}&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœä½ èƒ½&lt;code&gt;ç‚¹èµ&lt;/code&gt;ã€&lt;code&gt;åœ¨çœ‹&lt;/code&gt;ã€&lt;code&gt;åˆ†äº«&lt;/code&gt;ï¼Œæˆ‘ä¼šæ›´åŠ æ„Ÿæ¿€ä¸å°½~&lt;/p&gt;&lt;hr data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;æœç´¢å…³æ³¨å¾®ä¿¡å…¬ä¼—å·&quot;æ‰è™«å¤§å¸ˆ&quot;ï¼Œåç«¯æŠ€æœ¯åˆ†äº«ï¼Œæ¶æ„è®¾è®¡ã€æ€§èƒ½ä¼˜åŒ–ã€æºç é˜…è¯»ã€é—®é¢˜æ’æŸ¥ã€è¸©å‘å®è·µ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åŠ æˆ‘å¾®ä¿¡&lt;code&gt;MrRoshi&lt;/code&gt;æ‹‰ä½ å…¥ç¾¤ï¼Œç¾¤é‡Œå„è·¯æŠ€æœ¯å¤§ä½¬å¸¦ä½ é£&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>aeef90261a262a25bfca09ec3711731a</guid>
<title>å¦‚ä½•ç”¨ Go å¿«é€Ÿå®ç°è§„åˆ™å¼•æ“</title>
<link>https://toutiao.io/k/4eubwce</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;ä½œè€…ï¼šwynnliuï¼Œ è…¾è®¯IEGå¢é•¿ä¸­å° åå°å¼€å‘å·¥ç¨‹å¸ˆ&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å‡ºå¸ˆä¹‹å&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æåˆ°è§„åˆ™å¼•æ“ï¼Œå¤§éƒ¨åˆ†äººéƒ½ä¼šå…ˆæƒ³åˆ°&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;DSL(Domain Specific Language)&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼Œè¿›è€Œè”æƒ³ä»¤äººç”Ÿç•çš„&lt;/span&gt;&lt;strong&gt;&lt;span&gt;ç¼–è¯‘åŸç†ã€é€’å½’ä¸‹é™ã€LLæˆ–LR&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ã€‚ä½†è§„åˆ™å¼•æ“æœ‰å¤§æœ‰å°ï¼Œå®ƒä»¬åœ¨ä¸åŒåœºæ™¯çš„å­˜åœ¨ä¸ä¸€æ ·ï¼Œå¹¶ä¸ä¸€å®šéƒ½è¦è¿™ä¹ˆå¤æ‚ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯”å¦‚åœ¨ä¸€ä¸ªå°å‹æ”¯ä»˜ç³»ç»Ÿçš„ç®€å•é£æ§åœºæ™¯é‡Œï¼Œäº§å“åŒå­¦æƒ³è®¾ç½®ä¸€äº›è§„åˆ™ï¼Œé¿å…ç”¨æˆ·çš„é“¶è¡Œå¡è¢«ç›—åˆ·æˆ–è€…å•†æˆ·è¢«è–…ç¾Šæ¯›ï¼ˆä»…ä¸ºç¤ºä¾‹ï¼Œå¹¶ä¸ä»£è¡¨ç°å®ä¸­ä¹Ÿæ˜¯åº”ç”¨äº†åŒæ ·ç­–ç•¥ï¼‰ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸ºäº†å¿«é€Ÿå®ç°éœ€æ±‚ï¼Œæˆ‘ä»¬å¼€å‘ä¸€ä¸ªå•ç‹¬çš„è§„åˆ™ç±»æˆ–è€…åº“ï¼Œç±»é‡Œé¢æœ‰ä¸åŒè§„åˆ™åˆ¤æ–­å‡½æ•°ã€‚è§„åˆ™ä¸æ–­å¢åŠ ï¼Œè§„åˆ™å‡½æ•°å°±ä¸æ–­æ‰©å±•ï¼Œè¿™ä¸ªè†¨èƒ€çš„è§„åˆ™ç±»åº“å°±æ˜¯ä¸€ä¸ªå¾®å°çš„è§„åˆ™å¼•æ“ã€‚è™½ç„¶åœ¨ä¸šåŠ¡è°ƒç”¨çš„åœ°æ–¹ä¼šæœ‰å¾ˆå¤šswitchæˆ–è€…if...else..ï¼Œä½†è¿™ä¸ªå¾®å°çš„è§„åˆ™å¼•æ“å¹¶ä¸éœ€è¦å¼•å…¥DSLï¼Œä¸€æ ·èƒ½å¥½å¥½å·¥ä½œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è€Œåœ¨å¦å¤–ä¸€äº›ä¸šåŠ¡ç³»ç»Ÿï¼Œæ¯”å¦‚è´·æ¬¾ç³»ç»Ÿï¼ŒåŒæ ·æ˜¯é£æ§åœºæ™¯ï¼Œäº§å“åŒå­¦ä¹Ÿä¼šè®¾ç½®ä¸€äº›è§„åˆ™åšä¸åŒçš„é‡‘é¢å®¡æ‰¹å†³ç­–ï¼ˆä»…ä¸ºç¤ºä¾‹ï¼Œå¹¶ä¸ä»£è¡¨ç°å®ä¸­ä¹Ÿæ˜¯åº”ç”¨äº†åŒæ ·ç­–ç•¥ï¼‰ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å¾ä¿¡è¯„åˆ†è¾¾åˆ°650ï¼Œç”³è¯·é‡‘é¢2000å…ƒä»¥ä¸‹å¯ä»¥ç›´æ¥å®¡æ‰¹&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å¾ä¿¡è¯„åˆ†è¾¾åˆ°650ï¼Œç”³è¯·é‡‘é¢åœ¨5000ä»¥ä¸‹ï¼Œå¦‚æœæœˆå‡æ¶ˆè´¹è¾¾åˆ°2000å—å¯ä»¥ç›´æ¥å®¡æ‰¹&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å¾ä¿¡è¯„åˆ†åœ¨550~600ä¹‹é—´ï¼Œç”³è¯·é‡‘é¢åœ¨5000ä»¥ä¸‹çš„ä¸‰å››çº¿åŸå¸‚ç”¨æˆ·ï¼Œå¦‚æœæœˆå‡æ¶ˆè´¹è¾¾åˆ°1000å—è¿˜éœ€è¦å…¶ä»–æ¶ˆè´¹è¯„ä¼°ï¼Œå¦‚æœæœˆæ”¶å…¥æœªè¾¾åˆ°1ä¸‡éœ€è¦å·¥èµ„æµæ°´è¯æ˜&lt;br/&gt;&lt;/span&gt;......&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;span&gt;åœ¨è¿™äº›è§„åˆ™æœªå¢å¤šä¹‹å‰ï¼Œæˆ‘ä»¬å‘ç°å•å•å†™è§„åˆ™ç±»åº“ï¼Œä¸šåŠ¡æ–¹é€šè¿‡è°ƒç”¨ä¸åŒå‡½æ•°åˆ¤æ–­ï¼Œå°±å·²ç»ç—›ä¸æ¬²ç”Ÿã€‚è¿™äº›é£æ§è§„åˆ™ç›¸æ¯”ä¸Šæ–‡æ¥è¯´ï¼Œæ¶‰åŠçš„ç”¨æˆ·å±æ€§å¤šï¼Œåˆ¤æ–­æ¡ä»¶å¤æ‚ï¼Œè€Œä¸”è¿˜æœ‰ä¸åŒçš„ä¼˜å…ˆçº§ã€‚å¦‚æœæ²¡æœ‰æ›´å¥½çš„è§„åˆ™æŠ½è±¡ï¼Œä»£ç å¤æ‚åº¦åªä¼šè¶Šæ¥è¶Šé«˜ï¼Œè¿™æ—¶å°±éœ€è¦è®¾è®¡ä¸€å¥—DSLæ¥æ»¡è¶³æ›´å¤šçš„è§„åˆ™åˆ¤æ–­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;æ‰€ä»¥ï¼Œåœ¨æˆ‘ä»¬çœŸæ­£è¦å®ç°ä¸€ä¸ªè§„åˆ™å¼•æ“ä¹‹å‰ï¼Œä¸‹å®šå†³å¿ƒè®¾è®¡DSLä¸ç¼–è¯‘åŸç†æ‹‰æ‰¯ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆçœ‹ç®€å•çš„è§„åˆ™ç±»åº“æ˜¯å¦å°±å·²æ»¡è¶³éœ€æ±‚ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;h2&gt;&lt;span&gt;éœ€æ±‚èƒŒæ™¯&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;Gopassæ˜¯ä¸€ä¸ªAPIç½‘å…³ï¼Œä½œä¸ºä¸€ä¸ªç½‘å…³ï¼Œç½‘å…³å¿…ä¸å¯å°‘çš„èƒ½åŠ›æ˜¯è·¯ç”±è½¬å‘ï¼Œç²¾ç»†åŒ–è·¯ç”±æ›´æ˜¯é«˜é¢‘éœ€æ±‚ã€‚ä¸šåŠ¡éœ€è¦æ ¹æ®ä¸åŒéœ€æ±‚åœºæ™¯åšä¸åŒçš„è·¯ç”±é…ç½®ï¼Œæ¯”å¦‚ç°åº¦å‘å¸ƒã€A/B æµ‹è¯•ã€é™æµã€è´Ÿè½½å‡è¡¡ç­‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Gopassç°æœ‰çš„è½¬å‘è§„åˆ™åªèƒ½åŸºäºè¯·æ±‚Methodå’ŒURL(Host/Path/Query)ä½œç®€å•é…ç½®ï¼Œæ¬ ç¼ºæ ¹æ®è¯·æ±‚Headerã€Cookieã€CIP(Client IP)/VIPç­‰æ›´å¤šè¯·æ±‚å±æ€§é…ç½®ï¼Œä¸åŠè¿™äº›å±æ€§è§„åˆ™çš„ç»„åˆé…ç½®ï¼Œæ¯”å¦‚ä¸šåŠ¡éœ€è¦é…ç½®APIçš„è¯»å†™åˆ†ç¦»ï¼Œå¹¶ä¸”ç°åº¦æµ‹è¯•ï¼Œå°±éœ€è¦é…ç½®è¯·æ±‚Methodå’Œè¯·æ±‚Headerè¿™æ ·çš„å¹¶é›†è§„åˆ™ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2&gt;&lt;span&gt;Jsonå®ç°&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;æˆ‘æœ€å¼€å§‹æ²¡æœ‰å¾€DSLçš„æ–¹å‘æƒ³ï¼Œå†™å‡ ä¸ªåƒä¸‹é¢çš„ç®€å•çš„è§„åˆ™å‡½æ•°ï¼Œç”¨jsonæ ¼å¼å®šä¹‰è§„åˆ™ï¼Œå†ç”¨Goçš„åå°„åº“è§£æjsonï¼Œä¸‰ä¸‹äº”é™¤äºŒå°±å®Œæˆäº†è§„åˆ™åˆ¤æ–­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;ä¸åŒçš„è§„åˆ™å‡½æ•°&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼š&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;// IRule&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; IRule &lt;span&gt;interface&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;Match&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;req &lt;span&gt;*&lt;/span&gt;http&lt;span&gt;.&lt;/span&gt;Request&lt;span&gt;)&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// HeaderMatch åŒ¹é…header&lt;/span&gt;&lt;br/&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;HeaderMatch&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;key&lt;span&gt;,&lt;/span&gt; value &lt;span&gt;string&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;...&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// CookieMatch åŒ¹é…Cookie&lt;/span&gt;&lt;br/&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;CookieMatch&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;key&lt;span&gt;,&lt;/span&gt; value &lt;span&gt;string&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;...&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;è§„åˆ™å®šä¹‰&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼š&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&quot;op&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;AND&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&quot;matcher&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&quot;header&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&quot;cookie&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;]&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&quot;header&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&quot;key&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;X-APP-ID&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&quot;value&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;Ves&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&quot;cookie&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&quot;name&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;feature&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&quot;value&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;dev/wynnliu/qualify-rule&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;è§„åˆ™è§£ææ¡†æ¶(éåå°„åº“ç‰ˆ)ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;// éå†åˆ¤æ–­è§„åˆ™&lt;/span&gt;&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; &lt;span&gt;_&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; matcher &lt;span&gt;:=&lt;/span&gt; &lt;span&gt;range&lt;/span&gt; matchers &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;var&lt;/span&gt; m &lt;span&gt;map&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;interface&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    err &lt;span&gt;:=&lt;/span&gt; json&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Unmarshal&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;data&lt;span&gt;[&lt;/span&gt;&lt;span&gt;&quot;matcher&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&amp;amp;&lt;/span&gt;m&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;if&lt;/span&gt; err &lt;span&gt;!=&lt;/span&gt; &lt;span&gt;nil&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;      log&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Fatal&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;err&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;switch&lt;/span&gt; matcher &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;case&lt;/span&gt; &lt;span&gt;&quot;header&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;...&lt;/span&gt;&lt;br/&gt;       result&lt;span&gt;[&lt;/span&gt;matcher&lt;span&gt;]&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;HeaderMatch&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;rule&lt;span&gt;.&lt;/span&gt;key&lt;span&gt;,&lt;/span&gt; rule&lt;span&gt;.&lt;/span&gt;Vaule&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;case&lt;/span&gt; &lt;span&gt;&quot;coolkie&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;...&lt;/span&gt;&lt;br/&gt;       result&lt;span&gt;[&lt;/span&gt;matcher&lt;span&gt;]&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;CookieMatch&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;rule&lt;span&gt;.&lt;/span&gt;name&lt;span&gt;,&lt;/span&gt; rule&lt;span&gt;.&lt;/span&gt;Vaule&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;...&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;...&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ç»¼åˆè®¡ç®—è§„åˆ™ç»“æœ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;switch&lt;/span&gt; op &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;case&lt;/span&gt; &lt;span&gt;&quot;AND&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;...&lt;/span&gt;&lt;br/&gt;&lt;span&gt;case&lt;/span&gt; &lt;span&gt;&quot;OR&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;...&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;...&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;ä¸Šé¢æ˜¯ä¸€ä¸ªå¸¸è§çš„äºŒå…ƒè¡¨è¾¾å¼è§„åˆ™ï¼Œä»è§„åˆ™å®šä¹‰åˆ°è§„åˆ™è§£æå¯ä»¥çœ‹å‡ºï¼Œç”¨Jsonçš„æ–¹å¼å®ç°éå¸¸æ–¹ä¾¿ï¼Œå·²ç»æ»¡è¶³ç®€å•çš„è§„åˆ™åœºæ™¯ã€‚ä¸å¥½çš„åœ°æ–¹å°±æ˜¯è§£æçš„ä»£ç å¤ªçµæ´»ï¼Œä¸€æ¡é¾™çš„switch caseï¼Œå¦‚æœåŠ å…¥æ›´å¤šé€»è¾‘ï¼Œå¤æ‚åº¦å°±ä¼šä¸Šå‡ï¼Œç»´æŠ¤æ€§ä¹Ÿåªä¼šè¶Šæ¥è¶Šå·®ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯”å¦‚ï¼Œä¸€å¼€å§‹çš„è§„åˆ™æ¡ä»¶åªæœ‰ç­‰å€¼åŒ¹é…ï¼Œæ¥ç€å¢åŠ èŒƒå›´åŒ¹é…ï¼ŒéåŒ¹é…ï¼Œæ­£åˆ™åŒ¹é…ç­‰ï¼Œåé¢å†åœ¨è¿™äº›åŸºç¡€ä¸ŠåŠ å…¥è§„åˆ™ä¼˜å…ˆçº§ï¼Œå°±å¾—éœ€è¦å¼•å…¥æ›´å¤šçš„jsonå®šä¹‰ï¼Œè§„åˆ™è§£ææ¡†æ¶ä¹Ÿè¦ç›¸åº”åœ°è¦†ç›–æ›´å¤šçš„æŠ½è±¡ç»´åº¦ã€‚&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é‚£æœ‰æ²¡æœ‰æŠ½è±¡åº¦æ›´é«˜ã€å®ç°ä¹Ÿä¸å¤æ‚çš„è§£æå®ç°æ–¹å¼å‘¢ï¼Ÿå°±æ˜¯è¯´ï¼Œæœ‰æ²¡æœ‰æ¯”Jsonæ–¹å¼æ›´å¥½åœ°è¡¨è¾¾è¿™äº›è§„åˆ™çš„å­˜åœ¨ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç­”æ¡ˆè‚¯å®šæ˜¯æœ‰çš„ï¼Œä¸ç„¶æ€ä¹ˆå†™ä¸‹å»ğŸ¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¦‚æœä»”ç»†åˆ†æä¸Šé¢çš„è§„åˆ™ï¼Œå¯ä»¥å‘ç°è¿™äº›è§„åˆ™ç»è¿‡ä¸€æ³¢è®¡ç®—ååªéœ€å¾—åˆ°ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œä¸å…¶ä»–ç®—æœ¯è¡¨è¾¾å¼ã€å…³ç³»è¡¨è¾¾å¼ä¸åŒï¼Œè¿™äº›è§„åˆ™éƒ½æ˜¯&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å¸ƒå°”è¡¨è¾¾å¼&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç½‘ä¸Šäº†è§£åˆ°ï¼Œå›½å†…çŸ¥åGoé¢†åŸŸä¸“å®¶æ›¹å¤§(Xargin )åœ¨&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;åŸºäº Go çš„å†…ç½® Parser æ‰“é€ è½»é‡çº§è§„åˆ™å¼•æ“&lt;/span&gt;&lt;span&gt;ä¸€æ–‡ä¸­æåˆ°ï¼š&lt;/span&gt;&lt;span&gt;&lt;span&gt;Goçš„astè¯­æ³•æ ‘å¯ä»¥å®Œç¾è¡¨è¾¾å¸ƒå°”è¡¨è¾¾å¼ï¼Œä½¿ç”¨ Go çš„å†…ç½® parser åº“å¯ä»¥å®Œæˆä¸€ä¸ªåŸºæœ¬è§„åˆ™å¼•æ“çš„æ¡†æ¶ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;äºæ˜¯ï¼Œæˆ‘å¼€å§‹å°è¯•ä½¿ç”¨Goè‡ªå¸¦çš„aståº“åŠparseråº“å®Œæˆè½¬å‘è§„åˆ™çš„è§£æã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2&gt;&lt;strong&gt;ASTå®ç°&lt;/strong&gt;&lt;/h2&gt;&lt;h3&gt;&lt;span&gt;Goçš„ç¼–è¯‘è¿‡ç¨‹&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;&lt;span&gt;Goçš„aståº“å’Œparseråº“éƒ½æ˜¯Goç¼–è¯‘è¿‡ç¨‹ä¸­çš„å·¥å…·åº“ï¼ŒGoçš„ç¼–è¯‘è¿‡ç¨‹è·Ÿå¤§éƒ¨åˆ†é«˜çº§è¯­è¨€çš„ç¼–è¯‘è¿‡ç¨‹ä¸€æ ·ï¼Œ&lt;/span&gt;&lt;strong&gt;åˆ†ä¸º6æ­¥ï¼šè¯æ³•åˆ†æã€è¯­æ³•åˆ†æã€è¯­ä¹‰åˆ†æã€ä¸­é—´ç ç”Ÿæˆã€ä»£ç ä¼˜åŒ–å’Œæœºå™¨ç ç”Ÿæˆã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¼•ç”¨ã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ã€‹é‡Œé¢çš„å›¾ï¼Œå°±æ˜¯ä¸‹é¢è¿™ä¸€ä¸²æµç¨‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5035971223021583&quot; data-type=&quot;png&quot; data-w=&quot;1112&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/G9mz0qib2srCvicwBpmUCrceZOnX2FsgnUg3dNianyD1COHkohSP6bI8LOeQCdscDDSc6pVQyunSYn9XVZgZQpHeg/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ¯æ­¥çš„è¾“å…¥è¾“å‡ºï¼Œå…·ä½“åšçš„äº‹æƒ…æ€»ä½“å¦‚ä¸‹è¡¨ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;figure&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;span&gt;è¾“å…¥&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;æ­¥éª¤&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;è¾“å‡º&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;è¯´æ˜&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æºä»£ç &lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;è¯æ³•åˆ†æ&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;Token&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;go æ–‡ä»¶è¢«è¾“å…¥åˆ°æ‰«æ(Scanner)ï¼Œå®ƒä½¿ç”¨ä¸€ç§ç±»ä¼¼äºæœ‰é™çŠ¶æ€æœºçš„ç®—æ³•ï¼Œå°†æºä»£ç çš„å­—ç¬¦ç³»åˆ—åˆ†å‰²æˆä¸€ç³»åˆ—çš„è®°å·(Token)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;Tokenåºåˆ—&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;è¯­æ³•åˆ†æ&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;AST&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;å°† Token è½¬åŒ–ä¸ºAST(æŠ½è±¡è¯­æ³•æ ‘)ã€‚&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;AST&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;è¯­ä¹‰åˆ†æ&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ­£ç¡®çš„AST&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;å¯¹ä¸Šä¸€æ­¥çš„ASTè¿›è¡Œç±»å‹æ£€æŸ¥(åç§°æ£€æŸ¥ã€ç±»å‹æ¨æ–­ç­‰)ã€‚&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æ­£ç¡®çš„AST&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;ä¸­é—´ç ç”Ÿæˆ&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;SSA ç‰¹æ€§çš„ä¸­é—´ç (IR)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;&lt;span&gt;ä¸­é—´ç çš„ä½œç”¨ä¹‹ä¸€æ˜¯é€‚é…ä¸åŒæ“ä½œç³»ç»Ÿï¼Œå…¼å®¹ä¸åŒå¹³å°ã€‚&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;é™æ€å•èµ‹å€¼ï¼ˆStatic Single Assignmentã€SSAï¼‰æ˜¯ä¸­é—´ä»£ç çš„ç‰¹æ€§ï¼Œå¦‚æœä¸­é—´ä»£ç å…·æœ‰é™æ€å•èµ‹å€¼çš„ç‰¹æ€§ï¼Œé‚£ä¹ˆæ¯ä¸ªå˜é‡å°±åªä¼šè¢«èµ‹å€¼ä¸€æ¬¡ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;SSA ç‰¹æ€§çš„ä¸­é—´ç (IR)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;ä»£ç ä¼˜åŒ–&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;ä¼˜åŒ–åçš„ä¸­é—´ç &lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;ä¼˜åŒ–åçš„ä¸­é—´ç &lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æœºå™¨ç ç”Ÿæˆ&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ±‡ç¼–ä»£ç ï¼ˆPlan9ï¼‰&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;å¯¹ä¸åŒç³»ç»ŸæŒ‡ä»¤é›†ã€CPUæ¶æ„ç¿»è¯‘æˆä¸åŒçš„æœºå™¨ç ã€‚&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;&lt;strong&gt;æˆ‘ä»¬è¦æ‹¿æ¥åšè§„åˆ™å¼•æ“çš„å°±æ˜¯å‰é¢ä¸¤æ­¥çš„äº§ç‰©ï¼šè¯æ³•åˆ†æå¾—åˆ°çš„Tokenå’Œè¯­æ³•åˆ†æçš„ASTã€‚&lt;/strong&gt;&lt;/p&gt;&lt;h3&gt;&lt;strong&gt;Token(è®°å·)&lt;/strong&gt;&lt;/h3&gt;&lt;p&gt;&lt;span&gt;Tokenæ˜¯é«˜çº§è¯­è¨€ä¸­æœ€å°çš„è¯æ³•å•å…ƒï¼ŒGoä¸»è¦æœ‰æ ‡è¯†ç¬¦ã€å…³é”®å­—ã€è¿ç®—ç¬¦å’Œåˆ†éš”ç¬¦ç­‰Tokenï¼Œæ›´å¤šçš„tokenå®šä¹‰å‚è€ƒ&lt;/span&gt;&lt;span&gt;&lt;span&gt;tokenæ–‡ä»¶&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯”å¦‚æˆ‘ä»¬æ‰«æ`&lt;/span&gt;&lt;span&gt;&lt;code&gt;println(â€Hello Worldâ€)`&lt;/code&gt;&lt;span&gt;ï¼Œå¾—åˆ°ä»¥ä¸‹tokenï¼š&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ‰«æä»£ç ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&quot;fmt&quot;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&quot;go/scanner&quot;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&quot;go/token&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;var&lt;/span&gt; src &lt;span&gt;=&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;`println(&quot;Hello World!&quot;)`&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;var&lt;/span&gt; fset &lt;span&gt;=&lt;/span&gt; token&lt;span&gt;.&lt;/span&gt;&lt;span&gt;NewFileSet&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;var&lt;/span&gt; file &lt;span&gt;=&lt;/span&gt; fset&lt;span&gt;.&lt;/span&gt;&lt;span&gt;AddFile&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;hello.go&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; fset&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Base&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;len&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;src&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;var&lt;/span&gt; s scanner&lt;span&gt;.&lt;/span&gt;Scanner&lt;br/&gt;  s&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Init&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;file&lt;span&gt;,&lt;/span&gt; src&lt;span&gt;,&lt;/span&gt; &lt;span&gt;nil&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; scanner&lt;span&gt;.&lt;/span&gt;ScanComments&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;for&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    pos&lt;span&gt;,&lt;/span&gt; tok&lt;span&gt;,&lt;/span&gt; lit &lt;span&gt;:=&lt;/span&gt; s&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Scan&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;if&lt;/span&gt; tok &lt;span&gt;==&lt;/span&gt; token&lt;span&gt;.&lt;/span&gt;EOF &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;break&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    fmt&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Printf&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;%s\\t%s\\t%q\\n&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; fset&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Position&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;pos&lt;span&gt;)&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; tok&lt;span&gt;,&lt;/span&gt; lit&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;æ‰«æç»“æœï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;hello&lt;span&gt;.&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;  IDENT &lt;span&gt;&quot;println&quot;&lt;/span&gt;&lt;br/&gt;hello&lt;span&gt;.&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;  &lt;span&gt;(&lt;/span&gt; &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;hello&lt;span&gt;.&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;  STRING  &lt;span&gt;&quot;\\&quot;&lt;/span&gt;Hello World&lt;span&gt;!&lt;/span&gt;\\&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;hello&lt;span&gt;.&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;23&lt;/span&gt; &lt;span&gt;)&lt;/span&gt; &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;hello&lt;span&gt;.&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;24&lt;/span&gt; &lt;span&gt;;&lt;/span&gt; &lt;span&gt;&quot;\\n&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;å…¶ä¸­`&lt;/span&gt;&lt;span&gt;&lt;code&gt;println`&lt;/code&gt;&lt;span&gt;æ˜¯æ ‡è¯†ç¬¦(IDENT)Tokenï¼Œ `&lt;/span&gt;&lt;code&gt;Hello World`&lt;/code&gt;&lt;span&gt;åˆ™æ˜¯å­—ç¬¦ä¸²Tokenã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;h3&gt;&lt;strong&gt;AST(æŠ½è±¡è¯­æ³•æ ‘)&lt;/strong&gt;&lt;/h3&gt;&lt;p&gt;&lt;span&gt;æœ‰äº†Scanneræ‰«æå‡ºæ¥çš„Tokenåºåˆ—ï¼Œåˆ°è¯­æ³•åˆ†æè¿™ä¸€æ­¥ï¼Œå°±å¯ä»¥è¿›ä¸€æ­¥æ„é€ ASTï¼Œä½†å¦‚æœçœ‹å…·ä½“çš„ASTï¼Œä¼šå‘ç°ASTä¸­ä¸æ­¢æœ‰Tokenï¼Œæ¯”å¦‚åŒæ ·æ˜¯è¿™æ®µ`&lt;/span&gt;&lt;span&gt;&lt;code&gt;println(â€Hello Worldâ€)`&lt;/code&gt;&lt;span&gt;ï¼Œå®ƒçš„ASTå¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è§£æä»£ç ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&quot;go/ast&quot;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&quot;go/parser&quot;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&quot;go/token&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  src &lt;span&gt;:=&lt;/span&gt; &lt;span&gt;`&lt;br/&gt;package main&lt;br/&gt;func main() {&lt;br/&gt;  println(&quot;Hello, World!&quot;)&lt;br/&gt;}&lt;br/&gt;`&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;// Create the AST by parsing src.&lt;/span&gt;&lt;br/&gt;  fset &lt;span&gt;:=&lt;/span&gt; token&lt;span&gt;.&lt;/span&gt;&lt;span&gt;NewFileSet&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;// positions are relative to fset&lt;/span&gt;&lt;br/&gt;  f&lt;span&gt;,&lt;/span&gt; err &lt;span&gt;:=&lt;/span&gt; parser&lt;span&gt;.&lt;/span&gt;&lt;span&gt;ParseFile&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;fset&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; src&lt;span&gt;,&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;if&lt;/span&gt; err &lt;span&gt;!=&lt;/span&gt; &lt;span&gt;nil&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;panic&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;err&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;// Print the AST.&lt;/span&gt;&lt;br/&gt;  ast&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;fset&lt;span&gt;,&lt;/span&gt; f&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Â &lt;span/&gt;&lt;span&gt;è§£æç»“æœï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;     &lt;span&gt;0&lt;/span&gt;  &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;File &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;1&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Package&lt;span&gt;:&lt;/span&gt; &lt;span&gt;2&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;2&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Ident &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;3&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  NamePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;2&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;4&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;main&quot;&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;5&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;6&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Decls&lt;span&gt;:&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Decl &lt;span&gt;(&lt;/span&gt;&lt;span&gt;len&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;7&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;0&lt;/span&gt;&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;FuncDecl &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;8&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Ident &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;9&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  NamePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;3&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;10&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;main&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;11&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Obj&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Object &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;12&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Kind&lt;span&gt;:&lt;/span&gt; &lt;span&gt;func&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;13&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;main&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;14&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Decl&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;obj @ &lt;span&gt;7&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;15&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;16&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;17&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Type&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;FuncType &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;18&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Func&lt;span&gt;:&lt;/span&gt; &lt;span&gt;3&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;19&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Params&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;FieldList &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;20&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Opening&lt;span&gt;:&lt;/span&gt; &lt;span&gt;3&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;21&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Closing&lt;span&gt;:&lt;/span&gt; &lt;span&gt;3&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;22&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;23&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;24&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Body&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BlockStmt &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;25&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Lbrace&lt;span&gt;:&lt;/span&gt; &lt;span&gt;3&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;26&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  List&lt;span&gt;:&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Stmt &lt;span&gt;(&lt;/span&gt;&lt;span&gt;len&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;27&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;0&lt;/span&gt;&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;ExprStmt &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;28&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  X&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;CallExpr &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;29&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Fun&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Ident &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;30&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  NamePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;4&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;31&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;println&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;32&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;33&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Lparen&lt;span&gt;:&lt;/span&gt; &lt;span&gt;4&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;34&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Args&lt;span&gt;:&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Expr &lt;span&gt;(&lt;/span&gt;&lt;span&gt;len&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;35&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;0&lt;/span&gt;&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BasicLit &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;36&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  ValuePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;4&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;37&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Kind&lt;span&gt;:&lt;/span&gt; STRING&lt;br/&gt;    &lt;span&gt;38&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Value&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;\\&quot;&lt;/span&gt;Hello&lt;span&gt;,&lt;/span&gt; World&lt;span&gt;!&lt;/span&gt;\\&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;39&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;40&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;41&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Ellipsis&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;42&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Rparen&lt;span&gt;:&lt;/span&gt; &lt;span&gt;4&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;25&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;43&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;44&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;45&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;46&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Rbrace&lt;span&gt;:&lt;/span&gt; &lt;span&gt;5&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;47&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;48&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;49&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;50&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Scope&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Scope &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;51&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Objects&lt;span&gt;:&lt;/span&gt; &lt;span&gt;map&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Object &lt;span&gt;(&lt;/span&gt;&lt;span&gt;len&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;52&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;&quot;main&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;obj @ &lt;span&gt;11&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;53&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;54&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;55&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Unresolved&lt;span&gt;:&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Ident &lt;span&gt;(&lt;/span&gt;&lt;span&gt;len&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;56&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;0&lt;/span&gt;&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;obj @ &lt;span&gt;29&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;57&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;58&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;æ•´ä¸ªASTåŒ…æ‹¬Packageã€Nameã€Declsã€Scopeè·ŸUnresolvedï¼Œå…¶ä¸­æ ¸å¿ƒå†…å®¹åœ¨&lt;strong&gt;Declsé‡Œè¾¹ï¼ˆç¬¬6è¡Œï½49è¡Œï¼‰&lt;/strong&gt;ã€‚&lt;/span&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;Declsæ˜¯å£°æ˜declarationçš„é›†åˆï¼Œé‡Œè¾¹æœ‰&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;FuncDecl(å‡½æ•°å£°æ˜)&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼Œæœ‰&lt;/span&gt;&lt;strong&gt;&lt;span&gt;BlockStmt(å—è¯­å¥)&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼Œè¿˜æœ‰&lt;/span&gt;&lt;strong&gt;&lt;span&gt;CallExpr(è¡¨è¾¾å¼)&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ç­‰ã€‚æ·±å…¥&lt;/span&gt;&lt;span&gt;&lt;span&gt;aståº“&lt;/span&gt;&lt;span&gt;ï¼Œå¯ä»¥å‘ç°&lt;/span&gt;&lt;strong&gt;&lt;span&gt;è¿™ä¸‰ä¸ªæ­£æ˜¯ASTèŠ‚ç‚¹çš„ä¸»è¦ç±»å‹ï¼Œå®ƒä»¬éƒ½å®ç°äº†Node(èŠ‚ç‚¹)æ¥å£&lt;/span&gt;&lt;span&gt;ï¼Œå°±æ˜¯è¯´ï¼ŒASTè¿™é¢—æ ‘æŒ‚çš„éƒ½æ˜¯è¿™ä¸‰ä¸ªç©æ„ã€‚&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;// ----------------------------------------------------------------------------&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// Interfaces&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// There are 3 main classes of nodes: Expressions and type nodes,&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// statement nodes, and declaration nodes. The node names usually&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// match the corresponding Go spec production names to which they&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// correspond. The node fields correspond to the individual parts&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// of the respective productions.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// All nodes contain position information marking the beginning of&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// the corresponding source text segment; it is accessible via the&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// Pos accessor method. Nodes may contain additional position info&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// for language constructs where comments may be found between parts&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// of the construct (typically any larger, parenthesized subpart).&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// That position information is needed to properly position comments&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// when printing the construct.&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// All node types implement the Node interface.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; Node &lt;span&gt;interface&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;Pos&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; token&lt;span&gt;.&lt;/span&gt;Pos &lt;span&gt;// position of first character belonging to the node&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;End&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; token&lt;span&gt;.&lt;/span&gt;Pos &lt;span&gt;// position of first character immediately after the node&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// All expression nodes implement the Expr interface.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; Expr &lt;span&gt;interface&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  Node&lt;br/&gt;  &lt;span&gt;exprNode&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// All statement nodes implement the Stmt interface.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; Stmt &lt;span&gt;interface&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  Node&lt;br/&gt;  &lt;span&gt;stmtNode&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// All declaration nodes implement the Decl interface.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; Decl &lt;span&gt;interface&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  Node&lt;br/&gt;  &lt;span&gt;declNode&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å¸¸è§çš„è¡¨è¾¾å¼æœ‰ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;UnaryExpr ä¸€å…ƒè¡¨è¾¾å¼&lt;br/&gt;BinaryExpr äºŒå…ƒè¡¨è¾¾å¼&lt;br/&gt;ParenExpr æ‹¬å·è¡¨è¾¾å¼&lt;span&gt;,&lt;/span&gt;è¢«æ‹¬å·åŒ…è£¹çš„è¡¨è¾¾å¼&lt;br/&gt;&lt;span&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å¸¸è§çš„è¯­å¥æœ‰ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;AssignStmt èµ‹å€¼è¯­å¥&lt;br/&gt;SwitchStmt &lt;span&gt;switch&lt;/span&gt; è¯­å¥&lt;br/&gt;DeferStmt å»¶è¿Ÿè¯­å¥&lt;br/&gt;ForStmt &lt;span&gt;for&lt;/span&gt; è¯­å¥&lt;br/&gt;&lt;span&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;æ›´å¤šå®šä¹‰åœ¨&lt;/span&gt;&lt;span&gt;&lt;span&gt;astæ–‡ä»¶&lt;/span&gt;&lt;span&gt;ä¸­éƒ½å¯ä»¥æ‰¾åˆ°ï¼Œå¹¶ä¸éš¾ä»¥ç†è§£ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;h3&gt;&lt;strong&gt;éœ€æ±‚å®ç°&lt;/strong&gt;&lt;/h3&gt;&lt;p&gt;&lt;span&gt;è®¤è¯†äº†Tokenè·ŸASTåï¼Œæˆ‘ä»¬çœ‹æ€ä¹ˆç®€å•å®ç°æˆ‘ä»¬çš„è§„åˆ™è§£æï¼Œè¿˜æ˜¯ç”¨ä¸Šæ–‡çš„ä¾‹å­ï¼Œè¦åˆ¤æ–­httpè¯·æ±‚headerçš„key/valueåŠcookieçš„name/valueæ˜¯å¦æ»¡è¶³ä»¥ä¸‹è§„åˆ™ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&quot;header&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;{&lt;/span&gt; &lt;span&gt;&quot;key&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;X-APP-ID&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&quot;value&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;Ves&quot;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;cookie&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;&quot;name&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;feature&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;value&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;dev/wynnliu/qualify-rule&quot;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;ä»¥headerçš„è§„åˆ™è§£æASTä¸ºä¾‹ï¼Œ`&lt;/span&gt;&lt;span&gt;&lt;code&gt;header.key==&quot;X-APP-ID&quot; &amp;amp;&amp;amp; header.value==&quot;Ves&quot;`&lt;/code&gt;&lt;span&gt;ï¼Œæ‰“å°çš„ASTå¦‚ä¸‹ï¼Œ&lt;/span&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;ASTå¾ˆæ¸…æ™°åœ°è¡¨ç¤ºè¿™æ¡è§„åˆ™æ˜¯ä¸ªBinaryExprï¼Œå³äºŒå…ƒè¡¨è¾¾å¼ï¼ŒäºŒå…ƒè¡¨è¾¾å¼çš„å·¦è¾¹ä¸ºXï¼Œå³è¾¹æ˜¯Yï¼Œé€»è¾‘è¿ç®—ç¬¦ä¸ºOp&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;Â     0&lt;/span&gt;  &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BinaryExpr &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;1&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  X&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BinaryExpr &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;2&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  X&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;SelectorExpr &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;3&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  X&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Ident &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;4&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  NamePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;5&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;header&quot;&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;6&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Obj&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Object &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;7&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Kind&lt;span&gt;:&lt;/span&gt; bad&lt;br/&gt;     &lt;span&gt;8&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;9&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;10&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;11&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Sel&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Ident &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;12&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  NamePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;13&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;key&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;14&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;15&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;16&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  OpPos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;17&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Op&lt;span&gt;:&lt;/span&gt; &lt;span&gt;==&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;18&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Y&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BasicLit &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;19&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  ValuePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;20&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Kind&lt;span&gt;:&lt;/span&gt; STRING&lt;br/&gt;    &lt;span&gt;21&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Value&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;\\&quot;&lt;/span&gt;X&lt;span&gt;-&lt;/span&gt;APP&lt;span&gt;-&lt;/span&gt;ID\\&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;22&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;23&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;24&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  OpPos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;25&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Op&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;26&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Y&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BinaryExpr &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;27&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  X&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;SelectorExpr &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;28&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  X&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Ident &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;29&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  NamePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;30&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;header&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;31&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Obj&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;obj @ &lt;span&gt;6&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;32&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;33&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Sel&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Ident &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;34&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  NamePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;35&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;value&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;36&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;37&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;38&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  OpPos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;39&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Op&lt;span&gt;:&lt;/span&gt; &lt;span&gt;==&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;40&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Y&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BasicLit &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;41&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  ValuePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;42&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Kind&lt;span&gt;:&lt;/span&gt; STRING&lt;br/&gt;    &lt;span&gt;43&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Value&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;\\&quot;&lt;/span&gt;Ves\\&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;44&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;45&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;46&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;æœ‰äº†ASTç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥&lt;strong&gt;åˆ†åˆ«è·å–å·¦è¾¹(X)çš„keyå€¼å’Œå³è¾¹(Y)çš„å€¼æ ¹æ®é€»è¾‘è¿ç®—ç¬¦(Op)å®Œæˆåˆ¤æ–­&lt;/strong&gt;ï¼Œå¦‚ä¸‹æ˜¯ç®€å•çš„åˆ¤æ–­å®ç°ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;// Parse&lt;/span&gt;&lt;br/&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;Parse&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;expr &lt;span&gt;string&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; header http&lt;span&gt;.&lt;/span&gt;Header&lt;span&gt;)&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;&lt;span&gt;bool&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;error&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  exprAst&lt;span&gt;,&lt;/span&gt; err &lt;span&gt;:=&lt;/span&gt; parser&lt;span&gt;.&lt;/span&gt;&lt;span&gt;ParseExpr&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;expr&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;if&lt;/span&gt; err &lt;span&gt;!=&lt;/span&gt; &lt;span&gt;nil&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; err&lt;br/&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;// æ‰“å° ast&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;//fset := token.NewFileSet()&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;//ast.Print(fset, exprAst)&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;return&lt;/span&gt; &lt;span&gt;judge&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;exprAst&lt;span&gt;,&lt;/span&gt; header&lt;span&gt;)&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;nil&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// åˆ¤æ–­&lt;/span&gt;&lt;br/&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;judge&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;bop ast&lt;span&gt;.&lt;/span&gt;Node&lt;span&gt;,&lt;/span&gt; header http&lt;span&gt;.&lt;/span&gt;Header&lt;span&gt;)&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;// æ–­è¨€æˆäºŒå…ƒè¡¨è¾¾å¼&lt;/span&gt;&lt;br/&gt;  expr &lt;span&gt;:=&lt;/span&gt; bop&lt;span&gt;.&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BinaryExpr&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;  x &lt;span&gt;:=&lt;/span&gt; expr&lt;span&gt;.&lt;/span&gt;X&lt;span&gt;.&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BinaryExpr&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;  key &lt;span&gt;:=&lt;/span&gt; x&lt;span&gt;.&lt;/span&gt;Y&lt;span&gt;.&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BasicLit&lt;span&gt;)&lt;/span&gt; &lt;span&gt;// keyå€¼&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  y &lt;span&gt;:=&lt;/span&gt; expr&lt;span&gt;.&lt;/span&gt;Y&lt;span&gt;.&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BinaryExpr&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;  value &lt;span&gt;:=&lt;/span&gt; y&lt;span&gt;.&lt;/span&gt;Y&lt;span&gt;.&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BasicLit&lt;span&gt;)&lt;/span&gt; &lt;span&gt;// valueå€¼&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;// ç­‰å€¼åŒ¹é…&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;return&lt;/span&gt; header&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Get&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;strings&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Trim&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;key&lt;span&gt;.&lt;/span&gt;Value&lt;span&gt;,&lt;/span&gt; &lt;span&gt;`&quot;`&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;==&lt;/span&gt; strings&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Trim&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;value&lt;span&gt;.&lt;/span&gt;Value&lt;span&gt;,&lt;/span&gt; &lt;span&gt;`&quot;`&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2&gt;&lt;strong&gt;æ›´è¿›ä¸€æ­¥&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;é€šè¿‡ä»¥ä¸Šçš„ç®€å•ä¾‹å­ï¼Œæˆ‘ä»¬å¤§æ¦‚å¯ä»¥åˆ©ç”¨goçš„aståº“å’Œparseråº“å®ç°ä¸ªç®€å•çš„è§„åˆ™å¼•æ“ã€‚ä½†è¿™å¯èƒ½è¿˜ä¸å¤Ÿï¼Œå¦‚æœè¦è¦†ç›–æ›´å¤æ‚çš„è§„åˆ™ï¼Œä¸ä»…ä»…æ˜¯åªæœ‰å¸ƒå°”è¡¨è¾¾å¼ï¼Œå°±è¦è®¾è®¡è‡ªå·±çš„è§„åˆ™åŸè¯­ï¼Œæ¯”å¦‚å°†`&lt;/span&gt;&lt;span&gt;&lt;code&gt;header.key==&quot;X-APP-ID&quot; &amp;amp;&amp;amp; header.value==&quot;Ves&quot;`&lt;/code&gt;&lt;span&gt;å’Œ`&lt;/span&gt;&lt;code&gt;cookie.name==&quot;feature&quot; &amp;amp;&amp;amp; cookie.value==&quot;dev/wynnliu/qualify-rule&quot;`&lt;/code&gt;&lt;span&gt;è®¾è®¡æˆ&lt;/span&gt;&lt;code&gt;`req_header_pair_is(&quot;X-APP-ID&quot;, &quot;VES&quot;) &amp;amp;&amp;amp; req_cookie_contain(&quot;feature&quot;, &quot;dev/wynnliu/qualify-rule&quot;)`&lt;/code&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™æ—¶å°±éœ€è¦å¼•å…¥&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;GoYACC&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;&lt;span&gt;YACC(Yet Another Compiler Compiler)ï¼Œæ˜¯ä¸€ä¸ªç»å…¸çš„ç”Ÿæˆè¯­æ³•åˆ†æå™¨çš„å·¥å…·ï¼ŒGoYACCæ˜¯Golangç‰ˆæœ¬çš„YACCã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;ç”¨GoYACCè§£æè‡ªå·±è®¾è®¡çš„BNF/EBNF(å·´ç§‘æ–¯èŒƒå¼ï¼æ‰©å±•å·´ç§‘æ–¯èŒƒå¼ï¼Œå®šä¹‰è¯­æ³•è§„åˆ™)ã€‚GoYACCæ•´ä½“ä½¿ç”¨åŸç†åŸºæœ¬è¿˜æ˜¯ä¸Šæ–‡æåˆ°çš„ç¼–è¯‘è¿‡ç¨‹ï¼Œä½†æ¶‰åŠçš„ç»†èŠ‚è¾ƒå¤šï¼Œæœ¬æ–‡ä¸å±•å¼€ï¼Œæœ‰å…´è¶£çš„è¯»è€…æœ‹å‹å¯ä»¥å‚è€ƒ&lt;/span&gt;&lt;span&gt;&lt;span&gt;TiDB SQL Parser&lt;/span&gt;&lt;span&gt;ï¼Œäº†è§£TiDBçš„sqlè§£æå™¨å¦‚ä½•åŸºäºGoYACCè®¾è®¡å®Œæˆsqlè§£æã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>62de38a6bc89790e9d3023d07b829b19</guid>
<title>logback ï¼šè‡ªå®šä¹‰æ—¥å¿—è„±æ•ç»„ä»¶ï¼Œä¸€ç§ä¸é”™çš„è„±æ•æ–¹æ¡ˆ</title>
<link>https://toutiao.io/k/ol8p74l</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content js_underline_content             autoTypeSetting24psection&amp;#10;            &quot; id=&quot;js_content&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;ï¼ˆç»™&lt;/span&gt;&lt;span&gt;ImportNew&lt;/span&gt;&lt;span&gt;åŠ æ˜Ÿæ ‡ï¼Œæé«˜JavaæŠ€èƒ½ï¼‰&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å‰è¨€&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;åœ¨æˆ‘ä»¬å†™ä»£ç çš„æ—¶å€™ï¼Œä¼šä¹¦å†™è®¸å¤šæ—¥å¿—ä»£ç ï¼Œä½†æ˜¯æœ‰äº›æ•æ„Ÿæ•°æ®æ˜¯éœ€è¦è¿›è¡Œå®‰å…¨è„±æ•å¤„ç†çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äºæ—¥å¿—è„±æ•çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œå¸¸è§çš„æœ‰ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;â‘ ä½¿ç”¨&lt;code&gt;conversionRule&lt;/code&gt;æ ‡ç­¾ï¼Œç»§æ‰¿&lt;code&gt;MessageConverter&lt;br/&gt;&lt;/code&gt;â‘¡ä¹¦å†™ä¸€ä¸ªè„±æ•å·¥å…·ç±»ï¼Œåœ¨æ‰“å°æ—¥å¿—çš„æ—¶å€™å¯¹ç‰¹å®šç‰¹å­—æ®µè¿›è¡Œè„±æ•è¿”å›ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸¤ç§æ–¹å¼å„æœ‰ä¼˜ç¼ºç‚¹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ç¬¬ä¸€ç§æ–¹å¼éœ€è¦ä¿®æ”¹ä»£ç ï¼Œä¸ç¬¦åˆå¼€é—­åŸåˆ™ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¬¬äºŒç§æ–¹å¼ï¼Œéœ€è¦åœ¨æ—¥å¿—æ–¹æ³•çš„å‚æ•°è¿›è¡Œè„±æ•ï¼Œå¯¹åŸç”Ÿæ—¥å¿—æœ‰å…¥ä¾µè¡Œä¸ºã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/h2&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;blockquote mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;blockquote mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot;&gt;&lt;span mpa-is-content=&quot;t&quot;&gt;è‡ªå®šä¹‰è„±æ•ç»„ä»¶&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot;&gt;&lt;span mpa-is-content=&quot;t&quot;&gt;ï¼ˆslf4j+logbackï¼‰&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;/section&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;ä¸€ä¸ªé¡¹ç›®åœ¨ä¹¦å†™äº†å¾ˆå¤šæ‰“å°æ—¥å¿—çš„ä»£ç ï¼Œä½†æ˜¯åé¢æœ‰äº†è„±æ•éœ€æ±‚ï¼Œå¦‚æœæˆ‘ä»¬å»æ‰‹åŠ¨æ”¹åŠ¨ä»£ç ï¼Œä¼šèŠ±è´¹å¤§é‡æ—¶é—´ã€‚å¦‚æœå¼•å…¥æœ¬ç»„ä»¶ï¼Œå®Œæˆé…ç½®å³å¯è½»æ¾å®Œæˆè„±æ•ã€‚ï¼ˆä»…éœ€ä¸‰æ­¥å¯è½»æ¾é…ç½®ï¼‰&lt;/span&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;p mpa-is-content=&quot;t&quot;&gt;&lt;span mpa-is-content=&quot;t&quot;&gt;ä¸€ã€è‡ªå®šä¹‰è„±æ•ç»„ä»¶ - è„±æ•æ•ˆæœæ¼”ç¤º&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6881578947368421&quot; data-type=&quot;png&quot; data-w=&quot;760&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/R3InYSAIZkHjfnQDR1nTwalzIZVhfiayqicxLm7WmpcskA5Zj92aYlfQSuXDibtlHTgNtHttzqpMLEC5kAgQo8rGw/640?wx_fmt=png&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&amp;amp;wx_co=1&amp;amp;tp=wxpic&quot;/&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3142174432497013&quot; data-type=&quot;png&quot; data-w=&quot;837&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/R3InYSAIZkHjfnQDR1nTwalzIZVhfiayqjeKvy3F0v9kSxMU2gXrGeokrFibWT7wffSynQVfNUfofv5U82QibB7Vg/640?wx_fmt=png&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&amp;amp;wx_co=1&amp;amp;tp=wxpic&quot;/&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;p mpa-is-content=&quot;t&quot;&gt;&lt;span mpa-is-content=&quot;t&quot;&gt;äºŒã€è‡ªå®šä¹‰è„±æ•ç»„ä»¶ - ä½¿ç”¨æ–¹å¼&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;1ã€å¼•å…¥JaråŒ…ä¾èµ–&lt;/span&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‰ææ˜¯ä½ å°†JaråŒ…æ‰“å…¥æœ¬åœ°ä»“åº“ï¼ŒJaråŒ…åœ°å€è§åæ–‡ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&amp;lt;dependency&amp;gt;&lt;br/&gt;Â Â Â Â &amp;lt;groupId&amp;gt;pers.liuchengyin&amp;lt;/groupId&amp;gt;&lt;br/&gt;Â Â Â Â &amp;lt;artifactId&amp;gt;logback-desensitization&amp;lt;/artifactId&amp;gt;&lt;br/&gt;Â Â Â Â &amp;lt;version&amp;gt;1.0.0&amp;lt;/version&amp;gt;&lt;br/&gt;&amp;lt;/dependency&amp;gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;2ã€æ›¿æ¢æ—¥å¿—æ–‡ä»¶é…ç½®ç±»(logback.xml)&lt;/span&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ—¥å¿—æ‰“å°æ–¹å¼éƒ½åªéœ€è¦æ›¿æ¢æˆè„±æ•çš„ç±»å³å¯ï¼Œå¦‚æœä½ çš„ä¸šåŠ¡ä¸éœ€è¦ï¼Œåˆ™æ— éœ€æ›¿æ¢ã€‚&lt;/p&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â‘ ConsoleAppender - æ§åˆ¶å°è„±æ•&lt;/span&gt;&lt;/h5&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;//Â åŸç±»&lt;br/&gt;ch.qos.logback.core.ConsoleAppender&lt;br/&gt;//Â æ›¿æ¢ç±»&lt;br/&gt;pers.liuchengyin.logbackadvice.LcyConsoleAppender&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â‘¡RollingFileAppender - æ»šåŠ¨æ–‡ä»¶&lt;/span&gt;&lt;/h5&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;//Â åŸç±»&lt;br/&gt;ch.qos.logback.core.rolling.RollingFileAppender&lt;br/&gt;//Â æ›¿æ¢ç±»&lt;br/&gt;pers.liuchengyin.logbackadvice.LcyRollingFileAppender&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â‘¢FileAppender - æ–‡ä»¶&lt;/span&gt;&lt;/h5&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;//Â åŸç±»&lt;br/&gt;ch.qos.logback.core.FileAppender&lt;br/&gt;//Â æ›¿æ¢ç±»&lt;br/&gt;pers.liuchengyin.logbackadvice.LcyFileAppender&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;æ›¿æ¢ç¤ºä¾‹ï¼š&lt;/span&gt;&lt;/h4&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&amp;lt;propertyÂ name=&lt;span&gt;&quot;CONSOLE_LOG_PATTERN&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â value=&lt;span&gt;&quot;%yellow(%date{yyyy-MM-ddÂ HH:mm:ss})Â |%highlight(%-5level)Â |%blue(%thread)Â |%blue(%file:%line)Â |%green(%logger)Â |%cyan(%msg%n)&quot;&lt;/span&gt;/&amp;gt;&lt;br/&gt;&lt;br/&gt;&amp;lt;!--Â ConsoleAppenderÂ æ§åˆ¶å°è¾“å‡ºæ—¥å¿—Â --&amp;gt;&lt;br/&gt;&amp;lt;appenderÂ name=&lt;span&gt;&quot;CONSOLE&quot;&lt;/span&gt;Â class=&lt;span&gt;&quot;pers.liuchengyin.logbackadvice.LcyConsoleAppender&quot;&lt;/span&gt;&amp;gt;&lt;br/&gt;Â Â Â Â &amp;lt;encoder&amp;gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &amp;lt;pattern&amp;gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;${CONSOLE_LOG_PATTERN}&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &amp;lt;/pattern&amp;gt;&lt;br/&gt;Â Â Â Â &amp;lt;/encoder&amp;gt;&lt;br/&gt;&amp;lt;/appender&amp;gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3ã€æ·»åŠ è„±æ•é…ç½®æ–‡ä»¶(logback-desensitize.yml)&lt;/span&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯¥é…ç½®æ–‡ä»¶åº”è¯¥æ”¾åœ¨resourcesæ–‡ä»¶ä¸‹&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5381818181818182&quot; data-type=&quot;png&quot; data-w=&quot;275&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/R3InYSAIZkHjfnQDR1nTwalzIZVhfiayqEjX6nZrcu6icvhLtM2f19vXicrLyWwHsVXLCc9p3xI6gvTiaRFRlo3ibibg/640?wx_fmt=png&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&amp;amp;wx_co=1&amp;amp;tp=wxpic&quot;/&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;figcaption&gt;&lt;br/&gt;&lt;/figcaption&gt;&lt;/figure&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;p mpa-is-content=&quot;t&quot;&gt;&lt;span mpa-is-content=&quot;t&quot;&gt;ä¸‰ã€è‡ªå®šä¹‰è„±æ•ç»„ä»¶ - è„±æ•è§„èŒƒ&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;1ã€æ”¯æŒæ•°æ®ç±»å‹&lt;/span&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…«å¤§åŸºæœ¬ç±»å‹åŠå…¶åŒ…è£…ç±»å‹ã€Mapã€Listã€ä¸šåŠ¡é‡Œçš„Pojoå¯¹è±¡ã€List&amp;lt;ä¸šåŠ¡é‡Œçš„Pojoå¯¹è±¡&amp;gt;ã€JSONå­—ç¬¦ä¸²ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;æ³¨ï¼šåœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„æ—¶å€™ï¼Œåªéœ€è¦é…ç½®å¯¹è±¡é‡Œçš„å±æ€§å€¼å°±è¡Œã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;2ã€ä¸æ”¯æŒçš„æ•°æ®ç±»å‹&lt;/span&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;List&amp;lt;å…«å¤§åŸºæœ¬ç±»å‹åŠåŒ…è£…ç±»å‹&amp;gt;ï¼Œå› ä¸ºä¸çŸ¥é“è„±æ•çš„æ•°æ®æºå…·ä½“æ˜¯å“ªä¸€ä¸ªã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3ã€åŒ¹é…è§„åˆ™&lt;/span&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;key + åˆ†å‰²ç¬¦ + valueï¼Œç›®å‰ä»…æ”¯æŒå†’å·(:)å’Œç­‰å·(=)ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;log.info(&lt;span&gt;&quot;yourÂ email:{},Â yourÂ phone:{}&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;123456789@qq.com&quot;&lt;/span&gt;,&lt;span&gt;&quot;15310763497&quot;&lt;/span&gt;);&lt;br/&gt;log.info(&lt;span&gt;&quot;yourÂ email={},Â yourÂ cellphone={}&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;123456789@qq.com&quot;&lt;/span&gt;,&lt;span&gt;&quot;15310763497&quot;&lt;/span&gt;);&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;key&lt;/code&gt;ï¼šå®šä¹‰äº†å¯¹åº”éœ€è¦è„±æ•çš„å…³é”®å­—ï¼Œå¦‚ä¸Šè¯‰çš„emailã€phoneç­‰ä»¥åŠä¸šåŠ¡å¯¹è±¡ä¸­çš„å­—æ®µã€Mapä¸­çš„Keyã€JSONä¸­çš„Key&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;value&lt;/code&gt;ï¼šéœ€è¦è„±æ•çš„å€¼ï¼Œå¦‚ä¸Šè¯‰çš„&lt;code&gt;123456789@qq.com&lt;/code&gt;ã€&lt;code&gt;15310763497&lt;/code&gt;ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4ã€æ—¥å¿—è§„èŒƒ&lt;/span&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å»ºè®®ä¹¦å†™æ—¥å¿—çš„æ—¶å€™å°½é‡è§„èŒƒï¼Œå¯¹äºkeyä¸ºä¸­æ–‡çš„æ˜¯æ²¡æœ‰åŠæ³•è„±æ•çš„ï¼Œè§„èŒƒç¨‹åº¦å¯ä»¥è§è„±æ•æ•ˆæœæ¼”ç¤ºé‡Œçš„ä»£ç ã€‚&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;p mpa-is-content=&quot;t&quot;&gt;&lt;span mpa-is-content=&quot;t&quot;&gt;å››ã€logback-desensitize.ymlé…ç½®è¯´æ˜&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;br/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;&lt;span&gt;#Â æ—¥å¿—è„±æ•&lt;/span&gt;&lt;br/&gt;&lt;span&gt;log&lt;/span&gt;-desensitize:&lt;br/&gt;Â Â &lt;span&gt;#Â æ˜¯å¦å¿½ç•¥å¤§å°å†™åŒ¹é…ï¼Œé»˜è®¤ä¸ºtrue&lt;/span&gt;&lt;br/&gt;Â Â ignore:Â &lt;span&gt;true&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;#Â æ˜¯å¦å¼€å¯è„±æ•ï¼Œé»˜è®¤ä¸ºfalse&lt;/span&gt;&lt;br/&gt;Â Â open:Â &lt;span&gt;true&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;#Â patternä¸‹çš„key/valueä¸ºå›ºå®šè„±æ•è§„åˆ™&lt;/span&gt;&lt;br/&gt;Â Â pattern:&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â é‚®ç®±Â -Â @å‰ç¬¬4-7ä½è„±æ•&lt;/span&gt;&lt;br/&gt;Â Â Â Â email:Â &lt;span&gt;&quot;@&amp;gt;(4,7)&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â qqé‚®ç®±Â -Â @å1-3ä½è„±æ•&lt;/span&gt;&lt;br/&gt;Â Â Â Â qqemail:Â &lt;span&gt;&quot;@&amp;lt;(1,3)&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â å§“åÂ -Â å§“è„±æ•ï¼Œå¦‚*æ°ä¼¦&lt;/span&gt;&lt;br/&gt;Â Â Â Â name:Â 1,1&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â å¯†ç Â -Â æ‰€æœ‰éœ€è¦å®Œå…¨è„±æ•çš„éƒ½å¯ä»¥ä½¿ç”¨å†…ç½®çš„password&lt;/span&gt;&lt;br/&gt;Â Â Â Â password:Â password&lt;br/&gt;Â Â patterns:&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â èº«ä»½è¯å·ï¼Œkeyåé¢çš„å­—æ®µéƒ½å¯ä»¥åŒ¹é…ä»¥ä¸‹è§„åˆ™(ç”¨é€—å·åˆ†éš”)&lt;/span&gt;&lt;br/&gt;Â Â Â Â -Â key:Â identity,idcard&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;#Â å®šä¹‰è§„åˆ™çš„æ ‡è¯†&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â custom:&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;# defaultRegexè¡¨ç¤ºä½¿ç”¨ç»„ä»¶å†…ç½®çš„è§„åˆ™ï¼šidentityè¡¨ç¤ºèº«ä»½è¯å·Â -Â å†…ç½®çš„18/15ä½&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â -Â defaultRegex:Â identity&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â position:Â 9,13&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;#Â å†…ç½®çš„otherè¡¨ç¤ºå¦‚æœå…¶ä»–è§„åˆ™éƒ½æ— æ³•åŒ¹é…åˆ°ï¼Œåˆ™æŒ‰è¯¥è§„åˆ™å¤„ç†&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â -Â defaultRegex:Â other&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â position:Â 9,10&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â ç”µè¯å·ç ï¼Œkeyåé¢çš„å­—æ®µéƒ½å¯ä»¥åŒ¹é…ä»¥ä¸‹è§„åˆ™(ç”¨é€—å·åˆ†éš”)&lt;/span&gt;&lt;br/&gt;Â Â Â Â -Â key:Â phone,cellphone,mobile&lt;br/&gt;Â Â Â Â Â Â custom:&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;#Â æ‰‹æœºå·Â -Â å†…ç½®çš„11ä½æ‰‹æœºåŒ¹é…è§„åˆ™&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â -Â defaultRegex:Â phone&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â position:Â 4,7&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;#Â è‡ªå®šä¹‰æ­£åˆ™åŒ¹é…è¡¨è¾¾å¼ï¼šåº§æœºå·(å¸¦åŒºå·ï¼Œå·ç ä¸ƒä½|å…«ä½)&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â -Â customRegex:Â &lt;span&gt;&quot;^0[0-9]{2,3}-[0-9]{7,8}&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;#Â -åé¢çš„1-4ä½è„±æ•&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â position:Â &lt;span&gt;&quot;-&amp;lt;(1,4)&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;#Â è‡ªå®šä¹‰æ­£åˆ™åŒ¹é…è¡¨è¾¾å¼ï¼šåº§æœºå·(ä¸å¸¦åŒºå·)&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â -Â customRegex:Â &lt;span&gt;&quot;^[0-9]{7,8}&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â position:Â 3,5&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;#Â å†…ç½®çš„otherè¡¨ç¤ºå¦‚æœå…¶ä»–è§„åˆ™éƒ½æ— æ³•åŒ¹é…åˆ°ï¼Œåˆ™æŒ‰è¯¥è§„åˆ™å¤„ç†&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â -Â defaultRegex:Â other&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â position:Â 1,3&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â è¿™ç§æ–¹å¼ä¸å¤ªæ¨èÂ -Â ä¸€æ—¦åŒ¹é…ä¸ä¸Šï¼Œå°±ä¸ä¼šè„±æ•&lt;/span&gt;&lt;br/&gt;Â Â Â Â -Â key:Â localMobile&lt;br/&gt;Â Â Â Â Â Â custom:&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â customRegex:Â &lt;span&gt;&quot;^0[0-9]{2,3}-[0-9]{7,8}&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â position:Â 1,3&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šé¢è¿™ä¸ªé…ç½®æ˜¯ç›¸å¯¹å®Œæ•´çš„ï¼Œä¸€å®šè¦ä¸¥æ ¼éµå®ˆå±‚çº§é…ç½®æ ¼å¼ã€‚&lt;/p&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot;&gt;&lt;span mpa-is-content=&quot;t&quot;&gt;è‡ªå®šä¹‰è„±æ•æ”¯æŒçš„æ–¹å¼&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/h4&gt;&lt;/section&gt;&lt;/section&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;1ã€key:valueçš„æ–¹å¼&lt;/span&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;phoneï¼š4,7ï¼Œè¡¨ç¤ºphoneå±æ€§çš„4-7ä½è¿›è¡Œè„±æ•&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åŸå§‹æ•°æ®ï¼š&lt;code&gt;13610357861&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è„±æ•åï¼š&lt;code&gt;136****7861&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;2ã€ä»¥ç¬¦å·ä½œä¸ºèµ·å§‹ã€ç»“æŸèŠ‚ç‚¹ä½œä¸ºè„±æ•æ ‡å¿—&lt;/span&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;emai:&quot;@&amp;gt;(4,7)&quot;&lt;/code&gt;ï¼Œ&lt;code&gt;@&lt;/code&gt;ä¸ºè„±æ•æ ‡å¿—ï¼Œ&lt;code&gt;&amp;gt;&lt;/code&gt;è¡¨ç¤ºå…¶ä¸ºç»“æŸèŠ‚ç‚¹ï¼Œ&lt;code&gt;&amp;lt;&lt;/code&gt;è¡¨ç¤ºå…¶ä¸ºå¼€å§‹èŠ‚ç‚¹ã€‚å³&lt;code&gt;@&amp;gt;&lt;/code&gt;è¡¨ç¤ºå¯¹&lt;code&gt;@&lt;/code&gt;ä¹‹å‰çš„è¿›è¡Œè„±æ•ï¼Œ&lt;code&gt;@&amp;lt;&lt;/code&gt;è¡¨ç¤ºå¯¹&lt;code&gt;@&lt;/code&gt;ä¹‹åçš„è¿›è¡Œè„±æ•ã€‚è¿™ä¸ªç¤ºä¾‹å°±æ˜¯&lt;code&gt;@&lt;/code&gt;å‰çš„æ•°æ®çš„ç¬¬4-7ä½è¿›è¡Œè„±æ•ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;æ³¨æ„ï¼šè¿™ç§è§„åˆ™é‡Œçš„åŒå¼•å·ã€æ‹¬å·ä¸èƒ½çœç•¥ï¼Œå…¶æ¬¡&lt;code&gt;:&lt;/code&gt;å’Œ&lt;code&gt;=&lt;/code&gt;ä¸èƒ½ä½œä¸ºæ ‡å¿—ç¬¦å·ï¼Œå› ä¸ºå’ŒåŒ¹é…è§„åˆ™æœ‰å†²çª&lt;/p&gt;&lt;/blockquote&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;åŸå§‹æ•°æ®ï¼š&lt;code&gt;123456789@qq.com&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;&quot;@&amp;gt;(4,7)&quot;&lt;/code&gt;è„±æ•åï¼š&lt;code&gt;123****89@qq.com&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;&quot;@&amp;lt;(1,3)&quot;&lt;/code&gt;è„±æ•åï¼š&lt;code&gt;123456789@***com&lt;/code&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3ã€è‡ªå®šä¹‰æ­£åˆ™è„±æ•&lt;/span&gt;&lt;/h4&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;patterns:&lt;br/&gt;Â Â &lt;span&gt;#Â æ‰‹æœºå·&lt;/span&gt;&lt;br/&gt;Â Â -Â key:Â phone,mobile&lt;br/&gt;Â Â Â Â custom:&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;#Â æ‰‹æœºå·çš„æ­£åˆ™&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â -Â customRegex:Â &lt;span&gt;&quot;^1[0-9]{10}&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;#Â è„±æ•èŒƒå›´&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â position:Â 4,7&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;customRegexï¼šæ­£åˆ™è¡¨è¾¾å¼ï¼Œå¦‚æœç¬¦åˆè¯¥è¡¨è¾¾å¼ï¼Œåˆ™ä½¿ç”¨å…¶å¯¹åº”çš„è„±æ•è§„åˆ™(position)&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;4ã€ä¸€ä¸ªå­—æ®µï¼Œæ ¹æ®å¤šç§å€¼å«ä¹‰è¿›è¡Œè‡ªå®šä¹‰è„±æ•&lt;/span&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯”å¦‚è¯´ï¼Œusernameå­—æ®µçš„å€¼å¯ä»¥æ˜¯æ‰‹æœºå·ã€ä¹Ÿå¯ä»¥æ˜¯é‚®ç®±ï¼Œè¿™ä¸ªå€¼åŠ¨æ€æ”¹å˜çš„ï¼Œå‰é¢å‡ ç§æ–¹å¼éƒ½æ²¡åŠæ³•è§£å†³ï¼Œå¯ä»¥ä½¿ç”¨è¯¥æ–¹å¼ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;patterns:&lt;br/&gt;Â Â -Â key:Â username&lt;br/&gt;Â Â Â Â custom:&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;#Â æ‰‹æœºå·Â -Â 11ä½&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â -Â defaultRegex:Â phone&lt;br/&gt;Â Â Â Â Â Â Â Â positionÂ :Â 4,7&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;#Â é‚®ç®±Â -Â @&lt;/span&gt;&lt;br/&gt;Â Â Â -Â defaultRegex:Â email&lt;br/&gt;Â Â Â Â Â positionÂ :Â &lt;span&gt;&quot;@&amp;gt;(3,12)&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â &lt;span&gt;#Â èº«ä»½è¯Â -Â 15/18ä½&lt;/span&gt;&lt;br/&gt;Â Â Â -Â defaultRegex:Â identity&lt;br/&gt;Â Â Â Â Â positionÂ :Â 1,3&lt;br/&gt;Â Â Â &lt;span&gt;#Â è‡ªå®šä¹‰æ­£åˆ™&lt;/span&gt;&lt;br/&gt;Â Â Â -Â customRegex:Â &lt;span&gt;&quot;^1[0-9]{10}&quot;&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â positionÂ :Â 1,3&lt;br/&gt;Â Â Â &lt;span&gt;#Â éƒ½åŒ¹é…ä¸åˆ°æ—¶ï¼ŒæŒ‰ç…§è¿™ç§è§„åˆ™æ¥&lt;/span&gt;&lt;br/&gt;Â Â Â -Â defaultRegex:Â other&lt;br/&gt;Â Â Â Â Â positionÂ :Â 1,3&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;æ³¨æ„ï¼šä¸Šé¢ç¤ºä¾‹ä¸­åŒ¹é…è§„åˆ™é‡Œçš„ åŒå¼•å·å’Œæ‹¬å· éƒ½ä¸èƒ½çœç•¥&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯¥ç»„ä»¶å†…ç½®å››ç§åŒ¹é…è§„åˆ™ï¼šæ‰‹æœºå·ã€èº«ä»½è¯å·ã€é‚®ç®±ã€other(å…¶ä»–åŒ¹é…ä¸åˆ°æ—¶ç”¨çš„)ï¼Œå†…ç½®ä¸€ç§è„±æ•æ–¹å¼ï¼špasswordï¼Œè¡¨ç¤ºå®Œå…¨è„±æ•ï¼Œå¯ç”¨äºpattrenä¸‹çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ³¨ï¼šå½“patternå’Œpatternsä¸‹çš„keyæœ‰é‡å¤çš„æ—¶å€™ï¼Œåªä¼šä½¿ç”¨patternä¸‹æŒ‡å®šçš„æ–¹å¼è¿›è¡Œè„±æ•ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;JaråŒ…åœ°å€å’Œæºç åœ°å€ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;https://github.com/liuchengyin01/LogbackDesensitization/tree/master/repo/pers/liuchengyin/logback-desensitization/1.0.0&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5353805073431241&quot; data-type=&quot;png&quot; data-w=&quot;749&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/R3InYSAIZkHjfnQDR1nTwalzIZVhfiayqxn83EAcelp35z8wUL0AbPdPUe8Fo59iacHB6pvrGAKqEZN4E2kicDhIw/640?wx_fmt=png&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&amp;amp;wx_co=1&amp;amp;tp=wxpic&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;Githubåœ°å€ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;https://github.com/liuchengyin01/LogbackDesensitization&lt;/p&gt;&lt;/blockquote&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/h5&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;&lt;strong mpa-from-tpl=&quot;t&quot;&gt;&lt;span mpa-is-content=&quot;t&quot;&gt;JaråŒ…æ‰“å…¥Mavenæœ¬åœ°ä»“åº“çš„æ–¹å¼&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/h4&gt;&lt;/section&gt;&lt;/section&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;mvnÂ install:install-fileÂ -DgroupId=pers.liuchengyinÂ -DartifactId=logback-desensitizationÂ -Dversion=1.0.0Â -Dpackaging=jarÂ -Dfile=logback-desensitization-1.0.0.jar&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‘½ä»¤è¯´æ˜ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;-DgroupId&lt;br/&gt;Â è¡¨ç¤ºjarå¯¹åº”çš„groupIdÂ Â &lt;br/&gt;Â &amp;lt;groupId&amp;gt;pers.liuchengyin&amp;lt;/groupId&amp;gt;&lt;br/&gt;-DartifactId:&lt;br/&gt;Â è¡¨ç¤ºjarå¯¹åº”çš„artifactId&lt;br/&gt;Â &amp;lt;artifactId&amp;gt;logback-desensitization&amp;lt;/artifactId&amp;gt;&lt;br/&gt;-Dversion&lt;br/&gt;Â è¡¨ç¤ºjarå¯¹åº”çš„Â version&lt;br/&gt;Â &amp;lt;version&amp;gt;1.0.0&amp;lt;/version&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;&lt;p&gt;&lt;span&gt;è½¬è‡ªï¼šä¹æœˆæ¸…æ™¨æŸ³æˆè«&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é“¾æ¥&lt;span&gt;ï¼šblog.csdn.net/qq_40885085/article/details/113385261?spm=1001.2014.3001.5501&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;- EOF -&lt;/span&gt;&lt;/p&gt;&lt;section donone=&quot;shifuMouseDownCard(&#x27;shifu_c_030&#x27;)&quot; label=&quot;Copyright Reserved by PLAYHUDONG.&quot;&gt;&lt;section&gt;&lt;span&gt;æ¨èé˜…è¯»&lt;/span&gt;Â Â &lt;span&gt;ç‚¹å‡»æ ‡é¢˜å¯è·³è½¬&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;amp;mid=2651522226&amp;amp;idx=1&amp;amp;sn=71e856f554e23a13d0e612d62190a6b5&amp;amp;chksm=bd2468cd8a53e1db1b358195f32994e5883e7a2a43d7aabc5c0523158e67c8b84822b663baa1&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;SpringBoot + MDC å®ç°å…¨é“¾è·¯è°ƒç”¨æ—¥å¿—è·Ÿè¸ª&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;SpringBoot + MDC å®ç°å…¨é“¾è·¯è°ƒç”¨æ—¥å¿—è·Ÿè¸ª&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a target=&quot;_blank&quot; href=&quot;http://mp.weixin.qq.com/s?__biz=MjM5NzMyMjAwMA==&amp;amp;mid=2651521004&amp;amp;idx=1&amp;amp;sn=a2fd9a815cd15a73be9ceaa2139cf896&amp;amp;chksm=bd2593938a521a85673d0fbc1b76db729a1a99f1e6e0f56b569646c4aa2b9aef5110c9a6b93c&amp;amp;scene=21#wechat_redirect&quot; textvalue=&quot;ä¸€è¡Œlogæ—¥å¿—ï¼Œå¼•å‘äº†P1çš„çº¿ä¸Šäº‹æ•…&quot; linktype=&quot;text&quot; imgurl=&quot;&quot; imgdata=&quot;null&quot; data-itemshowtype=&quot;0&quot; tab=&quot;innerlink&quot; data-linktype=&quot;2&quot;&gt;&lt;span&gt;ä¸€è¡Œlogæ—¥å¿—ï¼Œå¼•å‘äº†P1çš„çº¿ä¸Šäº‹æ•…&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;çœ‹å®Œæœ¬æ–‡æœ‰æ”¶è·ï¼Ÿè¯·è½¬å‘åˆ†äº«ç»™æ›´å¤šäºº&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;å…³æ³¨ã€ŒImportNewã€ï¼Œæå‡JavaæŠ€èƒ½&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.9166666666666666&quot; data-s=&quot;300,640&quot; data-type=&quot;jpeg&quot; data-w=&quot;600&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/2A8tXicCG8ylbWIGfdoDED35IRRySQZTXUkJ1eop9MHApzFibKnOo0diboXpl0rmS5mH78YJhsWQv0dhv718A6kUA/640?wx_fmt=jpeg&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç‚¹èµå’Œåœ¨çœ‹å°±æ˜¯æœ€å¤§çš„æ”¯æŒâ¤ï¸&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;mp-style-type data-value=&quot;3&quot;/&gt;&lt;/p&gt;&lt;/div&gt;

          
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>35a5fdaf7d827a97daa5a603118d9a87</guid>
<title>æ¢ç´¢ Seata  æœåŠ¡çš„ AT æ¨¡å¼ä¸‹çš„åˆ†å¸ƒå¼å¼€å‘å®æˆ˜æŒ‡å—ï¼ˆ2ï¼‰</title>
<link>https://toutiao.io/k/iavck8i</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div id=&quot;content_views&quot; class=&quot;markdown_views prism-tomorrow-night&quot;&gt;
                    &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;
                        &lt;path stroke-linecap=&quot;round&quot; d=&quot;M5,0 0,2.5 5,5z&quot; id=&quot;raphael-marker-block&quot;/&gt;
                    &lt;/svg&gt;
                    &lt;h2&gt;&lt;a id=&quot;_0&quot;/&gt;æ‰¿æ¥ä¸Šæ–‡&lt;/h2&gt; 
&lt;p&gt;ä¸Šä¸€ç¯‡æ–‡ç« è¯´åˆ°äº†Seata ä¸ºç”¨æˆ·æä¾›äº† ATã€TCCã€SAGA å’Œ XA äº‹åŠ¡æ¨¡å¼ï¼Œä¸ºç”¨æˆ·æ‰“é€ ä¸€ç«™å¼çš„åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆã€‚é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°†è¦é’ˆå¯¹äºATæ¨¡å¼ä¸‹è¿›è¡Œåˆ†å¸ƒå¼äº‹åŠ¡å¼€å‘çš„åŸç†è¿›è¡Œä»‹ç»ä»¥åŠå®æˆ˜ã€‚&lt;/p&gt; 
&lt;h2&gt;&lt;a id=&quot;Seata_AT_4&quot;/&gt;Seata ATæ¨¡å¼&lt;/h2&gt; 
&lt;p&gt;åœ¨ATã€TCCã€SAGA å’Œ XA è¿™å››ç§äº‹åŠ¡æ¨¡å¼ä¸­ä½¿ç”¨æœ€å¤šï¼Œæœ€æ–¹ä¾¿çš„å°±æ˜¯ AT æ¨¡å¼ã€‚ä¸å…¶ä»–äº‹åŠ¡æ¨¡å¼ç›¸æ¯”ï¼ŒAT æ¨¡å¼å¯ä»¥åº”å¯¹å¤§å¤šæ•°çš„ä¸šåŠ¡åœºæ™¯ï¼Œä¸”åŸºæœ¬å¯ä»¥åšåˆ°æ— ä¸šåŠ¡å…¥ä¾µï¼Œå¼€å‘äººå‘˜èƒ½å¤Ÿæœ‰æ›´å¤šçš„ç²¾åŠ›å…³æ³¨äºä¸šåŠ¡é€»è¾‘å¼€å‘ã€‚&lt;/p&gt; 
&lt;h3&gt;&lt;a id=&quot;AT_8&quot;/&gt;ä½¿ç”¨ATæ¨¡å¼çš„å‰æ&lt;/h3&gt; 
&lt;p&gt;ä»»ä½•åº”ç”¨æƒ³è¦ä½¿ç”¨Seataçš„ AT æ¨¡å¼å¯¹åˆ†å¸ƒå¼äº‹åŠ¡è¿›è¡Œæ§åˆ¶ï¼Œå¿…é¡»æ»¡è¶³ä»¥ä¸‹ 2 ä¸ªå‰æï¼š&lt;/p&gt; 
&lt;ol&gt;&lt;li&gt;å¿…é¡»ä½¿ç”¨æ”¯æŒæœ¬åœ° ACID äº‹åŠ¡ç‰¹æ€§çš„å…³ç³»å‹æ•°æ®åº“ï¼Œä¾‹å¦‚ MySQLã€Oracle ç­‰ï¼›&lt;/li&gt;&lt;li&gt;åº”ç”¨ç¨‹åºå¿…é¡»æ˜¯ä½¿ç”¨ JDBC å¯¹æ•°æ®åº“è¿›è¡Œè®¿é—®çš„ JAVA åº”ç”¨ã€‚&lt;/li&gt;&lt;/ol&gt; 
&lt;h2&gt;&lt;a id=&quot;Seata_15&quot;/&gt;Seataå®‰è£…ä½¿ç”¨&lt;/h2&gt; 
&lt;h3&gt;&lt;a id=&quot;_17&quot;/&gt;ä¸‹è½½åœ°å€&lt;/h3&gt; 
&lt;p&gt;SeataæœåŠ¡è¿›è¡Œä¸‹è½½çš„åœ°å€ï¼šhttps://seata.io/zh-cn/blog/download.htmlï¼Œè®¿é—®ä¹‹åå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„èµ„æºä¸­ï¼Œå¯ä»¥ç›´æ¥è¿›è¡Œä¸‹è½½ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt; 
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/ee4fae470c1d43ed5902bad29a583b26.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt; 
&lt;p&gt;ä½†æ˜¯ç”±äºå®˜æ–¹ç»´æŠ¤çš„ç¨å¾®ç¼“æ…¢ï¼Œæ‰€ä»¥å¹¶ä¸æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå¦‚æœä½ æƒ³è¦ä¸‹è½½è¾ƒæ–°çš„ç‰ˆæœ¬ï¼Œå¯ä»¥å»å®˜æ–¹çš„Gitä»“åº“ä¸­è¿›è¡Œä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬æ–‡ä»¶åŒ…ã€‚åœ°å€ä¸ºï¼šhttps://github.com/seata/seata/releasesï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„æœ€æ–°ç‰ˆæœ¬å·²ç»åˆ°äº†1.6.1äº†&lt;/p&gt; 
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/8a661658b6db3c37e0c7be5e4e39fe61.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt; 
&lt;p&gt;æˆ‘ä»¬é€‰æ‹©ä¸‹è½½å¯¹åº”çš„å¯æ‰§è¡ŒåŒ…å³å¯ã€‚&lt;/p&gt; 
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/1f508662bf5eca4f669318570c42a1a0.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt; 
&lt;h3&gt;&lt;a id=&quot;UNDO_LOG_31&quot;/&gt;åˆ›å»ºUNDO_LOGè¡¨&lt;/h3&gt; 
&lt;p&gt;SEATA ATæ¨¡å¼éœ€è¦é’ˆå¯¹ä¸šåŠ¡ä¸­æ¶‰åŠçš„å„ä¸ªæ•°æ®åº“è¡¨ï¼Œåˆ†åˆ«åˆ›å»ºä¸€ä¸ªUNDO_LOGï¼ˆå›æ»šæ—¥å¿—ï¼‰è¡¨ã€‚ä¸åŒæ•°æ®åº“åœ¨åˆ›å»º UNDO_LOG è¡¨æ—¶ä¼šç•¥æœ‰ä¸åŒï¼Œä»¥ MySQL ä¸ºä¾‹ï¼Œå…¶ UNDO_LOG è¡¨çš„åˆ›è¡¨è¯­å¥å¦‚ä¸‹ï¼š&lt;/p&gt; 
&lt;pre&gt;&lt;code class=&quot;prism language-sql&quot;&gt;
&lt;span class=&quot;token keyword&quot;&gt;CREATE&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;TABLE&lt;/span&gt; &lt;span class=&quot;token identifier&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;undo_log&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token identifier&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bigint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;NULL&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;AUTO_INCREMENT&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token identifier&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;branch_id&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;bigint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token identifier&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;xid&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;varchar&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token identifier&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;varchar&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;128&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token identifier&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;rollback_info&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;longblob&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token identifier&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;log_status&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;11&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token identifier&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;log_created&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;datetime&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token identifier&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;log_modified&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;datetime&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;NOT&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token identifier&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;ext&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;varchar&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;NULL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;PRIMARY&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;KEY&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token identifier&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;UNIQUE&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;KEY&lt;/span&gt; &lt;span class=&quot;token identifier&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;ux_undo_log&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token identifier&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;xid&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token identifier&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;branch_id&lt;span class=&quot;token punctuation&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;ENGINE&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;InnoDB&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;AUTO_INCREMENT&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;DEFAULT&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;CHARSET&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;utf8&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt; 
&lt;h3&gt;&lt;a id=&quot;_52&quot;/&gt;å¯åŠ¨æœåŠ¡&lt;/h3&gt; 
&lt;p&gt;ä¸‹è½½æœåŠ¡å™¨è½¯ä»¶åŒ…åï¼Œå°†å…¶è§£å‹ç¼©ã€‚ä¸»è¦é€šè¿‡è„šæœ¬è¿›è¡Œå¯åŠ¨SeataæœåŠ¡&lt;/p&gt; 
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/e66048427dbc537a6bc049580f02493e.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt; 
&lt;h4&gt;&lt;a id=&quot;Seata_Server__58&quot;/&gt;Seata Server ç›®å½•ä¸­åŒ…å«ä»¥ä¸‹å­ç›®å½•ï¼š&lt;/h4&gt; 
&lt;ul&gt;&lt;li&gt;binï¼šç”¨äºå­˜æ”¾Seata Serverå¯æ‰§è¡Œå‘½ä»¤ã€‚&lt;/li&gt;&lt;li&gt;confï¼šç”¨äºå­˜æ”¾Seata Serverçš„é…ç½®æ–‡ä»¶ã€‚&lt;/li&gt;&lt;li&gt;libï¼šç”¨äºå­˜æ”¾Seata Serverä¾èµ–çš„å„ç§ Jar åŒ…ã€‚&lt;/li&gt;&lt;li&gt;logsï¼šç”¨äºå­˜æ”¾Seata Serverçš„æ—¥å¿—ã€‚&lt;/li&gt;&lt;/ul&gt; 
&lt;h4&gt;&lt;a id=&quot;Seata_Server_65&quot;/&gt;Seata Serverçš„æ‰§è¡Œè„šæœ¬&lt;/h4&gt; 
&lt;ul&gt;&lt;li&gt;seata-server.shï¼šä¸»è¦æ˜¯ä¸ºLinuxå’ŒMacç³»ç»Ÿå‡†å¤‡çš„å¯åŠ¨è„šæœ¬ã€‚æ‰§è¡Œ&lt;code&gt;sh seata-server.sh&lt;/code&gt;å¯åŠ¨æœåŠ¡ã€‚&lt;/li&gt;&lt;li&gt;seata-server.batï¼šä¸»è¦æ˜¯ä¸ºWindowsç³»ç»Ÿå‡†å¤‡çš„å¯åŠ¨è„šæœ¬ã€‚æ‰§è¡Œ&lt;code&gt;cmd seata-server.bat&lt;/code&gt;å¯åŠ¨æœåŠ¡ã€‚&lt;/li&gt;&lt;/ul&gt; 
&lt;p&gt;å…¶ä¸­å‚æ•°çš„é€‰æ‹©èŒƒå›´å¦‚ä¸‹æ‰€ç¤º&lt;/p&gt; 
&lt;pre&gt;&lt;code&gt;--host, -hï¼ˆç®€ç•¥æŒ‡ä»¤ï¼‰è¯¥åœ°å€å‘æ³¨å†Œä¸­å¿ƒå…¬å¼€ï¼Œå…¶ä»–æœåŠ¡å¯ä»¥é€šè¿‡è¯¥ipè®¿é—®seata-serverï¼Œé»˜è®¤: 0.0.0.0
--port, -pï¼ˆç®€ç•¥æŒ‡ä»¤ï¼‰ ç›‘å¬çš„ç«¯å£ï¼Œé»˜è®¤å€¼ä¸º8091
--storeMode, -mï¼ˆç®€ç•¥æŒ‡ä»¤ï¼‰æ—¥å¿—å­˜å‚¨æ¨¡å¼ : fileï¼ˆæ–‡ä»¶ï¼‰ã€dbï¼ˆæ•°æ®åº“ï¼‰ï¼Œé»˜è®¤ä¸ºï¼šfile
--help å¸®åŠ©æŒ‡ä»¤
&lt;/code&gt;&lt;/pre&gt; 
&lt;p&gt;ä¾‹å¦‚æ‰§è¡Œshellè„šæœ¬&lt;/p&gt; 
&lt;pre&gt;&lt;code&gt;sh seata-server.sh -p 8091 -h 127.0.0.1 -m file
&lt;/code&gt;&lt;/pre&gt; 
&lt;h3&gt;&lt;a id=&quot;AT__85&quot;/&gt;AT æ¨¡å¼çš„å·¥ä½œæœºåˆ¶&lt;/h3&gt; 
&lt;p&gt;Seataçš„ATæ¨¡å¼å·¥ä½œæ—¶å¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸¤ä¸ªé˜¶æ®µï¼Œä¸‹é¢æˆ‘ä»¬å°±ç»“åˆä¸€ä¸ªå®ä¾‹æ¥å¯¹ AT æ¨¡å¼çš„å·¥ä½œæœºåˆ¶è¿›è¡Œä»‹ç»ã€‚&lt;/p&gt; 
&lt;h4&gt;&lt;a id=&quot;_89&quot;/&gt;æ•´ä½“æœºåˆ¶&lt;/h4&gt; 
&lt;p&gt;ä¸¤é˜¶æ®µæäº¤åè®®çš„æ¼”å˜ï¼š&lt;/p&gt; 
&lt;ul&gt;&lt;li&gt;ä¸€é˜¶æ®µï¼š&lt;strong&gt;ä¸šåŠ¡æ•°æ®&lt;/strong&gt;å’Œ&lt;strong&gt;å›æ»šæ—¥å¿—è®°å½•&lt;/strong&gt;åœ¨åŒä¸€ä¸ªæœ¬åœ°äº‹åŠ¡ä¸­æäº¤ï¼Œé‡Šæ”¾æœ¬åœ°é”å’Œè¿æ¥èµ„æºã€‚&lt;/li&gt;&lt;li&gt;äºŒé˜¶æ®µï¼š&lt;strong&gt;æäº¤å¼‚æ­¥åŒ–&lt;/strong&gt;ï¼Œéå¸¸å¿«é€Ÿåœ°å®Œæˆã€‚å›æ»šé€šè¿‡ä¸€é˜¶æ®µçš„å›æ»šæ—¥å¿—è¿›è¡Œåå‘è¡¥å¿ã€‚&lt;/li&gt;&lt;/ul&gt; 
&lt;h5&gt;&lt;a id=&quot;AT_96&quot;/&gt;ATæ¨¡å¼ä¸€é˜¶æ®µ&lt;/h5&gt; 
&lt;p&gt;Seata ATæ¨¡å¼ä¸€é˜¶æ®µçš„å·¥ä½œæµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º&lt;br/&gt; &lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/ad4eccb6e90fa0ce2ca8d978fd0ea978.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt; 
&lt;p&gt;ä¸šåŠ¡æ•°æ®å’Œå›æ»šæ—¥å¿—è®°å½•åœ¨åŒä¸€ä¸ªæœ¬åœ°äº‹åŠ¡ä¸­æäº¤ï¼Œé‡Šæ”¾æœ¬åœ°é”å’Œè¿æ¥èµ„æºã€‚&lt;/p&gt; 
&lt;h6&gt;&lt;a id=&quot;SQL_103&quot;/&gt;ç¬¬ä¸€å­é˜¶æ®µ-è·å–SQLçš„åŸºæœ¬ä¿¡æ¯&lt;/h6&gt; 
&lt;p&gt;Seataæ‹¦æˆªå¹¶è§£æä¸šåŠ¡SQLï¼Œå¾—åˆ°SQL çš„æ“ä½œç±»å‹ï¼ˆINSERT/UPDATE/DELETEï¼‰ã€è¡¨åï¼ˆtableXXXï¼‰ã€åˆ¤æ–­æ¡ä»¶ï¼ˆwhere condition = valueï¼‰ç­‰ç›¸å…³ä¿¡æ¯ã€‚&lt;/p&gt; 
&lt;h6&gt;&lt;a id=&quot;_107&quot;/&gt;ç¬¬äºŒå­é˜¶æ®µ-æŸ¥è¯¢å¹¶å¤‡ä»½ã€æ‰§è¡Œä¹‹å‰ã€‘çš„æ•°æ®å¿«ç…§&lt;/h6&gt; 
&lt;p&gt;æ ¹æ®å¾—åˆ°çš„ä¸šåŠ¡SQLä¿¡æ¯ï¼Œç”Ÿæˆâ€œå‰é•œåƒæŸ¥è¯¢è¯­å¥â€ã€‚&lt;/p&gt; 
&lt;pre&gt;&lt;code class=&quot;prism language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;select&lt;/span&gt;  &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;  &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; tableXX &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; condition&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt; 
&lt;p&gt;æ‰§è¡Œâ€œå‰é•œåƒæŸ¥è¯¢è¯­å¥â€ï¼Œå¾—åˆ°å³å°†æ‰§è¡Œæ“ä½œçš„æ•°æ®ï¼Œå¹¶å°†å…¶ä¿å­˜ä¸ºâ€œå‰é•œåƒæ•°æ®ï¼ˆ&lt;strong&gt;beforeImage&lt;/strong&gt;ï¼‰â€ã€‚&lt;/p&gt; 
&lt;h6&gt;&lt;a id=&quot;SQL_117&quot;/&gt;ç¬¬ä¸‰å­é˜¶æ®µ-æ‰§è¡Œä¸šåŠ¡æ“ä½œçš„SQLè¯­å¥&lt;/h6&gt; 
&lt;p&gt;æ‰§è¡Œä¸šåŠ¡SQLï¼Œä¾‹å¦‚ï¼ˆupdate tableXX set parameter = â€˜valueâ€™ where condition = value;ï¼‰ï¼Œå°†è¿™æ¡è®°å½•çš„è¿›è¡Œä¿®æ”¹ã€‚&lt;/p&gt; 
&lt;h6&gt;&lt;a id=&quot;_121&quot;/&gt;ç¬¬å››å­é˜¶æ®µ-æŸ¥è¯¢ä¸šåŠ¡æ“ä½œä¹‹åçš„æ•°æ®ï¼Œå¹¶ä¸”ä¿å­˜ä¸‹æ¥&lt;/h6&gt; 
&lt;p&gt;æŸ¥è¯¢åé•œåƒï¼šæ ¹æ®â€œå‰é•œåƒæ•°æ®â€çš„ä¸»é”®ï¼ˆid : Xï¼‰ï¼Œç”Ÿæˆâ€œåé•œåƒæŸ¥è¯¢è¯­å¥â€ã€‚&lt;/p&gt; 
&lt;pre&gt;&lt;code class=&quot;prism language-sql&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;select&lt;/span&gt;  &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;  &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; tableXX &lt;span class=&quot;token keyword&quot;&gt;where&lt;/span&gt; condition&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt; 
&lt;p&gt;æ‰§è¡Œâ€œåé•œåƒæŸ¥è¯¢è¯­å¥â€ï¼Œå¾—åˆ°æ‰§è¡Œä¸šåŠ¡æ“ä½œåçš„æ•°æ®ï¼Œå¹¶å°†å…¶ä¿å­˜ä¸ºâ€œåé•œåƒæ•°æ®ï¼ˆ&lt;strong&gt;afterImage&lt;/strong&gt;ï¼‰â€ã€‚&lt;/p&gt; 
&lt;h6&gt;&lt;a id=&quot;undo_log_131&quot;/&gt;ç¬¬äº”å­é˜¶æ®µ-æ’å…¥ä¿å­˜å›æ»šæ—¥å¿—è®°å½•åˆ°undo_logè¡¨ä¸­&lt;/h6&gt; 
&lt;p&gt;å°†å‰åé•œåƒæ•°æ®å’Œä¸šåŠ¡SQLçš„ä¿¡æ¯ç»„æˆä¸€æ¡å›æ»šæ—¥å¿—è®°å½•ï¼Œæ’å…¥åˆ° UNDO_LOG è¡¨ä¸­ï¼Œç¤ºä¾‹å›æ»šæ—¥å¿—å¦‚ä¸‹ã€‚&lt;/p&gt; 
&lt;pre&gt;&lt;code&gt;{
&quot;branchId&quot;: 641789253,
&quot;undoItems&quot;: [{
&quot;afterImage&quot;: {
&quot;rows&quot;: [{
&quot;fields&quot;: [{
&quot;name&quot;: &quot;id&quot;,
&quot;type&quot;: 4,
&quot;value&quot;: 1
}, {
&quot;name&quot;: &quot;name&quot;,
&quot;type&quot;: 12,
&quot;value&quot;: &quot;GTS&quot;
}, {
&quot;name&quot;: &quot;since&quot;,
&quot;type&quot;: 12,
&quot;value&quot;: &quot;2014&quot;
}]
}],
&quot;tableName&quot;: &quot;product&quot;
},
&quot;beforeImage&quot;: {
&quot;rows&quot;: [{
&quot;fields&quot;: [{
&quot;name&quot;: &quot;id&quot;,
&quot;type&quot;: 4,
&quot;value&quot;: 1
}, {
&quot;name&quot;: &quot;name&quot;,
&quot;type&quot;: 12,
&quot;value&quot;: &quot;TXC&quot;
}, {
&quot;name&quot;: &quot;since&quot;,
&quot;type&quot;: 12,
&quot;value&quot;: &quot;2014&quot;
}]
}],
&quot;tableName&quot;: &quot;product&quot;
},
&quot;sqlType&quot;: &quot;UPDATE&quot;
}],
&quot;xid&quot;: &quot;xid:xxx&quot;
}
&lt;/code&gt;&lt;/pre&gt; 
&lt;h5&gt;&lt;a id=&quot;_181&quot;/&gt;æäº¤å‰éœ€è¦è·å–ç”³è¯·æœ¬åœ°é”&lt;/h5&gt; 
&lt;ul&gt;&lt;li&gt;æäº¤å‰ï¼Œå‘TCæ³¨å†Œåˆ†æ”¯ï¼šç”³è¯·TableXXXè¡¨ä¸­ï¼Œidä¸»é”®ç­‰äºNçš„è®°å½•çš„å…¨å±€é” ã€‚éœ€è¦ç¡®ä¿å…ˆæ‹¿åˆ°å…¨å±€é” ã€‚ 
  &lt;ul&gt;&lt;li&gt;&lt;strong&gt;æ‹¿ä¸åˆ°å…¨å±€é” ï¼Œä¸èƒ½æäº¤æœ¬åœ°äº‹åŠ¡&lt;/strong&gt;ã€‚&lt;/li&gt;&lt;li&gt;&lt;strong&gt;æ‹¿åˆ°å…¨å±€é”ï¼Œä¼šè¢«é™åˆ¶åœ¨ä¸€å®šèŒƒå›´å†…ï¼Œè¶…å‡ºèŒƒå›´å°†æ”¾å¼ƒï¼Œå¹¶å›æ»šæœ¬åœ°äº‹åŠ¡ï¼Œé‡Šæ”¾æœ¬åœ°é”&lt;/strong&gt;ã€‚&lt;/li&gt;&lt;/ul&gt; &lt;/li&gt;&lt;/ul&gt; 
&lt;h6&gt;&lt;a id=&quot;_187&quot;/&gt;ç¤ºä¾‹è¯´æ˜ï¼š&lt;/h6&gt; 
&lt;p&gt;ä¸¤ä¸ªå…¨å±€äº‹åŠ¡tx1å’Œtx2ï¼Œåˆ†åˆ«å¯¹aè¡¨çš„må­—æ®µè¿›è¡Œæ›´æ–°æ“ä½œï¼Œmçš„åˆå§‹å€¼1000ã€‚&lt;/p&gt; 
&lt;ol&gt;&lt;li&gt; &lt;p&gt;tx1å…ˆå¼€å§‹ï¼Œå¼€å¯æœ¬åœ°äº‹åŠ¡ï¼Œæ‹¿åˆ°æœ¬åœ°é”ï¼Œæ›´æ–°æ“ä½œ m = 1000 - 100 = 900ã€‚æœ¬åœ°äº‹åŠ¡æäº¤å‰ï¼Œå…ˆæ‹¿åˆ°è¯¥è®°å½•çš„å…¨å±€é” ï¼Œæœ¬åœ°æäº¤é‡Šæ”¾æœ¬åœ°é”ã€‚&lt;/p&gt; &lt;/li&gt;&lt;li&gt; &lt;p&gt;tx2åå¼€å§‹ï¼Œå¼€å¯æœ¬åœ°äº‹åŠ¡ï¼Œæ‹¿åˆ°æœ¬åœ°é”ï¼Œæ›´æ–°æ“ä½œ m = 900 - 100 = 800ã€‚æœ¬åœ°äº‹åŠ¡æäº¤å‰ï¼Œå°è¯•æ‹¿è¯¥è®°å½•çš„å…¨å±€é” ï¼Œtx1 å…¨å±€æäº¤å‰ï¼Œè¯¥è®°å½•çš„å…¨å±€é”è¢« tx1 æŒæœ‰ï¼Œtx2éœ€è¦é‡è¯•ç­‰å¾… å…¨å±€é” ã€‚&lt;/p&gt; &lt;/li&gt;&lt;/ol&gt; 
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/4a05744de567ae3f6895a32ecf31e487.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt; 
&lt;ol start=&quot;3&quot;&gt;&lt;li&gt; &lt;p&gt;tx1äºŒé˜¶æ®µå…¨å±€æäº¤ï¼Œé‡Šæ”¾å…¨å±€é” ã€‚tx2 æ‹¿åˆ°å…¨å±€é”æäº¤æœ¬åœ°äº‹åŠ¡&lt;br/&gt; &lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/68182b5f4ba532e9f598c1e763b7de11.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt; &lt;/li&gt;&lt;li&gt; &lt;p&gt;å¦‚æœtx1çš„äºŒé˜¶æ®µå…¨å±€å›æ»šï¼Œåˆ™tx1éœ€è¦é‡æ–°è·å–è¯¥æ•°æ®çš„æœ¬åœ°é”ï¼Œè¿›è¡Œåå‘è¡¥å¿çš„æ›´æ–°æ“ä½œï¼Œå®ç°åˆ†æ”¯çš„å›æ»šã€‚&lt;/p&gt; &lt;/li&gt;&lt;/ol&gt; 
&lt;blockquote&gt; 
 &lt;p&gt;æ­¤æ—¶ï¼Œå¦‚æœtx2ä»åœ¨ç­‰å¾…è¯¥æ•°æ®çš„å…¨å±€é”ï¼ŒåŒæ—¶æŒæœ‰æœ¬åœ°é”ï¼Œåˆ™tx1çš„åˆ†æ”¯å›æ»šä¼šå¤±è´¥ã€‚åˆ†æ”¯çš„å›æ»šä¼šä¸€ç›´é‡è¯•ï¼Œç›´åˆ°tx2çš„å…¨å±€é”ç­‰é”è¶…æ—¶ï¼Œæ”¾å¼ƒå…¨å±€é”å¹¶å›æ»šæœ¬åœ°äº‹åŠ¡é‡Šæ”¾æœ¬åœ°é”ï¼Œtx1 çš„åˆ†æ”¯å›æ»šæœ€ç»ˆæˆåŠŸã€‚å› ä¸ºæ•´ä¸ªè¿‡ç¨‹å…¨å±€é”åœ¨tx1ç»“æŸå‰ä¸€ç›´æ˜¯è¢«tx1æŒæœ‰çš„ï¼Œæ‰€ä»¥ä¸ä¼šå‘ç”Ÿè„å†™çš„é—®é¢˜ã€‚&lt;/p&gt; 
&lt;/blockquote&gt; 
&lt;h6&gt;&lt;a id=&quot;_204&quot;/&gt;æ•°æ®åº“éš”ç¦»çº§åˆ«&lt;/h6&gt; 
&lt;p&gt;åœ¨æ•°æ®åº“æœ¬åœ°äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œè¯»å·²æäº¤ï¼ˆRead Committedï¼‰æˆ–ä»¥ä¸Šçš„åŸºç¡€ä¸Šï¼ŒSeataï¼ˆAT æ¨¡å¼ï¼‰çš„é»˜è®¤å…¨å±€éš”ç¦»çº§åˆ«æ˜¯è¯»æœªæäº¤ï¼ˆRead Uncommittedï¼‰ ã€‚&lt;/p&gt; 
&lt;p&gt;å¦‚æœåº”ç”¨åœ¨ç‰¹å®šåœºæ™¯ä¸‹ï¼Œå¿…éœ€è¦æ±‚å…¨å±€çš„è¯»å·²æäº¤ ï¼Œç›®å‰Seataçš„æ–¹å¼æ˜¯é€šè¿‡ SELECT FOR UPDATE è¯­å¥çš„ä»£ç†ã€‚&lt;/p&gt; 
&lt;p&gt;&lt;img src=&quot;https://img-blog.csdnimg.cn/img_convert/620f21a42c84d85b31e84fe353b2f36d.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt; 
&lt;p&gt;SELECT FOR UPDATE è¯­å¥çš„æ‰§è¡Œä¼šç”³è¯·å…¨å±€é” ï¼Œå¦‚æœ&lt;strong&gt;å…¨å±€é”&lt;/strong&gt;è¢«å…¶ä»–äº‹åŠ¡æŒæœ‰ï¼Œåˆ™é‡Šæ”¾æœ¬åœ°é”ï¼ˆå›æ»š SELECT FOR UPDATE è¯­å¥çš„æœ¬åœ°æ‰§è¡Œï¼‰å¹¶é‡è¯•ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒæŸ¥è¯¢æ˜¯è¢« block ä½çš„ï¼Œç›´åˆ°å…¨å±€é”æ‹¿åˆ°ï¼Œå³è¯»å–çš„ç›¸å…³æ•°æ®æ˜¯å·²æäº¤çš„ï¼Œæ‰è¿”å›ã€‚&lt;/p&gt; 
&lt;p&gt;å‡ºäºæ€»ä½“æ€§èƒ½ä¸Šçš„è€ƒè™‘ï¼ŒSeataç›®å‰çš„æ–¹æ¡ˆå¹¶æ²¡æœ‰å¯¹æ‰€æœ‰ SELECT è¯­å¥éƒ½è¿›è¡Œä»£ç†ï¼Œä»…é’ˆå¯¹ FOR UPDATE çš„ SELECT è¯­å¥ã€‚&lt;/p&gt; 
&lt;h6&gt;&lt;a id=&quot;_216&quot;/&gt;æœ¬åœ°äº‹åŠ¡æäº¤&lt;/h6&gt; 
&lt;p&gt;ä¸šåŠ¡æ•°æ®çš„æ›´æ–°å’Œå‰é¢æ­¥éª¤ä¸­ç”Ÿæˆçš„UNDO LOGä¸€å¹¶æäº¤ï¼Œå°†æœ¬åœ°äº‹åŠ¡æäº¤çš„ç»“æœä¸ŠæŠ¥ç»™TCã€‚&lt;/p&gt; 
&lt;h5&gt;&lt;a id=&quot;AT_220&quot;/&gt;ATæ¨¡å¼äºŒé˜¶æ®µ-å›æ»šæ“ä½œ&lt;/h5&gt; 
&lt;ol&gt;&lt;li&gt; &lt;p&gt;æ”¶åˆ°TCçš„åˆ†æ”¯å›æ»šè¯·æ±‚ï¼Œå¼€å¯ä¸€ä¸ªæœ¬åœ°äº‹åŠ¡ã€‚&lt;/p&gt; &lt;/li&gt;&lt;li&gt; &lt;p&gt;é€šè¿‡XIDå’ŒBranch IDæŸ¥æ‰¾åˆ°ç›¸åº”çš„UNDO LOG è®°å½•ã€‚&lt;/p&gt; &lt;/li&gt;&lt;li&gt; &lt;p&gt;æ•°æ®æ ¡éªŒï¼šæ‹¿ UNDO LOG ä¸­çš„åé•œä¸å½“å‰æ•°æ®è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœæœ‰ä¸åŒï¼Œè¯´æ˜æ•°æ®è¢«å½“å‰å…¨å±€äº‹åŠ¡ä¹‹å¤–çš„åŠ¨ä½œåšäº†ä¿®æ”¹ã€‚&lt;strong&gt;è¿™ç§æƒ…å†µï¼Œéœ€è¦æ ¹æ®é…ç½®ç­–ç•¥æ¥åšå¤„ç†ï¼Œè¯¦ç»†çš„è¯´æ˜åœ¨å¦å¤–çš„æ–‡æ¡£ä¸­ä»‹ç»&lt;/strong&gt;ã€‚&lt;/p&gt; &lt;/li&gt;&lt;li&gt; &lt;p&gt;æ ¹æ® UNDO LOG ä¸­çš„å‰é•œåƒå’Œä¸šåŠ¡SQLçš„ç›¸å…³ä¿¡æ¯ç”Ÿæˆå¹¶æ‰§è¡Œå›æ»šçš„è¯­å¥ï¼š&lt;/p&gt; &lt;/li&gt;&lt;/ol&gt; 
&lt;pre&gt;&lt;code&gt;update TableXXX set parameter = &#x27;XXX&#x27; where condition = value;
&lt;/code&gt;&lt;/pre&gt; 
&lt;ol start=&quot;5&quot;&gt;&lt;li&gt;æäº¤æœ¬åœ°äº‹åŠ¡ï¼Œå¹¶æŠŠæœ¬åœ°äº‹åŠ¡çš„æ‰§è¡Œç»“æœï¼ˆå³åˆ†æ”¯äº‹åŠ¡å›æ»šçš„ç»“æœï¼‰ä¸ŠæŠ¥ç»™ TCã€‚&lt;/li&gt;&lt;/ol&gt; 
&lt;h5&gt;&lt;a id=&quot;AT_237&quot;/&gt;ATæ¨¡å¼äºŒé˜¶æ®µ-æäº¤æ“ä½œ&lt;/h5&gt; 
&lt;ol&gt;&lt;li&gt; &lt;p&gt;æ”¶åˆ°TCçš„åˆ†æ”¯æäº¤è¯·æ±‚ï¼ŒæŠŠè¯·æ±‚æ”¾å…¥ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡çš„é˜Ÿåˆ—ä¸­ï¼Œé©¬ä¸Šè¿”å›æäº¤æˆåŠŸçš„ç»“æœç»™ TCã€‚&lt;/p&gt; &lt;/li&gt;&lt;li&gt; &lt;p&gt;å¼‚æ­¥ä»»åŠ¡é˜¶æ®µçš„åˆ†æ”¯æäº¤è¯·æ±‚å°†å¼‚æ­¥å’Œæ‰¹é‡åœ°åˆ é™¤ç›¸åº” UNDO LOG è®°å½•ã€‚&lt;/p&gt; &lt;/li&gt;&lt;/ol&gt;
                &lt;/div&gt;
                
                
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>1856818b93a96c0e6715c0c8706d4a4f</guid>
<title>MySQL ä¸»ä»æ¨¡å¼é‡‡ç”¨ GTID çš„å®è·µ</title>
<link>https://toutiao.io/k/owbwcqm</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½ å¥½ï¼Œæˆ‘æ˜¯æ‚Ÿç©ºã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬æ–‡ä¸»è¦å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.3470319634703196&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ0y0kbmE8yz1AjZ9Z2rFCbibQxxhoQjg1QXxBm0NRoM7Oozxb3NIoHNAbxbHVd401nO6xGhw2Nna9g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1752&quot;/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ä¸€ã€èƒŒæ™¯&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†ä¿è¯é«˜å¯ç”¨ï¼Œä¹‹å‰åœ¨æµ‹è¯•ç¯å¢ƒéƒ¨ç½²äº†ä¸€å¥— MySQL åŒä¸»æ¨¡å¼ï¼Œå½“ä¸€ä¸ªä¸»åº“æœåŠ¡å‡ºç°å¼‚å¸¸ï¼Œå¯ä»¥å°†æµé‡åˆ‡åˆ°å¦å¤–ä¸€ä¸ªä¸»åº“ï¼Œä¸¤ä¸ªä¸»åº“ä¹‹é—´ç›¸äº’åŒæ­¥æ•°æ®ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;åŒä¸»æ¨¡å¼&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŒä¸»æ¨¡å¼çš„åŸç†å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.1875&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ34ZChbvlXiakQocdWlE76ddF3osUryJ4DMh6KfMBrXxoPtxVkTV0BibypzY8P9lZCampKTKzeuSYNg/640?wx_fmt=png&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&amp;amp;wx_co=1&quot; data-type=&quot;png&quot; data-w=&quot;896&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯ç»å¸¸å‡ºç°æ•°æ®å†²çªçš„é—®é¢˜ï¼Œäºæ˜¯æˆ‘ä»¬åˆæŠŠ&lt;code&gt;åŒä¸»æ¨¡å¼&lt;/code&gt;æ”¹ä¸ºäº†&lt;code&gt;ä¸»ä»è¯»å†™åˆ†ç¦»æ¨¡å¼&lt;/code&gt;ã€‚ä¸»åº“ä½œä¸ºè¯»å†™åº“ï¼Œå†åŠ ä¸Šä¸€ä¸ªä»åº“ç”¨æ¥åš &lt;span&gt;I/O å¯†é›†å‹&lt;/span&gt;çš„ä»»åŠ¡ï¼ˆå¦‚å¤§é‡çš„æ•°æ®ç»Ÿè®¡æ“ä½œï¼‰ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.4051094890510949&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ0tibFY1Ml1mCQQQ5mABVZtGE5bL9H5OvrBjC7OWkVbgvTSXxcJ4lGcKRy1riaMQ4uKMDic4AlDibZyLQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1096&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦å¤–ä»åº“å¤åˆ¶çš„æ¨¡å¼é‡‡ç”¨&lt;code&gt;ä½ç‚¹&lt;/code&gt;çš„æ–¹å¼ï¼šæŒ‡å®š binlog æ–‡ä»¶å’Œ binlog ä½ç½®ï¼Œè¿™æ ·ä»åº“å°±çŸ¥é“äº†å¤åˆ¶çš„èµ·å§‹ä½ç½®ã€‚(ä¸‹æ–‡ä¼šè®²è§£è¿™ç§æ–¹å¼ï¼‰&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è™½ç„¶æ”¹ä¸ºäº†ä¸»ä»æ¨¡å¼ï¼Œä½†ä¾æ—§é‡åˆ°äº†äº›é—®é¢˜ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é—®é¢˜ 1&lt;/span&gt;ï¼šä»åº“ B å¤åˆ¶æ•°æ®æ—¶ï¼Œå‡ºç°äº†ä¸»é”®å†²çªé—®é¢˜ï¼Œå¯¼è‡´åŒæ­¥å¤±è´¥ï¼Œä»åº“åœæ­¢å¤åˆ¶ã€‚çŒœæµ‹å› ä¸»åº“é…ç½®çš„ binlog æ—¥å¿—çš„æ ¼å¼ä¸º &lt;code&gt;mixed&lt;/code&gt;ï¼Œä»åº“åŒæ­¥æ—¶å‡ºç°ä¸ä¸€è‡´çš„æƒ…å†µã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é—®é¢˜ 2&lt;/span&gt;ï¼šä»åº“ B åœæ­¢å¤åˆ¶åï¼Œå¯¼è‡´å¾ˆå¤šæ•°æ®æœªåŒæ­¥åˆ°ä»åº“ï¼Œå‡ºç°ä¸»ä»å¤§é‡æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é—®é¢˜ 3&lt;/span&gt;ï¼šä»åº“ B æƒ³è¦æ¢å¤å¤åˆ¶ï¼Œå¿…é¡»å…ˆè§£å†³åŒæ­¥å¤±è´¥çš„é—®é¢˜æ‰èƒ½æ¢å¤ã€‚æ’æŸ¥éš¾åº¦è¾ƒå¤§ï¼Œè€—æ—¶ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é—®é¢˜ 4&lt;/span&gt;ï¼šä»åº“ B æ¢å¤æ—¶ï¼Œå¿…é¡»çŸ¥é“åŒæ­¥&lt;span&gt;ä½ç‚¹&lt;/span&gt;ï¼Œä¹Ÿå°±æ˜¯ä»å“ªä¸ª binlog æ–‡ä»¶å’Œ binlog ä½ç½®æ–­å¼€å¤åˆ¶çš„ï¼Œä¸”å³ä½¿æ‰¾åˆ°äº†ä½ç‚¹ï¼Œä¹Ÿä¸æ˜¯ç²¾ç¡®çš„ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é—®é¢˜ 5&lt;/span&gt;ï¼šä»åº“ B å› åŒæ­¥å¼‚å¸¸å¯¼è‡´åœæ­¢å¤åˆ¶åˆ°æ¢å¤å¤åˆ¶è¿™æ®µæœŸé—´ï¼Œä¸»åº“ A è‡ªåŠ¨æ¸…ç†äº†å‡ å¤©å‰çš„ binlog æ—¥å¿—ï¼Œè€Œè¿™äº›æ—¥å¿—ä»åº“ B è¿˜æœªæ¥å¾—åŠåŒæ­¥ï¼Œè¿›è€Œå¯¼è‡´å†æ¬¡åŒæ­¥å¤±è´¥ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é—®é¢˜ 6&lt;/span&gt;ï¼šä¸»ä»å­˜åœ¨åŒæ­¥å»¶è¿Ÿã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ç¯‡æˆ‘ä»¬æ¥æ¢è®¨ä¸‹é—®é¢˜ 4 å’Œé—®é¢˜ 6ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­&lt;strong&gt;é—®é¢˜ 4&lt;/strong&gt; æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤´ç–¼çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¸€èˆ¬æ˜¯é€šè¿‡æŸ¥çœ‹ä»åº“ B å½“å‰çš„åŒæ­¥çŠ¶æ€æ‹¿åˆ°åŒæ­¥ä½ç‚¹ï¼Œç„¶åè®¾ç½®åŒæ­¥ä½ç‚¹åã€‚ä½†æ˜¯é‡æ–°å¯åŠ¨åŒæ­¥çš„æ—¶å€™åˆä¼šå‡ºç°åŒæ­¥å¼‚å¸¸ï¼Œæ¯”å¦‚ä»åº“ B å¯èƒ½ä¼šå‡ºç° Duplicate entry â€˜id_of_Râ€™ for key â€˜PRIMARYâ€™ é”™è¯¯ï¼Œæç¤ºå‡ºç°äº†ä¸»é”®å†²çªï¼Œç„¶ååœæ­¢åŒæ­¥ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†å‡å°‘ä½ç‚¹åŒæ­¥å¼•å…¥çš„å¤æ‚åº¦ï¼Œæˆ‘ä»¬åˆ‡æ¢æˆäº† GTID æ¨¡å¼ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äº&lt;strong&gt;é—®é¢˜ 6&lt;/strong&gt;ï¼Œæœ¬ç¯‡ä¹Ÿä»…é™äºæ¢è®¨å¦‚ä½•è§‚å¯Ÿå»¶è¿Ÿï¼Œå¯¹äºå¦‚ä½•å‡å°‘å»¶è¿Ÿä¸åœ¨æœ¬ç¯‡æ¢è®¨èŒƒå›´ä¹‹å†…ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å±•å¼€çœ‹ä¸‹ä½ç‚¹åŒæ­¥çš„ç—›ç‚¹ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;äºŒã€ä½ç‚¹åŒæ­¥çš„ç—›ç‚¹&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.1 é€šè¿‡ä½ç‚¹åŒæ­¥çš„åŸç†å›¾&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†æ›´æ¸…æ™°åœ°ç†è§£ä¸»ä»é‡‡ç”¨ä½ç‚¹åŒæ­¥çš„åŸç†ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªåŸç†å›¾ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.0513761467889908&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ0y0kbmE8yz1AjZ9Z2rFCbib8mmtZuLRkFYYKNz1P8IZtvL06ogsl4rxTDicPkfeibS3ZUZqH5AJO6PA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1090&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;1ã€&lt;/strong&gt;ä¸»åº“ä¼šç”Ÿæˆå¤šä¸ª binlog æ—¥å¿—æ–‡ä»¶ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;2ã€&lt;/strong&gt;ä»åº“çš„I/O çº¿ç¨‹è¯·æ±‚æŒ‡å®šæ–‡ä»¶å’ŒæŒ‡å®šä½ç½®çš„ binlog æ—¥å¿—æ–‡ä»¶ï¼ˆä½ç‚¹ï¼‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;3ã€&lt;/strong&gt;ä¸»åº“ dump çº¿ç¨‹è·å–æŒ‡å®šä½ç‚¹çš„ binlog æ—¥å¿—ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;4ã€&lt;/strong&gt;ä¸»åº“æŒ‰ç…§ä»åº“å‘é€ç»™æ¥çš„ä½ç‚¹ä¿¡æ¯è¯»å– binlogï¼Œç„¶åæ¨é€ binlog ç»™ä»åº“ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;5ã€&lt;/strong&gt;ä»åº“å°†å¾—åˆ°çš„ binlog å†™åˆ°æœ¬åœ°çš„ relay log (ä¸­ç»§æ—¥å¿—) æ–‡ä»¶ä¸­ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;6ã€&lt;/strong&gt;ä»åº“çš„ SQL çº¿ç¨‹è¯»å–å’Œè§£æ relay log æ–‡ä»¶ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;7ã€&lt;/strong&gt;ä»åº“çš„ SQL çº¿ç¨‹é‡æ”¾ relay log ä¸­çš„å‘½ä»¤ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“æˆ‘ä»¬ä½¿ç”¨ä½ç‚¹åŒæ­¥çš„æ–¹å¼æ—¶ï¼Œä¸¤ç§åœºæ™¯ä¸‹çš„æ“ä½œæ­¥éª¤æ¯”è¾ƒå¤æ‚ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.2 ç—›ç‚¹&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç—›ç‚¹1ï¼šé¦–æ¬¡å¼€å¯ä¸»ä»å¤åˆ¶çš„æ­¥éª¤å¤æ‚&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ç¬¬ä¸€æ¬¡å¼€å¯ä¸»ä»åŒæ­¥æ—¶ï¼Œè¦æ±‚ä»åº“å’Œä¸»åº“æ˜¯ä¸€è‡´çš„ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ‰¾åˆ°ä¸»åº“çš„ binlog ä½ç‚¹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è®¾ç½®ä»åº“çš„ binlog ä½ç‚¹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¼€å¯ä»åº“çš„å¤åˆ¶çº¿ç¨‹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç—›ç‚¹2ï¼šæ¢å¤ä¸»ä»å¤åˆ¶çš„æ­¥éª¤å¤æ‚&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;æ‰¾åˆ°ä»åº“å¤åˆ¶çº¿ç¨‹åœæ­¢æ—¶çš„ä½ç‚¹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è§£å†³å¤åˆ¶å¼‚å¸¸çš„äº‹åŠ¡ã€‚æ— æ³•è§£å†³æ—¶å°±éœ€è¦æ‰‹åŠ¨è·³è¿‡æŒ‡å®šç±»å‹çš„é”™è¯¯ï¼Œæ¯”å¦‚é€šè¿‡è®¾ç½®slave_skip_errors=1032,1062ã€‚å½“ç„¶è¿™ä¸ªå‰ææ¡ä»¶æ˜¯è·³è¿‡è¿™ç±»é”™è¯¯æ˜¯æ— æŸçš„ã€‚ï¼ˆ1062 é”™è¯¯æ˜¯æ’å…¥æ•°æ®æ—¶å”¯ä¸€é”®å†²çªï¼›1032 é”™è¯¯æ˜¯åˆ é™¤æ•°æ®æ—¶æ‰¾ä¸åˆ°è¡Œï¼‰&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ä¸è®ºæ˜¯é¦–æ¬¡å¼€å¯åŒæ­¥æ—¶éœ€è¦æ‰¾ä½ç‚¹å’Œè®¾ç½®ä½ç‚¹ï¼Œè¿˜æ˜¯æ¢å¤ä¸»ä»å¤åˆ¶æ—¶ï¼Œè®¾ç½®ä½ç‚¹å’Œå¿½ç•¥é”™è¯¯ï¼Œ&lt;span&gt;è¿™äº›æ­¥éª¤éƒ½æ˜¾å¾—è¿‡äºå¤æ‚ï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™&lt;/span&gt;ã€‚æ‰€ä»¥ MySQL 5.6 ç‰ˆæœ¬å¼•å…¥äº† GTIDï¼Œå½»åº•è§£å†³äº†è¿™ä¸ªå›°éš¾ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ä¸‰ã€GTID æ–¹æ¡ˆ&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3.1 GTID æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;GTID çš„å…¨ç§°æ˜¯ Global Transaction Identifierï¼Œå…¨å±€äº‹åŠ¡ IDï¼Œå½“ä¸€ä¸ªäº‹åŠ¡æäº¤æ—¶ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ª GTIDï¼Œç›¸å½“äºäº‹åŠ¡çš„å”¯ä¸€æ ‡è¯†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;GTID é•¿è¿™æ ·ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;c5d74746-d7ec-11ec-bf8f-0242ac110002:1&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»“æ„ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;GTID=server_uuid:gno&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;server_uuid æ˜¯ä¸€ä¸ªå®ä¾‹ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæ˜¯ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„å€¼ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;gno æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œåˆå§‹å€¼æ˜¯ 1ï¼Œæ¯æ¬¡æäº¤äº‹åŠ¡çš„æ—¶å€™åˆ†é…ç»™è¿™ä¸ªäº‹åŠ¡ï¼Œå¹¶åŠ  1ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯ä¸ª MySQL å®ä¾‹éƒ½ç»´æŠ¤äº†ä¸€ä¸ª GTID é›†åˆï¼Œç”¨æ¥å¯¹åº”â€œè¿™ä¸ªå®ä¾‹æ‰§è¡Œè¿‡çš„æ‰€æœ‰äº‹åŠ¡â€ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.2 GTID çš„ä¼˜åŠ¿&lt;/span&gt;&lt;/h3&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;1ã€æ›´ç®€å•çš„å®ç° failoverï¼Œä¸ç”¨ä»¥å‰é‚£æ ·åœ¨éœ€è¦æ‰¾ä½ç‚¹ï¼ˆlog_file å’Œ log_posï¼‰ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;2ã€æ›´ç®€å•çš„æ­å»ºä¸»ä»å¤åˆ¶ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;3ã€æ¯”ä¼ ç»Ÿçš„å¤åˆ¶æ›´åŠ å®‰å…¨ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;4ã€GTIDæ˜¯è¿ç»­çš„æ²¡æœ‰ç©ºæ´çš„ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œé›¶ä¸¢å¤±ã€‚&lt;span/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3.3 å¦‚ä½•å¯ç”¨ GTID&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¿®æ”¹ä¸»åº“å’Œä»åº“çš„é…ç½®æ–‡ä»¶ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#GTID:&lt;/span&gt;&lt;br/&gt;gtid_mode=on&lt;br/&gt;enforce_gtid_consistency=on&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»åº“é…ç½®åŒæ­¥çš„å‚æ•°ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;CHANGEÂ MASTERÂ TOÂ &lt;br/&gt;MASTER_HOST=&lt;span&gt;$host_name&lt;/span&gt;Â &lt;br/&gt;MASTER_PORT=&lt;span&gt;$port&lt;/span&gt;Â &lt;br/&gt;MASTER_USER=&lt;span&gt;$user_name&lt;/span&gt;Â &lt;br/&gt;MASTER_PASSWORD=&lt;span&gt;$password&lt;/span&gt;Â &lt;br/&gt;master_auto_position=1Â &lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­ master_auto_position æ ‡è¯†ä¸»ä»å…³ç³»ä½¿ç”¨çš„ GTID åè®®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›¸æ¯”ä¹‹å‰çš„é…ç½®ï¼Œ&lt;span&gt;MASTER_LOG_FILE å’Œ MASTER_LOG_POS å‚æ•°å·²ç»ä¸éœ€è¦äº†&lt;/span&gt;ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3.4 GTID åŒæ­¥æ–¹æ¡ˆ&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;GTID åŒæ­¥çš„åŸç†å›¾ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;span&gt;GTID æ–¹æ¡ˆ&lt;/span&gt;ï¼šä¸»åº“è®¡ç®—ä¸»åº“ GTID é›†åˆå’Œä»åº“ GTID çš„é›†åˆçš„å·®é›†ï¼Œä¸»åº“æ¨é€å·®é›† binlog ç»™ä»åº“ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ä»åº“è®¾ç½®å®ŒåŒæ­¥å‚æ•°åï¼Œä¸»åº“ A çš„GTID é›†åˆè®°ä¸ºé›†åˆ xï¼Œä»åº“ B çš„ GTID é›†åˆè®°ä¸º yã€‚ä»åº“åŒæ­¥çš„é€»è¾‘å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.0510046367851622&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ0y0kbmE8yz1AjZ9Z2rFCbibxMMj4P6OqEVX92vsZbLcMf8iacasnU9sZxh5mY8iaWwRGAdZQ4NVrPzA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1294&quot;/&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ä»åº“ B æŒ‡å®šä¸»åº“ Aï¼ŒåŸºäºä¸»å¤‡åè®®ç®€å†è¿æ¥ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä»åº“ B æŠŠé›†åˆ y å‘ç»™ä¸»åº“ Aã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸»åº“ A è®¡ç®—å‡ºé›†åˆ x å’Œé›†åˆ y çš„å·®é›†ï¼Œä¹Ÿå°±æ˜¯é›†åˆ x ä¸­å­˜åœ¨ï¼Œé›†åˆ y ä¸­ä¸å­˜åœ¨çš„ GTID é›†åˆã€‚æ¯”å¦‚é›†åˆ x æ˜¯ 1~100ï¼Œé›†åˆ y æ˜¯ 1~90ï¼Œé‚£ä¹ˆè¿™ä¸ªå·®é›†å°±æ˜¯ 91~100ã€‚è¿™é‡Œä¼šåˆ¤æ–­é›†åˆ x æ˜¯ä¸æ˜¯åŒ…å«æœ‰é›†åˆ y çš„æ‰€æœ‰ GTIDï¼Œå¦‚æœä¸æ˜¯åˆ™è¯´æ˜ä¸»åº“ A åˆ é™¤äº†ä»åº“ B éœ€è¦çš„ binlogï¼Œä¸»åº“ A ç›´æ¥è¿”å›é”™è¯¯ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸»åº“ A ä»è‡ªå·±çš„ binlog æ–‡ä»¶é‡Œé¢ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸åœ¨é›†åˆ y ä¸­çš„äº‹åŠ¡ GTIDï¼Œä¹Ÿå°±æ˜¯æ‰¾åˆ°äº† 91ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸»åº“ A ä» GTID = 91 çš„äº‹åŠ¡å¼€å§‹ï¼Œå¾€åè¯» binlog æ–‡ä»¶ï¼ŒæŒ‰é¡ºåºå– binlogï¼Œç„¶åå‘ç»™ Bã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä»åº“ B çš„ I/O çº¿ç¨‹è¯»å– binlog æ–‡ä»¶ç”Ÿæˆ relay logï¼ŒSQL çº¿ç¨‹è§£æ relay logï¼Œç„¶åæ‰§è¡Œ SQL è¯­å¥ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;GTID åŒæ­¥æ–¹æ¡ˆå’Œä½ç‚¹åŒæ­¥çš„æ–¹æ¡ˆåŒºåˆ«æ˜¯ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ä½ç‚¹åŒæ­¥æ–¹æ¡ˆæ˜¯é€šè¿‡äººå·¥åœ¨ä»åº“ä¸ŠæŒ‡å®šå“ªä¸ªä½ç‚¹ï¼Œä¸»åº“å°±å‘å“ªä¸ªä½ç‚¹ï¼Œä¸åšæ—¥å¿—çš„å®Œæ•´æ€§åˆ¤æ–­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è€Œ GTID æ–¹æ¡ˆæ˜¯é€šè¿‡ä¸»åº“æ¥è‡ªåŠ¨è®¡ç®—ä½ç‚¹çš„ï¼Œä¸éœ€è¦äººå·¥å»è®¾ç½®ä½ç‚¹ï¼Œå¯¹è¿ç»´äººå‘˜å‹å¥½ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å››ã€å¦‚ä½•åˆ¤æ–­ä¸»ä»åº“æ˜¯å¦æœ‰å»¶è¿Ÿ&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šé¢æåˆ°çš„é—®é¢˜ 6 æ˜¯ä¸»ä»è¯»å†™åˆ†ç¦»åï¼Œä»åº“å¤åˆ¶å­˜åœ¨å»¶è¿Ÿï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥æ¢è®¨ä¸‹å¦‚ä½•è§‚å¯Ÿä¸»ä»å»¶è¿Ÿå¤šå°‘çš„é—®é¢˜ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ–¹æ¡ˆä¸€ï¼šåˆ¤æ–­ä»åº“çš„åŒæ­¥çŠ¶æ€å‚æ•° seconds_behind_master æ˜¯å¦ä¸º 0ã€‚ï¼ˆä¸å‡†ç¡®ï¼‰&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ–¹æ¡ˆäºŒï¼šå¯¹æ¯”ä½ç‚¹ç¡®ä¿ä¸»å¤‡æ— å»¶è¿Ÿã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ–¹æ¡ˆä¸‰ï¼šå¯¹æ¯” GTID é›†åˆç¡®ä¿ä¸»å¤‡æ— å»¶è¿Ÿã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ–¹æ¡ˆä¸€ï¼šæŸ¥çœ‹ seconds_behind_master&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥åœ¨ä»åº“ä¸Šæ‰§è¡Œ slow slave status å‘½ä»¤æ¥çœ‹æ‰§è¡Œç»“æœé‡Œé¢çš„ &lt;code&gt;seconds_behind_master&lt;/code&gt; å‚æ•°çš„å€¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒSeconds_Behind_Master ç­‰äº 0&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3241252302025783&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ0y0kbmE8yz1AjZ9Z2rFCbib5zORALpPyiaoibx58icFTubicaO0fIWVzUgaFibPIWI8Ig6t7eyB6RssWNw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;543&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Seconds_Behind_Master çš„å•ä½æ˜¯ç§’ï¼Œæ‰€ä»¥ç²¾åº¦ä¸å‡†ç¡®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ä¸ºäº†ä¿è¯æŸ¥è¯¢çš„æ•°æ®æ˜¯å’Œä¸»åº“ä¸€è‡´çš„ï¼Œå°±éœ€è¦å…ˆåˆ¤æ–­ seconds_behind_master æ˜¯å¦å·²ç»ç­‰äº 0ï¼Œå¦‚æœä¸ç­‰äº 0ï¼Œå°±å¿…é¡»ç­‰åˆ°è¿™ä¸ªå‚æ•°å˜ä¸º 0 æ‰èƒ½æ‰§è¡ŒæŸ¥è¯¢è¯·æ±‚ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ–¹æ¡ˆäºŒï¼šå¯¹æ¯”ä½ç‚¹&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥é€šè¿‡æŸ¥çœ‹ä»åº“å½“å‰çš„åŒæ­¥ä½ç‚¹æ¥ç¡®è®¤ä»åº“åŒæ­¥æ˜¯å¦æœ‰å»¶è¿Ÿã€‚ä¸‹å›¾æ˜¯åœ¨ä»åº“ä¸Šæ‰§è¡Œ &lt;code&gt;show slave status \G&lt;/code&gt;å‘½ä»¤åçš„ç»“æœï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6237288135593221&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ0y0kbmE8yz1AjZ9Z2rFCbibAGHsZXtrS9Kv8ySjbmeq6abW020dXUpqGwU568RxBgkpUDZ9xkb5TA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1180&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Master_Log_File&lt;/code&gt; å’Œ &lt;code&gt;Read_Master_Log_Pos&lt;/code&gt; è¿™ä¸¤ä¸ªå‚æ•°åˆèµ·æ¥è¡¨ç¤ºçš„æ˜¯è¯»åˆ°çš„ä¸»åº“çš„æœ€æ–°ä½ç‚¹ï¼Œç¬¬ä¸€å‚æ•°æ˜¯ä»£è¡¨è¯»å–åˆ°äº†å“ªä¸ªæ–‡ä»¶ï¼Œç¬¬äºŒä¸ªæ˜¯è¯»å–åˆ°çš„æ–‡ä»¶çš„ä½ç½®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Relay_Master_Log_File&lt;/code&gt; å’Œ &lt;code&gt;Exec_Master_Log_Pos&lt;/code&gt;ï¼Œè¿™ä¸¤ä¸ªå‚æ•°åˆèµ·æ¥è¡¨ç¤ºçš„æ˜¯ä»åº“æ‰§è¡Œçš„æœ€æ–°ä½ç‚¹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœçº¢è‰²æ¡†èµ·æ¥çš„ä¸¤ä¸ªå‚æ•°ï¼š&lt;code&gt;Master_Log_File&lt;/code&gt; å’Œ &lt;code&gt;Relay_Master_Log_File&lt;/code&gt; ç›¸ç­‰ï¼Œåˆ™è¯´æ˜ä»åº“è¯»åˆ°çš„æœ€æ–°æ–‡ä»¶å’Œä¸»åº“ä¸Šç”Ÿæˆçš„æ–‡ä»¶ç›¸åŒï¼Œè¿™é‡Œéƒ½æ˜¯ mysql-bin.000934ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœè“è‰²æ¡†èµ·æ¥çš„ä¸¤ä¸ªå‚æ•° &lt;code&gt;Read_Master_Log_Pos&lt;/code&gt; å’Œ &lt;code&gt;Exec_Master_Log_Pos&lt;/code&gt; ç›¸ç­‰ï¼Œåˆ™è¯´æ˜ä»åº“è¯»åˆ°çš„æ—¥å¿—æ–‡ä»¶çš„ä½ç½®å’Œä»åº“ä¸Šæ‰§è¡Œæ—¥å¿—æ–‡ä»¶çš„ä½ç½®ç›¸åŒï¼Œè¿™é‡Œéƒ½æ˜¯ 59521082ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ä¸Šé¢ä¸¤ç»„å‚æ•°éƒ½ç›¸ç­‰æ—¶ï¼Œåˆ™è¯´æ˜æ²¡æœ‰å»¶è¿Ÿã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ–¹æ¡ˆä¸‰ï¼šå¯¹æ¯” GTID é›†åˆ&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ–¹æ¡ˆä¸‰æ˜¯å¯¹æ¯” GTID é›†åˆã€‚é¦–å…ˆæˆ‘ä»¬åœ¨ä»åº“ä¸Šæ‰§è¡Œ Â &lt;code&gt;show slave status \G&lt;/code&gt;æ¥æŸ¥çœ‹ GTID é›†åˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3654970760233918&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ0y0kbmE8yz1AjZ9Z2rFCbibicePBvx54LqrogZqFZQYzA5UQgibEI00Nic2l2QYXMbn0NiaE4HlhsjdPg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1026&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Master_UUID&lt;/code&gt; è¡¨ç¤ºå½“å‰è¿æ¥çš„ä¸»åº“çš„ IDã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Auto_Position&lt;/code&gt;: 1 è¡¨ç¤ºä¸»å¤‡ä½¿ç”¨äº† GTID åè®®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Retrieved_Gtid_Set&lt;/code&gt; è¡¨ç¤ºä»åº“æ”¶åˆ°çš„æ‰€æœ‰æ—¥å¿—çš„ GTID é›†åˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Executed_Gtid_Set&lt;/code&gt; è¡¨ç¤ºä»åº“å·²ç»æ‰§è¡Œå®Œæˆçš„ GTID é›†åˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœ Executed_Gtid_Set é›†åˆæ˜¯åŒ…å« Retrieved_Gtid_Setï¼Œåˆ™è¡¨ç¤ºä»åº“æ¥æ”¶åˆ°çš„æ—¥å¿—å·²ç»åŒæ­¥å®Œæˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯”å¦‚ä¸Šå›¾ä¸­ &lt;code&gt;Retrieved_Gtid_Set&lt;/code&gt; å€¼ä¸º&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;c5d74746-d7ec-11ec-bf8f-0242ac110002:1-87323&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‰é¢ä¸€æ®µæ˜¯ä¸»åº“ idï¼Œåé¢ä¸€æ®µ 1-87383 æ˜¯ GTID èŒƒå›´ã€‚è€Œ&lt;code&gt;Executed_Gtid_Set&lt;/code&gt; çš„å€¼æœ‰ä¸¤ä¸ªé›†åˆ&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;7083ae1f-d7ef-11ec-a329-0242ac110002:1-2,&lt;br/&gt;c5d74746-d7ec-11ec-bf8f-0242ac110002:1-87323&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Executed_Gtid_Set&lt;/code&gt; çš„ç¬¬äºŒä¸ªé›†åˆå’Œç¬¬ä¸€ä¸ªé›†åˆå®Œå…¨ä¸€è‡´ï¼Œç¬¬ä¸€ä¸ªé›†åˆ id å’Œ é›†åˆèŒƒå›´æ˜¯ä¸Šæ¬¡åŒæ­¥å¦å¤–ä¸€ä¸ªä¸»åº“çš„è®°å½•ã€‚è¿™é‡Œè¯´æ˜ä»åº“å·²ç»å’Œå½“å‰ä¸»åº“åŒæ­¥å®Œæˆäº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ–¹æ¡ˆäºŒå¯¹æ¯”ä½ç‚¹å’Œæ–¹æ¡ˆä¸‰çš„ GTID æ¯”å¯¹éƒ½è¦æ¯”æ–¹æ¡ˆä¸€çš„&lt;code&gt;seconds_behind_master&lt;/code&gt; æ›´å‡†ç¡®ã€‚ä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰è¾¾åˆ°ç²¾ç¡®çš„ç¨‹åº¦ï¼Œéœ€è¦é…åˆåŠåŒæ­¥å¤åˆ¶ï¼ˆsemi-sync replicationï¼‰æ‰èƒ½è¾¾åˆ°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°ç»“ï¼šæœ¬ç¯‡é€šè¿‡ GTID çš„æ–¹å¼æ›´å¥½åœ°å®ç°äº†ä¸»ä»èŠ‚ç‚¹çš„åŒæ­¥ï¼Œä»¥åŠå¦‚ä½•è§‚å¯Ÿä¸»ä»åŒæ­¥çš„å»¶è¿Ÿã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‚è€ƒèµ„æ–™ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;www.passjava.cn&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;https://time.geekbang.org/column/article/77636&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é«˜æ€§èƒ½ MySQL ç¬¬å››ç‰ˆ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åƒé‡‘è‰¯æ–¹ï¼šMySQLæ€§èƒ½ä¼˜åŒ–é‡‘å­—å¡”æ³•åˆ™&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>