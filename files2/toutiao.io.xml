<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>0357111b40fa7016f734ea0f7f02ff82</guid>
<title>ççˆ±ç”Ÿå‘½ï¼Œçæƒœå¥åº·</title>
<link>https://toutiao.io/k/78bhd5y</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;h2&gt;å¼•è¨€&lt;/h2&gt;&lt;p&gt;åŸæ–‡é“¾æ¥ï¼šhttps://yunsonbai.top/2021/01/05/love-life/&lt;br/&gt;æŸå¤šå¤šäº‹ä»¶çš„æ€è€ƒï¼šä¸ç®¡ä½ ä»äº‹ä»€ä¹ˆè¡Œä¸šéƒ½å¸Œæœ›ä½ èƒ½ççˆ±ç”Ÿå‘½ï¼Œçæƒœå¥åº·ï¼Œçˆ±æƒœè‡ªå·±çš„èº«ä½“ã€‚&lt;/p&gt;&lt;p&gt;&lt;span/&gt;&lt;/p&gt;&lt;h2&gt;æ•…äº‹çš„èµ·æº&lt;/h2&gt;&lt;p&gt;æœ€è¿‘è¿™ä¸¤å¤©å‡ ä¹è¢«æŸå¤šå¤šçš„å‘˜å·¥çŒæ­»äº‹ä»¶åˆ·äº†å±ï¼Œå„ç§æ„Ÿæ…¨å’Œæƒ‹æƒœï¼Œæ­£æ˜¯ç¾å¥½å¹´åï¼Œæœªæ¥æœ‰ç€æ— é™çš„å¯èƒ½ï¼Œç„¶è€Œå´æ­¢ä½äº†å‰è¿›çš„è„šæ­¥ï¼Œé™é™çš„å»äº†åˆ«çš„ä¸–ç•Œã€‚è¿™å€¼å¾—æˆ‘ä»¬æ€è€ƒï¼Œæœ€è¿‘å‡ å¹´ç±»ä¼¼çš„äº‹æƒ…å±‚å‡ºä¸æ–­ï¼Œä¸ºä»€ä¹ˆä¸€ç›´ä¼šæœ‰ï¼Ÿæˆ‘ä»¬åˆ°åº•è¯¥æ€ä¹ˆé€‰æ‹©ï¼Ÿ&lt;/p&gt;&lt;h2&gt;è¯¥ä¸è¯¥å¥‹æ–—&lt;/h2&gt;&lt;p&gt;&lt;span&gt;è¿™è²Œä¼¼æ˜¯ä¸€å¥åºŸè¯ï¼Œæ€ä¹ˆå¯èƒ½ä¸å¥‹æ–—å‘¢ï¼Ÿæˆ‘ä»¬å­¦ä¹ çŸ¥è¯†æŠ€èƒ½ä¸å°±æ˜¯ä¸ºäº†æ›´å¥½çš„åšäº‹ï¼Œåˆ›é€ æ›´é«˜çš„ä»·å€¼ï¼Œæ”¶è·æ›´å¤šçš„æœå®ä¹ˆï¼Ÿå¦‚æœä¸å¥‹æ–—ä½•ä»¥å®ç°æˆ‘ä»¬çš„æŠ±è´Ÿå’Œç†æƒ³å‘¢ï¼Ÿåœ¨ç®€å•çš„è¯´å°±æ˜¯åå’Œåˆ©ï¼Œè¿½é€è¿™äº›æ˜¯æ²¡æœ‰é”™çš„ï¼Œå®ƒèƒ½æ¿€å‘äººçš„åˆ›é€ åŠ›ï¼Œèƒ½&lt;/span&gt;ä½¿&lt;span&gt;æˆ‘ä»¬è¿‡ä¸Šæ›´å¥½çš„ç”Ÿæ´»ï¼Œé—®é¢˜æ¥äº†ï¼Œæ€ä¹ˆå¥‹æ–—å‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;img data-backh=&quot;155&quot; data-backw=&quot;344&quot; data-ratio=&quot;0.45058139534883723&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_svg/C6nnRGnPbvxRdPm2DIiaic8mf2CRS2o2W3GbcslKwI2aUGB3phPqsCfFHGA94MticicpM4UzkrcGiaSvhu8ibXu8nyYn2SGdczb1iac/640?wx_fmt=svg&quot; data-type=&quot;svg&quot; data-w=&quot;344&quot;/&gt;å…ˆä»è‡ªèº«è°ˆèµ·ï¼Œå…¬å¸å¾ˆå¤šï¼Œå·¥ä½œæ–¹å¼ä¹Ÿå¾ˆå¤šï¼Œæˆ‘ä»¬åŠªåŠ›çš„å·¥ä½œåˆ°åº•ä¸ºäº†ä»€ä¹ˆï¼Ÿæ˜¯ä¸ºäº†æ›´å¥½çš„ç”Ÿæ´»çš„è¯ï¼Œé‚£ä½ éœ€è¦æ€è€ƒä½ çš„&lt;/span&gt;&lt;span&gt;å·¥ä½œæ–¹å¼ï¼Œå¦‚æœå·¥ä½œå æ®äº†ä¸€å¤©60%çš„æ—¶é—´ï¼Œç”šè‡³é¢‘ç¹çš„å æ®äº†ä½ çš„ä¼‘æ¯æ—¶é—´ï¼Œé‚£ä¹ˆè¯·é—®ï¼Œä½ çš„ç”Ÿæ´»åœ¨å“ªï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é‚£å¦‚æœæ˜¯ä¸ºäº†è·å¾—æ›´å¤š&lt;/span&gt;&lt;span&gt;çš„é’±ï¼Œç”Ÿä¸ç”Ÿæ´»æ— æ‰€è°“ï¼Œé‚£æ¥ä¸‹æ¥æ˜¯æ²¡æ—¥æ²¡å¤œçš„å¹²ï¼Œçœ‹èµ·æ¥æ²¡æœ‰æ¯›ç—…ï¼Œä½ å¹²çš„å¤šå¯èƒ½ä½ å°±æ‹¿çš„å¤šï¼Œåªæ˜¯å¯èƒ½ï¼Œä½ é¦–å…ˆéœ€è¦å¼„æ˜ç™½ä½ åˆ°åº•æ˜¯æ‹¿åˆ°çš„ç©ºå¤´æ”¯ç¥¨è¿˜æ˜¯å®æ‰“å®çš„æ”¯ç¥¨ã€‚&lt;/span&gt;&lt;span&gt;å¦å¤–ï¼Œè‡ªå·±çš„èº«ä½“è¦å¼„æ¸…æ¥šï¼Œèƒ½ä¸èƒ½æŠ—çš„ä½æ²¡æ—¥æ²¡å¤œçš„å·¥ä½œå‘¢ï¼Ÿ&lt;/span&gt;&lt;span&gt;å³ä¾¿ä½ æŠ—ä½äº†ï¼Œä»å¥åº·çš„è§’åº¦è®²ï¼Œä½ çš„èº«ä½“å´æ‰¿å—äº†å·¨å¤§çš„ä¼¤å®³ï¼Œæ™šä¸Šæ­£æ˜¯å…»å†…è„ï¼Œè“„ç²¾ç¥çš„æ—¶å€™ï¼Œä½ å´è®©èº«ä½“ä¸€ç›´é‡è´Ÿè·çš„å·¥ä½œï¼Œä¹…è€Œä¹…ä¹‹èº«ä½“å°±åŸ‹ä¸‹äº†â€å®šæ—¶ç‚¸å¼¹â€ï¼Œå³ä¾¿ä½ æ‹¿åˆ°äº†å®æ‰“å®çš„æ”¯ç¥¨ï¼Œææ€•æœ€åä¹Ÿä¸è§å¾—è·Ÿäº†ä½ çš„å§“ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;å½“ç„¶è¿˜æœ‰ä¸ºäº†æ›´é«˜çš„æ­£ä¹‰çš„ç†æƒ³ï¼Œé‚£ä¸ªå·²ç»è„±ç¦»äº†ç”Ÿæ´»å’Œèº«ä½“çš„èŒƒç•´ï¼Œç²¾ç¥å±‚é¢çš„é«˜å°šçš„æ”¶ç›Šæ˜¯æ— ä»·çš„ï¼Œè¿™äº›äººæ˜¯æˆ‘ä»¬çš„æ¦œæ ·ï¼Œä½†æ˜¯è¿™æ¬¡è¿™æ¬¡åªè¯´æ™®é€šæ‰“å·¥è€…ã€‚&lt;/p&gt;&lt;p&gt;è¿˜æ˜¯è¦æ‰¾åˆ°é€‚åˆè‡ªå·±çš„å·¥ä½œæ–¹å¼ï¼Œè¿˜è¦æŠ˜ä¸­åˆé€‚çš„å·¥ä½œæ—¶é—´ï¼Œé’±ä¸ç”Ÿå‘½å’Œå¥åº·æ¯”èµ·æ¥ï¼Œè¿˜æ˜¯è¦é€‰æ‹©ç”Ÿå‘½å’Œå¥åº·ï¼Œè¿™ä¸¤æ ·éƒ½æ˜¯ä¸å¯é€†çš„ï¼Œé’±ä¹Ÿæ¢ä¸æ¥çš„ï¼Œæˆ‘ä»¬è¦å°½å¯èƒ½çš„åœ¨ä¿è¯ç”Ÿå‘½å’Œå¥åº·çš„åŒæ—¶ï¼Œæ›´å¥½çš„åˆ›é€ ä»·å€¼ï¼Œä¸èƒ½ä»¥ç‰ºç‰²ä¸¤è€…å»è·å–æ”¶ç›Šï¼Œä½ å³ä¾¿æ‹¿åˆ°äº†æ”¶ç›Šï¼Œå®ƒä¹Ÿä¸ä¸€å®šå±äºä½ ï¼Œå¿«çš„è¯å½’äº†åˆ«äººï¼Œæ…¢çš„è¯å½’äº†åŒ»é™¢ã€‚ä½†æ˜¯æˆ‘ä»¬ä¹Ÿä¸èƒ½ä¸å»å¥‹æ–—ï¼Œä¸åŠªåŠ›ï¼Œäº†è§£æ˜“ç»çš„äººéƒ½çŸ¥é“è¿™ä¸¤å¥ï¼Œå¦ææ³°æ¥ï¼Œä¹æç”Ÿæ‚²ï¼Œå»¶ä¼¸å‡ºæ¥å°±æ˜¯ä»€ä¹ˆäº‹æƒ…éƒ½æœ‰åˆ°æç‚¹è€Œå‘åå‘è€Œå˜çš„é“ç†ï¼Œæ‰€ä»¥è¦é€‚ä¸­ï¼Œè¦çƒ­çˆ±å·¥ä½œï¼Œè¿˜è¦çƒ­çˆ±æˆ‘ä»¬çš„ç”Ÿå‘½å’Œå¥åº·ï¼Œèº«ä½“æ˜¯å·¥ä½œçš„æœ¬é’±ï¼Œæ˜¯åˆ›é€ ä¸€åˆ‡ä»·å€¼çš„æ ¹åŸºã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸ç®¡æ€ä¹ˆè¯´ï¼Œæˆ‘ä»¬äººæ˜¯æ´»çš„ï¼Œäº‹ç‰©æ˜¯æ­»çš„å¦‚æœæ´»çš„äººè¢«æ­»çš„äº‹ç‰©ç¾ç»Šä½ï¼Œé‚£å¤šå¯æ‚²ï¼Œæ¯•ç«Ÿå¾ˆå¤šæ¡è·¯èƒ½é€šç½—é©¬ä¸æ˜¯ï¼Ÿæˆ‘ä»¬çš„é€‰æ‹©å¾ˆé‡è¦ï¼Œå°½é‡è®©é€‰æ‹©æœåŠ¡ä½ çš„å¥åº·ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2&gt;è¯·å–„å¾…å‘˜å·¥&lt;/h2&gt;&lt;p&gt;ä¸€ä¸ªå…¬å¸è¦å‘å±•ï¼Œäººæ˜¯å†³å®šæ€§å› ç´ ã€‚&lt;/p&gt;&lt;p&gt;è¯¥ä¸è¯¥åŠ ç­å‘¢ï¼Ÿè¿˜æ˜¯è¦ç”¨æ˜“ç»çš„è§’åº¦å»çœ‹é—®é¢˜ï¼Œä¸–ä¸Šæ²¡æœ‰ç»å¯¹çš„äº‹ç‰©ï¼Œä¸èƒ½ç»ä¸åŠ ç­ï¼Œæœ‰äº›é¡¹ç›®ä¹Ÿå¥½ï¼Œæƒ³æ³•ä¹Ÿå¥½ï¼Œä¸æŠ“ç´§æ—¶é—´å¹²å‡ºæ¥ï¼Œå¾ˆå¯èƒ½è¢«è¶…è¶Šï¼Œç”šè‡³æ•´ä¸ªå…¬å¸èµ°å‘æ²¡è½ï¼Œå¤§æ²³æ²¡æ°´è‡ªç„¶å°æ²³å°±å¹²äº†ã€‚é‚£å°±è¦åŠ ç­ï¼Œå¤šå¤šçš„åŠ ç­ï¼Œé‚£æ›´ä¸è¡Œï¼Œäººä¸æ˜¯æœºå™¨ï¼Œé•¿æ—¶é—´å´©çš„å¤ªç´§å°±ä¼šå‡ºé—®é¢˜ï¼Œå¼ºåº¦å¤ªå¤§ä¹Ÿä¼šå‡ºé—®é¢˜ï¼Œæ¯”å¦‚æœ€è¿‘çš„æŸå¤šå¤šã€‚&lt;/p&gt;&lt;p&gt;è¿˜æ˜¯è¦é€‚é‡ã€é€‚ä¸­ï¼Œä¸¤ä¸ªäººçš„æ´»éè¦ä¸€ä¸ªäººå»åšï¼Œé‚£è¿™ä¸ªäººå°±ä¼šå¾ˆç´¯ã€‚é«˜å¼ºåº¦åŠ ç­å¶å°”ä¸€æ¬¡æ˜¯å¯ä»¥ç†è§£çš„ï¼ŒæŒç»­ä½œæˆ˜çš„è¯ï¼Œè¿™ä¸ªéœ€è¦æ€è€ƒï¼Œä½ çš„å‘˜å·¥å—çš„ä½è¿™ç§å¼ºåº¦çš„å·¥ä½œä¹ˆï¼Ÿä»–ä»¬å¯æ˜¯äººè¯¶ä¸æ˜¯æœºå™¨ã€‚&lt;/p&gt;&lt;p&gt;ä½å¼ºåº¦æŒç»­åŠ ç­ä¹Ÿæ˜¯æ— æƒ…çš„ä¼¤å®³äº†å‘˜å·¥çš„å¥åº·ï¼Œå®ƒä¼šå æ®å‘˜å·¥çš„ç”Ÿæ´»æ—¶é—´ï¼Œè„‘å­é‡Œåªä¼šæœ‰å·¥ä½œï¼Œèº«å¿ƒå¥åº·å¾—ä¸åˆ°ä¿éšœï¼Œè¿›è€Œä¼šå½±å“èº«ä½“å¥åº·ã€‚ä¸€å‘¨å·¥ä½œ6å¤©ç”šè‡³7å¤©ï¼Œç»å¤§éƒ¨åˆ†æ—¶é—´éƒ½è¦åŠ ç­ï¼Œè¿™å°±æ˜¯å‹æ¦¨ï¼Œå‘˜å·¥ä¼šå¾ˆç´¯ï¼Œä¼ä¸šä¸ºäº†æ•ˆç›Šï¼Œè€Œç´¯åäº†å‘˜å·¥ã€‚å°æ²³æ¦¨å¹²äº†ï¼Œå¤§æ²³è¿Ÿæ—©ä¹Ÿä¼šå¹²ã€‚&lt;/p&gt;&lt;p&gt;çœŸçš„å°±æœ‰è¿™ä¹ˆå¤šå·¥ä½œè®©å‘˜å·¥åŠ ç­ä¹ˆï¼Ÿéè¦åœ¨æŸä¸ªèŠ‚æ—¥çš„æœ€åæ—¶é—´æƒ³å‡ºåˆ›æ„ç„¶åæ²¡æ—¥æ²¡å¤œçš„åŠ ç´§å¹²ä¹ˆï¼Ÿéè¦è®©ä¸€ä¸¤ä¸ªäººæŒç»­åŠ ç­ä½œæˆ˜ä¹ˆï¼Ÿæ˜¯ä¸æ˜¯éœ€è¦è°ƒæ•´äººå‘˜ï¼Œåˆç†å®‰æ’äººå‘˜å‘¢ï¼Ÿ&lt;/p&gt;&lt;p&gt;è¯·ä¼ä¸šå–„å¾…è‡ªå·±çš„å‘˜å·¥ï¼Œç»™å‘˜å·¥å¤šä¸€ç‚¹è‡ªå·±çš„æ—¶é—´ï¼Œæ—©ç‚¹ä¸‹ç­ä¸è§å¾—ä¼šå‡å°‘æ•ˆç›Šï¼Œä¹Ÿè®¸èƒ½æ›´å¥½çš„å¢æ”¶æ•ˆç›Šï¼Œå‘˜å·¥æœ‰è‡ªå·±çš„æ—¶é—´ï¼Œèº«å¿ƒæ›´å¥åº·ï¼Œå¤´è„‘æ›´æ¸…æ™°ï¼Œå¿ƒæ€æ›´ä¹è§‚ï¼Œæ•ˆç‡è‚¯å®šä¼šå¢åŠ ï¼Œä¸€ä¸ªäººæ€»æ˜¯æ˜æ˜æ²‰æ²‰çš„åˆ«è¯´æ•ˆç‡ï¼Œè¿˜å¯èƒ½ä¼šé€ å°±å¾ˆå¤šé—®é¢˜æ‹‰æ…¢æ•ˆç‡ï¼Œæ€ä¹ˆå¯èƒ½æŒç»­å‘å±•å‘¢ï¼Ÿ&lt;/p&gt;&lt;h2&gt;ç¤¾ä¼šé‡è§†&lt;/h2&gt;&lt;p&gt;è¿˜æ˜¯è¯·ç¤¾ä¼šä¸Šæ›´å¤šçš„äººéƒ½èƒ½é‡è§†èµ·æ¥ï¼Œå¤§å®¶è”æ‰‹è§£å†³ç°åœ¨çš„é—®é¢˜ï¼Œèƒ½è®©ä¼ä¸šå’Œå‘˜å·¥åŒèµ¢ã€‚æˆ‘åœ¨ITåœˆå·¥ä½œäº†æœ‰å‡ å¹´äº†ï¼Œä¹Ÿä¸çŸ¥é“è¿™è‚¡åŠ ç­æ–‡åŒ–æ˜¯ä»ä»€ä¹ˆæ—¶å€™å…´èµ·çš„ï¼Œè¿™ä¸ªè¡Œä¸šä¸ä½†æœ‰35å‘¨å²çš„æ‹…å¿§ï¼Œè¿˜æœ‰å……æ–¥ç€å„ç§åŠ ç­æ–‡åŒ–ï¼Œæˆ‘ä¸è®¤ä¸ºè¿™ä¸ªèƒ½æŒç»­ä¸‹å»ï¼Œä¹Ÿä¸åº”è¯¥æŒç»­ä¸‹å»ï¼Œåº”è¯¥æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„å¹³è¡¡ç‚¹æ¥å¹³è¡¡åŒæ–¹ã€‚&lt;/p&gt;&lt;p&gt;å¦‚æœè¿™ç§åŠ ç­æ–‡åŒ–ä¸èƒ½å¾—åˆ°æœ‰æ•ˆçš„æ”¹è¿›ï¼Œä»Šå¤©ä¸€ä¸ªæŸå¤šå¤šï¼Œä¹Ÿè®¸æ˜å¤©è¿˜ä¼šå†å‡ºå¦å¤–ä¸€ä¸ªæŸå¤šå¤šï¼Œæˆ‘ä»¬åˆ°åº•è¿˜è¦çœ‹åˆ°å¤šå°‘ç”Ÿå‘½å› ä¸ºè¿‡åŠ³è€Œé€å»ï¼Œæ‰èƒ½æ”¹æ­£ç°åœ¨çš„å·¥ä½œæ–¹å¼ï¼Œåªèƒ½å¯„å¸Œæœ›äºç¤¾ä¼šï¼Œå¤§å®¶è”èµ·æ‰‹æ¥ç¼“è§£æˆ–è€…è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;&lt;h2&gt;ç»“è¯­&lt;/h2&gt;&lt;p&gt;æœ€åè¿˜æ˜¯å¸Œæœ›å¹¿å¤§çš„å·¥ä½œè€…ï¼Œççˆ±è‡ªå·±çš„ç”Ÿå‘½ï¼Œçæƒœè‡ªå·±çš„å¥åº·ï¼Œä¸ç®¡ä½ é€‰æ‹©ä»€ä¹ˆæ ·çš„å·¥ä½œæ–¹å¼ï¼Œè¯·éƒ½åˆ«å¿˜è®°è¿™ä¸¤æ ·æœ€å®è´µçš„ä¸œè¥¿ï¼Œè¯·èƒ½çµæ´»çš„å¤„ç†å¥åº·å’Œå·¥ä½œçš„çŸ›ç›¾ï¼Œè®©æˆ‘ä»¬çš„ç”Ÿå‘½æ›´ç¿çƒ‚ï¼Œå¥åº·æ›´æŒä¹…ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>8a5d51c98acd02ccdc66ada61d5809d2</guid>
<title>å¯èƒ½æ˜¯è¯´çš„æœ€åˆ†æ˜çš„ IaaS, PaaS, FaaS, SaaS, MicroService, Serverless äº†</title>
<link>https://toutiao.io/k/p2q8xl8</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;&amp;#10;                col-lg-8 col-lg-offset-2&amp;#10;                col-md-10 col-md-offset-1&amp;#10;                post-container&quot;&gt;

&lt;h2 id=&quot;çµ®è¯­&quot;&gt;çµ®è¯­&lt;/h2&gt;
&lt;p&gt;å¦‚æœè¯´å“ªä¸ªè¡Œä¸šæœ€ä¼šèµ·åå­—ï¼Œé‚£ä¹ˆäº’è”ç½‘å’Œè½¯ä»¶è¡Œä¸šç§°ç¬¬äºŒçš„è¯ï¼Œä¼°è®¡æ²¡äººæ•¢ç§°ç¬¬ä¸€ï¼Œæ¯”å¦‚ä»€ä¹ˆå¤ç›˜ï¼Œèµ‹èƒ½ï¼Œç»„åˆæ‹³ï¼Œå¼•çˆ†ç‚¹ï¼Œæ³›ç”¨å‹ï¼Œå¼ºåŒ–è®¤çŸ¥â€¦.
ç­‰ç­‰è¿™äº›è®©ä½ å¬äº†æ˜¯è€³æ¿¡ç›®æ—‹çš„ï¼Œé«˜å¤§ä¸Šï¼Œæˆ‘å®Œå…¨ä¸çŸ¥é“å•¥æ„æ€ã€‚å…¶å®åœ¨æˆ‘çœ‹æ¥éƒ½æ˜¯æ–°ç“¶è£…æ—§é…’ï¼Œæ¢ä¸ªé©¬ç”²ï¼ŒåŒ…è£…äº†ä¸‹ã€æˆ–è€…è¯´å°±æ˜¯ä¸è¯´äººè¯ï¼Œå¼ºè¡Œè£…Xäº†ã€‚
ä»Šå¤©æˆ‘ä»¬æ¥è¯´è¯´åŒæ ·ä¹Ÿæ˜¯å‡ ä¸ªé«˜å¤§ä¸Šçš„åè¯ï¼Œä½†æ˜¯ä»–ä»¬å…¶å®å¾ˆå¥½ç†è§£ï¼Œä½†åˆç›¸äº’è”ç³»ï¼Œæ‰€ä»¥ç»å¸¸è®©äººå‚»å‚»åˆ†ä¸æ¸…ã€‚&lt;/p&gt;

&lt;h2 id=&quot;äº‘æœåŠ¡&quot;&gt;äº‘æœåŠ¡&lt;/h2&gt;
&lt;p&gt;ä»ä»¥å‰è¿˜æœ›è€Œå´æ­¥çš„äº‘è®¡ç®—åˆ°ç°åœ¨æˆ‘ä»¬å“ªå“ªéƒ½æ˜¯äº‘æœåŠ¡ï¼Œäº‘çš„æ¦‚å¿µå·²ç»ä»æ¦‚å¿µè½åˆ°åœ°ä¸Šï¼Œè¯´åˆ°äº‘å…¶å®ä¹Ÿæ˜¯ä¸ªä¸è¯´äººè¯çš„è£…Xè¯ï¼Œè¯´ç™½äº†å°±æ˜¯æˆ‘ä»¬ä»¥å‰å’Œç°åœ¨
ä¸åœä½¿ç”¨çš„æœåŠ¡å™¨ç½¢äº†ï¼Œäº‘è®¡ç®—ã€äº‘æœåŠ¡å°±æ˜¯ä¸€ç§æ›´ä¼˜åŒ–çš„æœåŠ¡å™¨åŠŸèƒ½ï¼Œä»åªæ˜¯ä¸ªæœåŠ¡å™¨ç¡¬ä»¶æœ¬èº«ï¼Œå‡çº§åˆ°åœ¨è¿™ä¸ªç¡¬ä»¶ä¸­é›†æˆäº†å¾ˆå¤šæ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ–è€…å¼€ç®±å³ç”¨çš„
æœåŠ¡ï¼Œä¸éœ€è¦ä½ çŸ¥é“æ€ä¹ˆå®‰è£…ï¼Œæ€ä¹ˆé…ç½®ï¼Œä½ åªè¦èŠ±é’±ä¹°äº†ï¼Œå°±å¼€ç®±å³ç”¨ã€‚å³æœ‰ç¡¬ä»¶ä½¿ç”¨ï¼Œä¹Ÿæœ‰æœåŠ¡æä¾›ï¼Œè¿™å°±æ˜¯äº‘æœåŠ¡ã€‚å¦‚æœäº‘æœåŠ¡è¿˜æœ‰åˆ†ç±»çš„è¯ï¼Œé‚£ä¹ˆå°±æ˜¯
ä¸‹é¢è¦è¯´çš„å‡ ä¸ªæ—¢æœ‰åŒºåˆ«åˆæœ‰è”ç³»çš„åˆ†ç±»äº†ï¼Œä½†æ˜¯ä¸ç®¡è¿™äº›åˆ†ç±»æ€ä¹ˆå˜ï¼Œåå­—æ€ä¹ˆèµ·ï¼Œæ€ä¹ˆé«˜å¤§ä¸Šï¼Œå…¶å®åœ¨æˆ‘çœ‹æ¥ï¼Œå°±æ˜¯ä½œä¸ºå®¢æˆ·çš„ä½ ï¼ˆè½¯ä»¶å¼€å‘è€…ï¼‰èŠ±é’±äº«å—ä¸åŒ
æœåŠ¡ï¼Œç»Ÿç»Ÿéƒ½æ˜¯ç®€åŒ–äº†ä½ è¦åšçš„äº‹æƒ…ï¼ŒæŠŠå¤æ‚çš„äº‹æƒ…ç®€å•äº†ï¼ŒèŠ±é’±å°±è¡Œäº†ã€‚çœ‹ç€å¾ˆæ†·äººï¼Œå…¶å®å¾ˆç®€å•ã€‚&lt;/p&gt;

&lt;h2 id=&quot;iaas&quot;&gt;IaaS&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;åŸºç¡€è®¾æ–½æœåŠ¡ï¼ŒInfrastructure as a service&lt;/strong&gt;ï¼Œå¦‚æœæŠŠè½¯ä»¶å¼€å‘æ¯”ä½œå¨å¸ˆåšèœï¼Œé‚£ä¹ˆIaaSå°±æ˜¯ä»–äººæä¾›äº†å¨æˆ¿ï¼Œç‚‰å­ï¼Œé”…ç­‰åŸºç¡€ä¸œè¥¿ï¼Œ
ä½ è‡ªå·±ä½¿ç”¨è¿™äº›ä¸œè¥¿ï¼Œè‡ªå·±æ ¹æ®ä¸åŒéœ€è¦åšå‡ºä¸åŒçš„èœã€‚&lt;/p&gt;

&lt;h2 id=&quot;paas&quot;&gt;PaaS&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;å¹³å°æœåŠ¡ï¼ŒPlatform as a service&lt;/strong&gt;ï¼Œè¿˜æ˜¯åšèœæ¯”å–»ï¼Œæ¯”å¦‚æˆ‘åšä¸€ä¸ªé»„ç„–é¸¡ç±³é¥­ï¼Œé™¤äº†æä¾›åŸºç¡€ä¸œè¥¿å¤–ï¼Œé‚£ä¹ˆPaaSè¿˜ç»™ä½ æä¾›äº†ç°æˆå‰å¥½çš„é¸¡è‚‰ï¼ŒåœŸè±†ï¼Œè¾£æ¤’ï¼Œ
ä½ åªè¦æŠŠè¿™äº›ä¸œè¥¿æ”¾åœ¨ä¸€èµ·ï¼ŒåŠ äº›è°ƒæ–™ï¼Œç”¨ä¸ªå°é”…å­åœ¨ç‚‰å­ä¸Šç„–ä¸ª20åˆ†é’Ÿå°±å¥½äº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;faas&quot;&gt;FaaS&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;å‡½æ•°æœåŠ¡ï¼ŒFunction as a Service&lt;/strong&gt;ï¼ŒåŒæ ·æ˜¯åšé»„ç„–é¸¡ç±³é¥­ï¼Œè¿™æ¬¡æˆ‘åªæä¾›é…±æ²¹ï¼Œè‰²æ‹‰æ²¹ï¼Œç›ï¼Œé†‹ï¼Œå‘³ç²¾è¿™äº›è°ƒå‘³æ–™ï¼Œå…¶ä»–æˆ‘ä¸æä¾›ï¼Œä½ è‡ªå·±æ ¹æ®ä¸åŒå£å‘³æ˜¯å¤šæ”¾ç‚¹ç›ï¼Œ
è¿˜æ˜¯å¤šæ”¾ç‚¹é†‹ï¼Œä½ è‡ªå·±å†³å®šã€‚&lt;/p&gt;

&lt;h2 id=&quot;saas&quot;&gt;SaaS&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;è½¯ä»¶æœåŠ¡ï¼ŒSoftware as a service&lt;/strong&gt;ï¼ŒåŒæ ·è¿˜æ˜¯åšé»„ç„–é¸¡ç±³é¥­ï¼Œè¿™æ¬¡æ˜¯ç›´æ¥ç°æˆæå¥½çš„ä¸€ä¸ªä¸€ä¸ªå°é”…çš„é¸¡ï¼Œä»€ä¹ˆè°ƒæ–™éƒ½å¥½äº†ï¼Œå·²ç»æ˜¯ä¸ªæˆå“äº†ï¼Œä½ åªè¦è´´ä¸ªç‰Œï¼Œç›´æ¥å–å‡º
å»å°±è¡Œäº†ï¼Œåšå¤šæ˜¯åœ¨ç‚‰å­ä¸Šç„–ä¸ª20åˆ†é’Ÿã€‚&lt;/p&gt;

&lt;h2 id=&quot;microservice&quot;&gt;MicroService&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;å¾®æœåŠ¡ï¼ŒMicro service&lt;/strong&gt;ï¼Œå¾®æœåŠ¡æ˜¯æœåŠ¡æ•´ä½“çš„ç»†åŒ–ï¼Œå¦‚æœè¿˜æ˜¯åšé»„ç„–é¸¡ç±³é¥­ï¼Œå°±å¥½æ¯”ä¸€å®¶ä¾›åº”å•†æä¾›å¥½äº†æ‰€æœ‰è°ƒæ–™ï¼Œä¸€å®¶ä¾›åº”å•†æä¾›å¥½äº†æ‰€æœ‰çš„é¸¡å—ç­‰é£Ÿæï¼Œä½ åªè¦æŠŠè¿™ä¸¤
å®¶ä¾›åº”å•†æä¾›çš„ä¸œè¥¿åšæˆé»„ç„–é¸¡ç±³é¥­å°±è¡Œäº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;serverless&quot;&gt;Serverless&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æ— æœåŠ¡ï¼ŒServer less&lt;/strong&gt;ï¼Œè¯´æ˜¯æ— ï¼Œå…¶å®æœ‰ï¼Œæ— æœåŠ¡å°±æ˜¯ä¸€ç§æ²¡æœ‰æ„ŸçŸ¥çš„æœåŠ¡ï¼Œä½ ä¸éœ€è¦çŸ¥é“å®ƒæ€ä¹ˆå®ç°çš„ã€‚å¦‚æœè¿˜æ˜¯åšé»„ç„–é¸¡ç±³é¥­ï¼Œæ— æœåŠ¡åœ¨è¿™é‡Œå¯ä»¥æ¯”å–»ä¸ºä¹°ä¸€è¢‹å·²ç»è°ƒå‘³å¥½çš„è°ƒæ–™åŒ…ï¼Œä½ ç›´æ¥å¾€é»„ç„–é¸¡é‡Œå€’
å°±è¡Œäº†ï¼Œè‡³äºæ€ä¹ˆè°ƒå‡ºçš„å£å‘³ä½ ä¸éœ€è¦çŸ¥é“ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢å°±æ²¡æœ‰é»„ç„–é¸¡äº†ğŸ˜„ï¼Œæˆ‘ä¸‹é¢éœ€è¦é‡ç‚¹è¯´è¯´å‡ ä¸ªæ¶æ„çš„å®ä½“&lt;/p&gt;

&lt;h2 id=&quot;serverlessçš„å†å²&quot;&gt;Serverlessçš„å†å²&lt;/h2&gt;
&lt;p&gt;Serverlessçš„æ¦‚å¿µå¹¶ä¸æ¸…æ™°ï¼Œä¹è§ä¹‹ä¸‹ï¼Œå¾ˆå®¹æ˜“è®©äººæ··æ·†ç¡¬ä»¶æœåŠ¡å™¨åŠè½¯ä»¶ä¸Šçš„æœåŠ¡ä¸å…¶æ‰€è°“çš„â€œæœåŠ¡å™¨â€å·®åˆ«ï¼Œåœ¨è¿™é‡Œå¼ºè°ƒçš„æ‰€è°“â€œæ— æœåŠ¡å™¨â€æŒ‡çš„æ˜¯&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æˆ‘ä»¬çš„ä»£ç ä¸ä¼šæ˜ç¡®åœ°éƒ¨ç½²åœ¨æŸäº›ç‰¹å®šçš„è½¯ä»¶æˆ–è€…ç¡¬ä»¶çš„æœåŠ¡å™¨ä¸Šã€‚
è¿è¡Œä»£ç æ‰˜ç®¡çš„ç¯å¢ƒæ˜¯ç”±ä¾‹å¦‚é˜¿é‡Œäº‘æˆ–è€…è…¾è®¯äº‘è¿™æ ·çš„äº‘è®¡ç®—å‚å•†æ‰€æä¾›&lt;/code&gt;ã€‚å…¶å®è¿™å¬ä¸Šå»åˆå¾ˆåƒPaas,SaaS,FaaS,ä¸é”™ï¼Œæ‰€ä»¥ä»–ä»¬ä¹‹é—´ä¹Ÿå……æ»¡äº†è”ç³»ã€‚&lt;/p&gt;

&lt;h2 id=&quot;serverless-ä¸-paas&quot;&gt;Serverless ä¸ PaaS&lt;/h2&gt;
&lt;p&gt;PaaSæ˜¯å¹³å°å³ä¸ºæœåŠ¡ï¼ŒServerlessç›¸å½“äº&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å¹³å°&lt;/code&gt;æä¾›äº†æ›´åŠ ç»†ç²’åº¦å’Œç¢ç‰‡åŒ–çš„æœåŠ¡ï¼Œä»è¿™ä¸ªå±‚æ¬¡æ¥è¯´ï¼ŒServerless=PaaSã€‚&lt;/p&gt;

&lt;h2 id=&quot;serverless-ä¸-saas&quot;&gt;Serverless ä¸ SaaS&lt;/h2&gt;
&lt;p&gt;SaaSæ˜¯è½¯ä»¶æœ¬èº«å³ä¸ºæœåŠ¡ï¼ŒServerlessç›¸å½“äº&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è½¯ä»¶&lt;/code&gt;æä¾›äº†æ›´åŠ ç»†ç²’åº¦å’Œç¢ç‰‡åŒ–çš„æœåŠ¡ï¼Œå› ä¸ºServerlessä¹Ÿæ˜¯ä¸€ç§è½¯ä»¶ï¼Œä»è¿™ä¸ªå±‚æ¬¡æ¥è¯´ï¼ŒServerless=SaaSã€‚&lt;/p&gt;

&lt;h2 id=&quot;serverless-ä¸-faas&quot;&gt;Serverless ä¸ FaaS&lt;/h2&gt;
&lt;p&gt;FaaSæ˜¯å‡½æ•°å³ä¸ºæœåŠ¡ï¼ŒServerlessç›¸å½“äºæä¾›çš„æ›´åŠ ç»†ç²’åº¦å’Œç¢ç‰‡åŒ–æœåŠ¡æ˜¯ä¸€ç§&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;å‡½æ•°&lt;/code&gt;ï¼Œä»è¿™ä¸ªå±‚æ¬¡æ¥è¯´ï¼ŒServerless=FaaSã€‚&lt;/p&gt;

&lt;h2 id=&quot;serverless-ä¸-microservice&quot;&gt;Serverless ä¸ MicroService&lt;/h2&gt;
&lt;p&gt;MicroServiceæ˜¯å¾®æœåŠ¡ï¼Œæ˜¯ä¸€ç§ä¸“æ³¨äºå•ä¸€è´£ä»»ä¸åŠŸèƒ½çš„å°å‹æœåŠ¡ï¼ŒServerlessç›¸å½“äº&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;æ›´åŠ ç»†ç²’åº¦å’Œç¢ç‰‡åŒ–&lt;/code&gt;çš„å•ä¸€è´£ä»»ä¸åŠŸèƒ½å°å‹æœåŠ¡ï¼Œä»–ä»¬éƒ½æ˜¯ä¸€ç§ç‰¹å®šçš„å°å‹æœåŠ¡ï¼Œ
ä»è¿™ä¸ªå±‚æ¬¡æ¥è¯´ï¼ŒServerless=MicroServiceã€‚&lt;/p&gt;

&lt;p&gt;&lt;em&gt;è¿™å‡ ä¸ªä¹‹é—´æœ‰è¿™ä¹ˆå¤šè”ç³»ï¼Œä½†æ˜¯ä»æ¶æ„çš„å®šä¹‰èŒƒå›´ä¹Ÿæœ‰ä¸ªåŒ…å«å…³ç³»ï¼ŒPaaS &amp;gt; SaaS &amp;gt; FaaS &amp;gt; MicroService &amp;gt; Serverless&lt;/em&gt;&lt;/p&gt;

&lt;h2 id=&quot;æœ€åè¿˜æœ‰ä¸ª-servicemesh&quot;&gt;æœ€åè¿˜æœ‰ä¸ª ServiceMesh&lt;/h2&gt;
&lt;p&gt;ServiceMeshå«åšæœåŠ¡ç½‘æ ¼ï¼Œä»–æ˜¯ä¾å­˜äºMicroServiceå¾®æœåŠ¡æ¶æ„å­˜åœ¨çš„ï¼Œå› ä¸ºå¾®æœåŠ¡ä¹‹é—´éœ€è¦é€šä¿¡ï¼Œéœ€è¦æ•°æ®äº¤æ¢åŒæ­¥ç­‰æ“ä½œã€‚åœ¨æ²¡æœ‰ServiceMeshä¹‹å‰å¾®æœåŠ¡çš„
é€šä¿¡ï¼Œæ•°æ®äº¤æ¢åŒæ­¥ä¹Ÿå­˜åœ¨ï¼Œä¹Ÿæœ‰æ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆï¼Œå¦‚Spring Clouldï¼ŒOSSï¼ŒDoubleè¿™äº›ï¼Œä½†ä»–ä»¬æœ‰ä¸ªæœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯éœ€è¦ä½ å†™å…¥ä»£ç ä¸­ï¼Œè€Œä¸”éœ€è¦æ·±åº¦çš„å†™
å¾ˆå¤šé€»è¾‘æ“ä½œä»£ç ï¼Œè¿™å°±æ˜¯&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ä¾µå…¥å¼&lt;/code&gt;ã€‚è€ŒServiceMeshæœ€å¤§çš„ç‰¹ç‚¹æ˜¯&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;éä¾µå…¥å¼&lt;/code&gt;ï¼Œä¸éœ€è¦ä½ å†™ç‰¹å®šä»£ç ï¼Œåªæ˜¯åœ¨äº‘æœåŠ¡çš„å±‚é¢å³å¯äº«å—å¾®æœåŠ¡ä¹‹é—´çš„é€šä¿¡ï¼Œæ•°æ®äº¤æ¢åŒæ­¥ç­‰æ“ä½œï¼Œ
è¿™é‡Œçš„ä»£è¡¨å¦‚ï¼Œdocker+K8sï¼Œistioï¼Œlinkerdç­‰ã€‚ &lt;br/&gt;
ä»è¿™é‡Œä½ ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œæ‰€æœ‰æ–°å‡ºæ¥çš„é«˜å¤§ä¸Šçš„ä¸œè¥¿ï¼Œéƒ½æ˜¯åœ¨ç®€åŒ–ä½ çš„å·¥ä½œã€‚ä»¥å‰å¯èƒ½éœ€è¦ä½ é€ è½®å­æ‰å¯ä»¥ï¼Œç„¶ååˆ°ç”¨ç°æˆçš„è½®å­å°±å¯ä»¥ï¼Œå†åˆ°è¿è½®å­ä½ éƒ½çœ‹ä¸è§èŠ±é’±å°±å¯ä»¥äº†ğŸ™‚ã€‚&lt;/p&gt;



                &lt;hr/&gt;

                


                
                
                
                
                
                &lt;p id=&quot;gitalk-container&quot;/&gt;
                
                
                
                
                
                

                

            &lt;/div&gt;  

    
        
            &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>f13a5c6c3f258b4c61999ca560e4516d</guid>
<title>Serverless éŸ³è§†é¢‘è½¬ç ï¼šèŠ’æœ TV è½åœ°å®è·µï¼ˆä¸‹ï¼‰</title>
<link>https://toutiao.io/k/talunv3</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;Markdown__Wrapper-sbgo4h-0 kKEhyL markdown-body&quot;&gt;&lt;p&gt;åœ¨ &lt;a href=&quot;https://serverlesscloud.cn/best-practice/2021-01-08-serverless-mangguo&quot;&gt;ã€ŠServerless éŸ³è§†é¢‘è½¬ç â€”â€”èŠ’æœ TV è½åœ°å®è·µï¼ˆä¸Šï¼‰ã€‹&lt;/a&gt;ä¸­ï¼Œæˆ‘ä»¬å›é¡¾äº†èŠ’æœ TV å´åšå¼ºè€å¸ˆåœ¨ techo å¤§ä¼šçš„ç²¾å½©åˆ†äº«ï¼ŒèŠ’æœTV éŸ³è§†é¢‘ç¼–è§£ç ä¸šåŠ¡å›¢é˜Ÿé€šè¿‡ä½¿ç”¨è…¾è®¯äº‘ Serverless éŸ³è§†é¢‘è½¬ç æœåŠ¡ï¼Œæˆæœ¬é™ä½ 45% ä»¥ä¸Šï¼Œå¼•èµ·å¤§å®¶çš„å¹¿æ³›å…³æ³¨ï¼Œå°ä¼™ä¼´ä»¬éƒ½è·ƒè·ƒæ¬²è¯•ï¼&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡æˆ‘ä»¬å°†å¸¦é¢†å¤§å®¶ä¸€èµ·ä½¿ç”¨äº‘å‡½æ•° + COS + CLS + FFmpeg æ„å»ºé«˜å¯ç”¨ã€å¹¶è¡Œå¤„ç†ã€å®æ—¶æ—¥å¿—ã€é«˜åº¦è‡ªå®šä¹‰çš„è§†é¢‘è½¬ç æœåŠ¡ã€‚æˆ‘ä»¬åœ¨æ­¤æä¾›äº†ä¸¤ç§æ–¹æ¡ˆï¼Œæ‚¨å¯ä»¥ç›´æ¥ç”¨è½¬ç åº”ç”¨ï¼Œä¸€é”®éƒ¨ç½²ï¼Œä¹Ÿå¯ä»¥é€šè¿‡
ç”¨å‡½æ•°çš„é•¿è¿è¡Œæ–¹æ¡ˆæ¥è‡ªå·±å¤„ç†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;å®ç°æ–¹æ¡ˆ&quot;&gt;&lt;a href=&quot;#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%88&quot; aria-label=&quot;å®ç°æ–¹æ¡ˆ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;å®ç°æ–¹æ¡ˆ&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æ–¹æ¡ˆä¸€ï¼š&lt;/strong&gt; ä½¿ç”¨å®˜ç½‘çš„æµå¼éŸ³è§†é¢‘è½¬ç ï¼Œä¸€é”®éƒ¨ç½²ã€‚æŸ¥çœ‹&lt;a href=&quot;https://cloud.tencent.com/document/product/583/51451&quot;&gt;è¯¦æƒ…&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ–¹æ¡ˆäºŒï¼š&lt;/strong&gt; åˆ©ç”¨äº‘å‡½æ•°çš„å¼‚æ­¥æ‰§è¡Œæœºåˆ¶ï¼Œè‡ªä¸»ç ”å‘ã€‚æŸ¥çœ‹&lt;a href=&quot;https://cloud.tencent.com/document/product/583/51519&quot;&gt;è¯¦æƒ…&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;æµå¼éŸ³è§†é¢‘è½¬ç æ–¹æ¡ˆ&quot;&gt;&lt;a href=&quot;#%E6%B5%81%E5%BC%8F%E9%9F%B3%E8%A7%86%E9%A2%91%E8%BD%AC%E7%A0%81%E6%96%B9%E6%A1%88&quot; aria-label=&quot;æµå¼éŸ³è§†é¢‘è½¬ç æ–¹æ¡ˆ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;æµå¼éŸ³è§†é¢‘è½¬ç æ–¹æ¡ˆ&lt;/h2&gt;
&lt;p&gt;é€šè¿‡äº‘å‡½æ•°åˆ›å»º FFmpeg ä»»åŠ¡è¿›ç¨‹ï¼Œäº‘å‡½æ•°è¿›ç¨‹ä¸ FFmpeg ä»»åŠ¡è¿›ç¨‹é€šè¿‡ pipe å’Œ FIFO çš„æ–¹å¼è¿›è¡Œæ•°æ®ä¼ è¾“ã€‚äº‘å‡½æ•°è¿›ç¨‹ä¸­çš„ä¸¤ä¸ªä»»åŠ¡çº¿ç¨‹åˆ†åˆ«æ¥æ”¶ FFmpeg ä»»åŠ¡è¿›ç¨‹å‘å‡½æ•°è¿›ç¨‹è¾“å‡ºçš„ FFmpeg æ—¥å¿—æµä¸è½¬ç åçš„æ–‡ä»¶æµï¼Œä»è€Œå®ç°æµå¼è¯»å†™ COS å’Œå®æ—¶æ—¥å¿—è¾“å‡ºçš„è½¬ç åº”ç”¨åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://main.qcloudimg.com/raw/749ac11a39c98a1ffbf5bb6d4b758e5a.svg&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;æ–¹æ¡ˆä¼˜åŠ¿&quot;&gt;&lt;a href=&quot;#%E6%96%B9%E6%A1%88%E4%BC%98%E5%8A%BF&quot; aria-label=&quot;æ–¹æ¡ˆä¼˜åŠ¿ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;æ–¹æ¡ˆä¼˜åŠ¿&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æµå¼è½¬ç &lt;/strong&gt;
é‡‡ç”¨æµå¼æ‹‰å–æºè§†é¢‘æ–‡ä»¶ï¼Œæµå¼ä¸Šä¼ è½¬ç æ–‡ä»¶çš„å·¥ä½œæ–¹å¼ï¼Œçªç ´äº†æœ¬åœ°å­˜å‚¨çš„é™åˆ¶ï¼Œä¸”ä¸éœ€è¦é¢å¤–éƒ¨ç½² CFS ç­‰äº§å“ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®æ—¶æ—¥å¿—&lt;/strong&gt;
è§†é¢‘è½¬ç è¿‡ç¨‹ä¸­ï¼Œå¯é€šè¿‡ CLS æ—¥å¿—å®æ—¶æŸ¥çœ‹è½¬ç è¿›åº¦ã€‚åŒæ—¶æ”¯æŒè¾“å‡º FFmpeg åº”ç”¨çš„å®Œæ•´æ—¥å¿—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é•¿æ—¶è¿è¡Œ&lt;/strong&gt;
åˆ©ç”¨äº‘å‡½æ•°çš„é•¿æ—¶è¿è¡Œæœºåˆ¶ï¼Œæ”¯æŒ 12h-24h çš„è¿è¡Œæ—¶é•¿ï¼Œå¯è¦†ç›–å¤§æ–‡ä»¶è€—æ—¶è¾ƒé•¿çš„è½¬ç åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è‡ªå®šä¹‰å‚æ•°&lt;/strong&gt;
æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰é…ç½® FFmpeg å‘½ä»¤å‚æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;å‰ææ¡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å®‰è£… &lt;a href=&quot;https://cloud.tencent.com/document/product/1154/42990&quot;&gt;Serverlesss Framework&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å‡½æ•°é•¿æ—¶è¿è¡Œ &lt;a href=&quot;https://cloud.tencent.com/apply/p/hz85krvp8s8&quot;&gt;ç™½åå•ç”³è¯·&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;é…ç½®éƒ¨ç½²è´¦å·æƒé™ã€‚å‚è€ƒ &lt;a href=&quot;https://cloud.tencent.com/document/product/1154/43006&quot;&gt;è´¦å·å’Œæƒé™é…ç½®&lt;/a&gt; &lt;/li&gt;
&lt;li&gt;é…ç½® &lt;a href=&quot;https://cloud.tencent.com/document/product/583/51451#.E8.BF.90.E8.A1.8C.E8.A7.92.E8.89.B2.3Ca-id.3D.22role.22.3E.3C.2Fa.3E&quot;&gt;è¿è¡Œè§’è‰²&lt;/a&gt; æƒé™ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;æ“ä½œæ­¥éª¤&quot;&gt;&lt;a href=&quot;#%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4&quot; aria-label=&quot;æ“ä½œæ­¥éª¤ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;æ“ä½œæ­¥éª¤&lt;/h2&gt;
&lt;h3 id=&quot;1-ä¸‹è½½è½¬ç åº”ç”¨&quot;&gt;&lt;a href=&quot;#1-%E4%B8%8B%E8%BD%BD%E8%BD%AC%E7%A0%81%E5%BA%94%E7%94%A8&quot; aria-label=&quot;1 ä¸‹è½½è½¬ç åº”ç”¨ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;1. ä¸‹è½½è½¬ç åº”ç”¨&lt;/h3&gt;

&lt;p&gt;è¿›å…¥é¡¹ç›®ç›®å½• &lt;code class=&quot;language-text&quot;&gt;transcode-app&lt;/code&gt;ï¼Œå°†çœ‹åˆ°ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;transcode-app
|- .env  #ç¯å¢ƒé…ç½®
|- serverless.yml # åº”ç”¨é…ç½®
|- log/ #log æ—¥å¿—é…ç½®
|  â””â”€â”€ serverless.yml
â””â”€â”€transcode/  #è½¬ç å‡½æ•°é…ç½®
       |- src/
       |   |- ffmpeg   #è½¬ç  FFmpeg å·¥å…·
       |   â””â”€â”€ index.py
       â””â”€â”€ serverless.yml&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;log/serverless.yml&lt;/code&gt; å®šä¹‰ä¸€ä¸ª CLS æ—¥å¿—é›†å’Œä¸»é¢˜ï¼Œç”¨äºè½¬ç è¿‡ç¨‹è¾“å‡ºçš„æ—¥å¿—ä¿å­˜ï¼Œç›®å‰é‡‡ç”¨è…¾è®¯äº‘ CLS æ—¥å¿—å­˜å‚¨ã€‚æ¯ä¸ªè½¬ç åº”ç”¨å°†ä¼šæ ¹æ®é…ç½®çš„ CLS æ—¥å¿—é›†å’Œä¸»é¢˜å»åˆ›å»ºç›¸å…³èµ„æºï¼ŒCLS çš„ä½¿ç”¨ä¼šäº§ç”Ÿè®¡è´¹ï¼Œå…·ä½“å‚è€ƒ &lt;a href=&quot;https://cloud.tencent.com/document/product/614/47116&quot;&gt;CLS è®¡è´¹è§„åˆ™&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;transcode/serverless.yml&lt;/code&gt; å®šä¹‰å‡½æ•°çš„åŸºç¡€é…ç½®åŠè½¬ç å‚æ•°é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;transcode/src/index.py&lt;/code&gt; è½¬ç åŠŸèƒ½å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;transcode/src/ffmpeg&lt;/code&gt; è½¬ç å·¥å…· FFmpegã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;2-é…ç½®ç¯å¢ƒå˜é‡å’Œåº”ç”¨å‚æ•°&quot;&gt;&lt;a href=&quot;#2-%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E5%92%8C%E5%BA%94%E7%94%A8%E5%8F%82%E6%95%B0&quot; aria-label=&quot;2 é…ç½®ç¯å¢ƒå˜é‡å’Œåº”ç”¨å‚æ•° permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;2. é…ç½®ç¯å¢ƒå˜é‡å’Œåº”ç”¨å‚æ•°&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åº”ç”¨å‚æ•°ï¼Œæ–‡ä»¶ &lt;code class=&quot;language-text&quot;&gt;transcode-app/serverless.yml&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;#åº”ç”¨ä¿¡æ¯
app: transcodeApp # æ‚¨éœ€è¦é…ç½®æˆæ‚¨çš„åº”ç”¨åç§°
stage: dev # ç¯å¢ƒåç§°ï¼Œé»˜è®¤ä¸º dev&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;ç¯å¢ƒå˜é‡ï¼Œæ–‡ä»¶&lt;code class=&quot;language-text&quot;&gt;transcode-app/.env&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;REGION=ap-shanghai  # åº”ç”¨åˆ›å»ºæ‰€åœ¨åŒºï¼Œç›®å‰åªæ”¯æŒä¸Šæµ·åŒº
TENCENT_SECRET_ID=xxxxxxxxxxxx # æ‚¨çš„è…¾è®¯äº‘sercretId
TENCENT_SECRET_KEY=xxxxxxxxxxxx # æ‚¨çš„è…¾è®¯äº‘sercretKey&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;è¯´æ˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‚¨å¯ä»¥ç™»å½•è…¾è®¯äº‘æ§åˆ¶å°ï¼Œå¯ä»¥åœ¨ &lt;a href=&quot;https://console.cloud.tencent.com/cam/capi&quot;&gt;API å¯†é’¥ç®¡ç†&lt;/a&gt; ä¸­è·å– SecretId å’Œ SecretKeyã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœæ‚¨çš„è´¦å·ä¸ºä¸»è´¦å·ï¼Œæˆ–è€…å­è´¦å·å…·æœ‰æ‰«ç æƒé™ï¼Œä¹Ÿå¯ä»¥ä¸é…ç½® SercretId ä¸ SercretKeyï¼Œç›´æ¥æ‰«ç éƒ¨ç½²åº”ç”¨ã€‚æ›´å¤šè¯¦æƒ…å‚è€ƒ &lt;a href=&quot;https://cloud.tencent.com/document/product/1154/43006&quot;&gt;è´¦å·å’Œæƒé™é…ç½®&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;3-é…ç½®è½¬ç éœ€è¦çš„å‚æ•°ä¿¡æ¯&quot;&gt;&lt;a href=&quot;#3-%E9%85%8D%E7%BD%AE%E8%BD%AC%E7%A0%81%E9%9C%80%E8%A6%81%E7%9A%84%E5%8F%82%E6%95%B0%E4%BF%A1%E6%81%AF&quot; aria-label=&quot;3 é…ç½®è½¬ç éœ€è¦çš„å‚æ•°ä¿¡æ¯ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;3. é…ç½®è½¬ç éœ€è¦çš„å‚æ•°ä¿¡æ¯&lt;/h3&gt;

&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;è¾“å‡ºæ¡¶ä¸å‡½æ•°å»ºè®®é…ç½®åœ¨åŒä¸€åŒºåŸŸï¼Œè·¨åŒºåŸŸé…ç½®åº”ç”¨ç¨³å®šæ€§åŠæ•ˆç‡éƒ½ä¼šé™ä½ï¼Œå¹¶ä¸”ä¼šäº§ç”Ÿè·¨åŒºæµé‡è´¹ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;å†…å­˜å¤§å°ä¸Šé™ä¸º3072MBï¼Œè¿è¡Œæ—¶é•¿ä¸Šé™ä¸º43200sã€‚å¦‚éœ€è°ƒæ•´ï¼Œè¯· &lt;a href=&quot;https://console.cloud.tencent.com/workorder/category?level1_id=6&amp;amp;level2_id=668&amp;amp;source=0&amp;amp;data_title=%E6%97%A0%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%BA%91%E5%87%BD%E6%95%B0%20SCF&amp;amp;step=1&quot;&gt;æäº¤å·¥å•&lt;/a&gt; ç”³è¯·é…é¢è°ƒæ•´ã€‚&lt;/li&gt;
&lt;li&gt;è½¬ç åº”ç”¨å¿…é¡»å¼€å¯å‡½æ•°é•¿æ—¶è¿è¡Œ asyncRunEnable: trueã€‚&lt;/li&gt;
&lt;li&gt;è¿è¡Œè§’è‰²è¯·æ ¹æ® &lt;a href=&quot;https://cloud.tencent.com/document/product/583/51451#.E8.BF.90.E8.A1.8C.E8.A7.92.E8.89.B2.3Ca-id.3D.22role.22.3E.3C.2Fa.3E&quot;&gt;è¿è¡Œè§’è‰²&lt;/a&gt; åˆ›å»ºå¹¶æˆæƒã€‚&lt;/li&gt;
&lt;li&gt;ç¤ºä¾‹é…ç½®çš„ FFmpeg æŒ‡ä»¤ä»…é€‚ç”¨äº AVI è½¬ç åœºæ™¯ï¼Œè¯¦ç»†ä»‹ç»å‚è€ƒ &lt;a href=&quot;https://cloud.tencent.com/document/product/583/51451#ffmpeg-.E6.8C.87.E4.BB.A4.3Ca-id.3D.22ffmpeg.22.3E.3C.2Fa.3E&quot;&gt;FFmpeg æŒ‡ä»¤&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;4-éƒ¨ç½²é¡¹ç›®&quot;&gt;&lt;a href=&quot;#4-%E9%83%A8%E7%BD%B2%E9%A1%B9%E7%9B%AE&quot; aria-label=&quot;4 éƒ¨ç½²é¡¹ç›® permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;4. éƒ¨ç½²é¡¹ç›®&lt;/h3&gt;
&lt;p&gt;åœ¨ &lt;code class=&quot;language-text&quot;&gt;transcode-app&lt;/code&gt; é¡¹ç›®ç›®å½•ä¸‹ï¼Œæ‰§è¡Œ &lt;code class=&quot;language-text&quot;&gt;sls deploy&lt;/code&gt; éƒ¨ç½²é¡¹ç›®ã€‚&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;cd transcode-app &amp;amp;&amp;amp; sls deploy&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;5-ä¸Šä¼ è§†é¢‘æ–‡ä»¶&quot;&gt;&lt;a href=&quot;#5-%E4%B8%8A%E4%BC%A0%E8%A7%86%E9%A2%91%E6%96%87%E4%BB%B6&quot; aria-label=&quot;5 ä¸Šä¼ è§†é¢‘æ–‡ä»¶ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;5. ä¸Šä¼ è§†é¢‘æ–‡ä»¶&lt;/h3&gt;
&lt;p&gt;ä¸Šä¼ è§†é¢‘æ–‡ä»¶åˆ°å·²ç»é…ç½®å¥½çš„cosæ¡¶æŒ‡å®šè·¯å¾„ï¼Œåˆ™ä¼šè‡ªåŠ¨è½¬ç ã€‚æœ¬ç¤ºä¾‹ä¸­æ˜¯cosæ¡¶&lt;code class=&quot;language-text&quot;&gt;test-123456789.cos.ap-shanghai.myqcloud.com&lt;/code&gt;ä¸‹çš„&lt;code class=&quot;language-text&quot;&gt;/video/inputs/&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è½¬ç æˆåŠŸåï¼Œæ–‡ä»¶å°†ä¿å­˜åœ¨æ‚¨é…ç½®çš„è¾“å‡ºæ¡¶è·¯å¾„ä¸­ã€‚æœ¬ç¤ºä¾‹ä¸­æ˜¯cosæ¡¶&lt;code class=&quot;language-text&quot;&gt;test-123456789.cos.ap-shanghai.myqcloud.com&lt;/code&gt;ä¸‹çš„&lt;code class=&quot;language-text&quot;&gt;/video/outputs/&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&quot;6-é‡æ–°éƒ¨ç½²&quot;&gt;&lt;a href=&quot;#6-%E9%87%8D%E6%96%B0%E9%83%A8%E7%BD%B2&quot; aria-label=&quot;6 é‡æ–°éƒ¨ç½² permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;6. é‡æ–°éƒ¨ç½²&lt;/h3&gt;
&lt;p&gt;å¦‚æœéœ€è¦è°ƒæ•´è½¬ç é…ç½®ï¼Œä¿®æ”¹æ–‡ä»¶ &lt;code class=&quot;language-text&quot;&gt;transcode/serverless.yml&lt;/code&gt; åï¼Œé‡æ–°éƒ¨ç½²äº‘å‡½æ•°å³å¯ï¼š&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;cd transcode &amp;amp;&amp;amp; sls deploy&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;ç›‘æ§ä¸æ—¥å¿—æœåŠ¡&quot;&gt;&lt;a href=&quot;#%E7%9B%91%E6%8E%A7%E4%B8%8E%E6%97%A5%E5%BF%97%E6%9C%8D%E5%8A%A1&quot; aria-label=&quot;ç›‘æ§ä¸æ—¥å¿—æœåŠ¡ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;ç›‘æ§ä¸æ—¥å¿—æœåŠ¡&lt;/h2&gt;
&lt;p&gt;æ‰¹é‡æ–‡ä»¶ä¸Šä¼ åˆ° COS ä¼šå¹¶è¡Œè§¦å‘è½¬ç æ‰§è¡Œã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç™»å½• &lt;a href=&quot;https://console.cloud.tencent.com/scf/index?rid=1&quot;&gt;äº‘å‡½æ•°æ§åˆ¶å°&lt;/a&gt; çš„ã€å‡½æ•°æœåŠ¡ã€‘é¡µé¢ä¸­ï¼Œå•å‡»å‡½æ•°åè¿›å…¥å‡½æ•°ç®¡ç†é¡µé¢ã€‚&lt;/li&gt;
&lt;li&gt;å•å‡»ã€æ—¥å¿—æŸ¥è¯¢ã€‘ï¼Œå³å¯æŸ¥çœ‹æ—¥å¿—ç›‘æ§ã€‚
&lt;img src=&quot;https://main.qcloudimg.com/raw/366b8d44b84205d580af18703a1cd511.png&quot;/&gt;&lt;/li&gt;
&lt;li&gt;å•å‡»ã€å‡½æ•°ç®¡ç†ã€‘&amp;gt;ã€å‡½æ•°é…ç½®ã€‘ï¼Œå•å‡»æ—¥å¿—ä¸»é¢˜çš„é“¾æ¥ï¼Œè·³è½¬è‡³æ—¥å¿—æœåŠ¡æ§åˆ¶å°ã€‚
&lt;img src=&quot;https://main.qcloudimg.com/raw/a86502f7ecc77473501ce654a23435de.jpg&quot;/&gt;&lt;/li&gt;
&lt;li&gt;åœ¨æ—¥å¿—æœåŠ¡æ§åˆ¶å°çš„ã€æ£€ç´¢åˆ†æã€‘é¡µé¢ä¸­ï¼Œé€‰æ‹©æ—¥å¿—é›†åˆæ—¥å¿—ä¸»é¢˜ï¼Œå³å¯æŸ¥çœ‹æ—¥å¿—æ£€ç´¢åˆ†æ ã€‚
&lt;img src=&quot;https://main.qcloudimg.com/raw/caca6a584b5abe864559379fac8f3346.png&quot;/&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;å€ŸåŠ©å‡½æ•°å¼‚æ­¥è¿è¡Œèƒ½åŠ›è‡ªä¸»ç ”å‘æ–¹æ¡ˆ&quot;&gt;&lt;a href=&quot;#%E5%80%9F%E5%8A%A9%E5%87%BD%E6%95%B0%E5%BC%82%E6%AD%A5%E8%BF%90%E8%A1%8C%E8%83%BD%E5%8A%9B%E8%87%AA%E4%B8%BB%E7%A0%94%E5%8F%91%E6%96%B9%E6%A1%88&quot; aria-label=&quot;å€ŸåŠ©å‡½æ•°å¼‚æ­¥è¿è¡Œèƒ½åŠ›è‡ªä¸»ç ”å‘æ–¹æ¡ˆ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;å€ŸåŠ©å‡½æ•°å¼‚æ­¥è¿è¡Œèƒ½åŠ›è‡ªä¸»ç ”å‘æ–¹æ¡ˆ&lt;/h2&gt;
&lt;p&gt;åœ¨éŸ³è§†é¢‘è½¬ç ã€ETL å¤§ä½“é‡æ•°æ®å¤„ç†ã€AI æ¨ç†ç­‰å•ä»»åŠ¡é‡è®¡ç®—çš„åœºæ™¯ä¸‹ï¼Œå‡½æ•°çš„å•å®ä¾‹è¿è¡Œæ—¶éœ€è¦æ›´å¤šç®—åŠ›åŠæ›´é•¿æ—¶é—´çš„ç¨³å®šè¿è¡Œã€‚è‹¥å‡½æ•°çš„è°ƒç”¨ç«¯é•¿æ—¶é—´é˜»å¡ç­‰å¾…æ‰§è¡Œç»“æœï¼Œä¸ä»…ä¼šæŒç»­å ç”¨è°ƒç”¨æ–¹èµ„æºï¼Œè¿˜ä¼šå¯¹è°ƒç”¨é“¾è·¯çš„ç¨³å®šæ€§äº§ç”Ÿè¾ƒé«˜è¦æ±‚ã€‚
äº‘å‡½æ•° SCF æä¾›äº†ä¸€ç§å…¨æ–°çš„å‡½æ•°è¿è¡Œæœºåˆ¶ï¼Œæ‚¨å¯é€šè¿‡ SCF æä¾›çš„å‡½æ•°å¼‚æ­¥æ‰§è¡Œæ¨¡å¼ï¼Œæå‡æ‰§è¡Œè¶…æ—¶æ—¶é—´ä¸Šé™å’Œè§£å†³ç°æœ‰è¿è¡Œæœºåˆ¶çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ“ä½œæ­¥éª¤-1&quot;&gt;&lt;a href=&quot;#%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4-1&quot; aria-label=&quot;æ“ä½œæ­¥éª¤ 1 permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;æ“ä½œæ­¥éª¤&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;ç™»å½• &lt;a href=&quot;https://console.cloud.tencent.com/scf/list?rid=16&amp;amp;ns=default&quot;&gt;äº‘å‡½æ•°æ§åˆ¶å°&lt;/a&gt;ï¼Œå•å‡»å·¦ä¾§å¯¼èˆªæ çš„ã€å‡½æ•°æœåŠ¡ã€‘ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ä¸»ç•Œé¢ä¸Šæ–¹é€‰æ‹©æœŸæœ›åˆ›å»ºå‡½æ•°çš„åœ°åŸŸï¼Œå¹¶å•å‡»ã€æ–°å»ºã€‘ï¼Œè¿›å…¥å‡½æ•°åˆ›å»ºæµç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;é€‰æ‹©ä½¿ç”¨ã€ç©ºç™½å‡½æ•°ã€‘æˆ–é€‰æ‹©ä½¿ç”¨ã€å‡½æ•°æ¨¡æ¿ã€‘æ¥æ–°å»ºå‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨â€œå‡½æ•°é…ç½®â€é¡µé¢ï¼Œå±•å¼€ã€é«˜çº§è®¾ç½®ã€‘ï¼Œå¹¶å‹¾é€‰ã€å¼‚æ­¥æ‰§è¡Œã€‘ã€‚&lt;/li&gt;
&lt;li&gt;å•å‡»ã€å®Œæˆã€‘å³å¯åˆ›å»ºå‡½æ•°ã€‚  &lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;è¿è¡Œæœºåˆ¶åŸç†&quot;&gt;&lt;a href=&quot;#%E8%BF%90%E8%A1%8C%E6%9C%BA%E5%88%B6%E5%8E%9F%E7%90%86&quot; aria-label=&quot;è¿è¡Œæœºåˆ¶åŸç† permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;è¿è¡Œæœºåˆ¶åŸç†&lt;/h2&gt;
&lt;p&gt;å‡½æ•°å¯ç”¨å¼‚æ­¥æ‰§è¡Œåï¼Œé€šè¿‡åŒæ­¥ï¼ˆä¾‹å¦‚ API ç½‘å…³ï¼‰æˆ–å¼‚æ­¥ï¼ˆä¾‹å¦‚ COSã€CKafkaã€Timer ç­‰ï¼‰è°ƒç”¨ç«¯è¿›è¡Œäº‹ä»¶è°ƒç”¨ï¼Œå‡½æ•°å°†ä»¥å¼‚æ­¥æ‰§è¡Œæ¨¡å¼å“åº”äº‹ä»¶ã€‚
å³å®Œæˆäº‹ä»¶è°ƒåº¦åç«‹å³è¿”å›äº‹ä»¶çš„è°ƒç”¨æ ‡è¯† RequestIdï¼Œå¹¶ç»“æŸè°ƒç”¨æ“ä½œï¼Œè°ƒç”¨ç«¯æ— éœ€é˜»å¡ç­‰å¾…ã€‚è¿”å› RequestId çš„åŒæ—¶ï¼Œè°ƒç”¨å¼•æ“å°†å¹¶è¡Œä¸‹å‘äº‹ä»¶åˆ°å‡½æ•°è¿è¡Œæ—¶ï¼Œå¼€å¯å‡½æ•°é€»è¾‘æ‰§è¡Œã€‚è¿›å…¥å¼‚æ­¥æ‰§è¡ŒçŠ¶æ€åï¼Œæ‰§è¡Œæ—¥å¿—å°†å®æ—¶ä¸ŠæŠ¥è‡³æ—¥å¿—æœåŠ¡ï¼Œæä¾›å¯¹å¼‚æ­¥æ‰§è¡Œäº‹ä»¶è¿è¡Œæƒ…å†µçš„å®æ—¶åé¦ˆã€‚å…¶åŸç†å¦‚å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://main.qcloudimg.com/raw/36557e028090175f79b879ac0ad6f66b.png&quot;/&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„äº‹é¡¹ï¼š&lt;/p&gt;

&lt;/blockquote&gt;
&lt;h2 id=&quot;çŠ¶æ€è¿½è¸ªåŸç†&quot;&gt;&lt;a href=&quot;#%E7%8A%B6%E6%80%81%E8%BF%BD%E8%B8%AA%E5%8E%9F%E7%90%86&quot; aria-label=&quot;çŠ¶æ€è¿½è¸ªåŸç† permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;çŠ¶æ€è¿½è¸ªåŸç†&lt;/h2&gt;
&lt;p&gt;å‡½æ•°é«˜çº§é…ç½®å¯ç”¨çŠ¶æ€è¿½è¸ªåï¼Œé’ˆå¯¹å¼‚æ­¥æ‰§è¡Œçš„äº‹ä»¶ï¼Œå°†å¼€å§‹è®°å½•å¹¶ä¸ŠæŠ¥äº‹ä»¶å“åº”çš„å®æ—¶çŠ¶æ€ï¼Œå¹¶æä¾›äº‹ä»¶çŠ¶æ€çš„ç»Ÿè®¡ã€æŸ¥è¯¢åŠç»ˆæ­¢ç­‰äº‹ä»¶ç®¡ç†ç›¸å…³æœåŠ¡ã€‚å…¶åŸç†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
&lt;img src=&quot;https://main.qcloudimg.com/raw/d06476734d27d3308783e78af85897a2.png&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;ç›¸å…³æ¥å£&quot;&gt;&lt;a href=&quot;#%E7%9B%B8%E5%85%B3%E6%8E%A5%E5%8F%A3&quot; aria-label=&quot;ç›¸å…³æ¥å£ permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;ç›¸å…³æ¥å£&lt;/h2&gt;
&lt;p&gt;äº‹ä»¶ç®¡ç†ç›¸å…³æœåŠ¡ API é€šè¿‡äº‘ API çš„æ–¹å¼æä¾›ï¼Œè¯¦æƒ…å‚è€ƒ&lt;a href=&quot;https://cloud.tencent.com/document/product/583/51519&quot;&gt;å®˜ç½‘&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;æ¸©é¦¨æç¤º&quot;&gt;&lt;a href=&quot;#%E6%B8%A9%E9%A6%A8%E6%8F%90%E7%A4%BA&quot; aria-label=&quot;æ¸©é¦¨æç¤º permalink&quot; class=&quot;anchor&quot;&gt;&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; version=&quot;1.1&quot; viewbox=&quot;0 0 16 16&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;æ¸©é¦¨æç¤º&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;äº§ç”Ÿçš„äº‹ä»¶çŠ¶æ€æ•°æ®ä»…ä¿ç•™3å¤©ï¼Œå°†ä»¥3å¤©ä¸ºæ—¶é—´çª—å£æ»‘åŠ¨æ¸…ç†ã€‚å¦‚éœ€ä¿ç•™å…¨éƒ¨è®°å½•ï¼Œåˆ™éœ€è¦å®šæœŸæ‹‰å–å¹¶ä¿å­˜è‡³è‡ªæœ‰å­˜å‚¨ã€‚&lt;/li&gt;
&lt;li&gt;å…³é—­çŠ¶æ€è¿½è¸ªåï¼Œå°†åœæ­¢æä¾›å¼‚æ­¥æ‰§è¡Œäº‹ä»¶ç›¸å…³è®°å½•ã€ç»Ÿè®¡ã€æŸ¥è¯¢ã€ç»ˆæ­¢ç­‰äº‹ä»¶ç®¡ç†ç›¸å…³æœåŠ¡ï¼Œå·²äº§ç”Ÿçš„äº‹ä»¶çŠ¶æ€æ•°æ®å°†åœ¨3å¤©å†…æ¸…ç©ºã€‚&lt;/li&gt;
&lt;li&gt;å¼‚æ­¥è¿è¡Œå‡½æ•°çš„äº‹ä»¶è°ƒç”¨ QPS é™åˆ¶ä¸ºå¹¶å‘æ•°é‡çš„ååˆ†ä¹‹ä¸€ï¼Œè¶…å‡ºéƒ¨åˆ†å°†è¢«é™åˆ¶ï¼Œé€ æˆå“åº”å¤±è´¥ã€‚&lt;/li&gt;
&lt;li&gt;ç”±äºè¯·æ±‚ QPS è¶…é™ã€è´¦æˆ·æ¬ è´¹ç­‰åŸå› ï¼Œäº‹ä»¶è°ƒç”¨å°†ç”±è°ƒåº¦å¼•æ“ç›´æ¥è¿”å›å¯¹åº”å¼‚å¸¸ï¼Œä¸ä¼šç”Ÿæˆäº‹ä»¶çŠ¶æ€è®°å½•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;
&lt;p&gt;æ¬¢è¿è®¿é—®ï¼š&lt;a href=&quot;https://serverlesscloud.cn/&quot;&gt;Serverless ä¸­æ–‡ç½‘&lt;/a&gt;ï¼Œæ‚¨å¯ä»¥åœ¨ &lt;a href=&quot;https://serverlesscloud.cn/best-practice&quot;&gt;æœ€ä½³å®è·µ&lt;/a&gt; é‡Œä½“éªŒæ›´å¤šå…³äº Serverless åº”ç”¨çš„å¼€å‘ï¼&lt;/p&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>2481877ac2cff62af8595e54c1af3ece</guid>
<title>ä¸€ä¸ª Golang ç‰ˆæœ¬ XSS è¿‡æ»¤æ¨¡å—</title>
<link>https://toutiao.io/k/dvqbquo</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;article class=&quot;markdown-body entry-content container-lg&quot; itemprop=&quot;text&quot;&gt;&lt;p&gt;&lt;a href=&quot;https://godoc.org/github.com/feiin/go-xss&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/5bb3441aa4a8749b7c48dff5c13111d8cbe9d48287e271daf903ba1aea68774e/68747470733a2f2f676f646f632e6f72672f6769746875622e636f6d2f666569696e2f676f2d7873733f7374617475732e737667&quot; alt=&quot;GoDoc&quot; data-canonical-src=&quot;https://godoc.org/github.com/feiin/go-xss?status.svg&quot;/&gt;&lt;/a&gt;
&lt;a href=&quot;https://travis-ci.org/feiin/go-xss&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/d9f09b6c5b5b400cce1292bd54b41d6f3a2cc24c3c31a8136fd229a08ef3722d/68747470733a2f2f7472617669732d63692e6f72672f666569696e2f676f2d7873732e7376673f6272616e63683d6d61696e&quot; alt=&quot;Build Status&quot; data-canonical-src=&quot;https://travis-ci.org/feiin/go-xss.svg?branch=main&quot;/&gt;&lt;/a&gt;
&lt;a href=&quot;https://goreportcard.com/report/github.com/feiin/go-xss&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/5a99ba2e6a459fad08c084351c013241ea0b4a1e0b6ecaed1a323a14d54e2357/68747470733a2f2f676f7265706f7274636172642e636f6d2f62616467652f6769746875622e636f6d2f666569696e2f676f2d787373&quot; alt=&quot;Go Report Card&quot; data-canonical-src=&quot;https://goreportcard.com/badge/github.com/feiin/go-xss&quot;/&gt;&lt;/a&gt;
&lt;a href=&quot;https://coveralls.io/github/feiin/go-xss?branch=main&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/0c70cbc425855c26a56d24d0f173db2f5073625220b9d6704ae2c5200ec0f3ef/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f666569696e2f676f2d7873732f62616467652e7376673f6272616e63683d6d61696e&quot; alt=&quot;Coverage Status&quot; data-canonical-src=&quot;https://coveralls.io/repos/github/feiin/go-xss/badge.svg?branch=main&quot;/&gt;&lt;/a&gt;
&lt;a href=&quot;https://github.com/feiin/go-xss/blob/main/LICENSE&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/1ac8ef5cc788f34924cd23002b2c5a759101a11390d796b0a8ba216284f4dd70/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f666569696e2f676f2d787373&quot; alt=&quot;GitHub license&quot; data-canonical-src=&quot;https://img.shields.io/github/license/feiin/go-xss&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;&lt;a id=&quot;user-content-go-xss-æ ¹æ®ç™½åå•è¿‡æ»¤-htmlé˜²æ­¢-xss-æ”»å‡»&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#go-xss-æ ¹æ®ç™½åå•è¿‡æ»¤-htmlé˜²æ­¢-xss-æ”»å‡»&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;go-xss æ ¹æ®ç™½åå•è¿‡æ»¤ HTML(é˜²æ­¢ XSS æ”»å‡»)&lt;/h1&gt;
&lt;p&gt;go-xss is a module used to filter input from users to prevent XSS attacks&lt;/p&gt;
&lt;p&gt;go-xssæ˜¯ä¸€ä¸ªç”¨äºå¯¹ç”¨æˆ·è¾“å…¥çš„å†…å®¹è¿›è¡Œè¿‡æ»¤ï¼Œä»¥é¿å…é­å— XSS æ”»å‡»çš„æ¨¡å—ï¼ˆï¼ˆ&lt;a href=&quot;http://baike.baidu.com/view/2161269.htm&quot; rel=&quot;nofollow&quot;&gt;ä»€ä¹ˆæ˜¯ XSS æ”»å‡»ï¼Ÿ&lt;/a&gt;ï¼‰ã€‚ä¸»è¦ç”¨äºè®ºå›ã€åšå®¢ã€ç½‘ä¸Šå•†åº—ç­‰ç­‰ä¸€äº›å¯å…è®¸ç”¨æˆ·å½•å…¥é¡µé¢æ’ç‰ˆã€æ ¼å¼æ§åˆ¶ç›¸å…³çš„ HTML çš„åœºæ™¯ï¼Œxssæ¨¡å—é€šè¿‡ç™½åå•æ¥æ§åˆ¶å…è®¸çš„æ ‡ç­¾åŠç›¸å…³çš„æ ‡ç­¾å±æ€§ï¼Œå¦å¤–è¿˜æä¾›äº†ä¸€ç³»åˆ—çš„æ¥å£ä»¥ä¾¿ç”¨æˆ·æ‰©å±•ï¼Œæ¯”å…¶ä»–åŒç±»æ¨¡å—æ›´ä¸ºçµæ´»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/feiin/go-xss/blob/main/README.en.md&quot;&gt;English&lt;/a&gt; | ä¸­æ–‡æ–‡æ¡£&lt;/p&gt;
&lt;h2&gt;&lt;a id=&quot;user-content-ç‰¹æ€§&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#ç‰¹æ€§&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;ç‰¹æ€§&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;ç™½åå•æ§åˆ¶å…è®¸çš„ HTML æ ‡ç­¾åŠå„æ ‡ç­¾çš„å±æ€§&lt;/li&gt;
&lt;li&gt;é€šè¿‡è‡ªå®šä¹‰å¤„ç†å‡½æ•°ï¼Œå¯å¯¹ä»»æ„æ ‡ç­¾åŠå…¶å±æ€§è¿›è¡Œå¤„ç†&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id=&quot;user-content-æ€§èƒ½&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#æ€§èƒ½&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;æ€§èƒ½&lt;/h2&gt;
&lt;p&gt;speed: 24MB/s&lt;/p&gt;
&lt;h2&gt;&lt;a id=&quot;user-content-å®‰è£…&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#å®‰è£…&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;å®‰è£…&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;go get -u github.com/feiin/go-xss

&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;&lt;a id=&quot;user-content-ä½¿ç”¨&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#ä½¿ç”¨&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;ä½¿ç”¨&lt;/h2&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; (
    &lt;span class=&quot;pl-s&quot;&gt;&quot;github.com/feiin/go-xss&quot;&lt;/span&gt;
)


&lt;span class=&quot;pl-s1&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&quot;&amp;lt;a href=&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;javascript:alert(/xss/)&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt; title=&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;hi&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;&amp;gt;link&amp;lt;/a&amp;gt;&quot;&lt;/span&gt;

&lt;span class=&quot;pl-s1&quot;&gt;safeHtml&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;xss&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;FilterXSS&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;source&lt;/span&gt;,xss.&lt;span class=&quot;pl-smi&quot;&gt;XssOption&lt;/span&gt;{})&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-k&quot;&gt;import&lt;/span&gt; (
    &lt;span class=&quot;pl-s&quot;&gt;&quot;github.com/feiin/go-xss&quot;&lt;/span&gt;
)

&lt;span class=&quot;pl-s1&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&quot;&amp;lt;a href=&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;javascript:alert(/xss/)&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt; title=&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;hi&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;&amp;gt;link&amp;lt;/a&amp;gt;&quot;&lt;/span&gt;
&lt;span class=&quot;pl-s1&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;xss&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;NewXSS&lt;/span&gt;(xss.&lt;span class=&quot;pl-smi&quot;&gt;XssOption&lt;/span&gt;{})
&lt;span class=&quot;pl-s1&quot;&gt;safeHtml&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;x&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Process&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;source&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;a id=&quot;user-content-è‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™options&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#è‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™options&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;è‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™ï¼ˆoptions)&lt;/h2&gt;
&lt;p&gt;åœ¨è°ƒç”¨ &lt;code&gt;xss&lt;/code&gt; è¿›è¡Œè¿‡æ»¤æ—¶ï¼Œå¯é€šè¿‡optionså‚æ•°æ¥è®¾ç½®è‡ªå®šä¹‰è§„åˆ™ï¼š&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-s1&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&quot;&amp;lt;a href=&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;javascript:alert(/xss/)&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt; title=&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;hi&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;&amp;gt;link&amp;lt;/a&amp;gt;&quot;&lt;/span&gt;

&lt;span class=&quot;pl-s1&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; xss.&lt;span class=&quot;pl-smi&quot;&gt;XssOption&lt;/span&gt;{}
&lt;span class=&quot;pl-s1&quot;&gt;safeHtml&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;xss&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;FilterXSS&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;source&lt;/span&gt;,&lt;span class=&quot;pl-s1&quot;&gt;options&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;å¦‚æœä¸æƒ³æ¯æ¬¡éƒ½ä¼ å…¥ä¸€ä¸ª options å‚æ•°ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª XSS å®ä¾‹ï¼š&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-s1&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&quot;&amp;lt;a href=&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;javascript:alert(/xss/)&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt; title=&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;hi&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;&amp;gt;link&amp;lt;/a&amp;gt;&quot;&lt;/span&gt;
&lt;span class=&quot;pl-s1&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; xss.&lt;span class=&quot;pl-smi&quot;&gt;XssOption&lt;/span&gt;{}

&lt;span class=&quot;pl-s1&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;xss&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;NewXSS&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;options&lt;/span&gt;)
&lt;span class=&quot;pl-s1&quot;&gt;safeHtml&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;x&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Process&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;source&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;a id=&quot;user-content-ç™½åå•&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#ç™½åå•&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;ç™½åå•&lt;/h3&gt;
&lt;p&gt;é€šè¿‡ WhiteList æ¥æŒ‡å®šï¼Œæ ¼å¼ç±»å‹ä¸ºï¼š&lt;code&gt;map[string][]string&lt;/code&gt;ã€‚ä¸åœ¨ç™½åå•ä¸Šçš„æ ‡ç­¾å°†è¢«è¿‡æ»¤ï¼Œä¸åœ¨ç™½åå•ä¸Šçš„å±æ€§ä¹Ÿä¼šè¢«è¿‡æ»¤ã€‚ä»¥ä¸‹æ˜¯ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-c&quot;&gt;// åªå…è®¸aæ ‡ç­¾ï¼Œè¯¥æ ‡ç­¾åªå…è®¸href, title, targetè¿™ä¸‰ä¸ªå±æ€§&lt;/span&gt;
&lt;span class=&quot;pl-s1&quot;&gt;options&lt;/span&gt;.&lt;span class=&quot;pl-c1&quot;&gt;WhiteList&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;map&lt;/span&gt;[&lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt;][]&lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt; {
&lt;span class=&quot;pl-s&quot;&gt;&quot;a&quot;&lt;/span&gt;:{&lt;span class=&quot;pl-s&quot;&gt;&quot;href&quot;&lt;/span&gt;,&lt;span class=&quot;pl-s&quot;&gt;&quot;title&quot;&lt;/span&gt;,&lt;span class=&quot;pl-s&quot;&gt;&quot;target&quot;&lt;/span&gt;},
}
&lt;span class=&quot;pl-c&quot;&gt;// ä½¿ç”¨ä»¥ä¸Šé…ç½®åï¼Œä¸‹é¢çš„HTML&lt;/span&gt;
&lt;span class=&quot;pl-c&quot;&gt;// &amp;lt;a href=&quot;#&quot; onclick=&quot;hello()&quot;&amp;gt;&amp;lt;i&amp;gt;å¤§å®¶å¥½&amp;lt;/i&amp;gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
&lt;span class=&quot;pl-c&quot;&gt;// å°†è¢«è¿‡æ»¤ä¸º&lt;/span&gt;
&lt;span class=&quot;pl-c&quot;&gt;// &amp;lt;a href=&quot;#&quot;&amp;gt;å¤§å®¶å¥½&amp;lt;/a&amp;gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;é»˜è®¤ç™½åå•å‚è€ƒ &lt;code&gt;xss.GetDefaultWhiteList()&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;&lt;a id=&quot;user-content-è‡ªå®šä¹‰åŒ¹é…åˆ°æ ‡ç­¾æ—¶çš„å¤„ç†æ–¹æ³•&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#è‡ªå®šä¹‰åŒ¹é…åˆ°æ ‡ç­¾æ—¶çš„å¤„ç†æ–¹æ³•&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;è‡ªå®šä¹‰åŒ¹é…åˆ°æ ‡ç­¾æ—¶çš„å¤„ç†æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;OnTag&lt;/code&gt; æ¥æŒ‡å®šç›¸åº”çš„å¤„ç†å‡½æ•°ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è¯´æ˜ï¼š&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;onTag&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;tag&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;TagOption&lt;/span&gt;) &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt; {
&lt;span class=&quot;pl-c&quot;&gt;// tagæ˜¯å½“å‰çš„æ ‡ç­¾åç§°ï¼Œæ¯”å¦‚&amp;lt;a&amp;gt;æ ‡ç­¾ï¼Œåˆ™tagçš„å€¼æ˜¯&#x27;a&#x27;&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;// htmlæ˜¯è¯¥æ ‡ç­¾çš„HTMLï¼Œæ¯”å¦‚&amp;lt;a&amp;gt;æ ‡ç­¾ï¼Œåˆ™htmlçš„å€¼æ˜¯&#x27;&amp;lt;a&amp;gt;&#x27;&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;// optionsæ˜¯ä¸€äº›é™„åŠ çš„ä¿¡æ¯ï¼Œå…·ä½“å¦‚ä¸‹ï¼š&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;//   isWhite    booleanç±»å‹ï¼Œè¡¨ç¤ºè¯¥æ ‡ç­¾æ˜¯å¦åœ¨ç™½åå•ä¸Š&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;//   isClosing  booleanç±»å‹ï¼Œè¡¨ç¤ºè¯¥æ ‡ç­¾æ˜¯å¦ä¸ºé—­åˆæ ‡ç­¾ï¼Œæ¯”å¦‚&amp;lt;/a&amp;gt;æ—¶ä¸ºtrue&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;//   position        integerç±»å‹ï¼Œè¡¨ç¤ºå½“å‰æ ‡ç­¾åœ¨è¾“å‡ºçš„ç»“æœä¸­çš„èµ·å§‹ä½ç½®&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;//   sourcePosition  integerç±»å‹ï¼Œè¡¨ç¤ºå½“å‰æ ‡ç­¾åœ¨åŸHTMLä¸­çš„èµ·å§‹ä½ç½®&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;// å¦‚æœè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™å½“å‰æ ‡ç­¾å°†è¢«æ›¿æ¢ä¸ºè¯¥å­—ç¬¦ä¸²&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;// å¦‚æœè¿”å›nilï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„å¤„ç†æ–¹æ³•ï¼š&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;//   åœ¨ç™½åå•ä¸Šï¼š  é€šè¿‡onTagAttræ¥è¿‡æ»¤å±æ€§ï¼Œè¯¦è§ä¸‹æ–‡&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;//   ä¸åœ¨ç™½åå•ä¸Šï¼šé€šè¿‡onIgnoreTagæŒ‡å®šï¼Œè¯¦è§ä¸‹æ–‡&lt;/span&gt;
}&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;a id=&quot;user-content-è‡ªå®šä¹‰åŒ¹é…åˆ°æ ‡ç­¾çš„å±æ€§æ—¶çš„å¤„ç†æ–¹æ³•&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#è‡ªå®šä¹‰åŒ¹é…åˆ°æ ‡ç­¾çš„å±æ€§æ—¶çš„å¤„ç†æ–¹æ³•&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;è‡ªå®šä¹‰åŒ¹é…åˆ°æ ‡ç­¾çš„å±æ€§æ—¶çš„å¤„ç†æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;OnTagAttr&lt;/code&gt; æ¥æŒ‡å®šç›¸åº”çš„å¤„ç†å‡½æ•°ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è¯´æ˜ï¼š&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;OnTagAttr&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;tag&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;name&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt;,&lt;span class=&quot;pl-s1&quot;&gt;isWhiteAttr&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;bool&lt;/span&gt;) &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt; {
&lt;span class=&quot;pl-c&quot;&gt;// tagæ˜¯å½“å‰çš„æ ‡ç­¾åç§°ï¼Œæ¯”å¦‚&amp;lt;a&amp;gt;æ ‡ç­¾ï¼Œåˆ™tagçš„å€¼æ˜¯&#x27;a&#x27;&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;// nameæ˜¯å½“å‰å±æ€§çš„åç§°ï¼Œæ¯”å¦‚href=&quot;#&quot;ï¼Œåˆ™nameçš„å€¼æ˜¯&#x27;href&#x27;&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;// valueæ˜¯å½“å‰å±æ€§çš„å€¼ï¼Œæ¯”å¦‚href=&quot;#&quot;ï¼Œåˆ™valueçš„å€¼æ˜¯&#x27;#&#x27;&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;// isWhiteAttræ˜¯å¦ä¸ºç™½åå•ä¸Šçš„å±æ€§&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;// å¦‚æœè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™å½“å‰å±æ€§å€¼å°†è¢«æ›¿æ¢ä¸ºè¯¥å­—ç¬¦ä¸²&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;// å¦‚æœè¿”å›nilï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„å¤„ç†æ–¹æ³•&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;//   åœ¨ç™½åå•ä¸Šï¼š  è°ƒç”¨safeAttrValueæ¥è¿‡æ»¤å±æ€§å€¼ï¼Œå¹¶è¾“å‡ºè¯¥å±æ€§ï¼Œè¯¦è§ä¸‹æ–‡&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;//   ä¸åœ¨ç™½åå•ä¸Šï¼šé€šè¿‡onIgnoreTagAttræŒ‡å®šï¼Œè¯¦è§ä¸‹æ–‡&lt;/span&gt;
}&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;a id=&quot;user-content-è‡ªå®šä¹‰åŒ¹é…åˆ°ä¸åœ¨ç™½åå•ä¸Šçš„æ ‡ç­¾æ—¶çš„å¤„ç†æ–¹æ³•&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#è‡ªå®šä¹‰åŒ¹é…åˆ°ä¸åœ¨ç™½åå•ä¸Šçš„æ ‡ç­¾æ—¶çš„å¤„ç†æ–¹æ³•&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;è‡ªå®šä¹‰åŒ¹é…åˆ°ä¸åœ¨ç™½åå•ä¸Šçš„æ ‡ç­¾æ—¶çš„å¤„ç†æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;OnIgnoreTag&lt;/code&gt; æ¥æŒ‡å®šç›¸åº”çš„å¤„ç†å‡½æ•°ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è¯´æ˜ï¼š&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;OnIgnoreTag&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;tag&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;TagOption&lt;/span&gt;) &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt; {
&lt;span class=&quot;pl-c&quot;&gt;// å‚æ•°è¯´æ˜ä¸onTagç›¸åŒ&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;// å¦‚æœè¿”å›énilï¼Œåˆ™å½“å‰æ ‡ç­¾å°†è¢«æ›¿æ¢ä¸ºè¯¥å­—ç¬¦ä¸²&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;// å¦‚æœè¿”å›nilï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„å¤„ç†æ–¹æ³•ï¼ˆé€šè¿‡escapeæŒ‡å®šï¼Œè¯¦è§ä¸‹æ–‡ï¼‰&lt;/span&gt;
}&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;a id=&quot;user-content-è‡ªå®šä¹‰åŒ¹é…åˆ°ä¸åœ¨ç™½åå•ä¸Šçš„å±æ€§æ—¶çš„å¤„ç†æ–¹æ³•&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#è‡ªå®šä¹‰åŒ¹é…åˆ°ä¸åœ¨ç™½åå•ä¸Šçš„å±æ€§æ—¶çš„å¤„ç†æ–¹æ³•&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;è‡ªå®šä¹‰åŒ¹é…åˆ°ä¸åœ¨ç™½åå•ä¸Šçš„å±æ€§æ—¶çš„å¤„ç†æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;OnIgnoreTagAttr&lt;/code&gt; æ¥æŒ‡å®šç›¸åº”çš„å¤„ç†å‡½æ•°ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è¯´æ˜ï¼š&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;OnIgnoreTagAttr&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;tag&lt;/span&gt;,&lt;span class=&quot;pl-s1&quot;&gt;name&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt;,&lt;span class=&quot;pl-s1&quot;&gt;isWhiteAttr&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;bool&lt;/span&gt;) &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt; {
  &lt;span class=&quot;pl-c&quot;&gt;// å‚æ•°è¯´æ˜ä¸onTagAttrç›¸åŒ&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;// å¦‚æœè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™å½“å‰å±æ€§å€¼å°†è¢«æ›¿æ¢ä¸ºè¯¥å­—ç¬¦ä¸²&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;// å¦‚æœè¿”å›nilï¼Œåˆ™ä½¿ç”¨é»˜è®¤çš„å¤„ç†æ–¹æ³•ï¼ˆåˆ é™¤è¯¥å±ï¼‰&lt;/span&gt;
}&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;a id=&quot;user-content-è‡ªå®šä¹‰-html-è½¬ä¹‰å‡½æ•°&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#è‡ªå®šä¹‰-html-è½¬ä¹‰å‡½æ•°&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;è‡ªå®šä¹‰ HTML è½¬ä¹‰å‡½æ•°&lt;/h3&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;EscapeHtml&lt;/code&gt; æ¥æŒ‡å®šç›¸åº”çš„å¤„ç†å‡½æ•°ã€‚ä»¥ä¸‹æ˜¯é»˜è®¤ä»£ç  ï¼ˆä¸å»ºè®®ä¿®æ”¹ï¼‰ ï¼š&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;EscapeHTML&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt;) &lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt; {
&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;regGT&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;ReplaceAllString&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;regLT&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;ReplaceAllString&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;html&lt;/span&gt;,&lt;span class=&quot;pl-s&quot;&gt;&quot;&amp;amp;lt;&quot;&lt;/span&gt;),&lt;span class=&quot;pl-s&quot;&gt;&quot;&amp;amp;gt;&quot;&lt;/span&gt;)
}&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;a id=&quot;user-content-è‡ªå®šä¹‰æ ‡ç­¾å±æ€§å€¼çš„è½¬ä¹‰å‡½æ•°&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#è‡ªå®šä¹‰æ ‡ç­¾å±æ€§å€¼çš„è½¬ä¹‰å‡½æ•°&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;è‡ªå®šä¹‰æ ‡ç­¾å±æ€§å€¼çš„è½¬ä¹‰å‡½æ•°&lt;/h3&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;SafeAttrValue&lt;/code&gt; æ¥æŒ‡å®šç›¸åº”çš„å¤„ç†å‡½æ•°ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†è¯´æ˜ï¼š&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;SafeAttrValue&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;tag&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;name&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt;) &lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt; {
&lt;span class=&quot;pl-c&quot;&gt;// å‚æ•°è¯´æ˜ä¸onTagAttrç›¸åŒï¼ˆæ²¡æœ‰optionså‚æ•°ï¼‰&lt;/span&gt;
  &lt;span class=&quot;pl-c&quot;&gt;// è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²è¡¨ç¤ºè¯¥å±æ€§å€¼&lt;/span&gt;

}&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;a id=&quot;user-content-è‡ªå®šä¹‰-css-è¿‡æ»¤å™¨&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#è‡ªå®šä¹‰-css-è¿‡æ»¤å™¨&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;è‡ªå®šä¹‰ CSS è¿‡æ»¤å™¨&lt;/h3&gt;
&lt;p&gt;TODO&lt;/p&gt;
&lt;h2&gt;&lt;a id=&quot;user-content-å¿«æ·é…ç½®&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#å¿«æ·é…ç½®&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;å¿«æ·é…ç½®&lt;/h2&gt;
&lt;h3&gt;&lt;a id=&quot;user-content-å»æ‰ä¸åœ¨ç™½åå•ä¸Šçš„æ ‡ç­¾&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#å»æ‰ä¸åœ¨ç™½åå•ä¸Šçš„æ ‡ç­¾&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;å»æ‰ä¸åœ¨ç™½åå•ä¸Šçš„æ ‡ç­¾&lt;/h3&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;StripIgnoreTag&lt;/code&gt; æ¥è®¾ç½®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;trueï¼šå»æ‰ä¸åœ¨ç™½åå•ä¸Šçš„æ ‡ç­¾&lt;/li&gt;
&lt;li&gt;falseï¼šï¼ˆé»˜è®¤ï¼‰ï¼Œä½¿ç”¨é…ç½®çš„escapeå‡½æ•°å¯¹è¯¥æ ‡ç­¾è¿›è¡Œè½¬ä¹‰
ç¤ºä¾‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“è®¾ç½® StripIgnoreTag = trueæ—¶ï¼Œä»¥ä¸‹ä»£ç &lt;/p&gt;
&lt;pre&gt;&lt;code&gt;code:&amp;lt;script&amp;gt;alert(/xss/);&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿‡æ»¤åå°†è¾“å‡º&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;code:alert(/xss/);
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;&lt;a id=&quot;user-content-å»æ‰ä¸åœ¨ç™½åå•ä¸Šçš„æ ‡ç­¾åŠæ ‡ç­¾ä½“&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#å»æ‰ä¸åœ¨ç™½åå•ä¸Šçš„æ ‡ç­¾åŠæ ‡ç­¾ä½“&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;å»æ‰ä¸åœ¨ç™½åå•ä¸Šçš„æ ‡ç­¾åŠæ ‡ç­¾ä½“&lt;/h3&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;StripIgnoreTagBody&lt;/code&gt; æ¥è®¾ç½®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;nil&lt;/code&gt;æ—¶ï¼šï¼ˆé»˜è®¤ï¼‰ï¼Œä¸ç‰¹æ®Šå¤„ç†&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[]string{}&lt;/code&gt;ï¼š(ç©ºæ•°ç»„) å»æ‰æ‰€æœ‰ä¸åœ¨ç™½åå•ä¸Šçš„æ ‡ç­¾&lt;/li&gt;
&lt;li&gt;&lt;code&gt;[]string{&quot;tag1&quot;, &quot;tag2&quot;}&lt;/code&gt;ï¼šä»…å»æ‰æŒ‡å®šçš„ä¸åœ¨ç™½åå•ä¸Šçš„æ ‡ç­¾&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;å½“è®¾ç½® &lt;code&gt;StripIgnoreTagBody = []string{&quot;script&quot;}æ—¶ï¼Œä»¥ä¸‹ä»£ç &lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;code:&amp;lt;script&amp;gt;alert(/xss/);&amp;lt;/script&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿‡æ»¤åå°†è¾“å‡º&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;code:

&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;&lt;a id=&quot;user-content-å»æ‰-html-å¤‡æ³¨&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#å»æ‰-html-å¤‡æ³¨&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;å»æ‰ HTML å¤‡æ³¨&lt;/h2&gt;
&lt;p&gt;é€šè¿‡ &lt;code&gt;AllowCommentTag&lt;/code&gt; æ¥è®¾ç½®ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;trueï¼šä¸å¤„ç†&lt;/li&gt;
&lt;li&gt;falseï¼šï¼ˆé»˜è®¤ï¼‰ï¼Œè‡ªåŠ¨å»æ‰ HTML ä¸­çš„å¤‡æ³¨
ç¤ºä¾‹ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“è®¾ç½® &lt;code&gt;AllowCommentTag = false&lt;/code&gt; æ—¶ï¼Œä»¥ä¸‹ä»£ç &lt;/p&gt;
&lt;pre&gt;&lt;code&gt;code:&amp;lt;!-- something --&amp;gt; END
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿‡æ»¤åå°†è¾“å‡º&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;code: END
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;&lt;a id=&quot;user-content-åº”ç”¨å®ä¾‹&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#åº”ç”¨å®ä¾‹&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;åº”ç”¨å®ä¾‹&lt;/h2&gt;
&lt;h3&gt;&lt;a id=&quot;user-content-å…è®¸æ ‡ç­¾ä»¥-data-å¼€å¤´çš„å±æ€§&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#å…è®¸æ ‡ç­¾ä»¥-data-å¼€å¤´çš„å±æ€§&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;å…è®¸æ ‡ç­¾ä»¥ data-å¼€å¤´çš„å±æ€§&lt;/h3&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-s1&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&quot;&amp;lt;div a=&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;1&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt; b=&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;2&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt; data-a=&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;3&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt; data-b=&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;4&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;&amp;gt;hello&amp;lt;/div&amp;gt;&quot;&lt;/span&gt;;

&lt;span class=&quot;pl-s1&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;xss&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;FilterXSS&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;source&lt;/span&gt;,xss.&lt;span class=&quot;pl-smi&quot;&gt;XssOption&lt;/span&gt;{
&lt;span class=&quot;pl-c1&quot;&gt;OnIgnoreTagAttr&lt;/span&gt;: &lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;tag&lt;/span&gt;,&lt;span class=&quot;pl-s1&quot;&gt;name&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt;,&lt;span class=&quot;pl-s1&quot;&gt;isWhiteAttr&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;bool&lt;/span&gt;) &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt; {
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;len&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;name&lt;/span&gt;)&lt;span class=&quot;pl-c1&quot;&gt;&amp;gt;=&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;name&lt;/span&gt;[&lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;:&lt;span class=&quot;pl-c1&quot;&gt;5&lt;/span&gt;] &lt;span class=&quot;pl-c1&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&quot;data-&quot;&lt;/span&gt; {
&lt;span class=&quot;pl-s1&quot;&gt;ret&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&quot;=&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;&quot;&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;xss&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;EscapeAttrValue&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;value&lt;/span&gt;)&lt;span class=&quot;pl-c1&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;pl-s&quot;&gt;&quot;&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;pl-s1&quot;&gt;ret&lt;/span&gt;
}
&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;
},
})
&lt;span class=&quot;pl-s1&quot;&gt;fmt&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Printf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&quot;%s&lt;span class=&quot;pl-cce&quot;&gt;\n&lt;/span&gt;convert to:&lt;span class=&quot;pl-cce&quot;&gt;\n&lt;/span&gt;%s&quot;&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;source&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;html&lt;/span&gt;);&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿è¡Œç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;div a=&quot;1&quot; b=&quot;2&quot; data-a=&quot;3&quot; data-b=&quot;4&quot;&amp;gt;hello&amp;lt;/div&amp;gt;
convert to:
&amp;lt;div data-a=&quot;3&quot; data-b=&quot;4&quot;&amp;gt;hello&amp;lt;/div&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;å…è®¸åç§°ä»¥ x-å¼€å¤´çš„æ ‡ç­¾&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;source := &quot;&amp;lt;x&amp;gt;&amp;lt;x-1&amp;gt;he&amp;lt;x-2 checked&amp;gt;&amp;lt;/x-2&amp;gt;wwww&amp;lt;/x-1&amp;gt;&amp;lt;a&amp;gt;&quot;;

html := xss.FilterXSS(source,xss.XssOption{
OnIgnoreTag: func(tag, html string, options xss.TagOption) *string {
if len(tag)&amp;gt;=2 &amp;amp;&amp;amp; tag[0:2] == &quot;x-&quot; {
return &amp;amp;html;
}
return nil
},
})
fmt.Printf(&quot;%s\nconvert to:\n%s&quot;, source, html);

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;è¿è¡Œç»“æœ&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;x&amp;gt;&amp;lt;x-1&amp;gt;he&amp;lt;x-2 checked&amp;gt;&amp;lt;/x-2&amp;gt;wwww&amp;lt;/x-1&amp;gt;&amp;lt;a&amp;gt;
convert to:
&amp;amp;lt;x&amp;amp;gt;&amp;lt;x-1&amp;gt;he&amp;lt;x-2 checked&amp;gt;&amp;lt;/x-2&amp;gt;wwww&amp;lt;/x-1&amp;gt;&amp;lt;a&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;&lt;a id=&quot;user-content-åˆ†æ-html-ä»£ç ä¸­çš„å›¾ç‰‡åˆ—è¡¨&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#åˆ†æ-html-ä»£ç ä¸­çš„å›¾ç‰‡åˆ—è¡¨&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;åˆ†æ HTML ä»£ç ä¸­çš„å›¾ç‰‡åˆ—è¡¨&lt;/h3&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-s1&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&quot;&amp;lt;img src=&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;img1&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;&amp;gt;a&amp;lt;img src=&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;img2&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;&amp;gt;b&amp;lt;img src=&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;img3&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;&amp;gt;c&amp;lt;img src=&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;img4&lt;span class=&quot;pl-cce&quot;&gt;\&quot;&lt;/span&gt;&amp;gt;d&quot;&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;list&lt;/span&gt; []&lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt;
&lt;span class=&quot;pl-s1&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;xss&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;FilterXSS&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;source&lt;/span&gt;,xss.&lt;span class=&quot;pl-smi&quot;&gt;XssOption&lt;/span&gt;{
&lt;span class=&quot;pl-c1&quot;&gt;OnTagAttr&lt;/span&gt;: &lt;span class=&quot;pl-k&quot;&gt;func&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;tag&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;name&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt; ,&lt;span class=&quot;pl-s1&quot;&gt;isWhiteAttr&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;bool&lt;/span&gt;) &lt;span class=&quot;pl-c1&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt; {
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;tag&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&quot;img&quot;&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&quot;src&quot;&lt;/span&gt; {
&lt;span class=&quot;pl-s1&quot;&gt;list&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;append&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;list&lt;/span&gt;,&lt;span class=&quot;pl-s1&quot;&gt;value&lt;/span&gt;)
}
&lt;span class=&quot;pl-k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;nil&lt;/span&gt;
},
})
&lt;span class=&quot;pl-s1&quot;&gt;fmt&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Printf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&quot;image list:&lt;span class=&quot;pl-cce&quot;&gt;\n&lt;/span&gt;%s&quot;&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;strings&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Join&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;list&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&quot;,&quot;&lt;/span&gt;));&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿è¡Œç»“æœï¼š&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-s1&quot;&gt;image&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;list&lt;/span&gt;:
&lt;span class=&quot;pl-s1&quot;&gt;img1&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;img2&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;img3&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;img4&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;a id=&quot;user-content-å»é™¤-html-æ ‡ç­¾åªä¿ç•™æ–‡æœ¬å†…å®¹&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#å»é™¤-html-æ ‡ç­¾åªä¿ç•™æ–‡æœ¬å†…å®¹&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;å»é™¤ HTML æ ‡ç­¾ï¼ˆåªä¿ç•™æ–‡æœ¬å†…å®¹ï¼‰&lt;/h3&gt;
&lt;div class=&quot;highlight highlight-source-go&quot;&gt;&lt;pre&gt;&lt;span class=&quot;pl-s1&quot;&gt;source&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&quot;&amp;lt;strong&amp;gt;hello&amp;lt;/strong&amp;gt;&amp;lt;script&amp;gt;alert(/xss/);&amp;lt;/script&amp;gt;end&quot;&lt;/span&gt;
&lt;span class=&quot;pl-s1&quot;&gt;html&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;pl-s1&quot;&gt;xss&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;FilterXSS&lt;/span&gt;(&lt;span class=&quot;pl-s1&quot;&gt;source&lt;/span&gt;,xss.&lt;span class=&quot;pl-smi&quot;&gt;XssOption&lt;/span&gt;{
&lt;span class=&quot;pl-c1&quot;&gt;WhiteList&lt;/span&gt;:&lt;span class=&quot;pl-k&quot;&gt;map&lt;/span&gt;[&lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt;][]&lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt;{},  &lt;span class=&quot;pl-c&quot;&gt;// // empty, means filter out all tags&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;StripIgnoreTag&lt;/span&gt;:&lt;span class=&quot;pl-c1&quot;&gt;true&lt;/span&gt;, &lt;span class=&quot;pl-c&quot;&gt;// filter out all HTML not in the whitelist&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;StripIgnoreTagBody&lt;/span&gt;:[]&lt;span class=&quot;pl-smi&quot;&gt;string&lt;/span&gt;{&lt;span class=&quot;pl-s&quot;&gt;&quot;script&quot;&lt;/span&gt;}, &lt;span class=&quot;pl-c&quot;&gt;// the script tag is a special case, we need&lt;/span&gt;
})
&lt;span class=&quot;pl-s1&quot;&gt;fmt&lt;/span&gt;.&lt;span class=&quot;pl-en&quot;&gt;Printf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&quot;text: %s&quot;&lt;/span&gt;, &lt;span class=&quot;pl-s1&quot;&gt;html&lt;/span&gt;);&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;è¿è¡Œç»“æœï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;text: helloend

&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;&lt;a id=&quot;user-content-inspirations&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#inspirations&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;Inspirations&lt;/h2&gt;

&lt;h2&gt;&lt;a id=&quot;user-content-license&quot; class=&quot;anchor&quot; aria-hidden=&quot;true&quot; href=&quot;#license&quot;&gt;&lt;svg class=&quot;octicon octicon-link&quot; viewbox=&quot;0 0 16 16&quot; version=&quot;1.1&quot; aria-hidden=&quot;true&quot;&gt;&lt;path fill-rule=&quot;evenodd&quot; d=&quot;M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z&quot;/&gt;&lt;/svg&gt;&lt;/a&gt;License&lt;/h2&gt;
&lt;p&gt;MIT&lt;/p&gt;
&lt;/article&gt;
      &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>066e02a05cbdb11b34700efc69738bcc</guid>
<title>ä¸‰ä¸‡å­—ï¼ŒSpark å­¦ä¹ ç¬”è®°</title>
<link>https://toutiao.io/k/wjp0vit</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;span&gt;Spark åŸºç¡€&lt;/span&gt;&lt;span/&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Sparkç‰¹æ€§&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Sparkä½¿ç”¨ç®€ç»ƒä¼˜é›…çš„Scalaè¯­è¨€ç¼–å†™ï¼ŒåŸºäºScalaæä¾›äº†äº¤äº’å¼ç¼–ç¨‹ä½“éªŒï¼ŒåŒæ—¶æä¾›å¤šç§æ–¹ä¾¿æ˜“ç”¨çš„APIã€‚Sparkéµå¾ªâ€œä¸€ä¸ªè½¯ä»¶æ ˆæ»¡è¶³ä¸åŒåº”ç”¨åœºæ™¯â€çš„è®¾è®¡ç†å¿µï¼Œé€æ¸å½¢æˆäº†ä¸€å¥—å®Œæ•´çš„ç”Ÿæ€ç³»ç»Ÿï¼ˆåŒ…æ‹¬ Sparkæä¾›å†…å­˜è®¡ç®—æ¡†æ¶ã€SQLå³å¸­æŸ¥è¯¢ï¼ˆSpark Â SQLï¼‰ã€æµå¼è®¡ç®—ï¼ˆSpark Â Streamingï¼‰ã€æœºå™¨å­¦ä¹ ï¼ˆMLlibï¼‰ã€å›¾è®¡ç®—ï¼ˆGraph Xï¼‰ç­‰ï¼‰ï¼ŒSparkå¯ä»¥éƒ¨ç½²åœ¨yarnèµ„æºç®¡ç†å™¨ä¸Šï¼Œæä¾›ä¸€ç«™å¼å¤§æ•°æ®è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥åŒæ—¶æ”¯æŒæ‰¹å¤„ç†ã€æµå¤„ç†ã€äº¤äº’å¼æŸ¥è¯¢ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;MapReduceè®¡ç®—æ¨¡å‹å»¶è¿Ÿé«˜ï¼Œæ— æ³•èƒœä»»å®æ—¶ã€å¿«é€Ÿè®¡ç®—çš„éœ€æ±‚ï¼Œå› è€Œåªé€‚ç”¨äºç¦»çº¿åœºæ™¯ï¼ŒSparkå€Ÿé‰´MapReduceè®¡ç®—æ¨¡å¼ï¼Œä½†ä¸ä¹‹ç›¸æ¯”æœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜åŠ¿ï¼ˆå¿«ã€æ˜“ç”¨ã€å…¨é¢ï¼‰ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;Sparkæä¾›æ›´å¤šç§æ•°æ®é›†æ“ä½œç±»å‹ï¼Œç¼–ç¨‹æ¨¡å‹æ¯”MapReduceæ›´åŠ çµæ´»ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Sparkæä¾›å†…å­˜è®¡ç®—ï¼Œå°†è®¡ç®—ç»“æœç›´æ¥æ”¾åœ¨å†…å­˜ä¸­ï¼Œå‡å°‘äº†è¿­ä»£è®¡ç®—çš„IOå¼€é”€ï¼Œæœ‰æ›´é«˜æ•ˆçš„è¿ç®—æ•ˆç‡ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;SparkåŸºäºDAGçš„ä»»åŠ¡è°ƒåº¦æ‰§è¡Œæœºåˆ¶ï¼Œè¿­ä»£æ•ˆç‡æ›´é«˜ï¼›åœ¨å®é™…å¼€å‘ä¸­MapReduceéœ€è¦ç¼–å†™å¾ˆå¤šåº•å±‚ä»£ç ï¼Œä¸å¤Ÿé«˜æ•ˆï¼ŒSparkæä¾›äº†å¤šç§é«˜å±‚æ¬¡ã€ç®€æ´çš„APIå®ç°ç›¸åŒåŠŸèƒ½çš„åº”ç”¨ç¨‹åºï¼Œå®ç°ä»£ç é‡æ¯”MapReduceå°‘å¾ˆå¤šã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Sparkä½œä¸ºè®¡ç®—æ¡†æ¶åªæ˜¯å–ä»£äº†Hadoopç”Ÿæ€ç³»ç»Ÿä¸­çš„MapReduceè®¡ç®—æ¡†æ¶ï¼Œå®ƒä»»éœ€è¦HDFSæ¥å®ç°æ•°æ®çš„åˆ†å¸ƒå¼å­˜å‚¨ï¼ŒHadoopä¸­çš„å…¶ä»–ç»„ä»¶ä¾ç„¶åœ¨ä¼ä¸šå¤§æ•°æ®ç³»ç»Ÿä¸­å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;Sparkçš„ä¸è¶³ï¼š&lt;/strong&gt;è™½ç„¶Sparkå¾ˆå¿«ï¼Œä½†ç°åœ¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä»ç„¶ä¸å°½äººæ„ï¼Œæ— è®ºæ‰©å±•æ€§ã€ç¨³å®šæ€§ã€ç®¡ç†æ€§ç­‰æ–¹é¢éƒ½éœ€è¦è¿›ä¸€æ­¥å¢å¼ºï¼›åŒæ—¶Sparkåœ¨æµå¤„ç†é¢†åŸŸèƒ½åŠ›æœ‰é™ï¼Œå¦‚æœè¦å®ç°äºšç§’çº§æˆ–å¤§å®¹é‡çš„æ•°æ®è·å–æˆ–å¤„ç†éœ€è¦å…¶ä»–æµå¤„ç†äº§å“ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Clouderaæ—¨åœ¨è®©Sparkæµæ•°æ®æŠ€æœ¯é€‚ç”¨äº80%çš„ä½¿ç”¨åœºåˆï¼Œå°±è€ƒè™‘åˆ°è¿™ä¸€ç¼ºé™·ï¼Œåœ¨å®æ—¶åˆ†æï¼ˆè€Œéç®€å•æ•°æ®è¿‡æ»¤æˆ–åˆ†å‘ï¼‰åœºæ™¯ä¸­ï¼Œå¾ˆå¤šä»¥å‰ä½¿ç”¨S4æˆ–Stormç­‰æµå¼å¤„ç†å¼•æ“çš„å®ç°å·²ç»é€æ¸è¢«Kafka+Spark Streamingä»£æ›¿ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Hadoopç°åœ¨åˆ†ä¸‰å—HDFS/MR/YARNï¼ŒSparkçš„æµè¡Œå°†é€æ¸è®©MapReduceã€Tezèµ°è¿›åšç‰©é¦†ï¼›Sparkåªæ˜¯ä½œä¸ºä¸€ä¸ªè®¡ç®—å¼•æ“æ¯”MRçš„æ€§èƒ½è¦å¥½ï¼Œä½†å®ƒçš„å­˜å‚¨å’Œè°ƒåº¦æ¡†æ¶è¿˜æ˜¯ä¾èµ–äºHDFS/YARNï¼ŒSparkä¹Ÿæœ‰è‡ªå·±çš„è°ƒåº¦æ¡†æ¶ï¼Œä½†ä¸æˆç†Ÿï¼ŒåŸºæœ¬ä¸å¯å•†ç”¨ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Sparkéƒ¨ç½²(on Yarn)&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;YARNå®ç°äº†ä¸€ä¸ªé›†ç¾¤å¤šä¸ªæ¡†æ¶â€ï¼Œå³åœ¨ä¸€ä¸ªé›†ç¾¤ä¸Šéƒ¨ç½²ä¸€ä¸ªç»Ÿä¸€çš„èµ„æºè°ƒåº¦ç®¡ç†æ¡†æ¶ï¼Œå¹¶éƒ¨ç½²å…¶ä»–å„ç§è®¡ç®—æ¡†æ¶ï¼ŒYARNä¸ºè¿™äº›è®¡ç®—æ¡†æ¶æä¾›ç»Ÿä¸€çš„èµ„æºè°ƒåº¦ç®¡ç†æœåŠ¡ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ ¹æ®å„ç§è®¡ç®—æ¡†æ¶çš„è´Ÿè½½éœ€æ±‚è°ƒæ•´å„è‡ªå ç”¨çš„èµ„æºï¼Œå®ç°é›†ç¾¤èµ„æºå…±äº«å’Œèµ„æºå¼¹æ€§æ”¶ç¼©ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¹¶ä¸”ï¼ŒYARNå®ç°é›†ç¾¤ä¸Šçš„ä¸åŒåº”ç”¨è´Ÿè½½æ··æ­ï¼Œæœ‰æ•ˆæé«˜äº†é›†ç¾¤çš„åˆ©ç”¨ç‡ï¼›ä¸åŒè®¡ç®—æ¡†æ¶å¯ä»¥å…±äº«åº•å±‚å­˜å‚¨ï¼Œé¿å…äº†æ•°æ®é›†è·¨é›†ç¾¤ç§»åŠ¨ ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œä½¿ç”¨Spark on Yarn æ¨¡å¼éƒ¨ç½²ï¼Œé…ç½®on yarnæ¨¡å¼åªéœ€è¦ä¿®æ”¹å¾ˆå°‘é…ç½®ï¼Œä¹Ÿä¸ç”¨ä½¿ç”¨å¯åŠ¨sparké›†ç¾¤å‘½ä»¤ï¼Œéœ€è¦æäº¤ä»»åŠ¡æ—¶å€™é¡»æŒ‡å®šåœ¨yarnä¸Šã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Sparkè¿è¡Œéœ€è¦Scalaè¯­è¨€ï¼Œé¡»ä¸‹è½½Scalaå’ŒSparkå¹¶è§£å‹åˆ°å®¶ç›®å½•ï¼Œè®¾ç½®å½“å‰ç”¨æˆ·çš„ç¯å¢ƒå˜é‡ï¼ˆ~/.bash_profileï¼‰ï¼Œå¢åŠ SCALA_HOMEå’ŒSPARK_HOMEè·¯å¾„å¹¶ç«‹å³ç”Ÿæ•ˆï¼›å¯åŠ¨scalaå‘½ä»¤å’Œspark-shellå‘½ä»¤éªŒè¯æ˜¯å¦æˆåŠŸï¼›Sparkçš„é…ç½®æ–‡ä»¶ä¿®æ”¹æŒ‰ç…§å®˜ç½‘æ•™ç¨‹ä¸å¥½ç†è§£ï¼Œè¿™é‡Œå®Œæˆçš„é…ç½®å‚ç…§åšå®¢åŠè°ƒè¯•ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Sparkçš„éœ€è¦ä¿®æ”¹ä¸¤ä¸ªé…ç½®æ–‡ä»¶ï¼šspark-env.shå’Œspark-default.confï¼Œå‰è€…éœ€è¦æŒ‡æ˜Hadoopçš„hdfså’Œyarnçš„é…ç½®æ–‡ä»¶è·¯å¾„åŠSpark.master.hoståœ°å€ï¼Œåè€…éœ€è¦æŒ‡æ˜jaråŒ…åœ°å€ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;spark-env.shé…ç½®æ–‡ä»¶ä¿®æ”¹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â JAVA_HOME=/home/stream/jdk1.8.0_144&lt;br/&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â SCALA_HOME=/home/stream/scala-2.11.12&lt;br/&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â HADOOP_HOME=/home/stream/hadoop-3.0.3&lt;br/&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â HADOOP_CONF_DIR=/home/stream/hadoop-3.0.3/etc/hadoop&lt;br/&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â YARN_CONF_DIR=/home/stream/hadoop-3.0.3/etc/hadoop&lt;br/&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â SPARK_MASTER_HOST=xx&lt;br/&gt;&lt;br/&gt;&lt;span&gt;export&lt;/span&gt;Â SPARK_LOCAL_IP=xxx&lt;br/&gt;&lt;br/&gt;spark-default.confé…ç½®ä¿®æ”¹å¦‚ä¸‹ï¼š&lt;br/&gt;&lt;br/&gt;//å¢åŠ jaråŒ…åœ°å€&lt;br/&gt;&lt;br/&gt;spark.yarn.jars=hdfs://1xxx/spark_jars/*&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯¥è®¾ç½®è¡¨æ˜å°†jaråœ°å€å®šä¹‰åœ¨hdfsä¸Šï¼Œå¿…é¡»å°†~/spark/jarsè·¯å¾„ä¸‹æ‰€æœ‰çš„jaråŒ…éƒ½ä¸Šä¼ åˆ°hdfsçš„/spark_jars/è·¯å¾„(hadoop hdfs â€“put ~/spark/jars/*)ï¼Œå¦åˆ™ä¼šæŠ¥é”™æ— æ³•æ‰¾åˆ°ç¼–è¯‘jaråŒ…é”™è¯¯ï¼›&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Sparkå¯åŠ¨å’ŒéªŒè¯&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›´æ¥æ— å‚æ•°å¯åŠ¨./spark-shell ï¼Œè¿è¡Œçš„æ˜¯æœ¬åœ°æ¨¡å¼ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯åŠ¨./spark-shell â€“master yarnï¼Œè¿è¡Œçš„æ˜¯on yarnæ¨¡å¼ï¼Œå‰ææ˜¯yarné…ç½®æˆåŠŸå¹¶å¯ç”¨ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨hdfsæ–‡ä»¶ç³»ç»Ÿä¸­åˆ›å»ºæ–‡ä»¶README.mdï¼Œå¹¶è¯»å…¥RDDä¸­ï¼Œä½¿ç”¨RDDè‡ªå¸¦çš„å‚æ•°è½¬æ¢ï¼ŒRDDé»˜è®¤æ¯è¡Œä¸ºä¸€ä¸ªå€¼ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨./spark-shell --master Â yarnå¯åŠ¨spark åè¿è¡Œå‘½ä»¤ï¼šval textFile=sc.textFile(â€œREADME.mdâ€)è¯»å–hdfsä¸Šçš„README.mdæ–‡ä»¶åˆ°RDDï¼Œå¹¶ä½¿ç”¨å†…ç½®å‡½æ•°æµ‹è¯•å¦‚ä¸‹ï¼Œè¯´æ˜spark on yarné…ç½®æˆåŠŸ.&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å¸¸è§é—®é¢˜&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å¯åŠ¨spark-shellæ—¶å€™ï¼ŒæŠ¥é”™Yarn-site.xmlä¸­é…ç½®çš„æœ€å¤§åˆ†é…å†…å­˜ä¸è¶³ï¼Œè°ƒå¤§è¿™ä¸ªå€¼ä¸º2048Mï¼Œéœ€é‡å¯yarnåç”Ÿæ•ˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è®¾ç½®çš„hdfsåœ°å€å†²çªï¼Œhdfsçš„é…ç½®æ–‡ä»¶ä¸­hdfs-site.xmlè®¾ç½®æ²¡æœ‰å¸¦ç«¯å£ï¼Œä½†æ˜¯spark-default.confä¸­çš„spark.yarn.jarså€¼å¸¦æœ‰ç«¯å£ï¼Œä¿®æ”¹spark-default.confçš„é…ç½®åœ°å€åŒå‰è€…ä¸€è‡´ï¼š&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;SparkåŸºæœ¬åŸç†&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¤§æ•°æ®å¤„ç†ä¸»è¦åŒ…æ‹¬ä»¥ä¸‹ä¸‰ä¸ªç±»å‹ï¼šå¤æ‚çš„æ‰¹é‡æ•°æ®å¤„ç†ï¼šé€šå¸¸æ—¶é—´è·¨åº¦åœ¨æ•°ååˆ†é’Ÿåˆ°æ•°å°æ—¶ä¹‹é—´ï¼›åŸºäºå†å²æ•°æ®çš„äº¤äº’å¼æŸ¥è¯¢ï¼šé€šå¸¸æ—¶é—´è·¨åº¦åœ¨æ•°åç§’åˆ°æ•°åˆ†é’Ÿä¹‹é—´ï¼›åŸºäºå®æ—¶æ•°æ®æµçš„æ•°æ®å¤„ç†ï¼šé€šå¸¸æ—¶é—´è·¨åº¦åœ¨æ•°ç™¾æ¯«ç§’åˆ°æ•°ç§’ä¹‹é—´ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŒæ—¶å­˜åœ¨ä»¥ä¸Šåœºæ™¯éœ€è¦åŒæ—¶éƒ¨ç½²å¤šä¸ªç»„ä»¶ï¼Œå¦‚:MapReduce/Impala/Stormï¼Œè¿™æ ·åšéš¾å…ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ï¼šä¸åŒåœºæ™¯ä¹‹é—´è¾“å…¥è¾“å‡ºæ•°æ®æ— æ³•åšåˆ°æ— ç¼å…±äº«ï¼Œé€šå¸¸éœ€è¦è¿›è¡Œæ•°æ®æ ¼å¼çš„è½¬æ¢ï¼Œä¸åŒçš„è½¯ä»¶éœ€è¦ä¸åŒçš„å¼€å‘å’Œç»´æŠ¤å›¢é˜Ÿï¼Œå¸¦æ¥äº†è¾ƒé«˜çš„ä½¿ç”¨æˆæœ¬ï¼Œæ¯”è¾ƒéš¾ä»¥å¯¹åŒä¸€ä¸ªé›†ç¾¤ä¸­çš„å„ä¸ªç³»ç»Ÿè¿›è¡Œç»Ÿä¸€çš„èµ„æºåè°ƒå’Œåˆ†é…ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Sparkçš„è®¾è®¡éµå¾ªâ€œä¸€ä¸ªè½¯ä»¶æ ˆæ»¡è¶³ä¸åŒåº”ç”¨åœºæ™¯â€çš„ç†å¿µï¼Œé€æ¸å½¢æˆäº†ä¸€å¥—å®Œæ•´çš„ç”Ÿæ€ç³»ç»Ÿï¼Œå…¶ç”Ÿæ€ç³»ç»ŸåŒ…å«äº†Spark Coreã€Spark SQLã€Spark Streamingï¼ˆ Structured Streamingï¼‰ã€MLLibå’ŒGraphX ç­‰ç»„ä»¶ï¼Œæ—¢èƒ½å¤Ÿæä¾›å†…å­˜è®¡ç®—æ¡†æ¶ï¼Œä¹Ÿå¯ä»¥æ”¯æŒSQLå³å¸­æŸ¥è¯¢ã€å®æ—¶æµå¼è®¡ç®—ã€æœºå™¨å­¦ä¹ å’Œå›¾è®¡ç®—ç­‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€Œä¸”Sparkå¯ä»¥éƒ¨ç½²åœ¨èµ„æºç®¡ç†å™¨YARNä¹‹ä¸Šï¼Œæä¾›ä¸€ç«™å¼çš„å¤§æ•°æ®è§£å†³æ–¹æ¡ˆï¼›å› æ­¤ï¼ŒSparkæ‰€æä¾›çš„ç”Ÿæ€ç³»ç»Ÿè¶³ä»¥åº”å¯¹ä¸Šè¿°ä¸‰ç§åœºæ™¯ï¼Œå³æ‰¹å¤„ç†ã€äº¤äº’å¼æŸ¥è¯¢å’Œæµæ•°æ®å¤„ç†ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Sparkæ¦‚å¿µ/æ¶æ„è®¾è®¡&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;RDDï¼šæ˜¯Resilient Distributed Datasetï¼ˆå¼¹æ€§åˆ†å¸ƒå¼æ•°æ®é›†ï¼‰çš„ç®€ç§°ï¼Œæ˜¯åˆ†å¸ƒå¼å†…å­˜çš„ä¸€ä¸ªæŠ½è±¡æ¦‚å¿µï¼Œæä¾›äº†ä¸€ç§é«˜åº¦å—é™çš„å…±äº«å†…å­˜æ¨¡å‹ ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;DAGï¼šæ˜¯Directed Acyclic Graphï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰çš„ç®€ç§°ï¼Œåæ˜ RDDä¹‹é—´çš„ä¾èµ–å…³ç³» ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Executorï¼šæ˜¯è¿è¡Œåœ¨å·¥ä½œèŠ‚ç‚¹ï¼ˆWorkerNodeï¼‰çš„ä¸€ä¸ªè¿›ç¨‹ï¼Œè´Ÿè´£è¿è¡ŒTask ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åº”ç”¨ï¼ˆApplicationï¼‰ï¼šç”¨æˆ·ç¼–å†™çš„Sparkåº”ç”¨ç¨‹åºï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»»åŠ¡ï¼ˆ Task ï¼‰ï¼šè¿è¡Œåœ¨Executorä¸Šçš„å·¥ä½œå•å…ƒ ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½œä¸šï¼ˆ Job ï¼‰ï¼šä¸€ä¸ªä½œä¸šåŒ…å«å¤šä¸ªRDDåŠä½œç”¨äºç›¸åº”RDDä¸Šçš„å„ç§æ“ä½œï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é˜¶æ®µï¼ˆ Stage ï¼‰ï¼šæ˜¯ä½œä¸šçš„åŸºæœ¬è°ƒåº¦å•ä½ï¼Œä¸€ä¸ªä½œä¸šä¼šåˆ†ä¸ºå¤šç»„ä»»åŠ¡ï¼Œæ¯ç»„ä»»åŠ¡è¢«ç§°ä¸ºé˜¶æ®µï¼Œæˆ–è€…ä¹Ÿè¢«ç§°ä¸ºä»»åŠ¡é›†åˆï¼Œä»£è¡¨äº†ä¸€ç»„å…³è”çš„ã€ç›¸äº’ä¹‹é—´æ²¡æœ‰Shuffleä¾èµ–å…³ç³»çš„ä»»åŠ¡ç»„æˆçš„ä»»åŠ¡é›†ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Sparkè¿è¡Œæ¶æ„åŒ…æ‹¬é›†ç¾¤èµ„æºç®¡ç†å™¨ï¼ˆCluster Managerï¼‰ã€è¿è¡Œä½œä¸šä»»åŠ¡çš„å·¥ä½œèŠ‚ç‚¹ï¼ˆWorker Nodeï¼‰ã€æ¯ä¸ªåº”ç”¨çš„ä»»åŠ¡æ§åˆ¶èŠ‚ç‚¹ï¼ˆDriverï¼‰å’Œæ¯ä¸ªå·¥ä½œèŠ‚ç‚¹ä¸Šè´Ÿè´£å…·ä½“ä»»åŠ¡çš„æ‰§è¡Œè¿›ç¨‹ï¼ˆExecutorï¼‰ï¼Œèµ„æºç®¡ç†å™¨å¯ä»¥è‡ªå¸¦æˆ–ä½¿ç”¨Mesos/YARNï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸€ä¸ªåº”ç”¨ç”±ä¸€ä¸ªDriverå’Œè‹¥å¹²ä¸ªä½œä¸šæ„æˆï¼Œä¸€ä¸ªä½œä¸šç”±å¤šä¸ªé˜¶æ®µæ„æˆï¼Œä¸€ä¸ªé˜¶æ®µç”±å¤šä¸ªæ²¡æœ‰Shuffleå…³ç³»çš„ä»»åŠ¡ç»„æˆï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“æ‰§è¡Œä¸€ä¸ªåº”ç”¨æ—¶ï¼ŒDriverä¼šå‘é›†ç¾¤ç®¡ç†å™¨ç”³è¯·èµ„æºï¼Œå¯åŠ¨Executorï¼Œå¹¶å‘Executorå‘é€åº”ç”¨ç¨‹åºä»£ç å’Œæ–‡ä»¶ï¼Œç„¶ååœ¨Executorä¸Šæ‰§è¡Œä»»åŠ¡ï¼Œè¿è¡Œç»“æŸåï¼Œæ‰§è¡Œç»“æœä¼šè¿”å›ç»™Driverï¼Œæˆ–è€…å†™åˆ°HDFSæˆ–è€…å…¶ä»–æ•°æ®åº“ä¸­ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Sparkè¿è¡Œæµç¨‹&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;SparkContextå¯¹è±¡ä»£è¡¨äº†å’Œä¸€ä¸ªé›†ç¾¤çš„è¿æ¥ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ï¼ˆ1ï¼‰é¦–å…ˆä¸ºåº”ç”¨æ„å»ºèµ·åŸºæœ¬çš„è¿è¡Œç¯å¢ƒï¼Œå³ç”±Driveråˆ›å»ºä¸€ä¸ªSparkContextï¼Œè¿›è¡Œèµ„æºçš„ç”³è¯·ã€ä»»åŠ¡çš„åˆ†é…å’Œç›‘æ§ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ï¼ˆ2ï¼‰èµ„æºç®¡ç†å™¨ä¸ºExecutoråˆ†é…èµ„æºï¼Œå¹¶å¯åŠ¨Executorè¿›ç¨‹ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ï¼ˆ3ï¼‰SparkContextæ ¹æ®RDDçš„ä¾èµ–å…³ç³»æ„å»ºDAGå›¾ï¼ŒDAGå›¾æäº¤ç»™DAGSchedulerè§£ææˆStageï¼Œç„¶åæŠŠä¸€ä¸ªä¸ªTaskSetæäº¤ç»™åº•å±‚è°ƒåº¦å™¨TaskSchedulerå¤„ç†ï¼›Executorå‘SparkContextç”³è¯·Taskï¼ŒTask Schedulerå°†Taskå‘æ”¾ç»™Executorè¿è¡Œï¼Œå¹¶æä¾›åº”ç”¨ç¨‹åºä»£ç ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ï¼ˆ4ï¼‰Taskåœ¨Executorä¸Šè¿è¡Œï¼ŒæŠŠæ‰§è¡Œç»“æœåé¦ˆç»™TaskSchedulerï¼Œç„¶ååé¦ˆç»™DAGSchedulerï¼Œè¿è¡Œå®Œæ¯•åå†™å…¥æ•°æ®å¹¶é‡Šæ”¾æ‰€æœ‰èµ„æºï¼›&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt; &lt;/span&gt;&lt;span/&gt;&lt;span&gt;Spark RDD&lt;/span&gt;&lt;span/&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;RDDæ¦‚å¿µ/ç‰¹æ€§&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è®¸å¤šè¿­ä»£å¼ç®—æ³•ï¼ˆæ¯”å¦‚æœºå™¨å­¦ä¹ ã€å›¾ç®—æ³•ç­‰ï¼‰å’Œäº¤äº’å¼æ•°æ®æŒ–æ˜å·¥å…·ï¼Œå…±åŒä¹‹å¤„æ˜¯ä¸åŒè®¡ç®—é˜¶æ®µä¹‹é—´ä¼šé‡ç”¨ä¸­é—´ç»“æœï¼Œ MapReduceæ¡†æ¶æŠŠä¸­é—´ç»“æœå†™å…¥åˆ°ç¨³å®šå­˜å‚¨ï¼ˆå¦‚ç£ç›˜ï¼‰ä¸­ï¼Œå¸¦æ¥å¤§é‡çš„æ•°æ®å¤åˆ¶ã€ç£ç›˜IOå’Œåºåˆ—åŒ–å¼€é”€ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;RDDå°±æ˜¯ä¸ºäº†æ»¡è¶³è¿™ç§éœ€æ±‚è€Œå‡ºç°çš„ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªæŠ½è±¡çš„æ•°æ®æ¶æ„ï¼Œå¼€å‘è€…ä¸å¿…æ‹…å¿ƒåº•å±‚æ•°æ®çš„åˆ†å¸ƒå¼ç‰¹æ€§ï¼Œåªéœ€å°†å…·ä½“çš„åº”ç”¨é€»è¾‘è¡¨è¾¾ä¸ºä¸€ç³»åˆ—è½¬æ¢å¤„ç†ï¼Œä¸åŒRDDä¹‹é—´çš„è½¬æ¢æ“ä½œå½¢æˆä¾èµ–å…³ç³»ï¼Œå¯ä»¥å®ç°ç®¡é“åŒ–ï¼Œé¿å…ä¸­é—´æ•°æ®å­˜å‚¨ã€‚ä¸€ä¸ªRDDå°±æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼å¯¹è±¡é›†åˆï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåªè¯»çš„åˆ†åŒºè®°å½•é›†åˆï¼Œæ¯ä¸ªRDDå¯åˆ†æˆå¤šä¸ªåˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºå°±æ˜¯ä¸€ä¸ªæ•°æ®é›†ç‰‡æ®µï¼Œå¹¶ä¸”ä¸€ä¸ªRDDçš„ä¸åŒåˆ†åŒºå¯ä»¥è¢«ä¿å­˜åˆ°é›†ç¾¤ä¸­ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œä»è€Œå¯ä»¥åœ¨é›†ç¾¤ä¸­çš„ä¸åŒèŠ‚ç‚¹ä¸Šè¿›è¡Œå¹¶è¡Œè®¡ç®—ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;RDDæä¾›äº†ä¸€ç§é«˜åº¦å—é™çš„å…±äº«å†…å­˜æ¨¡å‹ï¼Œå³RDDæ˜¯åªè¯»çš„è®°å½•åˆ†åŒºçš„é›†åˆï¼Œä¸èƒ½ç›´æ¥ä¿®æ”¹ï¼Œåªèƒ½åŸºäºç¨³å®šçš„ç‰©ç†å­˜å‚¨ä¸­çš„æ•°æ®é›†åˆ›å»ºRDDï¼Œæˆ–è€…é€šè¿‡åœ¨å…¶ä»–RDDä¸Šæ‰§è¡Œç¡®å®šçš„è½¬æ¢æ“ä½œï¼ˆå¦‚mapã€joinå’Œgroup byï¼‰è€Œåˆ›å»ºå¾—åˆ°æ–°çš„RDDã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;RDDæä¾›äº†ä¸°å¯Œçš„æ“ä½œä»¥æ”¯æŒå¸¸è§æ•°æ®è¿ç®—ï¼Œåˆ†â€œè½¬æ¢â€ï¼ˆTransformationï¼‰å’Œâ€œåŠ¨ä½œâ€ï¼ˆActionï¼‰ä¸¤ç§ç±»å‹ï¼›RDDæä¾›çš„è½¬æ¢æ¥å£éƒ½éå¸¸ç®€å•ï¼Œéƒ½æ˜¯ç±»ä¼¼mapã€filterã€groupByã€joinç­‰ç²—ç²’åº¦çš„æ•°æ®è½¬æ¢æ“ä½œï¼Œè€Œä¸æ˜¯é’ˆå¯¹æŸä¸ªæ•°æ®é¡¹çš„ç»†ç²’åº¦ä¿®æ”¹ï¼ˆä¸é€‚åˆç½‘é¡µçˆ¬è™«ï¼‰ï¼Œè¡¨é¢ä¸ŠRDDçš„åŠŸèƒ½å¾ˆå—é™ã€ä¸å¤Ÿå¼ºå¤§ï¼Œå®é™…ä¸ŠRDDå·²ç»è¢«å®è·µè¯æ˜å¯ä»¥é«˜æ•ˆåœ°è¡¨è¾¾è®¸å¤šæ¡†æ¶çš„ç¼–ç¨‹æ¨¡å‹ï¼ˆæ¯”å¦‚MapReduceã€SQLã€Pregelï¼‰ï¼›Sparkç”¨Scalaè¯­è¨€å®ç°äº†RDDçš„APIï¼Œç¨‹åºå‘˜å¯ä»¥é€šè¿‡è°ƒç”¨APIå®ç°å¯¹RDDçš„å„ç§æ“ä½œ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;RDDå…¸å‹çš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼Œè¿™ä¸€ç³»åˆ—å¤„ç†ç§°ä¸ºä¸€ä¸ªLineageï¼ˆè¡€ç¼˜å…³ç³»ï¼‰ï¼Œå³DAGæ‹“æ‰‘æ’åºçš„ç»“æœï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;RDDè¯»å…¥å¤–éƒ¨æ•°æ®æºè¿›è¡Œåˆ›å»ºï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;RDDç»è¿‡ä¸€ç³»åˆ—çš„è½¬æ¢ï¼ˆTransformationï¼‰æ“ä½œï¼Œæ¯ä¸€æ¬¡éƒ½ä¼šäº§ç”Ÿä¸åŒçš„RDDï¼Œä¾›ç»™ä¸‹ä¸€ä¸ªè½¬æ¢æ“ä½œä½¿ç”¨ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æœ€åä¸€ä¸ªRDDç»è¿‡â€œåŠ¨ä½œâ€æ“ä½œè¿›è¡Œè½¬æ¢ï¼Œå¹¶è¾“å‡ºåˆ°å¤–éƒ¨æ•°æ®æº&lt;strong&gt;ä¼˜ç‚¹ï¼šæƒ°æ€§è°ƒç”¨ã€ç®¡é“åŒ–ã€é¿å…åŒæ­¥ç­‰å¾…ã€ä¸éœ€è¦ä¿å­˜ä¸­é—´ç»“æœã€æ“ä½œç®€å•ï¼›&lt;/strong&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Sparké‡‡ç”¨RDDä»¥åèƒ½å¤Ÿå®ç°é«˜æ•ˆè®¡ç®—çš„åŸå› ä¸»è¦åœ¨äºï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ï¼ˆ1ï¼‰é«˜å®¹é”™æ€§ï¼šè¡€ç¼˜å…³ç³»ã€é‡æ–°è®¡ç®—ä¸¢å¤±åˆ†åŒºã€æ— éœ€å›æ»šç³»ç»Ÿã€é‡ç®—è¿‡ç¨‹åœ¨ä¸åŒèŠ‚ç‚¹ä¹‹é—´å¹¶è¡Œã€åªè®°å½•ç²—ç²’åº¦çš„æ“ä½œï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ï¼ˆ2ï¼‰ä¸­é—´ç»“æœæŒä¹…åŒ–åˆ°å†…å­˜ï¼šæ•°æ®åœ¨å†…å­˜ä¸­çš„å¤šä¸ªRDDæ“ä½œä¹‹é—´è¿›è¡Œä¼ é€’ï¼Œé¿å…äº†ä¸å¿…è¦çš„è¯»å†™ç£ç›˜å¼€é”€ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ï¼ˆ3ï¼‰å­˜æ”¾çš„æ•°æ®æ˜¯Javaå¯¹è±¡ï¼šé¿å…äº†ä¸å¿…è¦çš„å¯¹è±¡åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼›&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;RDDä¾èµ–å…³ç³»&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Sparké€šè¿‡åˆ†æå„ä¸ªRDDçš„ä¾èµ–å…³ç³»ç”Ÿæˆäº†DAGï¼Œå¹¶æ ¹æ®RDD ä¾èµ–å…³ç³»æŠŠä¸€ä¸ªä½œä¸šåˆ†æˆå¤šä¸ªé˜¶æ®µï¼Œé˜¶æ®µåˆ’åˆ†çš„ä¾æ®æ˜¯çª„ä¾èµ–å’Œå®½ä¾èµ–ï¼Œçª„ä¾èµ–å¯ä»¥å®ç°æµæ°´çº¿ä¼˜åŒ–ï¼Œå®½ä¾èµ–åŒ…å«Shuffleè¿‡ç¨‹ï¼Œæ— æ³•å®ç°æµæ°´çº¿æ–¹å¼å¤„ç†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çª„ä¾èµ–è¡¨ç°ä¸ºä¸€ä¸ªçˆ¶RDDçš„åˆ†åŒºå¯¹åº”äºä¸€ä¸ªå­RDDçš„åˆ†åŒºæˆ–å¤šä¸ªçˆ¶RDDçš„åˆ†åŒºå¯¹åº”äºä¸€ä¸ªå­RDDçš„åˆ†åŒºï¼›å®½ä¾èµ–åˆ™è¡¨ç°ä¸ºå­˜åœ¨ä¸€ä¸ªçˆ¶RDDçš„ä¸€ä¸ªåˆ†åŒºå¯¹åº”ä¸€ä¸ªå­RDDçš„å¤šä¸ªåˆ†åŒºã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€»è¾‘ä¸Šæ¯ä¸ªRDD æ“ä½œéƒ½æ˜¯ä¸€ä¸ªfork/joinï¼ˆä¸€ç§ç”¨äºå¹¶è¡Œæ‰§è¡Œä»»åŠ¡çš„æ¡†æ¶ï¼‰ï¼ŒæŠŠè®¡ç®—fork åˆ°æ¯ä¸ªRDD åˆ†åŒºï¼Œå®Œæˆè®¡ç®—åå¯¹å„ä¸ªåˆ†åŒºå¾—åˆ°çš„ç»“æœè¿›è¡Œjoin æ“ä½œï¼Œç„¶åfork/joinä¸‹ä¸€ä¸ªRDD æ“ä½œï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;RDD Stageåˆ’åˆ†ï¼šSparké€šè¿‡åˆ†æå„ä¸ªRDDçš„ä¾èµ–å…³ç³»ç”Ÿæˆäº†DAGï¼Œå†é€šè¿‡åˆ†æå„ä¸ªRDDä¸­çš„åˆ†åŒºä¹‹é—´çš„ä¾èµ–å…³ç³»æ¥å†³å®šå¦‚ä½•åˆ’åˆ†Stageï¼Œå…·ä½“æ–¹æ³•ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;åœ¨DAGä¸­è¿›è¡Œåå‘è§£æï¼Œé‡åˆ°å®½ä¾èµ–å°±æ–­å¼€ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é‡åˆ°çª„ä¾èµ–å°±æŠŠå½“å‰çš„RDDåŠ å…¥åˆ°Stageä¸­ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å°†çª„ä¾èµ–å°½é‡åˆ’åˆ†åœ¨åŒä¸€ä¸ªStageä¸­ï¼Œå¯ä»¥å®ç°æµæ°´çº¿è®¡ç®—ï¼›&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;RDDè¿è¡Œè¿‡ç¨‹&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é€šè¿‡ä¸Šè¿°å¯¹RDDæ¦‚å¿µã€ä¾èµ–å…³ç³»å’ŒStageåˆ’åˆ†çš„ä»‹ç»ï¼Œç»“åˆä¹‹å‰ä»‹ç»çš„Sparkè¿è¡ŒåŸºæœ¬æµç¨‹ï¼Œæ€»ç»“ä¸€ä¸‹RDDåœ¨Sparkæ¶æ„ä¸­çš„è¿è¡Œè¿‡ç¨‹ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ï¼ˆ1ï¼‰åˆ›å»ºRDDå¯¹è±¡ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ï¼ˆ2ï¼‰SparkContextè´Ÿè´£è®¡ç®—RDDä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œæ„å»ºDAGï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ï¼ˆ3ï¼‰DAG Schedulerè´Ÿè´£æŠŠDAGå›¾åˆ†è§£æˆå¤šä¸ªStageï¼Œæ¯ä¸ªStageä¸­åŒ…å«äº†å¤šä¸ªTaskï¼Œæ¯ä¸ªTaskä¼šè¢«TaskScheduleråˆ†å‘ç»™å„ä¸ªWorkerNodeä¸Šçš„Executorå»æ‰§è¡Œï¼›&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;RDDåˆ›å»º&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;RDDçš„åˆ›å»ºå¯ä»¥ä»ä»æ–‡ä»¶ç³»ç»Ÿä¸­åŠ è½½æ•°æ®åˆ›å»ºå¾—åˆ°ï¼Œæˆ–è€…é€šè¿‡å¹¶è¡Œé›†åˆï¼ˆæ•°ç»„ï¼‰åˆ›å»ºRDDã€‚Sparké‡‡ç”¨textFile()æ–¹æ³•æ¥ä»æ–‡ä»¶ç³»ç»Ÿä¸­åŠ è½½æ•°æ®åˆ›å»ºRDDï¼Œè¯¥æ–¹æ³•æŠŠæ–‡ä»¶çš„URIä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªURIå¯ä»¥æ˜¯æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿçš„åœ°å€ï¼Œæˆ–è€…æ˜¯åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸHDFSçš„åœ°å€ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»æ–‡ä»¶ç³»ç»Ÿä¸­åŠ è½½æ•°æ®ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;scala&amp;gt;Â valÂ linesÂ =Â sc.textFile(&lt;span&gt;&quot;file:///usr/local/spark/mycode/rdd/word.txt&quot;&lt;/span&gt;)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»HDFSä¸­åŠ è½½æ•°æ®ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;scala&amp;gt;Â valÂ linesÂ =Â sc.textFile(&lt;span&gt;&quot;hdfs://localhost:9000/user/hadoop/word.txt&quot;&lt;/span&gt;)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥è°ƒç”¨SparkContextçš„parallelizeæ–¹æ³•ï¼Œåœ¨Driverä¸­ä¸€ä¸ªå·²ç»å­˜åœ¨çš„é›†åˆï¼ˆæ•°ç»„ï¼‰ä¸Šåˆ›å»ºã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;scala&amp;gt;valÂ arrayÂ =Â Array(1,2,3,4,5)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;valÂ rddÂ =Â sc.parallelize(array)&lt;br/&gt;&lt;br/&gt;Â &lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ–è€…ä»åˆ—è¡¨ä¸­åˆ›å»ºï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;scala&amp;gt;valÂ listÂ =Â List(1,2,3,4,5)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;valÂ rddÂ =Â sc.parallelize(list)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;RDDæ“ä½œ&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äºRDDè€Œè¨€ï¼Œæ¯ä¸€æ¬¡è½¬æ¢æ“ä½œéƒ½ä¼šäº§ç”Ÿä¸åŒçš„RDDï¼Œä¾›ç»™ä¸‹ä¸€ä¸ªâ€œè½¬æ¢â€ä½¿ç”¨ï¼Œè½¬æ¢å¾—åˆ°çš„RDDæ˜¯æƒ°æ€§æ±‚å€¼çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ•´ä¸ªè½¬æ¢è¿‡ç¨‹åªæ˜¯è®°å½•äº†è½¬æ¢çš„è½¨è¿¹ï¼Œå¹¶ä¸ä¼šå‘ç”ŸçœŸæ­£çš„è®¡ç®—ï¼Œåªæœ‰é‡åˆ°è¡ŒåŠ¨æ“ä½œæ—¶ï¼Œæ‰ä¼šå‘ç”ŸçœŸæ­£çš„è®¡ç®—ï¼Œå¼€å§‹ä»è¡€ç¼˜å…³ç³»æºå¤´å¼€å§‹ï¼Œè¿›è¡Œç‰©ç†çš„è½¬æ¢æ“ä½œï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¸¸ç”¨çš„RDDè½¬æ¢æ“ä½œï¼Œæ€»ç»“å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.9522058823529411&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z2DApiaibzMicicOqmeSH8neNob7fheLeK3mqKD9ibibfMVa8oOg0EUC1lnNb4tnKy7NmptFZfTpKFv6V6Dnm2jf4uyw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;544&quot;/&gt;filter(func)æ“ä½œï¼šç­›é€‰å‡ºæ»¡è¶³å‡½æ•°funcçš„å…ƒç´ ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„æ•°æ®é›†&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;scala&amp;gt;Â Â valÂ Â linesÂ =sc.textFile(file:///usr/&lt;span&gt;local&lt;/span&gt;/spark/mycode/rdd/word.txt)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â Â valÂ Â linesWithSpark=lines.filter(lineÂ =&amp;gt;Â line.contains(&lt;span&gt;&quot;Spark&quot;&lt;/span&gt;))&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;map(func)æ“ä½œï¼šmap(func)æ“ä½œå°†æ¯ä¸ªå…ƒç´ ä¼ é€’åˆ°å‡½æ•°funcä¸­ï¼Œå¹¶å°†ç»“æœè¿”å›ä¸ºä¸€ä¸ªæ–°çš„æ•°æ®é›†&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;scala&amp;gt;Â data=Array(1,2,3,4,5)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ Â rdd1=Â sc.parallelize(data)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ Â rdd2=rdd1.map(x=&amp;gt;x+10)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦ä¸€ä¸ªå®ä¾‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;scala&amp;gt;Â valÂ Â linesÂ =Â sc.textFile(&lt;span&gt;&quot;file:///usr/local/spark/mycode/rdd/word.txt&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ Â words=lines.map(lineÂ =&amp;gt;Â line.split(&lt;span&gt;&quot;Â &quot;&lt;/span&gt;))&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;flatMap(func)æ“ä½œï¼šæ‹æ‰æ“ä½œ&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;scala&amp;gt;Â valÂ Â linesÂ =Â sc.textFile(&lt;span&gt;&quot;file:///usr/local/spark/mycode/rdd/word.txt&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ Â words=lines.flatMap(lineÂ =&amp;gt;Â line.split(&lt;span&gt;&quot;Â &quot;&lt;/span&gt;))&lt;br/&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;groupByKey()æ“ä½œï¼šåº”ç”¨äº(K,V)é”®å€¼å¯¹çš„æ•°æ®é›†æ—¶ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„(K, Iterable)å½¢å¼çš„æ•°æ®é›†ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;reduceByKey(func)æ“ä½œï¼šåº”ç”¨äº(K,V)é”®å€¼å¯¹çš„æ•°æ®é›†è¿”å›æ–°(K, V)å½¢å¼æ•°æ®é›†ï¼Œå…¶ä¸­æ¯ä¸ªå€¼æ˜¯å°†æ¯ä¸ªkeyä¼ é€’åˆ°å‡½æ•°funcä¸­è¿›è¡Œèšåˆåå¾—åˆ°çš„ç»“æœï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¡ŒåŠ¨æ“ä½œæ˜¯çœŸæ­£è§¦å‘è®¡ç®—çš„åœ°æ–¹ã€‚Sparkç¨‹åºæ‰§è¡Œåˆ°è¡ŒåŠ¨æ“ä½œæ—¶ï¼Œæ‰ä¼šæ‰§è¡ŒçœŸæ­£çš„è®¡ç®—ï¼Œè¿™å°±æ˜¯æƒ°æ€§æœºåˆ¶ï¼Œâ€œæƒ°æ€§æœºåˆ¶â€æ˜¯æŒ‡ï¼Œæ•´ä¸ªè½¬æ¢è¿‡ç¨‹åªæ˜¯è®°å½•äº†è½¬æ¢çš„è½¨è¿¹ï¼Œå¹¶ä¸ä¼šå‘ç”ŸçœŸæ­£çš„è®¡ç®—ï¼Œåªæœ‰é‡åˆ°è¡ŒåŠ¨æ“ä½œæ—¶ï¼Œæ‰ä¼šè§¦å‘â€œä»å¤´åˆ°å°¾â€çš„çœŸæ­£çš„è®¡ç®—ï¼Œå¸¸ç”¨çš„è¡ŒåŠ¨æ“ä½œï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;1.0610021786492374&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z2DApiaibzMicicOqmeSH8neNob7fheLeK3mH30Za5gT2x1ICyCZZfATCcL8hevia0Aguaygm6icTlCPf1sOhL6xCwlQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;459&quot;/&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;br/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;RDDæŒä¹…&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Spark RDDé‡‡ç”¨æƒ°æ€§æ±‚å€¼çš„æœºåˆ¶ï¼Œä½†æ˜¯æ¯æ¬¡é‡åˆ°è¡ŒåŠ¨æ“ä½œéƒ½ä¼šä»å¤´å¼€å§‹æ‰§è¡Œè®¡ç®—ï¼Œæ¯æ¬¡è°ƒç”¨è¡ŒåŠ¨æ“ä½œéƒ½ä¼šè§¦å‘ä¸€æ¬¡ä»å¤´å¼€å§‹çš„è®¡ç®—ï¼Œè¿™å¯¹äºè¿­ä»£è®¡ç®—è€Œè¨€ä»£ä»·æ˜¯å¾ˆå¤§çš„ï¼Œè¿­ä»£è®¡ç®—ç»å¸¸éœ€è¦å¤šæ¬¡é‡å¤ä½¿ç”¨åŒä¸€ç»„æ•°æ®ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;scala&amp;gt;Â valÂ Â listÂ =Â List(&lt;span&gt;&quot;Hadoop&quot;&lt;/span&gt;,&lt;span&gt;&quot;Spark&quot;&lt;/span&gt;,&lt;span&gt;&quot;Hive&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ Â rddÂ =Â sc.parallelize(list)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â println(rdd.count())Â Â //è¡ŒåŠ¨æ“ä½œï¼Œè§¦å‘ä¸€æ¬¡çœŸæ­£ä»å¤´åˆ°å°¾çš„è®¡ç®—&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â println(rdd.collect().mkString(&lt;span&gt;&quot;,&quot;&lt;/span&gt;))Â Â //è¡ŒåŠ¨æ“ä½œï¼Œè§¦å‘ä¸€æ¬¡çœŸæ­£ä»å¤´åˆ°å°¾çš„è®¡ç®—&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥é€šè¿‡æŒä¹…åŒ–ï¼ˆç¼“å­˜ï¼‰æœºåˆ¶é¿å…è¿™ç§é‡å¤è®¡ç®—çš„å¼€é”€ï¼Œå¯ä»¥ä½¿ç”¨persist()æ–¹æ³•å¯¹ä¸€ä¸ªRDDæ ‡è®°ä¸ºæŒä¹…åŒ–ï¼Œä¹‹æ‰€ä»¥è¯´â€œæ ‡è®°ä¸ºæŒä¹…åŒ–â€ï¼Œæ˜¯å› ä¸ºå‡ºç°persist()è¯­å¥çš„åœ°æ–¹ï¼Œå¹¶ä¸ä¼šé©¬ä¸Šè®¡ç®—ç”ŸæˆRDDå¹¶æŠŠå®ƒæŒä¹…åŒ–ï¼Œè€Œæ˜¯è¦ç­‰åˆ°é‡åˆ°ç¬¬ä¸€ä¸ªè¡ŒåŠ¨æ“ä½œè§¦å‘çœŸæ­£è®¡ç®—ä»¥åï¼Œæ‰ä¼šæŠŠè®¡ç®—ç»“æœè¿›è¡ŒæŒä¹…åŒ–ï¼ŒæŒä¹…åŒ–åçš„RDDå°†ä¼šè¢«ä¿ç•™åœ¨è®¡ç®—èŠ‚ç‚¹çš„å†…å­˜ä¸­è¢«åé¢çš„è¡ŒåŠ¨æ“ä½œé‡å¤ä½¿ç”¨ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;persist()çš„åœ†æ‹¬å·ä¸­åŒ…å«çš„æ˜¯æŒä¹…åŒ–çº§åˆ«å‚æ•°ï¼Œpersist(MEMORY_ONLY)è¡¨ç¤ºå°†RDDä½œä¸ºååºåˆ—åŒ–çš„å¯¹è±¡å­˜å‚¨äºJVMä¸­ï¼Œå¦‚æœå†…å­˜ä¸è¶³ï¼Œå°±è¦æŒ‰ç…§LRUåŸåˆ™æ›¿æ¢ç¼“å­˜ä¸­çš„å†…å®¹ï¼›persist(MEMORY_AND_DISK)è¡¨ç¤ºå°†RDDä½œä¸ºååºåˆ—åŒ–çš„å¯¹è±¡å­˜å‚¨åœ¨JVMä¸­ï¼Œå¦‚æœå†…å­˜ä¸è¶³ï¼Œè¶…å‡ºçš„åˆ†åŒºå°†ä¼šè¢«å­˜æ”¾åœ¨ç¡¬ç›˜ä¸Šï¼›ä¸€èˆ¬è€Œè¨€ï¼Œä½¿ç”¨cache()æ–¹æ³•æ—¶ï¼Œä¼šè°ƒç”¨persist(MEMORY_ONLY)ï¼ŒåŒæ—¶å¯ä»¥ä½¿ç”¨unpersist()æ–¹æ³•æ‰‹åŠ¨åœ°æŠŠæŒä¹…åŒ–çš„RDDä»ç¼“å­˜ä¸­ç§»é™¤ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é’ˆå¯¹ä¸Šé¢çš„å®ä¾‹ï¼Œå¢åŠ æŒä¹…åŒ–è¯­å¥ä»¥åçš„æ‰§è¡Œè¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;scala&amp;gt;Â valÂ Â listÂ =Â List(&lt;span&gt;&quot;Hadoop&quot;&lt;/span&gt;,&lt;span&gt;&quot;Spark&quot;&lt;/span&gt;,&lt;span&gt;&quot;Hive&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ Â rddÂ =Â sc.parallelize(list)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â rdd.cache()Â Â //ä¼šè°ƒç”¨persist(MEMORY_ONLY)ï¼Œä½†æ˜¯ï¼Œè¯­å¥æ‰§è¡Œåˆ°è¿™é‡Œï¼Œå¹¶ä¸ä¼šç¼“å­˜rddï¼Œå› ä¸ºè¿™æ—¶rddè¿˜æ²¡æœ‰è¢«è®¡ç®—ç”Ÿæˆ&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â println(rdd.count())Â //ç¬¬ä¸€æ¬¡è¡ŒåŠ¨æ“ä½œï¼Œè§¦å‘ä¸€æ¬¡çœŸæ­£ä»å¤´åˆ°å°¾çš„è®¡ç®—ï¼Œè¿™æ—¶ä¸Šé¢çš„rdd.cache()æ‰ä¼šè¢«æ‰§è¡Œï¼ŒæŠŠè¿™ä¸ªrddæ”¾åˆ°ç¼“å­˜ä¸­&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â println(rdd.collect().mkString(&lt;span&gt;&quot;,&quot;&lt;/span&gt;))Â //ç¬¬äºŒæ¬¡è¡ŒåŠ¨æ“ä½œï¼Œä¸éœ€è¦è§¦å‘ä»å¤´åˆ°å°¾çš„è®¡ç®—ï¼Œåªéœ€è¦é‡å¤ä½¿ç”¨ä¸Šé¢ç¼“å­˜ä¸­çš„rdd&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;RDDåˆ†åŒº&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;RDDæ˜¯å¼¹æ€§åˆ†å¸ƒå¼æ•°æ®é›†ï¼Œé€šå¸¸RDDå¾ˆå¤§ï¼Œä¼šè¢«åˆ†æˆå¾ˆå¤šä¸ªåˆ†åŒºåˆ†åˆ«ä¿å­˜åœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šï¼Œåˆ†åŒºçš„ä½œç”¨ï¼šï¼ˆ1ï¼‰å¢åŠ å¹¶è¡Œåº¦ï¼ˆ2ï¼‰å‡å°‘é€šä¿¡å¼€é”€ã€‚RDDåˆ†åŒºåŸåˆ™æ˜¯ä½¿å¾—åˆ†åŒºçš„ä¸ªæ•°å°½é‡ç­‰äºé›†ç¾¤ä¸­çš„CPUæ ¸å¿ƒï¼ˆcoreï¼‰æ•°ç›®ï¼Œå¯¹äºä¸åŒçš„Sparkéƒ¨ç½²æ¨¡å¼è€Œè¨€ï¼ˆæœ¬åœ°æ¨¡å¼ã€Standaloneæ¨¡å¼ã€YARNæ¨¡å¼ã€Mesosæ¨¡å¼ï¼‰ï¼Œéƒ½å¯ä»¥é€šè¿‡è®¾ç½®spark.default.parallelismè¿™ä¸ªå‚æ•°çš„å€¼ï¼Œæ¥é…ç½®é»˜è®¤çš„åˆ†åŒºæ•°ç›®ï¼Œä¸€èˆ¬è€Œè¨€ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬åœ°æ¨¡å¼ï¼šé»˜è®¤ä¸ºæœ¬åœ°æœºå™¨çš„CPUæ•°ç›®ï¼Œè‹¥è®¾ç½®äº†local[N],åˆ™é»˜è®¤ä¸ºNï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Standaloneæˆ–YARNï¼šåœ¨â€œé›†ç¾¤ä¸­æ‰€æœ‰CPUæ ¸å¿ƒæ•°ç›®æ€»å’Œâ€å’Œ2äºŒè€…ä¸­å–è¾ƒå¤§å€¼ä½œä¸ºé»˜è®¤å€¼ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è®¾ç½®åˆ†åŒºçš„ä¸ªæ•°æœ‰ä¸¤ç§æ–¹æ³•ï¼šåˆ›å»ºRDDæ—¶æ‰‹åŠ¨æŒ‡å®šåˆ†åŒºä¸ªæ•°ï¼Œä½¿ç”¨reparititonæ–¹æ³•é‡æ–°è®¾ç½®åˆ†åŒºä¸ªæ•°ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ›å»ºRDDæ—¶æ‰‹åŠ¨æŒ‡å®šåˆ†åŒºä¸ªæ•°ï¼šåœ¨è°ƒç”¨textFile()å’Œparallelize()æ–¹æ³•çš„æ—¶å€™æ‰‹åŠ¨æŒ‡å®šåˆ†åŒºä¸ªæ•°å³å¯ï¼Œè¯­æ³•æ ¼å¼å¦‚ sc.textFile(path, partitionNum)ï¼Œå…¶ä¸­pathå‚æ•°ç”¨äºæŒ‡å®šè¦åŠ è½½çš„æ–‡ä»¶çš„åœ°å€ï¼ŒpartitionNumå‚æ•°ç”¨äºæŒ‡å®šåˆ†åŒºä¸ªæ•°ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;scala&amp;gt;Â valÂ Â arrayÂ =Â Array(1,2,3,4,5)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ Â rddÂ =Â sc.parallelize(array,2)Â Â //è®¾ç½®ä¸¤ä¸ªåˆ†åŒº&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;reparititonæ–¹æ³•é‡æ–°è®¾ç½®åˆ†åŒºä¸ªæ•°ï¼šé€šè¿‡è½¬æ¢æ“ä½œå¾—åˆ°æ–° RDD æ—¶ï¼Œç›´æ¥è°ƒç”¨ repartition æ–¹æ³•å³å¯ï¼Œå¦‚ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;scala&amp;gt;Â valÂ Â dataÂ =Â sc.textFile(&lt;span&gt;&quot;file:///usr/local/spark/mycode/rdd/word.txt&quot;&lt;/span&gt;,2)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â data.partitions.sizeÂ Â //æ˜¾ç¤ºdataè¿™ä¸ªRDDçš„åˆ†åŒºæ•°é‡&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ Â rddÂ =Â data.repartition(1)Â Â //å¯¹dataè¿™ä¸ªRDDè¿›è¡Œé‡æ–°åˆ†åŒº&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â rdd.partitions.size&lt;br/&gt;&lt;br/&gt;res4:Â IntÂ =Â 1&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt; &lt;/span&gt;&lt;span/&gt;&lt;span&gt;Spark-shellæ‰¹å¤„ç†&lt;/span&gt;&lt;span/&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ŒæˆSparkéƒ¨ç½²åï¼Œä½¿ç”¨spark-shellæŒ‡ä»¤è¿›å…¥Scalaäº¤äº’ç¼–ç¨‹ç•Œé¢ï¼Œspark-shellé»˜è®¤åˆ›å»ºä¸€ä¸ªsparkContextï¼ˆscï¼‰ï¼Œåœ¨spark-shellå¯åŠ¨æ—¶å€™å¯ä»¥æŸ¥çœ‹è¿è¡Œæ¨¡å¼æ˜¯on yarnè¿˜æ˜¯localæ¨¡å¼ï¼Œä½¿ç”¨äº¤äº’å¼ç•Œé¢å¯ä»¥ç›´æ¥å¼•ç”¨scå˜é‡ä½¿ç”¨ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨Spark-shellå¤„ç†æ•°æ®å®ä¾‹ï¼šè¯»å–HDFSæ–‡ä»¶ç³»ç»Ÿä¸­æ–‡ä»¶å®ç°WordCount å•è¯è®¡æ•°ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;sc.textFile(&lt;span&gt;&quot;hdfs://172.22.241.183:8020/user/spark/yzg_test.txt&quot;&lt;/span&gt;).flatMap(_.split(&lt;span&gt;&quot;Â &quot;&lt;/span&gt;)).map((_,1)).reduceByKey(_+_).collect()&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­ï¼Œmap((_,1)) ç­‰åŒäºmap(x =&amp;gt; (x, 1))&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½¿ç”¨saveAsText
File()å‡½æ•°å¯ä»¥å°†ç»“æœä¿å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt; &lt;/span&gt;&lt;span/&gt;&lt;span&gt;ScalaåŠå‡½æ•°å¼ç¼–ç¨‹&lt;/span&gt;&lt;span/&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Sparké‡‡ç”¨Scalaè¯­è¨€ç¼–å†™ï¼Œåœ¨å¼€å‘ä¸­éœ€è¦ç†Ÿæ‚‰å‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œå¹¶ç†Ÿç»ƒä½¿ç”¨Scalaè¯­è¨€ï¼Œä½¿ç”¨Scalaè¿›è¡ŒSparkå¼€å‘çš„ä»£ç é‡å¤§å¤§å°‘äºJavaå¼€å‘çš„ä»£ç é‡ï¼›&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å‡½æ•°å¼ç¼–ç¨‹ç‰¹æ€§&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡½æ•°å¼ç¼–ç¨‹å±äºå£°æ˜å¼ç¼–ç¨‹çš„ä¸€ç§ï¼Œå°†è®¡ç®—æè¿°ä¸ºæ•°å­¦å‡½æ•°çš„æ±‚å€¼ï¼Œä½†å‡½æ•°å¼ç¼–ç¨‹æ²¡æœ‰å‡†ç¡®çš„å®šä¹‰ï¼Œåªæ˜¯ä¸€ç³»åˆ—ç†å¿µï¼Œå¹¶ä¸éœ€è¦ä¸¥æ ¼å‡†å®ˆï¼Œå¯ä»¥ç†è§£ä¸ºå‡½æ•°å¼ç¼–ç¨‹æŠŠç¨‹åºçœ‹åšæ˜¯æ•°å­¦å‡½æ•°ï¼Œè¾“å…¥çš„æ˜¯è‡ªå˜é‡ï¼Œè¾“å‡ºå› å˜é‡ï¼Œé€šè¿‡è¡¨è¾¾å¼å®Œæˆè®¡ç®—ï¼Œå½“å‰è¶Šæ¥è¶Šå¤šçš„å‘½ä»¤å¼è¯­è¨€æ”¯æŒéƒ¨åˆ†çš„å‡½æ•°å¼ç¼–ç¨‹ç‰¹æ€§ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œå‡½æ•°ä½œä¸ºä¸€ç­‰å…¬æ°‘ï¼Œå°±æ˜¯è¯´å‡½æ•°çš„è¡Œä¸ºå’Œæ™®é€šå˜é‡æ²¡æœ‰åŒºåˆ«ï¼Œå¯ä»¥ä½œä¸ºå‡½å‚è¿›è¡Œä¼ é€’ï¼Œä¹Ÿå¯ä»¥åœ¨å‡½æ•°å†…éƒ¨å£°æ˜ä¸€ä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆå¤–å±‚çš„å‡½æ•°å°±è¢«ç§°ä½œé«˜é˜¶å‡½æ•°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡½æ•°å¼ç¼–ç¨‹çš„curryåŒ–ï¼šæŠŠæ¥å—å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æ¢æˆæ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°çš„å‡½æ•°ï¼Œè¿”å›æ¥å—ä½™ä¸‹çš„å‚æ•°å¹¶ä¸”è¿”å›ç»“æœçš„æ–°å‡½æ•°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‡½æ•°å¼ç¼–ç¨‹è¦æ±‚æ‰€æœ‰çš„å˜é‡éƒ½æ˜¯å¸¸é‡ï¼ˆè¿™é‡Œæ‰€ç”¨çš„å˜é‡è¿™ä¸ªè¯å¹¶ä¸å‡†ç¡®ï¼Œåªæ˜¯ä¸ºäº†ä¾¿äºç†è§£ï¼‰ï¼Œerlangæ˜¯å…¶ä¸­çš„å…¸å‹è¯­è¨€ï¼Œè™½ç„¶è®¸å¤šè¯­è¨€æ”¯æŒéƒ¨åˆ†å‡½æ•°å¼ç¼–ç¨‹çš„ç‰¹æ€§ï¼Œä½†æ˜¯å¹¶ä¸è¦æ±‚å˜é‡å¿…é¡»æ˜¯å¸¸é‡ã€‚è¿™æ ·çš„ç‰¹æ€§æé«˜äº†ç¼–ç¨‹çš„å¤æ‚åº¦ï¼Œä½†æ˜¯ä½¿ä»£ç æ²¡æœ‰å‰¯ä½œç”¨ï¼Œå¹¶ä¸”å¸¦æ¥äº†å¾ˆå¤§çš„ä¸€ä¸ªå¥½å¤„ï¼Œé‚£å°±æ˜¯å¤§å¤§ç®€åŒ–äº†å¹¶å‘ç¼–ç¨‹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Javaä¸­æœ€å¸¸ç”¨çš„å¹¶å‘æ¨¡å¼æ˜¯å…±äº«å†…å­˜æ¨¡å‹ï¼Œä¾èµ–äºçº¿ç¨‹ä¸é”ï¼Œè‹¥ä»£ç ç¼–å†™ä¸å½“ï¼Œä¼šå‘ç”Ÿæ­»é”å’Œç«äº‰æ¡ä»¶ï¼Œå¹¶ä¸”éšç€çº¿ç¨‹æ•°çš„å¢åŠ ï¼Œä¼šå ç”¨å¤§é‡çš„ç³»ç»Ÿèµ„æºã€‚åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œå› ä¸ºéƒ½æ˜¯å¸¸é‡ï¼Œæ‰€ä»¥æ ¹æœ¬å°±ä¸ç”¨è€ƒè™‘æ­»é”ç­‰æƒ…å†µã€‚ä¸ºä»€ä¹ˆè¯´ä¸€æ¬¡èµ‹å€¼æé«˜äº†ç¼–ç¨‹çš„å¤æ‚åº¦ï¼Œæ—¢ç„¶æ‰€æœ‰å˜é‡éƒ½æ˜¯å¸¸é‡ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ²¡åŠæ³•æ›´æ”¹ä¸€ä¸ªå˜é‡çš„å€¼ï¼Œå¾ªç¯çš„æ„ä¹‰ä¹Ÿå°±ä¸å¤§ï¼Œæ‰€ä»¥haskellä¸erlangä¸­ä½¿ç”¨é€’å½’ä»£æ›¿äº†å¾ªç¯ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Scalaè¯­æ³•&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Scalaå³å¯ä¼¸ç¼©çš„è¯­è¨€ï¼ˆScalable Languageï¼‰ï¼Œæ˜¯ä¸€ç§å¤šèŒƒå¼çš„ç¼–ç¨‹è¯­è¨€ï¼Œç±»ä¼¼äºjavaçš„ç¼–ç¨‹ï¼Œè®¾è®¡åˆè¡·æ˜¯è¦é›†æˆé¢å‘å¯¹è±¡ç¼–ç¨‹å’Œå‡½æ•°å¼ç¼–ç¨‹çš„å„ç§ç‰¹æ€§ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Scalaå‡½æ•°åœ°ä½ï¼šä¸€ç­‰å…¬æ°‘&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨Scalaä¸­å‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œåƒå˜é‡ä¸€æ ·æ—¢å¯ä»¥ä½œä¸ºå‡½å‚ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å°†å‡½æ•°èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼›è€Œä¸”å‡½æ•°çš„åˆ›å»ºä¸ç”¨ä¾èµ–äºç±»ã€æˆ–å¯¹è±¡ï¼Œåœ¨Javaä¸­å‡½æ•°çš„åˆ›å»ºåˆ™è¦ä¾èµ–äºç±»ã€æŠ½è±¡ç±»æˆ–è€…æ¥å£ã€‚Scalaå‡½æ•°æœ‰ä¸¤ç§å®šä¹‰ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Scalaçš„å‡½æ•°å®šä¹‰è§„èŒƒåŒ–å†™æ³•ï¼Œæœ€åä¸€è¡Œä»£ç æ˜¯å®ƒçš„è¿”å›å€¼ï¼š&lt;img data-ratio=&quot;0.3082706766917293&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z2DApiaibzMicicOqmeSH8neNob7fheLeK3mgvDJUCu3f9b2X8r2ibCnBYhn5ribyWu5yB8zUkyhspLuQcgPbCYmH5vg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;399&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç²¾ç®€åå‡½æ•°å®šä¹‰å¯ä»¥åªæœ‰ä¸€è¡Œï¼š&lt;img data-ratio=&quot;0.12608695652173912&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z2DApiaibzMicicOqmeSH8neNob7fheLeK3mV4rrlA6dfa7ekhoA0MSRo46OAb1TYygbRIibATpVwgUhaQJ8Jvxlbibg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;460&quot;/&gt;ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨valå°†å‡½æ•°å®šä¹‰æˆå˜é‡ï¼Œè¡¨ç¤ºå®šä¹‰å‡½æ•°addInt,è¾“å…¥å‚æ•°æœ‰ä¸¤ä¸ªï¼Œåˆ†åˆ«ä¸ºx,y,å‡ä¸ºIntç±»å‹ï¼Œè¿”å›å€¼ä¸ºä¸¤è€…çš„å’Œï¼Œç±»å‹Intï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.11494252873563218&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z2DApiaibzMicicOqmeSH8neNob7fheLeK3mPKVNrO1xpOwcecsoeNpe7Yu3zr89p6yxjTDXQ4aibibEH2zoexgaWFeg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;435&quot;/&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ScalaåŒ¿åå‡½æ•°(å‡½æ•°å­—é¢é‡)&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Scalaä¸­çš„åŒ¿åå‡½æ•°ä¹Ÿå«åšå‡½æ•°å­—é¢é‡ï¼Œæ—¢å¯ä»¥ä½œä¸ºå‡½æ•°çš„å‚æ•°ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å°†å…¶èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œåœ¨åŒ¿åå‡½æ•°çš„å®šä¹‰ä¸­â€œ=&amp;gt;â€å¯ç†è§£ä¸ºä¸€ä¸ªè½¬æ¢å™¨ï¼Œå®ƒä½¿ç”¨å³ä¾§çš„ç®—æ³•ï¼Œå°†å·¦ä¾§çš„è¾“å…¥æ•°æ®è½¬æ¢ä¸ºæ–°çš„è¾“å‡ºæ•°æ®ï¼Œä½¿ç”¨åŒ¿åå‡½æ•°åï¼Œæˆ‘ä»¬çš„ä»£ç å˜å¾—æ›´ç®€æ´äº†ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;valÂ &lt;span&gt;test&lt;/span&gt;Â =Â (x:Int)Â =&amp;gt;Â xÂ +Â 1&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Scalaé«˜é˜¶å‡½æ•°&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Scalaä½¿ç”¨æœ¯è¯­â€œé«˜é˜¶å‡½æ•°â€æ¥è¡¨ç¤ºé‚£äº›æŠŠå‡½æ•°ä½œä¸ºå‚æ•°æˆ–å‡½æ•°ä½œä¸ºè¿”å›ç»“æœçš„æ–¹æ³•å’Œå‡½æ•°ã€‚æ¯”å¦‚å¸¸è§çš„æœ‰map,filter,reduceç­‰å‡½æ•°ï¼Œå®ƒä»¬å¯ä»¥æ¥å—ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Scalaé—­åŒ…&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Scalaä¸­çš„é—­åŒ…æŒ‡çš„æ˜¯å½“å‡½æ•°çš„å˜é‡è¶…å‡ºå®ƒçš„æœ‰æ•ˆä½œç”¨åŸŸçš„æ—¶å€™ï¼Œè¿˜èƒ½å¯¹å‡½æ•°å†…éƒ¨çš„å˜é‡è¿›è¡Œè®¿é—®ï¼›Scalaä¸­çš„é—­åŒ…æ•è·åˆ°çš„æ˜¯å˜é‡çš„æœ¬èº«è€Œä¸ä»…ä»…æ˜¯å˜é‡çš„æ•°å€¼ï¼Œå½“è‡ªç”±å˜é‡å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒScalaä¸­çš„é—­åŒ…èƒ½å¤Ÿæ•è·åˆ°è¿™ä¸ªå˜åŒ–ï¼›å¦‚æœè‡ªç”±å˜é‡åœ¨é—­åŒ…å†…éƒ¨å‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿä¼šåæ˜ åˆ°å‡½æ•°å¤–é¢å®šä¹‰çš„è‡ªç”±å˜é‡çš„æ•°å€¼ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Scalaéƒ¨åˆ†åº”ç”¨å‡½æ•°&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;éƒ¨åˆ†åº”ç”¨å‡½æ•°åªæ˜¯åœ¨â€œå·²æœ‰å‡½æ•°â€çš„åŸºç¡€ä¸Šï¼Œæä¾›éƒ¨åˆ†é»˜è®¤å‚æ•°ï¼Œæœªæä¾›é»˜è®¤å‚æ•°çš„åœ°æ–¹ä½¿ç”¨ä¸‹åˆ’çº¿æ›¿ä»£ï¼Œä»è€Œåˆ›å»ºå‡ºä¸€ä¸ªâ€œå‡½æ•°å€¼â€ï¼Œåœ¨ä½¿ç”¨è¿™ä¸ªå‡½æ•°å€¼ï¼ˆéƒ¨åˆ†åº”ç”¨å‡½æ•°ï¼‰çš„æ—¶å€™ï¼Œåªéœ€æä¾›ä¸‹åˆ’çº¿éƒ¨åˆ†å¯¹åº”çš„å‚æ•°å³å¯ï¼›éƒ¨åˆ†åº”ç”¨å‡½æ•°æœ¬è´¨ä¸Šæ˜¯ä¸€ç§å€¼ç±»å‹çš„è¡¨è¾¾å¼,åœ¨ä½¿ç”¨çš„æ—¶å€™ä¸éœ€è¦æä¾›æ‰€æœ‰çš„å‚æ•°,åªéœ€è¦æä¾›éƒ¨åˆ†å‚æ•°ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ScalaæŸ¯é‡ŒåŒ–å‡½æ•°&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;scalaä¸­çš„æŸ¯é‡ŒåŒ–æŒ‡çš„æ˜¯å°†åŸæ¥æ¥å—ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°å˜æˆæ–°çš„æ¥å—ä¸€ä¸ªå‚æ•°çš„å‡½æ•°çš„è¿‡ç¨‹ï¼Œæ–°çš„å‡½æ•°è¿”å›ä¸€ä¸ªä»¥åŸæœ‰ç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºå‚æ•°çš„å‡½æ•°ï¼›&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;defÂ someAction(f:(Double)=&amp;gt;Double)Â =Â f(10)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5268096514745308&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z2DApiaibzMicicOqmeSH8neNob7fheLeK3mcQve4d9KQA2uIWbARFKzLyqDuYiaLbBeaHjkbyoG8BnyAaUHMryS1lg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;746&quot;/&gt;åªè¦æ»¡è¶³ï¼šå‡½æ•°å‚æ•°æ˜¯ä¸€ä¸ªdoubleã€è¿”å›å€¼ä¹Ÿæ˜¯ä¸€ä¸ªdoubleï¼Œè¿™ä¸ªå‡½æ•°å°±å¯ä»¥ä½œä¸ºfå€¼ï¼›&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt; &lt;/span&gt;&lt;span/&gt;&lt;span&gt;Spark SQL&lt;/span&gt;&lt;span/&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Sharkå’ŒSpark SQL&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Sharkçš„å‡ºç°ï¼Œä½¿å¾—SQL-on-Hadoopçš„æ€§èƒ½æ¯”Hiveæœ‰äº†10-100å€çš„æé«˜,ä½†Sharkçš„è®¾è®¡å¯¼è‡´äº†ä¸¤ä¸ªé—®é¢˜ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;ä¸€æ˜¯æ‰§è¡Œè®¡åˆ’ä¼˜åŒ–å®Œå…¨ä¾èµ–äºHiveï¼Œä¸æ–¹ä¾¿æ·»åŠ æ–°çš„ä¼˜åŒ–ç­–ç•¥&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;äºŒæ˜¯å› ä¸ºSparkæ˜¯çº¿ç¨‹çº§å¹¶è¡Œï¼Œè€ŒMapReduceæ˜¯è¿›ç¨‹çº§å¹¶è¡Œï¼Œå› æ­¤ï¼ŒSparkåœ¨å…¼å®¹Hiveçš„å®ç°ä¸Šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¯¼è‡´Sharkä¸å¾—ä¸ä½¿ç”¨å¦å¤–ä¸€å¥—ç‹¬ç«‹ç»´æŠ¤çš„æ‰“äº†è¡¥ä¸çš„Hiveæºç åˆ†æ”¯ ï¼›&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Spark SQLåœ¨Hiveå…¼å®¹å±‚é¢ä»…ä¾èµ–HiveQLè§£æã€Hiveå…ƒæ•°æ®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä»HQLè¢«è§£ææˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰èµ·ï¼Œå°±å…¨éƒ¨ç”±Spark SQLæ¥ç®¡äº†ã€‚Spark SQLæ‰§è¡Œè®¡åˆ’ç”Ÿæˆå’Œä¼˜åŒ–éƒ½ç”±Catalystï¼ˆå‡½æ•°å¼å…³ç³»æŸ¥è¯¢ä¼˜åŒ–æ¡†æ¶ï¼‰è´Ÿè´£ ï¼›&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;DataFrameå’ŒRDD&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Spark SQLå¢åŠ äº†DataFrameï¼ˆå³å¸¦æœ‰Schemaä¿¡æ¯çš„RDDï¼‰ï¼Œä½¿ç”¨æˆ·å¯ä»¥åœ¨Spark SQLä¸­æ‰§è¡ŒSQLè¯­å¥ï¼Œæ•°æ®æ—¢å¯ä»¥æ¥è‡ªRDDï¼Œä¹Ÿå¯ä»¥æ˜¯Hiveã€HDFSã€Cassandraç­‰å¤–éƒ¨æ•°æ®æºï¼Œè¿˜å¯ä»¥æ˜¯JSONæ ¼å¼çš„æ•°æ®ï¼ŒSpark SQLç›®å‰æ”¯æŒScalaã€Javaã€Pythonä¸‰ç§è¯­è¨€ï¼Œæ”¯æŒSQL-92è§„èŒƒ ï¼›&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;DataFrameçš„æ¨å‡ºï¼Œè®©Sparkå…·å¤‡äº†å¤„ç†å¤§è§„æ¨¡ç»“æ„åŒ–æ•°æ®çš„èƒ½åŠ›ï¼Œä¸ä»…æ¯”åŸæœ‰çš„RDDè½¬åŒ–æ–¹å¼æ›´åŠ ç®€å•æ˜“ç”¨ï¼Œä¸”è·å¾—äº†æ›´é«˜çš„è®¡ç®—æ€§èƒ½ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Sparkå¯è½»æ¾å®ç°ä»MySQLåˆ°DataFrameçš„è½¬åŒ–ï¼Œä¸”æ”¯æŒSQLæŸ¥è¯¢ï¼›&lt;img data-ratio=&quot;0.5038402457757296&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/z2DApiaibzMicicOqmeSH8neNob7fheLeK3mEiafM2VAMndibcV5Ve8USa4q6tot1EvZc8xZApYGamIJz4Uukgn4NAuw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;651&quot;/&gt;RDDæ˜¯åˆ†å¸ƒå¼çš„ Javaå¯¹è±¡çš„é›†åˆï¼Œä½†æ˜¯ï¼Œå¯¹è±¡å†…éƒ¨ç»“æ„å¯¹äºRDDè€Œè¨€å´æ˜¯ä¸å¯çŸ¥çš„ï¼›DataFrameæ˜¯ä¸€ç§ä»¥RDDä¸ºåŸºç¡€çš„åˆ†å¸ƒå¼æ•°æ®é›†ï¼Œæä¾›äº†è¯¦ç»†çš„ç»“æ„ä¿¡æ¯ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;RDDå°±åƒä¸€ä¸ªå±‹å­ï¼Œæ‰¾ä¸œè¥¿è¦æŠŠè¿™ä¸ªå±‹å­ç¿»éæ‰èƒ½æ‰¾åˆ°ï¼›DataFrameç›¸å½“äºåœ¨ä½ çš„å±‹å­é‡Œé¢æ‰“ä¸Šäº†è´§æ¶ï¼Œåªè¦å‘Šè¯‰ä»–ä½ æ˜¯åœ¨ç¬¬å‡ ä¸ªè´§æ¶çš„ç¬¬å‡ ä¸ªä½ç½®ï¼Œ DataFrameå°±æ˜¯åœ¨RDDåŸºç¡€ä¸ŠåŠ å…¥äº†åˆ—ï¼Œå¤„ç†æ•°æ®å°±åƒå¤„ç†äºŒç»´è¡¨ä¸€æ ·ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;DataFrameä¸RDDçš„ä¸»è¦åŒºåˆ«åœ¨äºï¼Œå‰è€…å¸¦schemaå…ƒä¿¡æ¯ï¼Œå³DataFrameè¡¨ç¤ºçš„äºŒç»´è¡¨æ•°æ®é›†çš„æ¯ä¸€åˆ—éƒ½å¸¦æœ‰åç§°å’Œç±»å‹ã€‚è¿™ä½¿å¾—Spark SQLå¾—ä»¥æ´å¯Ÿæ›´å¤šçš„ç»“æ„ä¿¡æ¯ï¼Œä»è€Œå¯¹è—äºDataFrameèƒŒåçš„æ•°æ®æºä»¥åŠä½œç”¨äºDataFrameä¹‹ä¸Šçš„å˜æ¢è¿›è¡Œäº†é’ˆå¯¹æ€§çš„ä¼˜åŒ–ï¼Œæœ€ç»ˆè¾¾åˆ°å¤§å¹…æå‡è¿è¡Œæ—¶æ•ˆç‡çš„ç›®æ ‡ã€‚åè§‚RDDï¼Œç”±äºæ— ä»å¾—çŸ¥æ‰€å­˜æ•°æ®å…ƒç´ çš„å…·ä½“å†…éƒ¨ç»“æ„ï¼ŒSpark Coreåªèƒ½åœ¨stageå±‚é¢è¿›è¡Œç®€å•ã€é€šç”¨çš„æµæ°´çº¿ä¼˜åŒ–ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;DataFrameçš„åˆ›å»º&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Spark2.0ç‰ˆæœ¬å¼€å§‹ï¼ŒSparkä½¿ç”¨å…¨æ–°çš„SparkSessionæ¥å£æ›¿ä»£Spark1.6ä¸­çš„SQLContextåŠHiveContextæ¥å£æ¥å®ç°å…¶å¯¹æ•°æ®åŠ è½½ã€è½¬æ¢ã€å¤„ç†ç­‰åŠŸèƒ½ã€‚SparkSessionå®ç°äº†SQLContextåŠHiveContextæ‰€æœ‰åŠŸèƒ½ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;SparkSessionæ”¯æŒä»ä¸åŒçš„æ•°æ®æºåŠ è½½æ•°æ®ï¼Œå¹¶æŠŠæ•°æ®è½¬æ¢æˆDataFrameï¼Œæ”¯æŒæŠŠDataFrameè½¬æ¢æˆSQLContextè‡ªèº«ä¸­çš„è¡¨ï¼Œç„¶åä½¿ç”¨SQLè¯­å¥æ¥æ“ä½œæ•°æ®ã€‚SparkSessionäº¦æä¾›äº†HiveQLä»¥åŠå…¶ä»–ä¾èµ–äºHiveçš„åŠŸèƒ½çš„æ”¯æŒï¼›å¯ä»¥é€šè¿‡å¦‚ä¸‹è¯­å¥åˆ›å»ºä¸€ä¸ªSparkSessionå¯¹è±¡ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;scala&amp;gt;Â importÂ org.apache.spark.sql.SparkSession&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ spark=SparkSession.builder().getOrCreate()&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨åˆ›å»ºDataFrameå‰ï¼Œä¸ºæ”¯æŒRDDè½¬æ¢ä¸ºDataFrameåŠåç»­çš„SQLæ“ä½œï¼Œéœ€é€šè¿‡importè¯­å¥ï¼ˆå³import spark.implicits._ï¼‰å¯¼å…¥ç›¸åº”åŒ…ï¼Œå¯ç”¨éšå¼è½¬æ¢ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨åˆ›å»ºDataFrameæ—¶ï¼Œå¯ä½¿ç”¨spark.readæ“ä½œä»ä¸åŒç±»å‹çš„æ–‡ä»¶ä¸­åŠ è½½æ•°æ®åˆ›å»ºDataFrameï¼Œå¦‚ï¼šspark.read.json(&quot;people.json&quot;)ï¼šè¯»å–people.jsonæ–‡ä»¶åˆ›å»ºDataFrameï¼›åœ¨è¯»å–æœ¬åœ°æ–‡ä»¶æˆ–HDFSæ–‡ä»¶æ—¶ï¼Œè¦æ³¨æ„ç»™å‡ºæ­£ç¡®çš„æ–‡ä»¶è·¯å¾„ï¼›spark.read.csv(&quot;people.csv&quot;)ï¼šè¯»å–people.csvæ–‡ä»¶åˆ›å»ºDataFrameï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯»å–hdfsä¸Šçš„jsonæ–‡ä»¶ï¼Œå¹¶æ‰“å°ï¼Œjsonæ–‡ä»¶ä¸ºï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;{&lt;span&gt;&quot;name&quot;&lt;/span&gt;:&lt;span&gt;&quot;Michael&quot;&lt;/span&gt;}&lt;br/&gt;&lt;br/&gt;{&lt;span&gt;&quot;name&quot;&lt;/span&gt;:&lt;span&gt;&quot;Andy&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;age&quot;&lt;/span&gt;:30}&lt;br/&gt;&lt;br/&gt;{&lt;span&gt;&quot;name&quot;&lt;/span&gt;:&lt;span&gt;&quot;Justin&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;age&quot;&lt;/span&gt;:19}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯»å–ä»£ç ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;importÂ org.apache.spark.sql.SparkSession&lt;br/&gt;&lt;br/&gt;valÂ spark=SparkSession.builder().getOrCreate()&lt;br/&gt;&lt;br/&gt;importÂ spark.implicits._&lt;br/&gt;&lt;br/&gt;valÂ dfÂ =spark.read.json(&lt;span&gt;&quot;hdfs://172.22.241.183:8020/user/spark/json_sparksql.json&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;df.show()&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;RDDè½¬æ¢DataFrame&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Sparkå®˜ç½‘æä¾›äº†ä¸¤ç§æ–¹æ³•æ¥å®ç°ä»RDDè½¬æ¢å¾—åˆ°DataFrameï¼šâ‘  åˆ©ç”¨åå°„æ¥æ¨æ–­åŒ…å«ç‰¹å®šç±»å‹å¯¹è±¡çš„RDDçš„schemaï¼Œé€‚ç”¨å¯¹å·²çŸ¥æ•°æ®ç»“æ„çš„RDDè½¬æ¢ï¼›â‘¡ ä½¿ç”¨ç¼–ç¨‹æ¥å£ï¼Œæ„é€ ä¸€ä¸ªschemaå¹¶å°†å…¶åº”ç”¨åœ¨å·²çŸ¥çš„RDDä¸Šï¼›&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Spark-sqlå³å¸­æŸ¥è¯¢&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;SparkSQL çš„å…ƒæ•°æ®çš„çŠ¶æ€æœ‰ä¸¤ç§ï¼šâ‘  Â in_memoryï¼Œç”¨å®Œäº†å…ƒæ•°æ®ä¹Ÿå°±ä¸¢äº†ï¼›â‘¡ é€šè¿‡hiveä¿å­˜ï¼Œhiveçš„å…ƒæ•°æ®å­˜åœ¨å“ªå„¿ï¼Œå®ƒçš„å…ƒæ•°æ®ä¹Ÿå°±å­˜åœ¨å“ªï¼ŒSparkSQLæ•°æ®ä»“åº“å»ºç«‹åœ¨Hiveä¹‹ä¸Šå®ç°çš„ï¼Œä½¿ç”¨SparkSQLå»æ„å»ºæ•°æ®ä»“åº“çš„æ—¶å€™ï¼Œå¿…é¡»ä¾èµ–äºHiveã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Spark-sqlå‘½ä»¤è¡Œæä¾›äº†å³å¸­æŸ¥è¯¢èƒ½åŠ›ï¼Œå¯ä»¥ä½¿ç”¨ç±»sqlæ–¹å¼æ“ä½œæ•°æ®æºï¼Œæ•ˆç‡é«˜äºhiveï¼Œå¸¸ç”¨è¯­å¥ï¼šhttps://www.cnblogs.com/BlueSkyyj/p/9640626.htmlï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;spark-sqlå¯¼å…¥æ•°æ®åˆ°æ•°ä»“ï¼šhttps://www.cnblogs.com/chenfool/p/4502212.htmlï¼›&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt; &lt;/span&gt;&lt;span/&gt;&lt;span&gt;Spark Streaming&lt;/span&gt;&lt;span/&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Spark Streamingæ˜¯Spark Coreæ‰©å±•è€Œæ¥çš„ä¸€ä¸ªé«˜ååã€é«˜å®¹é”™çš„å®æ—¶å¤„ç†å¼•æ“ï¼ŒåŒStormçš„æœ€å¤§åŒºåˆ«åœ¨äºæ— æ³•å®ç°æ¯«ç§’çº§è®¡ç®—ï¼Œè€ŒStormå¯ä»¥å®ç°æ¯«ç§’çº§å“åº”ï¼ŒSpark Streaming å®ç°æ–¹å¼æ˜¯æ‰¹é‡è®¡ç®—ï¼ŒæŒ‰ç…§æ—¶é—´ç‰‡å¯¹streamåˆ‡å‰²å½¢æˆé™æ€æ•°æ®ï¼Œå¹¶ä¸”åŸºäºRDDæ•°æ®é›†æ›´å®¹æ˜“åšé«˜æ•ˆçš„å®¹é”™å¤„ç†ã€‚Spark Streamingçš„è¾“å…¥å’Œè¾“å‡ºæ•°æ®æºå¯ä»¥æ˜¯å¤šç§ã€‚Spark Â Streaming å®æ—¶è¯»å–æ•°æ®å¹¶å°†æ•°æ®åˆ†ä¸ºå°æ‰¹é‡çš„batchï¼Œç„¶ååœ¨sparkå¼•æ“ä¸­å¤„ç†ç”Ÿæˆæ‰¹é‡çš„ç»“æœé›†ã€‚Spark Streamingæä¾›äº†ç§°ä¸ºç¦»æ•£æµæˆ–DStreamçš„é«˜çº§æŠ½è±¡æ¦‚å¿µï¼Œå®ƒè¡¨ç¤ºè¿ç»­çš„æ•°æ®æµã€‚DStreamsæ—¢å¯ä»¥ä»Kafkaã€Flumeç­‰æºçš„è¾“å…¥æ•°æ®æµåˆ›å»ºï¼Œä¹Ÿå¯ä»¥é€šè¿‡åœ¨å…¶ä»–DStreamsä¸Šåº”ç”¨é«˜çº§æ“ä½œåˆ›å»ºã€‚åœ¨å†…éƒ¨DStreamè¡¨ç¤ºä¸ºRDDåºåˆ—ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨è¿™é‡Œä»ä¸€ä¸ªä¾‹å­å¼€å§‹ä»‹ç»ï¼ŒStreamingContextæ˜¯æ‰€æœ‰çš„æµå¼è®¡ç®—çš„ä¸»è¦å®ä½“ï¼Œåˆ›å»ºå«æœ‰ä¸¤ä¸ªæ‰§è¡Œçº¿ç¨‹çš„æœ¬åœ°StreamingContextå’Œ1ç§’é’Ÿçš„batchï¼Œç„¶ååˆ›å»ºä¸€ä¸ªDstreamï¼ˆlinesï¼‰ç”¨äºç›‘å¬TCPç«¯å£ï¼Œlinesä¸­çš„æ¯ä¸€è¡Œå°±æ˜¯ä¸€ä¸ªRDDï¼ŒflatMapå‡½æ•°å°†ä¸€ä¸ªRDDåˆ†è§£æˆå¤šä¸ªè®°å½•ï¼Œæ˜¯ä¸€å¯¹å¤šçš„Dstreamæ“ä½œï¼Œè¿™é‡Œä½¿ç”¨ç©ºæ ¼å°†linesåˆ†è§£æˆå•è¯ï¼Œwordsè¢«æ˜ å°„æˆ(word, 1)å¯¹ï¼Œéšåè¿›è¡Œè¯é¢‘ç»Ÿè®¡ï¼Œä¾‹å­çš„ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;importÂ org.apache.spark._&lt;br/&gt;&lt;br/&gt;importÂ org.apache.spark.streaming._&lt;br/&gt;&lt;br/&gt;valÂ confÂ =Â newÂ SparkConf().setMaster(&lt;span&gt;&quot;local[2]&quot;&lt;/span&gt;).setAppName(&lt;span&gt;&quot;NetworkWordCount&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;valÂ sscÂ =Â newÂ StreamingContext(conf,Â Seconds(1))&lt;br/&gt;&lt;br/&gt;valÂ linesÂ =Â ssc.socketTextStream(&lt;span&gt;&quot;localhost&quot;&lt;/span&gt;,Â 9999)&lt;br/&gt;&lt;br/&gt;valÂ wordsÂ =Â lines.flatMap(_.split(&lt;span&gt;&quot;Â &quot;&lt;/span&gt;))&lt;br/&gt;&lt;br/&gt;valÂ pairsÂ =Â words.map(wordÂ =&amp;gt;Â (word,Â 1))&lt;br/&gt;&lt;br/&gt;valÂ wordCountsÂ =Â pairs.reduceByKey(_Â +Â _)&lt;br/&gt;&lt;br/&gt;wordCounts.print()&lt;br/&gt;&lt;br/&gt;ssc.start()&lt;br/&gt;&lt;br/&gt;ssc.awaitTermination()&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Streaming åŸç†&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥å‚è€ƒå®˜ç½‘æ•™ç¨‹ï¼šhttp://spark.apache.org/docs/latest/streaming-programming-guide.htmlï¼ŒSpark Streamingæä¾›äº†ç§°ä¸ºç¦»æ•£æµæˆ–DStreamçš„é«˜çº§æŠ½è±¡ï¼Œå®ƒè¡¨ç¤ºè¿ç»­çš„æ•°æ®æµï¼Œåœ¨å†…éƒ¨DStreamè¡¨ç¤ºä¸ºRDDåºåˆ—ï¼Œæ¯ä¸ªRDDåŒ…å«ä¸€å®šé—´éš”çš„æ•°æ®ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€æœ‰å¯¹äºDStreamçš„æ“ä½œéƒ½ä¼šç›¸åº”åœ°è½¬æ¢æˆå¯¹RDDsçš„æ“ä½œï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼ŒflatMapæ“ä½œè¢«åº”ç”¨åˆ°lines ä¸­çš„æ¯ä¸ªRDDä¸­ç”Ÿæˆäº†ä¸€ç»„RDDï¼ˆå³wordsï¼‰&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ€»ç»“ç¼–å†™Spark Streamingç¨‹åºçš„åŸºæœ¬æ­¥éª¤æ˜¯ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;1.é€šè¿‡åˆ›å»ºè¾“å…¥DStreamæ¥å®šä¹‰è¾“å…¥æº&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;2.é€šè¿‡å¯¹DStreamåº”ç”¨è½¬æ¢æ“ä½œå’Œè¾“å‡ºæ“ä½œæ¥å®šä¹‰æµè®¡ç®—&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3.ç”¨streamingContext.start()æ¥å¼€å§‹æ¥æ”¶æ•°æ®å’Œå¤„ç†æµç¨‹&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;4.é€šè¿‡streamingContext.awaitTermination()æ–¹æ³•æ¥ç­‰å¾…å¤„ç†ç»“æŸï¼ˆæ‰‹åŠ¨ç»“æŸæˆ–å› ä¸ºé”™è¯¯è€Œç»“æŸï¼‰&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;5.å¯ä»¥é€šè¿‡streamingContext.stop()æ¥æ‰‹åŠ¨ç»“æŸæµè®¡ç®—è¿›ç¨‹&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;StreamingContext&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰ä¸¤ç§åˆ›å»ºStreamingContextçš„æ–¹å¼ï¼šé€šè¿‡SparkContextåˆ›å»ºå’Œé€šè¿‡SparkConfåˆ›å»ºï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Spark confåˆ›å»ºï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;valÂ confÂ =Â newÂ SparkConf().setAppName(appName).setMaster(master);&lt;br/&gt;&lt;br/&gt;valÂ sscÂ =Â newÂ StreamingContext(conf,Â Seconds(1));&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;appNameæ˜¯ç”¨æ¥åœ¨Spark UIä¸Šæ˜¾ç¤ºçš„åº”ç”¨åç§°ã€‚masteræ˜¯Sparkã€Mesosæˆ–Yarné›†ç¾¤çš„URLï¼Œæˆ–è€…æ˜¯local[*]ã€‚batch intervalå¯ä»¥æ ¹æ®ä½ çš„åº”ç”¨ç¨‹åºçš„å»¶è¿Ÿè¦æ±‚ä»¥åŠå¯ç”¨çš„é›†ç¾¤èµ„æºæƒ…å†µæ¥è®¾ç½®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;SparkContextåˆ›å»ºï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;valÂ scÂ =Â newÂ SparkContext(conf)&lt;br/&gt;&lt;br/&gt;valÂ sscÂ =Â newÂ StreamingContext(sc,Â Seconds(1))&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;è¾“å…¥DStreamså’ŒReceiver&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å‰é¢çš„ä¾‹å­ä¸­lineså°±æ˜¯ä»æºå¾—åˆ°çš„è¾“å…¥DStreamï¼Œè¾“å…¥DStreamå¯¹åº”ä¸€ä¸ªæ¥æ”¶å™¨å¯¹è±¡ï¼Œå¯ä»¥ä»æºæ¥æ”¶æ¶ˆæ¯å¹¶å­˜å‚¨åˆ°Sparkå†…å­˜ä¸­è¿›è¡Œå¤„ç†ã€‚Spark Streamingæä¾›ä¸¤ç§streamingæºï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;åŸºç¡€æºï¼šç›´æ¥å¯ä»¥ä½¿ç”¨streamingä¸Šä¸‹æ–‡APIçš„æºï¼Œæ¯”å¦‚fileså’Œsocketï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é«˜çº§æºï¼šé€šè¿‡å¼•ç”¨é¢å¤–å®ä½“ç±»å¾—åˆ°çš„Kafkaï¼ŒFlumeæºï¼›å¯ä»¥åœ¨åº”ç”¨ä¸­åˆ›å»ºä½¿ç”¨å¤šä¸ªè¾“å…¥DStreamsæ¥å®ç°åŒæ—¶è¯»å–å¤šç§æ•°æ®æµï¼Œworker/executor æ˜¯æŒä¹…è¿è¡Œçš„ä»»åŠ¡ï¼Œå› æ­¤å®ƒå°†å ç”¨ä¸€ä¸ªåˆ†ç»™è¯¥åº”ç”¨çš„coreï¼Œå› æ­¤Spark Streamingéœ€è¦åˆ†é…è¶³å¤Ÿçš„coreå»è¿è¡Œæ¥æ”¶å™¨å’Œå¤„ç†æ¥æ”¶çš„æ•°æ®ï¼›&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨æœ¬åœ°è¿è¡ŒSpark Streamingç¨‹åºæ—¶ï¼Œä¸è¦ä½¿ç”¨â€œlocalâ€æˆ–â€œlocal[1]â€ä½œä¸ºä¸»URLã€‚è¿™ä¸¤è€…ä¸­çš„ä»»ä½•ä¸€ä¸ªéƒ½æ„å‘³ç€åœ¨æœ¬åœ°è¿è¡Œä»»åŠ¡åªä½¿ç”¨ä¸€ä¸ªçº¿ç¨‹ã€‚å¦‚æœä½¿ç”¨åŸºäºreceiverçš„è¾“å…¥DStreamï¼ˆå¦‚Kafkaã€Flumeç­‰ï¼‰ï¼Œè¿™è¡¨æ˜å°†ä½¿ç”¨å•ä¸ªçº¿ç¨‹è¿è¡Œreceiverï¼Œè€Œä¸ç•™ä¸‹ç”¨äºå¤„ç†æ‰€æ¥æ”¶æ•°æ®çš„çº¿ç¨‹ã€‚å› æ­¤åœ¨æœ¬åœ°è¿è¡Œæ—¶ï¼Œå§‹ç»ˆä½¿ç”¨â€œlocal[n]â€ä½œä¸ºä¸»URLï¼Œå…¶ä¸­nå¿…é¡»å¤§äºè¿è¡Œçš„receiveræ•°é‡ï¼Œå¦åˆ™ç³»ç»Ÿå°†æ¥æ”¶æ•°æ®ï¼Œä½†ä¸èƒ½å¤„ç†å®ƒã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Kafkaå’ŒFlumeè¿™ç±»æºéœ€è¦å¤–éƒ¨ä¾èµ–åŒ…ï¼Œå…¶ä¸­ä¸€äº›åº“å…·æœ‰å¤æ‚çš„ä¾èµ–å…³ç³»ï¼ŒSpark shellä¸­æ²¡æœ‰è¿™äº›é«˜çº§æºä»£ç ï¼Œå› æ­¤æ— æ³•åœ¨spark-shellä¸­æµ‹è¯•åŸºäºè¿™äº›é«˜çº§æºä»£ç çš„åº”ç”¨ç¨‹åºï¼Œä½†å¯ä»¥æ‰‹åŠ¨å°†åŒ…å¼•å…¥ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŸºäºå¯é æ€§çš„è€ƒè™‘ï¼Œå¯ä»¥å°†æ•°æ®æºåˆ†ä¸ºä¸¤ç±»ï¼šå¯é çš„æ¥æ”¶å™¨çš„æ•°æ®è¢«Receiver æ¥æ”¶åå‘é€ç¡®è®¤åˆ°æºå¤´ï¼ˆå¦‚Kafka ,Flumeï¼‰å¹¶å°†æ•°æ®å­˜å‚¨åœ¨sparkï¼Œä¸å¯é çš„æ¥æ”¶å™¨ä¸ä¼šå‘æºå‘é€ç¡®è®¤ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;DStreamsè½¬æ¢&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸RDDç±»ä¼¼ï¼Œè½¬æ¢æ“ä½œå…è®¸ä¿®æ”¹æ¥è‡ªè¾“å…¥DStreamçš„æ•°æ®ï¼Œè½¬æ¢æ“ä½œåŒ…æ‹¬æ— çŠ¶æ€è½¬æ¢æ“ä½œå’Œæœ‰çŠ¶æ€è½¬æ¢æ“ä½œã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ— çŠ¶æ€è½¬æ¢æ“ä½œå®ä¾‹ï¼šä¸‹èŠ‚spark-shellä¸­â€œå¥—æ¥å­—æµâ€è¯é¢‘ç»Ÿè®¡é‡‡ç”¨æ— çŠ¶æ€è½¬æ¢ï¼Œæ¯æ¬¡ç»Ÿè®¡éƒ½åªç»Ÿè®¡å½“å‰æ‰¹æ¬¡åˆ°è¾¾çš„å•è¯çš„è¯é¢‘ï¼Œå’Œä¹‹å‰æ‰¹æ¬¡æ— å…³ï¼Œä¸ä¼šè¿›è¡Œç´¯è®¡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰çŠ¶æ€è½¬æ¢æ“ä½œå®ä¾‹ï¼šæ»‘åŠ¨çª—å£è½¬æ¢æ“ä½œå’ŒupdateStateByKeyæ“ä½œï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸€äº›å¸¸è§çš„è½¬æ¢å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;çª—å£æ“ä½œ&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯æ¬¡çª—å£åœ¨æºDStreamä¸Šæ»‘åŠ¨ï¼Œçª—å£å†…çš„æºRDDè¢«ç»„åˆ/æ“ä½œç”Ÿæˆäº†çª—å£RDDï¼Œåœ¨å›¾ä¾‹ä¸­ï¼Œè¿‡å»3ä¸ªæ—¶é—´å•ä½çš„æ•°æ®å°†è¢«æ“ä½œï¼Œå¹¶æŒ‰2ä¸ªæ—¶é—´å•ä½æ»‘åŠ¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»»ä½•çª—å£æ“ä½œéƒ½éœ€è¦æŒ‡å®šä¸¤ä¸ªå‚æ•°ï¼šçª—å£é•¿åº¦ï¼šçª—å£çš„æŒç»­æ—¶é—´ï¼ˆå›¾ä¸­å€¼æ˜¯3ï¼‰ï¼›æ»‘åŠ¨é—´éš”ï¼šæ‰§è¡Œçª—å£æ“ä½œçš„é—´éš”ï¼ˆå›¾ä¸­å€¼æ˜¯2ï¼‰ã€‚è¿™ä¸¤ä¸ªå‚æ•°å¿…é¡»æ˜¯æºDStreamçš„æ‰¹å¤„ç†é—´éš”çš„å€æ•°ï¼ˆå›¾ä¸­å€¼æ˜¯1ï¼‰&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸¾ä¾‹è¯´æ˜çª—å£æ“ä½œï¼šå¸Œæœ›é€šè¿‡æ¯éš”10ç§’åœ¨æœ€è¿‘30ç§’æ•°æ®ä¸­ç”Ÿæˆå­—æ•°æ¥æ‰©å±•å‰é¢çš„ç¤ºä¾‹ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æœ€è¿‘çš„30ç§’æ•°æ®ä¸Šå¯¹ï¼ˆword,1ï¼‰çš„DStreamé”®å€¼å¯¹åº”ç”¨reduceByKeyæ“ä½œã€‚è¿™æ˜¯ä½¿ç”¨reduceByKeyAndWindowæ“ä½œå®Œæˆçš„ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;valÂ windowedWordCountsÂ =Â pairs.reduceByKeyAndWindow((a:Int,b:Int)Â =&amp;gt;Â (aÂ +Â b),Â Seconds(30),Â Seconds(10))&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€æœ‰çš„æ»‘åŠ¨çª—å£æ“ä½œéƒ½éœ€è¦ä½¿ç”¨å‚æ•°ï¼šwindowLengthï¼ˆçª—å£é•¿åº¦ï¼‰å’ŒslideIntervalï¼ˆæ»‘åŠ¨é—´éš”ï¼‰ï¼Œå¸¸è§çª—å£æ“ä½œæ€»ç»“å¦‚ä¸‹ï¼Œå¯¹åº”çš„å«ä¹‰å¯å‚ç…§RDDçš„è½¬æ¢æ“ä½œï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.670846394984326&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z2DApiaibzMicicOqmeSH8neNob7fheLeK3moFBT3tlT2JqdCXAxpUYAo7DaMIqoRgUKuNyBcWsrTez4yOTdsoz79w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;638&quot;/&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Windowï¼šåŸºäºæºDStreamäº§ç”Ÿçš„çª—å£åŒ–çš„æ‰¹æ•°æ®è®¡ç®—å¾—åˆ°æ–°çš„Dstreamï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;countByWindow: è¿”å›DStreamä¸­å…ƒç´ çš„æ»‘åŠ¨çª—å£è®¡æ•°ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;reduceByWindowï¼šè¿”å›ä¸€ä¸ªå•å…ƒç´ æµã€‚åˆ©ç”¨å‡½æ•°funcèšé›†æ»‘åŠ¨æ—¶é—´é—´éš”çš„æµçš„å…ƒç´ åˆ›å»ºè¿™ä¸ªå•å…ƒç´ æµã€‚å‡½æ•°funcå¿…é¡»æ»¡è¶³ç»“åˆå¾‹ä»è€Œæ”¯æŒå¹¶è¡Œè®¡ç®—ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;reduceByKeyAndWindow(ä¸‰å‚æ•°)ï¼šåº”ç”¨åˆ°ä¸€ä¸ª(K,V)é”®å€¼å¯¹ç»„æˆçš„DStreamä¸Šæ—¶ï¼Œä¼šè¿”å›ä¸€ä¸ªç”±(K,V)é”®å€¼å¯¹ç»„æˆçš„æ–°çš„DStreamã€‚æ¯ä¸€ä¸ªkeyçš„å€¼å‡ç”±ç»™å®šçš„reduceå‡½æ•°(funcå‡½æ•°)è¿›è¡Œèšåˆè®¡ç®—ã€‚æ³¨æ„ï¼šåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªç®—å­åˆ©ç”¨äº†Sparké»˜è®¤çš„å¹¶å‘ä»»åŠ¡æ•°å»åˆ†ç»„ã€‚å¯ä»¥é€šè¿‡numTaskså‚æ•°çš„è®¾ç½®æ¥æŒ‡å®šä¸åŒçš„ä»»åŠ¡æ•°ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;reduceByKeyAndWindow(å››å‚æ•°)ï¼šæ¯”ä¸Šè¿°reduceByKeyAndWindowï¼ˆä¸‰å‚æ•°ï¼‰æ›´é«˜æ•ˆçš„reduceByKeyAndWindowï¼Œæ¯ä¸ªçª—å£çš„reduceå€¼æ˜¯åŸºäºå…ˆå‰çª—å£çš„reduceå€¼è¿›è¡Œå¢é‡è®¡ç®—å¾—åˆ°çš„ï¼›å®ƒä¼šå¯¹è¿›å…¥æ»‘åŠ¨çª—å£çš„æ–°æ•°æ®è¿›è¡Œreduceæ“ä½œï¼Œå¹¶å¯¹ç¦»å¼€çª—å£çš„è€æ•°æ®è¿›è¡Œâ€œé€†å‘reduceâ€æ“ä½œã€‚ä½†æ˜¯ï¼Œåªèƒ½ç”¨äºâ€œå¯é€†reduceå‡½æ•°â€ï¼Œå³é‚£äº›reduceå‡½æ•°éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„â€œé€†å‘reduceå‡½æ•°â€ï¼ˆä»¥InvFuncå‚æ•°ä¼ å…¥ï¼‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;countByValueAndWindowï¼šå½“åº”ç”¨åˆ°ä¸€ä¸ª(K,V)é”®å€¼å¯¹ç»„æˆçš„DStreamä¸Šï¼Œè¿”å›ä¸€ä¸ªç”±(K,V)é”®å€¼å¯¹ç»„æˆçš„æ–°çš„DStreamã€‚æ¯ä¸ªkeyçš„å€¼éƒ½æ˜¯å®ƒä»¬åœ¨æ»‘åŠ¨çª—å£ä¸­å‡ºç°çš„é¢‘ç‡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;updateStateByKeyï¼šéœ€è¦åœ¨è·¨æ‰¹æ¬¡ä¹‹é—´ç»´æŠ¤çŠ¶æ€æ—¶ï¼Œå¿…é¡»ä½¿ç”¨updateStateByKeyæ“ä½œï¼›&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å¤šæµå…³è”&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çª—å£è®¡ç®—ä¸Šjoinæ“ä½œéå¸¸æœ‰ç”¨ï¼Œåœ¨Spark Streamingä¸­å¯ä»¥è½»æ¾å®ç°ä¸åŒç±»å‹çš„joinï¼ŒåŒ…æ‹¬leftouterjoinã€rightouterjoinå’Œfulloterjoinã€‚æ¯ä¸ªæ‰¹å¤„ç†é—´éš”ä¸­stream1ç”Ÿæˆçš„RDDä¸stream2ç”Ÿæˆçš„RDDå…³è”å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;valÂ stream1:Â DStream[String,Â String]Â =Â ...&lt;br/&gt;&lt;br/&gt;valÂ stream2:Â DStream[String,Â String]Â =Â ...&lt;br/&gt;&lt;br/&gt;valÂ joinedStreamÂ =Â stream1.join(stream2)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Dstreamçš„è¾“å‡º&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¾“å‡ºæ“ä½œå…è®¸å°†DStreamçš„æ•°æ®æ¨é€åˆ°å¤–éƒ¨ç³»ç»Ÿï¼Œå¦‚æ•°æ®åº“æˆ–filesï¼Œç”±äºè¾“å‡ºæ“ä½œè§¦å‘æ‰€æœ‰DStreamè½¬æ¢çš„å®é™…æ‰§è¡Œï¼ˆç±»ä¼¼äºRDDçš„æ“ä½œï¼‰ï¼Œå¹¶å…è®¸å¤–éƒ¨ç³»ç»Ÿä½¿ç”¨è½¬æ¢åçš„æ•°æ®ï¼Œè¾“å‡ºæ“ä½œæœ‰ä»¥ä¸‹å‡ ç§ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.6486111111111111&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z2DApiaibzMicicOqmeSH8neNob7fheLeK3mBOgPmZxiaKQJFV5Z0ibniaMnNZtBv8OW2DMZN2ZuWJNtcCLibVP0ZYmSaA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;720&quot;/&gt;åœ¨è¾“å‡ºDStreamä¸­ï¼ŒDstream.foreachRDDæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„åŸè¯­.&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;DataFrameå’ŒSQLæ“ä½œ&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥è½»æ¾åœ°å¯¹æµæ•°æ®ä½¿ç”¨DataFrameså’ŒSQLæ“ä½œï¼Œä½†å¿…é¡»ä½¿ç”¨StreamingContextæ­£åœ¨ç”¨çš„SparkContextåˆ›å»ºSparkSessionã€‚ä¸‹é¢ä¾‹å­ä½¿ç”¨DataFrameså’ŒSQLç”Ÿæˆå•è¯è®¡æ•°ã€‚æ¯ä¸ªRDDéƒ½è½¬æ¢ä¸ºDataFrameï¼Œæ³¨å†Œä¸ºä¸´æ—¶è¡¨åä½¿ç”¨SQLè¿›è¡ŒæŸ¥è¯¢ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;valÂ words:Â DStream[String]Â =&lt;br/&gt;&lt;br/&gt;words.foreachRDDÂ {Â rddÂ =&amp;gt;&lt;br/&gt;&lt;br/&gt;valÂ sparkÂ =Â SparkSession.builder.config(rdd.sparkContext.getConf).getOrCreate()&lt;br/&gt;&lt;br/&gt;importÂ spark.implicits._&lt;br/&gt;&lt;br/&gt;valÂ wordsDataFrameÂ =Â rdd.toDF(&lt;span&gt;&quot;word&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;wordsDataFrame.createOrReplaceTempView(&lt;span&gt;&quot;words&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;valÂ wordCountsDataFrameÂ =Â spark.sql(&lt;span&gt;&quot;selectÂ word,Â count(*)Â asÂ totalÂ fromÂ wordsÂ groupÂ byÂ word&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;wordCountsDataFrame.show()&lt;br/&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Spark-shellæµå¤„ç†&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿›å…¥spark-shellåå°±é»˜è®¤è·å¾—äº†çš„SparkConextï¼Œå³scï¼Œä»SparkConfå¯¹è±¡åˆ›å»ºStreamingContextå¯¹è±¡ï¼Œspark-shellä¸­åˆ›å»ºStreamingContextå¯¹è±¡å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;scala&amp;gt;Â importÂ org.apache.spark.streaming._&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ sscÂ =Â newÂ StreamingContext(sc,Â Seconds(1))&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæ˜¯ç¼–å†™ä¸€ä¸ªç‹¬ç«‹çš„Spark Streamingç¨‹åºï¼Œè€Œä¸æ˜¯åœ¨spark-shellä¸­è¿è¡Œï¼Œåˆ™éœ€è¦é€šè¿‡å¦‚ä¸‹æ–¹å¼åˆ›å»ºStreamingContextå¯¹è±¡ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;importÂ org.apache.spark._&lt;br/&gt;&lt;br/&gt;importÂ org.apache.spark.streaming._&lt;br/&gt;&lt;br/&gt;valÂ confÂ =Â newÂ SparkConf().setAppName(&lt;span&gt;&quot;TestDStream&quot;&lt;/span&gt;).setMaster(&lt;span&gt;&quot;local[2]&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;valÂ sscÂ =Â newÂ StreamingContext(conf,Â Seconds(1))&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æ–‡ä»¶æµ&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ–‡ä»¶æµå¯ä»¥è¯»å–æœ¬æœºæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥è¯»å–è¯»å–HDFSä¸Šæ–‡ä»¶ï¼Œå¦‚æœéƒ¨ç½²çš„on yarnæ¨¡å¼çš„Sparkï¼Œåˆ™å¯åŠ¨spark-shellé»˜è®¤è¯»å–HDFSä¸Šå¯¹åº”çš„: hdfs:xxxx/user/xx/ ä¸‹çš„æ–‡ä»¶ï¼›&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;scala&amp;gt;Â importÂ org.apache.spark.streaming._&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ sscÂ =Â newÂ StreamingContext(sc,Â Seconds(5))&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ linesÂ =Â ssc.textFileStream(&lt;span&gt;&quot;hdfs://xxx/yzg_test.txt&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ CountsÂ =Â lines.flatMap(_.split(&lt;span&gt;&quot;Â &quot;&lt;/span&gt;)).map((_,1)).reduceByKey(_Â +Â _)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â Counts.saveAsTextFiles(&lt;span&gt;&quot;hdfs://xxx/bendi&quot;&lt;/span&gt;))&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â ssc.start()&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â ssc.awaitTermination()&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â ssc.stop()&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»¥ä¸Šä»£ç åœ¨spark-shellä¸­è¿è¡Œåï¼Œæ¯éš”5ç§’è¯»å–hdfsä¸Šçš„æ–‡ä»¶å¹¶è¿›è¡Œè¯é¢‘ç»Ÿè®¡åå†™å…¥åˆ°hdfsä¸­çš„â€œbendi-æ—¶é—´æˆ³â€æ–‡ä»¶å¤¹ä¸‹ï¼Œç›´åˆ°ssc.stop()ï¼›Counts.saveAsTextFiles(&quot;file://xxx/bendi&quot;))å’ŒCounts.printåˆ†åˆ«å†™æœ¬åœ°å’Œstdè¾“å‡ºï¼›&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Socketå¥—æ¥å­—æµ&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Spark Streamingå¯ä»¥é€šè¿‡Socketç«¯å£å®æ—¶ç›‘å¬å¹¶æ¥æ”¶æ•°æ®è®¡ç®—ï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;driverç«¯åˆ›å»ºStreamingContextå¯¹è±¡ï¼Œå¯åŠ¨ä¸Šä¸‹æ–‡æ—¶ä¾æ¬¡åˆ›å»ºJobSchedulerå’ŒReceiverTrackerï¼Œå¹¶è°ƒç”¨ä»–ä»¬çš„startæ–¹æ³•ã€‚ReceiverTrackeråœ¨startæ–¹æ³•ä¸­å‘é€å¯åŠ¨æ¥æ”¶å™¨æ¶ˆæ¯ç»™è¿œç¨‹Executorï¼Œæ¶ˆæ¯å†…éƒ¨å«æœ‰ServerSocketçš„åœ°å€ä¿¡æ¯ã€‚åœ¨executorä¸€ä¾§ï¼Œç”±Receiver TrackerEndpointç»ˆç«¯æ¥å—æ¶ˆæ¯ï¼ŒæŠ½å–æ¶ˆæ¯å†…å®¹ï¼Œåˆ©ç”¨sparkContextç»“åˆæ¶ˆæ¯å†…å®¹åˆ›å»ºReceiverRDDå¯¹è±¡ï¼Œæœ€åæäº¤rddç»™sparké›†ç¾¤ã€‚åœ¨ä»£ç å®ç°ä¸Šï¼Œä½¿ç”¨nc â€“lk 9999 å¼€å¯ åœ°å€172.22.241.184ä¸»æœºçš„9999ç›‘å¬ç«¯å£ï¼Œå¹¶æŒç»­å¾€é‡Œé¢å†™æ•°æ®ï¼›ä½¿ç”¨spark-shellå®ç°ç›‘å¬ç«¯å£ä»£ç å¦‚ä¸‹ï¼Œè¾“å…¥æºä¸ºsocketæºï¼Œè¿›è¡Œç®€å•çš„è¯é¢‘ç»Ÿè®¡åï¼Œç»Ÿè®¡ç»“æœè¾“å‡ºåˆ°HDFSæ–‡ä»¶ç³»ç»Ÿï¼›&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;scala&amp;gt;Â importÂ org.apache.spark._&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â importÂ org.apache.spark.streaming._&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â importÂ org.apache.spark.storage.StorageLevel&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ sscÂ =Â newÂ StreamingContext(sc,Â Seconds(5))&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ linesÂ =Â ssc.socketTextStream(&lt;span&gt;&quot;172.22.241.184&quot;&lt;/span&gt;,Â 9999,Â StorageLevel.MEMORY_AND_DISK_SER)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ wordCountsÂ =Â lines.flatMap(_.split(&lt;span&gt;&quot;Â &quot;&lt;/span&gt;)).map((_,1)).reduceByKey(_Â +Â _)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â wordCounts.saveAsTextFiles(&lt;span&gt;&quot;hdfs://xxx/bendi-socket&quot;&lt;/span&gt;))&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â ssc.start()&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â ssc.awaitTermination()&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â ssc.stop()&lt;br/&gt;Â &lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Kafkaæµï¼ˆçª—å£ï¼‰&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Kafkaå’ŒFlumeç­‰é«˜çº§è¾“å…¥æºéœ€è¦ä¾èµ–ç‹¬ç«‹çš„åº“ï¼ˆjaræ–‡ä»¶ï¼‰ï¼Œå¦‚æœä½¿ç”¨spark-shellè¯»å–kafkaç­‰é«˜çº§è¾“å…¥æºï¼Œéœ€è¦å°†å¯¹åº”çš„ä¾èµ–jaråŒ…æ”¾åœ¨sparkçš„ä¾èµ–æ–‡ä»¶å¤¹libä¸‹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ ¹æ®å½“å‰ä½¿ç”¨çš„kafkaç‰ˆæœ¬ï¼Œé€‚é…æ‰€éœ€è¦çš„spark-streaming-kafkaä¾èµ–çš„ç‰ˆæœ¬ï¼Œåœ¨mavenä»“åº“ä¸‹è½½ï¼Œåœ°å€å¦‚ä¸‹ï¼šhttps://mvnrepository.com/artifact/org.apache.spark/spark-streaming-kafka_2.10/1.2.1&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°†å¯¹åº”çš„ä¾èµ–jaråŒ…æ”¾åœ¨CDHçš„sparkçš„ä¾èµ–æ–‡ä»¶å¤¹libä¸‹ï¼Œé€šè¿‡å¼•å…¥åŒ…å†…ä¾èµ–éªŒè¯æ˜¯å¦æˆåŠŸï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;br/&gt;scala&amp;gt;Â importÂ org.apache.spark._&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â importÂ org.apache.spark.streaming._&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â importÂ org.apache.spark.streaming.kafka._&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ sscÂ =Â newÂ StreamingContext(sc,Â Seconds(5))&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â ssc.checkpoint(&lt;span&gt;&quot;hdfs://usr/spark/kafka/checkpoint&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ zkQuorumÂ =Â &lt;span&gt;&quot;172.22.241.186:2181&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ groupÂ =Â &lt;span&gt;&quot;test-consumer-group&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ topicsÂ =Â &lt;span&gt;&quot;yzg_spark&quot;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ numThreadsÂ =Â 1&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ topicMapÂ =topics.split(&lt;span&gt;&quot;,&quot;&lt;/span&gt;).map((_,numThreads.toInt)).toMap&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ lineMapÂ =Â KafkaUtils.createStream(ssc,zkQuorum,group,topicMap)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ pairÂ =Â lineMap.map(_._2).flatMap(_.split(&lt;span&gt;&quot;Â &quot;&lt;/span&gt;)).map((_,1))&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â valÂ wordCountsÂ =Â pair.reduceByKeyAndWindow(_Â +Â _,_Â -_,Minutes(2),Seconds(10),2)&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â wordCounts.print&lt;br/&gt;&lt;br/&gt;scala&amp;gt;Â ssc.start&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;updateStateByKeyæ“ä½œ&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“Spark Streamingéœ€è¦è·¨æ‰¹æ¬¡é—´ç»´æŠ¤çŠ¶æ€æ—¶ï¼Œå°±å¿…é¡»ä½¿ç”¨updateStateByKeyæ“ä½œã€‚ä»¥è¯é¢‘ç»Ÿè®¡ä¸ºä¾‹ï¼Œå¯¹äºæœ‰çŠ¶æ€è½¬æ¢æ“ä½œè€Œè¨€ï¼Œå½“å‰æ‰¹æ¬¡çš„è¯é¢‘ç»Ÿè®¡æ˜¯åœ¨ä¹‹å‰æ‰¹æ¬¡çš„è¯é¢‘ç»Ÿè®¡ç»“æœçš„åŸºç¡€ä¸Šè¿›è¡Œä¸æ–­ç´¯åŠ ï¼Œæ‰€ä»¥æœ€ç»ˆç»Ÿè®¡å¾—åˆ°çš„è¯é¢‘æ˜¯æ‰€æœ‰æ‰¹æ¬¡çš„å•è¯æ€»çš„è¯é¢‘ç»Ÿè®¡ç»“æœã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;valÂ updateFuncÂ =Â (values:Â Seq[Int],Â state:Â Option[Int])Â =&amp;gt;Â {&lt;br/&gt;valÂ currentCountÂ =Â values.foldLeft(0)(_Â +Â _)&lt;br/&gt;&lt;br/&gt;valÂ previousCountÂ =Â state.getOrElse(0)&lt;br/&gt;&lt;br/&gt;Some(currentCountÂ +Â previousCount)&lt;br/&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ç°ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;importÂ org.apache.spark._&lt;br/&gt;&lt;br/&gt;importÂ org.apache.spark.streaming._&lt;br/&gt;&lt;br/&gt;importÂ org.apache.spark.storage.StorageLevel&lt;br/&gt;&lt;br/&gt;valÂ sscÂ =Â newÂ StreamingContext(sc,Â Seconds(5))&lt;br/&gt;&lt;br/&gt;ssc.checkpoint(&lt;span&gt;&quot;hdfs:172.22.241.184:8020//usr/spark/checkpoint&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;valÂ linesÂ =Â ssc.socketTextStream(&lt;span&gt;&quot;172.22.241.184&quot;&lt;/span&gt;,Â 9999,Â StorageLevel.MEMORY_AND_DISK_SER)&lt;br/&gt;&lt;br/&gt;valÂ wordCountsÂ =Â lines.flatMap(_.split(&lt;span&gt;&quot;Â &quot;&lt;/span&gt;)).map((_,1)).updateStateByKey[Int](updateFunc)&lt;br/&gt;&lt;br/&gt;wordCounts.saveAsTextFiles(&lt;span&gt;&quot;hdfs:172.22.241.184:8020//user/spark/bendi-socket&quot;&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;ssc.start()&lt;br/&gt;&lt;br/&gt;ssc.awaitTermination()&lt;br/&gt;&lt;br/&gt;ssc.stop()&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt; &lt;/span&gt;&lt;span/&gt;&lt;span&gt;StreamingåŒKafkaäº¤äº’&lt;/span&gt;&lt;span/&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Dstreamåˆ›å»º&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…³äºSparkStreamingå®æ—¶è®¡ç®—æ¡†æ¶å®æ—¶åœ°è¯»å–kafkaä¸­çš„æ•°æ®ç„¶åè¿›è¡Œè®¡ç®—ï¼Œåœ¨spark1.3ç‰ˆæœ¬åkafkaUtilsæä¾›ä¸¤ç§Dstreamåˆ›å»ºæ–¹æ³•ï¼Œä¸€ç§ä¸ºKafkaUtils.createDstreamï¼Œå¦ä¸€ç§ä¸ºKafkaUtils.createDirectStreamã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;KafkaUtils.createDstreamæ–¹å¼&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶æ„é€ å‡½æ•°ä¸ºKafkaUtils.createDstream(ssc,[zk], [consumer group id], [per-topic,partitions] )ï¼Œä½¿ç”¨receiversæ¥æ¥æ”¶æ•°æ®ï¼Œåˆ©ç”¨çš„æ˜¯Kafkaé«˜å±‚æ¬¡çš„æ¶ˆè´¹è€…apiï¼Œå¯¹äºæ‰€æœ‰çš„receiversæ¥æ”¶åˆ°çš„æ•°æ®å°†ä¼šä¿å­˜åœ¨Spark executorsä¸­ï¼Œç„¶åé€šè¿‡Spark Streamingå¯åŠ¨jobæ¥å¤„ç†è¿™äº›æ•°æ®ï¼Œé»˜è®¤ä¼šä¸¢å¤±ï¼Œå¯å¯ç”¨WALæ—¥å¿—ï¼Œå®ƒåŒæ­¥å°†æ¥å—åˆ°æ•°æ®ä¿å­˜åˆ°åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿä¸Šæ¯”å¦‚HDFSã€‚æ‰€ä»¥æ•°æ®åœ¨å‡ºé”™çš„æƒ…å†µä¸‹å¯ä»¥æ¢å¤å‡ºæ¥ã€‚&lt;img data-ratio=&quot;0.7411545623836127&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z2DApiaibzMicicOqmeSH8neNob7fheLeK3mib7OUvyA6EARvvp0ChZgpQgln6hZCj5nmhUTzFF5zDvPIJLibTdVzQTA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;537&quot;/&gt;Aã€åˆ›å»ºä¸€ä¸ªreceiveræ¥å¯¹kafkaè¿›è¡Œå®šæ—¶æ‹‰å–æ•°æ®ï¼Œsscçš„RDDåˆ†åŒºå’ŒKafkaçš„topicåˆ†åŒºä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œæ•…å¦‚æœå¢åŠ ç‰¹å®šä¸»æ¶ˆè´¹çš„çº¿ç¨‹æ•°ä»…ä»…æ˜¯å¢åŠ ä¸€ä¸ªreceiverä¸­æ¶ˆè´¹topicçš„çº¿ç¨‹æ•°ï¼Œå¹¶ä¸å¢åŠ sparkçš„å¹¶è¡Œå¤„ç†æ•°æ®æ•°é‡ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Bã€å¯¹äºä¸åŒçš„groupå’Œtopicå¯ä»¥ä½¿ç”¨å¤šä¸ªreceiversåˆ›å»ºä¸åŒçš„DStream&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Cã€å¦‚æœå¯ç”¨äº†WAL(spark.streaming.receiver.writeAheadLog.enable=true)&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŒæ—¶éœ€è¦è®¾ç½®å­˜å‚¨çº§åˆ«(é»˜è®¤StorageLevel.MEMORY_AND_DISK_SER_2)ï¼Œå³KafkaUtils.createStream(â€¦.,StorageLevel.MEMORY_AND_DISK_SER)&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;KafkaUtils.createDirectStreamæ–¹å¼&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨spark1.3ä¹‹åï¼Œå¼•å…¥äº†Directæ–¹å¼ï¼Œä¸åŒäºReceiverçš„æ–¹å¼ï¼ŒDirectæ–¹å¼æ²¡æœ‰receiverè¿™ä¸€å±‚ï¼Œå…¶ä¼šå‘¨æœŸæ€§çš„è·å–Kafkaä¸­æ¯ä¸ªtopicçš„æ¯ä¸ªpartitionä¸­çš„æœ€æ–°offsetsï¼Œä¹‹åæ ¹æ®è®¾å®šçš„maxRatePerPartitionæ¥å¤„ç†æ¯ä¸ªbatchã€‚å¦‚å›¾ï¼š&lt;img data-ratio=&quot;0.7015209125475285&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/z2DApiaibzMicicOqmeSH8neNob7fheLeK3mNbXgZeJJtTicIrrrcvbjCNYLicoOiak6hMbKbT5dls4YU3g7ChrTxHuYA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;526&quot;/&gt;è¿™ç§æ–¹æ³•ç›¸è¾ƒäºReceiveræ–¹å¼çš„ä¼˜åŠ¿åœ¨äºï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç®€åŒ–çš„å¹¶è¡Œï¼šåœ¨Receiverçš„æ–¹å¼ä¸­æˆ‘ä»¬æåˆ°åˆ›å»ºå¤šä¸ªReceiverä¹‹ååˆ©ç”¨unionæ¥åˆå¹¶æˆä¸€ä¸ªDstreamçš„æ–¹å¼æé«˜æ•°æ®ä¼ è¾“å¹¶è¡Œåº¦ã€‚è€Œåœ¨Directæ–¹å¼ä¸­ï¼ŒKafkaä¸­çš„partitionä¸RDDä¸­çš„partitionæ˜¯ä¸€ä¸€å¯¹åº”çš„å¹¶è¡Œè¯»å–Kafkaæ•°æ®ï¼Œè¿™ç§æ˜ å°„å…³ç³»ä¹Ÿæ›´åˆ©äºç†è§£å’Œä¼˜åŒ–ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é«˜æ•ˆï¼šåœ¨Receiverçš„æ–¹å¼ä¸­ï¼Œä¸ºäº†è¾¾åˆ°0æ•°æ®ä¸¢å¤±éœ€è¦å°†æ•°æ®å­˜å…¥Write Ahead Logä¸­ï¼Œè¿™æ ·åœ¨Kafkaå’Œæ—¥å¿—ä¸­å°±ä¿å­˜äº†ä¸¤ä»½æ•°æ®ï¼Œæµªè´¹ï¼è€Œç¬¬äºŒç§æ–¹å¼ä¸å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Œåªè¦æˆ‘ä»¬Kafkaçš„æ•°æ®ä¿ç•™æ—¶é—´è¶³å¤Ÿé•¿ï¼Œæˆ‘ä»¬éƒ½èƒ½å¤Ÿä»Kafkaè¿›è¡Œæ•°æ®æ¢å¤ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç²¾ç¡®ä¸€æ¬¡ï¼šåœ¨Receiverçš„æ–¹å¼ä¸­ï¼Œä½¿ç”¨çš„æ˜¯Kafkaçš„é«˜é˜¶APIæ¥å£ä»Zookeeperä¸­è·å–offsetå€¼ï¼Œè¿™ä¹Ÿæ˜¯ä¼ ç»Ÿçš„ä»Kafkaä¸­è¯»å–æ•°æ®çš„æ–¹å¼ï¼Œä½†ç”±äºSpark Streamingæ¶ˆè´¹çš„æ•°æ®å’ŒZookeeperä¸­è®°å½•çš„offsetä¸åŒæ­¥ï¼Œè¿™ç§æ–¹å¼å¶å°”ä¼šé€ æˆæ•°æ®é‡å¤æ¶ˆè´¹ã€‚è€Œç¬¬äºŒç§æ–¹å¼ï¼Œç›´æ¥ä½¿ç”¨äº†ç®€å•çš„ä½é˜¶Kafka APIï¼ŒOffsetsåˆ™åˆ©ç”¨Spark Streamingçš„checkpointsè¿›è¡Œè®°å½•ï¼Œæ¶ˆé™¤äº†è¿™ç§ä¸ä¸€è‡´æ€§ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤æ–¹æ³•ç¼ºç‚¹æ˜¯å®ƒä¸ä¼šæ›´æ–°Zookeeperä¸­çš„åç§»é‡ï¼Œå› æ­¤åŸºäºZookeeperçš„Kafkaç›‘è§†å·¥å…·å°†ä¸ä¼šæ˜¾ç¤ºè¿›åº¦ã€‚ä½†æ˜¯æ‚¨å¯ä»¥åœ¨æ¯ä¸ªæ‰¹å¤„ç†ä¸­è®¿é—®æ­¤æ–¹æ³•å¤„ç†çš„åç§»é‡ï¼Œå¹¶è‡ªè¡Œæ›´æ–°Zookeeperã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä½ç½®ç­–ç•¥&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‚ç…§å®˜æ–¹çš„APIæ–‡æ¡£åœ°å€ï¼šhttp://spark.apache.org/docs/latest/streaming-kafka-0-10-integration.htmlï¼Œä½ç½®ç­–ç•¥æ˜¯ç”¨æ¥æ§åˆ¶ç‰¹å®šçš„ä¸»é¢˜åˆ†åŒºåœ¨å“ªä¸ªæ‰§è¡Œå™¨ä¸Šæ¶ˆè´¹çš„ï¼Œåœ¨executoré’ˆå¯¹ä¸»é¢˜åˆ†åŒºå¦‚ä½•å¯¹æ¶ˆè´¹è€…è¿›è¡Œè°ƒåº¦ï¼Œå¹¶ä¸”ä½ç½®çš„é€‰æ‹©æ˜¯ç›¸å¯¹çš„ï¼Œä½ç½®ç­–ç•¥æœ‰ä¸‰ç§æ–¹æ¡ˆï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;1ã€PreferBrokersï¼šé¦–é€‰kafkaæœåŠ¡å™¨ï¼Œåªæœ‰åœ¨kafkaæœåŠ¡å™¨å’Œexecutorä½äºåŒä¸€ä¸»æœºå¯ä»¥ä½¿ç”¨è¯¥ç­–ç•¥ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;2ã€PreferConsistentï¼šé¦–é€‰ä¸€è‡´æ€§ï¼Œå¤šæ•°æ—¶å€™é‡‡ç”¨è¯¥æ–¹å¼ï¼Œåœ¨æ‰€æœ‰å¯ç”¨çš„æ‰§è¡Œå™¨ä¸Šå‡åŒ€åˆ†é…kakfaçš„ä¸»é¢˜çš„æ‰€æœ‰åˆ†åŒºï¼Œèƒ½å¤Ÿç»¼åˆåˆ©ç”¨é›†ç¾¤çš„è®¡ç®—èµ„æºã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3ã€PreferFixedï¼šé¦–é€‰å›ºå®šæ¨¡å¼ï¼Œå¦‚æœè´Ÿè½½ä¸å‡è¡¡å¯ä»¥ä½¿ç”¨è¯¥ç­–ç•¥æ”¾ç½®åœ¨ç‰¹å®šèŠ‚ç‚¹ä½¿ç”¨æŒ‡å®šçš„ä¸»é¢˜åˆ†åŒºï¼›è¯¥é…ç½®æ˜¯æ‰‹åŠ¨æ§åˆ¶æ–¹æ¡ˆï¼Œè‹¥æ²¡æœ‰æ˜¾å¼æŒ‡å®šçš„åˆ†åŒºä»ç„¶é‡‡ç”¨(2)æ–¹æ¡ˆã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æ¶ˆè´¹ç­–ç•¥&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¶ˆè´¹è€…ç­–ç•¥æ˜¯æ§åˆ¶å¦‚ä½•åˆ›å»ºå’Œé…åˆ¶æ¶ˆè´¹è€…å¯¹è±¡æˆ–è€…å¦‚ä½•å¯¹Kafkaä¸Šçš„æ¶ˆæ¯è¿›è¡Œæ¶ˆè´¹ç•Œå®šï¼Œæ¯”å¦‚t1ä¸»é¢˜çš„åˆ†åŒº0å’Œ1ï¼Œæˆ–è€…æ¶ˆè´¹ç‰¹å®šåˆ†åŒºä¸Šçš„ç‰¹å®šæ¶ˆæ¯æ®µã€‚è¯¥ç±»å¯æ‰©å±•ï¼Œè‡ªè¡Œå®ç°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;1ã€ConsumerStrategies.Assignï¼šæŒ‡å®šå›ºå®šçš„åˆ†åŒºé›†åˆï¼›&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;defÂ Assign[K,Â V](&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â topicPartitions:Â Iterable[TopicPartition],&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â kafkaParams:Â collection.Map[String,Â Object],&lt;br/&gt;&lt;br/&gt;Â Â Â Â Â Â offsets:Â collection.Map[TopicPartition,Â Long])&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;2ã€ConsumerStrategies.Subscribeï¼šå…è®¸æ¶ˆè´¹è®¢é˜…å›ºå®šçš„ä¸»é¢˜é›†åˆï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3ã€ConsumerStrategies.SubscribePatternï¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æŒ‡å®šæ„Ÿå…´è¶£çš„ä¸»é¢˜é›†åˆã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt; &lt;/span&gt;&lt;span/&gt;&lt;span&gt;Spark Streamingå¼€å‘&lt;/span&gt;&lt;span/&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;IDEAä½œä¸ºå¸¸ç”¨çš„å¼€å‘å·¥å…·ä½¿ç”¨mavenè¿›è¡Œä¾èµ–åŒ…çš„ç»Ÿä¸€ç®¡ç†ï¼Œé…ç½®Scalaçš„å¼€å‘ç¯å¢ƒï¼Œè¿›è¡ŒSpark Streamingçš„APIå¼€å‘ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸‹è½½å¹¶ç ´è§£IDEAï¼Œå¹¶åŠ å…¥æ±‰åŒ–çš„åŒ…åˆ°libï¼Œé‡å¯ç”Ÿæ•ˆï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨IDEAä¸­å¯¼å…¥ç¦»çº¿çš„Scalaæ’ä»¶ï¼šéœ€è¦ç¡®ä¿å½“å‰winä¸»æœºä¸Šå·²ç»ä¸‹è½½å®‰è£…Scalaå¹¶è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œé¦–å…ˆä¸‹è½½IDEAçš„Scalaæ’ä»¶ï¼Œæ— é¡»è§£å‹ï¼Œç„¶åå°†å…¶æ·»åŠ åˆ°IDEAä¸­ï¼Œå…·ä½“ä¸ºnew---setting--plugins--&quot;è¾“å…¥scala&quot;--install plugin from diskï¼›&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Mavenå¿«æ·é”®&lt;span/&gt;&lt;/h3&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;shift&lt;/span&gt;é”®å¤šæ¬¡------æŸ¥æ‰¾ç±»å’Œæ’ä»¶ï¼›&lt;br/&gt;&lt;br/&gt;&lt;span&gt;shift&lt;/span&gt;+ctrl+enter-------ç»“æŸå½“å‰è¡Œï¼Œè‡ªåŠ¨è¡¥å…¨åˆ†å·ï¼›&lt;br/&gt;&lt;br/&gt;&lt;span&gt;shift&lt;/span&gt;+alter+s-----------settingè®¾ç½®&lt;br/&gt;&lt;br/&gt;alter+enter-----------è¡¥å…¨æŠ›å‡ºçš„å¼‚å¸¸&lt;br/&gt;&lt;br/&gt;alter+insert---------è‡ªåŠ¨ç”Ÿæˆgetã€&lt;span&gt;set&lt;/span&gt;ã€æ„é€ å‡½æ•°ç­‰ï¼›&lt;br/&gt;&lt;br/&gt;Ctrl+XÂ --------------åˆ é™¤å½“å‰è¡Œ&lt;br/&gt;&lt;br/&gt;ctrl+r----------------æ›¿æ¢&lt;br/&gt;&lt;br/&gt;ctrl+/----------------å¤šè¡Œä»£ç åˆ†è¡Œæ³¨é‡Šï¼Œæ¯è¡Œä¸€ä¸ªæ³¨é‡Šç¬¦å·&lt;br/&gt;&lt;br/&gt;ctrl+&lt;span&gt;shift&lt;/span&gt;+/---------å¤šè¡Œä»£ç æ³¨é‡Šåœ¨ä¸€ä¸ªå—é‡Œï¼Œåªåœ¨å¼€å¤´å’Œç»“å°¾æœ‰æ³¨é‡Šç¬¦å·&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä»»åŠ¡æäº¤&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ–°å»ºmavenå·¥ç¨‹ï¼šfile--new--project--maven(é€‰æ‹©quickstartæ¡†æ¶æ¨¡å‹æ–°å»º)ï¼ŒgroupIdå’ŒArtifactIDç”¨æ¥åŒºåˆ†è¯¥javaå·¥ç¨‹ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;mavenè‡ªåŠ¨ç”Ÿæˆpom.xmlé…ç½®æ–‡ä»¶ï¼Œç”¨äºå„ç§åŒ…çš„ä¾èµ–å’Œå¼•å…¥ï¼Œå¦‚æœä½¿ç”¨mavenæ‰“åŒ…ï¼Œéœ€è¦å¼•å…¥mavençš„æ‰“åŒ…æ’ä»¶ï¼šä½¿ç”¨maven-compiler-pluginã€maven-jar-pluginæ’ä»¶ï¼Œå¹¶åœ¨prom.xmlä¸­å¢åŠ æŒ‡å®šç¨‹åºå…¥å£çš„&lt;mainclass&gt;é…ç½®ï¼›å…·ä½“å¯å‚ç…§ï¼šhttps://blog.csdn.net/qq_17348297/article/details/79092383&lt;/mainclass&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°†mainClassè®¾ç½®ä¸ºHelloWorldï¼ˆä¸»ç±»ï¼‰ï¼Œç‚¹å‡»å³è¾¹çª—å£maven -&amp;gt; packageï¼Œç”ŸæˆjaråŒ…ï¼Œæ‰“åŒ…å®Œæˆåä½¿ç”¨spark-submitæŒ‡ä»¤æäº¤jaråŒ…å¹¶æ‰§è¡Œã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;spark-submitÂ --classÂ &lt;span&gt;&quot;JSONRead&quot;&lt;/span&gt;Â /usr/&lt;span&gt;local&lt;/span&gt;/spark/mycode/json/target/scala-2.11/json-project_2.11-1.0.jar&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è‹¥æœ‰cannot find main classé”™è¯¯ï¼Œéœ€è¦åˆ é™¤-class xx.jaré€‰é¡¹ï¼›è‹¥å‡ºç°â€œInvalid signature file digest for Manifest mainâ€é”™è¯¯ï¼Œåˆ™è¿è¡Œzip -d xxx.jar Â &#x27;META-INF/.SF&#x27; Â &#x27;META-INF/.RSA&#x27; Â &#x27;META-INF/*SF&#x27; æŒ‡ä»¤ï¼Œåˆ é™¤æ‰€å±jaråŒ…ä¸­.SF/.RSA/ç›¸å…³æ–‡ä»¶ã€‚ä»»åŠ¡yarnç®¡ç†å™¨æŸ¥çœ‹ä»»åŠ¡è¿è¡Œæƒ…å†µï¼›&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt; &lt;/span&gt;&lt;span/&gt;&lt;span&gt;Structured Streaming&lt;/span&gt;&lt;span/&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨Spark2.xä¸­ï¼Œsparkæ–°å¼€æ”¾äº†ä¸€ä¸ªåŸºäºDataFrameçš„æ— ä¸‹é™çš„æµå¼å¤„ç†ç»„ä»¶Structured Streamingï¼Œåœ¨è¿‡å»ä½¿ç”¨streamingæ—¶ä¸€æ¬¡å¤„ç†æ˜¯å½“å‰batchçš„æ‰€æœ‰æ•°æ®ï¼Œé’ˆå¯¹è¿™æ³¢æ•°æ®è¿›è¡Œå„ç§å¤„ç†ï¼Œå¦‚æœè¦åšä¸€äº›ç±»ä¼¼pvï¼Œuvçš„ç»Ÿè®¡ï¼Œéœ€è¦å€ŸåŠ©æœ‰çŠ¶æ€çš„stateçš„DStreamï¼Œæˆ–è€…å€ŸåŠ©ä¸€äº›åˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿï¼Œå¦‚Redisï¼Œåšä¸€äº›ç±»ä¼¼Group byçš„æ“ä½œStreamingæ˜¯éå¸¸ä¸ä¾¿çš„ï¼Œåœ¨é¢å¯¹å¤æ‚çš„æµå¼å¤„ç†åœºæ™¯æ—¶æ‰è¥Ÿè§è‚˜ï¼Œä¸”æ— æ³•æ”¯æŒåŸºäºevent_timeçš„æ—¶é—´çª—å£åšèšåˆé€»è¾‘ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨Structured Streamingä¸­ï¼ŒæŠŠæºæºä¸æ–­åˆ°æ¥çš„æ•°æ®é€šè¿‡å›ºå®šçš„æ¨¡å¼â€œè¿½åŠ â€æˆ–è€…â€œæ›´æ–°â€åˆ°æ— ä¸‹é™çš„DataFrameä¸­ã€‚å‰©ä½™çš„å·¥ä½œè·Ÿæ™®é€šçš„DataFrameä¸€æ ·ï¼Œå¯ä»¥å»mapã€filterï¼Œä¹Ÿå¯ä»¥å»groupby().count()ï¼Œç”šè‡³è¿˜å¯ä»¥æŠŠæµå¤„ç†çš„dataframeè·Ÿå…¶ä»–çš„â€œé™æ€â€DataFrameè¿›è¡Œjoinã€‚å¦å¤–ï¼Œè¿˜æä¾›äº†åŸºäºwindowæ—¶é—´çš„æµå¼å¤„ç†ã€‚æ€»ä¹‹ï¼ŒStructured Streamingæä¾›äº†å¿«é€Ÿã€å¯æ‰©å±•ã€é«˜å¯ç”¨ã€é«˜å¯é çš„æµå¼å¤„ç†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Structured Streamingæ„å»ºäºsparksqlå¼•æ“ä¹‹ä¸Šï¼Œå¯ä»¥ç”¨å¤„ç†é™æ€æ•°æ®çš„æ–¹å¼å»å¤„ç†ä½ çš„æµè®¡ç®—ï¼Œéšç€æµæ•°æ®çš„ä¸æ–­æµå…¥ï¼ŒSparksqlå¼•æ“ä¼šå¢é‡çš„è¿ç»­ä¸æ–­çš„å¤„ç†å¹¶ä¸”æ›´æ–°ç»“æœã€‚å¯ä»¥ä½¿ç”¨DataSet/DataFrameçš„APIè¿›è¡Œ streaming aggregations, event-time windows, stream-to-batch joinsç­‰ï¼Œè®¡ç®—çš„æ‰§è¡Œä¹Ÿæ˜¯åŸºäºä¼˜åŒ–åçš„sparksqlå¼•æ“ã€‚é€šè¿‡checkpointing and Write Ahead Logsè¯¥ç³»ç»Ÿå¯ä»¥ä¿è¯ç‚¹å¯¹ç‚¹ï¼Œä¸€æ¬¡å¤„ç†ï¼Œå®¹é”™æ‹…ä¿ã€‚&lt;/p&gt;&lt;span&gt;- END -&lt;/span&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>