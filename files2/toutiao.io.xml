<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>c193198bb5a187e5f0146e32766bc3e9</guid>
<title>[è¯‘] Kubernetes è°ƒåº¦è¯¦è§£</title>
<link>https://toutiao.io/k/w17gmb0</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;section&gt;&lt;span&gt;Kubernetes Scheduler æ˜¯ Kubernetes æ§åˆ¶å¹³é¢çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ã€‚å®ƒåœ¨æ§åˆ¶å¹³é¢ä¸Šè¿è¡Œï¼Œå°† Pod åˆ†é…ç»™èŠ‚ç‚¹ï¼ŒåŒæ—¶å¹³è¡¡èŠ‚ç‚¹ä¹‹é—´çš„èµ„æºåˆ©ç”¨ç‡ã€‚å°† Pod åˆ†é…ç»™æ–°èŠ‚ç‚¹åï¼Œåœ¨è¯¥èŠ‚ç‚¹ä¸Šè¿è¡Œçš„ kubelet ä¼šåœ¨ Kubernetes API ä¸­æ£€ç´¢ Pod å®šä¹‰ï¼Œæ ¹æ®èŠ‚ç‚¹ä¸Šçš„ Pod è§„èŒƒåˆ›å»ºèµ„æºå’Œå®¹å™¨ã€‚æ¢å¥è¯è¯´ï¼Œ&lt;strong&gt;Scheduler åœ¨æ§åˆ¶å¹³é¢å†…è¿è¡Œï¼Œå¹¶å°†å·¥ä½œè´Ÿè½½åˆ†é…ç»™ Kubernetes é›†ç¾¤&lt;/strong&gt;ã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;æœ¬æ–‡å°†å¯¹ Kubernetes Scheduler è¿›è¡Œæ·±å…¥ç ”ç©¶ï¼Œé¦–å…ˆæ¦‚è¿°ä¸€èˆ¬çš„è°ƒåº¦ä»¥åŠå…·æœ‰äº²å’ŒåŠ›ï¼ˆaffinityï¼‰å’Œ taint çš„é©±é€è°ƒåº¦ï¼Œç„¶åè®¨è®ºè°ƒåº¦ç¨‹åºçš„ç“¶é¢ˆä»¥åŠç”Ÿäº§ä¸­å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼Œæœ€åç ”ç©¶å¦‚ä½•å¾®è°ƒè°ƒåº¦ç¨‹åºçš„å‚æ•°ä»¥é€‚åˆé›†ç¾¤ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;K8sMeetup&lt;/strong&gt;&lt;strong/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;è°ƒåº¦ç®€ä»‹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Kubernetes è°ƒåº¦æ˜¯å°† Pod åˆ†é…ç»™é›†ç¾¤ä¸­åŒ¹é…èŠ‚ç‚¹çš„è¿‡ç¨‹ã€‚&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;Scheduler ç›‘æ§æ–°åˆ›å»ºçš„ Podï¼Œå¹¶ä¸ºå…¶åˆ†é…æœ€ä½³èŠ‚ç‚¹ã€‚å®ƒä¼šæ ¹æ® Kubernetes çš„è°ƒåº¦åŸåˆ™å’Œæˆ‘ä»¬çš„é…ç½®é€‰é¡¹é€‰æ‹©æœ€ä½³èŠ‚ç‚¹ã€‚&lt;/span&gt;&lt;span&gt;æœ€ç®€å•çš„é…ç½®é€‰é¡¹æ˜¯ç›´æ¥åœ¨Â &lt;/span&gt;&lt;code&gt;&lt;span&gt;PodSpec&lt;/span&gt;&lt;/code&gt;&lt;span&gt;Â è®¾ç½® nodeNameï¼š&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-backh=&quot;496&quot; data-backw=&quot;486&quot; data-ratio=&quot;1.0205761316872428&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1e9ia4YcKpMPIbNibX8zIXMicNiaH2O1FFcGvQ5fCgEdeE2YHzQrXVE78lsCNeYkyZ0UrBMia6qvBTBvZbXe7Ssg8cA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;486&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;ä¸Šé¢çš„ nginx pod é»˜è®¤æƒ…å†µä¸‹å°†åœ¨ node-01 ä¸Šè¿è¡Œï¼Œä½†æ˜¯ nodeName æœ‰è®¸å¤šé™åˆ¶å¯¼è‡´æ— æ³•æ­£å¸¸è¿è¡Œ Podï¼Œä¾‹å¦‚äº‘ä¸­èŠ‚ç‚¹åç§°æœªçŸ¥ã€èµ„æºèŠ‚ç‚¹ä¸è¶³ä»¥åŠèŠ‚ç‚¹ç½‘ç»œé—´æ­‡æ€§é—®é¢˜ç­‰ã€‚å› æ­¤ï¼Œé™¤äº†æµ‹è¯•æˆ–å¼€å‘æœŸé—´ï¼Œæˆ‘ä»¬æœ€å¥½ä¸ä½¿ç”¨ nodeNameã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å¦‚æœè¦åœ¨ä¸€ç»„ç‰¹å®šçš„èŠ‚ç‚¹ä¸Šè¿è¡Œ Podï¼Œå¯ä»¥ä½¿ç”¨ nodeSelectorã€‚æˆ‘ä»¬åœ¨Â &lt;/span&gt;&lt;code&gt;&lt;span&gt;PodSpec&lt;/span&gt;&lt;/code&gt;&lt;span&gt;Â ä¸­å°† nodeSelector å®šä¹‰ä¸ºä¸€ç»„é”®å€¼å¯¹ï¼š&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-backh=&quot;542&quot; data-backw=&quot;444&quot; data-ratio=&quot;1.2207207207207207&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1e9ia4YcKpMPIbNibX8zIXMicNiaH2O1FFcGlCNuib1s4oCJYXJuhD9laj0sDBytoCHg7UUVwDsxGibPhCWmcBDHfh8g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;444&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;å¯¹äºä¸Šé¢çš„ nginx podï¼ŒKubernetes Scheduler å°†æ‰¾åˆ°ä¸€ä¸ªç£ç›˜ç±»å‹ä¸º ssd çš„èŠ‚ç‚¹ã€‚å½“ç„¶ï¼Œè¯¥èŠ‚ç‚¹å¯ä»¥å…·æœ‰å…¶ä»–æ ‡ç­¾ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ Kubernetes å‚è€ƒæ–‡æ¡£ä¸­æŸ¥çœ‹æ ‡ç­¾çš„å®Œæ•´åˆ—è¡¨ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;åœ°å€ï¼š&lt;/span&gt;&lt;span&gt;https://kubernetes.io/docs/reference/kubernetes-api/labels-annotations-taints/&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;ä½¿ç”¨Â &lt;/span&gt;&lt;code&gt;&lt;span&gt;nodeSelector&lt;/span&gt;&lt;/code&gt;&lt;span&gt;Â æœ‰çº¦æŸ Pod å¯ä»¥åœ¨æœ‰ç‰¹å®šæ ‡ç­¾çš„èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚ä½†å®ƒçš„ä½¿ç”¨ä»…å—æ ‡ç­¾åŠå…¶å€¼é™åˆ¶ã€‚Kubernetes ä¸­æœ‰ä¸¤ä¸ªæ›´å…¨é¢çš„åŠŸèƒ½æ¥è¡¨è¾¾æ›´å¤æ‚çš„è°ƒåº¦éœ€æ±‚ï¼šèŠ‚ç‚¹äº²å’ŒåŠ›ï¼ˆnode affinityï¼‰ï¼Œæ ‡è®°å®¹å™¨ä»¥å°†å…¶å¸å¼•åˆ°ä¸€ç»„èŠ‚ç‚¹ä¸Šï¼›taint å’Œ tolerationï¼Œæ ‡è®°èŠ‚ç‚¹ä»¥æ’æ–¥ Podã€‚è¿™äº›åŠŸèƒ½å°†åœ¨ä¸‹é¢è®¨è®ºã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;K8sMeetup&lt;/strong&gt;&lt;strong/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;èŠ‚ç‚¹äº²å’ŒåŠ›&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;èŠ‚ç‚¹äº²å’ŒåŠ›&lt;span&gt;ï¼ˆNode Affinityï¼‰&lt;/span&gt;æ˜¯åœ¨ Pod ä¸Šå®šä¹‰çš„ä¸€ç»„çº¦æŸï¼Œç”¨äºç¡®å®šå“ªäº›èŠ‚ç‚¹é€‚åˆè¿›è¡Œè°ƒåº¦ï¼Œå³ä½¿ç”¨äº²å’Œæ€§è§„åˆ™ä¸º Pod çš„èŠ‚ç‚¹åˆ†é…å®šä¹‰ç¡¬æ€§è¦æ±‚å’Œè½¯æ€§è¦æ±‚ã€‚&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ä¾‹å¦‚å¯ä»¥å°† Pod é…ç½®ä¸ºä»…è¿è¡Œå¸¦æœ‰ GPU çš„èŠ‚ç‚¹ï¼Œå¹¶ä¸”æœ€å¥½ä½¿ç”¨ NVIDIA_TESLA_V100 è¿è¡Œæ·±åº¦å­¦ä¹ å·¥ä½œè´Ÿè½½ã€‚Scheduler ä¼šè¯„ä¼°è§„åˆ™ï¼Œå¹¶åœ¨å®šä¹‰çš„çº¦æŸå†…æ‰¾åˆ°åˆé€‚çš„èŠ‚ç‚¹ã€‚ä¸Â &lt;/span&gt;&lt;code&gt;&lt;span&gt;nodeSelectors&lt;/span&gt;&lt;/code&gt;&lt;span&gt;Â ç›¸ä¼¼ï¼ŒèŠ‚ç‚¹äº²å’Œæ€§è§„åˆ™å¯ä¸èŠ‚ç‚¹æ ‡ç­¾ä¸€èµ·ä½¿ç”¨ï¼Œä½†å®ƒæ¯”Â &lt;/span&gt;&lt;code&gt;&lt;span&gt;nodeSelectors&lt;/span&gt;&lt;/code&gt;&lt;span&gt;Â æ›´å¼ºå¤§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;æˆ‘ä»¬å¯ä»¥ä¸º podspec æ·»åŠ å››ä¸ªç›¸ä¼¼æ€§è§„åˆ™ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;requiredDuringSchedulingIgnoredDuringExecution&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;requiredDuringSchedulingRequiredDuringExecution&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;preferredDuringSchedulingIgnoredDuringExecution&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;preferredDuringSchedulingRequiredDuringExecution&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;è¿™å››ä¸ªè§„åˆ™ç”±ä¸¤ä¸ªæ¡ä»¶ç»„æˆï¼šå¿…éœ€æˆ–é¦–é€‰æ¡ä»¶ï¼Œä»¥åŠä¸¤ä¸ªé˜¶æ®µï¼šè®¡åˆ’å’Œæ‰§è¡Œã€‚&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ä»¥ required å¼€å¤´çš„è§„åˆ™æè¿°äº†å¿…é¡»æ»¡è¶³çš„ä¸¥æ ¼è¦æ±‚ã€‚ä»¥ preferred å¼€å¤´çš„è§„åˆ™æ˜¯è½¯æ€§è¦æ±‚ï¼Œå°†å¼ºåˆ¶æ‰§è¡Œä½†ä¸èƒ½ä¿è¯ã€‚è°ƒåº¦é˜¶æ®µæ˜¯æŒ‡å°† Pod é¦–æ¬¡åˆ†é…ç»™èŠ‚ç‚¹ã€‚æ‰§è¡Œé˜¶æ®µé€‚ç”¨äºåœ¨è°ƒåº¦åˆ†é…åèŠ‚ç‚¹æ ‡ç­¾å‘ç”Ÿæ›´æ”¹çš„æƒ…å†µã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å¦‚æœè§„åˆ™å£°æ˜ä¸º IgnoredDuringExecutionï¼ŒScheduler åœ¨ç¬¬ä¸€æ¬¡åˆ†é…åä¸ä¼šæ£€æŸ¥å…¶æœ‰æ•ˆæ€§ã€‚ä½†å¦‚æœä½¿ç”¨ RequiredDuringExecution æŒ‡å®šäº†è§„åˆ™ï¼ŒScheduler ä¼šé€šè¿‡å°†å®¹å™¨ç§»è‡³åˆé€‚çš„èŠ‚ç‚¹æ¥ç¡®ä¿è§„åˆ™çš„æœ‰æ•ˆæ€§ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ä»¥ä¸‹æ˜¯ç¤ºä¾‹ï¼š&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-backh=&quot;589&quot; data-backw=&quot;578&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;674&quot; data-ratio=&quot;1.0193236714975846&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1e9ia4YcKpMPIbNibX8zIXMicNiaH2O1FFcGofCRibndVXu77KHaoictKkeDibhgmuywiblyjw26V5jr2h6wzeWWz6Qliag/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1242&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;ä¸Šé¢çš„ Nginx Pod å…·æœ‰èŠ‚ç‚¹äº²å’Œæ€§è§„åˆ™ï¼Œè¯¥è§„åˆ™è®© Kubernetes Scheduler å°† Pod æ”¾ç½®åœ¨ us-east çš„èŠ‚ç‚¹ä¸Šã€‚ç¬¬äºŒæ¡è§„åˆ™æŒ‡ç¤ºä¼˜å…ˆä½¿ç”¨ us-east-1 æˆ– us-east-2ã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;ä½¿ç”¨äº²å’Œæ€§è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥è®© Kubernetes è°ƒåº¦å†³ç­–é€‚ç”¨äºè‡ªå®šä¹‰éœ€æ±‚ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;K8sMeetup&lt;/strong&gt;&lt;strong/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Taint ä¸ Toleration&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;é›†ç¾¤ä¸­å¹¶éæ‰€æœ‰ Kubernetes èŠ‚ç‚¹éƒ½ç›¸åŒã€‚æŸäº›èŠ‚ç‚¹å¯èƒ½å…·æœ‰ç‰¹æ®Šçš„ç¡¬ä»¶ï¼Œä¾‹å¦‚ GPUã€ç£ç›˜æˆ–ç½‘ç»œåŠŸèƒ½ã€‚åŒæ ·ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å°†ä¸€äº›èŠ‚ç‚¹ä¸“ç”¨äºæµ‹è¯•ã€æ•°æ®ä¿æŠ¤æˆ–ç”¨æˆ·ç»„ã€‚æˆ‘ä»¬å¯ä»¥å°† Taint æ·»åŠ åˆ°èŠ‚ç‚¹ä»¥æ’æ–¥ Podï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹æ‰€ç¤ºï¼š&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;code&gt;&lt;span&gt;kubectl taint nodes node1 test-environment=true:NoSchedule&lt;/span&gt;&lt;/code&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ä½¿ç”¨Â &lt;/span&gt;&lt;code&gt;&lt;span&gt;test-environment=true:NoScheduletaint&lt;/span&gt;&lt;/code&gt;&lt;span&gt;Â æ—¶ï¼Œé™¤éåœ¨ podspec å…·æœ‰åŒ¹é…çš„ tolerationï¼Œå¦åˆ™ Kubernetes Scheduler å°†ä¸ä¼šåˆ†é…ä»»ä½• pod ï¼š&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-backh=&quot;553&quot; data-backw=&quot;578&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;673&quot; data-ratio=&quot;0.9575757575757575&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1e9ia4YcKpMPIbNibX8zIXMicNiaH2O1FFcGicbLayoIBkdqkfx5eVguIcJLiaLtZgWTicGTicAGoW1kqKurth41yIzWog/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;660&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;taint å’Œ tolerations å…±åŒå‘æŒ¥ä½œç”¨ï¼Œè®© Kubernetes Scheduler ä¸“ç”¨äºæŸäº›èŠ‚ç‚¹å¹¶åˆ†é…ç‰¹å®š Podã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;K8sMeetup&lt;/strong&gt;&lt;strong/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;è°ƒåº¦ç“¶é¢ˆ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;å°½ç®¡ Kubernetes Scheduler èƒ½é€‰æ‹©æœ€ä½³èŠ‚ç‚¹ï¼Œä½†æ˜¯åœ¨ Pod å¼€å§‹è¿è¡Œä¹‹åï¼Œâ€œæœ€ä½³èŠ‚ç‚¹â€å¯èƒ½ä¼šæ”¹å˜ã€‚æ‰€ä»¥ä»é•¿è¿œæ¥çœ‹ï¼ŒPod çš„èµ„æºä½¿ç”¨åŠå…¶èŠ‚ç‚¹åˆ†é…å¯èƒ½å­˜åœ¨é—®é¢˜ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;èµ„æºè¯·æ±‚ï¼ˆRequestï¼‰å’Œé™åˆ¶ï¼ˆLimitï¼‰ï¼šâ€œNoisy Neighborâ€&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;â€œNoisy Neighborâ€å¹¶ä¸ç‰¹å®šäº Kubernetesã€‚ä»»ä½•å¤šç§Ÿæˆ·ç³»ç»Ÿéƒ½æ˜¯å®ƒä»¬çš„æ½œåœ¨åœ°ã€‚å‡è®¾æœ‰ä¸¤ä¸ªå®¹å™¨ A å’Œ Bï¼Œå®ƒä»¬åœ¨åŒä¸€èŠ‚ç‚¹ä¸Šè¿è¡Œã€‚å¦‚æœ Pod B è¯•å›¾é€šè¿‡æ¶ˆè€—æ‰€æœ‰ CPU æˆ–å†…å­˜æ¥åˆ›é€  noiseï¼ŒPod A å°†å‡ºç°é—®é¢˜ã€‚å¦‚æœæˆ‘ä»¬ä¸ºå®¹å™¨è®¾ç½®äº†èµ„æºè¯·æ±‚å’Œé™åˆ¶å°±èƒ½æ§åˆ¶ä½ neighborã€‚Kubernetes å°†ç¡®ä¿ä¸ºå®¹å™¨å®‰æ’å…¶è¯·æ±‚çš„èµ„æºï¼Œå¹¶ä¸”ä¸ä¼šæ¶ˆè€—è¶…å‡ºå…¶èµ„æºé™åˆ¶çš„èµ„æºã€‚å¦‚æœåœ¨ç”Ÿäº§ä¸­è¿è¡Œ Kubernetesï¼Œæœ€å¥½è®¾ç½®èµ„æºè¯·æ±‚å’Œé™åˆ¶ä»¥ç¡®ä¿ç³»ç»Ÿå¯é ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;ç³»ç»Ÿè¿›ç¨‹èµ„æºä¸è¶³&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;Kubernetes èŠ‚ç‚¹ä¸»è¦æ˜¯è¿æ¥åˆ° Kubernetes æ§åˆ¶å¹³é¢çš„è™šæ‹Ÿæœºã€‚å› æ­¤ï¼ŒèŠ‚ç‚¹ä¸Šä¹Ÿæœ‰è‡ªå·±çš„æ“ä½œç³»ç»Ÿå’Œç›¸å…³è¿›ç¨‹ã€‚å¦‚æœ Kubernetes å·¥ä½œè´Ÿè½½æ¶ˆè€—äº†æ‰€æœ‰èµ„æºï¼Œåˆ™è¿™äº›èŠ‚ç‚¹å°†æ— æ³•è¿è¡Œï¼Œå¹¶ä¼šå‘ç”Ÿå„ç§é—®é¢˜é—®é¢˜ã€‚æˆ‘ä»¬éœ€è¦åœ¨ kubelet ä¸­ä½¿ç”¨ â€“system -reserved è®¾ç½®ä¿ç•™èµ„æºï¼Œä»¥é˜²æ­¢å‘ç”Ÿè¿™ç§æƒ…å†µã€‚&lt;/span&gt;&lt;span/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;æŠ¢å æˆ–è°ƒåº¦ Pod&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å¦‚æœ Kubernetes Scheduler æ— æ³•å°† Pod è°ƒåº¦åˆ°å¯ç”¨èŠ‚ç‚¹ï¼Œåˆ™å¯ä»¥ä»èŠ‚ç‚¹æŠ¢å ï¼ˆpreemptï¼‰æˆ–é©±é€ï¼ˆevictï¼‰ä¸€äº› Pod ä»¥åˆ†é…èµ„æºã€‚å¦‚æœçœ‹åˆ° Pod åœ¨é›†ç¾¤ä¸­ç§»åŠ¨è€Œæ²¡æœ‰å‘ç°ç‰¹å®šåŸå› ï¼Œå¯ä»¥ä½¿ç”¨ä¼˜å…ˆçº§ç±»å¯¹å…¶è¿›è¡Œå®šä¹‰ã€‚åŒæ ·ï¼Œå¦‚æœæ²¡æœ‰è°ƒåº¦å¥½ Podï¼Œå¹¶ä¸”æ­£åœ¨ç­‰å¾…å…¶ä»– Podï¼Œä¹Ÿéœ€è¦æ£€æŸ¥å…¶ä¼˜å…ˆçº§ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ä»¥ä¸‹æ˜¯ç¤ºä¾‹ï¼š&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-backh=&quot;181&quot; data-backw=&quot;578&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;235&quot; data-ratio=&quot;0.31337047353760444&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1e9ia4YcKpMPIbNibX8zIXMicNiaH2O1FFcGCOy36sR7upNEKu71SbXfnVgEzSzEb31LmQKnlgcV8dKCs0jzHicGLVQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1436&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼åœ¨ podspec ä¸­ä¸ºåˆ†é…ä¼˜å…ˆçº§ï¼š&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-backh=&quot;257&quot; data-backw=&quot;578&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;328&quot; data-ratio=&quot;0.4452423698384201&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1e9ia4YcKpMPIbNibX8zIXMicNiaH2O1FFcGtdyKGib5R2OxMm4npCcnbN8rDfZNd3ib0HeD32sYdHX88Md2XIJDJmDg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1114&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;K8sMeetup&lt;/strong&gt;&lt;strong/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;è°ƒåº¦æ¡†æ¶&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;Kubernetes Scheduler å…·æœ‰å¯æ’æ‹”çš„è°ƒåº¦æ¡†æ¶æ¶æ„ï¼Œå¯å‘æ¡†æ¶æ·»åŠ ä¸€ç»„æ–°çš„æ’ä»¶ã€‚æ’ä»¶å®ç° Plugin APIï¼Œå¹¶è¢«ç¼–è¯‘åˆ°è°ƒåº¦ç¨‹åºä¸­ã€‚ä¸‹é¢æˆ‘ä»¬å°†è®¨è®ºè°ƒåº¦æ¡†æ¶çš„å·¥ä½œæµã€æ‰©å±•ç‚¹å’Œ Plugin APIã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å·¥ä½œæµå’Œæ‰©å±•ç‚¹&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;è°ƒåº¦ Pod åŒ…æ‹¬ä¸¤ä¸ªé˜¶æ®µï¼šè°ƒåº¦å‘¨æœŸï¼ˆscheduling cycleï¼‰å’Œç»‘å®šå‘¨æœŸï¼ˆbinding cycleï¼‰ã€‚åœ¨è°ƒåº¦å‘¨æœŸä¸­ï¼ŒScheduler ä¼šæ‰¾åˆ°ä¸€ä¸ªå¯ç”¨èŠ‚ç‚¹ï¼Œç„¶ååœ¨ç»‘å®šè¿‡ç¨‹ä¸­ï¼Œå°†å†³ç­–åº”ç”¨äºé›†ç¾¤ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ä¸‹å›¾è¯´æ˜äº†é˜¶æ®µå’Œæ‰©å±•ç‚¹çš„æµç¨‹ï¼š&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-backh=&quot;305&quot; data-backw=&quot;578&quot; data-ratio=&quot;0.5283203125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1e9ia4YcKpMPIbNibX8zIXMicNiaH2O1FFcGcmsVyMOa9e4SQnkCaokDFCdJtUQkDTx1oApezIm6hKq2IRbQicic4O0A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1024&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;è°ƒåº¦å·¥ä½œæµï¼ˆæ¥æºï¼šKubernetes æ–‡æ¡£ï¼‰&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;å·¥ä½œæµä¸­çš„ä»¥ä¸‹å‡ ç‚¹å¯¹æ’ä»¶æ‰©å±•å¼€æ”¾ï¼š&lt;/span&gt;&lt;/section&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;QueueSortï¼šå¯¹é˜Ÿåˆ—ä¸­çš„ Pod è¿›è¡Œæ’åº&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;PreFilterï¼šæ£€æŸ¥é¢„å¤„ç† Pod çš„ç›¸å…³ä¿¡æ¯ä»¥å®‰æ’è°ƒåº¦å‘¨æœŸ&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Filterï¼šè¿‡æ»¤ä¸é€‚åˆè¯¥ Pod çš„èŠ‚ç‚¹&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;PostFilterï¼šå¦‚æœæ‰¾ä¸åˆ°å¯ç”¨äº Pod çš„å¯è¡ŒèŠ‚ç‚¹ï¼Œè°ƒç”¨è¯¥æ’ä»¶&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;PreScoreï¼šè¿è¡Œ PreScore ä»»åŠ¡ä»¥ç”Ÿæˆä¸€ä¸ªå¯å…±äº«çŠ¶æ€ä¾› Score æ’ä»¶ä½¿ç”¨&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Scoreï¼šé€šè¿‡è°ƒç”¨æ¯ä¸ª Score æ’ä»¶å¯¹è¿‡æ»¤çš„èŠ‚ç‚¹è¿›è¡Œæ’å&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;NormalizeScoreï¼šåˆå¹¶åˆ†æ•°å¹¶è®¡ç®—èŠ‚ç‚¹çš„æœ€ç»ˆæ’å&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Reserveï¼šåœ¨ç»‘å®šå‘¨æœŸä¹‹å‰é€‰æ‹©ä¿ç•™çš„èŠ‚ç‚¹&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Permitï¼šæ‰¹å‡†æˆ–æ‹’ç»è°ƒåº¦å‘¨æœŸç»“æœ&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;PreBindï¼šæ‰§è¡Œä»»ä½•å…ˆå†³æ¡ä»¶å·¥ä½œï¼Œä¾‹å¦‚é…ç½®ç½‘ç»œå·&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;Bindï¼šå°† Pod åˆ†é…ç»™ Kubernetes API ä¸­çš„èŠ‚ç‚¹&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;PostBindï¼šé€šçŸ¥ç»‘å®šå‘¨æœŸçš„ç»“æœ&lt;/span&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;section&gt;&lt;span&gt;æ’ä»¶æ‰©å±•å®ç°äº† Plugin APIï¼Œæ˜¯ Kubernetes Scheduler çš„ä¸€éƒ¨åˆ†ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ Kubernetes å­˜å‚¨åº“ä¸­æ£€æŸ¥ã€‚æ’ä»¶åº”ä½¿ç”¨ä»¥ä¸‹åç§°è¿›è¡Œæ³¨å†Œï¼š&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-backh=&quot;98&quot; data-backw=&quot;578&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;148&quot; data-ratio=&quot;0.17002518891687657&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1e9ia4YcKpMPIbNibX8zIXMicNiaH2O1FFcGP6uWJQmoHvPNW2bS3cN6wewfpTmLnPJyjTYLACyQVYeA3wiaJL9IMlQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1588&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;æ’ä»¶è¿˜å®ç°äº†ç›¸å…³çš„æ‰©å±•ç‚¹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-backh=&quot;127&quot; data-backw=&quot;578&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;191&quot; data-ratio=&quot;0.2197265625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1e9ia4YcKpMPIbNibX8zIXMicNiaH2O1FFcGDkicliaRR19tIpibpSTiaibMpFqiaIO5icN3DbHQmllCFnCjGzNfErozonYuQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2048&quot;/&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;K8sMeetup&lt;/strong&gt;&lt;strong/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Scheduler æ€§èƒ½è°ƒæ•´&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;Kubernetes Scheduler æœ‰ä¸€ä¸ªå·¥ä½œæµæ¥æŸ¥æ‰¾å’Œç»‘å®š Pod çš„å¯è¡ŒèŠ‚ç‚¹ã€‚å½“é›†ç¾¤ä¸­çš„èŠ‚ç‚¹æ•°é‡éå¸¸å¤šæ—¶ï¼ŒScheduler çš„å·¥ä½œé‡å°†æˆå€å¢åŠ ã€‚åœ¨å¤§å‹é›†ç¾¤ä¸­ï¼Œå¯èƒ½éœ€è¦å¾ˆé•¿æ—¶é—´æ‰èƒ½æ‰¾åˆ°æœ€ä½³èŠ‚ç‚¹ï¼Œå› æ­¤è¦å¾®è°ƒè°ƒåº¦ç¨‹åºçš„æ€§èƒ½ï¼Œä»¥åœ¨å»¶è¿Ÿå’Œå‡†ç¡®æ€§ä¹‹é—´æ‰¾åˆ°æŠ˜ä¸­æ–¹æ¡ˆã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;percentageOfNodesToScore å°†é™åˆ¶èŠ‚ç‚¹çš„æ•°é‡æ¥è®¡ç®—è‡ªå·±çš„åˆ†æ•°ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒKubernetes åœ¨ 100 èŠ‚ç‚¹é›†ç¾¤çš„ 50ï¼… å’Œ 5000 èŠ‚ç‚¹é›†ç¾¤çš„ 10ï¼… ä¹‹é—´è®¾ç½®çº¿æ€§é˜ˆå€¼ã€‚é»˜è®¤æœ€å°å€¼ä¸º 5ï¼…ï¼Œå®ƒè¦ç¡®ä¿è‡³å°‘è€ƒè™‘é›†ç¾¤ä¸­ 5ï¼… èŠ‚ç‚¹çš„è°ƒåº¦ã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;ä¸‹é¢çš„ç¤ºä¾‹å±•ç¤ºäº†å¦‚ä½•é€šè¿‡æ€§èƒ½è°ƒæ•´ kube-scheduler æ¥æ‰‹åŠ¨è®¾ç½®é˜ˆå€¼ï¼š&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-backh=&quot;163&quot; data-backw=&quot;578&quot; data-cropselx1=&quot;0&quot; data-cropselx2=&quot;578&quot; data-cropsely1=&quot;0&quot; data-cropsely2=&quot;257&quot; data-ratio=&quot;0.28186714542190305&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/1e9ia4YcKpMPIbNibX8zIXMicNiaH2O1FFcG4glTLP1jy7so5frMxNRlibgevFPXHcibcpg8C3QlapxEmtDnl1f1XjQw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1114&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¦‚æœæœ‰ä¸€ä¸ªåºå¤§çš„é›†ç¾¤å¹¶ä¸” Kubernetes å·¥ä½œè´Ÿè½½ä¸èƒ½æ‰¿å— Kubernetes Scheduler å¼•èµ·çš„å»¶è¿Ÿï¼Œé‚£ä¹ˆæ›´æ”¹ç™¾åˆ†æ¯”æ˜¯ä¸ªå¥½ä¸»æ„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;&lt;strong&gt;K8sMeetup&lt;/strong&gt;&lt;strong/&gt;&lt;/span&gt;&lt;/section&gt;&lt;section data-brushtype=&quot;text&quot;&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;æ€»ç»“&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;æœ¬æ–‡æ¶µç›–äº† Kubernetes è°ƒåº¦çš„å¤§å¤šæ–¹é¢ï¼Œä» Pod å’ŒèŠ‚ç‚¹çš„é…ç½®å¼€å§‹ï¼ŒåŒ…æ‹¬ nodeSelectorã€äº²å’Œæ€§è§„åˆ™ã€taint å’Œ tolerationï¼Œç„¶åä»‹ç»äº† Kubernetes Scheduler æ¡†æ¶ã€æ‰©å±•ç‚¹ã€API ä»¥åŠå¯èƒ½å‘ç”Ÿçš„ä¸èµ„æºç›¸å…³çš„ç“¶é¢ˆï¼Œæœ€åå±•ç¤ºäº†æ€§èƒ½è°ƒæ•´è®¾ç½®ã€‚å°½ç®¡ Kubernetes Scheduler èƒ½ç®€å•åœ°å°† Pod åˆ†é…ç»™èŠ‚ç‚¹ï¼Œä½†æ˜¯äº†è§£å…¶åŠ¨æ€æ€§å¹¶å¯¹å…¶è¿›è¡Œé…ç½®ä»¥å®ç°å¯é çš„ç”Ÿäº§çº§ Kubernetes è®¾ç½®è‡³å…³é‡è¦ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;åŸæ–‡é“¾æ¥ï¼š&lt;/span&gt;&lt;span&gt;https://thenewstack.io/a-deep-dive-into-kubernetes-scheduling/&lt;/span&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>b2653ba887af1e6490e0f2992f2fb074</guid>
<title>Netflix æ˜¯æ€æ ·åšç³»ç»Ÿç›‘æ§çš„ï¼Ÿ</title>
<link>https://toutiao.io/k/n38vxll</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;section&gt;&lt;span&gt;ä½œä¸ºçŸ¥åçš„æµåª’ä½“å·¨å¤´ï¼ŒNetflix åœ¨å…¨çƒæ‹¥æœ‰è¿‘ 2 äº¿è®¢é˜…ç”¨æˆ·ï¼ŒæœåŠ¡éåŠå¤šä¸ªå›½å®¶ã€‚æœ¬æ–‡é˜è¿°äº† Netflix çš„ç³»ç»Ÿç›‘æ§å®è·µï¼šè‡ªç ” Telltaleï¼ŒæˆåŠŸè¿è¡Œå¹¶ç›‘æ§ç€ Netflix 100 å¤šä¸ªç”Ÿäº§åº”ç”¨ç¨‹åºçš„è¿è¡ŒçŠ¶å†µã€‚&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;1 éš¾å¿˜çš„ç»å†&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;ç›¸ä¿¡å¾ˆå¤šè¿ç»´äººéƒ½æœ‰è¿‡è¿™æ ·çš„ç»å†ï¼š&lt;/span&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;span&gt;ç›‘æ§ç³»ç»ŸæŸä¸ªæŒ‡æ ‡è¶…è¿‡é˜ˆå€¼ï¼Œè§¦å‘å‘Šè­¦ã€‚å¤§åŠå¤œé‡Œï¼Œä½ è¢«ç´§æ€¥å¬å”¤ã€‚åŠçç€çœ¼ï¼Œä½ æ»¡è„¸ç–‘æƒ‘ï¼šâ€œç³»ç»ŸçœŸå‡ºé—®é¢˜äº†å—ï¼Œè¿˜æ˜¯ä»…ä»…éœ€è¦è°ƒæ•´ä¸‹å‘Šè­¦ï¼Ÿä¸Šä¸€æ¬¡æœ‰äººè°ƒæ•´æˆ‘ä»¬çš„å‘Šè­¦é˜ˆå€¼æ˜¯åœ¨ä»€ä¹ˆæ—¶å€™ï¼Ÿæœ‰æ²¡æœ‰å¯èƒ½æ˜¯ä¸Šæ¸¸æˆ–è€…ä¸‹æ¸¸çš„æœåŠ¡å‡ºç°äº†é—®é¢˜ï¼Ÿâ€&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;blockquote&gt;&lt;p&gt;&lt;span&gt;é‰´äºè¿™æ˜¯ä¸€æ¬¡éå¸¸é‡è¦çš„åº”ç”¨å‘Šè­¦ï¼Œå› æ­¤ä½ ä¸å¾—ä¸ä»åºŠä¸Šçˆ¬èµ·æ¥ï¼Œè¿…é€Ÿæ‰“å¼€ç”µè„‘ï¼Œç„¶åæµè§ˆç›‘æ§ä»ªè¡¨ç›˜æ¥è¿½è¸ªé—®é¢˜æºå¤´ã€‚å¿™äº†åŠå¤©ï¼Œä½ è¿˜æ²¡ç¡®è®¤è¿™ä¸ªå‘Šè­¦æ˜¯æ¥è‡ªäºç³»ç»Ÿçš„é—®é¢˜ï¼Œä½†ä¹Ÿæ„è¯†åˆ°ï¼Œä»æµ·é‡æ•°æ®ä¸­å¯»æ‰¾çº¿ç´¢æ—¶ï¼Œæ—¶é—´æ­£åœ¨æµé€ã€‚ä½ å¿…é¡»å°½å¿«å®šä½å‘Šè­¦çš„åŸå› ï¼Œå¹¶ç¥ˆç¥·ç³»ç»Ÿç¨³å®šè¿è¡Œã€‚&lt;/span&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;span&gt;å¯¹æˆ‘ä»¬çš„ç”¨æˆ·æ¥è®²ï¼Œç¨³å¥çš„ Netflix æœåŠ¡è‡³å…³é‡è¦ã€‚å½“ä½ åä¸‹æ¥çœ‹ã€Šå…»è™ä¸ºæ‚£ã€‹æ—¶ï¼Œä½ è‚¯å®šå¸Œæœ›å®ƒèƒ½é¡ºåˆ©æ’­æ”¾ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¤šå¹´æ¥ï¼Œæˆ‘ä»¬ä»ç»å¸¸åœ¨æ·±å¤œè¢«å¬å”¤çš„å·¥ç¨‹å¸ˆé‚£é‡Œäº†è§£åˆ°åº”ç”¨ç¨‹åºç›‘æ§çš„ç—›ç‚¹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;è¿‡å¤šçš„å‘Šè­¦&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å¤ªå¤šæ»šåŠ¨æµè§ˆçš„ä»ªè¡¨ç›˜&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å¤ªå¤šçš„é…ç½®&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;è¿‡å¤šçš„ç»´æŠ¤&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;https://netflixtechblog.com/full-cycle-developers-at-netflix-a08c31f83249&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;2 Telltale&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬çš„æµåª’ä½“å›¢é˜Ÿéœ€è¦ä¸€ä¸ªå…¨æ–°çš„ç›‘æ§ç³»ç»Ÿï¼Œå¯ä»¥è®©å›¢é˜Ÿæˆå‘˜å¿«é€Ÿåœ°è¯Šæ–­å’Œä¿®å¤é—®é¢˜ï¼›å› ä¸ºåœ¨ç³»ç»Ÿå‘Šè­¦çš„ç´§æ€¥æƒ…å†µä¸‹ï¼Œæ¯ä¸€ç§’éƒ½è‡³å…³é‡è¦ï¼æˆ‘ä»¬çš„ Node å›¢é˜Ÿ éœ€è¦ä¸€ä¸ªä»…éœ€ä¸€å°æ’®äººå°±èƒ½è¿ç»´å¤§å‹é›†ç¾¤çš„ç³»ç»Ÿã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å› æ­¤ï¼Œæˆ‘ä»¬æ„å»ºäº† Telltaleã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.392&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;875&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/FE4VibF0SjfMHV4KtpyDEbKwrlyPHFqJFFcu949wWgyibjHWbObeib9Ar0hiac5ibW8EGT6ayJYiauoJljCpE6qI5vaQ/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Telltale ç›‘æ§æ—¶é—´è½´&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;Â Telltale çš„ç‰¹æ€§&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;1. æ±‡é›†ç›‘æ§æ•°æ®æºï¼Œåˆ›å»ºæ•´ä½“ç›‘æ§è§†å›¾&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Telltale æ±‡é›†äº†å„ç§ç›‘æ§æ•°æ®æºï¼Œä»è€Œèƒ½åˆ›å»ºå…³äºåº”ç”¨ç¨‹åºè¿è¡ŒçŠ¶å†µçš„æ•´ä½“ç›‘æ§è§†å›¾ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2. å¤šç»´åº¦åˆ¤æ–­åº”ç”¨ç¨‹åºçš„å¥åº·çŠ¶å†µ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Telltale å¯ä»¥é€šè¿‡å¤šä¸ªç»´åº¦åˆ¤æ–­ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„å¥åº·æƒ…å†µï¼Œè€Œæ— éœ€æ ¹æ®å•ä¸€æŒ‡æ ‡é¢‘ç¹è°ƒæ•´å‘Šè­¦é˜ˆå€¼ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;3. åŠæ—¶å‘Šè­¦&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å› ä¸ºæˆ‘ä»¬çŸ¥é“åº”ç”¨ç¨‹åºåœ¨ä»€ä¹ˆæƒ…å†µä¸‹æ˜¯æ­£å¸¸çš„ï¼Œæ‰€ä»¥èƒ½åœ¨åº”ç”¨ç¨‹åºæœ‰å¼‚å¸¸è¶‹åŠ¿æ—¶åŠæ—¶é€šçŸ¥åº”ç”¨ç¨‹åºçš„æ‰€æœ‰è€…ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;4. æ˜¾ç¤ºå…³é”®æ•°æ®&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æŒ‡æ ‡æ˜¯äº†è§£åº”ç”¨ç¨‹åºè¿è¡ŒçŠ¶æ€çš„å…³é”®ã€‚ä½†å¾ˆå¤šæ—¶å€™ï¼Œä½ æ‹¥æœ‰å¤ªå¤šçš„æŒ‡æ ‡ã€å¤ªå¤šçš„å›¾è¡¨ä»¥åŠå¤ªå¤šçš„ç›‘æ§ä»ªè¡¨ç›˜ã€‚è€Œ Telltale ä»…æ˜¾ç¤ºåº”ç”¨ç¨‹åºä¸­æœ‰ç”¨çš„ç›¸å…³æ•°æ®åŠå…¶ä¸Šæ¸¸å’Œä¸‹æ¸¸æœåŠ¡çš„æ•°æ®ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;5. ç”¨é¢œè‰²åŒºåˆ†é—®é¢˜çš„ä¸¥é‡ç¨‹åº¦&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬ä½¿ç”¨ä¸åŒçš„é¢œè‰²æ¥è¡¨ç¤ºé—®é¢˜çš„ä¸¥é‡ç¨‹åº¦ï¼ˆé™¤é€‰æ‹©é¢œè‰²ä¹‹å¤–ï¼Œè¿˜å¯ä»¥è®© Telltale æ˜¾ç¤ºä¸åŒçš„æ•°å­—ï¼‰ï¼Œä»¥ä¾¿è¿ç»´äººå‘˜ä¸€çœ¼å°±èƒ½åˆ¤æ–­å‡ºåº”ç”¨ç¨‹åºçš„è¿è¡ŒçŠ¶å†µã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;6. é«˜äº®æç¤º&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬è¿˜ä¼šå¯¹ä¸€äº›ç›‘æ§äº‹ä»¶è¿›è¡Œé«˜äº®æç¤ºï¼Œæ¯”å¦‚å±€éƒ¨åŒºåŸŸçš„ç½‘ç»œæµé‡ç–æ•£åŠå°±è¿‘çš„ æœåŠ¡éƒ¨ç½²ï¼Œè¿™äº›ä¿¡æ¯å¯¹äºå…¨é¢äº†è§£æœåŠ¡çš„å¥åº·æƒ…å†µè‡³å…³é‡è¦ï¼Œå°¤å…¶æ˜¯åœ¨çœŸæ­£å‘ç”Ÿç³»ç»Ÿæ•…éšœçš„æƒ…å†µä¸‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™å°±æ˜¯æˆ‘ä»¬çš„ Telltale ç›‘æ§ã€‚å®ƒç°å·²æˆåŠŸè¿è¡Œå¹¶æä¾›ç›‘æ§æœåŠ¡ï¼Œç›‘æ§ç€ Netflix 100 å¤šä¸ªç”Ÿäº§åº”ç”¨ç¨‹åºçš„è¿è¡ŒçŠ¶å†µã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.8022857142857143&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;875&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/FE4VibF0SjfMHV4KtpyDEbKwrlyPHFqJF7jMpgsRQZn473Pa3G9CZvyaiaNxHByfVDCbdy9s54rBAuTPicKeicibxiag/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;3åº”ç”¨ç¨‹åºå¥åº·è¯„ä¼°æ¨¡å‹&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;å¾®æœåŠ¡å¹¶éæ˜¯å­¤ç«‹å­˜åœ¨å’Œè¿è¡Œçš„ã€‚å®ƒéœ€è¦ç‰¹å®šçš„ä¾èµ–ï¼Œä¸å…¶ä»–æœåŠ¡è¿›è¡Œæ•°æ®äº¤äº’ï¼Œç”šè‡³ä½äºä¸åŒçš„AWSåŒºåŸŸã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸Šé¢çš„è°ƒç”¨å›¾æ˜¯ä¸€ä¸ªç›¸å¯¹ç®€å•çš„å›¾ï¼Œå…¶ä¸­æ¶‰åŠè®¸å¤šæœåŠ¡ï¼Œå®é™…çš„è°ƒç”¨é“¾å¯èƒ½ä¼šæ›´æ·±æ›´å¤æ‚ã€‚ä¸€ä¸ªåº”ç”¨ç¨‹åºæ˜¯ç³»ç»Ÿç”Ÿæ€çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒçš„è¿è¡ŒçŠ¶æ€å¯èƒ½ä¼šå—åˆ°ç›¸å…³å±æ€§å˜åŒ–çš„å¾®å¼±å½±å“ï¼Œä¹Ÿæœ‰å¯èƒ½ä¼šå—åˆ°åŒºåŸŸèŒƒå›´å†…æŸäº›äº‹ä»¶çš„å½±å“ä»è€Œå‘ç”Ÿæ ¹æœ¬æ€§æ”¹å˜ã€‚canaryçš„å¯åŠ¨å¯èƒ½ä¼šå¯¹åº”ç”¨ç¨‹åºäº§ç”Ÿä¸€å®šå½±å“ã€‚åœ¨ä¸€å®šç¨‹åº¦ä¸Šï¼Œä¸Šæ¸¸æˆ–ä¸‹æ¸¸æœåŠ¡çš„éƒ¨ç½²åŒæ ·ä¹Ÿå¯ä»¥å¸¦æ¥ä¸€å®šçš„å½±å“ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;https://netflixtechblog.com/automated-canary-analysis-at-netflix-with-kayenta-3260bc7acc69&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Telltale é€šè¿‡ä½¿ç”¨å¤šä¸ªç»´åº¦çš„æ•°æ®æºæ„å»ºä¸€ä¸ªä¸æ–­è‡ªæˆ‘ä¼˜åŒ–çš„æ¨¡å‹æ¥ç›‘æ§åº”ç”¨ç¨‹åºçš„å¥åº·åº¦ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;Atlas æ—¶åºæŒ‡æ ‡&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;åŒºåŸŸç½‘ç»œæµé‡ç–æ•£&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;Mantis å®æ—¶æµæ•°æ®&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;åŸºç¡€æ¶æ„å˜æ›´äº‹ä»¶&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;Canary éƒ¨ç½²åŠä½¿ç”¨&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ä¸Šã€ä¸‹æ¸¸æœåŠ¡çš„è¿è¡ŒçŠ¶å†µ&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;è¡¨å¾ QoE çš„ç›¸å…³æŒ‡æ ‡&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å‘Šè­¦å¹³å°å‘å‡ºçš„æŠ¥è­¦&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸åŒçš„æ•°æ®æºå¯¹åº”ç”¨ç¨‹åºå¥åº·åº¦çš„å½±å“æƒé‡ä¸åŒã€‚ä¾‹å¦‚ï¼Œä¸é”™è¯¯ç‡å¢åŠ ç›¸æ¯”ï¼Œå“åº”æ—¶é—´çš„å¢åŠ å¯¹åº”ç”¨ç¨‹åºçš„å½±å“è¦å°å¾ˆå¤šï¼›é”™è¯¯ä»£ç æœ‰å¾ˆå¤šï¼Œä½†æ˜¯æŸäº›ç‰¹å®šçš„é”™è¯¯ä»£ç çš„å½±å“è¦æ¯”å…¶ä»–é”™è¯¯ä»£ç çš„å½±å“å¤§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨æœåŠ¡ä¸‹æ¸¸éƒ¨ç½² canary å¯èƒ½ä¸å¦‚åœ¨ä¸Šæ¸¸éƒ¨ç½²å¸¦æ¥çš„æ•ˆæœæ˜æ˜¾&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åŒºåŸŸç½‘ç»œæµé‡è½¬ç§»æ„å‘³ç€æŸä¸ªåŒºåŸŸçš„ç½‘ç»œæµé‡é™ä¸ºé›¶è€Œå¦ä¸€ä¸ªåŒºåŸŸçš„ç½‘ç»œæµé‡ä¼šåŠ å€ã€‚ä½ å¯ä»¥æ„Ÿå—ä¸‹ä¸åŒçš„æŒ‡æ ‡å¯¹äºç›‘æ§çš„å½±å“ã€‚ç›‘æ§æŒ‡æ ‡çš„å…·ä½“å«ä¹‰å†³å®šäº†æˆ‘ä»¬åº”è¯¥å¦‚ä½•ç§‘å­¦æœ‰æ•ˆåœ°ä½¿ç”¨å®ƒæ¥è¿›è¡Œç›‘æ§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;https://netflixtechblog.com/project-nimble-region-evacuation-reimagined-d0d0568254d4&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨æ„å»ºåº”ç”¨ç¨‹åºå¥åº·çŠ¶å†µè§†å›¾æ—¶ï¼ŒTelltale è€ƒè™‘äº†æ‰€æœ‰è¿™äº›å› ç´ ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åº”ç”¨ç¨‹åºå¥åº·è¯„ä¼°æ¨¡å‹æ˜¯ Telltale çš„æ ¸å¿ƒã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;4æ™ºèƒ½ç›‘æ§&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;æ¯ä¸ªæœåŠ¡è¿ç»´äººå‘˜éƒ½çŸ¥é“å‘Šè­¦é˜ˆå€¼è°ƒæ•´çš„éš¾åº¦ã€‚å°†é˜ˆå€¼è®¾ç½®å¾—å¤ªä½ï¼Œä½ ä¼šæ”¶åˆ°å¤§é‡è™šå‡å‘Šè­¦ã€‚å¦‚æœè¿‡åº¦è¡¥å¿å¹¶æ”¾å®½å‘Šè­¦é˜ˆå€¼ï¼Œå°±ä¼šé”™è¿‡é‡è¦çš„å¼‚å¸¸è­¦å‘Šã€‚è¿™æ ·å¯¼è‡´çš„æœ€ç»ˆç»“æœæ˜¯å¯¹å‘Šè­¦ç¼ºä¹ä¿¡ä»»ã€‚Telltale å¯ä»¥å¸®åŠ©ä½ å…é™¤ä¸æ–­è°ƒæ•´ç›¸å…³é…ç½®çš„ç¹çå·¥ä½œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é€šè¿‡æä¾›å‡†ç¡®çš„å’Œä¸¥æ ¼ç®¡ç†çš„æ•°æ®æºï¼Œæˆ‘ä»¬èƒ½è®©åº”ç”¨ç¨‹åºæ‰€æœ‰è€…çš„è®¾ç½®å’Œé…ç½®è¿‡ç¨‹å˜å¾—æ›´åŠ å®¹æ˜“ã€‚è¿™äº›æ•°æ®æºé€šè¿‡æŒ‰ç…§ä¸€å®šçš„ç»„åˆåº”ç”¨åˆ°ç¨‹åºçš„é…ç½®ä¸­ï¼Œä»¥å®ç°æœ€å¸¸è§çš„æœåŠ¡ç±»å‹é…ç½®ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Telltale å¯ä»¥è‡ªåŠ¨è¿½è¸ªæœåŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä»¥æ„å»ºåº”ç”¨ç¨‹åºå¥åº·è¯„ä¼°æ¨¡å‹ä¸­çš„æ‹“æ‰‘ã€‚é€šè¿‡æ•°æ®æºç®¡ç†ä»¥åŠæ‹“æ‰‘ç›‘æµ‹ï¼Œåœ¨ä¸ç”¨ä»˜å‡ºå¾ˆå¤§çš„åŠªåŠ›æƒ…å†µä¸‹å°±èƒ½ä½¿é…ç½®ä¿æŒæœ€æ–°çŠ¶æ€ã€‚é‚£äº›éœ€è¦æ‰‹åŠ¨å®è·µçš„ä¸€äº›åœºæ™¯ä»ç„¶æ”¯æŒæ‰‹åŠ¨é…ç½®å’Œè°ƒæ•´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ²¡æœ‰ä»»ä½•ä¸€ä¸ªç‹¬ç«‹çš„ç®—æ³•å¯ä»¥é€‚ç”¨æˆ‘ä»¬æ‰€æœ‰çš„ç›‘æ§åœºæ™¯ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†æ··åˆç®—æ³•ï¼ŒåŒ…æ‹¬ç»Ÿè®¡ç®—æ³•ã€åŸºäºè§„åˆ™çš„ç®—æ³•å’Œæœºå™¨å­¦ä¹ ç®—æ³•ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸ä¹…åï¼Œæˆ‘ä»¬å°†åœ¨ Netflix Tech Blog ä¸Šå‘è¡¨ä¸€ç¯‡é’ˆå¯¹æˆ‘ä»¬ç›‘æ§ç®—æ³•çš„æ–‡ç« ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Telltale è¿˜å…·æœ‰åˆ†æå™¨ï¼Œå¯ç”¨äºè¶‹åŠ¿æ¢æµ‹æˆ–å†…å­˜æ³„æ¼ç›‘æµ‹ã€‚æ™ºèƒ½ç›‘æ§æ„å‘³ç€æˆ‘ä»¬çš„ç”¨æˆ·å¯ä»¥ä¿¡èµ–æˆ‘ä»¬çš„ç›‘æ§ç»“æœã€‚è¿™è¡¨æ˜æ•…éšœå‘ç”Ÿæ—¶ï¼Œç”¨æˆ·èƒ½æ›´å¿«åœ°å®šä½å’Œè§£å†³ç³»ç»Ÿå¼‚å¸¸é—®é¢˜ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;5æ™ºèƒ½å‘Šè­¦&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;æ™ºèƒ½ç›‘æ§å¿…ç„¶ä¼šä¿ƒè¿›æ™ºèƒ½å‘Šè­¦ã€‚å½“ Telltale æ£€æµ‹åˆ°åº”ç”¨ç¨‹åºä¸­çš„è¿è¡Œå¼‚å¸¸æ—¶ï¼Œå°±ä¼šäº§ç”Ÿå¼‚å¸¸äº‹ä»¶ã€‚å›¢é˜Ÿå¯ä»¥é€‰æ‹©é€šè¿‡ Slackã€ç”µå­é‚®ä»¶æˆ– PagerDutyï¼ˆå‡ç”±æˆ‘ä»¬çš„å†…éƒ¨å‘Šè­¦ç³»ç»Ÿæä¾›æ”¯æŒï¼‰è¿›è¡Œå‘Šè­¦ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¦‚æœè¯¥å¼‚å¸¸é—®é¢˜æ˜¯ç”±ä¸Šæ¸¸æˆ–ä¸‹æ¸¸ç³»ç»Ÿå¼•èµ·çš„ï¼Œåˆ™ Telltale çš„ä¸Šä¸‹æ–‡æ„ŸçŸ¥è·¯ç”±ä¼šæé†’æœåŠ¡å¯¹åº”çš„ç»´æŠ¤å›¢é˜Ÿã€‚æ™ºèƒ½å‘Šè­¦è¿˜æ„å‘³ç€è¿ç»´å›¢é˜Ÿé’ˆå¯¹ç‰¹å®šå¼‚å¸¸åªä¼šæ”¶åˆ°ä¸€ä¸ªé€šçŸ¥ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå‘Šè­¦é£æš´å·²ç»æˆä¸ºè¿‡å»å¼ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.4940828402366864&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;676&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/FE4VibF0SjfMHV4KtpyDEbKwrlyPHFqJFpv5YEJvVDfp4piaZ7L3RxGTbDAYDV152iacDMwiciaibAv593LWibibNAdpCg/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Slack ä¸­çš„ Telltale é€šçŸ¥ç¤ºä¾‹&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨ç³»ç»Ÿå‡ºç°é—®é¢˜æ—¶ï¼ŒæŒæ¡å‡†ç¡®çš„ä¿¡æ¯è‡³å…³é‡è¦ã€‚æˆ‘ä»¬çš„ Slack å‘Šè­¦ç¨‹åºè¿˜ä¼šå¯åŠ¨ä¸€ä¸ªåŒ…å«æœ‰å…³äº‹ä»¶ä¸Šä¸‹æ–‡ä¿¡æ¯çš„çº¿ç¨‹ï¼Œæä¾› Telltale è¯†åˆ«åˆ°çš„å¼‚å¸¸é—®é¢˜ä¿¡æ¯åŠé—®é¢˜äº§ç”Ÿçš„åŸå› ã€‚æ­£ç¡®çš„ä¸Šä¸‹æ–‡å¯ä»¥æ–¹ä¾¿æˆ‘ä»¬äº†è§£åº”ç”¨ç¨‹åºçš„å½“å‰çŠ¶æ€ï¼Œä»¥ä¾¿å€¼ç­è¿ç»´çš„å·¥ç¨‹å¸ˆèƒ½æœ‰é’ˆå¯¹æ€§çš„å®šä½å’Œä¿®å¤é—®é¢˜ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¼‚å¸¸å‘Šè­¦äº‹ä»¶ä¼šä¸æ–­å‘å±•è€Œä¸”æ‹¥æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼Œå› æ­¤åŠæ—¶æ›´æ–°äº‹ä»¶çŠ¶æ€è‡³å…³é‡è¦ã€‚å‘Šè­¦å¼‚å¸¸æ˜¯å¥½è½¬äº†è¿˜æ˜¯æ¶åŒ–äº†ï¼Ÿæ˜¯å¦è¦è€ƒè™‘æ–°çš„ç›‘æ§ä¿¡æ¯æˆ–äº‹ä»¶ï¼ŸTelltale åœ¨å½“å‰äº‹ä»¶å‘ç”Ÿæ”¹å˜æ—¶ä¼šæ›´æ–° Slack çº¿ç¨‹ã€‚ç³»ç»Ÿè¿”å›æ­£å¸¸çŠ¶æ€åï¼Œè¯¥çº¿ç¨‹å°†è¢«æ ‡è®°ä¸ºâ€œå·²è§£å†³â€ï¼Œå› æ­¤ç”¨æˆ·ä¸€çœ¼å°±èƒ½çŸ¥é“å“ªäº›å¼‚å¸¸äº‹ä»¶æ­£åœ¨å¤„ç†ä¸­ï¼Œå“ªäº›å¼‚å¸¸äº‹ä»¶å·²æˆåŠŸä¿®å¤ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™äº› Slack çº¿ç¨‹ä¸ä»…ä»…é€‚ç”¨äº Telltaleã€‚å›¢é˜Ÿè¿˜å¯ä»¥ç”¨å®ƒä»¬æ¥å…±äº«æœ‰å…³äº‹ä»¶çš„å…¶ä»–æ•°æ®ï¼Œæ–¹ä¾¿è¿›ä¸€æ­¥è§‚å¯Ÿã€ç†è®ºåˆ†æå’Œè®¨è®ºã€‚å¼‚å¸¸ä¿¡æ¯æ•°æ®å’Œè®¨è®ºå…¨éƒ¨é›†ä¸­åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œæ–¹ä¾¿è¾¾æˆé’ˆå¯¹å½“å‰å¼‚å¸¸çš„å…±è¯†ï¼Œæœ‰åˆ©äºæ›´å¿«æå‡ºé—®é¢˜çš„è§£å†³æ–¹æ¡ˆä»¥åŠå¼‚å¸¸äº‹ä»¶çš„äº‹ååˆ†æã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬è‡´åŠ›äºæé«˜ Telltale å‘Šè­¦çš„è´¨é‡ã€‚ä¸€ç§æ–¹æ³•æ˜¯å‘æˆ‘ä»¬çš„ç”¨æˆ·å­¦ä¹ ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ Slack æ¶ˆæ¯ä¸­æä¾›äº†åé¦ˆæŒ‰é’®ã€‚ç”¨æˆ·å¯ä»¥å‘Šè¯‰æˆ‘ä»¬ä»¥åæŸäº›æƒ…å†µä¸éœ€è¦å†å‘ç”Ÿå‘Šè­¦ï¼Œæˆ–æä¾›æŸäº›å‘Šè­¦ä¸åˆç†çš„åŸå› ã€‚æ™ºèƒ½å‘Šè­¦æ„å‘³ç€ç”¨æˆ·å¯ä»¥ä¿¡èµ–æˆ‘ä»¬çš„å‘Šè­¦ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.5233968804159446&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;577&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/FE4VibF0SjfMHV4KtpyDEbKwrlyPHFqJFQknyUSYJImrDt3RVA5pWGKticNCGLYFMOAJFH6jxyJGz1oSGVRxCiamw/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨ Slack çš„ Telltale é€šçŸ¥ä¸­æè¿°å¼‚å¸¸è¯¦ç»†ä¿¡æ¯çš„ä¸€ä¸ªç¤ºä¾‹&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;Â ä¸ºä»€ä¹ˆæˆ‘çš„åº”ç”¨æœåŠ¡è¿è¡ŒçŠ¶æ€æ¬ ä½³ï¼Ÿ&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;å„ç§ç±»å‹çš„ç›‘æ§æ•°æ®ã€åº”ç”¨ç¨‹åºç›¸å…³çŸ¥è¯†ä»¥åŠè·¨å¤šç§æœåŠ¡æ•°æ®çš„ç›¸å…³æ€§ï¼Œæœ‰åŠ©äº Telltale æ£€æµ‹åˆ†æåº”ç”¨ç¨‹åºè¿è¡Œå¥åº·åº¦é™ä½çš„åŸå› ã€‚è¿™äº›åŸå› åŒ…æ‹¬å®ä¾‹å¼‚å¸¸ã€ç›¸å…³ä¾èµ–çš„ç›‘æµ‹å’Œéƒ¨ç½²å¼‚å¸¸ã€æ•°æ®åº“å¼‚å¸¸æˆ–è€…ç½‘ç»œæµé‡é«˜å³°ç­‰ã€‚çªå‡ºé«˜äº®æ˜¾ç¤ºè¿™äº›å¯èƒ½çš„åŸå› å¯ä»¥å¸®åŠ©è¿ç»´äººå‘˜èŠ‚çœå¤§é‡å®è´µçš„æ—¶é—´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;6å¼‚å¸¸äº‹ä»¶ç®¡ç†&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.6765714285714286&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;875&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/FE4VibF0SjfMHV4KtpyDEbKwrlyPHFqJFxVtwF0IgQv8O409rMAiavflDHtNyz2hzVib129Mln6RbbtKZ7tDKQDGw/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Telltale å¼‚å¸¸äº‹ä»¶æ‘˜è¦çš„ä¸€ä¸ªç¤ºä¾‹&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å½“ Telltale å‘é€å‘Šè­¦æ—¶ï¼Œå®ƒè¿˜ä¼šåˆ›å»ºä¸€ä¸ªå¿«ç…§ï¼Œå…¶ä¸­å¼•ç”¨äº†ä¸æ­£å¸¸çš„ç›‘æ§ä¿¡å·æ•°æ®ã€‚éšç€æ–°ç›‘æ§ä¿¡æ¯çš„åˆ°æ¥ï¼Œä¼šå°†å…¶æ·»åŠ åˆ°æ­¤å¿«ç…§ä¸­ã€‚è¿™ç®€åŒ–äº†å›¢é˜Ÿçš„å¾ˆå¤šäº‹åå®¡æŸ¥æµç¨‹ã€‚å½“éœ€è¦å¤æŸ¥è¿‡å»çš„å¼‚å¸¸é—®é¢˜æ—¶ï¼Œâ€œåº”ç”¨ç¨‹åºäº‹ä»¶æ‘˜è¦â€åŠŸèƒ½å¯ä»¥ä»å„ä¸ªæ–¹é¢æ˜¾ç¤ºå½“å‰çš„é—®é¢˜ï¼ŒåŒ…æ‹¬ä¸€äº›å…³é”®æŒ‡æ ‡ï¼Œæ¯”å¦‚æ€»åœæœºæ—¶é—´å’Œ MTTRï¼ˆå¹³å‡è§£å†³æ—¶é—´ï¼‰ã€‚æˆ‘ä»¬å¸Œæœ›å¸®åŠ©æˆ‘ä»¬çš„å›¢é˜Ÿäº†è§£æ›´å¤šçš„å¼‚å¸¸äº‹ä»¶çš„æ¨¡å¼ï¼Œä»¥ä¾¿æé«˜æˆ‘ä»¬æœåŠ¡çš„æ•´ä½“å¯ç”¨æ€§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.8294701986754967&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;604&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/FE4VibF0SjfMHV4KtpyDEbKwrlyPHFqJFUaxfpiaGyLGVERw3nV6FYSrzKWRqyBKpiaqUaqNxI0GlQHf0Dg1VTeIQ/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é›†ç¾¤è§†å›¾ä¸‹å°†ç›¸ä¼¼å¼‚å¸¸äº‹ä»¶åˆ†ç»„&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;7éƒ¨ç½²ç›‘æ§&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;å¯ä»¥çœ‹å‡ºï¼ŒTelltale çš„åº”ç”¨ç¨‹åºå¥åº·è¯„ä¼°æ¨¡å‹åŠå…¶æ™ºèƒ½ç›‘æ§åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿä¼šå°†å…¶åº”ç”¨äºå®‰å…¨éƒ¨ç½²æ–¹é¢ã€‚æˆ‘ä»¬ä»å¼€æ”¾æºç äº¤ä»˜å¹³å° Spinnaker å¼€å§‹æµ‹è¯•ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;https://spinnaker.io/&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;éšç€ Spinnaker é€æ¸æ¨å‡ºæ–°ç‰ˆæœ¬ï¼Œæˆ‘ä»¬ä½¿ç”¨ Telltale è¿ç»­ç›‘ç›‘æ§è¿è¡Œæ–°ç‰ˆæœ¬å®ä¾‹çš„è¿è¡ŒçŠ¶æ€ã€‚æŒç»­ç›‘æ§æ„å‘³ç€æ–°éƒ¨ç½²åœ¨é—®é¢˜å‡ºç°æ—¶èƒ½è‡ªè¡Œåœæ­¢å¹¶è¿›è¡Œå›æ»šæ“ä½œã€‚è¿™æ„å‘³ç€éƒ¨ç½²å­˜åœ¨é—®é¢˜æ—¶çš„å½±å“åŠå¾„è¾ƒå°ï¼ŒæŒç»­æ—¶é—´æ›´çŸ­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.8361111111111111&quot; data-s=&quot;300,640&quot; data-type=&quot;png&quot; data-w=&quot;720&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/FE4VibF0SjfMHV4KtpyDEbKwrlyPHFqJFyhvxeQj5F99suvQBZ0anw0iaCiaHeHJhfzQjFwmVpVsk5hSibUk4h0czQ/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;strong&gt;&lt;span&gt;8 æŒç»­ä¼˜åŒ–&lt;/span&gt;&lt;/strong&gt;&lt;/section&gt;&lt;section&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;åœ¨å¤æ‚çš„ç³»ç»Ÿä¸­ï¼Œè¿è¡Œå¾®æœåŠ¡éå¸¸å…·æœ‰æŒ‘æˆ˜æ€§ã€‚Telltale çš„æ™ºèƒ½ç›‘æ§å’Œå‘Šè­¦åŠŸèƒ½å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¿ç»´äººå‘˜æé«˜ç³»ç»Ÿå¯ç”¨æ€§ã€é™ä½è¿ç»´äººå‘˜çš„åŠ³åŠ¨å¼ºåº¦å¹¶å‡å°‘å·¥ä½œäººå‘˜å¤§åŠå¤œè¢«å«é†’çš„é¢‘ç‡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬ä¸º Telltale åšåˆ°çš„è¿™äº›åŠŸèƒ½æå‡æ„Ÿåˆ°é«˜å…´ã€‚ä½†æ˜¯è¿œæ²¡æœ‰ç»“æŸï¼Œæˆ‘ä»¬ä»åœ¨ä¸æ–­æ¢ç´¢æ–°ç®—æ³•ï¼Œä»¥æé«˜å‘Šè­¦çš„å‡†ç¡®æ€§ã€‚æˆ‘ä»¬å°†åœ¨ä»¥åçš„ Netflix Tech Blog æ–‡ç« ä¸­è¯¦ç»†ä»‹ç»æˆ‘ä»¬çš„å·¥ä½œè¿›å±•&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬ä»ç„¶åœ¨å¯¹åº”ç”¨ç¨‹åºå¥åº·è¯„ä¼°æ¨¡å‹è¿›è¡Œè¿›ä¸€æ­¥è¯„ä¼°å’Œæ”¹è¿›ã€‚æˆ‘ä»¬ç›¸ä¿¡æœåŠ¡è¿è¡Œæ—¥å¿—å’Œè·Ÿè¸ªæ•°æ®ä¸­ä¼šåŒ…å«æ›´å¤šæœ‰ä»·å€¼çš„ä¿¡æ¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½é‡‡é›†åˆ°æ›´æœ‰ç”¨çš„æŒ‡æ ‡æ•°æ®ã€‚æˆ‘ä»¬å¾ˆæœŸå¾…ä¸å¹³å°å…¶ä»–å›¢é˜Ÿè¿›è¡Œåˆä½œï¼Œå…±åŒå¼€å‘è¿™äº›æ–°åŠŸèƒ½ã€‚å°†æ–°åº”ç”¨ç›‘æ§å¼•å…¥ Telltale å¯ä»¥äº«å—åˆ°å¾ˆå¥½çš„æœåŠ¡ä½“éªŒï¼Œä½†æ˜¯æ— æ³•å¾ˆå¥½çš„è¿›è¡Œæ‰©å±•ï¼Œæ‰€ä»¥æˆ‘ä»¬ç»å¯¹å¯ä»¥ä¼˜åŒ–å’Œæé«˜è‡ªæœåŠ¡çš„ç”¨æˆ·ç•Œé¢ã€‚æˆ‘ä»¬ç¡®ä¿¡ï¼Œæœ‰æ›´å¥½çš„å¯å‘å¼æ–¹æ³•èƒ½å¸®åŠ©ç”¨æˆ·æ‰¾å‡ºå½±å“æœåŠ¡å¥åº·åº¦çš„ä¸€äº›å› ç´ ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Telltale ç®€åŒ–äº†åº”ç”¨ç¨‹åºçš„ç›‘æ§ã€‚&lt;/span&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>4d7f079c79e9fcc94b4724d557f796ba</guid>
<title>API ä¸ SDKï¼šæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</title>
<link>https://toutiao.io/k/wfho1cn</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;p&gt;&lt;img data-ratio=&quot;0.4255555555555556&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/1skeHK2Gybz4EOycqR6dyly2ZAsoZlT1ncnlHcgicX6Ec1Rb80QJrKPFaNhnjXTh7z7AEn87uwYtyGHpEgIFianQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;900&quot; title=&quot;null&quot;/&gt;&lt;/p&gt;&lt;h2&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;ä»€ä¹ˆæ˜¯ APIï¼Ÿ&lt;/p&gt;&lt;p&gt;ä»€ä¹ˆæ˜¯ SDKï¼Ÿ&lt;/p&gt;&lt;p&gt;ä¸¤è€…ä¹‹é—´æœ‰ä½•å…³ç³»ï¼Ÿ&lt;/p&gt;&lt;p&gt;æ¬¢è¿æ¥åˆ°æœ¬æ¬¡çš„æ¯å‘¨ä¸€é—®ç³»åˆ—ã€‚&lt;/p&gt;&lt;p&gt;æ—¢ç„¶ç‚¹è¿›æ¥äº†ï¼Œç›¸ä¿¡ä½ æˆ–å¤šæˆ–å°‘éƒ½å¬è¯´è¿‡è¿™ä¸¤ä¸ªåè¯äº†ï¼Œå› æ­¤ï¼Œåœ¨ä¸ºä½ è§£ç­”ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆä»ä¸€ä¸ªä¾‹å­å‡ºå‘ã€‚å‡å¦‚ä½ æƒ³å¼€å‘ä¸€ä¸ª OCR åº”ç”¨ï¼ˆé€šä¿—çš„è¯´å°±æ˜¯æ–‡å­—è¯†åˆ«åº”ç”¨ï¼‰ï¼Œä»–çš„åŠŸèƒ½æ˜¯è¯†åˆ«ç”¨æˆ·ä¸Šä¼ çš„ä¸€å¼ å›¾ç‰‡ï¼Œç„¶åå°†å›¾ç‰‡ä¸­çš„æ–‡å­—è¯†åˆ«å‡ºæ¥è¿”å›ç»™ç”¨æˆ·ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.5044642857142857&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/1skeHK2Gybz4EOycqR6dyly2ZAsoZlT1Jsc3vJ12vSWfic1GAtyic5rVvKvN2iblslYuDKVxcJo79ibZ9JF0AnvCow/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1792&quot; title=&quot;null&quot;/&gt;&lt;/p&gt;&lt;p&gt;é€šå¸¸ï¼ŒOCR åº”ç”¨çš„åç«¯æœåŠ¡éƒ½ä¼šéƒ¨ç½²åœ¨äº‘ä¸Šï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å¦‚ä½•åœ¨ç§»åŠ¨åº”ç”¨ç¨‹åºä¸åŸºäºäº‘çš„æœåŠ¡ä¹‹é—´è¿›è¡Œé€šä¿¡å‘¢ï¼Ÿ&lt;/p&gt;&lt;p&gt;è¿™å°±æ˜¯ API å’Œ SDK çš„ç”¨æ­¦ä¹‹åœ°äº†ã€‚&lt;/p&gt;&lt;h2&gt;API&lt;/h2&gt;&lt;h3&gt;API çš„ç‰¹ç‚¹&lt;/h3&gt;&lt;h3&gt;é€šä¿¡&lt;/h3&gt;&lt;p&gt;é¦–å…ˆæˆ‘ä»¬è¦æ˜ç™½çš„æ˜¯ API æ˜¯å’Œ&lt;strong&gt;é€šä¿¡&lt;/strong&gt;æœ‰å…³çš„ï¼Œæ˜¯ç”¨äºåº”ç”¨ï¼ˆæœåŠ¡ï¼‰ä¸å…¶ä»–åº”ç”¨ï¼ˆæœåŠ¡ï¼‰å¯¹è¯æ‰€å®šä¹‰çš„åè®®ã€‚åœ¨ä¸Šè¿°ä¾‹å­ä¸­ï¼Œä½ å¯ä»¥ç®€å•ç†è§£ä¸º API æ˜¯ OCR åº”ç”¨å’Œäº‘ç«¯æœåŠ¡ä¹‹é—´æ²Ÿé€šçš„æ¡¥æ¢ã€‚&lt;/p&gt;&lt;p&gt;é‚£ä¹ˆ API åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/p&gt;&lt;p&gt;API å…¨ç§° Application Programming Interfaceï¼Œå³&lt;strong&gt;ã€Œåº”ç”¨ç¨‹åºæ¥å£ã€&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;ä¸€èˆ¬æ˜¯æŒ‡ä¸€äº›é¢„å…ˆå®šä¹‰çš„&lt;strong&gt;å‡½æ•°&lt;/strong&gt;ï¼Œç›®çš„æ˜¯ä¾›åº”ç”¨ç¨‹åºä¸å¼€å‘äººå‘˜åŸºäºæŸè½¯ä»¶æˆ–ç¡¬ä»¶å¾—ä»¥è®¿é—®ä¸€ç»„ç¨‹åºçš„èƒ½åŠ›ï¼Œè€Œåˆæ— éœ€è®¿é—®æºç ï¼Œæˆ–ç†è§£å†…éƒ¨å·¥ä½œæœºåˆ¶çš„ç»†èŠ‚ã€‚&lt;/p&gt;&lt;p&gt;ä»¥ Java ä¸ºä¾‹ï¼Œå½“ä½ æƒ³è¦å®ç°ä¸€ä¸ªæ•°ç»„æ’åºçš„åŠŸèƒ½æ—¶ï¼Œä½ æ˜¯ä¼šå…ˆæ‰‹å†™ä¸€ä¸ªæ’åºç®—æ³•ï¼Œè¿˜æ˜¯ç›´æ¥ä½¿ç”¨&lt;code&gt;Arrays.sort()&lt;/code&gt;å‡½æ•°ï¼Ÿæˆ‘æƒ³ä½ å¿ƒé‡Œæ˜¯æœ‰ç­”æ¡ˆçš„ã€‚&lt;/p&gt;&lt;h3&gt;æŠ½è±¡&lt;/h3&gt;&lt;p&gt;å…¶æ¬¡ï¼Œæˆ‘ä»¬è¦ç†è§£ï¼ŒAPI çš„å¦ä¸€ä¸ªé‡è¦ç‰¹ç‚¹â€”â€”&lt;strong&gt;æŠ½è±¡ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;æŠ½è±¡æŒ‡çš„åˆæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/p&gt;&lt;p&gt;è¿˜æ˜¯ä»¥è¿™ä¸ª OCR åº”ç”¨ä¸ºä¾‹ï¼Œå½“æˆ‘ä»¬åœ¨ä½¿ç”¨äº‘ç«¯æä¾›çš„æ–‡å­—è¯†åˆ«èƒ½åŠ›æ—¶ï¼ˆæ¯”å¦‚ç™¾åº¦æ–‡å­—è¯†åˆ«ï¼‰ï¼Œä»–çš„èƒŒåå¯èƒ½ä¼šæœ‰æˆåƒä¸Šä¸‡çš„ä»£ç ï¼Œæ¯”å¦‚æä¾›è¯†åˆ«èƒ½åŠ›çš„æœºå™¨å­¦ä¹ çš„ä»£ç ã€æä¾› Web èƒ½åŠ›çš„åç«¯ä»£ç ç­‰ç­‰ã€‚&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.28820375335120646&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/1skeHK2Gybz4EOycqR6dyly2ZAsoZlT1WJmzO4q7X9k8ok0Ooo541XkMFDnovGJImvFibSOrDazMa4zcpqcQqMA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1492&quot; title=&quot;null&quot;/&gt;&lt;/p&gt;&lt;p&gt;ä½†æ˜¯ä½ ä½œä¸ºä¸€ä¸ª APP çš„å¼€å‘è€…ï¼Œä½ éœ€è¦å»çœ‹è¿™äº›ä»£ç æ˜¯æ€ä¹ˆå†™çš„å—ï¼Ÿéš¾é“ä¸çŸ¥é“èƒŒåçš„æºç å°±ä¸èƒ½è°ƒç”¨ç™¾åº¦æä¾›çš„æ–‡å­—è¯†åˆ«èƒ½åŠ›äº†å—ï¼Ÿå½“ç„¶ä¸æ˜¯ã€‚&lt;/p&gt;&lt;p&gt;é€šå¸¸æœåŠ¡å•†å·²ç»ç»™ä½ æä¾›äº†æ–‡æ¡£ï¼Œå‘Šè¯‰ä½ å¦‚ä½•å»è°ƒç”¨ç›¸åº”æœåŠ¡ï¼Œåªè¦ä½ æŒ‰ç…§ä»–çš„è¦æ±‚æ¥å³å¯ã€‚&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.5338606030647554&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/1skeHK2Gybz4EOycqR6dyly2ZAsoZlT1cLwQVvruBhlxF78oW2qhIGuahIkK0g9JQep94ApC9P8oAoRzxzicUKQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;2023&quot; title=&quot;null&quot;/&gt;&lt;/p&gt;&lt;p&gt;å› æ­¤ï¼Œåœ¨ä½ çš„ APP å’Œ OCR æœåŠ¡ä¹‹é—´ï¼ŒAPI æŠ½è±¡å‡ºæ‰€æœ‰å¤æ‚çš„é€»è¾‘ï¼Œ&lt;strong&gt;ç®€åŒ–äº†è°ƒç”¨è¿‡ç¨‹&lt;/strong&gt;ï¼Œè¿™ä½¿å¾—ä½ åªéœ€è¦è€ƒè™‘è·å–æ‰€éœ€çš„æ•°æ®å³å¯ã€‚&lt;/p&gt;&lt;h3&gt;æ ‡å‡†åŒ–&lt;/h3&gt;&lt;p&gt;API æ˜¯æ ‡å‡†åŒ–çš„ï¼Œè¿™æ„å‘³ç€å­˜åœ¨æœ‰å…³å¦‚ä½•å®šä¹‰ API çš„è¡Œä¸šæ ‡å‡†ï¼Œæ¯”å¦‚ SOAPã€RESTã€GraphQL ç­‰ã€‚&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;æˆ‘åœ¨&lt;span&gt;ã€Šä½ çš„ç¬¬ä¸€æœ¬ SpringBoot ä¹¦ã€‹&lt;sup&gt;[1]&lt;/sup&gt;&lt;/span&gt;ä¸­å†™åˆ°ä»€ä¹ˆæ˜¯ RESTful APIï¼Œæœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥ç‚¹å‡»é˜…è¯»ï¼Œè¿™æ˜¯æˆ‘æ­£åœ¨å†™çš„ä¸€æœ¬ SpringBoot å…¥é—¨æ•™ç¨‹ï¼Œç›®å‰è¿˜æ²¡å®Œå·¥ï¼Œæ¬¢è¿è¯»è€…ä»¬ä¸è¦åå•¬è‡ªå·±çš„å»ºè®® ğŸ™ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h3&gt;API çš„æ„æˆè¦ç´ &lt;/h3&gt;&lt;p&gt;é‚£ä¹ˆï¼ŒAPI é€šå¸¸ç”±ä»€ä¹ˆç»„æˆå‘¢ï¼Ÿ&lt;/p&gt;&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬è¦å‘é€ä¸€äº›æ•°æ®åˆ°äº‘ç«¯ï¼Œå³æ‰€è°“çš„ã€Œè¯·æ±‚ã€ã€‚&lt;/p&gt;&lt;p&gt;ä»æœ¬åœ°åº”ç”¨å‘è¯·æ±‚åˆ°äº‘ç«¯ï¼Œæˆ‘ä»¬éœ€è¦åˆ†å‡ æ­¥å®Œæˆï¼Œä»¥ REST ä¸ºä¾‹ã€‚&lt;/p&gt;&lt;p&gt;å¯¹äº REST API è°ƒç”¨è¯·æ±‚ï¼Œç¬¬ä¸€æ­¥æ˜¯æŒ‡å®šä¼ è¾“çš„æ–¹æ³•ï¼Œé€šå¸¸æ˜¯å’Œ HTTP æ–¹æ³•å¯¹åº”çš„ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.20812182741116753&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/1skeHK2Gybz4EOycqR6dyly2ZAsoZlT1gOIvjufnj3hQD7KKn7NAbszUaBpXU0IgHpCsreqXb6gicrFvZAE4a1w/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1970&quot; title=&quot;null&quot;/&gt;&lt;/p&gt;&lt;p&gt;å½“ä½ æƒ³è¦ä¸Šä¼ ä¸€å¼ å›¾ç‰‡æ—¶ï¼Œé€šå¸¸ä¼šä½¿ç”¨ POST æ–¹æ³•ï¼Œç„¶åæ˜¯ä¼ é€’ä¸€äº›å‚æ•°ï¼ŒåŒ…æ‹¬è¯·æ±‚çš„å†…å®¹ï¼ˆå›¾åƒæœ¬èº«ï¼‰ã€‚ç„¶ååŠ ä¸Šéœ€è¦è¯·æ±‚çš„åœ°å€ï¼Œå³å¯æ„æˆä¸€ä¸ªå®Œæ•´çš„è¯·æ±‚ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.4082352941176471&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/1skeHK2Gybz4EOycqR6dyly2ZAsoZlT1agghzNA6zAnL5wN2rnqcwKtOb4ojVPT6FsicD3C26jrbPBRicQvUUSfA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1700&quot; title=&quot;null&quot;/&gt;&lt;/p&gt;&lt;p&gt;ä¹‹åï¼ŒæœåŠ¡å™¨å†ä»¥ JSON ç­‰å½¢å¼å°†æ•°æ®è¿”è¿˜ç»™ä½ ï¼Œåœ¨ä½ ä½¿ç”¨çš„äº‘æœåŠ¡çš„æ–‡æ¡£ä¸­ä¹Ÿä¼šæœ‰æ‰€æ ‡æ³¨ã€‚&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.3460591133004926&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/1skeHK2Gybz4EOycqR6dyly2ZAsoZlT1BA4GZQWnI6N4NtQWlnrxtCKn1700BsronwkBegDY8PGTuFdxmL4nXw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1624&quot; title=&quot;null&quot;/&gt;&lt;/p&gt;&lt;h2&gt;SDK&lt;/h2&gt;&lt;p&gt;è¯´äº†è¿™ä¹ˆå¤šï¼Œä½ åº”è¯¥å¯¹ API æœ‰æ‰€äº†è§£äº†ï¼Œé‚£ä¹ˆè¿™æ—¶å€™é—®é¢˜å°±æ¥äº†ï¼Œä½œä¸ºå¼€å‘äººå‘˜ï¼Œä½ å¦‚ä½•åœ¨å®é™…çš„é¡¹ç›®ä¸­è°ƒç”¨ APIï¼Ÿ&lt;/p&gt;&lt;p&gt;ä½ è¦è‡ªå·±æ„é€  HTTP è¯·æ±‚ã€æ‹¼æ¥ URLã€æ·»åŠ éœ€è¦çš„å‚æ•°ã€å¤„ç†è¿”å›çš„ JSON å¯¹è±¡ï¼Œéº»çƒ¦å—ï¼Ÿ&lt;/p&gt;&lt;p&gt;éº»çƒ¦ã€‚&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.740139211136891&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/1skeHK2Gybz4EOycqR6dyly2ZAsoZlT1FQibMH4c0BicSicv5IibcMGHVz6Evbkff1Jd1yJxthU9tXCgR6icWwYF0gw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;862&quot; title=&quot;null&quot;/&gt;&lt;/p&gt;&lt;p&gt;é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆå¥½çš„åŠæ³•ç®€åŒ–è¿™äº›æ“ä½œï¼Œä½¿å¾—æˆ‘åªéœ€è¦ç»™ä¸€å¼ å›¾ç‰‡ç„¶åå°±ç»™æˆ‘è¿”å›ç»“æœçš„å‘¢ï¼Ÿ&lt;/p&gt;&lt;p&gt;è‡ªç„¶æ˜¯æœ‰çš„ï¼Œè¿™å°±æ˜¯æ¥ä¸‹æ¥æˆ‘ä»¬è¦è¯´çš„ SDK äº†ã€‚&lt;/p&gt;&lt;p&gt;SDK å…¨ç§° Software Development Kitï¼Œ&lt;strong&gt;è½¯ä»¶å¼€å‘å·¥å…·åŒ…&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;ä¸€èˆ¬éƒ½æ˜¯ä¸€äº›è½¯ä»¶å·¥ç¨‹å¸ˆä¸ºç‰¹å®šçš„è½¯ä»¶åŒ…ã€è½¯ä»¶æ¡†æ¶ã€ç¡¬ä»¶å¹³å°ã€æ“ä½œç³»ç»Ÿç­‰å»ºç«‹åº”ç”¨è½¯ä»¶æ—¶çš„å¼€å‘å·¥å…·çš„é›†åˆã€‚&lt;/p&gt;&lt;p&gt;é€šä¿—æ¥è®²å°±æ˜¯&lt;strong&gt;ç¬¬ä¸‰æ–¹æœåŠ¡å•†æä¾›çš„å®ç°äº§å“è½¯ä»¶æŸé¡¹åŠŸèƒ½çš„å·¥å…·åŒ…&lt;/strong&gt;ã€‚ä¾‹å¦‚ JDK å°±æ˜¯ä¸€ç§ SDKã€‚&lt;/p&gt;&lt;p&gt;è¿˜æ˜¯ä»¥ä¸Šé¢çš„ OCR åº”ç”¨ä¸ºä¾‹ï¼Œå¦‚æœä½¿ç”¨äº†æŸå‚å•†çš„ SDK æœåŠ¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¿ HTTP è¯·æ±‚çš„æ„å»ºéƒ½ä¸éœ€è¦äº†ï¼Œä»…è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œå¯èƒ½çš„ä»£ç å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre data-lang=&quot;java&quot;&gt;&lt;code&gt;&lt;span&gt;OCRResult&lt;/span&gt; res = ocrClient.ocr(&lt;span&gt;&quot;pic.jpg&quot;&lt;/span&gt;).getResult();&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;é€šè¿‡è°ƒç”¨è¿™è¡Œä»£ç ï¼ŒSDK ä¼šè‡ªåŠ¨å°è£… API è¯·æ±‚ï¼Œè€Œä¸”ä½œä¸ºå“åº”ï¼Œä½ è·å¾—çš„ç»“æœä¹Ÿä¸ä¸€å®šæ˜¯ JSON å¯¹è±¡ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯ä»£ç ï¼Œä¾‹å¦‚ä¸Šè¿°ä»£ç æ®µé‡Œçš„&lt;code&gt;OCRResult&lt;/code&gt;ï¼Œè¿™æ˜¯å› ä¸º SDK ä¹Ÿå·²ç»å°† JSON å¯¹è±¡&lt;strong&gt;ååºåˆ—åŒ–&lt;/strong&gt;æˆä½ éœ€è¦çš„å¯¹è±¡ï¼Œæ¯”å¦‚ä¸€ä¸ª Java Modelã€‚&lt;/p&gt;&lt;p&gt;SDK ç›¸å½“äºå¼€å‘é›†æˆå·¥å…·ç¯å¢ƒï¼ŒAPI å°±æ˜¯æ•°æ®æ¥å£ã€‚API å¯ä»¥åœ¨ SDK æä¾›çš„â€œç¯å¢ƒâ€é‡Œè¯·æ±‚ã€‚åŒæ ·çš„ï¼Œè¿™é‡Œçš„â€œç¯å¢ƒâ€ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µã€‚å¦‚æœä¸ä½¿ç”¨ SDKï¼Œä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨ APIï¼Œåªä¸è¿‡ï¼Œè¿™ä¸ªç¯å¢ƒå°±è¦ç”±å¼€å‘è€…è‡ªå·±å®ç°äº†ã€‚&lt;/p&gt;&lt;h2&gt;åŒºåˆ«&lt;/h2&gt;&lt;p&gt;å…¶å®ä»ä¸Šé¢çš„å†…å®¹ï¼Œæˆ‘ä»¬ä¹Ÿå·²äº†è§£åˆ°ï¼ŒAPI åœ¨æ›´å¤šåœºåˆä¸‹æ›´åƒæ˜¯ SDK çš„ä¸€ä¸ªå­é›†ï¼Œä»–ä»¬çš„åŒºåˆ«å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;API é€šå¸¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œæœ‰ç‰¹å®šçš„åŠŸèƒ½ï¼›è€Œ SDK æ˜¯ä¸€ä¸ªå¾ˆå¤šåŠŸèƒ½å‡½æ•°çš„&lt;strong&gt;é›†åˆä½“&lt;/strong&gt;ï¼Œæ›´åƒæ˜¯ä¸€ä¸ªå·¥å…·åŒ…ã€‚&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;API é€šå¸¸æ‰®æ¼”æ•°æ®æ¥å£çš„å½¢è±¡ï¼ŒSDK ç›¸å½“äºä¸€ä¸ªå·¥å…·ç¯å¢ƒï¼Œé€šå¸¸æ˜¯éœ€è¦åœ¨ SDK çš„ç¯å¢ƒä¸‹è°ƒç”¨ APlã€‚&lt;/span&gt;&lt;span&gt;&lt;span&gt;â€¢&lt;/span&gt;SDK ç›¸è¾ƒäº API å°è£…å±‚æ¬¡æ›´é«˜ã€‚&lt;/span&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;ä»¥ä¸Šå°±æ˜¯æœ¬ç¯‡æ–‡ç« çš„å…¨éƒ¨å†…å®¹äº†ï¼Œå¦‚æœä½ è§‰å¾—æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œéšæ‰‹ç‚¹ä¸ªå…³æ³¨è½¬å‘ç»™ä½ çš„å°ä¼™ä¼´ä»¬ï¼Œè¿™å¯¹æˆ‘çœŸçš„å¾ˆé‡è¦ï¼Œä½ ä»¬çš„æ”¯æŒæ˜¯æˆ‘ç»§ç»­æ›´æ–‡çš„åŠ¨åŠ›ï¼Œè°¢è°¢å¤§å®¶ï¼&lt;/p&gt;&lt;h3&gt;References&lt;/h3&gt;&lt;p&gt;&lt;code&gt;[1]&lt;/code&gt;Â ã€Šä½ çš„ç¬¬ä¸€æœ¬ SpringBoot ä¹¦ã€‹:Â &lt;em&gt;https://book.liangyueyong.cn/00-1/01&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>ca4d3568f2c4898293875aadc2f6b8a7</guid>
<title>æ·±åº¦è§£æ Raft åˆ†å¸ƒå¼ä¸€è‡´æ€§åè®®</title>
<link>https://toutiao.io/k/am8mql2</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.9517241379310345&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6rxOmdqsWFX4xjLOnOqvByPwoIk8q8ypLYj9HScINibBWT3VEmaFwTAVCAiccGz3TGxsuKXK8eaIhSA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;2465&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;ç¬”è€…æœŸæœ›é€šè¿‡ä¸€ç¯‡æƒå¨é è°±ã€æ¸…æ™°æ˜“æ‡‚çš„ç³»ç»Ÿæ€§æ–‡ç« ï¼Œå¸®åŠ©è¯»è€…æ·±å…¥ç†è§£ Raft ç®—æ³•ï¼Œå¹¶èƒ½ä»˜è¯¸äºå·¥ç¨‹å®è·µä¸­ï¼ŒåŒæ—¶è§£è¯»ä¸æ˜“ç†è§£æˆ–å®¹æ˜“è¯¯è§£çš„å…³é”®ç‚¹ã€‚&lt;/strong&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æœ¬æ–‡æ˜¯ Raft å®æˆ˜ç³»åˆ—ç†è®ºå†…å®¹çš„æ•´åˆç¯‡ï¼Œæˆ‘ä»¬ç»“åˆ Raft è®ºæ–‡è®²è§£ Raft ç®—æ³•æ€è·¯ï¼Œå¹¶éµå¾ª Raft çš„æ¨¡å—åŒ–æ€æƒ³å¯¹éš¾ç†è§£åŠå®¹æ˜“è¯¯è§£çš„å†…å®¹æŠ½ä¸å‰¥èŒ§ã€‚ç®—æ³•æ–¹é¢è®²è§£ï¼šé€‰ä¸»æœºåˆ¶ã€åŸºäºæ—¥å¿—å®ç°çŠ¶æ€æœºæœºåˆ¶ã€å®‰å…¨æ­£ç¡®ç»´æŠ¤çŠ¶æ€æœºæœºåˆ¶ï¼›å·¥ç¨‹å®ç°æ–¹é¢è®²è§£ï¼šé›†ç¾¤æˆå‘˜å˜æ›´é˜²è„‘è£‚ç­–ç•¥ã€è§£å†³æ•°æ®è†¨èƒ€åŠå¿«é€Ÿæ¢å¤çŠ¶æ€æœºç­–ç•¥ã€çº¿æ€§ä¸€è‡´è¯»æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ç­‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;æ³¨ï¼šæœ¬ç¯‡å†…å®¹è¾ƒå¤šï¼Œå»ºè®®åœ¨å¤§å± PC æˆ–å¹³æ¿é˜…è¯»ï¼Œæ•ˆæœæ›´ä½³ã€‚&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1. æ¦‚è¿°&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;1.1 Raft æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;Raft is a consensus algorithm for managing a replicated log. It produces a result equivalent to (multi-)Paxos, and it is as efficient as Paxos, but its structure is different from Paxos; this makes Raft more understandable than Paxos and also provides a better foundation for building practical systems.&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;--ã€ŠIn Search of an Understandable Consensus Algorithmã€‹&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸ºäº†æ¶ˆé™¤å•ç‚¹æé«˜ç³»ç»Ÿå¯ç”¨æ€§ï¼Œé€šå¸¸ä¼šä½¿ç”¨å‰¯æœ¬æ¥è¿›è¡Œå®¹é”™ï¼Œä½†è¿™ä¼šå¸¦æ¥å¦ä¸€ä¸ªé—®é¢˜ï¼Œå³å¦‚ä½•ä¿è¯å¤šä¸ªå‰¯æœ¬ä¹‹é—´çš„ä¸€è‡´æ€§ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;&lt;span&gt;è¿™é‡Œæˆ‘ä»¬åªè®¨è®ºå¼ºä¸€è‡´æ€§ï¼Œå³çº¿æ€§ä¸€è‡´æ€§ã€‚å¼±ä¸€è‡´æ€§æ¶µç›–çš„èŒƒå›´è¾ƒå¹¿ï¼Œæ¶‰åŠæ ¹æ®å®é™…åœºæ™¯è¿›è¡Œè¯¸å¤šå–èˆï¼Œä¸åœ¨ Raft ç³»åˆ—çš„è®¨è®ºç›®æ ‡èŒƒå›´å†…ã€‚&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;æ‰€è°“çš„å¼ºä¸€è‡´æ€§ï¼ˆçº¿æ€§ä¸€è‡´æ€§ï¼‰å¹¶ä¸æ˜¯æŒ‡é›†ç¾¤ä¸­æ‰€æœ‰èŠ‚ç‚¹åœ¨ä»»ä¸€æ—¶åˆ»çš„çŠ¶æ€å¿…é¡»å®Œå…¨ä¸€è‡´ï¼Œè€Œæ˜¯æŒ‡ä¸€ä¸ªç›®æ ‡ï¼Œå³è®©ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿçœ‹èµ·æ¥åªæœ‰ä¸€ä¸ªæ•°æ®å‰¯æœ¬ï¼Œå¹¶ä¸”è¯»å†™æ“ä½œéƒ½æ˜¯åŸå­çš„ï¼Œè¿™æ ·åº”ç”¨å±‚å°±å¯ä»¥å¿½ç•¥ç³»ç»Ÿåº•å±‚å¤šä¸ªæ•°æ®å‰¯æœ¬é—´çš„åŒæ­¥é—®é¢˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªå¼ºä¸€è‡´æ€§åˆ†å¸ƒå¼ç³»ç»Ÿå½“æˆä¸€ä¸ªæ•´ä½“ï¼Œä¸€æ—¦æŸä¸ªå®¢æˆ·ç«¯æˆåŠŸçš„æ‰§è¡Œäº†å†™æ“ä½œï¼Œé‚£ä¹ˆæ‰€æœ‰å®¢æˆ·ç«¯éƒ½ä¸€å®šèƒ½è¯»å‡ºåˆšåˆšå†™å…¥çš„å€¼ã€‚å³ä½¿å‘ç”Ÿç½‘ç»œåˆ†åŒºæ•…éšœï¼Œæˆ–è€…å°‘éƒ¨åˆ†èŠ‚ç‚¹å‘ç”Ÿå¼‚å¸¸ï¼Œæ•´ä¸ªé›†ç¾¤ä¾ç„¶èƒ½å¤Ÿåƒå•æœºä¸€æ ·æä¾›æœåŠ¡ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å…±è¯†ç®—æ³•ï¼ˆConsensus Algorithmï¼‰å°±æ˜¯ç”¨æ¥åšè¿™ä¸ªäº‹æƒ…çš„ï¼Œå®ƒä¿è¯å³ä½¿åœ¨å°éƒ¨åˆ†ï¼ˆâ‰¤ (N-1)/2ï¼‰èŠ‚ç‚¹æ•…éšœçš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä»ç„¶èƒ½æ­£å¸¸å¯¹å¤–æä¾›æœåŠ¡ã€‚å…±è¯†ç®—æ³•é€šå¸¸åŸºäºçŠ¶æ€å¤åˆ¶æœºï¼ˆReplicated State Machineï¼‰æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰èŠ‚ç‚¹ä»åŒä¸€ä¸ª state å‡ºå‘ï¼Œç»è¿‡åŒæ ·çš„æ“ä½œ logï¼Œæœ€ç»ˆè¾¾åˆ°ä¸€è‡´çš„ stateã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.6139288417865254&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6rxOmdqsWFX4xjLOnOqvByPcnSpqicVPNjmOW0icVDAOTvZ8QklZ5j8GicYK1iawOu0zickAu1vxCmqicVA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1321&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;å›¾ï¼šReplicated State Machine&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å…±è¯†ç®—æ³•æ˜¯æ„å»ºå¼ºä¸€è‡´æ€§åˆ†å¸ƒå¼ç³»ç»Ÿçš„åŸºçŸ³ï¼ŒPaxos æ˜¯å…±è¯†ç®—æ³•çš„ä»£è¡¨ï¼Œè€Œ Raft åˆ™æ˜¯å…¶ä½œè€…åœ¨åšå£«æœŸé—´ç ”ç©¶ Paxos æ—¶æå‡ºçš„ä¸€ä¸ªå˜ç§ï¼Œä¸»è¦ä¼˜ç‚¹æ˜¯å®¹æ˜“ç†è§£ã€æ˜“äºå®ç°ï¼Œç”šè‡³å…³é”®çš„éƒ¨åˆ†éƒ½åœ¨è®ºæ–‡ä¸­ç»™å‡ºäº†ä¼ªä»£ç å®ç°ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;1.2 è°åœ¨ä½¿ç”¨ Raft&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;é‡‡ç”¨ Raft çš„ç³»ç»Ÿæœ€è‘—åçš„å½“å± etcd äº†ï¼Œå¯ä»¥è®¤ä¸º etcd çš„æ ¸å¿ƒå°±æ˜¯ Raft ç®—æ³•çš„å®ç°ã€‚ä½œä¸ºä¸€ä¸ªåˆ†å¸ƒå¼ kv ç³»ç»Ÿï¼Œetcd ä½¿ç”¨ Raft åœ¨å¤šèŠ‚ç‚¹é—´è¿›è¡Œæ•°æ®åŒæ­¥ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ‹¥æœ‰å…¨é‡çš„çŠ¶æ€æœºæ•°æ®ã€‚æˆ‘ä»¬åœ¨å­¦ä¹ äº† Raft ä»¥åå°†ä¼šæ·±åˆ»ç†è§£ä¸ºä»€ä¹ˆ etcd ä¸é€‚åˆå¤§æ•°æ®é‡çš„å­˜å‚¨ï¼ˆfor the most critical dataï¼‰ã€ä¸ºä»€ä¹ˆé›†ç¾¤èŠ‚ç‚¹æ•°ä¸æ˜¯è¶Šå¤šè¶Šå¥½ã€ä¸ºä»€ä¹ˆé›†ç¾¤é€‚åˆéƒ¨ç½²å¥‡æ•°ä¸ªèŠ‚ç‚¹ç­‰é—®é¢˜ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä½œä¸ºä¸€ä¸ªå¾®æœåŠ¡åŸºç¡€è®¾æ–½ï¼Œconsul åº•å±‚ä½¿ç”¨ Raft æ¥ä¿è¯ consul server ä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§ã€‚åœ¨é˜…è¯»å®Œç¬¬å…­ç« åï¼Œæˆ‘ä»¬ä¼šç†è§£ä¸ºä»€ä¹ˆ consul æä¾›äº† defaultã€consistentã€stale ä¸‰ç§ä¸€è‡´æ€§æ¨¡å¼ï¼ˆConsistency Modesï¼‰ã€å®ƒä»¬å„è‡ªé€‚ç”¨çš„åœºæ™¯ï¼Œä»¥åŠ consul åº•å±‚æ˜¯å¦‚ä½•é€šè¿‡æ”¹å˜ Raft è¯»æ¨¡å‹æ¥æ”¯æ’‘è¿™äº›ä¸åŒçš„ä¸€è‡´æ€§æ¨¡å¼çš„ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;TiKV åŒæ ·åœ¨åº•å±‚ä½¿ç”¨äº† Raft ç®—æ³•ã€‚è™½ç„¶éƒ½è‡ªç§°æ˜¯â€œåˆ†å¸ƒå¼ kv å­˜å‚¨â€ï¼Œä½† TiKV çš„ä½¿ç”¨åœºæ™¯ä¸ etcd å­˜åœ¨åŒºåˆ«ã€‚å…¶ç›®æ ‡æ˜¯æ”¯æŒ 100TB+ çš„æ•°æ®ï¼Œç±»ä¼¼ etcd çš„å• Raft é›†ç¾¤è‚¯å®šæ— æ³•æ”¯æ’‘è¿™ä¸ªæ•°æ®é‡ã€‚å› æ­¤ TiKV åº•å±‚ä½¿ç”¨ Multi Raftï¼Œå°†æ•°æ®åˆ’åˆ†ä¸ºå¤šä¸ª regionï¼Œæ¯ä¸ª region å…¶å®è¿˜æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ Raft é›†ç¾¤ï¼Œå¯¹æ¯ä¸ªåˆ†åŒºçš„æ•°æ®å®ç°äº†å¤šå‰¯æœ¬é«˜å¯ç”¨ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ç›®å‰ Raft åœ¨å·¥ä¸šç•Œå·²ç»å¼€å§‹å¤§æ”¾å¼‚å½©ï¼Œå¯¹äºå…¶å„ç±»åº”ç”¨åœºæ™¯è¿™é‡Œä¸å†èµ˜è¿°ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥å‚è€ƒ https://raft.github.io/ï¼Œä¸‹æ–¹æœ‰åˆ—å‡ºå„ç§è¯­è¨€çš„å¤§é‡ Raft å®ç°ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;1.3 Raft åŸºæœ¬æ¦‚å¿µ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;Raft ä½¿ç”¨ Quorum æœºåˆ¶æ¥å®ç°å…±è¯†å’Œå®¹é”™ï¼Œæˆ‘ä»¬å°†å¯¹ Raft é›†ç¾¤çš„æ“ä½œç§°ä¸ºææ¡ˆï¼Œæ¯å½“å‘èµ·ä¸€ä¸ªææ¡ˆï¼Œå¿…é¡»å¾—åˆ°å¤§å¤šæ•°ï¼ˆ&amp;gt; N/2ï¼‰èŠ‚ç‚¹çš„åŒæ„æ‰èƒ½æäº¤ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;è¿™é‡Œçš„â€œææ¡ˆâ€æˆ‘ä»¬å¯ä»¥å…ˆç‹­ä¹‰åœ°ç†è§£ä¸ºå¯¹é›†ç¾¤çš„è¯»å†™æ“ä½œï¼Œâ€œæäº¤â€ç†è§£ä¸ºæ“ä½œæˆåŠŸã€‚&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;é‚£ä¹ˆå½“æˆ‘ä»¬å‘ Raft é›†ç¾¤å‘èµ·ä¸€ç³»åˆ—è¯»å†™æ“ä½œæ—¶ï¼Œé›†ç¾¤å†…éƒ¨ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬å…ˆæ¥æ¦‚è§ˆå¼åœ°åšä¸€ä¸ªæ•´ä½“äº†è§£ï¼Œæ¥ä¸‹æ¥å†åˆ†ç« èŠ‚è¯¦ç»†ä»‹ç»æ¯ä¸ªéƒ¨åˆ†ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;é¦–å…ˆï¼ŒRaft é›†ç¾¤å¿…é¡»å­˜åœ¨ä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼ˆleaderï¼‰ï¼Œæˆ‘ä»¬ä½œä¸ºå®¢æˆ·ç«¯å‘é›†ç¾¤å‘èµ·çš„æ‰€æœ‰æ“ä½œéƒ½å¿…é¡»ç»ç”±ä¸»èŠ‚ç‚¹å¤„ç†ã€‚æ‰€ä»¥ Raft æ ¸å¿ƒç®—æ³•ä¸­çš„ç¬¬ä¸€éƒ¨åˆ†å°±æ˜¯&lt;strong&gt;é€‰ä¸»ï¼ˆLeader electionï¼‰&lt;/strong&gt;â€”â€”æ²¡æœ‰ä¸»èŠ‚ç‚¹é›†ç¾¤å°±æ— æ³•å·¥ä½œï¼Œå…ˆç¥¨é€‰å‡ºä¸€ä¸ªä¸»èŠ‚ç‚¹ï¼Œå†è€ƒè™‘å…¶å®ƒäº‹æƒ…ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å…¶æ¬¡ï¼Œä¸»èŠ‚ç‚¹éœ€è¦æ‰¿è½½ä»€ä¹ˆå·¥ä½œå‘¢ï¼Ÿå®ƒä¼šè´Ÿè´£æ¥æ”¶å®¢æˆ·ç«¯å‘è¿‡æ¥çš„æ“ä½œè¯·æ±‚ï¼Œå°†æ“ä½œåŒ…è£…ä¸ºæ—¥å¿—åŒæ­¥ç»™å…¶å®ƒèŠ‚ç‚¹ï¼Œåœ¨ä¿è¯å¤§éƒ¨åˆ†èŠ‚ç‚¹éƒ½åŒæ­¥äº†æœ¬æ¬¡æ“ä½œåï¼Œå°±å¯ä»¥å®‰å…¨åœ°ç»™å®¢æˆ·ç«¯å›åº”å“åº”äº†ã€‚è¿™ä¸€éƒ¨åˆ†å·¥ä½œåœ¨ Raft æ ¸å¿ƒç®—æ³•ä¸­å«&lt;strong&gt;æ—¥å¿—å¤åˆ¶ï¼ˆLog replicationï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ç„¶åï¼Œå› ä¸ºä¸»èŠ‚ç‚¹çš„è´£ä»»æ˜¯å¦‚æ­¤ä¹‹å¤§ï¼Œæ‰€ä»¥èŠ‚ç‚¹ä»¬åœ¨é€‰ä¸»çš„æ—¶å€™ä¸€å®šè¦è°¨æ…ï¼Œåªæœ‰ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹æ‰å¯ä»¥å½“é€‰ä¸»èŠ‚ç‚¹ã€‚æ­¤å¤–ä¸»èŠ‚ç‚¹åœ¨å¤„ç†æ“ä½œæ—¥å¿—çš„æ—¶å€™ä¹Ÿä¸€å®šè¦è°¨æ…ï¼Œä¸ºäº†ä¿è¯é›†ç¾¤å¯¹å¤–å±•ç°çš„ä¸€è‡´æ€§ï¼Œä¸å¯ä»¥&lt;strong&gt;è¦†ç›–æˆ–åˆ é™¤&lt;/strong&gt;å‰ä»»ä¸»èŠ‚ç‚¹å·²ç»å¤„ç†æˆåŠŸçš„æ“ä½œæ—¥å¿—ã€‚æ‰€è°“çš„â€œè°¨æ…å¤„ç†â€ï¼Œå…¶å®å°±æ˜¯åœ¨é€‰ä¸»å’Œæäº¤æ—¥å¿—çš„æ—¶å€™è¿›è¡Œä¸€äº›é™åˆ¶ï¼Œè¿™ä¸€éƒ¨åˆ†åœ¨ Raft æ ¸å¿ƒç®—æ³•ä¸­å«&lt;strong&gt;å®‰å…¨æ€§ï¼ˆSafetyï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Raft æ ¸å¿ƒç®—æ³•å…¶å®å°±æ˜¯ç”±è¿™ä¸‰ä¸ªå­é—®é¢˜ç»„æˆçš„ï¼šé€‰ä¸»ï¼ˆLeader electionï¼‰ã€æ—¥å¿—å¤åˆ¶ï¼ˆLog replicationï¼‰ã€å®‰å…¨æ€§ï¼ˆSafetyï¼‰ã€‚è¿™ä¸‰éƒ¨åˆ†å…±åŒå®ç°äº† Raft æ ¸å¿ƒçš„å…±è¯†å’Œå®¹é”™æœºåˆ¶ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;é™¤äº†æ ¸å¿ƒç®—æ³•å¤–ï¼ŒRaft ä¹Ÿæä¾›äº†å‡ ä¸ªå·¥ç¨‹å®è·µä¸­å¿…é¡»é¢å¯¹é—®é¢˜çš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ç¬¬ä¸€ä¸ªæ˜¯å…³äºæ—¥å¿—æ— é™å¢é•¿çš„é—®é¢˜ã€‚Raft å°†æ“ä½œåŒ…è£…æˆä¸ºäº†æ—¥å¿—ï¼Œé›†ç¾¤æ¯ä¸ªèŠ‚ç‚¹éƒ½ç»´æŠ¤äº†ä¸€ä¸ªä¸æ–­å¢é•¿çš„æ—¥å¿—åºåˆ—ï¼ŒçŠ¶æ€æœºåªæœ‰é€šè¿‡é‡æ”¾æ—¥å¿—åºåˆ—æ¥å¾—åˆ°ã€‚ä½†ç”±äºè¿™ä¸ªæ—¥å¿—åºåˆ—å¯èƒ½ä¼šéšç€æ—¶é—´æµé€ä¸æ–­å¢é•¿ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»æœ‰ä¸€äº›åŠæ³•æ¥é¿å…æ— ä¼‘æ­¢çš„ç£ç›˜å ç”¨å’Œè¿‡ä¹…çš„æ—¥å¿—é‡æ”¾ã€‚è¿™ä¸€éƒ¨åˆ†å«&lt;strong&gt;æ—¥å¿—å‹ç¼©ï¼ˆLog compactionï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ç¬¬äºŒä¸ªæ˜¯å…³äºé›†ç¾¤æˆå‘˜å˜æ›´çš„é—®é¢˜ã€‚ä¸€ä¸ª Raft é›†ç¾¤ä¸å¤ªå¯èƒ½æ°¸è¿œæ˜¯å›ºå®šå‡ ä¸ªèŠ‚ç‚¹ï¼Œæ€»æœ‰æ‰©ç¼©å®¹çš„éœ€æ±‚ï¼Œæˆ–æ˜¯èŠ‚ç‚¹å®•æœºéœ€è¦æ›¿æ¢çš„æ—¶å€™ã€‚ç›´æ¥æ›´æ¢é›†ç¾¤æˆå‘˜å¯èƒ½ä¼šå¯¼è‡´ä¸¥é‡çš„&lt;strong&gt;è„‘è£‚&lt;/strong&gt;é—®é¢˜ã€‚Raft ç»™å‡ºäº†ä¸€ç§å®‰å…¨å˜æ›´é›†ç¾¤æˆå‘˜çš„æ–¹å¼ã€‚è¿™ä¸€éƒ¨åˆ†å«&lt;strong&gt;é›†ç¾¤æˆå‘˜å˜æ›´ï¼ˆCluster membership changeï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜ä¼šé¢å¤–è®¨è®º&lt;strong&gt;çº¿æ€§ä¸€è‡´æ€§&lt;/strong&gt;çš„å®šä¹‰ã€ä¸ºä»€ä¹ˆ &lt;strong&gt;Raft ä¸èƒ½ä¸çº¿æ€§ä¸€è‡´åˆ’ç­‰å·&lt;/strong&gt;ã€&lt;strong&gt;å¦‚ä½•åŸºäº Raft å®ç°çº¿æ€§ä¸€è‡´&lt;/strong&gt;ï¼Œä»¥åŠåœ¨å¦‚ä½•&lt;strong&gt;ä¿è¯çº¿æ€§ä¸€è‡´çš„å‰æä¸‹è¿›è¡Œè¯»æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä»¥ä¸Šä¾¿æ˜¯ç†è®ºç¯‡å†…å°†ä¼šè®¨è®ºåˆ°çš„å¤§éƒ¨åˆ†å†…å®¹çš„æ¦‚è¦ä»‹ç»ï¼Œè¿™é‡Œæˆ‘ä»¬å¯¹ Raft å·²ç»æœ‰äº†ä¸€ä¸ªå®è§‚ä¸Šçš„è®¤è¯†ï¼ŒçŸ¥é“äº†å„ä¸ªéƒ¨åˆ†å¤§æ¦‚æ˜¯ä»€ä¹ˆå†…å®¹ï¼Œä»¥åŠå®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬å°†ä¼šè¯¦ç»†è®¨è®º Raft ç®—æ³•çš„æ¯ä¸ªéƒ¨åˆ†ã€‚è®©æˆ‘ä»¬å…ˆä»ç¬¬ä¸€éƒ¨åˆ†&lt;strong&gt;é€‰ä¸»&lt;/strong&gt;å¼€å§‹ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2. é€‰ä¸»&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2.1 ä»€ä¹ˆæ˜¯é€‰ä¸»&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;é€‰ä¸»ï¼ˆLeader electionï¼‰å°±æ˜¯åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå†…æŠ‰æ‹©å‡ºä¸€ä¸ªä¸»èŠ‚ç‚¹æ¥è´Ÿè´£ä¸€äº›ç‰¹å®šçš„å·¥ä½œã€‚åœ¨æ‰§è¡Œäº†é€‰ä¸»è¿‡ç¨‹åï¼Œé›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½ä¼šè¯†åˆ«å‡ºä¸€ä¸ªç‰¹å®šçš„ã€å”¯ä¸€çš„èŠ‚ç‚¹ä½œä¸º leaderã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬å¼€å‘çš„ç³»ç»Ÿå¦‚æœé‡åˆ°é€‰ä¸»çš„éœ€æ±‚ï¼Œé€šå¸¸ä¼šç›´æ¥åŸºäº zookeeper æˆ– etcd æ¥åšï¼ŒæŠŠè¿™éƒ¨åˆ†çš„å¤æ‚æ€§æ”¶æ•›åˆ°ç¬¬ä¸‰æ–¹ç³»ç»Ÿã€‚ç„¶è€Œä½œä¸º etcd åŸºç¡€çš„ Raft è‡ªèº«ä¹Ÿå­˜åœ¨â€œé€‰ä¸»â€çš„æ¦‚å¿µï¼Œè¿™æ˜¯ä¸¤ä¸ªå±‚é¢çš„äº‹æƒ…ï¼šåŸºäº etcd çš„é€‰ä¸»æŒ‡çš„æ˜¯åˆ©ç”¨ç¬¬ä¸‰æ–¹ etcd è®©é›†ç¾¤å¯¹è°åšä¸»èŠ‚ç‚¹çš„å†³ç­–è¾¾æˆä¸€è‡´ï¼ŒæŠ€æœ¯ä¸Šæ¥è¯´åˆ©ç”¨çš„æ˜¯ etcd çš„ä¸€è‡´æ€§çŠ¶æ€æœºã€lease ä»¥åŠ watch æœºåˆ¶ï¼Œè¿™ä¸ªäº‹æƒ…ä¹Ÿå¯ä»¥æ”¹ç”¨å•èŠ‚ç‚¹çš„ MySQL/Redis æ¥åšï¼Œåªæ˜¯æ— æ³•è·å¾—é«˜å¯ç”¨æ€§ï¼›è€Œ Raft æœ¬èº«çš„é€‰ä¸»åˆ™æŒ‡çš„æ˜¯åœ¨ Raft é›†ç¾¤è‡ªèº«å†…éƒ¨é€šè¿‡ç¥¨é€‰ã€å¿ƒè·³ç­‰æœºåˆ¶æ¥åè°ƒå‡ºä¸€ä¸ªå¤§å¤šæ•°èŠ‚ç‚¹è®¤å¯çš„ä¸»èŠ‚ç‚¹ä½œä¸ºé›†ç¾¤çš„ leader å»åè°ƒæ‰€æœ‰å†³ç­–ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;å½“ä½ çš„ç³»ç»Ÿåˆ©ç”¨ etcd æ¥å†™å…¥è°æ˜¯ä¸»èŠ‚ç‚¹çš„æ—¶å€™ï¼Œè¿™ä¸ªå†³ç­–ä¹Ÿåœ¨ etcd å†…éƒ¨è¢«å®ƒè‡ªå·±é›†ç¾¤é€‰å‡ºçš„ä¸»èŠ‚ç‚¹å¤„ç†å¹¶åŒæ­¥ç»™å…¶å®ƒèŠ‚ç‚¹ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;2.2 Raft ä¸ºä»€ä¹ˆè¦è¿›è¡Œé€‰ä¸»ï¼Ÿ&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æŒ‰ç…§è®ºæ–‡æ‰€è¿°ï¼ŒåŸç”Ÿçš„ Paxos ç®—æ³•ä½¿ç”¨äº†ä¸€ç§ç‚¹å¯¹ç‚¹ï¼ˆpeer-to-peerï¼‰çš„æ–¹å¼ï¼Œæ‰€æœ‰èŠ‚ç‚¹åœ°ä½æ˜¯å¹³ç­‰çš„ã€‚åœ¨ç†æƒ³æƒ…å†µä¸‹ï¼Œç®—æ³•çš„ç›®çš„æ˜¯åˆ¶å®š&lt;strong&gt;ä¸€ä¸ªå†³ç­–&lt;/strong&gt;ï¼Œè¿™å¯¹äºç®€åŒ–çš„æ¨¡å‹æ¯”è¾ƒæœ‰æ„ä¹‰ã€‚ä½†åœ¨å·¥ä¸šç•Œå¾ˆå°‘ä¼šæœ‰ç³»ç»Ÿä¼šä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå½“æœ‰ä¸€ç³»åˆ—çš„å†³ç­–éœ€è¦è¢«åˆ¶å®šçš„æ—¶å€™ï¼Œå…ˆé€‰å‡ºä¸€ä¸ª leader èŠ‚ç‚¹ç„¶åè®©å®ƒå»åè°ƒæ‰€æœ‰çš„å†³ç­–ï¼Œè¿™æ ·ç®—æ³•ä¼šæ›´åŠ ç®€å•å¿«é€Ÿã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ­¤å¤–ï¼Œå’Œå…¶å®ƒä¸€è‡´æ€§ç®—æ³•ç›¸æ¯”ï¼ŒRaft èµ‹äºˆäº† leader èŠ‚ç‚¹æ›´å¼ºçš„é¢†å¯¼åŠ›ï¼Œç§°ä¹‹ä¸º &lt;strong&gt;Strong Leader&lt;/strong&gt;ã€‚æ¯”å¦‚è¯´æ—¥å¿—æ¡ç›®åªèƒ½ä» leader èŠ‚ç‚¹å‘é€ç»™å…¶å®ƒèŠ‚ç‚¹è€Œä¸èƒ½åç€æ¥ï¼Œè¿™ç§æ–¹å¼ç®€åŒ–äº†æ—¥å¿—å¤åˆ¶çš„é€»è¾‘ï¼Œä½¿ Raft å˜å¾—æ›´åŠ ç®€å•æ˜“æ‡‚ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2.3 Raft é€‰ä¸»è¿‡ç¨‹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2.3.1 èŠ‚ç‚¹è§’è‰²&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Raft é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹éƒ½å¤„äºä»¥ä¸‹ä¸‰ç§è§’è‰²ä¹‹ä¸€ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;Leader&lt;/strong&gt;: æ‰€æœ‰è¯·æ±‚çš„å¤„ç†è€…ï¼Œæ¥æ”¶å®¢æˆ·ç«¯å‘èµ·çš„æ“ä½œè¯·æ±‚ï¼Œå†™å…¥æœ¬åœ°æ—¥å¿—ååŒæ­¥è‡³é›†ç¾¤å…¶å®ƒèŠ‚ç‚¹ã€‚Â &lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Follower&lt;/strong&gt;: è¯·æ±‚çš„è¢«åŠ¨æ›´æ–°è€…ï¼Œä» leader æ¥æ”¶æ›´æ–°è¯·æ±‚ï¼Œå†™å…¥æœ¬åœ°æ–‡ä»¶ã€‚å¦‚æœå®¢æˆ·ç«¯çš„æ“ä½œè¯·æ±‚å‘é€ç»™äº† followerï¼Œä¼šé¦–å…ˆç”± follower é‡å®šå‘ç»™ leaderã€‚Â &lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;Candidate&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;: å¦‚æœ follower åœ¨ä¸€å®šæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ° leader çš„å¿ƒè·³ï¼Œåˆ™åˆ¤æ–­ leader å¯èƒ½å·²ç»æ•…éšœï¼Œæ­¤æ—¶å¯åŠ¨ leader election è¿‡ç¨‹ï¼Œæœ¬èŠ‚ç‚¹åˆ‡æ¢ä¸º candidate ç›´åˆ°é€‰ä¸»ç»“æŸã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2.3.2 ä»»æœŸ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ¯å¼€å§‹ä¸€æ¬¡æ–°çš„é€‰ä¸¾ï¼Œç§°ä¸ºä¸€ä¸ª&lt;strong&gt;ä»»æœŸï¼ˆtermï¼‰&lt;/strong&gt;ï¼Œæ¯ä¸ª term éƒ½æœ‰ä¸€ä¸ªä¸¥æ ¼é€’å¢çš„æ•´æ•°ä¸ä¹‹å…³è”ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ¯å½“ candidate è§¦å‘ leader election æ—¶éƒ½ä¼šå¢åŠ  termï¼Œå¦‚æœä¸€ä¸ª candidate èµ¢å¾—é€‰ä¸¾ï¼Œä»–å°†åœ¨æœ¬ term ä¸­æ‹…ä»» leader çš„è§’è‰²ã€‚ä½†å¹¶ä¸æ˜¯æ¯ä¸ª term éƒ½ä¸€å®šå¯¹åº”ä¸€ä¸ª leaderï¼Œæœ‰æ—¶å€™æŸä¸ª term å†…ä¼šç”±äºé€‰ä¸¾è¶…æ—¶å¯¼è‡´é€‰ä¸å‡º leaderï¼Œè¿™æ—¶ candicate ä¼šé€’å¢ term å·å¹¶å¼€å§‹æ–°ä¸€è½®é€‰ä¸¾ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.40350877192982454&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6rxOmdqsWFX4xjLOnOqvByPYKbo5lQ6GVGWdxA6VYrbO4DZTlZUZZbRIl8gnp9a1iaQmibc6Y0CSKBQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1824&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Term æ›´åƒæ˜¯ä¸€ä¸ª&lt;strong&gt;é€»è¾‘æ—¶é’Ÿï¼ˆlogic clockï¼‰&lt;/strong&gt;çš„ä½œç”¨ï¼Œæœ‰äº†å®ƒï¼Œå°±å¯ä»¥å‘ç°å“ªäº›èŠ‚ç‚¹çš„çŠ¶æ€å·²ç»è¿‡æœŸã€‚æ¯ä¸€ä¸ªèŠ‚ç‚¹éƒ½ä¿å­˜ä¸€ä¸ª current termï¼Œåœ¨é€šä¿¡æ—¶å¸¦ä¸Šè¿™ä¸ª term å·ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;èŠ‚ç‚¹é—´é€šè¿‡ RPC æ¥é€šä¿¡ï¼Œä¸»è¦æœ‰ä¸¤ç±» RPC è¯·æ±‚ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2.3.3 èŠ‚ç‚¹çŠ¶æ€è½¬æ¢&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬çŸ¥é“é›†ç¾¤æ¯ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€éƒ½åªèƒ½æ˜¯ leaderã€follower æˆ– candidateï¼Œé‚£ä¹ˆèŠ‚ç‚¹ä»€ä¹ˆæ—¶å€™ä¼šå¤„äºå“ªç§çŠ¶æ€å‘¢ï¼Ÿä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªèŠ‚ç‚¹å¯èƒ½å‘ç”Ÿçš„çŠ¶æ€è½¬æ¢ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.4429868819374369&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6rxOmdqsWFX4xjLOnOqvByP8WLyTK7wohqV434Gb7bx0k24GSn4m26ATu6NPWJ8ZhOzXPkicythfww/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1982&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬è¯¦ç»†è®¨è®ºä¸‹æ¯ä¸ªè½¬æ¢æ‰€å‘ç”Ÿçš„åœºæ™¯ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;2.3.3.1 Follower çŠ¶æ€è½¬æ¢è¿‡ç¨‹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Raft çš„é€‰ä¸»åŸºäºä¸€ç§å¿ƒè·³æœºåˆ¶ï¼Œé›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹åˆšå¯åŠ¨æ—¶éƒ½æ˜¯ follower èº«ä»½ï¼ˆ&lt;strong&gt;Step: starts up&lt;/strong&gt;ï¼‰ï¼Œleader ä¼šå‘¨æœŸæ€§çš„å‘æ‰€æœ‰èŠ‚ç‚¹å‘é€å¿ƒè·³åŒ…æ¥ç»´æŒè‡ªå·±çš„æƒå¨ï¼Œé‚£ä¹ˆé¦–ä¸ª leader æ˜¯å¦‚ä½•è¢«é€‰ä¸¾å‡ºæ¥çš„å‘¢ï¼Ÿæ–¹æ³•æ˜¯å¦‚æœä¸€ä¸ª follower åœ¨ä¸€æ®µæ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°ä»»ä½•å¿ƒè·³ï¼Œä¹Ÿå°±æ˜¯é€‰ä¸¾è¶…æ—¶ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šä¸»è§‚è®¤ä¸ºç³»ç»Ÿä¸­æ²¡æœ‰å¯ç”¨çš„ leaderï¼Œå¹¶å‘èµ·æ–°çš„é€‰ä¸¾ï¼ˆ&lt;strong&gt;Step: times out, starts election&lt;/strong&gt;ï¼‰ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå³è¿™ä¸ªâ€œé€‰ä¸¾è¶…æ—¶æ—¶é—´â€è¯¥å¦‚ä½•åˆ¶å®šï¼Ÿå¦‚æœæ‰€æœ‰èŠ‚ç‚¹åœ¨åŒä¸€æ—¶åˆ»å¯åŠ¨ï¼Œç»è¿‡åŒæ ·çš„è¶…æ—¶æ—¶é—´ååŒæ—¶å‘èµ·é€‰ä¸¾ï¼Œæ•´ä¸ªé›†ç¾¤ä¼šå˜å¾—ä½æ•ˆä¸å ªï¼Œæç«¯æƒ…å†µä¸‹ç”šè‡³ä¼šä¸€ç›´é€‰ä¸å‡ºä¸€ä¸ªä¸»èŠ‚ç‚¹ã€‚Raft å·§å¦™çš„ä½¿ç”¨äº†ä¸€ä¸ªéšæœºåŒ–çš„å®šæ—¶å™¨ï¼Œè®©æ¯ä¸ªèŠ‚ç‚¹çš„â€œè¶…æ—¶æ—¶é—´â€åœ¨ä¸€å®šèŒƒå›´å†…éšæœºç”Ÿæˆï¼Œè¿™æ ·å°±å¤§å¤§çš„é™ä½äº†å¤šä¸ªèŠ‚ç‚¹åŒæ—¶å‘èµ·é€‰ä¸¾çš„å¯èƒ½æ€§ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.9453883495145631&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6pc32tWo6Y0axUrXLsZw36IibQudy5jM3BSsoCVdBmAuBF5GicxWzoHDIm7rPDNgk7pgKhNBrPmkohQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;824&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;å›¾ï¼šä¸€ä¸ªäº”èŠ‚ç‚¹ Raft é›†ç¾¤çš„åˆå§‹çŠ¶æ€ï¼Œæ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯ follower èº«ä»½ï¼Œterm ä¸º 1ï¼Œä¸”æ¯ä¸ªèŠ‚ç‚¹çš„é€‰ä¸¾è¶…æ—¶å®šæ—¶å™¨ä¸åŒ&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è‹¥ follower æƒ³å‘èµ·ä¸€æ¬¡é€‰ä¸¾ï¼Œfollower éœ€è¦å…ˆå¢åŠ è‡ªå·±çš„å½“å‰ termï¼Œå¹¶å°†èº«ä»½åˆ‡æ¢ä¸º candidateã€‚ç„¶åå®ƒä¼šå‘é›†ç¾¤å…¶å®ƒèŠ‚ç‚¹å‘é€â€œè¯·ç»™è‡ªå·±æŠ•ç¥¨â€çš„æ¶ˆæ¯ï¼ˆRequestVote RPCï¼‰ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.9493365500603136&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6pc32tWo6Y0axUrXLsZw36IZ5wBibSsQqrmnQNRctqJ7JYq4iazvKkyz7fkib443cpGTQqG2oxcsZWng/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;829&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;å›¾ï¼šS1 ç‡å…ˆè¶…æ—¶ï¼Œå˜ä¸º candidateï¼Œterm + 1ï¼Œå¹¶å‘å…¶å®ƒèŠ‚ç‚¹å‘å‡ºæ‹‰ç¥¨è¯·æ±‚&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;2.3.3.2 Candicate çŠ¶æ€è½¬æ¢è¿‡ç¨‹&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Follower åˆ‡æ¢ä¸º candidate å¹¶å‘é›†ç¾¤å…¶ä»–èŠ‚ç‚¹å‘é€â€œè¯·ç»™è‡ªå·±æŠ•ç¥¨â€çš„æ¶ˆæ¯åï¼Œæ¥ä¸‹æ¥ä¼šæœ‰ä¸‰ç§å¯èƒ½çš„ç»“æœï¼Œä¹Ÿå³ä¸Šé¢&lt;strong&gt;èŠ‚ç‚¹çŠ¶æ€å›¾ä¸­ candidate çŠ¶æ€å‘å¤–ä¼¸å‡ºçš„ä¸‰æ¡çº¿&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;1. é€‰ä¸¾æˆåŠŸï¼ˆStep: receives votes from majority of serversï¼‰&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“candicateä»æ•´ä¸ªé›†ç¾¤çš„&lt;strong&gt;å¤§å¤šæ•°&lt;/strong&gt;ï¼ˆN/2+1ï¼‰èŠ‚ç‚¹è·å¾—äº†é’ˆå¯¹åŒä¸€ term çš„é€‰ç¥¨æ—¶ï¼Œå®ƒå°±èµ¢å¾—äº†è¿™æ¬¡é€‰ä¸¾ï¼Œç«‹åˆ»å°†è‡ªå·±çš„èº«ä»½è½¬å˜ä¸º leader å¹¶å¼€å§‹å‘å…¶å®ƒèŠ‚ç‚¹å‘é€å¿ƒè·³æ¥ç»´æŒè‡ªå·±çš„æƒå¨ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.9538834951456311&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6pc32tWo6Y0axUrXLsZw36IicoZwfdqrciaaDqQnQ88Hd9lyJkuiaRBypgD50rlXd6fHN7ibCG51rjQYQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;824&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;å›¾ï¼šâ€œå¤§éƒ¨åˆ†â€èŠ‚ç‚¹éƒ½ç»™äº† S1 é€‰ç¥¨&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.9503030303030303&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6pc32tWo6Y0axUrXLsZw36I07e2icJdKHTxHxKeXx9prMgKehj9DsRSFnDupl3UKEeIHdVtiaq1TgZw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;825&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;å›¾ï¼šS1 å˜ä¸º leaderï¼Œå¼€å§‹å‘é€å¿ƒè·³ç»´æŒæƒå¨&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ¯ä¸ªèŠ‚ç‚¹é’ˆå¯¹æ¯ä¸ª term åªèƒ½æŠ•å‡ºä¸€å¼ ç¥¨ï¼Œå¹¶ä¸”æŒ‰ç…§å…ˆåˆ°å…ˆå¾—çš„åŸåˆ™ã€‚è¿™ä¸ªè§„åˆ™ç¡®ä¿åªæœ‰ä¸€ä¸ª candidate ä¼šæˆä¸º leaderã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;2. é€‰ä¸¾å¤±è´¥ï¼ˆStep: discovers current leader or new termï¼‰&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Candidate åœ¨ç­‰å¾…æŠ•ç¥¨å›å¤çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šçªç„¶æ”¶åˆ°å…¶å®ƒè‡ªç§°æ˜¯ leader çš„èŠ‚ç‚¹å‘é€çš„å¿ƒè·³åŒ…ï¼Œå¦‚æœè¿™ä¸ªå¿ƒè·³åŒ…é‡Œæºå¸¦çš„ term &lt;strong&gt;ä¸å°äº&lt;/strong&gt; candidate å½“å‰çš„ termï¼Œé‚£ä¹ˆ candidate ä¼šæ‰¿è®¤è¿™ä¸ª leaderï¼Œå¹¶å°†èº«ä»½åˆ‡å› followerã€‚è¿™è¯´æ˜å…¶å®ƒèŠ‚ç‚¹å·²ç»æˆåŠŸèµ¢å¾—äº†é€‰ä¸¾ï¼Œæˆ‘ä»¬åªéœ€ç«‹åˆ»è·Ÿéšå³å¯ã€‚ä½†å¦‚æœå¿ƒè·³åŒ…ä¸­çš„ term æ¯”è‡ªå·±å°ï¼Œcandidate ä¼šæ‹’ç»è¿™æ¬¡è¯·æ±‚å¹¶ä¿æŒé€‰ä¸¾çŠ¶æ€ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.9423769507803121&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6pc32tWo6Y0axUrXLsZw36IFe5HlnlBicWBbZMWqNlZqjwhBbfEld9dsh6ibBrCKWV6ZUT0g5dVFxBQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;833&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;å›¾ï¼šS4ã€S2 ä¾æ¬¡å¼€å§‹é€‰ä¸¾&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.9466019417475728&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6pc32tWo6Y0axUrXLsZw36IbaVAOgRjSvib9QGJw8KqBecDV0NnTdGgwia88cvHKqAvcadf5lbTRlPQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;824&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;å›¾ï¼šS4 æˆä¸º leaderï¼ŒS2 åœ¨æ”¶åˆ° S4 çš„å¿ƒè·³åŒ…åï¼Œç”±äº term ä¸å°äºè‡ªå·±å½“å‰çš„ termï¼Œå› æ­¤ä¼šç«‹åˆ»åˆ‡ä¸º follower è·Ÿéš S4&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;3. é€‰ä¸¾è¶…æ—¶ï¼ˆStep: times out, new electionï¼‰&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ç¬¬ä¸‰ç§å¯èƒ½çš„ç»“æœæ˜¯ candidate æ—¢æ²¡æœ‰èµ¢ä¹Ÿæ²¡æœ‰è¾“ã€‚å¦‚æœæœ‰å¤šä¸ª follower åŒæ—¶æˆä¸º candidateï¼Œé€‰ç¥¨æ˜¯å¯èƒ½è¢«ç“œåˆ†çš„ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•ä¸€ä¸ª candidate èƒ½å¾—åˆ°å¤§å¤šæ•°èŠ‚ç‚¹çš„æ”¯æŒï¼Œé‚£ä¹ˆæ¯ä¸€ä¸ª candidate éƒ½ä¼šè¶…æ—¶ã€‚æ­¤æ—¶ candidate éœ€è¦å¢åŠ è‡ªå·±çš„ termï¼Œç„¶åå‘èµ·æ–°ä¸€è½®é€‰ä¸¾ã€‚å¦‚æœè¿™é‡Œä¸åšä¸€äº›ç‰¹æ®Šå¤„ç†ï¼Œé€‰ç¥¨å¯èƒ½ä¼šä¸€ç›´è¢«ç“œåˆ†ï¼Œå¯¼è‡´é€‰ä¸å‡º leader æ¥ã€‚è¿™é‡Œçš„â€œç‰¹æ®Šå¤„ç†â€æŒ‡çš„å°±æ˜¯å‰æ–‡æ‰€è¿°çš„&lt;strong&gt;éšæœºåŒ–é€‰ä¸¾è¶…æ—¶æ—¶é—´&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.9498164014687882&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6pc32tWo6Y0axUrXLsZw36IqrGEBica93t0aq0s1SR3BWU8Tx8RLYW6g5DfZ6priaibxxSk1ib3uBuj9A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;817&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;å›¾ï¼šS1 ~ S5 éƒ½åœ¨å‚ä¸é€‰ä¸¾&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.9503030303030303&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6pc32tWo6Y0axUrXLsZw36IDWx8pyu0Oickqc3v8CnkV55pKovmUGd9kYrPw1aRRWG9PTMOspJ7r6w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;825&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;å›¾ï¼šæ²¡æœ‰ä»»ä½•èŠ‚ç‚¹æ„¿æ„ç»™ä»–äººæŠ•ç¥¨&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.9444444444444444&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6pc32tWo6Y0axUrXLsZw36I8LZ2W7GSZslzK0XW5M3sIAJLRg7lGJxPSicO7Lv5QCAMUvJTc2AZkHg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;828&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;å›¾ï¼šå¦‚æœæ²¡æœ‰éšæœºåŒ–è¶…æ—¶æ—¶é—´ï¼Œæ‰€æœ‰èŠ‚ç‚¹å°†ä¼šç»§ç»­åŒæ—¶å‘èµ·é€‰ä¸¾â€¦â€¦&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä»¥ä¸Šä¾¿æ˜¯ candidate ä¸‰ç§å¯èƒ½çš„é€‰ä¸¾ç»“æœã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;2.3.3.3 Leader çŠ¶æ€è½¬æ¢è¿‡ç¨‹&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;èŠ‚ç‚¹çŠ¶æ€å›¾ä¸­çš„æœ€åä¸€æ¡çº¿æ˜¯ï¼š&lt;strong&gt;discovers server with higher term&lt;/strong&gt;ã€‚æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼šå½“ leader èŠ‚ç‚¹å‘ç”Ÿäº†å®•æœºæˆ–ç½‘ç»œæ–­è¿ï¼Œæ­¤æ—¶å…¶å®ƒ follower ä¼šæ”¶ä¸åˆ° leader å¿ƒè·³ï¼Œé¦–ä¸ªè§¦å‘è¶…æ—¶çš„èŠ‚ç‚¹ä¼šå˜ä¸º candidate å¹¶å¼€å§‹æ‹‰ç¥¨ï¼ˆç”±äºéšæœºåŒ–å„ä¸ª follower è¶…æ—¶æ—¶é—´ä¸åŒï¼‰ï¼Œç”±äºè¯¥ candidate çš„ term å¤§äºåŸ leader çš„ termï¼Œå› æ­¤æ‰€æœ‰ follower éƒ½ä¼šæŠ•ç¥¨ç»™å®ƒï¼Œè¿™å candidate ä¼šå˜ä¸ºæ–°çš„ leaderã€‚ä¸€æ®µæ—¶é—´ååŸ leader æ¢å¤äº†ï¼Œæ”¶åˆ°äº†æ¥è‡ªæ–°leader çš„å¿ƒè·³åŒ…ï¼Œå‘ç°å¿ƒè·³ä¸­çš„ term å¤§äºè‡ªå·±çš„ termï¼Œæ­¤æ—¶è¯¥èŠ‚ç‚¹ä¼šç«‹åˆ»åˆ‡æ¢ä¸º follower å¹¶è·Ÿéšçš„æ–° leaderã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸Šè¿°æµç¨‹çš„åŠ¨ç”»æ¨¡æ‹Ÿå¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.9514563106796117&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6pc32tWo6Y0axUrXLsZw36IS8uluhyInDbaH7fMV3gxfINQX9aXiaiagw2q9pYCM2b0YSbGcknnHo8A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;824&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;å›¾ï¼šS4 ä½œä¸º term2 çš„ leader&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.9418181818181818&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6pc32tWo6Y0axUrXLsZw36IAL1iasZypk4ia200LC86GLKYyY9Mm2N6TlBczEe4XdnWC6aibicy5gQfHg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;825&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;&lt;span&gt;å›¾ï¼šS4 å®•æœºï¼ŒS5 å³å°†ç‡å…ˆè¶…æ—¶&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.9406060606060606&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6pc32tWo6Y0axUrXLsZw36IdpiajFEyIdfSFDejic9kznSH2DDH5XmyKPduPt59kv1v5m2Dickia7XNIg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;825&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;å›¾ï¼šS5 å½“é€‰ term3 çš„ leader&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.9387019230769231&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6pc32tWo6Y0axUrXLsZw36Ig7mGNMj5cFic2Q7XvubZPibnHh1iaUpQPLSNoXoX81RtSjQbwTTuT3aXg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;832&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;å›¾ï¼šS4 å®•æœºæ¢å¤åæ”¶åˆ°äº†æ¥è‡ª S5 çš„ term3 å¿ƒè·³&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.935251798561151&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6pc32tWo6Y0axUrXLsZw36IddsvkChAaN32ib3ibib6XP3eTBwGZSs97LM1U1z0picxJ8nwjoFBxP7Wog/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;834&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;å›¾ï¼šS4 ç«‹åˆ»å˜ä¸º S5 çš„ follower&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä»¥ä¸Šå°±æ˜¯ Raft çš„é€‰ä¸»é€»è¾‘ï¼Œä½†è¿˜æœ‰ä¸€äº›ç»†èŠ‚ï¼ˆè­¬å¦‚æ˜¯å¦ç»™è¯¥ candidate æŠ•ç¥¨è¿˜æœ‰ä¸€äº›å…¶å®ƒæ¡ä»¶ï¼‰ä¾èµ–ç®—æ³•çš„å…¶å®ƒéƒ¨åˆ†åŸºç¡€ï¼Œæˆ‘ä»¬ä¼šåœ¨åç»­â€œå®‰å…¨æ€§â€ä¸€ç« æè¿°ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“ç¥¨é€‰å‡º leader åï¼Œleader ä¹Ÿè¯¥æ‰¿æ‹…èµ·ç›¸åº”çš„è´£ä»»äº†ï¼Œè¿™ä¸ªè´£ä»»æ˜¯ä»€ä¹ˆï¼Ÿå°±æ˜¯ä¸‹ä¸€ç« å°†ä»‹ç»çš„â€œæ—¥å¿—å¤åˆ¶â€ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;3. æ—¥å¿—å¤åˆ¶&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;3.1 ä»€ä¹ˆæ˜¯æ—¥å¿—å¤åˆ¶&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åœ¨å‰æ–‡ä¸­æˆ‘ä»¬è®²è¿‡ï¼šå…±è¯†ç®—æ³•é€šå¸¸åŸºäº&lt;strong&gt;çŠ¶æ€å¤åˆ¶æœºï¼ˆReplicated State Machineï¼‰&lt;/strong&gt;æ¨¡å‹ï¼Œæ‰€æœ‰èŠ‚ç‚¹ä»&lt;strong&gt;åŒä¸€ä¸ª state&lt;/strong&gt; å‡ºå‘ï¼Œç»è¿‡ä¸€ç³»åˆ—&lt;strong&gt;åŒæ ·æ“ä½œ log&lt;/strong&gt; çš„æ­¥éª¤ï¼Œæœ€ç»ˆä¹Ÿå¿…å°†è¾¾åˆ°&lt;strong&gt;ä¸€è‡´çš„ state&lt;/strong&gt;ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æˆ‘ä»¬ä¿è¯é›†ç¾¤ä¸­æ‰€æœ‰èŠ‚ç‚¹çš„ log ä¸€è‡´ï¼Œé‚£ä¹ˆç»è¿‡ä¸€ç³»åˆ—åº”ç”¨ï¼ˆapplyï¼‰åæœ€ç»ˆå¾—åˆ°çš„çŠ¶æ€æœºä¹Ÿå°±æ˜¯ä¸€è‡´çš„ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Raft è´Ÿè´£ä¿è¯é›†ç¾¤ä¸­æ‰€æœ‰èŠ‚ç‚¹ &lt;strong&gt;log çš„ä¸€è‡´æ€§&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ­¤å¤–æˆ‘ä»¬è¿˜æåˆ°è¿‡ï¼šRaft èµ‹äºˆäº† leader èŠ‚ç‚¹æ›´å¼ºçš„é¢†å¯¼åŠ›ï¼ˆ&lt;strong&gt;Strong Leader&lt;/strong&gt;ï¼‰ã€‚é‚£ä¹ˆ Raft ä¿è¯ log ä¸€è‡´çš„æ–¹å¼å°±å¾ˆå®¹æ˜“ç†è§£äº†ï¼Œå³æ‰€æœ‰ log éƒ½å¿…é¡»äº¤ç»™ leader èŠ‚ç‚¹å¤„ç†ï¼Œå¹¶ç”± leader èŠ‚ç‚¹å¤åˆ¶ç»™å…¶å®ƒèŠ‚ç‚¹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™ä¸ªè¿‡ç¨‹ï¼Œå°±å«åš&lt;strong&gt;æ—¥å¿—å¤åˆ¶ï¼ˆLog replicationï¼‰&lt;/strong&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;3.2 Raft æ—¥å¿—å¤åˆ¶æœºåˆ¶è§£æ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;3.2.1 æ•´ä½“æµç¨‹è§£æ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸€æ—¦ leader è¢«ç¥¨é€‰å‡ºæ¥ï¼Œå®ƒå°±æ‰¿æ‹…èµ·é¢†å¯¼æ•´ä¸ªé›†ç¾¤çš„è´£ä»»äº†ï¼Œå¼€å§‹æ¥æ”¶å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå¹¶å°†æ“ä½œåŒ…è£…æˆæ—¥å¿—ï¼Œå¹¶å¤åˆ¶åˆ°å…¶å®ƒèŠ‚ç‚¹ä¸Šå»ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;Leader ä¸ºå®¢æˆ·ç«¯æä¾›æœåŠ¡ï¼Œå®¢æˆ·ç«¯çš„æ¯ä¸ªè¯·æ±‚éƒ½åŒ…å«ä¸€æ¡å³å°†è¢«çŠ¶æ€å¤åˆ¶æœºæ‰§è¡Œçš„æŒ‡ä»¤ã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Leader æŠŠè¯¥æŒ‡ä»¤ä½œä¸ºä¸€æ¡æ–°çš„æ—¥å¿—é™„åŠ åˆ°è‡ªèº«çš„æ—¥å¿—é›†åˆï¼Œç„¶åå‘å…¶å®ƒèŠ‚ç‚¹å‘èµ·&lt;strong&gt;é™„åŠ æ¡ç›®è¯·æ±‚ï¼ˆAppendEntries RPCï¼‰&lt;/strong&gt;ï¼Œæ¥è¦æ±‚å®ƒä»¬å°†è¿™æ¡æ—¥å¿—é™„åŠ åˆ°å„è‡ªæœ¬åœ°çš„æ—¥å¿—é›†åˆã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;å½“è¿™æ¡æ—¥å¿—å·²ç»ç¡®ä¿è¢«&lt;strong&gt;å®‰å…¨çš„å¤åˆ¶&lt;/strong&gt;ï¼Œå³å¤§å¤šæ•°ï¼ˆN/2+1ï¼‰èŠ‚ç‚¹éƒ½å·²ç»å¤åˆ¶åï¼Œleader ä¼šå°†è¯¥æ—¥å¿— &lt;strong&gt;apply&lt;/strong&gt; åˆ°å®ƒæœ¬åœ°çš„çŠ¶æ€æœºä¸­ï¼Œç„¶åæŠŠæ“ä½œæˆåŠŸçš„ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ•´ä¸ªé›†ç¾¤çš„æ—¥å¿—æ¨¡å‹å¯ä»¥å®è§‚è¡¨ç¤ºä¸ºä¸‹å›¾ï¼ˆx â† 3 ä»£è¡¨ x èµ‹å€¼ä¸º 3ï¼‰ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.7560283687943262&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6r7LqPnp2KFbHcfQvfgBb17Jl4utBzmsa1XUIa0h9lwXkibms0XWfibNcpzrZ9EDgUHHib8kVI5P37mw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1410&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ¯æ¡æ—¥å¿—é™¤äº†å­˜å‚¨çŠ¶æ€æœºçš„æ“ä½œæŒ‡ä»¤å¤–ï¼Œè¿˜ä¼šæ‹¥æœ‰ä¸€ä¸ª&lt;strong&gt;å”¯ä¸€çš„æ•´æ•°ç´¢å¼•å€¼ï¼ˆlog indexï¼‰&lt;/strong&gt;æ¥è¡¨æ˜å®ƒåœ¨æ—¥å¿—é›†åˆä¸­çš„ä½ç½®ã€‚æ­¤å¤–ï¼Œæ¯æ¡æ—¥å¿—è¿˜ä¼šå­˜å‚¨ä¸€ä¸ª &lt;strong&gt;term&lt;/strong&gt; å·ï¼ˆæ—¥å¿—æ¡ç›®æ–¹å—æœ€ä¸Šæ–¹çš„æ•°å­—ï¼Œç›¸åŒé¢œè‰² term å·ç›¸åŒï¼‰ï¼Œè¯¥ term è¡¨ç¤º leader æ”¶åˆ°è¿™æ¡æŒ‡ä»¤æ—¶çš„å½“å‰ä»»æœŸï¼Œterm ç›¸åŒçš„ log æ˜¯ç”±åŒä¸€ä¸ª leader åœ¨å…¶ä»»æœŸå†…å‘é€çš„ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“ä¸€æ¡æ—¥å¿—è¢« leader èŠ‚ç‚¹è®¤ä¸ºå¯ä»¥å®‰å…¨çš„ apply åˆ°çŠ¶æ€æœºæ—¶ï¼Œç§°è¿™æ¡æ—¥å¿—æ˜¯ &lt;strong&gt;committed&lt;/strong&gt;ï¼ˆä¸Šå›¾ä¸­çš„ &lt;strong&gt;committed entries&lt;/strong&gt;ï¼‰ã€‚é‚£ä¹ˆä»€ä¹ˆæ ·çš„æ—¥å¿—å¯ä»¥è¢« commit å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼š&lt;strong&gt;å½“ leader å¾—çŸ¥è¿™æ¡æ—¥å¿—è¢«é›†ç¾¤è¿‡åŠçš„èŠ‚ç‚¹å¤åˆ¶æˆåŠŸæ—¶&lt;/strong&gt;ã€‚å› æ­¤åœ¨ä¸Šå›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ° (term3, index7) è¿™æ¡æ—¥å¿—ä»¥åŠä¹‹å‰çš„æ—¥å¿—éƒ½æ˜¯ committedï¼Œå°½ç®¡æœ‰ä¸¤ä¸ªèŠ‚ç‚¹æ‹¥æœ‰çš„æ—¥å¿—å¹¶ä¸å®Œæ•´ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Raft ä¿è¯æ‰€æœ‰ committed æ—¥å¿—éƒ½å·²ç»è¢«&lt;strong&gt;æŒä¹…åŒ–&lt;/strong&gt;ï¼Œä¸”â€œ&lt;strong&gt;æœ€ç»ˆ&lt;/strong&gt;â€ä¸€å®šä¼šè¢«çŠ¶æ€æœºapplyã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;æ³¨ï¼šè¿™é‡Œçš„â€œæœ€ç»ˆâ€ç”¨è¯å¾ˆå¾®å¦™ï¼Œå®ƒè¡¨æ˜äº†ä¸€ä¸ªç‰¹ç‚¹ï¼šRaft ä¿è¯çš„åªæ˜¯é›†ç¾¤å†…æ—¥å¿—çš„ä¸€è‡´æ€§ï¼Œè€Œæˆ‘ä»¬çœŸæ­£æœŸæœ›çš„é›†ç¾¤å¯¹å¤–çš„çŠ¶æ€æœºä¸€è‡´æ€§éœ€è¦æˆ‘ä»¬åšä¸€äº›é¢å¤–å·¥ä½œï¼Œè¿™ä¸€ç‚¹åœ¨ã€Šçº¿æ€§ä¸€è‡´æ€§ä¸è¯»æ€§èƒ½ä¼˜åŒ–ã€‹ä¸€ç« ä¼šç€é‡ä»‹ç»ã€‚&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;3.2.2 æ—¥å¿—å¤åˆ¶æµç¨‹å›¾è§£&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬é€šè¿‡ Raft åŠ¨ç”»æ¥æ¨¡æ‹Ÿå¸¸è§„æ—¥å¿—å¤åˆ¶è¿™ä¸€è¿‡ç¨‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.5317460317460317&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6r7LqPnp2KFbHcfQvfgBb17iaVIy9WiaGOQqcwc34YIARSREnF1rIc4boJic1tfic2b9Evcag4zZZZvTw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1512&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;br/&gt;å¦‚ä¸Šå›¾ï¼ŒS1 å½“é€‰ leaderï¼Œæ­¤æ—¶è¿˜æ²¡æœ‰ä»»ä½•æ—¥å¿—ã€‚æˆ‘ä»¬æ¨¡æ‹Ÿå®¢æˆ·ç«¯å‘ S1 å‘èµ·ä¸€ä¸ªè¯·æ±‚ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.5253333333333333&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6r7LqPnp2KFbHcfQvfgBb17a7A9ad4okMRRzZpD1Dy7nlJRox4m2mlibBpS3PU2J4mEx4njYXvpwFw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1500&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;S1 æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚åæ–°å¢äº†ä¸€æ¡æ—¥å¿— (term2, index1)ï¼Œç„¶åå¹¶è¡Œåœ°å‘å…¶å®ƒèŠ‚ç‚¹å‘èµ· AppendEntries RPCã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.5266666666666666&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6r7LqPnp2KFbHcfQvfgBb17bndJsTOj2C5gDDwcKTYaaa7EiarMic1w2lhbZ2hOmUpSz0t6c1XZyI1w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1500&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;S2ã€S4 ç‡å…ˆæ”¶åˆ°äº†è¯·æ±‚ï¼Œå„è‡ªé™„åŠ äº†è¯¥æ—¥å¿—ï¼Œå¹¶å‘ S1 å›åº”å“åº”ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.523936170212766&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6r7LqPnp2KFbHcfQvfgBb17AkE76iauFHz9eBJlNQiczkVnmU3Dpk4w8pd8XFC5pL5XafQQrDx8IUjg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1504&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ‰€æœ‰èŠ‚ç‚¹éƒ½é™„åŠ äº†è¯¥æ—¥å¿—ï¼Œä½†ç”±äº leader å°šæœªæ”¶åˆ°ä»»ä½•å“åº”ï¼Œå› æ­¤æš‚æ—¶è¿˜ä¸æ¸…æ¥šè¯¥æ—¥å¿—åˆ°åº•æ˜¯å¦è¢«æˆåŠŸå¤åˆ¶ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.521970705725699&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6r7LqPnp2KFbHcfQvfgBb17ico1kLywianZrG4a22Nup6lWQzEZDAfWjV5C84zULAD3iayBfLTqMCZiaw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1502&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“ S1 æ”¶åˆ°&lt;strong&gt;2ä¸ªèŠ‚ç‚¹&lt;/strong&gt;çš„å“åº”æ—¶ï¼Œè¯¥æ—¥å¿—æ¡ç›®çš„è¾¹æ¡†å°±å·²ç»å˜ä¸ºå®çº¿ï¼Œè¡¨ç¤ºè¯¥æ—¥å¿—å·²ç»&lt;strong&gt;å®‰å…¨çš„å¤åˆ¶&lt;/strong&gt;ï¼Œå› ä¸ºåœ¨5èŠ‚ç‚¹é›†ç¾¤ä¸­ï¼Œ2ä¸ª follower èŠ‚ç‚¹åŠ ä¸Š leader èŠ‚ç‚¹è‡ªèº«ï¼Œå‰¯æœ¬æ•°å·²ç»ç¡®ä¿è¿‡åŠï¼Œæ­¤æ—¶ &lt;strong&gt;S1 å°†å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.5206391478029294&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6r7LqPnp2KFbHcfQvfgBb17G64Ev75FZafF5YasPYI68Yvy2fOOZJbd1ibAuEayJGQaZxfkiazBCNicQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1502&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;leader åç»­ä¼šæŒç»­å‘é€å¿ƒè·³åŒ…ç»™ followersï¼Œå¿ƒè·³åŒ…ä¸­ä¼šæºå¸¦å½“å‰&lt;strong&gt;å·²ç»å®‰å…¨å¤åˆ¶ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸º committedï¼‰çš„æ—¥å¿—ç´¢å¼•&lt;/strong&gt;ï¼Œæ­¤å¤„ä¸º (term2, index1)ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.5202388852023888&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6r7LqPnp2KFbHcfQvfgBb17I3wiaoTMKupYyJQZVxGpiceMPYu6DPamprcHQMm65jETq7kLjPxNReuw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1507&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ‰€æœ‰ follower éƒ½é€šè¿‡å¿ƒè·³åŒ…å¾—çŸ¥ (term2, index1) çš„ log å·²ç»æˆåŠŸå¤åˆ¶ ï¼ˆcommittedï¼‰ï¼Œå› æ­¤æ‰€æœ‰èŠ‚ç‚¹ä¸­è¯¥æ—¥å¿—æ¡ç›®çš„è¾¹æ¡†å‡å˜ä¸ºå®çº¿ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;3.2.3 å¯¹æ—¥å¿—ä¸€è‡´æ€§çš„ä¿è¯&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å‰è¾¹æˆ‘ä»¬ä½¿ç”¨äº† (term2, index1) è¿™ç§æ–¹å¼æ¥è¡¨ç¤ºä¸€æ¡æ—¥å¿—æ¡ç›®ï¼Œè¿™é‡Œä¸ºä»€ä¹ˆè¦å¸¦ä¸Š termï¼Œè€Œä¸ä»…ä»…æ˜¯ä½¿ç”¨ indexï¼ŸåŸå› æ˜¯ term å¯ä»¥ç”¨æ¥æ£€æŸ¥ä¸åŒèŠ‚ç‚¹é—´æ—¥å¿—æ˜¯å¦å­˜åœ¨ä¸ä¸€è‡´çš„æƒ…å†µï¼Œé˜…è¯»ä¸‹ä¸€èŠ‚åä¼šæ›´å®¹æ˜“ç†è§£è¿™å¥è¯ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Raft ä¿è¯ï¼š&lt;strong&gt;å¦‚æœä¸åŒçš„èŠ‚ç‚¹æ—¥å¿—é›†åˆä¸­çš„ä¸¤ä¸ªæ—¥å¿—æ¡ç›®æ‹¥æœ‰ç›¸åŒçš„ term å’Œ indexï¼Œé‚£ä¹ˆå®ƒä»¬ä¸€å®šå­˜å‚¨äº†ç›¸åŒçš„æŒ‡ä»¤&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸ºä»€ä¹ˆå¯ä»¥ä½œå‡ºè¿™ç§ä¿è¯ï¼Ÿå› ä¸º Raft è¦æ±‚ leader åœ¨ä¸€ä¸ª term å†…é’ˆå¯¹åŒä¸€ä¸ª index åªèƒ½åˆ›å»ºä¸€æ¡æ—¥å¿—ï¼Œå¹¶ä¸”æ°¸è¿œä¸ä¼šä¿®æ”¹å®ƒã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åŒæ—¶ Raft ä¹Ÿä¿è¯ï¼š&lt;strong&gt;å¦‚æœä¸åŒçš„èŠ‚ç‚¹æ—¥å¿—é›†åˆä¸­çš„ä¸¤ä¸ªæ—¥å¿—æ¡ç›®æ‹¥æœ‰ç›¸åŒçš„ term å’Œ indexï¼Œé‚£ä¹ˆå®ƒä»¬ä¹‹å‰çš„æ‰€æœ‰æ—¥å¿—æ¡ç›®ä¹Ÿå…¨éƒ¨ç›¸åŒ&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¿™æ˜¯å› ä¸º leader å‘å‡ºçš„ AppendEntries RPC ä¸­ä¼šé¢å¤–æºå¸¦&lt;strong&gt;ä¸Šä¸€æ¡&lt;/strong&gt;æ—¥å¿—çš„ (term, index)ï¼Œå¦‚æœ follower åœ¨æœ¬åœ°æ‰¾ä¸åˆ°ç›¸åŒçš„ (term, index) æ—¥å¿—ï¼Œåˆ™&lt;strong&gt;æ‹’ç»æ¥æ”¶è¿™æ¬¡æ–°çš„æ—¥å¿—&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ‰€ä»¥ï¼Œåªè¦ follower æŒç»­æ­£å¸¸åœ°æ¥æ”¶æ¥è‡ª leader çš„æ—¥å¿—ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡å½’çº³æ³•éªŒè¯ä¸Šè¿°ç»“è®ºã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;3.2.4 å¯èƒ½å‡ºç°çš„æ—¥å¿—ä¸ä¸€è‡´åœºæ™¯&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åœ¨æ‰€æœ‰èŠ‚ç‚¹æ­£å¸¸å·¥ä½œçš„æ—¶å€™ï¼Œleader å’Œ followerçš„æ—¥å¿—æ€»æ˜¯ä¿æŒä¸€è‡´ï¼ŒAppendEntries RPC ä¹Ÿæ°¸è¿œä¸ä¼šå¤±è´¥ã€‚ç„¶è€Œæˆ‘ä»¬æ€»è¦é¢å¯¹ä»»æ„èŠ‚ç‚¹éšæ—¶å¯èƒ½å®•æœºçš„é£é™©ï¼Œå¦‚ä½•åœ¨è¿™ç§æƒ…å†µä¸‹ç»§ç»­ä¿æŒé›†ç¾¤æ—¥å¿—çš„ä¸€è‡´æ€§æ‰æ˜¯æˆ‘ä»¬çœŸæ­£è¦è§£å†³çš„é—®é¢˜ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.6763848396501457&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6qAPI6WrC0YUAjNfyQ0CjuDbPnDO9kSV3pgFlE23IT4BPFDbqhWVVFqPcwsQJmMWQeU2cNeyJhYMg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1372&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸Šå›¾å±•ç¤ºäº†ä¸€ä¸ª term8 çš„ leader åˆšä¸Šä»»æ—¶ï¼Œé›†ç¾¤ä¸­æ—¥å¿—å¯èƒ½å­˜åœ¨çš„æ··ä¹±æƒ…å†µã€‚ä¾‹å¦‚ follower å¯èƒ½ç¼ºå°‘ä¸€äº›æ—¥å¿—ï¼ˆa ~ bï¼‰ï¼Œå¯èƒ½å¤šäº†ä¸€äº›æœªæäº¤çš„æ—¥å¿—ï¼ˆc ~ dï¼‰ï¼Œä¹Ÿå¯èƒ½æ—¢ç¼ºå°‘æ—¥å¿—åˆå¤šäº†ä¸€äº›æœªæäº¤æ—¥å¿—ï¼ˆe ~ fï¼‰ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;æ³¨ï¼šFollower ä¸å¯èƒ½æ¯” leader å¤šå‡ºä¸€äº›å·²æäº¤ï¼ˆcommittedï¼‰æ—¥å¿—ï¼Œè¿™ä¸€ç‚¹æ˜¯é€šè¿‡é€‰ä¸¾ä¸Šçš„é™åˆ¶æ¥è¾¾æˆçš„ï¼Œä¼šåœ¨ä¸‹ä¸€ç« ã€Šå®‰å…¨æ€§ã€‹ä»‹ç»ã€‚&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬å…ˆæ¥å°è¯•å¤ç°ä¸Šè¿° a ~ f åœºæ™¯ï¼Œæœ€åå†è®² Raft å¦‚ä½•è§£å†³è¿™ç§ä¸ä¸€è‡´é—®é¢˜ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;åœºæ™¯a~b. Follower æ—¥å¿—è½åäº leader&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¿™ç§åœºæ™¯å…¶å®å¾ˆç®€å•ï¼Œå³ &lt;strong&gt;follower å®•æœºäº†ä¸€æ®µæ—¶é—´&lt;/strong&gt;ï¼Œfollower-a ä»æ”¶åˆ° (term6, index9) åå¼€å§‹å®•æœºï¼Œfollower-b ä»æ”¶åˆ° (term4, index4) åå¼€å§‹å®•æœºã€‚è¿™é‡Œä¸å†èµ˜è¿°ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;åœºæ™¯c. Follower æ—¥å¿—æ¯” leader å¤š term6&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“ term6 çš„ leader æ­£åœ¨å°† (term6, index11) å‘ follower åŒæ­¥æ—¶ï¼Œè¯¥ leader å‘ç”Ÿäº†å®•æœºï¼Œä¸”æ­¤æ—¶åªæœ‰ follower-c æ”¶åˆ°äº†è¿™æ¡æ—¥å¿—çš„ AppendEntries RPCã€‚ç„¶åç»è¿‡ä¸€ç³»åˆ—çš„é€‰ä¸¾ï¼Œterm7 å¯èƒ½æ˜¯é€‰ä¸¾è¶…æ—¶ï¼Œä¹Ÿå¯èƒ½æ˜¯ leader åˆšä¸Šä»»å°±å®•æœºäº†ï¼Œæœ€ç»ˆ term8 çš„ leader ä¸Šä»»äº†ï¼Œæˆå°±äº†æˆ‘ä»¬çœ‹åˆ°çš„åœºæ™¯ cã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;åœºæ™¯d. Follower æ—¥å¿—æ¯” leader å¤š term7&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“ term6 çš„ leader å°† (term6, index10) æˆåŠŸ commit åï¼Œå‘ç”Ÿäº†å®•æœºã€‚æ­¤æ—¶ term7 çš„ leader èµ°é©¬ä¸Šä»»ï¼Œè¿ç»­åŒæ­¥äº†ä¸¤æ¡æ—¥å¿—ç»™ followerï¼Œç„¶è€Œè¿˜æ²¡æ¥å¾—åŠ commit å°±å®•æœºäº†ï¼Œéšåé›†ç¾¤é€‰å‡ºäº† term8 çš„ leaderã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;åœºæ™¯e. Follower æ—¥å¿—æ¯” leader å°‘ term5 ~ 6ï¼Œå¤š term4&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“ term4 çš„ leader å°† (term4, index7) åŒæ­¥ç»™ followerï¼Œä¸”å°† (term4, index5) åŠä¹‹å‰çš„æ—¥å¿—æˆåŠŸ commit åï¼Œå‘ç”Ÿäº†å®•æœºï¼Œç´§æ¥ç€ follower-e ä¹Ÿå‘ç”Ÿäº†å®•æœºã€‚è¿™æ ·åœ¨ term5~7 å†…å‘ç”Ÿçš„æ—¥å¿—åŒæ­¥å…¨éƒ½è¢« follower-e é”™è¿‡äº†ã€‚å½“ follower-e æ¢å¤åï¼Œterm8 çš„ leader ä¹Ÿåˆšå¥½ä¸Šä»»äº†ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;åœºæ™¯f. Follower æ—¥å¿—æ¯” leader å°‘ term4 ~ 6ï¼Œå¤š term2 ~ 3&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“ term2 çš„ leader åŒæ­¥äº†ä¸€äº›æ—¥å¿—ï¼ˆindex4 ~ 6ï¼‰ç»™ follower åï¼Œå°šæœªæ¥å¾—åŠ commit æ—¶å‘ç”Ÿäº†å®•æœºï¼Œä½†å®ƒå¾ˆå¿«æ¢å¤è¿‡æ¥äº†ï¼Œåˆè¢«é€‰ä¸ºäº† term3 çš„ leaderï¼Œå®ƒç»§ç»­åŒæ­¥äº†ä¸€äº›æ—¥å¿—ï¼ˆindex7~11ï¼‰ç»™ followerï¼Œä½†åŒæ ·æœªæ¥å¾—åŠ commit å°±åˆå‘ç”Ÿäº†å®•æœºï¼Œç´§æ¥ç€ follower-f ä¹Ÿå‘ç”Ÿäº†å®•æœºï¼Œå½“ follower-f é†’æ¥æ—¶ï¼Œé›†ç¾¤å·²ç»å‰è¿›åˆ° term8 äº†ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;3.2.5 å¦‚ä½•å¤„ç†æ—¥å¿—ä¸ä¸€è‡´&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;é€šè¿‡ä¸Šè¿°åœºæ™¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒçœŸå®ä¸–ç•Œçš„é›†ç¾¤æƒ…å†µå¾ˆå¤æ‚ï¼Œé‚£ä¹ˆ Raft æ˜¯å¦‚ä½•åº”å¯¹è¿™ä¹ˆå¤šä¸ä¸€è‡´åœºæ™¯çš„å‘¢ï¼Ÿå…¶å®æ–¹å¼å¾ˆç®€å•æš´åŠ›ï¼Œæƒ³æƒ³ &lt;strong&gt;Strong Leader&lt;/strong&gt; è¿™ä¸ªè¯ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Raft å¼ºåˆ¶è¦æ±‚ follower å¿…é¡»å¤åˆ¶ leader çš„æ—¥å¿—é›†åˆæ¥è§£å†³ä¸ä¸€è‡´é—®é¢˜ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´ï¼Œfollower èŠ‚ç‚¹ä¸Šä»»ä½•ä¸ leader ä¸ä¸€è‡´çš„æ—¥å¿—ï¼Œéƒ½ä¼šè¢« leader èŠ‚ç‚¹ä¸Šçš„æ—¥å¿—æ‰€è¦†ç›–ã€‚è¿™å¹¶ä¸ä¼šäº§ç”Ÿä»€ä¹ˆé—®é¢˜ï¼Œå› ä¸ºæŸäº›é€‰ä¸¾ä¸Šçš„é™åˆ¶ï¼Œå¦‚æœ follower ä¸Šçš„æ—¥å¿—ä¸ leader ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆè¯¥æ—¥å¿—åœ¨ follower ä¸Š&lt;strong&gt;ä¸€å®šæ˜¯æœªæäº¤çš„&lt;/strong&gt;ã€‚æœªæäº¤çš„æ—¥å¿—å¹¶ä¸ä¼šåº”ç”¨åˆ°çŠ¶æ€æœºï¼Œä¹Ÿä¸ä¼šè¢«å¤–éƒ¨çš„å®¢æˆ·ç«¯æ„ŸçŸ¥åˆ°ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¦ä½¿å¾— follower çš„æ—¥å¿—é›†åˆè·Ÿè‡ªå·±ä¿æŒå®Œå…¨ä¸€è‡´ï¼Œleader å¿…é¡»å…ˆæ‰¾åˆ°äºŒè€…é—´&lt;strong&gt;æœ€åä¸€æ¬¡&lt;/strong&gt;è¾¾æˆä¸€è‡´çš„åœ°æ–¹ã€‚å› ä¸ºä¸€æ—¦è¿™æ¡æ—¥å¿—è¾¾æˆä¸€è‡´ï¼Œåœ¨è¿™ä¹‹å‰çš„æ—¥å¿—ä¸€å®šä¹Ÿéƒ½ä¸€è‡´ï¼ˆå›å¿†ä¸‹å‰æ–‡ï¼‰ã€‚è¿™ä¸ªç¡®è®¤æ“ä½œæ˜¯åœ¨ AppendEntries RPC çš„ä¸€è‡´æ€§æ£€æŸ¥æ­¥éª¤å®Œæˆçš„ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Leader é’ˆå¯¹æ¯ä¸ª follower éƒ½ç»´æŠ¤ä¸€ä¸ª &lt;strong&gt;next index&lt;/strong&gt;ï¼Œè¡¨ç¤ºä¸‹ä¸€æ¡éœ€è¦å‘é€ç»™è¯¥follower çš„æ—¥å¿—ç´¢å¼•ã€‚å½“ä¸€ä¸ª leader åˆšåˆšä¸Šä»»æ—¶ï¼Œå®ƒåˆå§‹åŒ–æ‰€æœ‰ next index å€¼ä¸ºè‡ªå·±æœ€åä¸€æ¡æ—¥å¿—çš„ index+1ã€‚ä½†å‡¡æŸä¸ª follower çš„æ—¥å¿—è·Ÿ leader ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆä¸‹æ¬¡ AppendEntries RPC çš„ä¸€è‡´æ€§æ£€æŸ¥å°±ä¼šå¤±è´¥ã€‚åœ¨è¢« follower æ‹’ç»è¿™æ¬¡ Append Entries RPC åï¼Œleader ä¼šå‡å°‘ next index çš„å€¼å¹¶è¿›è¡Œé‡è¯•ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æœ€ç»ˆä¸€å®šä¼šå­˜åœ¨ä¸€ä¸ª next index ä½¿å¾— leader å’Œ follower åœ¨è¿™ä¹‹å‰çš„æ—¥å¿—éƒ½ä¿æŒä¸€è‡´ã€‚æç«¯æƒ…å†µä¸‹ next index ä¸º1ï¼Œè¡¨ç¤º follower æ²¡æœ‰ä»»ä½•æ—¥å¿—ä¸ leader ä¸€è‡´ï¼Œleader å¿…é¡»ä»ç¬¬ä¸€æ¡æ—¥å¿—å¼€å§‹åŒæ­¥ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;é’ˆå¯¹æ¯ä¸ª followerï¼Œä¸€æ—¦ç¡®å®šäº† next index çš„å€¼ï¼Œleader ä¾¿å¼€å§‹ä»è¯¥ index åŒæ­¥æ—¥å¿—ï¼Œfollower ä¼šåˆ é™¤æ‰ç°å­˜çš„ä¸ä¸€è‡´çš„æ—¥å¿—ï¼Œä¿ç•™ leader æœ€æ–°åŒæ­¥è¿‡æ¥çš„ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ•´ä¸ªé›†ç¾¤çš„æ—¥å¿—ä¼šåœ¨è¿™ä¸ªç®€å•çš„æœºåˆ¶ä¸‹è‡ªåŠ¨è¶‹äºä¸€è‡´ã€‚æ­¤å¤–è¦æ³¨æ„ï¼Œ&lt;strong&gt;leader ä»æ¥ä¸ä¼šè¦†ç›–æˆ–è€…åˆ é™¤è‡ªå·±çš„æ—¥å¿—&lt;/strong&gt;ï¼Œè€Œæ˜¯å¼ºåˆ¶ follower ä¸å®ƒä¿æŒä¸€è‡´ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¿™å°±è¦æ±‚é›†ç¾¤ç¥¨é€‰å‡ºçš„ leader ä¸€å®šè¦å…·å¤‡â€œæ—¥å¿—çš„æ­£ç¡®æ€§â€ï¼Œè¿™ä¹Ÿå°±å…³è”åˆ°äº†å‰æ–‡æåˆ°çš„ï¼šé€‰ä¸¾ä¸Šçš„é™åˆ¶ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸‹ä¸€ç« æˆ‘ä»¬å°†å¯¹æ­¤è¯¦ç»†è®¨è®ºã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;4. å®‰å…¨æ€§åŠæ­£ç¡®æ€§&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å‰é¢çš„ç« èŠ‚æˆ‘ä»¬è®²è¿°äº† Raft ç®—æ³•æ˜¯å¦‚ä½•é€‰ä¸»å’Œå¤åˆ¶æ—¥å¿—çš„ï¼Œç„¶è€Œåˆ°ç›®å‰ä¸ºæ­¢æˆ‘ä»¬æè¿°çš„&lt;strong&gt;è¿™å¥—æœºåˆ¶è¿˜ä¸èƒ½ä¿è¯æ¯ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€æœºä¼šä¸¥æ ¼æŒ‰ç…§ç›¸åŒçš„é¡ºåº apply æ—¥å¿—&lt;/strong&gt;ã€‚æƒ³è±¡ä»¥ä¸‹åœºæ™¯ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;Leader å°†ä¸€äº›æ—¥å¿—å¤åˆ¶åˆ°äº†å¤§å¤šæ•°èŠ‚ç‚¹ä¸Šï¼Œè¿›è¡Œ commit åå‘ç”Ÿäº†å®•æœºã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æŸä¸ª follower å¹¶æ²¡æœ‰è¢«å¤åˆ¶åˆ°è¿™äº›æ—¥å¿—ï¼Œä½†å®ƒå‚ä¸é€‰ä¸¾å¹¶å½“é€‰äº†ä¸‹ä¸€ä»» leaderã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æ–°çš„ leader åˆåŒæ­¥å¹¶ commit äº†ä¸€äº›æ—¥å¿—ï¼Œè¿™äº›æ—¥å¿—è¦†ç›–æ‰äº†å…¶å®ƒèŠ‚ç‚¹ä¸Šçš„ä¸Šä¸€ä»» committed æ—¥å¿—ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å„ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€æœºå¯èƒ½ apply äº†ä¸åŒçš„æ—¥å¿—åºåˆ—ï¼Œå‡ºç°äº†ä¸ä¸€è‡´çš„æƒ…å†µã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å› æ­¤æˆ‘ä»¬éœ€è¦å¯¹â€œé€‰ä¸»+æ—¥å¿—å¤åˆ¶â€è¿™å¥—æœºåˆ¶åŠ ä¸Šä¸€äº›é¢å¤–çš„é™åˆ¶ï¼Œæ¥ä¿è¯&lt;strong&gt;çŠ¶æ€æœºçš„å®‰å…¨æ€§&lt;/strong&gt;ï¼Œä¹Ÿå°±æ˜¯ Raft ç®—æ³•çš„æ­£ç¡®æ€§ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;4.1 å¯¹é€‰ä¸¾çš„é™åˆ¶&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬å†æ¥åˆ†æä¸‹å‰æ–‡æ‰€è¿°çš„ committed æ—¥å¿—è¢«è¦†ç›–çš„åœºæ™¯ï¼Œæ ¹æœ¬é—®é¢˜å…¶å®å‘ç”Ÿåœ¨ç¬¬2æ­¥ã€‚Candidate å¿…é¡»æœ‰è¶³å¤Ÿçš„èµ„æ ¼æ‰èƒ½å½“é€‰é›†ç¾¤ leaderï¼Œå¦åˆ™å®ƒå°±ä¼šç»™é›†ç¾¤å¸¦æ¥ä¸å¯é¢„æ–™çš„é”™è¯¯ã€‚Candidate æ˜¯å¦å…·å¤‡è¿™ä¸ªèµ„æ ¼å¯ä»¥åœ¨é€‰ä¸¾æ—¶æ·»åŠ ä¸€ä¸ªå°å°çš„æ¡ä»¶æ¥åˆ¤æ–­ï¼Œå³ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ¯ä¸ª candidate å¿…é¡»åœ¨ RequestVote RPC ä¸­æºå¸¦è‡ªå·±æœ¬åœ°æ—¥å¿—çš„æœ€æ–° (term, index)ï¼Œå¦‚æœ follower å‘ç°è¿™ä¸ª candidate çš„æ—¥å¿—è¿˜æ²¡æœ‰è‡ªå·±çš„æ–°ï¼Œåˆ™æ‹’ç»æŠ•ç¥¨ç»™è¯¥ candidateã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Candidate æƒ³è¦èµ¢å¾—é€‰ä¸¾æˆä¸º leaderï¼Œå¿…é¡»å¾—åˆ°é›†ç¾¤å¤§å¤šæ•°èŠ‚ç‚¹çš„æŠ•ç¥¨ï¼Œé‚£ä¹ˆ&lt;strong&gt;å®ƒçš„æ—¥å¿—å°±ä¸€å®šè‡³å°‘ä¸è½åäºå¤§å¤šæ•°èŠ‚ç‚¹&lt;/strong&gt;ã€‚åˆå› ä¸ºä¸€æ¡æ—¥å¿—åªæœ‰å¤åˆ¶åˆ°äº†å¤§å¤šæ•°èŠ‚ç‚¹æ‰èƒ½è¢« commitï¼Œå› æ­¤&lt;strong&gt;èƒ½èµ¢å¾—é€‰ä¸¾çš„ candidate ä¸€å®šæ‹¥æœ‰æ‰€æœ‰ committed æ—¥å¿—&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å› æ­¤å‰ä¸€ç¯‡æ–‡ç« æˆ‘ä»¬æ‰ä¼šæ–­å®šåœ°è¯´ï¼šFollower ä¸å¯èƒ½æ¯” leader å¤šå‡ºä¸€äº› committed æ—¥å¿—ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ¯”è¾ƒä¸¤ä¸ª (term, index) çš„é€»è¾‘éå¸¸ç®€å•ï¼šå¦‚æœ term ä¸åŒ term æ›´å¤§çš„æ—¥å¿—æ›´æ–°ï¼Œå¦åˆ™ index å¤§çš„æ—¥å¿—æ›´æ–°ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;4.2 å¯¹æäº¤çš„é™åˆ¶&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;é™¤äº†å¯¹é€‰ä¸¾å¢åŠ ä¸€ç‚¹é™åˆ¶å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€å¯¹ commit è¡Œä¸ºå¢åŠ ä¸€ç‚¹é™åˆ¶ï¼Œæ¥å®Œæˆæˆ‘ä»¬ Raft ç®—æ³•æ ¸å¿ƒéƒ¨åˆ†çš„æœ€åä¸€å—æ‹¼å›¾ã€‚&lt;/p&gt;&lt;p&gt;å›å¿†ä¸‹ä»€ä¹ˆæ˜¯ commitï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;å½“ leader å¾—çŸ¥æŸæ¡æ—¥å¿—è¢«é›†ç¾¤è¿‡åŠçš„èŠ‚ç‚¹å¤åˆ¶æˆåŠŸæ—¶ï¼Œå°±å¯ä»¥è¿›è¡Œ commitï¼Œcommitted æ—¥å¿—ä¸€å®šæœ€ç»ˆä¼šè¢«çŠ¶æ€æœº applyã€‚&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ‰€è°“ commit å…¶å®å°±æ˜¯å¯¹æ—¥å¿—ç®€å•è¿›è¡Œä¸€ä¸ªæ ‡è®°ï¼Œè¡¨æ˜å…¶å¯ä»¥è¢« apply åˆ°çŠ¶æ€æœºï¼Œå¹¶é’ˆå¯¹ç›¸åº”çš„å®¢æˆ·ç«¯è¯·æ±‚è¿›è¡Œå“åº”ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ç„¶è€Œ leader å¹¶ä¸èƒ½åœ¨ä»»ä½•æ—¶å€™éƒ½éšæ„ commit æ—§ä»»æœŸç•™ä¸‹çš„æ—¥å¿—ï¼Œå³ä½¿å®ƒå·²ç»è¢«å¤åˆ¶åˆ°äº†å¤§å¤šæ•°èŠ‚ç‚¹ã€‚Raft è®ºæ–‡ç»™å‡ºäº†ä¸€ä¸ªç»å…¸åœºæ™¯ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.4641269841269841&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6ojLgVaS2nEfNX5CEmHIym1KPOOaOaaPA6NIoicMfOJGG2GdkE6TqJXWG9iaEY1D16vuPjMRBpxPjTg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1575&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸Šå›¾ä»å·¦åˆ°å³æŒ‰æ—¶é—´é¡ºåºæ¨¡æ‹Ÿäº†é—®é¢˜åœºæ™¯ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;é˜¶æ®µa&lt;/strong&gt;ï¼šS1 æ˜¯ leaderï¼Œæ”¶åˆ°è¯·æ±‚åå°† (term2, index2) åªå¤åˆ¶ç»™äº† S2ï¼Œå°šæœªå¤åˆ¶ç»™ S3 ~ S5ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;é˜¶æ®µb&lt;/strong&gt;ï¼šS1 å®•æœºï¼ŒS5 å½“é€‰ term3 çš„ leaderï¼ˆS3ã€S4ã€S5 ä¸‰ç¥¨ï¼‰ï¼Œæ”¶åˆ°è¯·æ±‚åä¿å­˜äº† (term3, index2)ï¼Œå°šæœªå¤åˆ¶ç»™ä»»ä½•èŠ‚ç‚¹ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;é˜¶æ®µc&lt;/strong&gt;ï¼šS5 å®•æœºï¼ŒS1 æ¢å¤ï¼ŒS1 é‡æ–°å½“é€‰ term4 çš„ leaderï¼Œç»§ç»­å°† (term2, index2) å¤åˆ¶ç»™äº† S3ï¼Œå·²ç»æ»¡è¶³å¤§å¤šæ•°èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°†å…¶ commitã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;é˜¶æ®µd&lt;/strong&gt;ï¼šS1 åˆå®•æœºï¼ŒS5 æ¢å¤ï¼ŒS5 é‡æ–°å½“é€‰ leaderï¼ˆS2ã€S3ã€S4 ä¸‰ç¥¨ï¼‰ï¼Œå°† (term3, inde2) å¤åˆ¶ç»™äº†æ‰€æœ‰èŠ‚ç‚¹å¹¶ commitã€‚æ³¨æ„ï¼Œæ­¤æ—¶å‘ç”Ÿäº†è‡´å‘½é”™è¯¯ï¼Œå·²ç» committed çš„ (term2, index2) è¢« (term3, index2) è¦†ç›–äº†ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸ºäº†é¿å…è¿™ç§é”™è¯¯ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸€ä¸ªé¢å¤–çš„é™åˆ¶ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;Leader åªå…è®¸ commit åŒ…å«å½“å‰ term çš„æ—¥å¿—ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;é’ˆå¯¹ä¸Šè¿°åœºæ™¯ï¼Œé—®é¢˜å‘ç”Ÿåœ¨é˜¶æ®µcï¼Œå³ä½¿ä½œä¸º term4 leader çš„ S1 å°† (term2, index2) å¤åˆ¶ç»™äº†å¤§å¤šæ•°èŠ‚ç‚¹ï¼Œå®ƒä¹Ÿä¸èƒ½ç›´æ¥å°†å…¶ commitï¼Œè€Œæ˜¯å¿…é¡»ç­‰å¾… term4 çš„æ—¥å¿—åˆ°æ¥å¹¶æˆåŠŸå¤åˆ¶åï¼Œä¸€å¹¶è¿›è¡Œ commitã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;é˜¶æ®µe&lt;/strong&gt;ï¼šåœ¨æ·»åŠ äº†è¿™ä¸ªé™åˆ¶åï¼Œè¦ä¹ˆ (term2, index2) å§‹ç»ˆæ²¡æœ‰è¢« commitï¼Œè¿™æ · S5 åœ¨é˜¶æ®µdå°†å…¶è¦†ç›–å°±æ˜¯å®‰å…¨çš„ï¼›è¦ä¹ˆ (term2, index2) åŒ (term4, index3) ä¸€èµ·è¢« commitï¼Œè¿™æ · S5 æ ¹æœ¬å°±æ— æ³•å½“é€‰ leaderï¼Œå› ä¸ºå¤§å¤šæ•°èŠ‚ç‚¹çš„æ—¥å¿—éƒ½æ¯”å®ƒæ–°ï¼Œä¹Ÿå°±ä¸å­˜åœ¨å‰è¾¹çš„é—®é¢˜äº†ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä»¥ä¸Šä¾¿æ˜¯å¯¹ç®—æ³•å¢åŠ çš„ä¸¤ä¸ªå°é™åˆ¶ï¼Œå®ƒä»¬å¯¹ç¡®ä¿çŠ¶æ€æœºçš„å®‰å…¨æ€§èµ·åˆ°äº†è‡³å…³é‡è¦çš„ä½œç”¨ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è‡³æ­¤æˆ‘ä»¬å¯¹ Raft ç®—æ³•çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå·²ç»ä»‹ç»å®Œæ¯•ã€‚ä¸‹ä¸€ç« æˆ‘ä»¬ä¼šä»‹ç»ä¸¤ä¸ªåŒæ ·æè¿°äºè®ºæ–‡å†…çš„è¾…åŠ©æŠ€æœ¯ï¼šé›†ç¾¤æˆå‘˜å˜æ›´å’Œæ—¥å¿—å‹ç¼©ï¼Œå®ƒä»¬éƒ½æ˜¯åœ¨ Raft å·¥ç¨‹å®è·µä¸­å¿…ä¸å¯å°‘çš„éƒ¨åˆ†ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;5. é›†ç¾¤æˆå‘˜å˜æ›´ä¸æ—¥å¿—å‹ç¼©&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å°½ç®¡æˆ‘ä»¬å·²ç»é€šè¿‡å‰å‡ ç« äº†è§£äº† Raft ç®—æ³•çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œä½†ç›¸è¾ƒäºç®—æ³•ç†è®ºæ¥è¯´ï¼Œåœ¨å·¥ç¨‹å®è·µä¸­ä»æœ‰ä¸€äº›ç°å®é—®é¢˜éœ€è¦æˆ‘ä»¬å»é¢å¯¹ã€‚Raft éå¸¸è´´å¿ƒçš„åœ¨è®ºæ–‡ä¸­ç»™å‡ºäº†ä¸¤ä¸ªå¸¸è§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;é›†ç¾¤æˆå‘˜å˜æ›´&lt;/strong&gt;ï¼šå¦‚ä½•å®‰å…¨åœ°æ”¹å˜é›†ç¾¤çš„èŠ‚ç‚¹æˆå‘˜ã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;æ—¥å¿—å‹ç¼©&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šå¦‚ä½•è§£å†³æ—¥å¿—é›†åˆæ— é™åˆ¶å¢é•¿å¸¦æ¥çš„é—®é¢˜ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æœ¬æ–‡æˆ‘ä»¬å°†åˆ†åˆ«è®²è§£è¿™ä¸¤ç§æŠ€æœ¯ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;h2 data-id=&quot;heading-26&quot;&gt;&lt;strong&gt;&lt;span&gt;5.1 é›†ç¾¤æˆå‘˜å˜æ›´&lt;/span&gt;&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åœ¨å‰æ–‡çš„ç†è®ºæè¿°ä¸­æˆ‘ä»¬éƒ½å‡è®¾äº†é›†ç¾¤æˆå‘˜æ˜¯ä¸å˜çš„ï¼Œç„¶è€Œåœ¨å®è·µä¸­æœ‰æ—¶ä¼šéœ€è¦æ›¿æ¢å®•æœºæœºå™¨æˆ–è€…æ”¹å˜å¤åˆ¶çº§åˆ«ï¼ˆå³å¢å‡èŠ‚ç‚¹ï¼‰ã€‚ä¸€ç§æœ€ç®€å•æš´åŠ›è¾¾æˆç›®çš„çš„æ–¹å¼å°±æ˜¯ï¼šåœæ­¢é›†ç¾¤ã€æ”¹å˜æˆå‘˜ã€å¯åŠ¨é›†ç¾¤ã€‚è¿™ç§æ–¹å¼åœ¨æ‰§è¡Œæ—¶ä¼šå¯¼è‡´é›†ç¾¤æ•´ä½“ä¸å¯ç”¨ï¼Œæ­¤å¤–è¿˜å­˜åœ¨æ‰‹å·¥æ“ä½œå¸¦æ¥çš„é£é™©ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸ºäº†é¿å…è¿™æ ·çš„é—®é¢˜ï¼ŒRaft è®ºæ–‡ä¸­ç»™å‡ºäº†ä¸€ç§æ— éœ€åœæœºçš„ã€è‡ªåŠ¨åŒ–çš„æ”¹å˜é›†ç¾¤æˆå‘˜çš„æ–¹å¼ï¼Œå…¶å®æœ¬è´¨ä¸Šè¿˜æ˜¯åˆ©ç”¨äº† Raft çš„æ ¸å¿ƒç®—æ³•ï¼Œå°†é›†ç¾¤æˆå‘˜é…ç½®ä½œä¸ºä¸€ä¸ªç‰¹æ®Šæ—¥å¿—ä» leader èŠ‚ç‚¹åŒæ­¥åˆ°å…¶å®ƒèŠ‚ç‚¹å»ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;5.1.1 ç›´æ¥åˆ‡æ¢é›†ç¾¤æˆå‘˜é…ç½®&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å…ˆè¯´ç»“è®ºï¼š&lt;strong&gt;æ‰€æœ‰å°†é›†ç¾¤ä»æ—§é…ç½®ç›´æ¥å®Œå…¨åˆ‡æ¢åˆ°æ–°é…ç½®çš„æ–¹æ¡ˆéƒ½æ˜¯ä¸å®‰å…¨çš„&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å› æ­¤æˆ‘ä»¬ä¸èƒ½æƒ³å½“ç„¶çš„å°†æ–°é…ç½®ç›´æ¥ä½œä¸ºæ—¥å¿—åŒæ­¥ç»™é›†ç¾¤å¹¶ applyã€‚å› ä¸ºæˆ‘ä»¬ä¸å¯èƒ½è®©é›†ç¾¤ä¸­çš„å…¨éƒ¨èŠ‚ç‚¹åœ¨â€œ&lt;strong&gt;åŒä¸€æ—¶åˆ»&lt;/strong&gt;â€&lt;strong&gt;åŸå­åœ°&lt;/strong&gt;åˆ‡æ¢å…¶é›†ç¾¤æˆå‘˜é…ç½®ï¼Œæ‰€ä»¥åœ¨åˆ‡æ¢æœŸé—´ä¸åŒçš„èŠ‚ç‚¹çœ‹åˆ°çš„é›†ç¾¤è§†å›¾å¯èƒ½å­˜åœ¨ä¸åŒï¼Œæœ€ç»ˆå¯èƒ½å¯¼è‡´é›†ç¾¤å­˜åœ¨å¤šä¸ª leaderã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸ºäº†ç†è§£ä¸Šè¿°ç»“è®ºï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå®é™…å‡ºç°é—®é¢˜çš„åœºæ™¯ï¼Œä¸‹å›¾å¯¹å…¶è¿›è¡Œäº†å±•ç°ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.34332425068119893&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6q0eyr7icJ0wbzhpZoWsZcE8eL3z8cz8ibTEk83PFjd0C2RePlowLnE457H6e6KjqdfwdPicwILR5Spw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1835&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;å›¾5-1&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;é˜¶æ®µa&lt;/strong&gt;. é›†ç¾¤å­˜åœ¨ S1 ~ S3 ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°†è¯¥æˆå‘˜é…ç½®è¡¨ç¤ºä¸º C-oldï¼Œç»¿è‰²è¡¨ç¤ºè¯¥èŠ‚ç‚¹å½“å‰è§†å›¾ï¼ˆæˆå‘˜é…ç½®ï¼‰ä¸º C-oldï¼Œå…¶ä¸­çº¢è¾¹çš„ S3 ä¸º leaderã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;é˜¶æ®µb&lt;/strong&gt;. é›†ç¾¤æ–°å¢äº† S4ã€S5 ä¸¤ä¸ªèŠ‚ç‚¹ï¼Œè¯¥å˜æ›´ä» leader å†™å…¥ï¼Œæˆ‘ä»¬å°† S1 ~ S5 çš„äº”èŠ‚ç‚¹æ–°æˆå‘˜é…ç½®è¡¨ç¤ºä¸º C-newï¼Œè“è‰²è¡¨ç¤ºè¯¥èŠ‚ç‚¹å½“å‰è§†å›¾ä¸º C-newã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;é˜¶æ®µc&lt;/strong&gt;. å‡è®¾ S3 çŸ­æš‚å®•æœºè§¦å‘äº† S1 ä¸ S5 çš„è¶…æ—¶é€‰ä¸»ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;é˜¶æ®µd&lt;/strong&gt;. S1 å‘ S2ã€S3 æ‹‰ç¥¨ï¼ŒS5 å‘å…¶å®ƒå…¨éƒ¨å››ä¸ªèŠ‚ç‚¹æ‹‰ç¥¨ã€‚ç”±äº S2 çš„æ—¥å¿—å¹¶æ²¡æœ‰æ¯” S1 æ›´æ–°ï¼Œå› æ­¤ S2 å¯èƒ½ä¼šå°†é€‰ç¥¨æŠ•ç»™ S1ï¼ŒS1 ä¸¤ç¥¨å½“é€‰ï¼ˆå› ä¸º S1 è®¤ä¸ºé›†ç¾¤åªæœ‰ä¸‰ä¸ªèŠ‚ç‚¹ï¼‰ã€‚è€Œ S5 è‚¯å®šä¼šå¾—åˆ° S3ã€S4 çš„é€‰ç¥¨ï¼Œå› ä¸º S1 æ„ŸçŸ¥ä¸åˆ° S4ï¼Œæ²¡æœ‰å‘å®ƒå‘é€ RequestVote RPCï¼Œå¹¶ä¸” S1 çš„æ—¥å¿—è½åäº S3ï¼ŒS3 ä¹Ÿä¸€å®šä¸ä¼šæŠ•ç»™ S1ï¼Œç»“æœ S5 ä¸‰ç¥¨å½“é€‰ã€‚æœ€ç»ˆé›†ç¾¤å‡ºç°äº†å¤šä¸ªä¸»èŠ‚ç‚¹çš„è‡´å‘½é”™è¯¯ï¼Œä¹Ÿå°±æ˜¯æ‰€è°“çš„è„‘è£‚ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.7048799380325329&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6q0eyr7icJ0wbzhpZoWsZcE8ibLCMiaRKKiaFMrDZibSWvqhCE8opGjZf5wClWF0xXuib2kicQEmFGibnyWJg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1291&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;å›¾5-2&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸Šå›¾æ¥è‡ªè®ºæ–‡ï¼Œç”¨ä¸åŒçš„å½¢å¼å±•ç°äº†å’Œå›¾5-1ç›¸åŒçš„é—®é¢˜ã€‚é¢œè‰²ä»£è¡¨çš„å«ä¹‰ä¸å›¾5-1æ˜¯ä¸€è‡´çš„ï¼Œåœ¨ &lt;strong&gt;problem: two disjoint majorities&lt;/strong&gt; æ‰€æŒ‡çš„æ—¶é—´ç‚¹ï¼Œé›†ç¾¤å¯èƒ½ä¼šå‡ºç°ä¸¤ä¸ª leaderã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä½†æ˜¯ï¼Œå¤šä¸»é—®é¢˜å¹¶ä¸æ˜¯åœ¨ä»»ä½•æ–°è€èŠ‚ç‚¹åŒæ—¶é€‰ä¸¾æ—¶éƒ½ä¸€å®šå¯èƒ½å‡ºç°çš„ï¼Œç¤¾åŒºä¸€äº›æ–‡ç« åœ¨ä¸¾å¤šä¸»çš„ä¾‹å­æ—¶å¯èƒ½å­˜åœ¨é”™è¯¯ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªæ¡ˆä¾‹ï¼ˆç¬”è€…å­¦ä¹  Raft åè®®ä¹Ÿä»è¿™ç¯‡æ–‡ç« ä¸­å—ç›ŠåŒªæµ…ï¼Œåº”è¯¥æ˜¯ä½œè€…è¡Œæ–‡æ—¶å¿½ç•¥äº†ã€‚æ–‡ç« å¾ˆèµï¼Œå»ºè®®å¤§å®¶å‚è€ƒå­¦ä¹ ï¼‰ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.5916955017301038&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/JfuVbKibIl6qkfsd3Z6Z3PRtzXfEMFJOukfQyWCGjz8YOM5xC06JFewssTFzkUBqMfshYhNma148NrLicf9RzibWQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1156&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;å›¾5-3Â &lt;em&gt;æ¥æºï¼šhttps://zhuanlan.zhihu.com/p/27207160&lt;/em&gt;&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¯¥å‡æƒ³åœºæ™¯ç±»ä¼¼å›¾5-1çš„é˜¶æ®µdï¼Œæ¨¡æ‹Ÿè¿‡ç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;S1 ä¸ºé›†ç¾¤åŸ leaderï¼Œé›†ç¾¤æ–°å¢ S4ã€S5ï¼Œè¯¥é…ç½®è¢«æ¨ç»™äº† S3ï¼ŒS2 å°šæœªæ”¶åˆ°ã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æ­¤æ—¶ S1 å‘ç”ŸçŸ­æš‚å®•æœºï¼ŒS2ã€S3 åˆ†åˆ«è§¦å‘é€‰ä¸»ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æœ€ç»ˆ S2 è·å¾—äº† S1 å’Œè‡ªå·±çš„é€‰ç¥¨ï¼ŒS3 è·å¾—äº† S4ã€S5 å’Œè‡ªå·±çš„é€‰ç¥¨ï¼Œé›†ç¾¤å‡ºç°ä¸¤ä¸ª leaderã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å›¾5-3è¿‡ç¨‹çœ‹èµ·æ¥å¥½åƒå’Œå›¾5-1æ²¡æœ‰ä»€ä¹ˆå¤§çš„ä¸åŒï¼Œåªæ˜¯å‚ä¸é€‰ä¸»çš„èŠ‚ç‚¹å­˜åœ¨åŒºåˆ«ï¼Œç„¶è€Œäº‹å®æ˜¯&lt;strong&gt;å›¾5-3çš„æƒ…å†µæ˜¯ä¸å¯èƒ½å‡ºç°çš„&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ³¨æ„ï¼šRaft è®ºæ–‡ä¸­ä¼ é€’é›†ç¾¤å˜æ›´ä¿¡æ¯ä¹Ÿæ˜¯é€šè¿‡æ—¥å¿—è¿½åŠ å®ç°çš„ï¼Œæ‰€ä»¥ä¹Ÿå—åˆ°é€‰ä¸»çš„é™åˆ¶ã€‚å¾ˆå¤šè¯»è€…å¯¹é€‰ä¸»é™åˆ¶ä¸­æ¯”è¾ƒçš„æ—¥å¿—æ˜¯å¦å¿…é¡»æ˜¯ committed äº§ç”Ÿç–‘æƒ‘ï¼Œå›çœ‹ä¸‹åœ¨ã€Šå®‰å…¨æ€§ã€‹ä¸€æ–‡ä¸­çš„æè¿°ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;æ¯ä¸ª candidate å¿…é¡»åœ¨ RequestVote RPC ä¸­æºå¸¦è‡ªå·±æœ¬åœ°æ—¥å¿—çš„æœ€æ–° (term, index)ï¼Œå¦‚æœ follower å‘ç°è¿™ä¸ª candidate çš„æ—¥å¿—è¿˜æ²¡æœ‰è‡ªå·±çš„æ–°ï¼Œåˆ™æ‹’ç»æŠ•ç¥¨ç»™è¯¥ candidateã€‚&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¿™é‡Œå†å¸®å¤§å®¶æ˜ç¡®ä¸‹ï¼Œè®ºæ–‡é‡Œç¡®å®é—´æ¥è¡¨æ˜äº†ï¼Œ&lt;strong&gt;é€‰ä¸»æ—¶æ¯”è¾ƒçš„æ—¥å¿—æ˜¯ä¸è¦æ±‚ committed çš„ï¼Œåªéœ€æ¯”è¾ƒæœ¬åœ°çš„æœ€æ–°æ—¥å¿—å°±è¡Œ&lt;/strong&gt;ï¼&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å›åˆ°å›¾5-3ï¼Œä¸å¯èƒ½å‡ºç°çš„åŸå› åœ¨äºï¼ŒS1 ä½œä¸ºåŸ leader å·²ç»ç¬¬ä¸€ä¸ªä¿å­˜äº†æ–°é…ç½®çš„æ—¥å¿—ï¼Œè€Œ S2 å°šæœªè¢«åŒæ­¥è¿™æ¡æ—¥å¿—ï¼Œæ ¹æ®ä¸Šä¸€ç« ã€Šå®‰å…¨æ€§ã€‹æˆ‘ä»¬è®²åˆ°çš„&lt;strong&gt;é€‰ä¸»é™åˆ¶&lt;/strong&gt;ï¼Œ&lt;strong&gt;S1 ä¸å¯èƒ½å°†é€‰ç¥¨æŠ•ç»™ S2&lt;/strong&gt;ï¼Œå› æ­¤ S2 ä¸å¯èƒ½æˆä¸º leaderã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;5.1.2 ä¸¤é˜¶æ®µåˆ‡æ¢é›†ç¾¤æˆå‘˜é…ç½®&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Raft ä½¿ç”¨ä¸€ç§ä¸¤é˜¶æ®µæ–¹æ³•å¹³æ»‘åˆ‡æ¢é›†ç¾¤æˆå‘˜é…ç½®æ¥é¿å…é‡åˆ°å‰ä¸€èŠ‚æè¿°çš„é—®é¢˜ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;é˜¶æ®µä¸€&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;å®¢æˆ·ç«¯å°† C-new å‘é€ç»™ leaderï¼Œleader å°† C-old ä¸ C-new å–&lt;strong&gt;å¹¶é›†&lt;/strong&gt;å¹¶ç«‹å³ applyï¼Œæˆ‘ä»¬è¡¨ç¤ºä¸º &lt;strong&gt;C-old,new&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;Leader å°† C-old,new åŒ…è£…ä¸ºæ—¥å¿—åŒæ­¥ç»™å…¶å®ƒèŠ‚ç‚¹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;Follower æ”¶åˆ° C-old,new åç«‹å³ applyï¼Œå½“ **C-old,new çš„å¤§å¤šæ•°èŠ‚ç‚¹ï¼ˆå³ C-old çš„å¤§å¤šæ•°èŠ‚ç‚¹å’Œ C-new çš„å¤§å¤šæ•°èŠ‚ç‚¹ï¼‰**éƒ½åˆ‡æ¢åï¼Œleader å°†è¯¥æ—¥å¿— commitã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;é˜¶æ®µäºŒ&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;Leader æ¥ç€å°† C-new åŒ…è£…ä¸ºæ—¥å¿—åŒæ­¥ç»™å…¶å®ƒèŠ‚ç‚¹ã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;Follower æ”¶åˆ° C-new åç«‹å³ applyï¼Œå¦‚æœæ­¤æ—¶å‘ç°è‡ªå·±ä¸åœ¨ C-new åˆ—è¡¨ï¼Œåˆ™ä¸»åŠ¨é€€å‡ºé›†ç¾¤ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;Leader ç¡®è®¤ &lt;strong&gt;C-new çš„å¤§å¤šæ•°èŠ‚ç‚¹&lt;/strong&gt;éƒ½åˆ‡æ¢æˆåŠŸåï¼Œç»™å®¢æˆ·ç«¯å‘é€æ‰§è¡ŒæˆåŠŸçš„å“åº”ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.5042125729099157&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6q0eyr7icJ0wbzhpZoWsZcE8V1icvK2N7ImVSjVqJEicaicJOsTe8ibmsk4NJudvicNMDd03ZriciayNBRMTQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1543&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸Šå›¾å±•ç¤ºäº†è¯¥æµç¨‹çš„æ—¶é—´çº¿ã€‚è™šçº¿è¡¨ç¤ºå·²ç»åˆ›å»ºä½†å°šæœª commit çš„æˆå‘˜é…ç½®æ—¥å¿—ï¼Œå®çº¿è¡¨ç¤º committed çš„æˆå‘˜é…ç½®æ—¥å¿—ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸ºä»€ä¹ˆè¯¥æ–¹æ¡ˆå¯ä»¥ä¿è¯ä¸ä¼šå‡ºç°å¤šä¸ª leaderï¼Ÿæˆ‘ä»¬æ¥æŒ‰æµç¨‹é€é˜¶æ®µåˆ†æã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;é˜¶æ®µ1. C-old,new å°šæœª commit&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¯¥é˜¶æ®µæ‰€æœ‰èŠ‚ç‚¹çš„é…ç½®è¦ä¹ˆæ˜¯ C-oldï¼Œè¦ä¹ˆæ˜¯ C-old,newï¼Œä½†æ— è®ºæ˜¯äºŒè€…å“ªç§ï¼Œåªè¦åŸ leader å‘ç”Ÿå®•æœºï¼Œæ–° leader éƒ½&lt;strong&gt;å¿…é¡»å¾—åˆ°å¤§å¤šæ•° C-old é›†åˆå†…èŠ‚ç‚¹çš„æŠ•ç¥¨&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä»¥å›¾5-1åœºæ™¯ä¸ºä¾‹ï¼ŒS5 åœ¨é˜¶æ®µdæ ¹æœ¬æ²¡æœ‰æœºä¼šæˆä¸º leaderï¼Œå› ä¸º C-old ä¸­åªæœ‰ S3 ç»™å®ƒæŠ•ç¥¨äº†ï¼Œä¸æ»¡è¶³å¤§å¤šæ•°ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;é˜¶æ®µ2. C-old,new å·²ç» commitï¼ŒC-new å°šæœªä¸‹å‘&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¯¥é˜¶æ®µ C-old,new å·²ç» commitï¼Œå¯ä»¥ç¡®ä¿å·²ç»è¢« C-old,new çš„å¤§å¤šæ•°èŠ‚ç‚¹ï¼ˆ&lt;strong&gt;å†æ¬¡å¼ºè°ƒï¼šC-old çš„å¤§å¤šæ•°èŠ‚ç‚¹å’Œ C-new çš„å¤§å¤šæ•°èŠ‚ç‚¹&lt;/strong&gt;ï¼‰å¤åˆ¶ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å› æ­¤å½“ leader å®•æœºæ—¶ï¼Œæ–°é€‰å‡ºçš„ leader ä¸€å®šæ˜¯å·²ç»æ‹¥æœ‰ C-old,new çš„èŠ‚ç‚¹ï¼Œä¸å¯èƒ½å‡ºç°ä¸¤ä¸ª leaderã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;é˜¶æ®µ3. C-new å·²ç»ä¸‹å‘ä½†å°šæœª commit&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¯¥é˜¶æ®µé›†ç¾¤ä¸­å¯èƒ½æœ‰ä¸‰ç§èŠ‚ç‚¹ C-oldã€C-old,newã€C-newï¼Œä½†ç”±äºå·²ç»ç»å†äº†é˜¶æ®µ2ï¼Œå› æ­¤ C-old èŠ‚ç‚¹ä¸å¯èƒ½å†æˆä¸º leaderã€‚è€Œæ— è®ºæ˜¯ C-old,new è¿˜æ˜¯ C-new èŠ‚ç‚¹å‘èµ·é€‰ä¸¾ï¼Œéƒ½éœ€è¦ç»è¿‡å¤§å¤šæ•° C-new èŠ‚ç‚¹çš„åŒæ„ï¼Œå› æ­¤ä¹Ÿä¸å¯èƒ½å‡ºç°ä¸¤ä¸ª leaderã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;é˜¶æ®µ4. C-new å·²ç» commit&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¯¥é˜¶æ®µ C-new å·²ç»è¢« commitï¼Œå› æ­¤åªæœ‰ C-new èŠ‚ç‚¹å¯ä»¥å¾—åˆ°å¤§å¤šæ•°é€‰ç¥¨æˆä¸º leaderã€‚æ­¤æ—¶é›†ç¾¤å·²ç»å®‰å…¨åœ°å®Œæˆäº†è¿™è½®å˜æ›´ï¼Œå¯ä»¥ç»§ç»­å¼€å¯ä¸‹ä¸€è½®å˜æ›´äº†ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä»¥ä¸Šä¾¿æ˜¯å¯¹è¯¥ä¸¤é˜¶æ®µæ–¹æ³•å¯è¡Œæ€§çš„åˆ†æ­¥éªŒè¯ï¼ŒRaft è®ºæ–‡å°†è¯¥æ–¹æ³•ç§°ä¹‹ä¸º&lt;strong&gt;å…±åŒä¸€è‡´ï¼ˆJoint Consensusï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å…³äºé›†ç¾¤æˆå‘˜å˜æ›´å¦ä¸€ç¯‡æ›´è¯¦ç»†çš„è®ºæ–‡è¿˜ç»™å‡ºäº†å…¶å®ƒæ–¹æ³•ï¼Œç®€å•æ¥è¯´å°±æ˜¯è®ºè¯&lt;strong&gt;ä¸€æ¬¡åªå˜æ›´ä¸€ä¸ªèŠ‚ç‚¹çš„çš„æ­£ç¡®æ€§&lt;/strong&gt;ï¼Œå¹¶ç»™å‡ºè§£å†³å¯ç”¨æ€§é—®é¢˜çš„ä¼˜åŒ–æ–¹æ¡ˆã€‚æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å‚è€ƒã€ŠConsensus: Bridging Theory and Practiceã€‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;Consensus: Bridging Theory and Practice&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;https://github.com/ongardie/dissertation&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;5.2 æ—¥å¿—å‹ç¼©&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬çŸ¥é“ Raft æ ¸å¿ƒç®—æ³•ç»´æŠ¤äº†æ—¥å¿—çš„ä¸€è‡´æ€§ï¼Œé€šè¿‡ apply æ—¥å¿—æˆ‘ä»¬ä¹Ÿå°±å¾—åˆ°äº†ä¸€è‡´çš„çŠ¶æ€æœºï¼Œå®¢æˆ·ç«¯çš„æ“ä½œå‘½ä»¤ä¼šè¢«åŒ…è£…æˆæ—¥å¿—äº¤ç»™ Raft å¤„ç†ã€‚ç„¶è€Œåœ¨å®é™…ç³»ç»Ÿä¸­ï¼Œå®¢æˆ·ç«¯æ“ä½œæ˜¯è¿ç»µä¸æ–­çš„ï¼Œä½†æ—¥å¿—å´ä¸èƒ½æ— é™å¢é•¿ï¼Œé¦–å…ˆå®ƒä¼šå ç”¨å¾ˆé«˜çš„å­˜å‚¨ç©ºé—´ï¼Œå…¶æ¬¡æ¯æ¬¡ç³»ç»Ÿé‡å¯æ—¶éƒ½éœ€è¦å®Œæ•´å›æ”¾ä¸€éæ‰€æœ‰æ—¥å¿—æ‰èƒ½å¾—åˆ°æœ€æ–°çš„çŠ¶æ€æœºã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å› æ­¤ Raft æä¾›äº†ä¸€ç§æœºåˆ¶å»æ¸…é™¤æ—¥å¿—é‡Œç§¯ç´¯çš„é™ˆæ—§ä¿¡æ¯ï¼Œå«åš&lt;strong&gt;æ—¥å¿—å‹ç¼©&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;å¿«ç…§ï¼ˆSnapshotï¼‰&lt;/strong&gt;æ˜¯ä¸€ç§å¸¸ç”¨çš„ã€ç®€å•çš„æ—¥å¿—å‹ç¼©æ–¹å¼ï¼ŒZooKeeperã€Chubby ç­‰ç³»ç»Ÿéƒ½åœ¨ç”¨ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å°†æŸä¸€æ—¶åˆ»ç³»ç»Ÿçš„çŠ¶æ€ dump ä¸‹æ¥å¹¶è½åœ°å­˜å‚¨ï¼Œè¿™æ ·è¯¥æ—¶åˆ»ä¹‹å‰çš„æ‰€æœ‰æ—¥å¿—å°±éƒ½å¯ä»¥ä¸¢å¼ƒäº†ã€‚æ‰€ä»¥å¤§å®¶å¯¹â€œå‹ç¼©â€ä¸€è¯ä¸è¦äº§ç”Ÿé”™è¯¯ç†è§£ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰åŠæ³•å°†çŠ¶æ€æœºå¿«ç…§â€œè§£å‹ç¼©â€å›æ—¥å¿—åºåˆ—ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ³¨æ„ï¼Œ&lt;strong&gt;åœ¨ Raft ä¸­æˆ‘ä»¬åªèƒ½ä¸º committed æ—¥å¿—åš snapshot&lt;/strong&gt;ï¼Œå› ä¸ºåªæœ‰ committed æ—¥å¿—æ‰æ˜¯ç¡®ä¿æœ€ç»ˆä¼šåº”ç”¨åˆ°çŠ¶æ€æœºçš„ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.662777129521587&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6qkfsd3Z6Z3PRtzXfEMFJOue9Fdv8yyjUvrKUbBLI5ibnfpjgQB4ib6OHR1FicvECQmQ9Xy5HftIZOcQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1714&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸Šå›¾å±•ç¤ºäº†ä¸€ä¸ªèŠ‚ç‚¹ç”¨å¿«ç…§æ›¿æ¢äº† (term1, index1) ~ (term3, index5) çš„æ—¥å¿—ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å¿«ç…§ä¸€èˆ¬åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“ leader éœ€è¦ç»™æŸä¸ª follower åŒæ­¥ä¸€äº›æ—§æ—¥å¿—ï¼Œä½†è¿™äº›æ—¥å¿—å·²ç»è¢« leader åšäº†å¿«ç…§å¹¶åˆ é™¤æ‰äº†æ—¶ï¼Œleader å°±éœ€è¦æŠŠè¯¥å¿«ç…§å‘é€ç»™ followerã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åŒæ ·ï¼Œå½“é›†ç¾¤ä¸­æœ‰æ–°èŠ‚ç‚¹åŠ å…¥ï¼Œæˆ–è€…æŸä¸ªèŠ‚ç‚¹å®•æœºå¤ªä¹…è½åäº†å¤ªå¤šæ—¥å¿—æ—¶ï¼Œleader ä¹Ÿå¯ä»¥ç›´æ¥å‘é€å¿«ç…§ï¼Œå¤§é‡èŠ‚çº¦æ—¥å¿—ä¼ è¾“å’Œå›æ”¾æ—¶é—´ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åŒæ­¥å¿«ç…§ä½¿ç”¨ä¸€ä¸ªæ–°çš„ RPC æ–¹æ³•ï¼Œå«åš &lt;strong&gt;InstallSnapshot RPC&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è‡³æ­¤æˆ‘ä»¬å·²ç»å°† Raft è®ºæ–‡ä¸­çš„å†…å®¹åŸºæœ¬è®²è§£å®Œæ¯•äº†ã€‚ã€ŠIn Search of an Understandable Consensus Algorithm (Extended Version)ã€‹ æ¯•ç«Ÿåªæœ‰18é¡µï¼Œæ›´åŠ ä¾§é‡äºç†è®ºæè¿°è€Œéå·¥ç¨‹å®è·µã€‚å¦‚æœä½ æƒ³æ·±å…¥å­¦ä¹  Raftï¼Œæˆ–è‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ªé è°±çš„ Raft å®ç°ï¼Œã€ŠConsensus: Bridging Theory and Practiceã€‹ æ˜¯ä½ å‚è€ƒçš„ä¸äºŒä¹‹é€‰ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;In Search of an Understandable Consensus Algorithm (Extended Version)&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;https://raft.github.io/raft.pdf&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;Consensus: Bridging Theory and Practice&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;https://github.com/ongardie/dissertation&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬å°†é¢å¤–è®¨è®ºä¸€ä¸‹å…³äºçº¿æ€§ä¸€è‡´æ€§å’Œ Raft è¯»æ€§èƒ½ä¼˜åŒ–çš„å†…å®¹ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;6. çº¿æ€§ä¸€è‡´æ€§ä¸è¯»æ€§èƒ½ä¼˜åŒ–&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;6.1 ä»€ä¹ˆæ˜¯çº¿æ€§ä¸€è‡´æ€§ï¼Ÿ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åœ¨è¯¥ç³»åˆ—é¦–ç¯‡ã€ŠåŸºæœ¬æ¦‚å¿µã€‹ä¸­æˆ‘ä»¬æåˆ°è¿‡ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸ºäº†æ¶ˆé™¤å•ç‚¹æé«˜ç³»ç»Ÿå¯ç”¨æ€§ï¼Œé€šå¸¸ä¼šä½¿ç”¨å‰¯æœ¬æ¥è¿›è¡Œå®¹é”™ï¼Œä½†è¿™ä¼šå¸¦æ¥å¦ä¸€ä¸ªé—®é¢˜ï¼Œå³å¦‚ä½•ä¿è¯å¤šä¸ªå‰¯æœ¬ä¹‹é—´çš„&lt;strong&gt;ä¸€è‡´æ€§&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä»€ä¹ˆæ˜¯ä¸€è‡´æ€§ï¼Ÿæ‰€è°“ä¸€è‡´æ€§æœ‰å¾ˆå¤šç§æ¨¡å‹ï¼Œä¸åŒçš„æ¨¡å‹éƒ½æ˜¯ç”¨æ¥è¯„åˆ¤ä¸€ä¸ªå¹¶å‘ç³»ç»Ÿæ­£ç¡®ä¸å¦çš„ä¸åŒç¨‹åº¦çš„æ ‡å‡†ã€‚è€Œæˆ‘ä»¬ä»Šå¤©è¦è®¨è®ºçš„æ˜¯&lt;strong&gt;å¼ºä¸€è‡´æ€§ï¼ˆStrong Consistencyï¼‰&lt;/strong&gt;æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯&lt;strong&gt;çº¿æ€§ä¸€è‡´æ€§ï¼ˆLinearizabilityï¼‰&lt;/strong&gt;ï¼Œæˆ‘ä»¬ç»å¸¸å¬åˆ°çš„ CAP ç†è®ºä¸­çš„ C æŒ‡çš„å°±æ˜¯å®ƒã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å…¶å®æˆ‘ä»¬åœ¨ç¬¬ä¸€ç¯‡å°±å·²ç»ç®€è¦æè¿°è¿‡ä½•ä¸ºçº¿æ€§ä¸€è‡´æ€§ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;æ‰€è°“çš„å¼ºä¸€è‡´æ€§ï¼ˆçº¿æ€§ä¸€è‡´æ€§ï¼‰å¹¶ä¸æ˜¯æŒ‡é›†ç¾¤ä¸­æ‰€æœ‰èŠ‚ç‚¹åœ¨ä»»ä¸€æ—¶åˆ»çš„çŠ¶æ€å¿…é¡»å®Œå…¨ä¸€è‡´ï¼Œè€Œæ˜¯æŒ‡ä¸€ä¸ªç›®æ ‡ï¼Œå³è®©ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿçœ‹èµ·æ¥åªæœ‰ä¸€ä¸ªæ•°æ®å‰¯æœ¬ï¼Œå¹¶ä¸”è¯»å†™æ“ä½œéƒ½æ˜¯åŸå­çš„ï¼Œè¿™æ ·åº”ç”¨å±‚å°±å¯ä»¥å¿½ç•¥ç³»ç»Ÿåº•å±‚å¤šä¸ªæ•°æ®å‰¯æœ¬é—´çš„åŒæ­¥é—®é¢˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªå¼ºä¸€è‡´æ€§åˆ†å¸ƒå¼ç³»ç»Ÿå½“æˆä¸€ä¸ªæ•´ä½“ï¼Œä¸€æ—¦æŸä¸ªå®¢æˆ·ç«¯æˆåŠŸçš„æ‰§è¡Œäº†å†™æ“ä½œï¼Œé‚£ä¹ˆæ‰€æœ‰å®¢æˆ·ç«¯éƒ½ä¸€å®šèƒ½è¯»å‡ºåˆšåˆšå†™å…¥çš„å€¼ã€‚å³ä½¿å‘ç”Ÿç½‘ç»œåˆ†åŒºæ•…éšœï¼Œæˆ–è€…å°‘éƒ¨åˆ†èŠ‚ç‚¹å‘ç”Ÿå¼‚å¸¸ï¼Œæ•´ä¸ªé›†ç¾¤ä¾ç„¶èƒ½å¤Ÿåƒå•æœºä¸€æ ·æä¾›æœåŠ¡ã€‚&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;â€œ&lt;strong&gt;åƒå•æœºä¸€æ ·æä¾›æœåŠ¡&lt;/strong&gt;â€ä»æ„Ÿå®˜ä¸Šæè¿°äº†ä¸€ä¸ªçº¿æ€§ä¸€è‡´æ€§ç³»ç»Ÿåº”è¯¥å…·å¤‡çš„ç‰¹æ€§ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªç³»ç»Ÿæ˜¯å¦å…·å¤‡çº¿æ€§ä¸€è‡´æ€§å‘¢ï¼Ÿé€šä¿—æ¥è¯´å°±æ˜¯ä¸èƒ½è¯»åˆ°æ—§ï¼ˆstaleï¼‰æ•°æ®ï¼Œä½†å…·ä½“åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åªè¦æ ¹æ®ä¸Šè¿°ä¸¤æ¡è§„åˆ™å³å¯åˆ¤æ–­ä¸€ä¸ªç³»ç»Ÿæ˜¯å¦å…·å¤‡çº¿æ€§ä¸€è‡´æ€§ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªéçº¿æ€§ä¸€è‡´æ€§ç³»ç»Ÿçš„ä¾‹å­ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.7196428571428571&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6pUUFc3dfInRmvjJzEuuJE6fCyvPMHzgy9kFW1Vw4a4WKWqA80uCCjLyJjibFMrfREnEHc6HicfEENw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1120&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;æœ¬èŠ‚ä¾‹å›¾å‡æ¥è‡ªã€ŠDesigning Data-Intensive Applicationã€‹ï¼Œä½œè€… Martin Kleppmann&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œè£åˆ¤å°†ä¸–ç•Œæ¯çš„æ¯”èµ›ç»“æœå†™å…¥äº†ä¸»åº“ï¼ŒAlice å’Œ Bob æ‰€æµè§ˆçš„é¡µé¢åˆ†åˆ«ä»ä¸¤ä¸ªä¸åŒçš„ä»åº“è¯»å–ï¼Œä½†ç”±äºå­˜åœ¨ä¸»ä»åŒæ­¥å»¶è¿Ÿï¼ŒFollower 2 çš„æœ¬æ¬¡åŒæ­¥å»¶è¿Ÿé«˜äº Follower 1ï¼Œæœ€ç»ˆå¯¼è‡´ Bob å¬åˆ°äº† Alice çš„æƒŠå‘¼ååˆ·æ–°é¡µé¢çœ‹åˆ°çš„ä»ç„¶æ˜¯æ¯”èµ›è¿›è¡Œä¸­ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è™½ç„¶çº¿æ€§ä¸€è‡´æ€§çš„åŸºæœ¬æ€æƒ³å¾ˆç®€å•ï¼Œåªæ˜¯è¦æ±‚&lt;strong&gt;åˆ†å¸ƒå¼ç³»ç»Ÿçœ‹èµ·æ¥åªæœ‰ä¸€ä¸ªæ•°æ®å‰¯æœ¬&lt;/strong&gt;ï¼Œä½†åœ¨å®é™…ä¸­è¿˜æ˜¯æœ‰å¾ˆå¤šéœ€è¦å…³æ³¨çš„ç‚¹ï¼Œæˆ‘ä»¬ç»§ç»­çœ‹å‡ ä¸ªä¾‹å­ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.31261101243339257&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6pUUFc3dfInRmvjJzEuuJE6ugz40Pdue0wfWibK6oEh101IjIosPLzDQHsNKib9iabtM6bAx2hKyWrpQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1126&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸Šå›¾ä»å®¢æˆ·ç«¯çš„&lt;strong&gt;å¤–éƒ¨è§†è§’&lt;/strong&gt;å±•ç¤ºäº†å¤šä¸ªç”¨æˆ·åŒæ—¶è¯·æ±‚è¯»å†™ä¸€ä¸ªç³»ç»Ÿçš„åœºæ™¯ï¼Œæ¯æ¡æŸ±å½¢éƒ½æ˜¯ç”¨æˆ·å‘èµ·çš„ä¸€ä¸ªè¯·æ±‚ï¼Œå·¦ç«¯æ˜¯è¯·æ±‚å‘èµ·çš„æ—¶åˆ»ï¼Œå³ç«¯æ˜¯æ”¶åˆ°å“åº”çš„æ—¶åˆ»ã€‚ç”±äºç½‘ç»œå»¶è¿Ÿå’Œç³»ç»Ÿå¤„ç†æ—¶é—´å¹¶ä¸å›ºå®šï¼Œæ‰€ä»¥æŸ±å½¢é•¿åº¦å¹¶ä¸ç›¸åŒã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;x æœ€åˆçš„å€¼ä¸º 0ï¼ŒClient C åœ¨æŸä¸ªæ—¶é—´æ®µå°† x å†™ä¸º 1ã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;Client A ç¬¬ä¸€ä¸ªè¯»æ“ä½œä½äº Client C çš„å†™æ“ä½œä¹‹å‰ï¼Œå› æ­¤å¿…é¡»è¯»åˆ°åŸå§‹å€¼ 0ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;Client A æœ€åä¸€ä¸ªè¯»æ“ä½œä½äº Client C çš„å†™æ“ä½œä¹‹åï¼Œå¦‚æœç³»ç»Ÿæ˜¯çº¿æ€§ä¸€è‡´çš„ï¼Œé‚£ä¹ˆå¿…é¡»è¯»åˆ°æ–°å€¼ 1ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å…¶å®ƒä¸å†™æ“ä½œé‡å çš„æ‰€æœ‰è¯»æ“ä½œï¼Œæ—¢å¯èƒ½è¿”å› 0ï¼Œä¹Ÿå¯èƒ½è¿”å› 1ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶ä¸æ¸…æ¥šå†™æ“ä½œåœ¨å“ªä¸ªæ—¶é—´æ®µå†…å“ªä¸ªç²¾ç¡®çš„ç‚¹ç”Ÿæ•ˆï¼Œè¿™ç§æƒ…å†µä¸‹è¯»å†™æ˜¯å¹¶å‘çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä»…ä»…æ˜¯è¿™æ ·çš„è¯ï¼Œä»ç„¶ä¸èƒ½è¯´è¿™ä¸ªç³»ç»Ÿæ»¡è¶³çº¿æ€§ä¸€è‡´ã€‚å‡è®¾ Client B çš„ç¬¬ä¸€æ¬¡è¯»å–è¿”å›äº† 1ï¼Œå¦‚æœ Client A çš„ç¬¬äºŒæ¬¡è¯»å–è¿”å›äº† 0ï¼Œé‚£ä¹ˆè¿™ç§åœºæ™¯å¹¶ä¸ç ´åä¸Šè¿°è§„åˆ™ï¼Œä½†è¿™ä¸ªç³»ç»Ÿä»ä¸æ»¡è¶³çº¿æ€§ä¸€è‡´ï¼Œå› ä¸ºå®¢æˆ·ç«¯åœ¨å†™æ“ä½œæ‰§è¡ŒæœŸé—´çœ‹åˆ° x çš„å€¼åœ¨æ–°æ—§ä¹‹é—´æ¥å›ç¿»è½¬ï¼Œè¿™å¹¶ä¸ç¬¦åˆæˆ‘ä»¬æœŸæœ›çš„â€œçœ‹èµ·æ¥åªæœ‰ä¸€ä¸ªæ•°æ®å‰¯æœ¬â€çš„è¦æ±‚ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬éœ€è¦é¢å¤–æ·»åŠ ä¸€ä¸ªçº¦æŸï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.30905861456483125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6pUUFc3dfInRmvjJzEuuJE6GmH2gCuIGCQoxPEG5DTll5bhDfFibStI3a7MCEkZTWlBQQbfHSNCfpw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1126&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åœ¨ä»»ä½•ä¸€ä¸ªå®¢æˆ·ç«¯çš„è¯»å–è¿”å›æ–°å€¼åï¼Œæ‰€æœ‰å®¢æˆ·ç«¯çš„åç»­è¯»å–ä¹Ÿå¿…é¡»è¿”å›æ–°å€¼ï¼Œè¿™æ ·ç³»ç»Ÿä¾¿æ»¡è¶³çº¿æ€§ä¸€è‡´äº†ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬æœ€åæ¥çœ‹ä¸€ä¸ªæ›´å¤æ‚çš„ä¾‹å­ï¼Œç»§ç»­ç»†åŒ–è¿™ä¸ªæ—¶åºå›¾ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages&quot; data-ratio=&quot;0.49644128113879005&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/JfuVbKibIl6pUUFc3dfInRmvjJzEuuJE6ITUeicICQRqYdkW2ppNyHyz8uP9xaZROVHDIQ1qE9K6rLF1Sklv8D9Q/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1124&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ¯ä¸ªè¯»å†™æ“ä½œåœ¨æŸä¸ªç‰¹å®šçš„æ—¶é—´ç‚¹éƒ½æ˜¯&lt;strong&gt;åŸå­æ€§çš„ç”Ÿæ•ˆ&lt;/strong&gt;ï¼Œæˆ‘ä»¬åœ¨æŸ±å½¢ä¸­ç”¨ç«–çº¿æ ‡è®°å‡ºç”Ÿæ•ˆçš„æ—¶é—´ç‚¹ï¼Œå°†è¿™äº›æ ‡è®°æŒ‰æ—¶é—´é¡ºåºè¿æ¥èµ·æ¥ã€‚é‚£ä¹ˆçº¿æ€§ä¸€è‡´çš„è¦æ±‚å°±æ˜¯ï¼š&lt;strong&gt;è¿çº¿æ€»æ˜¯æŒ‰ç…§æ—¶é—´é¡ºåºå‘å³ç§»åŠ¨ï¼Œè€Œä¸ä¼šå‘å·¦å›é€€&lt;/strong&gt;ã€‚æ‰€ä»¥è¿™ä¸ªè¿çº¿ç»“æœå¿…å®šæ˜¯ä¸€ä¸ª&lt;strong&gt;æœ‰æ•ˆçš„å¯„å­˜å™¨è¯»å†™åºåˆ—&lt;/strong&gt;ï¼šä»»ä½•å®¢æˆ·ç«¯çš„æ¯æ¬¡è¯»å–éƒ½å¿…é¡»è¿”å›è¯¥æ¡ç›®æœ€è¿‘ä¸€æ¬¡å†™å…¥çš„å€¼ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;çº¿æ€§ä¸€è‡´æ€§å¹¶éé™å®šåœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œåœ¨å•æœºå•æ ¸ç³»ç»Ÿä¸­å¯ä»¥ç®€å•ç†è§£ä¸ºâ€œå¯„å­˜å™¨â€çš„ç‰¹æ€§ã€‚&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Client B çš„æœ€åä¸€æ¬¡è¯»æ“ä½œå¹¶ä¸æ»¡è¶³çº¿æ€§ä¸€è‡´ï¼Œå› ä¸ºåœ¨è¿çº¿å‘å³ç§»åŠ¨çš„å‰æä¸‹ï¼Œå®ƒè¯»åˆ°çš„å€¼æ˜¯é”™è¯¯çš„ï¼ˆå› ä¸ºClient A å·²ç»è¯»åˆ°äº†ç”± Client C å†™å…¥çš„ 4ï¼‰ã€‚æ­¤å¤–è¿™å¼ å›¾é‡Œè¿˜æœ‰ä¸€äº›å€¼å¾—æŒ‡å‡ºçš„ç»†èŠ‚ç‚¹ï¼Œå¯ä»¥è§£å¼€å¾ˆå¤šæˆ‘ä»¬åœ¨ä½¿ç”¨çº¿æ€§ä¸€è‡´ç³»ç»Ÿæ—¶å®¹æ˜“äº§ç”Ÿçš„è¯¯è§£ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸Šè¿°ç°è±¡åœ¨çº¿æ€§ä¸€è‡´çš„è¯­ä¹‰ä¸‹éƒ½æ˜¯åˆç†çš„ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ‰€ä»¥&lt;strong&gt;çº¿æ€§ä¸€è‡´æ€§ï¼ˆLinearizabilityï¼‰&lt;/strong&gt;é™¤äº†å«&lt;strong&gt;å¼ºä¸€è‡´æ€§ï¼ˆStrong Consistencyï¼‰&lt;/strong&gt;å¤–ï¼Œè¿˜å«åš&lt;strong&gt;åŸå­ä¸€è‡´æ€§ï¼ˆAtomic Consistencyï¼‰&lt;/strong&gt;ã€&lt;strong&gt;ç«‹å³ä¸€è‡´æ€§ï¼ˆImmediate Consistencyï¼‰&lt;/strong&gt;æˆ–&lt;strong&gt;å¤–éƒ¨ä¸€è‡´æ€§ï¼ˆExternal Consistencyï¼‰&lt;/strong&gt;ï¼Œè¿™äº›åå­—çœ‹èµ·æ¥éƒ½æ˜¯æ¯”è¾ƒè´´åˆ‡çš„ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;6.2 Raft çº¿æ€§ä¸€è‡´æ€§è¯»&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åœ¨äº†è§£äº†ä»€ä¹ˆæ˜¯çº¿æ€§ä¸€è‡´æ€§ä¹‹åï¼Œæˆ‘ä»¬å°†å…¶ä¸ Raft ç»“åˆæ¥æ¢è®¨ã€‚é¦–å…ˆéœ€è¦æ˜ç¡®ä¸€ä¸ªé—®é¢˜ï¼Œä½¿ç”¨äº† Raft çš„ç³»ç»Ÿéƒ½æ˜¯çº¿æ€§ä¸€è‡´çš„å—ï¼Ÿä¸æ˜¯çš„ï¼ŒRaft åªæ˜¯æä¾›äº†ä¸€ä¸ªåŸºç¡€ï¼Œè¦å®ç°æ•´ä¸ªç³»ç»Ÿçš„çº¿æ€§ä¸€è‡´è¿˜éœ€è¦åšä¸€äº›é¢å¤–çš„å·¥ä½œã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å‡è®¾æˆ‘ä»¬æœŸæœ›åŸºäº Raft å®ç°ä¸€ä¸ªçº¿æ€§ä¸€è‡´çš„åˆ†å¸ƒå¼ kv ç³»ç»Ÿï¼Œè®©æˆ‘ä»¬ä»æœ€æœ´ç´ çš„æ–¹æ¡ˆå¼€å§‹ï¼ŒæŒ‡å‡ºæ¯ç§æ–¹æ¡ˆå­˜åœ¨çš„é—®é¢˜ï¼Œæœ€ç»ˆä½¿æ•´ä¸ªç³»ç»Ÿæ»¡è¶³çº¿æ€§ä¸€è‡´æ€§ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;6.2.1 å†™ä¸»è¯»ä»ç¼ºé™·åˆ†æ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å†™æ“ä½œå¹¶ä¸æ˜¯æˆ‘ä»¬å…³æ³¨çš„é‡ç‚¹ï¼Œå¦‚æœä½ ç¨å¾®çœ‹äº†ä¸€äº›ç†è®ºéƒ¨åˆ†å°±åº”è¯¥çŸ¥é“ï¼Œæ‰€æœ‰å†™æ“ä½œéƒ½è¦ä½œä¸ºææ¡ˆä» leader èŠ‚ç‚¹å‘èµ·ï¼Œå½“ç„¶æ‰€æœ‰çš„å†™å‘½ä»¤éƒ½åº”è¯¥ç®€å•äº¤ç»™ leader å¤„ç†ã€‚çœŸæ­£å…³é”®çš„ç‚¹åœ¨äº&lt;strong&gt;è¯»æ“ä½œçš„å¤„ç†æ–¹å¼ï¼Œè¿™æ¶‰åŠåˆ°æ•´ä¸ªç³»ç»Ÿå…³äºä¸€è‡´æ€§æ–¹é¢çš„å–èˆ&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åœ¨è¯¥æ–¹æ¡ˆä¸­æˆ‘ä»¬å‡è®¾è¯»æ“ä½œç›´æ¥ç®€å•åœ°å‘ follower å‘èµ·ï¼Œé‚£ä¹ˆç”±äº Raft çš„ Quorum æœºåˆ¶ï¼ˆå¤§éƒ¨åˆ†èŠ‚ç‚¹æˆåŠŸå³å¯ï¼‰ï¼Œé’ˆå¯¹æŸä¸ªææ¡ˆåœ¨æŸä¸€æ—¶é—´æ®µå†…ï¼Œé›†ç¾¤å¯èƒ½ä¼šæœ‰ä»¥ä¸‹ä¸¤ç§çŠ¶æ€ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä»¥ä¸Šæ¯ä¸ªåœºæ™¯å®¢æˆ·ç«¯éƒ½å¯èƒ½è¯»åˆ°&lt;strong&gt;è¿‡æ—¶çš„æ•°æ®&lt;/strong&gt;ï¼Œæ•´ä¸ªç³»ç»Ÿæ˜¾ç„¶æ˜¯ä¸æ»¡è¶³çº¿æ€§ä¸€è‡´çš„ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;6.2.2 å†™ä¸»è¯»ä¸»ç¼ºé™·åˆ†æ&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åœ¨è¯¥æ–¹æ¡ˆä¸­æˆ‘ä»¬é™å®šï¼Œæ‰€æœ‰çš„è¯»æ“ä½œä¹Ÿå¿…é¡»ç»ç”± leader èŠ‚ç‚¹å¤„ç†ï¼Œè¯»å†™éƒ½ç»è¿‡ leader éš¾é“è¿˜ä¸èƒ½æ»¡è¶³çº¿æ€§ä¸€è‡´ï¼Ÿæ˜¯çš„ï¼ï¼å¹¶ä¸”è¯¥æ–¹æ¡ˆå­˜åœ¨ä¸æ­¢ä¸€ä¸ªé—®é¢˜ï¼ï¼&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;é—®é¢˜ä¸€ï¼šçŠ¶æ€æœºè½åäº committed log å¯¼è‡´è„è¯»&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å›æƒ³ä¸€ä¸‹å‰æ–‡è®²è¿‡çš„ï¼Œæˆ‘ä»¬åœ¨è§£é‡Šä»€ä¹ˆæ˜¯ commit æ—¶æåˆ°äº†å†™æ“ä½œä»€ä¹ˆæ—¶å€™å¯ä»¥å“åº”å®¢æˆ·ç«¯ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;æ‰€è°“ commit å…¶å®å°±æ˜¯å¯¹æ—¥å¿—ç®€å•è¿›è¡Œä¸€ä¸ªæ ‡è®°ï¼Œè¡¨æ˜å…¶å¯ä»¥è¢« apply åˆ°çŠ¶æ€æœºï¼Œå¹¶é’ˆå¯¹ç›¸åº”çš„å®¢æˆ·ç«¯è¯·æ±‚è¿›è¡Œå“åº”ã€‚&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªææ¡ˆåªè¦è¢« leader commit å°±å¯ä»¥å“åº”å®¢æˆ·ç«¯äº†ï¼ŒRaft å¹¶æ²¡æœ‰é™å®šææ¡ˆç»“æœåœ¨è¿”å›ç»™å®¢æˆ·ç«¯å‰å¿…é¡»å…ˆåº”ç”¨åˆ°çŠ¶æ€æœºã€‚æ‰€ä»¥ä»å®¢æˆ·ç«¯è§†è§’å½“æˆ‘ä»¬çš„æŸä¸ªå†™æ“ä½œæ‰§è¡ŒæˆåŠŸåï¼Œä¸‹ä¸€æ¬¡è¯»æ“ä½œå¯èƒ½è¿˜æ˜¯ä¼šè¯»åˆ°æ—§å€¼ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¿™ä¸ªé—®é¢˜çš„è§£å†³æ–¹å¼å¾ˆç®€å•ï¼Œåœ¨ leader æ”¶åˆ°è¯»å‘½ä»¤æ—¶æˆ‘ä»¬åªéœ€è®°å½•ä¸‹å½“å‰çš„ commit indexï¼Œå½“ apply index è¿½ä¸Šè¯¥ commit index æ—¶ï¼Œå³å¯å°†çŠ¶æ€æœºä¸­çš„å†…å®¹å“åº”ç»™å®¢æˆ·ç«¯ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;é—®é¢˜äºŒï¼šç½‘ç»œåˆ†åŒºå¯¼è‡´è„è¯»&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å‡è®¾é›†ç¾¤å‘ç”Ÿç½‘ç»œåˆ†åŒºï¼Œæ—§ leader ä½äºå°‘æ•°æ´¾åˆ†åŒºä¸­ï¼Œè€Œä¸”æ­¤åˆ»æ—§ leader åˆšå¥½è¿˜æœªå‘ç°è‡ªå·±å·²ç»å¤±å»äº†é¢†å¯¼æƒï¼Œå½“å¤šæ•°æ´¾åˆ†åŒºé€‰å‡ºäº†æ–°çš„ leader å¹¶å¼€å§‹è¿›è¡Œåç»­å†™æ“ä½œæ—¶ï¼Œè¿æ¥åˆ°æ—§ leader çš„å®¢æˆ·ç«¯å¯èƒ½å°±ä¼šè¯»åˆ°æ—§å€¼äº†ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å› æ­¤ï¼Œä»…ä»…æ˜¯ç›´æ¥è¯» leader çŠ¶æ€æœºçš„è¯ï¼Œç³»ç»Ÿä»ç„¶ä¸æ»¡è¶³çº¿æ€§ä¸€è‡´æ€§ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;6.2.3 Raft Log Read&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸ºäº†ç¡®ä¿ leader å¤„ç†è¯»æ“ä½œæ—¶ä»æ‹¥æœ‰é¢†å¯¼æƒï¼Œæˆ‘ä»¬å¯ä»¥å°†è¯»è¯·æ±‚åŒæ ·ä½œä¸ºä¸€ä¸ªææ¡ˆèµ°ä¸€é Raft æµç¨‹ï¼Œå½“è¿™æ¬¡è¯»è¯·æ±‚å¯¹åº”çš„æ—¥å¿—å¯ä»¥è¢«åº”ç”¨åˆ°çŠ¶æ€æœºæ—¶ï¼Œleader å°±å¯ä»¥è¯»çŠ¶æ€æœºå¹¶è¿”å›ç»™ç”¨æˆ·äº†ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¿™ç§è¯»æ–¹æ¡ˆç§°ä¸º &lt;strong&gt;Raft Log Read&lt;/strong&gt;ï¼Œä¹Ÿå¯ä»¥ç›´è§‚å«åš &lt;strong&gt;Read as Proposal&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸ºä»€ä¹ˆè¿™ç§æ–¹æ¡ˆæ»¡è¶³çº¿æ€§ä¸€è‡´ï¼Ÿå› ä¸ºè¯¥æ–¹æ¡ˆæ ¹æ® commit index å¯¹æ‰€æœ‰è¯»å†™è¯·æ±‚éƒ½ä¸€èµ·åšäº†çº¿æ€§åŒ–ï¼Œè¿™æ ·æ¯ä¸ªè¯»è¯·æ±‚éƒ½èƒ½æ„ŸçŸ¥åˆ°çŠ¶æ€æœºåœ¨æ‰§è¡Œå®Œå‰ä¸€å†™è¯·æ±‚åçš„æœ€æ–°çŠ¶æ€ï¼Œå°†è¯»å†™æ—¥å¿—ä¸€æ¡ä¸€æ¡çš„åº”ç”¨åˆ°çŠ¶æ€æœºï¼Œæ•´ä¸ªç³»ç»Ÿå½“ç„¶æ»¡è¶³çº¿æ€§ä¸€è‡´ã€‚ä½†è¯¥æ–¹æ¡ˆçš„ç¼ºç‚¹ä¹Ÿéå¸¸æ˜æ˜¾ï¼Œé‚£å°±æ˜¯&lt;strong&gt;æ€§èƒ½å·®&lt;/strong&gt;ï¼Œè¯»æ“ä½œçš„å¼€é”€ä¸å†™æ“ä½œå‡ ä¹å®Œå…¨ä¸€è‡´ã€‚è€Œä¸”ç”±äºæ‰€æœ‰æ“ä½œéƒ½çº¿æ€§åŒ–äº†ï¼Œæˆ‘ä»¬æ— æ³•å¹¶å‘è¯»çŠ¶æ€æœºã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;6.3 Raft è¯»æ€§èƒ½ä¼˜åŒ–&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬å°†ä»‹ç»å‡ ç§ä¼˜åŒ–æ–¹æ¡ˆï¼Œå®ƒä»¬åœ¨ä¸è¿èƒŒç³»ç»Ÿçº¿æ€§ä¸€è‡´æ€§çš„å‰æä¸‹ï¼Œå¤§å¹…æå‡äº†è¯»æ€§èƒ½ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;6.3.1 Read Index&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸ Raft Log Read ç›¸æ¯”ï¼ŒRead Index çœæ‰äº†åŒæ­¥ log çš„å¼€é”€ï¼Œ&lt;strong&gt;èƒ½å¤Ÿå¤§å¹…æå‡è¯»çš„ååï¼Œä¸€å®šç¨‹åº¦ä¸Šé™ä½è¯»çš„æ—¶å»¶&lt;/strong&gt;ã€‚å…¶å¤§è‡´æµç¨‹ä¸ºï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;Leader åœ¨æ”¶åˆ°å®¢æˆ·ç«¯è¯»è¯·æ±‚æ—¶ï¼Œè®°å½•ä¸‹å½“å‰çš„ commit indexï¼Œç§°ä¹‹ä¸º read indexã€‚&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;Leader å‘ followers å‘èµ·ä¸€æ¬¡å¿ƒè·³åŒ…ï¼Œè¿™ä¸€æ­¥æ˜¯ä¸ºäº†ç¡®ä¿é¢†å¯¼æƒï¼Œé¿å…ç½‘ç»œåˆ†åŒºæ—¶å°‘æ•°æ´¾ leader ä»å¤„ç†è¯·æ±‚ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ç­‰å¾…çŠ¶æ€æœº&lt;strong&gt;è‡³å°‘&lt;/strong&gt;åº”ç”¨åˆ° read indexï¼ˆå³ apply index &lt;strong&gt;å¤§äºç­‰äº&lt;/strong&gt; read indexï¼‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æ‰§è¡Œè¯»è¯·æ±‚ï¼Œå°†çŠ¶æ€æœºä¸­çš„ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¿™é‡Œç¬¬ä¸‰æ­¥çš„ apply index &lt;strong&gt;å¤§äºç­‰äº&lt;/strong&gt; read index æ˜¯ä¸€ä¸ªå…³é”®ç‚¹ã€‚å› ä¸ºåœ¨è¯¥è¯»è¯·æ±‚å‘èµ·æ—¶ï¼Œæˆ‘ä»¬å°†å½“æ—¶çš„ commit index è®°å½•äº†ä¸‹æ¥ï¼Œåªè¦ä½¿å®¢æˆ·ç«¯è¯»åˆ°çš„å†…å®¹åœ¨è¯¥ commit index ä¹‹åï¼Œé‚£ä¹ˆç»“æœ&lt;strong&gt;ä¸€å®šéƒ½æ»¡è¶³çº¿æ€§ä¸€è‡´&lt;/strong&gt;ï¼ˆå¦‚ä¸ç†è§£å¯ä»¥å†æ¬¡å›é¡¾ä¸‹å‰æ–‡çº¿æ€§ä¸€è‡´æ€§çš„ä¾‹å­ä»¥åŠ2.2ä¸­çš„é—®é¢˜ä¸€ï¼‰ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;6.3.2 Lease Read&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä¸ Read Index ç›¸æ¯”ï¼ŒLease Read è¿›ä¸€æ­¥çœå»äº†ç½‘ç»œäº¤äº’å¼€é”€ï¼Œå› æ­¤æ›´èƒ½&lt;strong&gt;æ˜¾è‘—é™ä½è¯»çš„æ—¶å»¶&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åŸºæœ¬æ€è·¯æ˜¯ leader è®¾ç½®ä¸€ä¸ª&lt;strong&gt;æ¯”é€‰ä¸¾è¶…æ—¶ï¼ˆElection Timeoutï¼‰æ›´çŸ­çš„æ—¶é—´ä½œä¸ºç§ŸæœŸ&lt;/strong&gt;ï¼Œåœ¨ç§ŸæœŸå†…æˆ‘ä»¬å¯ä»¥ç›¸ä¿¡å…¶å®ƒèŠ‚ç‚¹ä¸€å®šæ²¡æœ‰å‘èµ·é€‰ä¸¾ï¼Œé›†ç¾¤ä¹Ÿå°±ä¸€å®šä¸ä¼šå­˜åœ¨è„‘è£‚ï¼Œæ‰€ä»¥åœ¨è¿™ä¸ªæ—¶é—´æ®µå†…æˆ‘ä»¬ç›´æ¥è¯»ä¸»å³å¯ï¼Œè€Œéè¯¥æ—¶é—´æ®µå†…å¯ä»¥ç»§ç»­èµ° Read Index æµç¨‹ï¼ŒRead Index çš„å¿ƒè·³åŒ…ä¹Ÿå¯ä»¥ä¸ºç§ŸæœŸå¸¦æ¥æ›´æ–°ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Lease Read å¯ä»¥è®¤ä¸ºæ˜¯ Read Index çš„æ—¶é—´æˆ³ç‰ˆæœ¬ï¼Œé¢å¤–ä¾èµ–æ—¶é—´æˆ³ä¼šä¸ºç®—æ³•å¸¦æ¥ä¸€äº›ä¸ç¡®å®šæ€§ï¼Œå¦‚æœæ—¶é’Ÿå‘ç”Ÿæ¼‚ç§»ä¼šå¼•å‘ä¸€ç³»åˆ—é—®é¢˜ï¼Œå› æ­¤éœ€è¦è°¨æ…çš„è¿›è¡Œé…ç½®ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;6.3.3 Follower Read&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;åœ¨å‰è¾¹ä¸¤ç§ä¼˜åŒ–æ–¹æ¡ˆä¸­ï¼Œæ— è®ºæˆ‘ä»¬æ€ä¹ˆæŠ˜è…¾ï¼Œæ ¸å¿ƒæ€æƒ³å…¶å®åªæœ‰ä¸¤ç‚¹ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¿™ä¸¤ä¸ªä¿è¯åˆ†åˆ«å¯¹åº”2.2èŠ‚æ‰€æè¿°çš„ä¸¤ä¸ªé—®é¢˜ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å…¶å®æ— è®ºæ˜¯ Read Index è¿˜æ˜¯ Lease Readï¼Œæœ€ç»ˆç›®çš„éƒ½æ˜¯ä¸ºäº†è§£å†³ç¬¬äºŒä¸ªé—®é¢˜ã€‚æ¢å¥è¯è¯´ï¼Œè¯»è¯·æ±‚æœ€ç»ˆä¸€å®šéƒ½æ˜¯ç”± leader æ¥æ‰¿è½½çš„ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;é‚£ä¹ˆè¯» follower çœŸçš„å°±ä¸èƒ½æ»¡è¶³çº¿æ€§ä¸€è‡´å—ï¼Ÿå…¶å®ä¸ç„¶ï¼Œè¿™é‡Œæˆ‘ä»¬ç»™å‡ºä¸€ä¸ªå¯è¡Œçš„è¯» follower æ–¹æ¡ˆï¼š&lt;strong&gt;Follower åœ¨æ”¶åˆ°å®¢æˆ·ç«¯çš„è¯»è¯·æ±‚æ—¶ï¼Œå‘ leader è¯¢é—®å½“å‰æœ€æ–°çš„ commit indexï¼Œåæ­£æ‰€æœ‰æ—¥å¿—æ¡ç›®æœ€ç»ˆä¸€å®šä¼šè¢«åŒæ­¥åˆ°è‡ªå·±èº«ä¸Šï¼Œfollower åªéœ€ç­‰å¾…è¯¥æ—¥å¿—è¢«è‡ªå·± commit å¹¶ apply åˆ°çŠ¶æ€æœºåï¼Œè¿”å›ç»™å®¢æˆ·ç«¯æœ¬åœ°çŠ¶æ€æœºçš„ç»“æœå³å¯&lt;/strong&gt;ã€‚è¿™ä¸ªæ–¹æ¡ˆå«åš &lt;strong&gt;Follower Read&lt;/strong&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;æ³¨æ„ï¼šFollower Read å¹¶ä¸æ„å‘³ç€æˆ‘ä»¬åœ¨è¯»è¿‡ç¨‹ä¸­å®Œå…¨ä¸ä¾èµ– leader äº†ï¼Œåœ¨ä¿è¯çº¿æ€§ä¸€è‡´æ€§çš„å‰æä¸‹å®Œå…¨ä¸ä¾èµ– leader ç†è®ºä¸Šæ˜¯ä¸å¯èƒ½åšåˆ°çš„ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;hr/&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;ä»¥ä¸Šå°±æ˜¯ Raft ç®—æ³•çš„æ ¸å¿ƒå†…å®¹åŠå·¥ç¨‹å®è·µæœ€éœ€è¦è€ƒè™‘çš„å†…å®¹ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å¦‚æœä½ åšæŒçœ‹äº†ä¸‹æ¥ï¼Œç›¸ä¿¡å·²ç»å¯¹ Raft ç®—æ³•çš„ç†è®ºæœ‰äº†æ·±åˆ»çš„ç†è§£ã€‚å½“ç„¶ï¼Œç†è®ºå’Œå·¥ç¨‹å®è·µä¹‹é—´å­˜åœ¨çš„é¸¿æ²Ÿå¯èƒ½æ¯”æƒ³è±¡çš„è¿˜è¦å¤§ï¼Œå®è·µä¸­æœ‰ä¼—å¤šçš„ç»†èŠ‚é—®é¢˜éœ€è¦å»é¢å¯¹ã€‚åœ¨åç»­çš„æºç åˆ†æåŠå®è·µç¯‡ä¸­ï¼Œæˆ‘ä»¬ä¼šç»“åˆä»£ç è®²è§£åˆ°è®¸å¤šç†è®ºéƒ¨åˆ†æ²¡æœ‰æåˆ°çš„è¿™äº›ç»†èŠ‚ç‚¹ï¼Œå¹¶ä»‹ç»åŸºç¡€æ¶æ„è®¾è®¡çš„è¯¸å¤šç»éªŒï¼Œæ•¬è¯·æœŸå¾…ï¼&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>d95feae1a8e1e6ddbd2d60f69e74237f</guid>
<title>å¸ƒéš†è¿‡æ»¤å™¨ (Bloom Filter) è¯¦è§£</title>
<link>https://toutiao.io/k/imtmhh8</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    

                    
                    
                    &lt;p&gt;&lt;span&gt;å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ç”± Burton Bloom åœ¨ 1970 å¹´æå‡ºï¼Œå› æ­¤ä¹Ÿç§°ä¸º Bloom Filterã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;ä½œç”¨&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;&lt;span/&gt;&lt;span&gt;å®ç°&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;ä¼˜ç‚¹&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;ç¼ºç‚¹&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;ä½¿ç”¨åœºæ™¯&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;é˜²æ­¢ç¼“å­˜å‡»ç©¿&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;Web æ‹¦æˆªå™¨&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;ç½‘é¡µçˆ¬è™«å¯¹ URL å»é‡&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;ååƒåœ¾é‚®ä»¶ï¼Œåˆ¤æ–­æŸä¸ªé‚®ç®±æ˜¯å¦æ˜¯åƒåœ¾é‚®&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;......&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;1. å®ç°åŸç†&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Â Â Â Â &lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å½“éœ€è¦åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨æŸä¸ªé›†åˆä¸­æ—¶ï¼Œæˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„æ˜¯ä½¿ç”¨é›†åˆç±»ï¼ˆé“¾è¡¨ã€æ ‘ã€æ•£åˆ—è¡¨ç­‰ï¼‰æ¥å®ç°ã€‚&lt;/span&gt;&lt;span&gt;ä½†æ˜¯ä½¿ç”¨é›†åˆç±»ï¼Œæˆ‘ä»¬æ˜¯ç›´æ¥å°†æ‰€æœ‰å…ƒç´ ä¿å­˜åœ¨é›†åˆä¸­ï¼Œéšç€é›†åˆä¸­å…ƒç´ æ•°é‡çš„å¢åŠ ï¼Œé›†åˆæ‰€éœ€è¦çš„å­˜å‚¨ç©ºé—´ä¹Ÿä¼šçº¿æ€§å¢é•¿ï¼ŒåŒæ—¶æŸ¥è¯¢é€Ÿåº¦ä¹Ÿä¼šè¶Šæ¥è¶Šæ…¢ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.39893617021276595&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/R038zOh2jPJdt6orVzowHMla2liatLebZvpDZcK6vXzh02wU0jBM5WUGOw6HRGqtKCic2TDLFeUrbiakibrfWeHibvw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;752&quot;/&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;&lt;span&gt;ä½¿ç”¨æ•°ç»„æˆ–åˆ—è¡¨æ—¶ï¼Œæ’å…¥é¡¹çš„ä½ç½®å’Œè¦æ’å…¥çš„å€¼æ²¡æœ‰å¯¹åº”å…³ç³»ï¼Œè¿™æ ·å½“éœ€è¦æŸ¥æ‰¾æŸä¸ªå€¼æ—¶å°±å¿…é¡»éå†å·²æœ‰çš„å…ƒç´ ï¼›å½“æ•°ç»„æˆ–åˆ—è¡¨ä¸­å­˜åœ¨çš„å…ƒç´ æ•°æ®å¾ˆå¤šæ—¶ï¼Œå°±ä¼šå½±å“æŸ¥è¯¢æ•ˆç‡ã€‚&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;&lt;span&gt;é’ˆå¯¹ä¸Šè¿°æ•°ç»„æŸ¥è¯¢é—®é¢˜ï¼Œæˆ‘ä»¬æ”¹ä¸ºä½¿ç”¨å“ˆå¸Œè¡¨ã€‚å“ˆå¸Œè¡¨é€šè¿‡å¯¹â€œå€¼â€è¿›è¡Œå“ˆå¸Œè®¡ç®—ï¼Œç„¶åæ¨¡å“ˆå¸Œæ¡¶å¤§å°ï¼Œå¾—åˆ°å­˜æ”¾è¯¥å€¼çš„åˆ—è¡¨ç´¢å¼•ä½ç½®ã€‚æŸ¥è¯¢æ—¶æ ¹æ®å€¼çš„å“ˆå¸Œå€¼å¿«é€Ÿå®šä½åˆ°å­˜æ”¾è¯¥å€¼çš„ç´¢å¼•ä½ç½®ï¼Œç„¶ååœ¨ç´¢å¼•ä½ç½®åˆ—è¡¨ä¸­è¿›è¡ŒæŸ¥æ‰¾è¯¥å€¼æ˜¯å¦å­˜åœ¨ï¼Œè¿™æ ·ç¼©å°äº†æŸ¥è¯¢èŒƒå›´ï¼Œæé«˜äº†æŸ¥è¯¢çš„æ•ˆç‡ã€‚å› ä¸ºæˆ‘ä»¬æ˜¯å°†æ‰€æœ‰å€¼å­˜æ”¾åœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œæ‰€ä»¥å½“å­˜æ”¾å€¼çš„æ•°é‡å˜å¤šæ—¶ï¼Œä¼šå ç”¨å¤§é‡çš„å­˜å‚¨ç©ºé—´ï¼Œä»è€Œå½±å“æŸ¥è¯¢æ•ˆç‡æˆ–è€…å‘ç”Ÿå†…å­˜æº¢å‡ºã€‚&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆBloom Filterï¼‰ã€‚ä¸ç®¡æ˜¯é›†åˆç±»è¿˜æ˜¯å¸ƒéš†è¿‡æ»¤å™¨ï¼Œéƒ½ç”¨åˆ°äº†å“ˆå¸Œå‡½æ•°ï¼ˆHash Functionï¼‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å“ˆå¸Œå‡½æ•°çš„å®šä¹‰ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å“ˆå¸Œå‡½æ•°&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å“ˆå¸Œå‡½æ•°ï¼Œä¹Ÿç§°ä¸ºæ•£åˆ—å‡½æ•°ï¼Œç»™å®šä¸€ä¸ªè¾“å…¥å€¼ &lt;span&gt;x&lt;/span&gt;ï¼Œé‚£ä¹ˆç»è¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—è¾“å‡º &lt;span&gt;H(x)&lt;/span&gt;ï¼Œè¿™ä¸ªè®¡ç®—ç»“æœæˆ‘ä»¬ç§°ä¸ºå“ˆå¸Œå€¼æˆ–è€…æ•£åˆ—å€¼ã€‚å“ˆå¸Œå‡½æ•°å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;è¾“å…¥ &lt;span&gt;x&lt;/span&gt;Â å¯ä»¥ä»»æ„é•¿åº¦&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;è¾“å‡ºç»“æœ &lt;/span&gt;&lt;span&gt;H(x)&lt;/span&gt;&lt;span&gt;Â çš„é•¿åº¦å›ºå®š&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;è®¡&lt;/span&gt;&lt;span&gt;ç®— &lt;/span&gt;&lt;span&gt;H(x)&lt;/span&gt;&lt;span&gt;Â è¿‡ç¨‹é«˜æ•ˆï¼Œé•¿åº¦ä¸º &lt;/span&gt;&lt;span&gt;n&lt;/span&gt;&lt;span&gt;Â çš„ &lt;/span&gt;&lt;span&gt;x&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;H(x)&lt;/span&gt;&lt;span&gt;Â çš„æ—¶é—´å¤æ‚åº¦åº”ä¸º &lt;/span&gt;&lt;span&gt;O(n)&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å•å‘æ•£åˆ—ï¼š&lt;/span&gt;&lt;span&gt;å½“ä¸¤ä¸ªæ•£åˆ—å€¼ä¸ç›¸åŒæ—¶ï¼Œé‚£ä¹ˆè®¡ç®—å®ƒä»¬çš„è¾“å…¥å€¼ä¸€å®šä¹Ÿä¸ç›¸åŒ&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æ•£åˆ—ç¢°æ’ï¼š&lt;/span&gt;&lt;span&gt;å½“ä¸¤ä¸ªæ•£åˆ—å€¼ç›¸åŒï¼Œä½†æ˜¯è®¡ç®—å®ƒä»¬&lt;/span&gt;&lt;span&gt;çš„è¾“å…¥å€¼ä¸ç›¸åŒæ—¶ï¼Œæˆ‘ä»¬ç§°è¿™ç§æƒ…å†µä¸ºæ•£åˆ—ç¢°æ’&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;éš&lt;/span&gt;&lt;span&gt;åŒ¿æ€§ï¼š&lt;/span&gt;&lt;span&gt;é€šè¿‡ &lt;/span&gt;&lt;span&gt;H(x)&lt;/span&gt;&lt;span&gt;Â ç»“æœï¼Œä¸èƒ½ä»è®¡ç®—ä¸Šé€†å‘æ¨å¯¼å‡º &lt;/span&gt;&lt;span&gt;x&lt;/span&gt;&lt;span&gt;ï¼Œä¸å­˜åœ¨æ¯”ç©·ä¸¾æ³•æ›´å¥½çš„æ–¹æ³•&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¸ƒéš†è¿‡æ»¤å™¨æ•°æ®ç»“æ„&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å¸ƒéš†è¿‡æ»¤å™¨ï¼ˆBloom Filterï¼‰æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªé•¿åº¦ä¸º &lt;span&gt;m&lt;/span&gt;Â çš„ä½å‘é‡æˆ–ä½åˆ—è¡¨ï¼Œä»…åŒ…å«äºŒè¿›åˆ¶çš„ &lt;span&gt;0&lt;/span&gt;Â æˆ– &lt;span&gt;1&lt;/span&gt;ã€‚æœ€åˆæ‰€æœ‰çš„å€¼å‡ä¸º &lt;span&gt;0&lt;/span&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.2088998763906057&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/R038zOh2jPJdt6orVzowHMla2liatLebZCGYjIQibobEUPhkQ0xWTBqQqpAGzIRkDZdYB3TRg57vQ0djSibibvWWzA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;809&quot;/&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;ä¸ºäº†å‡å°‘å“ˆå¸Œç¢°æ’ï¼Œå¸ƒéš†è¿‡æ»¤å™¨ä½¿ç”¨ &lt;span&gt;K&lt;/span&gt;Â ä¸ªä¸åŒçš„å“ˆå¸Œå‡½æ•°ï¼Œå¹¶å°†å“ˆå¸Œç»“æœå¯¹åº”çš„ä½ç½®ä¸º &lt;span&gt;1&lt;/span&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.33250927070457353&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/R038zOh2jPJdt6orVzowHMla2liatLebZ1RVPm0amlmUnQCOGmPq7e2qZAdSN1TD2Pkiaz5dwamJic5cAeApwztiaQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;809&quot;/&gt;&lt;/p&gt;&lt;p&gt;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼šå½“è¾“å…¥ &lt;span&gt;January&lt;/span&gt;Â æ—¶ï¼Œé€šè¿‡è®¾ç½®å½“ 3 ä¸ªå“ˆå¸Œå‡½æ•°è®¡ç®—å¾—åˆ°ç´¢å¼•ä½ç½® 1ã€4ã€6ï¼Œæˆ‘ä»¬å°†è¿™ 3 ä¸ªç´¢å¼•ä½ç½®ç½®ä¸º &lt;span&gt;1&lt;/span&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.33250927070457353&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/R038zOh2jPJdt6orVzowHMla2liatLebZJCBYFsZ1NKMib4qlLtzsL67heYpvVGJybvFkRXfhkfjoiaEXNobGACYQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;809&quot;/&gt;&lt;/p&gt;&lt;p&gt;ç„¶åå†è¾“å…¥ &lt;span&gt;February&lt;/span&gt;ï¼Œæ ¹æ®å“ˆå¸Œå‡½æ•°å¾—åˆ°ç´¢å¼•ä½ç½® 1ã€5ã€8ã€‚å› ä¸ºç´¢å¼•ä½ 1 ä¸Šå·²ç»æ˜¯ &lt;span&gt;1&lt;/span&gt;ï¼Œå› æ­¤åªéœ€è¦å°† 5ã€8 ç´¢å¼•ä½ç½® &lt;span&gt;1&lt;/span&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“æŸ¥è¯¢æŸä¸ªå€¼æ˜¯å¦å­˜åœ¨æ—¶ï¼ŒåŒæ ·é€šè¿‡è®¾ç½®çš„å“ˆå¸Œå‡½æ•°è®¡ç®—å‡ºç´¢å¼•ä½ç½®ï¼Œå¦‚æœç›¸åº”ç´¢å¼•ä½ç½®ä¸Šéƒ½æ˜¯ &lt;span&gt;1&lt;/span&gt;Â åˆ™è¯´æ˜è¯¥å€¼å·²å­˜åœ¨ï¼ˆå­˜åœ¨è¯¯åˆ¤çš„æƒ…å†µï¼‰ï¼Œå¦åˆ™è¯¥å€¼ä¸€å®šä¸å­˜åœ¨ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;å¸ƒéš†è¿‡æ»¤å™¨ä¸ºä»€ä¹ˆä¸èƒ½åˆ é™¤ï¼Ÿå¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬å¦‚æœåˆ é™¤ &lt;span&gt;February&lt;/span&gt;ï¼Œåˆ™å°†ç´¢å¼•ä½ç½® 1ã€5ã€8 ç½® &lt;span&gt;0&lt;/span&gt;ã€‚æ­¤æ—¶æˆ‘ä»¬å†æ¥åˆ¤æ–­æŸ¥è¯¢ &lt;span&gt;January&lt;/span&gt;Â æ˜¯å¦å­˜åœ¨ï¼Œå› ä¸ºç´¢å¼•ä½ 1 å·²ç»ç½® 0ï¼Œæ ¹æ®åˆ¤æ–­è§„åˆ™ï¼Œåˆ™åˆ¤å®š January ä¸å­˜åœ¨ã€‚å› æ­¤åœ¨å¸ƒéš†è¿‡æ»¤å™¨ä¸­åˆ é™¤å…ƒç´ ä¼šå¯¼è‡´å…¶ä»–å·²å­˜åœ¨å…ƒç´ çš„è¯¯åˆ¤ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2. Guava Bloom Filter å®ç°&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;Google çš„ Guava åº“ä¸­æä¾›äº† Bloom Filter çš„å®ç°ã€‚æˆ‘ä»¬ä½¿ç”¨å®ƒæ¥å®ç°ä¸€ä¸ªä» 1000 ä¸‡æ•°æ®ä¸­åˆ¤æ–­éšæœºçš„ 10000 æ¡æ•°æ®æ˜¯å¦å­˜åœ¨ã€‚&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;-&lt;/span&gt; å¼•å…¥ guava åº“&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;xml&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__tag&quot;&gt;&amp;lt;&lt;span class=&quot;code-snippet__name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__tag&quot;&gt;&amp;lt;&lt;span class=&quot;code-snippet__name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;com.google.guava&lt;span class=&quot;code-snippet__tag&quot;&gt;&amp;lt;/&lt;span class=&quot;code-snippet__name&quot;&gt;groupId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__tag&quot;&gt;&amp;lt;&lt;span class=&quot;code-snippet__name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;guava&lt;span class=&quot;code-snippet__tag&quot;&gt;&amp;lt;/&lt;span class=&quot;code-snippet__name&quot;&gt;artifactId&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__tag&quot;&gt;&amp;lt;&lt;span class=&quot;code-snippet__name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;30.1-jre&lt;span class=&quot;code-snippet__tag&quot;&gt;&amp;lt;/&lt;span class=&quot;code-snippet__name&quot;&gt;version&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__tag&quot;&gt;&amp;lt;/&lt;span class=&quot;code-snippet__name&quot;&gt;dependency&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;-&lt;/span&gt; ä»£ç ç¤ºä¾‹&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cpp&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;import&lt;/span&gt; com.google.common.base.Charsets;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;import&lt;/span&gt; com.google.common.hash.BloomFilter;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;import&lt;/span&gt; com.google.common.hash.Funnels;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;import&lt;/span&gt; java.util.Random;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-snippet__class&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;BloomFilterDemo&lt;/span&gt; {&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__function&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;code-snippet__params&quot;&gt;(String[] args)&lt;/span&gt; &lt;/span&gt;{&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; total = &lt;span class=&quot;code-snippet__number&quot;&gt;10000000&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        BloomFilter&amp;lt;CharSequence&amp;gt; bloomFilter = BloomFilter.create(Funnels.stringFunnel(Charsets.UTF_8), total);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;; i &amp;lt; total; i++) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            bloomFilter.put(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;&quot;&lt;/span&gt; + i);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;long&lt;/span&gt; startTime = System.currentTimeMillis();&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; count1 = &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; count2 = &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;code-snippet__number&quot;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;code-snippet__number&quot;&gt;10000&lt;/span&gt;; i++) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            &lt;span class=&quot;code-snippet__keyword&quot;&gt;int&lt;/span&gt; num = &lt;span class=&quot;code-snippet__keyword&quot;&gt;new&lt;/span&gt; Random().nextInt(&lt;span class=&quot;code-snippet__number&quot;&gt;100000000&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (num &amp;lt; total) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                count1++;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            String numStr = num + &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;&quot;&lt;/span&gt;;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (bloomFilter.mightContain(numStr)) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                count2++;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        System.out.println(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;åŒ¹é…æ•°æ®:&quot;&lt;/span&gt; + count2 + &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;æ¡ï¼Œè€—æ—¶&quot;&lt;/span&gt; + (System.currentTimeMillis() - startTime) + &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;ms&quot;&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        &lt;span class=&quot;code-snippet__keyword&quot;&gt;if&lt;/span&gt; (count1 != count2) {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;            System.out.println(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;è¯¯åˆ¤:&quot;&lt;/span&gt; + Math.&lt;span class=&quot;code-snippet__built_in&quot;&gt;abs&lt;/span&gt;(count2 - count1) + &lt;span class=&quot;code-snippet__string&quot;&gt;&quot;æ¡&quot;&lt;/span&gt;);&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;        }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    }&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;-&lt;/span&gt; ä»£ç è¾“å‡º&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;css&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;åŒ¹é…æ•°æ®&lt;span class=&quot;code-snippet__selector-pseudo&quot;&gt;:1276&lt;/span&gt;æ¡ï¼Œè€—æ—¶9&lt;span class=&quot;code-snippet__selector-tag&quot;&gt;ms&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;è¯¯åˆ¤&lt;span class=&quot;code-snippet__selector-pseudo&quot;&gt;:286&lt;/span&gt;æ¡&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;å¦‚ä¸Šä»£ç æ‰€ç¤ºï¼Œå¸ƒéš†è¿‡æ»¤å™¨å­˜åœ¨è¯¯åˆ¤ç‡ï¼Œä½¿ç”¨ Guava Bloom Filter æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»ºå¸ƒéš†è¿‡æ»¤å™¨æ—¶è®¾ç½®è¯¯åˆ¤ç‡ FPP æ¥æé«˜åŒ¹é…å‡†ç¡®åº¦ã€‚å¦‚å°†ä¸Šè¿°ä»£ç ä¸­ BloomFilter çš„åˆ›å»ºè¯­å¥æ”¹ä¸ºï¼š&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;xml&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;BloomFilter&lt;span class=&quot;code-snippet__tag&quot;&gt;&amp;lt;&lt;span class=&quot;code-snippet__name&quot;&gt;CharSequence&lt;/span&gt;&amp;gt;&lt;/span&gt; bloomFilter = BloomFilter.create(Funnels.stringFunnel(Charsets.UTF_8), total, 0.0001);&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;Guava BloomFilter é»˜è®¤è¯¯åˆ¤ç‡ fpp ä¸º &lt;/span&gt;&lt;span&gt;`0.03D`&lt;/span&gt;&lt;span&gt;ï¼Œfpp è¶Šå°ï¼ŒåŒ¹é…ç²¾åº¦è¶Šé«˜ï¼Œç›¸åº”çš„éœ€è¦çš„å­˜å‚¨ç©ºé—´è¶Šå¤§ï¼Œæ‰€ä»¥åœ¨å®é™…åº”ç”¨ä¸­æ ¹æ®å®é™…ä¸šåŠ¡æƒ…å†µåœ¨è¯¯åˆ¤ç‡å’Œå­˜å‚¨ç©ºé—´ä¹‹é—´é€‰å–ä¸€ä¸ªåˆé€‚çš„å€¼ã€‚&lt;/span&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>