<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>daba6d0f72d988b243cccc4d5c574be7</guid>
<title>Java ä¸­çš„é”å±…ç„¶æœ‰è¿™ä¹ˆå¤š</title>
<link>https://toutiao.io/k/6qkwv3g</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°ä¼™ä¼´ä»¬æ™šä¸Šå¥½å‘€~&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¹²è´§å¯èƒ½ä¼šè¿Ÿåˆ°ï¼Œä½†æ˜¯ä¸èƒ½ç¼ºå¸­å‘€ï¼ğŸ˜„&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å˜¿å˜¿ Â è¿™ç¯‡æ¥è®²è®²é” ğŸ”’ å•¦~&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çœ‹å®Œä¸Šæ–‡çš„ &lt;code&gt;ConcurrentHashMap&lt;/code&gt; æ˜¯ä¸æ˜¯å‘ç°æœ‰å¾ˆå¤šä¸ª é”å‘€ï¼Œè¿™ç¯‡å°±å¸¦å¤§å®¶ç¼•ä¸€ç¼•~ ğŸ˜&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/zIjiaGEEKdYEMtm8j5FMx1CYXNE6BRlUVUeuxllVguBFyBeoxdSC9yI5Sf1KA1VTGT7TUXOfE2jqBoXYC2IRiaPA/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;200&quot;/&gt;&lt;figcaption&gt;&lt;span/&gt;img&lt;/figcaption&gt;&lt;/figure&gt;&lt;hr data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;Java ä¸­çš„é”&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºå•¥æ˜¯ Java ä¸­çš„é”å‘¢ï¼Œ å› ä¸º é”çš„ç§ç±» ä¹Ÿæœ‰å¾ˆå¤šçš„ï¼Œåƒæˆ‘ä»¬å¹³æ—¶ä½¿ç”¨çš„ &lt;strong&gt;ã€ŒMySQLã€&lt;/strong&gt;ï¼Œå®ƒä¹Ÿæœ‰è‡ªå·±çš„ &lt;strong&gt;ã€Œè¡¨é”ï¼Œè¡Œé”ï¼Œé—´éš™é”ã€&lt;/strong&gt; ... ... è¿˜æœ‰ &lt;strong&gt;ã€ŒåŸºäºredis çš„åˆ†å¸ƒå¼é”ã€&lt;/strong&gt; ï¼ˆ&lt;strong&gt;ã€ŒRedLockâ€”â€”çº¢é”ã€&lt;/strong&gt;ï¼‰å‘€ï¼Œ&lt;strong&gt;ã€Œzookeeperçš„åˆ†å¸ƒå¼é”ã€&lt;/strong&gt; ç­‰å„ç§å„æ ·çš„ğŸ”’~&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŸ‹ä¸ªå‘ğŸ•³ ~ ä»¥åå†™æ•°æ®åº“ä¸“é¢˜çš„æ—¶å€™å†™å†™ ğŸ˜&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;4ye æ€»ç»“äº†ä¸€ä»½æ€ç»´å¯¼å›¾ï¼Œå°ä¼™ä¼´ä»¬å¯ä»¥çœ‹çœ‹~&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.5071174377224199&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEMtm8j5FMx1CYXNE6BRlUV2icsogkw9gztNtnSmm4m5icmpUMCFtbVE5CuRHNObUpyfWqYDcpmB5bg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1124&quot;/&gt;&lt;figcaption&gt;&lt;span/&gt;image&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;ä¹è§‚é”&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯´åˆ°è¿™ä¸ªå°±ä¸å¾—ä¸æä¸‹ &lt;code&gt;JAVA&lt;/code&gt; ä¸­çš„ &lt;code&gt;CAS&lt;/code&gt; äº†ï¼Œå®ƒæ˜¯è¿™ç§æ€æƒ³çš„å…·ä½“å®ç°~ï¼Œè¿˜è®°å¾—ä¸Šæ–‡ é¢‘ç¹å‡ºç°çš„ &lt;code&gt;Unsafe&lt;/code&gt; ç±»å—ï¼Œ&lt;code&gt;ConcurrentHashMap&lt;/code&gt; å°±æ˜¯é€šè¿‡å®ƒå»è°ƒç”¨è¿™ä¸ª &lt;code&gt;CAS&lt;/code&gt; ï¼ˆ Compare And Swap / Set ï¼‰ï¼Œå»è®¾ç½®å€¼çš„ ğŸ˜‹&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;æ¦‚å¿µï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯»ä¸åŠ é”ï¼Œæ›´æ–°æ•°æ®æœŸé—´ä¼šåŠ é”ï¼ˆä¿è¯åŸå­æ€§ï¼‰&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;è¯¦è§£ï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ã€Œè¯»æ•°æ®æ—¶ã€&lt;/strong&gt; ä¼šå¾ˆä¹è§‚çš„è®¤ä¸ºåˆ«çš„çº¿ç¨‹æ²¡æœ‰åœ¨ä¿®æ”¹æ•°æ®ï¼Œæ‰€ä»¥ä¸ä¼šä¸Šé”ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ã€Œå†™æ•°æ®æ—¶ã€&lt;/strong&gt; ä¼šåˆ¤æ–­å½“å‰å€¼å’ŒæœŸæœ›å€¼ä¸€ä¸ä¸€æ ·ï¼Œä¸€æ ·çš„è¯ä¼šè¿›è¡Œä¿®æ”¹ï¼Œæ­¤æ—¶ä¿®æ”¹ä¼šåŠ é”ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ï¼ˆè¿™é‡Œè¿˜æœ‰äº›å¾ˆç¡¬æ ¸çš„ç‚¹ï¼Œæ¶‰åŠåˆ°ç¡¬ä»¶å±‚é¢çš„é”~ Â &lt;strong&gt;ã€ŒåŸºäºMESIåè®®æ»´ã€&lt;/strong&gt; Â åé¢å…·ä½“ä¸“é¢˜å†æ‰©å±•ä¸‹ï¼ğŸ˜ ï¼‰&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å®ç°æ–¹å¼ï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;CAS æœºåˆ¶ã€ç‰ˆæœ¬å·æœºåˆ¶ï¼Œæ—¶é—´æˆ³æœºåˆ¶&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºä»€ä¹ˆä¼šå¤šåé¢ä¸¤ç§æœºåˆ¶å‘¢ï¼Œå…¶å®è¿™é‡Œæ˜¯ä¸ºäº†è§£å†³è¿™ä¸ª &lt;strong&gt;ã€ŒABA é—®é¢˜ã€&lt;/strong&gt;&lt;/p&gt;&lt;h5 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ABAé—®é¢˜&lt;span/&gt;&lt;/h5&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœºæ™¯æ¨¡æ‹Ÿï¼Œç°åœ¨æœ‰ä¸‰æ¡çº¿ç¨‹&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çº¿ç¨‹1 è¯»å–å˜é‡aï¼Œæ­¤æ—¶a=1&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çº¿ç¨‹2 è¯»å–å˜é‡aï¼Œæ­¤æ—¶a=1, æ¯”è¾ƒåå°†å®ƒæ”¹ä¸º a=2&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çº¿ç¨‹3 è¯»å–å˜é‡aï¼Œæ­¤æ—¶a=2, æ¯”è¾ƒåå°†å®ƒæ”¹ä¸º a=1&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™æ—¶çº¿ç¨‹1 å‘ç°å˜é‡a è¿˜æ˜¯1 ï¼Œå’ŒåŸæ¥ä¸€æ ·ï¼Œå°±å°†å®ƒæ”¹æˆå…¶ä»–å€¼äº†&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥å‘ç°è¿™ä¸ªè¿‡ç¨‹ä¸­ çº¿ç¨‹1 åœ¨ä¿®æ”¹å€¼çš„æ—¶å€™ï¼Œçº¿ç¨‹2,3å·²ç»ä¿®æ”¹è¿‡å˜é‡açš„å€¼äº†ï¼Œä½†æ˜¯å®ƒæ¯«ä¸çŸ¥æƒ…~&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥å‘¢ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±å¼•å…¥äº†è¿™ä¸ª&lt;strong&gt;ã€Œç‰ˆæœ¬å·æœºåˆ¶ æˆ–è€… æ—¶é—´æˆ³æœºåˆ¶~ã€&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶å®å°±æ˜¯å¤šæ¯”è¾ƒä¸€ä¸ªå€¼ï¼Œæ¯”å¦‚ &lt;strong&gt;ã€Œæ¯æ¬¡æ›´æ”¹æ—¶å†æ¯”è¾ƒä¸‹è¿™ä¸ªç‰ˆæœ¬å·æˆ–è€…æ—¶é—´æˆ³å¯¹ä¸å¯¹å¾—ä¸Š~ã€&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é¢ è¿™é‡Œæ—¢ç„¶åªè®²Java ï¼Œé‚£ä¹Ÿä¸æ‰¯è¿œå•¦~ Â å˜¿å˜¿ï¼Œä¸è¿‡é“ç†è¿˜æ˜¯é€šç”¨çš„ï¼&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°ä¼™ä¼´ä»¬å¯ä»¥å‚è€ƒä¸‹ è¿™ä¸ª &lt;strong&gt;ã€ŒåŸå­ç±»ä¸­çš„ã€&lt;/strong&gt; &lt;code&gt;AtomicStampedReference&lt;/code&gt; Â ï¼Œå®ƒå°±è§£å†³äº†è¿™ä¸ª &lt;strong&gt;ã€ŒABA é—®é¢˜ã€&lt;/strong&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;æ‚²è§‚é”&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªå°±å’Œä¹è§‚å®Œå…¨ç›¸åå•¦~ Â ä¸ç®¡è¯»æ“ä½œè¿˜æ˜¯å†™æ“ä½œï¼Œéƒ½æ‚²è§‚çš„è®¤ä¸ºä¼šè¢«åˆ«çš„çº¿ç¨‹æ”¹å˜ï¼Œæ‰€ä»¥ &lt;strong&gt;ã€Œä¸ç®¡æ˜¯è¯»è¿˜æ˜¯å†™éƒ½ä¼š åŠ é”ã€&lt;/strong&gt;&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;æ¦‚å¿µï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‚²è§‚çš„è®¤ä¸ºï¼Œè¯»å†™éƒ½è¦åŠ é”ï¼Œä¸ç„¶å€¼ä¼šè¢«å…¶ä»–çº¿ç¨‹æ”¹å˜~&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å®ç°æ–¹å¼ï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ã€Œsynchronizedã€&lt;/strong&gt; ï¼Œ&lt;strong&gt;ã€ŒReentrantLockã€&lt;/strong&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å…¬å¹³é”&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¬å¹³å˜›ï¼Œè¦è®²ç©¶å…ˆæ¥ååˆ° Â ğŸ˜„&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;æ¦‚å¿µï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;å¤šä¸ªçº¿ç¨‹æŒ‰ç…§ç”³è¯·é”çš„é¡ºåºæ¥è·å–é”&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ã€ŒåŸç†ã€&lt;/strong&gt;ï¼šä¸»è¦ä¾èµ–äºç»´æŠ¤è¿™ä¸ªé”çš„ Â &lt;strong&gt;ã€Œç­‰å¾…é˜Ÿåˆ—ã€&lt;/strong&gt;ï¼Œå½“é˜Ÿåˆ—ä¸ºç©ºæ—¶å°±ç›´æ¥å æœ‰é”, ä¸ä¸ºç©ºå°±åŠ å…¥åˆ° &lt;strong&gt;ã€Œç­‰å¾…é˜Ÿåˆ—ã€&lt;/strong&gt; çš„æœ«å°¾ï¼Œç„¶åæŒ‰ç…§ &lt;strong&gt;ã€ŒFIFOã€&lt;/strong&gt; çš„åŸåˆ™å»è·å–é”ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å®ç°æ–¹å¼ï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ›å»º &lt;strong&gt;ã€ŒReentrantLockã€&lt;/strong&gt; æ—¶ï¼Œæ˜¾ç¤ºæŒ‡å®š &lt;code&gt;new ReentrantLock(true)&lt;/code&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶å®æ˜¯é è¿™ä¸ª &lt;strong&gt;ã€ŒAQSã€&lt;/strong&gt; æ¥å®ç°å…¬å¹³å’Œéå…¬å¹³çš„ï¼Œè¿™é‡Œä¹ŸåŸ‹ä¸ªå‘ğŸ•³ åé¢ä¼šè¯¦è§£è¿™ä¸ªä¸“é¢˜çš„ğŸ˜‹&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.10260586319218241&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEMtm8j5FMx1CYXNE6BRlUVnoMBJTZ1Z81ibarBvtuKwMavbYVLYsGph4ATryK1MObuSficCdSdIZ7A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;614&quot;/&gt;&lt;figcaption&gt;&lt;span/&gt;image&lt;/figcaption&gt;&lt;/figure&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;éå…¬å¹³é”&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªå°±ä¸å’Œä½ è®²å…ˆæ¥ååˆ°äº† Â ğŸ˜„&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;æ¦‚å¿µï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;å¤šä¸ªçº¿ç¨‹ ä¸æŒ‰ç…§å…ˆåˆ°å…ˆå¾—çš„æ–¹å¼å»è·å–é”ï¼Œ æœ‰å¯èƒ½åç”³è¯·çš„çº¿ç¨‹ä¼šå…ˆå¾—åˆ°é”~&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ã€ŒåŸç†ã€&lt;/strong&gt;ï¼šéå…¬å¹³é”ä¼šå°è¯•è·å–é”ï¼Œå¤±è´¥çš„è¯ä¼šåŠ å…¥åˆ° &lt;strong&gt;ã€Œç­‰å¾…é˜Ÿåˆ—ã€&lt;/strong&gt; çš„æœ«å°¾ï¼Œç„¶åæŒ‰ç…§ &lt;strong&gt;ã€ŒFIFOã€&lt;/strong&gt; çš„åŸåˆ™å»è·å–é” ï¼Œå˜æˆå…¬å¹³é”çš„æ–¹å¼~&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å®ç°æ–¹å¼ï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ›å»º &lt;code&gt;ReentrantLock&lt;/code&gt; æ—¶ï¼Œæ˜¾ç¤ºæŒ‡å®š &lt;code&gt;new ReentrantLock(false)&lt;/code&gt; Â æˆ–è€…ä½¿ç”¨é»˜è®¤çš„æ–¹å¼ &lt;code&gt;new ReentrantLock();&lt;/code&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.13785557986870897&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/zIjiaGEEKdYEMtm8j5FMx1CYXNE6BRlUVtKNS8hczLyXoPwl7AGve0LpdlkIPstEhciarrdJCajEdRtIElCGBiazw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;457&quot;/&gt;&lt;figcaption&gt;&lt;span/&gt;image&lt;/figcaption&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿˜æœ‰ &lt;code&gt;synchronized&lt;/code&gt; è¿™ä¸ªå…³é”®å­—ä¹Ÿæ˜¯éå…¬å¹³çš„&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç‹¬äº«é”(ç‹¬å é”)&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç‹¬è‡ªå æœ‰é”ï¼Œä¸å’Œå…¶ä»–çº¿ç¨‹å…±äº«~ ğŸ˜„ Â  å’Œ äº’æ–¥é”ï¼Œæ’ä»–é”ï¼Œæ‚²è§‚é” åŒä¹‰&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;æ¦‚å¿µï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;åªå…è®¸ä¸€æ¡çº¿ç¨‹å æœ‰è¯¥é”&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å®ç°æ–¹å¼ï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;synchronized&lt;/code&gt; ï¼Œ&lt;code&gt;ReentrantLock&lt;/code&gt; è¿˜æœ‰ &lt;code&gt;ReentrantReadWriteLock&lt;/code&gt; Â ä¸­ çš„ &lt;strong&gt;ã€Œå†™é”ã€&lt;/strong&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å…±äº«é”&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥å’Œå…¶ä»–çº¿ç¨‹å…±äº«è¯¥é”~ ğŸ˜„ Â  å’Œ ä¹è§‚é”ï¼Œè¯»å†™é” åŒä¹‰&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;æ¦‚å¿µï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;é”å¯è¢«å¤šä¸ªçº¿ç¨‹æ‰€æŒæœ‰&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å®ç°æ–¹å¼ï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;ReentrantReadWriteLock&lt;/code&gt; ï¼Œ&lt;code&gt;ReadWriteLock&lt;/code&gt; Â è¿™ä¸¤ä¸ªä¸­çš„ &lt;strong&gt;ã€Œè¯»é”ã€&lt;/strong&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;äº’æ–¥é”(åŒæ­¥é”)&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥ç†è§£ä¸ºç‹¬å é”çš„å…·ä½“å®ç°~ğŸ˜„&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;æ¦‚å¿µï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;è¡¨ç¤ºè¯¥èµ„æºåªèƒ½è¢«ä¸€æ¡çº¿ç¨‹è®¿é—®ï¼Œä¸èƒ½è¢«å…¶ä»–è®¿é—®&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å®ç°æ–¹å¼ï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;synchronized&lt;/code&gt; ï¼Œ&lt;code&gt;ReentrantLock&lt;/code&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;è¯»å†™é”&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é¡¾åæ€ä¹‰~ æœ‰è¯»é”å’Œå†™é” ğŸ˜„&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;æ¦‚å¿µï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;è¡¨ç¤ºè¯¥èµ„æºå…è®¸ &lt;strong&gt;ã€Œå¤šæ¡æŒæœ‰è¯»é”çš„çº¿ç¨‹å…±åŒè®¿é—®ï¼Œä½†æ˜¯åªå…è®¸ä¸€æ¡æŒæœ‰å†™é”çš„çº¿ç¨‹ç‹¬å ã€&lt;/strong&gt;&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å®ç°æ–¹å¼ï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;ReentrantReadWriteLock&lt;/code&gt; ï¼Œ&lt;code&gt;ReadWriteLock&lt;/code&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œè¿˜æ¶‰åŠåˆ°&lt;strong&gt;ã€Œé”çš„é™çº§ã€&lt;/strong&gt;ï¼Œè¿˜æœ‰&lt;strong&gt;ã€Œå¯é‡å…¥ã€&lt;/strong&gt;ç­‰ä¸€äº›æœ‰æ„æ€çš„ç‚¹~ ï¼ŒåŸ‹ä¸ªå‘ğŸ•³ Â åé¢ä¹Ÿä¼šå†™åˆ°çš„ğŸ˜‹&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å¯é‡å…¥é”(é€’å½’é”)&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»€ä¹ˆæ˜¯å¯é‡å…¥å‘¢~ Â ğŸ˜„&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;æ¦‚å¿µï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;å½“ä¸€ä¸ªçº¿ç¨‹æŒæœ‰æŸä¸ªé”æ—¶ï¼Œ&lt;strong&gt;ã€Œå¯ä»¥å†æ¬¡è·å–è¯¥é”è€Œä¸ä¼šå¯¼è‡´æ­»é”æˆ–è€…é˜»å¡ã€&lt;/strong&gt;&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;ç‰¹ç‚¹ï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ã€Œè·å– n æ¬¡ é” ï¼Œä¹Ÿè¦é‡Šæ”¾ n æ¬¡é”ã€&lt;/strong&gt;&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å®ç°æ–¹å¼ï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;synchronized&lt;/code&gt; ï¼Œ&lt;code&gt;ReentrantLock&lt;/code&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;åˆ†æ®µé”&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¸ªä¸»è¦æ˜¯ &lt;strong&gt;ã€ŒJdk1.7ã€&lt;/strong&gt; ç‰ˆæœ¬ çš„ &lt;code&gt;CurrentHashMap&lt;/code&gt; Â  ğŸ˜„&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;æ¦‚å¿µï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç®€å•å›å¿†ä¸‹~&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;&lt;code&gt;CurrentHashMap&lt;/code&gt; Â  ä¸­ çš„ Â &lt;code&gt;Segment&lt;/code&gt; æ•°ç»„ ï¼Œput æ“ä½œæ—¶ä¼šè°ƒç”¨ &lt;code&gt;ReentrantLock&lt;/code&gt; Â  çš„ lock æ–¹æ³•ï¼Œé”ä½è¯¥ &lt;code&gt;Segment&lt;/code&gt;&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å®ç°æ–¹å¼ï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;synchronized&lt;/code&gt; ï¼Œ&lt;code&gt;ReentrantLock&lt;/code&gt;&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;è‡ªæ—‹é”&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å“ˆå“ˆ çœ‹äº†ä¸Šæ–‡ä¹‹åæ˜¯ä¸æ˜¯è§‰å¾—è¿™ä¸ªä¹Ÿç‰¹çœ¼ç†Ÿå‘€~ Â ğŸ˜„&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°ä¼™ä¼´ä»¬å¯ä»¥å‚çœ‹ä¸‹ &lt;code&gt;CurrentHashMap&lt;/code&gt; Â  Â  ä¸­æºç å¯¹è¿™å—çš„å®ç° ï¼Œå¦‚ &lt;code&gt;put&lt;/code&gt; æºç &lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;æ¦‚å¿µï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;è®©çº¿ç¨‹ä¸æ–­åœ°å¾ªç¯ï¼Œå»å°è¯•è·å–é”&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;å®ç°æ–¹å¼ï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;CAS&lt;/code&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œå…¶å®æœ‰å¾ˆå¤šå¯ä»¥æ‰©å±•çš„ï¼Œé™¤äº†å®ƒçš„ä¼˜ç¼ºç‚¹ä¹‹å¤–ï¼Œè¿˜æœ‰ Â &lt;strong&gt;ã€Œè‡ªé€‚åº”è‡ªæ—‹ã€&lt;/strong&gt; Â è¿™ä¸ªå’Œ &lt;strong&gt;ã€Œè™šæ‹Ÿæœºã€&lt;/strong&gt; ç›¸å…³çš„ ï¼ŒåŸ‹ä¸ªå‘ğŸ•³ ğŸ˜‹&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;æ­»é”&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ã€Œæƒ…æ™¯æ¨¡æ‹Ÿã€&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;çº¿ç¨‹1 æ‹¥æœ‰ èµ„æºA çš„é”ï¼Œçº¿ç¨‹2 æ‹¥æœ‰ èµ„æºB çš„é”ï¼Œä½†æ˜¯çº¿ç¨‹1åœ¨æŒæœ‰Aé”çš„æƒ…å†µä¸‹ï¼Œè¿˜æƒ³æ‹¥æœ‰Bé”ã€‚åŒç† çº¿ç¨‹2åœ¨æŒæœ‰Bé”çš„æƒ…å†µä¸‹ï¼Œè¿˜æƒ³æ‹¥æœ‰Aé”ã€‚ä»–ä»¬ä¸¤å°±è¿™æ ·åƒµæŒç€ï¼Œäº’ç›¸ç­‰å¾…å¯¹æ–¹é‡Šæ”¾é”ğŸ”’&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;æ¦‚å¿µï¼š&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;â&lt;/span&gt;&lt;p&gt;æ­»é”æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºæˆ–è€…ç”±äºå½¼æ­¤é€šä¿¡è€Œé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚æ­¤æ—¶ç§°ç³»ç»Ÿå¤„äºæ­»é”çŠ¶æ€æˆ–ç³»ç»Ÿäº§ç”Ÿäº†æ­»é”ï¼Œè¿™äº›æ°¸è¿œåœ¨äº’ç›¸ç­‰å¾…çš„è¿›ç¨‹ç§°ä¸ºæ­»é”è¿›ç¨‹ã€‚&lt;/p&gt;&lt;span&gt;â&lt;/span&gt;&lt;/blockquote&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;&lt;span/&gt;é”å‡çº§&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;ã€Œæ— é” -&amp;gt; åå‘é” -&amp;gt; è½»é‡çº§é” -&amp;gt; é‡é‡çº§é”ã€&lt;/strong&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œæ¶‰åŠåˆ° &lt;strong&gt;ã€Œé”ä¼˜åŒ–æŠ€æœ¯ã€&lt;/strong&gt; Â ï¼Œåé¢å’Œ &lt;strong&gt;ã€Œé”ç²—åŒ–ã€&lt;/strong&gt;ï¼Œ&lt;strong&gt;ã€Œé”è§£é™¤ã€&lt;/strong&gt; ç­‰ä½œä¸ºä¸€ä¸ªä¸“é¢˜å†™å†™âœ&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;1&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/zIjiaGEEKdYEMtm8j5FMx1CYXNE6BRlUVTcibxlVRLBSdiaIADWM32J3fdEePDaiaJLd5wicnOdiasJh71qxBLsIGmyQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;299&quot;/&gt;&lt;figcaption&gt;&lt;span/&gt;img&lt;/figcaption&gt;&lt;/figure&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>5281ffe94bdaf3c14bd5160adef2faf5</guid>
<title>è¿™ 2 ä¸ªå·¥ä½œæµè‡ªåŠ¨åŒ–å·¥å…·  yyds</title>
<link>https://toutiao.io/k/2beczyw</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;weui-dialog&quot;&gt;
      &lt;p class=&quot;weui-dialog__hd&quot;&gt;&lt;strong class=&quot;weui-dialog__title&quot;&gt;&quot;Top Stories&quot; is disabled&lt;/strong&gt;&lt;/p&gt;
      &lt;p class=&quot;weui-dialog__bd&quot;&gt;
        Enable &quot;Top Stories&quot; in &quot;Settings&quot; &amp;gt; &quot;General&quot; &amp;gt; &quot;Manage Discover&quot;      &lt;/p&gt;
      
    &lt;/div&gt;
  &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>cfd8d8040bc94e58eedeeb9c9bb7d42b</guid>
<title>ç³»ç»Ÿè®¾è®¡ä¹‹è·¯ï¼šå¦‚ä½•è®¾è®¡æœç´¢æç¤ºï¼ˆäºŒï¼‰</title>
<link>https://toutiao.io/k/an5g85n</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;p data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;span&gt;æ¥ç€Â &lt;/span&gt;&lt;span&gt;Part 1Â &lt;/span&gt;&lt;span&gt;çš„æ€è·¯ï¼Œæˆ‘ä»¬æ¥&lt;span&gt;ç»§ç»­&lt;/span&gt;å®Œå–„æœç´¢æç¤ºçš„è®¾è®¡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;4. &lt;/strong&gt;ç³»ç»Ÿå®¹é‡é¢„ä¼°&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;è¯·æ±‚æ•°ä¼°ç®—&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœå®¢æˆ·ç«¯æ²¡æœ‰å¯¹ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; åšç¼“å­˜å¤„ç†ï¼Œé‚£ä¹ˆç”¨æˆ·æ¯è¾“å…¥ä¸€ä¸ªå­—ç¬¦ï¼Œå®¢æˆ·ç«¯å°±ä¼šå‘æœåŠ¡å™¨å‘é€ä¸€æ¬¡æœç´¢æç¤ºçš„æŸ¥è¯¢è¯·æ±‚ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç”¨æˆ·åœ¨æœç´¢æ¡†ä¸­è¾“å…¥â€œ&lt;/span&gt;&lt;span&gt;ultraman&lt;/span&gt;&lt;span&gt;â€ ï¼Œæ¯è¾“å…¥ &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; ä¸ªå­—ç¬¦ï¼Œæµè§ˆå™¨å°±å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªæœç´¢æç¤ºè¯·æ±‚ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;514&quot; data-backw=&quot;578&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.8887122416534181&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/la8s6uvJibdQVAZQdQ3PEUiaB6iaGTHF7XuIibMH7C6S9xhjzweY7z6GnUI6JEgZibyvw9RhrS5jicPHQ28myHRjrWvg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;629&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;å›¾ 10&lt;/span&gt;&lt;span&gt;ï¼šæœç´¢Â &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;ultraman&quot;Â &lt;/span&gt;&lt;span&gt;è¿‡ç¨‹ä¸­å®é™…å‘å‡ºçš„è¯·æ±‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™æ ·ï¼Œæ ¹æ®å‡è®¾&lt;/span&gt;&lt;span&gt; II &lt;/span&gt;&lt;span&gt;å’Œ &lt;/span&gt;&lt;span&gt;III&lt;/span&gt;&lt;span&gt;ï¼ŒæŸ¥è¯¢ä¸€ä¸ªÂ &lt;span&gt;query&lt;/span&gt;ï¼Œå¹³å‡éœ€å‘æœåŠ¡å™¨å‘é€ï¼š&lt;/span&gt;&lt;em&gt;&lt;span&gt;&lt;span&gt;3&lt;/span&gt;Â &lt;/span&gt;&lt;/em&gt;&lt;span&gt;*&lt;/span&gt;&lt;em&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;Â =Â &lt;/span&gt;&lt;span&gt;15&lt;/span&gt;&lt;/em&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;æ¬¡æœç´¢è¯·æ±‚ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿›è€Œï¼Œæˆ‘ä»¬å¯ä»¥ä¼°ç®—å‡ºï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¹³å‡æ¯å¤©çš„è¯·æ±‚æ•°ä¸ºï¼š&lt;/span&gt;&lt;em&gt;&lt;span&gt;3Â &lt;/span&gt;&lt;span/&gt;&lt;/em&gt;&lt;span&gt;*&lt;/span&gt;&lt;em&gt;&lt;span&gt;Â 5Â Â &lt;/span&gt;&lt;/em&gt;&lt;span&gt;*&lt;/span&gt;&lt;em&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;100,000,000 &lt;/span&gt;&lt;span&gt;= &lt;/span&gt;&lt;span&gt;15&lt;/span&gt;&lt;/em&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;äº¿æ¬¡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;å¹³å‡æ¯ç§’çš„è¯·æ±‚æ•°ä¸ºï¼š&lt;em&gt;&lt;span&gt;1,500,000,000&lt;/span&gt;&lt;/em&gt;Â /Â &lt;/span&gt;&lt;em&gt;&lt;span&gt;(3600 * 24)Â &lt;/span&gt;&lt;/em&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;â‰…&lt;/span&gt;&lt;/em&gt;Â  &lt;/span&gt;&lt;em&gt;&lt;span&gt;1.7Â &lt;/span&gt;&lt;/em&gt;&lt;span&gt;ä¸‡æ¬¡ã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;å­˜å‚¨å®¹é‡ä¼°ç®—&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å…ˆæ¥ä¼°ç®—ä¸€ä¸‹ç£ç›˜ç©ºé—´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å‡è®¾æ¯å¤© &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;Â äº¿æ¬¡æŸ¥è¯¢ä¸­ï¼Œåªæœ‰Â &lt;/span&gt;&lt;span&gt;20%&lt;/span&gt;&lt;span&gt; çš„Â &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; æ˜¯å”¯ä¸€çš„ï¼Œå…¶ä»–çš„éƒ½æ˜¯é‡å¤æŸ¥è¯¢ã€‚å³ï¼Œæ¯å¤©å»é‡åçš„&lt;/span&gt; &lt;span&gt;query &lt;/span&gt;&lt;span&gt;æ•°é‡ä¸ºï¼šÂ &lt;/span&gt;&lt;em&gt;&lt;span&gt;100,000,000&lt;/span&gt;&lt;/em&gt;&lt;span&gt; * &lt;/span&gt;&lt;em&gt;&lt;span&gt;0.2&lt;/span&gt;&lt;/em&gt;&lt;span&gt;= &lt;/span&gt;&lt;em&gt;&lt;span&gt;20,&lt;/span&gt;&lt;/em&gt;&lt;em&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;000,000&lt;/span&gt;&lt;/em&gt;Â &lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸æ­¤åŒæ—¶ï¼Œæ¯å¤©ä¹Ÿä¼šäº§ç”Ÿä¸€äº›æ–°çš„Â &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;ã€‚å‡è®¾æ¯å¤©æ–°äº§ç”Ÿçš„æŸ¥è¯¢ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; å å½“å¤©å»é‡åçš„Â &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;Â æ•°é‡çš„Â &lt;/span&gt;&lt;span&gt;10%&lt;/span&gt;&lt;span&gt;ï¼Œå³ï¼š&lt;em&gt;&lt;span&gt;20,000,000&lt;/span&gt;&lt;/em&gt;Â &lt;em&gt;&lt;span&gt;* 0.1&lt;/span&gt;&lt;/em&gt;Â = &lt;em&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;2,000,000&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é‚£ä¹ˆï¼Œè¿™ &lt;/span&gt;&lt;span&gt;200&lt;/span&gt;&lt;span&gt; ä¸‡çš„æ–°å¢Â &lt;/span&gt;&lt;span&gt;queryÂ &lt;/span&gt;&lt;span&gt;éœ€å ç”¨ç£ç›˜ç©ºé—´ï¼šÂ &lt;em&gt;&lt;span&gt;2,&lt;/span&gt;&lt;/em&gt;&lt;em&gt;&lt;span&gt;&lt;em&gt;000,000&lt;/em&gt;&lt;/span&gt;&lt;/em&gt; * &lt;/span&gt;&lt;em&gt;&lt;span&gt;15 byte&lt;/span&gt;&lt;/em&gt;&lt;em&gt;&lt;span&gt;Â = 30Â M&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯æœˆæ–°å¢&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;queryÂ &lt;/span&gt;&lt;span&gt;éœ€å ç”¨ç£ç›˜ç©ºé—´&lt;/span&gt;ï¼šÂ &lt;/span&gt;&lt;em&gt;&lt;span&gt;30&lt;/span&gt;&lt;/em&gt;&lt;span&gt; * &lt;/span&gt;&lt;em&gt;&lt;span&gt;30&lt;/span&gt;&lt;/em&gt;&lt;span&gt;Â &lt;em&gt;&lt;span&gt;M&lt;/span&gt;&lt;/em&gt; = &lt;/span&gt;&lt;em&gt;&lt;span&gt;900 M&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯å¹´æ–°å¢&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;queryÂ &lt;/span&gt;&lt;span&gt;éœ€å ç”¨ç£ç›˜ç©ºé—´&lt;/span&gt;ï¼š&lt;em&gt;&lt;span&gt;365&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;em&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/em&gt;&lt;em&gt;&lt;span&gt;*Â &lt;em&gt;&lt;span&gt;30Â M&lt;/span&gt;&lt;/em&gt;Â &lt;/span&gt;&lt;/em&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;â‰…&lt;/span&gt;&lt;/em&gt;&lt;span&gt;Â &lt;/span&gt; &lt;/span&gt;&lt;em&gt;&lt;span&gt;11Â G&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;10&lt;/span&gt;&lt;span&gt;å¹´æ–°å¢&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;queryÂ &lt;/span&gt;&lt;span&gt;éœ€å ç”¨ç£ç›˜ç©ºé—´&lt;/span&gt;ï¼š&lt;em&gt;&lt;span&gt;10&lt;/span&gt;&lt;/em&gt; *Â &lt;em&gt;&lt;span&gt;365&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;em&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/em&gt;&lt;em&gt;&lt;span&gt;*Â &lt;em&gt;&lt;span&gt;30Â M&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/em&gt;&lt;em&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/em&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;â‰…&lt;/span&gt;&lt;/em&gt;Â  &lt;/span&gt;&lt;em&gt;&lt;span&gt;110 G&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™äº›åŸå§‹çš„Â &lt;span&gt;query&lt;/span&gt;&lt;span&gt;Â æ•°æ®ï¼Œé€šå¸¸ä»¥æ•°æ®åº“æˆ–æ–‡ä»¶çš„å½¢å¼å­˜å‚¨åœ¨ç£ç›˜ä¸­ã€‚æ‰€ä»¥ï¼Œè¦å­˜å‚¨è¿‘Â &lt;/span&gt;&lt;/span&gt;&lt;span&gt;10Â &lt;/span&gt;&lt;span&gt;å¹´çš„æ‰€æœ‰åŸå§‹&lt;/span&gt;&lt;span&gt; query &lt;/span&gt;&lt;span&gt;æ•°æ®ï¼Œé¢„è®¡éœ€è¦å‡ ç™¾ &lt;/span&gt;&lt;span&gt;G&lt;/span&gt;&lt;span&gt; çš„ç£ç›˜ç©ºé—´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬å†æ¥åˆ†æä¸€ä¸‹å†…å­˜å ç”¨æƒ…å†µã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å…ˆæ¥çœ‹ä¸€ä¸‹ä¸€ä¸ªÂ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt;Â æ ‘èŠ‚ç‚¹éœ€å ç”¨å¤šå°‘å†…å­˜ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æŒ‰ç…§ä¹‹å‰å¯¹Â &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt;Â æ ‘çš„å®šä¹‰ï¼š&lt;/span&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;cs&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;&lt;span class=&quot;code-snippet__keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;code-snippet__title&quot;&gt;Trie&lt;/span&gt; {&lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;Â Â Â Â &lt;span class=&quot;code-snippet__keyword&quot;&gt;private&lt;/span&gt;Â StringÂ prefix;Â Â Â Â Â Â Â Â Â Â &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-snippet__keyword&quot;&gt;float&lt;/span&gt; rank;             &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;Â Â Â Â &lt;span class=&quot;code-snippet__keyword&quot;&gt;private&lt;/span&gt;Â Queue&amp;lt;Trie&amp;gt;Â topKList;Â Â Â &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;    &lt;span class=&quot;code-snippet__keyword&quot;&gt;private&lt;/span&gt; List&amp;lt;Trie&amp;gt; childNodes;  &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;æ ¹æ®å‰æ–‡å¯¹å‰ç¼€é•¿åº¦&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;L = 20Â &lt;/span&gt;&lt;span&gt;çš„é™å®š&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;prefixÂ &lt;/span&gt;&lt;span&gt;æœ€å°‘å ç”¨ &lt;/span&gt;&lt;span&gt;1 byte&lt;/span&gt;&lt;span&gt;ï¼Œæœ€å¤šå ç”¨ &lt;/span&gt;&lt;span&gt;20 byte&lt;/span&gt;&lt;span&gt;ï¼Œæ’åºå€¼ &lt;/span&gt;&lt;span&gt;rank&lt;/span&gt;&lt;span&gt; å›ºå®šä¸º &lt;/span&gt;&lt;span&gt;4 byte&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;topKList&lt;/span&gt;&lt;span&gt; å­˜æ”¾ &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;span&gt; ä¸ª &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; èŠ‚ç‚¹çš„å¼•ç”¨ï¼Œå‡è®¾ &lt;/span&gt;&lt;span&gt;64&lt;/span&gt;&lt;span&gt; ä½æœºä¸Šå·²å¼€å¯æŒ‡é’ˆå‹ç¼©ï¼Œé‚£ä¹ˆä¼šå ç”¨ï¼š&lt;/span&gt;&lt;span&gt;10 Â * Â 4 = 40 byte&lt;/span&gt;&lt;span&gt;ï¼Œè‹±æ–‡ç¯å¢ƒä¸‹ï¼Œ&lt;/span&gt;&lt;span&gt;childNodes&lt;/span&gt;&lt;span&gt; æœ€å¤šæœ‰ &lt;/span&gt;&lt;span&gt;26&lt;/span&gt;&lt;span&gt; ä¸ªå­èŠ‚ç‚¹ï¼Œæœ€å¤šéœ€å ç”¨ï¼š&lt;/span&gt;&lt;span&gt;26 * 4 = 104 byte&lt;/span&gt;&lt;span&gt;ã€‚&lt;span&gt;å¼€å¯æŒ‡é’ˆå‹ç¼©&lt;/span&gt;çš„æƒ…å†µä¸‹ï¼Œ&lt;/span&gt;&lt;span&gt;Java&lt;/span&gt;&lt;span&gt; å¯¹è±¡å¤´å ç”¨ &lt;/span&gt;&lt;span&gt;12 byte&lt;/span&gt;&lt;span&gt;ï¼Œæ‰€ä»¥ä¸€ä¸ª &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘èŠ‚ç‚¹æœ€å¤šå ç”¨ï¼š&lt;/span&gt;&lt;span&gt;20Â byte +Â 4 byte + 40Â byte + 104 byte + 12 byteÂ = 180Â byte&lt;/span&gt;&lt;span&gt;ï¼Œè€ƒè™‘å†…å­˜åœ°å€çš„å­—èŠ‚å¯¹é½ï¼Œä¸€ä¸ª &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘èŠ‚ç‚¹çº¦éœ€å ç”¨ &lt;/span&gt;&lt;span&gt;184Â byte&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦è€ƒè™‘æŠŠå“ªäº›Â &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; æ”¾å…¥ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ã€‚ç”±äºæ¯ä¸ªäººè¾“å…¥çš„æœç´¢å…³é”®è¯åƒå·®ä¸‡åˆ«ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†çš„Â &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; å…¶å®æ˜¯å¾ˆä½é¢‘çš„ï¼Œç”šè‡³æ˜¯æ²¡æœ‰è¯­ä¹‰çš„ï¼Œæˆ‘ä»¬æ²¡æœ‰å¿…è¦æŠŠè¿™éƒ¨åˆ† &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; æ”¾å…¥å†…å­˜ã€‚ä¸ºäº†è¾¾åˆ°è¿™ä¸ªè¿‡æ»¤æ•ˆæœï¼Œå¯ä»¥ç»™æ¯ä¸€ä¸ª &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; è®¡ç®—ä¸€ä¸ª &lt;/span&gt;&lt;span&gt;rank&lt;/span&gt;&lt;span&gt; å€¼ï¼Œ&lt;/span&gt;&lt;span&gt;rank&lt;/span&gt;&lt;span&gt; å€¼å—æœç´¢æ¬¡æ•°å’Œæ—¶é—´çš„å½±å“ï¼Œå…·ä½“è®¡ç®—è§ä¸‹æ–‡Â &lt;strong&gt;&quot;&lt;/strong&gt;&lt;strong&gt;æ•°æ®æœé›†æœåŠ¡&quot;Â &lt;/strong&gt;å°èŠ‚ã€‚è®¡ç®—å‡ºÂ &lt;span&gt;rank&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;å€¼åï¼Œåªæœ‰&lt;/span&gt;&lt;span&gt;Â rank&lt;/span&gt;&lt;span&gt; å€¼è¶…è¿‡é˜ˆå€¼çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; æ‰èƒ½è¿›å…¥å†…å­˜ã€‚æˆ‘ä»¬å‡è®¾æ¯å¤©æœ‰ &lt;/span&gt;&lt;span&gt;20 %&lt;/span&gt;&lt;span&gt; çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;Â èƒ½ç¬¦åˆè¦æ±‚ï¼Œé‚£ä¹ˆæ¯å¤©æ–°å¢çš„ &lt;/span&gt;&lt;span&gt;200&lt;/span&gt;&lt;span&gt; ä¸‡ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;ï¼Œè¿‡æ»¤åå¯ä»¥æ”¾å…¥Â &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘çš„åªæœ‰ &lt;/span&gt;&lt;span&gt;40Â &lt;/span&gt;&lt;span&gt;ä¸‡ï¼Œå³ï¼š&lt;em&gt;&lt;span&gt;&lt;em&gt;2,000,000&lt;/em&gt;&lt;/span&gt;&lt;/em&gt; * &lt;/span&gt;&lt;span&gt;0.2&lt;/span&gt;&lt;span&gt;Â =Â &lt;em&gt;&lt;span&gt;&lt;em&gt;400,000&lt;/em&gt;&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å‡è®¾å­˜å‚¨Â &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; ä¸ª &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;Â å¹³å‡éœ€è¦åˆ›å»ºÂ &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;span&gt; ä¸ª &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt;Â èŠ‚ç‚¹ï¼Œé‚£ä¹ˆ &lt;/span&gt;&lt;span&gt;40&lt;/span&gt;&lt;span&gt; ä¸‡ä¸ªÂ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;Â å…±ä¼šç”ŸæˆÂ &lt;span&gt;400&lt;/span&gt;&lt;span&gt;Â ä¸‡ä¸ªÂ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt;Â æ ‘èŠ‚ç‚¹&lt;/span&gt;ï¼Œå³ï¼šÂ &lt;em&gt;&lt;span&gt;&lt;em&gt;400,000Â *Â 10 =Â 4&lt;em&gt;&lt;span&gt;,&lt;/span&gt;&lt;/em&gt;&lt;em&gt;&lt;span&gt;&lt;em&gt;000,000&lt;/em&gt;&lt;/span&gt;&lt;/em&gt;&lt;/em&gt;&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç”±äºç›¸åŒå‰ç¼€çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; å¯ä»¥å…±äº«ç›¸åŒçš„ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘èŠ‚ç‚¹ï¼Œåœ¨è‹±æ–‡ç¯å¢ƒä¸‹ï¼Œæˆ‘ä»¬å‡è®¾æœ‰ &lt;/span&gt;&lt;span&gt;30 %&lt;/span&gt;&lt;span&gt; çš„ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt;&lt;span&gt; èŠ‚ç‚¹æ˜¯å¯ä»¥å…±äº«çš„ï¼Œé‚£ä¹ˆæœ€ç»ˆéœ€åˆ›å»ºçš„ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; èŠ‚ç‚¹çš„ä¸ªæ•°ä¸ºï¼š&lt;em&gt;&lt;span&gt;4,&lt;/span&gt;&lt;/em&gt;&lt;em&gt;&lt;span&gt;&lt;em&gt;000,000Â *Â &lt;/em&gt;&lt;/span&gt;&lt;/em&gt;Â &lt;em&gt;&lt;span&gt;&lt;em&gt;0.7Â = 2,Â &lt;/em&gt;&lt;/span&gt;&lt;/em&gt;&lt;em&gt;&lt;span&gt;&lt;em&gt;800, 000&lt;/em&gt;&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ‰€ä»¥ï¼Œæ¯å¤©æ–°å¢çš„ &lt;/span&gt;&lt;span&gt;200&lt;/span&gt;&lt;span&gt; ä¸‡ &lt;/span&gt;&lt;span&gt;queryÂ &lt;/span&gt;&lt;span&gt;ç»è¿‡ä¸€ç³»åˆ—å¤„ç†åï¼Œå…±éœ€å ç”¨å†…å­˜ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;&lt;em&gt;2, 800, 000 *Â 184Â byte = 515, 200,000&lt;/em&gt;&lt;/span&gt;&lt;/em&gt;&lt;/span&gt; çº¦ä¸º &lt;/span&gt;&lt;span&gt;500&lt;/span&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;&lt;em&gt;Â &lt;/em&gt;M&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è™½ç„¶è‹±æ–‡å•è¯çš„æ•°é‡æ˜¯æœ‰é™çš„ï¼Œå¸¸ç”¨çš„è‹±æ–‡å•è¯åœ¨ &lt;/span&gt;&lt;span&gt;3000~5000&lt;/span&gt;&lt;span&gt; ä¸ªå·¦å³ï¼Œä½† &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; å´å¯ä»¥ç”±ä¸åŒçš„å•è¯ç»„æˆï¼Œæ‰€ä»¥ç†è®ºä¸Š &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; çš„æ•°é‡æ˜¯æ²¡æœ‰ä¸Šé™çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™æ ·ï¼Œæ¯å¤©æ–°å¢çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; éœ€å ç”¨Â &lt;span&gt;500&lt;/span&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;&lt;em&gt;Â &lt;/em&gt;&lt;/span&gt;&lt;/em&gt;&lt;span&gt;M&lt;/span&gt;&lt;em&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/em&gt;&lt;/span&gt;å†…å­˜ï¼Œ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯æœˆ&lt;span&gt;æ–°å¢çš„Â &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;Â éœ€&lt;/span&gt;å ç”¨å†…å­˜ï¼š&lt;/span&gt;&lt;em&gt;&lt;span&gt;30&lt;/span&gt;&lt;/em&gt;&lt;span&gt;Â *Â &lt;/span&gt;&lt;em&gt;&lt;span&gt;500&lt;/span&gt;&lt;/em&gt;&lt;span&gt;Â &lt;em&gt;&lt;span&gt;M&lt;/span&gt;&lt;/em&gt;Â &lt;em&gt;&lt;span&gt;â‰…&lt;/span&gt;&lt;/em&gt;Â Â &lt;/span&gt;&lt;em&gt;&lt;span&gt;15 G&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯å¹´&lt;span&gt;æ–°å¢çš„Â &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;Â éœ€&lt;/span&gt;å ç”¨å†…å­˜ï¼š&lt;em&gt;&lt;span&gt;365&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;em&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/em&gt;&lt;em&gt;&lt;span&gt;*Â &lt;em&gt;&lt;span&gt;500Â M&lt;/span&gt;&lt;/em&gt;Â &lt;/span&gt;&lt;/em&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;â‰…&lt;/span&gt;&lt;/em&gt;Â Â &lt;/span&gt;&lt;em&gt;&lt;span&gt;180Â G&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;10&lt;/span&gt;&lt;span&gt;å¹´&lt;span&gt;æ–°å¢çš„Â &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;Â éœ€&lt;/span&gt;å ç”¨å†…å­˜ï¼š&lt;em&gt;&lt;span&gt;10&lt;/span&gt;&lt;/em&gt;Â *Â &lt;em&gt;&lt;span&gt;365&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;em&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/em&gt;&lt;em&gt;&lt;span&gt;*Â &lt;em&gt;&lt;span&gt;500Â M&lt;/span&gt;&lt;/em&gt;&lt;/span&gt;&lt;/em&gt;&lt;em&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/em&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;â‰…&lt;/span&gt;&lt;/em&gt;Â Â &lt;/span&gt;&lt;em&gt;&lt;span&gt;1.8Â P&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;5.Â &lt;/strong&gt;&lt;strong&gt;Trie&lt;/strong&gt;Â æ ‘çš„æ‰©å®¹ç­–ç•¥&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬éƒ½æ˜¯å‡è®¾ç»è¿‡å¤„ç†å&lt;span&gt;Â &lt;/span&gt;&lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;&lt;span&gt; éƒ½èƒ½å­˜å‚¨åœ¨åŒ&lt;/span&gt;ä¸€æ£µ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ä¸­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä½†æ˜¯ï¼Œç»è¿‡ä¸Šè¿°çš„åˆ†æï¼Œå½“ç³»ç»Ÿè¾¾åˆ°æ¯å¤©éœ€å¤„ç† &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; äº¿æ¬¡æœç´¢è¯·æ±‚çš„æ—¶å€™ï¼Œå³ä½¿å•å°å†…å­˜æ˜¯Â &lt;/span&gt;&lt;span&gt;64 G&lt;/span&gt;&lt;span&gt; çš„æœåŠ¡å™¨ï¼Œå·®ä¸å¤šæ’‘ä¸ª &lt;/span&gt;&lt;span&gt;4 &lt;/span&gt;&lt;span&gt;ä¸ªæœˆä¹Ÿå¿«çˆ†äº†ã€‚è¿™æ—¶å¦‚æœå†å»ç»§ç»­å‡çº§æœåŠ¡å™¨å†…å­˜ï¼Œæ¥ä½œå‚ç›´æ‰©å®¹å·²ç»ä¸ç°å®äº†ã€‚è€ƒè™‘åˆ°ç³»ç»Ÿæ•´ä½“çš„å¯æ‰©å±•æ€§ã€å¯ç”¨æ€§ä»¥åŠé«˜ååèƒ½åŠ›ï¼Œæˆ‘ä»¬éœ€è¦é‡‡ç”¨æ°´å¹³æ‰©å®¹çš„æ–¹æ¡ˆã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é‚£ä¹ˆï¼Œæ¥ä¸‹æ¥çš„é—®é¢˜å°±æ˜¯ï¼Œå®šæœŸé‡å»º &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘çš„æ—¶å€™ï¼Œæ€ä¹ˆå¯¹ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; åšåˆ†åŒº&lt;/span&gt;&lt;span&gt;(sharding)&lt;/span&gt;&lt;span&gt;ï¼ŒæŠŠæ•°æ®æ‰“æ•£åï¼Œå°½é‡å‡åŒ€åœ°åˆ†å¸ƒåˆ°æ¯å°æœåŠ¡å™¨ï¼Œæœ€ç»ˆå¯ä»¥åœ¨æ¯å°æœåŠ¡å™¨ä¸Šåˆ†åˆ«å»ºç«‹å¤§å°åˆé€‚çš„Â &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å‡ ç§å¸¸ç”¨çš„ &lt;/span&gt;&lt;span&gt;sharding&lt;/span&gt;&lt;span&gt; ç­–ç•¥ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;sharding&lt;/span&gt;&lt;/strong&gt;&lt;span&gt; ç­–ç•¥Â &lt;/span&gt;&lt;strong&gt;&lt;span&gt;1&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šÂ æŒ‰å­—æ¯åºåš &lt;/span&gt;&lt;span&gt;sharding&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¾‹å¦‚ï¼Œæ‰€æœ‰ä»¥å­—æ¯ &lt;span&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;a&quot;&lt;/span&gt;&lt;span&gt;Â å¼€å¤´çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; å»ºä¸€æ£µ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘Â &lt;/span&gt;&lt;span&gt;A&lt;/span&gt;&lt;span&gt;ï¼Œè¿™æ ·æ‰€æœ‰ä»¥ &lt;/span&gt;&lt;span&gt;&quot;a&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Â å¼€å¤´çš„æŸ¥è¯¢è¯·æ±‚ï¼Œéƒ½ä¼šè·¯ç”±åˆ°æ ‘ &lt;/span&gt;&lt;span&gt;A&lt;/span&gt;&lt;span&gt; æ‰€åœ¨çš„æœåŠ¡å™¨ã€‚æ‰€æœ‰ä»¥å­—æ¯ &lt;/span&gt;&lt;span&gt;&quot;b&quot;&lt;/span&gt;&lt;span&gt; å¼€å¤´çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; å»ºä¸€æ£µ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ &lt;/span&gt;&lt;span&gt;B&lt;/span&gt;&lt;span&gt;ï¼Œ è¿™æ ·æ‰€æœ‰ä»¥ &lt;/span&gt;&lt;span&gt;&quot;b&quot;&lt;/span&gt;&lt;span&gt; å¼€å¤´çš„æŸ¥è¯¢è¯·æ±‚ï¼Œéƒ½ä¼šè·¯ç”±åˆ°æ ‘ &lt;/span&gt;&lt;span&gt;B&lt;/span&gt;&lt;span&gt; æ‰€åœ¨çš„æœåŠ¡å™¨ã€‚ä»¥æ­¤ç±»æ¨ï¼Œå…±åˆ›å»º &lt;/span&gt;&lt;span&gt;26&lt;/span&gt;&lt;span&gt; æ£µ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™ç§ç­–ç•¥å¾ˆç®€å•ï¼Œä¹Ÿå¾ˆç²—æš´ã€‚ä½†é€šå¸¸ä¹Ÿèƒ½è§£å†³&lt;span&gt;çŸ­æœŸå†…çš„&lt;/span&gt;é—®é¢˜ã€‚ç®€å•ç²—æš´å¸¦æ¥çš„ä¸»è¦é—®é¢˜æ˜¯ï¼šå¯èƒ½å¯¼è‡´æœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®å’Œè´Ÿè½½ä¸å¹³è¡¡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;I. æ•°æ®ä¸å¹³è¡¡ï¼šæ‰€æœ‰ä»¥å­—æ¯ &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;a&quot;Â &lt;/span&gt;å¼€å¤´çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; ä¼šæ”¾åœ¨ä¸€ä¸ªåˆ†åŒºä¸­ï¼Œ&lt;span&gt;ä»¥å­—æ¯Â &lt;span&gt;&quot;z&quot;Â &lt;/span&gt;å¼€å¤´çš„Â &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;Â æ”¾åœ¨å…¶ä»–åˆ†åŒºä¸­&lt;/span&gt;ã€‚&lt;span&gt;ç»è¿‡ç»Ÿè®¡åï¼Œå¯èƒ½ä¼šå‘ç°&lt;/span&gt;ä»¥Â &lt;span&gt;&quot;a&quot;&lt;/span&gt; å¼€å¤´çš„Â &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;Â è¿œå¤šäº&lt;span&gt;ä»¥ &lt;span&gt;&quot;z&quot;Â &lt;/span&gt;å¼€å¤´çš„Â &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;ï¼Œå¯¼è‡´ä¸åŒæœåŠ¡å™¨çš„å†…å­˜ä½¿ç”¨ç‡å¾ˆä¸ä¸€è‡´ï¼Œæœ‰çš„å†…å­˜å ç”¨è¿‡å¤šï¼Œæœ‰çš„æ¥è¿‘é—²ç½®ã€‚ç”šè‡³æœ‰å¯èƒ½å­˜æ”¾Â &lt;span&gt;&lt;span&gt;&quot;a&quot;Â &lt;/span&gt;å¼€å¤´çš„Â &lt;/span&gt;&lt;span&gt;query &lt;/span&gt;å¤ªå¤šï¼Œå¤šåˆ°æŠŠæœåŠ¡å™¨çš„å†…å­˜æ’‘çˆ†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;II. è´Ÿè½½ä¸å¹³è¡¡ï¼š&lt;span&gt;å¯èƒ½&lt;/span&gt;è®¸å¤šç”¨æˆ·çš„æŸ¥è¯¢å…³é”®è¯ä»¥ &lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;w&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt; å¼€å¤´ï¼Œä½†å¾ˆå°‘ä»¥ &lt;/span&gt;&lt;span&gt;&quot;z&quot;&lt;/span&gt;&lt;span&gt; å¼€å¤´ã€‚è¿™æ ·ä¼šå¯¼è‡´å­˜æ”¾Â &lt;/span&gt;&lt;span&gt;&quot;z&quot;&lt;/span&gt;&lt;span&gt; å¼€å¤´ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;çš„æœåŠ¡å™¨å¾ˆé—²ï¼Œè€Œ&lt;/span&gt;&lt;span&gt;å­˜æ”¾Â &lt;/span&gt;&lt;span&gt;&quot;w&quot;&lt;/span&gt;&lt;span&gt; å¼€å¤´ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;Â çš„æœåŠ¡å™¨&lt;/span&gt;&lt;span&gt;è´Ÿè½½å´å¾ˆé«˜ã€‚è´Ÿè½½é«˜çš„æœåŠ¡å™¨å¾ˆå¯èƒ½ä¼šå®•æœºï¼Œä¸”é‡å¯åå¾ˆå¯èƒ½ä¼šå†æ¬¡å®•æœºã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;sharding&lt;/span&gt;&lt;/strong&gt;&lt;span&gt; ç­–ç•¥Â &lt;/span&gt;&lt;strong&gt;&lt;span&gt;2&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šÂ æŒ‰å•æœºå†…å­˜å®¹é‡åš &lt;/span&gt;&lt;span&gt;sharding&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™ç§ç­–ç•¥ä¸‹ï¼Œåœ¨é‡å»º &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘çš„æ—¶å€™ä¼šæ ¹æ®å•å°æœåŠ¡å™¨çš„æœ€å¤§å†…å­˜å®¹é‡æ¥åš &lt;/span&gt;&lt;span&gt;sharding&lt;/span&gt;&lt;span&gt;ã€‚å½“ç„¶ï¼Œä¹Ÿä¸èƒ½æŠŠå…¨éƒ¨å†…å­˜ç”¨æ¥å»º &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ï¼Œè¿™é‡Œçš„ &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;æœ€å¤§å†…å­˜&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Â &lt;span&gt;å¯ä»¥å®šä¹‰&lt;/span&gt;ä¸ºå®é™…æœ€å¤§ç‰©ç†å†…å­˜çš„ &lt;/span&gt;&lt;span&gt;80%&lt;/span&gt;&lt;span&gt;ã€‚åªè¦æœåŠ¡å™¨å ç”¨çš„å†…å­˜è¿˜æ²¡è¾¾åˆ° &lt;span&gt;&quot;&lt;/span&gt;æœ€å¤§å†…å­˜&lt;span&gt;&quot;&lt;/span&gt;ï¼Œå°±å¯ä»¥ç»§ç»­æ–°å¢ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘èŠ‚ç‚¹æ¥å­˜æ”¾ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;ã€‚å½“&lt;span&gt;æœåŠ¡å™¨çš„&lt;/span&gt;å¯ç”¨å†…å­˜åˆ°è¾¾é˜ˆå€¼ï¼Œå°±åœæ­¢æ–°å¢ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘&lt;span&gt;èŠ‚ç‚¹&lt;/span&gt;ï¼Œç„¶ååœ¨ä¸‹ä¸€å°æœåŠ¡å™¨ä¸Šå¯¹åç»­çš„Â &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; ç»§ç»­æ„å»º &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ï¼Œé‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´è‡³å¤„ç†å®Œæ‰€æœ‰çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸¾ä¸ªä¾‹å­ï¼šå‡è®¾ç¬¬ &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; å°æœåŠ¡å™¨ä¸­çš„ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘å­˜å‚¨äº†å‰ç¼€ä»Â &lt;/span&gt;&lt;span&gt;&quot;a&quot;&lt;/span&gt;&lt;span&gt; åˆ° &lt;/span&gt;&lt;span&gt;&quot;bas&quot;&lt;/span&gt;&lt;span&gt; çš„æ‰€æœ‰ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;ï¼Œé‚£ä¹ˆç¬¬&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt;&lt;span&gt; å°æœåŠ¡å™¨çš„ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘å°±å­˜å‚¨å‰ç¼€ä»Â &lt;/span&gt;&lt;span&gt;&quot;bat&quot;&lt;/span&gt;&lt;span&gt;Â å¼€å§‹çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;&quot;bat&quot; &lt;/span&gt;&lt;span&gt;å¼€å¤´çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; å­˜å®Œäº†å°±æ¥ç€å­˜ &lt;/span&gt;&lt;span&gt;&quot;bau&quot;&lt;/span&gt;&lt;span&gt;Â å¼€å¤´çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;ã€‚å‡è®¾ç¬¬ &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; å°æœåŠ¡å™¨æœ€å¤šå¯ä»¥å­˜å®Œä»¥&lt;/span&gt;&lt;span&gt; &quot;faang&quot;Â &lt;/span&gt;&lt;span&gt;ä¸ºå‰ç¼€çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;ï¼Œå³ç¬¬ &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; å°æœåŠ¡å™¨å­˜å‚¨çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; çš„å‰ç¼€èŒƒå›´ä¸ºï¼š&lt;/span&gt;&lt;span&gt;&quot;bat&quot;&lt;/span&gt;&lt;span&gt;Â ~Â &lt;/span&gt;&lt;span&gt;&quot;faang&quot;&lt;/span&gt;&lt;span&gt;ã€‚é‚£ä¹ˆï¼Œç¬¬ &lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt; å°æœåŠ¡å™¨å°±å­˜æ”¾ä»¥&lt;/span&gt;&lt;span&gt; &quot;fab&quot;&lt;/span&gt;&lt;span&gt;Â ä¸ºå‰ç¼€çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;ï¼Œå‡è®¾èƒ½å­˜å®Œä»¥&lt;/span&gt;&lt;span&gt; &quot;oj&quot;&lt;/span&gt;&lt;span&gt; å¼€å¤´çš„Â &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;ã€‚å‰©ä½™å…¶ä»–çš„æœåŠ¡å™¨ï¼ŒæŒ‰ç…§è¿™ä¸ªè§„å¾‹ç±»æ¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å‡è®¾å½“å‰çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; å¯ä»¥å…¨éƒ¨æ”¾åœ¨ &lt;/span&gt;&lt;span&gt;4 &lt;/span&gt;&lt;span&gt;å°æœåŠ¡å™¨ä¸Šã€‚ä¸‹è¡¨å±•ç¤ºäº†å„æœåŠ¡å™¨ä¸ŠÂ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; &lt;span&gt;çš„&lt;span&gt;å‰ç¼€&lt;/span&gt;&lt;/span&gt;åˆ†å¸ƒæƒ…å†µã€‚&lt;/span&gt;&lt;/p&gt;&lt;table interlaced=&quot;enabled&quot;&gt;&lt;tbody&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;æœåŠ¡å™¨å&lt;span&gt;â€&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;å‰ç¼€å­—ç¬¦èµ·æ­¢èŒƒå›´&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;Server 1&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;&quot;a&quot;Â  Â  ~ &quot;bas&quot;&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;Server 2&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;&quot;bat&quot; ~ &quot;faang&quot;&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;p&gt;&lt;span&gt;Server 3&lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;&quot;fab&quot; ~ &lt;span&gt;&quot;oj&quot;&lt;/span&gt;&lt;span&gt;â€&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;Server 4&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;&quot;ok&quot;&lt;/span&gt; &lt;span&gt;Â ~&lt;/span&gt; &quot;&lt;span&gt;zu&lt;/span&gt;&quot;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;span&gt;è¡¨ 3&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;æœåŠ¡å™¨ä¸å‰ç¼€èŒƒå›´ä¹‹é—´çš„æ˜ å°„å…³ç³»ç¡®å®šä¹‹åï¼Œ&lt;/span&gt;æˆ‘ä»¬è¿˜éœ€æŠŠå®ƒå­˜å‚¨èµ·æ¥ã€‚è¿™æ ·ï¼Œå½“ç”¨æˆ·è¾“å…¥å…³é”®è¯æŸ¥è¯¢æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ ¹æ®å‰ç¼€èŒƒå›´ï¼Œå°†è¯·æ±‚è½¬å‘åˆ°è¯¥å‰ç¼€æ‰€åœ¨çš„ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘æœåŠ¡å™¨ä¸Šã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸€æ¬¡æ–°çš„ç”¨æˆ·æœç´¢è¯·æ±‚ï¼Œå¯èƒ½éœ€è¦è·¨å¤šå°æœåŠ¡å™¨æŸ¥è¯¢ï¼Œå†å¯¹å¤šå°æœåŠ¡å™¨è¿”å›çš„ç»“æœåš &lt;/span&gt;&lt;span&gt;merge&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯”å¦‚ï¼Œå¦‚æœç”¨æˆ·è¾“å…¥&lt;/span&gt;&lt;span&gt;&quot;b&quot;&lt;/span&gt;&lt;span&gt;ï¼Œæ ¹æ®å‰ç¼€å’Œåˆ†ç‰‡çš„æ˜ å°„å…³ç³»ï¼Œå°±ä¼šå»&lt;span&gt;åˆ†åˆ«è¯·æ±‚&lt;/span&gt;Â &lt;span&gt;Server 1 (&lt;/span&gt;å‰ç¼€èŒƒå›´ï¼š&lt;span&gt;&quot;a&quot; ~ &quot;bas&quot;)Â &lt;/span&gt;å’ŒÂ &lt;span&gt;Server 2&lt;/span&gt;Â (å‰ç¼€èŒƒå›´ï¼š&lt;/span&gt;&lt;span&gt;&quot;bat&quot;Â ~ &quot;faang&quot;&lt;/span&gt;&lt;span&gt;)ï¼Œæœ€åå°†ç»“æœåš &lt;/span&gt;&lt;span&gt;merge&lt;/span&gt;&lt;span&gt;ï¼Œå¹¶&lt;span&gt;æŒ‰ &lt;/span&gt;&lt;/span&gt;&lt;span&gt;rank&lt;/span&gt;&lt;span&gt;&lt;span&gt;Â å€¼æ’åº&lt;/span&gt;ï¼Œæœ€åè¿”å› &lt;/span&gt;&lt;span&gt;Top K&lt;/span&gt;&lt;span&gt; ä¸ªç»“æœã€‚æ¥ç€ï¼Œå¦‚æœç”¨æˆ·ç»§ç»­è¾“å…¥&lt;/span&gt;&lt;span&gt;&quot;e&quot;&lt;/span&gt;&lt;span&gt;ï¼Œè¿™æ—¶å‰ç¼€ä¸º &lt;span&gt;&quot;be&quot;&lt;/span&gt;ï¼Œåªéœ€å‘Â &lt;span&gt;ServerÂ 2 &lt;/span&gt;&lt;/span&gt;&lt;span&gt;å‘é€è¯·æ±‚&lt;/span&gt;&lt;span&gt;å°±å¯ä»¥äº†ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç­–ç•¥ &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; èƒ½æœ‰æ•ˆåœ°å°†æ•°æ®è¿›è¡Œåˆ†ç‰‡ï¼Œæ„å»ºèµ·å¤§å°é€‚åˆçš„ &lt;/span&gt;&lt;span&gt;Trie &lt;/span&gt;&lt;span&gt;æ ‘ï¼Œè§£å†³äº†ç­–ç•¥ &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; ä¸­æ•°æ®ä¸å¹³è¡¡çš„é—®é¢˜ã€‚ç¼ºç‚¹æ˜¯ï¼šä»ç„¶æœ‰å¯èƒ½å¯¼è‡´è´Ÿè½½ä¸å¹³è¡¡ã€‚ä¸€äº›çƒ­æœè¯æ‰€åœ¨çš„æœåŠ¡å™¨ï¼Œå…¶è´Ÿè½½è¦é«˜äºå†·é—¨è¯æ‰€åœ¨çš„æœåŠ¡å™¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;sharding&lt;/span&gt;&lt;/strong&gt;&lt;span&gt; ç­–ç•¥Â &lt;/span&gt;&lt;strong&gt;&lt;span&gt;3&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šæŒ‰ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; çš„ &lt;/span&gt;&lt;span&gt;hash&lt;/span&gt;&lt;span&gt; å€¼åš &lt;/span&gt;&lt;span&gt;sharding&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™ç§ç­–ç•¥ä¸‹ï¼Œéœ€è¦å¯¹æ¯ä¸ª &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; è®¡ç®— &lt;/span&gt;&lt;span&gt;hash&lt;/span&gt;&lt;span&gt;ï¼Œç„¶åæ ¹æ® &lt;/span&gt;&lt;span&gt;hash&lt;/span&gt;&lt;span&gt; å€¼ï¼Œå°† &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; åˆ†é…åˆ°å¯¹åº”çš„æœåŠ¡å™¨ã€‚ä¸ºå‡å°æ–°å¢å’Œåˆ é™¤æœåŠ¡å™¨èŠ‚ç‚¹å¼•èµ·çš„å¤§èŒƒå›´ &lt;/span&gt;&lt;span&gt;rehash&lt;/span&gt;&lt;span&gt;ï¼Œå¯ä»¥å¼•å…¥ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•ã€‚è¿™æ ·ï¼Œ&lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;Â å¯ä»¥&lt;span&gt;æŒ‰å…¶&lt;/span&gt;Â &lt;/span&gt;&lt;span&gt;hash&lt;/span&gt;&lt;span&gt; å€¼å‡åŒ€åˆ†å¸ƒåˆ°å„ä¸ªåˆ†ç‰‡ï¼Œå„åˆ†ç‰‡æ‰€åœ¨æœåŠ¡å™¨çš„è´Ÿè½½å°±ä¼šç›¸å¯¹å‡è¡¡ä¸€äº›ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æŒ‰&lt;/span&gt;&lt;span&gt; hash&lt;/span&gt;&lt;span&gt; å€¼è¿›è¡Œåˆ†ç‰‡ï¼Œå³ä½¿ä¸¤ä¸ª &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; æœ‰ç›¸åŒçš„å‰ç¼€ï¼Œåªè¦åç¼€å­—ç¬¦ä¸ä¸€æ ·ï¼Œå®ƒä»¬å¯¹åº”çš„&lt;/span&gt;&lt;span&gt; hash &lt;/span&gt;&lt;span&gt;å€¼å°±ä¼šä¸ä¸€æ ·ã€‚æ¯”å¦‚ï¼š&lt;/span&gt;&lt;span&gt;&quot;cat&quot;&lt;/span&gt;&lt;span&gt;Â å’Œ &lt;/span&gt;&lt;span&gt;&quot;cap&quot;&lt;/span&gt;&lt;span&gt;ï¼Œè™½ç„¶æœ‰ç›¸åŒçš„å‰ç¼€ &lt;/span&gt;&lt;span&gt;&quot;ca&quot;&lt;/span&gt;&lt;span&gt;ï¼Œä½†æ˜¯ &lt;/span&gt;&lt;span&gt;hash&lt;/span&gt;&lt;span&gt; å€¼ä¸ä¸€æ ·ï¼Œè¿™ä¸¤ä¸ª &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; å°±ä¼šè¢«åˆ†é…åˆ°ä¸åŒçš„åˆ†ç‰‡ã€‚è¿™ç§ç­–ç•¥èƒ½è®©å„ä¸ªåˆ†ç‰‡ä¸Šçš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; æ•°æ®çš„åŸºæœ¬éƒ½æ˜¯å‡åŒ€åˆ†å¸ƒçš„ï¼Œå„åˆ†ç‰‡çš„è¯·æ±‚è´Ÿè½½ä¹Ÿæ˜¯å‡è¡¡çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;But&lt;/span&gt;&lt;span&gt;ï¼Œç­–ç•¥&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt;&lt;span&gt; æœ€ä¸»è¦çš„é—®é¢˜çš„æ˜¯ï¼šæ²¡æœ‰äº†ç±»ä¼¼ç­–ç•¥ &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; ä¸­å‰ç¼€å’Œåˆ†ç‰‡ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œæ¯æ¬¡æ–°çš„æŸ¥è¯¢éƒ½éœ€è¯·æ±‚æ‰€æœ‰çš„åˆ†ç‰‡ï¼Œç„¶åå¯¹ç»“æœè¿›è¡Œ &lt;/span&gt;&lt;span&gt;merge&lt;/span&gt;&lt;span&gt;ï¼Œå†æ’åºï¼Œæœ€åæ‰èƒ½è¿”å› &lt;/span&gt;&lt;span&gt;Top K&lt;/span&gt;&lt;span&gt; çš„ç»“æœã€‚æ³¨æ„ï¼Œè¿™é‡Œæ˜¯æŸ¥è¯¢&lt;span&gt;æ‰€æœ‰çš„&lt;/span&gt;&lt;/span&gt;&lt;span&gt;åˆ†ç‰‡&lt;/span&gt;&lt;span&gt;ï¼Œè€Œä¸æ˜¯åƒç­–ç•¥Â &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; é‚£æ ·ï¼Œåªéœ€æŸ¥è¯¢å•å°æˆ–å‡ å°æœåŠ¡å™¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä»ä¸Šè¿° &lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt; ç§ &lt;/span&gt;&lt;span&gt;sharding&lt;/span&gt;&lt;span&gt; ç­–ç•¥ä¸­ï¼ŒåŸºäºå¯æ‰©å±•æ€§ã€è´Ÿè½½å‡è¡¡ã€é¦–æ¬¡æŸ¥è¯¢è€—æ—¶ç­‰æ–¹é¢çš„ç»¼åˆè€ƒè™‘ï¼Œ&lt;span&gt;ç­–ç•¥&lt;/span&gt; &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; ç›¸å¯¹å¥½ä¸€äº›ã€‚ä½†æ˜¯å¦‚æœåç»­ç”¨æˆ·çš„æŸ¥è¯¢åŸºæœ¬éƒ½èƒ½å‘½ä¸­ç¼“å­˜ï¼Œæ²¡æœ‰äº†é¦–æ¬¡æŸ¥è¯¢éœ€éå†æ‰€æœ‰åˆ†ç‰‡çš„è€—æ—¶ï¼Œé‚£ä¹ˆ&lt;span&gt;ç­–ç•¥&lt;/span&gt; &lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt; åè€Œä¼šæ›´å¥½ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™é‡Œï¼Œæˆ‘ä»¬é€‰æ‹©ç­–ç•¥Â &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼šç­–ç•¥ &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; ä¸­ï¼Œå‰ç¼€èŒƒå›´å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ˜ å°„å…³ç³»è¯¥å¦‚ä½•å­˜å‚¨å‘¢ï¼Ÿå¯ä»¥ç”¨å…¸å‹Â &lt;/span&gt;&lt;span&gt;KVÂ &lt;/span&gt;&lt;span&gt;ç»“æ„æ¥å­˜å‚¨ï¼Œ&lt;span&gt;å¦‚ &lt;/span&gt;&lt;/span&gt;&lt;span&gt;redis&lt;/span&gt;&lt;span&gt;&lt;span&gt;ã€‚&lt;/span&gt;ä¹Ÿå¯ä»¥ç”¨ &lt;/span&gt;&lt;span&gt;zookeeper&lt;/span&gt;&lt;span&gt;ã€‚æœ¬æ–‡ä¸­æˆ‘ä»¬åŸºäºä¸‹è¿°åŸå› é€‰æ‹©&lt;/span&gt;&lt;span&gt;ç”¨ &lt;/span&gt;&lt;span&gt;zookeeper&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸€æ–¹é¢ï¼Œåœ¨&lt;/span&gt;&lt;span&gt;Â Trie &lt;/span&gt;&lt;span&gt;æ ‘æ²¡æœ‰é‡å»ºçš„æƒ…å†µä¸‹ï¼Œ&lt;span&gt;å‰ç¼€å’Œåˆ†ç‰‡ä¹‹é—´çš„æ˜ å°„å…³ç³»&lt;/span&gt;å°±ä¸ä¼šå‘ç”Ÿä¿®æ”¹ï¼Œè€ŒÂ &lt;span&gt;TrieÂ &lt;/span&gt;&lt;span&gt;æ ‘çš„é‡å»ºå‘¨æœŸä¸€èˆ¬&lt;/span&gt;æ˜¯ä¸€å¤©æˆ–å‡ å¤©ï¼Œè¿™æ„å‘³ç€å¯¹ &lt;/span&gt;&lt;span&gt;zookeeper&lt;/span&gt;&lt;span&gt;Â çš„Â &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;å†™&lt;/span&gt;&lt;span&gt;&quot;Â &lt;/span&gt;&lt;span&gt;æ“ä½œå‡ ä¹å¯ä»¥å¿½ç•¥ã€‚ä¸æŸ¥è¯¢Â &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;è¿™ä¸ªå‰ç¼€åˆ†å¸ƒåœ¨å“ªå°æœåŠ¡å™¨ï¼Ÿ&lt;/span&gt;&lt;span&gt;&quot;Â &lt;/span&gt;&lt;span&gt;è¿™ç§é¢‘ç¹çš„Â &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;è¯»&lt;/span&gt;&lt;span&gt;&quot;Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;æ“ä½œç›¸æ¯”ï¼Œ&lt;/span&gt;æ˜¯å…¸å‹çš„Â &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;è¯»å¤šå†™å°‘&lt;/span&gt;&lt;span&gt;&quot;Â &lt;/span&gt;&lt;span&gt;åœºæ™¯ï¼›&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¦ä¸€æ–¹é¢ï¼Œéšç€ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; æ•°æ®é‡çš„å¢åŠ ï¼Œ&lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ä¹Ÿä¼šåˆ†æˆæ›´å¤šçš„åˆ†ç‰‡ï¼Œå¯¼è‡´å­˜æ”¾Â &lt;span&gt;Trie&lt;/span&gt;&lt;span&gt;Â æ ‘&lt;/span&gt;çš„æœåŠ¡å™¨æ•°é‡ä¸æ–­å¢åŠ ã€‚è¿™æ—¶å°±éœ€è¦å¼•å…¥ &lt;span&gt;zookeeperÂ &lt;/span&gt;æ¥ç›‘æ§&lt;/span&gt;&lt;span&gt;Â Trie &lt;/span&gt;&lt;span&gt;æ ‘æœåŠ¡å™¨çš„è¿è¡ŒçŠ¶æ€ã€‚å„æœåŠ¡å™¨éœ€ä¸Â &lt;span&gt;zookeeperÂ &lt;/span&gt;ä¿æŒæ­£å¸¸çš„å¿ƒè·³ï¼Œå¦‚æœæŸä¸€å°æœåŠ¡å™¨æŒ‚äº†ï¼Œ&lt;/span&gt;&lt;span&gt;zookeeper&lt;/span&gt;&lt;span&gt; èƒ½åŠæ—¶æ„Ÿåº”åˆ°ï¼Œå¹¶å°†æ¥è‡ªç”¨æˆ·çš„è¯·æ±‚è½¬å‘åˆ°å¥åº·çš„æœåŠ¡å™¨èŠ‚ç‚¹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;ZooKeeper &lt;/span&gt;ä¸­çš„Â &lt;/span&gt;&lt;span&gt;znode&lt;/span&gt;&lt;span&gt;Â æ•°æ®ç»“æ„è®¾è®¡&lt;span&gt;å¦‚ä¸‹å›¾ &lt;/span&gt;&lt;/span&gt;&lt;span&gt;11 &lt;/span&gt;&lt;span&gt;æ‰€ç¤ºã€‚å¶å­èŠ‚ç‚¹æ˜¯ä¸´æ—¶é¡ºåºèŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹ä¸­å­˜æ”¾ä¸€äº›å…ƒæ•°æ®ï¼Œæ¯”å¦‚ï¼šå„å° &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘æœåŠ¡å™¨çš„&lt;/span&gt;&lt;span&gt; ip&lt;/span&gt;&lt;span&gt;ï¼Œç«¯å£ï¼Œä»¥åŠè¯¥æœåŠ¡å™¨ä¸Šçš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; çš„å‰ç¼€èŒƒå›´ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;455&quot; data-backw=&quot;517&quot; data-ratio=&quot;0.8800773694390716&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/la8s6uvJibdQXHHoIeZs04bXgiaQERzEeBBPbjnbicOjkiamDfL1eh9eFuFzlcicjxUvDRvib59OW4WEzUG0hjFqbLdw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;517&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;å›¾ 11&lt;/span&gt;&lt;span&gt;ï¼šÂ &lt;/span&gt;&lt;/span&gt;&lt;span&gt;znodeÂ &lt;/span&gt;&lt;span&gt;çš„æ•°æ®ç»“æ„&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹åˆ°ç›®å‰ä¸ºæ­¢çš„ç³»ç»Ÿæ¶æ„ï¼Œä¸ &lt;/span&gt;&lt;span&gt;Part 1Â &lt;/span&gt;&lt;span&gt;ä¸­çš„é‚£ä¸ªåˆæ­¥ç‰ˆæœ¬ç›¸æ¯”ï¼Œè¿™é‡Œå§‘ä¸”ç§°ä½œ &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;span&gt; ç‰ˆã€‚&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;611&quot; data-backw=&quot;578&quot; data-ratio=&quot;1.05625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/la8s6uvJibdQ4HibJm7RIKtVuiaicgyK58eOzCaBNqrBmNswu3W22SQUafoCnbB4ZGTmrRQqMpqL7ia2kXMLajqEjqQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;å›¾Â 12&lt;/span&gt;&lt;span&gt;ï¼š&lt;/span&gt;&lt;/span&gt;&lt;span&gt;æœç´¢æç¤ºçš„ç³»ç»Ÿæ¶æ„(v1)&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸Šå›¾ä¸­ï¼Œ&lt;/span&gt;&lt;span&gt;T1&lt;/span&gt;&lt;span&gt;Â ~Â &lt;/span&gt;&lt;span&gt;T8Â &lt;/span&gt;&lt;span&gt;æ˜¯Â &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘æœåŠ¡å™¨ï¼Œ&lt;/span&gt;&lt;span&gt;T1&lt;/span&gt;&lt;span&gt;ã€&lt;/span&gt;&lt;span&gt;T2&lt;/span&gt;&lt;span&gt; ä½œä¸ºä¸€ç»„ï¼Œäº’ä¸ºä¸»å¤‡ï¼Œ&lt;/span&gt;&lt;span&gt;T3&lt;/span&gt;&lt;span&gt;ã€&lt;/span&gt;&lt;span&gt;T4&lt;/span&gt;&lt;span&gt; äº’ä¸ºä¸»å¤‡ï¼Œ&lt;/span&gt;&lt;span&gt;T5&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;å’Œ&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;T6&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;T7 &lt;/span&gt;&lt;span&gt;å’Œ&lt;/span&gt;&lt;span&gt; T8 &lt;/span&gt;&lt;span&gt;ä¹Ÿæ˜¯ä¸€æ ·çš„ç­–ç•¥ã€‚äº’ä¸ºä¸»å¤‡çš„æœºåˆ¶ï¼Œå¯ä»¥åœ¨ä¸€å°æœåŠ¡å™¨å®•æœºæˆ–åš &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘æ›´æ–°æœŸé—´ï¼Œç»„ä¸­å¦å¤–ä¸€å°æœåŠ¡å™¨ä»å¯ä»¥å¯¹å¤–æä¾›æœåŠ¡ï¼Œä¿è¯æœåŠ¡çš„&lt;span&gt;æ•´ä½“&lt;/span&gt;é«˜å¯ç”¨æ€§ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;S1&lt;/span&gt;&lt;span&gt;ã€&lt;/span&gt;&lt;span&gt;S2&lt;/span&gt;&lt;span&gt; æ˜¯æœç´¢æç¤ºçš„åº”ç”¨æœåŠ¡å™¨ï¼Œä¸å­˜å‚¨æ•°æ®ï¼Œåªå¯¹å¤–æä¾› &lt;/span&gt;&lt;span&gt;API&lt;/span&gt;&lt;span&gt; æ¥å£ã€‚è´Ÿè´£æ¥æ”¶è´Ÿè½½å‡è¡¡å™¨ (&lt;/span&gt;&lt;span&gt;LB)Â &lt;/span&gt;&lt;span&gt;ä¼ è¿‡æ¥çš„ç”¨æˆ·è¯·æ±‚ï¼Œåˆ°&lt;span&gt;ç¼“å­˜ä¸­æŸ¥è¯¢ï¼Œæˆ–åœ¨æœªå‘½ä¸­ç¼“å­˜æ—¶ä»ç‰¹å®šçš„&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â Trie &lt;/span&gt;&lt;span&gt;æ ‘æœåŠ¡å™¨ä¸­æŸ¥è¯¢ï¼Œå¹¶å°†ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å‰ç¼€èŒƒå›´å’Œ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘æœåŠ¡å™¨çš„æ˜ å°„å…³ç³»Â &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;å¦‚è¡¨Â &lt;/span&gt;&lt;span&gt;3Â &lt;/span&gt;&lt;span&gt;æ‰€ç¤º)ï¼Œä½œä¸ºé›†ç¾¤çš„å…ƒä¿¡æ¯ï¼Œä¼šä¿å­˜åœ¨ &lt;/span&gt;&lt;span&gt;zookeeper&lt;/span&gt;&lt;span&gt; ä¸­ã€‚å½“ç”¨æˆ·è¯·æ±‚æ²¡æœ‰å‘½ä¸­Â &lt;/span&gt;&lt;span&gt;Redis&lt;/span&gt;&lt;span&gt; ç¼“å­˜æœåŠ¡æ—¶ï¼Œåº”ç”¨æœåŠ¡å™¨Â &lt;span&gt;S1Â &lt;/span&gt;&lt;span&gt;æˆ–Â &lt;/span&gt;&lt;span&gt;S2 &lt;/span&gt;ä¼šè¯·æ±‚ &lt;span&gt;zookeeper&lt;/span&gt;ï¼Œè·å–æ¯å° &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘æœåŠ¡å™¨å¯¹åº”çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; çš„å‰ç¼€èŒƒå›´ï¼Œç„¶åæŠŠå®ƒæ”¾åœ¨æœ¬åœ°ç¼“å­˜ä¸­ï¼Œè¿™æ ·å°±ä¸ç”¨æ¯æ¬¡éƒ½è¯·æ±‚Â &lt;span&gt;zookeeper&lt;/span&gt; äº†ã€‚ä¸‹æ¬¡å†å‘ç”Ÿç¼“å­˜ä¸å‘½ä¸­æ—¶ï¼Œ&lt;span&gt;S1Â &lt;/span&gt;&lt;span&gt;æˆ–Â &lt;/span&gt;&lt;span&gt;S2 &lt;/span&gt;ç›´æ¥æŸ¥è¯¢æœ¬åœ°ç¼“å­˜ï¼Œçœ‹çœ‹å“ªä¸ªå‰ç¼€è¯¥å»è¯·æ±‚å“ªå° &lt;/span&gt;&lt;span&gt;Trie &lt;/span&gt;&lt;span&gt;æ ‘æœåŠ¡å™¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬ä¼š&lt;span&gt;å®šæ—¶&lt;/span&gt;å¯¹Â &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘æœåŠ¡é›†ç¾¤åšå¿«ç…§ï¼Œå¹¶å°†å¿«ç…§å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚å½“&lt;/span&gt;&lt;span&gt; T1&lt;/span&gt;&lt;span&gt; ~ &lt;/span&gt;&lt;span&gt;T8&lt;/span&gt;&lt;span&gt; ä¸­çš„æŸå°æœåŠ¡å™¨å®•æœºé‡å¯æ—¶ï¼Œå¯ä»¥è¯»å–ç›¸åº”çš„å¿«ç…§æ–‡ä»¶ï¼Œå¿«é€Ÿæ¢å¤å‡ºæœ€è¿‘ä¸€æ¬¡ä½¿ç”¨çš„ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åŸºäºä¸Šè¿°æ¶æ„ï¼Œä»ç”¨æˆ·è¾“å…¥ä¸€ä¸ªæŸ¥è¯¢è¯ &lt;/span&gt;&lt;span&gt;&quot;&lt;span&gt;ultraman&lt;/span&gt;&quot;&lt;/span&gt;&lt;span&gt;ï¼Œåˆ°åº”ç”¨æœåŠ¡å™¨è¿”å› &lt;/span&gt;&lt;span&gt;Top K&lt;/span&gt;&lt;span&gt;&lt;span&gt; ä¸ªç»“æœï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹&lt;/span&gt;å®Œæ•´çš„è¯·æ±‚æµç¨‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;1. &lt;/span&gt;&lt;span&gt;ç”¨æˆ·è¾“å‡ºå…³é”®è¯Â &lt;/span&gt;&lt;span&gt;&quot;ultraman&quot;&lt;/span&gt;&lt;span&gt;ï¼›&lt;/span&gt;&lt;/section&gt;&lt;section&gt;&lt;span&gt;2 - 3.Â Â &lt;/span&gt;&lt;span&gt;ç½‘å…³æ¥æ”¶åˆ°ç”¨æˆ·è¯·æ±‚ï¼Œæ ¹æ®å†…ç½®çš„è´Ÿè½½ç­–ç•¥å°†è¯·æ±‚è½¬å‘ç»™ &lt;/span&gt;&lt;span&gt;S1 &lt;/span&gt;&lt;span&gt;æˆ–&lt;/span&gt;&lt;span&gt; S2&lt;/span&gt;&lt;span&gt;ï¼Œå‡è®¾è·¯ç”±åˆ° &lt;/span&gt;&lt;span&gt;S2&lt;/span&gt;&lt;span&gt;ï¼›&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;4.&lt;/span&gt;&lt;span&gt;Â Â &lt;/span&gt;&lt;span&gt;S2&lt;/span&gt;&lt;span&gt;Â é¦–å…ˆæŸ¥è¯¢ &lt;/span&gt;&lt;span&gt;Redis&lt;/span&gt;&lt;span&gt; ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨ &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt; ä¸º &lt;span&gt;&quot;ultraman&quot;&lt;/span&gt; çš„é”®å€¼å¯¹ï¼›&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;5.&lt;/span&gt;&lt;span&gt;Â  å¦‚æœå‘½ä¸­ç¼“å­˜ï¼Œå°±ç›´æ¥è¿”å›ç»“æœÂ ã€‚å¦‚æœç¼“å­˜æœªå‘½ä¸­ï¼Œå†å»æœ¬åœ°ç¼“å­˜ä¸­æŸ¥è¯¢æ˜¯å¦æœ‰å‰ç¼€çš„è·¯ç”±ä¿¡æ¯ã€‚å¦‚æœæœ‰ï¼Œå°±ç›´æ¥è·³åˆ°ç¬¬ &lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt; æ­¥ï¼›å¦‚æœæ²¡æœ‰ï¼Œåˆ™è·³åˆ°ç¬¬ &lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;span&gt; æ­¥ï¼›&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;6.&lt;/span&gt;&lt;span&gt;Â Â &lt;span&gt;S2&lt;/span&gt; è¯·æ±‚ &lt;/span&gt;&lt;span&gt;zookeeper&lt;/span&gt;&lt;span&gt; ï¼Œå¸Œæœ›è·å–æ‰€æœ‰ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘æœåŠ¡å™¨çš„å‰ç¼€èŒƒå›´ä¿¡æ¯ï¼›&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;7.Â &lt;/span&gt;&lt;span&gt;Â &lt;span&gt;zookeeper&lt;/span&gt; è¿”å›æ•°æ®ç»™ &lt;span&gt;S2&lt;/span&gt;ï¼›&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;8.Â Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;S2&lt;/span&gt; å°†æ•°æ®å­˜åœ¨æœ¬åœ°ï¼Œå¹¶çŸ¥é“äº†å‰ç¼€èŒƒå›´æ˜¯Â &lt;span&gt;&quot;ok&quot; ~ &quot;zu&quot;&lt;/span&gt;Â çš„è¯·æ±‚ï¼Œåº”è¯¥å‘é€ç»™ &lt;/span&gt;&lt;span&gt;T7Â &lt;/span&gt;&lt;span&gt;æˆ– &lt;/span&gt;&lt;span&gt;T8&lt;/span&gt;&lt;span&gt;ã€‚å‡è®¾ &lt;span&gt;S2&lt;/span&gt; éšæœºé€‰æ‹©Â &lt;/span&gt;&lt;span&gt;T8&lt;/span&gt;&lt;span&gt;ï¼›&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;9.&lt;/span&gt;&lt;span&gt;Â Â &lt;span&gt;T8&lt;/span&gt; æ”¶åˆ°è¯·æ±‚ï¼Œä» &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ä¸­æŸ¥è¯¢å‰ç¼€æ˜¯Â &lt;span&gt;&quot;ultraman&quot; &lt;/span&gt;çš„&lt;span&gt;Â &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Top K&lt;/span&gt;&lt;span&gt; ä¸ªç»“æœï¼Œå°†å…¶è¿”å›ç»™Â &lt;span&gt;S2&lt;/span&gt;ï¼›&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;10.&lt;/span&gt;&lt;span&gt;Â Â &lt;span&gt;S2 &lt;/span&gt;å°†ç»“æœè¿”å›&lt;span&gt;ç»™å®¢æˆ·ç«¯&lt;/span&gt;ï¼Œ&lt;span&gt;å¹¶æŠŠè¿™äº›æ•°æ®å¼‚æ­¥ç¼“å­˜åˆ° &lt;/span&gt;&lt;/span&gt;&lt;span&gt;redis&lt;/span&gt;&lt;span&gt; ä¸­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è‡³æ­¤ï¼Œæœç´¢æç¤ºçš„æŸ¥è¯¢æœåŠ¡å·²ç»åŸºæœ¬å®ç°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥è®¾è®¡å¦ä¸€ä¸ªé‡è¦çš„æœåŠ¡ï¼šæ•°æ®æ”¶é›†æœåŠ¡Â &lt;/span&gt;&lt;span&gt;(Gathering Service)&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;6.Â Gathering ServiceÂ &lt;span&gt;è¯¦ç»†è®¾è®¡&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç”¨æˆ·çš„æœç´¢æ„å›¾ä¼šéšç€æ—¶é—´ã€åœ°ç‚¹ã€çˆ±å¥½ã€çƒ­ç‚¹äº‹ä»¶ç­‰å› ç´ çš„å˜åŒ–è€Œå˜åŒ–ï¼Œæœç´¢æç¤ºè¿”å›çš„ &lt;/span&gt;&lt;span&gt;Top K&lt;/span&gt;&lt;span&gt; åˆ—è¡¨è¦èƒ½ä½“ç°å‡ºè¿™ç§å˜åŒ–ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™å°±éœ€è¦å®æ—¶æˆ–å®šæ—¶åœ°åˆ†ææœç´¢æ—¥å¿—ï¼Œè®¡ç®—å‡ºÂ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; çš„æœ€æ–°Â &lt;/span&gt;&lt;span&gt;rank&lt;/span&gt;&lt;span&gt;ï¼Œå†å®šæœŸå»æ›´æ–°Â &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ã€‚è¿™æ ·ï¼ŒæŸ¥è¯¢ç‰¹å®š &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; è¿”å›çš„ &lt;/span&gt;&lt;span&gt;Top K&lt;/span&gt;&lt;span&gt; åˆ—è¡¨å¯èƒ½å°±ä¼šäº§ç”Ÿå˜åŒ–ï¼šå¯èƒ½æ˜¯åˆ—è¡¨ä¸­æ–°å‡ºç°äº†ä¸€äº›æç¤ºè¯ï¼Œä¹Ÿå¯èƒ½æ˜¯åˆ—è¡¨çš„å‰åé¡ºåºå‘ç”Ÿäº†å˜åŒ–ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;é€šè¿‡&lt;span&gt;æ•°æ®æ”¶é›†æœåŠ¡&lt;/span&gt;ï¼Œå¯ä»¥å®ç°å¯¹Â &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;Â çš„æ”¶é›†åŠå…¶çƒ­åº¦å€¼Â &lt;/span&gt;&lt;span&gt;(rank)&lt;/span&gt;&lt;span&gt;Â çš„æ›´æ–°ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å‡è®¾åç«¯æœåŠ¡å™¨æœ‰ä¸€ä¸ªæŒ‰å¤©å½’æ¡£çš„åŸå§‹æœç´¢æ—¥å¿—ï¼Œé‡Œé¢è®°å½•äº†ç”¨æˆ·çš„æœç´¢ã€ç‚¹å‡»ã€æµè§ˆç­‰è¡Œä¸ºã€‚è¿™ä»½æ—¥å¿—æ˜¯&lt;span&gt;æ•°æ®æ”¶é›†æœåŠ¡çš„æºå¤´æ´»æ°´ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨ &lt;/span&gt;&lt;span&gt;Part 1&lt;/span&gt;&lt;span&gt; ä¸­æˆ‘ä»¬è¯´è¿‡ï¼Œ&lt;span&gt;åœ¨&lt;span&gt;å¤§å¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å®æ—¶è®¡ç®— &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; çš„ &lt;/span&gt;&lt;span&gt;rank&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt; å€¼ï¼Œå› ä¸ºÂ &lt;/span&gt;&lt;span&gt;Top K&lt;/span&gt;Â ä¸ªÂ &lt;/span&gt;&lt;span&gt;queryÂ &lt;/span&gt;&lt;span&gt;çš„æ’åºï¼Œ&lt;span&gt;é€šå¸¸&lt;/span&gt;åœ¨ä¸€æ®µæ—¶é—´å†…ä¸ä¼šæœ‰æ˜æ˜¾çš„å˜åŒ–ã€‚æ‰€ä»¥ï¼Œè¿™é‡Œæˆ‘ä»¬&lt;span&gt;æ— éœ€å®æ—¶è®¡ç®—Â &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;rank&lt;/span&gt;&lt;span&gt;&lt;span&gt;ï¼Œè€Œæ˜¯&lt;/span&gt;é‡‡ç”¨Â &lt;/span&gt;&lt;span&gt;Map-Reduce&lt;/span&gt;&lt;span&gt; æ¥å®šæ—¶è®¡ç®—&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;rank&lt;/span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ†æä¸€ä¸‹ï¼Œè®¾è®¡&lt;span&gt;æ•°æ®æ”¶é›†æœåŠ¡çš„å…³é”®æ­¥éª¤&lt;/span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ­¥éª¤ &lt;/span&gt;&lt;strong&gt;&lt;span&gt;1&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šèµ·ä¸€ä¸ªÂ &lt;span&gt;Map-ReduceÂ &lt;/span&gt;&lt;/span&gt;&lt;span&gt;JobÂ (&lt;/span&gt;&lt;span&gt;ç®€ç§° &lt;/span&gt;&lt;span&gt;Job A)&lt;/span&gt;&lt;span&gt;ï¼Œæ¯å¤©è¯»å–å‰ä¸€å¤©çš„åŸå§‹æœç´¢æ—¥å¿—ï¼Œç»è¿‡ç®€å•çš„è¯é¢‘ç»Ÿè®¡ï¼Œå¦‚æœè¯é¢‘è¶…è¿‡æŸä¸ªé˜ˆå€¼ï¼Œæ¯”å¦‚ &lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;span&gt; æ¬¡ï¼Œå°±å°†ç»Ÿè®¡ç»“æœä»¥ä¸€å®šçš„æ ¼å¼ï¼ˆå¦‚æŒ‰ï¼š&lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;,Â &lt;/span&gt;&lt;span&gt;frequent&lt;/span&gt;&lt;span&gt;,Â &lt;/span&gt;&lt;span&gt;date&lt;/span&gt;&lt;span&gt; è¿™æ ·çš„æ ¼å¼ï¼‰è¾“å‡ºåˆ°è¯é¢‘æ–‡ä»¶ã€‚è¯é¢‘æ–‡ä»¶æŒ‰å¤©è¿›è¡Œå‘½åã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸‹é¢æ˜¯ä¸¤ä¸ªç”Ÿæˆå¥½çš„è¯é¢‘æ–‡ä»¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;æ–‡ä»¶Â &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/span&gt;&lt;span&gt;ï¼š&lt;/span&gt;&lt;span&gt;query_frequent_20210601&lt;/span&gt;&lt;/p&gt;&lt;table interlaced=&quot;enabled&quot;&gt;&lt;tbody&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;strong&gt;&lt;span&gt;Query&lt;/span&gt;&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;strong&gt;&lt;span&gt;Frequent&lt;/span&gt;&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;strong&gt;&lt;span&gt;Date&lt;/span&gt;&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;cake custom&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;50&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;2020-06-01&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;cannon serials&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;60&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;2020-06-01&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;cap for children&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;30&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;2020-06-01&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;car gift&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;80&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;2020-06-01&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;card ultraman&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;100&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;2020-06-01&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;children gift&lt;/span&gt;&lt;span&gt;â€&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;150&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;2020-06-01&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;......&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;......&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;......&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;æ–‡ä»¶ &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/span&gt;&lt;span&gt;ï¼š&lt;/span&gt;&lt;span&gt;query_frequent_20210602&lt;/span&gt;&lt;/p&gt;&lt;table interlaced=&quot;enabled&quot;&gt;&lt;tbody&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;strong&gt;&lt;span&gt;Query&lt;/span&gt;&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;strong&gt;&lt;span&gt;Frequent&lt;/span&gt;&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;strong&gt;&lt;span&gt;Date&lt;/span&gt;&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;card ultraman&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;50&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;2020-06-02&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;cat food&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;15&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;2020-06-02&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;cannon 8D&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;30&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;2020-06-02&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;coca cola&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;45&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;2020-06-02&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;coffee brand&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;25&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;2020-06-02&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;coworking&lt;/span&gt;&lt;span&gt;â€&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;20&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;2020-06-02&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;......&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;......&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;......&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;section&gt;&lt;span&gt;ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ä¿å­˜ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; çš„ &lt;/span&gt;&lt;span&gt;date&lt;/span&gt;&lt;span&gt; ä¿¡æ¯å‘¢ï¼Ÿ&lt;/span&gt;&lt;br/&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;å› ä¸ºï¼Œæˆ‘ä»¬åœ¨ä¸‹ä¸€æ­¥è®¡ç®— &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; åŠ¨æ€&lt;span&gt;æƒé‡&lt;span&gt;çš„&lt;/span&gt;&lt;/span&gt;æ—¶å€™ï¼Œé™¤äº†è¯é¢‘è¿™ä¸ªå› å­ä¹‹å¤–ï¼Œè¿˜éœ€è¦å°†æ—¶é—´å› å­ä¹Ÿè€ƒè™‘è¿›å»ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é€šå¸¸ï¼Œæœ€è¿‘è¢«æœç´¢å¾—è¶Šå¤šçš„&lt;/span&gt;&lt;span&gt; query&lt;/span&gt;&lt;span&gt;ï¼Œç»™åˆ°çš„æƒé‡å°±è¶Šé«˜ï¼Œè€Œè¶Šä¹…æ²¡æœ‰è¢«æŸ¥è¯¢çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;ï¼Œç»™çš„æƒé‡å°±è¶Šä½ã€‚è¿™æ ·ï¼Œç”±äºç»¼åˆè€ƒè™‘äº†è¯é¢‘å’Œæ—¶é—´çš„å½±å“ï¼Œé‚£äº›æœ€è¿‘å‡ºç°çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;ï¼Œè™½ç„¶è¯é¢‘å°ï¼Œä»æœ‰å¯èƒ½å‡ºç°åœ¨ &lt;/span&gt;&lt;span&gt;Top K&lt;/span&gt;&lt;span&gt; åˆ—è¡¨ã€‚è€Œé‚£äº›å¾ˆä¹…æ²¡æœ‰è¢«æœç´¢çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;ï¼Œå³ä½¿è¯é¢‘å¾ˆå¤§ï¼Œä½†ç”±äºè€ƒè™‘äº†æ—¶é—´çš„è¡°å‡ï¼Œä¹Ÿä¸ä¸€å®šä¼šå‡ºç°åœ¨ &lt;/span&gt;&lt;span&gt;Top K&lt;/span&gt;&lt;span&gt; åˆ—è¡¨ä¸­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ­¥éª¤Â &lt;/span&gt;&lt;strong&gt;&lt;span&gt;2&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šåŸºäºæ­¥éª¤&lt;/span&gt;&lt;span&gt; 1 &lt;/span&gt;&lt;span&gt;ç”Ÿæˆçš„è¯é¢‘æ–‡ä»¶ï¼Œæ¯å¤©æ›´æ–° &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; çš„æƒé‡ï¼Œç”Ÿæˆ&lt;/span&gt;&lt;span&gt; rank &lt;/span&gt;&lt;span&gt;æ–‡ä»¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å…ˆæ¥è¯´ä¸€ä¸‹æƒé‡çš„è®¡ç®—å…¬å¼ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸Šé¢æˆ‘ä»¬æœ‰è®²åˆ°ï¼Œè®¡ç®— &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; æƒé‡çš„æ—¶å€™éœ€è¦è€ƒè™‘è¯é¢‘å’Œæ—¶é—´å› å­ã€‚å…·ä½“å®ç°çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨&lt;strong&gt;æŒ‡æ•°ç§»åŠ¨å¹³å‡åŠ æƒÂ &lt;/strong&gt;(&lt;/span&gt;&lt;span&gt;Exponential Moving Average:Â EMA)&lt;/span&gt;&lt;span&gt;ã€‚å„æ•°å€¼çš„åŠ æƒå½±å“åŠ›éšæ—¶é—´è€ŒæŒ‡æ•°å¼é€’å‡ï¼Œè¶Šè¿‘æœŸçš„æ•°æ®åŠ æƒå½±å“åŠ›è¶Šé‡ï¼Œä½†è¾ƒæ—§çš„æ•°æ®ä¹Ÿä¼šç»™äºˆä¸€å®šçš„åŠ æƒå€¼ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åŸºäº&lt;/span&gt;&lt;span&gt; EMA&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; çš„ &lt;/span&gt;&lt;span&gt;rank&lt;/span&gt;&lt;span&gt; å€¼å¯æŒ‰å¦‚ä¸‹å…¬å¼è®¡ç®—ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;å¼&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/em&gt;&lt;span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â Â Â Â Â &lt;/span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.12041884816753927&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/la8s6uvJibdQSeWU8GicFZYKicQGqpn6elF8ycCIvhxsFSLPeARKUvEYLFh0DOJIjLAlpXFIsu7x2NVxuC2Lm730A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;191&quot;/&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;ä¸Šå¼ &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; ä¸­ï¼š&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.95&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/la8s6uvJibdQSeWU8GicFZYKicQGqpn6elFJp7bGGJswaWicMsOSiculk7d4s0X3KuTzOtMOdMSia97VhpUFr1FBH2Kw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;20&quot;/&gt;Â Â Â Â &lt;span&gt;è¡¨ç¤ºæŸä¸ª &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; å½“å¤©çš„æƒé‡ï¼›&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.46875&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/la8s6uvJibdQSeWU8GicFZYKicQGqpn6elFXy34kTQeicFRWrpv7ZMy9gibNPiceF4icknaMFf49QhV6CZZvkVpe5qZqA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;32&quot;/&gt;Â Â &lt;span&gt;è¡¨ç¤ºè¯¥ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; å‰ä¸€å¤©çš„æƒé‡ï¼›&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/la8s6uvJibdQSeWU8GicFZYKicQGqpn6elFic172nxmPNUYMSCic5fyQe0hen9EqOX4VFrpic7kOBFx7foI1JxPTyyQg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;16&quot;/&gt;Â Â  Â  &lt;span&gt;è¡¨ç¤º &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; å½“å¤©çš„è¯é¢‘ï¼›&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;Â &lt;/span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;1.5714285714285714&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/la8s6uvJibdQSeWU8GicFZYKicQGqpn6elFPAONjxfCXxiccmInodxibfu7fIka6glJZoITNicM4hyJ8ZcYEAXY42HLw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;14&quot;/&gt;Â Â Â Â &lt;span&gt;è¡¨ç¤ºè¡°å‡å› å­ï¼Œä¸€èˆ¬å–å¤§äº &lt;/span&gt;&lt;span&gt;0.5&lt;/span&gt;&lt;span&gt; çš„å€¼ã€‚æœ¬æ–‡å– &lt;/span&gt;&lt;span&gt;0.9&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;å¼ &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; ç»§ç»­å±•å¼€åï¼Œå¯ä»¥å¾—åˆ°ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;em&gt;&lt;span&gt;&lt;span&gt;å¼&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;/span&gt;&lt;/em&gt;&lt;span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â Â Â Â Â &lt;/span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.045098039215686274&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/la8s6uvJibdQSeWU8GicFZYKicQGqpn6elF9uwYlfjSDniaW0YS0IOmtY2ePMcjK1LY1d2cKLt3OFFicibRqAOUVIQaQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;510&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä»å¼ &lt;/span&gt;&lt;span&gt;2 &lt;/span&gt;&lt;span&gt;å¯ä»¥çœ‹å‡ºï¼Œè¯é¢‘å¯¹æƒé‡çš„å½±å“ï¼Œæ˜¯éšç€æ—¶é—´è€Œå‘ˆæŒ‡æ•°è¡°å‡çš„ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¼Â &lt;span&gt;2Â &lt;/span&gt;ä¸­çš„Â &lt;/span&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.8421052631578947&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/la8s6uvJibdQSeWU8GicFZYKicQGqpn6elFviaxFvWwxd0nSq4DzLMOpyNXhRrDk3MkV1uQNZz4TAEzeC0M1l9A76A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;19&quot;/&gt;&lt;span&gt;Â æ˜¯ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; çš„åˆå§‹æƒé‡å€¼ã€‚ç®€å•èµ·è§å¯ä»¥å– &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;ï¼Œæ›´å¥½ä¸€ç‚¹åšæ³•æ˜¯å– &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; ä¸€æ®µæ—¶é—´å†…çš„å¹³å‡å€¼ã€‚æœ¬æ–‡å–å¼€å§‹ä¸¤å¤©Â &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; è¯é¢‘çš„å¹³å‡å€¼ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æœ‰äº†æƒé‡è®¡ç®—å…¬å¼ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥è¿›è¡Œå…·ä½“çš„è®¡ç®—é€»è¾‘ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;1.Â &lt;/span&gt;&lt;span&gt; å®šä¹‰ &lt;/span&gt;&lt;span&gt;Map-Reduce Job B&lt;/span&gt;&lt;span&gt;ï¼Œæ¥åˆå§‹åŒ– &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; çš„æƒé‡ï¼Œå¹¶å°†ç»“æœä¿å­˜åˆ°&lt;/span&gt;&lt;span&gt; rank&lt;/span&gt;&lt;span&gt; æ–‡ä»¶ã€‚&lt;/span&gt;&lt;span&gt;Job B&lt;/span&gt;&lt;span&gt; åªéœ€è¿è¡Œä¸€æ¬¡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å‡è®¾åˆå§‹åŒ–çš„æƒé‡æ–‡ä»¶åä¸ºï¼š&lt;/span&gt;&lt;span&gt;query_rank_0&lt;/span&gt;&lt;span&gt;ï¼Œå„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; çš„åˆå§‹åŒ–æƒé‡å¦‚ä¸‹è¡¨ &lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;ï¼š&lt;/span&gt;&lt;/p&gt;&lt;table interlaced=&quot;enabled&quot;&gt;&lt;tbody&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;strong&gt;&lt;span&gt;Query&lt;/span&gt;&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;strong&gt;&lt;span&gt;Ra&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;nk&lt;/span&gt;&lt;/strong&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;p&gt;&lt;span&gt;cake custom&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;25.0&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;cannonÂ serials&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;30.0&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;cannon 8DÂ &lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;15.0&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;cap for childrenÂ &lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;15.0&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;p&gt;&lt;span&gt;car gift&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;40.0&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;p&gt;&lt;span&gt;card ultraman&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;75.5&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;p&gt;&lt;span&gt;cat foodÂ &lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;7.5&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;p&gt;&lt;span&gt;children gift&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;75.0&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;p&gt;&lt;span&gt;coca cola&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;22.5&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;p&gt;&lt;span&gt;coffee brand&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/p&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;12.5&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;coworking space&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;10.0&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;è¡¨ 4&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2. &lt;/span&gt;&lt;span&gt;Â å®šä¹‰Â &lt;span&gt;Map-Reduce Job&lt;/span&gt;&lt;/span&gt;&lt;span&gt;Â C&lt;/span&gt;&lt;span&gt;ï¼Œè¯»å–åˆå§‹åŒ–çš„å‰ä¸€å¤©çš„æƒé‡æ–‡ä»¶å’Œå½“å¤©çš„è¯é¢‘æ–‡ä»¶ï¼Œæ ¹æ®å¼Â &lt;/span&gt;&lt;span&gt;1Â &lt;/span&gt;&lt;span&gt;æ›´æ–° &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; çš„æƒé‡ï¼Œå¹¶å°†ç»“æœå†™åˆ°å½“å¤©çš„&lt;/span&gt;&lt;span&gt; rank&lt;/span&gt;&lt;span&gt; æ–‡ä»¶ä¸­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸‹é¢æ˜¯è®¡ç®— &lt;/span&gt;&lt;span&gt;&quot;20210601&quot;&lt;/span&gt;&lt;span&gt;Â å’Œ &lt;/span&gt;&lt;span&gt;&quot;20210602&quot;&lt;/span&gt;&lt;span&gt;Â è¿™ä¸¤å¤© &lt;/span&gt;&lt;span&gt;rank&lt;/span&gt;&lt;span&gt;&lt;span&gt; å€¼çš„ä¾‹å­&lt;/span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;Job&lt;/span&gt;&lt;span&gt;Â C&lt;/span&gt; é¦–æ¬¡æ›´æ–° &lt;span&gt;query&lt;/span&gt; çš„æƒé‡æ—¶ï¼Œå…ˆè¯»å–åˆå§‹åŒ–çš„æƒé‡æ–‡ä»¶ &lt;/span&gt;&lt;span&gt;query_rank_0&lt;/span&gt;&lt;span&gt; å’Œ ç¬¬ä¸€å¤©çš„è¯é¢‘æ–‡ä»¶ &lt;/span&gt;&lt;span&gt;query_frequent_20210601&lt;/span&gt;&lt;span&gt;ï¼Œæ ¹æ®å¼&lt;span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/span&gt;ï¼Œä¾æ¬¡æ›´æ–°å„ä¸ª &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; çš„æƒé‡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¾‹å¦‚ï¼Œ&lt;/span&gt;&lt;span&gt;&quot;card ultraman&quot;&lt;/span&gt;&lt;span&gt;Â çš„æœ€æ–°æƒé‡ï¼š&lt;/span&gt;&lt;em&gt;&lt;span/&gt;&lt;/em&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;v1(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;cardÂ ultraman&quot;&lt;/span&gt;)Â =Â Î²Â Â *Â v0(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;cardÂ ultraman&quot;&lt;/span&gt;)Â +Â (&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;Â -Â Î²)Â *Â Î¸&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt;Â &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                    = &lt;span class=&quot;code-snippet__number&quot;&gt;0.9&lt;/span&gt; * &lt;span class=&quot;code-snippet__number&quot;&gt;75.5&lt;/span&gt; + &lt;span class=&quot;code-snippet__number&quot;&gt;0.1&lt;/span&gt; * &lt;span class=&quot;code-snippet__number&quot;&gt;100&lt;/span&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                    = &lt;span class=&quot;code-snippet__number&quot;&gt;77.95&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;å„ä¸ª &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;Â çš„æƒé‡æ›´æ–°å®Œåï¼Œå­˜è‡³æ–‡ä»¶ï¼š&lt;/span&gt;&lt;span&gt;query_rank_20210601ã€‚&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸‹ä¸€ä¸ªå‘¨æœŸï¼Œ&lt;/span&gt;&lt;span&gt;Job C&lt;/span&gt;&lt;span&gt; è¯»å–å½“å¤©è¯é¢‘æ–‡ä»¶ &lt;/span&gt;&lt;span&gt;query_frequent_20210602&lt;/span&gt;&lt;span&gt; å’Œå‰ä¸€å¤©çš„æƒé‡æ–‡ä»¶ &lt;/span&gt;&lt;span&gt;query_rank_20210601&lt;/span&gt;&lt;span&gt;ï¼ŒæŒ‰ç…§å¼&lt;span&gt;Â &lt;span&gt;1&lt;/span&gt;&lt;/span&gt;ï¼Œå†æ¬¡æ›´æ–°å„ä¸ª &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; çš„æƒé‡ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™æ—¶ï¼Œ&lt;span&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;card ultraman&lt;/span&gt;&lt;span&gt;&lt;span&gt;&quot;&lt;/span&gt; çš„æœ€æ–°æƒé‡ä¸ºï¼š&lt;/span&gt;&lt;em&gt;&lt;span/&gt;&lt;/em&gt;&lt;/p&gt;&lt;section class=&quot;code-snippet__fix code-snippet__js&quot;&gt;&lt;pre class=&quot;code-snippet__js&quot; data-lang=&quot;javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;v2(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;card ultraman&quot;&lt;/span&gt;) = Î²  * v1(&lt;span class=&quot;code-snippet__string&quot;&gt;&quot;card ultraman&quot;&lt;/span&gt;) + (&lt;span class=&quot;code-snippet__number&quot;&gt;1&lt;/span&gt; - Î²) * Î¸&lt;span class=&quot;code-snippet__number&quot;&gt;2&lt;/span&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                    = &lt;span class=&quot;code-snippet__number&quot;&gt;0.9&lt;/span&gt; * &lt;span class=&quot;code-snippet__number&quot;&gt;79.95&lt;/span&gt; + &lt;span class=&quot;code-snippet__number&quot;&gt;0.1&lt;/span&gt; * &lt;span class=&quot;code-snippet__number&quot;&gt;50&lt;/span&gt; &lt;/span&gt;&lt;/code&gt;&lt;code&gt;&lt;span class=&quot;code-snippet_outer&quot;&gt;                    = &lt;span class=&quot;code-snippet__number&quot;&gt;75.16&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/section&gt;&lt;p&gt;&lt;span&gt;å„ä¸ª &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; æƒé‡æ›´æ–°å®Œåï¼Œå­˜è‡³æ–‡ä»¶ï¼š&lt;/span&gt;&lt;span&gt;query_rank_20210602&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å†ä¸‹ä¸€ä¸ªå‘¨æœŸï¼Œ&lt;/span&gt;&lt;span&gt;Job C&lt;/span&gt;&lt;span&gt; è¯»å–&lt;span&gt;å½“å¤©è¯é¢‘æ–‡ä»¶&lt;/span&gt; &lt;/span&gt;&lt;span&gt;query_frequent_20210603&lt;/span&gt;&lt;span&gt; å’Œ&lt;span&gt;å‰ä¸€å¤©çš„æƒé‡æ–‡ä»¶&lt;/span&gt; &lt;/span&gt;&lt;span&gt;query_rank_20210602&lt;/span&gt;&lt;span&gt;ï¼Œè®¡ç®—å‡ºæ–°çš„æƒé‡å€¼ï¼Œå¹¶å°†ç»“æœå­˜åˆ°æ–°çš„æƒé‡æ–‡ä»¶ï¼š&lt;/span&gt;&lt;span&gt;query_rank_20210603&lt;/span&gt;&lt;span&gt;ã€‚ä»¥æ­¤ç±»æ¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ­¥éª¤ &lt;/span&gt;&lt;strong&gt;&lt;span&gt;3&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šå°†æœ€æ–°çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; æƒé‡æ•°æ®ï¼Œåˆ†å‘åˆ° &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘æœåŠ¡å™¨ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ­¥éª¤ &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; å®Œæˆåï¼Œä¼šç”Ÿæˆå½“å¤©çš„&lt;/span&gt;&lt;span&gt; rank&lt;/span&gt;&lt;span&gt; æ–‡ä»¶ã€‚&lt;/span&gt;&lt;span&gt;rank&lt;/span&gt;&lt;span&gt; æ–‡ä»¶åˆæ˜¯æ€ä¹ˆåˆ†å‘åˆ° &lt;/span&gt;&lt;span&gt;TrieÂ &lt;/span&gt;&lt;span&gt;æ ‘æœåŠ¡å™¨çš„å‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨ç¬¬ &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt; å°èŠ‚ &quot;&lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘çš„æ‰©å®¹ç­–ç•¥&quot; ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºè¿‡ï¼Œå½“ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; æ•°é‡åˆ°è¾¾ä¸€å®šé‡çº§ä¹‹åï¼Œéœ€è¦å¯¹ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; æ•°æ®åšåˆ†ç‰‡ï¼Œè®©æ¯å°æœåŠ¡å™¨éƒ½åªå«éƒ¨åˆ†çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;ã€‚æˆ‘ä»¬æ ¹æ®Â &lt;/span&gt;&lt;span&gt;sharding&lt;/span&gt;&lt;span&gt; ç­–ç•¥ &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;ï¼Œå°†æ•°æ®åˆ†æˆäº†&lt;/span&gt; &lt;span&gt;4&lt;/span&gt;&lt;span&gt; ä¸ªåˆ†ç‰‡ï¼Œå‡è®¾&lt;/span&gt; &lt;span&gt;T1&lt;/span&gt;&lt;span&gt;ã€&lt;/span&gt;&lt;span&gt;T2&lt;/span&gt;&lt;span&gt; å­˜æ”¾åˆ†ç‰‡Â &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;T3&lt;/span&gt;&lt;span&gt;ã€&lt;/span&gt;&lt;span&gt;T4&lt;/span&gt;&lt;span&gt;å­˜æ”¾åˆ†ç‰‡Â &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;T5&lt;/span&gt;&lt;span&gt;ã€&lt;/span&gt;&lt;span&gt;T6&lt;/span&gt;&lt;span&gt;å­˜æ”¾åˆ†ç‰‡Â &lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;T7&lt;/span&gt;&lt;span&gt;ã€&lt;/span&gt;&lt;span&gt;T8Â &lt;/span&gt;&lt;span&gt;å­˜æ”¾åˆ†ç‰‡Â &lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ›å»º &lt;/span&gt;&lt;span&gt;4 &lt;/span&gt;&lt;span&gt;ä¸ªåå°çº¿ç¨‹ï¼Œåˆ†åˆ«ç§°ä¸º &lt;/span&gt;&lt;span&gt;Fetcher1&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;Fetcher2&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;Fetcher3&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;Fetcher4&lt;/span&gt;&lt;span&gt;ã€‚æ¯ä¸ª &lt;/span&gt;&lt;span&gt;Fetcher&lt;/span&gt;&lt;span&gt; åªè´Ÿè´£ä»&lt;/span&gt;&lt;span&gt; rank&lt;/span&gt;&lt;span&gt; æ–‡ä»¶ä¸­å–ç‰¹å®šå‰ç¼€èŒƒå›´å†…çš„æ•°æ®ï¼Œ&lt;span&gt;æ¯”å¦‚ï¼Œ&lt;/span&gt;&lt;span&gt;Fetcher1Â &lt;/span&gt;&lt;span&gt;è´Ÿè´£ä»Â &lt;/span&gt;&lt;span&gt;rank&lt;/span&gt;&lt;span&gt;Â æ–‡ä»¶ä¸­å–å‰ç¼€æ˜¯ &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;a&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt;Â ~ &lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;abs&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt;Â çš„ &lt;/span&gt;&lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;&lt;span&gt;ã€‚å„Â &lt;span&gt;Fetcher &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;å–å¾—æ•°æ®åï¼Œ&lt;/span&gt;&lt;span&gt;å†å°†&lt;/span&gt;&lt;span&gt;&lt;span&gt;å…¶åˆ†å‘ç»™å¯¹åº”çš„ &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt;&lt;span&gt; æ ‘æœåŠ¡å™¨ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;å„Â &lt;span&gt;&lt;span&gt;FetcherÂ &lt;/span&gt;&lt;/span&gt;&lt;span&gt;è´Ÿè´£æŠ“å–çš„ &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;queryÂ &lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;ä»¥åŠå‘é€åˆ°çš„ç›®æ ‡æœåŠ¡å™¨ï¼Œå¦‚ä¸‹è¡¨ &lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;5Â &lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;æ‰€ç¤ºï¼š&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;table interlaced=&quot;enabled&quot;&gt;&lt;tbody&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;&lt;span&gt;å–æ•°æ®çš„&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;çº¿ç¨‹&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;å–æ•°æ®&lt;/span&gt;çš„å‰ç¼€èŒƒå›´&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;æ¥æ”¶æ•°æ®çš„ç›®æ ‡æœåŠ¡å™¨&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;Fe&lt;/span&gt;&lt;span&gt;tch&lt;/span&gt;&lt;span&gt;er&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;&quot;a&quot;Â  -- &quot;bas&quot;&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;T1&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;T2&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;Fetcher2&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;&quot;bat&quot; -- &quot;faang&quot;&lt;/span&gt;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;T3&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;T4&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-double&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;Fetcher3&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;&quot;fab&quot; -- &lt;span&gt;&quot;oj&quot;&lt;/span&gt;&lt;span&gt;â€&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;T5&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;T6&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr class=&quot;ue-table-interlace-color-single&quot;&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;Fetcher4&lt;/span&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot;&gt;&lt;span&gt;&quot;ok&quot;&lt;/span&gt; Â --Â  &quot;&lt;span&gt;zu&lt;/span&gt;&quot;&lt;br/&gt;&lt;/td&gt;&lt;td valign=&quot;top&quot; colspan=&quot;1&quot; rowspan=&quot;1&quot;&gt;&lt;span&gt;T7&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;T8&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;span&gt;è¡¨ 5&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;æ­¥éª¤ &lt;/span&gt;&lt;/span&gt;&lt;strong&gt;&lt;span&gt;4&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼šÂ é‡å»º &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨ &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘çš„æ›´æ–°æœºåˆ¶&lt;/span&gt;&lt;span&gt;&quot; &lt;/span&gt;&lt;span&gt;ä¸€èŠ‚ï¼Œæˆ‘ä»¬è®¨è®ºäº†&lt;/span&gt;&lt;span&gt; Trie &lt;/span&gt;&lt;span&gt;æ ‘çš„ä¸¤ç§æ›´æ–°ç­–ç•¥ï¼š&lt;span&gt;Double Buffer &lt;/span&gt;&lt;/span&gt;&lt;span&gt;åŒç¼“å†²ç­–ç•¥&lt;/span&gt;&lt;span&gt;å’Œ &lt;span&gt;Master-Backup &lt;/span&gt;&lt;/span&gt;&lt;span&gt;ä¸»ä»é…ç½®ç­–ç•¥&lt;/span&gt;&lt;span&gt;&lt;span&gt;ã€‚&lt;/span&gt;å—å†…å­˜é™åˆ¶ï¼Œæˆ‘ä»¬é€‰æ‹©ä¸»ä»é…ç½®ç­–ç•¥æ¥æ›´æ–° &lt;/span&gt;&lt;span&gt;Tr&lt;/span&gt;&lt;span&gt;ie&lt;/span&gt;&lt;span&gt; æ ‘ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¯¹äº &lt;/span&gt;&lt;span&gt;T1&lt;/span&gt;&lt;span&gt;ã€&lt;/span&gt;&lt;span&gt;T2&lt;/span&gt;&lt;span&gt;ï¼Œå‡è®¾ &lt;/span&gt;&lt;span&gt;T1&lt;/span&gt;&lt;span&gt; ä¸º &lt;/span&gt;&lt;span&gt;master&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;T2 &lt;/span&gt;&lt;span&gt;ä¸º &lt;span&gt;backup&lt;/span&gt;ã€‚&lt;span&gt;å½“ä»Â &lt;span&gt;Fe&lt;/span&gt;&lt;span&gt;tch&lt;/span&gt;&lt;span&gt;er&lt;/span&gt;&lt;span&gt;1Â &lt;/span&gt;&lt;/span&gt;æ¥æ”¶åˆ°æ–°çš„æƒé‡æ•°æ®åï¼Œä¼šå¯åŠ¨ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘çš„æ›´æ–°ã€‚æˆ‘ä»¬å…ˆåœæ‰ &lt;/span&gt;&lt;span&gt;T2&lt;/span&gt;&lt;span&gt;ï¼Œä»…ç”± &lt;/span&gt;&lt;span&gt;T1 &lt;/span&gt;&lt;span&gt;æä¾›å¯¹äºå‰ç¼€æ˜¯ &lt;span&gt;&quot;a&quot;Â ~ &quot;bas&quot;&lt;/span&gt; çš„æŸ¥è¯¢ã€‚å½“ &lt;/span&gt;&lt;span&gt;T2&lt;/span&gt;&lt;span&gt; æ–°å»º &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘å®Œæˆåï¼Œé‡æ–°ä¸Šçº¿ï¼ŒåŒæ—¶åœæ‰ &lt;/span&gt;&lt;span&gt;T1&lt;/span&gt;&lt;span&gt; çš„æœåŠ¡ï¼Œæ¥ä¸‹æ¥ç”±&lt;/span&gt;&lt;span&gt; T1&lt;/span&gt;&lt;span&gt; å¼€å§‹é‡å»º &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;T3&lt;/span&gt;&lt;span&gt; å’Œ &lt;/span&gt;&lt;span&gt;T4&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;T5&lt;/span&gt;&lt;span&gt; å’Œ &lt;/span&gt;&lt;span&gt;T6&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;T7&lt;/span&gt;&lt;span&gt;&lt;span&gt; å’Œ &lt;/span&gt;&lt;/span&gt;&lt;span&gt;T8&lt;/span&gt;&lt;span&gt;&lt;span&gt;Â &lt;/span&gt;ä¹Ÿæ˜¯ä¸€æ ·çš„æµç¨‹ã€‚&lt;/span&gt;&lt;/p&gt;&lt;section&gt;&lt;span&gt;ä¸‹é¢æ˜¯åŠ å…¥æ•°æ®æ”¶é›†æœåŠ¡åæ¶æ„å›¾ã€‚ç›¸è¾ƒäºä¹‹å‰çš„ &lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;span&gt; ç‰ˆï¼Œå§‘ä¸”ç§°ä½œÂ &lt;/span&gt;&lt;span&gt;v2&lt;/span&gt;&lt;span&gt; ç‰ˆã€‚&lt;/span&gt;&lt;/section&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-backh=&quot;478&quot; data-backw=&quot;578&quot; data-ratio=&quot;0.8265625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/la8s6uvJibdQMxqDoTib2l7SaV7mbwN57OGkRck8cLzIrvcyHqdRYEgRYDIWKcI8zqnmKibZqPsXml1SOC7A1PJ4w/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å›¾Â 13&lt;/span&gt;&lt;span&gt;ï¼šæœç´¢æç¤ºçš„ç³»ç»Ÿæ¶æ„(v2)&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;7.Â &lt;/strong&gt;&lt;/span&gt;&lt;span&gt;è¿›é˜¶è®¨è®º&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1)&lt;/span&gt;&lt;span&gt;Â Â Â Â å¯¹äºç”¨æˆ·è¾“å…¥çš„å…³é”®è¯ï¼Œå¦‚æœæç¤ºè¯ä¸ä»…è¦æ»¡è¶³å‰ç¼€åŒ¹é…ï¼Œè¿˜è¦æ±‚èƒ½ä»»æ„ä½ç½®åŒ¹é…ï¼Œè¯¥æ€ä¹ˆå¤„ç†ï¼Ÿ&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯”å¦‚ï¼Œç”¨æˆ·è¾“å…¥&lt;/span&gt;&lt;span&gt;&quot;ultraman&quot;&lt;/span&gt;&lt;span&gt;ï¼Œä¸ä»…èƒ½è¿”å›æ»¡è¶³å‰ç¼€åŒ¹é…çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;ï¼š&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;ultraman&lt;/span&gt;&lt;span&gt; card&quot;&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;&quot;ultraman zero&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;ultraman&lt;/span&gt;&lt;span&gt; tiga&quot;&lt;/span&gt;&lt;span&gt; ç­‰ï¼Œè¿˜èƒ½è¿”å›éå‰ç¼€åŒ¹é…çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;ï¼Œå¦‚ï¼š&lt;/span&gt;&lt;span&gt;&quot;all &lt;/span&gt;&lt;span&gt;ultraman&lt;/span&gt;&lt;span&gt; name&quot;&lt;/span&gt;&lt;span&gt;ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦é€šè¿‡æœç´¢å¼•æ“çš„å…¨æ–‡æ£€ç´¢æ¥å®ç°ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;2)&lt;/span&gt;Â Â Â Â å¦‚ä½•å®ç°éè‹±æ–‡çš„æœç´¢æç¤ºï¼Ÿ&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è‹±æ–‡æœç´¢æç¤ºä¸­ï¼Œ&lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘çš„èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯ &lt;/span&gt;&lt;span&gt;ASCII&lt;/span&gt;&lt;span&gt; ç¼–ç çš„å­—ç¬¦ï¼Œé•¿åº¦ä¸ºÂ &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; ä¸ª&lt;/span&gt;&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;ã€‚éè‹±æ–‡ç¯å¢ƒä¸‹çš„æœç´¢æç¤ºï¼Œ&lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘çš„èŠ‚ç‚¹éœ€è¦å­˜å‚¨ &lt;/span&gt;&lt;span&gt;Unicode&lt;/span&gt;&lt;span&gt; ç¼–ç çš„å­—ç¬¦ï¼Œå­—ç¬¦é•¿åº¦å¯èƒ½æ˜¯ &lt;/span&gt;&lt;span&gt;1 byte&lt;/span&gt;&lt;span&gt;ï¼Œæˆ– &lt;/span&gt;&lt;span&gt;2 byte&lt;/span&gt;&lt;span&gt;ï¼Œæˆ– &lt;/span&gt;&lt;span&gt;3 byte&lt;/span&gt;&lt;span&gt;ï¼Œè§†å…·ä½“å­—ç¬¦åŠä¸åŒçš„Â &lt;/span&gt;&lt;span&gt;Unicode&lt;/span&gt;&lt;span&gt; ç¼–ç æ ¼å¼è€Œå®šï¼Œæ¯”å¦‚ï¼š&lt;/span&gt;&lt;span&gt;UTF-8&lt;/span&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;UTF-16&lt;/span&gt;&lt;span&gt; ç­‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœé€‰æ‹©äº†æŸä¸ªå­—ç¬¦ä¸²ç¼–ç æ¥å»º &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ï¼Œæ¯”å¦‚ &lt;/span&gt;&lt;span&gt;UTF-8&lt;/span&gt;&lt;span&gt;ï¼Œé‚£ä¹ˆå¯¹äºç”¨æˆ·è¾“å…¥çš„å…³é”®è¯ï¼Œä¹Ÿè¦å…ˆå°†å…¶è½¬æ¢æˆ &lt;/span&gt;&lt;span&gt;U&lt;/span&gt;&lt;span&gt;TF-8&lt;/span&gt;&lt;span&gt;ï¼Œå†åˆ° &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ä¸­æŸ¥è¯¢ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å†è¿›ä¸€æ­¥ï¼Œæ€ä¹ˆå®ç°ä¸­æ–‡çš„æœç´¢æç¤ºå‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¯¹äºä¸­æ–‡è€Œè¨€ï¼Œæœ‰ä¸¤ç§æ–¹æ³•æ„å»º &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ã€‚&lt;/span&gt;&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å°†&lt;/span&gt;&lt;span&gt;ä¸­æ–‡æ‹†è§£æˆå•ä¸ªçš„å­—ï¼Œ&lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘èŠ‚ç‚¹ä¸­çš„ &lt;/span&gt;&lt;span&gt;prefix&lt;/span&gt;&lt;span&gt; å­—æ®µå­˜çš„æ˜¯å‰ç¼€è¯çš„&lt;/span&gt;&lt;span&gt;UTF-8&lt;/span&gt;&lt;span&gt; ç¼–ç ï¼Œè¿™ç§æ–¹å¼åˆ›å»ºçš„ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ï¼Œå«Â &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&lt;span&gt;ä¸­æ–‡Â &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt;Â æ ‘&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å°†ä¸­æ–‡è½¬æ¢ä¸ºæ‹¼éŸ³ï¼Œ&lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘èŠ‚ç‚¹ä¸­çš„ &lt;/span&gt;&lt;span&gt;prefix&lt;/span&gt;&lt;span&gt; å­—æ®µå­˜çš„æ˜¯&lt;span/&gt;&lt;span&gt;å‰ç¼€è¯&lt;/span&gt;&lt;span&gt;çš„&lt;/span&gt;å…¬å…±å‰ç¼€&lt;span&gt;ï¼Œè¿™ç§æ–¹å¼åˆ›å»ºçš„Â &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt;Â æ ‘ï¼Œå«Â &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;æ‹¼éŸ³&lt;/span&gt;&lt;span&gt;&lt;span&gt;Â &lt;span&gt;Trie&lt;/span&gt;Â æ ‘&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬å¯ä»¥åŒæ—¶å»ºç«‹ä¸­æ–‡ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘å’Œæ‹¼éŸ³ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ã€‚ç³»ç»Ÿä¼šæ ¹æ®ä¸€å®šçš„ç­–ç•¥é€‰æ‹©æŸ¥è¯¢ ä¸­æ–‡ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘è¿˜æ˜¯æ‹¼éŸ³ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ã€‚ä¸€æ ·çš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; å­˜åœ¨ä¸¤ç§å½¢å¼çš„ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ä¸­ï¼Œè¿™æ˜¯ä¸€ç§ç”¨ç©ºé—´æ¢æ—¶é—´çš„ç­–ç•¥ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åªåˆ›å»ºæ‹¼éŸ³ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ã€‚å¦‚æœç”¨æˆ·è¾“å…¥çš„å…³é”®è¯æ˜¯æ‹¼éŸ³ï¼Œå°±å¯ä»¥ç›´æ¥æŸ¥è¯¢ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ï¼Œè·å–æœç´¢æç¤ºã€‚å¦‚æœç”¨æˆ·è¾“å…¥çš„å…³é”®è¯æ˜¯ä¸­æ–‡ &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;æ¯”å¦‚é‡‡ç”¨äº†æ‰‹å†™è¾“å…¥&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šå…ˆå°†å…³é”®è¯è½¬æ¢æˆæ‹¼éŸ³ï¼Œå†åˆ° &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ä¸­æŸ¥è¯¢ã€‚ä¸&lt;span&gt;åŒ&lt;/span&gt;&lt;span&gt;æ—¶å»ºç«‹ä¸¤æ£µ &lt;/span&gt;&lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt;&lt;span&gt; æ ‘&lt;/span&gt;&lt;/span&gt;&lt;span&gt;ç›¸æ¯”ï¼Œè¿™ç§æ–¹å¼çœäº†è¿‘ä¸€åŠçš„ç©ºé—´ã€‚ä½†ç”±äºæŸ¥è¯¢è¿‡ç¨‹ä¸­å¯èƒ½ä¼šå­˜åœ¨æ±‰å­—è½¬æ‹¼éŸ³çš„è€—æ—¶ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ç§ç”¨æ—¶é—´æ¢ç©ºé—´çš„ç­–ç•¥ã€‚è¿™ç§æ–¹æ³•æ¯”è¾ƒé€‚åˆç”¨æˆ·å¤šæ˜¯æ‹¼éŸ³è¾“å…¥çš„åœºæ™¯ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;3)Â Â Â Â &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘è¿˜å¯ä»¥ä¼˜åŒ–å—ï¼Ÿ&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;åœ¨æ–‡ä¸­ï¼Œæˆ‘ä»¬å¯¹ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘è¿›è¡Œäº†ä¸€å®šçš„ä¼˜åŒ–ï¼Œæ¯”å¦‚å›ºå®šå‰ç¼€é•¿åº¦ï¼Œåˆå¹¶å•ç‹¬çš„å­èŠ‚ç‚¹ç­‰ã€‚å®é™…å·¥ä½œä¸­ï¼Œç‰¹åˆ«æ˜¯å¯¹äºéè‹±æ–‡çš„æœç´¢æç¤ºï¼Œå¦‚ä¸­æ–‡æœç´¢æç¤ºï¼Œä½¿ç”¨å¾—æ›´å¤šçš„ä¸æ˜¯ä¼ ç»Ÿçš„ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ï¼Œè€Œæ˜¯ &lt;/span&gt;&lt;span&gt;Double Array TrieÂ &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;åŒæ•°ç»„ &lt;/span&gt;&lt;span&gt;Trie &lt;/span&gt;&lt;span&gt;æ ‘ï¼Œç®€ç§° &lt;/span&gt;&lt;span&gt;DAT)&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;span&gt;DAT&lt;/span&gt;&lt;span&gt; èƒ½åœ¨ä¿è¯æŸ¥è¯¢æ•ˆç‡çš„å‰æä¸‹ï¼Œè¿›ä¸€æ­¥å‡å°‘ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘çš„å ç”¨ç©ºé—´ã€‚å…·ä½“å®ç°å¯å‚è€ƒï¼šÂ &lt;/span&gt;&lt;span&gt;https://linux.thai.net/~thep/datrie/datrie.html&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;4)Â Â Â Â &lt;/span&gt;&lt;span&gt;Client&lt;/span&gt;&lt;span&gt;Â ç«¯ &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;ç½‘é¡µæˆ–Â &lt;/span&gt;&lt;span&gt;App)Â &lt;/span&gt;&lt;span&gt;çš„ä¼˜åŒ–&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æˆ‘ä»¬å¯ä»¥åœ¨ &lt;/span&gt;&lt;span&gt;Client&lt;/span&gt;&lt;span&gt; ç«¯ä¸Šæ‰§è¡Œä»¥ä¸‹ä¼˜åŒ–ï¼Œä»¥æ”¹å–„ç”¨æˆ·ä½“éªŒï¼š&lt;/span&gt;&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;é™ä½ &lt;/span&gt;&lt;span&gt;Client&lt;/span&gt;&lt;span&gt; ç«¯å¯¹ &lt;/span&gt;&lt;span&gt;Server&lt;/span&gt;&lt;span&gt; ç«¯è¯·æ±‚çš„é¢‘ç‡ã€‚å¯ä»¥åœ¨ &lt;/span&gt;&lt;span&gt;Client&lt;/span&gt;&lt;span&gt; ç«¯è®¾ç½®ä¸€å®šçš„ç­–ç•¥ï¼Œæ¯”å¦‚è¾“å…¥ &lt;/span&gt;&lt;span&gt;2~3&lt;/span&gt;&lt;span&gt; ä¸ªå­—ç¬¦æˆ–é—´éš” &lt;/span&gt;&lt;span&gt;100 ms&lt;/span&gt;&lt;span&gt;ï¼Œæ‰å‘ &lt;/span&gt;&lt;span&gt;Server&lt;/span&gt;&lt;span&gt; è¯·æ±‚ä¸€æ¬¡ã€‚è¿™ç§ &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;å»¶è¿Ÿè¯·æ±‚&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Â çš„ç­–ç•¥åœ¨ &lt;/span&gt;&lt;span&gt;KafkaÂ &lt;/span&gt;&lt;span&gt;ä¸­ä¹Ÿæœ‰ä½“ç°ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;Client&lt;/span&gt;&lt;span&gt; ç«¯å¯ä»¥ä» &lt;/span&gt;&lt;span&gt;Server&lt;/span&gt;&lt;span&gt; ç«¯é¢„å–ä¸€äº›æ•°æ®ï¼Œä¿å­˜åœ¨æœ¬åœ°ã€‚æ¯”å¦‚ï¼Œç”¨æˆ·è¾“å…¥&lt;/span&gt;&lt;span&gt;&quot;a&quot;&lt;/span&gt;&lt;span&gt;ï¼ŒæœåŠ¡å™¨é™¤äº†è¿”å›ä»¥ &lt;/span&gt;&lt;span&gt;&quot;a&quot;&lt;/span&gt;&lt;span&gt;Â ä½œä¸ºå‰ç¼€çš„æç¤ºè¯ï¼Œè¿˜ä¼šæ ¹æ®ä¸€å®šè§„åˆ™ï¼Œè¿”å›å‰ç¼€ä¸º &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;ab&lt;/span&gt;&lt;span&gt;&quot;Â &lt;/span&gt;æˆ– &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;ac&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; çš„æç¤ºè¯ã€‚è¿™æ ·ï¼Œå¦‚æœç”¨æˆ·ä¸‹ä¸€ä¸ªå­—ç¬¦è¾“å…¥&lt;span&gt;&quot;c&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;Client&lt;/span&gt;&lt;span&gt; ç«¯å°±å¯ä»¥ç›´æ¥åœ¨æœ¬åœ°æ‹¿åˆ°ç»“æœï¼Œè€Œä¸å¿…å†å‘æœåŠ¡ç«¯å‘è¯·æ±‚ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;Client&lt;/span&gt;&lt;span&gt; ç«¯å¯ä»¥åœ¨æœ¬åœ°ç¼“å­˜æœ€è¿‘çš„æœç´¢æç¤ºã€‚ä¸‹å›¾æ‰€ç¤ºæ˜¯Â &lt;/span&gt;&lt;span&gt;Google&lt;/span&gt;&lt;span&gt; çš„å…³é”®è¯æœç´¢ï¼Œæœç´¢ç»“æœç¼“å­˜äº† &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt; å°æ—¶ï¼Œè¿™æ ·åœ¨Â &lt;/span&gt;&lt;span&gt;1Â &lt;/span&gt;&lt;span&gt;å°æ—¶å†…ï¼ŒåŒæ ·çš„ç”¨æˆ·æœç´¢åŒæ ·çš„å…³é”®è¯ï¼Œå°±å¯ä»¥ç›´æ¥ä»å®¢æˆ·ç«¯æœ¬åœ°ç¼“å­˜ä¸­å–æ•°æ®ï¼Œè€Œä¸éœ€è¦å‘é€è¯·æ±‚ä»æœåŠ¡ç«¯è·å–æ•°æ®ï¼›&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;section&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.6688741721854304&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/la8s6uvJibdQMxqDoTib2l7SaV7mbwN57OeHKsnyQt1OzPe7fJokD4TB0vhJ7fmZdlGr0pvjZhVuLibLl9lwVamQw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;604&quot;/&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;Client&lt;/span&gt;&lt;span&gt; ç«¯å¯ä»¥ä¸ &lt;/span&gt;&lt;span&gt;Server&lt;/span&gt;&lt;span&gt; ç«¯æå‰å»ºç«‹è¿æ¥ã€‚è¿™æ ·ï¼Œ&lt;/span&gt;&lt;span&gt;Client&lt;/span&gt;&lt;span&gt; ç«¯ä¸ä¼šç­‰åˆ°ç”¨æˆ·å¼€å§‹è¾“å…¥å…³é”®è¯æ—¶ï¼Œæ‰å¼€å§‹èŠ±æ—¶é—´å»ºç«‹è¿æ¥ã€‚æ¯•ç«Ÿå»ºç«‹ &lt;/span&gt;&lt;span&gt;TCP&lt;/span&gt;&lt;span&gt; è¿æ¥æ˜¯æ¯”è¾ƒè€—æ—¶çš„ï¼Œæ…¢çš„æ—¶å€™ï¼Œç”¨æˆ·å¯èƒ½è¾“äº†å¥½å¤šå­—ï¼Œç³»ç»Ÿä¹Ÿæ²¡æœ‰ç»™å‡ºæç¤ºã€‚å½“ç„¶ï¼Œæå‰å»ºç«‹è¿æ¥ï¼Œä¹Ÿè¦è§†æƒ…å†µè€Œå®šï¼Œå¦‚æœç½‘ç«™æˆ–åº”ç”¨å½“å¤©æœ‰å¤§æµé‡çš„æ´»åŠ¨ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬åè€Œè¦æ§åˆ¶æå‰è¿æ¥çš„æ•°é‡ï¼Œç”šè‡³å…³é—­æå‰è¿æ¥çš„æœºåˆ¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;5)Â Â Â Â Â &lt;/span&gt;&lt;span&gt;Query&lt;/span&gt;&lt;span&gt;Â çš„è¿‡æ»¤&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¯¹ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; è¿›è¡Œè¿‡æ»¤ï¼Œä¸»è¦å‡ºäºä¸¤æ–¹é¢çš„åŸå› ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ol class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;é˜²æ­¢æœç´¢çš„æ— ç»“æœï¼šç”¨æˆ·è¾“å…¥å…³é”®è¯çš„è¿›è¡Œæœç´¢çš„ç›®çš„ï¼Œä¸»è¦æ˜¯ä¸ºäº†æ‰¾æƒ³è¦çš„ç»“æœã€‚å¦‚æœç”¨æˆ·é€‰æ‹©äº†æŸä¸ªæç¤ºè¯ï¼Œä½†æ˜¯ç‚¹å‡»æœç´¢ä¹‹åæœç´¢å¼•æ“å´è¿”å›ç©ºï¼Œè¿™ä¸­ç”¨æˆ·ä½“éªŒæ˜¯ä¸å¤ªå¥½çš„ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åº”è¯¥åœ¨æ¯å¤©è·‘è¯é¢‘ç»Ÿè®¡çš„ &lt;/span&gt;&lt;span&gt;Map-Reduce &lt;/span&gt;&lt;span&gt;ä»»åŠ¡é˜¶æ®µï¼Œåœ¨ä»åŸå§‹æ—¥å¿—ä¸­æŠ½å– &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; çš„æ—¶å€™ï¼Œå°±è¦è¿‡æ»¤æ‰æ— æœç´¢ç»“æœçš„ &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt;ï¼Œé˜²æ­¢è¿™äº› &lt;/span&gt;&lt;span&gt;query&lt;/span&gt;&lt;span&gt; è¿›å…¥ &lt;/span&gt;&lt;span&gt;Trie&lt;/span&gt;&lt;span&gt; æ ‘ï¼›&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;æŸäº›æ•æ„Ÿè¯æ±‡ï¼Œä¹Ÿéœ€è¦åœ¨åš &lt;/span&gt;&lt;span&gt;Map-Reduce&lt;/span&gt;&lt;span&gt; è¯é¢‘ç»Ÿè®¡çš„æ—¶å€™ï¼ŒæŠŠå®ƒä»¬è¿‡æ»¤æ‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;6)Â Â Â Â &lt;/span&gt;ä¸ªæ€§åŒ–æœç´¢æç¤º&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¦‚æœéœ€è¦è¿›ä¸€æ­¥è€ƒè™‘æå‡æœç´¢æç¤ºçš„ç”¨æˆ·ä½“éªŒï¼Œä¸åŒç”¨æˆ·æœåŒä¸€ä¸ªå…³é”®è¯ï¼Œç³»ç»Ÿä¼šç»“åˆç”¨æˆ·çš„å†å²æœç´¢ä¿¡æ¯ã€åœ°ç†ä½ç½®ä¿¡æ¯Â &lt;/span&gt;&lt;span&gt;(GEO)&lt;/span&gt;&lt;span&gt;ã€è¯­è¨€ã€åå¥½ç­‰ä¿¡æ¯ï¼Œè¿”å›ä¸ªæ€§åŒ–çš„æœç´¢æç¤ºï¼Œè¿™éœ€è¦æ¶‰åŠæ›´å¤šçš„æ¨èç®—æ³•ï¼Œæœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ç»§ç»­æ·±å…¥äº†è§£ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç»ˆäºæ¥åˆ°äº†å°¾å£°ï¼Œæ„Ÿè°¢ä½ çš„åšæŒï¼&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Enjoy ~&lt;/span&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>01d164421258ff763dfaf7dbee363fc8</guid>
<title>é¢è¯•å®˜ï¼šä½ è¯´ä½ ç²¾é€š Redisï¼Œä½ çœ‹è¿‡æŒä¹…åŒ–çš„é…ç½®å—ï¼Ÿ</title>
<link>https://toutiao.io/k/sd8x1dj</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‰è¾¹æˆ‘ä»¬å·²ç»ä»‹ç»äº†&lt;code&gt;Redis&lt;/code&gt;&lt;strong&gt;äº”ç§æ•°æ®ç±»å‹çš„å‘½ä»¤&lt;/strong&gt;ä¸&lt;strong&gt;é…ç½®æ–‡ä»¶çš„åŸºæœ¬é…ç½®&lt;/strong&gt;ï¼Œä»Šå¤©è®©æˆ‘ä»¬ä»ç†è®ºå’Œé…ç½®ä¸¤ä¸ªå±‚é¢æ¥æ­å¼€&lt;code&gt;Redis&lt;/code&gt;æŒä¹…åŒ–çš„ç¥ç§˜é¢çº±ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€è°“æŒä¹…åŒ–å¯ä»¥ç®€å•ç†è§£ä¸ºå°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ°ç¡¬ç›˜ä¸Šå­˜å‚¨çš„è¿‡ç¨‹ã€‚æŒä¹…åŒ–ä¹‹åçš„æ•°æ®åœ¨ç³»ç»Ÿé‡å¯æˆ–è€…å®•æœºä¹‹åä¾ç„¶å¯ä»¥è¿›è¡Œè®¿é—®ï¼Œä¿è¯äº†æ•°æ®çš„å®‰å…¨æ€§ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Redis&lt;/code&gt;æœ‰ä¸¤ç§æŒä¹…åŒ–æ–¹æ¡ˆï¼Œä¸€ç§æ˜¯å¿«ç…§æ–¹å¼ï¼ˆ&lt;code&gt;SNAPSHOTTING&lt;/code&gt;ï¼‰ï¼Œç®€ç§°&lt;code&gt;RDB&lt;/code&gt;ï¼›ä¸€ç§æ˜¯åªè¿½åŠ æ¨¡å¼ï¼ˆ&lt;code&gt;APPEND ONLY MODE&lt;/code&gt;ï¼‰ï¼Œç§°ä¸ºAOFã€‚æ¥ä¸‹æ¥è®©æˆ‘ä»¬åˆ†åˆ«äº†è§£ä¸€ä¸‹å®ƒä»¬çš„ä½¿ç”¨ä¸æ³¨æ„äº‹é¡¹ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;RDB&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;RDB&lt;/code&gt;ä¸º&lt;code&gt;Redis DataBase&lt;/code&gt;çš„ç¼©å†™ï¼Œæ˜¯ &lt;code&gt;Redis&lt;/code&gt; é»˜è®¤çš„æŒä¹…åŒ–æ–¹æ¡ˆã€‚å®ƒèƒ½å¤Ÿåœ¨æŒ‡å®šçš„æ—¶é—´é—´éš”å†…å°†å†…å­˜æ•°æ®é›†å¿«ç…§ï¼ˆ&lt;code&gt;snapshot&lt;/code&gt;ï¼‰å†™å…¥ç£ç›˜ï¼Œæ¢å¤æ—¶å°†å¿«ç…§æ–‡ä»¶ï¼ˆ &lt;code&gt;dump.rdb&lt;/code&gt; ï¼‰è¯»å›å†…å­˜ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;0.3778280542986425&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/55HPQyguvpPM2hwOgfQibfibWxxDm1Xnfic1XFrOueOROABq8t3Wdc7qYllVnYfkKhfK1PtAvHdeT03PZlmbRrlsQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;442&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬å…ˆæ¥æ‰’ä¸€ä¸‹é…ç½®æ–‡ä»¶ä¸­çš„&lt;code&gt;SNAPSHOTTING&lt;/code&gt;:&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é…ç½®æ–‡ä»¶&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;save Â &lt;code&gt;&amp;lt;seconds&amp;gt; &amp;lt;changes&amp;gt;&lt;/code&gt;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ç»™å®šçš„&lt;strong&gt;ç§’æ•°&lt;/strong&gt;å†…ï¼Œå¦‚æœå¯¹æ•°æ®åº“æ‰§è¡Œçš„&lt;strong&gt;å†™å…¥æ“ä½œæ•°&lt;/strong&gt;è¾¾åˆ°è®¾å®šçš„å€¼ï¼Œåˆ™å°†æ•°æ®åŒæ­¥åˆ°æ•°æ®æ–‡ä»¶ã€‚æ”¯æŒå¤šä¸ªæ¡ä»¶é…åˆï¼Œ&lt;code&gt;Redis&lt;/code&gt;é»˜è®¤é…ç½®æ–‡ä»¶ä¸­æä¾›äº†ä¸‰ä¸ªæ¡ä»¶ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;saveÂ 900Â 1Â //900så†…æœ‰1ä¸ªæ›´æ”¹&lt;br/&gt;saveÂ 300Â 10Â //300så†…æœ‰10ä¸ªæ›´æ”¹&lt;br/&gt;saveÂ 60Â 10000Â //60så†…æœ‰10000æ¬¡æ›´æ”¹&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šè‹¥ä¸æƒ³ç”¨&lt;code&gt;RDB&lt;/code&gt;æ–¹æ¡ˆï¼Œå¯ä»¥æŠŠ &lt;code&gt;save &quot;&quot;&lt;/code&gt;çš„æ³¨é‡Šæ‰“å¼€ï¼Œä¸Šè¾¹ä¸‰ä¸ªæ³¨é‡Šæ‰ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;stop-writes-on-bgsave-error yes&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“&lt;code&gt;bgsave&lt;/code&gt;å‡ºç°é”™è¯¯æ—¶ï¼Œ&lt;code&gt;Redis&lt;/code&gt;æ˜¯å¦åœæ­¢æ‰§è¡Œå†™å‘½ä»¤ï¼›&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å¦‚æœä¸º&lt;code&gt;yes&lt;/code&gt;ï¼Œåˆ™å½“ç¡¬ç›˜å‡ºç°é—®é¢˜æ—¶ï¼Œ&lt;code&gt;Redis&lt;/code&gt;å°†åœæ­¢æ¥å—å†™å…¥æ“ä½œï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥åŠæ—¶å‘ç°ï¼Œé¿å…æ•°æ®çš„å¤§é‡ä¸¢å¤±ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¦‚æœä¸º&lt;code&gt;no&lt;/code&gt;ï¼Œåˆ™&lt;code&gt;Redis&lt;/code&gt;æ— è§†&lt;code&gt;bgsave&lt;/code&gt;çš„é”™è¯¯ç»§ç»­æ‰§è¡Œå†™å‘½ä»¤ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å¦‚æœå·²ç»è®¾ç½®äº†å¯¹&lt;code&gt;Redis&lt;/code&gt;æœåŠ¡å™¨çš„æ­£ç¡®ç›‘è§†å’ŒæŒä¹…æ€§ï¼Œå³é‡‡ç”¨äº†å…¶ä»–æ‰‹æ®µå‘ç°å’Œæ§åˆ¶æ•°æ®å®Œæ•´æ€§ï¼Œå¯èƒ½å¸Œæœ›ç¦ç”¨æ­¤åŠŸèƒ½ï¼Œä»¥ä¾¿å³ä½¿åœ¨ç£ç›˜ã€æƒé™ç­‰æ–¹é¢å‡ºç°é—®é¢˜æ—¶ï¼Œ&lt;code&gt;Redis&lt;/code&gt;ä»èƒ½æ­£å¸¸å·¥ä½œã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šå¦‚æœåå°ä¿å­˜è¿‡ç¨‹å°†å†æ¬¡å¼€å§‹å·¥ä½œï¼Œ&lt;code&gt;Redis&lt;/code&gt;å°†è‡ªåŠ¨å…è®¸å†æ¬¡å†™å…¥ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;rdbcompression yes&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æŒ‡å®šå­˜å‚¨åˆ°æœ¬åœ°æ•°æ®åº“æ—¶æ˜¯å¦&lt;strong&gt;å‹ç¼©&lt;/strong&gt;ï¼ˆ&lt;code&gt;Redis&lt;/code&gt;é‡‡ç”¨&lt;code&gt;LZF&lt;/code&gt;å‹ç¼©ï¼‰æ•°æ®ï¼Œé»˜è®¤ä¸º&lt;code&gt;yes&lt;/code&gt;ã€‚å¦‚æœä¸ºäº†èŠ‚çœ&lt;code&gt;CPU&lt;/code&gt;æ—¶é—´ï¼Œå¯ä»¥å…³é—­è¯¥é€‰é¡¹ï¼Œä½†ä¼šå¯¼è‡´æ•°æ®åº“æ–‡ä»¶å˜å¾—å·¨å¤§ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;rdbchecksum yes&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»&lt;code&gt;RDB&lt;/code&gt;ç‰ˆæœ¬&lt;code&gt;5&lt;/code&gt;å¼€å§‹ï¼Œåœ¨å­˜å‚¨å¿«ç…§åï¼Œè¿˜å¯ä»¥ä½¿ç”¨&lt;code&gt;CRC64&lt;/code&gt;ç®—æ³•æ¥è¿›è¡Œæ•°æ®æ ¡éªŒï¼Œ&lt;code&gt;CRC64&lt;/code&gt;æ ¡éªŒæ”¾åœ¨æ–‡ä»¶çš„æœ«å°¾ã€‚å¼€å¯ä¹‹åï¼Œä¿å­˜å’ŒåŠ è½½&lt;code&gt;RDB&lt;/code&gt;æ–‡ä»¶æ—¶ä¼šå¢åŠ å¤§çº¦&lt;code&gt;10%&lt;/code&gt;çš„æ€§èƒ½æ¶ˆè€—ï¼Œå¦‚æœå¸Œæœ›è·å–åˆ°æœ€å¤§çš„æ€§èƒ½æå‡ï¼Œå¯ä»¥å…³é—­æ­¤åŠŸèƒ½ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¦ç”¨&lt;strong&gt;æ ¡éªŒå’Œ&lt;/strong&gt;åˆ›å»ºçš„&lt;code&gt;RDB&lt;/code&gt;æ–‡ä»¶çš„æ ¡éªŒå’Œä¸ºé›¶ï¼Œè¿™å°†å‘Šè¯‰åŠ è½½ä»£ç è·³è¿‡æ£€æŸ¥ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;dbfilename dump.rdb&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æŒ‡å®šæœ¬åœ°æ•°æ®åº“æ–‡ä»¶åï¼Œé‡å¯ä¹‹åè‡ªåŠ¨åŠ è½½è¿›&lt;strong&gt;å†…å­˜&lt;/strong&gt;ï¼Œæ‰‹åŠ¨æ‰§è¡Œ&lt;code&gt;save&lt;/code&gt; å‘½ä»¤çš„è¯å³åˆ»ç”Ÿæ•ˆã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;strong&gt;å¤§å‘è¯·æ³¨æ„&lt;/strong&gt;ï¼š&lt;code&gt;flushall&lt;/code&gt;ã€&lt;code&gt;shutdown&lt;/code&gt;å‘½ä»¤éƒ½ä¼šæ¸…ç©ºå¹¶æäº¤è‡³&lt;code&gt;dump.rdb&lt;/code&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;dir ./&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æŒ‡å®šæœ¬åœ°æ•°æ®åº“å­˜æ”¾ç›®å½•ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç†è®º&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å·¥ä½œæ–¹å¼&lt;span/&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å½“ &lt;code&gt;Redis&lt;/code&gt; éœ€è¦ä¿å­˜&lt;code&gt;dump.rdb&lt;/code&gt;æ–‡ä»¶æ—¶ï¼Œå®ƒä¼šè°ƒç”¨ç³»ç»Ÿå‡½æ•°&lt;code&gt;fork()&lt;/code&gt;ï¼Œåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼ˆä¸ä¸»è¿›ç¨‹å®Œå…¨ä¸€è‡´ï¼‰;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å­è¿›ç¨‹å°†æ•°æ®é›†å†™å…¥ä¸´æ—¶æ–‡ä»¶&lt;code&gt;RDB&lt;/code&gt;ä¸­ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å½“å­è¿›ç¨‹å®Œæˆå¯¹æ–° &lt;code&gt;RDB&lt;/code&gt; æ–‡ä»¶çš„å†™å…¥æ—¶ï¼Œ&lt;code&gt;Redis&lt;/code&gt; ç”¨æ–° &lt;code&gt;RDB&lt;/code&gt; æ–‡ä»¶æ›¿æ¢åŸæ¥çš„ &lt;code&gt;RDB&lt;/code&gt; æ–‡ä»¶ï¼Œå¹¶åˆ é™¤æ—§çš„ &lt;code&gt;RDB&lt;/code&gt; æ–‡ä»¶ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ç§å·¥ä½œæ–¹å¼ä½¿å¾— &lt;code&gt;Redis&lt;/code&gt; å¯ä»¥ä»å†™æ—¶å¤åˆ¶ï¼ˆ&lt;code&gt;copy-on-write&lt;/code&gt;ï¼‰æœºåˆ¶ä¸­è·ç›Šã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å¦‚ä½•è§¦å‘RDBå¿«ç…§&lt;span/&gt;&lt;/h4&gt;&lt;ol data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;é…ç½®æ–‡ä»¶ä¸­é»˜è®¤çš„å¿«ç…§é…ç½®ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å‘½ä»¤&lt;code&gt;save&lt;/code&gt;ï¼ˆé˜»å¡ï¼Œ åªç®¡ä¿å­˜å¿«ç…§ï¼Œå…¶ä»–çš„ç­‰å¾…ï¼‰æˆ–è€…æ˜¯&lt;code&gt;bgsave&lt;/code&gt;ï¼ˆå¼‚æ­¥ï¼‰å‘½ä»¤ï¼Œå¿«ç…§åŒæ—¶è¿˜å¯ä»¥å“åº”å®¢æˆ·ç«¯å‘½ä»¤ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ‰§è¡Œ&lt;code&gt;flushall&lt;/code&gt; å‘½ä»¤ï¼Œæ¸…ç©ºæ•°æ®åº“æ‰€æœ‰æ•°æ®ï¼Œæ„ä¹‰ä¸å¤§;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ‰§è¡Œ&lt;code&gt;shutdown&lt;/code&gt; å‘½ä»¤ï¼Œä¿è¯æœåŠ¡å™¨æ­£å¸¸å…³é—­ä¸”ä¸ä¸¢å¤±ä»»ä½•æ•°æ®ï¼Œæ„ä¹‰ä¹Ÿä¸å¤§ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ol&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é€šè¿‡RDBæ–‡ä»¶æ¢å¤æ•°æ®&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸€èˆ¬ä¼šè€ƒè™‘åˆ°ç‰©ç†æœºç¡¬ç›˜æŸåçš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼šé€‰æ‹©å¤‡ä»½&lt;code&gt;dump.rdb&lt;/code&gt;æ–‡ä»¶ã€‚å°†å¤‡ä»½çš„&lt;code&gt;dump.rdb&lt;/code&gt; æ–‡ä»¶æ‹·è´åˆ°&lt;code&gt;redis&lt;/code&gt;çš„å®‰è£…ç›®å½•çš„&lt;code&gt;bin&lt;/code&gt;ç›®å½•ä¸‹ï¼Œé‡å¯&lt;code&gt;redis&lt;/code&gt;æœåŠ¡å³å¯ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¼˜ç‚¹&lt;span/&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;RDB&lt;/code&gt;æ˜¯ä¸€ä¸ªéå¸¸ç´§å‡‘çš„æ–‡ä»¶ï¼Œéå¸¸é€‚ç”¨äºæ•°æ®é›†çš„å¤‡ä»½ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;RDB&lt;/code&gt;æ˜¯ä¸€ä¸ªç´§å‡‘çš„å•ä¸€æ–‡ä»¶ï¼Œå¾ˆæ–¹ä¾¿ä¼ é€åˆ°å¦ä¸€ä¸ªè¿œç«¯æ•°æ®ä¸­å¿ƒæˆ–è€…äºšé©¬é€Šçš„S3ï¼ˆå¯èƒ½åŠ å¯†ï¼‰ï¼Œéå¸¸é€‚ç”¨äºç¾éš¾æ¢å¤ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;Redis&lt;/code&gt;çš„ä¸»è¿›ç¨‹ä¸è¿›è¡Œ&lt;code&gt;I/O&lt;/code&gt;æ“ä½œï¼Œç¡®ä¿äº†æé«˜çš„æ€§èƒ½ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;é€‚åˆå¤§è§„æ¨¡æ•°æ®çš„æ¢å¤ï¼Œå¯¹äºæ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§è¦æ±‚ä¸é«˜çš„è¯ï¼Œ&lt;code&gt;RDB&lt;/code&gt;æ¯”&lt;code&gt;AOF&lt;/code&gt;æ–¹å¼æ›´åŠ é«˜æ•ˆã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç¼ºç‚¹&lt;span/&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;åœ¨&lt;code&gt;Redis&lt;/code&gt;æ„å¤–å®•æœºæ—¶ï¼Œä½ å¯èƒ½ä¼šä¸¢å¤±å‡ åˆ†é’Ÿçš„æ•°æ®ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;RDB&lt;/code&gt; éœ€è¦ç»å¸¸&lt;code&gt;fork&lt;/code&gt;å­è¿›ç¨‹æ¥ä¿å­˜æ•°æ®é›†åˆ°ç¡¬ç›˜ä¸Šï¼Œå½“æ•°æ®é›†æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œ&lt;code&gt;fork&lt;/code&gt;çš„è¿‡ç¨‹æ˜¯éå¸¸è€—æ—¶çš„ï¼Œå¯èƒ½ä¼šå¯¼è‡´&lt;code&gt;Redis&lt;/code&gt;åœ¨ä¸€äº›æ¯«ç§’çº§å†…ä¸èƒ½å“åº”å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚å¦‚æœæ•°æ®é›†å·¨å¤§å¹¶ä¸”&lt;code&gt;CPU&lt;/code&gt;æ€§èƒ½ä¸æ˜¯å¾ˆå¥½çš„æƒ…å†µä¸‹ï¼Œè¿™ç§æƒ…å†µä¼šæŒç»­1ç§’ï¼›&lt;code&gt;AOF&lt;/code&gt;ä¹Ÿéœ€è¦&lt;code&gt;fork&lt;/code&gt;ï¼Œä½†æ˜¯å¯ä»¥è°ƒèŠ‚é‡å†™æ—¥å¿—æ–‡ä»¶çš„é¢‘ç‡æ¥æé«˜æ•°æ®é›†çš„è€ä¹…åº¦ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;AOF&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†è§£å†³&lt;code&gt;RDB&lt;/code&gt;æ–¹å¼åœ¨å®•æœºæ—¶ä¸¢å¤±æ•°æ®è¿‡å¤šçš„é—®é¢˜ï¼Œä»&lt;code&gt;1.1&lt;/code&gt; ç‰ˆæœ¬å¼€å§‹ï¼Œ&lt;code&gt;Redis&lt;/code&gt;å¢åŠ äº†ä¸€ç§&lt;code&gt;durable&lt;/code&gt;çš„æŒä¹…åŒ–æ–¹å¼ï¼š&lt;code&gt;AOF&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;AOF&lt;/code&gt;æ˜¯&lt;code&gt;Append Only File&lt;/code&gt;çš„ç¼©å†™ï¼Œé»˜è®¤ä¸å¼€å¯ã€‚&lt;code&gt;AOF&lt;/code&gt;ä»¥æ—¥å¿—çš„å½¢å¼æ¥è®°å½•æ¯ä¸ªå†™æ“ä½œï¼Œåªå…è®¸è¿½åŠ æ–‡ä»¶ä½†ä¸å¯ä»¥æ”¹å†™æ–‡ä»¶ï¼Œå½“æœåŠ¡å™¨é‡å¯çš„æ—¶å€™ä¼šé‡æ–°æ‰§è¡Œè¿™äº›å‘½ä»¤æ¥æ¢å¤åŸå§‹çš„æ•°æ®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹é…ç½®æ–‡ä»¶ä¸­çš„&lt;code&gt;APPEND ONLY MODE&lt;/code&gt;:&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é…ç½®æ–‡ä»¶&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;appendonly no&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é»˜è®¤ä¸ºå…³é—­çŠ¶æ€ï¼Œæ”¹ä¸º&lt;code&gt;yes&lt;/code&gt;æ‰“å¼€æŒä¹…åŒ–ã€‚&lt;code&gt;AOF&lt;/code&gt;å’Œ&lt;code&gt;RDB&lt;/code&gt;å¯ä»¥åŒæ—¶å¯ç”¨è€Œä¸ä¼šå‡ºç°é—®é¢˜ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;appendfilename &quot;appendonly.aof&quot;&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ–‡ä»¶é»˜è®¤åç§°ï¼Œå¯åŠ¨å³åˆ›å»ºã€‚åŠ è½½&lt;strong&gt;å…ˆäº&lt;/strong&gt;&lt;code&gt;dump.rdb&lt;/code&gt;æ–‡ä»¶&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;appendfsync&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŒæ­¥ç­–ç•¥ï¼šç³»ç»Ÿå‡½æ•°&lt;code&gt;fsync()&lt;/code&gt; å‘Šè¯‰æ“ä½œç³»ç»Ÿåœ¨ç£ç›˜ä¸Šå®é™…å†™å…¥æ•°æ®ã€‚&lt;code&gt;Redis&lt;/code&gt;æ”¯æŒä¸‰ç§ä¸åŒçš„æ¨¡å¼&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;appendfsyncÂ alwaysÂ //æ¯æ¬¡å‘ç”Ÿæ•°æ®å˜æ›´ä¼šè¢«ç«‹å³è®°å½•åˆ°ç£ç›˜ï¼Œæ€§èƒ½è¾ƒå·®ä½†æ•°æ®å®Œæ•´æ€§æ¯”è¾ƒå¥½&lt;br/&gt;appendfsyncÂ everysecÂ //é»˜è®¤æ¨èï¼Œå¼‚æ­¥æ“ä½œï¼Œæ¯ç§’è®°å½•ï¼Œå¦‚æœå®•æœºï¼Œæœ‰1ç§’å†…æ•°æ®ä¸¢å¤±&lt;br/&gt;appendfsyncÂ noÂ //ä¸åŒæ­¥ï¼Œåªæœ‰åœ¨æ“ä½œç³»ç»Ÿéœ€è¦æ—¶åœ¨åˆ·æ–°æ•°æ®&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¦æƒ³äº†è§£æ¥ä¸‹æ¥çš„é…ç½®å†…å®¹ï¼Œå…ˆå¾—è¯´ä¸€ä¸‹â€œæ—¥å¿—é‡å†™â€çš„åŸç†ï¼š&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;é‡å†™&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±äº&lt;code&gt;AOF&lt;/code&gt;é‡‡ç”¨çš„æ˜¯å°†å‘½ä»¤è¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾çš„æ–¹å¼ï¼Œæ‰€ä»¥éšç€å†™å…¥å‘½ä»¤çš„ä¸æ–­å¢åŠ ï¼Œ&lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶çš„ä½“ç§¯ä¼šå˜å¾—è¶Šæ¥è¶Šå¤§ã€‚ä¸ºé¿å…å‡ºç°æ­¤ç§æƒ…å†µï¼Œæ–°å¢äº†é‡å†™æœºåˆ¶ï¼šå¯ä»¥åœ¨ä¸æ‰“æ–­æœåŠ¡å®¢æˆ·ç«¯çš„æƒ…å†µä¸‹ï¼Œå¯¹&lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶è¿›è¡Œé‡å»ºï¼ˆ&lt;code&gt;rebuild&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;é‡å†™è§¦å‘ï¼š&lt;/strong&gt; é€šè¿‡æ‰§è¡Œ&lt;code&gt;bgrewriteaof&lt;/code&gt;å‘½ä»¤ï¼Œå¯ä»¥ç”Ÿæˆä¸€ä¸ªæ–°çš„&lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åŒ…å«é‡å»ºå½“å‰æ•°æ®é›†æ‰€éœ€çš„&lt;strong&gt;æœ€å°‘&lt;/strong&gt;å‘½ä»¤ã€‚&lt;code&gt;Redis 2.2&lt;/code&gt;éœ€æ‰‹åŠ¨æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œ&lt;code&gt;Redis 2.4&lt;/code&gt;åˆ™å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶çš„æ–¹å¼è‡ªåŠ¨è§¦å‘ï¼ˆé…ç½®åœ¨ä¸‹è¾¹æ¶‰åŠï¼‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;é‡å†™åŸç†ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;Redis&lt;/code&gt; æ‰§è¡Œç³»ç»Ÿå‡½æ•°&lt;code&gt;fork()&lt;/code&gt; ï¼Œåˆ›å»ºä¸€ä¸ªå­è¿›ç¨‹ï¼ˆä¸ä¸»è¿›ç¨‹å®Œå…¨ä¸€è‡´ï¼‰ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å­è¿›ç¨‹å¼€å§‹å°†æ–° &lt;code&gt;AOF&lt;/code&gt; æ–‡ä»¶çš„å†…å®¹å†™å…¥åˆ°ä¸´æ—¶æ–‡ä»¶ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¯¹äºæ‰€æœ‰æ–°æ‰§è¡Œçš„å†™å…¥å‘½ä»¤ï¼Œçˆ¶è¿›ç¨‹ä¸€è¾¹å°†å®ƒä»¬ç´¯ç§¯åˆ°ä¸€ä¸ªå†…å­˜ç¼“å­˜ä¸­ï¼Œä¸€è¾¹å°†è¿™äº›æ”¹åŠ¨è¿½åŠ åˆ°ç°æœ‰ &lt;code&gt;AOF&lt;/code&gt; æ–‡ä»¶çš„æœ«å°¾ï¼Œè¿™æ ·å³ä½¿åœ¨é‡å†™çš„ä¸­é€”å‘ç”Ÿåœæœºï¼Œç°æœ‰çš„ &lt;code&gt;AOF&lt;/code&gt; æ–‡ä»¶ä¹Ÿæ˜¯å®‰å…¨çš„ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å½“å­è¿›ç¨‹å®Œæˆé‡å†™å·¥ä½œæ—¶ï¼Œå®ƒç»™çˆ¶è¿›ç¨‹å‘é€ä¸€ä¸ªä¿¡å·ï¼Œçˆ¶è¿›ç¨‹åœ¨æ¥æ”¶åˆ°ä¿¡å·ä¹‹åï¼Œå°†å†…å­˜ç¼“å­˜ä¸­çš„æ‰€æœ‰æ•°æ®è¿½åŠ åˆ°æ–° &lt;code&gt;AOF&lt;/code&gt; æ–‡ä»¶çš„æœ«å°¾ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;Redis&lt;/code&gt; åŸå­åœ°ç”¨æ–°æ–‡ä»¶æ›¿æ¢æ—§æ–‡ä»¶ï¼Œä¹‹åæ‰€æœ‰å‘½ä»¤éƒ½ä¼šç›´æ¥è¿½åŠ åˆ°æ–° &lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶çš„æœ«å°¾ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;no-appendfsync-on-rewrite no&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“æˆ‘ä»¬åŒæ—¶æ‰§è¡Œä¸»è¿›ç¨‹çš„&lt;strong&gt;å†™æ“ä½œ&lt;/strong&gt;å’Œå­è¿›ç¨‹çš„&lt;strong&gt;é‡å†™&lt;/strong&gt;æ“ä½œæ—¶ï¼Œä¸¤è€…éƒ½ä¼šæ“ä½œç£ç›˜ï¼Œè€Œé‡å†™å¾€å¾€ä¼šæ¶‰åŠåˆ°å¤§é‡çš„ç£ç›˜æ“ä½œï¼Œè¿™æ ·å°±ä¼šé€ æˆä¸»è¿›ç¨‹åœ¨å†™&lt;code&gt;aof&lt;/code&gt;æ–‡ä»¶çš„æ—¶å€™å‡ºç°é˜»å¡çš„æƒ…å½¢ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ&lt;code&gt;no-appendfsync-on-rewrite&lt;/code&gt;å‚æ•°å‡ºåœºäº†ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å¦‚æœè¯¥å‚æ•°è®¾ç½®ä¸º&lt;code&gt;no&lt;/code&gt;ï¼Œæ˜¯æœ€å®‰å…¨çš„æ–¹å¼ï¼Œä¸ä¼šä¸¢å¤±æ•°æ®ï¼Œä½†æ˜¯è¦å¿å—é˜»å¡çš„é—®é¢˜ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¦‚æœè®¾ç½®ä¸º&lt;code&gt;yes&lt;/code&gt;ï¼Œè¿™å°±ç›¸å½“äºå°†&lt;code&gt;appendfsync&lt;/code&gt;è®¾ç½®ä¸º&lt;code&gt;no&lt;/code&gt;ï¼Œè¿™è¯´æ˜å¹¶æ²¡æœ‰æ‰§è¡Œç£ç›˜æ“ä½œï¼Œåªæ˜¯å†™å…¥äº†ç¼“å†²åŒºã€‚å› æ­¤è¿™æ ·å¹¶ä¸ä¼šé€ æˆé˜»å¡ï¼ˆå› ä¸ºæ²¡æœ‰ç«äº‰ç£ç›˜ï¼‰ï¼Œä½†æ˜¯å¦‚æœè¿™ä¸ªæ—¶å€™&lt;code&gt;redis&lt;/code&gt;æŒ‚æ‰ï¼Œå°±ä¼šä¸¢å¤±æ•°æ®ã€‚ä¸¢å¤±å¤šå°‘æ•°æ®å‘¢ï¼Ÿåœ¨&lt;code&gt;linux&lt;/code&gt;çš„æ“ä½œç³»ç»Ÿçš„é»˜è®¤è®¾ç½®ä¸‹ï¼Œæœ€å¤šä¼šä¸¢å¤±30sçš„æ•°æ®ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å› æ­¤ï¼Œå¦‚æœåº”ç”¨ç³»ç»Ÿæ— æ³•å¿å—å»¶è¿Ÿï¼Œè€Œå¯ä»¥å®¹å¿å°‘é‡çš„æ•°æ®ä¸¢å¤±ï¼Œåˆ™è®¾ç½®ä¸º&lt;code&gt;yes&lt;/code&gt;ï¼›å¦‚æœåº”ç”¨ç³»ç»Ÿæ— æ³•å¿å—æ•°æ®ä¸¢å¤±ï¼Œåˆ™è®¾ç½®ä¸º&lt;code&gt;no&lt;/code&gt;ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;auto-aof-rewrite-percentage 100&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‡å†™ç™¾åˆ†æ¯”ï¼Œé»˜è®¤ä¸ºä¸Šæ¬¡é‡å†™å&lt;code&gt;aof&lt;/code&gt;æ–‡ä»¶å¤§å°çš„ä¸€å€ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;auto-aof-rewrite-min-size 64mb&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é‡å†™è§¦å‘çš„æœ€å°å€¼ï¼š64mbã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ ¹æ®&lt;code&gt;auto-aof-rewrite-min-size&lt;/code&gt;å’Œ&lt;code&gt;auto-aof-rewrite-percentage&lt;/code&gt;å‚æ•°ç¡®å®šè‡ªåŠ¨è§¦å‘æ—¶æœºã€‚&lt;code&gt;Redis&lt;/code&gt;ä¼šè®°å½•ä¸Šæ¬¡é‡å†™æ—¶çš„&lt;code&gt;AOF&lt;/code&gt;å¤§å°ï¼Œé»˜è®¤é…ç½®æ˜¯å½“&lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶å¤§å°æ˜¯ä¸Šæ¬¡&lt;code&gt;rewrite&lt;/code&gt;åå¤§å°çš„ä¸€å€ä¸”æ–‡ä»¶å¤§äº&lt;code&gt;64M&lt;/code&gt;æ—¶è§¦å‘ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;å¤§å‹äº’è”ç½‘å…¬å¸ä¸€èˆ¬éƒ½æ˜¯&lt;code&gt;3G&lt;/code&gt;èµ·æ­¥&lt;/p&gt;&lt;/blockquote&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;aof-load-truncated yes&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“&lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶è¢«æˆªæ–­æ—¶ï¼Œå³&lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶çš„æœ€åå‘½ä»¤ä¸å®Œæ•´ï¼Œå¦‚æœæ­¤æ—¶å¯åŠ¨&lt;code&gt;Redis&lt;/code&gt;ï¼Œä¼šå°†&lt;code&gt;AOF&lt;/code&gt;æ•°æ®åŠ è½½å›å†…å­˜ï¼Œæ­¤æ—¶ä¾¿ä¼šå‡ºç°é—®é¢˜ã€‚&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;yesï¼šåŠ è½½ä¸€ä¸ªæˆªæ–­çš„&lt;code&gt;AOF&lt;/code&gt;ï¼Œ&lt;code&gt;Redis&lt;/code&gt;æœåŠ¡å™¨å¼€å§‹å‘å‡ºæ—¥å¿—ï¼Œé€šçŸ¥ç”¨æˆ·è¯¥äº‹ä»¶ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;noï¼šæœåŠ¡å™¨å°†ä¸­æ­¢å¹¶å‡ºç°é”™è¯¯ï¼Œæ‹’ç»å¯åŠ¨ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“æˆ‘ä»¬å¾—çŸ¥&lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶æŠ¥é”™æ—¶ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹æ–¹æ³•æ¥ä¿®å¤å‡ºé”™çš„ &lt;code&gt;AOF&lt;/code&gt; æ–‡ä»¶ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ä¸ºç°æœ‰çš„ &lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶åˆ›å»ºä¸€ä¸ªå¤‡ä»½ï¼›&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;Redis&lt;/code&gt; é™„å¸¦çš„ &lt;code&gt;redis-check-aof&lt;/code&gt; å‘½ä»¤ï¼Œå¯¹åŸæ¥çš„&lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶è¿›è¡Œä¿®å¤ï¼›&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;redis-check-aof â€“fix&lt;/code&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;&lt;code&gt;redis-check-aof --fix appendonly.aof&lt;/code&gt; Â ä¿®å¤å‘½ä»¤ï¼Œæ€å…‰ä¸ç¬¦åˆè§„èŒƒçš„è¯­æ³•&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;ï¼ˆ&lt;strong&gt;å¯é€‰&lt;/strong&gt;ï¼‰ä½¿ç”¨ &lt;code&gt;diff -u&lt;/code&gt; å¯¹æ¯”ä¿®å¤åçš„ &lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶å’ŒåŸå§‹ &lt;code&gt;AOF&lt;/code&gt; æ–‡ä»¶çš„å¤‡ä»½ï¼ŒæŸ¥çœ‹ä¸¤ä¸ªæ–‡ä»¶ä¹‹é—´çš„ä¸åŒä¹‹å¤„ï¼›&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;é‡å¯ &lt;code&gt;Redis&lt;/code&gt;æœåŠ¡å™¨ï¼Œç­‰å¾…æœåŠ¡å™¨è½½å…¥ä¿®å¤åçš„ &lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶ï¼Œå¹¶è¿›è¡Œæ•°æ®æ¢å¤ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;aof-use-rdb-preamble yes&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨é‡å†™&lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶æ—¶ï¼Œ&lt;code&gt;Redis&lt;/code&gt;èƒ½å¤Ÿåœ¨&lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶ä¸­ä½¿ç”¨&lt;code&gt;RDB&lt;/code&gt;å‰å¯¼ï¼Œä»¥åŠ å¿«é‡å†™å’Œæ¢å¤é€Ÿåº¦ã€‚å¯ç”¨æ­¤é€‰é¡¹åï¼Œé‡å†™çš„&lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶ç”±ä¸¤ä¸ªä¸åŒçš„èŠ‚ç»„æˆï¼š&lt;code&gt;RDB file&lt;/code&gt;ã€&lt;code&gt;AOF tail&lt;/code&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŠ è½½&lt;code&gt;Redis&lt;/code&gt;æ—¶ï¼Œä¼šè¯†åˆ«&lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶ä»¥&lt;strong&gt;Redis&lt;/strong&gt;å­—ç¬¦ä¸²å¼€å¤´ï¼Œå¹¶åŠ è½½å¸¦å‰ç¼€çš„&lt;code&gt;RDB&lt;/code&gt;æ–‡ä»¶ï¼Œç„¶åç»§ç»­åŠ è½½&lt;code&gt;AOF&lt;/code&gt;å°¾éƒ¨ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç†è®º&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ä¼˜ç‚¹&lt;span/&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;æ•°æ®çš„å®Œæ•´æ€§å’Œä¸€è‡´æ€§æ›´é«˜ï¼Œ&lt;code&gt;AOF&lt;/code&gt;çš„æŒä¹…åŒ–é€šè¿‡ä½¿ç”¨ä¸åŒçš„ç­–ç•¥ï¼Œæœ€å¤šä¸¢å¤±1ç§’çš„æ•°æ®ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶æ˜¯ä¸€ä¸ªåªè¿›è¡Œè¿½åŠ çš„æ—¥å¿—æ–‡ä»¶ï¼Œä¸éœ€è¦å†™å…¥&lt;code&gt;seek&lt;/code&gt;ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;Redis&lt;/code&gt;å¯ä»¥åœ¨ &lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶ä½“ç§¯å˜å¾—è¿‡å¤§æ—¶ï¼Œè‡ªåŠ¨åœ°åœ¨åå°å¯¹ &lt;code&gt;AOF&lt;/code&gt; è¿›è¡Œé‡å†™ï¼Œé‡å†™æ“ä½œæ˜¯ç»å¯¹å®‰å…¨çš„ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶è®°å½•çš„å†™å…¥æ“ä½œä»¥&lt;code&gt;Redis&lt;/code&gt;åè®®çš„æ ¼å¼ä¿å­˜ï¼Œå®¹æ˜“è¯»æ‡‚ï¼Œå®¹æ˜“å¯¹æ–‡ä»¶è¿›è¡Œåˆ†æï¼›&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;ç¼ºç‚¹&lt;span/&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;å¯¹äºç›¸åŒçš„æ•°æ®é›†æ¥è¯´ï¼Œ&lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶çš„ä½“ç§¯é€šå¸¸è¦å¤§äº&lt;code&gt;RDB&lt;/code&gt;æ–‡ä»¶çš„ä½“ç§¯ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ ¹æ®æ‰€ä½¿ç”¨çš„ &lt;code&gt;fsync&lt;/code&gt; ç­–ç•¥ï¼Œ&lt;code&gt;AOF&lt;/code&gt;çš„é€Ÿåº¦å¯èƒ½ä¼šæ…¢äº&lt;code&gt;RDB&lt;/code&gt; ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ¯ç§’ &lt;code&gt;fsync&lt;/code&gt; çš„æ€§èƒ½ä¾ç„¶éå¸¸é«˜ï¼Œè€Œå…³é—­ &lt;code&gt;fsync&lt;/code&gt; å¯ä»¥è®© &lt;code&gt;AOF&lt;/code&gt; çš„é€Ÿåº¦å’Œ &lt;code&gt;RDB&lt;/code&gt; ä¸€æ ·å¿«ï¼Œ å³ä½¿åœ¨é«˜è´Ÿè·ä¹‹ä¸‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä¸è¿‡åœ¨å¤„ç†å·¨å¤§çš„å†™å…¥è½½å…¥æ—¶ï¼Œ&lt;code&gt;RDB&lt;/code&gt; å¯ä»¥æä¾›æ›´æœ‰ä¿è¯çš„æœ€å¤§å»¶è¿Ÿæ—¶é—´ï¼ˆ&lt;code&gt;latency&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å¯¹æ¯”ä¸æ€»ç»“&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;/h2&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å¦‚ä½•é€‰æ‹©ä½¿ç”¨å“ªç§æŒä¹…åŒ–æ–¹å¼ï¼Ÿ&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœæƒ³è¾¾åˆ°è¶³ä»¥åª²ç¾ &lt;code&gt;PostgreSQL&lt;/code&gt; çš„æ•°æ®å®‰å…¨æ€§ï¼Œåº”è¯¥åŒæ—¶ä½¿ç”¨ä¸¤ç§æŒä¹…åŒ–åŠŸèƒ½ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœéå¸¸å…³å¿ƒæ•°æ®ï¼Œä½†ä»ç„¶å¯ä»¥æ‰¿å—æ•°åˆ†é’Ÿä»¥å†…çš„æ•°æ®ä¸¢å¤±ï¼Œé‚£ä¹ˆå¯ä»¥åªä½¿ç”¨ &lt;code&gt;RDB&lt;/code&gt; æŒä¹…åŒ–ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±äºAOFæŒä¹…åŒ–çš„å®æ—¶æ€§æ›´å¥½ï¼Œå³å½“è¿›ç¨‹æ„å¤–é€€å‡ºæ—¶ä¸¢å¤±çš„æ•°æ®æ›´å°‘ï¼Œå› æ­¤&lt;code&gt;AOF&lt;/code&gt;æ˜¯ç›®å‰&lt;strong&gt;ä¸»æµ&lt;/strong&gt;çš„æŒä¹…åŒ–æ–¹å¼ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ‰å¾ˆå¤šç”¨æˆ·éƒ½åªä½¿ç”¨&lt;code&gt;AOF&lt;/code&gt;æŒä¹…åŒ–ï¼Œä½†æˆ‘ä»¬å¹¶ä¸æ¨èè¿™ç§æ–¹å¼ï¼šå› ä¸ºå®šæ—¶ç”Ÿæˆ &lt;code&gt;RDB&lt;/code&gt; å¿«ç…§ï¼ˆ&lt;code&gt;snapshot&lt;/code&gt;ï¼‰éå¸¸ä¾¿äºè¿›è¡Œæ•°æ®åº“å¤‡ä»½ï¼Œå¹¶ä¸” &lt;code&gt;RDB&lt;/code&gt; æ¢å¤æ•°æ®é›†çš„é€Ÿåº¦ä¹Ÿè¦æ¯” &lt;code&gt;AOF&lt;/code&gt; æ¢å¤çš„é€Ÿåº¦è¦å¿«ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;AOFå’ŒRDBä¹‹é—´çš„ç›¸äº’ä½œç”¨&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨ç‰ˆæœ¬å·å¤§äºç­‰äº &lt;code&gt;2.4&lt;/code&gt; çš„ &lt;code&gt;Redis&lt;/code&gt; ä¸­ï¼Œ&lt;code&gt;BGSAVE&lt;/code&gt; æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¸å¯ä»¥æ‰§è¡Œ &lt;code&gt;BGREWRITEAOF&lt;/code&gt; ã€‚åè¿‡æ¥è¯´ï¼Œåœ¨ &lt;code&gt;BGREWRITEAOF&lt;/code&gt; æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿä¸å¯ä»¥æ‰§è¡Œ &lt;code&gt;BGSAVE&lt;/code&gt;ã€‚è¿™å¯ä»¥é˜²æ­¢ä¸¤ä¸ª &lt;code&gt;Redis&lt;/code&gt; åå°è¿›ç¨‹åŒæ—¶å¯¹ç£ç›˜è¿›è¡Œå¤§é‡çš„&lt;code&gt;I/O&lt;/code&gt; æ“ä½œã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœ &lt;code&gt;BGSAVE&lt;/code&gt; æ­£åœ¨æ‰§è¡Œï¼Œå¹¶ä¸”ç”¨æˆ·æ˜¾ç¤ºåœ°è°ƒç”¨ &lt;code&gt;BGREWRITEAOF&lt;/code&gt; å‘½ä»¤ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°†å‘ç”¨æˆ·å›å¤ä¸€ä¸ª &lt;code&gt;OK&lt;/code&gt; çŠ¶æ€ï¼Œ å¹¶å‘ŠçŸ¥ç”¨æˆ·&lt;code&gt;BGREWRITEAOF&lt;/code&gt; å·²ç»è¢«é¢„å®šæ‰§è¡Œï¼šä¸€æ—¦ &lt;code&gt;BGSAVE&lt;/code&gt; æ‰§è¡Œå®Œæ¯•ï¼Œ&lt;code&gt;BGREWRITEAOF&lt;/code&gt;å°±ä¼šæ­£å¼å¼€å§‹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ &lt;code&gt;Redis&lt;/code&gt; å¯åŠ¨æ—¶ï¼Œå¦‚æœ &lt;code&gt;RDB&lt;/code&gt;æŒä¹…åŒ–å’Œ &lt;code&gt;AOF&lt;/code&gt; æŒä¹…åŒ–éƒ½è¢«æ‰“å¼€äº†ï¼Œ é‚£ä¹ˆç¨‹åºä¼šä¼˜å…ˆä½¿ç”¨ &lt;code&gt;AOF&lt;/code&gt; æ–‡ä»¶æ¥æ¢å¤æ•°æ®é›†ï¼Œå› ä¸º &lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶æ‰€ä¿å­˜çš„æ•°æ®é€šå¸¸æ˜¯æœ€å®Œæ•´çš„ã€‚&lt;/p&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;å¤‡ä»½redisæ•°æ®&lt;span/&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;section&gt;åˆ›å»ºä¸€ä¸ªå®šæœŸä»»åŠ¡ï¼ˆ&lt;code&gt;cron job&lt;/code&gt;ï¼‰ï¼Œæ¯å°æ—¶å°†ä¸€ä¸ª &lt;code&gt;RDB&lt;/code&gt; æ–‡ä»¶å¤‡ä»½åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”æ¯å¤©å°†ä¸€ä¸ª &lt;code&gt;RDB&lt;/code&gt; æ–‡ä»¶å¤‡ä»½åˆ°å¦ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ç¡®ä¿å¿«ç…§çš„å¤‡ä»½éƒ½å¸¦æœ‰ç›¸åº”çš„æ—¥æœŸå’Œæ—¶é—´ä¿¡æ¯ï¼Œæ¯æ¬¡æ‰§è¡Œå®šæœŸä»»åŠ¡è„šæœ¬æ—¶ï¼Œä½¿ç”¨ &lt;code&gt;find&lt;/code&gt; å‘½ä»¤æ¥åˆ é™¤è¿‡æœŸçš„å¿«ç…§ï¼›&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è‡³å°‘æ¯å¤©ä¸€æ¬¡ï¼Œå°† &lt;code&gt;RDB&lt;/code&gt; å¤‡ä»½åˆ°ä½ çš„æ•°æ®ä¸­å¿ƒä¹‹å¤–ï¼Œæˆ–è€…è‡³å°‘æ˜¯å¤‡ä»½åˆ°ä½ è¿è¡Œ &lt;code&gt;Redis&lt;/code&gt; æœåŠ¡å™¨çš„ç‰©ç†æœºå™¨ä¹‹å¤–ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;æ€§èƒ½å»ºè®®&lt;span/&gt;&lt;/h4&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åœ¨å®é™…åº”ç”¨æ—¶ï¼Œå› ä¸º&lt;code&gt;RDB&lt;/code&gt;æ–‡ä»¶åªç”¨ä½œåå¤‡ç”¨é€”ï¼Œå»ºè®®åªåœ¨&lt;code&gt;slave&lt;/code&gt;ä¸ŠæŒä¹…åŒ–&lt;code&gt;RDB&lt;/code&gt;æ–‡ä»¶ï¼Œè€Œä¸”åªéœ€è¦15åˆ†é’Ÿå¤‡ä»½ä¸€æ¬¡å°±å¤Ÿäº†ï¼Œåªä¿ç•™&lt;code&gt;save 900 1&lt;/code&gt;è¿™æ¡è§„åˆ™ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœå¼€å¯&lt;code&gt;AOF&lt;/code&gt;ï¼Œå¥½å¤„æ˜¯åœ¨æœ€æ¶åŠ£æƒ…å†µä¸‹ä¹Ÿåªä¼šä¸¢å¤±ä¸è¶…è¿‡2ç§’æ•°æ®ï¼Œå¯åŠ¨è„šæœ¬è¾ƒç®€å•åª&lt;code&gt;load&lt;/code&gt;è‡ªå·±çš„&lt;code&gt;AOF&lt;/code&gt;æ–‡ä»¶å°±å¯ä»¥äº†ã€‚ä»£ä»·ä¸€æ˜¯å¸¦æ¥äº†æŒç»­çš„&lt;code&gt;IO&lt;/code&gt;ï¼ŒäºŒæ˜¯&lt;code&gt;AOF rewrite&lt;/code&gt;çš„æœ€åå°†&lt;code&gt;rewrite&lt;/code&gt;è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ–°æ•°æ®å†™åˆ°æ–°æ–‡ä»¶é€ æˆçš„é˜»å¡å‡ ä¹æ˜¯ä¸å¯é¿å…çš„ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åªè¦ç¡¬ç›˜è®¸å¯ï¼Œåº”è¯¥å°½é‡å‡å°‘&lt;code&gt;AOF rewrite&lt;/code&gt;çš„é¢‘ç‡ï¼Œ&lt;code&gt;AOF&lt;/code&gt;é‡å†™çš„åŸºç¡€å¤§å°é»˜è®¤å€¼&lt;code&gt;64M&lt;/code&gt;å¤ªå°äº†ï¼Œå¯ä»¥è®¾ç½®åˆ°&lt;code&gt;5G&lt;/code&gt;ä»¥ä¸Šã€‚é»˜è®¤è¶…è¿‡åŸå¤§å°çš„100%æ—¶é‡å†™å¯ä»¥æ”¹åˆ°é€‚å½“çš„æ•°å€¼ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœä¸å¼€å¯&lt;code&gt;AOF&lt;/code&gt;ï¼Œä»…é &lt;code&gt;Master-Slave Replication&lt;/code&gt;å®ç°é«˜å¯ç”¨æ€§ä¹Ÿå¯ä»¥ã€‚èƒ½çœæ‰ä¸€å¤§ç¬”&lt;code&gt;IO&lt;/code&gt;ï¼Œä¹Ÿå‡å°‘äº†&lt;code&gt;rewrite&lt;/code&gt;æ—¶å¸¦æ¥çš„ç³»ç»Ÿæ³¢åŠ¨ã€‚ä»£ä»·æ˜¯å¦‚æœ&lt;code&gt;Master/Slave&lt;/code&gt;åŒæ—¶å€’æ‰ï¼Œä¼šä¸¢å¤±åå‡ åˆ†é’Ÿçš„æ•°æ®ï¼Œå¯åŠ¨è„šæœ¬ä¹Ÿè¦æ¯”è¾ƒä¸¤ä¸ª&lt;code&gt;Master/Slave&lt;/code&gt;ä¸­çš„&lt;code&gt;RDB&lt;/code&gt;æ–‡ä»¶ï¼Œè½½å…¥è¾ƒæ–°çš„é‚£ä¸ªã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»¥ä¸Šå°±æ˜¯ä»Šå¤©çš„å…¨éƒ¨å†…å®¹äº†ï¼Œå¦‚æœä½ æœ‰ä¸åŒçš„æ„è§æˆ–è€…æ›´å¥½çš„&lt;code&gt;idea&lt;/code&gt;ï¼Œæ¬¢è¿è”ç³»é˜¿Qï¼Œæ·»åŠ é˜¿Qå¯ä»¥åŠ å…¥æŠ€æœ¯äº¤æµç¾¤å‚ä¸è®¨è®ºå‘¦ï¼&lt;/p&gt;&lt;section class=&quot;mp_profile_iframe_wrp&quot;&gt;&lt;mpprofile class=&quot;js_uneditable custom_select_card mp_profile_iframe&quot; data-pluginname=&quot;mpprofile&quot; data-id=&quot;MzI5MDg2NjEzNA==&quot; data-headimg=&quot;http://mmbiz.qpic.cn/mmbiz_png/55HPQyguvpMAn4Ha81WVBfsKnC9ficVemZff27LiaSoKX83JqwnNmrNhb4D4oAjW7wiaDwtkLTTCRs1A1hanfNu9g/0?wx_fmt=png&quot; data-nickname=&quot;é˜¿Qè¯´ä»£ç &quot; data-alias=&quot;AQ_Shuo&quot; data-signature=&quot;ä¸“æ³¨äºåç«¯æŠ€æœ¯æ ˆåˆ†äº«ï¼šæ–‡ç« é£æ ¼å¤šå˜ã€é…å›¾é€šä¿—æ˜“æ‡‚ã€æ•…äº‹ç”ŸåŠ¨æœ‰è¶£&quot; data-from=&quot;1&quot;/&gt;&lt;/section&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>7417d670eb132ed08136f62f3ac0fa5d</guid>
<title>Kubernetes äº‘åŸç”Ÿç›‘æ§ä¹‹ cAdvisor å®¹å™¨èµ„æºç›‘æ§</title>
<link>https://toutiao.io/k/q0jzcg6</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content &quot; id=&quot;js_content&quot;&gt;
                    

                    
                    
                    
                    &lt;p mpa-paragraph-type=&quot;body&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;/p&gt;&lt;section data-recommend-type=&quot;list-normal&quot; data-recommend-tid=&quot;2&quot; data-mpa-template=&quot;t&quot; data-mid=&quot;&quot; data-from=&quot;yb-recommend&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-normal&quot; data-recomment-template-id=&quot;2&quot; data-recommend-article-id=&quot;2247484431_1&quot; data-recommend-article-time=&quot;1630281900&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/O2TDJPu7cb0RsJonDpYCorlR5gVQpYzAgmPkHGQN5Q399GP9frRVaPicIAQdlhUXGCHk8O1icekSnlhCFicNH62tw/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;ã€prometheusã€‘-05 Kubernetesäº‘åŸç”Ÿç›‘æ§ä¹‹èŠ‚ç‚¹æ€§èƒ½ç›‘æ§&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=MzIxNjM0OTk3MQ==&amp;amp;mid=2247484431&amp;amp;idx=1&amp;amp;sn=cf9b9ed53fadabac3adfcf62f51258b5&amp;amp;chksm=978b2873a0fca1652e91e29be97d82c3f6bdf36dd8b017ad3f3942b3da1841f72a072aff04e7#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzIxNjM0OTk3MQ==&amp;amp;mid=2247484431&amp;amp;idx=1&amp;amp;sn=cf9b9ed53fadabac3adfcf62f51258b5&amp;amp;chksm=978b2873a0fca1652e91e29be97d82c3f6bdf36dd8b017ad3f3942b3da1841f72a072aff04e7&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;1&quot;&gt;&lt;section data-recommend-content=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;p data-recommend-title=&quot;t&quot; data-mid=&quot;&quot;&gt;ã€prometheusã€‘-05 Kubernetesäº‘åŸç”Ÿç›‘æ§ä¹‹èŠ‚ç‚¹æ€§èƒ½ç›‘æ§&lt;/p&gt;&lt;p data-recommend-date=&quot;t&quot; data-mid=&quot;&quot;&gt;2021-08-30&lt;/p&gt;&lt;/section&gt;&lt;span class=&quot;js_jump_icon h5_image_link&quot; data-positionback=&quot;static&quot;&gt;&lt;img data-ratio=&quot;0.425&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/O2TDJPu7cb0RsJonDpYCorlR5gVQpYzAgmPkHGQN5Q399GP9frRVaPicIAQdlhUXGCHk8O1icekSnlhCFicNH62tw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/span&gt; &lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-normal&quot; data-recomment-template-id=&quot;2&quot; data-recommend-article-id=&quot;2247484394_1&quot; data-recommend-article-time=&quot;1629849900&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/O2TDJPu7cb1doddicXzKdSe5aGj2Y6SCq552mZicibytOL3sLOo85yaV8bS4Zaht3cfDMf0wpw4G29plaIibbVBDRw/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;ã€prometheusã€‘-04 è½»æ¾æå®šPrometheus EurekaæœåŠ¡å‘ç°&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=MzIxNjM0OTk3MQ==&amp;amp;mid=2247484394&amp;amp;idx=1&amp;amp;sn=20576cfb678e3a28f46be93efa024947&amp;amp;chksm=978b2f96a0fca680e61749cc8c46339df79bbfc7596cb426c1ca19b6b051d7edb87b37267706#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzIxNjM0OTk3MQ==&amp;amp;mid=2247484394&amp;amp;idx=1&amp;amp;sn=20576cfb678e3a28f46be93efa024947&amp;amp;chksm=978b2f96a0fca680e61749cc8c46339df79bbfc7596cb426c1ca19b6b051d7edb87b37267706&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;1&quot;&gt;&lt;section data-recommend-content=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;p data-recommend-title=&quot;t&quot; data-mid=&quot;&quot;&gt;ã€prometheusã€‘-04 è½»æ¾æå®šPrometheus EurekaæœåŠ¡å‘ç°&lt;/p&gt;&lt;p data-recommend-date=&quot;t&quot; data-mid=&quot;&quot;&gt;2021-08-25&lt;/p&gt;&lt;/section&gt;&lt;span class=&quot;js_jump_icon h5_image_link&quot; data-positionback=&quot;static&quot;&gt;&lt;img data-ratio=&quot;0.42578125&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/O2TDJPu7cb1doddicXzKdSe5aGj2Y6SCq552mZicibytOL3sLOo85yaV8bS4Zaht3cfDMf0wpw4G29plaIibbVBDRw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/span&gt; &lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-normal&quot; data-recomment-template-id=&quot;2&quot; data-recommend-article-id=&quot;2247484364_1&quot; data-recommend-article-time=&quot;1629677100&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/O2TDJPu7cb0sKLyrjzeJ4B3bYbAQRdJ1XS0Pj3pGibvp3KNqxv0w6FnEKsMWbJPvIPqzBD0o9qqgFudYkPZFyMQ/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;ã€prometheusã€‘-03 è½»æ¾æå®šPrometheusæ–‡ä»¶æœåŠ¡å‘ç°&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=MzIxNjM0OTk3MQ==&amp;amp;mid=2247484364&amp;amp;idx=1&amp;amp;sn=52e00b32275b994ac7e09cfe4f555f28&amp;amp;chksm=978b2fb0a0fca6a69759867116eb64682cad792165a0d010f8f2927883911b905ef5972edd90#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzIxNjM0OTk3MQ==&amp;amp;mid=2247484364&amp;amp;idx=1&amp;amp;sn=52e00b32275b994ac7e09cfe4f555f28&amp;amp;chksm=978b2fb0a0fca6a69759867116eb64682cad792165a0d010f8f2927883911b905ef5972edd90&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;1&quot;&gt;&lt;section data-recommend-content=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;p data-recommend-title=&quot;t&quot; data-mid=&quot;&quot;&gt;ã€prometheusã€‘-03 è½»æ¾æå®šPrometheusæ–‡ä»¶æœåŠ¡å‘ç°&lt;/p&gt;&lt;p data-recommend-date=&quot;t&quot; data-mid=&quot;&quot;&gt;2021-08-23&lt;/p&gt;&lt;/section&gt;&lt;span class=&quot;js_jump_icon h5_image_link&quot; data-positionback=&quot;static&quot;&gt;&lt;img data-ratio=&quot;0.4262295081967213&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/O2TDJPu7cb0sKLyrjzeJ4B3bYbAQRdJ1XS0Pj3pGibvp3KNqxv0w6FnEKsMWbJPvIPqzBD0o9qqgFudYkPZFyMQ/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;854&quot;/&gt;&lt;/span&gt; &lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-normal&quot; data-recomment-template-id=&quot;2&quot; data-recommend-article-id=&quot;2247484339_1&quot; data-recommend-article-time=&quot;1629245100&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/O2TDJPu7cb1onPQNJibtx9pJH80TaykSupIlrWb8cl4w4R32aKxqjpFrWSoy9yHvkMxCiaD8VEcse7WdWgk2BO5w/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;ã€prometheusã€‘-02 ä¸€å¼ å›¾å½»åº•ææ‡‚PrometheusæœåŠ¡å‘ç°æœºåˆ¶&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=MzIxNjM0OTk3MQ==&amp;amp;mid=2247484339&amp;amp;idx=1&amp;amp;sn=d1e741665840251d775f974263495f7d&amp;amp;chksm=978b2fcfa0fca6d993aee10b7990c1528f2a254642e9b20bbdb9ba62d7c0bed96d3f96689e14#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzIxNjM0OTk3MQ==&amp;amp;mid=2247484339&amp;amp;idx=1&amp;amp;sn=d1e741665840251d775f974263495f7d&amp;amp;chksm=978b2fcfa0fca6d993aee10b7990c1528f2a254642e9b20bbdb9ba62d7c0bed96d3f96689e14&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;1&quot;&gt;&lt;section data-recommend-content=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;p data-recommend-title=&quot;t&quot; data-mid=&quot;&quot;&gt;ã€prometheusã€‘-02 ä¸€å¼ å›¾å½»åº•ææ‡‚PrometheusæœåŠ¡å‘ç°æœºåˆ¶&lt;/p&gt;&lt;p data-recommend-date=&quot;t&quot; data-mid=&quot;&quot;&gt;2021-08-18&lt;/p&gt;&lt;/section&gt;&lt;span class=&quot;js_jump_icon h5_image_link&quot; data-positionback=&quot;static&quot;&gt;&lt;img data-ratio=&quot;0.42578125&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/O2TDJPu7cb1onPQNJibtx9pJH80TaykSupIlrWb8cl4w4R32aKxqjpFrWSoy9yHvkMxCiaD8VEcse7WdWgk2BO5w/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/span&gt; &lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;section data-mpa-template=&quot;t&quot; data-recommend-article-type=&quot;list-normal&quot; data-recomment-template-id=&quot;2&quot; data-recommend-article-id=&quot;2247484306_1&quot; data-recommend-article-time=&quot;1629072300&quot; data-recommend-article-cover=&quot;http://mmbiz.qpic.cn/mmbiz_jpg/O2TDJPu7cb3O7JCTqYXofpAwwj6icYsRYiaEJEC8gqFElqfXianTYgsQgk8UIfYF59Ra4n11HOebiblb1rgicShMiaLA/0?wx_fmt=jpeg&quot; data-recommend-article-title=&quot;ã€prometheusã€‘- 01 äº‘åŸç”Ÿæ—¶ä»£çš„ç›‘æ§ç³»ç»Ÿå…¥é—¨&quot; data-recommend-article-content-url=&quot;http://mp.weixin.qq.com/s?__biz=MzIxNjM0OTk3MQ==&amp;amp;mid=2247484306&amp;amp;idx=1&amp;amp;sn=b87ef781b6917c0a013221cb33588d73&amp;amp;chksm=978b2feea0fca6f8a40ecd767a933182aa4cfd914ada859c836c9ce77799339de6c4205de3f5#rd&quot;&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzIxNjM0OTk3MQ==&amp;amp;mid=2247484306&amp;amp;idx=1&amp;amp;sn=b87ef781b6917c0a013221cb33588d73&amp;amp;chksm=978b2feea0fca6f8a40ecd767a933182aa4cfd914ada859c836c9ce77799339de6c4205de3f5&amp;amp;scene=21#wechat_redirect&quot; data-linktype=&quot;1&quot;&gt;&lt;section data-recommend-content=&quot;t&quot; data-mid=&quot;&quot;&gt;&lt;section data-mid=&quot;&quot;&gt;&lt;p data-recommend-title=&quot;t&quot; data-mid=&quot;&quot;&gt;ã€prometheusã€‘- 01 äº‘åŸç”Ÿæ—¶ä»£çš„ç›‘æ§ç³»ç»Ÿå…¥é—¨&lt;/p&gt;&lt;p data-recommend-date=&quot;t&quot; data-mid=&quot;&quot;&gt;2021-08-16&lt;/p&gt;&lt;/section&gt;&lt;span class=&quot;js_jump_icon h5_image_link&quot; data-positionback=&quot;static&quot;&gt;&lt;img data-ratio=&quot;0.42421875&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/O2TDJPu7cb3O7JCTqYXofpAwwj6icYsRYiaEJEC8gqFElqfXianTYgsQgk8UIfYF59Ra4n11HOebiblb1rgicShMiaLA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/span&gt; &lt;/section&gt;&lt;/a&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;p&gt;&lt;/p&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;Kubernetesç›‘æ§æ¥å…¥ä¹‹cAdvisorå®¹å™¨èµ„æºç›‘æ§&lt;/h1&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ¦‚è¿°&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Kubernetes&lt;/code&gt; äº‘åŸç”Ÿé›†ç¾¤ç›‘æ§ä¸»è¦æ¶‰åŠåˆ°å¦‚ä¸‹ä¸‰ç±»æŒ‡æ ‡ï¼š&lt;code&gt;node&lt;/code&gt; ç‰©ç†èŠ‚ç‚¹æŒ‡æ ‡ã€&lt;code&gt;pod &amp;amp; container&lt;/code&gt; å®¹å™¨èµ„æºæŒ‡æ ‡å’Œ&lt;code&gt;Kubernetes&lt;/code&gt; äº‘åŸç”Ÿé›†ç¾¤èµ„æºæŒ‡æ ‡ã€‚é’ˆå¯¹è¿™ä¸‰ç±»æŒ‡æ ‡éƒ½æœ‰æ¯”è¾ƒæˆç†Ÿçš„æ–¹æ¡ˆï¼Œè§ä¸‹å›¾ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.65078125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/O2TDJPu7cb2rqVydNIpOUgA3icXuISFMC5iaKFy3GpFU0JoAWjacfKAexMY0dgwjtoKWRcmY4khmjibITQzPrp1hQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ŠèŠ‚æˆ‘ä»¬æ•´ç†äº†&lt;code&gt;node&lt;/code&gt;æ€§èƒ½æŒ‡æ ‡å¦‚ä½•ç›‘æ§ï¼Œè¿™ä¸€èŠ‚æˆ‘ä»¬å°±æ¥åˆ†æä¸‹&lt;code&gt;cAdvisor&lt;/code&gt;æ€§èƒ½æŒ‡æ ‡ç›‘æ§ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;cAdvisor(Container Advisor)&lt;/code&gt; æ˜¯ &lt;code&gt;Google&lt;/code&gt; å¼€æºçš„ä¸€ä¸ªå®¹å™¨ç›‘æ§å·¥å…·ï¼Œå¯ç”¨äºå¯¹å®¹å™¨èµ„æºçš„ä½¿ç”¨æƒ…å†µå’Œæ€§èƒ½è¿›è¡Œç›‘æ§ã€‚å®ƒä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œï¼Œç”¨äºæ”¶é›†ã€èšåˆã€å¤„ç†å’Œå¯¼å‡ºæ­£åœ¨è¿è¡Œå®¹å™¨çš„æœ‰å…³ä¿¡æ¯ã€‚å…·ä½“æ¥è¯´ï¼Œè¯¥ç»„ä»¶å¯¹æ¯ä¸ªå®¹å™¨éƒ½ä¼šè®°å½•å…¶èµ„æºéš”ç¦»å‚æ•°ã€å†å²èµ„æºä½¿ç”¨æƒ…å†µã€å®Œæ•´å†å²èµ„æºä½¿ç”¨æƒ…å†µçš„ç›´æ–¹å›¾å’Œç½‘ç»œç»Ÿè®¡ä¿¡æ¯ã€‚&lt;code&gt;cAdvisor&lt;/code&gt; æœ¬èº«å°±å¯¹ &lt;code&gt;Docker&lt;/code&gt; å®¹å™¨æ”¯æŒï¼Œå¹¶ä¸”è¿˜å¯¹å…¶å®ƒç±»å‹çš„å®¹å™¨å°½å¯èƒ½çš„æä¾›æ”¯æŒï¼ŒåŠ›æ±‚å…¼å®¹ä¸é€‚é…æ‰€æœ‰ç±»å‹çš„å®¹å™¨ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç”±ä»¥ä¸Šä»‹ç»æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œ&lt;code&gt;cAdvisor&lt;/code&gt; æ˜¯ç”¨äºç›‘æ§å®¹å™¨å¼•æ“çš„ï¼Œç”±äºå…¶ç›‘æ§çš„å®ç”¨æ€§ï¼Œ&lt;code&gt;Kubernetes&lt;/code&gt; å·²ç»é»˜è®¤å°†å…¶ä¸ &lt;code&gt;Kubelet&lt;/code&gt; èåˆï¼Œæ‰€ä»¥æˆ‘ä»¬æ— éœ€å†å•ç‹¬éƒ¨ç½² &lt;code&gt;cAdvisor&lt;/code&gt; ç»„ä»¶æ¥æš´éœ²èŠ‚ç‚¹ä¸­å®¹å™¨è¿è¡Œçš„ä¿¡æ¯ï¼Œç›´æ¥ä½¿ç”¨ &lt;code&gt;Kubelet&lt;/code&gt; ç»„ä»¶æä¾›çš„æŒ‡æ ‡é‡‡é›†åœ°å€å³å¯ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç¯å¢ƒä¿¡æ¯&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬äººæ­å»ºçš„ &lt;code&gt;Kubernetes&lt;/code&gt; é›†ç¾¤ç¯å¢ƒå¦‚ä¸‹å›¾ï¼Œåç»­éƒ½æ˜¯åŸºäºè¯¥é›†ç¾¤æ¼”ç¤ºï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.6395450568678915&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/O2TDJPu7cb2rqVydNIpOUgA3icXuISFMCyiaZ4pG9icqDibVmTMjmSWNUWicBbl7EdIRB3nDFPEF4iaibOWWTCZ8kNEWg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1143&quot;/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Prometheusæ¥å…¥&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.5847107438016529&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/O2TDJPu7cb2rqVydNIpOUgA3icXuISFMCgHRtF9YfOG5lSDAvtgTicnef0iaV6DLkv3GZVASTESUQURfzhOa4Kl6g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;968&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;1ã€è®¿é—®&lt;code&gt;Prometheus API&lt;/code&gt;æ–¹å¼æ£€æŸ¥ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;kubectlÂ getÂ --rawÂ /api/v1/nodes/&lt;span&gt;${1}&lt;/span&gt;/proxy/metrics/cadvisor&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;2ã€åˆ›å»º&lt;code&gt;Prometheus&lt;/code&gt;æŠ“å–ä»»åŠ¡&lt;code&gt;job&lt;/code&gt;ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;Â Â &lt;span&gt;-&lt;/span&gt;Â &lt;span&gt;job_name:&lt;/span&gt;Â &lt;span&gt;kubernetes-nodes-cadvisor&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;metrics_path:&lt;/span&gt;Â &lt;span&gt;/metrics&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;scheme:&lt;/span&gt;Â &lt;span&gt;https&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;kubernetes_sd_configs:&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;-&lt;/span&gt;Â &lt;span&gt;role:&lt;/span&gt;Â &lt;span&gt;node&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;api_server:&lt;/span&gt;Â &lt;span&gt;https://apiserver.simon:6443&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;bearer_token_file:&lt;/span&gt;Â &lt;span&gt;/tools/token.k8s&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;tls_config:&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â Â Â &lt;span&gt;insecure_skip_verify:&lt;/span&gt;Â &lt;span&gt;true&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;bearer_token_file:&lt;/span&gt;Â &lt;span&gt;/tools/token.k8s&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;tls_config:&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;insecure_skip_verify:&lt;/span&gt;Â &lt;span&gt;true&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;relabel_configs:&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â å°†æ ‡ç­¾(.*)ä½œä¸ºæ–°æ ‡ç­¾åï¼ŒåŸæœ‰å€¼ä¸å˜&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;-&lt;/span&gt;Â &lt;span&gt;action:&lt;/span&gt;Â &lt;span&gt;labelmap&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;regex:&lt;/span&gt;Â &lt;span&gt;__meta_kubernetes_node_label_(.*)&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;#Â ä¿®æ”¹NodeIP:10250ä¸ºAPIServerIP:6443&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;-&lt;/span&gt;Â &lt;span&gt;action:&lt;/span&gt;Â &lt;span&gt;replace&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;regex:&lt;/span&gt;Â &lt;span&gt;(.*)&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;source_labels:&lt;/span&gt;Â &lt;span&gt;[&quot;__address__&quot;]&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;target_label:&lt;/span&gt;Â &lt;span&gt;__address__&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;replacement:&lt;/span&gt;Â &lt;span&gt;192.168&lt;/span&gt;&lt;span&gt;.52&lt;/span&gt;&lt;span&gt;.151&lt;/span&gt;&lt;span&gt;:6443&lt;/span&gt;Â &lt;span&gt;#apiserver&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;-&lt;/span&gt;Â &lt;span&gt;action:&lt;/span&gt;Â &lt;span&gt;replace&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;source_labels:&lt;/span&gt;Â &lt;span&gt;[__meta_kubernetes_node_name]&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;target_label:&lt;/span&gt;Â &lt;span&gt;__metrics_path__&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;regex:&lt;/span&gt;Â &lt;span&gt;(.*)&lt;/span&gt;&lt;br/&gt;Â Â Â Â Â Â &lt;span&gt;replacement:&lt;/span&gt;Â &lt;span&gt;/api/v1/nodes/${1}/proxy/metrics/cadvisor&lt;/span&gt;Â Â &lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;3ã€æ£€æŸ¥æ˜¯å¦æ¥å…¥æˆåŠŸï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.2359375&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/O2TDJPu7cb2rqVydNIpOUgA3icXuISFMCiciaNjVPWJptt2qLtTibcv9qIpPp2BujnkYKMplKnibibAqsB6Db030qGLw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;br/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;4ã€&lt;code&gt;cAdvisor&lt;/code&gt;ç»„ä»¶æŠ“å–æŒ‡æ ‡åˆ—è¡¨ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;container_fs_write_seconds_total{}&lt;br/&gt;container_memory_swap{}&lt;br/&gt;container_spec_cpu_shares{}&lt;br/&gt;container_ulimits_soft{}&lt;br/&gt;container_fs_io_current{}&lt;br/&gt;container_fs_reads_bytes_total{}&lt;br/&gt;container_fs_writes_merged_total{}&lt;br/&gt;container_cpu_user_seconds_total{}&lt;br/&gt;container_memory_failcnt{}&lt;br/&gt;container_memory_failures_total{}&lt;br/&gt;container_cpu_cfs_throttled_seconds_total{}&lt;br/&gt;container_cpu_usage_seconds_total{}&lt;br/&gt;container_fs_io_time_seconds_total{}&lt;br/&gt;container_network_receive_packets_total{}&lt;br/&gt;container_spec_memory_reservation_limit_bytes{}&lt;br/&gt;cadvisor_version_info{}&lt;br/&gt;container_cpu_cfs_periods_total{}&lt;br/&gt;container_fs_limit_bytes{}&lt;br/&gt;container_fs_sector_writes_total{}&lt;br/&gt;container_memory_usage_bytes{}&lt;br/&gt;container_memory_working_set_bytes{}&lt;br/&gt;container_network_receive_errors_total{}&lt;br/&gt;container_network_transmit_packets_dropped_total{}&lt;br/&gt;container_spec_cpu_period{}&lt;br/&gt;container_file_descriptors{}&lt;br/&gt;container_fs_inodes_total{}&lt;br/&gt;container_fs_usage_bytes{}&lt;br/&gt;container_network_transmit_packets_total{}&lt;br/&gt;container_cpu_load_average_10s{}&lt;br/&gt;container_fs_writes_bytes_total{}&lt;br/&gt;container_memory_cache{}&lt;br/&gt;container_spec_cpu_quota{}&lt;br/&gt;container_cpu_cfs_throttled_periods_total{}&lt;br/&gt;container_network_receive_bytes_total{}&lt;br/&gt;container_network_transmit_errors_total{}&lt;br/&gt;container_sockets{}&lt;br/&gt;container_spec_memory_swap_limit_bytes{}&lt;br/&gt;container_threads{}&lt;br/&gt;container_threads_max{}&lt;br/&gt;container_cpu_system_seconds_total{}&lt;br/&gt;container_fs_read_seconds_total{}&lt;br/&gt;container_fs_reads_merged_total{}&lt;br/&gt;container_fs_sector_reads_total{}&lt;br/&gt;container_processes{}&lt;br/&gt;container_spec_memory_limit_bytes{}&lt;br/&gt;container_fs_inodes_free{}&lt;br/&gt;container_network_receive_packets_dropped_total{}&lt;br/&gt;container_network_transmit_bytes_total{}&lt;br/&gt;container_fs_io_time_weighted_seconds_total{}&lt;br/&gt;container_fs_reads_total{}&lt;br/&gt;container_fs_writes_total{}&lt;br/&gt;container_memory_max_usage_bytes{}&lt;br/&gt;container_memory_rss{}&lt;br/&gt;container_scrape_error{}&lt;br/&gt;container_start_time_seconds{}&lt;br/&gt;container_last_seen{}&lt;br/&gt;container_memory_mapped_file{}&lt;br/&gt;container_tasks_state{}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;dashboardé…ç½®&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¼å…¥&lt;code&gt;3125 æˆ– 13025 dashboard&lt;/code&gt;ï¼Œ&lt;code&gt;cAdvisor&lt;/code&gt;æ€§èƒ½ç›‘æ§æŒ‡æ ‡å°±å±•ç¤ºåˆ°æ¨¡æ¿ä¸Šï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.496875&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/O2TDJPu7cb2rqVydNIpOUgA3icXuISFMC2IsbTXKmyY7tN4Q9WwOyibibQlGpG1uob6oSIHcsah81aOrBgjkWTe0A/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;figcaption/&gt;&lt;/figure&gt;&lt;/section&gt;&lt;p mpa-paragraph-type=&quot;body&quot;&gt;&lt;/p&gt;&lt;p mpa-paragraph-type=&quot;body&quot;&gt;&lt;/p&gt;&lt;p mpa-paragraph-type=&quot;body&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.29765625&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/O2TDJPu7cb0RsJonDpYCorlR5gVQpYzA88GXySRYqm4XQFkA0hztC7mAd7GX1FhFoQuibysnDFsdcu13rogxdFg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p mpa-paragraph-type=&quot;body&quot;&gt;&lt;/p&gt;
                &lt;/div&gt;

                

                



                
                &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>