<?xml version="1.0" encoding="UTF-8"?>
        <rss version="2.0" xmlns:content="http://purl.org/rss/1.0/modules/content/">
            <channel>
            <title>å¼€å‘è€…å¤´æ¡</title>
            <link>http://toutiao.io/</link>
            <description></description>
<item>
<guid>d418fe61e16251bad3232ccbc674f9f0</guid>
<title>ä¸€æ–‡è¯»æ‡‚ Go Http Server åŸç†</title>
<link>https://toutiao.io/k/fyznjk0</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot; data-mpa-powered-by=&quot;yiban.io&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;helloå¤§å®¶å¥½å‘€ï¼Œæˆ‘æ˜¯å°æ¥¼ï¼Œè¿™æ˜¯ç³»åˆ—æ–‡ã€ŠGoåº•å±‚åŸç†å‰–æã€‹çš„ç¬¬äºŒç¯‡ï¼Œä¾æ—§æ˜¯åˆ†æ Http æ¨¡å—ï¼Œè¯ä¸å¤šè¯´ï¼Œå¼€å§‹ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.9090909090909091&quot; data-type=&quot;jpeg&quot; data-w=&quot;187&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_jpg/xacdaKuBM0QicPichPeoibAEibWwDtkBN3pxDXichfkNmSpXqRdGunpibuf8yejmejb0fD0aFu1AFV0DiaUkH4bncWibAQ/640?wx_fmt=jpeg&quot;/&gt;&lt;/figure&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ä»ä¸€ä¸ª Demo å…¥æ‰‹&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¿—è¯è¯´ä¸‡äº‹å¼€å¤´éš¾ï¼Œä½†ç”¨ Go å®ç°ä¸€ä¸ª Http Server çœŸä¸éš¾ï¼Œç®€å•åˆ°ä»€ä¹ˆç¨‹åº¦ï¼Ÿèµ·ä¸€ä¸ª Serverï¼Œå¹¶ä¸”èƒ½å“åº”è¯·æ±‚ï¼Œç®—ä¸ŠåŒ…åã€å¯¼å…¥çš„ä¾èµ–ï¼Œç”šè‡³ç©ºè¡Œï¼Œä¹Ÿå°±åªè¦ 15 è¡Œä»£ç ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;package&lt;/span&gt;Â main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â (&lt;br/&gt;Â &lt;span&gt;&quot;io&quot;&lt;/span&gt;&lt;br/&gt;Â &lt;span&gt;&quot;net/http&quot;&lt;/span&gt;&lt;br/&gt;)&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;Â {&lt;br/&gt;Â http.HandleFunc(&lt;span&gt;&quot;/hello&quot;&lt;/span&gt;,Â hello)&lt;br/&gt;Â http.ListenAndServe(&lt;span&gt;&quot;:81&quot;&lt;/span&gt;,Â &lt;span&gt;nil&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt;Â &lt;span&gt;hello&lt;/span&gt;&lt;span&gt;(responseÂ http.ResponseWriter,Â requestÂ *http.Request)&lt;/span&gt;&lt;/span&gt;Â {&lt;br/&gt;Â io.WriteString(response,Â &lt;span&gt;&quot;helloÂ world&quot;&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ä¹ˆç®€å•ï¼Œèƒ½ä¸ä¹‹ä¸€æˆ˜çš„ææ€•åªæœ‰ Python äº†å§ï¼Œè€Œä¸” Go è¿˜èƒ½ç¼–è¯‘æˆå¯æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½ è¯´ç‰›å•¤ä¸ç‰›å•¤ï¼Ÿ&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8075&quot; data-type=&quot;jpeg&quot; data-w=&quot;400&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_jpg/xacdaKuBM0QicPichPeoibAEibWwDtkBN3pxhaBzKLxXo8VkLyBFbDIsESrmC8OFFbpJicCiaHNKRJbU4W31X1BX0kgQ/640?wx_fmt=jpeg&quot;/&gt;&lt;/figure&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Http Server å¦‚ä½•å¤„ç†è¿æ¥ï¼Ÿ&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æˆ‘ä»¬ä»è¿™ä¸€è¡Œä»£ç çœ‹èµ·&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;http.ListenAndServe(&lt;span&gt;&quot;:81&quot;&lt;/span&gt;,Â &lt;span&gt;nil&lt;/span&gt;)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»å‘½åæ¥çœ‹ï¼Œè¿™ä¸ªæ–¹æ³•å¹²äº†ä¸¤ä»¶äº‹ï¼Œç›‘å¬å¹¶ä¸”æœåŠ¡ï¼Œä»æ–¹æ³•çš„å•ä¸€èŒè´£ä¸Šæ¥è¯´ï¼Œæˆ‘è§‰å¾—ä¸okï¼Œä¸€ä¸ªæ–¹æ³•æ€ä¹ˆèƒ½å¹²ä¸¤ä»¶äº‹ï¼Ÿä½†è¿™æ˜¯å¤§ä½¬å†™çš„ä»£ç ï¼Œå°±å¾ˆåˆç†ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img data-ratio=&quot;1.0466666666666666&quot; data-type=&quot;jpeg&quot; data-w=&quot;150&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_jpg/xacdaKuBM0QicPichPeoibAEibWwDtkBN3pxd4xU8zIJkDaTsbQByjrX411Spicd9KnbpzMod28L4ZdRrlgic0iahua5Q/640?wx_fmt=jpeg&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç¬¬ä¸€ä¸ªå‚æ•°&lt;code&gt;Addr&lt;/code&gt;æ˜¯è¦ç›‘å¬çš„åœ°å€å’Œç«¯å£ï¼Œç¬¬äºŒä¸ªå‚æ•°&lt;code&gt;Handler&lt;/code&gt;ä¸€èˆ¬æ˜¯&lt;code&gt;nil&lt;/code&gt;ï¼Œå®ƒæ˜¯çœŸæ­£çš„é€»è¾‘å¤„ç†ï¼Œä½†æˆ‘ä»¬é€šå¸¸ç”¨ç¬¬ä¸€è¡Œä»£ç é‚£æ ·æ¥æ³¨å†Œå¤„ç†å™¨ï¼Œè¿™ä»£ç ä¸€çœ‹å°±æ„Ÿè§‰æ˜¯æŠŠ path æ˜ å°„åˆ°ä¸šåŠ¡é€»è¾‘ä¸Šï¼Œæˆ‘ä»¬å…ˆå¤§æ¦‚äº†è§£ï¼Œå¾…ä¼šå†æ¥çœ‹å®ƒ&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;http.HandleFunc(&lt;span&gt;&quot;/hello&quot;&lt;/span&gt;,Â hello)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœäº†è§£è¿‡ä¸€ç‚¹ç½‘ç»œç¼–ç¨‹åŸºç¡€ï¼Œå°±ä¼šçŸ¥é“æ“ä½œç³»ç»Ÿæä¾›äº†&lt;code&gt;bind&lt;/code&gt;ã€&lt;code&gt;listen&lt;/code&gt;ã€&lt;code&gt;accept&lt;/code&gt;è¿™æ ·çš„ç³»ç»Ÿè°ƒç”¨ï¼Œæˆ‘ä»¬åªè¦æŒ‰é¡ºåºå‘èµ·è°ƒç”¨ï¼Œå°±èƒ½ç»„åˆå‡ºä¸€ä¸ª Serverã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Go ä¹Ÿæ˜¯åˆ©ç”¨è¿™äº›ç³»ç»Ÿè°ƒç”¨ï¼ŒæŠŠä»–ä»¬éƒ½å°è£…åœ¨äº†&lt;code&gt;ListenAndServe&lt;/code&gt;ä¸­ã€‚&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6968449931412894&quot; data-type=&quot;png&quot; data-w=&quot;1458&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/xacdaKuBM0QicPichPeoibAEibWwDtkBN3pxyoc1ljnibWSG5SU38syl7aCwI1bWxNsuo0oG1aUMwE80sH8WyAdqib4g/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Listen&lt;/code&gt; å¾€ä¸‹è¿½ç©¶å°±æ˜¯ç³»ç»Ÿè°ƒç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡ç‚¹çœ‹ &lt;code&gt;Serve&lt;/code&gt;ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.0146627565982405&quot; data-type=&quot;png&quot; data-w=&quot;1364&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/xacdaKuBM0QicPichPeoibAEibWwDtkBN3pxI9ZuCaNMibLibicrt02fRNicssF3jL29kafKLhvT8T5ZCLIPOBrQrpKCTg/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æŠŠåˆ†æ”¯ä»£ç æ”¶èµ·æ¥ï¼Œåªçœ‹ä¸»å¹²ï¼Œå‘ç°æ˜¯ä¸€ä¸ª for å¾ªç¯é‡Œé¢åœ¨ä¸åœåœ° Acceptï¼Œè€Œè¿™ä¸ª Accept åœ¨æ²¡æœ‰è¿æ¥æ—¶æ˜¯é˜»å¡çš„ï¼Œå½“æœ‰è¿æ¥æ—¶ï¼Œèµ·ä¸€ä¸ªæ–°çš„åç¨‹æ¥å¤„ç†ã€‚&lt;/p&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;Http Server å¦‚ä½•å¤„ç†è¯·æ±‚ï¼Ÿ&lt;/span&gt;&lt;/h1&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ä¸€äº›å‰ç½®å·¥ä½œ&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¤„ç†è¯·æ±‚çš„ä¸€è¡Œä»£ç æ˜¯ï¼Œå¯ä»¥çœ‹å‡ºæ˜¯æ¯ä¸ªè¿æ¥å•å¼€äº†ä¸€ä¸ªåç¨‹å¤„ç†ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;go&lt;/span&gt;Â c.serve(connCtx)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œçš„ connCtx ä»£å…¥äº†å½“å‰çš„ Server å¯¹è±¡ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;ctxÂ :=Â context.WithValue(baseCtx,Â ServerContextKey,Â srv)&lt;br/&gt;...&lt;br/&gt;connCtxÂ :=Â ctx&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è€Œä¸”è¿˜æä¾›äº†ä¿®æ”¹å®ƒçš„ hook æ–¹æ³• &lt;code&gt;srv.ConnContext&lt;/code&gt;ï¼Œå¯ä»¥åœ¨æ¯æ¬¡ Accept æ—¶ä¿®æ”¹åŸå§‹çš„ context&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;if&lt;/span&gt;Â ccÂ :=Â srv.ConnContext;Â ccÂ !=Â &lt;span&gt;nil&lt;/span&gt;Â {&lt;br/&gt;Â connCtxÂ =Â cc(connCtx,Â rw)&lt;br/&gt;Â &lt;span&gt;if&lt;/span&gt;Â connCtxÂ ==Â &lt;span&gt;nil&lt;/span&gt;Â {&lt;br/&gt;Â Â &lt;span&gt;panic&lt;/span&gt;(&lt;span&gt;&quot;ConnContextÂ returnedÂ nil&quot;&lt;/span&gt;)&lt;br/&gt;Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å®ƒçš„å®šä¹‰æ˜¯ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;//Â ConnContextÂ optionallyÂ specifiesÂ aÂ functionÂ thatÂ modifies&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//Â theÂ contextÂ usedÂ forÂ aÂ newÂ connectionÂ c.Â TheÂ providedÂ ctx&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//Â isÂ derivedÂ fromÂ theÂ baseÂ contextÂ andÂ hasÂ aÂ ServerContextKey&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//Â value.&lt;/span&gt;&lt;br/&gt;ConnContextÂ &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(ctxÂ context.Context,Â cÂ net.Conn)&lt;/span&gt;Â &lt;span&gt;context&lt;/span&gt;.&lt;span&gt;Context&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯å¦‚æœæŒ‰ç…§æˆ‘å¼€å¤´ç»™çš„ä»£ç ï¼Œä½ æ˜¯æ²¡æ³•ä¿®æ”¹ &lt;code&gt;srv.ConnContext&lt;/code&gt; çš„ï¼Œå¯ä»¥æ”¹æˆè¿™æ ·æ¥è‡ªå®šä¹‰ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt;Â &lt;span&gt;main&lt;/span&gt;&lt;span&gt;()&lt;/span&gt;&lt;/span&gt;Â {&lt;br/&gt;Â http.HandleFunc(&lt;span&gt;&quot;/hello&quot;&lt;/span&gt;,Â hello)&lt;br/&gt;Â serverÂ :=Â http.Server{&lt;br/&gt;Â Â Addr:Â &lt;span&gt;&quot;:81&quot;&lt;/span&gt;,&lt;br/&gt;&lt;span&gt;Â Â ConnContext:Â &lt;span&gt;&lt;span&gt;func(ctxÂ context.Context,Â cÂ net.Conn)&lt;/span&gt;Â &lt;span&gt;context&lt;/span&gt;.&lt;span&gt;Context&lt;/span&gt;&lt;/span&gt;Â {&lt;br/&gt;Â Â Â &lt;span&gt;return&lt;/span&gt;Â context.WithValue(ctx,Â &lt;span&gt;&quot;hello&quot;&lt;/span&gt;,Â &lt;span&gt;&quot;roshi&quot;&lt;/span&gt;)&lt;br/&gt;Â Â },&lt;/span&gt;&lt;br/&gt;Â }&lt;br/&gt;Â server.ListenAndServe()&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŒæ ·çš„ &lt;code&gt;c.setState&lt;/code&gt; ä¹Ÿæä¾›äº† hookï¼Œå¯é‡‡å–å¦‚ä¸Šçš„æ–¹æ³•è®¾ç½®ï¼Œåœ¨æ¯æ¬¡è¿æ¥çŠ¶æ€æ”¹å˜æ—¶æ‰§è¡Œ hook æ–¹æ³•ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;c.setState(c.rwc,Â StateNew,Â runHooks)Â &lt;span&gt;//Â beforeÂ ServeÂ canÂ return&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;//Â ConnStateÂ specifiesÂ anÂ optionalÂ callbackÂ functionÂ thatÂ is&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//Â calledÂ whenÂ aÂ clientÂ connectionÂ changesÂ state.Â SeeÂ the&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//Â ConnStateÂ typeÂ andÂ associatedÂ constantsÂ forÂ details.&lt;/span&gt;&lt;br/&gt;ConnStateÂ &lt;span&gt;&lt;span&gt;func&lt;/span&gt;&lt;span&gt;(net.Conn,Â ConnState)&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å¼€å§‹çœŸæ­£å¹²æ´»&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†èƒ½çœ‹æ¸…æ¥š Accept åï¼Œserve æ–¹æ³•åˆ°åº•å¹²äº†ä»€ä¹ˆï¼Œæˆ‘ä»¬å†ç®€åŒ–ä¸€ä¸‹ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;func&lt;/span&gt;Â &lt;span&gt;(cÂ *conn)&lt;/span&gt;Â &lt;span&gt;serve&lt;/span&gt;&lt;span&gt;(ctxÂ context.Context)&lt;/span&gt;&lt;/span&gt;Â {&lt;br/&gt;Â ...&lt;br/&gt;Â &lt;span&gt;for&lt;/span&gt;Â {&lt;br/&gt;Â Â w,Â errÂ :=Â c.readRequest(ctx)&lt;br/&gt;Â Â ...&lt;br/&gt;Â Â serverHandler{c.server}.ServeHTTP(w,Â w.req)&lt;br/&gt;Â Â ...&lt;br/&gt;Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;serve ä¹Ÿæ˜¯ä¸€ä¸ªå¤§å¾ªç¯ï¼Œå¾ªç¯é‡Œé¢ä¸»è¦æ˜¯è¯»å–ä¸€ä¸ªè¯·æ±‚ï¼Œç„¶åå°†è¯·æ±‚äº¤ç»™ Handler å¤„ç†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºä»€ä¹ˆæ˜¯ä¸€ä¸ªå¤§å¾ªç¯å‘¢ï¼Ÿå› ä¸ºæ¯ä¸ª serve å¤„ç†çš„æ˜¯ä¸€ä¸ªè¿æ¥ï¼Œä¸€ä¸ªè¿æ¥å¯ä»¥æœ‰å¤šæ¬¡è¯·æ±‚ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¯»è¯·æ±‚å°±æ˜¾å¾—æ¯”è¾ƒæ¯ç‡¥ä¹å‘³ï¼ŒæŒ‰ç…§Httpåè®®ï¼Œè¯»å‡ºURLï¼Œheaderï¼Œbodyç­‰ä¿¡æ¯ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™é‡Œæœ‰ä¸ªç»†èŠ‚æ˜¯åœ¨æ¯æ¬¡è¯»å–äº†ä¸€ä¸ªè¯·æ±‚åï¼Œè¿˜å¼€äº†ä¸€ä¸ªåç¨‹å»è¯»ä¸‹ä¸€ä¸ªè¯·æ±‚ï¼Œä¹Ÿç®—æ˜¯åšäº†ä¼˜åŒ–å§ã€‚&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;for&lt;/span&gt;Â {&lt;br/&gt;Â w,Â errÂ :=Â c.readRequest(ctx)&lt;br/&gt;Â ...&lt;br/&gt;&lt;br/&gt;Â &lt;span&gt;if&lt;/span&gt;Â requestBodyRemains(req.Body)Â {&lt;br/&gt;Â Â registerOnHitEOF(req.Body,Â w.conn.r.startBackgroundRead)&lt;br/&gt;Â }Â &lt;span&gt;else&lt;/span&gt;Â {&lt;br/&gt;&lt;span&gt;Â Â w.conn.r.startBackgroundRead()&lt;br/&gt;&lt;/span&gt;Â }&lt;br/&gt;Â ...&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;è¯·æ±‚å¦‚ä½•è·¯ç”±ï¼Ÿ&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“è¯»å–åˆ°ä¸€ä¸ªè¯·æ±‚åï¼Œä¾¿è¿›å…¥è¿™ä¸€è¡Œä»£ç ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;serverHandler{c.server}.ServeHTTP(w,Â w.req)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ServeHTTP æ‰¾åˆ°æˆ‘ä»¬æ³¨å†Œçš„ Handler å»å¤„ç†ï¼Œå¦‚æœè¯·æ±‚çš„URI æ˜¯ &lt;code&gt;*&lt;/code&gt;æˆ–è¯·æ±‚ Method æ˜¯ &lt;code&gt;OPTIONS&lt;/code&gt;ï¼Œåˆ™ä½¿ç”¨globalOptionsHandlerï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ç±»è¯·æ±‚ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å¤„ç†ï¼Œç›´æ¥å°±è¿”å›äº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äºæˆ‘ä»¬æ³¨å†Œçš„ Handler ä¹Ÿéœ€è¦å»å¯»æ‰¾è·¯ç”±ï¼Œè¿™ä¸ªè·¯ç”±çš„è§„åˆ™è¿˜æ˜¯æ¯”è¾ƒç®€å•ï¼Œä¸»è¦ç”±å¦‚ä¸‹ä¸‰æ¡ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;å¦‚æœæ³¨å†Œäº†å¸¦ host çš„è·¯ç”±ï¼Œåˆ™æŒ‰ host + path å»å¯»æ‰¾ï¼Œå¦‚æœæ²¡æ³¨å†Œå¸¦ host çš„è·¯ç”±ï¼Œåˆ™æŒ‰ path å¯»æ‰¾&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è·¯ç”±è§„åˆ™åŒ¹é…ä»¥å®Œå…¨åŒ¹é…ä¼˜å…ˆï¼Œå¦‚æœæ³¨å†Œçš„è·¯ç”±è§„åˆ™æœ€åä¸€ä¸ªå­—ç¬¦æ˜¯&lt;code&gt;/&lt;/code&gt;ï¼Œåˆ™é™¤äº†å®Œå…¨åŒ¹é…å¤–ï¼Œè¿˜ä¼šä»¥å‰ç¼€æŸ¥æ‰¾&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸¾å‡ ä¸ªä¾‹å­æ¥ç†è§£ä¸€ä¸‹ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ³¨å†Œè·¯ç”±ä¸º&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;http.HandleFunc(&lt;span&gt;&quot;/hello&quot;&lt;/span&gt;,Â hello)&lt;br/&gt;http.HandleFunc(&lt;span&gt;&quot;127.0.0.1/hello&quot;&lt;/span&gt;,Â hello2)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ­¤æ—¶å¦‚æœæ‰§è¡Œ&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;curlÂ &lt;span&gt;&#x27;http://127.0.0.1:81/hello&#x27;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åˆ™ä¼šåŒ¹é…åˆ° hello2ï¼Œä½†å¦‚æœæ‰§è¡Œ&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;curlÂ &lt;span&gt;&#x27;http://localhost:81/hello&#x27;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°±åŒ¹é…çš„æ˜¯ hello&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœæ³¨å†Œè·¯ç”±ä¸º&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;http.HandleFunc(&lt;span&gt;&quot;/hello&quot;&lt;/span&gt;,Â hello)&lt;br/&gt;http.HandleFunc(&lt;span&gt;&quot;127.0.0.1/hello/&quot;&lt;/span&gt;,Â hello2)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ³¨æ„ç¬¬äºŒä¸ªæœ€åè¿˜æœ‰ä¸ª&lt;code&gt;/&lt;/code&gt;ï¼Œæ­¤æ—¶å¦‚æœæ‰§è¡Œ&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;curlÂ &lt;span&gt;&#x27;http://127.0.0.1:81/hello/roshi&#x27;&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¹Ÿèƒ½åŒ¹é…åˆ° hello2ï¼Œæ€ä¹ˆæ ·ï¼Œæ˜¯ä¸æ˜¯ç†è§£äº†ï¼Ÿ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰¾åˆ°è·¯ç”±ä¹‹åå°±ç›´æ¥è°ƒç”¨æˆ‘ä»¬å¼€å¤´æ³¨å†Œçš„æ–¹æ³•ï¼Œå¦‚æœæˆ‘ä»¬å¾€ Response ä¸­å†™å…¥æ•°æ®ï¼Œå°±èƒ½è¿”å›ç»™å®¢æˆ·ç«¯ï¼Œè¿™æ ·ä¸€ä¸ªè¯·æ±‚å°±å¤„ç†å®Œæˆäº†ã€‚&lt;/p&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ€åæˆ‘ä»¬å›å¿†ä¸‹ Go Http Server çš„è¦ç‚¹ï¼š&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ç”¨ Go èµ·ä¸€ä¸ª Http Server éå¸¸ç®€å•&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;Go Http Server æœ¬è´¨æ˜¯ä¸€ä¸ªå¤§å¾ªç¯ï¼Œæ¯å½“æœ‰ä¸€ä¸ªæ–°è¿æ¥æ—¶ï¼Œä¼šèµ·ä¸€ä¸ªæ–°çš„åç¨‹æ¥å¤„ç†&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ¯ä¸ªè¿æ¥çš„å¤„ç†ä¹Ÿæ˜¯ä¸€ä¸ªå¤§å¾ªç¯ï¼Œè¿™ä¸ªå¾ªç¯é‡Œåšäº†è¯»å–è¯·æ±‚ã€å¯»æ‰¾è·¯ç”±ã€æ‰§è¡Œé€»è¾‘ä¸‰ä»¶å¤§äº‹&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8255613126079447&quot; data-type=&quot;png&quot; data-w=&quot;579&quot; data-src=&quot;https://mmbiz.qpic.cn/sz_mmbiz_png/xacdaKuBM0QicPichPeoibAEibWwDtkBN3px7YxysicCAjmLyd4ykKwm8ESDJL2qkb5iaHAbJyRuUYg2dkZfoOv4rB7g/640?wx_fmt=png&quot;/&gt;&lt;/figure&gt;&lt;h1 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç¦åˆ©æ—¶åˆ»&lt;/span&gt;&lt;/h1&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ„Ÿè°¢èƒ½æŠ½ç©ºçœ‹åˆ°è¿™é‡Œï¼Œæ–°çš„ä¸€å¹´å‡†å¤‡äº†3æœ¬ã€ŠGoè¯­è¨€ä»å…¥é—¨åˆ°é¡¹ç›®å®æˆ˜ã€‹é€ç»™å¤§å®¶ï¼Œå‚ä¸æ–¹å¼æ˜¯åŠ æˆ‘å¾®ä¿¡&lt;code&gt;MrRoshi&lt;/code&gt;ï¼Œå‚åŠ æœ‹å‹åœˆç‚¹èµé€ä¹¦æ´»åŠ¨å³å¯ã€‚&lt;/p&gt;&lt;p&gt;&lt;mpcps class=&quot;js_editor_new_cps&quot; data-templateid=&quot;list&quot; data-traceid=&quot;3e59a237-9b50-4189-aff2-44f805fb4c42&quot; data-goodssouce=&quot;1&quot; data-pid=&quot;101_13329955&quot; data-appuin=&quot;3296160406&quot; data-buffer=&quot;{&amp;quot;category_id&amp;quot;:10,&amp;quot;pid&amp;quot;:&amp;quot;101_13329955&amp;quot;,&amp;quot;biz_uin&amp;quot;:&amp;quot;3296160406&amp;quot;,&amp;quot;trace_id&amp;quot;:&amp;quot;3e59a237-9b50-4189-aff2-44f805fb4c42&amp;quot;,&amp;quot;sku_id&amp;quot;:&amp;quot;101_13329955&amp;quot;,&amp;quot;source_id&amp;quot;:2,&amp;quot;source_name&amp;quot;:&amp;quot;äº¬ä¸œ&amp;quot;,&amp;quot;audit_state&amp;quot;:1,&amp;quot;main_img&amp;quot;:&amp;quot;https://pcm-img.zhls.qq.com/productcenter-13651fb5--1018824-7367685220822286616/62026160010122022/38b442ea0c38631a8fc025925ef15cb5.jpg&amp;quot;,&amp;quot;product_name&amp;quot;:&amp;quot;Goè¯­è¨€ä»å…¥é—¨åˆ°é¡¹ç›®å®æˆ˜ï¼ˆè§†é¢‘ç‰ˆï¼‰&amp;quot;,&amp;quot;current_price&amp;quot;:10800,&amp;quot;first_category_id&amp;quot;:&amp;quot;10&amp;quot;,&amp;quot;product_label_name_list&amp;quot;:[&amp;quot;äº¬ä¸œé…é€&amp;quot;],&amp;quot;select_tag_name_list&amp;quot;:[],&amp;quot;templateId&amp;quot;:&amp;quot;card&amp;quot;,&amp;quot;appuin&amp;quot;:&amp;quot;3296160406&amp;quot;,&amp;quot;isNewCpsKOL&amp;quot;:1}&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœä½ èƒ½&lt;code&gt;ç‚¹èµ&lt;/code&gt;ã€&lt;code&gt;åœ¨çœ‹&lt;/code&gt;ã€&lt;code&gt;åˆ†äº«&lt;/code&gt;ï¼Œæˆ‘ä¼šæ›´åŠ æ„Ÿæ¿€ä¸å°½~&lt;/p&gt;&lt;hr data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;/&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;æœç´¢å…³æ³¨å¾®ä¿¡å…¬ä¼—å·&quot;æ‰è™«å¤§å¸ˆ&quot;ï¼Œåç«¯æŠ€æœ¯åˆ†äº«ï¼Œæ¶æ„è®¾è®¡ã€æ€§èƒ½ä¼˜åŒ–ã€æºç é˜…è¯»ã€é—®é¢˜æ’æŸ¥ã€è¸©å‘å®è·µ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;åŠ æˆ‘å¾®ä¿¡&lt;code&gt;MrRoshi&lt;/code&gt;æ‹‰ä½ å…¥ç¾¤ï¼Œç¾¤é‡Œå„è·¯æŠ€æœ¯å¤§ä½¬å¸¦ä½ é£&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/blockquote&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>aec3324da0b6ac4b9d3894687100a623</guid>
<title>å¦‚ä½•ç”¨Goå¿«é€Ÿå®ç°è§„åˆ™å¼•æ“</title>
<link>https://toutiao.io/k/4eubwce</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section&gt;&lt;p&gt;&lt;span&gt;ä½œè€…ï¼šwynnliuï¼Œ è…¾è®¯IEGå¢é•¿ä¸­å° åå°å¼€å‘å·¥ç¨‹å¸ˆ&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å‡ºå¸ˆä¹‹å&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æåˆ°è§„åˆ™å¼•æ“ï¼Œå¤§éƒ¨åˆ†äººéƒ½ä¼šå…ˆæƒ³åˆ°&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;DSL(Domain Specific Language)&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼Œè¿›è€Œè”æƒ³ä»¤äººç”Ÿç•çš„&lt;/span&gt;&lt;strong&gt;&lt;span&gt;ç¼–è¯‘åŸç†ã€é€’å½’ä¸‹é™ã€LLæˆ–LR&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ã€‚ä½†è§„åˆ™å¼•æ“æœ‰å¤§æœ‰å°ï¼Œå®ƒä»¬åœ¨ä¸åŒåœºæ™¯çš„å­˜åœ¨ä¸ä¸€æ ·ï¼Œå¹¶ä¸ä¸€å®šéƒ½è¦è¿™ä¹ˆå¤æ‚ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯”å¦‚åœ¨ä¸€ä¸ªå°å‹æ”¯ä»˜ç³»ç»Ÿçš„ç®€å•é£æ§åœºæ™¯é‡Œï¼Œäº§å“åŒå­¦æƒ³è®¾ç½®ä¸€äº›è§„åˆ™ï¼Œé¿å…ç”¨æˆ·çš„é“¶è¡Œå¡è¢«ç›—åˆ·æˆ–è€…å•†æˆ·è¢«è–…ç¾Šæ¯›ï¼ˆä»…ä¸ºç¤ºä¾‹ï¼Œå¹¶ä¸ä»£è¡¨ç°å®ä¸­ä¹Ÿæ˜¯åº”ç”¨äº†åŒæ ·ç­–ç•¥ï¼‰ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä¸ºäº†å¿«é€Ÿå®ç°éœ€æ±‚ï¼Œæˆ‘ä»¬å¼€å‘ä¸€ä¸ªå•ç‹¬çš„è§„åˆ™ç±»æˆ–è€…åº“ï¼Œç±»é‡Œé¢æœ‰ä¸åŒè§„åˆ™åˆ¤æ–­å‡½æ•°ã€‚è§„åˆ™ä¸æ–­å¢åŠ ï¼Œè§„åˆ™å‡½æ•°å°±ä¸æ–­æ‰©å±•ï¼Œè¿™ä¸ªè†¨èƒ€çš„è§„åˆ™ç±»åº“å°±æ˜¯ä¸€ä¸ªå¾®å°çš„è§„åˆ™å¼•æ“ã€‚è™½ç„¶åœ¨ä¸šåŠ¡è°ƒç”¨çš„åœ°æ–¹ä¼šæœ‰å¾ˆå¤šswitchæˆ–è€…if...else..ï¼Œä½†è¿™ä¸ªå¾®å°çš„è§„åˆ™å¼•æ“å¹¶ä¸éœ€è¦å¼•å…¥DSLï¼Œä¸€æ ·èƒ½å¥½å¥½å·¥ä½œã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è€Œåœ¨å¦å¤–ä¸€äº›ä¸šåŠ¡ç³»ç»Ÿï¼Œæ¯”å¦‚è´·æ¬¾ç³»ç»Ÿï¼ŒåŒæ ·æ˜¯é£æ§åœºæ™¯ï¼Œäº§å“åŒå­¦ä¹Ÿä¼šè®¾ç½®ä¸€äº›è§„åˆ™åšä¸åŒçš„é‡‘é¢å®¡æ‰¹å†³ç­–ï¼ˆä»…ä¸ºç¤ºä¾‹ï¼Œå¹¶ä¸ä»£è¡¨ç°å®ä¸­ä¹Ÿæ˜¯åº”ç”¨äº†åŒæ ·ç­–ç•¥ï¼‰ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-2&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å¾ä¿¡è¯„åˆ†è¾¾åˆ°650ï¼Œç”³è¯·é‡‘é¢2000å…ƒä»¥ä¸‹å¯ä»¥ç›´æ¥å®¡æ‰¹&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å¾ä¿¡è¯„åˆ†è¾¾åˆ°650ï¼Œç”³è¯·é‡‘é¢åœ¨5000ä»¥ä¸‹ï¼Œå¦‚æœæœˆå‡æ¶ˆè´¹è¾¾åˆ°2000å—å¯ä»¥ç›´æ¥å®¡æ‰¹&lt;/span&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;span&gt;å¾ä¿¡è¯„åˆ†åœ¨550~600ä¹‹é—´ï¼Œç”³è¯·é‡‘é¢åœ¨5000ä»¥ä¸‹çš„ä¸‰å››çº¿åŸå¸‚ç”¨æˆ·ï¼Œå¦‚æœæœˆå‡æ¶ˆè´¹è¾¾åˆ°1000å—è¿˜éœ€è¦å…¶ä»–æ¶ˆè´¹è¯„ä¼°ï¼Œå¦‚æœæœˆæ”¶å…¥æœªè¾¾åˆ°1ä¸‡éœ€è¦å·¥èµ„æµæ°´è¯æ˜&lt;br/&gt;&lt;/span&gt;......&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;span&gt;åœ¨è¿™äº›è§„åˆ™æœªå¢å¤šä¹‹å‰ï¼Œæˆ‘ä»¬å‘ç°å•å•å†™è§„åˆ™ç±»åº“ï¼Œä¸šåŠ¡æ–¹é€šè¿‡è°ƒç”¨ä¸åŒå‡½æ•°åˆ¤æ–­ï¼Œå°±å·²ç»ç—›ä¸æ¬²ç”Ÿã€‚è¿™äº›é£æ§è§„åˆ™ç›¸æ¯”ä¸Šæ–‡æ¥è¯´ï¼Œæ¶‰åŠçš„ç”¨æˆ·å±æ€§å¤šï¼Œåˆ¤æ–­æ¡ä»¶å¤æ‚ï¼Œè€Œä¸”è¿˜æœ‰ä¸åŒçš„ä¼˜å…ˆçº§ã€‚å¦‚æœæ²¡æœ‰æ›´å¥½çš„è§„åˆ™æŠ½è±¡ï¼Œä»£ç å¤æ‚åº¦åªä¼šè¶Šæ¥è¶Šé«˜ï¼Œè¿™æ—¶å°±éœ€è¦è®¾è®¡ä¸€å¥—DSLæ¥æ»¡è¶³æ›´å¤šçš„è§„åˆ™åˆ¤æ–­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;æ‰€ä»¥ï¼Œåœ¨æˆ‘ä»¬çœŸæ­£è¦å®ç°ä¸€ä¸ªè§„åˆ™å¼•æ“ä¹‹å‰ï¼Œä¸‹å®šå†³å¿ƒè®¾è®¡DSLä¸ç¼–è¯‘åŸç†æ‹‰æ‰¯ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆçœ‹ç®€å•çš„è§„åˆ™ç±»åº“æ˜¯å¦å°±å·²æ»¡è¶³éœ€æ±‚ã€‚&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;h2&gt;&lt;span&gt;éœ€æ±‚èƒŒæ™¯&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;Gopassæ˜¯ä¸€ä¸ªAPIç½‘å…³ï¼Œä½œä¸ºä¸€ä¸ªç½‘å…³ï¼Œç½‘å…³å¿…ä¸å¯å°‘çš„èƒ½åŠ›æ˜¯è·¯ç”±è½¬å‘ï¼Œç²¾ç»†åŒ–è·¯ç”±æ›´æ˜¯é«˜é¢‘éœ€æ±‚ã€‚ä¸šåŠ¡éœ€è¦æ ¹æ®ä¸åŒéœ€æ±‚åœºæ™¯åšä¸åŒçš„è·¯ç”±é…ç½®ï¼Œæ¯”å¦‚ç°åº¦å‘å¸ƒã€A/B æµ‹è¯•ã€é™æµã€è´Ÿè½½å‡è¡¡ç­‰ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;Gopassç°æœ‰çš„è½¬å‘è§„åˆ™åªèƒ½åŸºäºè¯·æ±‚Methodå’ŒURL(Host/Path/Query)ä½œç®€å•é…ç½®ï¼Œæ¬ ç¼ºæ ¹æ®è¯·æ±‚Headerã€Cookieã€CIP(Client IP)/VIPç­‰æ›´å¤šè¯·æ±‚å±æ€§é…ç½®ï¼Œä¸åŠè¿™äº›å±æ€§è§„åˆ™çš„ç»„åˆé…ç½®ï¼Œæ¯”å¦‚ä¸šåŠ¡éœ€è¦é…ç½®APIçš„è¯»å†™åˆ†ç¦»ï¼Œå¹¶ä¸”ç°åº¦æµ‹è¯•ï¼Œå°±éœ€è¦é…ç½®è¯·æ±‚Methodå’Œè¯·æ±‚Headerè¿™æ ·çš„å¹¶é›†è§„åˆ™ã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2&gt;&lt;span&gt;Jsonå®ç°&lt;/span&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;æˆ‘æœ€å¼€å§‹æ²¡æœ‰å¾€DSLçš„æ–¹å‘æƒ³ï¼Œå†™å‡ ä¸ªåƒä¸‹é¢çš„ç®€å•çš„è§„åˆ™å‡½æ•°ï¼Œç”¨jsonæ ¼å¼å®šä¹‰è§„åˆ™ï¼Œå†ç”¨Goçš„åå°„åº“è§£æjsonï¼Œä¸‰ä¸‹äº”é™¤äºŒå°±å®Œæˆäº†è§„åˆ™åˆ¤æ–­ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;ä¸åŒçš„è§„åˆ™å‡½æ•°&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼š&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;// IRule&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; IRule &lt;span&gt;interface&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;Match&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;req &lt;span&gt;*&lt;/span&gt;http&lt;span&gt;.&lt;/span&gt;Request&lt;span&gt;)&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// HeaderMatch åŒ¹é…header&lt;/span&gt;&lt;br/&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;HeaderMatch&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;key&lt;span&gt;,&lt;/span&gt; value &lt;span&gt;string&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;...&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// CookieMatch åŒ¹é…Cookie&lt;/span&gt;&lt;br/&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;CookieMatch&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;key&lt;span&gt;,&lt;/span&gt; value &lt;span&gt;string&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;...&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;è§„åˆ™å®šä¹‰&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼š&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&quot;op&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;AND&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&quot;matcher&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&quot;header&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&quot;cookie&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;]&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&quot;header&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&quot;key&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;X-APP-ID&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&quot;value&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;Ves&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;&quot;cookie&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&quot;name&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;feature&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;        &lt;span&gt;&quot;value&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;dev/wynnliu/qualify-rule&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;è§„åˆ™è§£ææ¡†æ¶(éåå°„åº“ç‰ˆ)ï¼š&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;// éå†åˆ¤æ–­è§„åˆ™&lt;/span&gt;&lt;br/&gt;&lt;span&gt;for&lt;/span&gt; &lt;span&gt;_&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; matcher &lt;span&gt;:=&lt;/span&gt; &lt;span&gt;range&lt;/span&gt; matchers &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;var&lt;/span&gt; m &lt;span&gt;map&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;interface&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    err &lt;span&gt;:=&lt;/span&gt; json&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Unmarshal&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;data&lt;span&gt;[&lt;/span&gt;&lt;span&gt;&quot;matcher&quot;&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&amp;amp;&lt;/span&gt;m&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;if&lt;/span&gt; err &lt;span&gt;!=&lt;/span&gt; &lt;span&gt;nil&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;      log&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Fatal&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;err&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;    &lt;span&gt;switch&lt;/span&gt; matcher &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;case&lt;/span&gt; &lt;span&gt;&quot;header&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;...&lt;/span&gt;&lt;br/&gt;       result&lt;span&gt;[&lt;/span&gt;matcher&lt;span&gt;]&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;HeaderMatch&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;rule&lt;span&gt;.&lt;/span&gt;key&lt;span&gt;,&lt;/span&gt; rule&lt;span&gt;.&lt;/span&gt;Vaule&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;case&lt;/span&gt; &lt;span&gt;&quot;coolkie&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;...&lt;/span&gt;&lt;br/&gt;       result&lt;span&gt;[&lt;/span&gt;matcher&lt;span&gt;]&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;CookieMatch&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;rule&lt;span&gt;.&lt;/span&gt;name&lt;span&gt;,&lt;/span&gt; rule&lt;span&gt;.&lt;/span&gt;Vaule&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;...&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;...&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// ç»¼åˆè®¡ç®—è§„åˆ™ç»“æœ&lt;/span&gt;&lt;br/&gt;&lt;span&gt;switch&lt;/span&gt; op &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;&lt;span&gt;case&lt;/span&gt; &lt;span&gt;&quot;AND&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;...&lt;/span&gt;&lt;br/&gt;&lt;span&gt;case&lt;/span&gt; &lt;span&gt;&quot;OR&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;...&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;...&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;ä¸Šé¢æ˜¯ä¸€ä¸ªå¸¸è§çš„äºŒå…ƒè¡¨è¾¾å¼è§„åˆ™ï¼Œä»è§„åˆ™å®šä¹‰åˆ°è§„åˆ™è§£æå¯ä»¥çœ‹å‡ºï¼Œç”¨Jsonçš„æ–¹å¼å®ç°éå¸¸æ–¹ä¾¿ï¼Œå·²ç»æ»¡è¶³ç®€å•çš„è§„åˆ™åœºæ™¯ã€‚ä¸å¥½çš„åœ°æ–¹å°±æ˜¯è§£æçš„ä»£ç å¤ªçµæ´»ï¼Œä¸€æ¡é¾™çš„switch caseï¼Œå¦‚æœåŠ å…¥æ›´å¤šé€»è¾‘ï¼Œå¤æ‚åº¦å°±ä¼šä¸Šå‡ï¼Œç»´æŠ¤æ€§ä¹Ÿåªä¼šè¶Šæ¥è¶Šå·®ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯”å¦‚ï¼Œä¸€å¼€å§‹çš„è§„åˆ™æ¡ä»¶åªæœ‰ç­‰å€¼åŒ¹é…ï¼Œæ¥ç€å¢åŠ èŒƒå›´åŒ¹é…ï¼ŒéåŒ¹é…ï¼Œæ­£åˆ™åŒ¹é…ç­‰ï¼Œåé¢å†åœ¨è¿™äº›åŸºç¡€ä¸ŠåŠ å…¥è§„åˆ™ä¼˜å…ˆçº§ï¼Œå°±å¾—éœ€è¦å¼•å…¥æ›´å¤šçš„jsonå®šä¹‰ï¼Œè§„åˆ™è§£ææ¡†æ¶ä¹Ÿè¦ç›¸åº”åœ°è¦†ç›–æ›´å¤šçš„æŠ½è±¡ç»´åº¦ã€‚&lt;/span&gt;&lt;span/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é‚£æœ‰æ²¡æœ‰æŠ½è±¡åº¦æ›´é«˜ã€å®ç°ä¹Ÿä¸å¤æ‚çš„è§£æå®ç°æ–¹å¼å‘¢ï¼Ÿå°±æ˜¯è¯´ï¼Œæœ‰æ²¡æœ‰æ¯”Jsonæ–¹å¼æ›´å¥½åœ°è¡¨è¾¾è¿™äº›è§„åˆ™çš„å­˜åœ¨ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç­”æ¡ˆè‚¯å®šæ˜¯æœ‰çš„ï¼Œä¸ç„¶æ€ä¹ˆå†™ä¸‹å»ğŸ¶ã€‚&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¦‚æœä»”ç»†åˆ†æä¸Šé¢çš„è§„åˆ™ï¼Œå¯ä»¥å‘ç°è¿™äº›è§„åˆ™ç»è¿‡ä¸€æ³¢è®¡ç®—ååªéœ€å¾—åˆ°ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œä¸å…¶ä»–ç®—æœ¯è¡¨è¾¾å¼ã€å…³ç³»è¡¨è¾¾å¼ä¸åŒï¼Œè¿™äº›è§„åˆ™éƒ½æ˜¯&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;å¸ƒå°”è¡¨è¾¾å¼&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç½‘ä¸Šäº†è§£åˆ°ï¼Œå›½å†…çŸ¥åGoé¢†åŸŸä¸“å®¶æ›¹å¤§(Xargin )åœ¨&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;åŸºäº Go çš„å†…ç½® Parser æ‰“é€ è½»é‡çº§è§„åˆ™å¼•æ“&lt;/span&gt;&lt;span&gt;ä¸€æ–‡ä¸­æåˆ°ï¼š&lt;/span&gt;&lt;span&gt;&lt;span&gt;Goçš„astè¯­æ³•æ ‘å¯ä»¥å®Œç¾è¡¨è¾¾å¸ƒå°”è¡¨è¾¾å¼ï¼Œä½¿ç”¨ Go çš„å†…ç½® parser åº“å¯ä»¥å®Œæˆä¸€ä¸ªåŸºæœ¬è§„åˆ™å¼•æ“çš„æ¡†æ¶ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;äºæ˜¯ï¼Œæˆ‘å¼€å§‹å°è¯•ä½¿ç”¨Goè‡ªå¸¦çš„aståº“åŠparseråº“å®Œæˆè½¬å‘è§„åˆ™çš„è§£æã€‚&lt;/span&gt;&lt;/p&gt;&lt;h2&gt;&lt;strong&gt;ASTå®ç°&lt;/strong&gt;&lt;/h2&gt;&lt;h3&gt;&lt;span&gt;Goçš„ç¼–è¯‘è¿‡ç¨‹&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;&lt;span&gt;Goçš„aståº“å’Œparseråº“éƒ½æ˜¯Goç¼–è¯‘è¿‡ç¨‹ä¸­çš„å·¥å…·åº“ï¼ŒGoçš„ç¼–è¯‘è¿‡ç¨‹è·Ÿå¤§éƒ¨åˆ†é«˜çº§è¯­è¨€çš„ç¼–è¯‘è¿‡ç¨‹ä¸€æ ·ï¼Œ&lt;/span&gt;&lt;strong&gt;åˆ†ä¸º6æ­¥ï¼šè¯æ³•åˆ†æã€è¯­æ³•åˆ†æã€è¯­ä¹‰åˆ†æã€ä¸­é—´ç ç”Ÿæˆã€ä»£ç ä¼˜åŒ–å’Œæœºå™¨ç ç”Ÿæˆã€‚&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å¼•ç”¨ã€Šç¨‹åºå‘˜çš„è‡ªæˆ‘ä¿®å…»ã€‹é‡Œé¢çš„å›¾ï¼Œå°±æ˜¯ä¸‹é¢è¿™ä¸€ä¸²æµç¨‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5035971223021583&quot; data-type=&quot;png&quot; data-w=&quot;1112&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/G9mz0qib2srCvicwBpmUCrceZOnX2FsgnUg3dNianyD1COHkohSP6bI8LOeQCdscDDSc6pVQyunSYn9XVZgZQpHeg/640?wx_fmt=png&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;strong&gt;æ¯æ­¥çš„è¾“å…¥è¾“å‡ºï¼Œå…·ä½“åšçš„äº‹æƒ…æ€»ä½“å¦‚ä¸‹è¡¨ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;figure&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;&lt;span&gt;è¾“å…¥&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;æ­¥éª¤&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;è¾“å‡º&lt;/span&gt;&lt;/th&gt;&lt;th&gt;&lt;span&gt;è¯´æ˜&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æºä»£ç &lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;è¯æ³•åˆ†æ&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;Token&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;go æ–‡ä»¶è¢«è¾“å…¥åˆ°æ‰«æ(Scanner)ï¼Œå®ƒä½¿ç”¨ä¸€ç§ç±»ä¼¼äºæœ‰é™çŠ¶æ€æœºçš„ç®—æ³•ï¼Œå°†æºä»£ç çš„å­—ç¬¦ç³»åˆ—åˆ†å‰²æˆä¸€ç³»åˆ—çš„è®°å·(Token)&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;Tokenåºåˆ—&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;è¯­æ³•åˆ†æ&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;AST&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;å°† Token è½¬åŒ–ä¸ºAST(æŠ½è±¡è¯­æ³•æ ‘)ã€‚&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;AST&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;è¯­ä¹‰åˆ†æ&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ­£ç¡®çš„AST&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;å¯¹ä¸Šä¸€æ­¥çš„ASTè¿›è¡Œç±»å‹æ£€æŸ¥(åç§°æ£€æŸ¥ã€ç±»å‹æ¨æ–­ç­‰)ã€‚&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;æ­£ç¡®çš„AST&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;ä¸­é—´ç ç”Ÿæˆ&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;SSA ç‰¹æ€§çš„ä¸­é—´ç (IR)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;&lt;span&gt;ä¸­é—´ç çš„ä½œç”¨ä¹‹ä¸€æ˜¯é€‚é…ä¸åŒæ“ä½œç³»ç»Ÿï¼Œå…¼å®¹ä¸åŒå¹³å°ã€‚&lt;/span&gt;&lt;span&gt;Â &lt;/span&gt;&lt;span&gt;é™æ€å•èµ‹å€¼ï¼ˆStatic Single Assignmentã€SSAï¼‰æ˜¯ä¸­é—´ä»£ç çš„ç‰¹æ€§ï¼Œå¦‚æœä¸­é—´ä»£ç å…·æœ‰é™æ€å•èµ‹å€¼çš„ç‰¹æ€§ï¼Œé‚£ä¹ˆæ¯ä¸ªå˜é‡å°±åªä¼šè¢«èµ‹å€¼ä¸€æ¬¡ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;SSA ç‰¹æ€§çš„ä¸­é—´ç (IR)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;ä»£ç ä¼˜åŒ–&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;ä¼˜åŒ–åçš„ä¸­é—´ç &lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;br/&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;ä¼˜åŒ–åçš„ä¸­é—´ç &lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æœºå™¨ç ç”Ÿæˆ&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;æ±‡ç¼–ä»£ç ï¼ˆPlan9ï¼‰&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;span&gt;å¯¹ä¸åŒç³»ç»ŸæŒ‡ä»¤é›†ã€CPUæ¶æ„ç¿»è¯‘æˆä¸åŒçš„æœºå™¨ç ã€‚&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;&lt;p&gt;&lt;strong&gt;æˆ‘ä»¬è¦æ‹¿æ¥åšè§„åˆ™å¼•æ“çš„å°±æ˜¯å‰é¢ä¸¤æ­¥çš„äº§ç‰©ï¼šè¯æ³•åˆ†æå¾—åˆ°çš„Tokenå’Œè¯­æ³•åˆ†æçš„ASTã€‚&lt;/strong&gt;&lt;/p&gt;&lt;h3&gt;&lt;strong&gt;Token(è®°å·)&lt;/strong&gt;&lt;/h3&gt;&lt;p&gt;&lt;span&gt;Tokenæ˜¯é«˜çº§è¯­è¨€ä¸­æœ€å°çš„è¯æ³•å•å…ƒï¼ŒGoä¸»è¦æœ‰æ ‡è¯†ç¬¦ã€å…³é”®å­—ã€è¿ç®—ç¬¦å’Œåˆ†éš”ç¬¦ç­‰Tokenï¼Œæ›´å¤šçš„tokenå®šä¹‰å‚è€ƒ&lt;/span&gt;&lt;span&gt;&lt;span&gt;tokenæ–‡ä»¶&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ¯”å¦‚æˆ‘ä»¬æ‰«æ`&lt;/span&gt;&lt;span&gt;&lt;code&gt;println(â€Hello Worldâ€)`&lt;/code&gt;&lt;span&gt;ï¼Œå¾—åˆ°ä»¥ä¸‹tokenï¼š&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ‰«æä»£ç ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&quot;fmt&quot;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&quot;go/scanner&quot;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&quot;go/token&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;var&lt;/span&gt; src &lt;span&gt;=&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;`println(&quot;Hello World!&quot;)`&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;var&lt;/span&gt; fset &lt;span&gt;=&lt;/span&gt; token&lt;span&gt;.&lt;/span&gt;&lt;span&gt;NewFileSet&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;var&lt;/span&gt; file &lt;span&gt;=&lt;/span&gt; fset&lt;span&gt;.&lt;/span&gt;&lt;span&gt;AddFile&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;hello.go&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; fset&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Base&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;len&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;src&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;var&lt;/span&gt; s scanner&lt;span&gt;.&lt;/span&gt;Scanner&lt;br/&gt;  s&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Init&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;file&lt;span&gt;,&lt;/span&gt; src&lt;span&gt;,&lt;/span&gt; &lt;span&gt;nil&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; scanner&lt;span&gt;.&lt;/span&gt;ScanComments&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;for&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    pos&lt;span&gt;,&lt;/span&gt; tok&lt;span&gt;,&lt;/span&gt; lit &lt;span&gt;:=&lt;/span&gt; s&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Scan&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;if&lt;/span&gt; tok &lt;span&gt;==&lt;/span&gt; token&lt;span&gt;.&lt;/span&gt;EOF &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;      &lt;span&gt;break&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    fmt&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Printf&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;%s\\t%s\\t%q\\n&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; fset&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Position&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;pos&lt;span&gt;)&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; tok&lt;span&gt;,&lt;/span&gt; lit&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;æ‰«æç»“æœï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;hello&lt;span&gt;.&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;  IDENT &lt;span&gt;&quot;println&quot;&lt;/span&gt;&lt;br/&gt;hello&lt;span&gt;.&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;  &lt;span&gt;(&lt;/span&gt; &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;hello&lt;span&gt;.&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;  STRING  &lt;span&gt;&quot;\\&quot;&lt;/span&gt;Hello World&lt;span&gt;!&lt;/span&gt;\\&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;hello&lt;span&gt;.&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;23&lt;/span&gt; &lt;span&gt;)&lt;/span&gt; &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;hello&lt;span&gt;.&lt;/span&gt;&lt;span&gt;go&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;24&lt;/span&gt; &lt;span&gt;;&lt;/span&gt; &lt;span&gt;&quot;\\n&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;å…¶ä¸­`&lt;/span&gt;&lt;span&gt;&lt;code&gt;println`&lt;/code&gt;&lt;span&gt;æ˜¯æ ‡è¯†ç¬¦(IDENT)Tokenï¼Œ `&lt;/span&gt;&lt;code&gt;Hello World`&lt;/code&gt;&lt;span&gt;åˆ™æ˜¯å­—ç¬¦ä¸²Tokenã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;h3&gt;&lt;strong&gt;AST(æŠ½è±¡è¯­æ³•æ ‘)&lt;/strong&gt;&lt;/h3&gt;&lt;p&gt;&lt;span&gt;æœ‰äº†Scanneræ‰«æå‡ºæ¥çš„Tokenåºåˆ—ï¼Œåˆ°è¯­æ³•åˆ†æè¿™ä¸€æ­¥ï¼Œå°±å¯ä»¥è¿›ä¸€æ­¥æ„é€ ASTï¼Œä½†å¦‚æœçœ‹å…·ä½“çš„ASTï¼Œä¼šå‘ç°ASTä¸­ä¸æ­¢æœ‰Tokenï¼Œæ¯”å¦‚åŒæ ·æ˜¯è¿™æ®µ`&lt;/span&gt;&lt;span&gt;&lt;code&gt;println(â€Hello Worldâ€)`&lt;/code&gt;&lt;span&gt;ï¼Œå®ƒçš„ASTå¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è§£æä»£ç ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;package&lt;/span&gt; main&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&quot;go/ast&quot;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&quot;go/parser&quot;&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;&quot;go/token&quot;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;main&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  src &lt;span&gt;:=&lt;/span&gt; &lt;span&gt;`&lt;br/&gt;package main&lt;br/&gt;func main() {&lt;br/&gt;  println(&quot;Hello, World!&quot;)&lt;br/&gt;}&lt;br/&gt;`&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;// Create the AST by parsing src.&lt;/span&gt;&lt;br/&gt;  fset &lt;span&gt;:=&lt;/span&gt; token&lt;span&gt;.&lt;/span&gt;&lt;span&gt;NewFileSet&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;// positions are relative to fset&lt;/span&gt;&lt;br/&gt;  f&lt;span&gt;,&lt;/span&gt; err &lt;span&gt;:=&lt;/span&gt; parser&lt;span&gt;.&lt;/span&gt;&lt;span&gt;ParseFile&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;fset&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; src&lt;span&gt;,&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;if&lt;/span&gt; err &lt;span&gt;!=&lt;/span&gt; &lt;span&gt;nil&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;panic&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;err&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;// Print the AST.&lt;/span&gt;&lt;br/&gt;  ast&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;fset&lt;span&gt;,&lt;/span&gt; f&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;Â &lt;span/&gt;&lt;span&gt;è§£æç»“æœï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;     &lt;span&gt;0&lt;/span&gt;  &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;File &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;1&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Package&lt;span&gt;:&lt;/span&gt; &lt;span&gt;2&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;2&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Ident &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;3&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  NamePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;2&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;4&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;main&quot;&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;5&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;6&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Decls&lt;span&gt;:&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Decl &lt;span&gt;(&lt;/span&gt;&lt;span&gt;len&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;7&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;0&lt;/span&gt;&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;FuncDecl &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;8&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Ident &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;9&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  NamePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;3&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;10&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;main&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;11&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Obj&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Object &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;12&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Kind&lt;span&gt;:&lt;/span&gt; &lt;span&gt;func&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;13&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;main&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;14&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Decl&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;obj @ &lt;span&gt;7&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;15&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;16&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;17&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Type&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;FuncType &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;18&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Func&lt;span&gt;:&lt;/span&gt; &lt;span&gt;3&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;19&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Params&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;FieldList &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;20&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Opening&lt;span&gt;:&lt;/span&gt; &lt;span&gt;3&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;21&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Closing&lt;span&gt;:&lt;/span&gt; &lt;span&gt;3&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;22&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;23&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;24&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Body&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BlockStmt &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;25&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Lbrace&lt;span&gt;:&lt;/span&gt; &lt;span&gt;3&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;26&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  List&lt;span&gt;:&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Stmt &lt;span&gt;(&lt;/span&gt;&lt;span&gt;len&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;27&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;0&lt;/span&gt;&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;ExprStmt &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;28&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  X&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;CallExpr &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;29&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Fun&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Ident &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;30&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  NamePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;4&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;31&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;println&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;32&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;33&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Lparen&lt;span&gt;:&lt;/span&gt; &lt;span&gt;4&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;34&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Args&lt;span&gt;:&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Expr &lt;span&gt;(&lt;/span&gt;&lt;span&gt;len&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;35&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;0&lt;/span&gt;&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BasicLit &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;36&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  ValuePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;4&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;37&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Kind&lt;span&gt;:&lt;/span&gt; STRING&lt;br/&gt;    &lt;span&gt;38&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Value&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;\\&quot;&lt;/span&gt;Hello&lt;span&gt;,&lt;/span&gt; World&lt;span&gt;!&lt;/span&gt;\\&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;39&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;40&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;41&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Ellipsis&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;42&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Rparen&lt;span&gt;:&lt;/span&gt; &lt;span&gt;4&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;25&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;43&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;44&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;45&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;46&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Rbrace&lt;span&gt;:&lt;/span&gt; &lt;span&gt;5&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;47&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;48&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;49&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;50&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Scope&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Scope &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;51&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Objects&lt;span&gt;:&lt;/span&gt; &lt;span&gt;map&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Object &lt;span&gt;(&lt;/span&gt;&lt;span&gt;len&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;52&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;&quot;main&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;obj @ &lt;span&gt;11&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;53&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;54&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;55&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Unresolved&lt;span&gt;:&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Ident &lt;span&gt;(&lt;/span&gt;&lt;span&gt;len&lt;/span&gt; &lt;span&gt;=&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;56&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;0&lt;/span&gt;&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;obj @ &lt;span&gt;29&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;57&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;58&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;span&gt;æ•´ä¸ªASTåŒ…æ‹¬Packageã€Nameã€Declsã€Scopeè·ŸUnresolvedï¼Œå…¶ä¸­æ ¸å¿ƒå†…å®¹åœ¨&lt;strong&gt;Declsé‡Œè¾¹ï¼ˆç¬¬6è¡Œï½49è¡Œï¼‰&lt;/strong&gt;ã€‚&lt;/span&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;Declsæ˜¯å£°æ˜declarationçš„é›†åˆï¼Œé‡Œè¾¹æœ‰&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;FuncDecl(å‡½æ•°å£°æ˜)&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼Œæœ‰&lt;/span&gt;&lt;strong&gt;&lt;span&gt;BlockStmt(å—è¯­å¥)&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼Œè¿˜æœ‰&lt;/span&gt;&lt;strong&gt;&lt;span&gt;CallExpr(è¡¨è¾¾å¼)&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ç­‰ã€‚æ·±å…¥&lt;/span&gt;&lt;span&gt;&lt;span&gt;aståº“&lt;/span&gt;&lt;span&gt;ï¼Œå¯ä»¥å‘ç°&lt;/span&gt;&lt;strong&gt;&lt;span&gt;è¿™ä¸‰ä¸ªæ­£æ˜¯ASTèŠ‚ç‚¹çš„ä¸»è¦ç±»å‹ï¼Œå®ƒä»¬éƒ½å®ç°äº†Node(èŠ‚ç‚¹)æ¥å£&lt;/span&gt;&lt;span&gt;ï¼Œå°±æ˜¯è¯´ï¼ŒASTè¿™é¢—æ ‘æŒ‚çš„éƒ½æ˜¯è¿™ä¸‰ä¸ªç©æ„ã€‚&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;// ----------------------------------------------------------------------------&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// Interfaces&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// There are 3 main classes of nodes: Expressions and type nodes,&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// statement nodes, and declaration nodes. The node names usually&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// match the corresponding Go spec production names to which they&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// correspond. The node fields correspond to the individual parts&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// of the respective productions.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// All nodes contain position information marking the beginning of&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// the corresponding source text segment; it is accessible via the&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// Pos accessor method. Nodes may contain additional position info&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// for language constructs where comments may be found between parts&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// of the construct (typically any larger, parenthesized subpart).&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// That position information is needed to properly position comments&lt;/span&gt;&lt;br/&gt;&lt;span&gt;// when printing the construct.&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// All node types implement the Node interface.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; Node &lt;span&gt;interface&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;Pos&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; token&lt;span&gt;.&lt;/span&gt;Pos &lt;span&gt;// position of first character belonging to the node&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;End&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; token&lt;span&gt;.&lt;/span&gt;Pos &lt;span&gt;// position of first character immediately after the node&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// All expression nodes implement the Expr interface.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; Expr &lt;span&gt;interface&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  Node&lt;br/&gt;  &lt;span&gt;exprNode&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// All statement nodes implement the Stmt interface.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; Stmt &lt;span&gt;interface&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  Node&lt;br/&gt;  &lt;span&gt;stmtNode&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// All declaration nodes implement the Decl interface.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;type&lt;/span&gt; Decl &lt;span&gt;interface&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  Node&lt;br/&gt;  &lt;span&gt;declNode&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å¸¸è§çš„è¡¨è¾¾å¼æœ‰ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;UnaryExpr ä¸€å…ƒè¡¨è¾¾å¼&lt;br/&gt;BinaryExpr äºŒå…ƒè¡¨è¾¾å¼&lt;br/&gt;ParenExpr æ‹¬å·è¡¨è¾¾å¼&lt;span&gt;,&lt;/span&gt;è¢«æ‹¬å·åŒ…è£¹çš„è¡¨è¾¾å¼&lt;br/&gt;&lt;span&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;å¸¸è§çš„è¯­å¥æœ‰ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;AssignStmt èµ‹å€¼è¯­å¥&lt;br/&gt;SwitchStmt &lt;span&gt;switch&lt;/span&gt; è¯­å¥&lt;br/&gt;DeferStmt å»¶è¿Ÿè¯­å¥&lt;br/&gt;ForStmt &lt;span&gt;for&lt;/span&gt; è¯­å¥&lt;br/&gt;&lt;span&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;æ›´å¤šå®šä¹‰åœ¨&lt;/span&gt;&lt;span&gt;&lt;span&gt;astæ–‡ä»¶&lt;/span&gt;&lt;span&gt;ä¸­éƒ½å¯ä»¥æ‰¾åˆ°ï¼Œå¹¶ä¸éš¾ä»¥ç†è§£ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;h3&gt;&lt;strong&gt;éœ€æ±‚å®ç°&lt;/strong&gt;&lt;/h3&gt;&lt;p&gt;&lt;span&gt;è®¤è¯†äº†Tokenè·ŸASTåï¼Œæˆ‘ä»¬çœ‹æ€ä¹ˆç®€å•å®ç°æˆ‘ä»¬çš„è§„åˆ™è§£æï¼Œè¿˜æ˜¯ç”¨ä¸Šæ–‡çš„ä¾‹å­ï¼Œè¦åˆ¤æ–­httpè¯·æ±‚headerçš„key/valueåŠcookieçš„name/valueæ˜¯å¦æ»¡è¶³ä»¥ä¸‹è§„åˆ™ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&quot;header&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;{&lt;/span&gt; &lt;span&gt;&quot;key&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;X-APP-ID&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&quot;value&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;Ves&quot;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&quot;cookie&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;&quot;name&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;feature&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;&quot;value&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;dev/wynnliu/qualify-rule&quot;&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;ä»¥headerçš„è§„åˆ™è§£æASTä¸ºä¾‹ï¼Œ`&lt;/span&gt;&lt;span&gt;&lt;code&gt;header.key==&quot;X-APP-ID&quot; &amp;amp;&amp;amp; header.value==&quot;Ves&quot;`&lt;/code&gt;&lt;span&gt;ï¼Œæ‰“å°çš„ASTå¦‚ä¸‹ï¼Œ&lt;/span&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;ASTå¾ˆæ¸…æ™°åœ°è¡¨ç¤ºè¿™æ¡è§„åˆ™æ˜¯ä¸ªBinaryExprï¼Œå³äºŒå…ƒè¡¨è¾¾å¼ï¼ŒäºŒå…ƒè¡¨è¾¾å¼çš„å·¦è¾¹ä¸ºXï¼Œå³è¾¹æ˜¯Yï¼Œé€»è¾‘è¿ç®—ç¬¦ä¸ºOp&lt;/span&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;Â     0&lt;/span&gt;  &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BinaryExpr &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;1&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  X&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BinaryExpr &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;2&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  X&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;SelectorExpr &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;3&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  X&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Ident &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;4&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  NamePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;5&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;header&quot;&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;6&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Obj&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Object &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;7&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Kind&lt;span&gt;:&lt;/span&gt; bad&lt;br/&gt;     &lt;span&gt;8&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;     &lt;span&gt;9&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;10&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;11&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Sel&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Ident &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;12&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  NamePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;13&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;key&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;14&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;15&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;16&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  OpPos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;17&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Op&lt;span&gt;:&lt;/span&gt; &lt;span&gt;==&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;18&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Y&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BasicLit &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;19&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  ValuePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;20&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Kind&lt;span&gt;:&lt;/span&gt; STRING&lt;br/&gt;    &lt;span&gt;21&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Value&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;\\&quot;&lt;/span&gt;X&lt;span&gt;-&lt;/span&gt;APP&lt;span&gt;-&lt;/span&gt;ID\\&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;22&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;23&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;24&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  OpPos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;25&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Op&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;26&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Y&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BinaryExpr &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;27&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  X&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;SelectorExpr &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;28&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  X&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Ident &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;29&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  NamePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;30&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;header&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;31&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Obj&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;obj @ &lt;span&gt;6&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;32&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;33&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Sel&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;Ident &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;34&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  NamePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;35&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Name&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;value&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;36&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;37&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;38&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  OpPos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;39&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Op&lt;span&gt;:&lt;/span&gt; &lt;span&gt;==&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;40&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Y&lt;span&gt;:&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BasicLit &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;41&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  ValuePos&lt;span&gt;:&lt;/span&gt; &lt;span&gt;-&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;42&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Kind&lt;span&gt;:&lt;/span&gt; STRING&lt;br/&gt;    &lt;span&gt;43&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  Value&lt;span&gt;:&lt;/span&gt; &lt;span&gt;&quot;\\&quot;&lt;/span&gt;Ves\\&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;44&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;45&lt;/span&gt;  &lt;span&gt;.&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;46&lt;/span&gt;  &lt;span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;span&gt;æœ‰äº†ASTç»“æ„ï¼Œæˆ‘ä»¬å¯ä»¥&lt;strong&gt;åˆ†åˆ«è·å–å·¦è¾¹(X)çš„keyå€¼å’Œå³è¾¹(Y)çš„å€¼æ ¹æ®é€»è¾‘è¿ç®—ç¬¦(Op)å®Œæˆåˆ¤æ–­&lt;/strong&gt;ï¼Œå¦‚ä¸‹æ˜¯ç®€å•çš„åˆ¤æ–­å®ç°ï¼š&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;// Parse&lt;/span&gt;&lt;br/&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;Parse&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;expr &lt;span&gt;string&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; header http&lt;span&gt;.&lt;/span&gt;Header&lt;span&gt;)&lt;/span&gt; &lt;span&gt;(&lt;/span&gt;&lt;span&gt;bool&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;error&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  exprAst&lt;span&gt;,&lt;/span&gt; err &lt;span&gt;:=&lt;/span&gt; parser&lt;span&gt;.&lt;/span&gt;&lt;span&gt;ParseExpr&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;expr&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;if&lt;/span&gt; err &lt;span&gt;!=&lt;/span&gt; &lt;span&gt;nil&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;    &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; err&lt;br/&gt;  &lt;span&gt;}&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;// æ‰“å° ast&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;//fset := token.NewFileSet()&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;//ast.Print(fset, exprAst)&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;return&lt;/span&gt; &lt;span&gt;judge&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;exprAst&lt;span&gt;,&lt;/span&gt; header&lt;span&gt;)&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;nil&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;// åˆ¤æ–­&lt;/span&gt;&lt;br/&gt;&lt;span&gt;func&lt;/span&gt; &lt;span&gt;judge&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;bop ast&lt;span&gt;.&lt;/span&gt;Node&lt;span&gt;,&lt;/span&gt; header http&lt;span&gt;.&lt;/span&gt;Header&lt;span&gt;)&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt; &lt;span&gt;{&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;// æ–­è¨€æˆäºŒå…ƒè¡¨è¾¾å¼&lt;/span&gt;&lt;br/&gt;  expr &lt;span&gt;:=&lt;/span&gt; bop&lt;span&gt;.&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BinaryExpr&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;  x &lt;span&gt;:=&lt;/span&gt; expr&lt;span&gt;.&lt;/span&gt;X&lt;span&gt;.&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BinaryExpr&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;  key &lt;span&gt;:=&lt;/span&gt; x&lt;span&gt;.&lt;/span&gt;Y&lt;span&gt;.&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BasicLit&lt;span&gt;)&lt;/span&gt; &lt;span&gt;// keyå€¼&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  y &lt;span&gt;:=&lt;/span&gt; expr&lt;span&gt;.&lt;/span&gt;Y&lt;span&gt;.&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BinaryExpr&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;  value &lt;span&gt;:=&lt;/span&gt; y&lt;span&gt;.&lt;/span&gt;Y&lt;span&gt;.&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;ast&lt;span&gt;.&lt;/span&gt;BasicLit&lt;span&gt;)&lt;/span&gt; &lt;span&gt;// valueå€¼&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;  &lt;span&gt;// ç­‰å€¼åŒ¹é…&lt;/span&gt;&lt;br/&gt;  &lt;span&gt;return&lt;/span&gt; header&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Get&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;strings&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Trim&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;key&lt;span&gt;.&lt;/span&gt;Value&lt;span&gt;,&lt;/span&gt; &lt;span&gt;`&quot;`&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt; &lt;span&gt;==&lt;/span&gt; strings&lt;span&gt;.&lt;/span&gt;&lt;span&gt;Trim&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;value&lt;span&gt;.&lt;/span&gt;Value&lt;span&gt;,&lt;/span&gt; &lt;span&gt;`&quot;`&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;br/&gt;&lt;span&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h2&gt;&lt;strong&gt;æ›´è¿›ä¸€æ­¥&lt;/strong&gt;&lt;/h2&gt;&lt;p&gt;&lt;span&gt;é€šè¿‡ä»¥ä¸Šçš„ç®€å•ä¾‹å­ï¼Œæˆ‘ä»¬å¤§æ¦‚å¯ä»¥åˆ©ç”¨goçš„aståº“å’Œparseråº“å®ç°ä¸ªç®€å•çš„è§„åˆ™å¼•æ“ã€‚ä½†è¿™å¯èƒ½è¿˜ä¸å¤Ÿï¼Œå¦‚æœè¦è¦†ç›–æ›´å¤æ‚çš„è§„åˆ™ï¼Œä¸ä»…ä»…æ˜¯åªæœ‰å¸ƒå°”è¡¨è¾¾å¼ï¼Œå°±è¦è®¾è®¡è‡ªå·±çš„è§„åˆ™åŸè¯­ï¼Œæ¯”å¦‚å°†`&lt;/span&gt;&lt;span&gt;&lt;code&gt;header.key==&quot;X-APP-ID&quot; &amp;amp;&amp;amp; header.value==&quot;Ves&quot;`&lt;/code&gt;&lt;span&gt;å’Œ`&lt;/span&gt;&lt;code&gt;cookie.name==&quot;feature&quot; &amp;amp;&amp;amp; cookie.value==&quot;dev/wynnliu/qualify-rule&quot;`&lt;/code&gt;&lt;span&gt;è®¾è®¡æˆ&lt;/span&gt;&lt;code&gt;`req_header_pair_is(&quot;X-APP-ID&quot;, &quot;VES&quot;) &amp;amp;&amp;amp; req_cookie_contain(&quot;feature&quot;, &quot;dev/wynnliu/qualify-rule&quot;)`&lt;/code&gt;&lt;span&gt;ã€‚&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;è¿™æ—¶å°±éœ€è¦å¼•å…¥&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;GoYACC&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;ï¼Œ&lt;/span&gt;&lt;span&gt;&lt;span&gt;YACC(Yet Another Compiler Compiler)ï¼Œæ˜¯ä¸€ä¸ªç»å…¸çš„ç”Ÿæˆè¯­æ³•åˆ†æå™¨çš„å·¥å…·ï¼ŒGoYACCæ˜¯Golangç‰ˆæœ¬çš„YACCã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;ç”¨GoYACCè§£æè‡ªå·±è®¾è®¡çš„BNF/EBNF(å·´ç§‘æ–¯èŒƒå¼ï¼æ‰©å±•å·´ç§‘æ–¯èŒƒå¼ï¼Œå®šä¹‰è¯­æ³•è§„åˆ™)ã€‚GoYACCæ•´ä½“ä½¿ç”¨åŸç†åŸºæœ¬è¿˜æ˜¯ä¸Šæ–‡æåˆ°çš„ç¼–è¯‘è¿‡ç¨‹ï¼Œä½†æ¶‰åŠçš„ç»†èŠ‚è¾ƒå¤šï¼Œæœ¬æ–‡ä¸å±•å¼€ï¼Œæœ‰å…´è¶£çš„è¯»è€…æœ‹å‹å¯ä»¥å‚è€ƒ&lt;/span&gt;&lt;span&gt;&lt;span&gt;TiDB SQL Parser&lt;/span&gt;&lt;span&gt;ï¼Œäº†è§£TiDBçš„sqlè§£æå™¨å¦‚ä½•åŸºäºGoYACCè®¾è®¡å®Œæˆsqlè§£æã€‚&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>21f911dcaa8e39ac4e4f4e831c5e3163</guid>
<title>ç”±æµ…å…¥æ·±ï¼Œè¯¦è§£ ViewModel çš„é‚£äº›äº‹</title>
<link>https://toutiao.io/k/geggror</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content js_underline_content             autoTypeSetting24psection&amp;#10;            &quot; id=&quot;js_content&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5629163582531458&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCb3HUWGIaDIDhrSm8XiaXGZOjbrq6A2axxy0EVEnDbcQsxt91GqCx74g/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;2702&quot;/&gt;&lt;/p&gt;&lt;h2 data-id=&quot;heading-0&quot;&gt;å¼•è¨€&lt;/h2&gt;&lt;p&gt;å…³äºÂ &lt;span&gt;ViewModel&lt;/span&gt;Â ï¼ŒAndroid å¼€å‘çš„å°ä¼™ä¼´åº”è¯¥éƒ½éå¸¸ç†Ÿæ‚‰ï¼Œæ— è®ºæ˜¯æ–°é¡¹ç›®è¿˜æ˜¯è€é¡¹ç›®ï¼ŒåŸºæœ¬éƒ½ä¼šä½¿ç”¨åˆ°ã€‚è€ŒÂ &lt;span&gt;ViewModel&lt;/span&gt;Â ä½œä¸ºÂ &lt;code&gt;JetPack&lt;/code&gt;Â æ ¸å¿ƒç»„ä»¶ï¼Œå…¶æœ¬èº«ä¹Ÿæ›´æ˜¯æ‰¿æ‹…ç€ä¸å¯æˆ–ç¼ºçš„ä½œç”¨ã€‚&lt;/p&gt;&lt;p&gt;å› æ­¤ï¼Œäº†è§£Â &lt;span&gt;ViewModel&lt;/span&gt;Â çš„è®¾è®¡æ€æƒ³æ›´æ˜¯æ¯ä¸ªåº”ç”¨å±‚å¼€å‘è€…å¿…ä¸å¯ç¼ºçš„åŸºæœ¬åŠŸã€‚&lt;/p&gt;&lt;p&gt;éšç€è¿™ä¸¤å¹´Â &lt;code&gt;ViewModel&lt;/code&gt;Â çš„é€æ­¥è¿­ä»£ï¼Œæ¯”å¦‚Â &lt;span&gt;SaveStateHandle&lt;/span&gt;Â çš„åŠ å…¥ç­‰ï¼Œ&lt;span&gt;ViewModel&lt;/span&gt;Â ä¹Ÿå·²ç»ä¸æ˜¯æœ€åˆç‰ˆæœ¬çš„æ ·å­ã€‚è¦å®Œå…¨ç†è§£å…¶è®¾è®¡ä½“ç³»ï¼Œå¾€å¾€ä¹Ÿè¦ä¼´éšç€å…¶ä»–ç»„ä»¶çš„åŸºç¡€ï¼Œæ‰€ä»¥å¹¶ä¸æ˜¯ç‰¹åˆ«å®¹æ˜“èƒ½è¢«å¼€å‘è€…åƒé€ã€‚&lt;/p&gt;&lt;p&gt;æ•…æœ¬ç¯‡å°†ä»¥æœ€æ–°è§†è§’å¼€å§‹ï¼Œä¸ä½ ä¸€èµ·ï¼Œç”¨åŠ›ä¸€ç¥Â &lt;span&gt;ViewModel&lt;/span&gt;Â çš„è®¾è®¡åŸç†ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;æœ¬æ–‡å¯¹åº”çš„ç»„ä»¶ç‰ˆæœ¬ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;em&gt;Activity-ktx-1.5.1&lt;/em&gt;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;em&gt;ViewModel-ktx-2.5.1&lt;/em&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote&gt;&lt;p&gt;æœ¬ç¯‡å®šä½ä¸­ç­‰ï¼Œå°†ä»èƒŒæ™¯ä¸ä½¿ç”¨æ–¹å¼å¼€å§‹ï¼Œå†åˆ°æºç è§£è¯»ã€‚ç”±æµ…å…¥æ·±ï¼Œè§£æÂ &lt;code&gt;ViewModel&lt;/code&gt;Â çš„æ–¹æ–¹é¢é¢ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 data-id=&quot;heading-1&quot;&gt;å¯¼èˆª&lt;/h2&gt;&lt;p&gt;å­¦å®Œæœ¬ç¯‡ï¼Œä½ å°†äº†è§£æˆ–æ˜ç™½ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;&lt;code&gt;ViewModel&lt;/code&gt;Â çš„ä½¿ç”¨æ–¹å¼ï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;code&gt;SavedStateHandle&lt;/code&gt;Â çš„ä½¿ç”¨æ–¹å¼ï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;code&gt;ViewModel&lt;/code&gt;Â åˆ›å»ºä¸é”€æ¯æµç¨‹ï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;code&gt;SavedStateHandle&lt;/code&gt;Â åˆ›å»ºæµç¨‹ï¼›&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;å¥½äº†ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§! ğŸŠ&lt;/p&gt;&lt;h2 data-id=&quot;heading-2&quot;&gt;åŸºç¡€æ¦‚å¿µ&lt;/h2&gt;&lt;p&gt;åœ¨å¼€å§‹æœ¬ç¯‡å‰ï¼Œæˆ‘ä»¬å…ˆè§£é‡Šä¸€äº›åŸºç¡€æ¦‚å¿µï¼Œä»¥ä¾¿æ›´åŠ æ¸…æ™°çš„äº†è§£åç»­çš„çŠ¶æ€ä¿å­˜ç›¸å…³ã€‚&lt;/p&gt;&lt;h3 data-id=&quot;heading-3&quot;&gt;ä½•è°“é…ç½®å˜æ›´?&lt;/h3&gt;&lt;p&gt;é…ç½®å˜æ›´æŒ‡çš„æ˜¯ï¼Œ&lt;span&gt;åº”ç”¨åœ¨è¿è¡Œæ—¶ï¼Œå†…ç½®çš„é…ç½®å‚æ•°å˜æ›´ä»è€Œè§¦å‘çš„Activityé‡æ–°åˆ›å»º&lt;/span&gt;ã€‚&lt;/p&gt;&lt;p&gt;å¸¸è§çš„åœºæ™¯æœ‰ï¼šæ—‹è½¬å±å¹•ã€æ·±è‰²æ¨¡å¼åˆ‡æ¢ã€å±å¹•å¤§å°å˜åŒ–ã€æ›´æ”¹äº†é»˜è®¤è¯­è¨€æˆ–è€…æ—¶åŒºã€æ›´æ”¹å­—ä½“å¤§å°æˆ–ä¸»é¢˜é¢œè‰²ç­‰ã€‚&lt;/p&gt;&lt;h3 data-id=&quot;heading-4&quot;&gt;ä½•è°“å¼‚å¸¸é‡å»ºï¼Ÿ&lt;/h3&gt;&lt;p&gt;å¼‚å¸¸é‡å»ºæŒ‡çš„æ˜¯éé…ç½®å˜æ›´æƒ…å†µä¸‹å¯¼è‡´çš„Â &lt;code&gt;Activity&lt;/code&gt;Â é‡æ–°åˆ›å»ºã€‚&lt;/p&gt;&lt;p&gt;å¸¸è§åœºæ™¯å¤§å¤šæ˜¯å› ä¸ºÂ &lt;span&gt;å†…å­˜ä¸è¶³ï¼Œä»è€Œå¯¼è‡´åå°åº”ç”¨è¢«ç³»ç»Ÿå›æ”¶&lt;/span&gt;Â ï¼Œå½“æˆ‘ä»¬åˆ‡æ¢åˆ°å‰å°æ—¶ï¼Œä»è€Œè§¦å‘çš„é‡å»ºï¼Œè¿™ä¸ªæœºåˆ¶åœ¨Androidä¸­ä¸ºÂ &lt;code&gt;Low Memory Killer&lt;/code&gt;Â æœºåˆ¶ï¼Œç®€ç§°Â &lt;code&gt;LMK&lt;/code&gt;ã€‚&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;å¯ä»¥åœ¨å¼€å‘è€…æ¨¡å¼ï¼Œé™åˆ¶åå°ä»»åŠ¡æ•°ä¸º1ï¼Œä»è€Œæµ‹è¯•è¯¥æ•ˆæœã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 data-id=&quot;heading-5&quot;&gt;ViewModelå­˜åœ¨ä¹‹å‰çš„ä¸–ç•Œ&lt;/h2&gt;&lt;p&gt;åœ¨Â &lt;code&gt;ViewModel&lt;/code&gt;Â å‡ºç°ä¹‹å‰,å¯¹äºÂ &lt;code&gt;View&lt;/code&gt;Â é€»è¾‘ä¸æ•°æ®ï¼Œæˆ‘ä»¬å¾€å¾€éƒ½æ˜¯ç›´æ¥å­˜åœ¨Â &lt;code&gt;Activity&lt;/code&gt;Â æˆ–è€…Â &lt;code&gt;Fragment&lt;/code&gt;Â ä¸­ï¼Œä¼˜é›…ä¸€ç‚¹ï¼Œä¼šç»†åˆ†åˆ°å…·ä½“çš„å•ç‹¬ç±»ä¸­å»æ‰¿è½½ã€‚å½“é…ç½®å˜æ›´æ—¶ï¼Œæ— å¯é¿å…ï¼Œä¼šè§¦å‘ç•Œé¢é‡ç»˜ã€‚ç›¸åº”çš„ï¼Œæˆ‘ä»¬çš„æ•°æ®åœ¨æ²¡æœ‰é¢å¤–å¤„ç†çš„æƒ…å†µä¸‹ï¼Œå¾€å¾€ä¹Ÿä¼šè¢«åˆå§‹åŒ–ï¼Œç„¶ååœ¨ç•Œé¢é‡å¯æ—¶é‡æ–°åŠ è½½ã€‚&lt;/p&gt;&lt;p&gt;ä½†å¦‚æœå½“å‰é¡µé¢éœ€è¦ç»´æŠ¤æŸäº›çŠ¶æ€ä¸è¢«ä¸¢å¤±å‘¢ï¼Œæ¯”å¦‚ é€‰æ‹©ã€ä¸Šä¼ çŠ¶æ€ ç­‰ç­‰? æ­¤æ—¶é—®é¢˜å°±å˜å¾—æ£˜æ‰‹èµ·æ¥ã€‚&lt;/p&gt;&lt;p&gt;ç¨æœ‰ç»éªŒåŒå­¦ä¼šå‘Šè¯‰ä½ ï¼Œ&lt;span&gt;åœ¨ onSaveInstanceState ä¸­é‡å†™ï¼Œä½¿ç”¨bundleå»å­˜å‚¨ç›¸åº”çš„çŠ¶æ€å•Šï¼Ÿâ¡ï¸&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä½†çŠ¶æ€å¦‚æœå°‘ç‚¹è¿˜å¯ä»¥ï¼Œå¤šä¸€ç‚¹å°±éå¸¸å¤´ç—›ï¼Œæ›´åˆ«æåŒ…å«ç»§æ‰¿å…³ç³»çš„çŠ¶æ€ä¿å­˜ã€‚&lt;/span&gt;Â ğŸ˜¶â€ğŸŒ«ï¸&lt;/p&gt;&lt;p&gt;æ‰€ä»¥ï¼Œä¸å‡ºæ„å¤–çš„è¯ï¼Œæˆ‘ä»¬ App çš„Â &lt;span&gt;Activity-manifest&lt;/span&gt;Â ä¸­é€šå¸¸é»˜è®¤éƒ½æ˜¯ä¸‹åˆ—å†™æ³•:&lt;/p&gt;&lt;pre&gt;&lt;code lang=&quot;xml&quot;&gt;android:configChanges=&quot;keyboard|orientation|uiMode|...&quot;&lt;br/&gt;&lt;span&gt;å¤åˆ¶ä»£ç &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;blockquote&gt;&lt;p&gt;è¿™ä¹Ÿæ˜¯ä¸ºå•¥Androidç¨‹åºæ™®éä¸æ”¯æŒå±å¹•æ—‹è½¬çš„ä¸€éƒ¨åˆ†åŸå› ï¼Œä»æºå¤´æ‰¼æ€å› éƒ¨åˆ†é…ç½®å˜æ›´å¯¼è‡´çš„çŠ¶æ€ä¸¢å¤±é—®é¢˜ã€‚ğŸ¶ä¿å‘½&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 data-id=&quot;heading-6&quot;&gt;VideModelå­˜åœ¨ä¹‹åçš„ä¸–ç•Œ&lt;/h2&gt;&lt;p&gt;éšç€Â &lt;code&gt;ViewModel&lt;/code&gt;Â ç»„ä»¶æ¨å‡ºä¹‹åï¼Œä¸Šè¿°å› é…ç½®å˜æ›´è€Œå¯¼è‡´çš„çŠ¶æ€ä¸¢å¤±é—®é¢˜å°±è¿åˆƒè€Œè§£ã€‚&lt;/p&gt;&lt;p&gt;&lt;code&gt;ViewModel&lt;/code&gt;Â å¯ä»¥åšåˆ°åœ¨é…ç½®å˜æ›´åä¾ç„¶æŒæœ‰çŠ¶æ€ã€‚æ‰€ä»¥ï¼Œåœ¨ç°åœ¨çš„å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¼€å§‹å°†Â &lt;span&gt;Viewæ•°æ®&lt;/span&gt;Â ä¸ é€»è¾‘ è—äºÂ &lt;code&gt;ViewModel&lt;/code&gt;Â ä¸­ï¼Œç„¶åå¯¹å¤–éƒ¨æš´æ¼è§‚å¯Ÿè€…ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸å¸¸ä¼šæ­é…Â &lt;code&gt;LiveData&lt;/code&gt;Â ä¸€èµ·ä½¿ç”¨ï¼Œä»¥æ­¤æ›´å®¹æ˜“çš„ä¿æŒçŠ¶æ€åŒæ­¥ã€‚&lt;/p&gt;&lt;p&gt;å…³äºÂ &lt;code&gt;ViewModel&lt;/code&gt;Â çš„ç”Ÿå‘½å‘¨æœŸï¼Œå…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.0402298850574712&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwC0R17FolXzdJXYyXOsUyIs4y7bcWklO1ZcGYibBVfmyvqAibh9vLXlvjQ/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;522&quot;/&gt;&lt;/p&gt;&lt;p&gt;è™½ç„¶Â &lt;code&gt;ViewModel&lt;/code&gt;Â éå¸¸å¥½ç”¨ï¼Œä½†Â &lt;code&gt;ViewModel&lt;/code&gt;Â ä¹Ÿä¸æ˜¯ä¸‡èƒ½ï¼Œå…¶åªèƒ½é¿å…é…ç½®å˜æ›´æ—¶é¿å…çŠ¶æ€ä¸¢å¤±ã€‚æ¯”å¦‚å¦‚æœæˆ‘ä»¬çš„Appæ˜¯å› ä¸ºÂ &lt;span&gt;å†…å­˜ä¸è¶³&lt;/span&gt;Â è€Œè¢«ç³»ç»Ÿ&lt;span&gt;kill&lt;/span&gt;Â æ‰ï¼Œæ­¤æ—¶Â &lt;code&gt;ViewModel&lt;/code&gt;Â ä¹Ÿä¼šè¢«æ¸…é™¤ ğŸ”º ã€‚&lt;/p&gt;&lt;p&gt;ä¸è¿‡å¯¹äºè¿™ç§æƒ…å†µï¼Œä»ç„¶æœ‰ä»¥ä¸‹ä¸‰ä¸ªæ–¹æ³•å¯ä»¥ä¾ç„¶ä¿å­˜æˆ‘ä»¬çš„çŠ¶æ€:&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;é‡å†™Â &lt;code&gt;onSaveInstanceState()&lt;/code&gt;Â ä¸Â &lt;code&gt;onRestoreInstanceState()&lt;/code&gt;;&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;ä½¿ç”¨Â &lt;code&gt;SavedState&lt;/code&gt;,æœ¬è´¨ä¸Šå…¶å®è¿˜æ˜¯Â &lt;code&gt;onSaveInstanceState()&lt;/code&gt;Â ï¼›&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;ä½¿ç”¨Â &lt;code&gt;SavedStateHandle&lt;/code&gt;Â ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¾æ‰˜äºÂ &lt;code&gt;SaveState&lt;/code&gt;Â çš„å®ç°;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote&gt;&lt;p&gt;ä¸Šè¿°çš„åä¸¤ç§éƒ½æ˜¯éšç€Â &lt;span&gt;JetPack&lt;/span&gt;Â é€æ­¥è¢«æ¨å‡ºï¼Œå¯ä»¥ç†è§£ä¸ºæ˜¯å¯¹åŸæœ‰çš„onSavexxçš„å°è£…ç®€åŒ–ï¼Œä»è€Œä½¿å…¶å˜å¾—æ›´æ˜“ç”¨ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;å…³äºè¿™ä¸‰ç§æ–¹æ³•ï¼Œæˆ‘ä»¬ä¼šåœ¨Â &lt;code&gt;SavedStateHandle&lt;/code&gt;Â æµç¨‹è§£æä¸­å†è¿›è¡Œå…·ä½“å™è¿°ï¼Œè¿™é‡Œå…ˆæå‡ºæ¥ï¼Œç•™ä¸ªä¼ç¬”ã€‚&lt;/p&gt;&lt;h2 data-id=&quot;heading-7&quot;&gt;ViewModelä½¿ç”¨æ–¹å¼&lt;/h2&gt;&lt;p&gt;ä½œä¸ºæ–‡ç« çš„å¼€å§‹ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦å…ˆèŠä¸€èŠÂ &lt;code&gt;ViewModel&lt;/code&gt;Â çš„ä½¿ç”¨æ–¹å¼ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤º:&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.3252032520325203&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCX0iaVwFzs9Y6mxn4seyeMG1lHSnNz6AfYyDVgjYbtupZnGdInRjKriaA/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1722&quot;/&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©å¼•å…¥Â &lt;span&gt;activity-ktx&lt;/span&gt;Â ,ä»è€Œä»¥æ›´ç®€ä¾¿çš„å†™æ³•å»å†™ï¼š&lt;/p&gt;&lt;pre&gt;&lt;code lang=&quot;groovy&quot;&gt;implementation &#x27;androidx.activity:activity-ktx:1.5.1&#x27;&lt;br/&gt;&lt;br/&gt;private val mainModel by viewModels&amp;lt;MainViewModel&amp;gt;()&lt;br/&gt;&lt;span&gt;å¤åˆ¶ä»£ç &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/blockquote&gt;&lt;p&gt;ç¤ºä¾‹æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªÂ &lt;code&gt;ViewModel&lt;/code&gt;Â ï¼Œå¦‚ä¸Šæ‰€ç¤ºï¼Œå¹¶åœ¨Â &lt;code&gt;MainActivity&lt;/code&gt;Â çš„ onCreate() ä¸­è¿›è¡Œäº†åˆå§‹åŒ–ã€‚&lt;/p&gt;&lt;p&gt;è¿™ä¹Ÿæ˜¯æˆ‘ä»¬æ—¥å¸¸çš„ä½¿ç”¨æ–¹å¼ï¼Œå…·ä½“æˆ‘ä»¬è¿™é‡Œå°±ä¸å†åšé˜è¿°ã€‚&lt;/p&gt;&lt;h2 data-id=&quot;heading-8&quot;&gt;SavedStateHandleä½¿ç”¨æ–¹å¼&lt;/h2&gt;&lt;p&gt;æˆ‘ä»¬çŸ¥é“ï¼Œ&lt;code&gt;ViewModel&lt;/code&gt;Â å¯ä»¥å¤„ç†å› ä¸ºé…ç½®æ›´æ”¹è€Œå¯¼è‡´çš„çš„çŠ¶æ€ä¸¢å¤±ï¼Œä½†å¹¶ä¸ä¿è¯å¼‚å¸¸ç»ˆæ­¢çš„æƒ…å†µï¼Œè€Œå®˜æ–¹çš„Â &lt;code&gt;SavedStateHandle&lt;/code&gt;Â æ­£æ˜¯ç”¨äºè¿™ç§æƒ…å†µçš„è§£å†³æ–¹å¼ã€‚&lt;/p&gt;&lt;p&gt;&lt;code&gt;SavedStateHandle&lt;/code&gt;Â ,å¦‚åæ‰€ç¤ºï¼Œç”¨äºä¿å­˜çŠ¶æ€çš„æ‰‹æŸ„ã€‚å†ç»†åŒ–ç‚¹å°±æ˜¯ï¼Œç”¨äºä¿å­˜çŠ¶æ€çš„å·¥å…·ï¼Œä»è€Œé…åˆÂ &lt;code&gt;ViewModel&lt;/code&gt;Â è€Œä½¿ç”¨ï¼Œå…¶å†…éƒ¨ä½¿ç”¨ä¸€ä¸ªÂ &lt;span&gt;map&lt;/span&gt;Â ä¿å­˜æˆ‘ä»¬è¦å­˜å‚¨çš„çŠ¶æ€ï¼Œå¹¶ä¸”å…¶æœ¬èº«ä½¿ç”¨Â &lt;code&gt;operator&lt;/code&gt;Â é‡è½½äº†Â &lt;span&gt;set()&lt;/span&gt;Â ä¸Â &lt;span&gt;get()&lt;/span&gt;Â æ–¹æ³•ï¼Œæ‰€ä»¥å¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨Â &lt;span&gt;é”®å€¼å¯¹&lt;/span&gt;Â çš„å½¢å¼å»æ“ä½œæˆ‘ä»¬è¦ä¿å­˜çš„çŠ¶æ€ï¼Œè¿™ä¹Ÿæ˜¯å®˜æ–¹ä¸ºä»€ä¹ˆç§°Â &lt;code&gt;SavedStateHandle&lt;/code&gt;Â æ˜¯ä¸€ä¸ªÂ &lt;span&gt;å…·æœ‰é”®å€¼æ˜ å°„Map&lt;/span&gt;Â ç‰¹æ€§çš„åŸå› ã€‚&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;åœ¨ Fragment1.2 åŠ Activity1.1.0 ä¹‹å,Â &lt;code&gt;SavedStateHandle&lt;/code&gt;Â å¯ä»¥ä½œä¸º ViewModel çš„æ„é€ å‡½æ•°ï¼Œä»è€Œåå°„åˆ›å»ºå¸¦æœ‰Â &lt;code&gt;SavedStateHandle&lt;/code&gt;Â çš„ ViewModel ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;span&gt;å…·ä½“ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img data-ratio=&quot;0.634698275862069&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCT8KOKibOjLtuoG3ib7TNNA0aRnicQfBeRcAQicTUxHlxa0uBR2zePlgS6g/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1856&quot;/&gt;&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬åœ¨Â &lt;code&gt;MainViewModel&lt;/code&gt;Â æ„é€ å‡½æ•°ä¸­æ–°å¢äº†ä¸€ä¸ªå‚æ•°Â &lt;span&gt;state:SavedStateHandle&lt;/span&gt;Â ,è¿™ä¸ªå‚æ•°åœ¨Â &lt;code&gt;ViewModel&lt;/code&gt;Â åˆå§‹åŒ–æ—¶ï¼Œä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨è¿›è¡Œæ³¨å…¥ã€‚ä»è€Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨Â &lt;code&gt;SavedStateHandle&lt;/code&gt;Â ä»¥key-valueçš„å½¢å¼å»ä¿å­˜ä¸€äº›Â &lt;span&gt;è‡ªå®šä¹‰çŠ¶æ€&lt;/span&gt;Â ,ä»è€Œåœ¨è¿›ç¨‹å¼‚å¸¸ç»ˆæ­¢ï¼ŒActé‡å»ºåï¼Œä¹Ÿèƒ½è·å–åˆ°ä¹‹å‰ä¿å­˜çš„çŠ¶æ€ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;è‡³äºä¸ºä»€ä¹ˆèƒ½å®ç°ä¿å­˜çŠ¶æ€å‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;p&gt;ä¸»è¦æ˜¯å› ä¸ºÂ &lt;code&gt;SavedStateHandle&lt;/code&gt;Â å†…éƒ¨é»˜è®¤æœ‰ä¸€ä¸ªÂ &lt;span&gt;SavedStateRegistry.SavedStateProvider&lt;/span&gt;Â çŠ¶æ€ä¿å­˜æä¾›è€…å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¼šåœ¨æˆ‘ä»¬åˆ›å»º&lt;code&gt;ViewModel&lt;/code&gt;Â æ—¶ç»‘å®šåˆ°Â &lt;span&gt;SavedStateRegistry&lt;/span&gt;Â ä¸­ï¼Œä»è€Œåœ¨æˆ‘ä»¬Â &lt;code&gt;Activity&lt;/code&gt;Â å¼‚å¸¸é‡å»ºæ—¶åšåˆ°çŠ¶æ€çš„Â &lt;span&gt;æ¢å¤&lt;/span&gt;Â ä¸Â &lt;span&gt;ç»‘å®š&lt;/span&gt;Â (é€šè¿‡é‡å†™Â &lt;code&gt;onSavexx()&lt;/code&gt;Â ä¸Â &lt;code&gt;onCreate()&lt;/code&gt;Â æ–¹æ³•ç›‘å¬)ã€‚&lt;/p&gt;&lt;p&gt;å…³äºè¿™éƒ¨åˆ†å†…å®¹ï¼Œæˆ‘ä»¬ä¸‹é¢çš„æºç è§£æéƒ¨åˆ†ä¹Ÿä¼šå†èŠåˆ°ï¼Œè¿™é‡Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“æ˜¯è¿™ä¹ˆå›äº‹å³å¯ã€‚&lt;/p&gt;&lt;h2 data-id=&quot;heading-9&quot;&gt;ViewModelæºç è§£æ&lt;/h2&gt;&lt;p&gt;æœ¬ç« èŠ‚ï¼Œæˆ‘ä»¬å°†ä»Â &lt;span&gt;ViewModelProvider()&lt;/span&gt;Â å¼€å§‹ï¼Œç†æ¸…Â &lt;code&gt;ViewModel&lt;/code&gt;Â çš„Â &lt;span&gt;åˆ›å»º&lt;/span&gt;Â ä¸Â &lt;span&gt;é”€æ¯&lt;/span&gt;Â æµç¨‹ï¼Œä»è€Œç†è§£å…¶èƒŒåçš„ [é­”æ³•]ã€‚&lt;/p&gt;&lt;p&gt;ä¸è¿‡ ViewModel çš„æºç å…¶å®å¹¶ä¸æ˜¯å¾ˆå¤æ‚ï¼Œæ‰€ä»¥åˆ«æ‹…å¿ƒğŸ˜‰ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä»”ç»†æƒ³æƒ³ï¼Œè¦è§£æViewModelçš„æºç ï¼Œåº”è¯¥ä»å“ªé‡Œå…¥æ‰‹å‘¢ï¼Ÿ&lt;/span&gt;&lt;/p&gt;&lt;pre&gt;&lt;code lang=&quot;kotlin&quot;&gt;ViewModelProvider(&lt;span&gt;this&lt;/span&gt;).&lt;span&gt;get&lt;/span&gt;(MainViewModel::&lt;span&gt;class&lt;/span&gt;.java)&lt;br/&gt;&lt;span&gt;å¤åˆ¶ä»£ç &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æœ€ç®€å•çš„æ–¹å¼è¿˜æ˜¯åˆå§‹åŒ–è¿™é‡Œï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥ä»Â &lt;span&gt;ViewModelProvider()&lt;/span&gt;Â åˆå§‹åŒ–å¼€å§‹-&amp;gt;&lt;/p&gt;&lt;h3 data-id=&quot;heading-10&quot;&gt;ViewModelProvider(this)&lt;/h3&gt;&lt;pre&gt;&lt;code lang=&quot;kotlin&quot;&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;constructor&lt;/span&gt;(owner: ViewModelStoreOwner)&lt;br/&gt;: &lt;span&gt;this&lt;/span&gt;(owner.viewModelStore, defaultFactory(owner), defaultCreationExtras(owner))&lt;br/&gt;&lt;span&gt;å¤åˆ¶ä»£ç &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç›¸åº”çš„ï¼Œè¿™é‡Œå¼€å§‹ï¼Œæˆ‘ä»¬å°±æ¶‰åŠåˆ°äº†ä¸‰ä¸ªæ–¹é¢ï¼Œå³Â &lt;span&gt;viewModelStore&lt;/span&gt;Â ã€Â &lt;span&gt;Factory&lt;/span&gt;ã€Â &lt;span&gt;Exras&lt;/span&gt;Â ã€‚æ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬å°±é¡ºè—¤æ‘¸ç“œï¼Œåˆ†åˆ«çœ‹çœ‹è¿™ä¸‰å¤„çš„å®ç°ç»†èŠ‚ã€‚&lt;/p&gt;&lt;h4 data-id=&quot;heading-11&quot;&gt;owner.viewModelStore&lt;/h4&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6541755888650964&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCDLAs3iaJOyIY9BdXB9MA3ElH1QaxIMVrt4ChIBJnY0icJqttPGXGuK7g/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1868&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;ViewModelStoreOwner&lt;/span&gt;Â é¡¾åæ€ä¹‰ï¼Œç”¨äºä¿å­˜Â &lt;code&gt;ViewModelStore&lt;/code&gt;Â å¯¹è±¡ã€‚&lt;/p&gt;&lt;p&gt;è€ŒÂ &lt;code&gt;ViewModelStore&lt;/code&gt;Â æ˜¯è´Ÿè´£ç»´æŠ¤æˆ‘ä»¬Â &lt;code&gt;ViewModel&lt;/code&gt;Â å®ä¾‹çš„å…·ä½“ç±»ï¼Œå†…éƒ¨æœ‰ä¸€ä¸ªÂ &lt;span&gt;map&lt;/span&gt;Â çš„åˆé›†ï¼Œç”¨äºä¿å­˜æˆ‘ä»¬åˆ›å»ºçš„æ‰€æœ‰Â &lt;code&gt;ViewModel&lt;/code&gt;Â ï¼Œå¹¶å¯¹å¤–æä¾›äº†Â &lt;code&gt;clear()&lt;/code&gt;Â æ–¹æ³•ï¼Œä»¥Â &lt;span&gt;ä¾¿äºéé…ç½®å˜æ›´æ—¶æ¸…é™¤ç¼“å­˜&lt;/span&gt;Â ã€‚&lt;/p&gt;&lt;hr/&gt;&lt;h4 data-id=&quot;heading-12&quot;&gt;defaultFactory(owner)&lt;/h4&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.258732212160414&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCTK08gHiad3Ro4PUK4QwoGLKZh9rJzX0QZRZIwbsibCBSKLhQ8jxPOjicQ/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1546&quot;/&gt;&lt;/p&gt;&lt;p&gt;è¯¥æ–¹æ³•ç”¨äºåˆå§‹åŒ–Â &lt;code&gt;ViewModel&lt;/code&gt;Â é»˜è®¤çš„åˆ›é€ å·¥å‚ğŸ­ ã€‚é»˜è®¤æœ‰ä¸¤ä¸ªå®ç°ï¼Œå‰è€…æ˜¯Â &lt;span&gt;HasDefaultViewModelProviderFactory&lt;/span&gt;Â ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬Â &lt;code&gt;Fragment&lt;/code&gt;Â æˆ–è€…Â &lt;code&gt;ComponentActivity&lt;/code&gt;Â éƒ½é»˜è®¤å®ç°çš„æ¥å£ï¼Œè€Œåè€…æ˜¯æ˜¯æŒ‡å…¨å±€Â &lt;span&gt;NewInstanceFactory&lt;/span&gt;Â ã€‚&lt;/p&gt;&lt;p&gt;ä¸¤è€…çš„ä¸åŒç‚¹åœ¨äºï¼Œåè€…åªèƒ½åˆ›å»ºÂ &lt;span&gt;ç©ºæ„é€ å‡½æ•°&lt;/span&gt;Â çš„Â &lt;code&gt;ViewModel&lt;/code&gt;Â ï¼Œè€Œå‰è€…æ²¡æœ‰è¿™ä¸ªé™åˆ¶ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç¤ºä¾‹æºç ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;HasDefaultViewModelProviderFactory åœ¨ ComponentActivity ä¸­çš„å®ç°å¦‚ä¸‹:&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3771289537712895&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCoQ08hgbvqXyu8Sia0Mo9ibws764NzR09JqwwrOAibsLboZXMp5ZgWJvMA/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1644&quot;/&gt;&lt;/p&gt;&lt;hr/&gt;&lt;h4 data-id=&quot;heading-13&quot;&gt;defaultCreationExtras(owner)&lt;/h4&gt;&lt;p&gt;ç”¨äºè¾…åŠ©Â &lt;code&gt;ViewModel&lt;/code&gt;Â åˆå§‹åŒ–æ—¶éœ€è¦ä¼ å…¥çš„å‚æ•°ï¼Œå…·ä½“æºç å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.22716627634660422&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCK3PYKrBIgs64MDibSEV3SUBbOulFSawQMDxrQLIiaI0GmPtp8zNvpbqg/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1708&quot;/&gt;&lt;/p&gt;&lt;p&gt;å¦‚ä¸Šæ‰€ç¤ºï¼Œé»˜è®¤æœ‰ä¸¤ä¸ªå®ç°ï¼Œå‰è€…æ˜¯Â &lt;span&gt;HasDefaultViewModelProviderFactory&lt;/span&gt;Â ,ä¹Ÿå°±æ˜¯æˆ‘ä»¬Â &lt;code&gt;ComponentActivity&lt;/code&gt;Â å®ç°çš„æ¥å£,å…·ä½“çš„å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.35192697768762676&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCP3XZIh4qRtHUqPcrMseIIborwzTXV11qyVy4EOF7IEQDEuZlTfad7w/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1972&quot;/&gt;&lt;/p&gt;&lt;p&gt;é»˜è®¤ä¼šå¸®æˆ‘ä»¬æ³¨å…¥Â &lt;code&gt;application&lt;/code&gt;Â ä»¥åŠÂ &lt;code&gt;intent&lt;/code&gt;Â ç­‰ï¼Œæ³¨æ„è¿™é‡Œè¿˜é»˜è®¤ä½¿ç”¨äº†Â &lt;span&gt;getIntent().getExtras()&lt;/span&gt;Â ä½œä¸ºÂ &lt;code&gt;ViewModel&lt;/code&gt;Â çš„Â &lt;span&gt;é»˜è®¤çŠ¶æ€&lt;/span&gt;Â ï¼Œå¦‚æœæˆ‘ä»¬Â &lt;code&gt;ViewModel&lt;/code&gt;Â æ„é€ å‡½æ•°ä¸­æœ‰Â &lt;code&gt;SavedStateHandle&lt;/code&gt;Â çš„è¯ã€‚&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;æ›´å¤šå…³äºÂ &lt;span&gt;CreationExtras&lt;/span&gt;Â å¯ä»¥äº†è§£è¿™ç¯‡Â åˆ›å»º ViewModel çš„æ–°æ–¹å¼ï¼ŒCreationExtras äº†è§£ä¸€ä¸‹ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;&lt;hr/&gt;&lt;h3 data-id=&quot;heading-14&quot;&gt;get(ViewModel::xx)&lt;/h3&gt;&lt;p&gt;ä»ç¼“å­˜ä¸­è·å–ç°æœ‰çš„Â &lt;code&gt;ViewModel&lt;/code&gt;Â æˆ–è€…Â &lt;span&gt;åå°„åˆ›å»º&lt;/span&gt;Â æ–°çš„Â &lt;code&gt;ViewModel&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;ç¤ºä¾‹æºç å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.655688622754491&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCmsbWKqOVrxRD8twHtOYIeSr90oaBFzHhib1YcmtGvfQGc2fZUle2wPg/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;2004&quot;/&gt;&lt;/p&gt;&lt;p&gt;å½“æˆ‘ä»¬ä½¿ç”¨Â &lt;span&gt;get()&lt;/span&gt;Â æ–¹æ³•è·å–å…·ä½“çš„Â &lt;code&gt;ViewModel&lt;/code&gt;Â å¯¹è±¡æ—¶ï¼Œå†…éƒ¨ä¼šå…ˆåˆ©ç”¨Â &lt;span&gt;å½“å‰åŒ…å+ViewModelç±»å&lt;/span&gt;Â ä½œä¸ºÂ &lt;code&gt;key&lt;/code&gt;Â ï¼Œç„¶åä»Â &lt;code&gt;viewModelStore&lt;/code&gt;Â ä¸­å–ã€‚å¦‚æœå½“å‰å·²åˆ›å»ºï¼Œåˆ™ç›´æ¥ä½¿ç”¨ï¼›åä¹‹åˆ™è°ƒç”¨æˆ‘ä»¬çš„ ViewModelå·¥å‚Â &lt;span&gt;create()&lt;/span&gt;Â æ–¹æ³•åˆ›å»ºæ–°çš„Â &lt;code&gt;ViewModel&lt;/code&gt;ã€‚åˆ›å»ºå®Œæˆåï¼Œå¹¶å°†å…¶ä¿å­˜åˆ°Â &lt;code&gt;ViewModelStore&lt;/code&gt;Â ä¸­ã€‚&lt;/p&gt;&lt;hr/&gt;&lt;h4 data-id=&quot;heading-15&quot;&gt;create(modelClass,extras)&lt;/h4&gt;&lt;p&gt;å…·ä½“çš„åˆ›é€ é€»è¾‘é‡Œï¼Œè¿™é‡Œçš„Â &lt;span&gt;factory&lt;/span&gt;Â æ­£æ˜¯æˆ‘ä»¬åœ¨Â &lt;code&gt;ViewModelProvider&lt;/code&gt;Â åˆå§‹åŒ–æ—¶ï¼Œé»˜è®¤æ„é€ å‡½æ•°Â &lt;span&gt;defaultFactory()&lt;/span&gt;Â æ–¹æ³•ä¸­ç”Ÿæˆçš„&lt;span&gt;SavedStateViewModelFactory&lt;/span&gt;Â ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥å»çœ‹è¿™ä¸ªå·¥å‚ç±»å³å¯ã€‚&lt;/p&gt;&lt;p&gt;å…·ä½“æºç å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.093655589123867&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCaIdvcWL15ALCzfmiaf5kxel5iasbNHIOGMkMWRogEKFezfoHaPn2442w/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1986&quot;/&gt;&lt;/p&gt;&lt;hr/&gt;&lt;h4 data-id=&quot;heading-16&quot;&gt;create(key,modelClass)&lt;/h4&gt;&lt;p&gt;å…¼å®¹æ—§çš„ç‰ˆæœ¬ä»¥åŠç”¨æˆ·æ“ä½œè¡Œä¸ºã€‚&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.7462981243830207&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCBZDeUvV1FXgeyO1Q9fhtyZjGYcSwpflvicFJhjqNNEl2eiabx4ic74zlA/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;2026&quot;/&gt;&lt;/p&gt;&lt;p&gt;ç›¸åº”çš„ï¼Œè¿™é‡Œæˆ‘ä»¬è¿˜éœ€è¦å†æä¸€ä¸‹ï¼Œ&lt;span&gt;LegacySavedStateHandleController.create()&lt;/span&gt;Â æ–¹æ³•ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.41302027748132336&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwC181JGsbLfaPM327tl0aicJfRMgeGEKojNiawricR7dwpBRMC90NLvuqvg/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1874&quot;/&gt;&lt;/p&gt;&lt;p&gt;å½“æˆ‘ä»¬è°ƒç”¨åˆ›å»ºÂ &lt;code&gt;ViewModel&lt;/code&gt;Â æ—¶ï¼Œå†…éƒ¨ä¼šè°ƒç”¨å…·ä½“çš„Â &lt;code&gt;ViewModel&lt;/code&gt;Â å·¥å‚å»åˆ›å»ºï¼Œå¦‚æœå½“å‰Â &lt;code&gt;ViewModel&lt;/code&gt;Â å·²åˆ›å»ºï¼Œåˆ™ç›´æ¥è¿”å›ï¼Œå¦åˆ™è°ƒç”¨å…¶Â &lt;span&gt;create()&lt;/span&gt;Â æ–¹æ³•åˆ›å»ºæ–°çš„Â &lt;code&gt;ViewModel&lt;/code&gt;Â ã€‚åœ¨å…·ä½“çš„åˆ›å»ºæ–¹æ³•ä¸­ï¼Œéœ€è¦åˆ¤æ–­å½“å‰æ„é€ å‡½æ•°æ˜¯ä¸æ˜¯å¸¦Â &lt;code&gt;application&lt;/code&gt;Â æˆ–è€…Â &lt;code&gt;SaveStateHandle&lt;/code&gt;Â ï¼Œä»è€Œè°ƒç”¨åˆé€‚çš„Â &lt;code&gt;newInstance()&lt;/code&gt;Â æ–¹æ³•ï¼Œæœ€åå†å°†åˆ›å»ºå¥½çš„Â &lt;code&gt;ViewModel&lt;/code&gt;Â æ·»åŠ åˆ°Â &lt;code&gt;ViewModelStore&lt;/code&gt;Â çš„Â &lt;span&gt;ç¼“å­˜&lt;/span&gt;Â ä¸­ã€‚&lt;/p&gt;&lt;hr/&gt;&lt;h3 data-id=&quot;heading-17&quot;&gt;é”€æ¯æµç¨‹&lt;/h3&gt;&lt;p&gt;åœ¨åˆå§‹åŒ–Â &lt;code&gt;ViewModelProvider&lt;/code&gt;Â æ—¶ï¼Œè¿˜è®°å¾—æˆ‘ä»¬éœ€è¦ä¼ é€’çš„Â &lt;code&gt;ViewModelStoreOwner&lt;/code&gt;Â å—ï¼Ÿ&lt;/p&gt;&lt;p&gt;è€Œè¿™ä¸ªæ¥å£æ­£æ˜¯è¢«æˆ‘ä»¬çš„ ComponentActivity æˆ–è€… Fragment å„è‡ªå®ç°ï¼Œç›¸åº”çš„Â &lt;code&gt;ViewModelStore&lt;/code&gt;Â ä¹Ÿæ˜¯å­˜åœ¨äºæˆ‘ä»¬çš„ ComponentActivity ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥å»çœ‹ç¤ºä¾‹ä»£ç å³å¯ï¼š&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä»¥ComponentActivityä¸ºä¾‹ï¼Œå…·ä½“çš„æºç å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.8501469147894222&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCn2VV9iahsqJh8KcgfO9Gpqk3fDZYoibIajGPt4lEH32mibUHzyPVQc3hg/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;2042&quot;/&gt;&lt;/p&gt;&lt;p&gt;å¦‚ä¸Šæ‰€ç¤ºï¼šåœ¨åˆå§‹åŒ–Activityæ—¶ï¼Œå†…éƒ¨ä¼šä½¿ç”¨Â &lt;code&gt;lifecycle&lt;/code&gt;Â æ·»åŠ ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸè§‚å¯Ÿè€…ï¼Œå¹¶ç›‘å¬Â &lt;span&gt;onDestory()&lt;/span&gt;Â é€šçŸ¥(Acté”€æ¯)ï¼Œå¦‚æœå½“å‰é”€æ¯çš„åŸå› éé…ç½®æ›´æ”¹å¯¼è‡´ï¼Œåˆ™è°ƒç”¨Â &lt;span&gt;ViewModeltore.clear()&lt;/span&gt;Â ï¼Œå³æ¸…ç©ºæˆ‘ä»¬çš„ViewModelç¼“å­˜åˆ—è¡¨ï¼Œä»è€Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆÂ &lt;code&gt;ViewModel&lt;/code&gt;Â ä¸æ”¯æŒéé…ç½®æ›´æ”¹çš„å®ä¾‹ä¿å­˜ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;ä½ å¯èƒ½ä¼šæƒŠè®¶ï¼Œé‚£è¿˜æ€ä¹ˆå€ŸåŠ©SavedStateHandleä¿å­˜çŠ¶æ€ï¼ŒviewModelå·²ç»è¢«æ¸…ç©ºäº†å•ŠğŸ¤”?&lt;/span&gt;&lt;/p&gt;&lt;p&gt;å¦‚æœä½ è®°å¾—Â &lt;code&gt;Activity&lt;/code&gt;Â ä¼ ç»Ÿå¤„ç†çŠ¶æ€çš„æ–¹å¼ï¼Œæ­¤æ—¶ä¹Ÿå°±èƒ½ç†è§£ä¸ºä»€ä¹ˆäº†ï¼Ÿå› ä¸ºæºå¤´éƒ½æ˜¯ä¸€ä¸ªåœ°æ–¹ï¼Œè€ŒÂ &lt;span&gt;SavedStateHandle&lt;/span&gt;Â ä»…ä»…åªæ˜¯ä¸€ä¸ªæ›´ç®€ä¾¿çš„å°è£…è€Œå·²ã€‚ä¸è¿‡å…³äºè¿™ä¸ªé—®é¢˜å…·ä½“è§£æï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹é¢ç»§ç»­è¿›è¡Œæ¢è®¨ï¼Œä»è€Œç†è§£Â &lt;span&gt;SavedStateHandle&lt;/span&gt;Â çš„å®Œæ•´æµç¨‹ã€‚&lt;/p&gt;&lt;h2 data-id=&quot;heading-18&quot;&gt;SavedStateHandleæµç¨‹è§£æ&lt;/h2&gt;&lt;p&gt;å…³äºÂ &lt;code&gt;SavedStateHandle&lt;/code&gt;Â çš„ä½¿ç”¨æ–¹æ³•æˆ‘ä»¬åœ¨ä¸Šé¢å·²ç»å™è¿°è¿‡äº†ï¼Œå…¶ç›¸å…³çš„ api ä½¿ç”¨æºç ä¹Ÿä¸æ˜¯æˆ‘ä»¬æ‰€å…³æ³¨çš„é‡ç‚¹ï¼Œå› ä¸ºå¹¶ä¸å¤æ‚ï¼Œè€Œæˆ‘ä»¬ä¸»è¦è¦æ¢è®¨çš„æ˜¯å…¶æ•´ä¸ªæµç¨‹ã€‚&lt;/p&gt;&lt;p&gt;è¦æ‘¸æ¸…Â &lt;code&gt;SavedStateHandle&lt;/code&gt;Â çš„æµç¨‹ï¼Œæ— éå°±ä¸¤ä¸ªæ–¹å‘ï¼Œå³Â &lt;span&gt;ä»ä½•è€Œæ¥&lt;/span&gt;Â ï¼ŒåˆÂ &lt;span&gt;åœ¨å“ªé‡Œè¿›è¡Œä½¿ç”¨&lt;/span&gt;Â ğŸ¤”ã€‚&lt;/p&gt;&lt;p&gt;åœ¨ä¸Šé¢æ¢ç´¢Â &lt;code&gt;ViewModel&lt;/code&gt;Â åˆ›å»ºæµç¨‹æ—¶ï¼Œæˆ‘ä»¬å‘ç°ï¼Œåœ¨ get(ViewModel:xx) æ–¹æ³•å†…éƒ¨,æœ€ç»ˆçš„Â &lt;span&gt;create()&lt;/span&gt;Â æ–¹æ³•é‡Œï¼Œå­˜åœ¨ä¸¤ä¸ªåˆ†æ”¯:&lt;/p&gt;&lt;blockquote&gt;&lt;ol class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;p&gt;å­˜åœ¨é™„åŠ å‚æ•°extras(viewModel2.5.0æ–°å¢);&lt;/p&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;ä¸å­˜åœ¨é™„åŠ å‚æ•°extras(å…¼å®¹å†å²ç‰ˆæœ¬æˆ–è€…ç”¨æˆ·è‡ªå®šä¹‰çš„è¡Œä¸º);&lt;/p&gt;&lt;/li&gt;&lt;/ol&gt;&lt;/blockquote&gt;&lt;p&gt;ç›¸åº”çš„ï¼Œå¦‚æœÂ &lt;code&gt;ViewModel&lt;/code&gt;Â çš„æ„é€ å‡½æ•°ä¸­å­˜åœ¨Â &lt;span&gt;SavedStateHandle&lt;/span&gt;Â ï¼Œåˆ™å„è‡ªçš„æµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;&lt;p&gt;å‰è€…ä½¿ç”¨äº†Â &lt;span&gt;CreationExtras&lt;/span&gt;Â çš„æ‰©å±•å‡½æ•°Â &lt;code&gt;createSavedStateHandle()&lt;/code&gt;Â ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.49207920792079207&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCrTUt6koYxGicf1QJsrttziaF0muFskrLhOibQKaG9aIuS3bCEHuln6QMQ/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;2020&quot;/&gt;&lt;/p&gt;&lt;p&gt;è€Œåè€…ä½¿ç”¨äº†Â &lt;span&gt;LegacySavedStateHandleController&lt;/span&gt;Â æ§åˆ¶å™¨å»åˆ›å»ºï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.30809674027339645&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCKFYfbPtvmp9orBAQxxv69Fmh0O1iceaWtS0kK05n4HrgRRuP9T7ctVw/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1902&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;æ€»ç»“ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;ä¸Šè¿°æµç¨‹ä¸­ï¼Œä¸¤è€…å¤§è‡´æ˜¯ä¸€æ ·çš„ï¼Œéƒ½éœ€è¦å…ˆè°ƒç”¨Â &lt;code&gt;consumeRestoredStateForKey(key)&lt;/code&gt;Â æ‹¿åˆ°è¦è¿˜åŸçš„Â &lt;span&gt;Bundle&lt;/span&gt;Â , å†è°ƒç”¨Â &lt;code&gt;SavedStateHandle.createHandle()&lt;/code&gt;Â å»åˆ›å»ºÂ &lt;code&gt;SavedStateHandle&lt;/code&gt;Â ã€‚&lt;/p&gt;&lt;p&gt;é‚£Â &lt;span&gt;SavedStateRegistry&lt;/span&gt;Â åˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;æˆ‘ä»¬çš„æ’å…¥ç‚¹ä¹Ÿå°±åœ¨äºæ­¤å¼€å§‹ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;æˆ‘ä»¬æš‚æ—¶å…ˆä¸å…³æ³¨å¦‚ä½•è¿˜åŸçŠ¶æ€ï¼Œè€Œæ˜¯å…ˆææ¸…æ¥šÂ &lt;code&gt;SavedStateRegistry&lt;/code&gt;Â æ˜¯ä»€ä¹ˆï¼Œå®ƒåˆæ˜¯ä»å“ªæ¥è€Œä¼ é€’æ¥çš„ã€‚ç„¶åå†æ¥çœ‹ çŠ¶æ€å¦‚ä½•è¢«è¿˜åŸï¼Œä»¥åŠÂ &lt;code&gt;SavedStateHandle&lt;/code&gt;Â çš„åˆ›å»ºæµç¨‹ï¼Œæœ€åå†ææ¸…ä¸Â &lt;code&gt;SavedStateRegistry&lt;/code&gt;Â åˆæ˜¯å¦‚ä½•è¿›è¡Œå…³è”ã€‚&lt;/p&gt;&lt;hr/&gt;&lt;h3 data-id=&quot;heading-19&quot;&gt;SavedStateRegistry&lt;/h3&gt;&lt;p&gt;å…¶æ˜¯ä¸€ä¸ªç”¨äºä¿å­˜çŠ¶æ€çš„æ³¨å†Œè¡¨ï¼Œå¾€å¾€ç”±Â &lt;span&gt;SavedStateRegistryOwner&lt;/span&gt;Â æ¥å£æ‰€æä¾›å®ç°ï¼Œä»è€Œä»¥ä¾¿ä¸æ‹¥æœ‰ç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶ç›¸å…³è”ã€‚&lt;/p&gt;&lt;p&gt;æ¯”å¦‚æˆ‘ä»¬å¸¸ç”¨çš„Â &lt;code&gt;ComponentActivity&lt;/code&gt;Â æˆ–è€…Â &lt;code&gt;Fragment&lt;/code&gt;Â é»˜è®¤éƒ½å®ç°äº†è¯¥æ¥å£ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;æºç å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.2616707616707616&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCD7hxAVFC7muxYl2KAKiaKcr39c2ErnNGYTghLouzU0aEFuV57dp5MGQ/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1628&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.1636828644501279&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCP0m9BDiat5l1msxqHYicJJvUxM1ia2ns8FwmdECYXLE6R0FqoVa5u6ZGw/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1564&quot;/&gt;&lt;/p&gt;&lt;p&gt;åˆ†æä¸Šé¢çš„ä»£ç ä¸éš¾å‘ç°ï¼Œ&lt;code&gt;SavedStateRegistry&lt;/code&gt;Â æœ¬èº«æä¾›äº†çŠ¶æ€Â &lt;span&gt;è¿˜åŸ&lt;/span&gt;Â ä¸Â &lt;span&gt;ä¿å­˜&lt;/span&gt;Â çš„å…·ä½“èƒ½åŠ›ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªÂ &lt;span&gt;map&lt;/span&gt;Â ä¿å­˜å½“å‰æ‰€æœ‰çš„çŠ¶æ€æä¾›è€…ï¼Œå…·ä½“çš„çŠ¶æ€æä¾›è€…ç”±Â &lt;span&gt;SavedStateProvider&lt;/span&gt;Â æ¥å£å®ç°ã€‚&lt;/p&gt;&lt;hr/&gt;&lt;h4 data-id=&quot;heading-20&quot;&gt;SavedStateRegistryOwner&lt;/h4&gt;&lt;p&gt;ç›¸å½“äºæ˜¯æ‹¥æœ‰Â &lt;code&gt;SavedStateRegistry&lt;/code&gt;Â çš„å…·ä½“ç±»ï¼Œå› ä¸ºæœ¬èº«ç»§æ‰¿äº†Â &lt;code&gt;LifecycleOwner&lt;/code&gt;Â æ¥å£ï¼Œæ•…å…¶ä¹Ÿå…·å¤‡Â &lt;span&gt;ç”Ÿå‘½æ„ŸçŸ¥&lt;/span&gt;Â èƒ½åŠ›ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;&lt;pre&gt;&lt;code lang=&quot;kotlin&quot;&gt;&lt;span&gt;interface&lt;/span&gt; &lt;span&gt;SavedStateRegistryOwner&lt;/span&gt; : &lt;span&gt;LifecycleOwner&lt;/span&gt; {&lt;br/&gt;    &lt;span&gt;val&lt;/span&gt; savedStateRegistry: SavedStateRegistry&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;å¤åˆ¶ä»£ç &lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»¥Â &lt;code&gt;ComponentActivity&lt;/code&gt;Â ä¸ºä¾‹ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œ&lt;code&gt;ComponentActivity&lt;/code&gt;Â é»˜è®¤å®ç°Â &lt;span&gt;SavedStateRegistryOwner&lt;/span&gt;Â æ¥å£ã€‚å³Â &lt;code&gt;SavedStateRegistry&lt;/code&gt;Â çš„åˆ›é€ ä»¥åŠçŠ¶æ€çš„ä¿å­˜ï¼Œè‚¯å®šä¹Ÿæ˜¯Â &lt;span&gt;ç»è¿‡æˆ‘ä»¬Activityè½¬å‘å¤„ç†&lt;/span&gt;(ä¸ç„¶å®ƒè‡ªå·±æ€ä¹ˆå¤„ç†å‘¢ğŸ˜…)ã€‚&lt;/p&gt;&lt;p&gt;è€Œåœ¨ä¸Šé¢æ¢ç´¢Â &lt;span&gt;ViewModel&lt;/span&gt;Â åˆå§‹åŒ–æ—¶ï¼Œæˆ‘ä»¬äº†è§£åˆ°ï¼Œ&lt;code&gt;ComponentActivity&lt;/code&gt;Â é»˜è®¤å®ç°äº†Â &lt;code&gt;HasDefaultViewModelProviderFactory&lt;/code&gt;Â æ¥å£ï¼Œç”¨äº&lt;span&gt;åˆ›å»ºViewModelå·¥å‚&lt;/span&gt;Â ã€‚ç›¸åº”çš„ï¼Œå…¶æ¥å£æ–¹æ³•Â &lt;code&gt;getDefaultViewModelProviderFactory()&lt;/code&gt;Â é»˜è®¤è¿”å›çš„æ˜¯Â &lt;code&gt;SavedStateViewModelFactory&lt;/code&gt;Â ,å³æ”¯æŒçŠ¶æ€ä¿å­˜çš„ViewModelå·¥å‚ã€‚è€Œè¯¥å·¥å‚æ„é€ å‡½æ•°ä¸­æ­£æ˜¯éœ€è¦æ¥å—ä¸€ä¸ªÂ &lt;code&gt;SavedStateRegistry&lt;/code&gt;Â å˜é‡ï¼Œä¹Ÿæ­£æ˜¯æˆ‘ä»¬Â &lt;code&gt;ComponentActivity&lt;/code&gt;Â ä¸­é»˜è®¤ä¿å­˜çš„å®ä¾‹ï¼Œæ‰€ä»¥ä¹Ÿä¸éš¾çŒœæµ‹Â &lt;span&gt;ViewModelå·¥å‚&lt;/span&gt;Â æ˜¯å¦‚ä½•ä¸Â &lt;code&gt;SavedStateRegistry&lt;/code&gt;Â å¦‚ä½•å…³è”çš„ã€‚&lt;/p&gt;&lt;p&gt;ä»¥Â &lt;code&gt;ComponentActivity&lt;/code&gt;Â çš„å®ç°ä¸ºä¾‹ï¼Œ&lt;span&gt;æºç å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.9043367346938775&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCFb7htW0SMZW3xZqmX6ygDaQK1mMacibPsKDy0FbIMO3C8CpyS6A4mlA/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1568&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;code&gt;ComponentActivity&lt;/code&gt;Â åˆå§‹åŒ–æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ª ç”¨äºä¿å­˜çŠ¶æ€æ³¨å†Œè¡¨çš„æ§åˆ¶å™¨Â &lt;code&gt;SavedStateRegistryController&lt;/code&gt;Â å¯¹è±¡ï¼Œè§é¢çŸ¥æ„ï¼Œä¸éš¾çŒœå‡ºï¼Œå…¶æ˜¯ç”¨äºæ§åˆ¶Â &lt;code&gt;SavedStateRegistry&lt;/code&gt;Â çš„å…·ä½“ç±»ã€‚å¹¶ä¸”è¯¥æ§åˆ¶å™¨å¯¹è±¡ä¼šåœ¨Â &lt;span&gt;onCreate()&lt;/span&gt;Â ä¸­è°ƒç”¨Â &lt;span&gt;performRestore()&lt;/span&gt;Â è¿˜åŸçŠ¶æ€ï¼Œå¹¶åœ¨&lt;span&gt;onSaveInstanceState()&lt;/span&gt;Â ä¸­å»ä¿å­˜çŠ¶æ€ï¼Œæ­¤æ—¶ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆÂ &lt;code&gt;SavedStateRegistry&lt;/code&gt;Â èƒ½åšåˆ°çŠ¶æ€ä¿å­˜ã€‚&lt;/p&gt;&lt;p&gt;ç›¸åº”çš„ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦å†å»çœ‹çœ‹Â &lt;span&gt;SavedStateRegistryController&lt;/span&gt;Â ï¼Œä»¥ä¾¿æ›´å¥½çš„ç†è§£ã€‚&lt;/p&gt;&lt;hr/&gt;&lt;h4 data-id=&quot;heading-21&quot;&gt;SavedStateRegistryController&lt;/h4&gt;&lt;p&gt;ç”¨äºæ§åˆ¶Â &lt;code&gt;SavedStateRegistry&lt;/code&gt;Â ,å¯¹å¤–æä¾›äº†Â &lt;span&gt;åˆå§‹åŒ–&lt;/span&gt;Â ï¼ŒçŠ¶æ€Â &lt;span&gt;è¿˜åŸ&lt;/span&gt;ã€&lt;span&gt;ä¿å­˜&lt;/span&gt;Â ç­‰æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.5653669724770642&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCuJXNMqApdM5jLTiaTotvundQY0GFBJ38JiccARvUrmtqBsDltV260uuA/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1744&quot;/&gt;&lt;/p&gt;&lt;p&gt;ç®€è€Œè¨€ä¹‹ï¼Œå…¶ä¸»è¦ç”¨äºè¾…åŠ©Â &lt;span&gt;SavedStateRegistry&lt;/span&gt;Â è¿›è¡ŒçŠ¶æ€ä¿å­˜ä¸è¿˜åŸã€‚&lt;/p&gt;&lt;h4 data-id=&quot;heading-22&quot;&gt;å°ç»“&lt;/h4&gt;&lt;p&gt;æˆ‘ä»¬å†å›é¡¾ä¸€ä¸‹ä¸Šé¢çš„æ­¥éª¤ï¼Œåœ¨åªå…³å¿ƒÂ &lt;span&gt;SavedStateHandle&lt;/span&gt;Â å¦‚ä½•è¢«åˆ›å»ºè¿™æ ·ä¸€ä¸ªå¤§èƒŒæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¤§è‡´å¯ä»¥æ¢³ç†å‡ºè¿™æ ·çš„æµç¨‹ï¼š&lt;/p&gt;&lt;p&gt;å› ä¸ºæˆ‘ä»¬çš„ ComponentActivity æˆ–è€… Fragment é»˜è®¤å·²ç»å®ç°äº†Â &lt;code&gt;SavedStateRegistryOwner&lt;/code&gt;Â æ¥å£ï¼Œè€Œä¸”é»˜è®¤æ˜¯ç”±Â &lt;code&gt;SavedStateRegistryController&lt;/code&gt;Â ä½œä¸ºÂ &lt;code&gt;SavedStateRegistry&lt;/code&gt;Â çš„å…·ä½“æ§åˆ¶ï¼Œå› æ­¤å…·ä½“çš„çŠ¶æ€ä¿å­˜ä¸è¿˜åŸéƒ½ç”±è¯¥æ§åˆ¶å™¨å»æ“ä½œã€‚&lt;/p&gt;&lt;p&gt;å½“æˆ‘ä»¬çš„Â &lt;code&gt;Activity&lt;/code&gt;Â å› ä¸ºå¼‚å¸¸ç”Ÿå‘½å‘¨æœŸé‡å»ºæ—¶ï¼Œæ­¤æ—¶ä¼šå›è°ƒÂ &lt;span&gt;onSaveInstanceState()&lt;/span&gt;Â å»ä¿å­˜çŠ¶æ€ï¼Œæ­¤æ—¶Â &lt;code&gt;SavedStateRegistryController&lt;/code&gt;Â å°±ä¼šè°ƒç”¨Â &lt;span&gt;performSave()&lt;/span&gt;Â å»ä¿å­˜å½“å‰çŠ¶æ€(å³å°†æˆ‘ä»¬ViewModelçš„çŠ¶æ€ä¿å­˜åˆ°bundleé‡Œ)ï¼Œç„¶ååœ¨ Activity é‡å»ºæ—¶ï¼Œåœ¨Â &lt;span&gt;onCreate()&lt;/span&gt;Â æ–¹æ³•é‡Œè¿›è¡Œè¿˜åŸ(å³ä»bundleé‡Œå–å‡ºæˆ‘ä»¬ä¿å­˜çš„çŠ¶æ€)ã€‚&lt;/p&gt;&lt;p&gt;å½“æˆ‘ä»¬åˆ›å»ºÂ &lt;code&gt;ViewModel&lt;/code&gt;Â æ—¶ï¼Œé»˜è®¤ä½¿ç”¨çš„Â &lt;code&gt;ViewModel&lt;/code&gt;Â å·¥å‚æ˜¯æ”¯æŒä¿å­˜çŠ¶æ€çš„Â &lt;code&gt;SavedStateViewModelFactory&lt;/code&gt;Â ã€‚åœ¨åˆå§‹åŒ–è¯¥å·¥å‚æ—¶ï¼Œéœ€è¦æ˜¾å¼ä¼ é€’Â &lt;code&gt;SavedStateRegistryOwner&lt;/code&gt;Â æ¥å£å¯¹è±¡åˆ°è¯¥å·¥å‚ä¸­ï¼Œè€Œè¯¥å·¥å‚çš„æ„é€ å‡½æ•°å†…ï¼Œä¼šå°†Â &lt;code&gt;SavedStateRegistry&lt;/code&gt;Â è‡ªè¡Œä¿å­˜èµ·æ¥ã€‚&lt;/p&gt;&lt;p&gt;æœ€åï¼Œå¦‚æœè¦åˆ›å»ºçš„Â &lt;code&gt;ViewModel&lt;/code&gt;Â éœ€è¦ä¿å­˜çŠ¶æ€(&lt;span&gt;å³æ„é€ å‡½æ•°ä¸­å­˜åœ¨SavedStateHadnle&lt;/span&gt;)ï¼Œåˆ™ä½¿ç”¨ä¿å­˜çš„Â &lt;code&gt;SavedStateRegistry&lt;/code&gt;Â å˜é‡å»è·å–æˆ‘ä»¬å°†è¦è¿˜åŸçš„çŠ¶æ€ï¼Œç„¶åå†è°ƒç”¨Â &lt;code&gt;SavedStateHandle.createHandle()&lt;/code&gt;Â å»åˆ›å»ºå…·ä½“çš„Â &lt;code&gt;SavedStateHadnle&lt;/code&gt;ã€‚&lt;/p&gt;&lt;p&gt;ç”±æ­¤ç»“åˆÂ &lt;code&gt;ViewModel&lt;/code&gt;Â åˆ›å»ºçš„æµç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥æ€»ç»“Â &lt;code&gt;SavedStateRegistry&lt;/code&gt;Â çš„ä¼ é€’æµç¨‹ä¼ªä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.425764192139738&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCTKKKXhJhw9At1QstS5LDu4HM5Yqth5vbJSicyhZDZo2CLoJ6R7dNm2g/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1832&quot;/&gt;&lt;/p&gt;&lt;hr/&gt;&lt;h3 data-id=&quot;heading-23&quot;&gt;SavedStateHandleå¦‚ä½•åˆ›å»º&lt;/h3&gt;&lt;p&gt;åœ¨ä¸Šé¢ï¼Œæˆ‘ä»¬èŠå®Œäº†Â &lt;code&gt;SavedStateRegistry&lt;/code&gt;Â æ˜¯å¦‚ä½•è¢«åˆ›å»ºä»¥åŠè¢«ä¼ é€’ç»™æˆ‘ä»¬çš„Â &lt;span&gt;ViewModelå·¥å‚&lt;/span&gt;Â ï¼Œè€Œè¿™ä¸€å°èŠ‚ï¼Œæˆ‘ä»¬å°†è¦èŠèŠÂ &lt;code&gt;SavedStateHandle&lt;/code&gt;Â å¦‚ä½•è¢«åˆ›å»ºï¼Œä»¥åŠçŠ¶æ€æ˜¯å¦‚ä½•è¢«è¿˜åŸçš„ã€‚&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬çŸ¥é“ï¼Œå½“åˆ›å»ºÂ &lt;code&gt;SavedStateHandle&lt;/code&gt;Â å‰ï¼Œéœ€è¦å…ˆè·å–å·²ä¿å­˜çš„çŠ¶æ€ï¼Œä¹Ÿå³Â &lt;code&gt;consumeRestoredStateForKey()&lt;/code&gt;Â æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ¬ç« èŠ‚çš„æ’å…¥ç‚¹ä¹Ÿå°±æ˜¯ä»è¿™é‡Œå¼€å§‹ã€‚&lt;/p&gt;&lt;p&gt;è€Œä¸Â &lt;code&gt;consumeRestoredStateForKey()&lt;/code&gt;Â å…³è”çš„ç±»æœ‰ä¸¤ä¸ª,Â &lt;span&gt;SavedStateHandlesProvider&lt;/span&gt;Â ä¸Â &lt;span&gt;SavedStateRegistry&lt;/span&gt;Â ã€‚&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;å‰è€…æ˜¯Â &lt;code&gt;viewModel&lt;/code&gt;(2.5.0) æ–°æä¾›çš„Â &lt;span&gt;åˆ›å»ºSavedStateHandle&lt;/span&gt;Â çš„æ–¹å¼ï¼Œåè€…åˆ™æ˜¯ç”¨äºÂ &lt;span&gt;é€‚é…&lt;/span&gt;Â 2.5.0 ä¹‹å‰çš„æ–¹å¼ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;ä»¥Â &lt;span&gt;SavedStateHandlesProvider&lt;/span&gt;Â ä¸ºä¾‹ï¼Œæºç å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.9393282773564464&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCm1aGsibcoibAIeqBLrGFe8j77nic1FK5DTto2OAkCXN22gf1H3ghS18xg/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1846&quot;/&gt;&lt;/p&gt;&lt;p&gt;å½“æˆ‘ä»¬è°ƒç”¨Â &lt;code&gt;consumeRestoredStateForKey()&lt;/code&gt;Â è·å–å…·ä½“çŠ¶æ€æ—¶ï¼Œå†…éƒ¨å…ˆä¼šè°ƒç”¨Â &lt;code&gt;performRestore()&lt;/code&gt;Â ä»Â &lt;span&gt;SavedStateRegistry&lt;/span&gt;Â è·å–æˆ‘ä»¬ä¿å­˜çš„çŠ¶æ€é›†ï¼Œç„¶åå°†å…¶ä¿å­˜åˆ°Â &lt;code&gt;provider&lt;/code&gt;Â ä¸­ã€‚å†ä»è¿™ä¸ªæ€»çš„Â &lt;span&gt;çŠ¶æ€bundle&lt;/span&gt;Â ä¸­è·å–æˆ‘ä»¬å½“å‰Â &lt;code&gt;viewModel&lt;/code&gt;Â æ‰€å¯¹åº”çš„çŠ¶æ€ã€‚&lt;/p&gt;&lt;p&gt;ç›¸åº”çš„ï¼Œæˆ‘ä»¬å†å»çœ‹çœ‹Â &lt;span&gt;SavedStateHandle.createHandle()&lt;/span&gt;Â æ–¹æ³•ï¼Œå³Â &lt;code&gt;SavedStateHandle&lt;/code&gt;Â æœ€ç»ˆè¢«æ€ä¹ˆåˆ›å»ºå‡ºæ¥ã€‚&lt;/p&gt;&lt;p&gt;&lt;span&gt;æºç å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6757940854326396&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz/yyLvy204xW9B3K7wojhOiaAPQnuepnwwCFWupDXBbgDj2s6kgrazfTWH59jAmjyQBicmarURhfSmPq9dZEnibAK7Q/640?wx_fmt=other&quot; data-type=&quot;other&quot; data-w=&quot;1826&quot;/&gt;&lt;/p&gt;&lt;p&gt;ä¸Šè¿°çš„é€»è¾‘ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå…·ä½“å¦‚æºç ä¸­æ‰€ç¤ºï¼Œå½“æˆ‘ä»¬åˆ›å»ºÂ &lt;span&gt;SavedStateHandle&lt;/span&gt;Â æ—¶ï¼Œéœ€è¦å…ˆä»Â &lt;span&gt;SavedStateRegistry&lt;/span&gt;Â è·å–æˆ‘ä»¬çš„çŠ¶æ€Bundle,ç„¶åå†è°ƒç”¨Â &lt;code&gt;createHandle()&lt;/code&gt;Â æ–¹æ³•åˆ›å»ºå…·ä½“çš„Â &lt;span&gt;SavedStateHandle&lt;/span&gt;ã€‚å¹¶åœ¨å…¶Â &lt;code&gt;createHandle()&lt;/code&gt;Â å†…å°†æˆ‘ä»¬ä¼ å…¥çš„Â &lt;span&gt;bundle&lt;/span&gt;Â è½¬ä¸ºÂ &lt;span&gt;Map&lt;/span&gt;Â å½¢å¼ï¼Œä»è€Œä¼ å…¥Â &lt;span&gt;SavedStateHandle&lt;/span&gt;Â çš„æ„é€ å‡½æ•°ä¸­ç”¨äºåˆå§‹åŒ–ã€‚&lt;/p&gt;&lt;h3 data-id=&quot;heading-24&quot;&gt;æ€»ç»“&lt;/h3&gt;&lt;p&gt;åœ¨è¿™ä¸€ç« èŠ‚ï¼Œæˆ‘ä»¬ä¸»è¦æ¢è®¨çš„æ˜¯Â &lt;code&gt;SavedStateHandle&lt;/code&gt;Â çš„åˆ›å»ºæµç¨‹ï¼Œä»¥Â &lt;code&gt;ComponentActivity&lt;/code&gt;Â ä¸ºä¾‹ï¼š&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬çŸ¥é“ Android ä¸­å…³äºçŠ¶æ€çš„ä¿å­˜ä¸è¿˜åŸï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨Â &lt;span&gt;onSaveInstanceState()&lt;/span&gt;Â ä¸Â &lt;span&gt;onRestoreInstanceState()&lt;/span&gt;Â ï¼Œä½†éšç€JetPackç»„ä»¶åº“çš„å®Œå–„ï¼Œå®˜æ–¹åœ¨è¿™ä¸¤ä¸ªæ–¹æ³•çš„åŸºç¡€ä¸Šæ–°å¢äº†Â &lt;code&gt;SavedState&lt;/code&gt;Â ,ç›®çš„æ˜¯ç®€åŒ–çŠ¶æ€ä¿å­˜çš„æˆæœ¬ã€‚ä»åŸç†ä¸Šï¼Œå…¶åˆ›å»ºäº†ä¸€ä¸ª çŠ¶æ€ä¿å­˜çš„çš„æ³¨å†Œè¡¨Â &lt;code&gt;SavedStateRegistry&lt;/code&gt;Â ï¼Œå†…éƒ¨ç¼“å­˜ç€å…·ä½“çš„Â &lt;span&gt;çŠ¶æ€æä¾›è€…åˆé›†&lt;/span&gt;(keyä¸ºstring,valueä¸ºSavedStateProvider)ã€‚&lt;/p&gt;&lt;p&gt;å½“æˆ‘ä»¬ Activity å› ä¸ºé…ç½®æ›´æ”¹æˆ–è€…ä¸å¯æ§åŸå› éœ€è¦é‡å»ºæ—¶ï¼Œç³»ç»Ÿæ­¤æ—¶ä¼šä¸»åŠ¨è°ƒç”¨Â &lt;span&gt;onSaveInstanceState()&lt;/span&gt;Â æ–¹æ³•ï¼Œä»è€Œè§¦å‘è°ƒç”¨Â &lt;code&gt;savedStateRegistry.performSave()&lt;/code&gt;Â å»ä¿å­˜çŠ¶æ€ã€‚è¯¥æ–¹æ³•å†…éƒ¨ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Â &lt;span&gt;Bundle&lt;/span&gt;Â å¯¹è±¡ï¼Œç”¨äºä¿å­˜æ‰€æœ‰çŠ¶æ€,ç„¶åå†è°ƒç”¨æ‰€æœ‰ç¼“å­˜çš„çŠ¶æ€æä¾›è€…(SavedStateProvider)çš„Â &lt;code&gt;saveState()&lt;/code&gt;Â æ–¹æ³•ï¼Œä»è€Œå°†æ‰€æœ‰éœ€è¦éœ€è¦ä¿å­˜çš„çŠ¶æ€ä»¥Â &lt;span&gt;key-value&lt;/span&gt;Â çš„æ–¹å¼å­˜åˆ°Â &lt;span&gt;Bundle&lt;/span&gt;Â ä¸­å»ã€‚æœ€åå†å°†è¿™ä¸ªæ•´ä½“çš„Â &lt;span&gt;bundle&lt;/span&gt;Â å­˜å…¥Â &lt;code&gt;onSaveInstanceState()&lt;/code&gt;Â æ–¹æ³•å‚æ•°æä¾›çš„Â &lt;span&gt;bundle&lt;/span&gt;Â ä¸­ã€‚&lt;/p&gt;&lt;p&gt;å½“æˆ‘ä»¬çš„ Activity é‡å»ºå®Œæˆåï¼Œåœ¨Â &lt;code&gt;onCreate()&lt;/code&gt;Â æ–¹æ³•ä¸­ï¼Œå†ä½¿ç”¨Â &lt;code&gt;SavedStateRegistry&lt;/code&gt;Â è¿˜åŸæˆ‘ä»¬è‡ªå·±ä¿å­˜çš„çŠ¶æ€Â &lt;span&gt;restoredState&lt;/span&gt;ã€‚&lt;/p&gt;&lt;p&gt;æœ€åå½“æˆ‘ä»¬åˆ›å»ºÂ &lt;code&gt;ViewModel&lt;/code&gt;Â æ—¶ï¼Œå› ä¸ºæˆ‘ä»¬çš„Â &lt;span&gt;ViewModelå·¥å‚&lt;/span&gt;(SavedStateViewModelFactory) æŒæœ‰äº†Â &lt;code&gt;SavedStateRegistry&lt;/code&gt;Â ï¼Œä¹Ÿå³æŒæœ‰ç€æˆ‘ä»¬è¦è¿˜åŸçš„çŠ¶æ€(å¦‚æœæœ‰)ã€‚åœ¨åˆ›å»ºå…·ä½“çš„Â &lt;code&gt;ViewModel&lt;/code&gt;Â æ—¶ï¼Œå¦‚æœæˆ‘ä»¬è¦åˆ›å»ºçš„Â &lt;code&gt;ViewModel&lt;/code&gt;Â æ„é€ å‡½æ•°ä¸­å­˜åœ¨Â &lt;code&gt;SavedStateHandle&lt;/code&gt;Â å‚æ•°ï¼Œåˆ™è¯¥Â &lt;code&gt;ViewModel&lt;/code&gt;Â æ”¯æŒä¿å­˜çŠ¶æ€ï¼Œæ‰€ä»¥éœ€è¦å…ˆå»ä½¿ç”¨Â &lt;code&gt;SavedStateRegistry&lt;/code&gt;Â è·å–æˆ‘ä»¬ä¿å­˜çš„çŠ¶æ€ï¼Œæœ€åå†è°ƒç”¨Â &lt;span&gt;SavedStateHandle.create()&lt;/span&gt;Â å»åˆ›å»ºå…·ä½“Â &lt;code&gt;SaveStateHandle&lt;/code&gt;Â ï¼Œä»è€Œåˆ›å»ºå‡ºæ”¯æŒä¿å­˜çŠ¶æ€Â &lt;code&gt;ViewModel&lt;/code&gt;Â ã€‚&lt;/p&gt;&lt;h2 data-id=&quot;heading-25&quot;&gt;ç»“è¯­&lt;/h2&gt;&lt;p&gt;åœ¨æœ¬ç¯‡ä¸­ï¼Œæˆ‘ä»¬ä»Â &lt;code&gt;ViewModel&lt;/code&gt;Â çš„èƒŒæ™¯å¼€å§‹ï¼Œå†åˆ°Â &lt;code&gt;ViewModel&lt;/code&gt;Â ä¸Â &lt;code&gt;SavedStateHandle&lt;/code&gt;Â çš„ä½¿ç”¨æ–¹å¼ï¼Œæœ€ååˆä»æºç å±‚çº§åˆ†æäº†ä¸¤è€…çš„å…·ä½“æµç¨‹ï¼Œä»è€Œè¾ƒå®Œæ•´çš„è§£æäº†Â &lt;code&gt;ViewModel&lt;/code&gt;Â çš„åº•å±‚å®ç°ä¸Â &lt;code&gt;SavedStateHandle&lt;/code&gt;Â çš„æ•´ä½“åˆ›å»ºæµç¨‹ã€‚&lt;/p&gt;&lt;p&gt;è‡³äºæ›´åŠ è¯¦ç»†çš„ä½¿ç”¨æ–¹å¼ï¼Œè¿™ä¹Ÿéæœ¬ç¯‡è¦æ·±å…¥æ¢ç´¢çš„ç»†èŠ‚ï¼Œå…·ä½“å¯å‚ç…§å…¶ä»–åŒå­¦çš„æ•™ç¨‹å³å¯ã€‚&lt;/p&gt;&lt;p&gt;è‡³æ­¤ï¼Œå…³äºÂ &lt;code&gt;ViewModel&lt;/code&gt;Â è®¾è®¡æ€æƒ³ ä»¥åŠÂ &lt;span&gt;çŠ¶æ€ä¿å­˜åŸç†&lt;/span&gt;Â åˆ°è¿™é‡Œå°±ç»“æŸäº†ã€‚ä¹Ÿç›¸ä¿¡è¯»è¿‡æœ¬ç¯‡çš„ä½ ä¹Ÿå°†ä¸ä¼šå†æœ‰æ‰€ç–‘æƒ‘Â &lt;span&gt;:)&lt;/span&gt;&lt;/p&gt;&lt;p&gt;åŸæ–‡é“¾æ¥ï¼šhttps://juejin.cn/post/7186680109384859706#heading-24&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;å…³æ³¨æˆ‘è·å–æ›´å¤šçŸ¥è¯†æˆ–è€…æŠ•ç¨¿&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg wxw-img&quot; data-ratio=&quot;1&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/yyLvy204xW9Uibw4qQxibOBKL1DicLX10o3w57n09uKDowd4ZDjRIgSMUn9cqY6ia77Ys3VfZjG8LUviacGSr0DFIvw/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;258&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages js_insertlocalimg&quot; data-ratio=&quot;0.20555555555555555&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/yyLvy204xW9Uibw4qQxibOBKL1DicLX10o3gibpbVwAGtDUV15FZianjGs1whAZ2gg71IV6J7zQpQhtQRcSyHrGJbxg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;180&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;mp-style-type data-value=&quot;3&quot;/&gt;&lt;/p&gt;&lt;/div&gt;

          
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>c375d11cb96b32e6f7f3822e9059a428</guid>
<title>çª¥æ¢Swiftæºç ä¸‹çš„Array</title>
<link>https://toutiao.io/k/vjzjew5</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;div class=&quot;rich_media_content js_underline_content             autoTypeSetting24psection&amp;#10;            &quot; id=&quot;js_content&quot;&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.18170426065162906&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/qMicvibdvl7p0KEd3bHYcm99nBiclZbia548oyvliaq8PrrmrcyuT3QS3urMcfaXDPEumnHP9KYcMV3Fad5Pepzic81Q/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;798&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;br mpa-from-tpl=&quot;t&quot;/&gt;&lt;/p&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;Â &lt;img class=&quot;__bg_gif rich_pages wxw-img&quot; data-ratio=&quot;0.23416666666666666&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_gif/qMicvibdvl7p0shmw7MKGyutc63KZyibndlEzXkYJiaS1fUicrkRRKdOhPHMOic2dB36fnECUbaN0h6EJNcYU0HuY49g/640?wx_fmt=gif&quot; data-type=&quot;gif&quot; data-w=&quot;1200&quot;/&gt;Â &lt;/section&gt;&lt;section data-tools=&quot;æ–°åª’ä½“æ’ç‰ˆ&quot; data-id=&quot;3335002&quot; data-style-type=&quot;&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section powered-by=&quot;xiumi.us&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;section mpa-from-tpl=&quot;t&quot;&gt;&lt;section powered-by=&quot;xiumi.us&quot; mpa-from-tpl=&quot;t&quot;&gt;&lt;p&gt;&lt;span&gt;æœ¬æ–‡å­—æ•°ï¼š&lt;/span&gt;&lt;span&gt;&lt;strong&gt;6730&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;å­—&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;é¢„è®¡é˜…è¯»æ—¶é—´ï¼š&lt;/span&gt;&lt;span&gt;&lt;strong&gt;15Â &lt;/strong&gt;&lt;/span&gt;&lt;span&gt;åˆ†é’Ÿ&lt;/span&gt;&lt;/p&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;/section&gt;&lt;blockquote&gt;&lt;p&gt;ç”¨æœ€é€šä¿—çš„è¯­è¨€ï¼Œæè¿°æœ€éš¾æ‡‚çš„æŠ€æœ¯&lt;/p&gt;&lt;/blockquote&gt;&lt;h2&gt;&lt;span/&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;å‰æƒ…æè¦&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;æˆ‘åœ¨ä¹‹å‰çš„æ–‡ç« &lt;code&gt;ä¸€æ¬¡éå†å¯¼è‡´çš„å´©æºƒ&lt;/code&gt;ä¸­æåˆ°äº†ï¼Œå¦‚æœæœ‰æœºä¼šä¼šæŠŠç›¸å…³çš„&lt;code&gt;Swift&lt;/code&gt;é›†åˆæºç é˜…è¯»ã€‚&lt;/p&gt;&lt;p&gt;é¦–å…ˆå¯¹è‡ªå·±çš„å¼€å‘å’ŒçŸ¥è¯†å‚¨å¤‡ä¼šæœ‰è¿›ä¸€æ­¥çš„å‡åï¼Œå¦å¤–ä¹Ÿå¯ä»¥æ´å¯Ÿè‹¹æœæ˜¯å¦æœ‰å…¶ä»–çš„ğŸ®æ“ä½œç­‰ï¼Œå€¼å¾—å€Ÿé‰´&lt;/p&gt;&lt;p&gt;å‰å‡ å¤©çš„æ—¶å€™ä¹Ÿåœ¨è‡ªå·±çš„é¡¹ç›®ä¸­å‘ç°äº†ä¸€äº›å…³äº&lt;code&gt;Array&lt;/code&gt;çš„å´©æºƒï¼Œæ—¥å¿—å¦‚ä¸‹&lt;/p&gt;&lt;pre&gt;&lt;code&gt;#&lt;span&gt;0&lt;/span&gt;Â Thread&lt;br/&gt;&lt;br/&gt;&lt;span&gt;NSGenericException&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;***Â CollectionÂ &amp;lt;__NSArrayM:Â &lt;span&gt;0x2836a4120&lt;/span&gt;&amp;gt;Â wasÂ mutatedÂ &lt;span&gt;while&lt;/span&gt;Â beingÂ enumerated.&lt;br/&gt;...&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¾ˆæ˜¾ç„¶ï¼Œä¸€ä¸ªå¯å˜æ•°ç»„åœ¨éå†çš„åŒæ—¶å¯¹æ•°ç»„è¿›è¡Œäº†ä¿®æ”¹ï¼Œå› ä¸º&lt;code&gt;Array&lt;/code&gt;æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œæ‰€ä»¥æ¡†æ¶å°±è­¦å‘Šæˆ‘ä»¬ä¸å…è®¸è¿™ä¹ˆåšï¼Œç›´æ¥æŠ›å´©æºƒå¤„ç†&lt;/p&gt;&lt;p&gt;é—®é¢˜å¾ˆç®€å•ï¼Œä½†æ˜¯æˆ‘è€ƒè™‘çš„æ˜¯ç›®å‰çš„&lt;code&gt;Apple&lt;/code&gt;æ˜¯å¦‚ä½•å®ç°çš„&lt;code&gt;Array&lt;/code&gt;ï¼Œå¦‚æœæƒ³çŸ¥é“ä¹‹å‰çš„å®ç°å¯ä»¥çœ‹ã€ŠNSMutableArrayåŸç†æ­éœ²ã€‹&lt;/p&gt;&lt;p&gt;æœ€è¿‘æ°å·§åœ¨å­¦ä¹ å’Œä½¿ç”¨ç›¸å…³çš„&lt;code&gt;Swift&lt;/code&gt;çš„ä¸€äº›æ¡†æ¶ï¼Œè¶ç€å‘¨æœ«æ¬å®Œç –ï¼Œå°±å¼€å§‹äº†æºç ä¹‹æ—…ï¼Œæˆ‘ä»¬ç«‹åˆ»å‡ºå‘&lt;/p&gt;&lt;p&gt;ç¬”è€…çš„ç›¸å…³å‡†å¤‡&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;âš ï¸ï¼šä»¥ä¸‹æºç éƒ½åœ¨é¡¶éƒ¨æ ‡æ³¨äº†æ–‡ä»¶ä»¥åŠå‡ºç°çš„è¡Œæ•°&lt;/p&gt;&lt;/blockquote&gt;&lt;h2&gt;&lt;span&gt;Arrayæ˜¯ä»€ä¹ˆ&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Array&lt;/code&gt;æ˜¯&lt;code&gt;Swift&lt;/code&gt;ä¸‹æ•°ç»„çš„å®ç°ï¼Œäº†è§£&lt;code&gt;Swfit&lt;/code&gt;çš„éƒ½çŸ¥é“ï¼Œ&lt;code&gt;Swift&lt;/code&gt;ä¸‹çš„å¤§å¤šæ•°çš„å¯¹è±¡å‡æ˜¯ç”±&lt;code&gt;struct&lt;/code&gt;ç»„æˆçš„ï¼Œæˆ‘ä»¬æ‰¾åˆ°æºç ä¸­çš„&lt;code&gt;Array&lt;/code&gt;çš„å®šä¹‰&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;//Â File:Â Array.swift,Â line:Â 299&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;@frozenÂ &lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;Array&lt;/span&gt;&amp;lt;Element&amp;gt;Â :&lt;/span&gt;Â Swift._DestructorSafeContainerÂ {&lt;br/&gt;Â Â &lt;br/&gt;Â Â &lt;span&gt;//Â ...&lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰€ä»¥&lt;code&gt;Array&lt;/code&gt;åœ¨&lt;code&gt;Swift&lt;/code&gt;ä¸‹æœ¬è´¨å°±æ˜¯&lt;code&gt;Struct&lt;/code&gt;&lt;/p&gt;&lt;h2&gt;&lt;span&gt;Arrayæœ‰ä»€ä¹ˆç”¨&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;æœ‰åºçš„å­˜å‚¨ä¸€ç»„æ•°æ®&lt;/p&gt;&lt;h2&gt;&lt;span&gt;Arrayçš„åº•å±‚åŸç†&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;p&gt;æ–°å»ºä¸€ä¸ªé¡¹ç›®&lt;/p&gt;&lt;p&gt;&lt;code&gt;Xcode-&amp;gt;File-&amp;gt;New-&amp;gt;Project-&amp;gt;MacOS-&amp;gt;Command Line Tool-Language(Swift) &amp;amp; Product Name&lt;/code&gt;&lt;/p&gt;&lt;p&gt;è¾“å…¥ä»¥ä¸‹ä»£ç &lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;var&lt;/span&gt;Â num:Â &lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Int&lt;/span&gt;&amp;gt;Â =Â [&lt;span&gt;1&lt;/span&gt;,Â &lt;span&gt;2&lt;/span&gt;,Â &lt;span&gt;3&lt;/span&gt;]&lt;br/&gt;&lt;span&gt;withUnsafePointer&lt;/span&gt;(to:Â &amp;amp;num)Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;($&lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&quot;end&quot;&lt;/span&gt;)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¹¶åœ¨&lt;code&gt;print(&quot;end&quot;)&lt;/code&gt;å¤„æ‰“æ–­ç‚¹&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;1.00078125&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/qMicvibdvl7p2Z6yyGHib8LlMm1yuBcESJmfwN6oxC5ZvuQ9gLG5gyJDpkxOgorX9WIJEa1z7VSITnaqqMiaiaibjzMg/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;code&gt;x/8g&lt;/code&gt;æ˜¯&lt;code&gt;LLDBï¼ˆLow Level Debuggerï¼‰&lt;/code&gt;ä¸‹çš„è°ƒè¯•å‘½ä»¤ï¼Œä½œç”¨æ˜¯æŸ¥çœ‹å†…å­˜åœ°å€é‡Œçš„å€¼&lt;/p&gt;&lt;p&gt;ä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œå¹¶æ²¡æœ‰æ‰¾åˆ°&lt;code&gt;1,2,3&lt;/code&gt;çš„ä¿¡æ¯ï¼Œå†…å­˜é‡Œé¢åªæœ‰&lt;code&gt;0x0000000101046c70&lt;/code&gt;ï¼ŒçŒœæµ‹æ˜¯å†…å­˜æŸå—åŒºåŸŸä¸Šçš„åœ°å€ï¼Œæ‰€ä»¥ç°åœ¨çš„ç–‘é—®ä¹Ÿæœ‰äº†&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;Array&lt;/code&gt;ä¿å­˜çš„åœ°å€æ˜¯ä»€ä¹ˆ?&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;Array&lt;/code&gt;ä¿å­˜çš„æ•°æ®å»å“ªäº†ï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;code&gt;Array&lt;/code&gt;çš„å†™å¤åˆ¶å¦‚ä½•å®ç°çš„ï¼Ÿ&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;å¸¦ç€è¿™ä¸‰ä¸ªç–‘é—®æˆ‘ä»¬ç»§ç»­å¾€ä¸‹æ¢ç´¢...&lt;/p&gt;&lt;p&gt;ç”Ÿæˆ&lt;code&gt;Array&lt;/code&gt;çš„&lt;code&gt;SIL&lt;/code&gt;æ–‡ä»¶&lt;/p&gt;&lt;p&gt;é¦–å…ˆæˆ‘åˆšæ‰ä»£ç æ–‡ä»¶ä¿®æ”¹ä¸ºå¦‚ä¸‹æ‰€ç¤ºï¼Œæœ€ç®€å•çš„åˆå§‹åŒ–ï¼Œæœ‰åˆ©äºæˆ‘ä»¬é˜…è¯»&lt;code&gt;SIL&lt;/code&gt;æ–‡ä»¶&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;var&lt;/span&gt;Â num:Â &lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Int&lt;/span&gt;&amp;gt;Â =Â [&lt;span&gt;1&lt;/span&gt;,Â &lt;span&gt;2&lt;/span&gt;,Â &lt;span&gt;3&lt;/span&gt;]&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨ç»ˆç«¯ä½¿ç”¨å‘½ä»¤&lt;code&gt;swiftc -emit-sil main.swift | xcrun swift-demangle &amp;gt; ./main.sil&lt;/code&gt;ç”Ÿæˆ&lt;code&gt;SIL&lt;/code&gt;æ–‡ä»¶&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;//Â å…¨å±€æ ‡è¯†ä»¥@å¼€å¤´ï¼Œå…¨å±€å˜é‡&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//Â å±€éƒ¨æ ‡è¯†ä»¥%å¼€å¤´ï¼Œå±€éƒ¨å˜é‡&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//Â storeå†™å…¥å†…å­˜&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//Â loadè¯»å–å†…å­˜&lt;/span&gt;&lt;br/&gt;&lt;span&gt;//Â å…·ä½“è¯­æ³•è¯·å‚è€ƒï¼šhttps://llvm.org/docs/LangRef.htmlï¼ˆæœç´¢IntermediateÂ Representationï¼‰&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;sil_stageÂ canonical&lt;br/&gt;&lt;span&gt;//Â ç³»ç»Ÿå†…éƒ¨å¯¼å…¥çš„ç›¸å…³éœ€è¦çš„åŠ¨æ€åº“&lt;/span&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â Builtin&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â Swift&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â SwiftShims&lt;br/&gt;&lt;br/&gt;&lt;span&gt;import&lt;/span&gt;Â Foundation&lt;br/&gt;&lt;span&gt;//Â å¯¹ä¸€ä¸ªå­˜æ”¾Intå¯å˜æ•°ç»„è¿›è¡Œsetterå’Œgetterçš„å£°æ˜&lt;/span&gt;&lt;br/&gt;@_hasStorageÂ @_hasInitialValueÂ &lt;span&gt;var&lt;/span&gt;Â num:Â &lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Int&lt;/span&gt;&amp;gt;Â {Â &lt;span&gt;get&lt;/span&gt;Â &lt;span&gt;set&lt;/span&gt;Â }&lt;br/&gt;&lt;br/&gt;&lt;span&gt;//Â num&lt;/span&gt;&lt;br/&gt;sil_globalÂ hiddenÂ @main.numÂ :Â [&lt;span&gt;Swift&lt;/span&gt;.&lt;span&gt;Int&lt;/span&gt;]Â :Â $&lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Int&lt;/span&gt;&amp;gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;//Â main&lt;/span&gt;&lt;br/&gt;silÂ @mainÂ :Â $&lt;span&gt;@convention&lt;/span&gt;(&lt;span&gt;c&lt;/span&gt;)Â (&lt;span&gt;Int32&lt;/span&gt;,Â &lt;span&gt;UnsafeMutablePointer&lt;/span&gt;&amp;lt;&lt;span&gt;Optional&lt;/span&gt;&amp;lt;&lt;span&gt;UnsafeMutablePointer&lt;/span&gt;&amp;lt;&lt;span&gt;Int8&lt;/span&gt;&amp;gt;&amp;gt;&amp;gt;)Â -&amp;gt;Â &lt;span&gt;Int32&lt;/span&gt;Â {&lt;br/&gt;bb0(%&lt;span&gt;0&lt;/span&gt;Â :Â $&lt;span&gt;Int32&lt;/span&gt;,Â %&lt;span&gt;1&lt;/span&gt;Â :Â $&lt;span&gt;UnsafeMutablePointer&lt;/span&gt;&amp;lt;&lt;span&gt;Optional&lt;/span&gt;&amp;lt;&lt;span&gt;UnsafeMutablePointer&lt;/span&gt;&amp;lt;&lt;span&gt;Int8&lt;/span&gt;&amp;gt;&amp;gt;&amp;gt;):&lt;br/&gt;Â Â alloc_globalÂ @main.numÂ :Â [&lt;span&gt;Swift&lt;/span&gt;.&lt;span&gt;Int&lt;/span&gt;]Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â id:Â %2ï¼Œåœ¨å †ä¸Šå¼€è¾Ÿä¸€ä¸ªç©ºé—´&lt;/span&gt;&lt;br/&gt;Â Â %&lt;span&gt;3&lt;/span&gt;Â =Â global_addrÂ @main.numÂ :Â [&lt;span&gt;Swift&lt;/span&gt;.&lt;span&gt;Int&lt;/span&gt;]Â :Â $*&lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Int&lt;/span&gt;&amp;gt;Â &lt;span&gt;//Â user:Â %25ï¼Œåˆ›å»ºä¸´æ—¶å˜é‡%3å­˜æ”¾æ•°ç»„é¦–åœ°å€&lt;/span&gt;&lt;br/&gt;Â Â %&lt;span&gt;4&lt;/span&gt;Â =Â integer_literalÂ $&lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;Word&lt;/span&gt;,Â &lt;span&gt;3&lt;/span&gt;Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â user:Â %6&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â åˆå§‹åŒ–æ•°ç»„è°ƒç”¨çš„å…¥å£æ–¹æ³•ï¼Œfunction_refÂ _allocateUninitializedArray&amp;lt;A&amp;gt;(_:)&lt;/span&gt;&lt;br/&gt;Â Â %&lt;span&gt;5&lt;/span&gt;Â =Â function_refÂ @&lt;span&gt;Swift&lt;/span&gt;._allocateUninitializedArray&amp;lt;&lt;span&gt;A&lt;/span&gt;&amp;gt;(&lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;Word&lt;/span&gt;)Â -&amp;gt;Â ([&lt;span&gt;A&lt;/span&gt;],Â &lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;RawPointer&lt;/span&gt;)Â :Â $&lt;span&gt;@convention&lt;/span&gt;(thin)Â &amp;lt;Ï„&lt;span&gt;_0_0&lt;/span&gt;&amp;gt;Â (&lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;Word&lt;/span&gt;)Â -&amp;gt;Â (@ownedÂ &lt;span&gt;Array&lt;/span&gt;&amp;lt;Ï„&lt;span&gt;_0_0&lt;/span&gt;&amp;gt;,Â &lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;RawPointer&lt;/span&gt;)Â &lt;span&gt;//Â user:Â %6&lt;/span&gt;&lt;br/&gt;Â Â %&lt;span&gt;6&lt;/span&gt;Â =Â applyÂ %&lt;span&gt;5&lt;/span&gt;&amp;lt;&lt;span&gt;Int&lt;/span&gt;&amp;gt;(%&lt;span&gt;4&lt;/span&gt;)Â :Â $&lt;span&gt;@convention&lt;/span&gt;(thin)Â &amp;lt;Ï„&lt;span&gt;_0_0&lt;/span&gt;&amp;gt;Â (&lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;Word&lt;/span&gt;)Â -&amp;gt;Â (@ownedÂ &lt;span&gt;Array&lt;/span&gt;&amp;lt;Ï„&lt;span&gt;_0_0&lt;/span&gt;&amp;gt;,Â &lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;RawPointer&lt;/span&gt;)Â &lt;span&gt;//Â users:Â %8,Â %7&lt;/span&gt;&lt;br/&gt;Â Â %&lt;span&gt;7&lt;/span&gt;Â =Â tuple_extractÂ %&lt;span&gt;6&lt;/span&gt;Â :Â $(&lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Int&lt;/span&gt;&amp;gt;,Â &lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;RawPointer&lt;/span&gt;),Â &lt;span&gt;0&lt;/span&gt;Â &lt;span&gt;//Â user:Â %24&lt;/span&gt;&lt;br/&gt;Â Â %&lt;span&gt;8&lt;/span&gt;Â =Â tuple_extractÂ %&lt;span&gt;6&lt;/span&gt;Â :Â $(&lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Int&lt;/span&gt;&amp;gt;,Â &lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;RawPointer&lt;/span&gt;),Â &lt;span&gt;1&lt;/span&gt;Â &lt;span&gt;//Â user:Â %9&lt;/span&gt;&lt;br/&gt;Â Â %&lt;span&gt;9&lt;/span&gt;Â =Â pointer_to_addressÂ %&lt;span&gt;8&lt;/span&gt;Â :Â $&lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;RawPointer&lt;/span&gt;Â toÂ [strict]Â $*&lt;span&gt;Int&lt;/span&gt;Â &lt;span&gt;//Â users:Â %12&lt;/span&gt;&lt;br/&gt;Â Â %&lt;span&gt;10&lt;/span&gt;Â =Â integer_literalÂ $&lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;Int64&lt;/span&gt;,Â &lt;span&gt;1&lt;/span&gt;Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â user:Â %11ï¼Œ&lt;/span&gt;&lt;br/&gt;Â Â %&lt;span&gt;11&lt;/span&gt;Â =Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;$Int&lt;/span&gt;Â (%10Â :Â &lt;span&gt;$Builtin&lt;/span&gt;.&lt;span&gt;Int64&lt;/span&gt;)Â Â Â Â Â Â Â Â //Â &lt;span&gt;user&lt;/span&gt;:Â %12&lt;br/&gt;Â Â &lt;span&gt;store&lt;/span&gt;Â %11Â &lt;span&gt;to&lt;/span&gt;Â %9Â :Â &lt;span&gt;$&lt;/span&gt;*&lt;span&gt;Int&lt;/span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â &lt;span&gt;id&lt;/span&gt;:Â %12&lt;br/&gt;Â Â %13Â =Â &lt;span&gt;integer_literal&lt;/span&gt;Â &lt;span&gt;$Builtin&lt;/span&gt;.&lt;span&gt;Word&lt;/span&gt;,Â 1Â Â Â Â Â Â Â Â Â Â //Â &lt;span&gt;user&lt;/span&gt;:Â %14&lt;br/&gt;Â Â %14Â =Â &lt;span&gt;index_addr&lt;/span&gt;Â %9Â :Â &lt;span&gt;$&lt;/span&gt;*&lt;span&gt;Int&lt;/span&gt;,Â %13Â :Â &lt;span&gt;$Builtin&lt;/span&gt;.&lt;span&gt;Word&lt;/span&gt;Â //Â &lt;span&gt;user&lt;/span&gt;:Â %17&lt;br/&gt;Â Â %15Â =Â &lt;span&gt;integer_literal&lt;/span&gt;Â &lt;span&gt;$Builtin&lt;/span&gt;.&lt;span&gt;Int64&lt;/span&gt;,Â 2Â Â Â Â Â Â Â Â Â //Â &lt;span&gt;user&lt;/span&gt;:Â %16&lt;br/&gt;Â Â %16Â =Â &lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;$Int&lt;/span&gt;Â (%15Â :Â &lt;span&gt;$Builtin&lt;/span&gt;.&lt;span&gt;Int64&lt;/span&gt;)Â Â Â Â Â Â Â Â //Â &lt;span&gt;user&lt;/span&gt;:Â %17&lt;br/&gt;Â Â &lt;span&gt;store&lt;/span&gt;Â %16Â &lt;span&gt;to&lt;/span&gt;Â %14Â :Â &lt;span&gt;$&lt;/span&gt;*&lt;span&gt;Int&lt;/span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â &lt;span&gt;id&lt;/span&gt;:Â %17&lt;br/&gt;Â Â %18Â =Â &lt;span&gt;integer_literal&lt;/span&gt;Â &lt;span&gt;$Builtin&lt;/span&gt;.&lt;span&gt;Word&lt;/span&gt;,Â 2Â Â Â Â Â Â Â Â Â Â //Â &lt;span&gt;user&lt;/span&gt;:Â %19&lt;br/&gt;Â Â %19Â =Â &lt;span&gt;index_addr&lt;/span&gt;Â %9Â :Â &lt;span&gt;$&lt;/span&gt;*&lt;span&gt;Int&lt;/span&gt;,Â %18Â :Â &lt;span&gt;$Builtin&lt;/span&gt;.&lt;span&gt;Word&lt;/span&gt;Â //Â &lt;span&gt;user&lt;/span&gt;:Â %22&lt;br/&gt;Â Â %20Â =Â &lt;span&gt;integer_literal&lt;/span&gt;Â &lt;span&gt;$Builtin&lt;/span&gt;.&lt;span&gt;Int64&lt;/span&gt;,Â 3Â Â Â Â Â Â Â Â Â //Â &lt;span&gt;user&lt;/span&gt;:Â %21&lt;br/&gt;Â Â %21Â =Â &lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;$Int&lt;/span&gt;Â (%20Â :Â &lt;span&gt;$Builtin&lt;/span&gt;.&lt;span&gt;Int64&lt;/span&gt;)Â Â Â Â Â Â Â Â //Â &lt;span&gt;user&lt;/span&gt;:Â %22&lt;br/&gt;Â Â &lt;span&gt;store&lt;/span&gt;Â %21Â &lt;span&gt;to&lt;/span&gt;Â %19Â :Â &lt;span&gt;$&lt;/span&gt;*&lt;span&gt;Int&lt;/span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â &lt;span&gt;id&lt;/span&gt;:Â %22&lt;br/&gt;Â Â //Â &lt;span&gt;function_ref&lt;/span&gt;Â &lt;span&gt;_finalizeUninitializedArray&lt;/span&gt;&amp;lt;&lt;span&gt;A&lt;/span&gt;&amp;gt;(&lt;span&gt;_&lt;/span&gt;:)&lt;br/&gt;Â Â %23Â =Â &lt;span&gt;function_ref&lt;/span&gt;Â @&lt;span&gt;Swift&lt;/span&gt;.&lt;span&gt;_finalizeUninitializedArray&lt;/span&gt;&amp;lt;&lt;span&gt;A&lt;/span&gt;&amp;gt;(&lt;span&gt;__owned&lt;/span&gt;Â [&lt;span&gt;A&lt;/span&gt;])Â -&amp;gt;Â [&lt;span&gt;A&lt;/span&gt;]Â :Â &lt;span&gt;$&lt;/span&gt;@&lt;span&gt;convention&lt;/span&gt;(&lt;span&gt;thin&lt;/span&gt;)Â &amp;lt;Ï„&lt;span&gt;_0_0&lt;/span&gt;&amp;gt;Â (@&lt;span&gt;owned&lt;/span&gt;Â &lt;span&gt;Array&lt;/span&gt;&amp;lt;Ï„&lt;span&gt;_0_0&lt;/span&gt;&amp;gt;)Â -&amp;gt;Â @&lt;span&gt;owned&lt;/span&gt;Â &lt;span&gt;Array&lt;/span&gt;&amp;lt;Ï„&lt;span&gt;_0_0&lt;/span&gt;&amp;gt;Â //Â &lt;span&gt;user&lt;/span&gt;:Â %24&lt;br/&gt;Â Â %24Â =Â &lt;span&gt;apply&lt;/span&gt;Â %23&amp;lt;&lt;span&gt;Int&lt;/span&gt;&amp;gt;(%7)Â :Â &lt;span&gt;$&lt;/span&gt;@&lt;span&gt;convention&lt;/span&gt;(&lt;span&gt;thin&lt;/span&gt;)Â &amp;lt;Ï„&lt;span&gt;_0_0&lt;/span&gt;&amp;gt;Â (@&lt;span&gt;owned&lt;/span&gt;Â &lt;span&gt;Array&lt;/span&gt;&amp;lt;Ï„&lt;span&gt;_0_0&lt;/span&gt;&amp;gt;)Â -&amp;gt;Â @&lt;span&gt;owned&lt;/span&gt;Â &lt;span&gt;Array&lt;/span&gt;&amp;lt;Ï„&lt;span&gt;_0_0&lt;/span&gt;&amp;gt;Â //Â &lt;span&gt;user&lt;/span&gt;:Â %25&lt;br/&gt;Â Â &lt;span&gt;store&lt;/span&gt;Â %24Â &lt;span&gt;to&lt;/span&gt;Â %3Â :Â &lt;span&gt;$&lt;/span&gt;*&lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Int&lt;/span&gt;&amp;gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â &lt;span&gt;id&lt;/span&gt;:Â %25&lt;br/&gt;Â Â %26Â =Â &lt;span&gt;integer_literal&lt;/span&gt;Â &lt;span&gt;$Builtin&lt;/span&gt;.&lt;span&gt;Int32&lt;/span&gt;,Â 0Â Â Â Â Â Â Â Â Â //Â &lt;span&gt;user&lt;/span&gt;:Â %27&lt;br/&gt;Â Â %27Â =Â &lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;$Int32&lt;/span&gt;Â (%26Â :Â &lt;span&gt;$Builtin&lt;/span&gt;.&lt;span&gt;Int32&lt;/span&gt;)Â Â Â Â Â Â //Â &lt;span&gt;user&lt;/span&gt;:Â %28&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â %27Â :Â &lt;span&gt;$Int32&lt;/span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â &lt;span&gt;id&lt;/span&gt;:Â %28&lt;br/&gt;}Â //Â &lt;span&gt;end&lt;/span&gt;Â &lt;span&gt;sil&lt;/span&gt;Â &lt;span&gt;function&lt;/span&gt;Â &#x27;&lt;span&gt;main&lt;/span&gt;&#x27;&lt;br/&gt;&lt;br/&gt;//Â &lt;span&gt;_allocateUninitializedArray&lt;/span&gt;&amp;lt;&lt;span&gt;A&lt;/span&gt;&amp;gt;(&lt;span&gt;_&lt;/span&gt;:)&lt;br/&gt;&lt;span&gt;sil&lt;/span&gt;Â [&lt;span&gt;always_inline&lt;/span&gt;]Â [&lt;span&gt;_semantics&lt;/span&gt;Â &quot;&lt;span&gt;array&lt;/span&gt;.&lt;span&gt;uninitialized_intrinsic&lt;/span&gt;&quot;]Â @&lt;span&gt;Swift&lt;/span&gt;.&lt;span&gt;_allocateUninitializedArray&lt;/span&gt;&amp;lt;&lt;span&gt;A&lt;/span&gt;&amp;gt;(&lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;Word&lt;/span&gt;)Â -&amp;gt;Â ([&lt;span&gt;A&lt;/span&gt;],Â &lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;RawPointer&lt;/span&gt;)Â :Â &lt;span&gt;$&lt;/span&gt;@&lt;span&gt;convention&lt;/span&gt;(&lt;span&gt;thin&lt;/span&gt;)Â &amp;lt;Ï„&lt;span&gt;_0_0&lt;/span&gt;&amp;gt;Â (&lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;Word&lt;/span&gt;)Â -&amp;gt;Â (@&lt;span&gt;owned&lt;/span&gt;Â &lt;span&gt;Array&lt;/span&gt;&amp;lt;Ï„&lt;span&gt;_0_0&lt;/span&gt;&amp;gt;,Â &lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;RawPointer&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;//Â &lt;span&gt;Int&lt;/span&gt;.&lt;span&gt;init&lt;/span&gt;(&lt;span&gt;_builtinIntegerLiteral&lt;/span&gt;:)&lt;br/&gt;&lt;span&gt;sil&lt;/span&gt;Â &lt;span&gt;public_external&lt;/span&gt;Â [&lt;span&gt;transparent&lt;/span&gt;]Â @&lt;span&gt;Swift&lt;/span&gt;.&lt;span&gt;Int&lt;/span&gt;.&lt;span&gt;init&lt;/span&gt;(&lt;span&gt;_builtinIntegerLiteral&lt;/span&gt;:Â &lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;IntLiteral&lt;/span&gt;)Â -&amp;gt;Â &lt;span&gt;Swift&lt;/span&gt;.&lt;span&gt;Int&lt;/span&gt;Â :Â &lt;span&gt;$&lt;/span&gt;@&lt;span&gt;convention&lt;/span&gt;(&lt;span&gt;method&lt;/span&gt;)Â (&lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;IntLiteral&lt;/span&gt;,Â @&lt;span&gt;thin&lt;/span&gt;Â &lt;span&gt;Int&lt;/span&gt;.&lt;span&gt;Type&lt;/span&gt;)Â -&amp;gt;Â &lt;span&gt;Int&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;span&gt;//Â %0Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â user:Â %2&lt;/span&gt;&lt;br/&gt;bb0(%&lt;span&gt;0&lt;/span&gt;Â :Â $&lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;IntLiteral&lt;/span&gt;,Â %&lt;span&gt;1&lt;/span&gt;Â :Â $@thinÂ &lt;span&gt;Int&lt;/span&gt;.&lt;span&gt;Type&lt;/span&gt;):&lt;br/&gt;Â Â %&lt;span&gt;2&lt;/span&gt;Â =Â builtinÂ &lt;span&gt;&quot;s_to_s_checked_trunc_IntLiteral_Int64&quot;&lt;/span&gt;(%&lt;span&gt;0&lt;/span&gt;Â :Â $&lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;IntLiteral&lt;/span&gt;)Â :Â $(&lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;Int64&lt;/span&gt;,Â &lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;Int1&lt;/span&gt;)Â &lt;span&gt;//Â user:Â %3&lt;/span&gt;&lt;br/&gt;Â Â %&lt;span&gt;3&lt;/span&gt;Â =Â tuple_extractÂ %&lt;span&gt;2&lt;/span&gt;Â :Â $(&lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;Int64&lt;/span&gt;,Â &lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;Int1&lt;/span&gt;),Â &lt;span&gt;0&lt;/span&gt;Â &lt;span&gt;//Â user:Â %4&lt;/span&gt;&lt;br/&gt;Â Â %&lt;span&gt;4&lt;/span&gt;Â =Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;$Int&lt;/span&gt;Â (%3Â :Â &lt;span&gt;$Builtin&lt;/span&gt;.&lt;span&gt;Int64&lt;/span&gt;)Â Â Â Â Â Â Â Â Â Â //Â &lt;span&gt;user&lt;/span&gt;:Â %5&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â %4Â :Â &lt;span&gt;$Int&lt;/span&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â &lt;span&gt;id&lt;/span&gt;:Â %5&lt;br/&gt;}Â //Â &lt;span&gt;end&lt;/span&gt;Â &lt;span&gt;sil&lt;/span&gt;Â &lt;span&gt;function&lt;/span&gt;Â &#x27;&lt;span&gt;Swift&lt;/span&gt;.&lt;span&gt;Int&lt;/span&gt;.&lt;span&gt;init&lt;/span&gt;(&lt;span&gt;_builtinIntegerLiteral&lt;/span&gt;:Â &lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;IntLiteral&lt;/span&gt;)Â -&amp;gt;Â &lt;span&gt;Swift&lt;/span&gt;.&lt;span&gt;Int&lt;/span&gt;&#x27;&lt;br/&gt;&lt;br/&gt;//Â &lt;span&gt;_finalizeUninitializedArray&lt;/span&gt;&amp;lt;&lt;span&gt;A&lt;/span&gt;&amp;gt;(&lt;span&gt;_&lt;/span&gt;:)&lt;br/&gt;&lt;span&gt;sil&lt;/span&gt;Â &lt;span&gt;shared_external&lt;/span&gt;Â [&lt;span&gt;readnone&lt;/span&gt;]Â [&lt;span&gt;_semantics&lt;/span&gt;Â &quot;&lt;span&gt;array&lt;/span&gt;.&lt;span&gt;finalize_intrinsic&lt;/span&gt;&quot;]Â @&lt;span&gt;Swift&lt;/span&gt;.&lt;span&gt;_finalizeUninitializedArray&lt;/span&gt;&amp;lt;&lt;span&gt;A&lt;/span&gt;&amp;gt;(&lt;span&gt;__owned&lt;/span&gt;Â [&lt;span&gt;A&lt;/span&gt;])Â -&amp;gt;Â [&lt;span&gt;A&lt;/span&gt;]Â :Â &lt;span&gt;$&lt;/span&gt;@&lt;span&gt;convention&lt;/span&gt;(&lt;span&gt;thin&lt;/span&gt;)Â &amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;Â (@&lt;span&gt;owned&lt;/span&gt;Â &lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;)Â -&amp;gt;Â @&lt;span&gt;owned&lt;/span&gt;Â &lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;Â &lt;/span&gt;{&lt;br/&gt;&lt;span&gt;//Â %0Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â user:Â %2&lt;/span&gt;&lt;br/&gt;bb0(%&lt;span&gt;0&lt;/span&gt;Â :Â $&lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;):&lt;br/&gt;Â Â %&lt;span&gt;1&lt;/span&gt;Â =Â alloc_stackÂ $&lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â users:Â %6,Â %5,Â %4,Â %2&lt;/span&gt;&lt;br/&gt;Â Â storeÂ %&lt;span&gt;0&lt;/span&gt;Â toÂ %&lt;span&gt;1&lt;/span&gt;Â :Â $*&lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â id:Â %2&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â function_refÂ Array._endMutation()&lt;/span&gt;&lt;br/&gt;Â Â %&lt;span&gt;3&lt;/span&gt;Â =Â function_refÂ @&lt;span&gt;Swift&lt;/span&gt;.&lt;span&gt;Array&lt;/span&gt;._endMutation()Â -&amp;gt;Â ()Â :Â $&lt;span&gt;@convention&lt;/span&gt;(method)Â &amp;lt;Ï„&lt;span&gt;_0_0&lt;/span&gt;&amp;gt;Â (@&lt;span&gt;inout&lt;/span&gt;Â &lt;span&gt;Array&lt;/span&gt;&amp;lt;Ï„&lt;span&gt;_0_0&lt;/span&gt;&amp;gt;)Â -&amp;gt;Â ()Â &lt;span&gt;//Â user:Â %4&lt;/span&gt;&lt;br/&gt;Â Â %&lt;span&gt;4&lt;/span&gt;Â =Â applyÂ %&lt;span&gt;3&lt;/span&gt;&amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;(%&lt;span&gt;1&lt;/span&gt;)Â :Â $&lt;span&gt;@convention&lt;/span&gt;(method)Â &amp;lt;Ï„&lt;span&gt;_0_0&lt;/span&gt;&amp;gt;Â (@&lt;span&gt;inout&lt;/span&gt;Â &lt;span&gt;Array&lt;/span&gt;&amp;lt;Ï„&lt;span&gt;_0_0&lt;/span&gt;&amp;gt;)Â -&amp;gt;Â ()&lt;br/&gt;Â Â %&lt;span&gt;5&lt;/span&gt;Â =Â loadÂ %&lt;span&gt;1&lt;/span&gt;Â :Â $*&lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â user:Â %7&lt;/span&gt;&lt;br/&gt;Â Â dealloc_stackÂ %&lt;span&gt;1&lt;/span&gt;Â :Â $*&lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â id:Â %6&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â %&lt;span&gt;5&lt;/span&gt;Â :Â $&lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â id:Â %7&lt;/span&gt;&lt;br/&gt;}Â &lt;span&gt;//Â endÂ silÂ functionÂ &#x27;Swift._finalizeUninitializedArray&amp;lt;A&amp;gt;(__ownedÂ [A])Â -&amp;gt;Â [A]&#x27;&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;//Â Array._endMutation()&lt;/span&gt;&lt;br/&gt;silÂ shared_externalÂ [_semanticsÂ &lt;span&gt;&quot;array.end_mutation&quot;&lt;/span&gt;]Â @&lt;span&gt;Swift&lt;/span&gt;.&lt;span&gt;Array&lt;/span&gt;._endMutation()Â -&amp;gt;Â ()Â :Â $&lt;span&gt;@convention&lt;/span&gt;(method)Â &amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;Â (@&lt;span&gt;inout&lt;/span&gt;Â &lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;)Â -&amp;gt;Â ()Â {&lt;br/&gt;&lt;span&gt;//Â %0Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â users:Â %9,Â %1&lt;/span&gt;&lt;br/&gt;bb0(%&lt;span&gt;0&lt;/span&gt;Â :Â $*&lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;):&lt;br/&gt;Â Â %&lt;span&gt;1&lt;/span&gt;Â =Â struct_element_addrÂ %&lt;span&gt;0&lt;/span&gt;Â :Â $*&lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;,Â #&lt;span&gt;Array&lt;/span&gt;._bufferÂ &lt;span&gt;//Â user:Â %2&lt;/span&gt;&lt;br/&gt;Â Â %&lt;span&gt;2&lt;/span&gt;Â =Â struct_element_addrÂ %&lt;span&gt;1&lt;/span&gt;Â :Â $*_ArrayBuffer&amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;,Â #_ArrayBuffer._storageÂ &lt;span&gt;//Â user:Â %3&lt;/span&gt;&lt;br/&gt;Â Â %&lt;span&gt;3&lt;/span&gt;Â =Â struct_element_addrÂ %&lt;span&gt;2&lt;/span&gt;Â :Â $*_BridgeStorage&amp;lt;__ContiguousArrayStorageBase&amp;gt;,Â #_BridgeStorage.rawValueÂ &lt;span&gt;//Â user:Â %4&lt;/span&gt;&lt;br/&gt;Â Â %&lt;span&gt;4&lt;/span&gt;Â =Â loadÂ %&lt;span&gt;3&lt;/span&gt;Â :Â $*&lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;BridgeObject&lt;/span&gt;Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;//Â user:Â %5&lt;/span&gt;&lt;br/&gt;Â Â %&lt;span&gt;5&lt;/span&gt;Â =Â end_cow_mutationÂ %&lt;span&gt;4&lt;/span&gt;Â :Â $&lt;span&gt;Builtin&lt;/span&gt;.&lt;span&gt;BridgeObject&lt;/span&gt;Â &lt;span&gt;//Â user:Â %6&lt;/span&gt;&lt;br/&gt;Â Â %&lt;span&gt;6&lt;/span&gt;Â =Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;$_BridgeStorage&lt;/span&gt;&amp;lt;&lt;span&gt;__ContiguousArrayStorageBase&lt;/span&gt;&amp;gt;Â (%5Â :Â &lt;span&gt;$Builtin&lt;/span&gt;.&lt;span&gt;BridgeObject&lt;/span&gt;)Â //Â &lt;span&gt;user&lt;/span&gt;:Â %7&lt;br/&gt;Â Â %7Â =Â &lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;$_ArrayBuffer&lt;/span&gt;&amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;Â (%6Â :Â &lt;span&gt;$_BridgeStorage&lt;/span&gt;&amp;lt;&lt;span&gt;__ContiguousArrayStorageBase&lt;/span&gt;&amp;gt;)Â //Â &lt;span&gt;user&lt;/span&gt;:Â %8&lt;br/&gt;Â Â %8Â =Â &lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;$Array&lt;/span&gt;&amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;Â (%7Â :Â &lt;span&gt;$_ArrayBuffer&lt;/span&gt;&amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;)Â //Â &lt;span&gt;user&lt;/span&gt;:Â %9&lt;br/&gt;Â Â &lt;span&gt;store&lt;/span&gt;Â %8Â &lt;span&gt;to&lt;/span&gt;Â %0Â :Â &lt;span&gt;$&lt;/span&gt;*&lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Element&lt;/span&gt;&amp;gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â &lt;span&gt;id&lt;/span&gt;:Â %9&lt;br/&gt;Â Â %10Â =Â &lt;span&gt;tuple&lt;/span&gt;Â ()Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â &lt;span&gt;user&lt;/span&gt;:Â %11&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â %10Â :Â &lt;span&gt;$&lt;/span&gt;()Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â //Â &lt;span&gt;id&lt;/span&gt;:Â %11&lt;br/&gt;}Â //Â &lt;span&gt;end&lt;/span&gt;Â &lt;span&gt;sil&lt;/span&gt;Â &lt;span&gt;function&lt;/span&gt;Â &#x27;&lt;span&gt;Swift&lt;/span&gt;.&lt;span&gt;Array&lt;/span&gt;.&lt;span&gt;_endMutation&lt;/span&gt;()Â -&amp;gt;Â ()&#x27;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;//Â &lt;span&gt;Mappings&lt;/span&gt;Â &lt;span&gt;from&lt;/span&gt;Â &#x27;#&lt;span&gt;fileID&lt;/span&gt;&#x27;Â &lt;span&gt;to&lt;/span&gt;Â &#x27;#&lt;span&gt;filePath&lt;/span&gt;&#x27;:&lt;br/&gt;//Â Â Â &#x27;&lt;span&gt;main&lt;/span&gt;/&lt;span&gt;main&lt;/span&gt;.&lt;span&gt;swift&lt;/span&gt;&#x27;Â =&amp;gt;Â &#x27;&lt;span&gt;main&lt;/span&gt;.&lt;span&gt;swift&lt;/span&gt;&#x27;&lt;br/&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»&lt;code&gt;SIL&lt;/code&gt;æ–‡ä»¶å¯ä»¥çœ‹å‡º&lt;code&gt;num&lt;/code&gt;çš„ç”Ÿæˆè°ƒç”¨äº†&lt;code&gt;@Swift._allocateUninitializedArray&amp;lt;A&amp;gt;()&lt;/code&gt;çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå…ƒç¥–&lt;code&gt;%6&lt;/code&gt;ï¼Œç„¶åç”¨&lt;code&gt;%7&lt;/code&gt;å’Œ&lt;code&gt;%8&lt;/code&gt;æŠŠå…ƒç¥–ä¸­çš„å€¼æå–å‡ºæ¥ï¼Œ&lt;code&gt;%7&lt;/code&gt;ç»™äº†&lt;code&gt;%3&lt;/code&gt;,ä¹Ÿå°±æ˜¯&lt;code&gt;num&lt;/code&gt;çš„ä½ç½®äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆšæ‰æ–­ç‚¹æ‹¿åˆ°çš„&lt;code&gt;0x0000000101046c70&lt;/code&gt;å°±æ˜¯&lt;code&gt;%7&lt;/code&gt;çš„å€¼äº†&lt;/p&gt;&lt;p&gt;&lt;code&gt;Array&lt;/code&gt;ä¿å­˜çš„æ•°æ®ä¾æ¬¡ä¿å­˜åˆ°äº†&lt;code&gt;%9&lt;/code&gt;,&lt;code&gt;%9&lt;/code&gt;åˆæ˜¯&lt;code&gt;%8&lt;/code&gt;çš„åœ°å€çš„æŒ‡å‘ ï¼Œæ‰€ä»¥&lt;code&gt;%7&lt;/code&gt;å’Œ&lt;code&gt;%8&lt;/code&gt;æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/p&gt;&lt;p&gt;&lt;code&gt;Array&lt;/code&gt;åœ¨æºç ä¸­çš„å®šä¹‰&lt;/p&gt;&lt;p&gt;å› ä¸ºåœ¨&lt;code&gt;SIL&lt;/code&gt;æ–‡ä»¶æ‰¾ä¸åˆ°ç­”æ¡ˆï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å»æºç æ‰¾&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;//Â File:Â Array.swift,Â line:Â 299&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;@frozen&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â &lt;span&gt;Array&lt;/span&gt;&amp;lt;Element&amp;gt;:&lt;/span&gt;Â _DestructorSafeContainerÂ {&lt;br/&gt;Â Â &lt;span&gt;#&lt;span&gt;if&lt;/span&gt;Â _runtime(_ObjC)&lt;/span&gt;&lt;br/&gt;Â Â @usableFromInline&lt;br/&gt;Â Â internalÂ typealiasÂ _BufferÂ =Â _ArrayBuffer&amp;lt;Element&amp;gt;&lt;br/&gt;Â Â #&lt;span&gt;else&lt;/span&gt;&lt;br/&gt;Â Â @usableFromInline&lt;br/&gt;Â Â internalÂ typealiasÂ _BufferÂ =Â _ContiguousArrayBuffer&amp;lt;Element&amp;gt;&lt;br/&gt;Â Â #endif&lt;br/&gt;&lt;br/&gt;Â Â @usableFromInline&lt;br/&gt;Â Â internalÂ varÂ _buffer:Â _Buffer&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;///Â InitializationÂ fromÂ anÂ existingÂ bufferÂ doesÂ notÂ haveÂ &quot;array.init&quot;&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;///Â semanticsÂ becauseÂ theÂ callerÂ mayÂ retainÂ anÂ aliasÂ toÂ buffer.&lt;/span&gt;&lt;br/&gt;Â Â @inlinable&lt;br/&gt;Â Â internalÂ init(_buffer:Â _Buffer)Â {&lt;br/&gt;Â Â Â Â self._bufferÂ =Â _buffer&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°&lt;code&gt;Array&lt;/code&gt;ä¸­åªæœ‰ä¸€ä¸ªå±æ€§&lt;code&gt;_buffer&lt;/code&gt;ï¼Œ&lt;code&gt;_buffer&lt;/code&gt;åœ¨&lt;code&gt;_runtime(Objc)&lt;/code&gt;ä¸‹æ˜¯&lt;code&gt;_ArrayBuffer&lt;/code&gt;ï¼Œå¦åˆ™å°±æ˜¯&lt;code&gt;_ContiguousArrayBuffer&lt;/code&gt;ï¼›åœ¨è‹¹æœè®¾å¤‡ä¸‹åº”è¯¥éƒ½æ˜¯å…¼å®¹&lt;code&gt;Objc&lt;/code&gt;,æ‰€ä»¥è¿™é‡Œåº”è¯¥æ˜¯&lt;code&gt;_ArrayBuffer&lt;/code&gt;&lt;/p&gt;&lt;h3&gt;&lt;span&gt;&lt;code&gt;_allocateUninitializedArray&lt;/code&gt;&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;åœ¨æºç ä¸­æœç´¢è¿™ä¸ªæ–¹æ³•ï¼Œçœ‹åˆ°ä¸‹é¢çš„å®ç°&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;//Â File:Â ArrayShared.swift,Â line:Â 34&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;///Â ReturnsÂ anÂ ArrayÂ ofÂ `_count`Â uninitializedÂ elementsÂ usingÂ the&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â givenÂ `storage`,Â andÂ aÂ pointerÂ toÂ uninitializedÂ memoryÂ forÂ the&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â firstÂ element.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â ThisÂ functionÂ isÂ referencedÂ byÂ theÂ compilerÂ toÂ allocateÂ arrayÂ literals.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â -Â Precondition:Â `storage`Â isÂ `_ContiguousArrayStorage`.&lt;/span&gt;&lt;br/&gt;@inlinableÂ &lt;span&gt;//Â FIXME(inline-always)&lt;/span&gt;&lt;br/&gt;@&lt;span&gt;inline&lt;/span&gt;(__always)&lt;br/&gt;@_semantics(&lt;span&gt;&quot;array.uninitialized_intrinsic&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;public&lt;/span&gt;Â &lt;span&gt;//Â COMPILER_INTRINSIC&lt;/span&gt;&lt;br/&gt;funcÂ _allocateUninitializedArray&amp;lt;Element&amp;gt;(_Â Â builtinCount:Â Builtin.Word)&lt;br/&gt;Â Â Â Â -&amp;gt;Â (Array&amp;lt;Element&amp;gt;,Â Builtin.RawPointer)Â {&lt;br/&gt;Â Â letÂ countÂ =Â Int(builtinCount)&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â countÂ &amp;gt;Â &lt;span&gt;0&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â DoingÂ theÂ actualÂ bufferÂ allocationÂ outsideÂ ofÂ theÂ array.uninitialized&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â semanticsÂ functionÂ enablesÂ stackÂ propagationÂ ofÂ theÂ buffer.&lt;/span&gt;&lt;br/&gt;Â Â Â Â letÂ bufferObjectÂ =Â Builtin.allocWithTailElems_1(&lt;br/&gt;Â Â Â Â Â Â _ContiguousArrayStorage&amp;lt;Element&amp;gt;.self,Â builtinCount,Â Element.self)&lt;br/&gt;&lt;br/&gt;Â Â Â Â letÂ (&lt;span&gt;array&lt;/span&gt;,Â ptr)Â =Â Array&amp;lt;Element&amp;gt;._adoptStorage(bufferObject,Â count:Â count)&lt;br/&gt;Â Â Â Â &lt;span&gt;return&lt;/span&gt;Â (&lt;span&gt;array&lt;/span&gt;,Â ptr._rawValue)&lt;br/&gt;Â Â }&lt;br/&gt;Â Â &lt;span&gt;//Â ForÂ anÂ emptyÂ arrayÂ noÂ bufferÂ allocationÂ isÂ needed.&lt;/span&gt;&lt;br/&gt;Â Â letÂ (&lt;span&gt;array&lt;/span&gt;,Â ptr)Â =Â Array&amp;lt;Element&amp;gt;._allocateUninitialized(count)&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â (&lt;span&gt;array&lt;/span&gt;,Â ptr._rawValue)&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™é‡Œå¯ä»¥çœ‹åˆ°åˆ¤æ–­&lt;code&gt;count&lt;/code&gt;æ˜¯å¦å¤§äº0ï¼Œèµ°çš„ä¸åŒçš„æ–¹æ³•ï¼Œä½†æ˜¯è¿”å›å€¼éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬åªçœ‹å…¶ä¸­ä¸€ä¸ªï¼Œå› ä¸ºä¾‹å­ä¸­çš„&lt;code&gt;count&lt;/code&gt;æ˜¯3ï¼Œæ‰€ä»¥ç›´æ¥çœ‹å¤§äº0çš„åˆ†æ”¯&lt;/p&gt;&lt;p&gt;é¦–å…ˆçœ‹åˆ°è°ƒç”¨åˆ°äº†&lt;code&gt;allocWithTailElems_1&lt;/code&gt;æ–¹æ³•ï¼Œè°ƒç”¨å¯¹è±¡æ˜¯&lt;code&gt;Builtin&lt;/code&gt;,ç»§ç»­èµ°æ–­ç‚¹è°ƒè¯•ï¼Œè¿›å…¥äº†&lt;code&gt;swift_allocObject&lt;/code&gt;æ–¹æ³•&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;//Â File:Â HeapObject.cpp,Â line:Â 133&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;HeapObjectÂ *&lt;span&gt;swift::swift_allocObject&lt;/span&gt;&lt;span&gt;(HeapMetadataÂ &lt;span&gt;const&lt;/span&gt;Â *metadata,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;size_t&lt;/span&gt;Â requiredSize,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â &lt;span&gt;size_t&lt;/span&gt;Â requiredAlignmentMask)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â CALL_IMPL(swift_allocObject,Â (metadata,Â requiredSize,Â requiredAlignmentMask));&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯å‘å †ç”³è¯·åˆ†é…ä¸€å—å†…å­˜ç©ºé—´ï¼Œè¿™ä¹Ÿæ˜¯ä¸Šæ–‡ä¸­æåˆ°çš„&lt;code&gt;çŒœæµ‹æ˜¯å†…å­˜æŸå—åŒºåŸŸ&lt;/code&gt;çš„ä¸€ä¸ªéªŒè¯ï¼Œæ–­ç‚¹æ˜¾ç¤º&lt;code&gt;requiredSize&lt;/code&gt;æ˜¯56ï¼Œ&lt;code&gt;po&lt;/code&gt;æŒ‡é’ˆ&lt;code&gt;metadata&lt;/code&gt;æ˜¾ç¤ºçš„æ˜¯&lt;code&gt;_TtGCs23_ContiguousArrayStorageSi_$&lt;/code&gt;ï¼Œè¿™æ ·å¯ä»¥å¾—å‡º&lt;code&gt;allocWithTailElems_1&lt;/code&gt;å‘å †ç”³è¯·åˆ†é…ä¸€å—ç©ºé—´ï¼Œç”³è¯·çš„å¯¹è±¡ç±»å‹æ˜¯&lt;code&gt;_ContiguousArrayStorage&lt;/code&gt;&lt;/p&gt;&lt;p&gt;ç”³è¯·å¥½ç©ºé—´ä¹‹åï¼Œç»§ç»­è°ƒç”¨äº†&lt;code&gt;_adoptStorage&lt;/code&gt;æ–¹æ³•&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;//Â File:Â Array.swift,Â line:Â 947&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;///Â ReturnsÂ anÂ ArrayÂ ofÂ `count`Â uninitializedÂ elementsÂ usingÂ the&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â givenÂ `storage`,Â andÂ aÂ pointerÂ toÂ uninitializedÂ memoryÂ forÂ the&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â firstÂ element.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â -Â Precondition:Â `storageÂ isÂ _ContiguousArrayStorage`.&lt;/span&gt;&lt;br/&gt;@inlinable&lt;br/&gt;@_semantics(&lt;span&gt;&quot;array.uninitialized&quot;&lt;/span&gt;)&lt;br/&gt;internalÂ &lt;span&gt;static&lt;/span&gt;Â funcÂ _adoptStorage(&lt;br/&gt;Â Â _Â storage:Â __ownedÂ _ContiguousArrayStorage&amp;lt;Element&amp;gt;,Â count:Â Int&lt;br/&gt;)Â -&amp;gt;Â (Array,Â UnsafeMutablePointer&amp;lt;Element&amp;gt;)Â {&lt;br/&gt;&lt;br/&gt;Â Â letÂ innerBufferÂ =Â _ContiguousArrayBuffer&amp;lt;Element&amp;gt;(&lt;br/&gt;Â Â Â Â count:Â count,&lt;br/&gt;Â Â Â Â storage:Â storage)&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â (&lt;br/&gt;Â Â Â Â Array(&lt;br/&gt;Â Â Â Â Â Â _buffer:Â _Buffer(_buffer:Â innerBuffer,Â shiftedToStartIndex:Â &lt;span&gt;0&lt;/span&gt;)),&lt;br/&gt;Â Â Â Â Â Â innerBuffer.firstElementAddress)&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¯ä»¥çœ‹å‡º&lt;code&gt;_adoptStorage&lt;/code&gt;çš„è¿”å›å€¼éƒ½æ˜¯è·Ÿ&lt;code&gt;innerBuffer&lt;/code&gt;ç›¸å…³ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå…ƒç¥–ï¼Œå…ƒç¥–é‡Œçš„å†…å®¹åˆ†åˆ«å¯¹åº”äº†&lt;code&gt;innerBuffer&lt;/code&gt;çš„ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;&lt;p&gt;&lt;code&gt;innerBuffer&lt;/code&gt;æ˜¯&lt;code&gt;_ContiguousArrayBuffer&lt;/code&gt;åˆå§‹åŒ–æ–¹æ³•ç”Ÿæˆçš„ï¼Œçœ‹ä¸‹&lt;code&gt;_ContiguousArrayBuffer&lt;/code&gt;å®šä¹‰&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;//Â File:Â ContiguousArrayBuffer.swift,Â line:Â 289&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;///Â InitializeÂ usingÂ theÂ givenÂ uninitializedÂ `storage`.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â TheÂ storageÂ isÂ assumedÂ toÂ beÂ uninitialized.Â TheÂ returnedÂ bufferÂ hasÂ the&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â bodyÂ partÂ ofÂ theÂ storageÂ initialized,Â butÂ notÂ theÂ elements.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â -Â Warning:Â TheÂ resultÂ hasÂ uninitializedÂ elements.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â &lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â -Â Warning:Â storageÂ mayÂ haveÂ beenÂ stack-allocated,Â soÂ it&#x27;s&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â Â Â crucialÂ notÂ toÂ call,Â e.g.,Â `malloc_size`Â onÂ it.&lt;/span&gt;&lt;br/&gt;@&lt;span&gt;inlinable&lt;br/&gt;internalÂ &lt;span&gt;init&lt;/span&gt;&lt;span&gt;(count:Â Int,Â storage:Â _ContiguousArrayStorage&amp;lt;Element&amp;gt;)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â _storageÂ =Â storage&lt;br/&gt;&lt;br/&gt;Â Â _initStorageHeader(count:Â count,Â capacity:Â count)&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;@inlinable&lt;br/&gt;internalÂ init(_Â storage:Â __ContiguousArrayStorageBase)Â {&lt;br/&gt;Â Â _storageÂ =Â storage&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;///Â InitializeÂ theÂ bodyÂ partÂ ofÂ ourÂ storage.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â -Â Warning:Â doesÂ notÂ initializeÂ elements&lt;/span&gt;&lt;br/&gt;@inlinable&lt;br/&gt;internalÂ funcÂ _initStorageHeader(count:Â Int,Â capacity:Â Int)Â {&lt;br/&gt;#&lt;span&gt;if&lt;/span&gt;Â _runtime(_ObjC)&lt;br/&gt;Â Â letÂ verbatimÂ =Â _isBridgedVerbatimToObjectiveC(Element.self)&lt;br/&gt;#&lt;span&gt;else&lt;/span&gt;&lt;br/&gt;Â Â letÂ verbatimÂ =Â &lt;span&gt;false&lt;/span&gt;&lt;br/&gt;#endif&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â WeÂ canÂ initializeÂ byÂ assignmentÂ becauseÂ _ArrayBodyÂ isÂ aÂ trivialÂ type,&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;//Â i.e.Â containsÂ noÂ references.&lt;/span&gt;&lt;br/&gt;Â Â _storage.countAndCapacityÂ =Â _ArrayBody(&lt;br/&gt;Â Â Â Â count:Â count,&lt;br/&gt;Â Â Â Â capacity:Â capacity,&lt;br/&gt;Â Â Â Â elementTypeIsBridgedVerbatim:Â verbatim)&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;_ContiguousArrayBuffer&lt;/code&gt;åªæœ‰ä¸€ä¸ªå±æ€§&lt;code&gt;_storage&lt;/code&gt;ï¼Œåˆå§‹åŒ–æ–¹æ³•&lt;code&gt;init(count: Int, storage: _ContiguousArrayStorage&amp;lt;Element&amp;gt;)&lt;/code&gt;ä¸­ä¼ è¿›æ¥çš„&lt;code&gt;storage&lt;/code&gt;æ˜¯&lt;code&gt;_ContiguousArrayStorage&lt;/code&gt;ï¼Œ&lt;code&gt;__ContiguousArrayStorageBase&lt;/code&gt;æ˜¯&lt;code&gt;_ContiguousArrayStorage&lt;/code&gt;çš„çˆ¶ç±»&lt;/p&gt;&lt;p&gt;&lt;code&gt;_ContiguousArrayStorage&lt;/code&gt;&lt;/p&gt;&lt;p&gt;&lt;code&gt;_ContiguousArrayStorage&lt;/code&gt;æ˜¯&lt;code&gt;class&lt;/code&gt;ï¼ŒæŸ¥çœ‹æºç &lt;code&gt;_ContiguousArrayStorage&lt;/code&gt;çš„ç»§æ‰¿é“¾ï¼Œå‘ç°åªæœ‰åœ¨&lt;code&gt;__ContiguousArrayStorageBase&lt;/code&gt;æœ‰ä¸€ä¸ªå±æ€§&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;//Â File:Â SwiftNativeNSArray.swift,Â line:Â 452&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;@usableFromInline&lt;br/&gt;&lt;span&gt;final&lt;/span&gt;Â varÂ countAndCapacity:Â _ArrayBody&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;_ArrayBody&lt;/code&gt;æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œåªæœ‰ä¸€ä¸ªå±æ€§&lt;code&gt;_storage&lt;/code&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;//Â File:Â ArrayBody.swift,Â line:Â 20&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;@frozen&lt;br/&gt;@usableFromInline&lt;br/&gt;internalÂ &lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â _&lt;span&gt;ArrayBody&lt;/span&gt;Â {&lt;/span&gt;&lt;br/&gt;Â Â @usableFromInline&lt;br/&gt;Â Â internalÂ varÂ _storage:Â _SwiftArrayBodyStorage&lt;br/&gt;Â Â Â Â &lt;br/&gt;Â &lt;span&gt;//Â ...Â Â Â &lt;/span&gt;&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;é‚£ä¹ˆ&lt;code&gt;_SwiftArrayBodyStorage&lt;/code&gt;åˆæ˜¯ä»€ä¹ˆï¼Ÿ&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;&lt;span&gt;struct&lt;/span&gt;Â _&lt;span&gt;SwiftArrayBodyStorage&lt;/span&gt;Â {&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;__swift_intptr_t&lt;/span&gt;Â count;&lt;br/&gt;Â Â &lt;span&gt;__swift_uintptr_t&lt;/span&gt;Â _capacityAndFlags;&lt;br/&gt;};&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å¾ˆæ˜¾ç„¶&lt;code&gt;_SwiftArrayBodyStorage&lt;/code&gt;ä»ç„¶æ˜¯ç»“æ„ä½“ï¼Œ&lt;code&gt;count&lt;/code&gt;å’Œ&lt;code&gt;_capacityAndFlags&lt;/code&gt;éƒ½æ˜¯&lt;code&gt;Swift&lt;/code&gt;ä¸­çš„æŒ‡é’ˆå¤§å°ï¼Œéƒ½æ˜¯8ä¸ªå­—èŠ‚&lt;/p&gt;&lt;h3&gt;&lt;span&gt;&lt;code&gt;_capacityAndFlags&lt;/code&gt;&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬ç»§ç»­å›åˆ°&lt;code&gt;_ContiguousArrayBuffer&lt;/code&gt;åˆå§‹åŒ–æ–¹æ³•ï¼Œå½“&lt;code&gt;_storage&lt;/code&gt;èµ‹å€¼å®Œä»¥åå°±è°ƒç”¨äº†&lt;code&gt;_initStorageHeader(count: count, capacity: count)&lt;/code&gt;ï¼Œçœ‹å‡½æ•°åæ˜¯åœ¨åˆå§‹åŒ–&lt;code&gt;count&lt;/code&gt;å’Œ&lt;code&gt;capacity&lt;/code&gt;ï¼Œåœ¨&lt;code&gt;_initStorageHeader&lt;/code&gt;æ–¹æ³•ä¸­çœ‹åˆ°æ ¸å¿ƒå†…å®¹&lt;/p&gt;&lt;pre&gt;&lt;code&gt;Â _storage.countAndCapacityÂ =Â _ArrayBody(&lt;br/&gt;Â Â Â Â Â Â count:Â count,&lt;br/&gt;Â Â Â Â Â Â capacity:Â capacity,&lt;br/&gt;Â Â Â Â Â Â elementTypeIsBridgedVerbatim:Â verbatim)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å…¶å®&lt;code&gt;_initStorageHeader&lt;/code&gt;æ–¹æ³•å°±æ˜¯ç»™&lt;code&gt;_storage&lt;/code&gt;ä¸­çš„&lt;code&gt;countAndCapacity&lt;/code&gt;å±æ€§èµ‹å€¼&lt;/p&gt;&lt;p&gt;æ¥ä¸‹æ¥çœ‹&lt;code&gt;_ArrayBody&lt;/code&gt;æ˜¯å¦‚ä½•åˆå§‹åŒ–çš„&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;//Â File:Â ArrayBody.swift,Â line:Â 26&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;@&lt;span&gt;inlinable&lt;br/&gt;internalÂ &lt;span&gt;init&lt;/span&gt;&lt;span&gt;(&lt;br/&gt;Â Â count:Â Int,Â capacity:Â Int,Â elementTypeIsBridgedVerbatim:Â BoolÂ =Â &lt;span&gt;false&lt;/span&gt;&lt;br/&gt;)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â _internalInvariant(countÂ &amp;gt;=Â &lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;Â Â _internalInvariant(capacityÂ &amp;gt;=Â &lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;&lt;br/&gt;Â Â _storageÂ =Â _SwiftArrayBodyStorage(&lt;br/&gt;Â Â Â Â count:Â count,&lt;br/&gt;Â Â Â Â _capacityAndFlags:&lt;br/&gt;Â Â Â Â Â Â (UInt(truncatingIfNeeded:Â capacity)Â &amp;amp;&amp;lt;&amp;lt;Â &lt;span&gt;1&lt;/span&gt;)Â |&lt;br/&gt;Â Â Â Â Â Â (elementTypeIsBridgedVerbatimÂ ?Â &lt;span&gt;1&lt;/span&gt;Â :Â &lt;span&gt;0&lt;/span&gt;))&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°&lt;code&gt;count&lt;/code&gt;å°±æ˜¯ç›´æ¥ä¼ é€’èµ‹å€¼äº†ï¼Œè€Œ&lt;code&gt;capacity&lt;/code&gt;ï¼ˆå°±æ˜¯å±æ€§&lt;code&gt;_capacityAndFlags&lt;/code&gt;ï¼‰åœ¨å†…å­˜ä¸­å¹¶ä¸æ˜¯ç›´æ¥å­˜å‚¨çš„ï¼Œè€Œæ˜¯å‘å·¦1ä½åç§»ï¼Œç„¶ååœ¨å¤šå‡ºæ¥çš„1ä½æ•°æ®è®°å½•äº†ä¸€ä¸ª&lt;code&gt;elementTypeIsBridgedVerbatim&lt;/code&gt;çš„æ ‡è¯†&lt;/p&gt;&lt;p&gt;æ‰€ä»¥å¦‚æœåœ¨å†…å­˜ä¸­è¯»å–&lt;code&gt;capacity&lt;/code&gt;çš„æ—¶å€™ï¼Œä¹Ÿéœ€è¦ä½ç§»æ“ä½œï¼Œè¿™ä¸ªåœ¨&lt;code&gt;_ArrayBody&lt;/code&gt;ä¹Ÿæœ‰ä½“ç°&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;//Â File:Â ArrayBody.swift,Â line:Â 62&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;///Â TheÂ numberÂ ofÂ elementsÂ thatÂ canÂ beÂ storedÂ inÂ thisÂ ArrayÂ without&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â reallocation.&lt;/span&gt;&lt;br/&gt;@inlinable&lt;br/&gt;internalÂ varÂ capacity:Â IntÂ {&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â Int(_capacityAndFlagsÂ &amp;amp;&amp;gt;&amp;gt;Â &lt;span&gt;1&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;h3&gt;&lt;span&gt;&lt;code&gt;_ArrayBuffer&lt;/code&gt;&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;åˆ°è¿™é‡Œ&lt;code&gt;innerBuffer&lt;/code&gt;çš„åˆå§‹åŒ–å°±è¯»å®Œäº†ï¼Œå›åˆ°ä¸»å¹²è¿”å›å€¼çš„ç”Ÿæˆ&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;return&lt;/span&gt;Â (&lt;br/&gt;Â Â Â Â Array(&lt;br/&gt;Â Â Â Â Â Â _buffer:Â _Buffer(_buffer:Â innerBuffer,Â shiftedToStartIndex:Â &lt;span&gt;0&lt;/span&gt;)),&lt;br/&gt;Â Â Â Â Â Â innerBuffer.firstElementAddress)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;Array(_buffer:)&lt;/code&gt;æ˜¯ç»“æ„ä½“é»˜è®¤çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œ&lt;code&gt;_Buffer&lt;/code&gt;ä¸Šé¢ä¹Ÿæåˆ°äº†æ˜¯&lt;code&gt;_ArrayBuffer&lt;/code&gt;ï¼Œç°åœ¨æŠŠ&lt;code&gt;_ArrayBuffer&lt;/code&gt;çš„åˆå§‹åŒ–æ–¹æ³•ç»“åˆèµ·æ¥çœ‹&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;//Â File:ArrayBuffer.swift,Â line:Â 25&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;@usableFromInline&lt;br/&gt;internalÂ typealiasÂ _ArrayBridgeStorage&lt;br/&gt;=Â _BridgeStorage&amp;lt;__ContiguousArrayStorageBase&amp;gt;&lt;br/&gt;&lt;br/&gt;@usableFromInline&lt;br/&gt;@frozen&lt;br/&gt;internalÂ structÂ _ArrayBuffer&amp;lt;Element&amp;gt;:Â _ArrayBufferProtocolÂ {&lt;br/&gt;&lt;span&gt;//Â ...&lt;/span&gt;&lt;br/&gt;@usableFromInline&lt;br/&gt;internalÂ varÂ _storage:Â _ArrayBridgeStorage&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;extensionÂ _ArrayBufferÂ {&lt;br/&gt;&lt;span&gt;///Â AdoptÂ theÂ storageÂ ofÂ `source`.&lt;/span&gt;&lt;br/&gt;@inlinable&lt;br/&gt;internalÂ init(_bufferÂ source:Â NativeBuffer,Â shiftedToStartIndex:Â Int)Â {&lt;br/&gt;Â Â _internalInvariant(shiftedToStartIndexÂ ==Â &lt;span&gt;0&lt;/span&gt;,Â &lt;span&gt;&quot;shiftedToStartIndexÂ mustÂ beÂ 0&quot;&lt;/span&gt;)&lt;br/&gt;Â Â _storageÂ =Â _ArrayBridgeStorage(native:Â source._storage)&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;///Â `true`,Â ifÂ theÂ arrayÂ isÂ nativeÂ andÂ doesÂ notÂ needÂ aÂ deferredÂ typeÂ check.&lt;/span&gt;&lt;br/&gt;@inlinable&lt;br/&gt;internalÂ varÂ arrayPropertyIsNativeTypeChecked:Â BoolÂ {&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â _isNativeTypeChecked&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;//Â File:Â BridgeStorage.swift,Â line:Â 57&lt;/span&gt;&lt;br/&gt;@frozen&lt;br/&gt;@usableFromInline&lt;br/&gt;internalÂ structÂ _BridgeStorage&amp;lt;NativeClass:Â AnyObject&amp;gt;Â {&lt;br/&gt;Â Â @inlinable&lt;br/&gt;Â Â @&lt;span&gt;inline&lt;/span&gt;(__always)&lt;br/&gt;Â Â internalÂ init(objC:Â ObjC)Â {&lt;br/&gt;Â Â Â Â _internalInvariant(_usesNativeSwiftReferenceCounting(NativeClass.self))&lt;br/&gt;Â Â Â Â rawValueÂ =Â _makeObjCBridgeObject(objC)&lt;br/&gt;Â Â }&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä»ä»£ç çœ‹å°±æ˜¯ç»“æ„ä½“åªæœ‰ä¸€ä¸ªå±æ€§ï¼Œç„¶åå°±æ˜¯å±æ€§èµ‹å€¼æ“ä½œï¼Œ&lt;code&gt;shiftedToStartIndex&lt;/code&gt;ä¼ å…¥çš„0å¯¹æˆ‘ä»¬çš„æŸ¥æ‰¾éœ€æ±‚ä¹Ÿæ²¡æœ‰å½±å“å°±æ˜¯ä¸€ä¸ªç®€å•åˆ¤æ–­&lt;/p&gt;&lt;p&gt;æ‰€ä»¥æ€»ç»“å°±æ˜¯&lt;code&gt;%7&lt;/code&gt;å°±æ˜¯&lt;code&gt;_ArrayBuffer&lt;/code&gt;çš„ç»“æ„ä½“ï¼Œé‡Œé¢çš„å±æ€§å­˜æ”¾äº†&lt;code&gt;_ContiguousArrayStorage&lt;/code&gt;çš„å®ä¾‹ç±»å¯¹è±¡&lt;/p&gt;&lt;p&gt;&lt;code&gt;firstElementAddress&lt;/code&gt;&lt;/p&gt;&lt;p&gt;ç°åœ¨ç»§ç»­æŸ¥&lt;code&gt;SIL&lt;/code&gt;æ–‡ä»¶ä¸‹çš„&lt;code&gt;%8&lt;/code&gt;ï¼Œä¹Ÿå°±æ˜¯&lt;code&gt;innerBuffer.firstElementAddress&lt;/code&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;//Â File:Â ContigyousArrayBuffer.swift&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;///Â AÂ pointerÂ toÂ theÂ firstÂ element.&lt;/span&gt;&lt;br/&gt;@inlinable&lt;br/&gt;internalÂ varÂ firstElementAddress:Â UnsafeMutablePointer&amp;lt;Element&amp;gt;Â {&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â UnsafeMutablePointer(Builtin.projectTailElems(_storage,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Element.self))&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;Builtin&lt;/code&gt;æ˜¯ç¼–è¯‘å™¨å†…ç½®å‘½ä»¤çš„è°ƒç”¨ï¼Œä¸å¥½æŸ¥çœ‹ï¼Œæˆ‘ä»¬çœ‹ä¸‹æ³¨é‡Š&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;//Â File:Â Builtins.def,Â line:Â 465&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;///Â projectTailElemsÂ :Â &amp;lt;C,E&amp;gt;Â (C)Â -&amp;gt;Â Builtin.RawPointer&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â ProjectsÂ theÂ firstÂ tail-allocatedÂ elementÂ ofÂ typeÂ EÂ fromÂ aÂ classÂ C.&lt;/span&gt;&lt;br/&gt;BUILTIN_SIL_OPERATION(ProjectTailElems,Â &lt;span&gt;&quot;projectTailElems&quot;&lt;/span&gt;,Â Special)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰€ä»¥&lt;code&gt;projectTailElems&lt;/code&gt;æ–¹æ³•çš„ä½œç”¨æ˜¯è¿”å›&lt;code&gt;_storage&lt;/code&gt;åˆ†é…ç©ºé—´çš„å°¾éƒ¨å…ƒç´ ç¬¬ä¸€ä¸ªåœ°å€ï¼Œè¿™æ ·æ¨æµ‹ä¸‹æ¥ï¼Œæ•°ç»„çš„å…ƒç´ çš„å­˜å‚¨ä½ç½®å°±åœ¨&lt;code&gt;_ContiguousArrayStorage&lt;/code&gt;å†…å®¹çš„åé¢&lt;/p&gt;&lt;p&gt;éªŒè¯&lt;code&gt;Array&lt;/code&gt;çš„åº•å±‚ç»“æ„&lt;/p&gt;&lt;p&gt;è¿˜æ˜¯æ–‡ç« å¼€å¤´çš„ä»£ç &lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;var&lt;/span&gt;Â num:Â &lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Int&lt;/span&gt;&amp;gt;Â =Â [&lt;span&gt;1&lt;/span&gt;,Â &lt;span&gt;2&lt;/span&gt;,Â &lt;span&gt;3&lt;/span&gt;]&lt;br/&gt;&lt;span&gt;withUnsafePointer&lt;/span&gt;(to:Â &amp;amp;num)Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;($&lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&quot;end&quot;&lt;/span&gt;)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;åœ¨&lt;code&gt;print(&quot;end&quot;)&lt;/code&gt;æ‰“ä¸Šæ–­ç‚¹ï¼Œè¾“å‡ºä¸‹&lt;code&gt;num&lt;/code&gt;çš„å†…å­˜&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;0x0000000100008060&lt;/span&gt;&lt;br/&gt;(lldb)Â x/&lt;span&gt;8&lt;/span&gt;gÂ &lt;span&gt;0x0000000100008060&lt;/span&gt;&lt;br/&gt;&lt;span&gt;0x100008060&lt;/span&gt;:Â &lt;span&gt;0x000000010064b8d0&lt;/span&gt;Â &lt;span&gt;0x0000000000000000&lt;/span&gt;&lt;br/&gt;&lt;span&gt;0x100008070&lt;/span&gt;:Â &lt;span&gt;0x0000000000000000&lt;/span&gt;Â &lt;span&gt;0x0000000000000000&lt;/span&gt;&lt;br/&gt;&lt;span&gt;0x100008080&lt;/span&gt;:Â &lt;span&gt;0x0000000000000000&lt;/span&gt;Â &lt;span&gt;0x0000000000000000&lt;/span&gt;&lt;br/&gt;&lt;span&gt;0x100008090&lt;/span&gt;:Â &lt;span&gt;0x0000000000000000&lt;/span&gt;Â &lt;span&gt;0x0000000000000000&lt;/span&gt;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;code&gt;0x000000010064b8d0&lt;/code&gt;å°±æ˜¯&lt;code&gt;_ContiguousArrayStorage&lt;/code&gt;çš„å¼•ç”¨ï¼Œå†ç»§ç»­è¾“å‡º&lt;code&gt;0x000000010064b8d0&lt;/code&gt;çš„å†…å­˜&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;0x0000000100008060&lt;/span&gt;&lt;br/&gt;(lldb)Â x/&lt;span&gt;8&lt;/span&gt;gÂ &lt;span&gt;0x0000000100008060&lt;/span&gt;&lt;br/&gt;&lt;span&gt;0x100008060&lt;/span&gt;:Â &lt;span&gt;0x000000010064b8d0&lt;/span&gt;Â &lt;span&gt;0x0000000000000000&lt;/span&gt;&lt;br/&gt;&lt;span&gt;0x100008070&lt;/span&gt;:Â &lt;span&gt;0x0000000000000000&lt;/span&gt;Â &lt;span&gt;0x0000000000000000&lt;/span&gt;&lt;br/&gt;&lt;span&gt;0x100008080&lt;/span&gt;:Â &lt;span&gt;0x0000000000000000&lt;/span&gt;Â &lt;span&gt;0x0000000000000000&lt;/span&gt;&lt;br/&gt;&lt;span&gt;0x100008090&lt;/span&gt;:Â &lt;span&gt;0x0000000000000000&lt;/span&gt;Â &lt;span&gt;0x0000000000000000&lt;/span&gt;&lt;br/&gt;(lldb)Â x/&lt;span&gt;8&lt;/span&gt;gÂ &lt;span&gt;0x000000010064b8d0&lt;/span&gt;&lt;br/&gt;&lt;span&gt;0x10064b8d0&lt;/span&gt;:Â &lt;span&gt;0x000000020dfaf140&lt;/span&gt;Â &lt;span&gt;0x0000000000000003&lt;/span&gt;&lt;br/&gt;&lt;span&gt;0x10064b8e0&lt;/span&gt;:Â &lt;span&gt;0x0000000000000003&lt;/span&gt;Â &lt;span&gt;0x0000000000000006&lt;/span&gt;&lt;br/&gt;&lt;span&gt;0x10064b8f0&lt;/span&gt;:Â &lt;span&gt;0x0000000000000001&lt;/span&gt;Â &lt;span&gt;0x0000000000000002&lt;/span&gt;&lt;br/&gt;&lt;span&gt;0x10064b900&lt;/span&gt;:Â &lt;span&gt;0x0000000000000003&lt;/span&gt;Â &lt;span&gt;0x0000000000000000&lt;/span&gt;&lt;br/&gt;(lldb)Â &lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;éªŒè¯æˆåŠŸâœ…&lt;/p&gt;&lt;h2&gt;&lt;span&gt;æ‰©å±•&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;h3&gt;&lt;span&gt;&lt;code&gt;Array&lt;/code&gt;çš„å†™æ—¶å¤åˆ¶&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;å†™æ—¶å¤åˆ¶ï¼šåªæœ‰éœ€è¦æ”¹å˜çš„æ—¶å€™ï¼Œæ‰ä¼šå¯¹å˜é‡è¿›è¡Œå¤åˆ¶ï¼Œå¦‚æœä¸æ”¹å˜ï¼Œæ•°æ®å…±ç”¨ä¸€ä¸ªå†…å­˜&lt;/p&gt;&lt;p&gt;åœ¨&lt;code&gt;Swift&lt;/code&gt;æ ‡æ³¨åº“ä¸­ï¼Œåƒé›†åˆç±»å¯¹è±¡&lt;code&gt;Array&lt;/code&gt;,&lt;code&gt;Dictionary&lt;/code&gt;å’Œ&lt;code&gt;Set&lt;/code&gt;æ—¶é€šè¿‡å†™æ—¶å¤åˆ¶&lt;code&gt;copy-on-write&lt;/code&gt;çš„æŠ€æœ¯å®ç°çš„&lt;/p&gt;&lt;p&gt;æˆ‘ä»¬æŸ¥çœ‹ä¸‹æºç ï¼Œä¾ç„¶æ˜¯å†™æµ‹è¯•ä»£ç &lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;var&lt;/span&gt;Â num:Â &lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Int&lt;/span&gt;&amp;gt;Â =Â [&lt;span&gt;1&lt;/span&gt;,Â &lt;span&gt;2&lt;/span&gt;,Â &lt;span&gt;3&lt;/span&gt;]&lt;br/&gt;&lt;span&gt;var&lt;/span&gt;Â copyNumÂ =Â num&lt;br/&gt;num.append(&lt;span&gt;4&lt;/span&gt;)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶ååœ¨&lt;code&gt;append&lt;/code&gt;å¤„æ‰“ä¸Šæ–­ç‚¹&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;//Â File:Â ArraySlice.swift,Â line:Â 919&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;@inlinable&lt;br/&gt;@_semantics(&lt;span&gt;&quot;array.append_element&quot;&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;&lt;span&gt;public&lt;/span&gt;Â mutatingÂ funcÂ &lt;span&gt;append&lt;/span&gt;&lt;span&gt;(_Â newElement:Â __ownedÂ Element)&lt;/span&gt;Â &lt;/span&gt;{&lt;br/&gt;Â Â _makeUniqueAndReserveCapacityIfNotUnique()&lt;br/&gt;Â Â letÂ oldCountÂ =Â _getCount()&lt;br/&gt;Â Â _reserveCapacityAssumingUniqueBuffer(oldCount:Â oldCount)&lt;br/&gt;Â Â _appendElementAssumeUniqueAndCapacity(oldCount,Â newElement:Â newElement)&lt;br/&gt;Â Â _endMutation()&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸€å…±è°ƒç”¨äº†3ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬ä¾æ¬¡çœ‹ä¸‹&lt;/p&gt;&lt;p&gt;&lt;code&gt;_makeUniqueAndReserveCapacityIfNotUnique()&lt;/code&gt;ï¼Œç›´æ¥ç¿»è¯‘å‡½æ•°åï¼Œå¦‚æœè¯¥æ•°ç»„ä¸æ˜¯å”¯ä¸€çš„ï¼Œé‚£ä¹ˆä½¿å¾—æˆä¸ºå”¯ä¸€å¹¶ä¸”ä¿ç•™å®¹é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå”¯ä¸€æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿï¼Œè¿™é‡Œæ–­ç‚¹æ·±ï¼Œåªçœ‹å…³é”®ä»£ç &lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;//Â File:Â RefCount.h,Â line:Â 606&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;//Â CompilerÂ isÂ cleverÂ enoughÂ toÂ optimizeÂ this.&lt;/span&gt;&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;&lt;br/&gt;Â Â Â Â !getUseSlowRC()Â &amp;amp;&amp;amp;Â !getIsDeiniting()Â &amp;amp;&amp;amp;Â getStrongExtraRefCount()Â ==Â &lt;span&gt;0&lt;/span&gt;;&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™äº›éƒ½æ˜¯å¼•ç”¨è®¡æ•°çš„åˆ¤æ–­ï¼Œæœ€ä¸»è¦çš„æ˜¯&lt;code&gt;getStrongExtraRefCount&lt;/code&gt;å¼ºå¼•ç”¨è®¡æ•°æ˜¯å¦ä¸º0ï¼Œå¦‚æœä¸æ˜¯0çš„è¯ä¸æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥è¿™é‡Œçš„å”¯ä¸€æ˜¯æŒ‡å¯¹è¿™å—ç©ºé—´çš„å”¯ä¸€å¼•ç”¨ï¼›å¦‚æœä¸å”¯ä¸€ä¼šå¦‚ä½•å¤„ç†&lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;//Â File:Â Array.swift,Â line:Â 1099&lt;/span&gt;&lt;br/&gt;Â Â @inlinable&lt;br/&gt;Â Â @_semantics(&lt;span&gt;&quot;array.make_mutable&quot;&lt;/span&gt;)&lt;br/&gt;Â Â internalÂ mutatingÂ funcÂ _makeUniqueAndReserveCapacityIfNotUnique()Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;if&lt;/span&gt;Â _slowPath(!_buffer.beginCOWMutation())Â {&lt;br/&gt;Â Â Â Â Â Â _createNewBuffer(bufferIsUnique:Â &lt;span&gt;false&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â minimumCapacity:Â countÂ +Â &lt;span&gt;1&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â growForAppend:Â &lt;span&gt;true&lt;/span&gt;)&lt;br/&gt;Â Â Â Â }&lt;br/&gt;Â Â }&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;//Â File:Â Array.swift,Â line:Â 1069&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;///Â CreatesÂ aÂ newÂ buffer,Â replacingÂ theÂ currentÂ buffer.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â IfÂ `bufferIsUnique`Â isÂ true,Â theÂ bufferÂ isÂ assumedÂ toÂ beÂ uniquely&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â referencedÂ byÂ thisÂ arrayÂ andÂ theÂ elementsÂ areÂ movedÂ -Â insteadÂ ofÂ copiedÂ -&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â toÂ theÂ newÂ buffer.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â TheÂ `minimumCapacity`Â isÂ theÂ lowerÂ boundÂ forÂ theÂ newÂ capacity.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â IfÂ `growForAppend`Â isÂ true,Â theÂ newÂ capacityÂ isÂ calculatedÂ using&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â `_growArrayCapacity`,Â butÂ atÂ leastÂ keptÂ atÂ `minimumCapacity`.&lt;/span&gt;&lt;br/&gt;@_alwaysEmitIntoClient&lt;br/&gt;internalÂ mutatingÂ funcÂ _createNewBuffer(&lt;br/&gt;Â Â bufferIsUnique:Â Bool,Â minimumCapacity:Â Int,Â growForAppend:Â Bool&lt;br/&gt;)Â {&lt;br/&gt;Â Â _internalInvariant(!bufferIsUniqueÂ ||Â _buffer.isUniquelyReferenced())&lt;br/&gt;Â Â _bufferÂ =Â _buffer._consumeAndCreateNew(bufferIsUnique:Â bufferIsUnique,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â minimumCapacity:Â minimumCapacity,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â growForAppend:Â growForAppend)&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;//Â File:Â ArrayBuffer.swift,Â line:Â 162&lt;/span&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;span&gt;///Â CreatesÂ andÂ returnsÂ aÂ newÂ uniquelyÂ referencedÂ bufferÂ whichÂ isÂ aÂ copyÂ of&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â thisÂ buffer.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â ThisÂ bufferÂ isÂ consumed,Â i.e.Â it&#x27;sÂ released.&lt;/span&gt;&lt;br/&gt;@_alwaysEmitIntoClient&lt;br/&gt;@&lt;span&gt;inline&lt;/span&gt;(never)&lt;br/&gt;@_semantics(&lt;span&gt;&quot;optimize.sil.specialize.owned2guarantee.never&quot;&lt;/span&gt;)&lt;br/&gt;internalÂ __consumingÂ funcÂ _consumeAndCreateNew()Â -&amp;gt;Â _ArrayBufferÂ {&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â _consumeAndCreateNew(bufferIsUnique:Â &lt;span&gt;false&lt;/span&gt;,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â minimumCapacity:Â count,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â growForAppend:Â &lt;span&gt;false&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;&lt;br/&gt;&lt;span&gt;///Â CreatesÂ andÂ returnsÂ aÂ newÂ uniquelyÂ referencedÂ bufferÂ whichÂ isÂ aÂ copyÂ of&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â thisÂ buffer.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â IfÂ `bufferIsUnique`Â isÂ true,Â theÂ bufferÂ isÂ assumedÂ toÂ beÂ uniquely&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â referencedÂ andÂ theÂ elementsÂ areÂ movedÂ -Â insteadÂ ofÂ copiedÂ -Â toÂ theÂ new&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â buffer.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â TheÂ `minimumCapacity`Â isÂ theÂ lowerÂ boundÂ forÂ theÂ newÂ capacity.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â IfÂ `growForAppend`Â isÂ true,Â theÂ newÂ capacityÂ isÂ calculatedÂ using&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â `_growArrayCapacity`,Â butÂ atÂ leastÂ keptÂ atÂ `minimumCapacity`.&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///&lt;/span&gt;&lt;br/&gt;&lt;span&gt;///Â ThisÂ bufferÂ isÂ consumed,Â i.e.Â it&#x27;sÂ released.&lt;/span&gt;&lt;br/&gt;@_alwaysEmitIntoClient&lt;br/&gt;@&lt;span&gt;inline&lt;/span&gt;(never)&lt;br/&gt;@_semantics(&lt;span&gt;&quot;optimize.sil.specialize.owned2guarantee.never&quot;&lt;/span&gt;)&lt;br/&gt;internalÂ __consumingÂ funcÂ _consumeAndCreateNew(&lt;br/&gt;Â Â bufferIsUnique:Â Bool,Â minimumCapacity:Â Int,Â growForAppend:Â Bool&lt;br/&gt;)Â -&amp;gt;Â _ArrayBufferÂ {&lt;br/&gt;Â Â letÂ newCapacityÂ =Â _growArrayCapacity(oldCapacity:Â capacity,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â minimumCapacity:Â minimumCapacity,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â growForAppend:Â growForAppend)&lt;br/&gt;Â Â letÂ cÂ =Â count&lt;br/&gt;Â Â _internalInvariant(newCapacityÂ &amp;gt;=Â c)&lt;br/&gt;&lt;br/&gt;Â Â letÂ newBufferÂ =Â _ContiguousArrayBuffer&amp;lt;Element&amp;gt;(&lt;br/&gt;Â Â Â Â _uninitializedCount:Â c,Â minimumCapacity:Â newCapacity)&lt;br/&gt;&lt;br/&gt;Â Â &lt;span&gt;if&lt;/span&gt;Â bufferIsUniqueÂ {&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â AsÂ anÂ optimization,Â ifÂ theÂ originalÂ bufferÂ isÂ unique,Â weÂ canÂ justÂ move&lt;/span&gt;&lt;br/&gt;Â Â Â Â &lt;span&gt;//Â theÂ elementsÂ insteadÂ ofÂ copying.&lt;/span&gt;&lt;br/&gt;Â Â Â Â letÂ destÂ =Â newBuffer.firstElementAddress&lt;br/&gt;Â Â Â Â dest.moveInitialize(from:Â mutableFirstElementAddress,&lt;br/&gt;Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â count:Â c)&lt;br/&gt;Â Â Â Â _native.mutableCountÂ =Â &lt;span&gt;0&lt;/span&gt;&lt;br/&gt;Â Â }Â &lt;span&gt;else&lt;/span&gt;Â {&lt;br/&gt;Â Â Â Â _copyContents(&lt;br/&gt;Â Â Â Â Â Â subRange:Â &lt;span&gt;0.&lt;/span&gt;.&amp;lt;c,&lt;br/&gt;Â Â Â Â Â Â initializing:Â newBuffer.mutableFirstElementAddress)&lt;br/&gt;Â Â }&lt;br/&gt;Â Â &lt;span&gt;return&lt;/span&gt;Â _ArrayBuffer(_buffer:Â newBuffer,Â shiftedToStartIndex:Â &lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥æ¸…æ¥šåœ°çœ‹åˆ°ä¼šè°ƒç”¨&lt;code&gt;_createNewBuffer&lt;/code&gt;æ–¹æ³•ï¼Œè€Œ&lt;code&gt;_createNewBuffer&lt;/code&gt;æ–¹æ³•æ ¹æ®ä¸€ä¸ªæ¡ä»¶åˆ¤æ–­å»è°ƒç”¨&lt;code&gt;_buffer&lt;/code&gt;çš„&lt;code&gt;_consumeAndCreateNew&lt;/code&gt;æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•å°±ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„&lt;code&gt;buffer&lt;/code&gt;&lt;/p&gt;&lt;pre&gt;&lt;code&gt;letÂ newBufferÂ =Â _ContiguousArrayBuffer&amp;lt;Element&amp;gt;(&lt;br/&gt;Â Â Â Â _uninitializedCount:Â c,Â minimumCapacity:Â newCapacity)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç›¸å½“äºå¼€è¾Ÿäº†ä¸€ä¸ªæ–°çš„å †ç©ºé—´ç”¨äºè¢«ä¿®æ”¹åçš„æ•°ç»„ï¼Œæ‰€ä»¥å†™æ—¶å¤åˆ¶çš„æœ¬è´¨å°±æ˜¯æŸ¥çœ‹&lt;code&gt;_ContiguousArrayStorage&lt;/code&gt;çš„å¼ºå¼•ç”¨è®¡æ•°&lt;/p&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;æ–°åˆ›å»ºä¸€ä¸ªæ•°ç»„&lt;code&gt;num&lt;/code&gt;ï¼Œ&lt;code&gt;_ContiguousArrayStorage&lt;/code&gt;å¼ºå¼•ç”¨è®¡æ•°æ˜¯0&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ­¤åˆ»&lt;code&gt;num&lt;/code&gt;æ·»åŠ å…ƒç´ ï¼Œå‘ç°&lt;code&gt;_ContiguousArrayStorage&lt;/code&gt;çš„å¼ºå¼•ç”¨è®¡æ•°æ˜¯0ï¼Œè¯´æ˜è‡ªå·±æ—¶å”¯ä¸€çš„å¼•ç”¨ï¼Œæ‰€ä»¥ç›´æ¥ç©ºé—´æœ«å°¾æ·»åŠ å…ƒç´ å°±è¡Œ&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å½“ç”¨&lt;code&gt;copyNum&lt;/code&gt;å¤åˆ¶æ•°ç»„&lt;code&gt;num&lt;/code&gt;æ—¶ï¼Œä¸è¿‡æ˜¯æŠŠ&lt;code&gt;num&lt;/code&gt;çš„&lt;code&gt;_ContiguousArrayStorage&lt;/code&gt;å¤åˆ¶ç»™äº†&lt;code&gt;copyNum&lt;/code&gt;ï¼Œ&lt;code&gt;copyNum&lt;/code&gt;çš„&lt;code&gt;_ContiguousArrayStorage&lt;/code&gt;ä¸&lt;code&gt;num&lt;/code&gt;çš„&lt;code&gt;_ContiguousArrayStorage&lt;/code&gt;çš„æ˜¯åŒä¸€ä¸ªï¼Œä¸è¿‡&lt;code&gt;_ContiguousArrayStorage&lt;/code&gt;çš„å¼ºå¼•ç”¨è®¡æ•°å˜ä¸º1äº†ï¼Œå› ä¸ºè¿™é‡Œæ²¡æœ‰å¼€è¾Ÿæ–°çš„ç©ºé—´ï¼Œéå¸¸èŠ‚çœç©ºé—´&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ­¤åˆ»æ•°ç»„&lt;code&gt;num&lt;/code&gt;å†æ¬¡æ·»åŠ å…ƒç´ ï¼Œå‘ç°&lt;code&gt;_ContiguousArrayStorage&lt;/code&gt;çš„å¼ºå¼•ç”¨è®¡æ•°ä¸º1ï¼Œä¸ä¸º0ï¼Œè¯´æ˜è‡ªå·±ä¸æ˜¯å”¯ä¸€å¼•ç”¨ï¼Œå¼€è¾Ÿæ–°çš„ç©ºé—´ï¼Œæ–°å»ºä¸€ä¸ª&lt;code&gt;_ContiguousArrayStorage&lt;/code&gt;ï¼Œå¤åˆ¶åŸæœ‰æ•°ç»„å†…å®¹åˆ°æ–°çš„ç©ºé—´&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;éªŒè¯ç»“è®ºï¼Œè¾“å…¥ä»¥ä¸‹ä»£ç &lt;/p&gt;&lt;pre&gt;&lt;code&gt;&lt;span&gt;var&lt;/span&gt;Â num:Â &lt;span&gt;Array&lt;/span&gt;&amp;lt;&lt;span&gt;Int&lt;/span&gt;&amp;gt;Â =Â [&lt;span&gt;1&lt;/span&gt;,Â &lt;span&gt;2&lt;/span&gt;,Â &lt;span&gt;3&lt;/span&gt;]&lt;br/&gt;&lt;span&gt;withUnsafePointer&lt;/span&gt;(to:Â &amp;amp;num)Â {&lt;br/&gt;Â Â Â Â &lt;span&gt;print&lt;/span&gt;($&lt;span&gt;0&lt;/span&gt;)&lt;br/&gt;}&lt;br/&gt;&lt;span&gt;var&lt;/span&gt;Â copyNumÂ =Â num&lt;br/&gt;num.append(&lt;span&gt;4&lt;/span&gt;)&lt;br/&gt;&lt;span&gt;print&lt;/span&gt;(&lt;span&gt;&quot;end&quot;&lt;/span&gt;)&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;åˆ†åˆ«åœ¨&lt;code&gt;var copyNum = num&lt;/code&gt;ï¼Œ&lt;code&gt;num.append(4)&lt;/code&gt;å’Œ&lt;code&gt;print(&quot;end&quot;)&lt;/code&gt;æ‰“ä¸Šæ–­ç‚¹&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img js_insertlocalimg&quot; data-ratio=&quot;0.7171875&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/qMicvibdvl7p2Z6yyGHib8LlMm1yuBcESJmv5SUBqef0CcdZl8d7ricGKXEibnAhdRDxcicwGBgcSfibITzWJubOQB7HA/640?wx_fmt=jpeg&quot; data-type=&quot;jpeg&quot; data-w=&quot;1280&quot;/&gt;&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;&lt;figure&gt;&lt;br/&gt;&lt;/figure&gt;&lt;h3&gt;&lt;span&gt;æ€»ç»“&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Swift&lt;/code&gt;çš„æ•°ç»„è™½ç„¶æ˜¯&lt;code&gt;Struct&lt;/code&gt;ç±»å‹ï¼Œä½†æ˜¯æ•°ç»„çš„å­˜æ”¾è¿˜æ˜¯åœ¨å †ç©ºé—´&lt;/p&gt;&lt;p&gt;&lt;code&gt;Swift&lt;/code&gt;çš„æ•°ç»„çš„å†™æ—¶å¤åˆ¶ç‰¹æ€§æ˜¯æ ¹æ®å †ç©ºé—´çš„å¼ºå¼•ç”¨è®¡æ•°æ˜¯å¦å”¯ä¸€ï¼Œè€Œå”¯ä¸€çš„åˆ¤æ–­å¼ºå¼•ç”¨è®¡æ•°æ˜¯å¦ç­‰äº0ï¼Œå¦‚æœä¸ç­‰äº0æ‰ä¼šå»å¼€è¾Ÿæ–°çš„ç©ºé—´è¿›è¡Œå­˜å‚¨&lt;/p&gt;&lt;h2&gt;&lt;span&gt;å‚è€ƒæ–‡æ¡£&lt;/span&gt;&lt;span/&gt;&lt;/h2&gt;&lt;ul class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;NSMutableArrayåŸç†æ­éœ²ï¼šhttp://blog.joyingx.me/2015/05/03/NSMutableArray%20%E5%8E%9F%E7%90%86%E6%8F%AD%E9%9C%B2/)&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ¢ç´¢Swiftä¸­Arrayçš„åº•å±‚å®ç°ï¼šhttps://juejin.cn/post/6931236309176418311&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-backh=&quot;453&quot; data-backw=&quot;1080&quot; data-ratio=&quot;0.41944444444444445&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_jpg/qMicvibdvl7p3cD9ODoZjicUHhYiaoa7JwAVxibNKVTL7VfFNiatt4icU6ic0v19QGNk3KGiaib92CYhIjH05ZX8NDfUSWgQ/640?wx_fmt=jpegwxfrom=5wx_lazy=1wx_co=1&quot; data-type=&quot;jpegwxfrom=5wx_lazy=1wx_co=1&quot; data-w=&quot;1080&quot;/&gt;&lt;/p&gt;&lt;p&gt;&lt;mp-style-type data-value=&quot;3&quot;/&gt;&lt;/p&gt;&lt;/div&gt;

          
        &lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
<item>
<guid>1856818b93a96c0e6715c0c8706d4a4f</guid>
<title>MySQL ä¸»ä»æ¨¡å¼é‡‡ç”¨ GTID çš„å®è·µ</title>
<link>https://toutiao.io/k/owbwcqm</link>
<content:encoded>&lt;div&gt;&lt;div&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½ å¥½ï¼Œæˆ‘æ˜¯æ‚Ÿç©ºã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æœ¬æ–‡ä¸»è¦å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.3470319634703196&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ0y0kbmE8yz1AjZ9Z2rFCbibQxxhoQjg1QXxBm0NRoM7Oozxb3NIoHNAbxbHVd401nO6xGhw2Nna9g/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1752&quot;/&gt;&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ä¸€ã€èƒŒæ™¯&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†ä¿è¯é«˜å¯ç”¨ï¼Œä¹‹å‰åœ¨æµ‹è¯•ç¯å¢ƒéƒ¨ç½²äº†ä¸€å¥— MySQL åŒä¸»æ¨¡å¼ï¼Œå½“ä¸€ä¸ªä¸»åº“æœåŠ¡å‡ºç°å¼‚å¸¸ï¼Œå¯ä»¥å°†æµé‡åˆ‡åˆ°å¦å¤–ä¸€ä¸ªä¸»åº“ï¼Œä¸¤ä¸ªä¸»åº“ä¹‹é—´ç›¸äº’åŒæ­¥æ•°æ®ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;åŒä¸»æ¨¡å¼&lt;/span&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åŒä¸»æ¨¡å¼çš„åŸç†å›¾å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.1875&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ34ZChbvlXiakQocdWlE76ddF3osUryJ4DMh6KfMBrXxoPtxVkTV0BibypzY8P9lZCampKTKzeuSYNg/640?wx_fmt=png&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&amp;amp;wx_co=1&quot; data-type=&quot;png&quot; data-w=&quot;896&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä½†æ˜¯ç»å¸¸å‡ºç°æ•°æ®å†²çªçš„é—®é¢˜ï¼Œäºæ˜¯æˆ‘ä»¬åˆæŠŠ&lt;code&gt;åŒä¸»æ¨¡å¼&lt;/code&gt;æ”¹ä¸ºäº†&lt;code&gt;ä¸»ä»è¯»å†™åˆ†ç¦»æ¨¡å¼&lt;/code&gt;ã€‚ä¸»åº“ä½œä¸ºè¯»å†™åº“ï¼Œå†åŠ ä¸Šä¸€ä¸ªä»åº“ç”¨æ¥åš &lt;span&gt;I/O å¯†é›†å‹&lt;/span&gt;çš„ä»»åŠ¡ï¼ˆå¦‚å¤§é‡çš„æ•°æ®ç»Ÿè®¡æ“ä½œï¼‰ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;p&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-galleryid=&quot;&quot; data-ratio=&quot;0.4051094890510949&quot; data-s=&quot;300,640&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ0tibFY1Ml1mCQQQ5mABVZtGE5bL9H5OvrBjC7OWkVbgvTSXxcJ4lGcKRy1riaMQ4uKMDic4AlDibZyLQ/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1096&quot;/&gt;&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦å¤–ä»åº“å¤åˆ¶çš„æ¨¡å¼é‡‡ç”¨&lt;code&gt;ä½ç‚¹&lt;/code&gt;çš„æ–¹å¼ï¼šæŒ‡å®š binlog æ–‡ä»¶å’Œ binlog ä½ç½®ï¼Œè¿™æ ·ä»åº“å°±çŸ¥é“äº†å¤åˆ¶çš„èµ·å§‹ä½ç½®ã€‚(ä¸‹æ–‡ä¼šè®²è§£è¿™ç§æ–¹å¼ï¼‰&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;è™½ç„¶æ”¹ä¸ºäº†ä¸»ä»æ¨¡å¼ï¼Œä½†ä¾æ—§é‡åˆ°äº†äº›é—®é¢˜ï¼š&lt;/span&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é—®é¢˜ 1&lt;/span&gt;ï¼šä»åº“ B å¤åˆ¶æ•°æ®æ—¶ï¼Œå‡ºç°äº†ä¸»é”®å†²çªé—®é¢˜ï¼Œå¯¼è‡´åŒæ­¥å¤±è´¥ï¼Œä»åº“åœæ­¢å¤åˆ¶ã€‚çŒœæµ‹å› ä¸»åº“é…ç½®çš„ binlog æ—¥å¿—çš„æ ¼å¼ä¸º &lt;code&gt;mixed&lt;/code&gt;ï¼Œä»åº“åŒæ­¥æ—¶å‡ºç°ä¸ä¸€è‡´çš„æƒ…å†µã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é—®é¢˜ 2&lt;/span&gt;ï¼šä»åº“ B åœæ­¢å¤åˆ¶åï¼Œå¯¼è‡´å¾ˆå¤šæ•°æ®æœªåŒæ­¥åˆ°ä»åº“ï¼Œå‡ºç°ä¸»ä»å¤§é‡æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é—®é¢˜ 3&lt;/span&gt;ï¼šä»åº“ B æƒ³è¦æ¢å¤å¤åˆ¶ï¼Œå¿…é¡»å…ˆè§£å†³åŒæ­¥å¤±è´¥çš„é—®é¢˜æ‰èƒ½æ¢å¤ã€‚æ’æŸ¥éš¾åº¦è¾ƒå¤§ï¼Œè€—æ—¶ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é—®é¢˜ 4&lt;/span&gt;ï¼šä»åº“ B æ¢å¤æ—¶ï¼Œå¿…é¡»çŸ¥é“åŒæ­¥&lt;span&gt;ä½ç‚¹&lt;/span&gt;ï¼Œä¹Ÿå°±æ˜¯ä»å“ªä¸ª binlog æ–‡ä»¶å’Œ binlog ä½ç½®æ–­å¼€å¤åˆ¶çš„ï¼Œä¸”å³ä½¿æ‰¾åˆ°äº†ä½ç‚¹ï¼Œä¹Ÿä¸æ˜¯ç²¾ç¡®çš„ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é—®é¢˜ 5&lt;/span&gt;ï¼šä»åº“ B å› åŒæ­¥å¼‚å¸¸å¯¼è‡´åœæ­¢å¤åˆ¶åˆ°æ¢å¤å¤åˆ¶è¿™æ®µæœŸé—´ï¼Œä¸»åº“ A è‡ªåŠ¨æ¸…ç†äº†å‡ å¤©å‰çš„ binlog æ—¥å¿—ï¼Œè€Œè¿™äº›æ—¥å¿—ä»åº“ B è¿˜æœªæ¥å¾—åŠåŒæ­¥ï¼Œè¿›è€Œå¯¼è‡´å†æ¬¡åŒæ­¥å¤±è´¥ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;span&gt;é—®é¢˜ 6&lt;/span&gt;ï¼šä¸»ä»å­˜åœ¨åŒæ­¥å»¶è¿Ÿã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;è¿™ç¯‡æˆ‘ä»¬æ¥æ¢è®¨ä¸‹é—®é¢˜ 4 å’Œé—®é¢˜ 6ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­&lt;strong&gt;é—®é¢˜ 4&lt;/strong&gt; æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¤´ç–¼çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¸€èˆ¬æ˜¯é€šè¿‡æŸ¥çœ‹ä»åº“ B å½“å‰çš„åŒæ­¥çŠ¶æ€æ‹¿åˆ°åŒæ­¥ä½ç‚¹ï¼Œç„¶åè®¾ç½®åŒæ­¥ä½ç‚¹åã€‚ä½†æ˜¯é‡æ–°å¯åŠ¨åŒæ­¥çš„æ—¶å€™åˆä¼šå‡ºç°åŒæ­¥å¼‚å¸¸ï¼Œæ¯”å¦‚ä»åº“ B å¯èƒ½ä¼šå‡ºç° Duplicate entry â€˜id_of_Râ€™ for key â€˜PRIMARYâ€™ é”™è¯¯ï¼Œæç¤ºå‡ºç°äº†ä¸»é”®å†²çªï¼Œç„¶ååœæ­¢åŒæ­¥ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†å‡å°‘ä½ç‚¹åŒæ­¥å¼•å…¥çš„å¤æ‚åº¦ï¼Œæˆ‘ä»¬åˆ‡æ¢æˆäº† GTID æ¨¡å¼ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯¹äº&lt;strong&gt;é—®é¢˜ 6&lt;/strong&gt;ï¼Œæœ¬ç¯‡ä¹Ÿä»…é™äºæ¢è®¨å¦‚ä½•è§‚å¯Ÿå»¶è¿Ÿï¼Œå¯¹äºå¦‚ä½•å‡å°‘å»¶è¿Ÿä¸åœ¨æœ¬ç¯‡æ¢è®¨èŒƒå›´ä¹‹å†…ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å±•å¼€çœ‹ä¸‹ä½ç‚¹åŒæ­¥çš„ç—›ç‚¹ã€‚&lt;/p&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;äºŒã€ä½ç‚¹åŒæ­¥çš„ç—›ç‚¹&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.1 é€šè¿‡ä½ç‚¹åŒæ­¥çš„åŸç†å›¾&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸ºäº†æ›´æ¸…æ™°åœ°ç†è§£ä¸»ä»é‡‡ç”¨ä½ç‚¹åŒæ­¥çš„åŸç†ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªåŸç†å›¾ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.0513761467889908&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ0y0kbmE8yz1AjZ9Z2rFCbib8mmtZuLRkFYYKNz1P8IZtvL06ogsl4rxTDicPkfeibS3ZUZqH5AJO6PA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1090&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;1ã€&lt;/strong&gt;ä¸»åº“ä¼šç”Ÿæˆå¤šä¸ª binlog æ—¥å¿—æ–‡ä»¶ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;2ã€&lt;/strong&gt;ä»åº“çš„I/O çº¿ç¨‹è¯·æ±‚æŒ‡å®šæ–‡ä»¶å’ŒæŒ‡å®šä½ç½®çš„ binlog æ—¥å¿—æ–‡ä»¶ï¼ˆä½ç‚¹ï¼‰ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;3ã€&lt;/strong&gt;ä¸»åº“ dump çº¿ç¨‹è·å–æŒ‡å®šä½ç‚¹çš„ binlog æ—¥å¿—ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;4ã€&lt;/strong&gt;ä¸»åº“æŒ‰ç…§ä»åº“å‘é€ç»™æ¥çš„ä½ç‚¹ä¿¡æ¯è¯»å– binlogï¼Œç„¶åæ¨é€ binlog ç»™ä»åº“ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;5ã€&lt;/strong&gt;ä»åº“å°†å¾—åˆ°çš„ binlog å†™åˆ°æœ¬åœ°çš„ relay log (ä¸­ç»§æ—¥å¿—) æ–‡ä»¶ä¸­ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;6ã€&lt;/strong&gt;ä»åº“çš„ SQL çº¿ç¨‹è¯»å–å’Œè§£æ relay log æ–‡ä»¶ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;7ã€&lt;/strong&gt;ä»åº“çš„ SQL çº¿ç¨‹é‡æ”¾ relay log ä¸­çš„å‘½ä»¤ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“æˆ‘ä»¬ä½¿ç”¨ä½ç‚¹åŒæ­¥çš„æ–¹å¼æ—¶ï¼Œä¸¤ç§åœºæ™¯ä¸‹çš„æ“ä½œæ­¥éª¤æ¯”è¾ƒå¤æ‚ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;2.2 ç—›ç‚¹&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç—›ç‚¹1ï¼šé¦–æ¬¡å¼€å¯ä¸»ä»å¤åˆ¶çš„æ­¥éª¤å¤æ‚&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ç¬¬ä¸€æ¬¡å¼€å¯ä¸»ä»åŒæ­¥æ—¶ï¼Œè¦æ±‚ä»åº“å’Œä¸»åº“æ˜¯ä¸€è‡´çš„ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;æ‰¾åˆ°ä¸»åº“çš„ binlog ä½ç‚¹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è®¾ç½®ä»åº“çš„ binlog ä½ç‚¹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;å¼€å¯ä»åº“çš„å¤åˆ¶çº¿ç¨‹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h4 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ç—›ç‚¹2ï¼šæ¢å¤ä¸»ä»å¤åˆ¶çš„æ­¥éª¤å¤æ‚&lt;/span&gt;&lt;span/&gt;&lt;/h4&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;æ‰¾åˆ°ä»åº“å¤åˆ¶çº¿ç¨‹åœæ­¢æ—¶çš„ä½ç‚¹ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è§£å†³å¤åˆ¶å¼‚å¸¸çš„äº‹åŠ¡ã€‚æ— æ³•è§£å†³æ—¶å°±éœ€è¦æ‰‹åŠ¨è·³è¿‡æŒ‡å®šç±»å‹çš„é”™è¯¯ï¼Œæ¯”å¦‚é€šè¿‡è®¾ç½®slave_skip_errors=1032,1062ã€‚å½“ç„¶è¿™ä¸ªå‰ææ¡ä»¶æ˜¯è·³è¿‡è¿™ç±»é”™è¯¯æ˜¯æ— æŸçš„ã€‚ï¼ˆ1062 é”™è¯¯æ˜¯æ’å…¥æ•°æ®æ—¶å”¯ä¸€é”®å†²çªï¼›1032 é”™è¯¯æ˜¯åˆ é™¤æ•°æ®æ—¶æ‰¾ä¸åˆ°è¡Œï¼‰&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;ä¸è®ºæ˜¯é¦–æ¬¡å¼€å¯åŒæ­¥æ—¶éœ€è¦æ‰¾ä½ç‚¹å’Œè®¾ç½®ä½ç‚¹ï¼Œè¿˜æ˜¯æ¢å¤ä¸»ä»å¤åˆ¶æ—¶ï¼Œè®¾ç½®ä½ç‚¹å’Œå¿½ç•¥é”™è¯¯ï¼Œ&lt;span&gt;è¿™äº›æ­¥éª¤éƒ½æ˜¾å¾—è¿‡äºå¤æ‚ï¼Œè€Œä¸”å®¹æ˜“å‡ºé”™&lt;/span&gt;ã€‚æ‰€ä»¥ MySQL 5.6 ç‰ˆæœ¬å¼•å…¥äº† GTIDï¼Œå½»åº•è§£å†³äº†è¿™ä¸ªå›°éš¾ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;ä¸‰ã€GTID æ–¹æ¡ˆ&lt;/span&gt;&lt;/h2&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3.1 GTID æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;GTID çš„å…¨ç§°æ˜¯ Global Transaction Identifierï¼Œå…¨å±€äº‹åŠ¡ IDï¼Œå½“ä¸€ä¸ªäº‹åŠ¡æäº¤æ—¶ï¼Œå°±ä¼šç”Ÿæˆä¸€ä¸ª GTIDï¼Œç›¸å½“äºäº‹åŠ¡çš„å”¯ä¸€æ ‡è¯†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;GTID é•¿è¿™æ ·ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;c5d74746-d7ec-11ec-bf8f-0242ac110002:1&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç»“æ„ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;GTID=server_uuid:gno&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;server_uuid æ˜¯ä¸€ä¸ªå®ä¾‹ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæ˜¯ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„å€¼ï¼›&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;gno æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œåˆå§‹å€¼æ˜¯ 1ï¼Œæ¯æ¬¡æäº¤äº‹åŠ¡çš„æ—¶å€™åˆ†é…ç»™è¿™ä¸ªäº‹åŠ¡ï¼Œå¹¶åŠ  1ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯ä¸ª MySQL å®ä¾‹éƒ½ç»´æŠ¤äº†ä¸€ä¸ª GTID é›†åˆï¼Œç”¨æ¥å¯¹åº”â€œè¿™ä¸ªå®ä¾‹æ‰§è¡Œè¿‡çš„æ‰€æœ‰äº‹åŠ¡â€ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span&gt;3.2 GTID çš„ä¼˜åŠ¿&lt;/span&gt;&lt;/h3&gt;&lt;section data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; data-website=&quot;https://www.mdnice.com&quot;&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;1ã€æ›´ç®€å•çš„å®ç° failoverï¼Œä¸ç”¨ä»¥å‰é‚£æ ·åœ¨éœ€è¦æ‰¾ä½ç‚¹ï¼ˆlog_file å’Œ log_posï¼‰ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;2ã€æ›´ç®€å•çš„æ­å»ºä¸»ä»å¤åˆ¶ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;3ã€æ¯”ä¼ ç»Ÿçš„å¤åˆ¶æ›´åŠ å®‰å…¨ã€‚&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;&lt;p&gt;4ã€GTIDæ˜¯è¿ç»­çš„æ²¡æœ‰ç©ºæ´çš„ï¼Œä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œé›¶ä¸¢å¤±ã€‚&lt;span/&gt;&lt;/p&gt;&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/section&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3.3 å¦‚ä½•å¯ç”¨ GTID&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¿®æ”¹ä¸»åº“å’Œä»åº“çš„é…ç½®æ–‡ä»¶ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;&lt;span&gt;#GTID:&lt;/span&gt;&lt;br/&gt;gtid_mode=on&lt;br/&gt;enforce_gtid_consistency=on&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä»åº“é…ç½®åŒæ­¥çš„å‚æ•°ï¼š&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;CHANGEÂ MASTERÂ TOÂ &lt;br/&gt;MASTER_HOST=&lt;span&gt;$host_name&lt;/span&gt;Â &lt;br/&gt;MASTER_PORT=&lt;span&gt;$port&lt;/span&gt;Â &lt;br/&gt;MASTER_USER=&lt;span&gt;$user_name&lt;/span&gt;Â &lt;br/&gt;MASTER_PASSWORD=&lt;span&gt;$password&lt;/span&gt;Â &lt;br/&gt;master_auto_position=1Â &lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å…¶ä¸­ master_auto_position æ ‡è¯†ä¸»ä»å…³ç³»ä½¿ç”¨çš„ GTID åè®®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ç›¸æ¯”ä¹‹å‰çš„é…ç½®ï¼Œ&lt;span&gt;MASTER_LOG_FILE å’Œ MASTER_LOG_POS å‚æ•°å·²ç»ä¸éœ€è¦äº†&lt;/span&gt;ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;3.4 GTID åŒæ­¥æ–¹æ¡ˆ&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;GTID åŒæ­¥çš„åŸç†å›¾ã€‚&lt;/p&gt;&lt;blockquote data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;p&gt;&lt;span&gt;GTID æ–¹æ¡ˆ&lt;/span&gt;ï¼šä¸»åº“è®¡ç®—ä¸»åº“ GTID é›†åˆå’Œä»åº“ GTID çš„é›†åˆçš„å·®é›†ï¼Œä¸»åº“æ¨é€å·®é›† binlog ç»™ä»åº“ã€‚&lt;/p&gt;&lt;/blockquote&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ä»åº“è®¾ç½®å®ŒåŒæ­¥å‚æ•°åï¼Œä¸»åº“ A çš„GTID é›†åˆè®°ä¸ºé›†åˆ xï¼Œä»åº“ B çš„ GTID é›†åˆè®°ä¸º yã€‚ä»åº“åŒæ­¥çš„é€»è¾‘å¦‚ä¸‹ï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;1.0510046367851622&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ0y0kbmE8yz1AjZ9Z2rFCbibxMMj4P6OqEVX92vsZbLcMf8iacasnU9sZxh5mY8iaWwRGAdZQ4NVrPzA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1294&quot;/&gt;&lt;/figure&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ä»åº“ B æŒ‡å®šä¸»åº“ Aï¼ŒåŸºäºä¸»å¤‡åè®®ç®€å†è¿æ¥ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä»åº“ B æŠŠé›†åˆ y å‘ç»™ä¸»åº“ Aã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸»åº“ A è®¡ç®—å‡ºé›†åˆ x å’Œé›†åˆ y çš„å·®é›†ï¼Œä¹Ÿå°±æ˜¯é›†åˆ x ä¸­å­˜åœ¨ï¼Œé›†åˆ y ä¸­ä¸å­˜åœ¨çš„ GTID é›†åˆã€‚æ¯”å¦‚é›†åˆ x æ˜¯ 1~100ï¼Œé›†åˆ y æ˜¯ 1~90ï¼Œé‚£ä¹ˆè¿™ä¸ªå·®é›†å°±æ˜¯ 91~100ã€‚è¿™é‡Œä¼šåˆ¤æ–­é›†åˆ x æ˜¯ä¸æ˜¯åŒ…å«æœ‰é›†åˆ y çš„æ‰€æœ‰ GTIDï¼Œå¦‚æœä¸æ˜¯åˆ™è¯´æ˜ä¸»åº“ A åˆ é™¤äº†ä»åº“ B éœ€è¦çš„ binlogï¼Œä¸»åº“ A ç›´æ¥è¿”å›é”™è¯¯ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸»åº“ A ä»è‡ªå·±çš„ binlog æ–‡ä»¶é‡Œé¢ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸åœ¨é›†åˆ y ä¸­çš„äº‹åŠ¡ GTIDï¼Œä¹Ÿå°±æ˜¯æ‰¾åˆ°äº† 91ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä¸»åº“ A ä» GTID = 91 çš„äº‹åŠ¡å¼€å§‹ï¼Œå¾€åè¯» binlog æ–‡ä»¶ï¼ŒæŒ‰é¡ºåºå– binlogï¼Œç„¶åå‘ç»™ Bã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;ä»åº“ B çš„ I/O çº¿ç¨‹è¯»å– binlog æ–‡ä»¶ç”Ÿæˆ relay logï¼ŒSQL çº¿ç¨‹è§£æ relay logï¼Œç„¶åæ‰§è¡Œ SQL è¯­å¥ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;strong&gt;GTID åŒæ­¥æ–¹æ¡ˆå’Œä½ç‚¹åŒæ­¥çš„æ–¹æ¡ˆåŒºåˆ«æ˜¯ï¼š&lt;/strong&gt;&lt;/p&gt;&lt;ul data-tool=&quot;mdniceç¼–è¾‘å™¨&quot; class=&quot;list-paddingleft-1&quot;&gt;&lt;li&gt;&lt;section&gt;ä½ç‚¹åŒæ­¥æ–¹æ¡ˆæ˜¯é€šè¿‡äººå·¥åœ¨ä»åº“ä¸ŠæŒ‡å®šå“ªä¸ªä½ç‚¹ï¼Œä¸»åº“å°±å‘å“ªä¸ªä½ç‚¹ï¼Œä¸åšæ—¥å¿—çš„å®Œæ•´æ€§åˆ¤æ–­ã€‚&lt;/section&gt;&lt;/li&gt;&lt;li&gt;&lt;section&gt;è€Œ GTID æ–¹æ¡ˆæ˜¯é€šè¿‡ä¸»åº“æ¥è‡ªåŠ¨è®¡ç®—ä½ç‚¹çš„ï¼Œä¸éœ€è¦äººå·¥å»è®¾ç½®ä½ç‚¹ï¼Œå¯¹è¿ç»´äººå‘˜å‹å¥½ã€‚&lt;/section&gt;&lt;/li&gt;&lt;/ul&gt;&lt;h2 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;å››ã€å¦‚ä½•åˆ¤æ–­ä¸»ä»åº“æ˜¯å¦æœ‰å»¶è¿Ÿ&lt;/span&gt;&lt;/h2&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;ä¸Šé¢æåˆ°çš„é—®é¢˜ 6 æ˜¯ä¸»ä»è¯»å†™åˆ†ç¦»åï¼Œä»åº“å¤åˆ¶å­˜åœ¨å»¶è¿Ÿï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥æ¢è®¨ä¸‹å¦‚ä½•è§‚å¯Ÿä¸»ä»å»¶è¿Ÿå¤šå°‘çš„é—®é¢˜ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ–¹æ¡ˆä¸€ï¼šåˆ¤æ–­ä»åº“çš„åŒæ­¥çŠ¶æ€å‚æ•° seconds_behind_master æ˜¯å¦ä¸º 0ã€‚ï¼ˆä¸å‡†ç¡®ï¼‰&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ–¹æ¡ˆäºŒï¼šå¯¹æ¯”ä½ç‚¹ç¡®ä¿ä¸»å¤‡æ— å»¶è¿Ÿã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ–¹æ¡ˆä¸‰ï¼šå¯¹æ¯” GTID é›†åˆç¡®ä¿ä¸»å¤‡æ— å»¶è¿Ÿã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ–¹æ¡ˆä¸€ï¼šæŸ¥çœ‹ seconds_behind_master&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥åœ¨ä»åº“ä¸Šæ‰§è¡Œ slow slave status å‘½ä»¤æ¥çœ‹æ‰§è¡Œç»“æœé‡Œé¢çš„ &lt;code&gt;seconds_behind_master&lt;/code&gt; å‚æ•°çš„å€¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒSeconds_Behind_Master ç­‰äº 0&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3241252302025783&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ0y0kbmE8yz1AjZ9Z2rFCbib5zORALpPyiaoibx58icFTubicaO0fIWVzUgaFibPIWI8Ig6t7eyB6RssWNw/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;543&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;Seconds_Behind_Master çš„å•ä½æ˜¯ç§’ï¼Œæ‰€ä»¥ç²¾åº¦ä¸å‡†ç¡®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ‰€ä»¥ä¸ºäº†ä¿è¯æŸ¥è¯¢çš„æ•°æ®æ˜¯å’Œä¸»åº“ä¸€è‡´çš„ï¼Œå°±éœ€è¦å…ˆåˆ¤æ–­ seconds_behind_master æ˜¯å¦å·²ç»ç­‰äº 0ï¼Œå¦‚æœä¸ç­‰äº 0ï¼Œå°±å¿…é¡»ç­‰åˆ°è¿™ä¸ªå‚æ•°å˜ä¸º 0 æ‰èƒ½æ‰§è¡ŒæŸ¥è¯¢è¯·æ±‚ã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ–¹æ¡ˆäºŒï¼šå¯¹æ¯”ä½ç‚¹&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¯ä»¥é€šè¿‡æŸ¥çœ‹ä»åº“å½“å‰çš„åŒæ­¥ä½ç‚¹æ¥ç¡®è®¤ä»åº“åŒæ­¥æ˜¯å¦æœ‰å»¶è¿Ÿã€‚ä¸‹å›¾æ˜¯åœ¨ä»åº“ä¸Šæ‰§è¡Œ &lt;code&gt;show slave status \G&lt;/code&gt;å‘½ä»¤åçš„ç»“æœï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.6237288135593221&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ0y0kbmE8yz1AjZ9Z2rFCbibAGHsZXtrS9Kv8ySjbmeq6abW020dXUpqGwU568RxBgkpUDZ9xkb5TA/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1180&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Master_Log_File&lt;/code&gt; å’Œ &lt;code&gt;Read_Master_Log_Pos&lt;/code&gt; è¿™ä¸¤ä¸ªå‚æ•°åˆèµ·æ¥è¡¨ç¤ºçš„æ˜¯è¯»åˆ°çš„ä¸»åº“çš„æœ€æ–°ä½ç‚¹ï¼Œç¬¬ä¸€å‚æ•°æ˜¯ä»£è¡¨è¯»å–åˆ°äº†å“ªä¸ªæ–‡ä»¶ï¼Œç¬¬äºŒä¸ªæ˜¯è¯»å–åˆ°çš„æ–‡ä»¶çš„ä½ç½®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Relay_Master_Log_File&lt;/code&gt; å’Œ &lt;code&gt;Exec_Master_Log_Pos&lt;/code&gt;ï¼Œè¿™ä¸¤ä¸ªå‚æ•°åˆèµ·æ¥è¡¨ç¤ºçš„æ˜¯ä»åº“æ‰§è¡Œçš„æœ€æ–°ä½ç‚¹ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœçº¢è‰²æ¡†èµ·æ¥çš„ä¸¤ä¸ªå‚æ•°ï¼š&lt;code&gt;Master_Log_File&lt;/code&gt; å’Œ &lt;code&gt;Relay_Master_Log_File&lt;/code&gt; ç›¸ç­‰ï¼Œåˆ™è¯´æ˜ä»åº“è¯»åˆ°çš„æœ€æ–°æ–‡ä»¶å’Œä¸»åº“ä¸Šç”Ÿæˆçš„æ–‡ä»¶ç›¸åŒï¼Œè¿™é‡Œéƒ½æ˜¯ mysql-bin.000934ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœè“è‰²æ¡†èµ·æ¥çš„ä¸¤ä¸ªå‚æ•° &lt;code&gt;Read_Master_Log_Pos&lt;/code&gt; å’Œ &lt;code&gt;Exec_Master_Log_Pos&lt;/code&gt; ç›¸ç­‰ï¼Œåˆ™è¯´æ˜ä»åº“è¯»åˆ°çš„æ—¥å¿—æ–‡ä»¶çš„ä½ç½®å’Œä»åº“ä¸Šæ‰§è¡Œæ—¥å¿—æ–‡ä»¶çš„ä½ç½®ç›¸åŒï¼Œè¿™é‡Œéƒ½æ˜¯ 59521082ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å½“ä¸Šé¢ä¸¤ç»„å‚æ•°éƒ½ç›¸ç­‰æ—¶ï¼Œåˆ™è¯´æ˜æ²¡æœ‰å»¶è¿Ÿã€‚&lt;/p&gt;&lt;h3 data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;span&gt;æ–¹æ¡ˆä¸‰ï¼šå¯¹æ¯” GTID é›†åˆ&lt;/span&gt;&lt;span/&gt;&lt;/h3&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ–¹æ¡ˆä¸‰æ˜¯å¯¹æ¯” GTID é›†åˆã€‚é¦–å…ˆæˆ‘ä»¬åœ¨ä»åº“ä¸Šæ‰§è¡Œ Â &lt;code&gt;show slave status \G&lt;/code&gt;æ¥æŸ¥çœ‹ GTID é›†åˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;&lt;figure data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;img class=&quot;rich_pages wxw-img&quot; data-ratio=&quot;0.3654970760233918&quot; data-src=&quot;https://mmbiz.qpic.cn/mmbiz_png/SfAHMuUxqJ0y0kbmE8yz1AjZ9Z2rFCbibicePBvx54LqrogZqFZQYzA5UQgibEI00Nic2l2QYXMbn0NiaE4HlhsjdPg/640?wx_fmt=png&quot; data-type=&quot;png&quot; data-w=&quot;1026&quot;/&gt;&lt;/figure&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Master_UUID&lt;/code&gt; è¡¨ç¤ºå½“å‰è¿æ¥çš„ä¸»åº“çš„ IDã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Auto_Position&lt;/code&gt;: 1 è¡¨ç¤ºä¸»å¤‡ä½¿ç”¨äº† GTID åè®®ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Retrieved_Gtid_Set&lt;/code&gt; è¡¨ç¤ºä»åº“æ”¶åˆ°çš„æ‰€æœ‰æ—¥å¿—çš„ GTID é›†åˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Executed_Gtid_Set&lt;/code&gt; è¡¨ç¤ºä»åº“å·²ç»æ‰§è¡Œå®Œæˆçš„ GTID é›†åˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å¦‚æœ Executed_Gtid_Set é›†åˆæ˜¯åŒ…å« Retrieved_Gtid_Setï¼Œåˆ™è¡¨ç¤ºä»åº“æ¥æ”¶åˆ°çš„æ—¥å¿—å·²ç»åŒæ­¥å®Œæˆã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ¯”å¦‚ä¸Šå›¾ä¸­ &lt;code&gt;Retrieved_Gtid_Set&lt;/code&gt; å€¼ä¸º&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;c5d74746-d7ec-11ec-bf8f-0242ac110002:1-87323&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‰é¢ä¸€æ®µæ˜¯ä¸»åº“ idï¼Œåé¢ä¸€æ®µ 1-87383 æ˜¯ GTID èŒƒå›´ã€‚è€Œ&lt;code&gt;Executed_Gtid_Set&lt;/code&gt; çš„å€¼æœ‰ä¸¤ä¸ªé›†åˆ&lt;/p&gt;&lt;pre data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;span/&gt;&lt;code&gt;7083ae1f-d7ef-11ec-a329-0242ac110002:1-2,&lt;br/&gt;c5d74746-d7ec-11ec-bf8f-0242ac110002:1-87323&lt;br/&gt;&lt;/code&gt;&lt;/pre&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;&lt;code&gt;Executed_Gtid_Set&lt;/code&gt; çš„ç¬¬äºŒä¸ªé›†åˆå’Œç¬¬ä¸€ä¸ªé›†åˆå®Œå…¨ä¸€è‡´ï¼Œç¬¬ä¸€ä¸ªé›†åˆ id å’Œ é›†åˆèŒƒå›´æ˜¯ä¸Šæ¬¡åŒæ­¥å¦å¤–ä¸€ä¸ªä¸»åº“çš„è®°å½•ã€‚è¿™é‡Œè¯´æ˜ä»åº“å·²ç»å’Œå½“å‰ä¸»åº“åŒæ­¥å®Œæˆäº†ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;æ–¹æ¡ˆäºŒå¯¹æ¯”ä½ç‚¹å’Œæ–¹æ¡ˆä¸‰çš„ GTID æ¯”å¯¹éƒ½è¦æ¯”æ–¹æ¡ˆä¸€çš„&lt;code&gt;seconds_behind_master&lt;/code&gt; æ›´å‡†ç¡®ã€‚ä½†æ˜¯è¿˜æ˜¯æ²¡æœ‰è¾¾åˆ°ç²¾ç¡®çš„ç¨‹åº¦ï¼Œéœ€è¦é…åˆåŠåŒæ­¥å¤åˆ¶ï¼ˆsemi-sync replicationï¼‰æ‰èƒ½è¾¾åˆ°ã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å°ç»“ï¼šæœ¬ç¯‡é€šè¿‡ GTID çš„æ–¹å¼æ›´å¥½åœ°å®ç°äº†ä¸»ä»èŠ‚ç‚¹çš„åŒæ­¥ï¼Œä»¥åŠå¦‚ä½•è§‚å¯Ÿä¸»ä»åŒæ­¥çš„å»¶è¿Ÿã€‚&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;å‚è€ƒèµ„æ–™ï¼š&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;www.passjava.cn&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;https://time.geekbang.org/column/article/77636&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;é«˜æ€§èƒ½ MySQL ç¬¬å››ç‰ˆ&lt;/p&gt;&lt;p data-tool=&quot;mdniceç¼–è¾‘å™¨&quot;&gt;åƒé‡‘è‰¯æ–¹ï¼šMySQLæ€§èƒ½ä¼˜åŒ–é‡‘å­—å¡”æ³•åˆ™&lt;/p&gt;&lt;/section&gt;&lt;/div&gt;&lt;/div&gt;</content:encoded>
</item>
</channel></rss>